<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><!-- hexo injector head_begin start --><link href="https://cdn.jsdelivr.net/npm/hexo-widget-tree@0.2.2/css/index.css" rel="stylesheet"/><!-- hexo injector head_begin end --><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>C++ä»é›¶å¼€å§‹ï¼ˆä¸‰ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸‹ï¼‰ç»§æ‰¿å’Œè™šå‡½æ•° | royhuang's blog</title><meta name="author" content="Wanghui Huang"><meta name="copyright" content="Wanghui Huang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="ğŸŒŸã€ŠC++ä»é›¶å¼€å§‹ã€‹ ç³»åˆ—ï¼Œå¼€å§‹æ›´æ–°ä¸­â€¦  C++ä»é›¶å¼€å§‹https:&#x2F;&#x2F;hwh.zone&#x2F;p&#x2F;62712 ä¸ƒã€ç»§æ‰¿å’Œè™šå‡½æ•° 7.1 ç»§æ‰¿ é¢å¯¹å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€ï¼Œç»§æ‰¿åœ¨é¢å¯¹å¯¹è±¡ä¸­çš„é‡è¦æ€§ä¸è¨€è€Œå–»ã€‚ 7.1.1 ä¸ºä»€ä¹ˆéœ€è¦ç»§æ‰¿ï¼Ÿ æƒ³è±¡è¿™ä¹ˆä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœå­˜åœ¨ä¸€äº›ç®€å•ã€åŸºæœ¬çš„å¯¹è±¡ï¼Œå¦‚ä½•æ¥åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Ÿ é€šå¸¸æˆ‘ä»¬ä½¿ç”¨å¯¹è±¡ç»„åˆå’Œå¯¹è±¡ç»§æ‰¿ä¸¤ç§æ–¹å¼ã€‚   å¯¹è±¡ç»„åˆã€‚è¿™ç¬¦åˆæˆ‘ä»¬æœ€ç›´è§‚çš„è®¤çŸ¥ï¼Œé€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="C++ä»é›¶å¼€å§‹ï¼ˆä¸‰ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸‹ï¼‰ç»§æ‰¿å’Œè™šå‡½æ•°">
<meta property="og:url" content="https://hwh.zone/p/60158/index.html">
<meta property="og:site_name" content="royhuang&#39;s blog">
<meta property="og:description" content="ğŸŒŸã€ŠC++ä»é›¶å¼€å§‹ã€‹ ç³»åˆ—ï¼Œå¼€å§‹æ›´æ–°ä¸­â€¦  C++ä»é›¶å¼€å§‹https:&#x2F;&#x2F;hwh.zone&#x2F;p&#x2F;62712 ä¸ƒã€ç»§æ‰¿å’Œè™šå‡½æ•° 7.1 ç»§æ‰¿ é¢å¯¹å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€ï¼Œç»§æ‰¿åœ¨é¢å¯¹å¯¹è±¡ä¸­çš„é‡è¦æ€§ä¸è¨€è€Œå–»ã€‚ 7.1.1 ä¸ºä»€ä¹ˆéœ€è¦ç»§æ‰¿ï¼Ÿ æƒ³è±¡è¿™ä¹ˆä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœå­˜åœ¨ä¸€äº›ç®€å•ã€åŸºæœ¬çš„å¯¹è±¡ï¼Œå¦‚ä½•æ¥åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Ÿ é€šå¸¸æˆ‘ä»¬ä½¿ç”¨å¯¹è±¡ç»„åˆå’Œå¯¹è±¡ç»§æ‰¿ä¸¤ç§æ–¹å¼ã€‚   å¯¹è±¡ç»„åˆã€‚è¿™ç¬¦åˆæˆ‘ä»¬æœ€ç›´è§‚çš„è®¤çŸ¥ï¼Œé€‚">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/about-bg.jpg">
<meta property="article:published_time" content="2022-02-08T08:24:59.978Z">
<meta property="article:modified_time" content="2022-02-09T03:25:08.744Z">
<meta property="article:author" content="Wanghui Huang">
<meta property="article:tag" content="C++">
<meta property="article:tag" content="æ•™ç¨‹">
<meta property="article:tag" content="C++åŸºç¡€">
<meta property="article:tag" content="ç»§æ‰¿">
<meta property="article:tag" content="è™šå‡½æ•°">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/about-bg.jpg"><link rel="shortcut icon" href="https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/cat-modified.png"><link rel="canonical" href="https://hwh.zone/p/60158/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="/" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":"true# copy button","highlightLang":false,"highlightHeightLimit":400},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: {"limitCount":80,"languages":{"author":"ä½œè€…: Wanghui Huang","link":"é“¾æ¥: ","source":"æ¥æº: royhuang's blog","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'C++ä»é›¶å¼€å§‹ï¼ˆä¸‰ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸‹ï¼‰ç»§æ‰¿å’Œè™šå‡½æ•°',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-02-09 11:25:08'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><meta name="google-site-verification" content="uO6C17u7YuZfMWvThEQ9nOGQS4GIN2zAM6hC4tH-RiM" /><meta name="baidu-site-verification" content="code-nRnoDyQJPT" /><script> var _hmt = _hmt || []; (function() { var hm = document.createElement("script"); hm.src = "https://hm.baidu.com/hm.js?13a4aefcbad9616a1f5859538d0d882e"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s); })(); </script><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/l-lin/font-awesome-animation/dist/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.min.css" media="defer" onload="this.media='all'"><script async src="https://cdn.jsdelivr.net/npm/hexo-butterfly-tag-plugins-plus@latest/lib/carousel-touch.min.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/cat.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">27</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">38</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">9</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/artitalk/"><i class="fa-fw fa-fw fa-fw fas fa-comment-dots"></i><span> è¯´è¯´</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> ç›®å½•</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> aboutME</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">royhuang's blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/artitalk/"><i class="fa-fw fa-fw fa-fw fas fa-comment-dots"></i><span> è¯´è¯´</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> ç›®å½•</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> aboutME</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">C++ä»é›¶å¼€å§‹ï¼ˆä¸‰ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸‹ï¼‰ç»§æ‰¿å’Œè™šå‡½æ•°</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2022-02-08T08:24:59.978Z" title="å‘è¡¨äº 2022-02-08 16:24:59">2022-02-08</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2022-02-09T03:25:08.744Z" title="æ›´æ–°äº 2022-02-09 11:25:08">2022-02-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/C/">C++</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/">ä»é›¶å¼€å§‹</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/C-%E5%9F%BA%E7%A1%80/">C++åŸºç¡€</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">12.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>44åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="C++ä»é›¶å¼€å§‹ï¼ˆä¸‰ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸‹ï¼‰ç»§æ‰¿å’Œè™šå‡½æ•°"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="twikoo_visitors"></span></span></div></div></div><article class="post-content" id="article-container"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><blockquote>
<p>ğŸŒŸ<a href="https://hwh.zone/p/62712/">ã€ŠC++ä»é›¶å¼€å§‹ã€‹</a> ç³»åˆ—ï¼Œå¼€å§‹æ›´æ–°ä¸­â€¦</p>
</blockquote>
<div class="tag link"><a class="link-card" title="C++ä»é›¶å¼€å§‹" href="https://hwh.zone/p/62712"><div class="left"><img src="https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/cat-modified.png"/></div><div class="right"><p class="text">C++ä»é›¶å¼€å§‹</p><p class="url">https://hwh.zone/p/62712</p></div></a></div>
<h2 id="ä¸ƒã€ç»§æ‰¿å’Œè™šå‡½æ•°">ä¸ƒã€ç»§æ‰¿å’Œè™šå‡½æ•°</h2>
<h3 id="7-1-ç»§æ‰¿">7.1 ç»§æ‰¿</h3>
<p>é¢å¯¹å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€ï¼Œç»§æ‰¿åœ¨é¢å¯¹å¯¹è±¡ä¸­çš„é‡è¦æ€§ä¸è¨€è€Œå–»ã€‚</p>
<h4 id="7-1-1-ä¸ºä»€ä¹ˆéœ€è¦ç»§æ‰¿ï¼Ÿ">7.1.1 ä¸ºä»€ä¹ˆéœ€è¦ç»§æ‰¿ï¼Ÿ</h4>
<p>æƒ³è±¡è¿™ä¹ˆä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœå­˜åœ¨ä¸€äº›ç®€å•ã€åŸºæœ¬çš„å¯¹è±¡ï¼Œå¦‚ä½•æ¥åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Ÿ</p>
<p>é€šå¸¸æˆ‘ä»¬ä½¿ç”¨å¯¹è±¡ç»„åˆå’Œå¯¹è±¡ç»§æ‰¿ä¸¤ç§æ–¹å¼ã€‚</p>
<ul>
<li>
<p><strong>å¯¹è±¡ç»„åˆ</strong>ã€‚è¿™ç¬¦åˆæˆ‘ä»¬æœ€ç›´è§‚çš„è®¤çŸ¥ï¼Œé€‚åˆæ–°å¯¹è±¡ä¸åŸºæœ¬å¯¹è±¡ä¹‹é—´å­˜åœ¨<code>has-a</code> å…³ç³»ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸€ä¸ªæˆ¿é—´æœ‰ä¸€å¼ æ¡Œå­å’Œå‡³å­ã€‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code>ClassRoom</code>ç±»ï¼Œç„¶åç»„åˆ<code>table</code> å’Œ <code>chair</code>æ„æˆ<code>ClassRoom</code>ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassRoom</span> // æ•™å®¤</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">    Table _table; <span class="comment">// æ¡Œå­</span></span><br><span class="line">    Chair _chair; <span class="comment">// æ¤…å­</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">     <span class="built_in">ClassRoom</span>(Table table,Chair chair):_table(table),_chair(chair)&#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>å¯¹è±¡ç»§æ‰¿</strong>ï¼Œä¹Ÿæ˜¯æœ¬èŠ‚çš„é‡ç‚¹ã€‚ä¸å¯¹è±¡ç»„åˆé€šè¿‡ç»„åˆå…¶ä»–å¯¹è±¡æ¥åˆ›å»ºæ–°å¯¹è±¡ä¸åŒï¼Œç»§æ‰¿ç›´æ¥è·å–å…¶ä»–å¯¹è±¡çš„å±æ€§å’Œè¡Œä¸ºï¼Œç„¶åè¿›è¡Œæ‰©å±•æ¥åˆ›å»ºæ–°å¯¹è±¡ã€‚</p>
<p>ä¸‹é¢çš„<code>ClassRoom</code> ä¾¿ç»§æ‰¿äº†<code>Room</code> ï¼Œè·å–äº†<code>Room</code>çš„<code>price</code> ã€<code>area</code> å±æ€§ï¼Œç„¶åå†è¿›è¡Œæ‰©å±•ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Room</span> </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"> <span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">double</span> _price;</span><br><span class="line">    <span class="keyword">double</span> _area;</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">     <span class="built_in">Room</span>(<span class="keyword">double</span> price,<span class="keyword">double</span> area):_price(price),_area(area)&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassRoom</span>:</span> <span class="keyword">public</span> Room</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">    Table _table; <span class="comment">// æ¡Œå­</span></span><br><span class="line">    Chair _chair; <span class="comment">// æ¤…å­</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">     <span class="built_in">ClassRoom</span>(Table table,Chair chair,<span class="keyword">double</span> price,<span class="keyword">double</span> area):</span><br><span class="line">    _table(table),_chair(chair),<span class="built_in">Room</span>(price,area)&#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>ä¸Šä¾‹çš„ä¾‹å­å¾ˆå¥½åœ°å±•ç¤ºäº†ç»§æ‰¿çš„ä½œç”¨ï¼š<strong>æ´¾ç”Ÿç±»é€šè¿‡ç»§æ‰¿æ¥é‡ç”¨è¢«ç»§æ‰¿ç±»ï¼ˆåŸºç±»ï¼‰ï¼Œç„¶åæ´¾ç”Ÿç±»å¯ä»¥æ·»åŠ ã€ä¿®æ”¹æˆ–éšè—ç›¸å…³åŠŸèƒ½æ¥è¿›è¡Œæ‰©å±•</strong>ã€‚</p>
<p>è¿™ä½¿å¾—ç»§æ‰¿ï¼š</p>
<ul>
<li>æé«˜äº†ä»£ç çš„å¤ç”¨æ€§ã€ç»´æŠ¤æ€§</li>
<li>ç±»ä¸ç±»ä¹‹é—´äº§ç”Ÿäº†è”ç³»ï¼Œè¿™æ˜¯å¤šæ€çš„å‰æ</li>
</ul>
<p>ä¸è¿‡å¦ä¸€æ–¹é¢ï¼Œç»§æ‰¿æœ‰è¿å¼€å‘åŸåˆ™â€œé«˜å†…èšã€ä½è€¦åˆâ€ï¼Œå› ä¸ºç»§æ‰¿ä¼šå¢åŠ ç±»çš„è€¦åˆæ€§ï¼ˆç±»ä¸ç±»ä¹‹é—´å…³ç³»å˜å¾—ç´§å¯†ï¼‰ã€‚</p>
<p>whateverï¼Œå–„ç”¨ç»§æ‰¿æ˜¯ç†Ÿç»ƒè¿ç”¨OOPï¼ˆObject Oriented Programmingï¼ŒOOPï¼‰æ€æƒ³çš„é‡è¦ä½“ç°ã€‚</p>
<p>ä¸Šé¢çš„ä¾‹å­ä¹Ÿå¸¦æ¥ä¸€äº›æ€è€ƒï¼š</p>
<ul>
<li>
<p>ç»§æ‰¿è®¿é—®æƒé™æ˜¯ä»€ä¹ˆï¼Ÿå’Œä¹‹å‰çš„ç±»æˆå‘˜è®¿é—®æƒé™æœ‰ä»€ä¹ˆä¸åŒå—ï¼Ÿ</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassRoom</span>:</span> <span class="keyword">public</span> Room</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ´¾ç”Ÿç±»æ€ä¹ˆæ·»åŠ ã€ä¿®æ”¹æˆ–éšè—åŸºç±»ç›¸å…³åŠŸèƒ½ï¼Ÿ</p>
</li>
<li>
<p>æ´¾ç”Ÿç±»å®ä¾‹åŒ–æ—¶ï¼Œæ„é€ å‡½æ•°ã€ææ„å‡½æ•°çš„é¡ºåºæœ‰ä»€ä¹ˆè®²ç©¶å—ï¼Ÿä¸ºä»€ä¹ˆå­˜åœ¨è¿™ä¹ˆä¸€ä¸ªé¡ºåºï¼Ÿ</p>
</li>
<li>
<p>å¾ˆå¤šè¯­è¨€å¦‚Javaæ˜¯ä¸å…è®¸å¤šé‡ç»§æ‰¿çš„ï¼Œè€ŒC++ä¸ºä»€ä¹ˆè¦å…è®¸å¤šé‡ç»§æ‰¿ï¼Œå¤šé‡ç»§æ‰¿ä¼šå¸¦æ¥ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ</p>
</li>
</ul>
<p>å¸¦ç€é—®é¢˜æ¥å’Œæˆ‘ä¸€èµ·è®¤è¯†ä¸€ä¸‹å§ã€‚</p>
<h4 id="7-1-2-ç»§æ‰¿ç›¸å…³æ¦‚å¿µ">7.1.2 ç»§æ‰¿ç›¸å…³æ¦‚å¿µ</h4>
<h5 id="ç»§æ‰¿æƒé™å’Œè®¿é—®ç¬¦">ç»§æ‰¿æƒé™å’Œè®¿é—®ç¬¦</h5>
<p>å…ˆä»ç±»æˆå‘˜è®¿é—®ç¬¦è¯´èµ·ï¼Œç±»æˆå‘˜è®¿é—®æ§åˆ¶ç¬¦å®ç°äº†ç±»çš„å°è£…ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> _public &#123;&#125;;    </span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="keyword">int</span> _protected &#123;&#125;; </span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> _private &#123;&#125;; </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>å›é¡¾ä¸€ä¸‹privateã€publicè®¿é—®ç¬¦ï¼š</p>
<ul>
<li>privateï¼šç§æœ‰æˆå‘˜ï¼Œè¯¥æˆå‘˜ä»…åœ¨ç±»å†…å¯ä»¥è¢«è®¿é—®ï¼Œåœ¨ç±»ä½“å¤–ï¼ˆåŒ…æ‹¬æ´¾ç”Ÿç±»ï¼‰æ˜¯éšè—çŠ¶æ€ï¼›</li>
<li>publicï¼šå…¬æœ‰æˆå‘˜ï¼Œè¯¥æˆå‘˜åœ¨ç±»å†…ã€ç±»å¤–ä¹Ÿéƒ½å¯ä»¥è¢«è®¿é—®ï¼Œæ˜¯ç±»å¯¹å¤–æä¾›çš„å¯è®¿é—®æ¥å£ã€‚</li>
</ul>
<p>åœ¨ç»§æ‰¿ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥äº†ç¬¬ä¸‰ç§è®¿é—®ä¿®é¥°ç¬¦ï¼š</p>
<ul>
<li>protectedï¼šä¿æŠ¤æˆå‘˜ï¼Œå’Œç§æœ‰æˆå‘˜ç±»ä¼¼ï¼Œä¸è¿‡åœ¨<u>æ´¾ç”Ÿç±»</u>å¯ä»¥è¢«è®¿é—®ã€‚</li>
</ul>
<p>å›åˆ°æˆ‘ä»¬æœ¬å°èŠ‚çš„é‡ç‚¹ï¼šç»§æ‰¿æƒé™çš„è®¿é—®ç¬¦ã€‚</p>
<p><strong>æ´¾ç”Ÿç±»éšå¼åŒ…å«äº†åŸºç±»çš„å‰¯æœ¬ã€‚ä¸åŒç»§æ‰¿æƒé™çš„è®¿é—®ç¬¦ï¼Œæœ¬è´¨å°±æ˜¯ä¿®æ”¹<u>åŸºç±»å‰¯æœ¬</u>çš„<u>å…¬æœ‰æˆå‘˜</u>ã€<u>ä¿æŠ¤æˆå‘˜</u>ï¼Œåœ¨<u>æ´¾ç”Ÿç±»ä¸­</u>çš„è®¿é—®æƒé™ï¼ˆ<u>ç§æœ‰æˆå‘˜</u>ä¸å—å½±å“</strong>ï¼‰ã€‚</p>
<p>æ ¸å¿ƒæ¦‚å¿µå¼ºè°ƒï¼š</p>
<ul>
<li>æ´¾ç”Ÿç±»å¹¶éæ˜¯ä¿®æ”¹äº†åŸæœ‰ç±»ï¼ˆåŸºç±»ï¼‰æˆå‘˜çš„è®¿é—®æƒé™ï¼Œè€Œæ˜¯ä¿®æ”¹æ´¾ç”Ÿç±»æŒæœ‰åŸºç±»çš„å‰¯æœ¬åŸæœ¬çš„è®¿é—®æƒé™ï¼›</li>
<li>ç»§æ‰¿æ–¹å¼å¯¹ç§æœ‰æˆå‘˜æ— å½±å“ã€‚</li>
</ul>
<p>ä¸åŒç»§æ‰¿æƒé™çš„åŸºç±»å‰¯æœ¬è®¿é—®æƒé™ä¿®æ”¹è§„åˆ™ï¼š</p>
<ul>
<li>publicç»§æ‰¿ï¼šæ‰€æœ‰åŸºç±»æˆå‘˜å‰¯æœ¬éƒ½ä¿æŒåŸæœ‰æƒé™ï¼›</li>
<li>privateç»§æ‰¿ï¼šæ‰€æœ‰åŸºç±»æˆå‘˜å‰¯æœ¬è¢«ä¿®æ”¹ä¸ºprivateï¼›</li>
<li>protectedç»§æ‰¿ï¼šæ‰€æœ‰åŸºç±»æˆå‘˜å‰¯æœ¬è¢«ä¿®æ”¹ä¸ºprotectedï¼›</li>
</ul>
<p>publicç»§æ‰¿æ˜¯ä½¿ç”¨æœ€å¸¸ç”¨ç»§æ‰¿æ–¹å¼ï¼Œå…¶æ¬¡æ˜¯privateç»§æ‰¿ï¼Œprotectedç»§æ‰¿åŸºæœ¬ä¸ä½¿ç”¨ã€‚</p>
<p>æˆ‘ä»¬æ¥å®é™…éªŒè¯ä¸‹ä¸Šè¿°ç»“è®ºï¼ˆprotectedç»§æ‰¿ä¸ä¸¾ä¾‹ï¼Œå› ä¸ºåŸºæœ¬ä¸ç”¨ï¼‰ã€‚</p>
<p><strong>publicç»§æ‰¿</strong>ã€‚</p>
<p>æ³¨æ„åˆ°ï¼Œæ´¾ç”Ÿç±»ä¸­çš„åŸºç±»å‰¯æœ¬æˆå‘˜è®¿é—®æƒé™å’ŒåŸºç±»ä¸€è‡´ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> m_public &#123;&#125;;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="keyword">int</span> m_protected &#123;&#125;;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> m_private &#123;&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pub</span>:</span> <span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Pub</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        m_public = <span class="number">1</span>;    <span class="comment">// okay</span></span><br><span class="line">        m_protected = <span class="number">2</span>; <span class="comment">// okay</span></span><br><span class="line">        <span class="comment">// m_private = 3;   // not okay</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Base base;</span><br><span class="line">    base.m_public = <span class="number">1</span>;    <span class="comment">// okay</span></span><br><span class="line">    base.m_protected = <span class="number">2</span>; <span class="comment">// not okay</span></span><br><span class="line">    base.m_private = <span class="number">3</span>;   <span class="comment">// not okay</span></span><br><span class="line">    <span class="comment">// åœ¨æ´¾ç”Ÿç±»ä¸­å’ŒåŸºç±»æˆå‘˜è®¿é—®æƒé™ä¸€è‡´</span></span><br><span class="line">    Pub pub;</span><br><span class="line">    pub.m_public = <span class="number">1</span>;     <span class="comment">// okay</span></span><br><span class="line">    pub.m_protected = <span class="number">2</span>;  <span class="comment">// not okay</span></span><br><span class="line">    pub.m_private = <span class="number">3</span>;    <span class="comment">// not okay</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>privateç»§æ‰¿</strong>ã€‚</p>
<p>æ³¨æ„åˆ°ï¼Œæ´¾ç”Ÿç±»ä¸­çš„åŸºç±»å‰¯æœ¬æˆå‘˜çš„è®¿é—®æƒé™éƒ½è¢«ä¿®æ”¹ä¸ºprivateã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> m_public &#123;&#125;;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="keyword">int</span> m_protected &#123;&#125;;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> m_private &#123;&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pri</span>:</span> <span class="keyword">private</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Pub</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// m_public = 1;    // not okay</span></span><br><span class="line">        <span class="comment">// æ­¤æ—¶è®¿é—®çš„åŸºç±»æˆå‘˜ï¼Œè®¿é—®æƒé™æŒ‰åŸºç±»æˆå‘˜æ¥</span></span><br><span class="line">        m_protected = <span class="number">2</span>;    <span class="comment">// okay</span></span><br><span class="line">        <span class="comment">// m_private = 3;   // not okay</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Base base;</span><br><span class="line">    base.m_public = <span class="number">1</span>;    <span class="comment">// okay</span></span><br><span class="line">    <span class="comment">// åŸºç±»m_protectedè®¿é—®æƒé™ä¾æ—§æ˜¯protectedï¼Œç±»å¤–æ— æ³•è®¿é—®</span></span><br><span class="line">    base.m_protected = <span class="number">2</span>; <span class="comment">// not okay</span></span><br><span class="line">    base.m_private = <span class="number">3</span>;   <span class="comment">// not okay</span></span><br><span class="line">    <span class="comment">// æ´¾ç”Ÿç±»ä¸­çš„åŸºæœ¬å‰¯æœ¬æ‰€æœ‰æˆå‘˜çš„è®¿é—®æƒé™ä¸ºprivate</span></span><br><span class="line">    Pub pub;</span><br><span class="line">    pub.m_public = <span class="number">1</span>;     <span class="comment">// not okay</span></span><br><span class="line">    pub.m_protected = <span class="number">2</span>;  <span class="comment">// not okayï¼Œæ´¾ç”Ÿç±»ä¸­çš„m_protectedå·²ç»æ˜¯privateæƒé™ï¼Œæ— æ³•è®¿é—®</span></span><br><span class="line">    pub.m_private = <span class="number">3</span>;    <span class="comment">// not okay</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="usingä¿®æ”¹è®¿é—®æƒé™">usingä¿®æ”¹è®¿é—®æƒé™</h5>
<p>é€šè¿‡ç»§æ‰¿æƒé™è®¾ç½®ï¼Œè™½ç„¶å¯ä»¥ä¿®æ”¹æ´¾ç”Ÿç±»åŸºç±»å‰¯æœ¬åŸæœ¬çš„è®¿é—®æƒé™ï¼Œä½†ä¹Ÿæœ‰å±€é™æ€§ï¼š</p>
<ul>
<li>ä¸èƒ½ä¿®æ”¹åŸºç±»å‰¯æœ¬å•ä¸ªæˆå‘˜è®¿é—®æƒé™ï¼Œåªèƒ½å…¨éƒ¨ä¿®æ”¹ï¼›</li>
<li>æ— æ³•ä¿®æ”¹privateæˆå‘˜æƒé™ï¼ˆæ¯”å¦‚ä¸ºprivateâ†’publicï¼‰ã€‚</li>
</ul>
<p>usingå¼¥è¡¥äº†è¿™ä¸ªç¼ºé™·ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åªå°†åŸºç±»æŸä¸ªå…¬å…±æˆå‘˜è®¾ä¸ºç§æœ‰ï¼ˆé€šå¸¸ç”¨æ¥éšè—åŸºç±»ä¸­æŸä¸ªåŠŸèƒ½ï¼‰ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="keyword">int</span> m_value &#123;&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span> :</span> <span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">using</span> Base::m_value; <span class="comment">// ç±»å¤–è®¿é—®çš„æ´¾ç”Ÿç±»åŸºç±»å‰¯æœ¬æˆå‘˜m_valueï¼Œå¹¶ä¿®æ”¹ä¸ºprivateï¼Œæ— æ³•è®¿é—®</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Derived</span>(<span class="keyword">int</span> value)</span><br><span class="line">	&#123;</span><br><span class="line">		m_value = value; <span class="comment">// è¿™ä¸ªæ—¶å€™è®¿é—®çš„æ˜¯åŸºç±»æˆå‘˜m_valueï¼ˆpublicä¿®é¥°ï¼Œä¸æ˜¯æ´¾ç”Ÿç±»çš„åŸºç±»å‰¯æœ¬ï¼‰ï¼Œæ‰€ä»¥è¿˜å¯ä»¥è®¿é—®</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Derived derived &#123; <span class="number">7</span> &#125;;</span><br><span class="line">	std::cout &lt;&lt; derived.m_value; <span class="comment">// errorï¼Œæ— æ³•è®¿é—®</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è‡ªç„¶ï¼Œä¹Ÿå¯ä»¥å°†ç§æœ‰è®¾ä¸ºå…¬æœ‰ï¼ˆä¸è¿‡è¿™ç ´åäº†ç±»çš„å°è£…æ€§ï¼Œæ…ç”¨ï¼‰ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> m_value &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Base</span>(<span class="keyword">int</span> value): m_value &#123; value &#125;</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">printValue</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; std::cout &lt;&lt; m_value; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span>:</span> <span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// æ­¤æ—¶åˆå§‹åŒ–åŸºç±»æˆå‘˜m_valueï¼Œåªèƒ½é€šè¿‡è°ƒç”¨åŸºç±»æ„é€ å‡½æ•°è¿™ç§æ–¹å¼ï¼Œå› ä¸ºå®ƒæ˜¯privateï¼Œæ— æ³•ç›´æ¥è®¿é—®</span></span><br><span class="line">    <span class="built_in">Derived</span>(<span class="keyword">int</span> value): Base &#123; value &#125;</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">using</span> Base::printValue;  <span class="comment">// æ´¾ç”Ÿç±»åŸºæœ¬å‰¯æœ¬æˆå‘˜m_valueè®¿é—®æƒé™ä¿®æ”¹ä¸ºpublic</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Derived derived &#123; <span class="number">7</span> &#125;;</span><br><span class="line">    derived.<span class="built_in">printValue</span>(); <span class="comment">// 7ï¼Œok</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="å‡½æ•°é‡å†™">å‡½æ•°é‡å†™</h5>
<p>å‰é¢æˆ‘ä»¬æåˆ°è¿‡ç»§æ‰¿çš„å¥½å¤„ï¼šâ€œæ´¾ç”Ÿç±»é€šè¿‡ç»§æ‰¿æ¥é‡ç”¨è¢«ç»§æ‰¿ç±»ï¼ˆåŸºç±»ï¼‰ï¼Œç„¶åå¯ä»¥é€šè¿‡æ·»åŠ ã€ä¿®æ”¹æˆ–éšè—ç›¸å…³åŠŸèƒ½å¯ä»¥è¿›ä¸€æ­¥æ‰©å±•â€ ã€‚</p>
<p><strong>è¿™é‡Œçš„ï¼š<u>æ·»åŠ ã€ä¿®æ”¹æˆ–éšè—ç›¸å…³åŠŸèƒ½</u>ï¼Œæ˜¯å¦‚ä½•åšåˆ°çš„</strong>ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯é€šè¿‡å‡½æ•°é‡å†™ã€‚</p>
<p>ç†è§£è¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆè¦æ˜ç™½æ´¾ç”Ÿç±»å¯¹è±¡æ˜¯å¦‚ä½•è°ƒç”¨ä¸€ä¸ªå‡½æ•°çš„ï¼ˆä¸è€ƒè™‘è™šå‡½æ•°ï¼‰ï¼š</p>
<ol>
<li>ç¼–è¯‘å™¨é¦–å…ˆæŸ¥çœ‹è¯¥æˆå‘˜æ˜¯å¦å­˜åœ¨æ´¾ç”Ÿç±»ä¸­ï¼Œå¦‚æœä¸å­˜åœ¨è½¬2ï¼›</li>
<li>æ²¿ç€ç»§æ‰¿é“¾å¾€ä¸Šèµ°ï¼ŒæŸ¥çœ‹æ˜¯å­˜åœ¨ä»»ä½•çˆ¶ç±»å®šä¹‰ä¸­ï¼Œå¦‚æœä¸å­˜åœ¨è½¬3ï¼›</li>
<li>ä¸å­˜åœ¨è¯¥å‡½æ•°ï¼Œè°ƒç”¨å¤±è´¥ã€‚</li>
</ol>
<p>å‡½æ•°é‡å†™ä¾¿æ˜¯åˆ©ç”¨è¿™ä¸ªè°ƒç”¨é¡ºåºï¼šåœ¨æ´¾ç”Ÿç±»ä¸­å®šä¹‰ä¸€ä¸ªå’ŒåŸºç±»<u>å®Œå…¨ä¸€è‡´</u>ï¼ˆä¸æ­¢åŒåï¼Œè€Œä¸”å‡½æ•°ç­¾åå®Œå…¨ä¸€è‡´ï¼‰çš„å‡½æ•°ï¼Œåœ¨å‡½æ•°ä½“å¯¹åŸæœ‰åŠŸèƒ½è¿›è¡Œä¿®æ”¹ï¼Œè¾¾åˆ°æ·»åŠ ã€ä¿®æ”¹ã€éšè—ç›¸å…³åŠŸèƒ½ã€‚å› ä¸ºç¼–è¯‘å™¨é¦–å…ˆè°ƒç”¨çš„ä¼šæ˜¯æ´¾ç”Ÿç±»ä¸­çš„å‡½æ•°ã€‚</p>
<p>çœ‹ä¸€ä¸ªå®ä¾‹å§ã€‚</p>
<p>ä¸‹é¢æ´¾ç”Ÿç±»ä¸­å¯¹åŸºç±»çš„<code>print</code> å®ç°äº†éšè—ï¼Œä½ æ°¸è¿œæ— æ³•é€šè¿‡æ´¾ç”Ÿç±»è®¿é—®åˆ°åŸºç±»çš„<code>print</code>æ–¹æ³•ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;Base&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span> :</span> <span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;Derived &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Derived derived;</span><br><span class="line">	derived.<span class="built_in">print</span>(); <span class="comment">// calls derived::print()</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Derived</span><br></pre></td></tr></table></figure>
<p>å®Œå…¨éšè—åŸºç±»çš„æ–¹æ³•ä¹Ÿè®¸å¹¶ä¸æ˜¯ä½ æ‰€éœ€è¦çš„ï¼Œä½†ä½ è¿˜å¯ä»¥å¯¹åŸºç±»çš„<code>print</code>æ·»åŠ åŠŸèƒ½ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span> :</span> <span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">        Base::<span class="built_in">print</span>();  <span class="comment">// èŒƒå›´è¿ç®—ç¬¦è°ƒç”¨åŸºç±»printå‡½æ•°</span></span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;Derived &quot;</span>; <span class="comment">// æ·»åŠ æ‰“å°è¾“å‡º</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Base</span><br><span class="line">Derived</span><br></pre></td></tr></table></figure>
<p><strong>åŒæ—¶ï¼Œæˆ‘ä»¬åº”è¯¥æ³¨æ„åˆ°å‡½æ•°é‡è½½å’Œå‡½æ•°é‡å†™çš„å¼‚åŒ</strong>ã€‚</p>
<ul>
<li>å‡½æ•°é‡å†™åˆ†åˆ«ä½äºåŸºç±»ã€æ´¾ç”Ÿç±»ï¼Œè€Œå‡½æ•°é‡è½½ä½äºåŒä¸€ç±»ä¸­ã€‚</li>
<li>å‡½æ•°é‡å†™çš„å‡½æ•°ç­¾åå®Œå…¨ä¸€è‡´ï¼ˆä¸æ­¢åŒåï¼‰ï¼Œè€Œå‡½æ•°é‡è½½ä»…ä»…æ˜¯åŒåï¼Œå‡½æ•°ç­¾åå¹¶ä¸åŒã€‚</li>
<li>å‡½æ•°é‡å†™æ˜¯è¿è¡Œæ—¶å¤šæ€çš„ä¸€ç§ä½“ç°ï¼ˆä¸€ä¸ªæ–¹æ³•åœ¨ä¸åŒçš„å­ç±»ä¸­è¡¨ç°å‡ºä¸åŒçš„è¡Œä¸ºï¼‰ï¼Œä¸ºäº†èƒ½å¯¹åŸºç±»çš„åŠŸèƒ½å®ç°ä¿®æ”¹ã€éšè—ç­‰è€Œç”Ÿï¼Œè€Œå‡½æ•°é‡è½½æ˜¯ä¸ºäº†è§£å†³å‘½åç©ºé—´æ±¡æŸ“é—®é¢˜è€Œç”Ÿã€‚</li>
</ul>
<h4 id="7-1-3-æ´¾ç”Ÿç±»æ„é€ å‡½æ•°">7.1.3 æ´¾ç”Ÿç±»æ„é€ å‡½æ•°</h4>
<p>æˆ‘ä»¬çŸ¥é“æ´¾ç”Ÿç±»ç»§æ‰¿è‡³åŸºç±»ï¼Œé‚£æ´¾ç”Ÿç±»è¿›è¡Œå®ä¾‹åŒ–æ—¶ï¼š</p>
<ul>
<li>
<p>åŸºç±»éƒ¨åˆ†ç”±è°è´Ÿè´£åˆå§‹åŒ–ï¼Ÿæ˜¯åŸºç±»æ„é€ å‡½æ•°å—ï¼Ÿ</p>
</li>
<li>
<p>æ´¾ç”Ÿç±»æ„é€ å‡½æ•°åªè´Ÿè´£åˆå§‹åŒ–æ´¾ç”Ÿç±»æ‰©å±•éƒ¨åˆ†å—ï¼Ÿ</p>
</li>
<li>
<p>åŸºç±»å’Œæ´¾ç”Ÿç±»æ„é€ å‡½æ•°æ‰§è¡Œé¡ºåºæ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ</p>
</li>
</ul>
<h5 id="æ„é€ é¡ºåº">æ„é€ é¡ºåº</h5>
<p>ä¸Šè¿°ç­”æ¡ˆåˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li>åŸºç±»éƒ¨åˆ†åˆå§‹åŒ–ç”±åŸºç±»æ„é€ å‡½æ•°è´Ÿè´£ï¼›</li>
<li>æ´¾ç”Ÿç±»æ„é€ å‡½æ•°åªè´Ÿè´£æ´¾ç”Ÿç±»æ‰©å±•éƒ¨åˆ†åˆå§‹åŒ–ï¼›</li>
<li>C++ åˆ†é˜¶æ®µæ„é€ æ´¾ç”Ÿç±»ï¼Œä»æœ€åŸºç±»ï¼ˆåœ¨ç»§æ‰¿æ ‘çš„é¡¶éƒ¨ï¼‰å¼€å§‹ï¼Œåˆ°æœ€å­ç±»ï¼ˆåœ¨ç»§æ‰¿æ ‘çš„åº•éƒ¨ï¼‰ç»“æŸã€‚</li>
</ul>
<p>éªŒè¯ä¸€ä¸‹ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">A</span>()&#123; std::cout &lt;&lt; <span class="string">&quot;A\n&quot;</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>:</span> <span class="keyword">public</span> A</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">B</span>()&#123; std::cout &lt;&lt; <span class="string">&quot;B\n&quot;</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>:</span> <span class="keyword">public</span> B</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">C</span>()&#123; std::cout &lt;&lt; <span class="string">&quot;C\n&quot;</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span>:</span> <span class="keyword">public</span> C</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">D</span>()&#123; std::cout &lt;&lt; <span class="string">&quot;D\n&quot;</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;æ„é€  A: \n&quot;</span>;</span><br><span class="line">    A a;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;æ„é€  B: \n&quot;</span>;</span><br><span class="line">    B b;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;æ„é€  C: \n&quot;</span>;</span><br><span class="line">    C c;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;æ„é€  D: \n&quot;</span>;</span><br><span class="line">    D d;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">æ„é€  Aï¼š</span><br><span class="line">A</span><br><span class="line">æ„é€  Bï¼š</span><br><span class="line">A </span><br><span class="line">B</span><br><span class="line">æ„é€  Cï¼š</span><br><span class="line">A </span><br><span class="line">B </span><br><span class="line">C</span><br><span class="line">æ„é€  Dï¼š</span><br><span class="line">A </span><br><span class="line">B </span><br><span class="line">C </span><br><span class="line">D</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ</p>
<ul>
<li>C++ æ€»æ˜¯é¦–å…ˆæ„é€ â€œç¬¬ä¸€ä¸ªâ€æˆ–â€œæœ€åŸºâ€ç±»ï¼Œç„¶åå®ƒæŒ‰é¡ºåºéå†ç»§æ‰¿æ ‘å¹¶æ„é€ æ¯ä¸ªæ´¾ç”Ÿç±»ï¼›</li>
<li>åŸºç±»æ„é€ å‡½æ•°å’Œæ´¾ç”Ÿç±»æ„é€ å„è‡ªè´Ÿè´£ç›¸åº”çš„éƒ¨åˆ†ã€‚</li>
</ul>
<p>é¡ºä¾¿ä¸€æï¼Œææ„å‡½æ•°æ‰§è¡Œé¡ºåºæ°æ°å’Œæ„é€ å‡½æ•°ç›¸åã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆè¦æŒ‰è¿™ç§æ„é€ é¡ºåº</strong>ï¼Ÿ</p>
<p>å­ç±»ç»§æ‰¿äº†çˆ¶ç±»ï¼Œäº†è§£çˆ¶ç±»çš„ä¸€åˆ‡ï¼Œä¸”ç»å¸¸éœ€ä½¿ç”¨çˆ¶ç±»çš„æˆå‘˜æˆ–å‡½æ•°ï¼Œä½†çˆ¶ç±»å¯¹å­ç±»ä¸€æ— æ‰€çŸ¥ã€‚ä¸ºäº†å®‰å…¨ï¼Œé¦–å…ˆå®ä¾‹åŒ–çˆ¶ç±»å¯ä»¥ç¡®ä¿çˆ¶ç±»æˆå‘˜åœ¨è¢«æ´¾ç”Ÿç±»ä½¿ç”¨å‰ï¼Œå°±å·²ç»å‡†å¤‡å¥½äº†ã€‚</p>
<p>å¦ä¸€æ–¹é¢ï¼Œè¿„ä»Šä¸ºæ­¢ï¼Œæ´¾ç”Ÿç±»å®ä¾‹åŒ–æ—¶çš„åŸºç±»æ„é€ å‡½æ•°éƒ½æ˜¯<u>éšå¼</u>è°ƒç”¨çš„ã€‚</p>
<ul>
<li>å¦‚æœæˆ‘ä»¬æƒ³<u>åœ¨æ´¾ç”Ÿç±»åˆå§‹åŒ–åŸºç±»æˆå‘˜</u>ï¼Œè¯¥å¦‚ä½•å®ç°ï¼Ÿ</li>
<li>èƒ½ä¸èƒ½ç›´æ¥<u>æ˜¾å¼</u>è°ƒç”¨åŸºç±»æ„é€ å‡½æ•°åˆå§‹åŒ–ï¼Ÿ</li>
</ul>
<h5 id="åˆå§‹åŒ–åŸºç±»æˆå‘˜">åˆå§‹åŒ–åŸºç±»æˆå‘˜</h5>
<p>ä¸ºäº†æ–¹ä¾¿è¯´æ˜ï¼Œå…ˆå°†åŸºç±»æˆå‘˜<code>m_id</code> å£°æ˜ä¸ºpublicï¼Œè¯•æƒ³å¦‚ä½•åœ¨æ´¾ç”Ÿç±»ä¸­å¯¹å…¶åˆå§‹åŒ–ï¼Ÿ</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> m_id &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Base</span>(<span class="keyword">int</span> id=<span class="number">0</span>) : m_id&#123; id &#125;</span><br><span class="line">    &#123;</span><br><span class="line">        std::cout&lt;&lt; <span class="string">&quot;In base, m_id = &quot;</span> &lt;&lt; id &lt;&lt;std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> m_id; &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>æ—¢ç„¶<code>m_id</code>å·²è¢«å£°æ˜ä¸ºpublicï¼Œå®¹æ˜“æƒ³åˆ°ä¸¤ç§åˆå§‹åŒ–æ–¹å¼ï¼š</p>
<ul>
<li>æ´¾ç”Ÿç±»æ„é€ å‡½æ•°æˆå‘˜åˆ—è¡¨<u>åˆå§‹åŒ–</u>ï¼›</li>
<li>æ´¾ç”Ÿç±»æ„é€ å‡½æ•°ä½“å†…<u>èµ‹å€¼</u>ã€‚</li>
</ul>
<p>ä½†ç¬¬ä¸€ç§æ–¹å¼ä¸è¢«C++å…è®¸ï¼Œå› ä¸ºç¬¬ä¸€ç§æˆå‘˜åˆ—è¡¨æ–¹å¼ä¼šå¯¼è‡´<code>m_id</code> åœ¨åŸºç±»å’Œæ´¾ç”Ÿç±»åˆå§‹åŒ–ä¸¤æ¬¡ï¼Œè€Œåˆå§‹åŒ–åªèƒ½æœ‰ä¸€æ¬¡ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span>:</span> <span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">double</span> m_cost &#123;&#125;;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// errorï¼Œä¸è¢«å…è®¸</span></span><br><span class="line">    <span class="built_in">Derived</span>(<span class="keyword">double</span> cost, <span class="keyword">int</span> id): m_id&#123; id &#125;,m_cost&#123; cost &#125;</span><br><span class="line">    &#123;</span><br><span class="line">        std::cout&lt;&lt; <span class="string">&quot;In Derived, m_cost = &quot;</span> &lt;&lt; m_cost &lt;&lt;std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">getCost</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> m_cost; &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒç§æ–¹å¼æ˜¯å…è®¸çš„ï¼Œå› ä¸ºè¿™æ˜¯é‡æ–°èµ‹å€¼ï¼Œä¸æ˜¯åˆå§‹åŒ–ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span>:</span> <span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">double</span> m_cost &#123;&#125;;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Derived</span>(<span class="keyword">double</span> cost, <span class="keyword">int</span> id): m_cost&#123; cost &#125;</span><br><span class="line">    &#123;</span><br><span class="line">    	m_id&#123; id &#125;;  <span class="comment">// ok</span></span><br><span class="line">        std::cout&lt;&lt; <span class="string">&quot;In Derived, m_cost = &quot;</span> &lt;&lt; m_cost &lt;&lt;std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">getCost</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> m_cost; &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>ä½†è¿™æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>ä¸å¤Ÿä¼˜é›…ï¼Œæ˜¯é‡æ–°èµ‹å€¼ï¼Œè€Œä¸æ˜¯ç›´æ¥åˆå§‹åŒ–ï¼›</li>
<li>å¦‚æœ<code>m_id</code> æ˜¯private/const/å¼•ç”¨ï¼Œè¿™ç§æ–¹å¼ä¹Ÿæ— æ³•ä½¿ç”¨ã€‚</li>
</ul>
<p><strong>å¦‚æœå¯ä»¥åœ¨æ´¾ç”Ÿç±»ç›´æ¥è°ƒç”¨åŸºç±»æ„é€ å‡½æ•°åˆå§‹åŒ–ï¼Œé‚£è¯¥å¤šå¥½å‘€</strong>ï¼</p>
<p>ç°åœ¨æˆ‘ä»¬åœ¨æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°æˆå‘˜åˆ—è¡¨ä¸­ï¼Œæ˜¾ç¤ºè°ƒç”¨äº†åŸºç±»æ„é€ å‡½æ•°ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">private</span>: <span class="comment">// ç§æœ‰</span></span><br><span class="line">    <span class="keyword">int</span> m_id &#123;&#125;;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Base</span>(<span class="keyword">int</span> id=<span class="number">0</span>) : m_id&#123; id &#125;</span><br><span class="line">    &#123;</span><br><span class="line">        std::cout&lt;&lt; <span class="string">&quot;In base, m_id = &quot;</span> &lt;&lt; id &lt;&lt;std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> m_id; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span>:</span> <span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">double</span> m_cost &#123;&#125;;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// ç›´æ¥è°ƒç”¨åŸºç±»æ„é€ å‡½æ•°Base&#123; id &#125;åˆå§‹åŒ–</span></span><br><span class="line">    <span class="built_in">Derived</span>(<span class="keyword">double</span> cost, <span class="keyword">int</span> id): Base&#123; id &#125;,m_cost&#123; cost &#125;</span><br><span class="line">    &#123;</span><br><span class="line">        std::cout&lt;&lt; <span class="string">&quot;In Derived, m_cost = &quot;</span> &lt;&lt; m_cost &lt;&lt;std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">getCost</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> m_cost; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Derived d&#123;<span class="number">2.33</span>,<span class="number">1</span>&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In base, m_id = 1</span><br><span class="line">In Derived, m_cost = 2.33</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šå®Œç¾è§£å†³äº†åˆå§‹åŒ–åŸºç±»æˆå‘˜çš„éœ€æ±‚ï¼Œä½†æ³¨æ„ï¼š</p>
<ul>
<li>
<p><u>åŸºç±»æ„é€ å‡½æ•°<code>Base&#123; id &#125;</code>åªè¢«æ‰§è¡Œäº†ä¸€æ¬¡</u>ï¼Œä¾æ—§æ˜¯ä»ç»§æ‰¿é“¾é¡¶éƒ¨å¾€ä¸‹æ„é€ ï¼Œæ´¾ç”Ÿç±»åªæ˜¯æŒ‡å®šäº†åŸºç±»æ„é€ å‡½æ•°çš„å‚æ•°ï¼›</p>
</li>
<li>
<p>æˆå‘˜åˆ—è¡¨çš„åŸºç±»æ„é€ å‡½æ•°<code>Base&#123; id &#125;</code> çš„é¡ºåºæ— å…³ç´§è¦ï¼Œæ— è®ºå¦‚ä½•ï¼ŒåŸºç±»æ„é€ å‡½æ•°æ€»æ˜¯ç‡å…ˆæ‰§è¡Œçš„ï¼š</p>
<ol>
<li>é¦–å…ˆæ‰§è¡ŒåŸºç±»æ„é€ å‡½æ•°ï¼ˆæ ¹æ®æ´¾ç”Ÿç±»ä¸­æŒ‡å®šçš„å‚æ•°ï¼‰ï¼›</li>
<li>ç„¶åæ‰§è¡Œæ´¾ç”Ÿç±»æ„é€ å‡½æ•°<u>æˆå‘˜åˆ—è¡¨</u>åˆå§‹åŒ–ï¼›</li>
<li>æœ€åæ‰§è¡Œæ´¾ç”Ÿç±»æ„é€ <u>å‡½æ•°ä½“å†…ä»£ç </u>ã€‚</li>
</ol>
</li>
</ul>
<h4 id="7-1-4-å¤šé‡ç»§æ‰¿">7.1.4 å¤šé‡ç»§æ‰¿</h4>
<h5 id="å¤šé‡ç»§æ‰¿ä¼˜ç¼ºç‚¹">å¤šé‡ç»§æ‰¿ä¼˜ç¼ºç‚¹</h5>
<p>åœ¨å‰é¢æˆ‘ä»¬æåˆ°ï¼š</p>
<blockquote>
<p>å¾ˆå¤šè¯­è¨€å¦‚Javaæ˜¯ä¸å…è®¸å¤šé‡ç»§æ‰¿çš„ï¼ŒC++ä¸ºä»€ä¹ˆè¦å…è®¸å¤šé‡ç»§æ‰¿ï¼Œå¤šé‡ç»§æ‰¿ä¼šå¸¦æ¥ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ</p>
</blockquote>
<p>è¿™æ˜¯ä¸ªå¾ˆæœ‰æ„æ€çš„é—®é¢˜ï¼Œæˆ‘ä»¬æ¥è¯´è¯´å¤šé‡ç»§æ‰¿çš„ä¼˜ç¼ºç‚¹ã€‚</p>
<p>å¤šé‡ç»§æ‰¿çš„ä¼˜ç‚¹å¾ˆæ˜æ˜¾ï¼š<strong>ç®€å•ï¼Œæ¸…æ™°ï¼Œæ›´æœ‰åˆ©äºå¤ç”¨ã€‚</strong></p>
<p>ä½†å®ƒçš„ç¼ºç‚¹åŒæ ·æ˜æ˜¾ï¼š</p>
<ol>
<li>
<p><strong>äºŒä¹‰æ€§</strong>ã€‚å¦‚æœä¸¤ä¸ªåŸºç±»ï¼ˆBã€Cï¼‰å…·æœ‰åŒåçš„æ–¹æ³•ï¼ˆdo()ï¼‰ï¼Œåœ¨æ´¾ç”Ÿç±»ä¸­å¿…é¡»æŒ‡å®šæ­¤æ–¹æ³•æ¥æºäºå“ªä¸ªåŸºç±»ã€‚å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/image-20220205112328276.png" alt="image-20220205112328276"></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">D d&#123;&#125;;</span><br><span class="line">d.<span class="built_in"><span class="keyword">do</span></span>();    <span class="comment">// error</span></span><br><span class="line">d.B::<span class="built_in"><span class="keyword">do</span></span>(); <span class="comment">// ::èŒƒå›´é™å®šï¼Œok</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>è±å½¢ç»§æ‰¿</strong>ã€‚ä½†å¦‚æœæ˜¯<u>è±å½¢ç»§æ‰¿</u>ï¼Œä¸ä½†ä¼šå¸¦æ¥äºŒä¹‰æ€§é—®é¢˜ï¼Œè¿˜ä¼šä½¿å¾—æ´¾ç”Ÿç±»ä¸­å…·æœ‰é‡å¤æ‹·è´çš„é—®é¢˜ã€‚</p>
<p>å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/image-20220205112707264.png" alt="image-20220205112707264"></p>
<p>æ´¾ç”Ÿç±»Dä¸­æ‹·è´äº†<u>ä¸¤ä»½</u>Açš„å‰¯æœ¬ï¼å¦ä¸€æ–¹é¢è¿™ä¹ŸåŠ é‡äº†äºŒä¹‰æ€§é—®é¢˜ï¼Œå› ä¸º<code>a</code> ä¹Ÿå­˜åœ¨äº†äºŒä¹‰æ€§é—®é¢˜ï¼Œè™½ç„¶å®ƒåªåœ¨Aä¸­è¢«å®šä¹‰äº†<u>ä¸€æ¬¡</u>ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">D d&#123;&#125;;</span><br><span class="line">d.<span class="built_in">a</span>();     <span class="comment">// error</span></span><br><span class="line">d.B::<span class="built_in">a</span>();  <span class="comment">// ::èŒƒå›´é™å®šï¼Œok</span></span><br></pre></td></tr></table></figure>
<p>èŒƒå›´é™å®šè™½ç„¶èƒ½è§£å†³ï¼Œä½†ç»ˆç©¶ä¸æ˜¯å¥½æ–¹æ³•ï¼Œä¸å¤Ÿä¼˜é›…ï¼Œé‡å¤æ•°æ®æ‹·è´çš„é—®é¢˜ä¹Ÿä¾æ—§å­˜åœ¨ã€‚</p>
</li>
</ol>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆC#å’ŒJavaä¸­ä¸æ”¯æŒç±»å¤šç»§æ‰¿ï¼Œè€Œæ˜¯ä½¿ç”¨ç±»å•ç»§æ‰¿å’Œæ¥å£å¤šç»§æ‰¿è®¾è®¡æ›¿ä»£ç±»å¤šç»§æ‰¿ã€‚</p>
<p>æ—¢ç„¶C++é€‰æ‹©äº†å¤šé‡ç»§æ‰¿ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹äºŒä¹‰æ€§å’Œé‡å¤æ‹·è´çš„é—®é¢˜å¦‚ä½•è§£å†³ï¼š</p>
<ul>
<li>äºŒä¹‰æ€§ï¼šå¯é€šè¿‡èŒƒå›´é™å®šç¬¦<code>::</code> æ¶ˆé™¤äºŒä¹‰æ€§ï¼›</li>
<li>é‡å¤æ‹·è´ï¼šå­˜åœ¨è±å½¢ç»§æ‰¿ä¸­ï¼Œé€šå¸¸ä½¿ç”¨è™šç»§æ‰¿æ¥è§£å†³ã€‚</li>
</ul>
<h5 id="è™šç»§æ‰¿">è™šç»§æ‰¿</h5>
<p>ç±»é€šè¿‡è™šç»§æ‰¿å¯ä»¥æŒ‡å‡º<u>å®ƒå¸Œæœ›å…±äº«çš„è™šåŸºç±»</u>ï¼Œå¯¹äºè™šåŸºç±»ï¼Œæ— è®ºåœ¨æ´¾ç”Ÿå±‚æ¬¡ä¸­è¢«ç»§æ‰¿å¤šå°‘æ¬¡ï¼Œéƒ½<u>åªå­˜åœ¨ä¸€ä»½</u>å…±äº«çš„åŸºç±»å­å¯¹è±¡ã€‚</p>
<p>åœ¨ä¸Šä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è®©ç±»Bã€Céƒ½è™šç»§æ‰¿Aï¼Œè¿™æ ·Aåœ¨Dä¸­åªä¼šæœ‰ä¸€æ¬¡æ‹·è´ã€‚</p>
<p><img src="https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/image-20220205114829756.png" alt="image-20220205114829756"></p>
<p>å®é™…ç¼–ç éªŒè¯ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="keyword">int</span> a&#123;&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> :</span> <span class="keyword">virtual</span> <span class="keyword">public</span> A</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> :</span> <span class="keyword">virtual</span> <span class="keyword">public</span> A</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span> :</span> <span class="keyword">public</span> B, <span class="keyword">public</span> C</span><br><span class="line">&#123;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    D d&#123;&#125;;</span><br><span class="line">    d.a;  <span class="comment">// okï¼Œé¿å…äº†é‡å¤æ‹·è´ï¼Œä¹Ÿé—´æ¥æ¶ˆé™¤äº†Aä¸­æˆå‘˜çš„äºŒä¹‰æ€§</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Bã€Cã€Då…±äº«äº†åŒä¸€ä»½Açš„å‰¯æœ¬ã€‚</p>
<p>æ³¨æ„ï¼Œè™šç»§æ‰¿åªæ˜¯é¿å…äº†é‡å¤æ‹·è´çš„é—®é¢˜ï¼Œå¹¶æ²¡æœ‰æ¶ˆé™¤äºŒä¹‰æ€§ï¼ŒBã€Cä¸­<code>doSomething</code> ä¾æ—§å­˜åœ¨äºŒä¹‰æ€§é—®é¢˜ã€‚</p>
<p>æˆ‘ä»¬ç†Ÿæ‚‰çš„<code>istream</code>å’Œ<code>ostream</code> ä¹Ÿæ˜¯è™šç»§æ‰¿äº<code>ios</code> ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">istream</span> :</span> <span class="keyword">virtual</span> <span class="keyword">public</span> ios &#123;...&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ostream</span> :</span> <span class="keyword">virtual</span> <span class="keyword">public</span> ios &#123;...&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">iostream</span> :</span> <span class="keyword">public</span> istream, <span class="keyword">public</span> ostream &#123;...&#125;;</span><br></pre></td></tr></table></figure>
<p>æœ€åæˆ‘ä»¬å†æ¥æ¢è®¨ä¸‹ï¼Œè™šç»§æ‰¿å’Œéè™šç»§æ‰¿æ–¹å¼çš„<u>æ„é€ å‡½æ•°æ‰§è¡Œé¡ºåº</u>ï¼š</p>
<ul>
<li>éè™šç»§æ‰¿ï¼Œæ„é€ å‡½æ•°æ‰§è¡Œé¡ºåºï¼šAâ†’Bâ†’<strong>A</strong>â†’Câ†’Dï¼›</li>
<li>è™šç»§æ‰¿ï¼Œæ„é€ å‡½æ•°æ‰§è¡Œé¡ºåºï¼šAâ†’Bâ†’Câ†’Dã€‚</li>
</ul>
<p>å¯è§éè™šç»§æ‰¿ä¸­ï¼ŒAè¢«åˆå§‹åŒ–äº†ä¸¤æ¬¡ï¼Œè™šç»§æ‰¿ä¸­Aç¡®å®åªè¢«åˆå§‹åŒ–äº†ä¸€æ¬¡ã€‚</p>
<p>ææ„å‡½æ•°æ‰§è¡Œé¡ºåºæ°ç›¸åï¼š</p>
<ul>
<li>éè™šç»§æ‰¿ï¼Œææ„å‡½æ•°æ‰§è¡Œé¡ºåºï¼šDâ†’Câ†’<strong>A</strong>â†’Bâ†’Aï¼›</li>
<li>è™šç»§æ‰¿ï¼Œææ„å‡½æ•°æ‰§è¡Œé¡ºåºï¼šDâ†’Câ†’Bâ†’Aã€‚</li>
</ul>
<h5 id="æœ€ä½³å®è·µ">æœ€ä½³å®è·µ</h5>
<p>äº‹å®è¯æ˜ï¼Œå¤§å¤šæ•°å¯ä»¥ä½¿ç”¨å¤šé‡ç»§æ‰¿è§£å†³çš„é—®é¢˜ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å•ç»§æ‰¿æ¥è§£å†³ã€‚</p>
<p><strong>å¦ä¸€æ–¹é¢ï¼Œå¾ˆå¤šç°ä»£ç¼–ç¨‹è¯­è¨€ï¼Œå¦‚ Java å’Œ C#ï¼Œå°†ç±»é™åˆ¶ä¸ºæ™®é€šç±»çš„å•ç»§æ‰¿ï¼Œåªå…è®¸æ¥å£ç±»çš„å¤šç»§æ‰¿</strong>ã€‚</p>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡é¿å…åœ¨C++ä¸­ä½¿ç”¨å¤šé‡ç»§æ‰¿ï¼Œé™¤éï¼š</p>
<ul>
<li>è¿™ä¸ªæ—¶å€™å¤šç»§æ‰¿æ˜¯æœ€å¥½çš„é€‰æ‹©ï¼›</li>
<li>è¢«å¤šç»§æ‰¿çš„ç±»æ˜¯è®¾è®¡è‰¯å¥½çš„<u>æ¥å£ç±»</u>ã€‚</li>
</ul>
<h3 id="7-2-è™šå‡½æ•°">7.2 è™šå‡½æ•°</h3>
<p>é¦–å…ˆå›å¿†ä¸‹C++çš„å¤šæ€æ€§è¡Œä¸ºè¡¨ç°ï¼šå¯¹è±¡åœ¨ä¸åŒä¸Šä¸‹æ–‡ç¯å¢ƒä¼šè¡¨ç°å‡ºä¸åŒçš„ç‰¹æ€§ã€‚</p>
<p>è¿™æœ‰ç‚¹æŠ½è±¡ï¼Œæˆ‘ä»¬å…·ä½“ä¸€ç‚¹ã€‚</p>
<p>C++æ”¯æŒä¸¤ç§å¤šæ€ï¼š</p>
<ul>
<li>ç¼–è¯‘æ—¶å¤šæ€ï¼ˆé™æ€å¤šæ€ï¼‰ï¼šé€šè¿‡é‡è½½å‡½æ•°å®ç°ï¼Œå‡½æ•°åœ°å€æ—©ç»‘å®šï¼Œç¼–è¯‘æœŸé—´å°±å¯ä»¥ç¡®å®šå‡½æ•°çš„é“¾æ¥åœ°å€ï¼›</li>
<li>è¿è¡Œæ—¶å¤šæ€ï¼ˆåŠ¨æ€å¤šæ€ï¼‰ï¼šé€šè¿‡è™šå‡½æ•°å®ç°ï¼Œå‡½æ•°åœ°å€æ™šç»‘å®šï¼Œè¿è¡ŒæœŸé—´æ ¹æ®è™šè¡¨æ¥ç¡®å®šå‡½æ•°é“¾æ¥åœ°å€ã€‚</li>
</ul>
<p>é‡è½½çš„åŒåå‡½æ•°ï¼Œåœ¨å‡½æ•°ç­¾åä¸åŒï¼ˆä¸åŒçš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼‰ï¼Œä¼šè°ƒç”¨ä¸åŒçš„å‡½æ•°ï¼ˆè¡¨ç°ä¸åŒçš„è¡Œä¸ºï¼‰ã€‚</p>
<p><strong>è™šå‡½æ•°çš„ä½œç”¨ä¾¿ä½“ç°åœ¨C++çš„åŠ¨æ€å¤šæ€æ€§ä¸Šï¼Œå¯ä»¥æ ¹æ®è°ƒç”¨å‡½æ•°çš„å¯¹è±¡çš„ç±»å‹ï¼ˆä¸åŒçš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼‰ï¼Œä¼šæ‰§è¡Œä¸åŒçš„è™šå‡½æ•°ï¼ˆè¡¨ç°ä¸åŒçš„è¡Œä¸ºï¼‰ã€‚</strong></p>
<p>å…¶å¤§è‡´å®ç°è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>é¦–å…ˆï¼Œåœ¨åŸºç±»çš„å‡½æ•°å‰åŠ ä¸Š<u>virtual</u>å…³é”®å­—ï¼Œä¹Ÿå°±æ˜¯è™šå‡½æ•°ï¼ŒåŒæ—¶åœ¨æ´¾ç”Ÿç±»ä¸­<u>é‡å†™</u>è¯¥å‡½æ•°ï¼›</li>
<li>ç„¶åï¼Œå£°æ˜åŸºç±»ç±»å‹çš„æŒ‡é’ˆï¼ˆæˆ–å¼•ç”¨ï¼‰ï¼Œè¯¥æŒ‡é’ˆï¼ˆæˆ–å¼•ç”¨ï¼‰ä¼šæŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡ï¼›</li>
<li>æœ€åï¼Œä½¿ç”¨åŸºç±»æŒ‡é’ˆï¼ˆæˆ–å¼•ç”¨ï¼‰è°ƒç”¨è¯¥è™šå‡½æ•°ï¼Œ<u>å¦‚æœå¯¹è±¡ç±»å‹æ˜¯æ´¾ç”Ÿç±»ï¼Œå°±è°ƒç”¨æ´¾ç”Ÿç±»çš„å‡½æ•°ï¼›å¦‚æœå¯¹è±¡ç±»å‹æ˜¯åŸºç±»ï¼Œå°±è°ƒç”¨åŸºç±»çš„å‡½æ•°</u> ã€‚</li>
</ol>
<p>è¿™å°±é€šè¿‡è™šå‡½æ•°å®ç°äº†C++åŠ¨æ€å¤šæ€æ€§ï¼Œä¸‹é¢æˆ‘ä»¬å®é™…ç¼–ç è¯´æ˜ã€‚</p>
<h4 id="7-2-1-æŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡çš„åŸºç±»æŒ‡é’ˆå’Œå¼•ç”¨">7.2.1 æŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡çš„åŸºç±»æŒ‡é’ˆå’Œå¼•ç”¨</h4>
<h5 id="è®¤è¯†åŸºç±»æŒ‡é’ˆå’Œå¼•ç”¨">è®¤è¯†åŸºç±»æŒ‡é’ˆå’Œå¼•ç”¨</h5>
<p>æˆ‘ä»¬äº†è§£åˆ°ï¼Œæ´¾ç”Ÿç±»ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š</p>
<ul>
<li>ç»§æ‰¿çš„åŸºç±»éƒ¨åˆ†ï¼›</li>
<li>è‡ªèº«æ‰©å±•çš„éƒ¨åˆ†ã€‚</li>
</ul>
<p>å¥½äº†ï¼Œæ„‰å¿«åœ°æ¥å—è¿™ä¸ªè®¾å®šåã€‚ç°åœ¨æœ‰ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„é—®é¢˜ï¼š</p>
<p><strong>ç†è®ºä¸Šï¼Œæ´¾ç”Ÿç±»å¯¹è±¡æ˜¯åŒ…å«åŸºç±»éƒ¨åˆ†çš„ï¼Œé‚£åŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨èƒ½æŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡å—ï¼Ÿå¦‚æœèƒ½ï¼ŒåŸºç±»æŒ‡é’ˆèƒ½ä½¿ç”¨æ´¾ç”Ÿç±»æ‰©å±•éƒ¨åˆ†çš„æˆå‘˜å—</strong>ï¼Ÿ</p>
<p>ç­”æ¡ˆåˆ†åˆ«æ˜¯ï¼šèƒ½ï¼Œä¸èƒ½ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="keyword">int</span> m_value &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Base</span>(<span class="keyword">int</span> value): m_value&#123; value &#125;</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">std::string <span class="title">getName</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> <span class="string">&quot;Base&quot;</span>; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getValue</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> m_value; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span>:</span> <span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Derived</span>(<span class="keyword">int</span> value): Base&#123; value &#125;</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">std::string <span class="title">getName</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> <span class="string">&quot;Derived&quot;</span>; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getValueDoubled</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> m_value * <span class="number">2</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Derived derived&#123; <span class="number">5</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŸºç±»æŒ‡é’ˆå’Œå¼•ç”¨éƒ½å¯ä»¥æŒ‡å‘æ´¾ç”Ÿç±»</span></span><br><span class="line">    Base&amp; rBase =  derived ;</span><br><span class="line">    Base* pBase =  &amp;derived;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŸºç±»æŒ‡é’ˆåªèƒ½è°ƒç”¨åŸºç±»çš„æ–¹æ³•ï¼ˆåŸºç±»å¼•ç”¨åŒç†ï¼‰</span></span><br><span class="line">    pBase-&gt;<span class="built_in">getName</span>();  <span class="comment">// baseï¼Œè°ƒç”¨çš„æ˜¯åŸºç±»æ–¹æ³•</span></span><br><span class="line">    pBase-&gt;<span class="built_in">getValue</span>(); <span class="comment">// 5</span></span><br><span class="line">    <span class="comment">//pBase-&gt;getValueDoubled();  // errorï¼Œä¸èƒ½è°ƒç”¨æ´¾ç”Ÿç±»çš„æ–¹æ³•</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>å¦ä¸€æ–¹é¢ï¼Œä½ å¯èƒ½ä¼šè¯´è¿™ä¸ªä¾‹å­å¾ˆå‚»ï¼šâ€œå½“æˆ‘èƒ½ä½¿ç”¨æ´¾ç”Ÿå¯¹è±¡æ—¶ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨æŒ‡å‘æ´¾ç”Ÿå¯¹è±¡åŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨</strong>ï¼Ÿâ€</p>
<p>è¿™æ¶‰åŠåˆ°å¤šæ€çš„â€œæ¥å£é‡ç”¨åŸåˆ™â€ï¼šä¸è®ºä¼ é€’è¿‡æ¥çš„ç©¶ç«Ÿæ˜¯ç±»çš„å“ªä¸ªå¯¹è±¡ï¼Œå‡½æ•°éƒ½èƒ½å¤Ÿé€šè¿‡åŒä¸€ä¸ªæ¥å£è°ƒç”¨åˆ°é€‚åº”å„è‡ªå¯¹è±¡çš„å®ç°æ–¹æ³•ã€‚</p>
<p>æˆ‘ä»¬ä¸¾ä¾‹è¯´æ˜ã€‚</p>
<h5 id="ä¸ºä»€ä¹ˆéœ€è¦åŸºç±»æŒ‡é’ˆå’Œå¼•ç”¨ï¼Ÿ">ä¸ºä»€ä¹ˆéœ€è¦åŸºç±»æŒ‡é’ˆå’Œå¼•ç”¨ï¼Ÿ</h5>
<p>å‡è®¾æœ‰å¤šä¸ªæ´¾ç”Ÿç±»ï¼šDerivedã€Derived1ã€Derived2â€¦ç­‰éƒ½æ´¾ç”ŸäºBaseã€‚ç°åœ¨å¤–éƒ¨æœ‰ä¸€ä¸ªå‡½æ•°<code>printName</code>è¦æ±‚æ‰“å°å®ƒä»¬çš„åå­—ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printName</span><span class="params">(Derived* pd)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	std::cout&lt;&lt;pd-&gt;<span class="built_in">getName</span>()&lt;&lt;std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯è¿™ä¸ªå‡½æ•°åªèƒ½æ‰“å°Derivedçš„åå­—ï¼ŒDerived1ç­‰ä¸èƒ½æ‰“å°ï¼Œå› ä¸ºDerivedå’ŒDerived1ç­‰æ˜¯ä¸åŒç±»å‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Derived d;</span><br><span class="line"><span class="built_in">printName</span>(d); <span class="comment">// ok</span></span><br><span class="line"></span><br><span class="line">Derived1 d1;</span><br><span class="line"><span class="built_in">printName</span>(d1); <span class="comment">// errorï¼ŒDerivedç±»å‹ä¸åŒ¹é…Derived1</span></span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥ï¼Œä¸ºäº†Derived1ã€Derived2â€¦DerivedNï¼Œéƒ½èƒ½è¢«æ‰“å°ï¼Œæˆ‘ä»¬ä¸å¾—ä¸å†å®šä¹‰<code>N</code>ä¸ªåŸºæœ¬ä¸€æ ·çš„<code>printName</code>å‡½æ•°ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printName</span><span class="params">(Derived1* pd)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	std::cout&lt;&lt;pd-&gt;<span class="built_in">getName</span>()&lt;&lt;std::endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printName</span><span class="params">(Derived2* pd)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	std::cout&lt;&lt;pd-&gt;<span class="built_in">getName</span>()&lt;&lt;std::endl;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>è¿™è‚¯å®šä¼šè®©ä½ æœ‰ç‚¹æ— å¥ˆï¼Œå¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬çŸ¥é“åŸºç±»æŒ‡é’ˆï¼ˆæˆ–å¼•ç”¨ï¼‰å¯ä»¥æ¥å—æ´¾ç”Ÿç±»å¯¹è±¡ã€‚äºæ˜¯ä¸€åˆ‡ä¾¿ä¸ç”¨è¿™ä¹ˆéº»çƒ¦ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printName</span><span class="params">(Base* pBase)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	std::cout&lt;&lt;pBase-&gt;<span class="built_in">getName</span>()&lt;&lt;std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Derived d;</span><br><span class="line">Derived1 d1;</span><br><span class="line">Derived2 d2;</span><br><span class="line"></span><br><span class="line"><span class="built_in">printName</span>(d);   <span class="comment">// ok, æ‰“å°ï¼šBase</span></span><br><span class="line"><span class="built_in">printName</span>(d1);  <span class="comment">// ok, æ‰“å°ï¼šBase</span></span><br><span class="line"><span class="built_in">printName</span>(d2);  <span class="comment">// ok, æ‰“å°ï¼šBase</span></span><br></pre></td></tr></table></figure>
<p>ä½†ç»†å¿ƒçš„ä½ ä¹Ÿæ³¨æ„åˆ°ï¼Œæ‰“å°å…¨éƒ½æ˜¯åŸºç±»çš„åï¼šå³è°ƒç”¨çš„æ˜¯åŸºç±»çš„<code>getName</code>å‡½æ•°ï¼Œè€Œä¸æ˜¯æ´¾ç”Ÿç±»çš„<code>getName</code> å‡½æ•°ã€‚æ˜¾ç„¶ï¼Œæ­¤æ—¶å¹¶æ²¡æœ‰ä½“ç°ç±»çš„åŠ¨æ€å¤šæ€æ€§ï¼Œå› ä¸º<code>getName</code>å‡½æ•°çš„é“¾æ¥åœ°å€åœ¨<u>ç¼–è¯‘æ—¶</u>ä¾¿ç¡®å®šäº†ï¼Œé“¾æ¥çš„æ˜¯åŸºç±»çš„<code>getName</code>å‡½æ•°åœ°å€ã€‚</p>
<p>è¿™ä¹Ÿå°±æ˜¯<strong>æ—©ç»‘å®š</strong>ï¼Œå¦‚ä¸‹å›¾ã€‚</p>
<p><img src="https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/image-20220207005934363.png" alt="image-20220207005934363"></p>
<p>â†‘å¯ä»¥çœ‹åˆ°ï¼Œç¼–è¯‘ä¹‹åï¼Œ<code>getName</code> åœ¨æ±‡ç¼–ä»£ç ä¸­å·²è¢«æ›¿æ¢ä¸ºç¬¦å·ï¼š <code>_ZNK4Base7getNameB5cxx11Ev</code> ï¼Œå¯¹åº”è°ƒç”¨åœ°å€ä¸º<code>400c02</code>ã€‚</p>
<p>ä½†å¦‚æœ<code>getName</code>æ˜¯è™šå‡½æ•°ä¸€åˆ‡å¼€å§‹å˜å¾—ä¸ä¸€æ ·ã€‚</p>
<p>å¦‚æœåŸºç±»çš„<code>getName</code>å‡½æ•°è¢«å£°æ˜ä¸ºè™šå‡½æ•°ï¼Œå…¶åœ°å€ä¾¿ä¼šåœ¨<u>è¿è¡Œæ—¶</u>ç»‘å®šä¸ºè°ƒç”¨çš„æ´¾ç”Ÿç±»å¯¹è±¡çš„<code>getName</code>å‡½æ•°åœ°å€ã€‚è¿›è€Œå®ç°ä¸‹é¢æ•ˆæœï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">printName</span>(d);   <span class="comment">// ok, æ‰“å°ï¼šDerived</span></span><br><span class="line"><span class="built_in">printName</span>(d1);  <span class="comment">// ok, æ‰“å°ï¼šDerived1</span></span><br><span class="line"><span class="built_in">printName</span>(d2);  <span class="comment">// ok, æ‰“å°ï¼šDerived2</span></span><br></pre></td></tr></table></figure>
<h4 id="7-2-2-è™šå‡½æ•°å’Œå¤šæ€">7.2.2 è™šå‡½æ•°å’Œå¤šæ€</h4>
<h5 id="è™šå‡½æ•°å®ç°å¤šæ€">è™šå‡½æ•°å®ç°å¤šæ€</h5>
<p>ç»§ç»­å‰é¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬çœ‹çœ‹è™šå‡½æ•°å¦‚ä½•å®ç°å¤šæ€å§ã€‚</p>
<p>ä¸ºäº†æ–¹ä¾¿æè¿°ï¼Œè¿™é‡Œåªå±•ç¤ºäº†æ´¾ç”Ÿç±»Derivedã€Derived1ï¼Œæ³¨æ„<strong>æ´¾ç”Ÿç±»çš„ç­¾åã€è¿”å›ç±»å‹è¦å’ŒåŸºç±»å®Œå…¨ä¸€è‡´</strong>ï¼</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="keyword">int</span> m_value &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Base</span>(<span class="keyword">int</span> value): m_value&#123; value &#125;</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åŸºç±»getNameå‡½æ•°è¢«å£°æ˜ä¸ºè™šå‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> std::string <span class="title">getName</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> <span class="string">&quot;Base&quot;</span>; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getValue</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> m_value; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span>:</span> <span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Derived</span>(<span class="keyword">int</span> value): Base&#123; value &#125;</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ´¾ç”Ÿç±»getNameå‡½æ•°çš„virtualå¯çœç•¥</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> std::string <span class="title">getName</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> <span class="string">&quot;Derived&quot;</span>; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getValueDoubled</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> m_value * <span class="number">2</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived1</span>:</span> <span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Derived1</span>(<span class="keyword">int</span> value): Base&#123; value &#125;</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ´¾ç”Ÿç±»getNameå‡½æ•°çš„virtualå¯çœç•¥</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> std::string <span class="title">getName</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> <span class="string">&quot;Derived1&quot;</span>; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getValueDoubled</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> m_value * <span class="number">2</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printName</span><span class="params">(Base* pBase)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	std::cout&lt;&lt;pBase-&gt;<span class="built_in">getName</span>()&lt;&lt;std::endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Derived derived&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    Derived1 derived1&#123;<span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printName</span>(&amp;derived);   <span class="comment">// Derivedï¼Œè°ƒç”¨çš„æ˜¯æ´¾ç”Ÿç±»æ–¹æ³•Derived::getName</span></span><br><span class="line">    <span class="built_in">printName</span>(&amp;derived1);  <span class="comment">// Derived1ï¼Œè°ƒç”¨çš„æ˜¯æ´¾ç”Ÿç±»æ–¹æ³•Derived1::getName</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç±»ä¼¼çš„ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Base* pBase =  &amp;derived;</span><br><span class="line">pBase-&gt;<span class="built_in">getName</span>();  <span class="comment">// Derivedï¼ŒåŒä¸Š</span></span><br><span class="line">pBase =  &amp;derived1;</span><br><span class="line">pBase-&gt;<span class="built_in">getName</span>();  <span class="comment">// Derived1</span></span><br></pre></td></tr></table></figure>
<p>å’Œå‰é¢éè™šå‡½æ•°<code>getName</code>ç¼–è¯‘å™¨æ—©åœ¨ç¼–è¯‘æœŸç»‘å®šäº†åŸºç±»å‡½æ•°åœ°å€ä¸åŒï¼Œè™šå‡½æ•°é‡‡ç”¨<strong>æ™šç»‘å®š</strong>ï¼ˆåŠ¨æ€ç»‘å®šï¼‰ï¼šç¼–è¯‘å™¨æ£€æŸ¥åˆ°åŸºç±»çš„<code>getName</code>å‡½æ•°æ˜¯è™šå‡½æ•°ï¼Œä¸ä¼šæ—©æ—©ç»‘å®šå‡½æ•°<code>getName</code>åˆ°ç‰¹å®šå…¥å£åœ°å€ã€‚</p>
<p>ä¸‹å›¾è¯´æ˜äº†è¿™ä¸ªä¸åŒã€‚</p>
<p><img src="https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/image-20220207011513361.png" alt="image-20220207011513361"></p>
<p>â†‘æ­¤æ—¶<code>getName</code> å‡½æ•°çš„åœ°å€æ˜¯é€šè¿‡å¯„å­˜å™¨<code>rax</code>çš„å€¼ç¡®å®šçš„ï¼Œ<code>rax</code> å­˜æ”¾çš„ä¾¿æ˜¯æ´¾ç”Ÿç±»çš„<strong>è™šè¡¨</strong>ä¸­<code>getName</code> å‡½æ•°åœ°å€ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„æ™šç»‘å®šã€‚</p>
<h5 id="æ—©ç»‘å®šå’Œæ™šç»‘å®š">æ—©ç»‘å®šå’Œæ™šç»‘å®š</h5>
<p>æœ¬èŠ‚å¯¹æ—©ç»‘å®šå’Œæ™šç»‘å®šè¿›è¡Œæ›´å…¨é¢çš„æ€»ç»“ã€‚</p>
<p>ç¼–è¯‘ç¨‹åºæ—¶ï¼Œç¼–è¯‘å™¨ä¼šå°† C++ ç¨‹åºä¸­çš„æ¯æ¡è¯­å¥è½¬æ¢ä¸ºä¸€è¡Œæˆ–å¤šè¡Œæœºå™¨è¯­è¨€ï¼Œé‡åˆ°å‡½æ•°åˆ™æ˜¯è½¬æ¢ä¸ºä¸€ä¸ªå¯ç”¨åœ°å€ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># å¯¹åº”ä»£ç ï¼šadd(1,2) </span><br><span class="line"># è½¬æ¢ä¸ºåœ°å€0x400937</span><br><span class="line">call   400937 &lt;_Z3addii&gt; </span><br></pre></td></tr></table></figure>
<p>ä½†åœ¨ç¼–è¯‘æœŸé—´ï¼Œæˆ‘ä»¬ä¸ä¸€å®šèƒ½ç¡®å®šè¦è°ƒç”¨å“ªä¸ªå‡½æ•°ï¼Œå¿…é¡»è¦åœ¨è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šã€‚ç”±æ­¤åŒºåˆ†å‡ºäº†æ—©ç»‘å®šå’Œæ™šç»‘å®šï¼š</p>
<ul>
<li><strong>æ—©ç»‘å®š</strong>ï¼šåœ¨ç¼–è¯‘å™¨æœŸé—´å°±å¯ä»¥<u>ç›´æ¥ç¡®å®šçš„è°ƒç”¨å‡½æ•°</u>ï¼Œä¼šå°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªè°ƒç”¨åœ°å€ï¼Œè¿™å°±æ˜¯æ—©ç»‘å®šï¼›</li>
<li><strong>æ™šç»‘å®š</strong>ï¼šåœ¨ç¼–è¯‘æœŸé—´<u>ä¸å¯ä»¥ç›´æ¥ç¡®å®šçš„è°ƒç”¨å‡½æ•°</u>ï¼Œè¿è¡ŒæœŸé—´æ‰è½¬æ¢ä¸ºå…·ä½“è°ƒç”¨çš„åœ°å€ï¼Œä¾¿æ˜¯æ™šç»‘å®šã€‚</li>
</ul>
<p>ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼šæˆ‘ä»¬é€šè¿‡å‡½æ•°æŒ‡é’ˆæ ¹æ®æ“ä½œç¬¦æŒ‡å‘ç›¸åº”è¿ç®—å‡½æ•°ï¼Œä½†æ“ä½œç¬¦æ˜¯åœ¨è¿è¡ŒæœŸé—´ç”±ç”¨æˆ·ç¡®å®šçš„ã€‚</p>
<p>æ™šç»‘å®šä¸€èˆ¬é€šè¿‡å‡½æ•°æŒ‡é’ˆå®ç°ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">subtract</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x - y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">multiply</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x * y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> op;  <span class="comment">// æ“ä½œç¬¦ç”±ç”¨æˆ·ç¡®å®š</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Enter an operation (0=add, 1=subtract, 2=multiply): &quot;</span>;</span><br><span class="line">    std::cin &gt;&gt; op;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ï¼ˆ1ï¼‰æ™šç»‘å®š</span></span><br><span class="line">    <span class="built_in"><span class="keyword">int</span></span> (*pFcn1)(<span class="keyword">int</span>, <span class="keyword">int</span>) = add;</span><br><span class="line">    <span class="comment">// ï¼ˆ2ï¼‰æ™šç»‘å®š</span></span><br><span class="line">    <span class="built_in"><span class="keyword">int</span></span> (*pFcn2)(<span class="keyword">int</span>, <span class="keyword">int</span>) = <span class="literal">nullptr</span>;</span><br><span class="line">    <span class="built_in"><span class="keyword">switch</span></span> (op)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>: pFcn2 = add; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>: pFcn2 = subtract; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>: pFcn2 = multiply; <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ï¼ˆ3ï¼‰æ—©ç»‘å®šè°ƒç”¨</span></span><br><span class="line">    <span class="built_in">add</span>(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">    <span class="comment">// ï¼ˆ4ï¼‰æ™šç»‘å®šè°ƒç”¨</span></span><br><span class="line">    <span class="built_in">pFcn1</span>(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">    <span class="comment">// ï¼ˆ5ï¼‰æ™šç»‘å®šè°ƒç”¨</span></span><br><span class="line">    <span class="built_in">pFcn2</span>(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„åˆ°ï¼Œï¼ˆ1ï¼‰ã€ï¼ˆ2ï¼‰éƒ½æ˜¯æ™šç»‘å®šã€‚</p>
<p>å¯¹äºï¼ˆ1ï¼‰ï¼Œç¼–è¯‘å™¨åŒæ ·æ— æ³•åœ¨ç¼–è¯‘æœŸé—´ç¡®å®šï¼Œå‡½æ•°æŒ‡é’ˆ<code>pFcn1</code>æŒ‡å‘çš„æ˜¯å“ªä¸ªå‡½æ•°ã€‚å› ä¸ºå‡½æ•°æŒ‡é’ˆï¼š</p>
<ol>
<li>éœ€è¦å…ˆè¯»å–<code>pFcn1</code> ä¿å­˜çš„å‡½æ•°åœ°å€</li>
<li>æ‰èƒ½å†è·³è½¬åˆ°ç›¸åº”å‡½æ•°</li>
</ol>
<p>æ˜¾ç„¶ï¼Œâ€œè¯»â€è¿™ä¸ªæ“ä½œåœ¨ç¼–è¯‘æœŸé—´æ˜¯æ— æ³•å®Œæˆçš„ï¼Œæ‰€ä»¥<code>pFcn1</code> æ— æ³•ç¡®å®šæŒ‡å‘å“ªä¸ªå‡½æ•°ã€‚</p>
<p>æœ€åï¼Œæˆ‘ä»¬å†æ¥ç›´è§‚å¯¹æ¯”ä¸‹æ—©ç»‘å®šå’Œæ™šç»‘å®šè°ƒç”¨ï¼ˆ3ï¼‰ã€ï¼ˆ4ï¼‰ã€ï¼ˆ5ï¼‰æ—¶çš„ä¸åŒã€‚</p>
<p><img src="https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/image-20220207120431838.png" alt="image-20220207120431838"></p>
<ul>
<li>æ—©ç»‘å®šï¼ˆâ‘ å¤„ï¼‰ï¼šå› ä¸º<code>add(1,2)</code>å‡½æ•°å¯ç›´æ¥è¢«è°ƒç”¨ï¼Œæ‰€ä»¥åœ¨ç¼–è¯‘æœŸé—´å°±è¢«æ›¿æ¢ä¸ºå‡½æ•°å…¥å£åœ°å€<code>_Z3addii</code>ï¼ˆ0x400877ï¼‰ï¼›</li>
<li>æ™šç»‘å®šï¼ˆâ‘¡å¤„ï¼‰ï¼š<code>PFcn1</code>æ— æ³•è¢«ç›´æ¥è°ƒç”¨ï¼Œå…ˆå°†æŒ‡é’ˆ<code>PFcn1</code> ä¿å­˜çš„å‡½æ•°åœ°å€ï¼ˆ<u>åœ°å€-16(%rbp)ä¸­çš„å€¼ï¼Œè¿™ä¸ªå€¼æ˜¯è¿è¡Œæ—¶è®¡ç®—çš„</u>ï¼‰å­˜å…¥å¯„å­˜å™¨<code>rax</code> ä¸­ï¼Œæœ€åæ‰æ ¹æ®å¯„å­˜å™¨ä¿å­˜çš„å‡½æ•°åœ°å€è¿›è¡Œè°ƒç”¨ã€‚</li>
<li>æ™šç»‘å®šï¼ˆâ‘¢å¤„ï¼‰ï¼šåŒâ‘¡ã€‚</li>
</ul>
<p>æœ‰äº†è¿™äº›æ¦‚å¿µï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹æ¢è®¨<u>è™šå‡½æ•°åŠ¨æ€ç»‘å®šå®ç°çš„è¿‡ç¨‹å’ŒåŸç†</u>ï¼Œè¿™ä¸å¯é¿å…æ¶‰åŠåˆ°è™šè¡¨ã€‚</p>
<h5 id="è™šè¡¨">è™šè¡¨</h5>
<p>ä¸ºäº†å®ç°è™šå‡½æ•°ï¼ŒC++ ä½¿ç”¨äº†ä¸€ç§ç‰¹æ®Šå½¢å¼çš„åæœŸç»‘å®šï¼Œç§°ä¸ºè™šè¡¨ï¼ˆvtableï¼‰ã€‚</p>
<p><strong>æ¯ä¸ªä½¿ç”¨è™šå‡½æ•°çš„ç±»ï¼ˆæˆ–æ´¾ç”Ÿè‡ªä½¿ç”¨è™šå‡½æ•°çš„ç±»ï¼‰éƒ½æœ‰è‡ªå·±çš„è™šè¡¨</strong>ï¼š</p>
<ul>
<li>
<p><strong>è™šè¡¨æ˜¯ç¼–è¯‘å™¨æœŸé—´è®¾ç½®çš„é™æ€ä¸€ç»´æ•°ç»„</strong>ï¼Œæ•°ç»„æ¯ä¸€ä¸ªæ¡ç›®éƒ½æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œå®ƒæŒ‡å‘è¯¥ç±»çš„è™šå‡½æ•°ï¼›</p>
</li>
<li>
<p><strong>æ¯ä¸ªç±»è¿˜æœ‰ä¸ªéšè—æŒ‡é’ˆ<code>*__vptr</code> ï¼Œ<u>å®ƒå¯ä»¥è¢«ç»§æ‰¿</u></strong>ï¼š</p>
<ul>
<li><code>*__vptr</code> åœ¨<u>åˆ›å»ºç±»å®ä¾‹æ—¶</u>ï¼Œä¼šè¢«<u>å½“å‰ç±»æ„é€ å‡½æ•°</u>è®¾ç½®æŒ‡å‘è¯¥ç±»çš„è™šè¡¨ï¼ˆå‡†ç¡®æ¥è¯´æ˜¯åœ¨æ„é€ å‡½æ•°ä½“è¿›å…¥å‰åˆå§‹åŒ–çš„ï¼Œä¹Ÿå°±æ˜¯æˆå‘˜åˆ—è¡¨ä¸­ï¼‰ï¼›</li>
<li>ç›¸æ¯”<code>*this</code> æŒ‡é’ˆï¼Œ<code>*__vptr</code>æ˜¯ä¸€ä¸ªçœŸæ­£çš„æŒ‡é’ˆï¼Œå®ƒä½¿å¾—æ¯ä¸ªç±»çš„å¯¹è±¡éƒ½å¢åŠ äº†ä¸€ä¸ªæŒ‡é’ˆçš„å¤§å°ï¼ˆ4å­—èŠ‚æˆ–8å­—èŠ‚ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>è™šè¡¨å’Œè™šè¡¨æŒ‡é’ˆæ˜¯åœ¨æ„é€ å‡½æ•°ä¸­è¿›è¡Œåˆ›å»ºå’Œåˆå§‹åŒ–çš„</strong>ï¼š</p>
<p>åœ¨æ„é€ å­ç±»å¯¹è±¡æ—¶ï¼Œ</p>
<ul>
<li>
<p>é¦–å…ˆè°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–çˆ¶ç±»å¯¹è±¡çš„è™šè¡¨æŒ‡é’ˆï¼Œä½¿è¯¥è™šè¡¨æŒ‡é’ˆæŒ‡å‘çˆ¶ç±»çš„è™šè¡¨ï¼›</p>
</li>
<li>
<p>ç„¶åæ‰§è¡Œå­ç±»çš„æ„é€ å‡½æ•°æ—¶ï¼Œå­ç±»å¯¹è±¡çš„è™šè¡¨æŒ‡é’ˆè¢«åˆå§‹åŒ–ï¼ŒæŒ‡å‘è‡ªèº«çš„è™šè¡¨ã€‚</p>
</li>
</ul>
</li>
</ul>
<p>çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">function1</span><span class="params">()</span> </span>&#123;&#125;;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">function2</span><span class="params">()</span> </span>&#123;&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D1</span>:</span> <span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">function1</span><span class="params">()</span> </span>&#123;&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    D1 d1; <span class="comment">// æ­¤æ—¶*__vptrè¢«è®¾ç½®æŒ‡å‘D1çš„è™šè¡¨</span></span><br><span class="line">    Base* dPtr = &amp;d1;</span><br><span class="line">    dPtr-&gt;<span class="built_in">function1</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ ¹æ®<u>7.2.1</u> èŠ‚æˆ‘ä»¬çŸ¥é“ï¼Œç†è®ºä¸ŠåŸºç±»æŒ‡é’ˆ<code>dPtr</code>åªèƒ½â€œçœ‹åˆ°â€æ´¾ç”Ÿç±»å¯¹è±¡<code>d1</code>çš„åŸºç±»éƒ¨åˆ†ã€‚ä½†è¿™é‡Œå´æˆåŠŸè°ƒç”¨äº†<code>d1</code> çš„æˆå‘˜è™šå‡½æ•°<code>function1</code> ã€‚</p>
<p>ä¸‹å›¾å½¢è±¡åœ°è¯´æ˜äº†è¿™ä¸€ç‚¹ï¼š</p>
<p><img src="https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/image-20220207220421280.png" alt="image-20220207220421280"></p>
<ul>
<li>æ´¾ç”Ÿç±»è™šå‡½æ•°åœ°å€æ’åˆ—<u>é¡ºåº</u>ã€<u>ä¸ªæ•°</u>å’ŒåŸºç±»å®Œå…¨ç›¸åŒï¼›</li>
<li>å¦ä¸€æ–¹é¢ï¼Œè™½ç„¶æ´¾ç”Ÿç±»D1æ²¡æœ‰é‡å†™è™šå‡½æ•°function2ï¼Œä½†ä¾æ—§ä¼šæœ‰å®ƒçš„åœ°å€ï¼Œåªä¸è¿‡æŒ‡å‘çš„æ˜¯åŸºç±»è™šå‡½æ•°function2çš„å®ç°ã€‚</li>
</ul>
<p>ç°åœ¨æˆ‘ä»¬å†æ¥è§£é‡Šä¸‹é¢è¿™è¡Œä»£ç å‘ç”Ÿäº†ä»€ä¹ˆï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dPtr-&gt;<span class="built_in">function1</span>();</span><br></pre></td></tr></table></figure>
<ol>
<li>ç¼–è¯‘å™¨è¯†åˆ«å‡º<code>function1</code> æ˜¯è™šå‡½æ•°ï¼Œå¼€å§‹åˆ†ææ­¤æ—¶è°ƒç”¨å¯¹è±¡ç±»å‹ï¼Œæ ¹æ®è°ƒç”¨å¯¹è±¡çš„ç±»å‹æ¥ç¡®å®šä½¿ç”¨å“ªä¸ªç±»çš„è™šæŒ‡é’ˆï¼Œè¿›è€Œç¡®å®šè™šè¡¨æ¥æ‰¾åˆ°ç›¸åº”è™šå‡½æ•°æŒ‡é’ˆåœ°å€ï¼›</li>
<li>æŒ‡é’ˆ<code>dPtr</code>æ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒæ˜¯åŸºç±»çš„æŒ‡é’ˆï¼ˆå¼•ç”¨åŒç†ï¼‰ï¼Œä½†æŒ‡å‘çš„æ˜¯æ´¾ç”Ÿç±»å¯¹è±¡â€”â€”<strong>è¿™ç§æƒ…å†µï¼Œæ˜¯æ ¹æ®æŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡ç¡®å®šç±»å‹ï¼Œè¿›è€Œç¡®å®šè°ƒç”¨æ´¾ç”Ÿç±»çš„è™šæŒ‡é’ˆ</strong>ï¼›</li>
<li>æ‰€ä»¥ï¼Œæœ€ç»ˆæ ¹æ®<code>dPtr-&gt;D1::*__vptr</code> æ¥æŸ¥æ‰¾æŸ¥æ‰¾D1çš„è™šè¡¨ï¼ˆä¸Šå›¾çš„D1 VTableï¼‰ï¼Œä»è€Œè°ƒç”¨äº†<code>d1::function1</code> ã€‚</li>
</ol>
<p>è°ƒç”¨function2ç±»ä¼¼ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dPtr-&gt;<span class="built_in">function2</span>();</span><br></pre></td></tr></table></figure>
<ol>
<li>ç¼–è¯‘å™¨è¯†åˆ«å‡º<code>function2</code> æ˜¯è™šå‡½æ•° ï¼ŒåŒæ—¶ç¡®å®šäº†å½“å‰è°ƒç”¨å¯¹è±¡ç±»å‹æ˜¯<code>D1</code> ;</li>
<li>æ ¹æ®<code>D1</code>è™šæŒ‡é’ˆæŸ¥æ‰¾<code>D1</code> çš„è™šè¡¨ï¼Œè¿›è€Œæ‰¾åˆ°<code>function2</code>å‡½æ•°æŒ‡é’ˆï¼Œä¸è¿‡è¿™ä¸ªæŒ‡é’ˆä¿å­˜çš„æ˜¯<code>Base</code> è™šè¡¨çš„<code>function2</code>å‡½æ•°åœ°å€ï¼›</li>
<li>æœ€ç»ˆè°ƒç”¨äº†<code>Base::function2</code> ã€‚</li>
</ol>
<p>ä»æ±‡ç¼–è§’åº¦æ¥éªŒè¯ä¸Šè¿°è¿‡ç¨‹ï¼š</p>
<p><img src="https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/image-20220207232953703.png" alt="image-20220207232953703"></p>
<p>æ³¨æ„å³ä¾§çº¢æ¡†å¤„çš„æ±‡ç¼–ä»£ç ï¼š1.ç¡®å®šå¯¹è±¡ç±»å‹â†’2.æ ¹æ®è™šæŒ‡é’ˆæ‰¾åˆ°è™šè¡¨â†’3.æ ¹æ®è™šè¡¨å’Œåç§»è®¡ç®—è™šå‡½æ•°æŒ‡é’ˆåœ°å€â†’4.æ ¹æ®è™šå‡½æ•°æŒ‡é’ˆè·å–è™šå‡½æ•°è°ƒç”¨åœ°å€â†’5.è°ƒç”¨å‡½æ•°ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 1.-8(%rbp)æ˜¯å †ä¸Šd1å†…å­˜é¦–åœ°å€ï¼Œå­˜å…¥å¯„å­˜å™¨raxä¸­</span><br><span class="line">movq    -8(%rbp), %rax </span><br><span class="line"># 2.è·å–d1é¦–åœ°å€ä¿å­˜çš„å€¼ï¼Œå­˜åœ¨å¯„å­˜å™¨raxä¸­ã€‚å› ä¸ºd1å†…å­˜é¦–åœ°å€ï¼Œå³æ˜¯è™šæŒ‡é’ˆåœ°å€ï¼Œæ‰€ä»¥è·å–äº†è™šæŒ‡é’ˆä¿å­˜çš„å†…å®¹ï¼Œå³è™šè¡¨é¦–åœ°å€æ”¾å…¥å¯„å­˜åŒºraxä¸­</span><br><span class="line">movq    (%rax), %rax  </span><br><span class="line"># 3.è™šè¡¨é¦–åœ°å€+åç§»8ä¸ªå­—èŠ‚è¡¨ç¤ºfunction2å‡½æ•°æŒ‡é’ˆï¼Œç„¶åå­˜å…¥å¯„å­˜å™¨raxä¸­</span><br><span class="line">addq    $8, %rax </span><br><span class="line"># 4.è·å–å‡½æ•°æŒ‡é’ˆä¿å­˜çš„å€¼ï¼Œå³function2çš„å‡½æ•°åœ°å€ï¼Œæœ€ç»ˆä¿å­˜åœ¨raxä¸­</span><br><span class="line">movq    (%rax), %rax </span><br><span class="line">movq    -8(%rbp), %rdx</span><br><span class="line">movq    %rdx, %rdi</span><br><span class="line"># 5.è°ƒç”¨function2</span><br><span class="line">call    *%rax </span><br></pre></td></tr></table></figure>
<h5 id="è™šå‡½æ•°æ€§èƒ½é—®é¢˜">è™šå‡½æ•°æ€§èƒ½é—®é¢˜</h5>
<p>è¿„ä»Šä¸ºæ­¢ï¼Œæˆ‘ä»¬ä»‹ç»äº†ä¸‰ç§å‡½æ•°è°ƒç”¨æ–¹å¼ï¼š</p>
<ul>
<li>æ—©ç»‘å®šæ–¹å¼ï¼šç›´æ¥è°ƒç”¨ï¼›</li>
<li>æ™šç»‘å®šæ–¹å¼ï¼šå‡½æ•°æŒ‡é’ˆä¸è™šå‡½æ•°ã€‚</li>
</ul>
<p>å…¶ä¸­ï¼Œç›´æ¥è°ƒç”¨æ–¹å¼åªéœ€1æ¬¡å°±å¯ä»¥æ‰¾åˆ°è°ƒç”¨çš„å‡½æ•°ï¼›å‡½æ•°æŒ‡é’ˆéœ€è¦ä¸¤æ¬¡ï¼šè¯»å–å‡½æ•°æŒ‡é’ˆä¿å­˜çš„å‡½æ•°åœ°å€â†’è°ƒç”¨å‡½æ•°ï¼›è€Œè™šå‡½æ•°éœ€è¦ä¸‰æ¬¡ï¼šè¯»å–è™šæŒ‡é’ˆ<code>*__vptr</code> æ‰¾åˆ°è™šè¡¨â†’è¯»å–è™šè¡¨ä¸­è¦è°ƒç”¨çš„è™šå‡½æ•°æŒ‡é’ˆä¿å­˜çš„å‡½æ•°åœ°å€â†’è°ƒç”¨å‡½æ•°ã€‚</p>
<p>æ˜¾ç„¶è¿™å¸¦æ¥äº†é¢å¤–çš„<u>æ—¶é—´å¼€é”€</u>ã€‚</p>
<p>å¦å¤–ï¼Œä»»ä½•ä½¿ç”¨è™šå‡½æ•°çš„ç±»éƒ½æœ‰ä¸€ä¸ª è™šæŒ‡é’ˆ<code>*__vptr</code> ï¼Œåˆ›å»ºå¯¹è±¡ä¹Ÿéœ€è¦å¤šä½™å†…å­˜å­˜å‚¨è¯¥æŒ‡é’ˆï¼Œè¿™è¿˜å¸¦æ¥é¢å¤–<u>ç©ºé—´å¼€é”€</u>ã€‚</p>
<p>æ‰€ä»¥ï¼Œè™šå‡½æ•°è™½å¥½ä½†ä¸è¦è¿‡åº¦å“¦ã€‚</p>
<h4 id="7-2-3-è™šå‡½æ•°äºŒä¸‰äº‹">7.2.3  è™šå‡½æ•°äºŒä¸‰äº‹</h4>
<h5 id="overrideã€finalåŠåå˜ç±»å‹">overrideã€finalåŠåå˜ç±»å‹</h5>
<p>æœ¬èŠ‚æˆ‘ä»¬å°†ä¸»è¦ä»‹ç»overrideã€finalåŠåå˜è¿”å›ç±»å‹ï¼š</p>
<ul>
<li>overrideï¼šåœ¨æ´¾ç”Ÿç±»å‡½æ•°æ ‡è®°è¯¥å‡½æ•°é‡å†™äº†åŸºç±»çš„è™šå‡½æ•°ï¼Œä»¥é¿å…é‡å†™æ—¶æ´¾ç”Ÿç±»å‡½æ•°çš„è¿”å›ç±»å‹ã€å‡½æ•°ç­¾åå’ŒåŸºç±»è™šå‡½æ•°ä¸ä¸€è‡´çš„ä¹¦å†™é”™è¯¯ï¼›</li>
<li>finalï¼šæ˜¾å¼æ ‡è®°æŸä¸ªå‡½æ•°ä¸å¸Œæœ›ä¸é‡å†™ï¼Œå¦‚æœè¢«é‡å†™ç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼›</li>
<li>åå˜è¿”å›ç±»å‹ï¼šåŸºç±»å‡½æ•°è¿”å›ç±»å‹æ˜¯åŸºç±»çš„æŒ‡é’ˆï¼ˆæˆ–å¼•ç”¨ï¼‰ï¼Œæ´¾ç”Ÿç±»è¿”å›<u>é‡å†™å‡½æ•°</u>çš„è¿”å›ç±»å‹å¯ä»¥æ˜¯æ´¾ç”Ÿç±»çš„æŒ‡é’ˆï¼ˆæˆ–å¼•ç”¨ï¼‰ï¼Œæ­¤æ—¶ä¾æ—§è§†ä¸ºé‡å†™ã€‚</li>
</ul>
<p><strong>å…ˆä»overrideè¯´èµ·</strong>ã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œæ´¾ç”Ÿç±»è™šå‡½æ•°åªæœ‰åœ¨å…¶<u>ç­¾åå’Œè¿”å›ç±»å‹å®Œå…¨åŒ¹é…æ—¶</u>æ‰è¢«è§†ä¸ºé‡å†™ã€‚</p>
<p>ä¸€ä¸ç•™ç¥å¯èƒ½å°±ä¼šå‡ºé”™ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> std::string <span class="title">getName</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123; <span class="keyword">return</span> <span class="string">&quot;A&quot;</span>; &#125; <span class="comment">// éå¸¸å‡½æ•°</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> :</span> <span class="keyword">public</span> A</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> std::string <span class="title">getName</span><span class="params">(<span class="keyword">int</span> x)</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> <span class="string">&quot;B&quot;</span>; &#125; <span class="comment">// å¸¸å‡½æ•°</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥ï¼Œä¸ºäº†èƒ½è®©ç¼–è¯‘å™¨å¸®æˆ‘ä»¬è‡ªåŠ¨æ£€æŸ¥ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘åœ¨æ´¾ç”Ÿç±»Bä¸­ï¼Œä½¿ç”¨overrideå…³é”®å­—ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> :</span> <span class="keyword">public</span> A</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> std::string <span class="title">getName</span><span class="params">(<span class="keyword">int</span> x)</span> <span class="keyword">const</span> <span class="keyword">override</span> </span>&#123; <span class="keyword">return</span> <span class="string">&quot;B&quot;</span>; &#125; <span class="comment">// errorï¼Œç¼–è¯‘å™¨æŠ¥é”™</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶ç¨‹åºäº§ç”Ÿäº†ç¼–è¯‘é”™è¯¯ã€‚</p>
<p>ä½¿ç”¨overrideè¯´æ˜ç¬¦æ²¡æœ‰äº§ç”Ÿæ€§èƒ½æŸå¤±ï¼Œæ‰€ä»¥åœ¨æ´¾ç”Ÿç±»ä¸­çš„é‡å†™å‡½æ•°è¯·å°½é‡ä½¿ç”¨overrideè¯´æ˜ç¬¦ã€‚</p>
<p><strong>finalè¯´æ˜ç¬¦æ¯”è¾ƒç®€å•ä»…ä»…å¸Œæœ›æŸä¸ªå‡½æ•°ä¸ä¼šè¢«é‡å†™</strong>ã€‚</p>
<p>å’Œoverrideè¯´æ˜ç¬¦åœ¨åŒä¸€ä½ç½®ä½¿ç”¨ï¼ˆå‡½æ•°ä½“å‰ï¼‰ï¼ŒäºŒè€…ä¹Ÿå¯ä»¥åŒæ—¶å­˜åœ¨ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> std::string <span class="title">getName</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="string">&quot;A&quot;</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> :</span> <span class="keyword">public</span> A</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// okay, æ­¤æ—¶getNameå‡½æ•°è¢«finalä¿®é¥°</span></span><br><span class="line">	<span class="function">std::string <span class="title">getName</span><span class="params">()</span> <span class="keyword">override</span> <span class="keyword">final</span> </span>&#123; <span class="keyword">return</span> <span class="string">&quot;B&quot;</span>; &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>  :</span> <span class="keyword">public</span> B </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// errorï¼Œæ— æ³•é‡å†™Bä¸­çš„getNameå‡½æ•°</span></span><br><span class="line">	<span class="function">std::string_view <span class="title">getName</span><span class="params">()</span> <span class="keyword">override</span></span></span><br><span class="line"><span class="function">    </span>&#123; <span class="keyword">return</span> <span class="string">&quot;C&quot;</span>; &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>finalä¹Ÿå¯ä»¥ä¿®é¥°ç±»è¡¨ç¤ºæ— æ³•ç»§æ‰¿ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">test</span> <span class="keyword">final</span>  // å…¶å®ƒç±»æ— æ³•ç»§æ‰¿<span class="title">test</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æœ€åæ˜¯åå˜è¿”å›ç±»å‹</strong>ã€‚</p>
<p>å¦‚æœåŸºç±»è¿”å›ç±»å‹æ˜¯åŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨ï¼Œé‚£ä¹ˆæ´¾ç”Ÿç±»é‡å†™å‡½æ•°çš„è¿”å›ç±»å‹å¯ä»¥æ˜¯<u>æ´¾ç”Ÿç±»çš„å¼•ç”¨æˆ–æŒ‡é’ˆ</u>ã€‚æ­¤æ—¶ä¾æ—§è§†ä¸ºé‡å†™ã€‚</p>
<p>ä¸è¿‡ï¼Œä¸‹é¢è¿™ä¸ªä¾‹å­è—äº†ç‚¹ç„æœºã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string_view&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// è¿”å›ç±»å‹æ˜¯ï¼šbase*</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> Base* <span class="title">getThis</span><span class="params">()</span> </span>&#123; std::cout &lt;&lt; <span class="string">&quot;è°ƒç”¨ Base::getThis()\n&quot;</span>; <span class="keyword">return</span> <span class="keyword">this</span>; &#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">printType</span><span class="params">()</span> </span>&#123; std::cout &lt;&lt; <span class="string">&quot;Base\n&quot;</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span> :</span> <span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">// è¿”å›ç±»å‹æ˜¯Derived*ï¼Œä¾æ—§è§†ä¸ºæ˜¯åŸºç±»getThisçš„é‡å†™</span></span><br><span class="line">	<span class="function">Derived* <span class="title">getThis</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123; std::cout &lt;&lt; <span class="string">&quot;è°ƒç”¨ Derived::getThis()\n&quot;</span>;  <span class="keyword">return</span> <span class="keyword">this</span>; &#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">printType</span><span class="params">()</span> </span>&#123; std::cout &lt;&lt; <span class="string">&quot;Derived\n&quot;</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Derived d&#123;&#125;;</span><br><span class="line">	Base* b&#123; &amp;d &#125;;</span><br><span class="line">    <span class="comment">// è¾“å‡ºä¼šæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</span></span><br><span class="line">	b-&gt;<span class="built_in">getThis</span>()-&gt;<span class="built_in">printType</span>(); </span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è°ƒç”¨ Derived::getThis()</span><br><span class="line">Base</span><br></pre></td></tr></table></figure>
<p>ç»“æœåˆ†æï¼š</p>
<ol>
<li>
<p><code>b-&gt;getThis()</code>ï¼Œå› ä¸º<code>getThis</code> æ˜¯è™šå‡½æ•°ï¼Œæ‰€ä»¥<code>getThis</code> åœ¨è¿è¡Œæ—¶æ‰ä¼šè¢«ç¡®å®šï¼Œ<code>b</code>æ˜¯<code>Derived</code>çš„æŒ‡é’ˆï¼ŒæŸ¥æ‰¾<code>Derived</code>è™šè¡¨æœ€ç»ˆè°ƒç”¨è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è°ƒç”¨ Derived::getThis()</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>b-&gt;getThis()</code> è™½ç„¶è¿”å›äº†<code>Derived*</code> ï¼Œä½†å› ä¸ºC++æ˜¯é™æ€è¯­è¨€ï¼Œè€Œ<code>printType</code> åˆæœªå£°æ˜ä¸ºè™šå‡½æ•°ï¼Œæ‰€ä»¥<code>printType</code>è°ƒç”¨å¯¹è±¡ç±»å‹å…¶å®åœ¨ç¼–è¯‘æ—¶å°±å·²ç»ç¡®å®šä¸º<code>Base</code> ã€‚</p>
<p>æ‰€ä»¥æœ€ç»ˆ<code>Derived*</code>åªèƒ½å‘ä¸Šè½¬å‹ä¸º<code>Base*</code> ï¼Œè°ƒç”¨<code>Base::printType</code>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Base</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h5 id="ææ„ã€æ„é€ å‡½æ•°ä¸è™šå‡½æ•°">ææ„ã€æ„é€ å‡½æ•°ä¸è™šå‡½æ•°</h5>
<p>ææ„ã€æ„é€ å‡½æ•°ä¸è™šå‡½æ•°ä¹‹é—´éœ€è®°ä½ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p>
<ol>
<li>ä¸è¦åœ¨æ„é€ å‡½æ•°æˆ–ææ„å‡½æ•°ä¸­è°ƒç”¨è™šå‡½æ•°ï¼›</li>
<li>ææ„å‡½æ•°å¯å£°æ˜ä¸ºè™šå‡½æ•°ï¼Œæ„é€ å‡½æ•°ä¸èƒ½å£°æ˜ä¸ºè™šå‡½æ•°ã€‚</li>
</ol>
<p><strong>æˆ‘ä»¬å…ˆæ¥è®¨è®ºç¬¬ä¸€ç‚¹ï¼šä¸è¦ä»æ„é€ å‡½æ•°æˆ–ææ„å‡½æ•°è°ƒç”¨è™šå‡½æ•°</strong>ã€‚</p>
<p>è¦è§£é‡Šè¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦å›å¿†ä¸¤ä¸ªçŸ¥è¯†ç‚¹ï¼š</p>
<ul>
<li>æ¯ä¸ªç±»è™šæŒ‡é’ˆæŒ‡å‘å½“å‰ç±»è™šè¡¨ï¼Œ<u>è™šæŒ‡é’ˆæ ¹æ®å½“å‰è°ƒç”¨çš„å¯¹è±¡ç±»å‹ç¡®å®š</u>ï¼›</li>
<li>åˆ›å»ºæ´¾ç”Ÿç±»å¯¹è±¡æ—¶ï¼Œå…ˆè°ƒç”¨åŸºç±»éƒ¨åˆ†æ„é€ å‡½æ•°ï¼Œå†è°ƒç”¨æ´¾ç”Ÿç±»æ„é€ å‡½æ•°ï¼›é”€æ¯æ´¾ç”Ÿç±»å¯¹è±¡æ—¶ï¼Œææ„å‡½æ•°æ‰§è¡Œé¡ºåºå’Œæ„é€ å‡½æ•°æ°ç›¸åã€‚</li>
</ul>
<p>è®¾æƒ³ä¸‹ï¼Œæˆ‘ä»¬ä»<u>åŸºç±»</u>çš„æ„é€ å‡½æ•°è°ƒç”¨è™šå‡½æ•°ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p>
<ol>
<li>åˆ›å»ºæ´¾ç”Ÿç±»å¯¹è±¡ï¼Œå¼€å§‹è°ƒç”¨åŸºç±»æ„é€ å‡½æ•°ï¼›</li>
<li>è¿›å…¥åŸºç±»æ„é€ å‡½æ•°è°ƒç”¨è™šå‡½æ•°ï¼Œ<strong>å³ï¼šthis-&gt;è™šå‡½æ•°()ï¼Œå½“å‰thiså¯¹è±¡ç±»å‹æ˜¯åŸºç±»ç±»å‹è€Œä¸æ˜¯æ´¾ç”Ÿç±»ç±»å‹</strong> ï¼Œæ‰€ä»¥æœ€ç»ˆä½¿ç”¨çš„æ˜¯åŸºç±»ç±»å‹è™šæŒ‡é’ˆï¼Œåœ¨åŸºç±»çš„è™šè¡¨ä¸­è°ƒç”¨äº†åŸºç±»çš„è™šå‡½æ•°ç‰ˆæœ¬è€Œä¸æ˜¯æ´¾ç”Ÿç±»ä¸­çš„ï¼›</li>
<li>æœ€åå†è°ƒç”¨æ´¾ç”Ÿç±»æ„é€ å‡½æ•°ã€‚</li>
</ol>
<p>ç±»ä¼¼çš„é”™è¯¯å­˜åœ¨ææ„å‡½æ•°ä¸­ï¼š</p>
<ol>
<li>é”€æ¯å¯¹è±¡ï¼Œå¼€å§‹è°ƒç”¨æ´¾ç”Ÿç±»ææ„å‡½æ•°ï¼›</li>
<li>æ´¾ç”Ÿç±»éƒ¨åˆ†è¢«é”€æ¯ï¼Œæ¥ç€è°ƒç”¨åŸºç±»ææ„å‡½æ•°ï¼›</li>
<li>è¿›å…¥åŸºç±»ææ„å‡½æ•°è°ƒç”¨è™šå‡½æ•°ï¼ŒåŒæ ·çš„ï¼Œ<strong>æ­¤æ—¶å¯¹è±¡ç±»å‹æ˜¯åŸºç±»ç±»å‹è€Œä¸æ˜¯æ´¾ç”Ÿç±»ç±»å‹</strong>ï¼Œæ‰€ä»¥è™šå‡½æ•°å§‹ç»ˆè§£æä¸ºè¯¥å‡½æ•°çš„åŸºç±»ç‰ˆæœ¬ã€‚</li>
</ol>
<p><strong>æˆ‘ä»¬å†æ¥è®¨è®ºç¬¬äºŒç‚¹ï¼šææ„å‡½æ•°å¯å£°æ˜ä¸ºè™šå‡½æ•°ï¼Œæ„é€ å‡½æ•°ä¸èƒ½å£°æ˜ä¸ºè™šå‡½æ•°</strong>ã€‚</p>
<p>ææ„å‡½æ•°å£°æ˜ä¸ºè™šå‡½æ•°ï¼Œç‰¹åˆ«æ˜¯æ˜ç¡®è¦ä½œä¸ºåŸºç±»ä¸­çš„ææ„å‡½æ•°ï¼Œå¯ä»¥é¿å…æ´¾ç”Ÿç±»å†…å­˜æ²¡æœ‰è¢«é‡Šæ”¾äº§ç”Ÿå†…å­˜æ³„æ¼ã€‚è¿™æ ·é‡Šæ”¾åŸºç±»å†…å­˜æ—¶ï¼Œ<u>ä¼šæ‰§è¡Œæ´¾ç”Ÿç±»ææ„å‡½æ•°ï¼Œè€Œæ´¾ç”Ÿç±»ææ„å‡½æ•°æ‰§è¡Œåè¿˜ä¼šè°ƒç”¨åŸºç±»ææ„å‡½æ•°</u>ï¼Œç¡®ä¿äº†å†…å­˜è¢«ææ„å®Œå…¨ã€‚</p>
<p>ä¸‹é¢è¿™ä¸ªä¾‹å­å¸®åŠ©ç†è§£ï¼š</p>
<p>æ³¨æ„ï¼ŒåŸºç±»æŒ‡é’ˆ<code>base</code> æŒ‡å‘äº†newåŠ¨æ€åˆ†é…åœ¨<u>å †ä¸Š</u>çš„æ´¾ç”Ÿç±»å¯¹è±¡å†…å­˜ï¼Œæ‰€ä»¥åªèƒ½æˆ‘ä»¬æ˜¾å¼deleteç®¡ç†å †å†…å­˜é‡Šæ”¾ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    ~<span class="built_in">Base</span>() <span class="comment">// éè™šå‡½æ•°</span></span><br><span class="line">    &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;è°ƒç”¨ ~Base()\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span>:</span> <span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span>* m_array;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Derived</span>(<span class="keyword">int</span> length): m_array&#123; <span class="keyword">new</span> <span class="keyword">int</span>[length] &#125;</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    ~<span class="built_in">Derived</span>() </span><br><span class="line">    &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;è°ƒç”¨ ~Derived()\n&quot;</span>;</span><br><span class="line">        <span class="keyword">delete</span>[] m_array;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Base *base = <span class="keyword">new</span> Derived&#123;<span class="number">5</span>&#125;;</span><br><span class="line">    <span class="comment">// é‡Šæ”¾baseæŒ‡å‘çš„å†…å­˜</span></span><br><span class="line">    <span class="keyword">delete</span> base;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ€ç»ˆè¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è°ƒç”¨ ~Base()</span><br></pre></td></tr></table></figure>
<p>å› ä¸º<code>base</code>æŒ‡å‘çš„æ˜¯<u>å †ä¸Š</u>çš„æ´¾ç”Ÿç±»å¯¹è±¡ï¼Œæ‰€ä»¥è¿™ä¸ªå¯¹è±¡ç¦»å¼€ä½œç”¨åŸŸä¹Ÿä¸ä¼šè‡ªåŠ¨é‡Šæ”¾ï¼Œåªèƒ½æˆ‘ä»¬ä½¿ç”¨deleteæ˜¾å¼åˆ é™¤ã€‚</p>
<p>ä½†æ­¤æ—¶åªæœ‰åŸºç±»éƒ¨åˆ†æ‰§è¡Œäº†ææ„å‡½æ•°ï¼Œæ´¾ç”Ÿç±»ææ„å‡½æ•°æ²¡æœ‰æ‰§è¡Œï¼Œå¯¼è‡´<code>m_array</code> æŒæœ‰çš„å†…å­˜å‘ç”Ÿæ³„æ¼ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦<strong>å°†åŸºç±»çš„ææ„å‡½æ•°å£°æ˜ä¸ºè™šå‡½æ•°</strong>ã€‚ä¿®æ”¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">virtual</span> ~<span class="built_in">Base</span>() <span class="comment">// è™šå‡½æ•°</span></span><br><span class="line">&#123;</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;è°ƒç”¨ ~Base()\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å†æ¬¡æ‰§è¡Œè¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è°ƒç”¨ ~Derived()</span><br><span class="line">è°ƒç”¨ ~Base()</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œæ´¾ç”Ÿç±»çš„ææ„å‡½æ•°æ‰§è¡Œå®Œè¿˜ä¼šæ‰§è¡ŒåŸºç±»çš„ææ„å‡½æ•°ï¼ˆåä¹‹ä¸è¡Œï¼‰ã€‚</p>
<p><strong>ä¸è¿‡ï¼Œæ„é€ å‡½æ•°ä¸èƒ½å£°æ˜ä¸ºè™šå‡½æ•°</strong>ã€‚</p>
<p>å¾ˆå¥½ç†è§£ï¼Œå› ä¸ºè¿™ç ´åäº†æ„é€ å‡½æ•°æ‰§è¡Œé¡ºåºï¼šå…ˆåŸºç±»æ„é€ å‡½æ•°â†’å†æ´¾ç”Ÿç±»æ„é€ å‡½æ•°ã€‚</p>
<p>å½“åŸºç±»æ„é€ è¢«å£°æ˜ä¸ºè™šå‡½æ•°æ—¶ï¼šå…ˆæ´¾ç”Ÿç±»æ„é€ å‡½æ•°okï¼Œä½†<u>åŸºç±»æ„é€ å‡½æ•°æ°¸è¿œç­‰ä¸åˆ°æ‰§è¡Œ</u>ï¼Œæ´¾ç”Ÿç±»æ„é€ å‡½æ•°å¹¶æ²¡æœ‰ä¹‰åŠ¡è°ƒç”¨åŸºç±»æ„é€ å‡½æ•°ã€‚</p>
<p>ç»¼ä¸Šæ‰€è¿°ï¼š</p>
<ul>
<li>æ°¸è¿œä¸è¦ä»æ„é€ å‡½æ•°æˆ–ææ„å‡½æ•°è°ƒç”¨è™šå‡½æ•°ï¼›</li>
<li>å½“å‰ç±»å¦‚æœæ‰“ç®—ä½œä¸ºåŸºç±»ï¼Œè¯·å°†ææ„å‡½æ•°å£°æ˜ä¸ºvirtualï¼ˆå¦‚æœä¸æ‰“ç®—ä½œä¸ºåŸºç±»ï¼Œææ„å‡½æ•°ä¸ç”¨å£°æ˜ä¸ºvirtualï¼Œ<u>ä½†ç±»æœ€å¥½æ ‡è®°ä¸ºfinal</u>ï¼‰ï¼›</li>
<li>æ°¸è¿œä¸è¦æŠŠæ„é€ å‡½æ•°å£°æ˜ä¸ºvirtualã€‚</li>
</ul>
<h5 id="çº¯è™šå‡½æ•°ã€æŠ½è±¡åŸºç±»ä¸æ¥å£ç±»">çº¯è™šå‡½æ•°ã€æŠ½è±¡åŸºç±»ä¸æ¥å£ç±»</h5>
<p>è¿„ä»Šä¸ºæ­¢ï¼Œæˆ‘ä»¬ç¼–å†™çš„è™šå‡½æ•°éƒ½æœ‰å‡½æ•°ä½“ã€‚C++å…è®¸æˆ‘ä»¬åˆ›å»ºä¸€ç§ç‰¹æ®Šçš„å‡½æ•°ï¼Œçº¯è™šå‡½æ•°ï¼Œå®ƒæ²¡æœ‰å®ä½“ç”±æ´¾ç”Ÿç±»å®ç°å…·ä½“å®šä¹‰ã€‚</p>
<p>ç”±æ­¤è¿˜å¼•ç”³å‡ºå…¶å®ƒå‡ ä¸ªæ¦‚å¿µï¼š</p>
<ul>
<li>æŠ½è±¡åŸºç±»ï¼šå…·æœ‰çº¯è™šå‡½æ•°çš„ç±»ä¾¿æ˜¯æŠ½è±¡åŸºç±»ï¼›</li>
<li>æ¥å£ç±»ï¼šæ²¡æœ‰æˆå‘˜å˜é‡ï¼Œåªæœ‰çº¯è™šå‡½æ•°çš„ç±»ã€‚</li>
</ul>
<p>è¦åˆ›å»ºä¸€ä¸ªçº¯è™šå‡½æ•°ï¼Œåªéœ€ä¸ºå‡½æ•°èµ‹å€¼0å³å¯ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">protected</span>:  <span class="comment">// ä¿æŠ¤æˆå‘˜</span></span><br><span class="line">    <span class="built_in">Animal</span>()</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// çº¯è™šå‡½æ•°ï¼Œ=0</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keyword">char</span>* <span class="title">speak</span><span class="params">()</span> <span class="keyword">const</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// é»˜è®¤æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">Animal</span>() = <span class="keyword">default</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ª<code>Animal</code> <u>åªä½œä¸ºåŸºç±»</u>ï¼Œå› æ­¤ï¼š</p>
<ul>
<li><code>Animal</code>  æ„é€ å‡½æ•°è¢«å£°æ˜ä¸º<code>protected</code> ï¼Œé¿å…å…¶è¢«å¤–éƒ¨è¢«å®ä¾‹åŒ–ï¼›ä½†æ˜¯ä¸è¦å£°æ˜ä¸º<code>private</code> ï¼Œå¦åˆ™æ´¾ç”Ÿç±»æ— æ³•å®ä¾‹åŒ–ã€‚</li>
<li>å†…éƒ¨æˆ‘ä»¬å£°æ˜äº†çº¯è™šå‡½æ•°<code>speak()</code> ï¼Œå› ä¸ºæˆ‘ä»¬åªå¸Œæœ›å®ƒåœ¨æ´¾ç”Ÿç±»ä¸­è¢«å®ç°ï¼ŒåŸºç±»å®ç°æ²¡æœ‰æ„ä¹‰ã€‚</li>
</ul>
<p>æ­¤æ—¶<code>Animal</code> å› ä¸ºåŒ…å«çº¯è™šå‡½æ•°ï¼Œæ‰€ä»¥ä¹Ÿè¢«ç§°ä¸º<u>æŠ½è±¡åŸºç±»</u>ã€‚æŠ½è±¡åŸºç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œæ‰€ä»¥è¿™é‡Œçš„<code>Animal</code> æ„é€ å‡½æ•°ï¼Œç›´æ¥å£°æ˜publicä¹Ÿå¯ä»¥ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">protected</span>:  <span class="comment">// ä¿æŠ¤æˆå‘˜</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Animal</span>()</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// çº¯è™šå‡½æ•°ï¼Œ=0</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keyword">char</span>* <span class="title">speak</span><span class="params">()</span> <span class="keyword">const</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// é»˜è®¤æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">Animal</span>() = <span class="keyword">default</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>çº¯è™šå‡½æ•°è¿˜æœ‰å‡ ä¸ªç‰¹è´¨ï¼š</p>
<ul>
<li>
<p>çº¯è™šå‡½æ•°å¿…é¡»è¢«æ´¾ç”Ÿç±»å®ç°ï¼ˆé‡å†™ï¼‰ï¼›</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cow</span>:</span> <span class="keyword">public</span> Animal</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Cow</span>()</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// const char* speak() const override &#123; return &quot;å’ª&quot;; &#125;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Cow cow&#123;&#125;;</span><br><span class="line">    std::cout &lt;&lt; cow.<span class="built_in">speak</span>() &lt;&lt; <span class="string">&#x27;\n&#x27;</span>; <span class="comment">// errorï¼Œæ´¾ç”Ÿç±»Cowæ²¡æœ‰å®ç°çº¯è™šå‡½æ•°speak()</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>çº¯è™šå‡½æ•°å¯ä»¥æœ‰å‡½æ•°ä½“ï¼Œä¸è¿‡åªèƒ½åœ¨ç±»å¤–å®ç°ï¼ˆä¸å¸¸ç”¨ï¼‰ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">protected</span>:  <span class="comment">// ä¿æŠ¤æˆå‘˜</span></span><br><span class="line">    <span class="built_in">Animal</span>()</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// çº¯è™šå‡½æ•°ï¼Œ=0</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keyword">char</span>* <span class="title">speak</span><span class="params">()</span> <span class="keyword">const</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// é»˜è®¤æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">Animal</span>() = <span class="keyword">default</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">const</span> <span class="keyword">char</span>* <span class="title">Animal::speak</span><span class="params">()</span> <span class="keyword">const</span>  <span class="comment">// åªèƒ½ç±»å¤–å®ç°</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ï¼Ÿï¼Ÿï¼Ÿ&quot;</span>; <span class="comment">// &quot;ï¼Ÿï¼Ÿï¼Ÿ&quot;æ˜¯å­—ç¬¦ä¸²å¸¸é‡ï¼Œåœ¨å¸¸é‡åŒº</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>æœ€åå€¼å¾—ä¸€æçš„æ˜¯ï¼ŒæŠ½è±¡ç±»ä»ç„¶å…·æœ‰è™šæ‹Ÿè¡¨ã€‚å¦‚æœçº¯è™šå‡½æ•°æ²¡æœ‰è¢«é‡å†™ï¼Œå¯¹åº”çš„è™šè¡¨æ¡ç›®é€šå¸¸æ˜¯ä¸ªç©ºæŒ‡é’ˆã€‚</p>
<h5 id="è™šåŸºç±»">è™šåŸºç±»</h5>
<p><u>7.1.4èŠ‚</u>ä¸­å¤šé‡ç»§æ‰¿å¯¼è‡´çš„â€œè±å½¢é—®é¢˜â€ï¼Œæˆ‘ä»¬æœ€ç»ˆè§£å†³æ–¹æ¡ˆæ˜¯é€šè¿‡è™šç»§æ‰¿è§£å†³ï¼š</p>
<p><img src="https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/image-20220205114829756.png" alt="image-20220205114829756"></p>
<p>æ­¤æ—¶Aè¢«ç§°ä¸º<u>è™šåŸºç±»</u>ã€‚</p>
<ul>
<li>
<p>è™šåŸºç±»å¯¹è±¡ï¼Œåœ¨ç»§æ‰¿æ ‘ä¸­è¢«æ‰€æœ‰å¯¹è±¡å…±äº«ï¼Œä¹Ÿå°±æ˜¯åªä¼šæ„é€ ä¸€æ¬¡ï¼›</p>
</li>
<li>
<p>æ´¾ç”Ÿè™šåŸºç±»æœ€å¤šçš„ç±»ï¼Œè´Ÿè´£åˆ›å»ºè™šåŸºç±»ï¼›</p>
<p>åœ¨ä¸Šå›¾ä¸­ï¼ŒBã€Céƒ½åªæ´¾ç”Ÿäº†ä¸€æ¬¡è™šåŸºç±»Aï¼Œè€ŒDæ´¾ç”Ÿäº†ä¸¤æ¬¡ï¼Œæ‰€ä»¥ç”±Dè´Ÿè´£æ„å»ºè™šåŸºç±»Aï¼ˆè°ƒç”¨è™šåŸºç±»çš„æ„é€ å‡½æ•°ä¸€æ¬¡ï¼‰ã€‚</p>
</li>
<li>
<p>æ‰€æœ‰ç»§æ‰¿è™šåŸºç±»çš„ç±»éƒ½ä¼šæœ‰ä¸€ä¸ªè™šè¡¨ï¼ˆæ¯”è¾ƒå¤æ‚ï¼Œåˆé€‚æœºä¼šå†ä½œè§£é‡Šï¼‰ã€‚</p>
</li>
</ul>
<h4 id="7-2-4-åŠ¨æ€è½¬æ¢ä¸å¯¹è±¡åˆ‡ç‰‡">7.2.4 åŠ¨æ€è½¬æ¢ä¸å¯¹è±¡åˆ‡ç‰‡</h4>
<h5 id="ä¸Šè¡Œè½¬æ¢å’Œä¸‹è¡Œè½¬æ¢">ä¸Šè¡Œè½¬æ¢å’Œä¸‹è¡Œè½¬æ¢</h5>
<p>åŸºæœ¬æ¦‚å¿µï¼š</p>
<ul>
<li>ä¸Šè¡Œè½¬æ¢ï¼šæ´¾ç”Ÿç±»<u>æŒ‡é’ˆæˆ–å¼•ç”¨</u>è½¬æ¢ä¸ºâ†’åŸºç±»<u>æŒ‡é’ˆæˆ–å¼•ç”¨</u>ï¼ŒC++å¯ä»¥éšå¼åœ°è¿›è¡Œï¼Œè¿™ç§è½¬æ¢æ˜¯å®‰å…¨çš„ï¼›</li>
<li>ä¸‹è¡Œè½¬æ¢ï¼šåŸºç±»<u>æŒ‡é’ˆæˆ–å¼•ç”¨</u>è½¬æ¢ä¸ºâ†’æ´¾ç”Ÿç±»<u>æŒ‡é’ˆæˆ–å¼•ç”¨</u> ï¼Œè¿™ç§è½¬æ¢æ˜¯ä¸å®‰å…¨çš„ï¼Œæœ€å¥½é€šè¿‡<strong>dynamic_cast</strong> æˆ– <strong>static_cast</strong> æ˜¾å¼å®Œæˆã€‚</li>
</ul>
<p><strong>ä¸‹è¡Œè½¬æ¢æ—¢ç„¶æ˜¯ä¸å®‰å…¨çš„ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å­˜åœ¨</strong>ï¼Ÿ</p>
<p>æˆ‘ä»¬ç»å¸¸ä¼šæœ‰è¿™ç§éœ€æ±‚ï¼šè™½ç„¶åªæœ‰åŸºç±»æŒ‡é’ˆï¼Œä½†è¿˜æ˜¯æƒ³æ ¹æ®åŸºç±»æŒ‡é’ˆè®¿é—®æ´¾ç”Ÿç±»ç›¸å…³çš„ä¿¡æ¯ã€‚</p>
<p>åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†è§£å†³æ–¹æ¡ˆï¼šåœ¨åŸºç±»å£°æ˜å’Œæ´¾ç”Ÿç±»å‡½æ•°ä¸€è‡´çš„è™šå‡½æ•°ã€‚ä½†è™šå‡½æ•°å¹¶éä¸‡çµè¯ï¼Œå› ä¸º:</p>
<ul>
<li>è¿™ç»™åŸºç±»å¸¦æ¥äº†é¢å¤–çš„è´Ÿæ‹…ï¼Œä¸å¾—ä¸åœ¨åŸºç±»é‡å¤å£°æ˜äº†ä¸€ä¸ªè™šå‡½æ•°ã€‚</li>
</ul>
<p>è€ƒè™‘ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œè¯´æ˜äº†ä¸Šè¿°é—®é¢˜ã€‚</p>
<p>ä½¿ç”¨åŸºç±»æŒ‡é’ˆè®¿é—®æ´¾ç”Ÿç±»getNameæ–¹æ³•ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Base</span>()</span><br><span class="line">	&#123;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">virtual</span> ~<span class="built_in">Base</span>() = <span class="keyword">default</span>;</span><br><span class="line">    <span class="comment">// ä¸å¾—ä¸é¢å¤–åœ¨åŸºç±»å£°æ˜ä¸€ä¸ªè™šå‡½æ•°ï¼Œä»¥ä¾¿å¯è§£æåˆ°æ´¾ç”Ÿç±»ä¸­</span></span><br><span class="line">    <span class="comment">// å®é™…ä¸Šå®ƒä»€ä¹ˆä¹Ÿæ²¡åš</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">const</span> std::string <span class="title">getName</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span> :</span> <span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">	std::string m_name&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Derived</span>(<span class="keyword">const</span> std::string&amp; name): m_name&#123;name&#125;</span><br><span class="line">	&#123;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">const</span> std::string <span class="title">getName</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> m_name; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">Base* <span class="title">getObject</span><span class="params">(<span class="keyword">bool</span> returnDerived)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (returnDerived)</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> Derived&#123; <span class="string">&quot;Derived&quot;</span>&#125;;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> Base&#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Base* b&#123; <span class="built_in">getObject</span>(<span class="literal">true</span>) &#125;;</span><br><span class="line">    std::cout &lt;&lt; b-&gt;<span class="built_in">getName</span>()&lt;&lt;std::endl; <span class="comment">// Derived</span></span><br><span class="line">	<span class="keyword">delete</span> b;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è™½ç„¶æœ€ç»ˆæˆåŠŸè®¿é—®åˆ°æ´¾ç”Ÿç±»çš„getNameæ–¹æ³•ï¼Œä½†æ˜¯ä¸å¾—ä¸åœ¨åŸºç±»é¢å¤–å®šä¹‰ä¸€ä¸ªè™šå‡½æ•°ï¼šå³ä½¿å®ƒå¯¹åŸºç±»æ˜¯æ¯«æ— ä½œç”¨çš„ã€‚</p>
<p>å¦ä¸€æ–¹é¢ï¼Œè€ƒå¯Ÿè¿™è¡Œä»£ç ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Base* b&#123; <span class="built_in">getObject</span>(<span class="literal">true</span>) &#125;;</span><br></pre></td></tr></table></figure>
<ol>
<li><code>getObject(true)</code> è¿”å›çš„æ˜¯Derivedç±»å‹æŒ‡é’ˆï¼›</li>
<li>ç„¶åä¸Šè¡Œè½¬æ¢ä¸ºBaseæŒ‡é’ˆï¼Œã€‚</li>
</ol>
<p>ä¹Ÿå°±æ˜¯è¯´BaseæŒ‡é’ˆ<code>b</code> ä¿å­˜äº†Derivedå¯¹è±¡çš„å†…å­˜åœ°å€ï¼Œåªä¸è¿‡åªèƒ½è®¿é—®åŸºç±»éƒ¨åˆ†ã€‚ä½†ä¹Ÿå¤©ç”Ÿ<u>å…·å¤‡äº†è®¿é—®Derivedå¯¹è±¡çš„â€œæ½œè´¨â€</u>ï¼ŒDerivedå¯¹è±¡çš„å…¶å®ƒéƒ¨åˆ†ä¾æ—§å­˜åœ¨ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨<strong>dynamic_cast</strong>å¼ºåˆ¶è½¬æ¢å‘æ˜è¿™ç§æ½œåŠ›ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ­¤æ—¶åŸºç±»çš„è™šå‡½æ•°getNameå·²è¢«åˆ é™¤</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Base* b&#123; <span class="built_in">getObject</span>(<span class="literal">true</span>) &#125;;</span><br><span class="line">    Derived* d&#123; <span class="keyword">dynamic_cast</span>&lt;Derived*&gt;(b) &#125;; </span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (d) <span class="comment">// ç¡®ä¿è½¬æ¢æˆåŠŸ</span></span><br><span class="line">		std::cout &lt;&lt; d-&gt;<span class="built_in">getName</span>() &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">	<span class="keyword">delete</span> b;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Derived</span><br></pre></td></tr></table></figure>
<p>æœ€åå¼ºè°ƒä¸€ä¸‹<strong>dynamic_cast å¤±è´¥</strong>æ—¶çš„å¤„ç†ï¼š</p>
<ul>
<li>dynamic_castå¤±è´¥è¿”å›NULLï¼ˆå¦‚æœæ˜¯å¼•ç”¨ï¼Œè¿”å› <code>std::bad_cast</code> å¼‚å¸¸ï¼‰ï¼Œï¼ˆæœ€ä½³å®è·µï¼‰è¯·ç¼–ç æ—¶åŠ¡å¿…è¿›è¡Œåˆ¤æ–­ï¼Œç¡®ä¿ä½ çš„ä¸‹è¡Œè½¬æ¢æˆåŠŸï¼›</li>
<li>static_cast å¤±è´¥ä¹Ÿä¸è¿”å›NULLï¼Œå› æ­¤ä¸å»ºè®®ä½¿ç”¨static_castï¼Œå®ƒè¿‡äºç²—æš´ä¸å¤Ÿå®‰å…¨ã€‚</li>
</ul>
<h5 id="ä¸‹è¡Œè½¬æ¢è¿˜æ˜¯è™šå‡½æ•°ï¼Ÿ">ä¸‹è¡Œè½¬æ¢è¿˜æ˜¯è™šå‡½æ•°ï¼Ÿ</h5>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œä½¿ç”¨è™šå‡½æ•°<u>åº”è¯¥</u>ä¼˜äºå‘ä¸‹è½¬æ¢ã€‚ä½†æ˜¯ï¼Œæœ‰æ—¶å‘ä¸‹è½¬æ¢æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼š</p>
<ul>
<li>å½“ä¸èƒ½ä¿®æ”¹åŸºç±»æ·»åŠ è™šå‡½æ•°æ—¶ï¼ˆä¾‹å¦‚ï¼ŒåŸºç±»æ˜¯æ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†ï¼‰ï¼›</li>
<li>å½“éœ€è¦è®¿é—®ç‰¹å®šäºæ´¾ç”Ÿç±»çš„ä¸œè¥¿æ—¶ï¼ˆä¾‹å¦‚ï¼Œä»…å­˜åœ¨äºæ´¾ç”Ÿç±»ä¸­çš„å‡½æ•°ï¼‰ï¼›</li>
<li>å‘åŸºç±»æ·»åŠ è™šå‡½æ•°æ²¡æœ‰æ„ä¹‰æ—¶ï¼ˆä¾‹å¦‚ï¼ŒåŸºç±»å‡½æ•°ä½“æ²¡æœ‰å®ç°çš„å¿…è¦ï¼‰ã€‚</li>
</ul>
<p><strong>ä¸è¿‡èƒ½ä½¿ç”¨ä¸‹è¡Œè½¬æ¢æ˜¯å»ºç«‹åœ¨ï¼šä½ ä½¿ç”¨çš„åŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨æ˜¯å¦å…·æœ‰è½¬æ¢ä¸‹è¡Œè½¬æ¢çš„æ½œè´¨â€”â€”æŒ‡å‘çš„æ˜¯æ´¾ç”Ÿç±»å¯¹è±¡</strong>ï¼Ÿ</p>
<p>å¦‚æœä¸å…·æœ‰çš„è¯ï¼Œæ¯”å¦‚æŒ‡å‘çš„æ˜¯ä¸€ä¸ªåŸºç±»å¯¹è±¡ï¼Œå¼ºè¡Œè½¬æ¢ä¼šå‡ºé”™ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Base* b&#123; <span class="built_in">getObject</span>(<span class="literal">false</span>) &#125;;</span><br><span class="line">    std::cout &lt;&lt;<span class="keyword">dynamic_cast</span>&lt;Derived*&gt;(b)-&gt;<span class="built_in">getName</span>()&lt;&lt;std::endl;</span><br><span class="line">	<span class="keyword">delete</span> b;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@roy-cpp test]# ./test.out </span><br><span class="line">Segmentation fault</span><br></pre></td></tr></table></figure>
<h5 id="å¯¹è±¡åˆ‡ç‰‡">å¯¹è±¡åˆ‡ç‰‡</h5>
<p>åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬éƒ½æ˜¯åˆ©ç”¨åŸºç±»çš„<u>æŒ‡é’ˆ</u>æˆ–<u>å¼•ç”¨</u> æŒ‡å‘äº†ä¸€ä¸ªæ´¾ç”Ÿç±»å¯¹è±¡ï¼Œå¤§æ¦‚ç±»ä¼¼ä¸‹é¢è¿™æ ·ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Derived derived&#123; <span class="number">5</span> &#125;;</span><br><span class="line">    Base&amp; ref&#123; derived &#125;;  <span class="comment">// å¼•ç”¨</span></span><br><span class="line">    Base* ptr&#123; &amp;derived &#125;; <span class="comment">// æŒ‡é’ˆ</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„<code>ref</code>ã€<code>ptr</code> è™½ç„¶åªèƒ½â€œçœ‹åˆ°â€derivedçš„Baseéƒ¨åˆ†ï¼Œä½†<u>derivedå…¶å®ƒéƒ¨åˆ†ä¾æ—§æ˜¯å­˜åœ¨çš„</u>ã€‚</p>
<p>å¦‚æœä¸ç”¨æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘å‘¢ï¼Ÿå°±åƒè¿™æ ·ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Derived derived&#123; <span class="number">5</span> &#125;;</span><br><span class="line">    Base base &#123; derived &#125;; <span class="comment">// éæŒ‡é’ˆæˆ–å¼•ç”¨</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢<code>base</code> å¤åˆ¶äº†Derived å¯¹è±¡çš„ Base éƒ¨åˆ†ï¼Œè€Œ Derived å¯¹è±¡<u>å…¶å®ƒéƒ¨åˆ†å·²è¢«ä¸¢å¼ƒï¼Œä¸å†å­˜åœ¨</u> ï¼Œè¿™å°±æ˜¯<strong>å¯¹è±¡åˆ‡ç‰‡</strong>ã€‚</p>
<p><strong>å¯¹è±¡åˆ‡ç‰‡å¾ˆå®¹æ˜“å¯¼è‡´ä¸€äº›æ„æ–™ä¹‹å¤–çš„é—®é¢˜ï¼Œæ¯”å¦‚å‡½æ•°å‚æ•°<u>å€¼ä¼ é€’</u>æ—¶</strong>ã€‚</p>
<blockquote>
<p>å‡è®¾æ­¤æ—¶Baseæœ‰ä¸€ä¸ªè™šå‡½æ•°getNameï¼Œå®ƒçš„ä½œç”¨æ˜¯æ‰“å°å‡ºâ€œBaseâ€ï¼›æ´¾ç”Ÿç±»getNameè¿›è¡Œäº†é‡å†™ï¼Œä¸è¿‡å®ƒæ‰“å°çš„æ˜¯â€œDerivedâ€ã€‚</p>
</blockquote>
<p>å‡½æ•°<code>printName</code>æ¥å—ä¸€ä¸ªBaseç±»å‹å‚æ•°ï¼Œæ˜¯å€¼ä¼ é€’æ–¹å¼ï¼Œå®ƒä¸»è¦ä»»åŠ¡æ˜¯è°ƒç”¨getNameå‡½æ•°ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printName</span><span class="params">(<span class="keyword">const</span> Base base)</span> <span class="comment">// ä¸æ˜¯å¼•ç”¨æˆ–æŒ‡é’ˆä¼ é€’</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    base.<span class="built_in">getName</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Derived d&#123; <span class="number">5</span> &#125;;</span><br><span class="line">    <span class="built_in">printName</span>(d);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Base</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºå‘ç”Ÿäº†å¯¹è±¡åˆ‡ç‰‡ï¼Œå³ä½¿getNameæ˜¯è™šå‡½æ•°ä¹Ÿä¸ä¼šè°ƒç”¨Derived::getNameï¼Œè€Œæ˜¯è°ƒç”¨åŸºç±»ç‰ˆæœ¬Base::getNameï¼ˆè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å»ºè®®å‡½æ•°çš„ç±»ç±»å‹å‚æ•°å°½é‡å£°æ˜ä¸ºå¼•ç”¨æˆ–æŒ‡é’ˆï¼‰ã€‚</p>
<p>æœ€åï¼Œæˆ‘ä»¬å†ä¸¾ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜å¯¹è±¡åˆ‡ç‰‡å¸¦æ¥ç¼–ç é—®é¢˜ï¼šä½¿ç”¨vectorå®ç°å¤šæ€æ—¶ï¼Œå‘ç”Ÿäº†å¯¹è±¡åˆ‡ç‰‡ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	std::vector&lt;Base&gt; v&#123;&#125;;</span><br><span class="line"></span><br><span class="line">	Base b&#123;&#125;; </span><br><span class="line">	Derived d&#123;&#125;;</span><br><span class="line"></span><br><span class="line">	v.<span class="built_in">push_back</span>(b); </span><br><span class="line">	v.<span class="built_in">push_back</span>(d); </span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>* element : v)</span><br><span class="line">		std::cout &lt;&lt; element-&gt;<span class="built_in">getName</span>()  &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Base</span><br><span class="line">Base</span><br></pre></td></tr></table></figure>
<p>ä¸å‰é¢çš„ç¤ºä¾‹ç±»ä¼¼ï¼Œå› ä¸º <code>std::vector</code> è¢«å£°æ˜ä¸º <code>Base</code> ç±»å‹çš„å‘é‡ï¼Œæ‰€ä»¥å½“å°† <code>d</code>æ·»åŠ åˆ°å‘é‡æ—¶ï¼Œ<code>d</code>è¢«åˆ‡ç‰‡äº†ã€‚</p>
<ul>
<li>
<p>è€Œä¸”ï¼Œå°è¯•ä½¿ç”¨å¼•ç”¨ä¼ å‚ä¹Ÿä¸èµ·ä½œç”¨ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">std::vector&lt;Base&amp;&gt; v&#123;&#125;;</span><br></pre></td></tr></table></figure>
<p>ä¼šå‘ç”Ÿç¼–è¯‘é”™è¯¯ï¼Œå› ä¸º<code>std::vector</code>çš„å…ƒç´ å¿…é¡»æ˜¯å¯åˆ†é…çš„ï¼Œè€Œå¼•ç”¨ä¸èƒ½é‡æ–°åˆ†é…ï¼ˆä»…èƒ½åˆå§‹åŒ–ï¼‰ã€‚</p>
</li>
<li>
<p>æœ€ç»ˆè§£å†³æ–¹æ¡ˆæ˜¯å£°æ˜ä¸ºæŒ‡é’ˆä¼ å‚ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">std::vector&lt;Base*&gt; v&#123;&#125;;</span><br><span class="line"></span><br><span class="line">v.<span class="built_in">push_back</span>(&amp;b); </span><br><span class="line">v.<span class="built_in">push_back</span>(&amp;d); </span><br></pre></td></tr></table></figure>
<p>é‡æ–°ç¼–è¯‘ï¼Œè¾“å‡ºæ­£å¸¸ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Base</span><br><span class="line">Derived</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>ç»¼ä¸Šæ‰€è¿°ï¼šå°½ç®¡ C++ æ”¯æŒé€šè¿‡å¯¹è±¡åˆ‡ç‰‡å°†æ´¾ç”Ÿå¯¹è±¡åˆ†é…ç»™åŸºç±»å¯¹è±¡ï¼Œä½†è¿™æ˜¯ä¸ªè®©äººæ„Ÿåˆ°å¤´ç–¼çš„è¡Œä¸ºã€‚</p>
<ul>
<li>æ‰€ä»¥ï¼Œè¯·å°½é‡é¿å…ä½¿ç”¨åˆ‡ç‰‡ï¼›</li>
<li>ç¡®ä¿å‡½æ•°å‚æ•°æ˜¯å¼•ç”¨ï¼ˆæˆ–æŒ‡é’ˆï¼‰ã€‚</li>
</ul>
<p>ä¸‹ç« æˆ‘ä»¬å¼€å§‹ä»‹ç»æ¨¡æ¿ç›¸å…³çŸ¥è¯†ã€‚</p>
<h2 id="æ›´æ–°è®°å½•">æ›´æ–°è®°å½•</h2>
<div class="timeline">
<div class="timenode"><div class="meta"><p><p>2022-02-09 ï¼šæ›´æ–°ç¬”è®°</p>
</p></div><div class="body"><ol><li>ç¬¬ä¸€æ¬¡æ›´æ–°</li></ol></div></div>
</div>
<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>
<div id="footnotes"><hr><div id="footnotelist"><ol style="list-style: none; padding-left: 0; margin-left: 40px"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">1.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/36162714/what-is-the-difference-between-is-a-relationship-and-has-a-relationship-in">What is the difference between &quot;IS -A&quot; relationship and &quot;HAS-A&quot; relationship in Java?</a><a href="#fnref:1" rev="footnote"> â†©</a></span></li><li id="fn:2"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">2.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">ã€C++åŸºç¡€ä¹‹äºŒåä¸€ã€‘è±å½¢ç»§æ‰¿å’Œè™šç»§æ‰¿ï¼šhttps://blog.csdn.net/jackystudio/article/details/17877219<a href="#fnref:2" rev="footnote"> â†©</a></span></li><li id="fn:3"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">3.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">å¤šé‡ç»§æ‰¿çš„ä¼˜ç¼ºç‚¹ï¼šhttps://blog.csdn.net/woodforestbao/article/details/4500406<a href="#fnref:3" rev="footnote"> â†©</a></span></li><li id="fn:4"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">4.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">C++ å¤šæ€ ï¼šhttps://zhuanlan.zhihu.com/p/37340242<a href="#fnref:4" rev="footnote"> â†©</a></span></li><li id="fn:5"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">5.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">C++åŸºç±»çš„ææ„å‡½æ•°ä¸ºä½•è¦å£°æ˜ä¸ºè™šå‡½æ•° ï¼šhttps://zhuanlan.zhihu.com/p/148290103<a href="#fnref:5" rev="footnote"> â†©</a></span></li></ol></div></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="mailto:undefined">Wanghui Huang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://hwh.zone/p/60158/">https://hwh.zone/p/60158/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://hwh.zone" target="_blank">royhuang's blog</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/C/">C++</a><a class="post-meta__tags" href="/tags/%E6%95%99%E7%A8%8B/">æ•™ç¨‹</a><a class="post-meta__tags" href="/tags/C-%E5%9F%BA%E7%A1%80/">C++åŸºç¡€</a><a class="post-meta__tags" href="/tags/%E7%BB%A7%E6%89%BF/">ç»§æ‰¿</a><a class="post-meta__tags" href="/tags/%E8%99%9A%E5%87%BD%E6%95%B0/">è™šå‡½æ•°</a></div><div class="post_share"><div class="social-share" data-image="https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/about-bg.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> æ‰“èµ</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/wechatPay.png" target="_blank"><img class="post-qr-code-img" src="https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/wechatPay.png" alt="å¾®ä¿¡"/></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/alipay.png" target="_blank"><img class="post-qr-code-img" src="https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/alipay.png" alt="æ”¯ä»˜å®"/></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/p/43924/"><img class="prev-cover" src="https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/about-bg.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">C++ä»é›¶å¼€å§‹ï¼ˆä¸‰ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸­ï¼‰è¿ç®—ç¬¦é‡è½½</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/p/18652/" title="C++ä»é›¶å¼€å§‹ï¼ˆä¸€ï¼‰ï¼šç¯å¢ƒæ­å»ºï¼ˆä¸Šï¼‰VSCodeè¿œç¨‹å¼€å‘"><img class="cover" src="https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/image-20211211214212828.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-05</div><div class="title">C++ä»é›¶å¼€å§‹ï¼ˆä¸€ï¼‰ï¼šç¯å¢ƒæ­å»ºï¼ˆä¸Šï¼‰VSCodeè¿œç¨‹å¼€å‘</div></div></a></div><div><a href="/p/2834/" title="C++ä»é›¶å¼€å§‹ï¼ˆä¸€ï¼‰ï¼šç¯å¢ƒæ­å»ºï¼ˆä¸‹ï¼‰g++/Makefile/CMakeå¿«é€Ÿå…¥é—¨"><img class="cover" src="https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/image-20211211215040434.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-05</div><div class="title">C++ä»é›¶å¼€å§‹ï¼ˆä¸€ï¼‰ï¼šç¯å¢ƒæ­å»ºï¼ˆä¸‹ï¼‰g++/Makefile/CMakeå¿«é€Ÿå…¥é—¨</div></div></a></div><div><a href="/p/43924/" title="C++ä»é›¶å¼€å§‹ï¼ˆä¸‰ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸­ï¼‰è¿ç®—ç¬¦é‡è½½"><img class="cover" src="https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/about-bg.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-27</div><div class="title">C++ä»é›¶å¼€å§‹ï¼ˆä¸‰ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸­ï¼‰è¿ç®—ç¬¦é‡è½½</div></div></a></div><div><a href="/p/6587/" title="C++ä»é›¶å¼€å§‹ï¼ˆäºŒï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆå¢ï¼‰å¤åˆç±»å‹åŠè½¬æ¢"><img class="cover" src="https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/about-bg.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-16</div><div class="title">C++ä»é›¶å¼€å§‹ï¼ˆäºŒï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆå¢ï¼‰å¤åˆç±»å‹åŠè½¬æ¢</div></div></a></div><div><a href="/p/26224/" title="C++ä»é›¶å¼€å§‹ï¼ˆäºŒï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆä¸Šï¼‰å¿«é€Ÿå…¥é—¨"><img class="cover" src="https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/about-bg.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-16</div><div class="title">C++ä»é›¶å¼€å§‹ï¼ˆäºŒï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆä¸Šï¼‰å¿«é€Ÿå…¥é—¨</div></div></a></div><div><a href="/p/51595/" title="C++ä»é›¶å¼€å§‹ï¼ˆäºŒï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆä¸‹ï¼‰å‡½æ•°"><img class="cover" src="https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/about-bg.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-09</div><div class="title">C++ä»é›¶å¼€å§‹ï¼ˆäºŒï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆä¸‹ï¼‰å‡½æ•°</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/cat.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Wanghui Huang</div><div class="author-info__description">tech & life</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">27</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">38</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">9</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Wanghui-Huang"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Wanghui-Huang" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:hwh199601@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>å…¬å‘Š</span></div><div class="announcement_content">royhuang's studio</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E7%BB%A7%E6%89%BF%E5%92%8C%E8%99%9A%E5%87%BD%E6%95%B0"><span class="toc-text">ä¸ƒã€ç»§æ‰¿å’Œè™šå‡½æ•°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E7%BB%A7%E6%89%BF"><span class="toc-text">7.1 ç»§æ‰¿</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E7%BB%A7%E6%89%BF%EF%BC%9F"><span class="toc-text">7.1.1 ä¸ºä»€ä¹ˆéœ€è¦ç»§æ‰¿ï¼Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-2-%E7%BB%A7%E6%89%BF%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5"><span class="toc-text">7.1.2 ç»§æ‰¿ç›¸å…³æ¦‚å¿µ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF%E6%9D%83%E9%99%90%E5%92%8C%E8%AE%BF%E9%97%AE%E7%AC%A6"><span class="toc-text">ç»§æ‰¿æƒé™å’Œè®¿é—®ç¬¦</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#using%E4%BF%AE%E6%94%B9%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90"><span class="toc-text">usingä¿®æ”¹è®¿é—®æƒé™</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E9%87%8D%E5%86%99"><span class="toc-text">å‡½æ•°é‡å†™</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-3-%E6%B4%BE%E7%94%9F%E7%B1%BB%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-text">7.1.3 æ´¾ç”Ÿç±»æ„é€ å‡½æ•°</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E9%A1%BA%E5%BA%8F"><span class="toc-text">æ„é€ é¡ºåº</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9F%BA%E7%B1%BB%E6%88%90%E5%91%98"><span class="toc-text">åˆå§‹åŒ–åŸºç±»æˆå‘˜</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-4-%E5%A4%9A%E9%87%8D%E7%BB%A7%E6%89%BF"><span class="toc-text">7.1.4 å¤šé‡ç»§æ‰¿</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%9A%E9%87%8D%E7%BB%A7%E6%89%BF%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-text">å¤šé‡ç»§æ‰¿ä¼˜ç¼ºç‚¹</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%99%9A%E7%BB%A7%E6%89%BF"><span class="toc-text">è™šç»§æ‰¿</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-text">æœ€ä½³å®è·µ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E8%99%9A%E5%87%BD%E6%95%B0"><span class="toc-text">7.2 è™šå‡½æ•°</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-1-%E6%8C%87%E5%90%91%E6%B4%BE%E7%94%9F%E7%B1%BB%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%9F%BA%E7%B1%BB%E6%8C%87%E9%92%88%E5%92%8C%E5%BC%95%E7%94%A8"><span class="toc-text">7.2.1 æŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡çš„åŸºç±»æŒ‡é’ˆå’Œå¼•ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AE%A4%E8%AF%86%E5%9F%BA%E7%B1%BB%E6%8C%87%E9%92%88%E5%92%8C%E5%BC%95%E7%94%A8"><span class="toc-text">è®¤è¯†åŸºç±»æŒ‡é’ˆå’Œå¼•ç”¨</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E5%9F%BA%E7%B1%BB%E6%8C%87%E9%92%88%E5%92%8C%E5%BC%95%E7%94%A8%EF%BC%9F"><span class="toc-text">ä¸ºä»€ä¹ˆéœ€è¦åŸºç±»æŒ‡é’ˆå’Œå¼•ç”¨ï¼Ÿ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-2-%E8%99%9A%E5%87%BD%E6%95%B0%E5%92%8C%E5%A4%9A%E6%80%81"><span class="toc-text">7.2.2 è™šå‡½æ•°å’Œå¤šæ€</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%99%9A%E5%87%BD%E6%95%B0%E5%AE%9E%E7%8E%B0%E5%A4%9A%E6%80%81"><span class="toc-text">è™šå‡½æ•°å®ç°å¤šæ€</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%A9%E7%BB%91%E5%AE%9A%E5%92%8C%E6%99%9A%E7%BB%91%E5%AE%9A"><span class="toc-text">æ—©ç»‘å®šå’Œæ™šç»‘å®š</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%99%9A%E8%A1%A8"><span class="toc-text">è™šè¡¨</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%99%9A%E5%87%BD%E6%95%B0%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98"><span class="toc-text">è™šå‡½æ•°æ€§èƒ½é—®é¢˜</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-3-%E8%99%9A%E5%87%BD%E6%95%B0%E4%BA%8C%E4%B8%89%E4%BA%8B"><span class="toc-text">7.2.3  è™šå‡½æ•°äºŒä¸‰äº‹</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#override%E3%80%81final%E5%8F%8A%E5%8D%8F%E5%8F%98%E7%B1%BB%E5%9E%8B"><span class="toc-text">overrideã€finalåŠåå˜ç±»å‹</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9E%90%E6%9E%84%E3%80%81%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E4%B8%8E%E8%99%9A%E5%87%BD%E6%95%B0"><span class="toc-text">ææ„ã€æ„é€ å‡½æ•°ä¸è™šå‡½æ•°</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BA%AF%E8%99%9A%E5%87%BD%E6%95%B0%E3%80%81%E6%8A%BD%E8%B1%A1%E5%9F%BA%E7%B1%BB%E4%B8%8E%E6%8E%A5%E5%8F%A3%E7%B1%BB"><span class="toc-text">çº¯è™šå‡½æ•°ã€æŠ½è±¡åŸºç±»ä¸æ¥å£ç±»</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%99%9A%E5%9F%BA%E7%B1%BB"><span class="toc-text">è™šåŸºç±»</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-4-%E5%8A%A8%E6%80%81%E8%BD%AC%E6%8D%A2%E4%B8%8E%E5%AF%B9%E8%B1%A1%E5%88%87%E7%89%87"><span class="toc-text">7.2.4 åŠ¨æ€è½¬æ¢ä¸å¯¹è±¡åˆ‡ç‰‡</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8A%E8%A1%8C%E8%BD%AC%E6%8D%A2%E5%92%8C%E4%B8%8B%E8%A1%8C%E8%BD%AC%E6%8D%A2"><span class="toc-text">ä¸Šè¡Œè½¬æ¢å’Œä¸‹è¡Œè½¬æ¢</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8B%E8%A1%8C%E8%BD%AC%E6%8D%A2%E8%BF%98%E6%98%AF%E8%99%9A%E5%87%BD%E6%95%B0%EF%BC%9F"><span class="toc-text">ä¸‹è¡Œè½¬æ¢è¿˜æ˜¯è™šå‡½æ•°ï¼Ÿ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E5%88%87%E7%89%87"><span class="toc-text">å¯¹è±¡åˆ‡ç‰‡</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E8%AE%B0%E5%BD%95"><span class="toc-text">æ›´æ–°è®°å½•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-text">å‚è€ƒèµ„æ–™</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/p/60158/" title="C++ä»é›¶å¼€å§‹ï¼ˆä¸‰ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸‹ï¼‰ç»§æ‰¿å’Œè™šå‡½æ•°">C++ä»é›¶å¼€å§‹ï¼ˆä¸‰ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸‹ï¼‰ç»§æ‰¿å’Œè™šå‡½æ•°</a><time datetime="2022-02-08T08:24:59.978Z" title="å‘è¡¨äº 2022-02-08 16:24:59">2022-02-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/p/43924/" title="C++ä»é›¶å¼€å§‹ï¼ˆä¸‰ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸­ï¼‰è¿ç®—ç¬¦é‡è½½">C++ä»é›¶å¼€å§‹ï¼ˆä¸‰ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸­ï¼‰è¿ç®—ç¬¦é‡è½½</a><time datetime="2022-01-27T06:47:34.826Z" title="å‘è¡¨äº 2022-01-27 14:47:34">2022-01-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/p/17506/" title="C++ä»é›¶å¼€å§‹ï¼ˆä¸‰ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸Šï¼‰å¿«é€Ÿå…¥é—¨">C++ä»é›¶å¼€å§‹ï¼ˆä¸‰ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸Šï¼‰å¿«é€Ÿå…¥é—¨</a><time datetime="2022-01-24T07:37:07.955Z" title="å‘è¡¨äº 2022-01-24 15:37:07">2022-01-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/p/6587/" title="C++ä»é›¶å¼€å§‹ï¼ˆäºŒï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆå¢ï¼‰å¤åˆç±»å‹åŠè½¬æ¢">C++ä»é›¶å¼€å§‹ï¼ˆäºŒï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆå¢ï¼‰å¤åˆç±»å‹åŠè½¬æ¢</a><time datetime="2022-01-16T13:04:18.006Z" title="å‘è¡¨äº 2022-01-16 21:04:18">2022-01-16</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2022 By Wanghui Huang</div><div class="footer_custom_text">Support By <a target="_blank" rel="noopener" href="https://cloud.tencent.com/" style="text-decoration:underline; color:#476679;"> Tencent Cloud </a> |  <a target="_blank" rel="noopener" href="https://hexo.io/" style="text-decoration:underline; color:#476679;">Hexo</a> | <a target="_blank" rel="noopener" href="https://butterfly.js.org/" style="text-decoration:underline; color:#476679;">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="æ”¾å¤§å­—ä½“"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="ç¼©å°å­—ä½“"><i class="fas fa-minus"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(()=>{
  const $countDom = document.getElementById('twikoo-count')
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'blog-comments-5g2cfsved8c0de34',
      region: 'ap-shanghai'
    }, null))
  }

  const getCount = () => {
    twikoo.getCommentsCount({
      envId: 'blog-comments-5g2cfsved8c0de34',
      region: 'ap-shanghai',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      $countDom.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const loadTwikoo = (bool = false) => {
    if (typeof twikoo === 'object') {
      init()
      bool && $countDom && setTimeout(getCount,0)
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(()=> {
        init()
        bool && $countDom && setTimeout(getCount,0)
      })
    }
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo(true)
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="true" data-click="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script src="https://cdn.jsdelivr.net/npm/hexo-widget-tree@0.2.2/js/index.js"></script><div id="widget-tree">
      <h1 id="tree-toc-title" style="text-align:center;margin:0;line-hight:1.5"> <a href="https://hwh.zone/categories/">ç›® å½• </a> </h1>
      <h5 id="tree-toc-subtitle" style="text-align:center;margin:0;line-hight:1.5"> <a href="https://hwh.zone/">royhuang's blog</a> </h5>
      <ul>
      <li class="tree-list-item">
        <i class="toggle-post-icon gg-folder-add"></i>
        <a class="tree-list-link" href="/categories/C/">
          C++
        </a>
      <ul class="tree-list-children">
      <li class="tree-list-item">
        <i class="toggle-post-icon gg-folder-add"></i>
        <a class="tree-list-link" href="/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/">
          ä»é›¶å¼€å§‹
        </a>
      <ul class="tree-list-children">
      <li class="tree-list-item">
        <i class="toggle-post-icon gg-folder-add"></i>
        <a class="tree-list-link" href="/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/C-%E5%9F%BA%E7%A1%80/">
          C++åŸºç¡€
        </a>
      <ul class="tree-list-children"><li class="tree-list-item"><a class="tree-list-post-link" href="/p/18652/" title="C++ä»é›¶å¼€å§‹ï¼ˆä¸€ï¼‰ï¼šç¯å¢ƒæ­å»ºï¼ˆä¸Šï¼‰VSCodeè¿œç¨‹å¼€å‘"><i class="post-icon gg-file-document"></i>C++ä»é›¶å¼€å§‹ï¼ˆä¸€ï¼‰ï¼šç¯å¢ƒæ­å»ºï¼ˆä¸Šï¼‰VSCodeè¿œç¨‹å¼€å‘</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/p/60158/" title="C++ä»é›¶å¼€å§‹ï¼ˆä¸‰ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸‹ï¼‰ç»§æ‰¿å’Œè™šå‡½æ•°"><i class="post-icon gg-file-document"></i>C++ä»é›¶å¼€å§‹ï¼ˆä¸‰ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸‹ï¼‰ç»§æ‰¿å’Œè™šå‡½æ•°</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/p/2834/" title="C++ä»é›¶å¼€å§‹ï¼ˆä¸€ï¼‰ï¼šç¯å¢ƒæ­å»ºï¼ˆä¸‹ï¼‰g++/Makefile/CMakeå¿«é€Ÿå…¥é—¨"><i class="post-icon gg-file-document"></i>C++ä»é›¶å¼€å§‹ï¼ˆä¸€ï¼‰ï¼šç¯å¢ƒæ­å»ºï¼ˆä¸‹ï¼‰g++/Makefile/CMakeå¿«é€Ÿå…¥é—¨</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/p/43924/" title="C++ä»é›¶å¼€å§‹ï¼ˆä¸‰ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸­ï¼‰è¿ç®—ç¬¦é‡è½½"><i class="post-icon gg-file-document"></i>C++ä»é›¶å¼€å§‹ï¼ˆä¸‰ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸­ï¼‰è¿ç®—ç¬¦é‡è½½</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/p/6587/" title="C++ä»é›¶å¼€å§‹ï¼ˆäºŒï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆå¢ï¼‰å¤åˆç±»å‹åŠè½¬æ¢"><i class="post-icon gg-file-document"></i>C++ä»é›¶å¼€å§‹ï¼ˆäºŒï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆå¢ï¼‰å¤åˆç±»å‹åŠè½¬æ¢</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/p/26224/" title="C++ä»é›¶å¼€å§‹ï¼ˆäºŒï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆä¸Šï¼‰å¿«é€Ÿå…¥é—¨"><i class="post-icon gg-file-document"></i>C++ä»é›¶å¼€å§‹ï¼ˆäºŒï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆä¸Šï¼‰å¿«é€Ÿå…¥é—¨</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/p/51595/" title="C++ä»é›¶å¼€å§‹ï¼ˆäºŒï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆä¸‹ï¼‰å‡½æ•°"><i class="post-icon gg-file-document"></i>C++ä»é›¶å¼€å§‹ï¼ˆäºŒï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆä¸‹ï¼‰å‡½æ•°</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/p/24237/" title="C++ä»é›¶å¼€å§‹ï¼ˆäºŒï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆä¸­ï¼‰æŒ‡é’ˆå’Œå¼•ç”¨"><i class="post-icon gg-file-document"></i>C++ä»é›¶å¼€å§‹ï¼ˆäºŒï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆä¸­ï¼‰æŒ‡é’ˆå’Œå¼•ç”¨</a></li></ul></li>
      <li class="tree-list-item">
        <i class="toggle-post-icon gg-folder-add"></i>
        <a class="tree-list-link" href="/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/C-%E8%BF%9B%E9%98%B6/">
          C++è¿›é˜¶
        </a>
      <ul class="tree-list-children"><li class="tree-list-item"><a class="tree-list-post-link" href="/p/17506/" title="C++ä»é›¶å¼€å§‹ï¼ˆä¸‰ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸Šï¼‰å¿«é€Ÿå…¥é—¨"><i class="post-icon gg-file-document"></i>C++ä»é›¶å¼€å§‹ï¼ˆä¸‰ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸Šï¼‰å¿«é€Ÿå…¥é—¨</a></li></ul></li></ul></li></ul></li>
      <li class="tree-list-item">
        <i class="toggle-post-icon gg-folder-add"></i>
        <a class="tree-list-link" href="/categories/%E5%BB%BA%E7%AB%99/">
          å»ºç«™
        </a>
      <ul class="tree-list-children"><li class="tree-list-item"><a class="tree-list-post-link" href="/p/56326/" title="Hexo+Github Pageså¿«é€Ÿæ‰“é€ å±äºè‡ªå·±çš„ç½‘ç«™"><i class="post-icon gg-file-document"></i>Hexo+Github Pageså¿«é€Ÿæ‰“é€ å±äºè‡ªå·±çš„ç½‘ç«™</a></li></ul></li>
      <li class="tree-list-item">
        <i class="toggle-post-icon gg-folder-add"></i>
        <a class="tree-list-link" href="/categories/Git/">
          Git
        </a>
      <ul class="tree-list-children"><li class="tree-list-item"><a class="tree-list-post-link" href="/p/43848/" title="GitåŸºç¡€ç¬”è®°ï¼ˆåˆæ­¥æ•´ç†ï¼‰"><i class="post-icon gg-file-document"></i>GitåŸºç¡€ç¬”è®°ï¼ˆåˆæ­¥æ•´ç†ï¼‰</a></li></ul></li>
      <li class="tree-list-item">
        <i class="toggle-post-icon gg-folder-add"></i>
        <a class="tree-list-link" href="/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/">
          æ ¡æ‹›ç¬”è®°
        </a>
      <ul class="tree-list-children">
      <li class="tree-list-item">
        <i class="toggle-post-icon gg-folder-add"></i>
        <a class="tree-list-link" href="/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/JAVA/">
          JAVA
        </a>
      <ul class="tree-list-children"><li class="tree-list-item"><a class="tree-list-post-link" href="/p/42516/" title="æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰_Java_JVM"><i class="post-icon gg-file-document"></i>æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰_Java_JVM</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/p/8959/" title="æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰_Java_å¤šçº¿ç¨‹"><i class="post-icon gg-file-document"></i>æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰_Java_å¤šçº¿ç¨‹</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/p/51787/" title="æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰_Java_Javaå…¥é—¨"><i class="post-icon gg-file-document"></i>æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰_Java_Javaå…¥é—¨</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/p/7257/" title="æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰_Java_é¢å¯¹å¯¹è±¡"><i class="post-icon gg-file-document"></i>æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰_Java_é¢å¯¹å¯¹è±¡</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/p/45493/" title="æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰_Java_é”"><i class="post-icon gg-file-document"></i>æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰_Java_é”</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/p/21069/" title="æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰_Java_é›†åˆ"><i class="post-icon gg-file-document"></i>æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰_Java_é›†åˆ</a></li></ul></li>
      <li class="tree-list-item">
        <i class="toggle-post-icon gg-folder-add"></i>
        <a class="tree-list-link" href="/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">
          è®¡ç®—æœºåŸºç¡€
        </a>
      <ul class="tree-list-children"><li class="tree-list-item"><a class="tree-list-post-link" href="/p/61434/" title="æ ¡æ‹›ç¬”è®°ï¼ˆä¸ƒï¼‰_è®¡ç®—æœºåŸºç¡€_æ•°æ®ç»“æ„"><i class="post-icon gg-file-document"></i>æ ¡æ‹›ç¬”è®°ï¼ˆä¸ƒï¼‰_è®¡ç®—æœºåŸºç¡€_æ•°æ®ç»“æ„</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/p/44980/" title="æ ¡æ‹›ç¬”è®°ï¼ˆäºŒï¼‰_è®¡ç®—æœºåŸºç¡€_Linux&Git"><i class="post-icon gg-file-document"></i>æ ¡æ‹›ç¬”è®°ï¼ˆäºŒï¼‰_è®¡ç®—æœºåŸºç¡€_Linux&Git</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/p/5582/" title="æ ¡æ‹›ç¬”è®°ï¼ˆä¹ï¼‰_è®¡ç®—æœºåŸºç¡€_ç›¸å…³è¡¥å……"><i class="post-icon gg-file-document"></i>æ ¡æ‹›ç¬”è®°ï¼ˆä¹ï¼‰_è®¡ç®—æœºåŸºç¡€_ç›¸å…³è¡¥å……</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/p/46361/" title="æ ¡æ‹›ç¬”è®°ï¼ˆä¸‰ï¼‰_è®¡ç®—æœºåŸºç¡€_è®¡ç®—æœºç½‘ç»œ"><i class="post-icon gg-file-document"></i>æ ¡æ‹›ç¬”è®°ï¼ˆä¸‰ï¼‰_è®¡ç®—æœºåŸºç¡€_è®¡ç®—æœºç½‘ç»œ</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/p/31667/" title="æ ¡æ‹›ç¬”è®°ï¼ˆå…«ï¼‰_è®¡ç®—æœºåŸºç¡€_åœºæ™¯&æ™ºåŠ›é¢˜"><i class="post-icon gg-file-document"></i>æ ¡æ‹›ç¬”è®°ï¼ˆå…«ï¼‰_è®¡ç®—æœºåŸºç¡€_åœºæ™¯&æ™ºåŠ›é¢˜</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/p/56848/" title="æ ¡æ‹›ç¬”è®°ï¼ˆäº”ï¼‰_è®¡ç®—æœºåŸºç¡€_MySQL"><i class="post-icon gg-file-document"></i>æ ¡æ‹›ç¬”è®°ï¼ˆäº”ï¼‰_è®¡ç®—æœºåŸºç¡€_MySQL</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/p/31215/" title="æ ¡æ‹›ç¬”è®°ï¼ˆå…­ï¼‰_è®¡ç®—æœºåŸºç¡€_Redis"><i class="post-icon gg-file-document"></i>æ ¡æ‹›ç¬”è®°ï¼ˆå…­ï¼‰_è®¡ç®—æœºåŸºç¡€_Redis</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/p/15646/" title="æ ¡æ‹›ç¬”è®°ï¼ˆå››ï¼‰_è®¡ç®—æœºåŸºç¡€_æ“ä½œç³»ç»Ÿ"><i class="post-icon gg-file-document"></i>æ ¡æ‹›ç¬”è®°ï¼ˆå››ï¼‰_è®¡ç®—æœºåŸºç¡€_æ“ä½œç³»ç»Ÿ</a></li></ul></li></ul></li></ul>
        <div id="widget-tree-button">
          <i class="gg-chevron-right"></i>
        </div>
      </div><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><!-- hexo injector body_end end --></body></html>