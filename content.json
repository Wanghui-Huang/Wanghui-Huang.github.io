{"meta":{"title":"royhuang's blog","subtitle":"hello world","description":"tech & life","author":"Wanghui Huang","url":"https://hwh.zone","root":"/"},"pages":[{"title":"[404]","date":"2021-11-24T11:41:16.226Z","updated":"2021-11-24T11:41:16.226Z","comments":true,"path":"404.html","permalink":"https://hwh.zone/404.html","excerpt":"","text":""},{"title":"Hi there ğŸ‘‹","date":"2022-02-09T11:19:26.980Z","updated":"2022-02-09T11:19:26.980Z","comments":true,"path":"about/index.html","permalink":"https://hwh.zone/about/index.html","excerpt":"","text":"I am Wanghui Huang (royHuang) ğŸ”­ I am studying for a masterâ€™s degree in Chongqing University and will graduate in July, 2022. Whatâ€™s more, I will officially join Tencent at sometime. ğŸ“« If you want know me more : https://hwh.zone, this is my personal blog. ğŸ’¬ Ask me about deep learning(object tracking) , C++, Java and my projects on hwh199601@qq.com. âš¡ Fun fact: this is a less funny man. ğŸ’‘ A little secretï¼ŒroyHuang ï¼Œmy name is from my cherished girlfriend. â†“ Can't wait to talk to me â†“"},{"title":"Python åŸºç¡€ç¬”è®°","date":"2022-01-02T11:54:25.534Z","updated":"2021-12-03T03:41:02.895Z","comments":true,"path":"NO_post/PythonåŸºç¡€å­¦ä¹ .html","permalink":"https://hwh.zone/NO_post/Python%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0.html","excerpt":"","text":"ç¬¬ä¸€ç« ï¼šå‡½æ•°åŸºç¡€ 1.1 å­—ç¬¦ä¸² 1.1.1 ç¼–ç  å­—ç¬¦ä¸²å’Œæ¯”ç‰¹ å¸¸è§å­—ç¬¦ä¸²å’Œæ¯”ç‰¹è¡¨ç¤ºæ–¹æ³•è§ä¸‹ï¼š 123456# å­—ç¬¦ä¸²è¡¨ç¤ºçš„ä¸¤ç§æ–¹æ³•print(&#x27;i am string&#x27;); # i am stringprint(r&#x27;i am string&#x27;); # i am string# byteè¡¨ç¤ºï¼šå‰é¢åŠ bprint(b&#x27;i am byte&#x27;); # b&#x27;i am byte&#x27; æ³¨æ„åˆ°æœ€åbyte å­—ç¬¦ä¸²è¾“å‡ºç»“æœæœ‰äº›å¥‡æ€ªï¼Œä¸åƒå­—ç¬¦ä¸²ç›´æ¥è¾“å‡ºåŒå¼•å·çš„å†…å®¹ã€‚ æˆ‘ä»¬è¿˜å¯ä»¥å°†å­—ç¬¦ä¸² str ç¼–ç æˆ bytesï¼š æ–¹æ³• æè¿° encode(â€˜asciiâ€™) å¯å°†çº¯è‹±æ–‡ç¼–ç æˆ bytesï¼Œå¦‚æœå«ä¸­æ–‡ç¼–ç ä¼šå‡ºé”™ encode(â€˜utf-8â€™) å¯å°†å«ä¸­æ–‡å­—ç¬¦ä¸²ç¼–ç æˆ bytes 123456# å­—ç¬¦ä¸²ç¼–ç æˆbytestrTobyte = &#x27;hwh&#x27;.encode(&#x27;ascii&#x27;);print(strTobyte); # è¾“å‡ºï¼šb&#x27;hwh&#x27;strTobyte = &#x27;é»„æ—ºè¾‰&#x27;.encode(&#x27;utf-8&#x27;);print(strTobyte); # è¾“å‡ºï¼šb&#x27;\\xe9\\xbb\\x84\\xe6\\x97\\xba\\xe8\\xbe\\x89&#x27; å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨*decode()*å‡½æ•°è¿›è¡Œè§£ç ï¼š æ–¹æ³• æè¿° decode(â€˜uft-8â€™) å°†bytes å˜ä¸º str 12a = b&#x27;\\xe9\\xbb\\x84\\xe6\\x97\\xba\\xe8\\xbe\\x89&#x27;.decode(&#x27;utf-8&#x27;);print(a); # è¾“å‡ºï¼šé»„æ—ºè¾‰ 1.1.2 æ ¼å¼å­—ç¬¦ä¸² æ ¼å¼åŒ–å­—ç¬¦ä¸²æœ‰ä¸¤ç§æ–¹å¼ï¼šä¸€ç§ç±»Cè¯­è¨€ä½¿ç”¨%å ä½ç¬¦ï¼›ä¸€ç§åˆ©ç”¨ format æ–¹æ³•å®ç°ã€‚ %å ä½ç¬¦æ–¹å¼ å ä½ç¬¦ æ›¿æ¢å†…å®¹ %d æ•´æ•° %f æµ®ç‚¹æ•° %s å­—ç¬¦ä¸² %x åå…­è¿›åˆ¶æ•´æ•° è¿˜å¯æŒ‡å®šé•¿åº¦ã€ç²¾åº¦ç­‰ï¼š æŒ‡å®šé•¿åº¦ï¼š%2d â€”&gt; è¡¨ç¤ºæ•´æ•°å ä½2ç©ºæ ¼ï¼Œä¸è¶³è¡¥ç©ºæ ¼ï¼› %02d â€”&gt;åŒæ ·è¡¨ç¤ºæ­£å¼å ä½2ç©ºæ ¼ï¼Œä½†ä¸è¶³è¡¥0 æŒ‡å®šç²¾åº¦ï¼š%.1f â€”&gt; è¡¨ç¤ºå°æ•°ä¿ç•™1ä¸ºå°æ•° ä»¥ä¸Šä¸ºå ä½ç¬¦æ–¹å¼ï¼Œä»¥ä¸‹ä¸ºä¸¾ä¾‹ï¼š 12&gt;&gt;&gt; &#x27;%s ä»Šå¹´ %d å²å•¦ï¼&#x27;%(&#x27;é»„æ—ºè¾‰&#x27;,23)&#x27;é»„æ—ºè¾‰ ä»Šå¹´ 23 å²å•¦ï¼&#x27; format() æ ¼å¼åŒ– åœ¨å­—ç¬¦ä¸²æ–¹å¼format() å†…éƒ¨ä½¿ç”¨çš„å ä½ç¬¦ä¾æ¬¡ä¸ºï¼š{0}ã€{1} â€¦ 12&gt;&gt;&gt; &#x27;&#123;0&#125; ä»Šå¹´ &#123;1&#125; å²å•¦ï¼&#x27;.format(&#x27;é»„æ—ºè¾‰&#x27;,23)&#x27;é»„æ—ºè¾‰ ä»Šå¹´ 23 å²å•¦ï¼&#x27; 1.2 list &amp; tuple 1.2.1 åˆ—è¡¨ï¼šlist list ç±»ä¼¼æˆ‘ä»¬æ­¤å‰æ¥è§¦çš„ C/C++/C# æ•°ç»„ï¼Œä½†æ˜¯å¯ä»¥æ¯ä¸ªå…ƒç´ ç±»å‹å¯ä»¥ä¸åŒï¼Œæ¯”å¦‚ï¼š 1&gt;&gt;&gt; L = [&#x27;Apple&#x27;, 123, True]; ç‰¹åˆ«çš„å½“ï¼Œå½“å…ƒç´ ç±»å‹ä¹Ÿä¸ºæ•°ç»„æ—¶å°±å¯ä»¥çœ‹åšä¸€ä¸ªå¤šç»´æ•°ç»„äº†ï¼š 1&gt;&gt;&gt; L = [[&#x27;C#&#x27;,C&#x27;,&#x27;C++&#x27;],[&#x27;JAVA&#x27;,&#x27;JAVASCRIPT&#x27;],[&#x27;PYTHON&#x27;,&#x27;PHP&#x27;]]; æ­¤æ—¶è·å– JAVASCRIPT ï¼š 12&gt;&gt;&gt; L[1][-1]&#x27;JAVASCRIPT&#x27; æ›´å¤šå¢åˆ æŸ¥æ”¹æ“ä½œè§ä¸‹ã€‚ ç´¢å¼• ç´¢å¼•ä»0å¼€å§‹ï¼Œpython ä¸ä½†å¯ä»¥ä½¿ç”¨ è‡ªç„¶æ•°ä»æ­£åº å¼€å§‹ç´¢å¼•ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ è´Ÿæ•°ä»å€’åº å¼€å§‹ç´¢å¼•ã€‚ 1234567891011&gt;&gt;&gt; classmates = [&#x27;hwh&#x27;,&#x27;lt&#x27;,&#x27;dxj&#x27;,&#x27;fs&#x27;]# æ­£åºç´¢å¼•ä»0å¼€å§‹ï¼ˆæ­£åºç¬¬ä¸€ä¸ªï¼‰&gt;&gt;&gt; classmates[0]&#x27;hwh&#x27;# å€’åºç´¢å¼•ä»-1å¼€å§‹(å€’åºç¬¬ä¸€ä¸ª)&gt;&gt;&gt; classmates[-1]&#x27;fs&#x27;&gt;&gt;&gt; classmates[-2]&#x27;dxj&#x27; âš ï¸ ç´¢å¼•è¶Šç•ŒæŠ›å‡ºIndexErro é”™è¯¯ï¼ æ’å…¥ ç»™list æ’å…¥æ•°æ®æœ‰ä¸¤ç§æ–¹æ³•ï¼š æ–¹æ³• æè¿° append(data) åœ¨list è¡¨æœ«å°¾ æ’å…¥æ•°æ® insert(index,data) åœ¨æŒ‡å®š ä½ç½® index æ’å…¥æ•°æ® 1234567891011&gt;&gt;&gt; classmates = [&#x27;hwh&#x27;,&#x27;lt&#x27;,&#x27;dxj&#x27;,&#x27;fs&#x27;]# append()æ–¹æ³•classmates.append(&#x27;lhy&#x27;)classmates[&#x27;hwh&#x27;, &#x27;lt&#x27;, &#x27;dxj&#x27;, &#x27;fs&#x27;, &#x27;lhy&#x27;]# insert()æ–¹æ³•classmates.insert(0,&#x27;ljx&#x27;)classmates[&#x27;ljx&#x27;, &#x27;hwh&#x27;, &#x27;lt&#x27;, &#x27;dxj&#x27;, &#x27;fs&#x27;, &#x27;lhy&#x27;] ä¿®æ”¹ è¦å°†å…ƒç´ Aæ›¿æ¢æˆåˆ«çš„å…ƒç´ Bï¼Œç›´æ¥èµ‹å€¼å³å¯ã€‚ 123&gt;&gt;&gt; classmates[-1] = &#x27;èµ–æµ©æº&#x27;&gt;&gt;&gt; classmates[&#x27;ljx&#x27;, &#x27;hwh&#x27;, &#x27;lt&#x27;, &#x27;dxj&#x27;, &#x27;fs&#x27;, &#x27;èµ–æµ©æº&#x27;] åˆ é™¤ æ–¹æ³• æè¿° pop(index) åˆ é™¤æŒ‡å®šä½ç½® index å…ƒç´ ï¼Œä¸å¸¦å‚æ•°åˆ™åˆ é™¤æœ«å°¾å…ƒç´  ï¼Œè¿”å›å€¼ä¸ºè¢«åˆ é™¤çš„å…ƒç´  123456&gt;&gt;&gt; classmates.pop();&#x27;èµ–æµ©æº&#x27;&gt;&gt;&gt; classmates.pop(0);&#x27;ljx&#x27;&gt;&gt;&gt; classmates[&#x27;hwh&#x27;, &#x27;lt&#x27;, &#x27;dxj&#x27;, &#x27;fs&#x27;] 1.2.2 ä¸å¯å˜åˆ—è¡¨ï¼štuple tuple å’Œ list å’Œç›¸ä¼¼ï¼Œä½†æ˜¯å®ƒé‡Œé¢å…ƒç´ ä¸å¯ä»¥æ”¹å˜ï¼Œå¯çœ‹åšæ˜¯ä¸€ä¸ªå¸¸æ•°åˆ—è¡¨ ã€‚å®ƒç®€å•å®šä¹‰å¦‚ä¸‹ï¼š 1234&gt;&gt;&gt; t = (); # ç©ºåˆ—è¡¨&gt;&gt;&gt; t = (&#x27;Apple&#x27;, 123, True);&gt;&gt;&gt; t[-1];True ä½†æ˜¯æ³¨æ„å½“åªæœ‰ä¸€ä¸ªå…ƒç´ æ—¶ä¸èƒ½å†™åšï¼š 1&gt;&gt;&gt; t = (1); è¿™ä¼šå’Œ python æ•°å­¦å…¬å¼ä¸­å°æ‹¬å·äº§ç”Ÿæ­§ä¹‰ï¼Œæ­¤æ—¶å®šä¹‰çš„ä¸æ˜¯ tuple ï¼Œè€Œæ˜¯è®¡ç®—ç»“æœ1è¿™ä¸ªæ•°ã€‚ä¸ºæ­¤æˆ‘ä»¬éœ€è¦åŠ ä¸€ä¸ªé€—å·æ¶ˆé™¤æ­§ä¹‰ï¼š 1&gt;&gt;&gt; t = (1,); 1.3 å¾ªç¯ 1.3.1 for å¾ªç¯ åœ¨å…¶å®ƒè¯­è¨€å¾ªç¯éå†é›†åˆæœ‰ä¸¤ç§æ–¹å¼ï¼š forã€while å¾ªç¯ï¼šæ ¹æ®å…ƒç´ ä¸‹æ ‡éå†é›†åˆ foreach å¾ªç¯ï¼šç›´æ¥è·å–é›†åˆæ¯ä¸ªå…ƒç´  python åªæœ‰ï¼šforã€while ä¸¤ç§ï¼Œä½†æ˜¯python ä¸­ for å¾ªç¯å…¶å®æ›´ç±»ä¼¼äºå…¶å®ƒè¯­è¨€foreachå¾ªç¯ã€‚ C++è¯­è¨€å°è¯•éå†åˆ—è¡¨ï¼šL = ['hwh','lt','dxj','fs'] ã€‚ éå† 0~length(L)-1 çš„ä¸‹æ ‡ç´¢å¼•æ¥æ‰“å°å‡ºæ•°ç»„ 12for(int i = 0; i &lt; length(L); i++) print(L[i]); åˆ©ç”¨ foreach å¾ªç¯ï¼Œè·å–åˆ—è¡¨æ¯ä¸ªå…ƒç´ æ‰“å°æ•°ç»„ 12foreach(int x in L) print(x); python ä¸­éå†ï¼šL = ['hwh','lt','dxj','fs']ã€‚ æ ¹æ® python for å¾ªç¯åŸºæœ¬ç±»ä¼¼ foreach å¾ªç¯è·å–é›†åˆå…ƒç´ ç‰¹æ€§éå† 12for x in L: print(x); å·§å¦™è¾¾åˆ°ç”¨ä¸‹æ ‡ç´¢å¼•æ‰“å°æ•°ç»„ åœ¨ python ä¸­æä¾› rang(start,end) å‡½æ•°ï¼Œå¯ç”Ÿæˆ start~end-1 è¿ç»­æ•´æ•°åˆ—è¡¨ã€‚ä»è€Œæ ¹æ®ä¸‹æ ‡ç´¢å¼•æ‰“å°æ•°ç»„ï¼š 12for i in range(0,len(L)): print(L[i]); æ›´å¤šæœ‰å…³ range å‡½æ•° å‡½æ•° æè¿° range(start,end) ç”ŸæˆæŒ‡å®šä» start~end-1 è¿ç»­æ•´æ•°åˆ—è¡¨ range(end) ç”ŸæˆæŒ‡å®šä» 0~end-1 è¿ç»­æ•´æ•°åˆ—è¡¨ æ³¨æ„ range ç”Ÿæˆçš„æ•´æ•°ä¸åŒ…å«æœ€åä¸€ä¸ªæŒ‡å®šå‚æ•°æ•´æ•°ã€‚ å°è¯•ç”Ÿæˆåˆ—è¡¨ï¼š[0,1,2,3] ã€‚ 12&gt;&gt;&gt; l = range(4);&gt;&gt;&gt; l = range(0,4); 1.3.2 while å¾ªç¯ while å¾ªç¯å’Œä»¥å‰æ¥è§¦ç›¸åŒåŒï¼Œä¸å†èµ˜è¿°ã€‚ 1.4 dict &amp; set 1.4.1 dict dict å³å­—å…¸ï¼Œåœ¨åˆ«çš„è¯­è¨€ä¸­åˆç§°ä¸º map ï¼Œéƒ½æ˜¯é‡‡ç”¨é”®å€¼å¯¹(key-value)å½¢å¼ ï¼ŒæŸ¥æ‰¾é€Ÿåº¦æå¿«ã€‚ä¸”æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š dict ä¸€ä¸ª key åªèƒ½å¯¹åº”ä¸€ä¸ª value ï¼Œé‡å¤å¯¹ä¸€ä¸ªkey èµ‹å€¼ä¼šæŠŠå‰é¢å€¼æ›¿æ¢ ç®€å•å¢ã€åˆ ã€æŸ¥ã€æ”¹æ–¹å¼ä¸¾ä¾‹ã€‚ 123456789101112131415161718192021&gt;&gt;&gt; dic = &#123;&#125;;# å¢ï¼šç»™ä¸å­˜åœ¨é”®å€¼èµ‹å€¼ï¼Œå³å¯å¢åŠ ä¸€å †é”®å€¼å¯¹&gt;&gt;&gt; dic[&#x27;shazi&#x27;] = &#x27;lt&#x27;;&gt;&gt;&gt; dic&#123;&#x27;shazi&#x27;: &#x27;lt&#x27;&#125;# æŸ¥ï¼šç›´æ¥æ ¹æ®é”®å€¼æŸ¥æ‰¾&gt;&gt;&gt; dic[&#x27;shazi&#x27;];&#x27;lt&#x27;# æ”¹ï¼šç»™å­˜åœ¨çš„é”®å€¼èµ‹æ–°å€¼ï¼Œå³å¯æ”¹&gt;&gt;&gt; dic[&#x27;shazi&#x27;] = &#x27;fs&#x27;;&gt;&gt;&gt; dic&#123;&#x27;shazi&#x27;: &#x27;fs&#x27;&#125;# åˆ ï¼špop(key)æ–¹æ³•å³å¯åˆ é™¤&gt;&gt;&gt; dic.pop(&#x27;shazi&#x27;);&#x27;fs&#x27;&gt;&gt;&gt; dic&#123;&#125; è¿˜å¯åˆ©ç”¨ *get(key,returnValue)*éªŒè¯æŒ‡å®šé”®å€¼æ˜¯å¦å­˜åœ¨ï¼š 123# åˆ¤æ–­é”®å€¼æ˜¯å¦å­˜åœ¨ï¼šä¸å­˜åœ¨æŒ‡å®šè¿”å›-1ï¼ˆå¦‚æœä¸æŒ‡å®šè¿”å›Noneï¼Œä½†æ˜¯åœ¨äº¤äº’ç¯å¢ƒä»€ä¹ˆéƒ½ä¸æ˜¾ç¤ºï¼‰&gt;&gt;&gt; dic.get(&#x27;shazi&#x27;,-1);-1 1.4.2 set set å’Œ dict ç±»ä¼¼ï¼Œæ˜¯ä¸€ç»„ key é›†åˆ ï¼Œä½†ä¸å­˜å‚¨ value ï¼Œä¸”ï¼š set ä¸­ key å€¼ä¸èƒ½é‡å¤ set å’Œ dict éƒ½ä¸æ˜¯æœ‰åºçš„ åˆ›å»ºä¸€ä¸ªset ï¼Œéœ€è¦ list ä½œä¸ºè¾“å…¥é›†åˆï¼š 123&gt;&gt;&gt; s = set([1,2,3]);&gt;&gt;&gt; s&#123;1, 2, 3&#125; ç®€å• set å¢ã€åˆ ã€æ”¹ã€æŸ¥å¦‚ä¸‹ã€‚ 1234567891011121314# å¢ï¼šaddæ–¹æ³•ï¼Œå‚æ•°æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œå¸¦åŒå¼•å·&gt;&gt;&gt; s.add(&#x27;a&#x27;);&gt;&gt;&gt; s&#123;1, 2, 3, &#x27;a&#x27;&#125;# åˆ ï¼šremoveæ–¹æ³•ï¼Œå‚æ•°æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œå¸¦åŒå¼•å·&gt;&gt;&gt; s.remove(&#x27;a&#x27;)&gt;&gt;&gt; s&#123;1, 2, 3&#125;# æŸ¥ï¼šå¿…é¡»è¦å…ˆè½¬æ¢ä¸ºlistç±»å‹&gt;&gt;&gt; l = list(s);&gt;&gt;&gt; l[0];1 set å¯ä»¥çœ‹åšæ•°å­¦æ„ä¹‰ä¸Šæ— åºã€é‡å¤å…ƒç´ é›†åˆã€‚å› æ­¤è¿˜å¯ä»¥åšäº¤é›†ã€å¹¶é›†ç­‰æ“ä½œã€‚ 123456&gt;&gt;&gt; s1 = set([1, 2, 3])&gt;&gt;&gt; s2 = set([2, 3, 4])&gt;&gt;&gt; s1 &amp; s2&#123;2, 3&#125;&gt;&gt;&gt; s1 | s2&#123;1, 2, 3, 4&#125; 1.5 å‡½æ•° 1.5.1 åŸºæœ¬å®šä¹‰ ä¸‹é¢å±•ç¤ºäº†åœ¨ python å¦‚ä½•å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼ˆæ³¨æ„å†’å·ï¼‰ï¼Œä¸”å¸¦é»˜è®¤å‚æ•°ã€‚ 123456# python æ²¡æœ‰ä¸‰ç›®è¿ç®—ç¬¦def max(x,y = 5): if x &gt; y : return x; else: return y; åœ¨ä¸Šé¢é™¤äº†å¿…é€‰å‚æ•°ã€é»˜è®¤å‚æ•°è¿˜æœ‰ï¼š å¯å˜å‚æ•°ï¼šå®šä¹‰ä¸ºå¯å˜çš„å‚æ•°çš„å½¢å‚ï¼Œæ¥æ”¶çš„å®å‚å¯ä»¥æ˜¯å¤šä¸ªï¼ˆç»„æˆ tuple ï¼‰ å…³é”®å­—å‚æ•°ï¼šå®šä¹‰ä¸ºå…³é”®å­—çš„å‚æ•°çš„å½¢å‚ï¼Œæ¥æ”¶çš„å®å‚å¯ä»¥æ˜¯å¤šä¸ªï¼ˆç»„æˆ dict ï¼‰ å‘½åå…³é”®å­—å‚æ•°ï¼šé€šè¿‡åˆ†éš”ç¬¦ * å¯é™åˆ¶å…³é”®å­—å‚æ•°çš„åå­— ä»¥ä¸Šåœ¨ä¸‹èŠ‚1.5.2 ä¼šè¯¦ç»†è®²è¿°ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹ python å…¶å®ƒç‰¹æ€§ã€‚ å¯å˜å’Œä¸å¯å˜å¯¹è±¡ ä»€ä¹ˆæ˜¯å¯å˜/ä¸å¯å˜å¯¹è±¡ï¼Ÿ ç®€å•æ¥è¯´ï¼šå°±æ˜¯å¯å˜å¯¹è±¡Aå……å½“å‡½æ•°å®å‚ æ—¶ï¼Œå‡½æ•°å†…éƒ¨å¯¹å½¢å‚ Aè¿›è¡Œä¿®æ”¹ï¼Œä¼šåŒæ­¥æ”¹å˜Aã€‚ è¿™æ˜¯å› ä¸ºå¯å˜å¯¹è±¡ä¼ é€’çš„æ˜¯ä¸€ä¸ªåœ°å€ï¼ˆå¼•ç”¨ä¼ é€’ï¼‰ï¼Œè€Œä¸å¯å˜å¯¹è±¡ä¼ é€’çš„æ˜¯ä¸€ä»½æ‹·è´ï¼ˆå€¼ä¼ é€’ï¼‰ï¼ å¸¸è§å¯å˜å¯¹è±¡/ä¸å¯å˜å¯¹è±¡ï¼š ä¸å¯å˜å¯¹è±¡ï¼šNumber ,String , Tupleï¼Œbool å¯å˜å¯¹è±¡ï¼šList , Set , Dictionary åŒ¿åå‡½æ•° python ä¸­åŒ¿åå‡½æ•°ç›´æ¥ç”¨ lambda è¡¨è¾¾å¼è¡¨è¾¾ï¼Œå…¶è¯­æ³•æ ¼å¼ä¸ºï¼š lambda å‚æ•°åˆ—è¡¨ : æ‰§è¡Œè¯­å¥ æ‰§è¡Œè¯­å¥åªæœ‰ä¸€æ¡ï¼Œä¸ç”¨å†™ return ï¼Œè¿”å›å€¼å°±æ˜¯è¡¨è¾¾å¼ç»“æœã€‚ ç­›é€‰å‡ºæ‰€æœ‰å¥‡æ•°ã€‚ 12&gt;&gt;&gt; L = list(filter(lambda n:n%2==1, range(1, 10)))[1, 3, 5, 7, 9] 1.5.2 è¿”å›å€¼ return è¿”å›å¤šä¸ªå€¼ åœ¨ python å‡½æ•°ä¸­å¯ä»¥è¿”å›å¤šä¸ªå€¼ï¼Œä½†å®é™…å®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªå…ƒç»„ tupleï¼š 123def test(): return 1,2,3;print(test()); # (1, 2, 3) è¿™ä¸ªæ—¶å€™åˆ©ç”¨è§£æ„èµ‹å€¼ï¼Œå¯ä»¥æ¥æ”¶å‡½æ•°è¿”å›å€¼ï¼š 1x,y,z = test(); # x=1 y=2 z=3 è¿”å›å‡½æ•° &amp; é—­åŒ… å‚ç…§ï¼šJavaScript ç¬”è®° &amp; é˜®ä¸€å³°çš„é—­åŒ…åšå®¢ ã€‚ ğŸ™‚ ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå†…éƒ¨å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°å¹¶è¿”å›ã€‚ ğŸ™‚ ä¸ºä»€ä¹ˆè¦æœ‰é—­åŒ…ï¼Ÿ è¯»å–å‡½æ•°å†…éƒ¨å˜é‡ è®©å˜é‡å€¼å§‹ç»ˆä¿å­˜åœ¨å†…å­˜ä¸­ ä¸‹é¢å¼€å§‹è¯¦ç»†ä»‹ç»é—­åŒ…ä¸¤ä¸ªä½œç”¨ã€‚ è¯»å–å‡½æ•°å˜é‡å€¼ã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œæ ¹æ®ä½œç”¨åŸŸè§„åˆ™å‡½æ•°å†…éƒ¨çš„å˜é‡ã€å‚æ•°æ˜¯æ— æ³•è¢«å¤–éƒ¨è·å– çš„ã€‚ 12345def test(a): b = 1;a; # é”™è¯¯ï¼šæ— æ³•è¯»å–b; # é”™è¯¯ï¼šæ— æ³•è¯»å– ä½†æ˜¯ï¼Œå¦‚æœæˆ‘åœ¨å†…éƒ¨å†å®šä¹‰ä¸€ä¸ªå­å‡½æ•°ï¼Œè¿”å›å˜é‡ã€å‚æ•°ï¼Œæœ€åå†è¿”å›è¯¥å­å‡½æ•°ï¼š 12345678def test(a): b = 1; def f(): return a,b; return f;f = test(0);a,b = f();print(a,b); # è¾“å‡ºï¼š0 1 è¿™æ ·é—­åŒ…ä¾¿èµ·åˆ°å‡½æ•°å†…ã€å¤–éƒ¨æ²Ÿé€šçš„æ¡¥æ¢ã€‚ è®©å˜é‡å§‹ç»ˆä¿å­˜åœ¨å†…å­˜ä¸­ã€‚ 1234567891011def test3(): x = 0; def f3(): nonlocal x; x += 1; return x ; # ç›´æ¥ return x+=1 å‡ºé”™ï¼Ÿ return f3;f3 = test3();print(f3()); # è¾“å‡ºï¼š1print(f3()); # è¾“å‡ºï¼š2print(f3()); # è¾“å‡ºï¼š3 åœ¨å†…éƒ¨å­å‡½æ•° f3() å¯¹xè¿›è¡Œä¿®æ”¹ï¼Œä¼šå±è”½æ‰å¤–éƒ¨å‡½æ•°å¯¹ x å®šä¹‰ï¼Œè¿™æ ·å†…éƒ¨å‡½æ•° f3() ä½¿ç”¨ x ä¼šæ˜¾ç¤ºæœªå®šä¹‰ã€‚æ‰€ä»¥å¿…é¡»ä½¿ç”¨ nonlocal å…³é”®å­—ï¼Œè®©ç¼–è¯‘å™¨çŸ¥é“è¿™æ˜¯å‰é¢å·²å®šä¹‰çš„ xã€‚ ä¸ºä»€ä¹ˆæ¯æ¬¡è°ƒç”¨ f3() è¾“å‡ºçš„å€¼éƒ½ä¸ä¸€æ ·ï¼Ÿ è¿™æ˜¯å› ä¸ºå‡½æ•°å†…éƒ¨å®šä¹‰äº†å­å‡½æ•°å½¢æˆäº†é—­åŒ…ï¼Œå‡½æ•°çš„å˜é‡xéƒ½ä¼šä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå¹¶æ²¡æœ‰æ¶ˆäº¡ã€‚ ä¸è¦å¼•ç”¨å¾ªç¯å˜é‡ï¼ å­å‡½æ•°ï¼ˆè¿”å›å‡½æ•°ï¼‰ä¸è¦å¼•ç”¨å¾ªç¯å˜é‡ï¼è¿™æ˜¯å› ä¸ºè¿”å›å‡½æ•°ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œç›´åˆ°è°ƒç”¨å®ƒæ‰ä¼šæ‰§è¡Œã€‚ 123456789def count(): fs = [] for i in range(1, 4): def f(): return i*i fs.append(f) return fsf1, f2, f3 = count() count() å‡½æ•°å°è¯•è¿”å› i = 1,2,3 å¯¹åº”çš„ä¸åŒå‡½æ•°ã€‚å½“æˆ‘ä»¬å°è¯•å»æ‰§è¡Œå®ƒä»¬ï¼š 123456&gt;&gt;&gt; f1()9&gt;&gt;&gt; f2()9&gt;&gt;&gt; f3()9 å‘ç°å‡½æ•°æ‰§è¡Œç»“æœéƒ½æ˜¯ 9ï¼Œè¿™æ˜¯å› ä¸ºè¿”å›çš„å‡½æ•°f1ã€f2ã€f3æ²¡æœ‰ç«‹å³æ‰§è¡Œã€‚è€Œå½“æ‰§è¡Œå®ƒä»¬æ˜¯ i éƒ½å·²ç»æ˜¯9äº†ã€‚ 1.5.3 å‡½æ•°å‚æ•° å¯å˜å‚æ•° è¯•æƒ³å¦‚æœä¸€ä¸ªå‡½æ•°æ¥æ”¶å‚æ•°ä¸ç¡®å®šï¼Œæ¯”å¦‚è®¡ç®—ç”¨æˆ·è¾“å…¥çš„è‹¥å¹²æ•°å­—ä¹‹å’Œã€‚å½“ç„¶æˆ‘ä»¬å¯ä»¥ç”¨ åˆ—è¡¨æ¥æ”¶å¤šä¸ªå‚æ•°ï¼š 1234567def sum(nums): sum = 0; for x in nums: sum += x; return sum;sum([1,2,3,4,5]); // 15 é‡‡ç”¨å¯å˜å‚æ•°å½¢å¼ï¼Œæ¥æ¥æ”¶å¤šä¸ªå‚æ•°ã€‚ 1234567def sum(nums): sum = 0; for x in nums: sum += x; return sum;sum(1,2,3,4,5); // 15 å¯è§ç›¸æ¯”ç”¨åˆ—è¡¨æ¥æ”¶å‚æ•°ï¼Œåœ¨è°ƒç”¨æ—¶ä¸ç”¨ä¼ é€’ä¸€ä¸ªåˆ—è¡¨è€Œæ˜¯ä¸€ä¸ªä¸ªä¼ é€’å‚æ•°å³å¯ï¼Œç®€æ´æ˜äº†ã€‚ å¦‚æœå®šä¹‰äº†å¯å˜å‚æ•°ï¼Œåˆæƒ³ä¼ é€’ä¸€ä¸ªåˆ—è¡¨å‘¢ï¼Ÿåœ¨è°ƒç”¨æ—¶åŠ ä¸Š* å³å¯ ã€‚ 12L = [1,2,3,4,5];print(sum(*L)); // 15 å…³é”®å­—å‚æ•° å…³é”®å­—å‚æ•°ç±»åŒå¯å˜å‚æ•°ï¼Œä½†å®ƒä¸åŒäºå¯å˜å‚æ•°æ¥æ”¶å¤šä¸ªå‚æ•°ç»„æˆ tuple è€Œæ˜¯ç»„æˆä¸€ä¸ª dict ã€‚ 12345def person(name,age,**other): print(other);# è¾“å‡ºï¼š&#123;&#x27;university&#x27;: &#x27;chongqingU&#x27;, &#x27;city&#x27;: &#x27;fuzhou&#x27;&#125;person(&#x27;hwh&#x27;, 20, university=&#x27;chongqingU&#x27;, city=&#x27;fuzhou&#x27;); åŒæ ·çš„å®ƒä¹Ÿè§£å†³ ä¼ é€’è‹¥å¹²å‚æ•°ä¸ç”¨ä¼ é€’ä¸€ä¸ªdict ï¼Œè€Œæ˜¯ä¼ é€’ä¸€ä¸ªä¸ª key:value å€¼å°±å¯ä»¥äº† ã€‚ åŒå‰ï¼Œå¦‚æœå·²ç»å®šä¹‰äº†å…³é”®å­—å‚æ•°ï¼Œåˆæƒ³ä¼ é€’ä¸€ä¸ªdict ï¼ŒåŠ ä¸Š ** å³å¯ï¼š 12dic = &#123;&#x27;university&#x27;: &#x27;chongqingU&#x27;, &#x27;city&#x27;: &#x27;fuzhou&#x27;&#125;;person(&#x27;hwh&#x27;, 20, **dic); âš ï¸ other è·å–çš„æ˜¯ dic ä¸€ä»½æ‹·è´ï¼Œå¯¹ other ä¿®æ”¹ä¸ä¼šå½±å“ dic ã€‚ å‘½åå…³é”®å­—å‚æ•° åœ¨ä¸Šè¿°å…³é”®å­—å‚æ•°ä¸­ï¼Œä¼šå°†ä¼ é€’è¿›æ¥çš„è‹¥å¹² key:value å‚æ•°ç»„æˆ dict ã€‚ä½†æ˜¯ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›ä¼ é€’çš„ key ä¸ºæŒ‡å®šåå­—ï¼Œä¸”ä¸ªæ•°è¢«é™å®š ã€‚ è¿™ä¸ªæ—¶ï¼Œå¯ä»¥ä½¿ç”¨å‘½åå…³é”®å­—ï¼Œä¸åŒäºå…³é”®å­—å‚æ•° **other ï¼Œå‘½ä»¤å…³é”®å­—ä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šåˆ†éš”ç¬¦ *ï¼š 1234def person(name,age,*,Uni,City): print(name,age,Uni,City);person(&#x27;hwh&#x27;,23,Uni = &#x27;chongQingU&#x27;,City = &#x27;fuzhou&#x27;); # hwh 23 chongQingU fuzhou åœ¨ä»¥ä¸‹æƒ…å†µï¼Œæ²¡æœ‰ä¼ é€’æ­£ç¡®å‘½åå…³é”®å­—å‚æ•°ä¼šå‡ºé”™ï¼š ä¼ é€’å‚æ•°ä¸å¸¦ keyï¼Œåªä¼  value å€¼ ï¼Œå‡ºé”™ï¼š 1person(&#x27;hwh&#x27;,23,&#x27;chongQingU&#x27;,&#x27;fuzhou&#x27;); # å‡ºé”™ æˆ–è€…ä¸æ˜¯ key å€¼å¹¶ä¸æ˜¯é™å®šçš„åå­—ï¼Œå‡ºé”™ï¼š 1person(&#x27;hwh&#x27;,23,u=&#x27;chongQingU&#x27;,c=&#x27;fuzhou&#x27;); # å‡ºé”™ æˆ–ä¼ é€’äº†å¤šä½™å‚æ•°ï¼Œå‡ºé”™ï¼š 1person(&#x27;hwh&#x27;,23,Uni = &#x27;chongQingU&#x27;,City = &#x27;fuzhou&#x27;,height = 173); # å‡ºé”™ å…³é”®å­—ç»„åˆ å¿…é€‰å‚æ•°ã€é»˜è®¤å‚æ•°ã€å¯å˜å‚æ•°ã€å…³é”®å­—å‚æ•°å’Œå‘½åå…³é”®å­—å‚æ•°ï¼Œè¿™5ç§å‚æ•°éƒ½å¯ä»¥ç»„åˆä½¿ç”¨ã€‚ä½†æ˜¯é¡ºåºï¼š å¿…é€‰å‚æ•° ã€ é»˜è®¤å‚æ•° ã€å¯å˜å‚æ•°ã€å‘½åå…³é”®å­—å‚æ•°ã€å…³é”®å­—å‚æ•°ï¼ 1.6 åŸºæœ¬ç±»å‹è½¬æ¢ ç¬¬äºŒç« ï¼šé«˜çº§ç‰¹æ€§ 2.1 åˆ‡ç‰‡ è¯•æƒ³ä¸‹æœ‰ä¸€æ•°ç»„å’Œå­—ç¬¦ä¸²ï¼Œå¦‚ä½•è·å–å®ƒä»¬å„è‡ªå‰ä¸‰ä¸ªå…ƒç´ ï¼Ÿ 12L = [&#x27;A&#x27;,&#x27;B&#x27;,&#x27;C&#x27;,&#x27;D&#x27;,&#x27;E&#x27;];S = &#x27;python.py&#x27;; æˆ‘ä»¬å¯ä»¥è”æƒ³åˆ° ï¼šC# ä¸­ substring() è¿›è¡Œ å­—ç¬¦ä¸² æˆªå–ï¼›JavaScript ä¸­ slice() æ–¹æ³•ï¼Œè¿›è¡Œ æ•°ç»„ã€å­—ç¬¦ä¸² æˆªå–ã€‚ åœ¨ python ä¸­æä¾›äº†ç±»ä¼¼ JavaScript ä¸­ slice() æ–¹æ³• ï¼Œè¿›è¡Œæ›´åŠ ä¼˜é›…çš„ åˆ—è¡¨ï¼ˆæ•°ç»„ï¼‰ã€å…ƒç»„ã€å­—ç¬¦ä¸² æˆªå–ã€‚ 12345678910111213# 1.æˆªå–æ•°ç»„# ç¬¬ä¸€ä¸ªç´¢å¼•æ˜¯0ï¼Œè¿˜å¯ä»¥çœç•¥ï¼ŒL[:3]&gt;&gt;&gt; L[0:3] [&#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;]# 2.æˆªå–å­—ç¬¦ä¸²&gt;&gt;&gt; S[:3]&#x27;pyt&#x27;# 3.æˆªå–å…ƒç»„&gt;&gt;&gt; t = (1,2,3,4,5);&gt;&gt;&gt; t[:3](1, 2, 3) ç¬¬äºŒä¸ªç´¢å¼•å€¼ä¸€å®šè¦æ¯”ç¬¬äºŒä¸ªç´¢å¼•å¤§ï¼ç‰¹åˆ«æ³¨æ„è´Ÿæ•°æƒ…å†µ ç¬¬ä¸€ä¸ªç´¢å¼•æ˜¯0ï¼Œå¯ä»¥çœç•¥ï¼›æœ€åä¸€ä¸ªç´¢å¼•æ˜¯åˆ—è¡¨é•¿åº¦ï¼Œä¹Ÿå¯ä»¥çœç•¥ æ‰€ä»¥ï¼Œä¸‹é¢è·å–çš„æ˜¯æ•´ä¸ªåˆ—è¡¨ã€‚ 12&gt;&gt;&gt; L[:]&gt;&gt;&gt; [&#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;, &#x27;D&#x27;, &#x27;E&#x27;] 2.1.1 åˆ‡ç‰‡æ›´å¤šæŠ€å·§ ç´¢å¼•ä½¿ç”¨è´Ÿæ•° æ³¨æ„ï¼Œç¬¬äºŒä¸ªç´¢å¼•ä¸€å®šè¦æ¯”ç¬¬ä¸€ä¸ªç´¢å¼•å¤§ï¼Œæ¢è¨€ä¹‹åªèƒ½ä»æ•°ç»„å¤´åˆ°å°¾æ–¹å‘åˆ‡ç‰‡ï¼ 123&gt;&gt;&gt; L = [&#x27;A&#x27;,&#x27;B&#x27;,&#x27;C&#x27;,&#x27;D&#x27;,&#x27;E&#x27;];&gt;&gt;&gt; L[-6:-2];[&#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;] æŒ‡å®šé—´éš”å–æ•° L[s:e:j] : æˆªå–æ•°ç»„æŒ‡å®š [s:e] èŒƒå›´ï¼Œ ç„¶åæ¯éš” j ä¸ªæ•°å–å‡ºæ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ã€‚ å–å‡ºæ•°ç»„ä¸‹æ ‡ä¸ºå¥‡æ•°å…ƒç´ ã€‚ 123&gt;&gt;&gt; L = [&#x27;A&#x27;,&#x27;B&#x27;,&#x27;C&#x27;,&#x27;D&#x27;,&#x27;E&#x27;];&gt;&gt;&gt; L[1::2][&#x27;B&#x27;, &#x27;D&#x27;] 2.2 åˆ—è¡¨ç”Ÿæˆå¼ ä»€ä¹ˆæ˜¯åˆ—è¡¨ç”Ÿæˆå¼ï¼Ÿç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯å¿«é€Ÿåˆ›å»ºåˆ—è¡¨çš„è¡¨è¾¾å¼ï¼Œç±»ä¼¼ lambada è¡¨è¾¾å¼ç”Ÿæˆå‡½æ•°ã€‚ ç”Ÿæˆå¼æ ¼å¼ï¼š[å˜é‡è¿ç®—è¡¨è¾¾å¼ å˜é‡æ¥æºè¡¨è¾¾å¼ é™åˆ¶å˜é‡è¡¨è¾¾å¼ ] æœ€ç®€å•çš„åˆ©ç”¨ range(s,e) æ¥ç”Ÿæˆä¸€ä¸ªåˆ—è¡¨ï¼š 12&gt;&gt;&gt; list(range(1, 11))[1, 2, 3, 4, 5, 6, 7, 8, 9, 10] åˆ©ç”¨åˆ—è¡¨ç”Ÿæˆå¼å¯å†™ä½œï¼š 12&gt;&gt;&gt; [x for x in range(1,11)][1, 2, 3, 4, 5, 6, 7, 8, 9, 10] å˜å½¢1ï¼šåœ¨ 1 - 11 ä¸­åˆ é€‰å‡ºä¸ºå¶æ•°çš„æ•°å­—ï¼Œä¸”å¼€å¹³æ–¹ä½œä¸ºä¸ºåˆ—è¡¨å…ƒç´ ã€‚ æˆ‘ä»¬éœ€è¦æ”¹å˜å…ƒç´ è¿ç®—è¡¨è¾¾å¼å¼€æ–¹ï¼Œå’Œå¢åŠ é™åˆ¶å˜é‡è¡¨è¾¾å¼åˆ¤æ–­æ˜¯å¦ä¸ºå¶æ•°ã€‚ 12&gt;&gt;&gt; [x*x for x in range(1,11) if x%2 == 0]; # æ³¨æ„ï¼Œåˆ¤æ–­æ¡ä»¶æ˜¯ == å·[4, 16, 36, 64, 100] å˜å½¢2ï¼šå°†å­—å…¸ &#123;1:'one',2:'two',3:'three'&#125; å˜ä¸ºåˆ—è¡¨ ['1=one','3=three'] ã€‚ åˆ©ç”¨ for å¾ªç¯è¿­ä»£å­—å…¸è·å– keyã€valueï¼Œåœ¨å…ƒç´ è¿ç®—è¡¨è¾¾å¼ä¸­æ‹¼æ¥å³å¯ã€‚ 12&gt;&gt;&gt; [str(k)+&#x27;=&#x27;+v for k,v in &#123;1:&#x27;one&#x27;,2:&#x27;two&#x27;,3:&#x27;three&#x27;&#125;.items() if k!=2 ];[&#x27;1=one&#x27;, &#x27;3=three&#x27;] å‰é¢éƒ½æ˜¯ if åˆ¤æ–­æ¡ä»¶éƒ½é™åˆ¶éå†çš„é›†åˆï¼Œä¸‹ä¾‹å¯ä»¥é™åˆ¶ç”Ÿæˆçš„å€¼ã€‚ éå†['hwh','lt','fs'] ,å¦‚æœæ˜¯ 'hwh'å°±å¯¹åº”ç”Ÿæˆåˆ—è¡¨å¯¹åº”å…ƒç´ æ•°å­—1ï¼Œå¦åˆ™ç”Ÿæˆ0ã€‚ 12&gt;&gt;&gt; [1 if name==&#x27;hwh&#x27; else 0 for name in [&#x27;hwh&#x27;,&#x27;lt&#x27;,&#x27;fs&#x27;] ][1 0 0] 2.3 ç”Ÿæˆå™¨ åœ¨å‰é¢æˆ‘ä»¬åˆ©ç”¨ åˆ—è¡¨ç”Ÿæˆå¼ å¯ä»¥å¿«é€Ÿç”Ÿæˆåˆ—è¡¨ã€‚ä½†æ˜¯ï¼š å¦‚æœç”Ÿæˆåˆ—è¡¨å¾ˆå¤§ï¼Œå¦‚ç™¾ä¸‡ä¸ªå…ƒç´ ï¼Œä½†åé¢å¾ˆå¤šå…ƒç´ å½“å‰ä¸ä¼šç”¨åˆ°ï¼Œæµªè´¹ç©ºé—´å­˜å‚¨åˆå¿…é¡»è¦ä¿å­˜æ€ä¹ˆåŠå‘¢ï¼Ÿ è¿™ä¸ªæ—¶å€™å°±å¯ä»¥åˆ©ç”¨ç”Ÿæˆå™¨ï¼Œåªä¿å­˜åˆ—è¡¨å…ƒç´ çš„æ¨ç®—ç®—æ³•ï¼Œéœ€è¦ç”¨åˆ°æ—¶å¯ä»¥ä¸æ–­æ¨ç®—å‡ºæ¥ã€‚ åˆ›å»ºä¸€ä¸ª generator å’Œ åˆ—è¡¨ç”Ÿæˆå¼å¾ˆåƒï¼Œåªä¸è¿‡æŠŠ [] å˜ä¸ºäº† () : 123&gt;&gt;&gt; g = (x * x for x in range(6))&gt;&gt;&gt; g&lt;generator object &lt;genexpr&gt; at 0x1022ef630&gt; ç›´æ¥æ‰“å° g æ˜¯ä¸ä¼šæ˜¾ç¤ºç”Ÿæˆçš„åˆ—è¡¨ï¼Œå› ä¸ºä¿å­˜çš„æ˜¯æ¨ç®—ç®—æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ next() å‡½æ•° æˆ–è€… ç›´æ¥ for å¾ªç¯è¿­ä»£ï¼š 1234567891011121314&gt;&gt;&gt; g = (x for x in range(6))&gt;&gt;&gt; next(g)0&gt;&gt;&gt; next(g)1&gt;&gt;&gt; next(g)2# æ³¨æ„ï¼šå› ä¸ºå·²ç»å‰é¢å·²ç»nextè·å–åˆ°2äº†ï¼Œä¸‹é¢æ˜¯ä»3å¼€å§‹æ‰“å°&gt;&gt;&gt; for x in g:... print(x);... 345 2.3.1 yield è¿”å›ï¼šè¿›ä¸€æ­¥ç†è§£ç”Ÿæˆå™¨ è§‚æµ‹ä¸‹é¢æœ‰å¤šä¸ª yield è¿”å›å€¼å‡½æ•°ï¼š 1234567&gt;&gt;&gt; def g():... yield 1;... yiled 2;... yield 3;&gt;&gt;&gt; o = g();&gt;&gt;&gt; o&lt;generator object g at 0x000001B9C07059A8&gt; å¯ä»¥çœ‹åˆ°ï¼Œå‡½æ•°è¿”å› çš„æ˜¯ä¸€ä¸ª generator å¯¹è±¡ï¼Œç±»ä¼¼çš„å¯ä»¥é€šè¿‡ *next()*å‡½æ•° æˆ–è€… for è¿­ä»£ è·å–å¤šä¸ªè¿”å›å€¼ã€‚ 12345678&gt;&gt;&gt; next(o)1&gt;&gt;&gt; next(o)2&gt;&gt;&gt; next(o)3&gt;&gt;&gt; next(o)Traceback (most recent call last): åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åŸºæœ¬å°±å¯ä»¥æ˜ç™½ï¼Œç”Ÿæˆå™¨ (è¡¨è¾¾å¼) æœ¬è´¨æ˜¯ç”Ÿæˆäº†ä¸€ä¸ªæœ‰å¤šä¸ª yield è¿”å›å€¼çš„ generator å¯¹è±¡ã€‚ æˆ‘ä»¬è¿˜å¯ä»¥å°† æ–æ³¢æ‹‰å¥‘æ•°åˆ— åˆ©ç”¨ç”Ÿæˆå™¨ä¾æ¬¡æ‰“å°å‡ºæ¥ã€‚ å¸¸è§„å®šä¹‰çš„ fib() å‡½æ•°å¦‚ä¸‹ï¼š 1234567def fib(max): n, a, b = 0, 0, 1 while n &lt; max: print b # æ‰“å°ç”Ÿæˆçš„æ•°å­— a, b = b, a + b n = n + 1 return &#x27;done&#x27; æˆ‘ä»¬åªéœ€è¦å°†æœ¬è¯¥æ‰“å°æ•°å­— print b ï¼Œå˜ä¸ºè¿”å› yeild b å³å¯ã€‚ 1234567def fib(max): n, a, b = 0, 0, 1 while n &lt; max: yield b # æ‰“å°ç”Ÿæˆçš„æ•°å­— a, b = b, a + b n = n + 1 return &#x27;done&#x27; ç„¶ååˆ©ç”¨å‡½æ•°è¿”å› generator å¯¹è±¡æ‰“å°å‡ºæ¥ï¼š 123456789f = fib(5);next(f);1next(f);1next(f);2next(f);3 æ³¨æ„ï¼šgenerator å¯¹è±¡æ‹¿ä¸åˆ° return è¯­å¥çš„è¿”å›å€¼ã€‚ 2.4 for è¿­ä»£ ä»€ä¹ˆæ˜¯è¿­ä»£ï¼Ÿ åœ¨å…¶å®ƒè¯­è¨€ä¹Ÿæœ‰ç±»ä¼¼çš„è¿­ä»£å™¨æ¦‚å¿µï¼Œæ¢è¨€ä¹‹å°±æ˜¯å¦‚ä½•ä¸€ç§æ–¹å¼éå†å„ç§ç±»å‹æ•°æ®ç»“æ„é›†åˆã€‚ python ä¸­ for å¾ªç¯æ˜¯ä¸€ç§æ¯”å…¶å®ƒè¯­è¨€ for æ›´é«˜åº¦æŠ½è±¡çš„æ¦‚å¿µï¼Œå¯ç›´æ¥ä½œç”¨äº for å¾ªç¯è¿­ä»£çš„æ•°æ®ç±»å‹æœ‰ï¼š é›†åˆç±»å‹ï¼šå¦‚ listã€tupleã€dictã€setã€strç­‰ generator ç±»å‹ï¼šåŒ…æ‹¬ ç”Ÿæˆå™¨ ã€å¸¦ yield çš„ generator å‡½æ•° 2.4.1 é›†åˆç±»å‹è¿­ä»£ è¿­ä»£ list &amp; tuple 12345&gt;&gt;&gt; for x in [1,2,3]:... print(x) &gt;&gt;&gt; for x in (1,2,3):... print(x) è¯•ç€åˆ†æä¸‹é¢åˆ—è¡¨è¿­ä»£ï¼Œå…ƒç´ ç±»å‹ä¸ºå…ƒç»„ã€‚ 123456&gt;&gt;&gt; for x, y in [(1, 1), (2, 4), (3, 9)]:... print(x, y)...1 12 43 9 è¿™é‡ŒåŒæ—¶å¼•ç”¨äº†2ä¸ªå˜é‡ï¼šå› ä¸ºåˆ—è¡¨çš„å…ƒç´ ä¹Ÿæ˜¯é›†åˆç±»å‹ï¼ˆå…ƒç»„ï¼‰ï¼Œå¯ä»¥ç±»ä¼¼è§£ææ„å€¼ï¼Œå°†å…ƒç»„å€¼èµ‹å€¼ç»™ xã€yã€‚ç„¶åæ¯ä¸€æ¬¡å¾ªç¯éƒ½èµ‹å€¼ä¸€æ¬¡ï¼Œéå†æ‰€æœ‰å…ƒç»„æ‰“å°ã€‚ âš ï¸ æ³¨æ„ä¸‹é¢ key-value å­—å…¸ä¸å¯ä»¥ç›´æ¥è§£ææ„å€¼ï¼Œè¦å…ˆåˆ©ç”¨ items() æ–¹æ³•å˜ä¸ºå…ƒç»„ï¼Œè¯¦æƒ…è§ä¸‹ã€‚ è¿­ä»£ dict 12345678910111213# è¿­ä»£å­—å…¸keyfor k in &#123;&#x27;a&#x27;: 1, &#x27;b&#x27;: 2, &#x27;c&#x27;: 3&#125;: print(k); # è¾“å‡ºï¼ša c b# è¿­ä»£å­—å…¸value# åˆ©ç”¨values()æ–¹æ³•ï¼Œå°†å­—å…¸ç±»å‹è¿”å›ä¸ºvaluesç»„æˆåˆ—è¡¨for k in &#123;&#x27;a&#x27;: 1, &#x27;b&#x27;: 2, &#x27;c&#x27;: 3&#125;.values(): print(k); # è¾“å‡ºï¼š1 2 3# åŒæ—¶è¿­ä»£å­—å…¸ keyï¼Œvalue# åˆ©ç”¨items()æ–¹æ³•for k,v in &#123;&#x27;a&#x27;: 1, &#x27;b&#x27;: 2, &#x27;c&#x27;: 3&#125;.items(): print(k,v); # è¾“å‡ºï¼ša 1 b 2 c 3 è¿­ä»£å­—ç¬¦ä¸² 12&gt;&gt;&gt; for c in &#x27;ABC&#x27;:... print(c) # è¾“å‡ºï¼šA B C 2.4.2 ç”Ÿæˆå™¨ç±»å‹è¿­ä»£ ç”Ÿæˆå™¨ç±»å‹è¿­ä»£ç›´æ¥ forâ€¦ in å¾ªç¯æ‰“å°å³å¯ï¼Œå¯å‚è§ 2.3 ç”Ÿæˆå™¨ ä¸€èŠ‚ã€‚ 2.4.3 å…³äºè¿­ä»£æ›´å¤š åˆ¤æ–­è¿­ä»£å¯¹è±¡ åˆ¤æ–­è¿­ä»£å¯¹è±¡åˆ©ç”¨ instance() æ–¹æ³•åˆ¤æ–­ï¼š 1234567&gt;&gt;&gt; from collections import Iterable&gt;&gt;&gt; isinstance(&#x27;abc&#x27;, Iterable) # stræ˜¯å¦å¯è¿­ä»£True&gt;&gt;&gt; isinstance([1,2,3], Iterable) # listæ˜¯å¦å¯è¿­ä»£True&gt;&gt;&gt; isinstance(123, Iterable) # æ•´æ•°æ˜¯å¦å¯è¿­ä»£False æŠŠåˆ—è¡¨åƒå­—å…¸ä¸€æ ·è¿­ä»£ Python å†…ç½®çš„enumerate(list)å‡½æ•°å¯ä»¥æŠŠä¸€ä¸ª list å˜æˆ ç´¢å¼•-å…ƒç´ å¯¹ ã€‚ 123456&gt;&gt;&gt; for i, value in enumerate([&#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;]):... print(i, value) ...0 A1 B2 C ç¬¬ä¸‰ç« ï¼šå‡½æ•°å¼ç¼–ç¨‹ 3.1 é«˜é˜¶å‡½æ•° æ‰€è°“é«˜é˜¶å‡½æ•°å³æŒ‡ï¼šå‡½æ•°ä¹Ÿæ˜¯å˜é‡ï¼Œä»è€Œå¯ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°ï¼ˆé«˜é˜¶å‡½æ•°ï¼‰å‚æ•°ã€‚ åœ¨ JavaScript ä¸­å·²ç»è¯¦ç»†è®²è§£äº† map/reduce ã€filterã€sorted ç­‰é«˜é˜¶å‡½æ•° ï¼Œä½†æ˜¯è°ƒç”¨æ–¹æ³•ã€è¿”å›å€¼ä¸åŒï¼š è°ƒç”¨æ–¹æ³•ï¼šJavaScript ä¸­æ˜¯æ•°ç»„å¯¹è±¡æ–¹æ³•ï¼Œ [1,2,3].map(func) ; python ä¸­éœ€è¦ä¼ é€’ä¸¤ä¸ªå‚æ•° map(func,[1,2,3]) ã€‚ è¿”å›å€¼ï¼šJavaScript ä¸­ç›´æ¥è¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼›python ä¸­è¿”å›ä¸€ä¸ªæ˜¯ä¸€ä¸ªiterator æƒ°æ€§åºåˆ— ï¼Œå¯ä»¥ç”¨ next() é€ä¸ªæ‰“å° ã€ for å¾ªç¯ è¿­ä»£æ‰“å° ã€ list() æ–¹æ³•ç›´æ¥è½¬ä¸ºåˆ—è¡¨ ã€‚ ä»¥ä¸‹ä¸ºç®€å•ç¤ºä¾‹ã€‚ 3.1.1 é«˜çº§å‡½æ•°ç¤ºä¾‹ æ˜ å°„ï¼š map map é«˜çº§å‡½æ•°å¯ä»¥åŸåˆ—è¡¨å…ƒç´ xæ ¹æ®ä¼ é€’çš„å‡½æ•° func ä¾ä¾æ˜ å°„æˆæ–°å€¼ func(x)ã€‚ 123456&gt;&gt;&gt; def f(x):... return x * x...&gt;&gt;&gt; r = map(f, [1, 2, 3, 4, 5, 6, 7, 8, 9])&gt;&gt;&gt; list(r)[1, 4, 9, 16, 25, 36, 49, 64, 81 r æ˜¯ä¸€ä¸ªiterator æƒ°æ€§åºåˆ— è€Œéåˆ—è¡¨ï¼Œéœ€è¦ list() è½¬æ¢ä¸ºåˆ—è¡¨ï¼Œå½“ç„¶ä¹Ÿå¯ç”¨ next() ã€for å¾ªç¯è¿­ä»£æ‰“å° äº‹å®ä¸Šï¼Œç¬¬äºŒä¸ªå‚æ•°å¹¶ä¸æ­¢å¯ä»¥æ˜¯åˆ—è¡¨ï¼Œè¿˜å¯ä»¥æ˜¯å…¶å®ƒå¯è¿­ä»£å¯¹è±¡é›†åˆï¼Œæ¯”å¦‚ strã€‚ åˆ©ç”¨ map å°†å­—ç¬¦ä¸² â€™123456â€˜ è½¬æ¢æˆæ•°å­—åˆ—è¡¨é›†åˆ [1, 2, 3, 4, 5, 6] ã€‚ 1234567&gt;&gt;&gt; def char2num(s):... digits = &#123;&#x27;0&#x27;:0, &#x27;1&#x27;:1, &#x27;2&#x27;:2, &#x27;3&#x27;:3, &#x27;4&#x27;:4, &#x27;5&#x27;:5, &#x27;6&#x27;:6, &#x27;7&#x27;:7, &#x27;8&#x27;:8, &#x27;9&#x27;:9&#125;&gt;&gt;&gt; return digits[s]&gt;&gt;&gt; r = map(char2num,&#x27;123456&#x27;)&gt;&gt;&gt; list(r);[1, 2, 3, 4, 5, 6] å› ä¸º str ä¹Ÿæ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œåœ¨map å‡½æ•°è¿­ä»£ä¸­ä¸­ä¼šä¾æ¬¡æŠŠ str æ¯ä¸ªå­—ç¬¦å½“åšä¸€æ¬¡è¿­ä»£å…ƒç´ ã€‚ char2num å‡½æ•°å¦‚æœè¿”å›çš„æ˜¯ return s ï¼Œé‚£ä¹ˆæœ€åç»“æœæ˜¯è¿”å›ï¼š['1', '2', '3', '4', '5', '6'] ã€‚ ç”±äºå®é™…ä¸Š char2num å‡½æ•°æ˜¯æ˜ å°„è¿”å›æ•°å­—å­—ç¬¦å¯¹åº”æ•°å­—ï¼Œæ‰€ä»¥æœ€åç»“æœæ˜¯ï¼š[1, 2, 3, 4, 5, 6] ã€‚ é€å‡ï¼šreduce æŠŠåºåˆ—[1, 3, 5, 7, 9]å˜æ¢æˆæ•´æ•°13579ã€‚ 123456&gt;&gt;&gt; from functools import reduce&gt;&gt;&gt; def fn(x, y):... return x * 10 + y...&gt;&gt;&gt; reduce(fn, [1, 3, 5, 7, 9])13579 ç»“åˆä¸Šè¿°ä¸¤ä¾‹ï¼Œä¾¿å¯ä»¥å°† å­—ç¬¦ä¸² è½¬æ¢ä¸ºå¯¹åº” æ•°å­—ã€‚ 12345678910&gt;&gt;&gt; from functools import reduce&gt;&gt;&gt; def fn(x, y):... return x * 10 + y...&gt;&gt;&gt; def char2num(s):... digits = &#123;&#x27;0&#x27;:0, &#x27;1&#x27;:1, &#x27;2&#x27;:2, &#x27;3&#x27;:3, &#x27;4&#x27;:4, &#x27;5&#x27;:5, &#x27;6&#x27;:6, &#x27;7&#x27;:7, &#x27;8&#x27;:8, &#x27;9&#x27;:9&#125;... return digits[s]...&gt;&gt;&gt; reduce(fn, map(char2num, &#x27;13579&#x27;)) # map è¿”å›çš„æ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡13579 è¿‡æ»¤ï¼šfilter filter æŠŠä¼ å…¥çš„å‡½æ•°ä½œç”¨äºæ¯ä¸ªå…ƒç´ ï¼Œè¿”å›å€¼æ˜¯ture è¿‡æ»¤ï¼Œfalse ä¿ç•™ã€‚ åˆ é™¤å­—ç¬¦ä¸²ä¸­æ‰€æœ‰æ•°å­—ã€‚ 12345&gt;&gt;&gt; def isnum(x):... return 1 - (ord(x) &gt;= 48 and ord(x) &lt;= 57);&gt;&gt;&gt; r = filter(isnum, &#x27;A1B2C3&#x27;);&gt;&gt;&gt; list(r);[&#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;] âš ï¸ python bool è¿ç®—å¸¸è§æ“ä½œè¯¯è§£ï¼ python ä¸­ &amp; | æ˜¯ä½è¿ç®—ï¼Œéä½è¿ç®—åªèƒ½ç”¨ and ã€or æ›¿æ¢ python ä¸­å–å !b éæ³•ï¼Œåº”è¯¥ç”¨ 1-b æ¥è¾¾åˆ°å–åæ•ˆæœ æ’åºï¼šsorted sorted(collection,key,reverse) å‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°ï¼š collection ï¼š å¯è¿­ä»£é›†åˆæ•°æ®ç±»å‹éƒ½å¯ keyï¼šå‡½æ•°å˜é‡ï¼ŒæŒ‡å®šé›†åˆå…ƒç´ è¿›è¡Œæ˜ å°„ï¼Œæ¯”å¦‚éƒ½å–ç»å¯¹å€¼ç­‰ï¼Œä½†åªä¼šæ”¹å˜æ’åºç»“æœä¸ä¼šæ”¹å˜é›†åˆå…ƒç´  reverse ï¼šæŒ‡å®šæ˜¯å¦åè½¬ è¿”å›å€¼ï¼šæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼ˆä¸åŒå‰é«˜é˜¶å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª genrator å¯¹è±¡ï¼‰ã€‚ ç»™æŒ‡å®šå­—ç¬¦åˆ—è¡¨ ['bob', 'about', 'Zoo', 'Credit'] æ’åºã€‚ pythonä¼šè‡ªåŠ¨æŒ‰é¦–å­—æ¯ ASCII å€¼ç»™å­—ç¬¦ä¸²æ•°ç»„æ’åºï¼Œä¸ç”¨ç‰¹å®šæŒ‡å®šè§„åˆ™ã€‚ 12&gt;&gt;&gt; sorted([&#x27;bob&#x27;, &#x27;about&#x27;, &#x27;Zoo&#x27;, &#x27;Credit&#x27;]);[&#x27;Credit&#x27;, &#x27;Zoo&#x27;, &#x27;about&#x27;, &#x27;bob&#x27;] æ¥ä¸Šï¼šå°†å­—ç¬¦ä¸²å…¨éƒ¨å˜ä¸ºå°å†™ï¼ŒåŒæ—¶æŒ‰é™åºæ’åºã€‚ 12&gt;&gt;&gt; sorted([&#x27;bob&#x27;, &#x27;about&#x27;, &#x27;Zoo&#x27;, &#x27;Credit&#x27;],key=str.lower,reverse=True);[&#x27;Zoo&#x27;, &#x27;Credit&#x27;, &#x27;bob&#x27;, &#x27;about&#x27;] 3.2 è£…é¥°å™¨ æ˜æœˆè£…é¥°äº†æˆ‘çš„çª—ï¼Œæˆ‘è£…é¥°äº†è°çš„æ¢¦ï¼Ÿ ä»€ä¹ˆæ˜¯è£…é¥°å™¨ï¼Ÿ åœ¨ä¸ä¿®æ”¹å‡½æ•°çš„å‰æä¸‹ï¼Œåœ¨ä»£ç è¿è¡ŒæœŸé—´åŠ¨æ€ç»™å‡½æ•°å¢åŠ åŠŸèƒ½ï¼Œç§°ä¹‹ä¸ºè£…é¥°å™¨ï¼ˆDecoratorï¼‰ã€‚ æ¯”å¦‚ï¼Œç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•° now ï¼Œå¸Œæœ›æ¯æ¬¡è°ƒç”¨å®ƒæ—¶éƒ½èƒ½æ‰“å°è°ƒç”¨ä¿¡æ¯ï¼Œä½†åˆä¸æ”¹åŠ¨å‡½æ•°ï¼š 12def now(): print(&#x27;2019-9-7&#x27;) è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªè£…é¥°å™¨å‡½æ•° logï¼š 12345def log(func): def wrapper(*args, **kw): print(&quot;è°ƒç”¨&quot; + func.__name__) return func(*args, **kw) # funcæ˜¯nowçš„å½¢å‚ï¼Œä½†nowæ²¡æœ‰å‚æ•°å•Šï¼Œè¿™é‡Œå¯ä»¥ä¼ ä»»æ„å‚æ•°ï¼Ÿ return wrapper è£…é¥°å™¨æœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå†…éƒ¨ä¹Ÿè¿”å›äº†ä¸€ä¸ªå‡½æ•° â€¦ â€¦ â€¦ 3.3 åå‡½æ•° åå‡½æ•°æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå¯ç”¨æ¥å›ºå®šå‡½æ•°æŸä¸ªå‚æ•°ï¼ˆè®¾ç½®é»˜è®¤å€¼ï¼‰ã€‚å…¶è°ƒç”¨æ–¹å¼ï¼š functools.partial(func,parameter=value): funcï¼Œæ˜¯è¦å›ºå®šçš„å‡½æ•°ï¼›parameter=value æ˜¯è¦å›ºå®šå‡½æ•°å‚æ•°åŠå€¼ã€‚ å›ºå®š int å‡½æ•°ç¬¬äºŒä¸ªå‚æ•°å€¼ä¸º 2 ï¼Œè¿”å›å‡½æ•° int2 ä½¿å¾—å¯é»˜è®¤è¿›è¡Œ äºŒè¿›åˆ¶ --&gt; åè¿›åˆ¶ è½¬æ¢ã€‚ 1234&gt;&gt;&gt; import functools&gt;&gt;&gt; int2 = functools.partial(int, base=2)&gt;&gt;&gt; int2(&#x27;1000000&#x27;)64 3.3.1 å…³äºåå‡½æ•°å‚æ•° å®é™…ä¸Šåå‡½æ•°å‚æ•°æ˜¯ï¼šfunctools.partial(func,*args,**kw)ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸‹é¢äºŒè€…æ˜¯ç­‰ä»·çš„ï¼š 1int2(&#x27;10010&#x27;) 12kw = &#123; &#x27;base&#x27;: 2 &#125;int(&#x27;10010&#x27;, **kw) æ²¡å¤ªæ˜ç™½ã€‚ å½“ä¼ å…¥ï¼š 1max2 = functools.partial(max, 10) å®é™…ä¸Šä¼šæŠŠ10ä½œä¸º*argsçš„ä¸€éƒ¨åˆ†è‡ªåŠ¨åŠ åˆ°å·¦è¾¹ï¼Œä¹Ÿå°±æ˜¯ä¸‹é¢äºŒè€…æ˜¯ç­‰ä»·çš„ï¼š 1max2(5, 6, 7) 12args = (10, 5, 6, 7)max(*args) ç¬¬å››ç« ï¼šé¢å‘å¯¹è±¡ç¼–ç¨‹ 4.1 python é¢å¯¹å¯¹è±¡å¿«é€Ÿå…¥é—¨ å®šä¹‰ä¸€ä¸ªç±»ï¼Œè¦æ±‚æ¯æ¬¡åˆ›å»ºå®ä¾‹æ—¶ç±»å±æ€§ count è‡ªåŠ¨åŠ 1ï¼ŒåŒæ—¶å¯æ‰“å°æˆç»© 123456789101112131415class Student: count = 0 def __init__(self, name, score): Student.count += 1 self.name = name self.score = score def print_score(self): print(&#x27;%s: %s&#x27; % (self.name, self.score)) if __name__ == &#x27;__main__&#x27;: stu = Student(&#x27;hwh&#x27;, 99) print(stu.count) # è¾“å‡ºï¼š1 self ï¼šåœ¨ç±»ä¸­å®šä¹‰çš„å‡½æ•°å¿…é¡»è¦å¸¦æœ‰self ï¼Œå®ƒæŒ‡å‘ç±»åˆ›å»ºçš„å®ä¾‹å¯¹è±¡ã€‚ _init_ : _init_ æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°ç”¨äºåˆ›å»ºå®ä¾‹æ—¶è¿›è¡Œåˆå§‹åŒ–ã€‚ ç±»å±æ€§ count &amp; å®ä¾‹å±æ€§ nameã€scoreï¼šcountæ˜¯ç±»å±æ€§å®ƒä¸ºæ‰€æœ‰åˆ›å»ºçš„ç±»å®ä¾‹å…±äº« ï¼›nameã€score æ˜¯å®ä¾‹å±æ€§ï¼Œåœ¨åˆ›å»ºå®ä¾‹çš„æ—¶å€™ä¼šæ ¹æ®ä¼ å…¥çš„å‚æ•°åˆå§‹åŒ–ã€‚ 4.2 é¢å¯¹å¯¹è±¡è¿›é˜¶ 4.2.1 è®¿é—®é™åˆ¶ åœ¨å‰é¢æˆ‘ä»¬å®šä¹‰å®ä¾‹å±æ€§ï¼Œç›´æ¥ç”¨ self.å±æ€§å ç›´æ¥å°±å¯ä»¥ç»‘å®šä¸€ä¸ªå®ä¾‹å±æ€§ï¼Œåœ¨å¤–éƒ¨å¯ä»¥ è¯»å–ã€ä¿®æ”¹ã€‚ ä½†æ˜¯å¦‚æœæˆ‘ä»¬ä¸å¸Œæœ›è¿›è¡Œä¿®æ”¹å‘¢ï¼Ÿ åœ¨å±æ€§åå‰åŠ ä¸Š __ å¯å˜ä¸º ç§æœ‰å˜é‡ï¼Œå³ self.__å±æ€§å å³å¯ï¼Œè¿™æ ·å¤–éƒ¨ä¸èƒ½è®¿é—®ã€ä¸èƒ½ä¿®æ”¹ ã€‚ 123456789101112131415161718class Student(object): def __init__(self, name, score): self.name = name self.__score = score def get_score(self): return self.__score def set_gender(self, score): if type(score) != str: print(&quot;error!&quot;) return -1 self.__score = score if __name__ == &#x27;__main__&#x27;: stu = Student(&#x27;hwh&#x27;, 99) # print(stu.__score) # å‡ºé”™ï¼Œä¸èƒ½è®¿é—® type æ–¹æ³•å¯ä»¥è·å–ç±»å‹å±æ€§è¿›è¡Œåˆ¤æ–­ï¼Œç±»ä¼¼çš„è¿˜æœ‰ instance æ–¹æ³•ã€‚instance ä¸ä½†å¯ä»¥åˆ¤æ–­æ‰€æœ‰type å¯åˆ¤æ–­çš„ç±»å‹ï¼Œè¿˜å¯ä»¥æ–¹ä¾¿çš„åˆ¤æ–­ ç±»å‹ã€å®ä¾‹ ä¹‹é—´å…³ç³»ã€‚ å¦‚æœéœ€è¦å¤–éƒ¨éœ€è¦è®¿é—®ï¼Œå¯å®šä¹‰ getã€set æ–¹æ³•ã€‚ æ³¨æ„ï¼è¿™ä¸æ˜¯ä¿®æ”¹ç§æœ‰å˜é‡ åœ¨å‰æˆ‘ä»¬å°è¯•æ‰“å°å‡ºç§æœ‰å˜é‡ __score å‡ºé”™ï¼Œä½†æ˜¯æˆ‘ä»¬å°è¯•ä¿®æ”¹ä¼¼ä¹æˆåŠŸäº†ï¼Ÿ 12stu.__score = 88print(stu.__score) # è¾“å‡ºï¼š88 å…¶å®ä¸ç„¶ï¼Œè¿™å’ŒStudent ç±»å†…éƒ¨çš„ __score ä¸æ˜¯åŒä¸€ä¸ªå˜é‡ï¼Œæˆ‘ä»¬å°è¯•åˆ©ç”¨ get_score æ‰“å°å‡ºå†…éƒ¨ç§æœ‰å˜é‡ __score : 1print(stu.get_gender()) # è¾“å‡ºï¼š99 ç¬¬äº”ç« ï¼šIOç¼–ç¨‹ 5.1 å¢ open(filePath,type) ä¸ä»…å¯ç”¨äºè¯»å†™æ–‡ä»¶ï¼Œè¿˜å¯åœ¨æ²¡æœ‰æ–‡ä»¶æ—¶åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ã€‚ mkdir(filePath) å¯åˆ›å»ºä¸€ä¸ªç›®å½•ã€‚ 12345# åˆ›å»ºç›®å½• os.makedirs(&#x27;myDir&#x27;)# åˆ›å»ºæ–‡ä»¶with open(r&#x27;myDir\\myTxt&#x27;, &#x27;w&#x27;) as f: f.write(&#x27;hello world! \\n i \\n am \\n a \\n coder&#x27;) with open as ... æ˜¯ python æä¾›çš„æ–‡ä»¶è¯»å†™æ“ä½œç®€å•å†™æ³•ï¼Œå®ƒç­‰ä»·äºï¼š 123456try: f = open(r&#x27;myDir\\myTxt&#x27;, &#x27;w&#x27;) f.write(&#x27;hello world! \\n i \\n am \\n a \\n coder&#x27;)finally: if f: f.close() windows ç›®å½•è·¯å¾„ä½¿ç”¨åæ–œæ \\ï¼Œä¸ºäº†é˜²æ­¢å’Œæ–‡æœ¬å…¶å®ƒå­—æ¯è½¬ä¹‰ï¼Œå»ºè®®å‰é¢ç”¨ r æˆ–è€… åŒåæ–œæ† \\\\ 5.1.1 æ‰“å¼€æ–‡ä»¶æ¨¡å¼ æ¨¡å¼ r r+ w w+ a a+ è¯» + + + + å†™ + + + + + åˆ›å»º + + + + è¦†ç›– + + æŒ‡é’ˆåœ¨å¼€å§‹ + + + + æŒ‡é’ˆåœ¨ç»“å°¾ + + 5.2 åˆ  1234# åˆ é™¤ç›®å½• os.rmdir(&#x27;myDir&#x27;)# åˆ é™¤æ–‡ä»¶os.remove(&#x27;test.py&#x27;) 5.3 æŸ¥ï¼šè¯»æ–‡ä»¶ç­‰ 5.3.1 æ–‡ä»¶è¯» æ–¹æ³• æè¿° read(filePath) ä¸€æ¬¡è¯»å–æ‰€æœ‰å†…å®¹ readline(filePath) æ¯æ¬¡è¯»å–ä¸€è¡Œ readlines(filePath) ä¸€æ¬¡è¯»å–æ‰€æœ‰è¡Œï¼Œè¿”å›åˆ—è¡¨ï¼Œæ¯ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€è¡Œå†…å®¹ ç®€å•æµ‹è¯•è¯»å–æ–‡æœ¬ã€‚ 123with open(r&#x27;myDir\\myTxt&#x27;, &#x27;r&#x27;) as f: for line in f.readlines(): print(line.strip()) # å»é™¤\\nï¼Œè¦ä¸ç„¶ä¼šå¤šæ‰“å°æ¢è¡Œ æ‰“å°å‰ä¸¤è¡Œã€‚ 123with open(r&#x27;myDir\\myTxt&#x27;, &#x27;r&#x27;) as f: for i in range(0,2): print(f.readline().strip()) # å»é™¤\\nï¼Œè¦ä¸ç„¶ä¼šå¤šæ‰“å°æ¢è¡Œ äºŒè¿›åˆ¶æ–‡ä»¶ &amp; å…¶å®ƒç¼–ç  å¦‚æœè¯»å–çš„æ–‡ä»¶æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ¯”å¦‚å›¾ç‰‡ã€è§†é¢‘ ç­‰è¦ç”¨ rb æ¨¡å¼æ‰“å¼€æ–‡ä»¶ï¼š è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ 123&gt;&gt;&gt; f = open(&#x27;/Users/michael/test.jpg&#x27;, &#x27;rb&#x27;)&gt;&gt;&gt; f.read()b&#x27;\\xff\\xd8\\xff\\xe1\\x00\\x18Exif\\x00\\x00...&#x27; # åå…­è¿›åˆ¶è¡¨ç¤ºçš„å­—èŠ‚ å¦‚æœè¯»å–æ˜¯éUTF-8ç¼–ç æ–‡ä»¶ï¼Œè¦æŒ‡å®šæŒ‰ä»€ä¹ˆç¼–ç æ ¼å¼è¯»å–ï¼š è¯»å–äºŒè¿›åˆ¶ä¸”ç¼–ç ä¸ºgbk æ–‡ä»¶ã€‚ 123&gt;&gt;&gt; f = open(&#x27;/Users/michael/gbk.txt&#x27;, &#x27;r&#x27;, encoding=&#x27;gbk&#x27;)&gt;&gt;&gt; f.read()&#x27;æµ‹è¯•&#x27; 5.3.2 æŸ¥çœ‹å…¶å®ƒä¿¡æ¯ 123456# è·å–å½“å‰æ–‡ä»¶æ“ä½œè·¯å¾„os.getcwd()# è·å–ç›®å½•åˆ—è¡¨ï¼ˆé‡è¦ï¼‰# è¯¥æ–¹æ³•è·å–çš„ä¸åŒ…æ‹¬æ–‡ä»¶è·¯å¾„ï¼Œä»…æ–‡ä»¶åos.listdir(&quot;./&quot;) 5.4 æ”¹ï¼šå†™æ–‡ä»¶ç­‰ 5.4.1 å†™æ–‡ä»¶ å†™æ–‡ä»¶ä¹Ÿæ˜¯è°ƒç”¨ open() æ–¹æ³•ï¼Œä¼ å…¥æ ‡è¯†ç¬¦ 'w'ã€â€™wbâ€˜ å†™æ–‡æœ¬æˆ–è€…äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ ä¹Ÿæ˜¯é‡‡ç”¨ç±»ä¼¼è¯»æ–‡ä»¶ python æä¾›çš„ä¸€ç§ç®€æ˜“å†™æ³•ï¼Œä¹Ÿå¯åŒè¯»æ–‡ä»¶ä¼ å…¥ encoding å‚æ•°è½¬æ¢ç¼–ç ã€‚ 12with open(&#x27;/Users/michael/test.txt&#x27;, &#x27;w&#x27;) as f: f.write(&#x27;Hello, world!&#x27;) 5.4.2 æ–‡ä»¶é‡å‘½åç­‰ 12# å¯¹æ–‡ä»¶é‡å‘½å&gt;&gt;&gt; os.rename(&#x27;test.txt&#x27;, &#x27;test.py&#x27;) 5.5 åºåˆ—åŒ–ä¸ååºåˆ—åŒ– åºåˆ—åŒ–ï¼šå³æŒ‡å¯ä»¥å°†æŠŠæŒ‡å®šç±»å‹å¯¹è±¡ä» å†…å­˜ â€”&gt; ç£ç›˜ ï¼› ååºåˆ—åŒ–ï¼šåˆ™å¯å°†ä¿å­˜åœ¨ç£ç›˜çš„å¯¹è±¡ä» ç£ç›˜ â€”&gt; å†…å­˜ ã€‚ 5.5.1 pickle python æä¾›äº† pickle æ¨¡å—æ¥è¿›è¡Œä»»æ„å¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œä½†å®ƒåºåˆ—åŒ–åªèƒ½ç”¨äº pythonã€‚ å¸¸ç”¨åºåˆ—åŒ–ã€ååºåˆ—åŒ–æ–¹æ³•å¦‚ä¸‹ï¼š æ–¹æ³• æè¿° pickle.dump(obj, fp, [,protocol]) å°†ä»»æ„å¯¹è±¡åºåˆ—åŒ– pickle.load(fp) å°†ä¿å­˜åœ¨ç£ç›˜çš„byteså¯¹è±¡ååºåˆ—åŒ– pickle.dumps(obj, [,protocol]) å°†obj å¯¹è±¡åºåˆ—åŒ–ä¸º string å½¢å¼ï¼Œè€Œä¸æ˜¯å­˜å…¥æ–‡ä»¶ä¸­ã€‚ pickle.loads(string) ä»string ä¸­è¯»å‡ºåºåˆ—åŒ–å‰çš„ objå¯¹è±¡ ä»¥ä¸‹åšä¸€ä¸ªç®€å•å®ä¾‹å°† dict å­—å…¸ç±»å‹åºåˆ—åŒ–ä¸ååºåˆ—åŒ–è¿›è¡Œioè¯»å†™ã€‚ 1234567891011# åºåˆ—åŒ–ï¼šä¿å­˜åœ¨ç£ç›˜ä¸­d = &#123;&#x27;name&#x27;: &#x27;hwh&#x27;, &#x27;age&#x27;: &#x27;23&#x27;&#125;# æ³¨æ„ï¼šåˆ›å»ºä¸€ä¸ªå†™äºŒè¿›åˆ¶æ–‡ä»¶fileå¯¹è±¡with open(&#x27;test.txt&#x27;, &#x27;wb&#x27;) as f: pickle.dump(d,f)# ååºåˆ—åŒ–ï¼šä»ç£ç›˜ä¸­è¯»å–# æ³¨æ„ï¼šåˆ›å»ºä¸€ä¸ªè¯»äºŒè¿›åˆ¶æ–‡ä»¶fileå¯¹è±¡with open(&#x27;test.txt&#x27;, &#x27;rb&#x27;) as f: dic = pickle.load(f)print(dic) # è¾“å‡ºï¼š&#123;&#x27;name&#x27;: &#x27;hwh&#x27;, &#x27;age&#x27;: &#x27;23&#x27;&#125; ä½†æ˜¯ pickle æ¨¡å—åºåˆ—åŒ–åªç”¨äº python ï¼Œå¦‚ä½•åœ¨ä¸åŒç¼–ç¨‹è¯­è¨€ä¼ é€’å¯¹è±¡ï¼Ÿ æˆ‘ä»¬éœ€è¦ä¸€ç§æ ‡å‡†æ ¼å¼ï¼Œæ¯”å¦‚ XML ã€JSON ï¼Œjson æ˜¯ä¸€ç§æ›´å¥½çš„é€‰æ‹©ã€‚ 5.5.2 JSON å› ä¸ºè¦åœ¨ä¸åŒè¯­è¨€ä¸­ä¼ é€’å¯¹è±¡ï¼Œé¦–å…ˆè¦æœ‰ä¸€ç§æŠŠpythonå¯¹è±¡ â€”&gt; é€šç”¨è¯­(json) ï¼Œå®ƒä»¬ç›´æ¥å¯¹åº”å…³ç³»ï¼š JSON ç±»å‹ Pythonç±»å‹ {} dict [] list â€œstringâ€ str 1234.56 int æˆ– float true/false True/False null None ç±»ä¼¼ pickle æ¨¡å—ï¼Œjson æ¨¡å—æä¾›äº†åºåˆ—åŒ–ï¼Œååºåˆ—åŒ–æ–¹æ³•ï¼š æ–¹æ³• æè¿° json.dump(obj, fpâ€¦) å°†ä»»æ„å¯¹è±¡åºåˆ—åŒ– json.load(fp) å°†ä¿å­˜åœ¨ç£ç›˜çš„byteså¯¹è±¡ååºåˆ—åŒ– json.dumps(obj) å°†obj å¯¹è±¡åºåˆ—åŒ–ä¸º string å½¢å¼ï¼Œè€Œä¸æ˜¯å­˜å…¥æ–‡ä»¶ä¸­ã€‚ json.loads(string) ä»string ä¸­è¯»å‡ºåºåˆ—åŒ–å‰çš„ objå¯¹è±¡ æ”¹å†™ä¸Šé¢ pickle æ¨¡å—è¯»å†™ã€‚ 1234567891011# åºåˆ—åŒ–ï¼šä¿å­˜åœ¨ç£ç›˜ä¸­d = &#123;&#x27;name&#x27;: &#x27;hwh&#x27;, &#x27;age&#x27;: &#x27;23&#x27;&#125;# æ³¨æ„ï¼šå’Œpickleæ¨¡å—ä¸åŒè¿™é‡Œæ˜¯ wï¼Œä¸æ˜¯äºŒè¿›åˆ¶with open(&#x27;test.json&#x27;, &#x27;w&#x27;) as f: json.dump(d,f)# ååºåˆ—åŒ–ï¼šä»ç£ç›˜ä¸­è¯»å–# æ³¨æ„ï¼šè¿™é‡Œæ˜¯rwith open(&#x27;test.json&#x27;, &#x27;r&#x27;) as f: dic = json.load(f)print(dic) # è¾“å‡ºï¼š&#123;&#x27;name&#x27;: &#x27;hwh&#x27;, &#x27;age&#x27;: &#x27;23&#x27;&#125; ä¸è¿›è¡Œioè¯»å†™ï¼Œdumps() åºåˆ—åŒ–ä¸º stringï¼Œç„¶å loads() ååºåˆ—åŒ–è¯»å–ã€‚ 12345678# åºåˆ—åŒ–d = &#123;&#x27;name&#x27;: &#x27;hwh&#x27;, &#x27;age&#x27;: &#x27;23&#x27;&#125;str = json.dumps(d)# ååºåˆ—åŒ–# æ³¨æ„ï¼šè¿™é‡Œæ˜¯rdic = json.loads(str)print(dic) # è¾“å‡ºï¼š&#123;&#x27;name&#x27;: &#x27;hwh&#x27;, &#x27;age&#x27;: &#x27;23&#x27;&#125; è‡ªå®šä¹‰åºåˆ—åŒ–è§„åˆ™ åœ¨ json ä¸­ç”¨ &#123;&#125; è¡¨ç¤ºå¯¹è±¡ï¼Œå¯¹åº” python ä¸­ dict ã€‚ä¸è¿‡æˆ‘ä»¬ä¸€èˆ¬ç”¨ class è¡¨ç¤ºå¯¹è±¡ï¼Œä½†æ˜¯ class ç±»å¯¹è±¡ä¸èƒ½ç›´æ¥åºåˆ—åŒ–ï¼Œéœ€è¦è‡ªå·±å®šä¹‰åºåˆ—åŒ–è§„åˆ™ã€‚ 1234567891011121314class Student(object): def __init__(self, name, age, score): self.name = name self.age = age self.score = scoredef student2dict(std): return &#123;&#x27;name&#x27;:std.name, &#x27;age&#x27;:std.age, &#x27;score&#x27;:std.score&#125;s = Student(&#x27;hwh&#x27;, 20, 99)# è¾“å‡ºï¼š&#123;&quot;name&quot;: &quot;hwh&quot;, &quot;age&quot;: 20, &quot;score&quot;: 99&#125;print(json.dumps(s, default=student2dict)) å› ä¸ºé€šå¸¸classçš„å®ä¾‹éƒ½æœ‰ä¸€ä¸ª__dict__å±æ€§ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªdictï¼Œç”¨æ¥å­˜å‚¨å®ä¾‹å˜é‡ã€‚ æ‰€ä»¥è¿˜å¯ç”¨ lambda è¡¨è¾¾å¼ç›´æ¥ç®€å†™ï¼š 1print(json.dumps(s, default=lambda obj: obj.__dict__))"},{"title":"å‰ç«¯åŸºç¡€ï¼ˆäºŒï¼‰CSSåŸºç¡€ç¬”è®°","date":"2022-01-02T11:54:25.535Z","updated":"2021-12-03T03:41:02.906Z","comments":true,"path":"NO_post/å‰ç«¯åŸºç¡€ï¼ˆäºŒï¼‰CSSç¬”è®°.html","permalink":"https://hwh.zone/NO_post/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%EF%BC%88%E4%BA%8C%EF%BC%89CSS%E7%AC%94%E8%AE%B0.html","excerpt":"","text":"ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºæœ¬æ ·å¼å±æ€§ æ–‡æœ¬æ ·å¼ å­—ä½“ï¼šfont-family æŒ‡å®šè®¾ç½®å…ƒç´ çš„å­—ä½“ï¼š 1234p&#123; font-family: &quot;Times New Roman&quot;, Times, serif;&#125; é€—å·åˆ†éš”è¡¨ç¤ºä¸ºå¤‡é€‰å­—ä½“ï¼Œå½“ä¸æµè§ˆå™¨ä¸æ”¯æŒ â€œTimes New Romanâ€ åä¼šä¾æ¬¡é€‰æ‹© Timesã€serif å­—ä½“ã€‚ å¦‚æœå­—ä½“ä¸æ­¢ä¸ºä¸€ä¸ªå•è¯ï¼Œè¦ç”¨ â€œ â€ åŒ…å›´ï¼Œæ¯”å¦‚ â€œTimes New Romanâ€ å¤§å°ï¼šfont-size font-size å±æ€§ç”¨äºè®¾ç½®å­—ä½“çš„å¤§å°ï¼Œå¸¸ç”¨è®¾ç½®å­—ä½“æ–¹å¼æœ‰ä¸‰ç§ï¼š å…³é”®å­—ï¼šsmall &lt; medium &lt; large &lt; xlarge æ•°å€¼ï¼šåƒç´ å€¼ px ã€ç›¸å¯¹å°ºå¯¸å•ä½ emï¼Œç‰¹åˆ«çš„ï¼š1em = 16px 123456p &#123; font-size: small;// font-size: 16px;// font-size: 1em;&#125; æ–œä½“ï¼šfont-style font-style é€šå¸¸ç”¨äºæŒ‡å®šæ–œä½“æ–‡æœ¬ï¼Œå¸¸ç”¨å±æ€§å€¼ç”¨å…³é”®å­—è®¾ç½®ï¼š å…³é”®å­—ï¼šnormal(æ­£å¸¸æ–‡æœ¬)ï¼Œ italicï¼ˆæ–œä½“ï¼‰ ï¼Œoblique(å€¾æ–œ) å’Œ italic æ•ˆæœç±»ä¼¼ 1234p&#123; font-style: italic;&#125; ç²—ç»†ï¼šfont-weight font-weight æ§åˆ¶æ–‡æœ¬çš„ç²—ç»†ï¼Œå¯ä»¥è®¾ç½®å…³é”®å­—æˆ–è€…æ•°å€¼æ¥æŒ‡å®šï¼š å…³é”®å­—ï¼šnormal (é»˜è®¤)ï¼Œboldï¼Œbolderï¼Œå’Œ lighter æ•°å€¼ï¼š100ï¼ˆç»†ï¼‰â€”&gt; 900ï¼ˆç²—) ï¼Œç‰¹åˆ«çš„ï¼šnormal == 400ï¼Œ700 == bold å¤§å†™ï¼šfont-variant font-variant å±æ€§å¯å°†å­—ä½“è½¬æ¢ â€”&gt; å°å‹å¤§å†™å­—æ¯ ,å¯è®¾å±æ€§æœ‰ï¼š å…³é”®å­—ï¼šnormalã€small-capsï¼ˆå°å‹å¤§å†™ï¼‰ã€inherit ï¼š 123456789101112&lt;html&gt;&lt;head&gt; &lt;style&gt; p.normal &#123; font-variant: normal;&#125; p.small &#123; font-variant: small-caps;&#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;p class=&quot;normal&quot;&gt;è®¾ç½®ä¸ºnormal&lt;/p&gt; &lt;p class=&quot;small&quot;&gt;è®¾ç½®ä¸ºsmall-caps&lt;/p&gt;&lt;/body&gt;&lt;/html&gt; æ‰§è¡Œæ•ˆæœï¼šå¯ä»¥çœ‹åˆ°åŸå°å†™ small-caps è¢«è½¬æ¢ä¸ºå¤§å†™ SMALL-CAPSï¼Œä½†æ˜¯å­—ä½“è¾ƒå° é¢œè‰²ï¼šcolor color å¯ç”¨äºè®¾ç½®æ–‡æœ¬é¢œè‰²ï¼Œé€šå¸¸å¯ç”¨ä»¥ä¸‹ä¸‰ç§æ–¹æ³•è®¾ç½®ï¼š é¢œè‰²å…³é”®å­—ï¼Œå¦‚ï¼šredã€blueã€green åå…­è¿›åˆ¶å€¼ï¼Œå¦‚ï¼š#0000FF(è“è‰²) RGBï¼Œå¦‚ï¼šrgb(255,0,0)(çº¢è‰²) å¯¹é½ï¼štext-align ã€vertical-align text-align ç”¨äºæ°´å¹³å¯¹é½ï¼Œå¯è®¾ç½®å±æ€§ä¸ºï¼šleftã€centerã€rigth ã€‚ vertical-align ç”¨äºå‚ç›´å¯¹é½ï¼Œå¯è®¾å±æ€§ä¸ºï¼š æ–‡å­—åœ¨ è¡¨æ ¼å•å…ƒ å±…ä¸­ã€ä¸Šã€ä¸‹ï¼štopã€middleã€bottom ï¼Œä¸å¯ç”¨æ•°å€¼ å­—ä½“èƒ½è¾¾åˆ° ä¸æ”¹å˜ã€ä¸‹æ ‡ã€ä¸Šæ ‡ ï¼šbaselineã€subã€super ï¼Œå¯ç”¨æ•°å€¼ ä½¿å¾—æ–‡å­—åœ¨è¡¨æ ¼å±…ä¸­ã€ä¸Šã€ä¸‹ã€‚ 123456789101112131415161718&lt;html&gt;&lt;head&gt; &lt;style&gt; td.top &#123; vertical-align: top;&#125; td.middle &#123; vertical-align: middle;&#125; td.bottom &#123; vertical-align: bottom;&#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;table border=&quot;1&quot; cellpadding=&quot;2&quot; cellspacing=&quot;0&quot; style=&quot;height: 150px;&quot;&gt; &lt;tr&gt; &lt;td class=&quot;top&quot;&gt;Top&lt;/td&gt; &lt;td class=&quot;middle&quot;&gt;Middle&lt;/td&gt; &lt;td class=&quot;bottom&quot;&gt;Bottom&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt;&lt;/body&gt;&lt;/html&gt; âš ï¸ ä½†æ˜¯ç‰¹åˆ«çš„ï¼Œå¦‚æœ æ–‡å­—è¦åœ¨divåŒºåŸŸåˆ°å‚ç›´å±…ä¸­æ•ˆæœ ï¼Œå¿…é¡»ï¼š å¤–éƒ¨divæ ‡ç­¾ display å±æ€§è®¾ç½®ä¸ºå†…è”è¡¨æ ¼ï¼šdisplay: inline-table; æ–‡å­—ç”¨ å†…éƒ¨divæ ‡ç­¾ åŒ…å›´ï¼ŒåŒæ—¶å°†è¯¥å†…éƒ¨divæ ‡ç­¾ displayå±æ€§è®¾ç½®ä¸ºè¡¨æ ¼å•å…ƒï¼šdisplay: table-cell; html ä»£ç ï¼š 123&lt;div class=&quot;div&quot;&gt; &lt;div class=&quot;paragraph&quot;&gt; w3cschool &lt;/div&gt;&lt;/div&gt; css ä»£ç ï¼š 1234567891011.main &#123; height: 150px; width: 400px; background-color: LightSkyBlue; display: inline-table;&#125;.paragraph &#123; display: table-cell; vertical-align: middle;&#125; æœ€ç»ˆå¯è¾¾åˆ°çš„æ•ˆæœï¼š ä½¿å¾—æŸäº›æ–‡å­—åœ¨ä¸€æ®µæ–‡å­—èµ·åˆ°ä¸‹æ ‡ã€ä¸Šæ ‡æ•ˆæœã€‚ï¼ˆæ³¨ï¼šä¹Ÿå¯ç›´æ¥ä½¿ç”¨ &lt;sub&gt;ã€ &lt;sup&gt; æ ‡ç­¾è¾¾åˆ°æ•ˆæœï¼‰ 12345678910111213141516&lt;html&gt;&lt;head&gt; &lt;style&gt; span.baseline &#123; vertical-align: baseline;&#125; span.sub &#123; vertical-align: sub; &#125; span.super &#123; vertical-align: super;&#125; span.pixel &#123; vertical-align: -10px;&#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;p&gt;This is a &lt;span class=&quot;baseline&quot;&gt;w3cschool&lt;/span&gt; example.&lt;/p&gt; &lt;p&gt;This is a &lt;span class=&quot;sub&quot;&gt;w3cschool&lt;/span&gt; example.&lt;/p&gt; &lt;p&gt;This is a &lt;span class=&quot;super&quot;&gt;w3cschool&lt;/span&gt; example.&lt;/p&gt; &lt;p&gt;This is a &lt;span class=&quot;pixel&quot;&gt;w3cschool&lt;/span&gt; example.&lt;/p&gt;&lt;/body&gt;&lt;/html&gt; ä¸‹åˆ’ï¼š text-decoration text-decoration æŒ‡å®šæ–‡æœ¬å¦‚ä½•è£…é¥°ï¼Œå¦‚ï¼šå¢åŠ ä¸‹åˆ’çº¿ã€ä¸Šæ–¹æ°´å¹³çº¿ã€åˆ é™¤çº¿ï¼ˆä¹Ÿå¯ç”¨ &lt;s&gt; æ ‡ç­¾å®ç°ï¼‰ã€‚ å¸¸ç”¨å±æ€§å…³é”®å­—æœ‰ï¼š none ï¼š é»˜è®¤å€¼ï¼Œè¿™å®šä¹‰äº†ä¸€ä¸ªæ­£å¸¸çš„æ–‡æœ¬ inherit ï¼š ä»å…¶çˆ¶å…ƒç´ ç»§æ‰¿æ­¤å±æ€§ overline ï¼šåœ¨æ–‡æœ¬ä¸Šæ–¹ç»˜åˆ¶æ°´å¹³çº¿ underline ï¼š åœ¨æ–‡æœ¬ä¸‹æ–¹ç»˜åˆ¶æ°´å¹³çº¿ line-through ï¼š åœ¨æ–‡æœ¬ä¸­ç»˜åˆ¶æ°´å¹³çº¿ï¼ˆ æ›¿æ¢HTMLæ ‡è®°ï¼‰ æ¯”å¦‚ç»™ä¸‹é¢ä¸€æ®µæ–‡å­—åŠ ä¸Šä¸‹åˆ’çº¿ï¼š 12345678910&lt;html&gt;&lt;head&gt; &lt;style&gt; p.underline &#123; text-decoration: underline; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;p class=&quot;underline&quot;&gt;w3cschool&lt;/p&gt;&lt;/body&gt;&lt;/html&gt; æ•ˆæœå›¾ï¼š ç¼©è¿›ï¼štext-indent text-indent å±æ€§æŒ‡å®šåœ¨æ–‡æœ¬çš„ç¬¬ä¸€è¡Œå¼€å§‹ä¹‹å‰åº”è¯¥ç•™ä¸‹å¤šå°‘æ°´å¹³ç©ºé—´ã€‚ å¸¸ç”¨å±æ€§å€¼ä»¥é•¿åº¦è¡¨ç¤ºï¼Œå…¶å•ä½ä¸ºï¼špxã€emã€ptã€cm ç­‰ã€‚ä¹Ÿå¯ç”¨ %ã€inherit(ç»§æ‰¿çˆ¶å…ƒç´ ç¼©è¿›)ã€‚ âš ï¸ å¯ä½¿ç”¨è´Ÿå€¼ï¼Œæ¯”å¦‚ï¼štext-indent: -40px ã€‚ å¤§å†™ï¼štext-transform text-transform å¯ä»¥ä½¿å¾— æ–‡æœ¬å­—æ¯ å…¨éƒ¨å¤§å†™ã€å°å†™ã€æ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ï¼Œå¯¹åº”å±æ€§å…³é”®å­—ä¸ºï¼š uppercaseï¼šä½¿å¾—é€‰ä¸­æ–‡æœ¬æ‰€æœ‰å­—æ¯éƒ½å¤§å†™ lowercaseï¼šä½¿å¾—é€‰ä¸­æ–‡æœ¬æ‰€æœ‰å­—æ¯éƒ½å°å†™ capitalize ï¼šä½¿å¾—é€‰ä¸­æ–‡æœ¬æ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ 1234567891011121314&lt;html&gt;&lt;head&gt; &lt;style&gt; p.uppercase &#123; text-transform: uppercase;&#125; p.lowercase &#123; text-transform: lowercase;&#125; p.capitalize &#123; text-transform: capitalize;&#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;p class=&quot;uppercase&quot;&gt; transforms all characters to uppercase.&lt;/p&gt;&lt;p class=&quot;lowercase&quot;&gt; transforms all characters to lowercase.&lt;/p&gt;&lt;p class=&quot;capitalize&quot;&gt; transforms the first character in each word to uppercase. &lt;/p&gt;&lt;/body&gt;&lt;/html&gt; è¿è¡Œæ•ˆæœå›¾ï¼š é—´è·ï¼šletter-spacing ã€word-spacing letter-spacing ç”¨äºè®¾ç½®æ–‡æœ¬ä¸­å­—ç¬¦ä¹‹é—´çš„é—´è·ï¼Œå¸¸è®¾å±æ€§æ–¹å¼ï¼š å…³é”®å­—ï¼šnormal(æ­£å¸¸æ–‡æœ¬) ã€inheritï¼ˆç»§æ‰¿çˆ¶å…ƒç´ ï¼‰ æ•°å€¼ï¼špxï¼Œptï¼Œcmï¼Œmm ç­‰æµ‹é‡å•ä½å®šä¹‰å­—ç¬¦é¢å¤–ç©ºé—´ï¼Œè´Ÿå€¼å¯ä»¥å‡å°‘å­—ç¬¦é—´è·ï¼Œæ›´å¯†é›† ã€‚ word-spacing æŒ‡å®šæ–‡æœ¬ä¸­å•è¯ä¹‹é—´çš„ç©ºæ ¼ï¼Œå¸¸è®¾å±æ€§æ–¹å¼ï¼š å…³é”®å­—ï¼šnormal(æ­£å¸¸æ–‡æœ¬) ã€inheritï¼ˆç»§æ‰¿çˆ¶å…ƒç´ ï¼‰ æ•°å€¼ï¼šåŒå‰ ç›’æ¨¡å‹ ç›’æ¨¡å‹ç»“æ„ å±æ€§å·¥ä½œé¡ºåºä¸ºé¡ºæ—¶é’ˆï¼šä¸Š --&gt; å³ --&gt; ä¸‹ --&gt; å·¦ åˆ›å»ºä¸€ä¸ªé¡¶éƒ¨10åƒç´ ï¼Œåº•éƒ¨15åƒç´ ï¼Œå³ä¾§5åƒç´ ï¼Œå·¦ä¾§10åƒç´ çš„ padding ã€‚ 1padding: 10px 5px 15px 10px; ç›’æ¨¡å‹å®½é«˜ é«˜åº¦ = height + ( padding-top + border-top + margin-top)+ (padding-bottom + border-bottom + margin-bottom) å®½åº¦ = width + ( padding-left + border-left + margin-left )+ ( padding-right + border-right + margin-right ) è¯•é—®ï¼šä¸‹é¢ç›’æ¨¡å‹çš„é«˜åº¦ä¸ºå¤šå°‘ï¼Ÿ æŒ‰ç…§å…¬å¼åº”è¯¥æ˜¯ï¼š200 + (15 + 2 + 10 ) + (10 + 2 + 15) = 254px è¾¹æ¡†ï¼šborder border å±æ€§å¯ä»¥è‡ªå®šä¹‰ç›’æ¨¡å‹è¾¹æ¡†ï¼š ç©ºæ ¼åˆ†éš”åˆ†åˆ«è¡¨ç¤ºï¼šå®½åº¦ ã€è¾¹æ¡†æ ·å¼ ã€é¢œè‰² ã€‚ 1p &#123; border: 5px solid green; &#125; border-widthã€border-styleã€border-color border-widthã€border-styleã€border-color å±æ€§å¯åˆ†åˆ«è®¾ç½®å•ç‹¬è®¾ç½®ï¼šå®½åº¦ ã€è¾¹æ¡†æ ·å¼ ã€é¢œè‰² : 123456p&#123; border-style: solid; border-width: 2px; border-color: green;&#125; border-style å±æ€§è®¾ç½®ï¼š å…³é”®å­—ï¼šsolid(å®çº¿)ã€dotted(è™šçº¿)ã€dashed(è™šçº¿)ã€double(åŒç²¾åº¦) ç­‰ âš ï¸ è¿˜å¯ä¸ºä¸åŒçš„è¾¹æŒ‡å®šä¸åŒçš„è¾¹æ¡†ï¼šborder-top-styleï¼Œborder-right-style â€¦ å®½é«˜ï¼šwidthã€height å…ƒç´ çš„å®½é«˜å±æ€§ä¸€èˆ¬è®¾ç½®ï¼š æ•°å€¼ï¼šå¦‚æŒ‡å®šé«˜åº¦ = 100pxï¼Œheight = 100px ç™¾åˆ†æ¯”ï¼šå¦‚æŒ‡å®šå®½åº¦å æ®æ•´ä¸ªå±å¹•å®½ï¼Œwidth = 100% 123456div &#123; border: 5px solid green; width: 100%; height: 90px;&#125; æœ€å¤§ã€æœ€å°é«˜å®½ è¦è®¾ç½®å…ƒç´ çš„æœ€å°å’Œæœ€å¤§é«˜åº¦æˆ–è€…å®½åº¦ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å±æ€§ï¼š min-width ï¼šå…ƒç´ çš„æœ€å°å®½åº¦ min-height ï¼šå…ƒç´ çš„æœ€å°é«˜åº¦ max-width ï¼šå…ƒç´ çš„æœ€å¤§å®½åº¦ max-height ï¼šå…ƒç´ çš„æœ€å¤§é«˜åº¦ èƒŒæ™¯ èƒŒæ™¯è‰²ï¼šbackground-color å‰é¢æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å±æ€§ color è®¾ç½®æ–‡æœ¬é¢œè‰²ï¼›background-color åˆ™å¯ä»¥è®¾ç½®å…ƒç´ æŒ‡å®šèƒŒæ™¯é¢œè‰²ã€‚å¸¸ç”¨å±æ€§å€¼ï¼š å…³é”®å­—ï¼šredã€blue ç­‰ åå…­è¿›åˆ¶ï¼š#fffã€#000ã€#6e6e6e ç­‰ RGBï¼šrgb(255,255,255)ã€rgba(0,0,0,0.5) ï¼ˆrgba å¯ä»¥å®ç°é€æ˜èƒŒæ™¯è‰²ï¼‰ ä¸‹é¢ä¾‹å­æŠŠï¼šbobyã€h1ã€p åˆ†é…äº†ä¸åŒçš„èƒŒæ™¯é¢œè‰²ã€‚ï¼ˆå­—ä½“é¢œè‰²é»˜è®¤é»‘è‰²ï¼‰ 12345678910111213141516171819202122&lt;html&gt; &lt;head&gt; &lt;style type=&quot;text/css&quot;&gt; body &#123; background-color:red; &#125; div &#123; background-color: #00ffff; &#125; p &#123; background-color:rgb(142,185,245); &#125; &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;div&gt;å•Šï¼Œæˆ‘ç»¿äº†ï¼&lt;/div&gt; &lt;p&gt;å•Šï¼Œäººç”Ÿå¥½è“~&lt;/p&gt; &lt;/body&gt;&lt;/html&gt; èƒŒæ™¯å›¾ï¼šbackground-image background-image ç”¨äºè®¾ç½®èƒŒæ™¯å›¾ï¼Œè®¾ç½®å±æ€§å€¼ç”¨ç›¸å¯¹/ç»å¯¹è·¯å¾„æŒ‡å®šï¼š æŒ‡å®šè·¯å¾„ï¼šurl(â€˜ç›¸å¯¹/ç»å¯¹è·¯å¾„â€™) âš ï¸ å¦‚æœè¦æŒ‡å®šå¤šä¸ªå›¾ç‰‡ï¼Œä»¥é€—å·åˆ†éš”ï¼šbackground-image ï¼š url(â€˜1.pngâ€™),url(â€˜2.pngâ€™); ç‰¹åˆ«çš„ background-image ä¸ä»…å¯ä»¥ç”¨äºè®¾ç½® æ•´ä¸ªé¡µé¢ï¼Œä¹Ÿå¯ä»¥è®¾ç½® æŸä¸ªå…ƒç´  èƒŒæ™¯å›¾ï¼š ä¸‹é¢ç»™å…ƒç´ è®¾ç½®ä¸€ä¸ªèƒŒæ™¯å›¾ç‰‡ã€‚ 1234567891011121314151617&lt;html&gt; &lt;head&gt; &lt;style type=&quot;text/css&quot;&gt; p &#123; height:100px; line-height: 100px; text-align: center; color: red; background-image:url(&quot;https://wpdotorg.files.wordpress.com/2008/11/boat.jpg&quot;) &#125; &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;p&gt;æˆ‘æ˜¯pæ ‡ç­¾ï¼Œæˆ‘çš„é¢œè‰²æ˜¯çº¢è‰²ï¼Œé«˜åº¦ä¸º100pxï¼Œæˆ‘çš„èƒŒæ™¯å›¾æ˜¯ä¸€è‰˜å°èˆ¹ã€‚&lt;/div&gt; &lt;/body&gt;&lt;/html&gt; é‡å¤ï¼šbackground-repeat background-repeat æŒ‡å®šå¦‚ä½•é‡å¤èƒŒæ™¯å›¾åƒï¼Œå¯è®¾ç½®å±æ€§å€¼ï¼ˆå…³é”®å­—ï¼‰ï¼š repeatï¼šå…¨åŒºåŸŸé‡å¤ ï¼ˆå³ä½¿ä¸è®¾ç½®ï¼ŒèƒŒæ™¯å›¾ç‰‡é»˜è®¤å…¨åŒºåŸŸé‡å¤ï¼‰ repeat-xï¼šæ²¿xè½´é‡å¤ repeat-yï¼šæ²¿yè½´é‡å¤ no-repeatï¼šä¸é‡å¤ï¼Œåªä½¿ç”¨ä¸€æ¬¡ heritï¼šç»§æ‰¿çˆ¶å…ƒç´ çš„ background-repeat å±æ€§å€¼ æ»šåŠ¨ï¼šbackground-attachment background-attachment è®¾ç½®èƒŒæ™¯å›¾ç‰‡æ˜¯ å›ºå®š çš„è¿˜æ˜¯å’Œ å…¶ä½™éƒ¨åˆ†ä¸€èµ·æ»šåŠ¨ ã€‚å¯è®¾ç½®çš„å‚æ•°ï¼ˆå…³é”®å­—ï¼‰ï¼š scollï¼šé»˜è®¤å€¼ï¼ŒèƒŒæ™¯å›¾åƒä¼šéšç€é¡µé¢å…¶ä½™éƒ¨åˆ†çš„æ»šåŠ¨è€Œç§»åŠ¨ fixedï¼šé¡µé¢çš„å…¶ä½™éƒ¨åˆ†æ»šåŠ¨æ—¶ï¼ŒèƒŒæ™¯å›¾åƒä¸ä¼šç§»åŠ¨ inheritï¼šä»çˆ¶å…ƒç´ ç»§æ‰¿ background-attachment å±æ€§å€¼ ä¸‹é¢å±•ç¤ºè®¾ç½®å›¾ç‰‡æ»šåŠ¨çš„å®ä¾‹ã€‚ 12345678910111213141516171819202122232425262728293031323334&lt;html&gt; &lt;head&gt; &lt;style type=&quot;text/css&quot;&gt; body &#123; background-image: url(&quot;https://wpdotorg.files.wordpress.com/2008/11/boat.jpg&quot;); background-repeat: no-repeat; background-attachment: scroll; &#125; &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;div&gt;æˆ‘æ˜¯æ–‡æœ¬...&lt;/div&gt; &lt;div&gt;æˆ‘æ˜¯æ–‡æœ¬...&lt;/div&gt; &lt;div&gt;æˆ‘æ˜¯æ–‡æœ¬...&lt;/div&gt; &lt;div&gt;æˆ‘æ˜¯æ–‡æœ¬...&lt;/div&gt; &lt;div&gt;æˆ‘æ˜¯æ–‡æœ¬...&lt;/div&gt; &lt;div&gt;æˆ‘æ˜¯æ–‡æœ¬...&lt;/div&gt; &lt;div&gt;æˆ‘æ˜¯æ–‡æœ¬...&lt;/div&gt; &lt;div&gt;æˆ‘æ˜¯æ–‡æœ¬...&lt;/div&gt; &lt;div&gt;æˆ‘æ˜¯æ–‡æœ¬...&lt;/div&gt; &lt;div&gt;æˆ‘æ˜¯æ–‡æœ¬...&lt;/div&gt; &lt;div&gt;æˆ‘æ˜¯æ–‡æœ¬...&lt;/div&gt; &lt;div&gt;æˆ‘æ˜¯æ–‡æœ¬...&lt;/div&gt; &lt;div&gt;æˆ‘æ˜¯æ–‡æœ¬...&lt;/div&gt; &lt;div&gt;æˆ‘æ˜¯æ–‡æœ¬...&lt;/div&gt; &lt;div&gt;æˆ‘æ˜¯æ–‡æœ¬...&lt;/div&gt; &lt;div&gt;æˆ‘æ˜¯æ–‡æœ¬...&lt;/div&gt; &lt;div&gt;æˆ‘æ˜¯æ–‡æœ¬...&lt;/div&gt; &lt;div&gt;æˆ‘æ˜¯æ–‡æœ¬...&lt;/div&gt; &lt;div&gt;æˆ‘æ˜¯æ–‡æœ¬...&lt;/div&gt; &lt;div&gt;æˆ‘æ˜¯æ–‡æœ¬...&lt;/div&gt; &lt;/body&gt;&lt;/html&gt; åˆ—è¡¨æ ·å¼ é¡¹æ ‡è®°ï¼šlist-style-type list-style-type å¯ç”¨äºè®¾ç½®åˆ—è¡¨æ¯é¡¹æ ‡è®°ï¼Œæ¯”å¦‚ï¼šÂ· ã€â–¡ ã€â€¦ï¼Œå‚æ•°å¯ç”¨å…³é”®å­—è®¾ç½®ï¼š none,circle(ç©ºå¿ƒåŸç‚¹), square(ç©ºå¿ƒâ–¡), decimal(æœ‰åºæ•°å­—), disc(å®å¿ƒåŸç‚¹), lower-alpha(æœ‰åºå­—æ¯) âš ï¸ æœ‰åºåˆ—è¡¨ é™¤äº†é»˜è®¤æ•°å­—decimal ä½œä¸ºæ ‡è®°ï¼Œä¸Šé¢å±æ€§åªèƒ½ä½¿ç”¨ lower-alpha å­—æ¯ç­‰æœ‰åºæ ‡è®° ã€‚ ä»¥ä¸‹æ˜¯ä¸ºå®ä¾‹è®¾ç½®ä¸åŒé¡¹ç›®æ ‡è®°ã€‚ 1234567891011121314151617181920212223242526272829&lt;html&gt; &lt;head&gt; &lt;style type=&quot;text/css&quot;&gt; ol.lower-alpha &#123; list-style-type: lower-alpha; &#125; ul.circle &#123; list-style-type: circle; &#125; ul.square &#123; list-style-type: square; &#125; &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;ol class=&quot;lower-alpha&quot;&gt; &lt;li&gt;w3cschool&lt;/li&gt; &lt;/ol&gt; &lt;ul class=&quot;circle&quot;&gt; &lt;li&gt;w3cschool&lt;/li&gt; &lt;/ul&gt; &lt;ul class=&quot;square&quot;&gt; &lt;li&gt;w3cschool&lt;/li&gt; &lt;/ul&gt; &lt;/body&gt;&lt;/html&gt; é¡¹æ ‡è®°-å›¾åƒï¼šlist-style-image ã€list-style-position è¿›ä¸€æ­¥æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨list-style-image è®¾ç½®å›¾åƒä½œä¸ºé¡¹æ ‡è®°ï¼Œç”¨ list-style-position æŒ‡å®šæ ‡è®°ä½ç½®ï¼š list-style-position:insideï¼šæŒ‡å®šä½ç½®åœ¨å†…å®¹æµä¸­â” list-style-position:outsideï¼šé»˜è®¤å€¼ï¼ŒæŒ‡å®šä½ç½®ä¸åœ¨å†…å®¹æµä¸­â” è®¾ç½®é¡¹æ ‡è®°ä¸ºæŒ‡å®šå›¾åƒï¼Œå¹¶è®¾ç½®åœ¨å†…å®¹æµä¸­ã€‚ 123456789101112131415161718&lt;html&gt; &lt;head&gt; &lt;style type=&quot;text/css&quot;&gt; ul &#123; list-style-image: url(&quot;https://www.w3cschool.cn/statics/images/favicon.ico&quot;); list-style-position: inside; &#125; &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;ul&gt; &lt;li&gt;w3cschool&lt;/li&gt; &lt;li&gt;w3cschool&lt;/li&gt; &lt;li&gt;w3cschool&lt;/li&gt; &lt;/ul&gt; &lt;/body&gt;&lt;/html&gt; list-style list-style å±æ€§æ˜¯è®¾ç½® list-style-type*ã€list-style-imageã€*list-style-position ç®€å†™å±æ€§ï¼š 1234ul &#123; list-style: square outside none;&#125; ä¸‹æ–¹æ˜¯æœªç®€åŒ–ç‰ˆæœ¬ï¼š 123456ul&#123; list-style-type: square; list-style-position: outside; list-style-image: none;&#125; æ‰§è¡Œç»“æœï¼š è¡¨æ ¼æ ·å¼ å±æ€§ æè¿° boder è¯¥å±æ€§å¯ä¾æ¬¡æŒ‡å®šï¼šè¾¹æ¡†å¤§å°ã€è¾¹æ¡†ç±»å‹ã€è¾¹æ¡†é¢œè‰² border-collapse æ˜¯å¦æŠŠè¡¨æ ¼è¾¹æ¡†åˆå¹¶ä¸ºå•ä¸€çš„è¾¹æ¡† border-spacing åˆ†éš”å•å…ƒæ ¼è¾¹æ¡†çš„è·ç¦» widthã€height è®¾ç½®è¡¨æ ¼å®½é«˜ï¼Œå¯ç”¨pxã€emç­‰ï¼Œä¹Ÿå¯ç”¨ç™¾åˆ†æ¯” % caption-side è¡¨æ ¼æ ‡é¢˜çš„ä½ç½® empty-cells æ˜¯å¦æ˜¾ç¤ºè¡¨æ ¼ä¸­çš„ç©ºå•å…ƒæ ¼ table-layout æ˜¾ç¤ºå•å…ƒã€è¡Œå’Œåˆ—çš„ç®—æ³• æ›´å¤šè®¾ç½®ï¼š text-align ã€vertical-align ï¼šè®¾ç½®æ–‡æœ¬å¯¹é½æ–¹å¼ï¼Œè§å‰ padding ï¼šè®¾ç½®è¡¨æ ¼ä¸­å†…å®¹ä¸è¾¹æ¡†çš„è·ç¦» è¾¹æ¡† ï¼šboder å¯ä¸ºè¡¨æ ¼ã€è¡¨æ ¼å•å…ƒè®¾ç½®è¾¹æ¡†ã€ä»¥åŠé¢œè‰²å’Œç²—ç»†ï¼Œæ¯”å¦‚å­˜åœ¨ä»¥ä¸‹è¡¨æ ¼ï¼š âš ï¸è¿™å…¶å®æ˜¯ç›’æ¨¡å‹è¾¹æ¡† boderè®¾ç½® ï¼Œå› ä¸ºè¡¨æ ¼tableã€è¡¨æ ¼å•å…ƒthã€td å…¶å®ä¹Ÿæ˜¯å…ƒç´ ï¼Œæ˜¯ç›’æ¨¡å‹ç»“æ„ã€‚ 12345678910111213141516171819202122&lt;html&gt;&lt;head&gt;&lt;style type=&quot;text/css&quot;&gt;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;table&gt;&lt;tr&gt;&lt;th&gt;Firstname&lt;/th&gt;&lt;th&gt;Lastname&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Bill&lt;/td&gt;&lt;td&gt;Gates&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Steven&lt;/td&gt;&lt;td&gt;Jobs&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/body&gt;&lt;/html&gt; æŠŠæ•´ä¸ªè¡¨æ ¼ã€è¡¨æ ¼ç¬¬ä¸€è¡Œå•å…ƒã€è¡¨æ ¼å…¶å®ƒè¡Œå•å…ƒè®¾ç½®ä¸º ï¼š1pxç²—ã€å®æ¡†ã€è“è‰²ã€‚ 1234table, th, td&#123; border: 1px solid blue;&#125; æ³¨æ„ï¼šä¸èƒ½åªé€‰ä¸­ table è®¾ç½®ï¼Œè¿™æ ·åªæœ‰è¡¨æ ¼æœ€å¤–å±‚è¢«è®¾ç½®è“è‰²è¾¹æ¡†ã€‚æ¯ä¸ªå•å…ƒæ ¼ä¹Ÿè¦è¢«é€‰ä¸­ï¼ ç»™å››è¾¹è®¾ç½®æ ·å¼ åœ¨å‰é¢æˆ‘ä»¬é€šè¿‡ border å±æ€§æ¥æŒ‡å®šè¾¹æ¡†ï¼šé¢œè‰²ã€æ ·å¼ã€å®½åº¦ï¼Œä½†æ˜¯è¾¹æ¡†ä¸Šä¸‹å·¦å³éƒ½æ˜¯ç»Ÿä¸€é¢œè‰²æ ·å¼ç­‰ã€‚ å®é™…ä¸Šï¼Œå…ƒç´ ç›’å­æ¨¡å‹ä¸­è¾¹æ¡†å¯åˆ†ä¸ºä¸Šã€å³ã€ä¸‹ã€å·¦å››ä¸ªçŸ©å½¢åŒºåŸŸã€‚æˆ‘ä»¬å¹¶ä¸”å¯é€šè¿‡ä¸‹é¢å±æ€§åˆ†åˆ«æŒ‡å®šï¼š border-colorï¼šæŒ‡å®šè¾¹æ¡†é¢œè‰²ï¼Œå¯ä¾æ¬¡æŒ‰ ä¸Šã€å³ã€ä¸‹ã€å·¦ é¡ºåºæŒ‡å®šå››è¾¹ border-styleï¼š æŒ‡å®šè¾¹æ¡†æ ·å¼ï¼Œå¯ä¾æ¬¡æŒ‰ ä¸Šã€å³ã€ä¸‹ã€å·¦ é¡ºåºæŒ‡å®šå››è¾¹ border-widthï¼šæŒ‡å®šè¾¹æ¡†å®½åº¦ï¼Œå¯ä¾æ¬¡æŒ‰ ä¸Šã€å³ã€ä¸‹ã€å·¦ é¡ºåºæŒ‡å®šå››è¾¹ è¯•ç€åˆ†æå†™å‡ºä¸‹é¢å›¾å½¢CSSä»£ç ã€‚ æ˜¾ç„¶ï¼ŒèƒŒæ™¯é¢œè‰²ä¸ºç™½è‰²ï¼Œè¾¹æ¡†é¢œè‰²éƒ½æ˜¯é»‘è‰²ï¼Œè¾¹æ¡†æ ·å¼ä¹Ÿä¸€è‡´éƒ½ä¸º solid ï¼Œè€Œè¾¹æ¡†å®½åº¦æ˜æ˜¾ä¸‹è¾¹å®½åº¦è¦å’Œä¸Šã€å·¦ã€å³ä¸åŒéœ€è¦å•ç‹¬è®¾ç½®ã€‚ 12345678#yin-yang &#123; width: 96px; height: 48px; background: #eee; border-style: solid; border-width: 2px 2px 50px 2px;&#125; è¿›é˜¶ï¼šå°è¯•ç”»å‡ºä¸‹é¢çš„é˜´é˜³å›¾å½¢ã€‚ é¦–å…ˆæˆ‘ä»¬åªéœ€å°†ä¸Šä¾‹ä¸­æ­£æ–¹å½¢é€šè¿‡ border-radius å±æ€§è®¾ç½®ä¸ºåœ†å½¢å³å¯ ï¼š 12345678910#yin-yang&#123; position: relative; width: 96px; height: 48px; background: #eee; border-style: solid; border-width: 2px 2px 50px 2px; border-radius: 100%;&#125; ç„¶åæˆ‘ä»¬å†å°è¯•ç”Ÿæˆä¸‹é¢å°åœ†ï¼šå†…åœ†ä¸ºç™½ï¼Œå¤–ç¯ä¸ºé»‘è‰²ã€‚ 123456789#yin-yang::before&#123; content: &quot;&quot;; position:absolute; background-color:#eee; width:12px; height:12px; border:18px solid black;&#125; æœ€åå†æŠŠå°åœ†ä¸‹ç§»åˆ°ç›´å¾„å’Œå¤§åœ†ç›´å¾„é‡åˆï¼š 1234#yin-yang::before&#123; top:50%;&#125; åŒç†ï¼Œå†ç”»å‡ºä¸€ä¸ªå°åœ†ï¼šå†…åœ†ä¸ºé»‘ï¼Œå¤–ç¯ä¸ºç™½è‰²ã€‚ 123456789101112#yin-yang::after&#123; content: &quot;&quot;; position:absolute; background-color:black; width:12px; height:12px; border:18px solid #eee; border-radius: 100%; top: 50%; left: 50%;&#125; æ·±å…¥äº†è§£ border å±æ€§ï¼šæ¢¯å½¢ åœ¨ä¸Šé¢ä½ å¯èƒ½ç†è§£è¾¹æ¡†æ˜¯ç”±ä¸Šä¸‹å·¦å³æ˜¯ä¸ªçŸ©å½¢ç»„æˆã€‚å®é™…ä¸Šå®ƒå¯é€šè¿‡border-top ã€border-right å±æ€§åˆ†ä¸ºä¸Šä¸‹å·¦å³å››ä¸ªæ¢¯å½¢åŒºåŸŸï¼Œæ¯ä¸ªæ¢¯å½¢åŒºåŸŸç”±ç›’å­ ç›¸é‚» å†…å®¹åŒºåŸŸè¾¹ å’Œ ç›’å­æœ€å¤–è¾¹ ç»„æˆã€‚ è¯·çœ‹ä¸‹ä¾‹ï¼šè®¾ç½®æ–‡æœ¬åŒºåŸŸä¸ºé•¿å®½ç›¸ç­‰50pxæ­£æ–¹å½¢ï¼Œè¾¹ç•Œéƒ½åšåº¦ä¸º50px ã€‚ 12345678910111213141516&lt;html&gt;&lt;head&gt;&lt;style type=&quot;text/css&quot;&gt;div&#123; width: 50px; height: 50px; border: 50px solid red;&#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; å¦‚æœæˆ‘ä»¬åˆ†åˆ«ä¿®æ”¹è¾¹æ¡†ä¸Šä¸‹å·¦å³é¢œè‰²ï¼Œä¾¿å¯ä»¥å‘ç°å…¶å®æ˜¯ç”±4ä¸ªæ¢¯å½¢ç»„æˆï¼š 123456789div&#123; width: 50px; height: 50px; border-top: 50px solid red; border-right: 50px solid yellow; border-bottom: 50px solid blue; border-left: 50px solid green;&#125; è¿›ä¸€æ­¥æˆ‘ä»¬æŠŠæ–‡æœ¬å†…å®¹åŒºåŸŸé«˜å®½è®¾ç½®ä¸º0ï¼Œé‚£ä¹ˆå››ä¸ªè¾¹æ¡†çŸ©å½¢åŒºåŸŸå¯å˜ä¸ºä¸‰è§’å½¢ï¼š 123456789div&#123; width: 0px; height: 0px; border-top: 50px solid red; border-right: 50px solid yellow; border-bottom: 50px solid blue; border-left: 50px solid green;&#125; ç°åœ¨æˆ‘ä»¬æ¥ç€ä¾‹ä¸¾å‡ ä¸ªå®ä¾‹è¿›ä¸€æ­¥ç†è§£borderå±æ€§ã€‚ è¯•åˆ†æï¼šä¸‹é¢çš„å³ä¸‰è§’å½¢æ˜¯æ€ä¹ˆç”»å‡ºçš„ï¼Ÿ è¿‡ç¨‹å…¶å®å¾ˆç®€å•ï¼Œé¦–å…ˆåœ¨ä¸Šé¢åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬æŠŠä¸Šä¸‹ä¸¤ä¸ªä¸‰è§’å½¢è®¾ä¸ºé€æ˜ï¼š 123456789div&#123; width: 0px; height: 0px; border-top: 50px solid transparent; border-right: 50px solid yellow; border-bottom: 50px solid transparent; border-left: 50px solid green;&#125; ç„¶ååˆ é™¤æ‰border-bottom å±æ€§ï¼Œè¿™æ ·ç”±äºå³ä¾§ä¸‰è§’å½¢ä¸å­˜åœ¨ï¼Œdiv å®½åº¦è‡ªåŠ¨å‡å»åŸå³ä¸‰è§’å½¢å®½ï¼ˆåšï¼‰åº¦ï¼Œè¡¨ç°ä¸ºä¿ç•™åŸæ¥çš„å·¦åŠéƒ¨åˆ†ï¼š æœ€ç»ˆcss æ ·å¼è®¾ç½®ï¼š 12345678div&#123; width: 0px; height: 0px; border-top: 50px solid transparent; border-bottom: 50px solid transparent; border-left: 50px solid green;&#125; åŒç†ï¼Œè¯•ç€å®ç°ä¸‹ä¸‰è§’å½¢ã€‚ 12345678div&#123; width: 0px; height: 0px; border-top: 50px solid red; border-right: 50px solid transparent; border-left: 50px solid transparent;&#125; æŠ˜å ï¼šborder-collapse border-collapse å¯å°†è¡¨æ ¼è¾¹æ¡†æ˜¯å¦æŠ˜å æˆå•ä¸€è¾¹æ¡†ï¼Œå¯è®¾ç½®çš„å±æ€§ï¼ˆå…³é”®å­—ï¼‰ï¼š seperateï¼šé»˜è®¤å€¼ï¼ŒæŠ˜å æˆå•ä¸€è¡¨æ ¼ï¼Œæ¯ä¸ªå•å…ƒéƒ½æœ‰è‡ªå·±çš„å®Œæ•´è¾¹æ¡†ï¼ˆæ¯”å¦‚ä¸Šé¢è¡¨æ ¼ï¼‰ collapseï¼šä¸æŠ˜å ï¼Œæ¯ä¸ªç›¸é‚»å•å…ƒè¾¹åˆå¹¶ è®¾ç½®æ¯ä¸ªç›¸é‚»å•å…ƒæ ¼è¾¹åˆå¹¶ã€‚ 12345678table, th, td&#123; border: 1px solid blue;&#125;table&#123; border-collapse:collapse;&#125; è·ç¦»ï¼šborder-spacing border-spacing è®¾ç½®åˆ†éš”å•å…ƒæ ¼è¾¹æ¡†çš„è·ç¦»ï¼š è®¾ç½®æ ¼å¼ï¼šborder-spacing ï¼šæ°´å¹³å•å…ƒæ ¼ç›¸é‚»è·ç¦» å‚ç›´å•å…ƒæ ¼ç›¸é‚»è·ç¦» âš ï¸ åªæœ‰åœ¨ border-collapse:seperate è®¾ç½®åˆ†å¼€æ‰ç”Ÿæ•ˆï¼ è®¾ç½®è¡¨æ ¼ï¼šæ°´å¹³å•å…ƒæ ¼ç›¸è·10pxï¼Œå‚ç›´å•å…ƒæ ¼ç›¸è·30pxã€‚ 12345table&#123; border-collapse: separate; border-spacing:10px 30px ; &#125; å®½é«˜ï¼šwidthã€height widthã€height å¯ä»¥è®¾ç½®tableã€thã€tdå®½é«˜ï¼š åŸºæœ¬é•¿åº¦å•ä½ï¼špxï¼Œemâ€¦ ç™¾åˆ†æ¯”ï¼šå¦‚100%ï¼Œè¡¨æ ¼å¯ä»¥å æ®æ•´ä¸ªå®½åº¦ è¡¨æ ¼å®½åº¦è®¾ç½®ä¸º 100%ï¼ŒåŒæ—¶å°† th å…ƒç´ çš„é«˜åº¦è®¾ç½®ä¸º 50pxã€‚ 12345678910111213141516171819202122232425262728293031323334353637&lt;html&gt;&lt;head&gt;&lt;style type=&quot;text/css&quot;&gt;table,td,th&#123; border:1px solid black; // è®¾ç½®è¾¹æ¡†&#125;// å®½åº¦==å±å¹•å®½ï¼Œæ°´å¹³å•å…ƒæ ¼å®½åº¦ = å±å¹•å®½ / æ°´å¹³å•å…ƒæ ¼æ•°// ä½†å¦‚æœæ˜¯é€‰æ‹©å•å…ƒæ ¼tdã€thæ¥è®¾ç½®width:100%; å®½åº¦å¹¶ä¸ä¼šå¹³åˆ†ï¼Œè€Œæ˜¯ç¬¬ä¸€ä¸ªæ°´å¹³å•å…ƒæ ¼å æ®å°½å¯èƒ½å¤šå®½åº¦table&#123; width:100%; &#125;th&#123; height:50px;&#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;table&gt;&lt;tr&gt;&lt;th&gt;Firstname&lt;/th&gt;&lt;th&gt;Lastname&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Bill&lt;/td&gt;&lt;td&gt;Gates&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Steven&lt;/td&gt;&lt;td&gt;Jobs&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/body&gt;&lt;/html&gt; è‡ªåŠ¨å®½åº¦ï¼štable-layout table-layout å¯ä»¥å½“å•å…ƒæ ¼å®½åº¦*æœªæ˜ç¡®è®¾ç½®*æ—¶ ï¼ˆè¡¨å®½åº¦å¯æŒ‡å®šï¼‰ï¼Œå¦‚æœè®¾ç½®æ¯åˆ—åˆ—å®½ï¼š auto ï¼š å½“åˆ—æˆ–å•å…ƒæ ¼å®½åº¦æœªæ˜ç¡®è®¾ç½®æ—¶ï¼Œåˆ—å®½å°†ä¸ç»„æˆåˆ—çš„å•å…ƒæ ¼ä¸­çš„å†…å®¹é‡æˆæ¯”ä¾‹ fixed ï¼š å½“åˆ—æˆ–å•å…ƒæ ¼å®½åº¦æœªæ˜ç¡®è®¾ç½®æ—¶ï¼Œåˆ—å®½å°†ä¸å—ç»„æˆåˆ—çš„å•å…ƒæ ¼ä¸­çš„å†…å®¹æ•°é‡çš„å½±å“ 123456789101112131415161718table&#123; border-collapse: separate; width: 100%; border: 1px solid gray;&#125; td &#123; border: 1px solid gray;&#125;table.auto &#123; table-layout: auto;&#125;table.fixed &#123; table-layout: fixed;&#125; ç»¼åˆç»ƒä¹  è¯·å°è¯•å®ç°ä¸‹é¢è¡¨æ ¼æ ·å¼ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960&lt;html&gt;&lt;head&gt;&lt;style type=&quot;text/css&quot;&gt;#customers &#123; font-family:&quot;Trebuchet MS&quot;, Arial, Helvetica, sans-serif; width:100%; border-collapse:collapse; &#125;#customers td, #customers th &#123; font-size:1em; border:1px solid #98bf21; // ä¸ºä»€ä¹ˆä¸è®¾ç½® #customersï¼Ÿæ²¡æœ‰æ•ˆæœï¼Œå› ä¸ºå’Œå•å…ƒæ ¼é‡å  padding:3px 7px 2px 7px; // è®¾ç½®æ–‡å­—ç¦»è¾¹æ¡†è·ç¦» &#125;#customers th &#123; font-size:1.1em; text-align:left; background-color:#A7C942; // æ ‡é¢˜å•å…ƒæ ¼èƒŒæ™¯è®¾ç½®ä¸ºæ·±ç»¿ color:#ffffff; // æ ‡é¢˜æ–‡å­—è®¾ç½®ä¸ºç™½è‰²ï¼Œè€Œä¸æ˜¯é»˜è®¤é»‘è‰² &#125;// è®¾ç½®å¥‡æ•°è¡Œé»˜è®¤èƒŒæ™¯è‰²ï¼Œå«æ ‡é¢˜#customers tr:nth-child(2n+1) &#123; background-color:#EAF2D3; &#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;table id=&quot;customers&quot;&gt;&lt;tr&gt;&lt;th&gt;Company&lt;/th&gt;&lt;th&gt;Contact&lt;/th&gt;&lt;th&gt;Country&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;Steven Jobs&lt;/td&gt;&lt;td&gt;USA&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;alt&quot;&gt;&lt;td&gt;Baidu&lt;/td&gt;&lt;td&gt;Li YanHong&lt;/td&gt;&lt;td&gt;China&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;Larry Page&lt;/td&gt;&lt;td&gt;USA&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/body&gt;&lt;/html&gt; é“¾æ¥æ ·å¼ æˆ‘ä»¬å¯ä»¥æ ¹æ®å‰é¢å­¦çš„ï¼š æ–‡æœ¬æ ·å¼ï¼šè®¾ç½®é“¾æ¥æ–‡å­—æ ·å¼ï¼Œæ¯”å¦‚å»é™¤ä¸‹åˆ’çº¿ text-decoration:none; ç›’æ¨¡å‹ï¼šè®¾ç½®é“¾æ¥çš„è¾¹æ¡†ã€å®½é«˜ç­‰ï¼Œæ¯”å¦‚ boder : 2px solid green èƒŒæ™¯å›¾ï¼šè®¾ç½®é“¾æ¥çš„èƒŒæ™¯å›¾ç­‰ â€¦ åŒæ—¶æ¯”è¾ƒç‰¹æ®Šçš„æ˜¯ï¼šæˆ‘ä»¬å¯ä»¥å®šä¹‰é“¾æ¥ä¸åŒçŠ¶æ€ä¸‹æ ·å¼ï¼š a:link ï¼š æ™®é€šçš„ã€æœªè¢«è®¿é—®çš„é“¾æ¥ a:visited ï¼š ç”¨æˆ·å·²è®¿é—®çš„é“¾æ¥ a:hover ï¼š é¼ æ ‡æŒ‡é’ˆä½äºé“¾æ¥çš„ä¸Šæ–¹ a:active ï¼š é“¾æ¥è¢«ç‚¹å‡»çš„æ—¶åˆ» ç»¼åˆç»ƒä¹  å°è¯•å®ç°å¦‚ä¸‹æ ·å¼çš„å¯¼èˆªæ ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;style&gt;/* æ­¥éª¤1ï¼šè®¾ç½®åŸºæœ¬å¯¼èˆªæ divåŒºåŸŸèƒŒæ™¯è‰²ã€é«˜å®½*/#menu&#123; background-color: #34495e; // ç›´æ¥è®¾ç½®åŒºåŸŸèƒŒæ™¯è‰² width: 100%; height: 40px;&#125;/* æ­¥éª¤2ï¼šè®¾ç½®è¡¨æ ¼ï¼Œå»é™¤åˆ—è¡¨é¡¹æ ‡è®°ç­‰ Q1:ä¸ºä»€ä¹ˆè¦è®¾ç½®ï¼šoverflow: hiddenï¼Ÿ å› ä¸ºulå…ƒç´ å­å…ƒç´ li ä¸ºäº†å¯ä»¥åœ¨ä¸€è¡Œæ˜¾ç¤ºè®¾ç½®äº†å‘å·¦æµ®åŠ¨ã€‚ è®¾ç½®overflow: hiddenå¯ä»¥è®©ulåŒ…å«liï¼Œè€Œä¸æ˜¯ä¸æ˜¾ç¤ºäº†ã€‚*/ul&#123; list-style-type:none; margin:0; padding-left: 60px; overflow: hidden; /*å¯ä»¥ä½¿ç”¨overflow:hidden;æŠ€æœ¯è®©çˆ¶å…ƒç´ åŒ…å«æµ®åŠ¨å­å…ƒç´ */&#125;/*liæ ‡ç­¾é»˜è®¤æ˜¯å—ï¼Œä¸ºäº†åœ¨ä¸€æ æ˜¾ç¤ºï¼Œè®¾ç½®ä¸ºfloatæµ®åŠ¨*/li&#123; float:left; &#125;/* æ­¥éª¤3ï¼šè®¾ç½®é“¾æ¥åŸºæœ¬æ ·å¼ã€‚ Q1:ä¸ºä»€ä¹ˆè®¾ç½®display: blockï¼Ÿ 1.å¯ä»¥è®©aæ ‡ç­¾æ•´ä¸ªåŒºåŸŸè¢«ç‚¹å‡»ï¼ˆè€Œä¸æ˜¯åªæœ‰æ–‡å­—ï¼‰2.å¯ä»¥è®¾ç½®aæ ‡ç­¾å®½åº¦ã€é«˜åº¦ Q2:ä¸ºä»€ä¹ˆè®¾ç½®line-height: 40px; ï¼Ÿ ä¸ºäº†è®©æ–‡å­—å‚ç›´å±…ä¸­ã€‚æ°´å¹³å±…ä¸­ä¸èƒ½è§£å†³å‚ç›´å±…ä¸­ï¼Œè€Œvertical-align: middleä¸èµ·ä½œç”¨ã€‚ å½“ç„¶ï¼Œä¹Ÿå¯ä»¥å°è¯•è®¾ç½® paddingæ¥æ¨¡æ‹Ÿå±…ä¸­ã€‚ */a:link,a:visited&#123; display: block; width: 130px; /* è®¾ç½®aæ ‡ç­¾å®½åº¦ == divå®½åº¦ï¼Œç‚¹å‡»åæ•´ä¸ªåŒºåŸŸéƒ½å¯ä»¥ç‚¹å‡»*/ height: 40px; /* é«˜åº¦ = è¡Œé«˜ï¼Œå¯ä½¿å¾—æ–‡å­—å±…ä¸­ã€‚ç›´æ¥vertical-align: middle;åªèƒ½æ˜¯è¡¨æ ¼å•å…ƒæ ¼å†…èµ·ä½œç”¨ */ // vertical-align: middle; line-height: 40px; text-decoration: none; text-align: center; color: white;&#125;/*a:focus å¯ä»¥ä¿è¯ç‚¹å‡»åèƒŒæ™¯ä¸€ç›´æ˜¯çº¢è‰²ï¼Œç›´åˆ°ç‚¹äº†å…¶å®ƒå¯¼èˆªé¡¹ç›®*/a:hover,a:focus&#123; background-color: red;&#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;div id=&#x27;menu&#x27;&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;#home&quot;&gt;Home&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;#news&quot;&gt;News&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;#contact&quot;&gt;Contact&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;#about&quot;&gt;About&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; å®šä½ä¸å¸ƒå±€ å†…è”ä¸å—ï¼šdisplay ç½‘é¡µä¸Šçš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªç›’æ¨¡å‹ï¼Œæ¯ä¸ªå…ƒç´ é»˜è®¤ä¸ºå— æˆ–è€…å†…è”è¡Œä¸ºæ–¹å¼ï¼š å—å…ƒç´ ï¼šå°½å¯èƒ½ å æ®æœ€å¤§å®½åº¦ï¼Œç‹¬å ä¸€è¡Œã€å‰åæœ‰ æ¢è¡Œç¬¦ ï¼Œwidthã€height å¯è®¾ç½® å¸¸ç”¨å¦‚ï¼šdivã€pã€h1~h6ã€olã€ulã€tableã€from ç­‰ å†…è”å…ƒç´ ï¼šå æ®å†…å®¹å®½åº¦ï¼Œä¸ç‹¬å ä¸€è¡Œã€ ä¸å¼ºåˆ¶æ¢è¡Œ ï¼Œwidthã€height ä¸å¯è®¾ç½® å¸¸è§å¦‚ï¼šspanã€aã€img ç­‰ display å±æ€§å¯å†³å®šç›’æ¨¡å‹å…ƒç´ çš„ è¡Œä¸ºæ–¹å¼ ï¼š display:block ï¼šä½¿å¾—å…ƒç´ è¡Œä¸ºæ–¹å¼ä¸ºå— display:inline ï¼šä½¿å¾—å…ƒç´ è¡Œä¸ºæ–¹å¼ä¸ºå†…è” display:inline-block ï¼šä½¿å¾—å…ƒç´ è¡Œä¸ºæ–¹å¼ä¸ºå†…è”-å— ï¼Œåœ¨å†…è”çš„åŸºç¡€ä¸Šåˆå¯ä»¥è®¾ç½®æ¡†é«˜ display:none ï¼šéšè— ä¸€ä¸ªå…ƒç´ ï¼Œä¸å ç”¨ä»»ä½•ç©ºé—´ (visibility:hidden å ç”¨ç©ºé—´ ) ï¼Œå¥½åƒå®ƒä¸å­˜åœ¨ä¸€æ ·ã€‚ æ˜¾éšï¼švisibility visibility ç”¨æ¥è®¾ç½®å…ƒç´ æ˜¯æ˜¾ç¤ºè¿˜æ˜¯éšè—çš„ï¼Œå¯è®¾å…³é”®å­—ï¼š visibility:visible ï¼šå…ƒç´ å¯è§ visibility:hidden ï¼šå…ƒç´ ä¸å¯è§ï¼Œä½†æ˜¯å®ƒå æ®çš„ç©ºé—´è¿˜å­˜åœ¨ ï¼Œä¾ç„¶ä¼šå½±å“å¸ƒå±€ å®šä½ï¼šposition position å…è®¸æˆ‘ä»¬å®šä½ä¸€ä¸ªå…ƒç´ ï¼Œå¸¸è§å®šä½æ–¹å¼æœ‰ï¼š staticï¼šé™æ€é»˜è®¤å®šä½ï¼Œ å®šä½å…ƒç´ æ€»æ˜¯æŒ‰ç…§é¡µé¢çš„æ­£å¸¸æµåŠ¨è¿›è¡Œå®šä½ï¼Œå¿½ç•¥leftã€rigthç­‰è®¾ç½®ä½ç½®ï¼ fixedï¼š å›ºå®šå®šä½ï¼Œå³ä½¿çª—å£è¢«æ»šåŠ¨ä¹Ÿä¸ä¼šç§»åŠ¨ï¼Œå¯è®¾ç½®å‚ç›´æˆ–æ°´å¹³ä½ç½®ï¼Œç›¸å¯¹äºæµè§ˆå™¨çª—å£å®šä½ relativeï¼šç›¸å¯¹å®šä½ï¼Œå¯è®¾ç½®å‚ç›´æˆ–æ°´å¹³ä½ç½®ï¼Œç›¸å¯¹äºå®ƒè‡ªèº«çš„èµ·ç‚¹ä½ç½®å®šä½ absolute ï¼šç»å¯¹å®šä½ï¼Œå¯è®¾ç½®å‚ç›´æˆ–æ°´å¹³ä½ç½®ï¼Œç›¸å¯¹æœ€è¿‘å·²å®šä½ç¥–å…ˆå…ƒç´  æˆ–è€…æœ€åˆåŒ…å«å— è®¾ç½®ååœ¨ åŸæ–‡æ¡£æµä¸­è¢«å®Œå…¨åˆ é™¤ï¼ŒåŸå æ®ç©ºé—´å…³é—­ï¼Œå¥½åƒä¸å­˜åœ¨ä¸€æ · å› ä¸ºç»å¯¹å®šä½çš„æ¡†ä¸æ–‡æ¡£æµæ— å…³ï¼Œå¯è¦†ç›–é¡µé¢ä¸Šçš„å…¶å®ƒå…ƒç´ ï¼Œé€šè¿‡ z-index å±æ€§æ¥è®¾ç½® è®¾ç½®å‚ç›´æˆ–æ°´å¹³ä½ç½®ï¼Œé€šè¿‡å±æ€§ï¼štopã€bottomã€leftã€right æ¥è®¾ç½®ï¼š å¿…é¡»è¦å…ˆå¯¹ positionå±æ€§è¿›è¡Œåˆå§‹åŒ–è®¾ç½®å®šä½æ–¹å¼æ‰èƒ½ä½¿ç”¨ï¼ position:stactic è®¾ç½®çš„å…ƒç´ ï¼Œtopã€bottomã€leftã€right ä¼šè¢«å¿½ç•¥ï¼ å›ºå®šå®šä½ï¼šfixed å®ä¾‹ï¼šå›ºå®šå®šä½åï¼Œdiv-a ç§»åŠ¨åˆ°ç›¸å¯¹æµè§ˆå™¨çª—å£æŒ‡å®šä½ç½®ï¼ŒåŸæ¥ä½ç½®è¢«å¡«å……ã€‚ è„±ç¦»æ–‡æ¡£æµï¼ŒåŸç©ºé—´ä¸ä¿ç•™ï¼Œéšæ»šåŠ¨æ¡æ”¹å˜ä½ç½® ç›¸å¯¹æµè§ˆå™¨çª—å£ï¼ˆå·¦ä¸Šè§’ï¼‰ä½ç½®å®šä½ ç›¸å¯¹å®šä½ï¼šrelative å®ä¾‹ï¼šç›¸å¯¹å®šä½åï¼Œdiv-a ç§»åŠ¨åˆ°ç›¸å¯¹è‡ªèº«åœ¨æ–‡æ¡£æµçš„æŒ‡å®šä½ç½®ï¼ŒåŸæ¥ä½ç½®ä¿ç•™ã€‚ ä¸è„±ç¦»æ–‡æ¡£æµï¼ŒåŸç©ºé—´ä¿ç•™ ç›¸å¯¹è‡ªèº«èµ·ç‚¹ï¼ˆå·¦ä¸Šè§’ï¼‰å®šä½ ç»å¯¹å®šä½ï¼šabsolute å®ä¾‹ï¼šç»å¯¹å®šä½åï¼Œdiv-a ç§»åŠ¨åˆ°ç›¸å¯¹æµè§ˆå™¨çª—å£ï¼ˆæœ€è¿‘åŒ…å«å—ï¼‰æŒ‡å®šä½ç½®ï¼ŒåŸæ¥ä½ç½®è¢«å¡«å……ã€‚ è„±ç¦»æ–‡æ¡£æµï¼ŒåŸç©ºé—´ä¸ä¿ç•™ï¼Œä½†ä¸éšæ»šåŠ¨æ¡æ”¹å˜ä½ç½® ç›¸å¯¹æœ€è¿‘å·²å®šä½ç¥–å…ˆå…ƒç´ å®šä½ï¼Œå¦‚æœæ²¡æœ‰åˆ™ç›¸å¯¹æœ€åˆåŒ…å«å—å®šä½ é‡å ï¼šz-index å¦‚æœä¸¤ä¸ªå…ƒç´ å‘ç”Ÿé‡å ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®z-index å±æ€§æ”¹å˜å±‚å æ¬¡åºã€‚å®šä½å…ƒç´ æ²¿ z è½´çš„ä½ç½®ï¼Œz è½´å®šä¹‰ä¸ºå‚ç›´å»¶ä¼¸åˆ°æ˜¾ç¤ºåŒºçš„è½´ï¼š é»˜è®¤z-index = 0ï¼Œ z-index å€¼è¶Šå¤§ï¼Œåˆ™æ²¿ç€z è½´æ­£è½´è¶Šè¿œï¼Œç¦»ç”¨æˆ·è¶Šè¿‘ z-index å±æ€§å¿…é¡»è¦åœ¨è®¾ç½®äº†position æ‰èƒ½ç”Ÿæ•ˆã€‚ï¼ˆé™¤äº†ä¸èƒ½è®¾ç½®position:static ï¼‰ è¯•ç€æ”¹å˜ä¸‹é¢é‡å çº¢ã€è“æ–¹å—æ¬¡åºï¼ŒæŠŠè“è‰²æ–¹å—æ˜¾ç¤ºåœ¨ä¸Šé¢ã€‚ 123456789101112131415161718192021222324&lt;html&gt;&lt;head&gt; &lt;style&gt; .blue &#123; background-color: #8EC4D0; width: 60px; height: 60px; &#125; .red &#123; background-color: #FF4D4D; width: 60px; height: 60px; margin-top: -30px; margin-left: 30px; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class=&quot;blue&quot;&gt;blue&lt;/div&gt; &lt;div class=&quot;red&quot;&gt;red&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; å¯ä»¥çœ‹åˆ°ï¼Œåˆå§‹ä¸¤ä¸ªdivæ–¹å—æŒ‰ç…§ ååˆ°æ˜¾ç¤ºåœ¨å‰ ï¼Œæ‰€ä»¥çº¢è‰²æ–¹å—æ˜¾ç¤ºåœ¨å‰ã€‚ æˆ‘ä»¬å¯ä»¥è®¾ç½® .blue çš„ position å±æ€§ä¸º relative ï¼ˆfixedã€absolute ä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯ç”±äºè„±ç¦»æ–‡æ¡£æµçº¢è‰²æ–¹å—ä¼šä¸Šç§»åŠ¨ä¸æ–¹ä¾¿è®¾ç½®ï¼‰ï¼›ç„¶åå¢å¤§å®ƒçš„ z-index ä¸º 1ã€‚ âš ï¸ ä¸ç”¨è®¾ç½®çº¢è‰²æ–¹å— .red çš„ position å±æ€§?? 12345678.blue&#123; background-color: #8EC4D0; position: relative; width: 60px; height: 60px; z-index:1 &#125; æµ®åŠ¨ï¼šfloat æ— è®ºå¤šä¹ˆå¤æ‚çš„å¸ƒå±€ï¼ŒåŸºæœ¬å‡ºå‘ç‚¹ï¼šå¦‚ä½•åœ¨ä¸€è¡Œæ˜¾ç¤ºå¤šä¸ªdivå…ƒç´  ã€‚è¿™å°±ç”¨åˆ°äº†æµ®åŠ¨ï¼Œæµ®åŠ¨åªæœ‰ä¸¤ä¸ªå…³é”®å­—è®¾ç½®ï¼š leftï¼šå·¦æµ®åŠ¨ rightï¼šå³æµ®åŠ¨ è®¾ç½®ä¸ºæµ®åŠ¨çš„æ¡†ï¼Œä¼šè„±ç¦»æ–‡æ¡£æµå‘å·¦æˆ–å‘å³ç§»åŠ¨ï¼Œå®ƒä»¬çš„ç§»åŠ¨è§„åˆ™æ˜¯ï¼š å¤šä¸ªå…ƒç´ æµ®åŠ¨ï¼Œä»ä¸Šè‡³ä¸‹ä¾æ¬¡å‘å·¦ã€å‘å³æµ®åŠ¨ å‡è®¾ div å…ƒç´ Aæ˜¯æµ®åŠ¨çš„ï¼Œå¦‚æœAå…ƒç´ ä¸Šä¸€ä¸ªå…ƒç´ ä¹Ÿæµ®åŠ¨åˆ™ç´§è·Ÿå…¶åï¼ˆå¦‚æœä¸€è¡Œèƒ½æ”¾ä¸‹ï¼‰ï¼›å¦‚æœAå…ƒç´ ä¸Šä¸€ä¸ªå…ƒç´ ä¸æµ®åŠ¨ï¼ˆæ˜¯æ ‡å‡†æµä¸­å…ƒç´ ï¼‰ï¼Œé‚£ä¹ˆç›¸å¯¹å‚ç›´ä½ç½®ä¸ä¼šæ”¹å˜ï¼ˆé¡¶éƒ¨å’Œå…¶åº•éƒ¨åŒä¸€æ¡æ°´å¹³çº¿ï¼Œä½†å¯ä»¥å¯¹åº”å·¦ã€å³ç§»åŠ¨ï¼‰ æµ®åŠ¨å…ƒç´ æ€»æ˜¯é£˜æµ®åœ¨æ ‡å‡†æµä¹‹ä¸Šï¼ˆç†è§£ä¸ºz-indexå¤§ï¼‰ æ¯”å¦‚ï¼Œå­˜åœ¨ä¸‹å›¾4ä¸ªéæµ®åŠ¨div å…ƒç´ ï¼š è®¾ç½® div2 ï¼šå‘å³æµ®åŠ¨ï¼Œè¯•åˆ†æç»“æœï¼Ÿ é¦–å…ˆï¼Œdiv2 è„±ç¦»æ ‡å‡†æµæ‰€ä»¥é‡Šæ”¾ç©ºé—´ï¼Œä¸‹æ–¹div3ã€div4 å‘ä¸Šç§»åŠ¨ã€‚è€Œdiv2 ä¸Šä¸€ä¸ªå—å…ƒç´ div1 ä¸æ˜¯æµ®åŠ¨å…ƒç´ ï¼Œæ‰€ä»¥ç›¸å¯¹div2 å‚ç›´ä½ç½®ä¸å˜ï¼ˆé¡¶éƒ¨å’Œå…¶åº•éƒ¨åŒä¸€æ¡æ°´å¹³çº¿ï¼Œè¡¨ç°ä¸ºä¸å‘ä¸Šæµ®åŠ¨ï¼‰ï¼Œä½†æ˜¯ä¼šå‘å³æµ®åŠ¨ï¼Œæ•…æœ€åç»“æœæ˜¯ï¼š è®¾ç½®div2ã€div3ã€div4ï¼šå‘å³æµ®åŠ¨ï¼Œè¯•åˆ†æç»“æœï¼Ÿ div2ã€div3ã€div4 éƒ½è„±ç¦»æ ‡å‡†æµï¼Œå¤šä¸ªå…ƒç´ æµ®åŠ¨ï¼Œä»ä¸Šè‡³ä¸‹åˆ™div2å…ˆå³æµ®åŠ¨ï¼Œç”±äºdiv2 ä¸Šä¸€ä¸ªå…ƒç´ div1 ä¸æµ®åŠ¨æ•…ä¿æŒç›¸å¯¹å‚ç›´ä½ç½®ä¸å˜ï¼ˆè¡¨ç°ä¸ºä¸ä¸Šæµ®ï¼‰ï¼Œæ•´ä½“åªç§»åŠ¨åˆ°å³ç«¯ã€‚ ç„¶ådiv3 å‘ä¸Šæµ®åŠ¨ï¼Œç”±äºå®ƒçš„ä¸Šä¸€ä¸ªå…ƒç´ div2 æ˜¯æµ®åŠ¨çš„ï¼Œæ‰€ä»¥ç´§é å…¶åã€‚div4åŒç†ï¼Œç´§é div3 åã€‚ æ•…æœ€ç»ˆç»“æœæ˜¯ï¼š æµ®åŠ¨ä¸æ–‡å­— é¦–å…ˆæˆ‘ä»¬è§‚å¯Ÿç½‘é¡µï¼šè®¾ç½®å›¾ç‰‡å‘å·¦æµ®åŠ¨åï¼Œç”Ÿæˆçš„æ–‡å­—ç¯ç»•å›¾ç‰‡ã€‚ 123456789101112131415161718192021&lt;html&gt;&lt;head&gt;&lt;style type=&quot;text/css&quot;&gt;img &#123; float:left;&#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;img src=&quot;https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=3388481411,1093632805&amp;fm=26&amp;gp=0.jpg&quot; /&gt;&lt;p&gt;...ä½™å‘Šä¹‹æ›°ï¼šå…¶å½¢ä¹Ÿï¼Œç¿©è‹¥æƒŠé¸¿ï¼Œå©‰è‹¥æ¸¸é¾™ã€‚è£æ›œç§‹èŠï¼ŒåèŒ‚æ˜¥æ¾ã€‚é«£é«´å…®è‹¥è½»äº‘ä¹‹è”½æœˆï¼Œé£˜é£–å…®è‹¥æµé£ä¹‹å›é›ªã€‚è¿œè€Œæœ›ä¹‹ï¼Œçšè‹¥å¤ªé˜³å‡æœéœï¼›è¿«è€Œå¯Ÿä¹‹ï¼Œç¼è‹¥èŠ™è•–å‡ºæ¸Œæ³¢ã€‚ç§¾çº¤å¾—ä¸­ï¼Œä¿®çŸ­åˆåº¦ã€‚è‚©è‹¥å‰Šæˆï¼Œè…°å¦‚çº¦ç´ ã€‚å»¶é¢ˆç§€é¡¹ï¼Œçš“è´¨å‘ˆéœ²ã€‚èŠ³æ³½æ— åŠ ï¼Œé“…åå¼—å¾¡ã€‚äº‘é«»å³¨å³¨ï¼Œä¿®çœ‰è”å¨Ÿã€‚ä¸¹å”‡å¤–æœ—ï¼Œçš“é½¿å†…é²œã€‚æ˜çœ¸å–„çï¼Œé¥è¾…æ‰¿æƒã€‚ç“Œå§¿è‰³é€¸ï¼Œä»ªé™ä½“é—²ã€‚æŸ”æƒ…ç»°æ€ï¼Œåªšäºè¯­è¨€ã€‚å¥‡æœæ—·ä¸–ï¼Œéª¨åƒåº”å›¾ã€‚æŠ«ç½—è¡£ä¹‹ç’€ç²²å…®ï¼Œç¥ç‘¶ç¢§ä¹‹åçšã€‚æˆ´é‡‘ç¿ ä¹‹é¦–é¥°ï¼Œç¼€æ˜ç ä»¥è€€èº¯ã€‚è·µè¿œæ¸¸ä¹‹æ–‡å±¥ï¼Œæ›³é›¾ç»¡ä¹‹è½»è£¾ã€‚å¾®å¹½å…°ä¹‹èŠ³è”¼å…®ï¼Œæ­¥è¸Ÿè¹°äºå±±éš…ã€‚äºæ˜¯å¿½ç„‰çºµä½“ï¼Œä»¥é¨ä»¥å¬‰ã€‚å·¦å€šé‡‡æ—„ï¼Œå³è«æ¡‚æ——ã€‚æ”˜çš“è…•äºç¥æµ’å…®ï¼Œé‡‡æ¹æ¿‘ä¹‹ç„èŠã€‚ä½™æƒ…æ‚¦å…¶æ·‘ç¾å…®ï¼Œå¿ƒæŒ¯è¡è€Œä¸æ€¡ã€‚æ— è‰¯åª’ä»¥æ¥æ¬¢å…®ï¼Œæ‰˜å¾®æ³¢è€Œé€šè¾ã€‚æ„¿è¯šç´ ä¹‹å…ˆè¾¾ï¼Œè§£ç‰ä½©è€Œè¦ä¹‹ã€‚å—Ÿä½³äººä¹‹ä¿¡ä¿®ï¼Œç¾Œä¹ ç¤¼è€Œæ˜è¯—ã€‚æŠ—ç¼ç¶ä»¥å’Œäºˆå…®ï¼ŒæŒ‡æ½œå·è€Œä¸ºæœŸã€‚æ‰§çœ·çœ·ä¹‹æ¬¾å®å…®ï¼Œæƒ§æ–¯çµä¹‹æˆ‘æ¬ºã€‚æ„Ÿäº¤ç”«ä¹‹å¼ƒè¨€å…®ï¼Œæ€…çŠ¹è±«è€Œç‹ç–‘ã€‚æ”¶å’Œé¢œè€Œé™å¿—å…®ï¼Œç”³ç¤¼é˜²ä»¥è‡ªæŒã€‚...&lt;/p&gt;&lt;/body&gt;&lt;/html&gt; â” ä»¤äººå›°æƒ‘çš„æ˜¯ï¼šå›¾ç‰‡è®¾ç½®æµ®åŠ¨å·²ç»è„±ç¦»æ–‡æ¡£æµä¸åº”è¯¥é‡Šæ”¾äº†ç©ºé—´ä¸å†å½±å“å¸ƒå±€äº†ï¼Œä¸ºä»€ä¹ˆæ–‡å­—è¿˜èƒ½ç¯ç»•å®ƒå‘¢ï¼Ÿ å°±åƒæˆ‘ä»¬ä¿®æ”¹å›¾ç‰‡ä¸ºç»å¯¹å®šä½ï¼š 1234img &#123; position: absolute;&#125; æ–‡å­—ä¸å†ç¯ç»•ï¼Œè€Œæ˜¯å¥½åƒå½“å›¾ç‰‡ä¸å­˜åœ¨ä¸€æ ·ï¼š è¿™ä¹Ÿå°±æ˜¯ç»å¯¹å®šä½å’Œæµ®åŠ¨çš„æœ€å¤§åŒºåˆ«ï¼Œè™½ç„¶å®ƒä»¬éƒ½è„±ç¦»äº†æ–‡æ¡£æµï¼š ç»å¯¹å®šä½ä¸ä¼šå½±å“å¸ƒå±€å¥½åƒå®ƒä¸å­˜åœ¨ä¸€æ ·ï¼›ä½†æµ®åŠ¨ä¼šå½±å“å¸ƒå±€ï¼Œå…¶å®ƒå†…å®¹ï¼ˆåŒ…æ‹¬å…ƒç´ ï¼Ÿï¼‰ä¼šå›´ç»•å®ƒ ã€‚ æ¸…é™¤æµ®åŠ¨ï¼šclear ç»è¿‡ä¸Šé¢æµ®åŠ¨å­¦ä¹ ï¼šå…ƒç´ æµ®åŠ¨ä¹‹å‰åœ¨æ ‡å‡†æµä¸­ï¼Œæ˜¯ ç«–å‘æ’åˆ— çš„ï¼Œè€Œæµ®åŠ¨ä¹‹åå¯ä»¥ç†è§£ä¸º æ¨ªå‘æ’åˆ—ã€‚ è€Œæ¸…é™¤æµ®åŠ¨å¯ä»¥ æ‰“ç ´æ¨ªå‘æ’åˆ— ï¼Œä½†æ˜¯ æ¸…é™¤æµ®åŠ¨åªèƒ½åœ¨éœ€è¦è¢«å½±å“çš„å…ƒç´ å†…ä½¿ç”¨ ï¼Œè¯·çœ‹ä¸‹ä¾‹ï¼š å·²çŸ¥ä¸‹åˆ— div1ã€ div2 å…ƒç´ éƒ½æ˜¯å·¦æµ®åŠ¨ä»è€Œåœ¨ä¸€è¡Œæ˜¾ç¤ºï¼Œå¦‚ä½•ä½¿ div2 ç§»è‡³ä¸‹ä¸€è¡Œæ‰“ç ´æ¨ªå‘æ’åˆ—ï¼Ÿ å¦‚æœæˆ‘ä»¬å¢åŠ CSS æ ·å¼ï¼Œè®¾ç½® div1 å³è¾¹ä¸å…è®¸æœ‰æµ®åŠ¨å…ƒç´ ï¼š 1234.div1&#123; clear:right;&#125; å¾ˆä¸å¹¸ï¼Œè¿™æ˜¯ä¸èµ·ä½œç”¨çš„ï¼æˆ‘ä»¬å¸Œæœ›div2 ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œï¼Œé‚£ä¹ˆè¢«å½±å“çš„æ˜¯ div2ï¼Œæ‰€ä»¥åªèƒ½è®¾ç½® div2 å·¦è¾¹ä¸å…è®¸å­˜åœ¨æµ®åŠ¨å…ƒç´ ï¼š 1234.div2&#123; clear:left;&#125; è¿™æ ·å°±å¯ä»¥ä½¿å¾— div2 å‘ä¸‹ç§»åŠ¨ä¸€è¡Œã€‚ é‚£ä¹ˆï¼Œä¸‹åˆ— div1ã€ div2 å…ƒç´ éƒ½æ˜¯å³æµ®åŠ¨ï¼Œå¦‚ä½•ä½¿å¾—div2 ç§»è‡³ div1 ä¸‹è¾¹å‘¢ï¼Ÿ åŒä¸Šï¼Œè¢«å½±å“çš„æ˜¯ div2 å…ƒç´ ï¼Œé‚£ä¹ˆä¸å…è®¸ div2 å³è¾¹å­˜åœ¨æµ®åŠ¨å…ƒç´ å³å¯ï¼š 1234.div2&#123; clear:right;&#125; æº¢å‡ºï¼šoverflow å½“çˆ¶å…ƒç´ ä¸è®¾ç½®é«˜åº¦æ—¶å€™ï¼Œé«˜åº¦éšå†…å®¹å¢åŠ è‡ªé€‚åº”é«˜åº¦ã€‚ä½†æ˜¯å½“æˆ‘ä»¬æŒ‡å®šäº†çˆ¶å…ƒç´ çš„é«˜åº¦ï¼Œå¦‚ä½•è§£å†³å†…å®¹å¢åŠ æº¢å‡ºé—®é¢˜å‘¢ï¼Ÿ 1234567891011121314151617&lt;html&gt;&lt;head&gt;&lt;style&gt; div &#123; width: 850px; height: 60px; background-color: LightBlue; &#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;none&quot;&gt; è‹å­æ„€ï¼ˆqiÇoï¼‰ç„¶ï¼Œæ­£è¥Ÿå±åï¼Œè€Œé—®å®¢æ›°ï¼šâ€œä½•ä¸ºå…¶ç„¶ä¹Ÿï¼Ÿâ€å®¢æ›°ï¼šâ€œâ€˜æœˆæ˜æ˜Ÿç¨€ï¼Œä¹Œé¹Šå—é£â€™,æ­¤éæ›¹å­Ÿå¾·ä¹‹è¯—ä¹ï¼Ÿè¥¿æœ›å¤å£ï¼Œä¸œæœ›æ­¦æ˜Œã€‚å±±å·ç›¸ç¼ª(liÃ¡o)ï¼Œéƒä¹è‹è‹ï¼Œæ­¤éå­Ÿå¾·ä¹‹å›°äºå‘¨éƒè€…ä¹ï¼Ÿæ–¹å…¶ç ´è†å·ï¼Œä¸‹æ±Ÿé™µï¼Œé¡ºæµè€Œä¸œä¹Ÿï¼Œèˆ³(zhÃº)èˆ»(lÃº)åƒé‡Œï¼Œæ—Œ(jÄ«ng)æ——è”½ç©ºï¼Œé…¾(shi)é…’ä¸´æ±Ÿï¼Œæ¨ªæ§Š(shuÃ²)èµ‹è¯—ï¼Œå›ºä¸€ä¸–ä¹‹é›„ä¹Ÿï¼Œè€Œä»Šå®‰åœ¨å“‰?å†µå¾ä¸å­æ¸”æ¨µ(qiÃ¡o)äºæ±Ÿæ¸š(zhÇ”)ä¹‹ä¸Šï¼Œä¾£é±¼è™¾è€Œå‹éº‹(mÃ­)é¹¿,é©¾ä¸€å¶ä¹‹æ‰èˆŸï¼Œä¸¾åŒï¼ˆpÃ¡oï¼‰æ¨½ä»¥ç›¸å±ï¼ˆzhÇ”ï¼‰ã€‚å¯„èœ‰(fÃº)è£(yÃ³u)äºå¤©åœ°ï¼Œæ¸ºæ²§æµ·ä¹‹ä¸€ç²Ÿ(sÃ¹)ã€‚å“€å¾ç”Ÿä¹‹é¡»è‡¾(yÃº)ï¼Œç¾¡é•¿æ±Ÿä¹‹æ— ç©·ã€‚æŒŸï¼ˆxiÃ©ï¼‰é£ä»™ä»¥é¨æ¸¸ï¼ŒæŠ±æ˜æœˆè€Œé•¿ç»ˆã€‚çŸ¥ä¸å¯ä¹éª¤å¾—ï¼Œæ‰˜é—å“äºæ‚²é£ã€‚â€ &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®overflow å±æ€§å€¼ï¼ˆå…³é”®å­—ï¼‰ï¼š visibleï¼šé»˜è®¤å€¼ï¼Œè¶…å‡ºå†…å®¹ä¾æ—§å¯ä»¥æ˜¾ç¤ºä½†æ˜¯ä¼šæº¢å‡ºæ¡† scrollï¼šé˜»æ­¢æº¢å‡ºæ¡†ï¼Œè¶…å‡ºéƒ¨åˆ†å¯ä»¥æ‹–åŠ¨æ»šåŠ¨æ¡æ˜¾ç¤ºï¼ˆæ— è®ºæ˜¯å¦æº¢å‡ºéƒ½æ˜¾ç¤ºæ»šåŠ¨æ¡ï¼‰ hiddenï¼šéšè—å†…å®¹æº¢å‡ºéƒ¨åˆ†ï¼Œæº¢å‡ºéƒ¨åˆ†ä¸å¯è§ autoï¼šå¦‚æœå†…å®¹æº¢å‡ºè‡ªåŠ¨å‡ºç°æ»šåŠ¨æ¡é˜»æ­¢æº¢å‡º overflowï¼šhidden &amp; æµ®åŠ¨ &amp; å´©å¡Œ overflowï¼šhidden åœ¨å‰é¢æˆ‘ä»¬ä»‹ç»å¯ä»¥éšè—æº¢å‡ºå†…å®¹ï¼Œå®ƒè¿˜æœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š æ¸…é™¤æµ®åŠ¨ï¼šè§£å†³ç”±äºçˆ¶å…ƒç´ ä¸è®¾ç½®é«˜åº¦ï¼Œå­å…ƒç´ éƒ½æ˜¯æµ®åŠ¨å…ƒç´ ä½¿å¾—çˆ¶å…ƒç´ é«˜åº¦ä¸º0çš„é—®é¢˜ è§£é™¤åç¼©ï¼šè§£å†³çˆ¶ã€å­å…ƒç´ éæµ®åŠ¨å…ƒç´ ï¼Œç¬¬ä¸€ä¸ªå­å…ƒç´ è®¾ç½®margin-topå±æ€§ ï¼Œç­‰ä»·çˆ¶å…ƒç´ è®¾ç½®è¯¥å±æ€§é—®é¢˜ æ¸…é™¤æµ®åŠ¨ åœ¨å‰æˆ‘ä»¬çŸ¥é“ï¼Œçˆ¶çº§å…ƒç´  ä¸è®¾ç½®é«˜åº¦æ—¶ï¼Œé«˜åº¦éšç€å†…å®¹å¢åŠ è‡ªåŠ¨é€‚åº”ã€‚ ä½†æ˜¯å½“å­å…ƒç´ æ­¤æ—¶è®¾ç½®äº†æµ®åŠ¨float ï¼Œç”±äºå­å…ƒç´ å·²ç»è„±ç¦»äº†æ–‡æ¡£æµï¼Œçˆ¶å…ƒç´ æ£€æµ‹ä¸åˆ°å­å…ƒç´ é«˜åº¦ï¼Œé‚£ä¹ˆçˆ¶å…ƒç´ é«˜åº¦ == 0ã€‚ å­å…ƒç´ æµ®åŠ¨ä¾æ—§æ˜¾ç¤ºï¼Œåªæ˜¯çˆ¶å…ƒç´ é«˜åº¦ä¸º0å¥½ä¼¼éšè—äº† å¦‚æœè®¾ç½®äº†çˆ¶å…ƒç´ é«˜åº¦ï¼Œå­å…ƒç´ å¯ä»¥é‡æ–°æ˜¾ç¤ºï¼Œè¶…å‡ºéƒ¨åˆ†æº¢å‡º æ¯”å¦‚ä¸‹é¢é»‘è‰²çˆ¶çº§divåŒ…å«äº†ä¸¤ä¸ªè“ã€çº¢å­çº§div ã€‚ 1234567891011121314151617181920212223242526272829&lt;html&gt;&lt;head&gt;&lt;style&gt; .div &#123; background-color: black; &#125;.div1&#123; background-color: aqua; width: 100px; height: 100px;&#125;.div2&#123; background-color: red; width: 100px; height: 100px;&#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;div class=&quot;div&quot;&gt; &lt;div class=&quot;div1&quot;&gt;&lt;/div&gt; &lt;div class=&quot;div2&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; å¦‚æœæˆ‘ä»¬æŠŠä¸¤ä¸ªå­çº§div è®¾ç½®ä¸ºæµ®åŠ¨ï¼š 1234.div1,.div2&#123; float:left;&#125; ç¥å¥‡çš„å‘ç°å­çº§div1ã€div2 å­˜åœ¨è€Œé»‘è‰²çˆ¶çº§div æ¶ˆå¤±äº†ï¼å…¶å®ä¹Ÿå°±æ˜¯é«˜åº¦å˜ä¸º0äº†ã€‚ æˆ‘ä»¬æœ‰ä¸‰ç§è§£å†³åŠæ³•ï¼š ç¬¬ä¸€ç§ï¼šç»™çˆ¶å…ƒç´ è®¾ç½®é«˜åº¦ = 100ï¼Œä½¿å¾—çˆ¶çº§å…ƒç´ ä¸å› ä¸ºå­å…ƒç´ éƒ½ä¸ºæµ®åŠ¨å…ƒç´ ï¼Œé«˜åº¦è‡ªåŠ¨=0 ç¬¬äºŒç§ï¼šé»‘è‰²çˆ¶çº§div è®¾ç½® overflowï¼šhidden ï¼Œä½¿å¾—çˆ¶çº§å…ƒç´ å¯ä»¥åŒ…å«æµ®åŠ¨å­å…ƒç´  çˆ¶çº§div å‡ºç°äº†ï¼Œå…è®¸å­å…ƒç´ ä¸ºæµ®åŠ¨å…ƒç´ ï¼šé«˜åº¦ä¸ºå­å…ƒç´ é«˜åº¦ï¼Œå®½åº¦å› ä¸ºdiv æ˜¯å—å…ƒç´ å æ®ä¸€è¡Œã€‚ ç¬¬ä¸‰ç§ï¼šè®¾ç½® çˆ¶å…ƒç´ ä¸ºæµ®åŠ¨ float:leftï¼Œæ³¨æ„è¿™ç§æ–¹æ³•ä¼šä½¿å¾—çˆ¶å…ƒç´ ä¸å†æœ‰å— ç‹¬å ä¸€è¡Œ çš„ç‰¹æ€§ ä¹çœ‹å¥½åƒçˆ¶çº§å…ƒç´ æ²¡æœ‰å‡ºç°ï¼Œä½†æˆ‘ä»¬å®¡æŸ¥å…ƒç´ å¯å‘ç°div çˆ¶çº§æ ‡ç­¾ï¼šé«˜åº¦ = å­å…ƒç´ é«˜åº¦ï¼Œå®½åº¦ä¹Ÿå› ä¸ºè®¾ç½®æµ®åŠ¨ä¸å†ç‹¬å ä¸€è¡Œè‡ªåŠ¨è°ƒæ•´ä¸ºå­å…ƒç´ å®½åº¦ã€‚ ç‰¹åˆ«çš„ï¼šå¦‚æœæˆ‘ä»¬è®¾ç½®çˆ¶å…ƒç´ ä¸ºæµ®åŠ¨ float:rightï¼Œè€Œå­å…ƒç´ éƒ½æ˜¯å·¦æµ®åŠ¨ï¼Œä¼šä»¥çˆ¶å…ƒç´ ä¸ºå‡†ï¼š é¿å…å´©å¡Œ é¦–å…ˆæˆ‘ä»¬æ¥è®¤è¯†ä»€ä¹ˆæ˜¯å´©å¡Œï¼Ÿä¾æ—§ä»¥æœ€å¼€å§‹ç¤ºä¾‹ä¸ºä¾‹ï¼š æˆ‘ä»¬å°è¯•ç»™ç¬¬ä¸€ä¸ªå­å…ƒç´  div1 è®¾ç½®å¤–è¾¹è·ä¸Šä¸º50pxï¼š 1234.div1&#123; margin-top:50px;&#125; æˆ‘ä»¬æœŸå¾…å¾—åˆ°çš„æ•ˆæœæ˜¯ï¼š ä½†å®é™…æ˜¯ï¼š å°±å¥½åƒæ˜¯ç»™çˆ¶çº§å…ƒç´ div è®¾ç½®äº†ï¼šmargin-top:50px ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘ä»¬å¯ä»¥ï¼š ç»™çˆ¶å…ƒç´ div è®¾ç½® overflowï¼šhidden ï¼Œè¿™æ ·å¯ä»¥å¾—åˆ°æˆ‘ä»¬æœŸå¾…çš„æ•ˆæœ ç”±ä¸Šæˆ‘ä»¬å¾—çŸ¥æ»¡è¶³å´©å¡Œçš„æ¡ä»¶ï¼š çˆ¶å…ƒç´ ã€å­å…ƒç´ éƒ½ä¸æ˜¯æµ®åŠ¨å…ƒç´  ç¬¬ä¸€ä¸ªå­å…ƒç´ è®¾ç½®äº† margin-topå±æ€§ èªæ˜çš„ä½ ä¹Ÿå·²ç»æƒ³åˆ°ï¼Œå¦‚æœå­å…ƒç´ æ˜¯æµ®åŠ¨å…ƒç´ ä¹Ÿå¯ä»¥å®Œå…¨é¿å…å´©å¡Œï¼ˆæ— è®ºçˆ¶å…ƒç´ æ˜¯å¦æµ®åŠ¨ï¼‰ã€‚è¿™é‡Œä¸è¯¦è¿°ã€‚ ç¬¬äºŒéƒ¨åˆ†ï¼šCSS3 åŸºç¡€æ ·å¼ åœ†è§’ï¼šborder-radius æˆ‘ä»¬çŸ¥é“åœ¨CSSä¸–ç•Œé‡Œï¼Œä¸‡ç‰©çš†ä¸ºæ¡†ï¼Œæ¯ä¸ªå…ƒç´ éƒ½å¯è§†ä½œä¸ºæ¡†ã€‚é€šè¿‡ border-radius å±æ€§å¯æŒ‡å®šåœ†åŠå¾„ä¸ºRï¼ŒæŠŠå…ƒç´ æ¡† R*Ræ­£æ–¹å½¢å››è§’æ¢æˆ ----&gt; åŠå¾„ä¸º Rçš„1/4åœ†å½¢ã€‚ æ€ä¹ˆç†è§£ æŠŠå…ƒç´ æ¡†æ­£æ–¹å½¢å››è§’æ¢æˆ1/4åœ†å½¢ ï¼Ÿ æ¯”å¦‚æˆ‘ä»¬æŒ‡å®šdiv å…ƒç´ ï¼šå®½ = 150pxï¼Œé«˜ = 100px ï¼Œåœ†åŠå¾„ä¸º50px ã€‚ å¯ä»¥çœ‹åˆ°ï¼ŒåŸ 150px*100px çŸ©å½¢ï¼Œå®ƒå¯¹åº”å››è§’ 50px*50px çŸ©å½¢åŒºåŸŸè¢«æ›¿æ¢æˆåŠå¾„ = 50px çš„åŠåœ†ã€‚ âš ï¸ å¿…é¡»è®¾ç½®ï¼šåœ†åŠå¾„ â‰¤ {1/2 å®½ï¼Œ1/2 é«˜} min ï¼Œå¦‚æœè¶…è¿‡åˆ™å½¢æˆå›¾å½¢ç­‰ä»·äºï¼šåœ†åŠå¾„ = {1/2 å®½ï¼Œ1/2 é«˜}min é‚£ä¹ˆæ€ä¹ˆç”Ÿæˆåœ†å½¢å‘¢ï¼Ÿ æ˜¾ç„¶ï¼Œå½“æ¡†å®½é«˜ç›¸ç­‰æ°ä¸ºæ­£æ–¹å½¢ï¼Œæˆ‘ä»¬åœ¨æŠŠç”Ÿæˆçš„å››ä¸ª1/4åœ†åŠå¾„ = 1/2æ­£æ–¹å½¢è¾¹é•¿ã€‚é‚£ä¹ˆä¾¿å¯å½¢æˆåœ†å½¢ã€‚ 1234567div&#123; width: 150px; height: 150px; background-color:aquamarine; border-radius: 75px;&#125; è¿›ä¸€æ­¥ç†è§£ åœ¨å‰é¢æˆ‘ä»¬ç†è§£border-radius å±æ€§ä¸ºï¼š æŒ‡å®šåœ†åŠå¾„ä¸ºRï¼ŒæŠŠå…ƒç´ æ¡† R*Ræ­£æ–¹å½¢å››è§’æ¢æˆ ----&gt; åŠå¾„ä¸º Rçš„1/4åœ†å½¢ï¼š 1border-radius: 50px; å®é™…åº”è¯¥ä¸ºï¼š æŒ‡å®šé•¿ã€çŸ­åŠå¾„ä¸ºR1ã€R2ï¼ŒæŠŠå…ƒç´ æ¡† R1*R2çŸ©å½¢å››è§’æ¢æˆ ----&gt; é•¿ã€çŸ­åŠå¾„åˆ†åˆ«ä¸º R1ã€R2çš„1/4æ¤­åœ†å½¢ï¼š 1border-radius: 50px / 40px; /* åªæŒ‡å®šå…¶ä¸­ä¸€ä¸ªé•¿åº¦ï¼Œåˆ™é•¿çŸ­åŠå¾„ç›¸ç­‰ï¼Œä¹Ÿå°±æ˜¯1/4åœ† */ ç”šè‡³ä½ è¿˜å¯ä»¥ä¾æ¬¡æŒ‡å®šï¼šå·¦ä¸Š --&gt; å³ä¸Š --&gt; å³ä¸‹ â€”&gt; å·¦ä¸‹çš„1/4æ¤­åœ†é•¿çŸ­åŠå¾„ï¼ˆé¡ºæ—¶é’ˆï¼‰ 1border-radius: 50px 40px 30px 20px / 40px 30px 20px 10px ; å°è¯•æŠŠæŒ‡å®šdiv å…ƒç´ ï¼šå®½ = 150pxï¼Œé«˜ = 100px ï¼Œå˜ä¸ºæ¤­åœ†å½¢ ã€‚ æ˜¾ç„¶ï¼Œåªè¦æŠŠå››è§’ï¼šé•¿åŠå¾„ = 1/2 å®½ï¼ŒçŸ­åŠå¾„ = 1/2 é«˜çš„å››ä¸ª1/4æ¤­åœ†å½¢å³å¯ï¼š 1234567div&#123; width: 150px; height: 100px; background-color:aquamarine; border-radius: 75px / 50px;&#125; ä¼ªå…ƒç´  ::beforeã€::after åœ¨å‰é¢æˆ‘ä»¬æœ‰ä¸€ä¸ªæ¦‚å¿µå«åš ä¼ªç±» ï¼Œä¸€ç§ç”¨æ¥æè¿°çŠ¶æ€çš„å…³é”®å­— ï¼š å¸¸ç”¨ä¼ªç±»ï¼š:hoverã€:linkã€:activeã€:targetã€:not()ã€:focus ç­‰ è€Œå¸¸ç”¨ä¼ªå…ƒç´ æœ‰ï¼š å¸¸ç”¨ä¼ªå…ƒç´ ï¼š::first-letterã€::first-lineã€::beforeã€::afterã€::selection ç­‰ å…¶ä¸­ä¼ªå…ƒç´  ::beforeã€::afterï¼Œç‰¹æœ‰contentæ ·å¼ç”¨æ¥ç»™å†…å®¹å…ƒç´  å‰ã€å æ’å…¥é¢å¤–çš„å…ƒç´  ã€‚ ä¸ºä»€ä¹ˆç§°ä¼ªå…ƒç´ ä¸º â€œä¼ªâ€ ï¼Ÿå®ƒæœ‰ä»€ä¹ˆç‰¹ç‚¹å‘¢ï¼Ÿ æ— æ³•å®¡æŸ¥ï¼šå®é™…åœ¨DOMæ–‡æ¡£ä¸­æ²¡æœ‰ç”Ÿæˆè¿™äº›å…ƒç´ ï¼Œåªæ˜¯è¡¨é¢å¯è§ï¼Œå®¡æŸ¥å…ƒç´ æ²¡æœ‰ç”Ÿæˆ content ï¼šç‰¹æœ‰contentæ ·å¼ï¼Œç”¨äºæ·»åŠ å†…å®¹ï¼Œå¯ä»¥ä¸ºç©ºä½†ä¸èƒ½çœç•¥ï¼ åˆ©ç”¨ä¼ªå…ƒç´ å¯ä»¥åšå‡ºä¸€äº›éå¸¸æœ‰æ„æ€çš„åŠŸèƒ½ï¼Œæ¯”å¦‚å„ç§å›¾å½¢ã€å°å›¾æ ‡ç­‰ã€‚ ç”Ÿæˆå›¾å½¢ï¼šè±å½¢ã€å…­è§’æ˜Ÿç­‰ è¯•åˆ†æï¼šä¸‹é¢è±å½¢ç”Ÿæˆä»£ç ã€‚ 123456789101112131415161718192021#test&#123; width: 0; height: 0; border-left: 50px solid transparent; border-right: 50px solid transparent; border-bottom: 50px solid red; position: relative;&#125;#test:after &#123; content: &#x27;&#x27;; position: absolute; left: -50px; top: 50px; width: 0; height: 0; border-left: 50px solid transparent; border-right: 50px solid transparent; border-top: 50px solid red; &#125; ç”Ÿæˆä¸Šä¸‰è§’ 123456789#test&#123; width: 0; height: 0; border-left: 50px solid transparent; border-right: 50px solid transparent; border-bottom: 50px solid red; position: relative;&#125; æ ¹æ®å‰é¢ border å±æ€§è®¾ç½®æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆç”Ÿæˆä¸Šä¸‰è§’ï¼š å®½é«˜è®¾ç½®ä¸º0åï¼Œä¸Šä¸‹å·¦å³å››ä¸ªè¾¹æ¡†è§’éƒ½è®¾ç½®ä¸ºï¼š 1border-x: 50px solid transparent; ç„¶å border-bottom ã€ border-topé¢œè‰²è®¾ç½®ä¸ºçº¢è‰²ï¼Œborder-leftã€border-right è®¾ç½®ä¸ºé€æ˜ï¼š æœ€ååˆ é™¤æ‰border-top å±æ€§è®¾ç½®ï¼Œä½¿å¾—åªä¿ç•™ä¸‹åŠéƒ¨åˆ†ï¼Œè‡³æ­¤æˆåŠŸç”Ÿæˆä¸Šä¸‰è§’ï¼š æœ€åè®¾ç½®çš„ position: relative å±æ€§æ˜¯ä¸ºäº†æ–¹ä¾¿æ¥ä¸‹æ¥ç”Ÿæˆçš„ä¼ªå…ƒç´ è¿›è¡Œç»å¯¹å®šä½ã€‚ ç”Ÿæˆä¸‹ä¸‰è§’ ç…§çŒ«ç”»è™æˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªä¸‹ä¸‰è§’ï¼š 12345678910#test:after &#123; content: &#x27;&#x27;; /* ä¸ºç©ºï¼Œä½†ä¸èƒ½çœç•¥*/ position: absolute; width: 0; height: 0; border-left: 50px solid transparent; border-right: 50px solid transparent; border-top: 50px solid blue;&#125; çœ‹åˆ°è¿™æˆ‘ä»¬å¯¹ç”Ÿæˆçš„ä¸‹ä¸‰è§’çš„åˆå§‹ä½ç½®ä¸ç¦æœ‰äº›ç–‘æƒ‘ï¼š ä¸‹ä¸‰è§’ä¼ªå…ƒç´ æ˜¯ç»å¯¹å®šä½ï¼šå³ç›¸å¯¹äºæœ€è¿‘è®¾ç½®äº†positionå±æ€§çš„ç¥–å…ˆå…ƒç´  ï¼Œå¦‚æœæ²¡æœ‰åˆ™æ˜¯åŒ…å«å®ƒçš„æ¡†ã€‚ æŒ‰ç…§è¿™ä¸ªç†è®ºï¼Œ#test å¹¶ä¸æ˜¯ #test::after çš„ç¥–å…ˆå…ƒç´ ä¸ºä»€ä¹ˆè¿˜ç›¸å¯¹å®ƒå®šä½å‘¢ï¼Ÿ è¿™ä¸ªä¸å¤ªæ¸…æ¥šæš‚ä¸æã€‚ ä¸ºä»€ä¹ˆ #test::after ç»å¯¹å®šä½èµ·ç‚¹æ˜¯*#test* ä¸Šä¸­å¿ƒç‚¹ï¼ˆçº¢è‰²ä¸‰è§’å½¢é¡¶ç‚¹ï¼‰ï¼Ÿä¸åº”è¯¥æ˜¯å·¦ä¸Šè§’å—ï¼Ÿ ç¬¬ä¸€ï¼šç»å¯¹å®šä¹‰ä¸æ˜¯ç›¸å¯¹äºå…ƒç´ æ¡†çš„å·¦ä¸Šè§’ï¼Œè€Œæ˜¯å†…å®¹éƒ¨åˆ†å·¦ä¸Šè§’ã€‚ ç¬¬äºŒï¼šç”±äºå†…å®¹éƒ¨åˆ†ä¸º0ï¼Œæ‰€ä»¥å†…å®¹å·¦ä¸Šè§’å°±æ˜¯æ¡†ä¸­å¿ƒç‚¹ã€‚ ç¬¬ä¸‰ï¼šåˆå› ä¸ºæ¡†ä¸ŠåŠéƒ¨åˆ†æ²¡æœ‰ï¼Œä¸­å¿ƒç‚¹ä¸Šç§»ï¼Œä¹Ÿå°±æ˜¯ç°åœ¨çº¢è‰²ä¸‰è§’å½¢çš„é¡¶ç‚¹ã€‚ è°ƒæ•´å®šä½ æœ€åæˆ‘ä»¬è°ƒæ•´ä¸€ä¸‹ç”Ÿæˆçš„ä¸‹ä¸‰è§’å½¢åœ¨ä¸Šä¸‰è§’ä¸‹æ–¹ï¼Œå³å¯ç”Ÿæˆä¸€ä¸ªè±å½¢ï¼š 123456#test:after&#123; left: -50px; top: 50px; border-top: 50px solid red;&#125; åˆ¶ä½œå°å›¾æ ‡ å°è¯•åˆ¶ä½œåšä¸‹é¢ï¼šåˆ—è¡¨å·¦ä¾§ä¸‹ä¸‰è§’ä¸‹æ‹‰å›¾æ ‡ï¼Œæ³¨æ„å¤§å°ã€‚ 123456789101112131415161718192021222324252627282930313233343536&lt;html&gt;&lt;head&gt;&lt;style type=&quot;text/css&quot;&gt;div ul&#123; position: relative;&#125;#catalog ul::before&#123; content: &quot;&quot;; position: absolute; width: 0px; height: 0px; border-top: 8px solid red; border-right: 8px solid transparent; border-left: 8px solid transparent; left: 18px; top: 6px;&#125;div ul li&#123; text-indent: 12px; list-style-type: none;&#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;div id=&quot;catalog&quot;&gt; &lt;ul&gt;æˆ‘æ˜¯ä¸‹æ‹‰æ¡† &lt;li&gt;æˆ‘æ˜¯ä¸‹æ‹‰1&lt;/li&gt; &lt;li&gt;æˆ‘æ˜¯ä¸‹æ‹‰2&lt;/li&gt; &lt;li&gt;æˆ‘æ˜¯ä¸‹æ‹‰3&lt;/li&gt; &lt;/ul&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;"},{"title":"","date":"2022-01-03T13:57:21.711Z","updated":"2022-01-03T13:57:21.711Z","comments":true,"path":"NO_post/å¾…åš.html","permalink":"https://hwh.zone/NO_post/%E5%BE%85%E5%81%9A.html","excerpt":"","text":"Linux åŸºç¡€ç³»åˆ—ï¼š å®æˆ˜ç³»åˆ—ï¼šLinux ç«¯å£æ˜¯å¦é€šï¼Œæ›´æ¢åŠ¨æ€åº“ç‰ˆæœ¬ï¼Œæ›´æ¢åº“ç‰ˆæœ¬æ¯”å¦‚å¤šä¸ªPythonè½¯ç¡¬é“¾æ¥ã€æ”¾é€šç«¯å£ã€ä¹‹å‰çš„å…«è‚¡æ–‡æ•´ç†"},{"title":"æ•°æ®åº“ï¼ˆäºŒï¼‰RedisåŸºç¡€","date":"2022-01-02T11:36:19.077Z","updated":"2021-12-03T03:41:02.915Z","comments":true,"path":"NO_post/æ•°æ®åº“ï¼ˆäºŒï¼‰RedisåŸºç¡€å­¦ä¹ .html","permalink":"https://hwh.zone/NO_post/%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E4%BA%8C%EF%BC%89Redis%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0.html","excerpt":"","text":"ä¸€ã€Redis 1.1æ¦‚è¿° redisæ˜¯ä¸€æ¬¾é«˜æ€§èƒ½çš„NOSQLç³»åˆ—çš„éå…³ç³»å‹æ•°æ®åº“ ã€‚ NoSQL(NoSQL = Not Only SQL) : â€œä¸ä»…ä»…æ˜¯SQLâ€ï¼Œæ˜¯ä¸€é¡¹å…¨æ–°çš„æ•°æ®åº“ç†å¿µï¼Œæ³›æŒ‡éå…³ç³»å‹çš„æ•°æ®åº“ã€‚ä¸ºäº†è§£å†³å¤§è§„æ¨¡æ•°æ®é›†åˆå¤šé‡æ•°æ®ã€é«˜æ€§èƒ½æŸ¥è¯¢æ•°æ®å¸¦æ¥çš„æŒ‘æˆ˜ï¼Œå°¤å…¶æ˜¯å¤§æ•°æ®åº”ç”¨éš¾é¢˜ã€‚ ç”±ç¼“å­˜åˆ°redisè§£é‡Šã€‚ ç¼“å­˜æ€æƒ³ ç›´æ¥æ“ä½œæ•°æ®åº“é€šå¸¸æ˜¯å¾ˆè´¹æ—¶çš„ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠåœ¨å†…å­˜å¼€è¾Ÿä¸€å—åŒºåŸŸä½œä¸ºç¼“å­˜ï¼Œå­˜å‚¨ç»å¸¸è®¿é—®çš„æ•°æ®ã€‚ ç¼“å­˜å…·ä½“å®ç° ç¼“å­˜çš„å®ç°æœ‰å¤šç§ï¼Œæ¯”å¦‚å¼€è¾Ÿä¸€å—å†…å­˜ç©ºé—´ä½¿ç”¨mapé›†åˆã€‚ä½†æ˜¯ï¼š mapæ˜¯è¿è¡Œåˆ°JVMä¸­ï¼Œåªèƒ½å›ºå®šåˆ†é…ä¸€äº›å†…å­˜ï¼Œæ¯”è¾ƒå° mapé›†åˆå¦‚æœæ¶‰åŠåˆ†å¸ƒå¼ï¼Œæ²¡æ³•éƒ¨ç½² redis æ•´å°æœºå™¨å†…å­˜éƒ½å¯ä»¥è¢«redisæ•°æ®åº“åˆ†é… å¯ä»¥éƒ¨ç½²åˆ†å¸ƒå¼ NOSQLå’Œå…³ç³»å‹ å„è‡ªä¼˜åŠ¿å¯¹æ¯” NOSQL å…³ç³»å‹ ã€æ€§èƒ½ã€‘ï¼šNOSQLæ˜¯åŸºäºé”®å€¼å¯¹çš„ï¼Œï¼ˆ1ï¼‰ä¸éœ€è¦ç»è¿‡SQLå±‚çš„è§£æï¼Œæ‰€ä»¥æ€§èƒ½éå¸¸é«˜ï¼ˆ2ï¼‰NOSQLæ•°æ®åº“å°†æ•°æ®å­˜å‚¨äºç¼“å­˜ä¹‹ä¸­ï¼Œè€Œä¸æ˜¯ç¡¬ç›˜ï¼ŒæŸ¥è¯¢å¿« ã€å¤æ‚æŸ¥è¯¢ã€‘ï¼šå¤æ‚æŸ¥è¯¢å¯ä»¥ç”¨SQLè¯­å¥æ–¹ä¾¿çš„åœ¨ä¸€ä¸ªè¡¨ä»¥åŠå¤šä¸ªè¡¨ä¹‹é—´åšéå¸¸å¤æ‚çš„æ•°æ®æŸ¥è¯¢ ã€å­˜å‚¨æ ¼å¼ã€‘ï¼šNOSQLçš„å­˜å‚¨æ ¼å¼æ˜¯key,valueå½¢å¼ï¼Œå¯ä»¥å­˜å‚¨åŸºç¡€ç±»å‹ä»¥åŠå¯¹è±¡æˆ–è€…æ˜¯é›†åˆç­‰å„ç§æ ¼å¼ï¼Œè€Œæ•°æ®åº“åˆ™åªæ”¯æŒåŸºç¡€ç±»å‹ ã€å®‰å…¨æ€§&amp;äº‹åŠ¡ã€‘ï¼šäº‹åŠ¡æ”¯æŒä½¿å¾—å¯¹äºå®‰å…¨æ€§èƒ½å¾ˆé«˜çš„æ•°æ®è®¿é—®è¦æ±‚å¾—ä»¥å®ç° ã€æ‰©å±•æ€§ã€‘ï¼šå…³ç³»å‹æ•°æ®åº“æœ‰ç±»ä¼¼joinè¿™æ ·çš„å¤šè¡¨æŸ¥è¯¢æœºåˆ¶çš„é™åˆ¶å¯¼è‡´æ‰©å±•å¾ˆè‰°éš¾ï¼›NOSQLåŸºäºé”®å€¼å¯¹ï¼Œæ•°æ®ä¹‹é—´æ²¡æœ‰å…³è”å…³ç³»ï¼Œæ‰€ä»¥éå¸¸å®¹æ˜“æ°´å¹³æ‰©å±• æ€»ç»“ å…³ç³»å‹æ•°æ®åº“ä¸NoSQLæ•°æ®åº“å¹¶éå¯¹ç«‹è€Œæ˜¯äº’è¡¥çš„å…³ç³»ï¼š å…³ç³»æ•°æ®åº“ï¼š æ‰€æœ‰æ•°æ®å­˜å‚¨çš„ä½ç½® NoSQLï¼š å¤‡ä»½ï¼ˆç¼“å­˜ï¼‰å…³ç³»æ•°æ®åº“çš„ï¼ˆå¸¸ç”¨ï¼Ÿï¼‰æ•°æ® redisçš„åº”ç”¨åœºæ™¯ ç¼“å­˜ï¼ˆæœ€é‡è¦ï¼‰ èŠå¤©å®¤çš„åœ¨çº¿å¥½å‹åˆ—è¡¨ ä»»åŠ¡é˜Ÿåˆ—ã€‚ï¼ˆç§’æ€ã€æŠ¢è´­ã€12306ç­‰ç­‰ï¼‰ åº”ç”¨æ’è¡Œæ¦œ ç½‘ç«™è®¿é—®ç»Ÿè®¡ æ•°æ®è¿‡æœŸå¤„ç†ï¼ˆå¯ä»¥ç²¾ç¡®åˆ°æ¯«ç§’ åˆ†å¸ƒå¼é›†ç¾¤æ¶æ„ä¸­çš„sessionåˆ†ç¦» ä¸‹è½½&amp;å®‰è£… ä¸‹è½½ ä¸‹è½½åœ°å€ï¼šhttps://github.com/tporadowski/redis/releases/ å¯åŠ¨ è§£å‹ååˆ†åˆ«å¯åŠ¨ï¼š å¯åŠ¨æœåŠ¡ç«¯ï¼šredis-server.exe ï¼ˆä¸è¦å…³é—­ï¼ï¼ï¼‰ å¯åŠ¨æœåŠ¡ç«¯ï¼šredis-cli.exe å®‰è£…å®Œæˆå¼€å§‹æ„‰å¿«ä½¿ç”¨äº†ã€‚ 1.2 æ•°æ®ç»“æ„ åŸºæœ¬æ“ä½œ rediså­˜å‚¨çš„æ˜¯ï¼š&lt;key,value&gt;æ ¼å¼çš„æ•°æ®ï¼Œå…¶ä¸­keyéƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œvalueæœ‰5ç§ä¸åŒçš„æ•°æ®ç»“æ„ : å­—ç¬¦ä¸²ç±»å‹ï¼š string 1234567891011# 1.å­˜å‚¨ : set &lt;key&gt; &lt;value&gt;127.0.0.1:6379&gt; set username zhangsan ok# 2.è·å–: get &lt;key&gt; 127.0.0.1:6379&gt; get username &quot;zhangsan&quot;# 3.åˆ é™¤ 127.0.0.1:6379&gt; del username (integer) 1 å“ˆå¸Œç±»å‹ hash ï¼š mapæ ¼å¼ 1234567891011121314# 1.å­˜å‚¨ï¼šhset &lt;key&gt; &lt;field&gt; &lt;value&gt;127.0.0.1:6379&gt; hset myhash username lisi(integer) 1# 2.è·å–: hget &lt;key&gt; &lt;field&gt;127.0.0.1:6379&gt; hget myhash username &quot;lisi&quot;127.0.0.1:6379&gt; hgetall myhash # è·å–æ‰€æœ‰é”®å€¼å¯¹1) &quot;username&quot; 2) &quot;lisi&quot;# 3.åˆ é™¤: hdel &lt;key&gt; &lt;field&gt;127.0.0.1:6379&gt; hdel myhash username (integer) 1 åˆ—è¡¨ç±»å‹ list ï¼š linkedlistæ ¼å¼ã€‚æ”¯æŒé‡å¤å…ƒç´  å…¶å®æ›´ç›¸å½“ä¸€ä¸ªé˜Ÿåˆ—ã€‚ 12345678910111213141516171819# 1.å­˜å‚¨ # lpush &lt;key&gt; &lt;value1&gt;: å°†å…ƒç´ åŠ å…¥åˆ—è¡¨å¤´éƒ¨# rpush &lt;key&gt; &lt;value1&gt;: å°†å…ƒç´ åŠ å…¥åˆ—è¡¨å°¾éƒ¨127.0.0.1:6379&gt; lpush myList a(integer) 1 127.0.0.1:6379&gt; lpush myList b (integer) 2 127.0.0.1:6379&gt; rpush myList c(integer) 3# 2.è·å– ï¼šlrange &lt;key&gt; &lt;start&gt; &lt;end&gt; èŒƒå›´è·å–127.0.0.1:6379&gt; lrange myList 0 -1 1) &quot;b&quot; 2) &quot;a&quot; 3) &quot;c&quot;# 3.åˆ é™¤ï¼š# lpop keyï¼š åˆ é™¤åˆ—è¡¨æœ€å·¦è¾¹çš„å…ƒç´ ï¼Œå¹¶å°†å…ƒç´ è¿”å› # rpop keyï¼š åˆ é™¤åˆ—è¡¨æœ€å³è¾¹çš„å…ƒç´ ï¼Œå¹¶å°†å…ƒç´ è¿”å› é›†åˆç±»å‹ set ï¼š ä¸å…è®¸é‡å¤å…ƒç´  1234567891011121314# 1. å­˜å‚¨ï¼šsadd &lt;key&gt; &lt;value1&gt; &lt;value2&gt; ...127.0.0.1:6379&gt; sadd myset a b(integer) 2 127.0.0.1:6379&gt; sadd myset a(integer) 0 # æ²¡æœ‰æ›´æ–°æˆåŠŸï¼# 2. è·å–æ‰€æœ‰å…ƒç´ ï¼šsmembers &lt;key&gt;127.0.0.1:6379&gt; smembers myset 1) &quot;a&quot; 2) &quot;b&quot; # 3. åˆ é™¤ï¼šsrem &lt;key&gt; &lt;value&gt; 127.0.0.1:6379&gt; srem myset a (integer) 1 æœ‰åºé›†åˆç±»å‹ zsetï¼šä¸å…è®¸é‡å¤å…ƒç´ ï¼Œä¸”å…ƒç´ æœ‰é¡ºåº æ¯ä¸ªå…ƒç´ éƒ½ä¼šå…³è”ä¸€ä¸ªdoubleç±»å‹çš„åˆ†æ•°ã€‚redis æ­£æ˜¯é€šè¿‡åˆ†æ•°æ¥ä¸ºé›†åˆä¸­çš„æˆå‘˜è¿›è¡Œä»å°åˆ°å¤§çš„æ’åºã€‚ 12345678910111213141516171819202122232425# 1.å­˜å‚¨ï¼šzadd &lt;key&gt; &lt;score&gt; &lt;value&gt; 127.0.0.1:6379&gt; zadd mysort 60 zhangsan (integer) 1 127.0.0.1:6379&gt; zadd mysort 50 lisi (integer) 1 127.0.0.1:6379&gt; zadd mysort 80 wangwu (integer) 1 # 2. è·å–ï¼šzrange &lt;key&gt; &lt;start&gt; &lt;end&gt; &lt;withscores&gt;ï¼ˆæœ‰åºï¼‰127.0.0.1:6379&gt; zrange mysort 0 -1 1) &quot;lisi&quot; 2) &quot;zhangsan&quot; 3) &quot;wangwu&quot; 127.0.0.1:6379&gt; zrange mysort 0 -1 1) &quot;zhangsan&quot;2) &quot;60&quot; 3) &quot;wangwu&quot; 4) &quot;80&quot; 5) &quot;lisi&quot;6) &quot;500&quot;# 3.åˆ é™¤ï¼šzrem &lt;key&gt; &lt;value&gt; 127.0.0.1:6379&gt; zrem mysort lisi (integer) 1 é€šç”¨å‘½ä»¤ **keys *** : æŸ¥è¯¢æ‰€æœ‰çš„é”® å¦‚æœä¸çŸ¥é“è‡ªå·±ä»¥å‰å­˜å‚¨çš„é”®ï¼Œå¯ä»¥ç”¨è¿™ä¸ªå‘½ä»¤è·å–ï¼š **type ** ï¼š è·å–é”®å¯¹åº”çš„valueçš„ç±»å‹ ä½†æ˜¯å¦‚æœæƒ³çŸ¥é“ï¼Œâ€œmysetâ€å¯¹åº”æ˜¯ä»€ä¹ˆç±»å‹å‘¢ï¼Ÿ **del **ï¼šåˆ é™¤æŒ‡å®šçš„key value åŒºåˆ†å…·ä½“æ•°æ®ç»“æ„ï¼Œå¦‚hashmap ï¼Œåˆ é™¤æŸä¸ªæ•°æ®ã€‚del &lt;key&gt; ç›´æ¥å°†å­˜å‚¨çš„hashmapéƒ½åˆ äº†ã€‚ 1.3 æŒä¹…åŒ– redisæ˜¯ä¸€ä¸ªå†…å­˜æ•°æ®åº“ï¼Œå½“redisæœåŠ¡å™¨é‡å¯ / ç”µè„‘é‡å¯ï¼Œæ•°æ®ä¼šä¸¢å¤±ï¼Œæˆ‘ä»¬å¯ä»¥å°†rediså†…å­˜ä¸­çš„æ•°æ®æŒä¹…åŒ–ä¿å­˜åˆ°ç¡¬ç›˜çš„æ–‡ä»¶ä¸­ã€‚ RDBï¼ˆé»˜è®¤ï¼‰ åœ¨ä¸€å®šé—´éš”æ—¶é—´ä¸­ï¼Œæ£€æµ‹keyçš„å˜åŒ–æƒ…å†µï¼Œç„¶åæŒä¹…åŒ–æ•°æ® ã€‚ ç¼–è¾‘redis.windwos.confæ–‡ä»¶ 123456# after 900 sec (15 min) if at least 1 key changed save 900 1 # after 300 sec (5 min) if at least 10 keys changed save 300 10 # after 60 sec if at least 10000 keys changedsave 60 10000 ï¼ˆæµ‹è¯•ï¼‰è®¾ç½®æ¯10sæ£€æµ‹ä¸€ä¸‹ï¼Œå¦‚æœè‡³å°‘æœ‰5ä¸ªkeyå‘ç”Ÿæ”¹å˜å°±ä¿å­˜ 12# after 60 sec if at least 10000 keys changedsave 10 5 ç„¶åæˆ‘ä»¬ä¿®æ”¹set ç±»å‹myseté›†åˆé”®name 5æ¬¡ï¼š å…³é—­æœåŠ¡å™¨ï¼Œå’Œå®¢æˆ·ç«¯ã€‚ä½†æ˜¯å¯ä»¥çœ‹è§åœ¨redisç›®å½•ä¸‹ç”Ÿæˆäº†dump.rdb æ–‡ä»¶ï¼š å†æ¬¡å¯åŠ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ï¼Œå‘ç”Ÿname ä¾æ—§åœ¨ï¼š AOF æ—¥å¿—è®°å½•çš„æ–¹å¼ï¼Œå¯ä»¥è®°å½•æ¯ä¸€æ¡å‘½ä»¤çš„æ“ä½œã€‚å¯ä»¥æ¯ä¸€æ¬¡å‘½ä»¤æ“ä½œåï¼ŒæŒä¹…åŒ–æ•°æ®ã€‚ ç¼–è¾‘redis.windwos.confæ–‡ä»¶ é¦–å…ˆå¼€å¯AOF : å°†ä¸‹é¢ä¿®æ”¹ä¸º appendonly yes ä¿®æ”¹AOFæ¨¡å¼ é»˜è®¤æ˜¯ appendfsync everysec ï¼ˆæ¯ç§’è¿›è¡Œè®°å½•ï¼‰ appendfsync always ï¼š æ¯æ¬¡æ“ä½œéƒ½æŒä¹…åŒ– appendfsync no ï¼š ä¸è¿›è¡ŒæŒä¹…åŒ–ï¼Œæ­¤æ—¶redis==ç›¸å½“å¤§mapé›†åˆ ï¼ˆæµ‹è¯•ï¼‰é‡å¯æœåŠ¡ç«¯ã€å®¢æˆ·ç«¯ é¦–å…ˆå¯ä»¥å‘ç°ï¼Œå¤šäº†ä¸ªappendonly .aof æ–‡ä»¶ éšæ„ä¿å­˜ä¸€äº›æ•°æ®ï¼Œé‡å¯æ•°æ®åº“å¯ä»¥å‘ç°æ•°æ®ä¾æ—§å­˜åœ¨ã€‚ 1.4 Jediså¿«é€Ÿå…¥é—¨ Jedisæ˜¯ ä¸€æ¬¾javaæ“ä½œredisæ•°æ®åº“çš„å·¥å…·ã€‚ å¿«é€Ÿå®è·µï¼š 123456//1. è·å–è¿æ¥ Jedis jedis = new Jedis(&quot;localhost&quot;,6379); //2. æ“ä½œ jedis.set(&quot;username&quot;,&quot;zhangsan&quot;); //3. å…³é—­è¿æ¥ jedis.close(); Jedisæ“ä½œ ä¸‹é¢æ˜¯APIç›¸å…³è°ƒç”¨ï¼Œå…ˆä¸å­¦äº†ã€‚ 1.5 è¿æ¥æ±  ä»‹ç» å·¥å…·æ  1.6 æ¡ˆä¾‹åˆ†æ å…ˆä»sqlæ•°æ®åº“æŸ¥è¯¢ï¼Œç„¶åå¯ä½¿ç”¨redisç¼“å­˜ä¸€äº›ä¸ç»å¸¸å‘ç”Ÿå˜åŒ–çš„æ•°æ® ã€‚ ç¯å¢ƒæ­å»º æŸ¥è¯¢æ•°æ®åº“ redisç¼“å­˜ä¼˜åŒ–"},{"title":"æ•°æ®åº“ï¼ˆä¸€ï¼‰MySQLåŸºç¡€ç¬”è®°","date":"2022-01-02T12:12:03.325Z","updated":"2021-12-03T03:41:02.908Z","comments":true,"path":"NO_post/æ•°æ®åº“ï¼ˆä¸€ï¼‰MySQLåŸºç¡€ç¬”è®°.html","permalink":"https://hwh.zone/NO_post/%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E4%B8%80%EF%BC%89MySQL%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0.html","excerpt":"","text":"ç¬¬ä¸€ç«  ï¼šåˆè¯† MySQL 1.1 MySQL æ¦‚è¿° SQL &amp; å„å¤§æ•°æ®åº“ ä»€ä¹ˆæ˜¯ SQL? SQL æ˜¯ Structured Query Language ï¼ˆç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼‰ç¼©å†™ ï¼Œå¯ç”¨æ¥å¯¹æ•°æ®åº“è¿›è¡Œï¼šå¢ã€åˆ ã€æŸ¥ã€æ”¹ ç­‰æ“ä½œã€‚ SQL å¤§å°å†™ç‰¹ç‚¹ï¼Ÿ å…³é”®å­—ï¼šSQL è¯­è¨€å…³é”®å­—ä¸åŒºåˆ†å¤§å°å†™ï¼Œåœ¨æœ¬ç¬”è®°ä¸­æ€»æ˜¯å¤§å†™ è¡¨å &amp; åˆ—å ï¼šæœ‰äº›æ•°æ®åº“åŒºåˆ†ã€æœ‰äº›ä¸åŒºåˆ† ï¼Œåœ¨æœ¬ç¬”è®°ä¸­æ€»æ˜¯å°å†™ ä¸åŒæ“ä½œç³»ç»Ÿï¼šåŒä¸€ä¸ªæ•°æ®åº“å¯èƒ½åœ¨Linuxä¸ŠåŒºåˆ†å¤§å°å†™ï¼Œåœ¨Windowsä¸Šä¸åŒºåˆ†å¤§å°å†™ã€‚ SQL å’Œå„å¤§æ•°æ®åº“ä¹‹é—´çš„å…³ç³»ï¼Ÿ SQL å·²ç»è¢«ANSIç»„ç»‡å®šä¹‰ä¸ºæ ‡å‡† ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨æ ‡å‡† SQL è¯­è¨€ï¼Œç†è®ºä¸Šæ‰€æœ‰æ•°æ®éƒ½å¯ä»¥æ”¯æŒã€‚ä½†æ˜¯å„å¤§æ•°æ®éƒ½åœ¨æ ‡å‡† SQL ä¸Šè¿›è¡Œäº†æ‰©å±•ã€‚ å¦‚æœåªä½¿ç”¨æ ‡å‡† SQL æ ¸å¿ƒåŠŸèƒ½ï¼Œé‚£ä¹ˆæ‰€æœ‰æ•°æ®åº“éƒ½å¯ä»¥æ‰§è¡Œï¼Œè€Œå¯¹äºå„ä¸ªæ•°æ®åº“å„è‡ª æ–¹è¨€ï¼ˆæ‰©å±•åŠŸèƒ½ï¼‰ï¼Œåªèƒ½åœ¨å„è‡ªæ•°æ®åº“ä¸‹æ‰§è¡Œã€‚ å…³ç³»æ¨¡å‹ mysql åŸºäºå…³ç³»æ¨¡å‹ï¼Œå¯¹åº”å…¶ä¹Ÿå°±æ˜¯ä¸€èˆ¬æˆ‘ä»¬å¸¸è¯´çš„å…³ç³»æ•°æ®åº“ã€‚ ä»€ä¹ˆæ˜¯å…³ç³»æ¨¡å‹ï¼Ÿ å…³ç³»æ¨¡å‹æŠŠæ•°æ®çœ‹ä½œæ˜¯ä¸€ä¸ªäºŒç»´è¡¨æ ¼ï¼Œä»»ä½•æ•°æ®éƒ½å¯ä»¥é€šè¿‡*è¡Œå· +åˆ—å·* æ¥å”¯ä¸€ç¡®å®šï¼š ID å§“å ç­çº§ID æ€§åˆ« å¹´é¾„ 1 å°æ˜ 201 M 9 2 å°çº¢ 202 F 8 å…³ç³»æ•°æ®åº“ åŒå‰ï¼ŒåŸºäºå…³ç³»æ¨¡å‹æ•°æ®åº“éƒ½å¯ç§°ä¸ºå…³ç³»æ•°æ®åº“ï¼Œå¸¸ç”¨å…³ç³»æ•°æ®åº“å¯åˆ†ä¸ºï¼š åˆ†ç±» ä¸¾ä¾‹ å•†ç”¨ Oracleã€SQL Serverã€DB2 å¼€æº MySQLï¼ŒPostgreSQL æ¡Œé¢ Accessï¼šé€‚åˆæ¡Œé¢åº”ç”¨ç¨‹åºä½¿ç”¨ åµŒå…¥å¼ Sqliteï¼šé€‚åˆæ‰‹æœºåº”ç”¨å’Œæ¡Œé¢ç¨‹åº æ•°æ®ç±»å‹ å¯¹äºæ¯ä¸€ä¸ªå…³ç³»è¡¨ï¼Œéœ€è¦å®šä¹‰ï¼šæ¯ä¸€åˆ—åå­— &amp; æ¯ä¸€åˆ—æ•°æ®ç±»å‹ï¼Œå¸¸ç”¨æ•°æ®ç±»å‹å¦‚ä¸‹ åç§° ç±»å‹ è¯´æ˜ INT æ•´å‹ 4å­—èŠ‚æ•´æ•°ç±»å‹ï¼ŒèŒƒå›´çº¦ Â±21äº¿ BIGINT é•¿æ•´å‹ 8å­—èŠ‚æ•´æ•°ç±»å‹ï¼ŒèŒƒå›´çº¦ Â±922äº¿äº¿ REAL æµ®ç‚¹å‹ 4å­—èŠ‚æµ®ç‚¹æ•°ï¼ŒèŒƒå›´çº¦ Â±-1038 DOUBLE æµ®ç‚¹å‹ 8å­—èŠ‚æµ®ç‚¹æ•°ï¼ŒèŒƒå›´çº¦ Â±10308 DECIMAL(M,N) é«˜ç²¾å°æ•° ç”±ç”¨æˆ·æŒ‡å®šç²¾åº¦çš„å°æ•°ï¼Œä¾‹å¦‚ï¼ŒDECIMAL(20,10) è¡¨ç¤ºä¸€å…±20ä½ï¼Œå…¶ä¸­å°æ•°10ä½ï¼Œé€šå¸¸ç”¨äºè´¢åŠ¡è®¡ç®— CHAR(N) å®šé•¿å­—ä¸² å­˜å‚¨æŒ‡å®šé•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼ŒCHAR(100) æ€»æ˜¯å­˜å‚¨100ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸² VARCHAR(N) å˜é•¿å­—ä¸² å­˜å‚¨å¯å˜é•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼ŒVARCHAR(100) å¯ä»¥å­˜å‚¨0~100ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸² BOOLEAN å¸ƒå°” å­˜å‚¨ True æˆ–è€… False DATE æ—¥æœŸ å­˜å‚¨æ—¥æœŸï¼Œä¾‹å¦‚ï¼Œ2018-06-22 TIME æ—¶é—´ å­˜å‚¨æ—¶é—´ï¼Œä¾‹å¦‚ï¼Œ12:20:59 DATETIME æ—¥æœŸ &amp; æ—¶é—´ å­˜å‚¨æ—¥æœŸ+æ—¶é—´ï¼Œä¾‹å¦‚ï¼Œ2018-06-22 12:20:59 è¿˜æœ‰ä¸€äº›ç‰¹æ®Šç±»å‹ï¼šJSON ç­‰ã€‚ 1.2 å®‰è£… MySQL å®‰è£…å‚è€ƒï¼šMySQL-mysql 8.0.11å®‰è£…æ•™ç¨‹ 1.2.1 ä¸‹è½½ ç‚¹å‡»ä¸‹è½½ ï¼šMySQL-8.0.16-winx64.zip ä¸‹è½½åœ°å€ ä¸ç”¨ç™»é™†ï¼Œç›´æ¥ç‚¹å‡»ä¸‹é¢è“å­—ï¼šNo thanks,just start my download ï¼Œå³æµè§ˆå™¨å¼€å§‹ä¸‹è½½ã€‚ 1.2.2 è§£å‹ æµè§ˆå™¨é»˜è®¤ä¸‹è½½ zip å‹ç¼©åŒ…ä½ç½®ï¼šC:\\Users\\86151\\Downloads\\mysql-8.0.16-winx64.zipï¼Œè§£å‹åˆ°ä½ æŒ‡å®šä½ç½®ã€‚ æ¯”å¦‚æˆ‘è§£å‹åˆ°ï¼šD:\\è½¯ä»¶\\mysql-8.0.16-winx64 1.2.3 é…ç½®ç¯å¢ƒå˜é‡ å¸¸è§„æ“ä½œï¼šæœç´¢ é«˜çº§ç³»ç»Ÿè®¾ç½® --&gt; ç¯å¢ƒå˜é‡ --&gt; ç³»ç»Ÿå˜é‡ --&gt; é€‰ä¸­Path --&gt; æ–°å»ºï¼š å˜é‡å€¼ï¼šå³è§£å‹åbinæ‰€åœ¨ç›®å½•åœ°å€ï¼šD:\\è½¯ä»¶\\mysql-8.0.16-winx64\\binã€‚ 1.2.4 åˆå§‹åŒ– my.ini ç”±äºè§£å‹ç›®å½•å¹¶æ²¡æœ‰å‘ç° my.ini æ–‡ä»¶ï¼Œæ‰€ä»¥è¦è‡ªè¡Œåˆ›å»ºï¼Œåˆ›å»ºä½ç½®ï¼šD:\\è½¯ä»¶\\mysql-8.0.16-winx64\\my.ini æ–°å»º .txt æ–‡æœ¬æ–‡ä»¶ï¼Œå†™å…¥ï¼š âš ï¸ æ³¨æ„ï¼Œä¸‹é¢ basedir &amp; datedir ï¼Œä¸€å®šæ˜¯ä½ è‡ªå·±çš„ mysql å®‰è£…ç›®å½•ï¼ 1234567891011121314151617181920212223242526[mysqld]# è®¾ç½®3306ç«¯å£port=3306# è®¾ç½®mysqlçš„å®‰è£…ç›®å½•basedir=D:\\è½¯ä»¶\\mysql-8.0.16-winx64 # åˆ‡è®°æ­¤å¤„ä¸€å®šè¦ç”¨åŒæ–œæ \\\\# è®¾ç½®mysqlæ•°æ®åº“çš„æ•°æ®çš„å­˜æ”¾ç›®å½•datadir=D:\\è½¯ä»¶\\mysql-8.0.16-winx64\\\\Data # æ­¤å¤„åŒä¸Š# å…è®¸æœ€å¤§è¿æ¥æ•°max_connections=200# å…è®¸è¿æ¥å¤±è´¥çš„æ¬¡æ•°ã€‚è¿™æ˜¯ä¸ºäº†é˜²æ­¢æœ‰äººä»è¯¥ä¸»æœºè¯•å›¾æ”»å‡»æ•°æ®åº“ç³»ç»Ÿmax_connect_errors=10# æœåŠ¡ç«¯ä½¿ç”¨çš„å­—ç¬¦é›†é»˜è®¤ä¸ºUTF8character-set-server=utf8# åˆ›å»ºæ–°è¡¨æ—¶å°†ä½¿ç”¨çš„é»˜è®¤å­˜å‚¨å¼•æ“default-storage-engine=INNODB# é»˜è®¤ä½¿ç”¨â€œmysql_native_passwordâ€æ’ä»¶è®¤è¯default_authentication_plugin=mysql_native_password[mysql]# è®¾ç½®mysqlå®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†default-character-set=utf8[client]# è®¾ç½®mysqlå®¢æˆ·ç«¯è¿æ¥æœåŠ¡ç«¯æ—¶é»˜è®¤ä½¿ç”¨çš„ç«¯å£port=3306default-character-set=utf8 ç„¶åé‡åä¸ºï¼šmy.ini å³å¯ã€‚ 1.2.5 å¼€å§‹å®‰è£…mysql é¦–å…ˆæ³¨æ„ï¼Œå®‰è£… mysql å¿…é¡»ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ cmd ï¼Œæ‰€ä»¥win10ä¸‹ï¼šæœç´¢cmd â€”&gt; ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ ç„¶åä¾æ¬¡è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š åˆ‡æ¢åˆ° bin ç›®å½•ä¸‹ 1C:\\Windows\\system32&gt; cd D:\\è½¯ä»¶\\mysql-8.0.16-winx64\\bin åˆå§‹åŒ–æ•°æ®åº“ å‡ºç°é”™è¯¯ï¼Œä¸€èˆ¬æ˜¯ my.ini ç›®å½•æ²¡æœ‰é…ç½®å¥½ï¼Œè§ä¸Šã€‚ 1C:\\Windows\\system32&gt; mysqld --initialize --console æ³¨æ„ï¼Œä¸Šå›¾ç”Ÿæˆäº†ä¸€ä¸ªä¸´æ—¶å¯†ç ï¼šI_?6&gt;&amp;l*_sw( ï¼Œè®°ä½å®ƒç¨åä¼šç”¨åˆ°ã€‚ å®‰è£…æœåŠ¡ ä½¿ç”¨ mysqld --install [æœåŠ¡å] ï¼ŒæœåŠ¡åå¯ä¸å†™ï¼Œé»˜è®¤ä¸º mysql 1C:\\Windows\\system32&gt; mysqld --install ç„¶åï¼Œé€šè¿‡ net start mysql å¯åŠ¨æœåŠ¡ï¼š å‡ºé”™ï¼šæœåŠ¡æ— æ³•å¯åŠ¨ã€‚åæ¥å‘ç° my.ini æ–‡ä»¶çš„basedir &amp; datedir æ²¡æœ‰æˆåŠŸä¿å­˜ä¿®ä¸ºè‡ªå·±çš„å®‰è£…è·¯å¾„ã€‚ 123C:\\Windows\\system32&gt; net start mysqlMySQL æœåŠ¡æ­£åœ¨å¯åŠ¨ .MySQL æœåŠ¡å·²ç»å¯åŠ¨æˆåŠŸã€‚ å…¶ä½™è¡¥å……ï¼ˆä»¥ä¸‹å‘½ä»¤ä¸è¦æ‰§è¡Œï¼‰ï¼š 12net stop mysql # åœæ­¢mysqlæœåŠ¡sc delete MySQL/mysqld -remove # å¸è½½mysqlæœåŠ¡ æ›´æ”¹å¯†ç  é¦–å…ˆï¼Œè¿›å…¥åˆ° mysqlï¼š 1C:\\Windows\\system32&gt; mysql -u root -p ä¼šè¦æ±‚è¾“å…¥å¯†ç ï¼Œå¯†ç å°±æ˜¯ä¸Šé¢ç”Ÿæˆçš„ä¸´æ—¶å¯†ç ï¼šI_?6&gt;&amp;l*_sw( ã€‚ æ­£ç¡®è¾“å…¥åä¼šè¿›å…¥å‡ºç°æ¬¢è¿ç•Œé¢ï¼š ç„¶åï¼Œé”®å…¥è¯­å¥ä¿®æ”¹å¯†ç ä¸º 123456ï¼š 1mysql&gt; ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;123456&#x27;; ç¬¬äºŒç«  ï¼šå…³ç³»æ¨¡å‹ 2.1 ä¸»é”® è®°å½•ä¸å­—æ®µ åœ¨å…³ç³»æ•°æ®åº“ä¸­ï¼Œä¸€å¼ è¡¨ä¸­çš„æ¯ä¸€è¡Œæ•°æ®è¢«ç§°ä¸ºä¸€æ¡è®°å½•ï¼Œä¸€æ¡è®°å½•å°±æ˜¯ç”±å¤šä¸ªå­—æ®µç»„æˆçš„ ã€‚ id class_id name gender score 1 1 å°æ˜ M 90 2 1 å°çº¢ F 95 å¦‚ä¸Šå›¾å…±æœ‰ 2 æ¡è®°å½•ï¼Œæ¯æ¡è®°å½•æœ‰ 5ä¸ªå­—æ®µã€‚ ä¸»é”®ä½œç”¨ ä¸»é”®ç”¨æ¥åŒºåˆ†ä¸åŒè®°å½•ï¼Œå¦‚ä¸Šè¡¨ id åˆ™å¯ç”¨æ¥åŒºåˆ†ä¸åŒè®°å½•ã€‚ ä¸»é”®é€‰å–åŸåˆ™ ä¸»é”®ä¸å¾—è½»æ˜“ä¿®æ”¹ã€‚ ä¸»é”®æ˜¯ç”¨æ¥å”¯ä¸€å®šä½è®°å½•çš„ï¼Œä¿®æ”¹äº†ä¸»é”®ï¼Œä¼šé€ æˆä¸€ç³»åˆ—çš„å½±å“ã€‚ ä»»ä½•ä¸šåŠ¡ç›¸å…³å­—æ®µä¸ç”¨ä½œä¸»é”®ã€‚ å¦‚ï¼Œèº«ä»½è¯å·ä¹Ÿæ˜¯ä¸€ç§ä¸šåŠ¡åœºæ™¯ï¼Œä½†æ˜¯å¦‚æœèº«ä»½è¯å·å‡ä½ã€å˜æ›´ï¼Œä¸»é”®ä¸å¾—ä¸ä¿®æ”¹ï¼Œå¯¹ä¸šåŠ¡äº§ç”Ÿå·¨å¤§å½±å“ã€‚ åŒç†ï¼Œè¿˜æœ‰ï¼šæ‰‹æœºå·ã€é‚®ç®±å·ç­‰ã€‚ ä¸»é”® id ä¸¤ç§ç±»å‹ é€šå¸¸é€‰å–å’Œä¸šåŠ¡å®Œå…¨æ— å…³å­—æ®µï¼Œå¯å‘½åä¸º id ï¼Œå¸¸è§ idå­—æ®µç±»å‹ä¸ºï¼š è‡ªå¢æ•´æ•°ç±»å‹ æ•°æ®åº“ä¼šåœ¨æ’å…¥æ•°æ®æ—¶è‡ªåŠ¨ä¸ºæ¯ä¸€æ¡è®°å½•åˆ†é…ä¸€ä¸ªè‡ªå¢ä¸é‡å¤æ•´æ•°ï¼Œä¸ç”¨è‡ªå·±é¢„å…ˆç”Ÿæˆä¸»é”®ã€‚ GUIDç±»å‹ å¦‚ï¼š8f55d96b-8acc-4636-8cb8-76bf8abc2f57 æ˜¯ä¸€ä¸ª GUID æ ‡è¯†ç¬¦ã€‚ GUID å³ Globally Unique Identifierï¼ˆå…¨çƒå”¯ä¸€æ ‡è¯†ç¬¦ï¼‰ï¼Œæ˜¯å¾®è½¯ä½¿ç”¨çš„ä¸€ä¸ªæœ¯è¯­ï¼Œç”±ä¸€ä¸ªç‰¹å®šçš„ç®—æ³•ï¼Œç»™æŸä¸€ä¸ªå®ä½“ï¼Œå¦‚Wordæ–‡æ¡£ï¼Œåˆ›å»ºä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ï¼ŒGUIDå€¼å°±æ˜¯è¿™ä¸ªå”¯ä¸€çš„æ ‡è¯†ç ã€‚ è”åˆä¸»é”® å…³ç³»æ•°æ®åº“å®é™…ä¸Šè¿˜å…è®¸é€šè¿‡å¤šä¸ªå­—æ®µå”¯ä¸€æ ‡è¯†è®°å½•ï¼Œå³ä¸¤ä¸ªæˆ–æ›´å¤šçš„å­—æ®µéƒ½è®¾ç½®ä¸ºä¸»é”®ï¼Œè¿™ç§ä¸»é”®è¢«ç§°ä¸ºè”åˆä¸»é”®ã€‚ id_num id_type other columns 1 A â€¦ 2 A â€¦ 2 B â€¦ å¦‚ä¸Šè¡¨ï¼Œid_num &amp; id_type åŒæ—¶ä½œä¸ºä¸»é”®æ ‡è¯†æ¯ä¸€è¡Œæ•°æ®ï¼ˆæ¯ä¸€æ¡è®°å½•ï¼‰ï¼Œå…è®¸å…¶ä¸­ä¸€ä¸ªä¸»é”®é‡å¤ï¼Œåªè¦ä¸éƒ½é‡å¤å³å¯ã€‚ 2.2 å¤–é”® ä»€ä¹ˆæ˜¯å¤–é”®ï¼Ÿ åœ¨ä¸€å¼ è¡¨ä¸­ï¼Œé€šè¿‡æŸä¸ªå­—æ®µï¼Œå¯ä»¥æŠŠæ•°æ®å¯å¦ä¸€å¼ è¡¨è”ç³»èµ·æ¥ï¼Œè¿™ç§åˆ—ç§°ä¸ºå¤–é”®ã€‚ å¦‚ï¼Œåœ¨ä¸‹åˆ—æœ‰ä¸¤å¼ æ„æˆ ä¸€å¯¹å¤š å…³ç³»è¡¨ä¸­ï¼š âš ï¸ ä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹å¤šï¼šæè¿°çš„æ˜¯ä¸¤ä¸ªè¡¨ä¹‹é—´çš„å…³ç³»ï¼Œå•ä¸ªè¡¨ä¸å­˜åœ¨è¿™ç§æè¿°ï¼ å¦‚ï¼šä¸‹ä¸¤è¡¨ï¼Œclass è¡¨ä¸­ æ¯ä¸ª ç­çº§å¯ä»¥å¯¹åº” student è¡¨ä¸­ å¤š ä¸ªå­¦ç”Ÿï¼Œé‚£ä¹ˆè¿™å°±æ˜¯ä¸€å¯¹å¤šå…³ç³»ï¼› åŒç†ï¼Œå¦‚æœå­˜åœ¨ä¸€å¼  studentID è¡¨ï¼Œæ¯ä¸ªå­¦å·å’Œ student è¡¨ æ¯ä¸ªå­¦ç”Ÿ ä¸€ä¸€å¯¹åº”ï¼Œå°±æ˜¯ ä¸€å¯¹ä¸€å…³ç³»ã€‚ â€‹ student id name other columnsâ€¦ 1 å°æ˜ â€¦ 2 å°çº¢ â€¦ â€‹ class id name other columnsâ€¦ 1 ä¸€ç­ â€¦ 2 äºŒç­ â€¦ å¦‚ä½•åœ¨ student è¡¨ä¸­ï¼ŒæŸ¥åˆ°å°æ˜æ‰€å±å“ªä¸ªç­çº§å‘¢ï¼Ÿ åœ¨ student è¡¨ä¸­åŠ å…¥å­—æ®µ class_id ï¼Œå…³è” class è¡¨ï¼š â€‹ student id class_id name other columnsâ€¦ 1 1 å°æ˜ â€¦ 2 1 å°çº¢ â€¦ å¦‚ä½•é€šè¿‡ç¼–ç¨‹å®ç°å¤–é”®å‘¢ï¼Ÿ é¦–å…ˆéœ€è¦åœ¨è¡¨ä¸­å¢åŠ ä¸€åˆ— class_id ï¼Œç„¶åæ·»åŠ å¤–é”®çº¦æŸï¼š 1234ALTER TABLE student ADD CONSTRAINT fk_class_id -- è‡ªå®šä¹‰çº¦æŸå FOREIGN KEY (class_id) -- æŒ‡å®šstudentè¡¨ï¼Œå¤–é”®å­—æ®µREFERENCES class (id); -- æŒ‡å®šclassè¡¨ï¼Œå…³è”å¤–é”®å­—æ®µ å¦‚æœéœ€è¦åˆ é™¤ä¸€ä¸ªå¤–é”®çº¦æŸï¼š 12ALTER TABLE studentDROP FOREIGN KEY fk_class_id; å‰é¢ä»‹ç»äº†ï¼šä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šï¼Œé‚£ä¹ˆå¤šå¯¹å¤šå…³ç³»å¦‚ä½•å®ç°ï¼Ÿ æˆ‘ä»¬çŸ¥é“ï¼Œä¸Šé¢ student è¡¨ &amp; class è¡¨ ä¸€å¯¹å¤šå…³ç³»æ˜¯å•å‘çš„ï¼Œä¸€ä¸ªç­çº§å¯ä»¥å¯¹åº”å¤šä¸ªå­¦ç”Ÿï¼Œåä¹‹ä¸æˆç«‹ã€‚ å¦‚æœå­˜åœ¨ä¸¤ä¸ªè¡¨ï¼Œæœ‰åŒå‘ä¸€å¯¹å¤šå…³ç³»ï¼Œå¦‚ä¸‹é¢ teacher è¡¨ &amp; class è¡¨ ï¼š â€‹ teacher id name 1 å¼ è€å¸ˆ 2 ç‹è€å¸ˆ â€‹ class id name other columnsâ€¦ 1 ä¸€ç­ â€¦ 2 äºŒç­ â€¦ åœ¨è¿™ä¸¤å¼ è¡¨ä¸­ï¼Œä¸€ä¸ªè€å¸ˆå¯ä»¥å¯¹åº”å¤šä¸ªç­çº§ï¼Œä¸€ä¸ªç­çº§å¯¹åº”å¤šä¸ªè€å¸ˆï¼Œåˆ™æ˜¯åŒå‘ä¸€å¯¹å¤šå…³ç³»ã€‚ è¦å®ç° å¤šå¯¹å¤š ï¼Œåˆ™é€šè¿‡ä¸­é—´è¡¨å…³è”è¿™ä¸¤ä¸ªä¸€å¯¹å¤šå…³ç³»å³å¯ï¼š â€‹ ä¸­é—´è¡¨ id teacher_id class_id 1 1 1 2 1 2 3 2 1 4 2 2 2.3 ç´¢å¼• ç´¢å¼•çš„ä½œç”¨ï¼Ÿ ç´¢å¼•æ³¨æ„æœ‰ä¸¤ä¸ªä½œç”¨ï¼šä¸€ã€åŠ å¿«æŸ¥æ‰¾è®°å½•é€Ÿåº¦ ï¼›äºŒã€é€šè¿‡ å”¯ä¸€ç´¢å¼• ä¿è¯æŸä¸€åˆ—å€¼å…·æœ‰å”¯ä¸€æ€§ã€‚ åŠ å¿«ç´¢å¼• å¦‚ä¸‹é¢å­˜åœ¨ä¸€ä¸ª student è¡¨ ï¼š â€‹ student id class_id name gender score 1 1 å°æ˜ M 90 2 1 å°çº¢ F 95 3 1 å°å†› M 88 æˆ‘ä»¬å¯ä»¥åŠ å¿« score åˆ—çš„æŸ¥è¯¢ï¼Œä¸ºå…¶åˆ›å»ºç´¢å¼•ï¼š 12ALTER TABLE student ADD INDEX idx_score(score); å½“ç„¶ï¼Œå¯ä»¥åŒæ—¶ä¸º score åˆ— &amp; name åˆ—åˆ›å»ºç´¢å¼•ï¼š 12ALTER TABLE studentADD INDEX idx_score_name(score,name); é‚£ä¹ˆæ˜¯å¦åˆ›å»ºç´¢å¼•ä¸€å®šå¯ä»¥åŠ å¿«ç´¢å¼•é€Ÿåº¦å‘¢ï¼Ÿ ç´¢å¼•çš„æ•ˆç‡å–å†³äºç´¢å¼•åˆ—çš„å€¼æ˜¯å¦æ•£åˆ—ï¼Œå³è¯¥åˆ—çš„å€¼å¦‚æœè¶Šäº’ä¸ç›¸åŒï¼Œé‚£ä¹ˆç´¢å¼•æ•ˆç‡è¶Šé«˜ã€‚ åä¹‹ï¼Œå¦‚æœè®°å½•çš„åˆ—å­˜åœ¨å¤§é‡ç›¸åŒçš„å€¼ï¼Œå¦‚ gender åˆ—ï¼Œå¤§çº¦ä¸€åŠè®°å½•å€¼æ˜¯Mï¼Œå¦ä¸€åŠæ˜¯Fï¼Œå¯¹è¯¥åˆ—åˆ›å»ºç´¢å¼•å°±æ²¡æœ‰æ„ä¹‰ï¼Œç”šè‡³ä¼šé™ä½æŸ¥è¯¢é€Ÿåº¦ã€‚ å”¯ä¸€ç´¢å¼• å‰é¢è¯´åˆ°ï¼Œä¸€äº›å’Œä¸šåŠ¡ç›¸å…³çš„ä¿¡æ¯å¦‚ï¼šèº«ä»½è¯å·ã€é‚®ç®±åœ°å€ç­‰ï¼Œä¸é€‚åˆä½œä¸ºä¸»é”®ã€‚ä½†æ˜¯å®ƒä»¬åˆæœ‰å”¯ä¸€æ€§ï¼Œå¦‚ä½•ä¿è¯å®ƒä»¬ä¸é‡å¤å‘¢ï¼Ÿ è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºå…¶æ·»åŠ å”¯ä¸€ç´¢å¼•ï¼Œä»¥ä¿è¯ student è¡¨ name å”¯ä¸€æ€§ä¸ºä¾‹ï¼š 12ALTER TABLE studentADD UNIQUE INDEX uni_name(name); æœ‰æ²¡æœ‰å…¶å®ƒä¿æŒå”¯ä¸€æ€§æ–¹æ³•ï¼Ÿ æˆ‘ä»¬è¿˜å¯ä»¥æ·»åŠ å”¯ä¸€æ€§çº¦æŸï¼š 123ALTER TABLE studentADD CONSTRAINT uni_nameUNIQUE (name); ç¬¬ä¸‰ç«  ï¼š å¢ã€åˆ ã€æ”¹ 2.0 ç™» é¦–å…ˆï¼Œæ‰“å¼€ cmd åˆ‡æ¢åˆ° mysql å®‰è£…çš„ bin ç›®å½•ä¸‹è¿›è¡Œç™»é™†ï¼š 1234C:\\Users\\86151&gt;cd D:\\è½¯ä»¶\\mysql-8.0.16-winx64\\binC:\\Users\\86151&gt;mysql -u root -pEnter password: ****** è¾“å…¥å¯†ç åï¼Œè¿›è¡ŒåŸºæœ¬ å¢ã€åˆ ã€æ”¹ æ“ä½œï¼ˆ æŸ¥è¯¢æ•°æ® ä¸‹ä¸€ç« ï¼‰ã€‚ 2.1 å¢ 2.1.1 CREATE åˆ›å»º åˆ›å»ºæ•°æ®åº“ è¯­æ³•ï¼šCREATE TABLE &lt;æ•°æ®åº“å&gt;; 1mysql&gt; CREATE DATABASE test; -- æ³¨æ„æœ‰åˆ†å· æˆ‘ä»¬å¯ä»¥ç”¨ SHOW DATEBASES å·²å­˜åœ¨çš„æ•°æ®åº“ï¼š åˆ›å»ºæ•°æ®è¡¨ åˆ›å»º class è¡¨ è¯­æ³•ï¼šCREATE TABLE &lt;è¡¨å&gt; (&lt;åˆ—å&gt; &lt;åˆ—ç±»å‹&gt;); 1234567mysql&gt; USE testï¼› -- å¿…é¡»è¦å…ˆå¼•ç”¨æ•°æ®åº“testmysql&gt; CREATE TABLE class -&gt; ( -&gt; id INT, -- è‡ªåŠ¨å¢é•¿C -&gt; name VARCHAR(10) NOT NULL, -&gt; PRIMARY KEY(id) -&gt; ); -- å‘½ä»¤è¦ä»¥åˆ†å·ç»“æŸ åˆ›å»º student è¡¨ 12345678910mysql&gt; CREATE TABLE student -&gt; ( -&gt; id INT , -&gt; class_id INT, -&gt; name VARCHAR(10) NOT NULL, -&gt; gender VARCHAR(1), -&gt; score INT, -&gt; PRIMARY KEY(id) -&gt; );Query OK, 0 rows affected (0.14 sec) è®¾ç½® student è¡¨å¤–é”® æˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥ï¼Œä¸º class_id å­—æ®µè®¾ç½®ä¸ºå¤–é”®ï¼š âš ï¸ è§£æé”™è¯¯ï¼šä¸‹é¢å…¶å®æ˜¯ä¸€æ¡è¯­å¥ï¼ŒåŠ  ï¼Œä¼šå‡ºé”™ï¼ âš ï¸[3780]é”™è¯¯ï¼šstudent è¡¨å¤–é”® class_id ä¸ classè¡¨ä¸­ idï¼ŒNULL &amp; UNSIGNED çº¦æŸè¦ä¸€è‡´ï¼ï¼ˆä¸ºäº†æ–¹ä¾¿åˆ äº†è¿™ä¸¤ä¸ªçº¦æŸï¼‰ 1234mysql&gt; ALTER TABLE student -&gt; ADD CONSTRAINT fk_class_id -&gt; FOREIGN KEY(class_id) -&gt; REFERENCES class(id); æŸ¥çœ‹è¡¨ è¯­æ³•ï¼šSHOW TABLESï¼› æŸ¥çœ‹å·²ç»å­˜åœ¨çš„æ•°æ®è¡¨å è¯­æ³•ï¼š DESCRIBE &lt;è¡¨å&gt; ; æŸ¥çœ‹è¡¨è¯¦ç»†ä¿¡æ¯ 2.1.2 ALTER + ADD ALTER ä¸»è¦ç”¨äºå­—æ®µã€çº¦æŸæ–¹é¢ã€‚ å¢åŠ å­—æ®µ ALTER å‘½ä»¤ + ADD å­å¥ ï¼šå¯ç”¨äºå¢åŠ å­—æ®µï¼ˆå¢åŠ åˆ—ï¼‰ student è¡¨å¢åŠ ä¸€åˆ—ï¼Œåä¸º xw ç±»å‹ä¸º VARCHAR(1)ï¼›ï¼ˆè¿˜å¯å¢åŠ é»˜è®¤å€¼ï¼‰ 12ALTER TABLE student ADD xw VARCHAR(1); å¢åŠ ç´¢å¼• student è¡¨ å­—æ®µ scoreå¢åŠ ç´¢å¼• 12ALTER TABLE student ADD INDEX idx_score(score); å¢åŠ ä¸»é”®çº¦æŸ ç»™ test_stu è¡¨æ–°å¢å­—æ®µ idï¼Œå¹¶è®¾ä¸ºä¸»é”®ã€‚ 12ALTER TABLE test_stuADD id INT NOT NULL AUTO_INCREMENT PRIMARY KEY; 1234insert into t_user( avatar, password, id, nickname, email, type, username) values (&#x27;https://unsplash.it/100/100?image=1005&#x27;,&#x27;96e79218965eb72c92a549dd5a330112&#x27;, &#x27;1&#x27;, &#x27;ç®¡ç†å‘˜&#x27;, &#x27;380141202@qq.com&#x27;, &#x27;1&#x27;, &#x27;hwh&#x27;); 2.1.3 INSERT æ’å…¥æ•°æ® ä¸‹é¢æ’å…¥è¡¨æ•°æ®è¯­æ³•ï¼Œæ˜¯ä¸€æ¡è¯­å¥æ•…æ²¡æœ‰ï¼Œ 123INSERT INTO &lt;è¡¨å&gt; ( &lt;å­—æ®µ1&gt;, &lt;å­—æ®µ2&gt;,...&lt;å­—æ®µN&gt; ) VALUES ( value1, value2,...valueN ); âš ï¸ å¦‚æœæ•°æ®å­—ç¬¦ç±»ä¼¼ï¼Œå¿…é¡»åŠ ä¸Šå•/åŒå¼•å·ï¼Œå¦‚ ï¼šâ€œvalueâ€ classè¡¨æ’å…¥æ•°æ® 123456mysql&gt; INSERT INTO class(id,name) -&gt; VALUES -&gt; (1,&quot;ä¸€ç­&quot;), -- å¤šè¡Œæ•°æ®ä»¥ , åˆ†éš” -&gt; (2,&quot;äºŒç­&quot;), -&gt; (3,&quot;ä¸‰ç­&quot;), -&gt; (4,&quot;å››ç­&quot;); student è¡¨æ’å…¥æ•°æ® ç”±äºä»£ç è¾ƒé•¿ï¼Œç”¨ Notepad++ å†™å¥½ä»£ç ä¿å­˜ test.sqlï¼šSOURCE &lt;test.sqlæ–‡ä»¶åœ°å€&gt; æ‰§è¡Œã€‚ 12345678910111213141516-- ç”±äºä»£ç è¾ƒé•¿ï¼Œä¸‹é¢æ˜¯åœ¨Notepad++ä¸­ç¼–è¾‘ï¼Œè€Œéå‘½ä»¤è¡Œä¸­INSERT INTO student(id,class_id,name,gender,score)VALUES (1,1,&quot;å°æ˜&quot;,&quot;M&quot;,90),(2,1,&quot;å°çº¢&quot;,&quot;F&quot;,95),(3,1,&quot;å°å†›&quot;,&quot;M&quot;,95),(4,1,&quot;å°ç±³&quot;,&quot;F&quot;,73),(5,2,&quot;å°ç™½&quot;,&quot;F&quot;,81),(6,2,&quot;å°å…µ&quot;,&quot;M&quot;,55),(7,2,&quot;å°æ—&quot;,&quot;M&quot;,85),(8,3,&quot;å°æ–°&quot;,&quot;F&quot;,91),(9,3,&quot;å°ç‹&quot;,&quot;M&quot;,89),(10,3,&quot;å°ä¸½&quot;,&quot;F&quot;,88);-- ä¸‹é¢åœ¨cmdä¸­æ‰§è¡Œï¼Œæ³¨æ„ä¸è¦å¸¦ ï¼›ï¼ï¼mysql&gt; source D:\\hwh\\uploadToGit\\code\\mysql\\test.sql æŸ¥çœ‹è¡¨ä¸­æ•°æ® å®é™…å°±æ˜¯æŸ¥è¯¢æ•°æ® ï¼šSELECT * FROM &lt;è¡¨å&gt;; 2.2 åˆ  2.2.1 DROP åˆ é™¤æ•°æ®åº“ è¯­æ³•ï¼šDROP DATABASE &lt;æ•°æ®åº“å&gt;; 1mysql&gt; DROP DATABASE hwh; åˆ é™¤æ•°æ®è¡¨ è¯­æ³•ï¼šDROP TABLE &lt;è¡¨å&gt;; 1mysql&gt; DROP TABLE temp_table; 2.2.2 DELETE åˆ é™¤è¡¨ä¸­è®°å½• ä¸ºäº†æµ‹è¯•æ˜¯å¦åˆ é™¤ï¼Œåœ¨ class è¡¨ä¸­ï¼Œå¢åŠ ä¸€è¡Œè®°å½•ï¼šï¼ˆ5ï¼Œâ€œäº”ç­â€ï¼‰ è¯­æ³•ï¼šDELETE FROM &lt;è¡¨å&gt; WHERE &lt;æ¡ä»¶&gt;ï¼› 1mysql&gt; DELETE FROM class WHERE id=5; ç»è¿‡æµ‹è¯•ï¼Œè®°å½•è¢«åˆ é™¤ã€‚ 2.2.3 ALTER + DROP åˆ é™¤å­—æ®µã€é»˜è®¤å€¼ ALTER å‘½ä»¤ + DROP å­å¥ ï¼šåˆ é™¤å­—æ®µï¼ˆåˆ—ï¼‰ã€æˆ–è€…åˆ é™¤æŒ‡å®šé»˜è®¤å€¼ åˆ é™¤é»˜è®¤å€¼ï¼š 1mysql&gt; ALTER TABLE student ALTER bust_size DROP DEFAULT; åˆ é™¤å­—æ®µï¼ˆåˆ—ï¼‰ï¼š 1mysql&gt; ALTER TABLE student DROP bust_size; åˆ é™¤ä¸»/å¤–é”®çº¦æŸ è¯­æ³•ï¼š ALTER TABLE &lt;è¡¨å&gt; DROP FOREGIN/PRIMARY KEY &lt;å¤–é”®å&gt;; 1ALTER TABALE test_stu DROP PRIMARY KEY ; --ä¸»é”®åªæœ‰ä¸€ä¸ªä¸ç”¨æŒ‡å®šåå­— åˆ é™¤ç´¢å¼• 1 2.3 æ”¹ ä»¥ä¸‹æ“ä½œéƒ½åŸºäº student è¡¨ï¼š 2.3.1 UPDATE è¯­æ³•ï¼šUPDATE &lt;è¡¨å&gt; SET &lt;å­—æ®µ1&gt; = &lt;æ–°å€¼1&gt; , ... WHERE &lt;æ¡ä»¶1&gt; [AND | OR] &lt;æ¡ä»¶2&gt;.. âš ï¸ SET è®¾ç½®å¤šä¸ªå€¼ç”¨ ï¼Œåˆ†éš”ï¼› WHERE è®¾ç½®å¤šä¸ªæ¡ä»¶ç”¨ AND ã€OR åˆ†éš”ï¼› æ›´æ–°æŸè¡Œè®°å½•å­—æ®µå€¼ ä¿®æ”¹ id = 10 è®°å½•ï¼Œname å­—æ®µå€¼ã€‚ 123UPDATE student SET name=&#x27;åˆ˜å©·&#x27;,score=89 WHERE id=10; ä¿®æ”¹æ‰€æœ‰è®°å½•æŸå­—æ®µå€¼ æ‰€æœ‰äººæˆç»© +1åˆ†ã€‚ 123-- ä¸åŠ  WHERE é™å®šï¼ŒåŒæ—¶SETå¯ç”¨è¡¨è¾¾å¼UPDATE student SET score=score+1; 2.3.2 ALTER ALTER å‘½ä»¤ä¸»è¦æ˜¯åœ¨æˆ‘ä»¬ï¼Œä¿®æ”¹&lt;è¡¨å&gt; ï¼›åˆ é™¤æˆ–å¢åŠ  &lt;å­—æ®µ&gt;ï¼›ä¿®æ”¹&lt;å­—æ®µç±»å‹&gt;ã€&lt;å­—æ®µå&gt;ã€‚ å’Œ UPDATE åŒºåˆ«ï¼Ÿ ALTER æ¯” UPDATE ç€çœ¼äºæ›´å®è§‚çš„å­—æ®µä¸Šï¼Œè€ŒUPDATE æ˜¯ä¿®æ”¹è®°å½•æŸå­—æ®µ å…·ä½“å€¼ ï¼› ALTER ä¸ä»…å¯ä»¥æ›´æ–°ï¼Œè¿˜å¯ä»¥è¿›è¡Œ åˆ é™¤ã€å¢åŠ æ“ä½œï¼› ALTER è¿˜å¯ç”¨äºä¿®æ”¹ &lt;è¡¨å&gt;ã€‚ è¯­æ³•æ ¼å¼ï¼Ÿ ALTER TABLE &lt;è¡¨å&gt; ADD/DROP/MODIFY/CHANGE/RENAME TO/ alter_tbl; ä¿®æ”¹å­—æ®µåã€ç±»å‹ã€é»˜è®¤å€¼ ALTER å‘½ä»¤ + MODIFY å­å¥ ï¼šå¯ç”¨äºä¿®æ”¹ å­—æ®µç±»å‹ã€è®¾ç½®åˆå§‹é»˜è®¤å€¼ ä¿®æ”¹ xw ç±»å‹ä¸º INTï¼Œåˆå§‹é»˜è®¤å€¼ B ; âš ï¸ MODIFY ã€CHANGE åªèƒ½åœ¨æ²¡æœ‰é»˜è®¤å€¼è®¾ç½®åˆå§‹é»˜è®¤å€¼ï¼Œä¸èƒ½ä¿®æ”¹é»˜è®¤å€¼ï¼ 12ALTER TABLE student MODIFY xw INT DEFAULT 2; ALTER å‘½ä»¤ + CHANGE å­å¥ ï¼šå¯ç”¨äºä¿®æ”¹ å­—æ®µå &amp; ç±»å‹ã€è®¾ç½®åˆå§‹é»˜è®¤å€¼ ä¿®æ”¹ xw åä¸º bust_size ï¼Œç±»å‹ä¸º BIGINT ; å’Œ MODIFY å­å¥ä¸åŒåœ¨äºï¼šCHANGE &lt;æ—§å­—æ®µå&gt; &lt;æ–°å­—æ®µå&gt; &lt;ç±»å‹&gt; 12ALTER TABLE student CHANGE xw bust_size BIGINT; ALTER å‘½ä»¤ + SETå­å¥ ï¼šé‡æ–°è®¾ç½®å­—æ®µé»˜è®¤å€¼ 123ALTER TABLE student ALTER bust_size SET DEFAULT 1; -- é»˜è®¤å€¼2--&gt;1 ä¿®æ”¹è¡¨å ALTER å‘½ä»¤ + RENAME TO å­å¥ ï¼šä¿®æ”¹è¡¨å 12ALTER TABLE student RENAME TO stu; ä¿®æ”¹å­˜å‚¨å¼•æ“ è¯­æ³•ï¼šALTER TABLE &lt;è¡¨å&gt; &lt;æ—§å¼•æ“å&gt; = &lt;æ–°å¼•æ“å&gt;; ç¬¬ä¸‰ç«  ï¼šæŸ¥è¯¢æ•°æ® 3.1 åŸºæœ¬æŸ¥è¯¢ SELECT * FROM &lt;è¡¨å&gt; è¿™æ˜¯ä¸å¸¦ WHERE æ¡ä»¶è¿›è¡ŒæŸ¥è¯¢ï¼ŒæŸ¥è¯¢æ˜¾ç¤ºï¼šæŒ‡å®šè¡¨æ‰€æœ‰æ•°æ®ã€‚ 1SELECT * FROM students; SELECT &lt;æ•°å­¦è¡¨è¾¾å¼&gt; SELECT å¯ç”¨äºæ•°å­¦è®¡ç®—ï¼Œä½†é‚£å¹¶ä¸æ˜¯å¼ºé¡¹ï¼Œä½†å¯ç”¨äºæ£€æµ‹æ•°æ®åº“äº†è§£æ˜¯å¦æœ‰æ•ˆã€‚ 1mysql&gt; SELECT 1+1; 3.2 æ¡ä»¶æŸ¥è¯¢ æ¡ä»¶è¡¨è¾¾å¼ æ¡ä»¶ ä¸¾ä¾‹1 ä¸¾ä¾‹2 è¯´æ˜ = score = 80 name = â€˜abcâ€™ å­—ç¬¦ä¸²éœ€è¦ç”¨å•å¼•å·æ‹¬èµ·æ¥ &gt; score &gt; 80 name &gt; â€˜abcâ€™ å­—ç¬¦ä¸²æ¯”è¾ƒï¼šASCIIç ï¼›ä¸­æ–‡æ¯”è¾ƒï¼šæ ¹æ®æ•°æ®åº“è®¾ç½® &gt;= score &gt;= 80 name &gt;= â€˜abcâ€™ &lt; score &lt; 80 name &lt;= â€˜abcâ€™ &lt;= score &lt;= 80 name &lt;= â€˜abcâ€™ &lt;&gt; score &lt;&gt; 80 name &lt;&gt; â€˜abcâ€™ &lt;&gt; ï¼šç”¨äºåˆ¤æ–­ä¸ç›¸ç­‰ï¼Œå¦‚ä¸¾ä¾‹1è¡¨ç¤º score â‰  80 LIKE name LIKE â€˜ab%â€™ name LIKE â€˜%bc%â€™ åˆ¤æ–­ç›¸ä¼¼ï¼š%è¡¨ç¤ºä»»æ„å­—ç¬¦ã€‚ä¾‹å¦‚'ab%'å°†åŒ¹é… â€˜abâ€™ï¼Œâ€˜abcâ€™ï¼Œâ€˜abcdâ€™ NOTã€ANDã€OR NOTã€ANDã€OR å¯ç”¨äºç»„æˆå¤šæ¡ä»¶æŸ¥è¯¢ï¼ŒåŒæ—¶å¯é…åˆ () æ”¹å˜ä¼˜å…ˆçº§ã€‚ SELECT * FROM &lt;è¡¨å&gt; WHERE &lt;æ¡ä»¶&gt; æŸ¥è¯¢ student è¡¨æˆç»©80åˆ†ä»¥ä¸Šç”·ç”Ÿï¼Œä½†ä¸åŒ…å«å°å…µã€‚ 123SELECT * FROM student WHERE NOT name=&#x27;å°å…µ&#x27; AND score &gt; 80 AND gender=&#x27;M&#x27;; å…¶å®ï¼ŒNOT ç­‰ä»·äº &lt;&gt; : 123SELECT * FROM studentWHERE name &lt;&gt; &#x27;å°å…µ&#x27; AND score &gt; 80 AND gender = &#x27;M&#x27;; SELECT (åˆ—1ï¼Œåˆ—2â€¦) FROM &lt;è¡¨å&gt; WHERE &lt;æ¡ä»¶&gt; è¿™ç§æ–¹å¼ä¹Ÿç§°ä¸º æŠ•å½±æŸ¥è¯¢ï¼Œç»“æœé›†åˆåªåŒ…å«æŒ‡å®šåˆ—ï¼Œè€Œéæ‰€æœ‰åˆ—ã€‚ æŸ¥è¯¢ student è¡¨æˆç»©80åˆ†ä»¥ä¸Šç”·ç”Ÿï¼Œä½†ä¸åŒ…å«å°å…µï¼Œç»“æœåªæ˜¾ç¤º id ã€name ä¸¤åˆ—ã€‚ 123 SELECT id,name FROM student WHERE name &lt;&gt; &#x27;å°å…µ&#x27; AND score &gt; 80 AND gender = &#x27;M&#x27;; 3.2 æŸ¥è¯¢è¿›é˜¶ 3.2.1 æ’åº å•æ¡ä»¶æŸ¥è¯¢ [å•æ’åºæ¡ä»¶] æŒ‰ä¸€ç­æˆç»©å‡åºæ’åˆ—ï¼Œå¹¶åŒæ—¶æ˜¾ç¤ºtaä»¬ï¼šidã€å§“åã€æˆç»©ã€‚ 1234SELECT id,name,scoreFROM student WHERE class_id = 1 ORDER BY score ; âš ï¸ WHERE è¦æ”¾åœ¨ ORDER BY å‰ï¼Œå¦åˆ™å‡ºé”™ï¼› å¦‚æœè¦é™åºï¼šæŸ¥è¯¢è¯­å¥æœ«åŠ ä¸Š DESC å³å¯ã€‚ å¤šæ¡ä»¶æŸ¥è¯¢ [å¤šæ’åºæ¡ä»¶] æŒ‰ä¸€ç­æˆç»©å‡åºæ’åˆ—ï¼Œæˆç»©ç›¸åŒæŒ‰æ€§åˆ«é™åºï¼Œå¹¶åŒæ—¶æ˜¾ç¤ºtaä»¬ï¼šidã€å§“åã€æˆç»©ã€‚ 1234SELECT id,name,score FROM studentWHERE class_id = 1 ORDER BY score ,gender DESC ; å¯¹äºæ¯ä¸ªæ’åºæ¡ä»¶éƒ½è¦æŒ‡å®šå‡åºã€é™åºï¼šè¿™é‡Œscoreé»˜è®¤å‡åºã€genderé™åºï¼› genderå€¼ æ˜¯å­—ç¬¦ä¸²ï¼ŒæŒ‰ASCII ç è§„åˆ™è¿›è¡Œæ’åºã€‚ 3.2.2 åˆ†é¡µ åˆ†é¡µï¼Œè§£å†³ SELECT æŸ¥è¯¢æ—¶ï¼Œæ•°æ®é‡å¤ªå¤šï¼ŒæŒ‡å®šæ˜¾ç¤º æŸé¡µ æ•°æ®ã€‚ å…¶è¯­æ³•æ ¼å¼ï¼š&lt;SELECTæŸ¥è¯¢&gt; LIMIT &lt;æ¯é¡µæ˜¾ç¤ºè®°å½•æ•°&gt; OFFSET &lt;è®°å½•åç§»é‡&gt; æŸ¥è¯¢å®ä¾‹ æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿæˆç»©é™åºæ’åºï¼Œæ˜¾ç¤ºç¬¬äºŒé¡µæ•°æ®ï¼Œæ¯é¡µ4æ¡è®°å½•ã€‚ 1234SELECT id,class_id,name,scoreFROM studentORDER BY score DESCLIMIT 4 OFFSET 4 ; -- (2-1)*4 = 4ï¼š0-3ä¸ºç¬¬ä¸€é¡µ4æ¡è®°å½•ï¼Œç¬¬4æ¡è®°å½•å³æ˜¯ç¬¬äºŒé¡µç¬¬ä¸€æ¡è®°å½• æ˜¾ç¤ºç¬¬né¡µæ•°æ®ï¼šLIMIT OFFSET * size æŸ¥è¯¢ç»“æœ 3.2.3 å¤šè¡¨æŸ¥è¯¢ å¤šè¡¨æŸ¥è¯¢ï¼šè¿”å›çš„æ˜¯ç¬›å¡å°”ä¹˜ç§¯ï¼Œå³ä¸€å¼ æœ‰nè®°å½•è¡¨ &amp; ä¸€å¼ mè®°å½•è¡¨ â€”&gt; æŸ¥è¯¢ç»“æœ m*n è®°å½•è¡¨ã€‚ æŸ¥è¯¢å®ä¾‹ æŸ¥è¯¢ student è¡¨ã€class è¡¨ï¼Œæ˜¾ç¤ºç¬›å¡å°”ä¹˜ç§¯ç»“æœã€‚ 12SELECT *FROM student s, class c; æŸ¥è¯¢ student è¡¨ã€class è¡¨ï¼Œ1ç­ç”·ç”Ÿæˆç»©é™åºæ’åºã€‚ 1234SELECT s.id &#x27;å­¦å·&#x27;, c.id &#x27;ç­çº§å·&#x27;,s.name &#x27;åå­—&#x27;,s.score &#x27;æˆç»©&#x27;FROM student s, class cWHERE s.gender = &#x27;M&#x27; AND c.id = 1ORDER BY s.score DESC; student è¡¨ &amp; class è¡¨åˆ†åˆ«ä½¿ç”¨äº†åˆ«å s å’Œ c ï¼›æŸ¥è¯¢ç»“æœåˆ—åä¹Ÿå¯ä»¥ä½¿ç”¨åˆ«åï¼› è¿™æ ·æŸ¥è¯¢è¡¨ï¼Œå…¶å®æ˜¯åœ¨å®ƒä»¬çš„ ç¬›å¡å°”ä¹˜ç§¯è¡¨ä¸­æŸ¥è¯¢ã€‚ æŸ¥è¯¢ç»“æœ ç¬›å¡å°”ä¹˜ç§¯æŸ¥è¯¢ç»“æœ1 æŸ¥è¯¢ç»“æœ2 123456789+--------+-----------+--------+--------+| å­¦å· | ç­çº§å· | åå­— | æˆç»© |+--------+-----------+--------+--------+| 3 | 1 | å°å†› | 96 || 1 | 1 | å°æ˜ | 91 || 9 | 1 | å°ç‹ | 90 || 7 | 1 | å°æ— | 86 || 6 | 1 | å°å…µ | 56 |+--------+-----------+--------+--------+ 3.2.4 è¿æ¥æŸ¥è¯¢ æŸ¥è¯¢ student è¡¨ä¸­ï¼Œæ˜¾ç¤ºå­¦ç”Ÿä¿¡æ¯[idã€å§“åã€ç­çº§åã€æˆç»©]ï¼Œè¦åŒ…å«ç­çº§åç§°ã€‚ è¿™é¢˜éš¾ç‚¹åœ¨äºï¼Œç­çº§å(name)åœ¨ class è¡¨ä¸­ï¼Œ student è¡¨ä¸­åªæœ‰ class_id ã€‚ å¦‚æœç”¨ä¸Šé¢å¤šè¡¨æŸ¥è¯¢ è¦ç”Ÿæˆç¬›å¡å°”ç§¯è¡¨æ•ˆç‡å¤ªä½ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨è¿æ¥æŸ¥è¯¢ã€‚ å†…è¿æ¥ å†…è¿æ¥ä¸­ï¼Œæ²¡æœ‰ä¸»è¡¨ï¼Œåªåˆ†ä¸ºå·¦å³è¡¨ã€‚ åŸç†ï¼šç”¨ä»å·¦è¡¨ä¸­å–å‡ºæ¯ä¸€æ¡è®°å½•ï¼Œå»ä¸å³è¡¨ä¸­æ‰€æœ‰è®°å½•åŒ¹é…ï¼Œæ»¡è¶³ON &lt;è¿æ¥æ¡ä»¶&gt; è¢«ä¿ç•™ã€‚ æ²¡æœ‰ ON &lt;è¿æ¥æ¡ä»¶&gt; ï¼Œå°†ä¼šç”Ÿæˆæˆç¬›å¡å°”ç§¯è¡¨ã€‚ æŸ¥è¯¢å®ä¾‹ 1234SELECT s.id,s.name,c.name,s.scoreFROM student sINNER JOIN class cON s.class_id = c.id; INNER JOIN class c ï¼šä½¿å¾—å¯ä»¥ SELECT ä½¿ç”¨ class è¡¨ä¸­name ; å°†å·¦è¡¨è®°å½•N_i ä¸ å³è¡¨è®°å½• M_j æ¯”è¾ƒï¼Œå¦‚æœå­—æ®µ s.class_id = c.id ï¼Œé‚£ä¹ˆè®°å½•N_i ä¿ç•™ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯”è¾ƒæ¬¡æ•° = å·¦è¡¨è®°å½•æ•° * å³è¡¨è®°å½•æ•°ï¼Œè¿™æ¯”ç›´æ¥ç”Ÿæˆç¬›å¡å°”è¡¨æŸ¥è¯¢é«˜æ•ˆã€‚ æŸ¥è¯¢ç»“æœ 1234567891011121314+----+--------+--------+-------+| id | name | name | score |+----+--------+--------+-------+| 1 | å°æ˜ | ä¸€ç­ | 91 || 2 | å°çº¢ | ä¸€ç­ | 96 || 3 | å°å†› | ä¸€ç­ | 96 || 4 | å°ç±³ | ä¸€ç­ | 74 || 5 | å°ç™½ | äºŒç­ | 82 || 6 | å°å…µ | äºŒç­ | 56 || 7 | å°æ— | äºŒç­ | 86 || 8 | å°æ–° | ä¸‰ç­ | 92 || 9 | å°ç‹ | ä¸‰ç­ | 90 || 10 | åˆ˜å©· | ä¸‰ç­ | 90 |+----+--------+--------+-------+ å·¦å¤–è¿æ¥ å·¦å¤–è¿æ¥ä¸­ï¼Œå·¦è¡¨ä¸ºä¸»è¡¨ã€‚ åŸç†ï¼šä»¥å·¦è¡¨ä¸ºä¸»è¡¨ï¼Œä»é‡Œé¢å–æ¯ä¸€æ¡è®°å½•å’Œå³è¡¨è¿›è¡Œè¿æ¥ï¼Œåˆ†ä¸¤ç§æƒ…å†µ æ»¡è¶³ON &lt;æ¡ä»¶&gt; èƒ½åŒ¹é…ï¼šä¿ç•™è¯¥è®°å½•ï¼› ä¸æ»¡è¶³ON &lt;æ¡ä»¶&gt; èƒ½åŒ¹é…ï¼šä¿ç•™è¯¥è®°å½•ï¼Œä½†æ˜¯å…¶å®ƒå­—æ®µç½®ä¸ºNULLã€‚ å³å¤–è¿æ¥ å³å¤–è¿æ¥ä¸­ï¼Œå³è¡¨ä¸ºä¸»è¡¨ã€‚ åŸç†ï¼šåŒä¸Šã€‚ æŸ¥è¯¢å®ä¾‹ 1234SELECT s.id,s.name,c.name,s.scoreFROM student sRIGHT OUTER JOIN class cON s.class_id = c.id; æŠŠå³è¡¨å½“ä¸»è¡¨å»åŒ¹é…å·¦è¡¨ï¼šæ»¡è¶³ONæ¡ä»¶ï¼Œæ­£ç¡®ä¿å­˜ï¼›ä¸æ»¡è¶³ï¼Œå…¶ä½™å­—æ®µç½®ä¸º NULL ã€‚ æŸ¥è¯¢ç»“æœ 123456789101112131415+------+--------+--------+-------+| id | name | name | score |+------+--------+--------+-------+| 1 | å°æ˜ | ä¸€ç­ | 91 || 2 | å°çº¢ | ä¸€ç­ | 96 || 3 | å°å†› | ä¸€ç­ | 96 || 4 | å°ç±³ | ä¸€ç­ | 74 || 5 | å°ç™½ | äºŒç­ | 82 || 6 | å°å…µ | äºŒç­ | 56 || 7 | å°æ— | äºŒç­ | 86 || 8 | å°æ–° | ä¸‰ç­ | 92 || 9 | å°ç‹ | ä¸‰ç­ | 90 || 10 | åˆ˜å©· | ä¸‰ç­ | 90 || NULL | NULL | å››ç­ | NULL |+------+--------+--------+-------+ 3.2.5 å­æŸ¥è¯¢ å­æŸ¥è¯¢åˆ†ç±» å­æŸ¥è¯¢æŒ‰å¯¹è¿”å›ç»“æœé›†è°ƒç”¨æ–¹æ³•ï¼Œå¯åˆ†ä¸ºï¼š WHERE å­æŸ¥è¯¢ï¼šæŠŠå†…å±‚æŸ¥è¯¢ç»“æœå½“åšå¤–å±‚ æŸ¥è¯¢æ¡ä»¶ï¼› FROM å­æŸ¥è¯¢ï¼šæŠŠå†…å±‚æŸ¥è¯¢ç»“æœå½“åšå¤–å±‚ æŸ¥è¯¢é›†åˆï¼› EXISTS å­æŸ¥è¯¢ï¼šæŠŠå¤–å±‚æŸ¥è¯¢ç»“æœæ‹¿åˆ°å†…å±‚ï¼Œçœ‹å†…å±‚æŸ¥è¯¢æ˜¯å¦æˆç«‹ã€‚ IN ã€ANYã€SOMEã€ALL æœ€å…¸å‹çš„å½“ WHRER å­æŸ¥è¯¢ç»“æœï¼Œä¸æ˜¯æ ‡é‡ï¼ˆä¸€è¡Œä¸€åˆ—ï¼‰ï¼Œè€Œæ˜¯ä¸€ä¸ªé›†åˆï¼ˆå¤šè¡Œå¤šåˆ—ï¼‰ã€‚ æ­¤æ—¶ï¼Œä¸èƒ½ä½¿ç”¨ï¼š= &gt; &lt; &gt;= &lt;= &lt;&gt; è¿™äº›æ¯”è¾ƒæ ‡é‡æ“ä½œç¬¦ï¼›è€Œç”¨INã€ANYï¼ˆSOMEï¼‰ã€ALL æ“ä½œç¬¦ã€‚ INï¼šåˆ¤æ–­æŸ¥è¯¢çš„è¡¨è¾¾å¼æ˜¯å¦åœ¨å­æŸ¥è¯¢åˆ—è¡¨ä¸­ï¼Œè¿”å›æ»¡è¶³inåˆ—è¡¨ä¸­çš„æ»¡è¶³æ¡ä»¶çš„è®°å½•ã€‚ ANYï¼šANYå…³é”®å­—å¿…é¡»åœ¨ä¸€ä¸ªæ¯”è¾ƒæ“ä½œç¬¦åé¢ï¼Œè¡¨ç¤ºä¸å­æŸ¥è¯¢è¿”å›ä»»ä½•å€¼æ¯”è¾ƒä¸º TRUE ï¼Œåˆ™è¿”å› TRUE ï¼› ALLï¼šALLå…³é”®å­—å¿…é¡»åœ¨ä¸€ä¸ªæ¯”è¾ƒæ“ä½œç¬¦åé¢ï¼Œè¡¨ç¤ºä¸å­æŸ¥è¯¢è¿”å›æ‰€æœ‰å€¼æ¯”è¾ƒä¸º TRUE ï¼Œåˆ™è¿”å› TRUE ã€‚ å­æŸ¥è¯¢å®ä¾‹ æŸ¥è¯¢å®ä¾‹1 è·å–æ‰€æœ‰æ¯”åˆ˜å©·æˆç»©å¥½çš„ç”·åŒå­¦ï¼Œå­¦å·ã€å§“åã€æˆç»©ã€‚ 12345678SELECT id,name,scoreFROM studentWHERE score &gt; ( SELECT score FROM student WHERE name = &#x27;åˆ˜å©·&#x27; -- è¿™é‡Œæ²¡æœ‰ ;); æŸ¥è¯¢æ¯”åˆ˜å©·æˆç»©å¥½çš„åŒå­¦ä¸ºçˆ¶æŸ¥è¯¢Â·Â·Â·Â·Â·ï¼›ç”±äºåˆ˜å©·æˆç»©æœªçŸ¥ï¼Œæ‰€ä»¥è¿˜éœ€è¦ä¸€ä¸ªå­æŸ¥è¯¢æŸ¥è¯¢åˆ˜å©·æˆç»©ã€‚ WHERE å­æŸ¥è¯¢å­—æ®µ == çˆ¶æŸ¥è¯¢å­—æ®µï¼ï¼ˆéƒ½åªæœ‰ scoreï¼‰ æŸ¥è¯¢å®ä¾‹2 æ–°å»ºä¸€ä¸ª test_stu è¡¨æŸ¥è¯¢ï¼štest.sql æ‰¾å‡ºè¯­æ–‡å’Œæ•°å­¦éƒ½åŠæ ¼çš„åŒå­¦åå­—ã€‚ 12345678SELECT name FROM test_stuWHERE score &gt;= 60 AND project = &#x27;è¯­æ–‡&#x27; AND name IN( SELECT name FROM test_stu WHERE score &gt;= 60 AND project = &#x27;æ•°å­¦&#x27;); å¾ˆæ˜æ˜¾è¦å­æŸ¥è¯¢ï¼Œè¦æŸ¥å‡ºè¯­æ–‡æˆç»©åŠæ ¼åŒå­¦ï¼Œå¯åšçˆ¶æŸ¥è¯¢æ¡ä»¶ä¹‹ä¸€ ï¼›ç„¶åæŠŠå­æŸ¥è¯¢æŸ¥è¯¢æ•°å­¦ç»“æœåšçˆ¶æŸ¥è¯¢æ¡ä»¶ä¹‹äºŒã€‚ ä¸€å¼€å§‹æƒ³ç”¨ FROM å­æŸ¥è¯¢ é™åˆ¶æŸ¥è¯¢é›†åˆï¼Œä¼¼ä¹å¹¶ä¸å¤ªå¥½ç”¨ã€‚ æŸ¥è¯¢ç»“æœ2 123456+--------+| name |+--------+| å¼ ä¸‰ || èµµå…­ |+--------+ 3.2.6 èšåˆ ï¼š åˆ†ç»„ &amp; ç®€å•å‡½æ•° å‡½æ•°åªèƒ½åœ¨ SELECT ä¸­ä½¿ç”¨ï¼Ÿï¼Ÿ èšåˆ &amp; ç®€å•å‡½æ•° èšåˆé…åˆå‡½æ•°ï¼šç”¨æ¥ç»Ÿè®¡è¡¨ä¸­ä¿¡æ¯ï¼Œå¦‚æ€»äººæ•°ã€å¹³å‡åˆ†ã€æœ€é«˜åˆ†ç­‰ã€‚ èšåˆ &amp; count() ç»Ÿè®¡ student è¡¨å­¦ç”Ÿæ€»äººæ•°ã€‚ 1SELECT COUNT(*) stu_num FROM student; count(*) : å‚æ•° * ä»£è¡¨ç»Ÿè®¡æ‰€æœ‰åˆ—ï¼› stu_num : æ˜¯è®¾ç½®çš„åˆ«åã€‚ 12345+---------+| stu_num |+---------+| 10 |+---------+ èšåˆ &amp; SUM()ã€AVG() æ³¨æ„ï¼ŒSUM()ã€AVG() ç”¨æ¥è®¡ç®—ä¸€åˆ—æ€»å’Œ/å¹³å‡å€¼ï¼Œå¿…é¡»è¦æ˜¯ æ•°å€¼ç±»å‹ ( count() æ˜¯ç»Ÿè®¡åˆ—ï¼Œå’Œç±»å‹æ— å…³) ã€‚ ç»Ÿè®¡å¥³ç”Ÿæ€»åˆ†ï¼Œå’Œå¹³å‡åˆ†ã€‚ 123SELECT SUM(score),AVG(score) FROM studentWHERE gender = &#x27;F&#x27;; SELECT name ,SUM(s.score),AVG(s.score) ä¸è¡Œï¼Œæ¯ä¸ªå¥³ç”Ÿéƒ½æœ‰æ€»åˆ†/å¹³å‡åˆ†? 12345+------------+------------+| SUM(score) | AVG(score) |+------------+------------+| 434 | 86.8000 |+------------+------------+ èšåˆ &amp; MIN() ã€MAX() MAX()å’ŒMIN()ä¸é™äºæ•°å€¼ç±»å‹,å¦‚æœæ˜¯å­—ç¬¦ç±»å‹ï¼ŒMAX()å’ŒMIN()ä¼šè¿”å›æ’åºæœ€åå’Œæ’åºæœ€å‰çš„å­—ç¬¦ã€‚ ç»Ÿè®¡å­¦ç”Ÿä¸­æœ€é«˜åˆ†ï¼Œå¹¶åŒæ—¶æ˜¾ç¤ºå§“åã€ç­çº§ã€åˆ†æ•°ã€‚ è¯¥é¢˜éš¾ç‚¹åœ¨äºï¼Œç”±äºè¿˜æ˜¯æ˜¾ç¤ºç­çº§ï¼Œéœ€è¦è¿æ¥ class è¡¨ã€‚ ON æ¡ä»¶ï¼šè¿˜æƒ³åŒæ—¶ MAX() æ‰¾å‡ºæœ€é«˜åˆ†ï¼Œä¸å¤ªå¯è¡Œï¼Œç”¨æ¥ç»™ student è¡¨å¢åŠ ä¸€åˆ— c.nameå°±è¡Œã€‚ WHERE æ¡ä»¶ï¼šç„¶åç»™æ–°è¿æ¥è¡¨æ‰¾å‡ºæœ€é«˜åˆ†ã€‚ 123456789SELECT s.name,c.name,s.scoreFROM student sINNER JOIN class cON s.class_id = c.idWHERE s.score &gt;= ALL ( SELECT score FROM student); è¿›ä¸€æ­¥ä¼˜åŒ–ï¼šåˆ©ç”¨ MAX() å‡½æ•° 123456789SELECT s.name,c.name,s.scoreFROM student sINNER JOIN class cON s.class_id = c.idWHERE s.score = -- å°è¯• WHERE s.score = MAX(score) å‡ºé”™ï¼Œåªèƒ½åœ¨SELECTä¸­ä½¿ç”¨ï¼Ÿ( SELECT MAX(score) FROM student); èšåˆ &amp; åˆ†ç»„ å•æ¡ä»¶åˆ†ç»„ åœ¨å‰é¢ï¼Œæˆ‘ä»¬åˆ©ç”¨ coutn(*) å‡½æ•°ï¼Œå¯ä»¥å¾ˆå¿«ç»Ÿè®¡å‡ºå­¦ç”Ÿæ€»æ•°ï¼Œä½†æ˜¯å¦‚æœè¦åˆ†åˆ«ç»Ÿè®¡å‡ºç”·/å¥³ç”Ÿæ•°å‘¢ï¼Ÿéš¾é“ï¼Œåˆ†åˆ«ç”¨ WHERE æ¡ä»¶é™åˆ¶ä¸€ä¸‹å†ç»Ÿè®¡å—ï¼Ÿ å¦‚æœï¼Œè¡¨å¯ä»¥åˆ†ä¸ºä¸¤ç”·ã€å¥³ä¸¤ç»„ï¼Œå‡½æ•°åˆ†åˆ«ä¼šåˆ†åˆ«ç»Ÿè®¡ä¸¤ç»„ä¿¡æ¯å†æ˜¾ç¤ºå¤šå¥½å‘€ï¼ åˆ†åˆ«ç»Ÿè®¡å‡ºç”·/å¥³å¹³å‡åˆ†ã€å­¦ç”Ÿæ€»æ•°ã€‚ 123SELECT gender,AVG(score),COUNT(*)FROM studentGROUP BY gender; è¿™ä¹Ÿå°±ç›¸å½“äºï¼šè¡¨åˆ†ä¸ºç”·å¥³ä¸¤ç»„ï¼Œå‡½æ•°ä¼šåˆ†åˆ«è®¡ç®—ä¸¤æ¬¡ ã€‚ æˆ‘ä»¬å¯ä»¥ SELECT gender ï¼Œä½†æ˜¯ä¸‹åˆ—è¯­å¥ä¼šå‡ºé”™ï¼š 1SELECT class_id,gender,AVG(score),COUNT(*) -- ç¬¬ä¸€å¥SELECTå¢åŠ class_id å› ä¸ºï¼ŒæŒ‰æ€§åˆ«åˆ†ç»„ï¼Œæ¯ä¸ªæ€§åˆ«éƒ½è¦è‹¥å¹²å­¦ç”Ÿï¼Œè‡ªç„¶å¯¹åº”å¤šä¸ªç­çº§ class_id ,è¯•é—®å¦‚ä½•æ˜¾ç¤ºï¼Ÿ 123456+--------+------------+----------+| gender | AVG(score) | COUNT(*) |+--------+------------+----------+| M | 83.8000 | 5 || F | 86.8000 | 5 |+--------+------------+----------+ å¤šæ¡ä»¶åˆ†ç»„ åœ¨ å•æ¡ä»¶åˆ†ç»„ æˆ‘ä»¬è¯´åˆ°ï¼Œä¸‹é¢å†™æ³•æ˜¯é”™è¯¯çš„ï¼š 123SELECT class_id,gender,AVG(score),COUNT(*) -- ç¬¬ä¸€å¥SELECTå¢åŠ class_idFROM studentGROUP BY gender; åŸå› æ˜¯ï¼šæŒ‰ gender åˆ†ç»„åªèƒ½åˆ†ä¸º M/F ä¸¤ç»„ï¼Œæ˜¾ç¤ºåªæœ‰ä¸¤è¡Œç»Ÿè®¡ç»“æœï¼Œè€Œæ¯ä¸€è¡ŒM/Féƒ½åŒ…æ‹¬å¤šä¸ªclass_id ï¼Œæ²¡æ³•æ˜¾ç¤ºï¼Œä¹Ÿä¸åˆé€»è¾‘ã€‚ç°åœ¨æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼š æŸ¥è¯¢æ¯ä¸ªç­çº§çš„ç”·/å¥³ç”Ÿå¹³å‡åˆ†ï¼Ÿ 123SELECT class_id,gender,AVG(score)FROM studentGROUP BY gender,class_id; ä¸ºä»€ä¹ˆè¿™é‡Œåˆå¯ä»¥æ˜¾ç¤ºäº†ï¼Ÿå…¶å®æ•´ä¸ªé€»è¾‘å¦‚ä¸‹ï¼š å…ˆæŒ‰ class_id åˆ†ä¸º 3 ç»„ï¼Œç„¶åæ¯ç»„åˆæŒ‰ gender åˆ†ä¸º 2 ç»„ï¼Œæ‰€ä»¥æ€»å…±æ˜¯ 6 ç»„å¯ä»¥æ˜¾ç¤ºå‡ºæ¥ã€‚ 12345678910+----------+--------+------------+| class_id | gender | AVG(score) |+----------+--------+------------+| 1 | M | 93.5000 || 1 | F | 85.0000 || 2 | F | 82.0000 || 2 | M | 71.0000 || 3 | F | 91.0000 || 3 | M | 90.0000 |+----------+--------+------------+ ç¬¬å››ç« ï¼šäº‹åŠ¡ 4.1 äº‹åŠ¡ç®€ä»‹ ç®€å•æ¥è¯´ï¼Œäº‹åŠ¡å°±æ˜¯è®©å¤šä¸ªæ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨ä¸æ‰§è¡Œï¼Œä¿è¯æ•°æ®ç»Ÿä¸€æ€§ã€‚ æ¯”å¦‚ï¼ŒAå‘Bè¿›è¡Œè½¬è´¦å¿…é¡»ä¿è¯ï¼ŒA ã€Bè´¦æˆ·ä¸€æ–¹å¢ï¼Œä¸€æ–¹å¿…é¡»å‡ã€‚ 1234-- ç¬¬ä¸€æ­¥ï¼šå°†id=1çš„Aè´¦æˆ·ä½™é¢å‡å»100UPDATE accounts SET balance = balance - 100 WHERE id = 1;-- ç¬¬äºŒæ­¥ï¼šå°†id=2çš„Bè´¦æˆ·ä½™é¢åŠ ä¸Š100UPDATE accounts SET balance = balance + 100 WHERE id = 2; æ˜¾ç„¶ï¼Œè¿™ä¸¤æ¡è¯­å¥å¿…é¡»å…¨éƒ¨æ‰§è¡Œï¼Œä½†ä¸Šé¢è¯­å¥æ— æ³•ä¿è¯ï¼Œè¿™å°±éœ€è¦å¼€å¯äº‹åŠ¡ã€‚ éšå¼äº‹åŠ¡ å¯¹äºå•æ¡SQLè¯­å¥ï¼Œæ•°æ®åº“ç³»ç»Ÿè‡ªåŠ¨å°†å…¶ä½œä¸ºä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œï¼Œè¿™ç§äº‹åŠ¡è¢«ç§°ä¸ºéšå¼äº‹åŠ¡ã€‚ æ˜¾ç¤ºäº‹åŠ¡ æ‰‹åŠ¨æŠŠå¤šæ¡äº‹åŠ¡ä½œä¸ºä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œï¼Œä½¿ç”¨ BEGIN &lt;å¤šæ¡SQLè¯­å¥æ“ä½œ&gt; COMMIT å½¢å¼ã€‚æ¯”å¦‚ä¸Šé¢è½¬è´¦ï¼š 1234BEGIN; -- åˆ†å·UPDATE accounts SET balance = balance - 100 WHERE id = 1;UPDATE accounts SET balance = balance + 100 WHERE id = 2;COMMIT; -- åˆ†å· COMMIT &amp; ROLLBACK ä¸Šé¢æœ€ç»ˆé€‰æ‹©æäº¤æ›´æ–°ï¼Œå¦‚æœå†™å®ŒSQLè¯­å¥ä½†åˆä¸æƒ³æäº¤æ›´æ–°å‘¢ï¼Ÿå¯ä»¥ç”¨ ROLLBACK æ’¤é”€æ“ä½œï¼š 1234BEGIN; -- åˆ†å·UPDATE accounts SET balance = balance - 100 WHERE id = 1;UPDATE accounts SET balance = balance + 100 WHERE id = 2;ROLLBACK; -- åˆ†å· 4.2 éš”ç¦»çº§åˆ« æ¦‚å†µï¼šé¿å…å¤šä¸ªå¹¶å‘æ‰§è¡Œäº‹åŠ¡ï¼Œå¯¹ åŒä¸€æ¡è®°å½• è¿›è¡Œæ“ä½œï¼Œå¸¦æ¥çš„æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚ SQL æ ‡å‡†å®šä¹‰4ç§éš”ç¦»çº§åˆ«ï¼Œä¸åŒç¨‹åº¦ çš„é¿å…å‡ºç°æ•°æ®ä¸ä¸€è‡´æƒ…å†µã€‚ åŒæ—¶ï¼Œåœ¨MySQLä¸­ï¼Œä½¿ç”¨ innoDB é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ Repeatable Read ã€‚ Isolation Level è„è¯» ä¸å¯é‡å¤è¯» å¹»è¯» éš”ç¦»çº§åˆ« æ¦‚æ‹¬ Read Uncommitted Yes Yes Yes æœ€ä½ è„è¯»ï¼šä¸¤æ¬¡è¯»ï¼Œä¸­é—´æ’¤ Read Committed - Yes Yes è¾ƒä½ ä¸å¯é‡è¯»ï¼šä¸¤æ¬¡è¯»ï¼Œä¸­é—´æ›´ Repeatable Read - - Yes è¾ƒé«˜ å¹»è¯»ï¼šä¸¤æ¬¡è¯»ï¼Œä¸­é—´æ’ Serializable - - - æœ€é«˜ Read Uncommitted æ ¹æ®ä¸Šè¡¨ï¼Œæˆ‘ä»¬çŸ¥é“ï¼ŒRead Uncommitted å¯èƒ½å‡ºç°è„è¯»ã€‚ ä»€ä¹ˆæ˜¯è„è¯»ï¼Ÿæœ€ç»ˆè¯»å–åˆ°å·²ä¸åœ¨è¡¨ä¸­æ•°æ®ã€‚ å¤šå¹¶å‘ä¸‹ï¼Œäº‹åŠ¡Aè¿›è¡Œäº†æ›´æ–°æ“ä½œï¼Œåœ¨äº‹åŠ¡Bè¿›è¡Œè¿ç»­ä¸¤æ¬¡è¯»è¿‡ç¨‹ä¸­ï¼Œå‘ç”Ÿæ’¤å›æ›´æ–°æ“ä½œï¼Œå¯¼è‡´è¯»å–æ— æ•ˆCã€‚ ä¸¤æ¬¡è¯»ï¼Œä¸­é—´æ’¤ æ—¶åˆ» äº‹åŠ¡A äº‹åŠ¡B 1 SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED; SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED; 2 BEGIN; BEGIN; 3 UPDATE student SET score= 65 WHERE id = 1; 4 SELECT * FROM student WHERE id = 1; 5 ROLLBACK; 6 SELECT * FROM student WHERE id = 1; 7 COMMIT; æ—¶åˆ»3ï¼šäº‹åŠ¡Aï¼Œæ›´æ–° student è¡¨è®¾ç½®åˆ†æ•°ä¸º65ï¼› æ—¶åˆ»4ï¼šäº‹åŠ¡Bï¼Œè¯»åˆ°åˆšåˆšæ›´æ–°çš„åˆ†æ•°65ï¼› æ—¶åˆ»5ï¼šäº‹åŠ¡Aå–æ¶ˆæ›´æ–°åˆ†æ•°æ“ä½œï¼Œå¯¼è‡´ä¸Šä¸€ä¸ªåˆ†æ•°å®é™…ä¸æ˜¯æ­£ç¡®åˆ†æ•°ï¼› æ—¶åˆ»6ï¼šéªŒè¯æ€§æ“ä½œï¼Œå†æ¬¡è¯»å–æ•°æ®å‘ç°åˆ†æ•°å’Œæ—¶åˆ»4è¯»å–çš„ä¸ä¸€è‡´ã€‚ Read Committed æ ¹æ®ä¸Šè¡¨ï¼Œæˆ‘ä»¬çŸ¥é“ï¼ŒRead committed å¯èƒ½å‡ºç°ä¸å¯é‡å¤è¯»ã€‚ ä»€ä¹ˆæ˜¯ä¸å¯é‡å¤è¯»ï¼Ÿä¸¤æ¬¡è¿ç»­è¯»å–çš„æ•°æ®ä¸ä¸€è‡´ï¼Œä½†æœ€ç»ˆè¯»å–çš„æ•°æ®åœ¨è¡¨ä¸­ã€‚ åœ¨å¤šå¹¶å‘ä¸‹ï¼Œäº‹åŠ¡Båœ¨è¿›è¡Œä¸¤æ¬¡è¯»è¿‡ç¨‹ä¸­ï¼Œäº‹åŠ¡Aæ°å¥½æ›´æ–°äº†æ•°æ®ï¼Œå¯¼è‡´ä¸¤æ¬¡è¯»å–æ•°æ®ä¸ä¸€è‡´ã€‚ ä¸¤æ¬¡è¯»ï¼Œä¸­é—´æ›´ æ—¶åˆ» äº‹åŠ¡A äº‹åŠ¡B 1 SET TRANSACTION ISOLATION LEVEL READ COMMITTED; SET TRANSACTION ISOLATION LEVEL READ COMMITTED; 2 BEGIN; BEGIN; 3 SELECT * FROM studentWHERE id = 1; 4 UPDATE student SET score= 65 WHERE id = 1; 5 COMMIT; 6 SELECT * FROM student WHERE id = 1; 7 COMMIT; â” Read Committedä¸‹ä¸ºä»€ä¹ˆä¸ä¼šå‡ºç°è„è¯»å‘¢ï¼Ÿ ğŸ’­ æˆ‘çš„ç†è§£æ˜¯ï¼ŒRead Committed ä¸‹åªèƒ½è¯»å–åˆ°å·²ç» COMMIT æ›´æ–°çš„æ•°æ®ï¼Œä¸èƒ½è¯»å–æœª COMMIT æ“ä½œæ•°æ®ã€‚ â€‹ è„è¯»æ˜¯æœª COMMIT å‰æ›´æ–°æ“ä½œç„¶åæ’¤å›åˆè¯»å–å¯¼è‡´ï¼Œæ‰€ä»¥ä¹Ÿå°±ä¸ä¼šå‡ºç°è„è¯»ã€‚ Repeatable Read æ ¹æ®ä¸Šè¡¨ï¼Œæˆ‘ä»¬çŸ¥é“ï¼ŒRepeatable Read å¯èƒ½å‡ºç°å¹»è¯»ã€‚ ä»€ä¹ˆæ˜¯å¹»è¯»ï¼Ÿè¿ç»­ä¸¤æ¬¡è¯»ï¼Œç¬¬ä¸€æ¬¡ä¸å­˜åœ¨ï¼Œä½†å¯ä»¥æ›´æ–°ï¼Œæ›´æ–°åå†æ¬¡è¯»å–ç«Ÿç„¶åˆå­˜åœ¨ã€‚ ä¸¤æ¬¡è¯»ï¼Œä¸­é—´æ’ æ—¶åˆ» äº‹åŠ¡A äº‹åŠ¡B 1 SET TRANSACTION ISOLATION LEVEL REPEATABLE READ; SET TRANSACTION ISOLATION LEVEL REPEATABLE READ; 2 BEGIN; BEGIN; 3 SELECT * FROM student WHERE id = 99; 4 INSERT INTO student (id, name) VALUES (99, â€˜Bobâ€™); 5 COMMIT; 6 SELECT * FROM student WHERE id = 99; 7 UPDATE student SET name = â€˜Aliceâ€™ WHERE id = 99; 8 SELECT * FROM student WHERE id = 99; 9 COMMIT; ç¬¬6æ—¶åˆ»ï¼šâš ï¸ æ­¤æ—¶æ²¡æœ‰å‡ºç°ä¸å¯é‡å¤è¯»ï¼Œç¬¬6æ—¶åˆ»è¯»å–åˆ° id = 99 æ•°æ®è¿˜æ˜¯ç©ºã€‚ ç¬¬7æ—¶åˆ»ï¼šä½†æ˜¯å‘ç°å¯ä»¥æ›´æ–°æ•°æ®ï¼Œè€Œä¸”æ­¤æ—¶å†å»è¯»å– id = 99 æ•°æ®å‘ç°æˆåŠŸäº†ï¼ï¼AMAZING! â” å¦‚æœç¬¬ 4 æ­¥æ˜¯ UPDATE æ“ä½œ ï¼Œä¼šå‡ºç°ä¸å¯é‡å¤è¯»å—ï¼Ÿ ğŸ’­ æˆ‘çŒœæµ‹ä¸ä¼šï¼Œå› ä¸º INSERT æ“ä½œä¹Ÿæ˜¯æ›´æ–°ï¼Œä½†æ˜¯ç¬¬6æ—¶åˆ»è¯»å–æ•°æ®ä¸ºç©ºï¼Ÿ ğŸ•µ Repeatable Read åœ¨åŒä¸€ä¸ªäº‹åŠ¡å†…çš„æŸ¥è¯¢ä¸äº‹åŠ¡å¼€å§‹æ—¶åˆ»ä¸€è‡´ï¼Œåœ¨Bäº‹åŠ¡è¿‡ç¨‹ä¸­ä¸ä¼šè¯»åˆ°æœŸé—´Aä¸­æ›´æ–°å€¼ã€‚ Serializable Serializableæ˜¯æœ€ä¸¥æ ¼çš„éš”ç¦»çº§åˆ«ï¼Œä½†æ˜¯æ•ˆç‡æœ€ä½ï¼Œä¸€èˆ¬ä¸ä¼šè®¾ç½®ã€‚ åœ¨Serializableéš”ç¦»çº§åˆ«ä¸‹ï¼Œæ‰€æœ‰äº‹åŠ¡æŒ‰ç…§æ¬¡åºä¾æ¬¡æ‰§è¡Œï¼Œå› æ­¤ï¼Œè„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»éƒ½ä¸ä¼šå‡ºç°ã€‚ ç¬¬äº”ç«  ï¼šå­˜å‚¨è¿‡ç¨‹å’Œè§¦å‘å™¨"},{"title":"JavaåŸºç¡€ç¬”è®°","date":"2022-01-02T11:54:25.531Z","updated":"2021-12-03T03:41:02.893Z","comments":true,"path":"NO_post/JAVAåŸºç¡€ç¬”è®°.html","permalink":"https://hwh.zone/NO_post/JAVA%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0.html","excerpt":"","text":"ç¬¬ä¸€ç« ï¼šåˆè¯†java 1.0 å¿«æ·é”® Alt + \\ : æŸ¥çœ‹æœ¬æ¥æ‰€æœ‰æ–¹æ³•ï¼Œå˜é‡ Ctrl+Alt ï¼š è·³å‡ºè™šæ‹Ÿæœº 1.1 JDKå®‰è£…ä¸é…ç½® JDKä¸‹è½½ ä¸‹è½½åœ°å€ï¼šå®˜ç½‘JDKä¸‹è½½ ä¸‹è½½å®Œæ¯•åï¼š ä¸‹è½½æ˜¯exeæ–‡ä»¶ï¼Œå®‰è£… åˆ° D:/JDK æ–‡ä»¶å¤¹ä¸‹ï¼ˆæ²¡æœ‰è‡ªå·±æ–°å»ºJDKæ–‡ä»¶å¤¹ï¼‰ ä¸‹è½½æ˜¯å‹ç¼©åŒ…ï¼Œè§£å‹åˆ°ç›¸åº” D:/JDK æ–‡ä»¶å¤¹ä¸‹å³å¯ã€‚ é…ç½®ç¯å¢ƒå˜é‡ï¼ˆwin10ï¼‰ é¦–å…ˆæ‰“å¼€ ç³»ç»Ÿå±æ€§â€”&gt;é«˜çº§----&gt;ç¯å¢ƒå˜é‡ï¼š å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ–°å»ºä¸€ä¸ªç³»ç»Ÿå˜é‡JAVA_HOME: æ¥ç€é€‰æ‹©ç¼–è¾‘PATHå˜é‡ï¼š é€‰æ‹©æ–°å»ºä¸€ä¸ª%JAVA_HOME%\\bin ï¼Œå¹¶ç§»åŠ¨åˆ°æœ€ä¸Šæ–¹ï¼š %JAVA_HOME% : è¡¨ç¤ºå¼•å…¥çš„ å‰ä¸€ä¸ª ç³»ç»Ÿå˜é‡ JAVA_HOME è·¯å¾„ è®°å¾—ä¾æ¬¡ç‚¹å‡»ç¡®å®šä¿å­˜ï¼Œå…³é—­ç¯å¢ƒå˜é‡è®¾ç½®ã€‚ éªŒè¯æ˜¯å¦æˆåŠŸ win + r ---&gt; cmd ----&gt; java -version æŸ¥çœ‹ï¼Œæ˜¾ç¤ºç‰ˆæœ¬å·åˆ™æŒ‰ç…§æˆåŠŸï¼š 1.2 IDE : intelliJ IDEA ä¸‹è½½ &amp; å®‰è£… å®˜ç½‘åœ°å€ï¼šå®˜ç½‘ä¸‹è½½IDEA å‚»ç“œä¼¼å®‰è£…ï¼Œæ³¨æ„å®‰è£…è¿‡ç¨‹é€‰æ‹©64ä½ã€‚ æ³¨å†Œæ¿€æ´» ç¬¬ä¸€æ¬¡æ‰“å¼€IDEAæ—¶ä¼šè¦æ±‚ä½ æ³¨å†Œæ¿€æ´»ï¼Œé€‰æ‹©è¾“å…¥æ¿€æ´»ä»£ç ï¼Œåšå®¢æ¿€æ´»ç åœ°å€ï¼š æ¿€æ´»åœ°å€ï¼Œç¬¬äºŒä¸ªå¯ç”¨ 1.3 ç¬¬ä¸€ä¸ªé¡¹ç›®:HELLOJAVA åˆ›å»ºé¡¹ç›® é€‰æ‹© Fileâ€“&gt;Newâ€“&gt;Project ,SDK é€‰æ‹© å®‰è£… JDK æ‰€åœ¨ç›®å½•ï¼ˆåŒä¸Šï¼‰ï¼š ä¸‹ä¸€æ­¥é€‰æ‹© Project æ‰€åœ¨æ–‡ä»¶å¤¹ï¼š âš ï¸ å…ˆåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ç”¨æ¥ä¿å­˜é¡¹ç›®ï¼Œè¯¥æ­¥ä¸ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªProjiectå¯¹åº”æ–‡ä»¶å¤¹ï¼ ç¬¬ä¸€ä¸ª JAVA æ–‡ä»¶ ä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œå¯ä»¥å…ˆåˆ›å»ºä¸€ä¸ª Packageï¼ˆç±»ä¼¼ C# å‘½ä»¤ç©ºé—´ï¼‰ã€‚ å³é”®é€‰æ‹© src---&gt; new ---&gt; package ï¼Œæ¯”å¦‚æ–°å»º package åä¸ºï¼šHELLOJAVAï¼› å³é”®é€‰ä¸­ HELLOJAVA åŒ…ï¼ŒHELLOJAVA--&gt; new --&gt; class ï¼Œæ–°å»ºç±»åä¸º helloï¼š ç¼–è¾‘hello.java 1234567public class hello //é€‰æ‹©åˆ›å»ºclassï¼Œä¼šè‡ªåŠ¨åˆ›å»ºåŒåç±»å&#123; public static void main(String[] args) //é‡Œé¢å‚æ•°ä¸èƒ½å°‘ &#123; System.out.println(&quot;Hello JAVA&quot;); &#125;&#125; é…ç½® è¿™ä¸ªæ—¶å€™ç›´æ¥è¿è¡Œæ˜¯è¿è¡Œä¸äº†çš„ï¼Œè¿˜è¦è®¾ç½®ä¸€äº›ä¸œè¥¿ï¼Œç‚¹å‡»ä¸‹å›¾æŒ‰é’®æ·»åŠ é…ç½®ä¿¡æ¯ï¼š é€‰æ‹©æ¨¡æ¿ &amp; ä¸»å‡½æ•°ä½ç½®ï¼š è¿è¡Œ é€‰æ‹© hello.javaæ–‡ä»¶ï¼Œå³é”®é€‰æ‹© run â€œhello.main()â€ å³å¯ã€‚ ç¬¬äºŒç«  ï¼šJAVAåŸºæœ¬çŸ¥è¯† 2.1 é¢å¯¹å¯¹è±¡ å®æˆ˜ è®¾è®¡ä¸€ä¸ªHero ç±»å¯¹è±¡VNï¼Œæœ‰ä¸€äº›å±æ€§ï¼›æœ‰åŠ è¡€å‡½æ•°ç­‰ã€‚ åœ¨Heroç±»ä¸­ 12345678910111213public class Hero&#123; //è®¾è®¡ä¸€äº›å±æ€§ String name; //String ç¬¬ä¸€ä¸ªSæ˜¯å¤§å†™ int HP; int moveSpeed; //å‡½æ•°ï¼šåŠ è¡€ void addHP(int blood) &#123; HP += blood; System.out.println(&quot;åŠ è¡€!&quot;); &#125;&#125; åœ¨Helloç±»ä¸­ 1234567891011121314151617public class hello&#123; public static void main(String[] args) &#123; System.out.println(&quot;Hello JAVA&quot;); // è°ƒç”¨itemç±»ï¼Œå®ä¾‹å‡ºä¸€ä¸ªå¯¹è±¡ Hero i = new Hero(); i.name = &quot;vn&quot;; i.HP = 2000; i.addHP(200); &#125;&#125;/* è¾“å‡ºç»“æœï¼š Hello JAVA åŠ è¡€!*/ æ€»ç»“ java é¢å¯¹å¯¹è±¡å’Œ C# ç›®å‰æœ‰ä»¥ä¸‹åŒºåˆ«ï¼š java æ¯æ¬¡ new --&gt; class ï¼Œåœ¨è¿™ä¸ªæ–°ç±»ä¸­åªèƒ½å†™ä¸€ä¸ªç±»ï¼Œæœ‰å¤šä¸ªç±»ä¼šæŠ¥é”™ System.out.println è¿˜ä¸å¤ªç†Ÿï¼Œå®˜æ–¹æ–‡æ¡£è¯­ç„‰ä¸è¯¦çš„ï¼Œå¾…æ‘¸ç´¢æ€ä¹ˆè¯»å®˜æ–¹æ–‡æ¡£ã€‚ 2.2 å˜é‡ å˜é‡ç±»å‹ æ•´å‹ intï¼ˆ4ç§ï¼‰ ç±»å‹ ç¼ºçœå€¼ é•¿åº¦ èŒƒå›´ byte 0 8 -128 ~ 127 short 0 16 -32768 ~ 32767 int 0 32 -2147483648 ~ 2147483647 long 0 65 -9223372036854775808 ~ 9223372036854775807 å³ä½¿å£°æ˜ long ç±»å‹ï¼Œä¹Ÿè¦ä»¥ Læˆ–è€…lç»“å°¾ï¼Œå¦åˆ™æ˜¯intç±»å‹ 12long val = 1234567890; // æŠ¥é”™ï¼Œè¢«å½“æˆintç±»å‹è¶…å‡ºèŒƒå›´long val = 1234567890L; // æ­£ç¡® int ç±»å‹ ä¹Ÿå¯ä»¥è¡¨ç¤º 4ç§è¿›åˆ¶ 1234int decVal = 26; //é»˜è®¤intå‹int hexVal = 0x1a; //16è¿›åˆ¶int oxVal = 032; //8è¿›åˆ¶int binVal = 0b11010; //2è¿›åˆ¶ å­—ç¬¦å‹ char å¯ä»¥ç”¨char ç±»å‹è¡¨ç¤ºä¸€äº›è½¬ä¹‰å­—ç¬¦ï¼š 1234567//ä»¥ä¸‹æ˜¯è½¬ä¹‰å­—ç¬¦char tab = &#x27;\\t&#x27;; // åˆ¶è¡¨ç¬¦char carriageReturn = &#x27;\\r&#x27;; // å›è½¦char newLine = &#x27;\\n&#x27;; // æ¢è¡Œchar doubleQuote = &#x27;\\&quot;&#x27;; // åŒå¼•å·char singleQuote = &#x27;\\&#x27;&#x27;; // å•å¼•å·char backslash = &#x27;\\\\&#x27;; // åæ–œæ  æµ®ç‚¹å‹ floatã€double float ç±»å‹è¡¨ç¤ºæµ®ç‚¹æ•°ï¼ˆæ•´æ•°æ—¶ä¸æŠ¥é”™ï¼‰æ—¶è¦åŠ f ï¼š 12float f = 123.456; //æŠ¥é”™ï¼Œä¸€å®šè¦åŠ ffloat f1 = 123.456f; // æ­£ç¡® double ç±»å‹è¡¨ç¤ºæµ®ç‚¹æ•°ä¸ç”¨åŠ ï¼š 12double d = 123.456; //æ­£ç¡®double d1 = 1.23456e2 // ç§‘å­¦æŠ€æœ¯æ³• = 1.23456 * 10^2 2020-12-30 æ€»ç»“ï¼š åœ¨javaä¸­ï¼Œlongã€floatï¼ˆdoubleä¸ç”¨ï¼‰ç±»å‹ï¼Œå˜é‡å€¼è¿˜è¦+å‰/åç¼€å¯¹åº”ï¼Œæ‰èƒ½æ­£ç¡®å®šä¹‰ã€‚ å¸ƒå°”å‹ boolean 1boolean b1 = true; å­—ç¬¦ä¸² String String ç±»å‹å…¶å®å¹¶ä¸æ˜¯åŸºæœ¬ç±»å‹ , è€Œæ˜¯ lmmutable ç±»å‹ ï¼›è€Œä¸”ä¸€æ—¦åˆ›å»ºä¸èƒ½åˆ«æ”¹å˜ã€‚ è¿™é‡Œä¸€æ—¦åˆ›å»ºä¸èƒ½è¢«æ”¹å˜ï¼Œä¸èƒ½æ”¹å˜å†…å®¹ä½†æ˜¯å¯ä»¥æ”¹å˜å¼•ç”¨æŒ‡å‘ï¼Œæ¯”å¦‚ä¸‹é¢ï¼š 12String str = &quot;hello&quot;;str = &quot;hello world&quot;; //æ”¹å˜æˆåŠŸï¼Œæ”¹å˜äº†å¼•ç”¨ å®é™…ä¸ŠåˆæˆåŠŸæ”¹å˜äº†ï¼Œå› ä¸ºæ”¹å˜äº†str åŸæ¥æŒ‡å‘â€œhelloâ€ â€”&gt; è½¬ä¸ºæŒ‡å‘ â€œhello worldâ€ ç±»å‹è½¬æ¢ ä½ç²¾åº¦å‘é«˜ç²¾åº¦è½¬æ¢ è¿™ç§è½¬æ¢æ˜¯ä¸éœ€è¦å¼ºåˆ¶è½¬æ¢çš„ï¼Œé»˜è®¤è½¬æ¢å°±å¯ä»¥ã€‚ é«˜ç²¾åº¦å‘ä½ç²¾åº¦è½¬æ¢ å’Œä»¥å‰å­¦çš„æ— å¤ªå¤§åŒºåˆ«ï¼Œæ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š short &amp; char è½¬æ¢ è™½ç„¶äºŒè€…ä½æ•°ç›¸åŒä½†æ˜¯è¿˜æ˜¯è¦å¼ºåˆ¶è½¬æ¢ 123char c = &#x27;A&#x27;;short s = 80;c = (char) s; // å¼ºåˆ¶è½¬æ¢ int ä»¥ä¸‹æ•°æ®ç›¸åŠ  åœ¨ java ä¸–ç•Œé‡Œï¼Œå¦‚æœç²¾åº¦ &lt; int è¿›è¡Œ æ•°å€¼è¿ç®—ä¼šè¢«è‡ªåŠ¨æå‡åˆ°intç±»å‹ 123short a = 1;short b = 2;System.out.println(getType(a+b)); // intç±»å‹ ä¹Ÿå°±æ˜¯è¯´ä¸‹é¢å¿…é¡»è¦å¼ºåˆ¶è½¬æ¢ : 1short c = (short)(a + b); // â€» â€» â€» æ³¨æ„ç†è§£ â€» â€» â€» å˜é‡ä¿®é¥° final å½“ä¸€ä¸ªå˜é‡è¢« final ä¿®é¥°çš„æ—¶å€™ï¼Œè¯¥å˜é‡åªæœ‰ä¸€æ¬¡èµ‹å€¼çš„æœºä¼šã€‚ 12final int i = 1;i = 5 // å‡ºé”™ï¼Œiå·²ç»è¢«èµ‹å€¼è¿‡æ¥ ç‰¹åˆ«çš„æ³¨æ„ï¼Œå½“ final ä¿®é¥°å‚æ•°æ—¶ï¼š 1234567public class HelloWorld&#123; public void method1(final int j) &#123; j = 5; //è¿™ä¸ªèƒ½å¦æ‰§è¡Œï¼Ÿ &#125;&#125; æ­¤æ—¶æ˜¯ä¸èƒ½æ‰§è¡Œçš„ï¼Œå› ä¸ºè°ƒç”¨æ–¹æ³•æ˜¯ å®å‚èµ‹å€¼ç»™å½¢å‚ï¼Œj = 5 ä¸èƒ½å†èµ‹å€¼äº†ã€‚ 2.3 è¾“å…¥ã€è¾“å‡º è¾“å‡º Println å­—ç¬¦ä¸²ç›´æ¥å¯ä»¥**+**è¿æ¥ï¼Œæ¶‰åŠåˆ°å¤æ‚ä¸€èˆ¬è¿˜æ˜¯ format ï¼š 1System.out.println(&quot;hello&quot;+&quot; world &quot;); // è¾“å‡ºï¼šhello world format %s ï¼šè¡¨ç¤ºå­—ç¬¦ä¸² %nï¼šè¡¨ç¤ºæ¢è¡Œç¬¦ %dï¼šè¡¨ç¤ºæ•´æ•° %8dï¼Œï¼ˆé»˜è®¤ï¼‰å³å¯¹é½ï¼Œå 8é•¿åº¦ ï¼›%-8dï¼Œå·¦å¯¹é½ï¼Œ8é•¿åº¦ï¼›%08dï¼Œé•¿åº¦8ä¸å¤Ÿè¡¥0ã€‚ 12System.out.format(&quot;%08dï¼Œ%n&quot;,123); // è¾“å‡º 00000123System.out.format(&quot;%08d&quot;,123.45); // å‡ºé”™ï¼Œä¸èƒ½æ˜¯æµ®ç‚¹æ•° %fï¼šè¡¨ç¤ºæµ®ç‚¹æ•° %.2fï¼Œè¡¨ç¤ºä¿ç•™ä¸¤ä½å°æ•°ã€‚ 1System.out.format(&quot;%.1f&quot;,123.456); // å››èˆäº”å…¥ï¼Œä¿ç•™ä¸€ä½å°æ•°ï¼š123.5 è¾“å…¥ è¾“å…¥ä¸€èˆ¬æ˜¯ç”¨ Scannerç±» æ¥æ•æ‰ç”¨æˆ·è¾“å…¥ã€‚ åŸºæœ¬ä½¿ç”¨ 12345678910111213141516import java.util.Scanner; // 1. å¼•ç”¨Scannerç±»public class hello&#123; public static void main(String[] args) &#123; Scanner s = new Scanner(System.in); // 2. å®ä¾‹åŒ– Scannerå¯¹è±¡ System.out.println(&quot;è¯·è¾“å…¥ä¸€ä¸ªæ•´æ•°&quot;); int a = s.nextInt(); // è¯»å…¥æ•´æ•° System.out.println(&quot;è¾“å…¥æ•´æ•°ä¸º ï¼š&quot; + a); System.out.println(&quot;è¯·è¾“å…¥ä¸€è¡Œå­—ç¬¦ä¸²&quot;); String str1 = s.nextLine(); // 3.è¯»å–å›è½¦é”® String str1 = s.nextLine(); //è¯»å…¥å­—ç¬¦ä¸² System.out.println(&quot;è¾“å…¥å­—ç¬¦ä¸²ä¸º ï¼š&quot; + str1); &#125;&#125; è¯»å…¥è¾“å…¥æ•°æ®é¦–å…ˆéœ€è¦å¼•ç”¨ Scannerç±» ï¼Œä¸”å®ä¾‹åŒ– æ•´æ•°ã€æµ®ç‚¹æ•°ã€å­—ç¬¦ä¸²â€¦éƒ½æœ‰å¯¹åº” nextInt() ã€nextFloat() ã€nextLine() ç­‰æ–¹æ³• ç‰¹åˆ«æ³¨æ„ nextLine() æ–¹æ³•ï¼Œå‰é¢æœ‰å¦‚ ï¼šnextInt()è¯»å…¥æ•°æ® + å›è½¦ ï¼Œ ä¼šè¯»å…¥å›è½¦~ 2.4 æ§åˆ¶æµç¨‹ switch switch å¯ä»¥ä½¿ç”¨ byte,short,int,char,String,enum 2.5 æ•°ç»„ å£°æ˜ &amp; åˆ›å»º ä¸€ç»´æ•°ç»„ 12345678910// 1.å£°æ˜ä¸€ä¸ªå¼•ç”¨int a[]; int[] a;// 2.åˆ†é…ç©ºé—´a = new int[5];// 3.åˆ†é…ç©ºé—´ &amp; èµ‹å€¼a = new int[5]&#123;1,2,3,4,5&#125;;a = new int[]&#123;1,2,3,4,5&#125;; // çœç•¥ï¼š(1) [æ•°ç»„å¤§å°]a = &#123;1,2,3,4,5&#125;; // çœç•¥ï¼š(1) [æ•°ç»„å¤§å°] (2) new åˆ†é…ç¬¦ äºŒç»´æ•°ç»„ 12345678910// 1.å£°æ˜ä¸€ä¸ªå¼•ç”¨int[][] a;// 2.åˆ†é…ç©ºé—´int[][] a = new int[2][3];int[][] a = new int[2][]; // è™½ç„¶ä¸€ç»´æ•°ç»„é•¿åº¦è¢«çœç•¥ï¼Œä½†æ˜¯è¦è®¿é—®å¿…é¡»æŒ‡å®šä¸€ç»´æ•°ç»„é•¿åº¦// 3.åˆ†é…ç©ºé—´ &amp; èµ‹å€¼int[][] a = new int[][]&#123; &#123;1,2,4&#125;, &#123;4,5&#125;, &#123;6,7,8,9&#125;&#125;;int[][] a = &#123; &#123;1,2,4&#125;, &#123;4,5&#125;, &#123;6,7,8,9&#125;&#125;; // çœç•¥ï¼š(1) [][] (2) new åˆ†é…ç¬¦ å¢å¼ºå‹forå¾ªç¯ ä¸¾ä¾‹ å¾ªç¯æ‰“å°æ•°ç»„å†…å®¹ã€‚ 12345int[] arr = &#123;1,2,3&#125;;for(int item : arr) // ç±»æ¯”C#ï¼šforeach(int item in arr)&#123; System.out.println(item);&#125; è¾“å‡º 1234//è¾“å‡º 1 2 3 å¸¸ç”¨æ•°ç»„æ“ä½œ å¤åˆ¶ ç”¨ Arrays ç±» å®ç°ï¼š é¦–å…ˆæ³¨æ„ï¼Œéœ€è¦å¼•ç”¨ï¼šimport java.util.Arrays; 1234567891011121314/* å¤åˆ¶æ•°ç»„ : Arrays.copyOfRange(int[] original, int from, int to) - original : è¢«å¤åˆ¶çš„æ•°ç»„ - fromï¼šå¤åˆ¶èµ·å§‹ä½ç½® - toï¼š å¤åˆ¶ç»“æŸä½ç½®*/int[] srcArr = &#123;1,2,3,4,5&#125;;int[] destArr ; // ä¸‹é¢å¤åˆ¶ï¼šè‡ªåŠ¨ç»™ç›®æ ‡æ•°ç»„åˆ†é…ç©ºé—´destArr = Arrays.copyOfRange(srcArr, 0, arr.length); for (int item : b)&#123; System.out.print(item + &quot;&quot;);&#125; åˆå¹¶ ä»¥ä¸‹åˆ©ç”¨ç³»ç»Ÿæ–¹æ³• å¤åˆ¶å®ç°åˆå¹¶ä¸¤ä¸ªæ•°ç»„ï¼š 123456789101112131415161718/* å¤åˆ¶æ•°ç»„ : System.arraycopy(src, srcPos, dest, destPos, length) - src : è¢«å¤åˆ¶çš„æ•°ç»„ - srcPosï¼šè¢«å¤åˆ¶æ•°ç»„èµ·å§‹ä½ç½® - destï¼šç›®æ ‡æ•°ç»„ - destPosï¼šå¤åˆ¶åˆ°ç›®æ ‡æ•°ç»„çš„èµ·å§‹ä½ç½® - length ï¼šå¤åˆ¶çš„é•¿åº¦*/int[] arr1 = &#123;1,2,3,4,5&#125;;int[] arr2 = &#123;6,7,8&#125;;int[] arr3 = new int[arr1.length + arr2.length];System.arraycopy(arr1, 0, arr3,0 ,arr1.length); // å¿…é¡»æ–°æ•°ç»„é•¿åº¦å®¹ä¸‹å‰2ä¸ªæ•°ç»„System.arraycopy(arr2, 0, arr3,arr1.length ,arr2.length);for (int item : arr3)&#123; System.out.print(item + &quot;&quot;); // æœ€ç»ˆè¾“å‡ºï¼š 1 2 3 4 5 6 7 8&#125; è½¬æ¢æˆå­—ç¬¦ä¸² 12345678/* è½¬å­—ç¬¦ä¸² :Arrays.toString(src); - src : è¢«è½¬æ¢çš„æ•°ç»„*/int[] srcArr = &#123;1,2,3,4,5&#125;;String content = Arrays.toString(srcArr);System.out.println(content); // è¾“å‡ºï¼š[1, 2, 3, 4, 5] æ’åº 123456789/* æ’åº : Arrays.sort(src); - src : è¢«æ’åºçš„æ•°ç»„ è¿”å›å€¼ : æ— è¿”å›å€¼ï¼*/ int[] srcArr = &#123;1,2,3,4,5&#125;; Arrays.sort(srcArr); // æ— è¿”å›å€¼ System.out.println(Arrays.toString(srcArr)); // è¾“å‡ºï¼š[1, 2, 3, 4, 5] äºŒåˆ†æŸ¥æ‰¾ï¼ˆå¿…é¡»å…ˆsortæ’åºï¼ï¼‰ 12345678910/* æŸ¥æ‰¾ : Arrays.binarySearch(src,elem); - src : è¢«æœç´¢çš„æ•°ç»„ - elem : è¢«æœç´¢çš„å…ƒç´  è¿”å›å€¼ : è¢«æœç´¢å…ƒç´ çš„ä½ç½®*/ int[] srcArr = &#123;1,2,3,4,5&#125;; Arrays.sort(srcArr); // æ— è¿”å›å€¼ System.out.println(Arrays.binarySearch(srcArr, 3)); // è¾“å‡ºï¼š2ï¼ˆä»0è®¡æ•°ï¼‰ åˆ¤æ–­æ˜¯å¦ç›¸åŒ System.out.println(Arrays.equals(a, b)); å¡«å…… ä½¿ç”¨æŒ‡å®šå…ƒç´ å€¼ï¼Œå¡«å……æ•°ç»„ã€‚ 123int a[] = new int[3];Arrays.fill(a, 6); System.out.println(Arrays.toString(a)); // è¾“å‡ºï¼š[6,6,6] ç¬¬ä¸‰ç« ï¼šç±»å’Œå¯¹è±¡ 3.1 åŸºæœ¬æ¦‚å¿µ å¼•ç”¨ åŒºåˆ† å¼•ç”¨ ä¸ = ? 12int h = 5; // æ­¤æ—¶ = è¡¨ç¤ºèµ‹å€¼ ï¼Œh æ˜¯å˜é‡Hero h1 = new Hero(); // æ­¤æ—¶ = è¡¨ç¤ºæŒ‡å‘ï¼Œh1 æ˜¯å¼•ç”¨ ä¸€ä¸ªå¯¹è±¡ï¼Œæœ‰å¤šä¸ªå¼•ç”¨ 12Hero h1 = new Hero();Hero h2 = h1; //h2æŒ‡å‘h1æ‰€æŒ‡å‘çš„å¯¹è±¡ ä¸€ä¸ªå¼•ç”¨ï¼Œæœ‰å¤šä¸ªå¯¹è±¡ ä¸‹é¢ ä¸¤æ¬¡ new Hero() äº§ç”Ÿäº†ä¸¤ä¸ªå¯¹è±¡ 12Hero garen = new Hero(); // garen æŒ‡å‘Heroå¯¹è±¡1garen = new Hero(); // garen æŒ‡å‘Heroå¯¹è±¡2 ä½†æ˜¯ï¼ŒåŒä¸€æ—¶é—´åªèƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥å¯¹è±¡1æ²¡æœ‰å¼•ç”¨æŒ‡å‘ã€‚ ç»§æ‰¿ ä½¿ç”¨ extends å…³é”®å­—æ¥å®ç°ç»§æ‰¿ï¼š 123456789101112// ç‰©å“ç±»public class Item&#123; String name; String price;&#125;// è‰é‹ç±»public class shone extends Item &#123; int speed;&#125; å‚æ•° thiså‚æ•° this ä»£è¡¨å½“å‰å¯¹è±¡ã€‚ ç±»å‡½æ•°å‚æ•° å’Œ å±æ€§é‡åï¼Œthis.å±æ€§å è®¿é—®å±æ€§ æ„é€ æ–¹æ³•ä¸­è°ƒç”¨å¦ä¸€ä¸ªæ„é€ æ–¹æ³• ï¼Œthis(å‚æ•°) ä¼ å‚ï¼ˆå¼•ç”¨ç±»å‹ä¼ å‚ï¼‰ å°è¯•å†™å‡ºä¸‹é¢ç¨‹åºè¾“å‡ºç»“æœã€‚ 12345678910111213141516171819202122232425/* å†™å‡ºä¸‹é¢è¾“å‡ºç»“æœ */public class Hero &#123; String name; //å§“å float hp; //è¡€é‡ public Hero(String name,float hp) &#123; this.name = name; this.hp = hp; &#125; //å¤æ´» public void revive(Hero h) &#123; h = new Hero(&quot;æè«&quot;,383); &#125; public static void main(String[] args) &#123; Hero teemo = new Hero(&quot;æè«&quot;,383); teemo.hp = teemo.hp - 400; // å—åˆ°400ä¼¤å®³ï¼ŒæŒ‚äº† teemo.revive(teemo); // å¤æ´» System.out.println(teemo.hp); &#125; &#125; è¾“å‡ºç»“æœï¼š -17 , å³åŸæ¥æ­»å»teemoè¡€é‡ è™½ç„¶æ˜¯ä¼ é€’å¼•ç”¨ï¼Œä½†æ˜¯åœ¨ revive æ–¹æ³•ä¸­ï¼Œæ­¤æ—¶ hp = 383 ; é€€å‡ºæ–¹æ³•åï¼Œh æŒ‡å‘çš„ä¸´æ—¶å¯¹è±¡è¢«é”€æ¯ã€‚ æ‰§è¡Œreviveæ–¹æ³•å‰ï¼Œå¼•ç”¨teemoæŒ‡å‘ æ­»å»teemoå¯¹è±¡ ï¼› æ‰§è¡Œreviveæ–¹æ³•æ—¶ï¼Œå¼•ç”¨teemo å¤åˆ¶ä¸€ä»½ç»™å½¢å‚ h ï¼Œteemo å’Œ h éƒ½æ˜¯æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼›ä½†æ˜¯ï¼Œå½¢å‚å¼•ç”¨h åˆnewäº†ä»½æ–°å†…å­˜ï¼Œç°åœ¨å®ƒæŒ‡å‘çš„æ˜¯æ–°Heroå¯¹è±¡(æ— å) ã€‚ å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼šå¯¹è±¡ä¼ å‚ æ‰§è¡Œreviveæ–¹æ³•åï¼Œå¼•ç”¨h æŒ‡å‘å¯¹è±¡è¢«é”€æ¯ï¼Œå¼•ç”¨teemo å§‹ç»ˆæŒ‡å‘æ­»å»teemoå¯¹è±¡ã€‚ è®¿é—®ä¿®é¥°ç¬¦ ä¼¼ä¹æ²¡æœ‰è¯´ï¼Œå¯¹è±¡è®¿é—®æƒé™ï¼Ÿ ä¸‹å›¾ï¼Œæ˜¯ç±»ä¸­å±æ€§ã€æ–¹æ³•è¢«ä¿®é¥°åå„ç§æƒ…å†µè®¿é—®æƒé™ã€‚ç»¿è‰²è¡¨ç¤ºå¯ä»¥è®¿é—®ï¼›çº¢è‰²è¡¨ç¤ºä¸å¯ä»¥ã€‚ é™æ€æ–¹æ³•å’Œå±æ€§ é™æ€å±æ€§static ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ï¼Ÿ å¦‚æœä¸€ä¸ªå±æ€§ï¼Œæ¯ä¸ªè‹±é›„éƒ½ä¸ä¸€æ ·ï¼Œæ¯”å¦‚nameï¼Œè¿™æ ·çš„å±æ€§å°±åº”è¯¥è®¾è®¡ä¸ºå¯¹è±¡å±æ€§ï¼Œå› ä¸ºå®ƒæ˜¯è·Ÿç€å¯¹è±¡èµ°çš„ï¼Œæ¯ä¸ªå¯¹è±¡çš„nameéƒ½æ˜¯ä¸åŒçš„ã€‚ å¦‚æœä¸€ä¸ªå±æ€§ï¼Œæ‰€æœ‰çš„è‹±é›„éƒ½å…±äº«ï¼Œéƒ½æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆå°±åº”è¯¥è®¾è®¡ä¸ºç±»å±æ€§ = é™æ€å±æ€§ã€‚ é™æ€æ–¹æ³•static ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ï¼Ÿ å¦‚æœæ–¹æ³•é‡Œè®¿é—®äº†å¯¹è±¡å±æ€§ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•ï¼Œå°±å¿…é¡»è®¾è®¡ä¸ºå¯¹è±¡æ–¹æ³•ï¼› å¦‚æœä¸€ä¸ªæ–¹æ³•ï¼Œæ²¡æœ‰è°ƒç”¨ä»»ä½•å¯¹è±¡å±æ€§ï¼Œé‚£ä¹ˆå°±å¯ä»¥è€ƒè™‘è®¾è®¡ä¸ºç±»æ–¹æ³•ã€‚ æ¯”å¦‚å–éšæœºæ•° ï¼šMath.random() å…¶å®ƒç‰¹æ€§ é™æ€æ–¹æ³•ä¸èƒ½è°ƒç”¨éé™æ€æ–¹æ³•ã€æˆå‘˜ ï¼›åä¹‹å´å¯ä»¥ã€‚ å®ä¾‹æˆå‘˜å˜é‡æ˜¯å±äºæŸä¸ªå¯¹è±¡çš„ï¼Œè€Œé™æ€æ–¹æ³•åœ¨æ‰§è¡Œæ—¶ï¼Œå¹¶ä¸ä¸€å®šå­˜åœ¨å¯¹è±¡ã€‚æ‰€ä»¥ï¼Œä¸å…è®¸ï¼Œé™æ€æ–¹æ³•è°ƒç”¨å®ä¾‹æˆå‘˜å˜é‡ã€‚ å¯¹è±¡å±æ€§åˆå§‹åŒ– åˆå§‹åŒ–æ–¹æ³• æ³¨ï¼šé™æ€å±æ€§åˆå§‹åŒ–ï¼Œé™¤äº†ç¬¬ä¸‰ç§ï¼šä¸èƒ½åœ¨æ„é€ å‡½æ•°ï¼ˆ*éé™æ€å‡½æ•°ä¸èƒ½è°ƒç”¨é™æ€å±æ€§ï¼Ÿ*å¯ä»¥ï¼è§å‰ã€‚ï¼‰åˆå§‹åŒ–ï¼Œå…¶ä½™éƒ½å¯ä»¥ï¼ 1234567891011121314public class Hero &#123; // 1.å£°æ˜å±æ€§æ—¶ public String name = &quot;first&quot;; // 2.åˆå§‹åŒ–å—æ—¶ &#123; name = &quot;second&quot;; &#125; // 3.æ„é€ å‡½æ•°æ—¶ public Hero() &#123; name = &quot;third&quot;; &#125; &#125; åˆå§‹åŒ–é¡ºåº é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä¸Šè¿°ä»£ç  name æœ€ç»ˆè¢«åˆå§‹åŒ– ï¼Ÿ åˆå§‹åŒ–å±æ€§ï¼š é™æ€å˜é‡ --&gt; é™æ€åˆå§‹åŒ–å— --&gt; å˜é‡ --&gt; åˆå§‹åŒ–å— --&gt; æ„é€ å™¨ æ‰€ä»¥ï¼Œç­”æ¡ˆæ˜¯ ï¼š thirdã€‚ 3.2 å•ä¾‹æ¨¡å¼ 2020-12-23 æ€»ç»“ï¼š å•ä¾‹æ¨¡å¼åº”ç”¨åœºæ™¯ &amp; ç‰¹ç‚¹ ã€åœºæ™¯ã€‘ ä¾‹1ï¼šå›æ”¶ç«™ã€‚åœ¨windowsæ¡Œé¢ä¸Šæ‰“å¼€äº†ä¸€ä¸ªå›æ”¶ç«™ï¼Œå½“æˆ‘ä»¬è¯•å›¾å†æ¬¡æ‰“å¼€ä¸€ä¸ªæ–°çš„å›æ”¶ç«™æ—¶ï¼ŒWindowsç³»ç»Ÿå¹¶ä¸ä¼šä¸ºä½ å¼¹å‡ºä¸€ä¸ªæ–°çš„å›æ”¶ç«™çª—å£ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ•´ä¸ªç³»ç»Ÿè¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿåªç»´æŠ¤ä¸€ä¸ªå›æ”¶ç«™çš„å®ä¾‹ã€‚è¿™å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„å•ä¾‹æ¨¡å¼è¿ç”¨ã€‚ ä¾‹2ï¼šç½‘ç«™è®¡æ•°å™¨ã€‚ ç½‘ç«™çš„è®¡æ•°å™¨ï¼Œä¸€èˆ¬é‡‡ç”¨å•ä¾‹æ¨¡å¼å®ç°ã€‚å¦‚æœå­˜åœ¨å¤šä¸ªè®¡æ•°å™¨ï¼Œæ¯ä¸€ä¸ªç”¨æˆ·è®¿é—®éƒ½åˆ·æ–°è®¡æ•°å™¨å€¼ï¼Œè®¡æ•°å€¼éš¾ä»¥åŒæ­¥ã€‚ ä¾‹3ï¼šç¨‹åºæ—¥å¿—ã€‚ webå¼€å‘ä¸­è¯»å–é…ç½®æ–‡ä»¶éƒ½é€‚åˆä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼Œå¦‚HttpApplication å°±æ˜¯å•ä¾‹çš„å…¸å‹åº”ç”¨ã€‚ ã€ç‰¹ç‚¹ã€‘ ä¼˜ç‚¹ï¼šå®ç°äº†å¯¹å”¯ä¸€å®ä¾‹è®¿é—®çš„å¯æ§ï¼›å¯¹äºä¸€äº›éœ€è¦é¢‘ç¹åˆ›å»ºå’Œé”€æ¯çš„å¯¹è±¡æ¥è¯´å¯ä»¥æé«˜ç³»ç»Ÿçš„æ€§èƒ½ã€‚ ç¼ºç‚¹ï¼š ä¸é€‚ç”¨äºå˜åŒ–é¢‘ç¹çš„å¯¹è±¡ï¼› æ»¥ç”¨å•ä¾‹å°†å¸¦æ¥ä¸€äº›è´Ÿé¢é—®é¢˜ï¼Œå¦‚ä¸ºäº†èŠ‚çœèµ„æºå°†æ•°æ®åº“è¿æ¥æ± å¯¹è±¡è®¾è®¡ä¸ºçš„å•ä¾‹ç±»ï¼Œå¯èƒ½ä¼šå¯¼è‡´å…±äº«è¿æ¥æ± å¯¹è±¡çš„ç¨‹åºè¿‡å¤šè€Œå‡ºç°è¿æ¥æ± æº¢å‡ºï¼› å¦‚æœå®ä¾‹åŒ–çš„å¯¹è±¡é•¿æ—¶é—´ä¸è¢«åˆ©ç”¨ï¼Œç³»ç»Ÿä¼šè®¤ä¸ºè¯¥å¯¹è±¡æ˜¯åƒåœ¾è€Œè¢«å›æ”¶ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´å¯¹è±¡çŠ¶æ€çš„ä¸¢å¤±ã€‚ å•ä¾‹æ¨¡å¼ä¸‰å…ƒç´  æ„é€ æ–¹æ³•ç§æœ‰åŒ– é™æ€å±æ€§æŒ‡å‘å®ä¾‹ public staticçš„ getInstanceæ–¹æ³•ï¼Œè¿”å›ç¬¬äºŒæ­¥çš„é™æ€å±æ€§ é¥¿æ±‰å•ä¾‹æ¨¡å¼ é¥¿æ±‰å¼ ï¼šæ˜¯ç«‹å³åŠ è½½çš„æ–¹å¼ï¼Œæ— è®ºæ˜¯å¦ä¼šç”¨åˆ°è¿™ä¸ªå¯¹è±¡ï¼Œéƒ½ä¼šåŠ è½½ ä¸¾ä¾‹ ï¼šæ•°æ®åº“è¿æ¥ï¼Œæ„é€ ç«‹å³åˆå§‹åŒ–ï¼Œå¯åŠ¨æ—¶æ„Ÿè§‰ä¼šå¡é¡¿ã€‚ 1234567891011121314public class GiantDragon &#123; // 1.ç§æœ‰åŒ–æ„é€ æ–¹æ³•ï¼šç±»å¤–æ— æ³• new è¿›è¡Œå®ä¾‹åŒ– private GiantDragon()&#123;&#125; // 2.é™æ€å±æ€§æŒ‡å‘å®ä¾‹ private static GiantDragon instance = new GiantDragon(); // 3.æ¯æ¬¡è·å–å®ä¾‹éƒ½æ˜¯ 2. ä¸­å®ä¾‹ï¼Œå®ç°å•ä¾‹ public static GiantDragon getInstance() &#123; return instance; &#125;&#125; æ‡’æ±‰å•ä¾‹æ¨¡å¼ é¥¿æ±‰å¼ ï¼šéç«‹å³åŠ è½½çš„æ–¹å¼ï¼Œä½¿ç”¨æ—¶æ‰ä¼šåŠ è½½ã€‚ ä¸¾ä¾‹ ï¼šä¸šåŠ¡ä¸Šæœ‰æ¯”è¾ƒå……åˆ†çš„å¯åŠ¨å’Œåˆå§‹åŒ–æ—¶é—´ï¼Œå°±ä½¿ç”¨é¥¿æ±‰å¼ï¼Œå¦åˆ™å°±ä½¿ç”¨æ‡’æ±‰å¼ã€‚ 12345678910111213/* éƒ¨åˆ†ä»£ç ç•¥ã€‚åŒé¥¿æ±‰å•ä¾‹æ¨¡å¼ ï¼Œä¸è¿‡å°† 2. &amp; 3.ä¸­è¿›è¡Œä¸€äº›æ”¹å˜ */ // 2.é™æ€å±æ€§æŒ‡å‘å®ä¾‹ ï¼š ä½†ä¸newï¼ private static GiantDragon instance = null; // 3.åŒå‰ï¼šä¸å­˜åœ¨æ‰åˆ›å»ºä¸€æ¬¡ï¼Œé˜²æ­¢åˆ›å»ºå‡ºä¸åŒå¯¹è±¡ã€‚ public static GiantDragon getInstance() &#123; if(instance == null) instance = new GiantDragon(); else return instance; &#125; 3.3 æšä¸¾ç±»å‹ æšä¸¾åˆ›å»º enumæ˜¯ç‰¹æ®Šclassï¼Œenumå£°æ˜å®šä¹‰çš„ç±»å‹å°±æ˜¯ä¸€ä¸ªç±»ã€‚ e.g. å•ç‹¬å†™ä¸€ä¸ªé¢œè‰²æšä¸¾ç±»Color.javaã€‚ 123456789101112131415161718enum Color &#123; RED(255, 0, 0), BLUE(0, 0, 255), BLACK(0, 0, 0), YELLOW(255, 255, 0); // rgbä¸‰å±æ€§ private int redValue; // è‡ªå®šä¹‰æ•°æ®åŸŸï¼Œprivateä¸ºäº†å°è£…ã€‚ private int greenValue; private int blueValue; // æ„é€ æšä¸¾å€¼ï¼Œæ¯”å¦‚RED(255,0,0) private Color(int r, int g, int b) &#123; this.redValue = r; this.greenValue = g; this.blueValue = b; &#125;&#125; æšä¸¾ + switch å¯ä»¥æ›´å¥½é™å®šèŒƒå›´ &amp; æŒ‡å®šå„ç§ç±»å‹ã€‚ 123456// æšä¸¾è°ƒç”¨ï¼šç±»å.æšä¸¾é¢œè‰²ï¼Œåˆ›å»ºå¯¹è±¡Color color = Color.RED; // ä¸ç”¨å†™åé¢å‚æ•°switch (color) // switch åˆ¤æ–­æ˜¯å¼•ç”¨ï¼ˆæˆ–å˜é‡ï¼‰ï¼Œswitch (Season s) æ˜¯é”™è¯¯å†™æ³•&#123; // case break åˆ¤æ–­ä»£ç &#125; æšä¸¾å¸¸ç”¨æ–¹æ³• ordinal è¿”å›æšä¸¾å€¼åœ¨æšä¸¾ç±»ç§çš„é¡ºåºã€‚è¿™ä¸ªé¡ºåºæ ¹æ®æšä¸¾å€¼å£°æ˜çš„é¡ºåºè€Œå®šã€‚ 12Color.RED.ordinal(); //è¿”å›ç»“æœï¼š0Color.BLUE.ordinal(); //è¿”å›ç»“æœï¼š1 compareTo Enumä¸­çš„compareToè¿”å›çš„æ˜¯ä¸¤ä¸ªæšä¸¾å€¼çš„é¡ºåºä¹‹å·®ã€‚å½“ç„¶ï¼Œå‰ææ˜¯ä¸¤ä¸ªæšä¸¾å€¼å¿…é¡»å±äºåŒä¸€ä¸ªæšä¸¾ç±»ï¼Œå¦åˆ™ä¼šæŠ›å‡ºClassCastException()å¼‚å¸¸ã€‚ 1Color.RED.compareTo(Color.BLUE); //è¿”å›ç»“æœ -1 [é™æ€]values é™æ€æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«å…¨éƒ¨æšä¸¾å€¼çš„æ•°ç»„ã€‚ 12345Color[] colors=Color.values();for(Color c:colors)&#123; System.out.print(c+&quot;,&quot;); &#125; //è¿”å›ç»“æœï¼šRED,BLUE,BLACK YELLOW,GREEN, toString è¿”å›æšä¸¾å¸¸é‡çš„åç§°ã€‚ 12Color c=Color.RED;System.out.println(c);//è¿”å›ç»“æœ: RED valueOf è¿™ä¸ªæ–¹æ³•å’ŒtoStringæ–¹æ³•æ˜¯ç›¸å¯¹åº”çš„ï¼Œè¿”å›å¸¦æŒ‡å®šåç§°çš„æŒ‡å®šæšä¸¾ç±»å‹çš„æšä¸¾å¸¸é‡ã€‚ 1Color.valueOf(&quot;BLUE&quot;); //è¿”å›ç»“æœ: Color.BLUE equals æ¯”è¾ƒä¸¤ä¸ªæšä¸¾ç±»å¯¹è±¡çš„å¼•ç”¨ã€‚ 12345//JDKæºä»£ç ï¼š public final boolean equals(Object other)&#123; return this==other; &#125; ç¬¬å››ç« ï¼šæ¥å£ä¸ç»§æ‰¿ 4.1 æ¥å£ JAVAä¸­ä½¿ç”¨æ¥å£ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ª new --&gt; class â€”&gt; ä¸‹æ‹‰é€‰æ‹© Interface â€”&gt; IAD.java ä¸‹é¢å®ç°ä¸€ä¸ª ADè‹±é›„ implements ADæ¥å£ã€‚ åœ¨ IAD.java ä¸­ï¼š 1234public interface IAD&#123; void ADAttack(); // æ¥å£ä¸èƒ½æœ‰ä½“:&#123;&#125;&#125; åœ¨ ADHero.java ä¸­ 12345678public class ADHero extends Hero implements IAD&#123; @Override // åŠ ä¸Šè¿™å¥IDEè‡ªåŠ¨æ˜¾ç¤ºå¯ä»¥ç»§æ‰¿çš„æ–¹æ³•ï¼›ä½†æ²¡æœ‰è¿™å¥ä¹Ÿå¯è‡ªå·±å†™æ–¹æ³•è¦†å†™ã€‚ public void ADAttack() &#123; System.out.println(&quot;è¾“å‡ºäº†ç‰©ç†ä¼¤å®³ï¼&quot;); &#125;&#125; 4.2 å¯¹è±¡è½¬æ¢ åŸºæœ¬æ¦‚å¿µ å¼•ç”¨ç±»å‹ &amp; å¯¹è±¡ç±»å‹ é€šå¸¸ï¼Œå¼•ç”¨ç±»å‹ å’Œ å¯¹è±¡ç±»å‹ æ˜¯ä¸€è‡´çš„ï¼Œå¦‚ï¼š 1ADHero ad = new ADHero(); å¼•ç”¨ad æŒ‡å‘äº†newå‡ºçš„æ–°å¯¹è±¡ï¼Œå®ƒä»¬ç±»å‹éƒ½æ˜¯ ADHeroã€‚ å¦‚æœ å¼•ç”¨ç±»å‹ â‰  å¯¹è±¡ç±»å‹ï¼šåˆ™æ˜¯ä¸‹è¿°çš„ç±»å‹è½¬æ¢é—®é¢˜ã€‚ å‘ä¸Šè½¬å‹ / å‘ä¸‹è½¬å‹ â€œå‘ä¸Šâ€ã€â€œå‘ä¸‹â€ï¼šæ˜¯ä¸€ç§ç»§æ‰¿çš„æ¦‚å¿µï¼Œçˆ¶ç±»åœ¨å­ç±»ä¸Š ï¼›ç±»åœ¨ç»§æ‰¿çš„æ¥å£ä¸Šã€‚ å‘ä¸Šè½¬å‹ï¼šåˆ™æŒ‡ å­ç±»è½¬çˆ¶ç±» ï¼›ç±»è½¬ä¸ºç»§æ‰¿çš„æ¥å£ã€‚ï¼ˆå¯è¡Œï¼‰ å‘ä¸Šè½¬å‹ è‹¹æœæ‰‹æœº ç»§æ‰¿ æ‰‹æœºï¼ŒæŠŠè‹¹æœæ‰‹æœºå½“åšæ™®é€šæ‰‹æœºä½¿ç”¨ï¼› æ€¡å®çº¯å‡€æ°´ ç»§æ‰¿ é¥®å“ï¼Œ æŠŠæ€¡å®çº¯å‡€æ°´å½“åšé¥®å“æ¥ä½¿ç”¨ã€‚ æ€»ç»“ï¼šç‰¹æ®Šå¯è½¬ä¸€èˆ¬ï¼Œå­è½¬çˆ¶ã€å­è½¬æ¥å£ã€‚ å­ç±»è½¬çˆ¶ç±» ä¸‹é¢ æŠŠç‰©ç†è‹±é›„è½¬æ™®é€šè‹±é›„ï¼Œæ˜¾ç„¶æ˜¯å¯è¡Œçš„ï¼š 123Hero h; // ä¸newï¼ADHero ad = new ADHero();h = ad; // ã€æ³¨æ„ã€‘ï¼šhæŒ‡å‘çš„æ˜¯ADHeroå¯¹è±¡ï¼Œä½†åªèƒ½ä½¿ç”¨ Hero ç±»æ–¹æ³•å±æ€§ï¼ å­ç±»è½¬çˆ¶æ¥å£ 12ADHero ad = new ADHero();AD adi = ad; å‘ä¸‹è½¬å‹ï¼ˆå¼ºåˆ¶ï¼‰ çˆ¶ç±»è½¬å­ç±»ï¼Œæœ‰çš„æ—¶å€™è¡Œï¼Œæœ‰çš„æ—¶å€™ä¸è¡Œï¼Œæ‰€ä»¥å¿…é¡»è¿›è¡Œå¼ºåˆ¶è½¬æ¢ã€‚ çˆ¶ç±»è½¬å­ç±» ä¸‹é¢ï¼Œè¿™ç§æƒ…å†µå‘ä¸‹è½¬å‹å¯è¡Œï¼šå› ä¸ºç¬¬ä¸‰è¡Œå­ç±»è½¬çˆ¶ç±»ï¼ŒhæŒ‡å‘ADHeroå¯¹è±¡ï¼ˆä½†åªèƒ½ä½¿ç”¨ Hero ç±»æ–¹æ³•å±æ€§ï¼‰ã€‚ 1234Hero h = new Hero();ADHero ad = new ADHero();h = ad; // çˆ¶ç±»ï¼ˆåŸºç±»ï¼‰å¼•ç”¨h æŒ‡å‘--&gt; ADHeroå¯¹è±¡ad = (ADHero) h; æ‰€ä»¥ä¸Šé¢ä»£ç è¡¨ç°çš„å¥½åƒæ˜¯ï¼Œçˆ¶ç±»è½¬å­ç±»æˆåŠŸï¼Œå…¶å®æ˜¯ ADHeroè½¬æ¢ä¸ºADHeroã€‚ çˆ¶æ¥å£è½¬å­ç±» 1234ADHero ad = new ADHero();AD Iad = ad; // å¼•ç”¨IadæŒ‡å‘ ADHeroå¯¹è±¡ADHero adHero = (ADHero) Iad; // ADHero è½¬ ADHero ï¼Œå¯è¡ŒADAPHero adapHero = (ADAPHero) Iad; // ä¸å¯è¡Œï¼ŒADHero ä¸èƒ½è½¬ ADAPHero æ²¡æœ‰ç»§æ‰¿å…³ç³»è½¬æ¢ ä¸€å®šå¤±è´¥ï¼Œä¸å¤šè¨€ã€‚ instanceof 123456ADHero ad = new ADHero();Hero h1 = ad;//åˆ¤æ–­å¼•ç”¨h1æŒ‡å‘çš„å¯¹è±¡ï¼Œæ˜¯å¦æ˜¯ADHeroç±»å‹System.out.println(h1 instanceof ADHero); // è¾“å‡ºï¼štrue//åˆ¤æ–­å¼•ç”¨h1æŒ‡å‘çš„å¯¹è±¡ï¼Œæ˜¯å¦æ˜¯Heroçš„å­ç±»å‹System.out.println(h1 instanceof Hero); // è¾“å‡ºï¼štrue 4.3 é‡å†™ &amp; éšè— &amp; é‡è½½ é‡å†™ é‡å†™ï¼šæ˜¯ä¸æ”¹å˜çˆ¶ç±»çš„æ–¹æ³•åå­—å’Œå‚æ•°ä¸ªæ•°å’Œç±»å‹ï¼Œç®€å•ç‚¹è¯´å°±æ˜¯å®ç°è·Ÿçˆ¶ç±»ä¸ä¸€æ ·çš„åŠŸèƒ½ã€‚ å…³é”®å­—ï¼šç»§æ‰¿ã€ä¸åŒç±»ï¼Œå’Œçˆ¶ç±»æ–¹æ³•åªæœ‰æ–¹æ³•ä½“ä¸ä¸€æ ·ã€‚ éšè— éšè—ï¼šæ˜¯æœ‰ä¸€ä¸ªè·Ÿçˆ¶ç±»ä¸€æ ·çš„é™æ€æ–¹æ³•ï¼Œè°ƒç”¨çš„æ—¶å€™å°±ç›´æ¥ç”¨å­ç±»çš„é™æ€æ–¹æ³•äº†ã€‚ å…³é”®å­—ï¼šç»§æ‰¿ã€ä¸åŒç±»ï¼Œå’Œçˆ¶ç±»æ–¹æ³•åªæœ‰æ–¹æ³•ä½“ä¸ä¸€æ ·ã€é™æ€ã€‚ é‡è½½ é‡è½½ï¼šæ˜¯æ–¹æ³•é‡è½½,æ–¹æ³•ç­¾åå®Œå…¨ä¸€è‡´,å‚æ•°ç±»å‹å’Œä¸ªæ•°ä¸åŒ,JVMå°±å¯ä»¥è¯†åˆ«å¹¶è°ƒç”¨é‡è½½æ–¹æ³•ã€‚ å…³é”®å­—ï¼šåŒç±»ã€å’ŒåŒç±»åŒåæ–¹æ³•å‚æ•°ç±»å‹ã€ä¸ªæ•°ã€æ–¹æ³•ä½“éƒ½ä¸åŒã€‚ 4.4 å¤šæ€ å¤šæ€ä¸€èˆ¬åˆ†ä¸ºï¼šæ“ä½œç¬¦å¤šæ€ï¼›ç±»å¤šæ€ï¼Œç”±ç±»å‹å‘ä¸Šè½¬æ¢ + é‡å†™/é‡è½½ å®ç°ï¼› æ“ä½œç¬¦å¤šæ€ æ¦‚å¿µ å¦‚ï¼š+ æ—¢å¯ä»¥è¡¨ç¤º æ•°å­—ç›¸åŠ  ä¹Ÿå¯è¡¨ç¤º å­—ç¬¦ä¸²è¿æ¥ ç­‰ï¼Œç”±è¿ç®—ç¬¦é‡è½½å®ç°ã€‚ 12int a = 3 + 5;int str = &quot;hello&quot; + &quot;world&quot;; è¿ç®—ç¬¦é‡è½½ ç±»å¤šæ€ ç±»å¤šæ€ä¸€èˆ¬éœ€æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š çˆ¶ç±»ï¼ˆæ¥å£ï¼‰æŒ‡å‘ å­ç±»å¯¹è±¡ å› ä¸ºæ‰€è°“ç±»å¤šæ€ï¼Œå°±æ˜¯å¯ä»¥ç”¨ åŸº/çˆ¶ç±» æŒ‡å‘å­ç±» è°ƒç”¨æ–¹æ³•æœ‰é‡å†™ åŒå‰ï¼Œçˆ¶ç±»è™½ç„¶åœ¨1. æŒ‡å‘å­ç±»å¯¹è±¡ï¼Œä½†åªå¯ä»¥ä½¿ç”¨çˆ¶ç±»æ–¹æ³•ã€å±æ€§ï¼›å¦‚æœæƒ³è°ƒç”¨å­ç±»æ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨çˆ¶ç±»å’Œå­ç±»éƒ½å£°æ˜åŒåæ–¹æ³•ï¼Œè¿™æ ·çˆ¶ç±».æ–¹æ³•()â€”&gt; æ‰§è¡Œ â€”&gt; å­ç±».æ–¹æ³•()ã€‚ ç±»å¤šæ€ä½œä¸š1ï¼šé‡å†™ å®ç°å¤šæ€ åˆ†åˆ«æœ‰ä»¥ä¸‹ä¸¤ä¸ªç±»ï¼š MagicPortionç±»ï¼Œ*effec()*ä½¿ç”¨åå›è“ï¼› LifePortion ç±»ï¼Œ*effec()*ä½¿ç”¨åå›è¡€ï¼› Heroç±»å¯¹è±¡ VNï¼ŒVNè°ƒç”¨æœ¬èº«æ–¹æ³• userItem(å‚æ•°) å³å¯å®ç°å›è¡€ã€å›è“ç­‰ç‰©å“ä½¿ç”¨ã€‚ å®ç°çˆ¶ç±»æ¥å£ Item è¦å®ç°å¤šæ€ï¼Œæˆ‘ä»¬åœ¨å¤–é¢ä½¿ç”¨ä¸€ä¸ªçˆ¶ç±»å¼•ç”¨æŒ‡å‘ä¸åŒå­ç±»å¯¹è±¡ï¼Œå†ç”¨å…¶è°ƒç”¨å­ç±»æ–¹æ³•ã€‚ è¿™æ ·ï¼Œä¸å¿…ä¸ºä¸åŒå­ç±»å¯¹è±¡ç”Ÿæˆä¸åŒå¯¹åº”å¼•ç”¨ï¼Œæ¯”å¦‚å¯ä½¿å¾—å‡½æ•°å‚æ•°ç»Ÿä¸€ç­‰ï¼ˆè§åï¼‰ã€‚ 1234public interface Item&#123; void effect();&#125; å®ç° MagicPortionã€LifePortion ç±» MagicPortionç±»ï¼Œ*effec()*ä½¿ç”¨åå›è“ï¼š 1234567public class MagicPortion implements Item&#123; public void effect() &#123; System.out.println(&quot;ä½¿ç”¨è“ç“¶å›è“100ï¼&quot;); &#125;&#125; LifePortion ç±»ï¼Œ*effec()*ä½¿ç”¨åå›è¡€ï¼š 1234567public class LifePortion implements Item&#123; public void effect() &#123; System.out.println(&quot;ä½¿ç”¨è¡€ç“¶å›è¡€100ï¼&quot;); &#125;&#125; Heroç±»è¡¨ç°å¤šæ€ è¦è¡¨ç°å¤šæ€ï¼Œè®©çˆ¶ç±»æŒ‡å‘å­ç±»å¯¹è±¡ï¼ŒåŒæ—¶å¯ä»¥æ‰§è¡Œå­ç±»åŒåï¼ˆé‡å†™ï¼‰æ–¹æ³• 1234567public class Hero&#123; void useItem(Item i) //çˆ¶ç±»æ¥å£Itemåšå‚æ•°ï¼Œå¯ä»¥æ¥æ”¶ä¸åŒå­ç±»å¯¹è±¡ &#123; i.effect(); &#125;&#125; è¿™æ ·ï¼Œç»Ÿä¸€äº†å‡½æ•°å‚æ•°ï¼Œä¸€ä¸ªæ–¹æ³•ï¼ˆä¸å¿…é‡è½½ï¼‰å°±å¯ä»¥å®ç°å„ç§ç‰©å“ä½¿ç”¨ã€‚ 123456// åœ¨ä¸»å‡½æ•°main()ä¸­Hero VN = new Hero();Item i1 = new MagicPortion();Item i2 = new LifePortion();VN.useItem(i1); // è¾“å‡ºï¼šä½¿ç”¨è“ç“¶å›è“100ï¼VN.useItem(i2); // è¾“å‡ºï¼šä½¿ç”¨è¡€ç“¶å›è¡€100ï¼ ç±»å¤šæ€ä½œä¸š2ï¼šéšè—staticæ— æ³•ä½“ç°å¤šæ€ å¦‚æœå°† Item ç±»æ”¹ä¸ºä»¥ä¸‹ï¼š 1234567public class Item // 1.æ¥å£--&gt;ç±»ï¼Œéšè—åªæ”¯æŒç±»&#123; static void effect() // 2.+staticï¼Œå…³é”®å­— &#123; System.out.println(&quot;ç‰©å“äº§ç”Ÿä¸€äº›æ•ˆæœ&quot;); // 3.æ·»åŠ æ–¹æ³•ä½“ &#125;&#125; ç„¶ååœ¨ MagicPortion &amp; LifePortion ç±» effect() ä¹ŸåŠ ä¸Šstaticå…³é”®å­—å®ç°åŒåéšè—ï¼š 1public static void effect() è¿™ä¸ªæ—¶å€™ä¸»å‡½æ•°è¾“å‡ºï¼š 1234// åœ¨ä¸»å‡½æ•°main()ä¸­Hero VN = new Hero();Item i1 = new MagicPortion();VN.useItem(i1); // è¾“å‡ºï¼šç‰©å“äº§ç”Ÿä¸€äº›æ•ˆæœ åŸå› å¦‚ä¸‹ï¼š éšè— å¯¹æ–¹æ³•éƒ½åŠ ä¸Šäº†staticå…³é”®å­—ï¼Œæ— æ³•åœ¨ Item i1 = new MagicPortion(); ï¼Œå®ç°å¼•ç”¨ i1åŠ¨æ€ç»‘å®š é™æ€æ–¹æ³•ï¼Œä¹Ÿå°±æ— æ³•å®ç°å¤šæ€ï¼ 4.5 super &amp; final åˆ©ç”¨superè°ƒç”¨çˆ¶ç±»å±æ€§ã€æ–¹æ³• 1234567public class ADHero extends Hero implements AD&#123; //åœ¨æŸä¸ªæ–¹æ³•ä¸­ super.moveSpeed; // 1.è°ƒç”¨çˆ¶ç±»å±æ€§ super.useItem(i); // 2.è°ƒç”¨çˆ¶ç±»æ–¹æ³•userItem super(); // 3.è°ƒç”¨çˆ¶ç±»æ— å‚æ„é€ å‡½æ•° &#125; final ä¿®é¥° ä¿®é¥°ç±»ï¼šç±»æ— æ³•è¢«ç»§æ‰¿ å¦‚ï¼Œå¯ç”¨è‡ªå®šä¹‰ç±» someString ç»§æ‰¿ç³»ç»Ÿç±» String ï¼Œç»“æœå¦‚ä½•ï¼Ÿ ä¸èƒ½ç»§æ‰¿ï¼Œå› ä¸º ç³»ç»Ÿç±» String ï¼Œæ˜¯è¢« final å…³é”®å­—ä¿®é¥°çš„ã€‚ ä¿®é¥°æ–¹æ³•ï¼šæ–¹æ³•ä¸èƒ½è¢«é‡å†™ ä¿®é¥°å˜é‡ï¼šåªèƒ½è¢«èµ‹å€¼1æ¬¡ å¦‚ï¼Œå¯åˆ©ç”¨è¿™ç‚¹ï¼Œè®¾ç½®ä¸€ä¸ªå¸¸é‡ã€‚ 1public static final int pi = 3.14; ä¿®é¥°å¼•ç”¨ï¼šåªæœ‰1æ¬¡æŒ‡å‘å¼•ç”¨çš„æœºä¼š 4.6 æŠ½è±¡ç±» åŸºæœ¬æ¦‚å¿µ ç±»å¸¦æœ‰ abstract å…³é”®å­—ä¿®é¥°å°±æ˜¯æŠ½è±¡ç±»ï¼› å«æœ‰æŠ½è±¡æ–¹æ³•å¿…é¡»æ˜¯æŠ½è±¡ç±»ï¼› 123456public abstract class Hero&#123; // æŠ½è±¡æ–¹æ³•attackï¼š[1] abstractä¿®é¥° [2] æ— æ–¹æ³•ä½“ // Heroçš„å­ç±»ä¼šè¢«è¦æ±‚å®ç°attackæ–¹æ³• public abstract void attack();&#125; æŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œä¸“é—¨ç”¨æ¥ç»§æ‰¿çš„ã€‚ æŠ½è±¡ç±» å’Œ æ¥å£åŒºåˆ« é»˜è®¤æ–¹æ³•å®ç° æŠ½è±¡ç±»å¯ä»¥æœ‰éæŠ½è±¡æ–¹æ³•ï¼Œæœ‰æ–¹æ³•ä½“ ï¼› æ¥å£ä¸èƒ½æœ‰ã€‚ æŠ½è±¡ç±»ä¸­æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œä½ å¯ä»¥ç»™å®ƒæä¾›é»˜è®¤çš„å®ç°ã€‚å› æ­¤ä½ ä¸éœ€è¦æ”¹å˜ä½ ç°åœ¨çš„ä»£ç ã€‚ å¦‚æœä½ å¾€æ¥å£ä¸­æ·»åŠ æ–¹æ³•ï¼Œé‚£ä¹ˆä½ å¿…é¡»æ”¹å˜å®ç°è¯¥æ¥å£çš„ç±»ã€‚ å†ç²¾è¾Ÿç‚¹æ€»ç»“ï¼š æŠ½è±¡ç±»ï¼Œæ—¢ 1.éæŠ½è±¡ç±»å®ç°ä»£ç å¤ç”¨ 2.åˆåŒæ—¶æœ‰æŠ½è±¡æ–¹æ³•ä½¿å¾—è¢«ç»§æ‰¿ç±»å„è‡ªå®ç°ã€‚ æ¥å£ï¼Œæ˜¯å¯¹ç±»çš„è¡Œä¸ºè¿›è¡Œçº¦æŸï¼Œå¼ºåˆ¶è¦æ±‚ä¸åŒç±»å®ç°ç›¸åŒè¡Œä¸ºã€‚ æ„é€ å‡½æ•° æŠ½è±¡ç±»æœ‰ï¼›æ¥å£æ²¡æœ‰ã€‚ ä¿®é¥°ç¬¦ æŠ½è±¡ç±»é™¤private éƒ½æœ‰ï¼ˆæŠ½è±¡ç±»ç›®çš„æ˜¯è¢«ç»§æ‰¿ï¼ŒæŠ½è±¡æ–¹æ³•æ˜¯ä¸ºè¢«é‡å†™ï¼‰ï¼›æ¥å£only publicã€‚ ç»§æ‰¿ä¸ªæ•° [æ¥å£ä¼˜] æŠ½è±¡ç±»åªèƒ½è¢«ç»§æ‰¿ä¸€æ¬¡ï¼›æ¥å£å¯ä»¥æœ‰å¤šä¸ªã€‚ 4.7 å†…éƒ¨ç±» æš‚æ—¶ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™ç”¨å¾—åˆ°ï¼Œå…ˆä¸å±•å¼€ï¼šè®²è§£å†…éƒ¨ç±»é“¾æ¥ éé™æ€å†…éƒ¨ç±» é™æ€å†…éƒ¨ç±» åŒ¿åç±» æœ¬åœ°ç±» 4.8 é»˜è®¤æ–¹æ³• é»˜è®¤æ–¹æ³•æ˜¯æŒ‡ ï¼šæ¥å£çš„æŠ½è±¡æ–¹æ³•ï¼ŒåŠ ä¸Š default å…³é”®å­—ï¼Œå¯ä»¥æœ‰æ–¹æ³•ä½“ã€‚ 1234567public interface Mortal &#123; public void die(); default public void revive() &#123; System.out.println(&quot;æœ¬è‹±é›„å¤æ´»äº†&quot;); &#125;&#125; è¿™æ ·åšçš„å¥½å¤„ï¼š å‡è®¾æ²¡æœ‰é»˜è®¤æ–¹æ³•è¿™ç§æœºåˆ¶ï¼Œé‚£ä¹ˆå¦‚æœè¦ä¸ºMortalå¢åŠ ä¸€ä¸ªæ–°çš„æ–¹æ³•revive,é‚£ä¹ˆæ‰€æœ‰å®ç°äº†Mortalæ¥å£çš„ç±»ï¼Œéƒ½éœ€è¦åšæ”¹åŠ¨å®ç° reviveã€‚ ä½†æ˜¯å¼•å…¥äº†é»˜è®¤æ–¹æ³•åï¼ŒåŸæ¥çš„ç±»ï¼Œä¸éœ€è¦åšä»»ä½•æ”¹åŠ¨ï¼Œå¹¶ä¸”è¿˜èƒ½å¾—åˆ°è¿™ä¸ªé»˜è®¤æ–¹æ³• 4.9 UMLå›¾ ç±»å›¾è§£é‡Š æ¥å£å›¾è§£é‡Š ç»§æ‰¿å…³ç³»è§£é‡Š å®çº¿ï¼šè¡¨ç¤ºç»§æ‰¿ç±»ï¼Œå¦‚ä¸‹å›¾ Spider ç±»ç»§æ‰¿ Animal ç±»ï¼› è™šçº¿ï¼šè¡¨ç¤ºç»§æ‰¿æ¥å£ï¼Œå¦‚ä¸‹å›¾ Catç±» ç»§æ‰¿ Pet æ¥å£ã€‚ ç¬¬äº”ç« ï¼šæ•°å­— å’Œ å­—ç¬¦ä¸² 5.1 æ‹†ç®±ã€è£…ç®± å…³äºæ‹†ç®±ã€è£…ç®±åŸºæœ¬æ¦‚å¿µ æ‰€æœ‰çš„åŸºæœ¬ç±»å‹ï¼Œéƒ½æœ‰å¯¹åº”çš„ç±»ç±»å‹ ï¼Œåˆç§°ä¸ºå°è£…ç±»ï¼Œä¹Ÿæ˜¯æ•°å€¼ä¸åŒ…ç±»å‹è½¬æ¢ã€‚ ä¸‹é¢æ˜¯æ‰€æœ‰æ•°å€¼ åŸºæœ¬ç±»å‹ï¼Œå¯¹åº”çš„ç±»å‹å‹ï¼Œå®ƒä»¬åˆéƒ½æ˜¯æŠ½è±¡ç±» Number çš„å­ç±»ã€‚ å¦‚ï¼šåŸºæœ¬ç±»å‹ int --&gt; å¯¹åº”å°è£…ç±» Integer ï¼› short --&gt; å¯¹åº”å°è£…ç±» Short â€¦ è£…ç®± è£…ç®±ï¼Œå³å°† åŸºæœ¬ç±»å‹è‡ªåŠ¨ è½¬æ¢æˆå°è£…ç±»å‹ï¼Œè‡ªåŠ¨åˆæ˜¯é€šè¿‡**=** å·å®ç°ã€‚ å…ˆçœ‹ä¸€ä¸ªéè£…ç®±ï¼Œè‡ªå·±è°ƒç”¨æ„é€ æ–¹æ³•å®ç° åŸºæœ¬ç±»å‹â€“&gt; å°è£…ç±»å‹ï¼š 123// éè£…ç®±è½¬æ¢æˆå°è£…ç±» int i = 1; Integer it = new Integer(i); å¦‚æœ ç”¨ = å· å®ç°è‡ªåŠ¨ä¸Šè¿°è¿‡ç¨‹ï¼Œåˆ™ç§°ä¸ºè£…ç®±ï¼š 123// = è‡ªåŠ¨è£…ç®± int i = 1; Integer it = i; // = è‡ªåŠ¨å®ç°ç±»å‹è½¬æ¢ï¼Œæ— éœ€new æ‹†ç®± å’Œè£…ç®±ç±»ä¼¼ï¼Œå³å°† å°è£…ç±»å‹è‡ªåŠ¨ è½¬æ¢æˆ åŸºæœ¬ç±»å‹ï¼Œè‡ªåŠ¨åˆæ˜¯é€šè¿‡**=** å·å®ç°ã€‚ éæ‹†ç®±ï¼Œè‡ªå·±è°ƒç”¨æ„é€ å‡½æ•°å®ç°ï¼š 123// éæ‹†ç®±å®ç°è½¬æ¢æˆåŸºæœ¬ç±»å‹ Integer it = new Integer(0); int i = it.intValue(); æ‹†ç®±å®ç°ï¼š 123// = è‡ªåŠ¨æ‹†ç®± Integer it = new Integer(0); int i = it; // = è‡ªåŠ¨å®ç°ç±»å‹è½¬æ¢ æ‹†ç®±ã€è£…ç®±ä¹‹æƒ‘ å­˜åœ¨çš„æ„ä¹‰ï¼Ÿ ä¸ºä»€ä¹ˆè¦æœ‰è£…ç®±ã€æ‹†ç®±ï¼Œå®ƒä»¬çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ java æ˜¯ é¢å¯¹å¯¹è±¡ç¼–ç¨‹ï¼Œè€ŒåŸºæœ¬æ•°æ®ç±»å‹ä¸æ˜¯å¯¹è±¡ï¼Œæ‰€æœ‰æ‰æœ‰å°è£…ç±» å¼•ç”¨åŸºæœ¬æ•°æ®ç±»å‹ã€‚ æ¯”å¦‚ï¼Œä¸‹é¢æ‰“å°å‡ºintå‹æ•°æ®ï¼š 12int i = 0ï¼›System.out.println(i); å…¶å®ï¼ŒæŸ¥çœ‹æºç ï¼Œå®é™…ç»è¿‡ä»¥ä¸‹å‡ ä¸ªè¿‡ç¨‹ï¼š å°† i è‡ªåŠ¨è£…ç®±æˆå°è£…ç±» Integer ç„¶åè°ƒç”¨ Integerä¸­ toString() æ–¹æ³•ï¼Œæ‰“å°å‡ºå­—ç¬¦ä¸²è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚ 5.2 ç±»å‹è½¬æ¢ æ•°å€¼ç±»å‹ä¹‹é—´ ä½æ•°ä½â€”&gt;é«˜ ä½â€”&gt;é«˜ï¼šbyte,char(1) --&gt; short(2)â€“&gt; int(4) --&gt; long(8) --&gt; float(8) --&gt; double(16) å¼ºåˆ¶è½¬æ¢ å¦‚æœæ˜¯ä½ä½å‘é«˜ä½è½¬æ¢ï¼Œåˆ™è‡ªåŠ¨è½¬æ¢ï¼›åä¹‹ï¼Œåˆ™éœ€è¦ () å¼ºåˆ¶è½¬æ¢ã€‚ 123byte b = 1;short s = b; // å¯ï¼Œè‡ªåŠ¨è½¬æ¢ã€‚b = (byte)s; // å¼ºåˆ¶ è¡¨è¾¾å¼ç±»å‹æå‡ å¦‚æœï¼Œæ•°å€¼ç±»å‹å‚ä¸è¿ç®—ï¼Œæ“ä½œç¬¦ä¸¤ç«¯ç±»å‹è¦ä¸€è‡´ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªåŸåˆ™ï¼š byteã€shortå’Œchar è‡ªåŠ¨æå‡intå‹ï¼› æ“ä½œæ•°å«longå‹ï¼Œåˆ™æ•´ä¸ªè¡¨è¾¾å¼ç±»å‹æå‡ä¸ºlongå‹ï¼› æ“ä½œæ•°å« float / double å‹ï¼Œåˆ™æ•´ä¸ªè¡¨è¾¾å¼æå‡ä¸º float /doubleå‹è¡¨ç¤ºï¼› longã€floatã€doubleï¼ŒåŒæ—¶å‡ºç°ï¼Œæå‡ä¼˜å…ˆï¼šdouble &gt; float &gt; long ã€‚ æ•°å€¼ç±»å‹ &amp; char åŸºæœ¬è§„åˆ™å’Œæ•°å€¼ç±»å‹ç›´æ¥æŒ‰ä½æ•°ï¼Œæ˜¯å¦å¼ºåˆ¶è½¬æ¢å¾ˆç›¸ä¼¼ï¼Œä½†æœ‰ä¸€ç‚¹ä¸åŒï¼š char &amp; byte &amp; short ä¹‹é—´, é™¤äº† byte è½¬æ¢æˆ short éƒ½æ˜¯å¼ºåˆ¶è½¬æ¢ï¼› 12345byte b = 0; char c = 1; short s = 2;s = (short) c; // è™½ç„¶shortä½æ•°4ï¼Œä½†æ˜¯è¿˜æ˜¯è¦å¼ºåˆ¶è½¬æ¢c = (char) b;b = (byte) c; æ•°å€¼ç±»å‹ &amp; String æ•°å€¼ç±»å‹ &lt;â€” String String è½¬ä¸º æ•°å€¼ç±»å‹ï¼Œä¸€èˆ¬æœ‰å¦‚ä¸‹ä¸‰ç§æ–¹æ³•ï¼š 123456789101112 String str = &quot;12345&quot;;// æ–¹æ³•1ï¼šæ•°å€¼ç±»å‹å¯¹åº”å°è£…ç±».parseæ–¹æ³• int a1 = Integer.parseInt(str);// æ–¹æ³•2ï¼šæ‰‹åŠ¨è£…ç®± --&gt; æ‰‹åŠ¨æ‹†ç®±// ç­‰ä»·è‡ªåŠ¨æ‹†ç®±ï¼šint a2 = Integer.valueOf(str); Integer it2 = Integer.valueOf(str); int a2 = it2.intValue(); // å¯ä»¥æ›´ç®€å•=è‡ªåŠ¨æ‹†ç®±ï¼šint a2 = it2;// æ–¹æ³•3ï¼šæ‰‹åŠ¨è£…ç®± --&gt; = è‡ªåŠ¨æ‹†ç®± int a3 = new Integer(str); String &lt;â€” æ•°å€¼ç±»å‹ 1234567 int i = 12345;// æ–¹æ³•1ï¼šæ•°å€¼ç±»å‹å¯¹åº”å°è£…ç±».toStringæ–¹æ³• String str1 = Integer.toString(i);// æ–¹æ³•2ï¼šå…ˆè£…ç®±å†æ‹†ç®±ï¼šæ‰‹åŠ¨è£…ç®±--&gt; = è‡ªåŠ¨æ‹†ç®± String str2 = String.valueOf(i); int[] &amp; String int[] è½¬æ¢ string 12345import java.util.*ï¼›// 1.è°ƒç”¨Arraysç±»æ–¹æ³•int[] arr = new&#123;1,2,3&#125;;string s = Arrays.toString(arr) String &amp; char &amp; char[] Stringè½¬æ¢ä¸ºchar 1234// String å’Œ char ä¹‹é—´è½¬æ¢String str = &quot;123&quot;; char c = str.charAt(0); // è½¬æ¢æˆå­—ç¬¦char[] c1 = str.toCharArray(); // è½¬æ¢æˆå­—ç¬¦æ•°ç»„ char è½¬æ¢æˆ String 1234567char c1 = &#x27;1&#x27;; String str1 ;// æ–¹æ³•1ï¼šåˆ©ç”¨æ¯ç§åŸºæœ¬ç±»å‹å¯¹åº”å°è£…ç±»éƒ½æœ‰çš„.toStringæ–¹æ³•str1 = Character.toString(c1);// æ–¹æ³•2ï¼švalueOfè£…ç®± --&gt; =è‡ªåŠ¨æ‹†ç®±str1 = String.valueOf(c1); char[] è½¬æ¢ä¸ºstring 1234567// 1.ç›´æ¥åœ¨æ„é€ Stringæ—¶å»ºç«‹ã€‚ char data[] = &#123;&#x27;s&#x27;, &#x27;g&#x27;, &#x27;k&#x27;&#125;; String str = new String(data);// 2.Stringæœ‰æ–¹æ³•å¯ä»¥ç›´æ¥è½¬æ¢ã€‚ char[] cha = &#123;&#x27;s&#x27;,&#x27;g&#x27;,&#x27;h&#x27;&#125;; String n = String.valueOf(cha); String &amp; byte[] Stringè½¬æ¢ä¸ºbyte[] å’Œè½¬æ¢æˆ char ç±»ä¼¼ï¼Œå¯ä»¥è°ƒç”¨å¯¹è±¡æœ¬èº«çš„æ–¹æ³•ã€‚ 12String str = &quot;123&quot;; byte[] bytes = str.getBytes(); byte[] è½¬æ¢æˆ String ä¹ŸåŒ char è½¬ String ç±»ä¼¼ï¼Œåˆ©ç”¨è£…ç®±æ‹†ç®±ã€‚ 12byte[] bs = new byte[]&#123;1,2,3&#125;;String s = new String(bytes); å¼•ç”¨ç±»å‹ä¹‹é—´ 123456public class Person &#123;&#125;public class Student extends Person &#123;&#125;// ä¸»å‡½æ•°ä¸­Person p = new Person();Student s = new Student(); å‘ä¸Šè½¬æ¢ï¼Œçˆ¶ç±»å¼•ç”¨ &lt;â€” å­ç±»å¼•ç”¨ï¼Œå¯è½¬ã€‚ 1p = sï¼› // å­è½¬çˆ¶ å…¶å®ï¼Œæœ¬è´¨ pæŒ‡å‘äº† Studentå¯¹è±¡ï¼Œè™½ç„¶åªèƒ½ä½¿ç”¨Personæ–¹æ³•ï¼Œç­‰ä»·è¿™ç§å†™æ³•ï¼š 1p = new Student(); // Studentå¯¹è±¡æ— åå¼•ç”¨ï¼Œè½¬æ¢æˆçˆ¶ç±» Person å‘ä¸‹è½¬æ¢ï¼Œå­ç±»å¼•ç”¨ &lt;â€” çˆ¶ç±»å¼•ç”¨ï¼ŒæŠ›å‡ºå¼‚å¸¸ã€‚ 1s = (Student)p; // æŠ›å‡ºå¼‚å¸¸ å¦‚æœæ— ç»§æ‰¿å…³ç³»å¼•ç”¨è½¬æ¢ï¼Œç¼–è¯‘é”™è¯¯ï¼ 5.3 æ•°å­¦æ–¹æ³• 123456789101112// 1.å››èˆäº”å…¥Math.round(5.5); // 6// 2.éšæœºæ•°Math.random(); // [0-1) ä¹‹é—´éšæœºæ•°Math.random()*10; // [0-10) ä¹‹é—´éšæœºæ•°// 3.å¼€æ–¹Math.sqrt(9)// 4.æ¬¡æ–¹Math.pow(2,4)// 5.å¸¸æ•°Math.PI // Ï€Math.E // è‡ªç„¶å¸¸æ•° 5.4 Sting å¸¸ç”¨æ–¹æ³• å•å­—ç¬¦ä¸²æ“ä½œ 1String str = &quot;hello java!&quot;; å¸¸ç”¨æ–¹æ³•è§ä¸‹ï¼š 12345678910111213141516171819// 1.è¿”å›å­—ç¬¦str.charAT(0); // è¿”å›strç¬¬ä¸€ä¸ªå­—ç¬¦// 2.è¿”å›å­—ç¬¦æ•°ç»„str.toCharArray(); // 3.æˆªå–å­—ç¬¦ä¸²str.substring(3); // ä»ç¬¬3ä¸ªå­—ç¬¦å¼€å§‹æˆªå–str.substring(3,5); // [3,5):æˆªå–ç¬¬3--&gt;ç¬¬5å­—ç¬¦ï¼Œä¸å«ç¬¬5// 4.åˆ†éš”å­—ç¬¦ä¸²str.split(&quot;,&quot;); // 5.å»é™¤é¦–å°¾ç©ºæ ¼str.trim(); // 6.å¤§å°å†™str.toLowerCase()str.toUpperCase()// 7.å®šä½str.indexOf(&#x27;l&#x27;); // è¿”å›lç¬¬ä¸€æ¬¡å‡ºç°ä½ç½®ï¼š2str.lastIndexOf(&#x27;l&#x27;); // è¿”å›læœ€åä¸€æ¬¡å‡ºç°ä½ç½®ï¼š3// 8.åŒ…å«str.contains(&quot;java&quot;); // è¿”å›ï¼šture å¤šå­—ç¬¦ä¸²æ“ä½œ æ¯”è¾ƒ 12String str1 = &quot;the light&quot;;String str2 = new String(str1); å¸¸ç”¨æ“ä½œæ–¹æ³•ï¼š 12345// 1.æ˜¯å¦åŒä¸€å¯¹è±¡ System.out.println( str1 == str2); //è™½ç„¶ï¼Œå†…å®¹ç›¸åŒä½†ä¸æ˜¯åŒä¸€å¯¹è±¡// 2.æ˜¯å¦å†…å®¹ç›¸åŒ System.out.println(str1.equals(str2)); //è¿”å› ï¼šture System.out.println(str1.equalsIgnoreCase(str3)); // å¿½ç•¥å¤§å°å†™ï¼Œæ¯”è¾ƒ ä»¥ç‰¹å®šå­—ç¬¦ç»“æŸ/å¼€å§‹ 12String str1 = &quot;the light&quot;;String str2 = &quot;ht&quot;; ä½¿ç”¨ä¸¾ä¾‹ï¼š 1234// 1.åˆ¤æ–­ä»¥ç‰¹å®šå­—ç¬¦å¼€å§‹System.out.println(str1.startsWith(str2)); // è¿”å›false// 2.åˆ¤æ–­ä»¥ç‰¹å®šå­—ç¬¦ç»“æŸSystem.out.println(str1.endsWith(str2)); // è¿”å›ture 5.5 StringBufferç±» æ¯”StringåŸºæœ¬ç±»å‹ï¼Œèƒ½æ›´å¥½æ“ä½œå­—ç¬¦ä¸²ï¼šè¿½åŠ ã€åˆ é™¤ã€æ’å…¥ã€åè½¬ç­‰ï¼Œè€Œä¸”æ€§èƒ½ä½³ï¼ ä¸ºä»€ä¹ˆStringBufferå¯ä»¥å˜é•¿ï¼Ÿ å’ŒString å’Œ StringBuffer å†…éƒ¨éƒ½ç»´æŠ¤äº†ä¸€ä¸ªå­—ç¬¦æ•°ç»„ï¼Œä½†æ˜¯StringBuffer è¿˜æœ‰å†—ä½™é•¿åº¦ã€‚ å£°æ˜ 1StringBuffer sb = new StringBuffer(&quot;hello java!&quot;); å¸¸ç”¨æ“ä½œ 123456789101112// 1.è¿½åŠ sb.append(&quot;å•Šï¼Œæˆ‘æ­»äº†ï¼&quot;);System.out.println(sb); // hello java!å•Šï¼Œæˆ‘æ­»äº†ï¼// 2.åˆ é™¤sb.delete(5,10);System.out.println(sb); // hello!å•Šï¼Œæˆ‘æ­»äº†ï¼// 3.æ’å…¥sb.insert(5, &quot;!&quot;);System.out.println(sb); // hello!!å•Šï¼Œæˆ‘æ­»äº†ï¼// 4.åè½¬sb.reverse(); //åè½¬System.out.println(sb); // ï¼äº†æ­»æˆ‘ï¼Œå•Š!!olleh å¸¸ç”¨å±æ€§ 12sb.length(); //å†…å®¹é•¿åº¦ï¼š13sb.capacity(); //æ€»å®¹é‡ï¼š27ï¼ˆæœ‰å†—ä½™ï¼‰ ç¬¬å…­ç« ï¼šæ—¥æœŸ 6.1 Dateç±» ä»€ä¹ˆæ˜¯æ—¶é—´åŸç‚¹ï¼Ÿ æ—¶é—´åŸç‚¹æ˜¯ï¼š1970/1/1 8:0:0 ã€‚æ‰€æœ‰çš„æ—¥æœŸï¼Œä»¥æ­¤ä¸ºåŸºå‡†ï¼Œæ¯è¿‡ä¸€æ¯«ç§’ï¼Œå°±+1ã€‚ å¦‚ä½•å¼•è¿›æ—¥æœŸç±»åº“ï¼Ÿ 1import java.util.Date; åˆ›å»º 1234567// 1.ä¸å¸¦å‚æ•°ï¼Œå½“å‰æ—¶é—´Date d = new Date();System.out.println(d); // è¾“å‡ºï¼šSat Jun 29 22:11:23 CST 2019// 2.å¸¦å‚æ•°(æ•´æ•°)ï¼Œæ—¶é—´ï¼šåŸç‚¹+æ•´æ•°/1000(ç§’)Date d1 = new Date(1000);System.out.println(d1); // è¾“å‡ºï¼šThu Jan 01 08:00:01 CST 1970 å¸¸ç”¨æ–¹æ³• 12// 1.getTime:è·å– å½“å‰æ—¶é—´ - åŸç‚¹ æ¯«ç§’æ•°System.out.println(d.getTime()); 6.2 SimpelDateFormat ç±» SimpelDateFormat ç±» ç”¨æ¥æ ¼å¼åŒ–æ—¥æœŸè¾“å‡ºã€‚ å¦‚ä½•å¼•ç”¨ï¼Ÿ 1import java.text.SimpleDateFormat; æ ¼å¼Dateå¯¹è±¡ âš ï¸æ³¨æ„ï¼Œä¸‹é¢æ ¼å¼æ¨¡å¼ MM ã€HH å¿…é¡»å¤§å†™ï¼Œå¦åˆ™å‡ºé”™ï¼ 1234567Date d = new Date();// 1.åˆ›å»ºSimpleDateFormatå¯¹è±¡ï¼Œå¹¶æŒ‡å®šæ ¼å¼æ¨¡å¼SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy/MM/dd HH:mm:ss&quot;);// 2.åˆ©ç”¨formatæ–¹æ³•ï¼Œæ ¼å¼Dateå¯¹è±¡ï¼Œå¹¶è¿”å›Stringç±»å‹String str = sdf.format(d); // è¿”å›Stringç±»å‹// 3.è¾“å‡ºæµ‹è¯•System.out.println(str); // è¾“å‡ºï¼š2019/06/29 22:53:00 æ ¼å¼Stringå¯¹è±¡ âš ï¸æ³¨æ„ï¼Œparseæ–¹æ³•ï¼Œå¿…é¡»åœ¨ä¸€å¯¹ try catch å—ä¸­ï¼Œå¦åˆ™ç¼–è¯‘é”™è¯¯ã€‚ 123456789101112131415String str = &quot;2019/01/01 00:00:00&quot;;Date d = new Date();// 1.åˆ›å»ºSimpleDateFormatå¯¹è±¡ï¼Œå¹¶æŒ‡å®šæ ¼å¼æ¨¡å¼SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy/MM/dd HH:mm:ss&quot;);// 2.parseæ–¹æ³•ï¼Œæ ¼å¼Stringå¯¹è±¡ï¼Œå¹¶è¿”å›Dateç±»å‹try &#123; d = sdf.parse(str);&#125;catch (ParseException e)&#123; e.printStackTrace();&#125;// 3.è¾“å‡ºæµ‹è¯•System.out.println(d); // è¾“å‡ºæµ‹è¯•ï¼šTue Jan 01 00:00:00 CST 2019 6.3 Calendarç±» Calendar ç±» å’Œ Dateç±»ç›¸æ¯”ï¼Œæ›´å®¹æ˜“è¿›è¡Œâ€œç¿»æ—¥å†â€œï¼Œè¿›è¡Œæœˆä»½/å¤©ç­‰ä¿®æ”¹ã€‚ å¦‚ä½•å¼•ç”¨ï¼Ÿ 1import java.util.Calendar; åˆ›å»ºå¯¹è±¡ âš ï¸ åªèƒ½åˆ©ç”¨Calendar.getInstance() è·å–å•ä¾‹ï¼Œnewéœ€è¦é‡å†™å‡½æ•°ã€‚ 1Calendar c = Calendar.getInstance(); å¸¸ç”¨æ–¹æ³• 123456789101112131415161718192021// 1.getTime(),è¿”å›Dateç±»å‹å¯¹è±¡Calendar c = Calendar.getInstance();Date d = c.getTime()ï¼›System.out.println(c.getTime()); // è¾“å‡ºï¼šSat Jun 29 23:08:53 CST 2019// 2.setTime(Date d),è®¾ç½®æ—¶é—´ï¼Œæ— è¿”å›Date d1 = new Date(0);c.setTime(d1);System.out.println(c.getTime()); // è¾“å‡ºï¼šThu Jan 01 08:00:00 CST 1970// 3.addï¼Œåœ¨åŸæ—¥æœŸ(2019/6/29)ä¸Šå¢åŠ  å¹´/æœˆ/æ—¥c.add(c.YEAR, 3); // 3å¹´åc.add(c.MONTH, -1); // å‰1ä¸ªæœˆc.add(c.DATE, 1); // å1å¤©System.out.println(c.getTime()); // è¾“å‡ºï¼šSun May 30 23:29:06 CST 2022// 4.setï¼Œå¯åˆ†åˆ«è®¾ç½®å¹´æœˆæ—¥ï¼ŒåŒºåˆ†setTimec.add(c.YEAR, 2019); c.add(c.MONTH, 9); c.add(c.DATE, 1); System.out.println(c.getTime()); // è¾“å‡ºï¼šTue Oct 01 23:34:55 CST 2019 ç¬¬ä¸ƒç« ï¼šå¼‚å¸¸ 7.1 å¼‚å¸¸åˆ†ç±» å¼‚å¸¸åˆ†ä¸ºï¼ŒError &amp; Exceptionï¼Œå®ƒä»¬éƒ½æ˜¯ Throwable å­ç±»ï¼› Exceptionï¼Œåˆåˆ†ä¸ºè¿è¡Œæ—¶å¼‚å¸¸ã€å¯æŸ¥å¼‚å¸¸ã€‚ 7.2 å¼‚å¸¸å¤„ç† try cacth å°è¯•æ‰“å¼€ LOLï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼š 1234567891011121314151617import java.io.File;import java.io.FileInputStream;import java.io.FileNotFoundException;// ä¸»å‡½æ•°ä¸­ï¼šFile f= new File(&quot;d:/LOL.exe&quot;);try&#123; System.out.println(&quot;è¯•å›¾æ‰“å¼€ d:/LOL.exe&quot;); new FileInputStream(f); // (1) æ‰§è¡Œåˆ°è¿™å‡ºç°å¼‚å¸¸ ---&gt; æ‰§è¡Œcatchå— System.out.println(&quot;æˆåŠŸæ‰“å¼€&quot;); &#125; catch(FileNotFoundException e) // (2) å‡ºç°å¼‚å¸¸å¼€å§‹å¤„ç† &#123; System.out.println(&quot;d:/LOL.exeä¸å­˜åœ¨&quot;); System.out.println(e.toString()); &#125; æ”¹è¿›ï¼šå¦‚æœä¸çŸ¥é“æŠ›å‡ºå¼‚å¸¸ç±»å‹ï¼Ÿ å¯ä»¥ç”¨çˆ¶ç±» Exceptionï¼Œç”šè‡³Throwable è¿›è¡Œcatch å¤„ç†ã€‚ 123456// åˆ©ç”¨çˆ¶ç±»è¿›è¡Œcatch(åªä¿®æ”¹catchå—)catch(Exception e)&#123; System.out.println(&quot;d:/LOL.exeä¸å­˜åœ¨&quot;); System.out.println(e.toString());&#125; æ”¹è¿›ï¼šå¦‚æœæœ‰å¤šä¸ªé”™è¯¯ï¼Ÿ å¯ç”¨å¤šä¸ª catch å—è¿›è¡Œå¤„ç†ã€‚ 123try&#123; // ç¨‹åºä»£ç  &#125;catch(å¼‚å¸¸ç±»å‹1 å¼‚å¸¸çš„å˜é‡å1) &#123; // å¤„ç†ç¨‹åº &#125;catch(å¼‚å¸¸ç±»å‹2 å¼‚å¸¸çš„å˜é‡å2) &#123; // å¤„ç†ç¨‹åº &#125; try cacth finally æœ‰æ—¶å€™å¸Œæœ›ï¼Œæ— è®ºæ˜¯å¦å‡ºç°å¼‚å¸¸ï¼Œéƒ½å¸Œæœ›æœ‰æ®µä»£ç è¢«æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯finallyå—ã€‚ ä½†æ˜¯æœ‰ä¸‹é¢å‡ ä¸ªç»“åˆreturn æƒ…å†µï¼Œå€¼å¾—æ·±æ€ï¼šjavaå¼‚å¸¸æ•è· throw try cacth ç†è§£ä¸æ·±ï¼Œå¾…å®é™…æ“ä½œè¡¥å……ã€‚åŒæ—¶å¯è§ä¸‹ï¼š[è‡ªå®šä¹‰å¼‚å¸¸] 7.3 è‡ªå®šä¹‰å¼‚å¸¸ å¯¹ throws ä½œç”¨ç†è§£ä¸æ·±ï¼Œå¾…è¡¥å……ã€‚ è‡ªå®šä¹‰å¼‚å¸¸ç±» 1234567class myException extends Exception // ç»§æ‰¿Exceptionç±»&#123; public myException() &#123; System.out.println(&quot;flag = 0ï¼Œå‘ç”Ÿå¼‚å¸¸ï¼&quot;); &#125;&#125; æ•è·å¼‚å¸¸ åœ¨ tryä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œç„¶åcatchæ¥ä½å¼‚å¸¸è¿›è¡Œå‡ºç°(ä¸å¤„ç†ä¼šç¼–è¯‘é”™è¯¯)ã€‚ 123456789101112// ä¸»å‡½æ•°ä¸­int flag = 0; try &#123; if (flag == 0) throw new myException(&quot;flag == 0 &quot;); &#125; catch (myException e) &#123; // å¤„ç†å¼‚å¸¸ä»£ç  System.out.println(&quot;catchä¸­æ•è·åˆ°å¼‚å¸¸ï¼&quot; ); &#125; ç¬¬å…«ç«  ï¼š IOæµ 8.1 æ–‡ä»¶å¯¹è±¡ åˆ›å»ºå¯¹è±¡ 1234import java.io.File;// ä»¥å½“å‰é¡¹ç›®è·¯å¾„(ç›¸å¯¹è·¯å¾„)åˆ›å»ºå¯¹è±¡ File f = new File(&quot;test.txt&quot;); å¯¹è±¡å¸¸ç”¨æ–¹æ³• 1234567891011121314151617181920212223242526272829303132// 1.é‡å‘½åæ–‡ä»¶ -- ä¸ä¼šæ”¹å˜fçš„nameå±æ€§File f1 = new File(&quot;hwh.txt&quot;);f.renameTo(f1); // f.getName() è¿˜æ˜¯test.txt// 2.åˆ›å»ºæ–‡ä»¶ -- å­˜åœ¨ä¸ä¼šé‡æ–°åˆ›å»ºFile f2 = new File(&quot;lt.txt&quot;);try&#123; f2.createNewFile(); // åˆ›å»ºäº†lt.txtæ–‡ä»¶ &#125;catch (IOException e) // å¿…é¡»å¤„ç†å¼‚å¸¸&#123; System.out.println(e.toString());&#125;// 3.åˆ›å»ºæ–‡ä»¶å¤¹:ä¸ä¼šè¦†ç›–File f3 = new File(&quot;son&quot;);f3.mkdir(); // åˆ›å»ºäº† son æ–‡ä»¶å¤¹ // 4.è¿”å›ç›®å½•ä¸‹æ–‡ä»¶ &amp; æ–‡ä»¶å¤¹// ä»¥Stringæ•°ç»„è¿”å›String[] str = f3.list();System.out.println(str[0]); // è¾“å‡ºç›®å½•ä¸‹ç¬¬ä¸€ä¸ªæ–‡ä»¶åå­—// ä»¥Fileæ•°ç»„è¿”å›File[] fs = f.listFiles();// 5.å…¶å®ƒæ–¹æ³•f.exists(); // åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨f.isDirectory(); // åˆ¤æ–­æ˜¯æ–‡ä»¶å¤¹f.isFile(); // åˆ¤æ–­æ˜¯æ–‡ä»¶f.length(); // æ–‡ä»¶é•¿åº¦f.delete(); // åˆ é™¤æ–‡ä»¶ 8.2 æ–‡ä»¶æµ å½“éœ€è¦å¯¹æ–‡ä»¶è¿›è¡Œ è¯»å–/å†™å…¥ æ—¶ï¼Œè¦å»ºç«‹æ–‡ä»¶ è¾“å‡º/è¾“å…¥ æµã€‚ âš ï¸ å­—ç¬¦æµå¯ä»¥ä¸€ä¸ªå­—ç¬¦ä¸€ä¸ªå­—ç¬¦ä¹Ÿå¯ä»¥ä¸€è¡Œä¸€è¡Œè¯»å– ï¼›å­—èŠ‚æµä¸å¯ä»¥ã€‚ å­—èŠ‚æµ å­—ç¬¦æµ æŒ‰è¡Œè¯»å– Ã— ä¸€æ¬¡è¯»å– âˆš è¯»å–ä¸­æ–‡ âˆš æ›´æ–¹ä¾¿ âˆš å­—èŠ‚æµè¯»å†™ ä»¥ å­—èŠ‚ï¼ˆASCIIï¼‰ å½¢å¼è¯»å–å’Œå†™å…¥æ•°æ®ï¼šInputStreamå­—èŠ‚è¾“å…¥æµ ï¼›OutputStreamå­—èŠ‚è¾“å‡ºæµ ã€‚ éƒ½æ˜¯ æŠ½è±¡ ç±»ï¼Œä¸æä¾›å…·ä½“å®ç°ï¼Œå¯ç”¨å­ç±» FileInputStream &amp; FileOutStream å¯¹æ–‡ä»¶è¿›è¡Œè¯»å†™ã€‚ [è¯»]æ–‡ä»¶è¾“å…¥æµï¼šä¸ç”¨ try catch æ•è·å¼‚å¸¸ä¼šæŠ¥é”™ 1234567891011121314151617181920212223242526import java.io.File;import java.io.FileInputStream;try&#123; // 1.åˆ›å»ºæ–‡ä»¶å¯¹è±¡ File f = new File(&quot;lt.txt&quot;); // lt.txt å†…å®¹ï¼šlt // 2.åˆ›å»ºè¾“å…¥æµå¯¹è±¡ FileInputStream fis = new FileInputStream(f); // 3.æ–‡ä»¶è¯»å‡ºæ•°æ® byte[] all =new byte[(int) f.length()]; fis.read(all); // æ‰“å°è¯»å–åˆ°byteæ•°ç»„æ–‡ä»¶å†…å®¹ // ç›´æ¥æ‰“å°æ‰“å°å‡ºçš„ ASCIIç ï¼Œå¼ºåˆ¶è½¬æ¢æˆcharå­—ç¬¦ for (byte b : all) System.out.print((char)b); // è¾“å‡ºï¼š lt // 4.æµå…³é—­ fis.close(); &#125; catch (Exception e) &#123; System.out.println(e); &#125; [å†™]æ–‡ä»¶è¾“å‡ºæµï¼šæœ€åæŸ¥çœ‹ hwh.txt å†…å®¹è¢«å†™å…¥ hwh 12345678910111213141516171819202122import java.io.File;import java.io.FileOutputStream;try&#123; // 1.åˆ›å»ºæ–‡ä»¶å¯¹è±¡ File f = new File(&quot;hwh.txt&quot;); // hwh.txt å†…å®¹ä¸ºç©º // 2.åˆ›å»ºè¾“å…¥æµå¯¹è±¡ FileOutputStream fos = new FileOutputStream(f); // 3.æ•°æ®å†™å…¥æ–‡ä»¶ byte[] all = new byte[]&#123;104,119,104&#125;; // ASCII 104â€”â€”&gt;h ; ASCII 119â€”â€”&gt;w fos.write(all); // 4.æµå…³é—­ fos.close(); &#125; catch (Exception e) &#123; System.out.println(e); &#125; å­—ç¬¦æµè¯»å†™ ä»¥ å­—ç¬¦ å¯¹æ–‡ä»¶è¿›è¡Œè¯»å†™ï¼ŒReader å­—ç¬¦è¾“å…¥æµï¼›Writer å­—ç¬¦è¾“å‡ºæµ ï¼ŒåŒå‰éƒ½ä¸º æŠ½è±¡ç±» ã€‚ ç”¨å­ç±»ï¼ŒFileReader &amp; FileWriterã€å¯¹æ–‡ä»¶è¿›è¡Œå­—ç¬¦è¯»å†™ã€‚ [è¯»] FileReader : æ³¨æ„æ˜¯ç”¨å­—ç¬¦æ•°ç»„ char[] è¿›è¡Œè¯»å†™ï¼Œè€Œä¸æ˜¯ String 12345678910111213141516171819202122232425import java.io.FileReader;try&#123; // 1.åˆ›å»ºæ–‡ä»¶å¯¹è±¡ File f = new File(&quot;lt.txt&quot;); // 2.åˆ›å»ºå­—ç¬¦æµå¯¹è±¡ FileReader fr = new FileReader(f); // 3.è¯»å–æµå¯¹è±¡å†…å®¹ // String str = null; // é”™è¯¯ï¼Œåº”è¯¥æ˜¯char[]æ•°ç»„ char cArr[] = new char[(int)f.length()]; fr.read(cArr); // æ‰“å°è¯»å–åˆ°charæ•°ç»„æ–‡ä»¶å†…å®¹ for (char c : cArr) System.out.print(c); // è¾“å‡ºï¼š lt // 4.æµå…³é—­ fr.close();&#125;catch (Exception e)&#123; System.out.println(e);&#125; [å†™] FileWriter ï¼šåŒä¸Šæ³¨æ„char[]æ•°ç»„ã€‚æœ€å¥½ hwh.txt æ–‡ä»¶å†…å®¹ä¸ºï¼š hwh is a pig 12345678910111213141516171819202122import java.io.FileWriter;try&#123; // 1.åˆ›å»ºæ–‡ä»¶å¯¹è±¡ File f = new File(&quot;hwh.txt&quot;); // 2.åˆ›å»ºè¾“å…¥æµå¯¹è±¡ FileWriter fw = new FileWriter(f); // 3.è¯»å–æµå¯¹è±¡å†…å®¹ String str = &quot;hwh is a pig&quot;; char cArr[] = str.toCharArray() ; fw.write(cArr); // 4.æµå…³é—­ fw.close();&#125;catch (Exception e)&#123; System.out.println(e);&#125; ç¼“å­˜æµè¯»å†™ ç¼“å†²æµæ˜¯å­—ç¬¦æµçš„å­ç±» ï¼Œç”¨äºè§£å†³ï¼šå­—ç¬¦æµ &amp; å­—èŠ‚æµ æ¯è¯»å†™1å­—èŠ‚è¦IOæ“ä½œã€‚ [è¯»]BufferedReader 12345678910111213141516171819202122232425262728293031323334import java.io.BufferedReader;try&#123; // 1.åˆ›å»ºæ–‡ä»¶å¯¹è±¡ // hwh.txtå†…å®¹(ç©ºæ ¼è¡¨ç¤ºæ¢è¡Œ)ï¼šé»„ æ—ºè¾‰ ä¸å–œæ¬¢è¥¿ç“œ File f = new File(&quot;hwh.txt&quot;); // 2.åˆ›å»ºå­—ç¬¦æµå¯¹è±¡ FileReader fr = new FileReader(f); // 3.åˆ›å»ºç¼“å­˜æµï¼šå¿…é¡»å»ºç«‹åœ¨ä¸€ä¸ªå­˜åœ¨æµä¹‹ä¸Š BufferedReader br = new BufferedReader(fr); // 4.è¯»å–æµå¯¹è±¡å†…å®¹:ä¸€æ¬¡ä¸€è¡Œ // è¾“å‡ºï¼šé»„ æ—ºè¾‰ ä¸å–œæ¬¢è¥¿ç“œ while(true) &#123; //ä¸€æ¬¡è¯»å–ä¸€è¡Œï¼Œè¿”å›Stingç±»å‹ // æ¯”å‰é¢ï¼›è®¾ç½®å¥½char[] ã€byte[] ,ç„¶åf.read()æœ‰æ‰€ä¸åŒ // æ¯”åé¢ï¼šä¸ç”¨è€ƒè™‘ä¸­æ–‡ char[] ã€byte[] è½¬æ¢æˆStingç±»å‹ String line = br.readLine(); if(line == null) break; System.out.println(line); &#125; // 5.æµå…³é—­ br.close();&#125;catch (Exception e)&#123; System.out.println(e);&#125; [å†™] PrintWriter ï¼ŒåŸºæœ¬åŒä¸Šå·®ä¸å¤šæ­¥éª¤ï¼Œç®€ç•¥è¯´æ˜ä¸‹ 12345import java.io.PrintWriter;// ...åŸºæœ¬åŒä¸Š// å†™æ“ä½œï¼Œpwæ˜¯PrintWriterå¯¹è±¡ï¼Œè°ƒç”¨printlnæ–¹æ³•è¯»å†™å³å¯ã€‚pw.println(&quot;åˆ˜å©·æ˜¯å‚»å­&quot;); æ•°æ®æµ&amp;å¯¹è±¡æµ æ•°æ®æµ &amp; å¯¹è±¡æµ éƒ½æ˜¯å­—èŠ‚æµå­ç±»ï¼Œå»ºç«‹æ•°æ®æµ &amp; å­—ç¬¦æµå¿…é¡»è¦åœ¨ä¸€ä¸ªå­˜åœ¨çš„å­—èŠ‚æµä¹‹ä¸Šã€‚ æ•°æ®æµï¼šä¸»è¦å¯ä»¥è¿›è¡Œæ ¼å¼åŒ– é¡ºåº è¯»å†™ï¼Œæœ‰ FileInputStream ã€FileOutputStream 1234567891011121314151617181920212223242526272829303132333435import java.io.DataInputStream;import java.io.DataOutputStream;try&#123; // 1.åˆ›å»ºæ–‡ä»¶å¯¹è±¡ File f = new File(&quot;hwh.txt&quot;); // 2.åˆ›å»ºå­—èŠ‚æµå¯¹è±¡ FileOutputStream fos = new FileOutputStream(f); FileInputStream fis = new FileInputStream(f); // 3.åˆ›å»ºæ•°æ®æµï¼šå¿…é¡»å»ºç«‹åœ¨ä¸€ä¸ª[å­—èŠ‚æµ]ä¹‹ä¸Š DataOutputStream dos = new DataOutputStream(fos); DataInputStream dis = new DataInputStream(fis); // 4.æ•°æ®æµé¡ºåºå†™ dos.writeBoolean(true); dos.writeInt(1); dos.writeUTF(&quot;yes&quot;); // 5.æ•°æ®æµé¡ºåºè¯» boolean b = dis.readBoolean(); int i = dis.readInt(); String s = dis.readUTF(); // è¾“å‡ºï¼šé¡ºåºè¯»åˆ°ï¼šbool:true ; intï¼š1ï¼›Stringï¼šyes System.out.format(&quot;é¡ºåºè¯»åˆ°ï¼šbool:%b ; intï¼š%dï¼›Stringï¼š%s &quot;,b,i,s); // 6.æµå…³é—­ dos.close(); dis.close();&#125;catch (Exception e)&#123; System.out.println(e);&#125; å¯¹è±¡æµï¼šæŒ‡çš„æ˜¯å¯ä»¥ç›´æ¥æŠŠä¸€ä¸ªå¯¹è±¡ä»¥æµçš„å½¢å¼ä¼ è¾“ç»™å…¶ä»–çš„ä»‹è´¨ï¼Œæ¯”å¦‚ç¡¬ç›˜ ã€‚æš‚æ—¶ä¸è¯¦å†™ç”¨ åˆ°å†è¯´å§ï¼šå¯¹è±¡æµ 1234import java.io.ObjectInputStream;import java.io.ObjectOutputStream;// ä¸»å‡½æ•°ä¸­ 8.3 ä¸­æ–‡è¯»å†™é—®é¢˜ å¸¸ç”¨ç¼–ç æ ¼å¼ IS0-8859-1ã€ASCII ï¼šæ•°å­— &amp; è¥¿æ¬§å­—æ¯ ï¼ŒIS0-8859-1åŒ…å« ASCIIï¼Œ1å­—èŠ‚ã€‚ GBKã€GB2312ã€BIG5ï¼šä¸­æ–‡ç®€ç¹ï¼›ä¸­æ–‡ ï¼›ç¹ä½“ä¸­æ–‡ï¼Œ2å­—èŠ‚ ã€‚ Unicode ï¼šç»Ÿä¸€ç ï¼Œä¸‡å›½ç ï¼Œå­—æ¯ã€æ•°å­—ã€ä¸­æ–‡éƒ½ä¸º4 å­—èŠ‚ç¼–ç ã€‚ UTF-8ï¼šå¯¹ Uincode è¿›è¡Œçš„ä¸€ç§å‡è‚¥å­ç¼–ç  ï¼Œå­—æ¯ã€æ•°å­—ï¼š1å­—èŠ‚ ï¼›ä¸­æ–‡ï¼š3 å­—èŠ‚ã€‚ ç‰¹åˆ«çš„ ANSI ï¼šè¡¨ç¤ºæœ¬åœ°ç¼–ç ï¼Œä¸­æ–‡OSåˆ™é€‰ç”¨ GBKã€è‹±æ–‡ IS0ã€‚ ä¸­æ–‡ç¼–ç è¯»å†™ å†™ åœ¨è®°äº‹æœ¬ç­‰ä¸­ç›´æ¥å†™ä¸­æ–‡ï¼šé‡‡ç”¨æœ¬åœ°ç¼–ç  ANSIä¿å­˜ã€‚ åœ¨ javaä¸­å†™ä¸­æ–‡ï¼šæ‰§è¡Œåéƒ½ä¼šå˜ä¸º Unicodeï¼ˆUTF-8?ï¼‰ï¼Œç„¶åå­—ç¬¦æµã€å­—èŠ‚æµè¯»å†™ï¼Ÿ è¯» è¯»ï¼šå­—èŠ‚æµ &amp; å­—ç¬¦æµè¯»æ–‡æœ¬ä¸­ä¸­æ–‡ï¼Œå­—ç¬¦æµæ¯”è¾ƒéº»çƒ¦ç•¥ã€‚ å°†å­—èŠ‚æµæ•°ç»„è½¬æ¢æˆ Sting å’Œå¯¹åº”å­—ç¬¦ç¼–ç ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041try&#123; // 1.åˆ›å»ºæ–‡ä»¶å¯¹è±¡ File f = new File(&quot;hwh.txt&quot;); // hwh.txtå†…å®¹ï¼šé»„ // 2.åˆ›å»ºè¾“å…¥æµå¯¹è±¡ FileInputStream fis = new FileInputStream(f); // 3.è¯»å–æµå¯¹è±¡å†…å®¹ byte[] all = new byte[(int)f.length()]; fis.read(all); // [æµ‹è¯•] ç›´æ¥è¾“å‡º byteæ•°ç»„ for(byte b : all) &#123; /* byte 1å­—èŠ‚ï¼Œç›´æ¥æ‰“å°å¯¹åº”äºŒè¿›åˆ¶æ•´æ•°ï¼š-23 -69 -124(uft-8ç¼–ç ä¸­æ–‡3å­—èŠ‚) ä¸ºäº†æ‰“å°å‡º16è¿›åˆ¶ï¼Œå…ˆè½¬æ¢æˆint --&gt; å†è°ƒç”¨toHexStringæ–¹æ³• */ System.out.println(b); int i = b; /* ç±»å‹è½¬æ¢ï¼Œè¾“å‡ºï¼šffffffe9ã€ffffffbbã€ffffff84 å¯¹åº”-23 -69 -124 è¡¥ç ï¼še9ã€bbã€84(int4å­—èŠ‚ï¼Œbyte1å­—èŠ‚ï¼Œè¡¥ç å‰3å­—èŠ‚æ·»1ä¸çœ‹) */ System.out.println(Integer.toHexString(i)); &#125; // 4.ç±»å‹è½¬æ¢ï¼šæŠŠå­—èŠ‚æ•°ç»„è½¬æ¢æˆ Sting UTF-8ç¼–ç  // ç±»å‹è½¬æ¢ç¬¬ä¸€ç§ï¼šnew Stringè£…ç®±ï¼Œ= è‡ªåŠ¨æ‹†ç®± // ç¬¬äºŒç§è½¬æ¢ï¼šè°ƒç”¨å¯¹è±¡ç±»å‹éƒ½æœ‰çš„.toStringæ–¹æ³•ï¼šall.toString() String str = new String(all,&quot;UTF-8&quot;); System.out.println(str); // è¾“å‡ºï¼šé»„ // 5.æµå…³é—­ fis.close();&#125;catch (Exception e)&#123; System.out.println(e);&#125; ç¬¬ä¹ç« ï¼šé›†åˆæ¡†æ¶ å¸¸ç”¨é›†åˆæ¡†æ¶æœ‰ï¼š ArrayListã€LinkedListã€HashMapã€HashSet ç­‰ã€‚ Tipsï¼š System.out.println(é›†åˆç±»å‹å¯¹è±¡)ï¼šå¯ä»¥ç›´æ¥è£…ç®±æˆStringç±»å‹ï¼Œç„¶åæ‹†ç®±è¾“å‡ºï¼Œå¦‚[1,2,3]ã€‚ 9.1 ArrayList ArrayList æ˜¯å®ç°äº† List æ¥å£å­ç±»ã€‚ç›¸æ¯”å¸¸è§„æ•°ç»„ï¼Œå®¹é‡ä¼šè‡ªåŠ¨å¢é•¿ï¼Œæ˜¯ä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼ˆéé“¾è¡¨ï¼‰ã€‚ å£°æ˜ 123import java.util.ArrayList;ArrayList array = new ArrayList(); å¸¸ç”¨æ–¹æ³• 12345678910111213141516171819202122232425262728293031323334// 1. add -- æœªæ³›å‹æŒ‡å®šå¯æ·»åŠ ä¸åŒç±»å‹å¯¹è±¡Hero VN = new Hero();array.add(VN); // Heroç±»å‹å¯¹è±¡array.add(&quot;pentaKill&quot;); // Stingç±»å‹å¯¹è±¡// 2.containsï¼šåˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜åœ¨System.out.println(&quot;VNå¯¹è±¡æ˜¯å¦å­˜åœ¨ï¼š&quot; + array.contains(VN));// 3.get ï¼šè·å–æŒ‡å®šä½ç½®å¯¹è±¡ -- ä»0è®¡æ•°System.out.println(&quot;ç¬¬1ä¸ªä½ç½®å¯¹è±¡ï¼š&quot; + array.get(0));// 4.indexofï¼šåˆ¤æ–­å¯¹è±¡æ‰€å¤„ä½ç½®System.out.println(&quot;VNæ‰€å¤„ä½ç½®ï¼š&quot; + array.indexOf(VN));// 5.removeï¼šå¯æ ¹æ®ä½ç½®æˆ–è€…å¯¹è±¡ååˆ é™¤array.remove(VN);array.remove(1);// 6.set: åªèƒ½æ›¿æ¢æŒ‡å®šä½ç½®å¯¹è±¡,ä¸èƒ½è®¾ç½®æ–°å…ƒç´ System.out.println(&quot;æ›¿æ¢ç¬¬1ä¸ªä½ç½®å¯¹è±¡ï¼š&quot; + array.set(1, 5));// 7.sizeï¼šè·å–æ•°ç»„å·²å­˜å…ƒç´ ä¸ªæ•°ï¼ˆå¤§å°ï¼‰System.out.println(&quot;æ›¿æ¢ç¬¬1ä¸ªä½ç½®å¯¹è±¡ï¼š&quot; + array.size());// 8.addAll:æ·»åŠ å¦å¤–ä¸€ä¸ªå®¹å™¨æ‰€æœ‰å¯¹è±¡ArrayList array1 = new ArrayList();array.addAll(array1);// 9.toArray :ArrayListå¯¹è±¡è½¬æ¢ä¸ºæ•°ç»„// åŠ äº†toStingæ— å˜åŒ–ï¼Œå› ä¸ºè¿”å›Objiectæ•°ç»„System.out.println(&quot;è½¬æ¢ä¸ºæ•°ç»„ï¼š&quot; + array.toArray().toString()); // 10.clearï¼šæ¸…ç©º 9.2 LinkedList LinkedList &amp; ArrayList éƒ½å®ç°äº† Listæ¥å£ï¼Œéƒ½æœ‰ add ã€remove ã€contains ç­‰æ–¹æ³•ã€‚ ä½†åŒæ—¶ï¼ŒLinkedList è¿˜å®ç°äº† Queueï¼ˆé˜Ÿåˆ—ï¼‰ ã€Dequeï¼ˆåŒå‘é˜Ÿåˆ—ï¼‰æ¥å£ã€‚ å£°æ˜ 1234567// LinkList// æ™®é€šå£°æ˜LinkedList l = new LinkedList();// å¤šæ€ï¼šå£°æ˜åŒç«¯é˜Ÿåˆ—Deque d = new LinkedList();// å¤šæ€ï¼šå£°æ˜é˜Ÿåˆ—Queue q = new LinkedList(); å¸¸ç”¨æ–¹æ³• Deque æš‚æœªè¡¥å……ã€‚ 12345678910111213/* 1. LinkList åœ¨å¤´éƒ¨ã€å°¾éƒ¨è¿›è¡Œæ“ä½œ */// [æŸ¥çœ‹]é“¾è¡¨å¤´å°¾å…ƒç´ l.getFirst(); l.getLast();// [åˆ é™¤]é“¾è¡¨å¤´å°¾å…ƒç´ l.removeFirst(); l.removeLast();/* 2. Queue åœ¨å¤´éƒ¨ã€å°¾éƒ¨è¿›è¡Œæ“ä½œ */// [æ·»åŠ ]é˜Ÿåˆ—å°¾å…ƒç´  -- q.add?ç”¨Listæ¥å£æ–¹æ³•ä¸€æ ·å—ï¼Ÿq.offer(1); q.offer(2);// [æŸ¥çœ‹]é“¾è¡¨å¤´å°¾å…ƒç´ q.peek();// [å–å‡º]é“¾è¡¨å¤´å°¾å…ƒç´ ï¼Œå–å‡ºåä¼šè¢«åˆ é™¤q.poll(); 9.3 HashMap HashMap å¯ç†è§£ä¸ºä¸€ä¸ªå­—å…¸ï¼Œé”®å€¼ä¸èƒ½é‡å¤ï¼Œä¸åŒé”®å…ƒç´ å¯é‡å¤ï¼ˆç›¸åŒï¼‰ã€‚ å£°æ˜ 123import java.util.HashMap;HashMap dic = new HashMap(); // ä¹Ÿå¯æ³›å‹æŒ‡å®š Key ï¼šValue ç±»å‹ å¸¸ç”¨æ–¹æ³• æœªè¯¦ç»†åˆ—å‡ºï¼Œè¯¦ç»†éœ€æŸ¥çœ‹ï¼šHashMapå®˜æ–¹æ–‡æ¡£ã€‚ 12345// å¸¸ç”¨æ–¹æ³•// 1.put -- æ’å…¥æ•°æ®dic.put(1, &quot;å•Šæˆ‘æ˜¯1&quot;); dic.put(2, &quot;å•Šæˆ‘ç«Ÿç„¶æ˜¯2&quot;); dic.put(3, &quot;å•Šå“ˆå“ˆå“ˆæˆ‘æ˜¯3&quot;);// 2.get -- è·å–æ•°æ®System.out.println(dic.get(2)); // è¾“å‡ºï¼šå•Šæˆ‘ç«Ÿç„¶æ˜¯2 9.4 HashSet HashSet æ²¡æœ‰é”®å€¼ï¼Œåªä¿å­˜å…ƒç´ ã€‚ä¸”ä¸æä¾› get(index) æ–¹æ³•è¯»å–æŒ‡å®šä½ç½®å…ƒç´ ï¼Œéå†å¯åˆ©ç”¨è¿­ä»£å™¨ã€‚ ç±»ä¼¼çš„è¿˜æœ‰ï¼šLinkedHashSet &amp; TreeSet ï¼Œæš‚ç•¥ã€‚ å£°æ˜ 123import java.util.HashSet; HashSet hs = new HashSet(); å¸¸ç”¨æ–¹æ³• 123456789101112// å¸¸ç”¨æ–¹æ³•// 1.add -- æ’å…¥æ•°æ®hs.add(1); hs.add(true); hs.add(&quot;ä¸€&quot;);// 2.å¯ç›´æ¥æ‰“å°æ‰€æœ‰æ•°æ®ï¼Œä¸æ˜¯æŒ‰æ·»åŠ é¡ºåºSystem.out.println(hs); // è¾“å‡ºï¼š[ä¸€, 1, true]// 3.[è¿­ä»£éå†] ç”±äºæœªæä¾›getæ–¹æ³•ï¼Œä¸èƒ½æ™®é€šforå¾ªç¯ï¼Œä½†å¯ä»¥è¿­ä»£å™¨éå†for(Iterator it = hs.iterator();it.hasNext();)&#123; System.out.println(it.next()); // è¾“å‡ºï¼šä¸€ 1 true&#125; 9.5 Collectionsç±» Collections ç±»æ˜¯ä¸“é—¨ç”¨äºå¤„ç†é›†åˆç±»å‹çš„å·¥å…·ç±»ï¼ŒåŒ…å«ä¸€ç³»åˆ—è¯¸å¦‚ï¼šæ’åºã€åè½¬ã€æ··æ·†ã€äº¤æ¢ ç­‰æ–¹æ³•ã€‚ ç±»ä¼¼äºï¼šArrays æ˜¯æ•°ç»„çš„å·¥å…·ç±»ã€‚ä½†æ˜¯ï¼Œåªèƒ½å¤„ç†å®ç°äº† List æ¥å£ç±»ã€‚Collections ç±»å®˜æ–¹æ–‡æ¡£ åŸºæœ¬ä½¿ç”¨ 1234567891011121314import java.util.Collections;LinkedList&lt;Integer&gt; ll = new LinkedList&lt;Integer&gt;(); // [æ³¨]ï¼šä¸æ˜¯intç±»å‹ll.add(1) ; ll.add(2) ; ll.add(3) ; ll.add(4) ; ll.add(5) ;// å¸¸ç”¨æ–¹æ³•ï¼šæ›´å¤šæŸ¥çœ‹å®˜æ–¹æ–‡æ¡£// 1.æ··æ·†Collections.shuffle(ll); // 2.æ’åºCollections.sort(ll); System.out.println(ll); // è¾“å‡ºï¼š[1, 2, 3, 4, 5]// 3.åè½¬Collections.reverse(ll);// 4.äº¤æ¢Collections.swap(ll,0,4); æ¯”è¾ƒå™¨ï¼šComparable Comparable æ˜¯ä¸€ä¸ªæ¥å£ï¼Œé€šè¿‡è¦†å†™å®ç°å®ƒçš„ compare æ–¹æ³•ï¼Œæ¥æ¯”è¾ƒéæ•°å€¼ç±»å‹çš„ sort æ’åºç­‰ã€‚ å¦‚ä¸‹ï¼Œå®ç°äº†é€šè¿‡æ¯”è¾ƒ Heroç±» HPå±æ€§æ¥å®ç°æ’åºã€‚ åœ¨Heroç±»ä¸­ ä¹Ÿå¯åœ¨ Heroç±»ä¸­åœ¨è¦†å†™ compareToæ–¹æ³•ï¼Œè¿™æ ·è‡ªå¸¦æ¯”è¾ƒä¿¡æ¯ï¼Œè€Œä¸ç”¨åœ¨ä¸»å‡½æ•°è¦†å†™Comparator æ¥å£çš„ compareæ–¹æ³•ã€‚ âš ï¸ åœ¨ Heroç±»ä¸­è¦†å†™äº† toStingæ–¹æ³•ï¼Œè¿™æ ·æ‰“å°Heroå¯¹è±¡ä¸æ˜¾ç¤ºï¼šHero@åå…­è¿›åˆ¶åœ°å€å½¢å¼ã€‚ 1234567891011121314151617181920public class Hero&#123; // å±æ€§ String name; int HP; // æ–¹æ³•ï¼šæ„é€ å‡½æ•° Hero(String name ,int hp) &#123; this.name = name; this.HP = hp; &#125; // æ–¹æ³•ï¼šç±»ä¸­è¦†å†™å‡½æ•°toString @Override public String toString() &#123; return &quot;è‹±é›„åï¼š&quot; + name + &quot; è¡€é‡ï¼š&quot; + HP; &#125;&#125; åœ¨ä¸»å‡½æ•°ä¸­ Q : System.out.println(ll); å¦‚ä½•å®ç°æ‰“å°å‡ºé›†åˆï¼Ÿ A: é¦–å…ˆï¼Œæ‰“å° ll ä¼šå°†é›†åˆæ¯ä¸ªHeroå¯¹è±¡è£…ç®±æˆStingï¼Œç„¶åè°ƒç”¨ .toString()æ–¹æ³•è¿›è¡Œæ‹†ç®±ï¼› â€‹ ç”±äºHeroç±»ä¸­è¦†å†™äº† .toString()æ–¹æ³•ï¼Œæ­¤æ—¶è¿”å›çš„ä¸æ˜¯é»˜è®¤Hero@åå…­è¿›åˆ¶åœ°å€å½¢å¼ ã€‚ â€‹ æœ€åç»“åˆæ‰€æœ‰å¯¹è±¡.toString() ,è½¬æ¢æˆStringç±»å‹[â€¦,â€¦,â€¦,â€¦]æ‰“å°å‡ºæ¥ã€‚ 123456789101112131415161718192021222324252627282930import java.util.Comparator;// 1.å‡†å¤‡å¥½ä¸€ä¸ªé›†åˆç±»å‹ LinkListï¼Œæ’å…¥åä¸ªHeroç±»å‹å¯¹è±¡å¹¶è®¾ç½®ä¸åŒéšæœºhpLinkedList&lt;Hero&gt; heros = new LinkedList&lt;&gt;();for(int i = 0 ; i &lt; 10 ; i++)&#123; String name = &quot;hero&quot;+i; int hp = (int)(Math.random()* 1000); heros.add(new Hero(name,hp)); // å¸¦intå‚æ•°æ„é€ å‡½æ•°&#125;System.out.println(heros);// 2.[åŒ¿åç±»]è¦†å†™æ¯”è¾ƒå™¨compareæ–¹æ³•ï¼ˆæ¯”è¾ƒè§„åˆ™ï¼‰Comparator&lt;Hero&gt; comparable = new Comparator&lt;Hero&gt;() &#123;@Overridepublic int compare(Hero h1,Hero h2)&#123; if(h1.HP &gt; h2.HP) return 1; else return -1; // æ³¨æ„ï¼Œåˆ«å†™0 &#125;&#125;;// 3.å·¥å…·æ Collectionsè¿›è¡Œæ’åºCollections.sort(heros,comparable);// 4.ç›´æ¥æ‰“å°è¾“å‡ºæŸ¥çœ‹System.out.println(heros); 9.x è¿­ä»£å™¨åˆä½¿ç”¨ æ ¹æ®å­¦ä¹ C++ç»éªŒï¼Œè¿­ä»£å™¨è¦å’Œè¿™äº›é›†åˆç±»å‹å¦‚ ArrayList ç»“åˆæ‰èƒ½ç”¨ã€‚ å£°æ˜ä¸€ä¸ªé›†åˆ 123456import java.util.Iterator;import java.util.List;// åˆ©ç”¨ Listæ¥å£å¤šæ€å®ç° List array = new ArrayList();array.add(12345); array.add(&quot;ä¸Šå±±æ‰“è€è™&quot;); array.add(new Hero()); æ™®é€šforå¾ªç¯éå†é›†åˆ 12for (int i = 0; i &lt; array.size();i++) System.out.println(array.get(i)); è¿­ä»£forå¾ªç¯éå† 123456// hasNext - åˆ¤æ–­å½“å‰æ˜¯å¦æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œæœ‰è¿”å›true// next - è¿”å›å½“å‰å…ƒç´ ç±»å‹ã€‚for (Iterator it = array.iterator();it.hasNext();)&#123; System.out.println(it.next());&#125; ç¬¬åç« ï¼šæ³›å‹ 10.1 æ³›å‹åˆ†ç±»åŠä½œç”¨ æ³›å‹é›†åˆ é€šè¿‡ï¼Œæ³›å‹é›†åˆæŒ‡å®šé›†åˆæ¥å—ç±»å‹ï¼Œå¦‚åªèƒ½æ¥å— Heroå¯¹è±¡åŠå…¶å­ç±» å¦‚ä¸‹ï¼Œå£°æ˜äº†ä¸€ä¸ªéæ³›å‹å¯¹è±¡æ•°ç»„é›†åˆï¼Œå¯æ·»åŠ ä¸åŒå¯¹è±¡ï¼Œä½†ä¹Ÿè®¸æˆ‘ä»¬åªæƒ³æ·»åŠ Heroå¯¹è±¡ã€‚ 1234ArrayList heros = new ArrayList();heros.add(new Hero());heros.add(new Item());// æ­¤æ—¶æ³›å‹è¿˜å¯ä»¥æ·»åŠ æ— å…³çš„ Itemå¯¹è±¡ é€šè¿‡æ³›å‹æŒ‡å®šåªèƒ½æ·»åŠ  Heroå¯¹è±¡åŠå…¶å­ç±»ï¼š 12345ArrayList&lt;Hero&gt; heros = new ArrayList&lt;Hero&gt;();heros.add(new Hero()); heros.add(new ADHero()); // å­ç±»ä¹Ÿå¯ä»¥æ·»åŠ heros.add(new Item()); // ç¼–è¯‘é”™è¯¯ æ³›å‹æ–¹æ³• &amp; æ³›å‹ç±» &amp; æ³›å‹æ¥å£ è¿™äº›æ³›å‹ï¼Œå¯ä»¥æ¥å—ä¸åŒå‚æ•°å®ç°ä»£ç ç²¾ç®€ã€‚ 12345678910111213141516171819202122232425262728293031323334// æ³›å‹ç±»ï¼Œç±»ä¸­å®šä¹‰äº†éæ³›å‹æ–¹æ³•&amp;æ³›å‹æ–¹æ³•ã€‚public class Demo&lt;T&gt; &#123; // 1.[éæ³›å‹æ–¹æ³•] å› ä¸ºç”¨çš„æ˜¯ç±»å®šä¹‰æ³›å‹ public void test(T a) &#123; System.out.println(a); &#125; // 2.[æ³›å‹æ–¹æ³•] è¿™æ‰æ˜¯æ³›å‹æ–¹æ³•ï¼Œ&lt;T&gt;å£°æ˜åœ¨è¿”å›ç±»å‹å‰ public &lt;T&gt; void test1(T a) &#123; System.out.println(a); &#125; // 3.[é™æ€æ–¹æ³• &amp; ç¼–è¯‘é”™è¯¯]ä¸‹é¢ç¼–è¯‘é”™è¯¯ï¼Œé™æ€ç±»ä¸èƒ½ç”¨ç±»å®šä¹‰çš„æ³›å‹ public static void test2(T a) &#123; System.out.println(a); &#125; // 4.[é™æ€æ³›å‹æ–¹æ³•] ç”¨è‡ªå·±å®šä¹‰çš„æ³›å‹å°±ä¸ä¼šå‡ºé”™ public static &lt;T&gt; void test2(T a) &#123; System.out.println(a); &#125;&#125;// æ³›å‹æ¥å£ç±»ä¼¼æ³›å‹ç±»å£°æ˜interface InterDemo&lt;T&gt;&#123; // do something&#125; æ³›å‹è½¬å‹ æš‚æ—¶è®°ä½ç»“è®ºã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œå­ç±»æ˜¯å¯ä»¥è½¬æ¢æˆçˆ¶ç±»ï¼ˆå¤šæ€ï¼‰ï¼Œä½†æ˜¯å­ç±»æ³›å‹å’Œçˆ¶ç±»æ³›å‹ä¸èƒ½äº’è½¬ï¼ 10.2 æ³›å‹é€šé…ç¬¦ é€šé…ç¬¦ä½œç”¨ &lt; ? extends ç±»å‹å&gt; ï¼šåªèƒ½å– ç±»å‹åã€objectï¼Œä¸èƒ½æ’å…¥ï¼› &lt;?&gt; : åªèƒ½å–object ï¼Œä¸èƒ½æ’å…¥ï¼› &lt; ? super ç±»å‹å&gt; ï¼š åªèƒ½å–object ï¼Œèƒ½æ’å…¥æ»¡è¶³é€šé…ç¬¦åŒ¹é…æ‰€æœ‰ç±»å‹çš„å­ç±»ã€‚ &lt; ? extends ç±»å‹å&gt; 12345678910111213// 1. å› ä¸ºä¸èƒ½æ’å…¥ï¼Œæ‰€ä»¥å…ˆå®šä¹‰ä¸€ä¸ª&lt;APHero&gt;æ³›å‹é›†åˆæ’å…¥ä¸€äº›æ•°æ®ArrayList&lt;APHero&gt; apHeroList = new ArrayList&lt;APHero&gt;();apHeroList.add(new APHero());// 2.å®šä¹‰&lt;? extends&gt;æ³›å‹é›†åˆï¼šæŒ‡å‘ä¸Šé¢æ³›å‹é›†åˆ ArrayList&lt;? extends Hero&gt; heroList = apHeroList;// 3.æµ‹è¯•// [å–ï¼Œå¯è¡Œ] å› ä¸º&lt;? extends&gt;ä»£è¡¨ä¿å­˜çš„éƒ½æ˜¯ HeroåŠå…¶å­ç±»ï¼Œå–å‡ºæ¥éƒ½å¯ä»¥è½¬æ¢æˆHeroç±»å‹Hero h = herolist.get(0);// [æ’ï¼Œä¸å¯] å› ä¸º&lt;? extends&gt;å¯ä»¥æ˜¯HeroåŠå…¶å­ç±»ï¼Œä½†åªèƒ½ç¡®å®šä¸ºå…¶ä¸­ä¸€ä¸ªã€‚// æ¯”å¦‚ï¼Œ &lt;? extends&gt;å·²ç»ä»£è¡¨æ˜¯&lt;Hero&gt;,æ ¹æ®æ³›å‹é›†åˆé™å®šæ’å…¥ç±»å‹ï¼Œæ­¤æ—¶æ’å…¥APHeroç±»å‹ä¼šå¤±è´¥ã€‚heroList.add(new ADHero()); //ç¼–è¯‘é”™è¯¯ &lt;?&gt; åŸºæœ¬åŒ*&lt; ? extends ç±»å‹å&gt;* ï¼Œç”±äºå°‘äº† extends ï¼Œä»£è¡¨å¯ä»¥æ˜¯æŒ‡å‘ä»»æ„æ³›å‹å¯¹è±¡ï¼Œè€ŒéæŸç±»åŠå…¶å­ç±»ã€‚ ä½†æ˜¯ï¼Œå–æ•°æ®ä¹Ÿå¯¹åº”åªèƒ½æ˜¯ Object ç±»å‹ã€‚ 1234567// ...åŒå‰// 3.æµ‹è¯•// [å–ï¼Œå¯è¡Œ]åªèƒ½ä¸ºobjectç±»å‹Object o = generalList.get(0);// [æ’ï¼Œä¸å¯]generalList.add(new Item()); generalList.add(new Hero()); // ç¼–è¯‘é”™è¯¯ &lt; ? super å¯¹è±¡å&gt; å’Œ*&lt; ? extends å¯¹è±¡å&gt;* å¯¹è±¡åä¸åŒï¼Œ*&lt; ? super å¯¹è±¡å&gt;*ä»£è¡¨å¯æŒ‡å‘ å¯¹è±¡ååŠçˆ¶ç±»ã€‚ å¦‚ï¼š&lt; ? super Hero&gt; ï¼Œä»£è¡¨å¯æŒ‡å‘ HeroåŠå…¶çˆ¶ç±»Object ã€‚æ‰€ä»¥ï¼š å¯æ’å…¥ï¼šHero &amp; å­ç±»ADHeroç­‰ï¼ˆçˆ¶ç±»æ³›å‹å¯ä»¥æ’å…¥å­ç±»å¯¹è±¡ï¼‰ ä¸å¯å–ï¼šæ— æ³•å°†çˆ¶ç±»æ³›å‹è½¬æ¢æˆå­ç±»ï¼ˆå‘ä¸‹è½¬æ¢ï¼‰ï¼Œä½†æ˜¯ä¸å¯ä»¥åƒ*&lt;?&gt;å–å‡ºæ¥æ˜¯Object*ç±»å‹å—ï¼Ÿå¯è¡Œ 12345678910// 1.å®šä¹‰&lt;? super&gt;æ³›å‹ArrayList&lt;? super Hero&gt; heroList = new ArrayList&lt;Hero&gt;();// 2.æµ‹è¯•// [å–ï¼Œä¸å¯] æ— æ³•å‘ä¸‹è½¬æ¢ï¼Œçˆ¶ç±»è½¬æ¢æˆå­ç±»Hero h = heroList.get(0); // ä¸å¯ï¼Œç¼–è¯‘é”™è¯¯Object O = heroList.get(0); // å¯è¡Œ// [æ’ï¼Œå¯è¡Œ]heroList.add(new Hero()); heroList.add(new ADHero()); // å­ç±»å¯æ’å…¥ é€šé…ç¬¦å–å‡ºã€æ’å…¥æ€»ç»“ å–å‡º æ— è®ºæ˜¯ä½•ç§é€šé…ç¬¦ï¼Œå–å‡ºæ˜¯åªè¦æ»¡è¶³ å‘ä¸Šè½¬æ¢ è§„åˆ™å³å¯ã€‚ å¦‚ï¼š&lt;? extends Hero&gt; ,æ˜¯ HeroåŠå­ç±»ï¼Œåªè¦è½¬æ¢çš„å¯¹è±¡ç±»å‹æ˜¯é€šé…ç¬¦åŒ¹é…æ‰€æœ‰ç±»å‹çš„çˆ¶ç±»ï¼ˆæˆ–åŒçº§ï¼‰ï¼Œå³å¯æ’å…¥ã€‚ æ˜¾ç„¶ï¼ŒHero æ˜¯*&lt;? extends Hero&gt;æ‰€æœ‰ç±»å‹çˆ¶ç±»ï¼Œæ‰€ä»¥å¯ä»¥å–å‡ºè½¬æ¢æˆHero*ï¼š 123ArrayList&lt;? extends Hero&gt; heroList = new ArrayList&lt;Hero&gt;();Hero h = heroList.get(0); // å¯è¡Œ ä½†æ˜¯ï¼Œ & ï¼ŒHeroä¸æ»¡è¶³é€šé…ç¬¦æ‰€ä»£è¡¨çš„æ‰€æœ‰ç±»å‹ç±»å‹çˆ¶ç±»ï¼Œæ‰€ä»¥å‡ºé”™ï¼› ä»¥æ­¤æ¨è®ºï¼Œå‘ä¸Šè½¬æ¢æˆObjectåˆ™è¡Œã€‚ 1234ArrayList&lt;? super Hero&gt; heroList = new ArrayList&lt;Hero&gt;();Hero h = heroList.get(0); // ç¼–è¯‘é”™è¯¯Object O = heroList.get(0); // å¯è¡Œ æ’å…¥ æ’å…¥å³&quot;å‘ä¸‹æ’å…¥&quot;ï¼Œæ’å…¥å¯¹è±¡æ˜¯é€šé…ç¬¦åŒ¹é…æ‰€æœ‰ç±»å‹çš„å­ç±»ï¼ˆæˆ–åŒçº§ï¼‰ã€‚ å¦‚ï¼š* & * ,å®ƒä»¬çš„å­ç±»æ˜¯ä¸ç¡®å®šçš„ï¼Œæ‰€ä»¥ä¸èƒ½æ’å…¥ã€‚ è€Œï¼š&lt;? extends Hero&gt; ï¼ŒADHeroã€Hero æ˜¾ç„¶æ»¡è¶³ç¬¦åˆè¯¥é€šé…ç¬¦åŒ¹é…çš„æ‰€æœ‰ç±»å‹å­ç±»ï¼ˆåŒçº§ï¼‰ï¼Œæ•…å¯ä»¥æ’å…¥ã€‚ ç¬¬åä¸€ç« ï¼šLambda 11.1 åŒ¿åç±» ä½¿ç”¨æ—¶æœº åœ¨newåˆ›å»ºï¼šä¸€ä¸ªç±»å¯¹è±¡ ã€ ä¸€ä¸ªæ¥å£å­ç±»å¯¹è±¡ã€ä¸€ä¸ªæŠ½è±¡ç±»å­ç±»å¯¹è±¡æ—¶ã€‚ 12345ç±»|æ¥å£ åå­— = new ç±»|æ¥å£()&#123; @override é‡å†™æ–¹æ³•;&#125;ï¼› å¦‚ï¼Œä¸‹é¢ new Runnableæ¥å£å®ç°äº†ä¸€ä¸ªåŒ¿åç±»ï¼š 123456789// Runnableæ˜¯ä¸€ä¸ªæ¥å£Runnable x = new Runnable()&#123; @Override public void run() &#123; System.out.println(this.getClass()); &#125; &#125;; æˆ‘ä»¬çŸ¥é“ï¼Œæ¥å£æ˜¯ä¸èƒ½è¢«å®ä¾‹åŒ–çš„ï¼Œä¸Šè¿°ä»£ç å®é™…æ˜¯è¿™ä¹ˆä¸€ä¸ªå®ç°è¿‡ç¨‹ï¼š {}ç›¸å½“äºä¸€ä¸ªç»§æ‰¿äº†Runnableæ¥å£ BUT åŒ¿åçš„ç±»å®ç°äº†Runnableæ¥å£æ–¹æ³•ï¼› è¯¥åŒ¿åç±»åˆ™å¯ä»¥é€šè¿‡å¤šæ€ è½¬æ¢æˆçˆ¶ç±»æ¥å£Runnableç±»å‹ã€‚ æ€»ç»“ åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰æ–¹æ³•ï¼Œç”¨æŠ½è±¡ç±»ã€æ¥å£ä½œå‚æ•°å®ç°å¤šæ€ã€‚ è€Œæˆ‘ä»¬å®é™…éœ€è¦çš„æ˜¯ä¸€ä¸ªå­ç±»å¯¹è±¡ï¼Œå¦‚æœè¯¥æ–¹æ³•ä»…ä»…è°ƒç”¨1 æ¬¡ï¼Œç”¨åŒ¿åç±»ç®€åŒ–æ ¼å¼ï¼Œä¸å¿…ç‰¹åœ°å®ç°ä¸€ä¸ªç±»ç»§æ‰¿è¯¥æ¥å£ã€æŠ½è±¡ç±»ã€‚ 11.2 Lambda åŸºæœ¬ç”¨æ³• Lambda è¯­æ³• åœ¨ javaä¸­ï¼Œå…¶è¡¨è¾¾å¼æ ¼å¼è¯­æ³•ä¸€èˆ¬æ˜¯ï¼š(parameters) -&gt; &#123; statements; &#125; ã€‚ åœ¨æ»¡è¶³ä¸€å®šæ¡ä»¶ä¸‹ï¼Œè¿˜å¯ä»¥è¿›ä¸€æ­¥ç®€å†™ï¼š å‚æ•°ç±»å‹å¯é€‰ ï¼šä¸éœ€è¦å£°æ˜å‚æ•°ç±»å‹ï¼Œç¼–è¯‘å™¨å¯ä»¥ç»Ÿä¸€è¯†åˆ«å‚æ•°å€¼ï¼› åªæœ‰ä¸€ä¸ªå‚æ•° ï¼š å‚æ•° ()å¯é€‰ ä¸»ä½“{}åªæœ‰ä¸€æ¡è¯­å¥ ï¼šæ­¤æ—¶ return å…³é”®å­— &amp; {} ï¼Œå¯ä¸å†™ã€‚æ³¨æ„ ï¼ ä¸»ä½“{} ä¸çœç•¥æ—¶ï¼Œå“ªæ€•åªæœ‰ä¸€æ¡è¯­å¥ï¼Œå‡½æ•°æœ‰è¿”å›å€¼returnå…³é”®å­—ä¸å¯çœï¼ ä¸»ä½“{} çœç•¥æ—¶ï¼Œreturn ä¹Ÿå¿…é¡»çœç•¥ï¼ ä»¥ä¸‹æ˜¯ä¸€äº›ç®€å•ç¤ºä¾‹ï¼š 1234567891011121314// 1. ä¸éœ€è¦å‚æ•°,è¿”å›å€¼ä¸º 5 () -&gt; 5 // 2. æ¥æ”¶ä¸€ä¸ªå‚æ•°(æ•°å­—ç±»å‹),è¿”å›å…¶2å€çš„å€¼ x -&gt; 2 * x // 3. æ¥å—2ä¸ªå‚æ•°(æ•°å­—),å¹¶è¿”å›ä»–ä»¬çš„å·®å€¼ (x, y) -&gt; x â€“ y // 4. æ¥æ”¶2ä¸ªintå‹æ•´æ•°,è¿”å›ä»–ä»¬çš„å’Œ (int x, int y) -&gt; x + y // 5. æ¥å—ä¸€ä¸ª string å¯¹è±¡,å¹¶åœ¨æ§åˆ¶å°æ‰“å°,ä¸è¿”å›ä»»ä½•å€¼(çœ‹èµ·æ¥åƒæ˜¯è¿”å›void) (String s) -&gt; System.out.print(s) Lambda ç”¨äºç®€åŒ–åŒ¿åç±» åœ¨ 9.5 Collectionsç±» ä¸€èŠ‚ï¼Œæˆ‘ä»¬ç”¨ Collections.sort(herosï¼ŒComparator) é™æ€æ–¹æ³•å»æ¯”è¾ƒ Hero çš„HPå±æ€§ï¼Œè¿›è€ŒæŒ‰HPå¤§å°æ‰“å°herosæ•°ç»„ä¸­å„Heroå¯¹è±¡ä¿¡æ¯ã€‚ æˆ‘ä»¬ç”¨åˆ°åŒ¿åç±»è¦†å†™å®ç°äº† Comparator æ¥å£ï¼š 123456789101112131415// 2.[åŒ¿åç±»]è¦†å†™æ¯”è¾ƒå™¨compareæ–¹æ³•ï¼ˆæ¯”è¾ƒè§„åˆ™ï¼‰Comparator&lt;Hero&gt; comparable = new Comparator&lt;Hero&gt;() &#123;@Overridepublic int compare(Hero h1,Hero h2)&#123; if(h1.HP &gt; h2.HP) return 1; else return -1; // æ³¨æ„ï¼Œåˆ«å†™0 &#125;&#125;;Collections.sort(heros,comparable);System.out.println(heros); è¿™é‡Œå¯ä»¥å°†åŒ¿åç±»ç®€å†™ä¸ºï¼š 1Comparator&lt;Hero&gt; comparable = (Hero h1,Hero h2) -&gt; &#123; return h1.HP &gt; h2.HP ? 1:0;&#125;; è¿˜å¯ä»¥è¿›ä¸€æ­¥ç®€åŒ–ï¼š 12345// 1.å»æ‰å‚æ•°ç±»å‹ // 2.å»æ‰&#123;&#125;(åªæœ‰ä¸€æ¡è¯­å¥) // 3.å»æ‰returnï¼ˆåªæœ‰ä¸€æ¡è¯­å¥ + æ²¡æœ‰&#123;&#125;ï¼‰Comparator&lt;Hero&gt; comparable = (h1,h2) -&gt; h1.HP &gt; h2.HP ? 1:0; Lambda ç”¨äºæŠŠæ–¹æ³•ä½œå‚æ•° åœ¨ä¸Šé¢æˆ‘ä»¬é€šè¿‡åŒ¿åç±» æˆ–è€… lambdaç®€åŒ–ï¼Œæœ€ç»ˆåˆ›å»ºäº†Comparatorå¯¹è±¡comparableï¼Œç„¶åè°ƒç”¨æ–¹æ³•ï¼š 12Comparator&lt;Hero&gt; comparable = (h1,h2) -&gt; h1.HP &gt; h2.HP ? 1:0;Collections.sort(heros,comparable); æˆ‘ä»¬å¯ä»¥æ›´è¿›ä¸€æ­¥ï¼Œç›´æ¥ä¼ é€’ lambda è¡¨è¾¾å¼ä½œä¸ºå‚æ•°ï¼š 1Collections.sort(heros,(h1,h2) -&gt; h1.HP &gt; h2.HP ? 1:0); æœ€ç»ˆä¸Šé¢ä»£ç è¢«æˆåŠŸç®€åŒ–æˆä¸€è¡Œã€‚ å½“ç„¶è¿˜æœ‰å…¶å®ƒåŒ¿åæ–¹æ³•ä¾‹å­ï¼Œå®ç°éå†è¾“å‡ºï¼š 1public void forEach(@NotNull java.util.function.Consumer&lt;? super E&gt; action) 123456// åˆ›å»ºä¸€ä¸ªé›†åˆArrayList&lt;Integer&gt; array = new ArrayList&lt;Integer&gt;();array.add(4);array.add(5);array.add(3);array.add(1);// forEachæ–¹æ³•å‚æ•°æœ‰ä¸€ä¸ªCosumeræ¥å£ï¼Œé€šè¿‡lambdaè¡¨è¾¾å¼åˆ›å»ºä¸€ä¸ªç»§æ‰¿Cosumeræ¥å£åŒ¿åå¯¹è±¡array.forEach(n -&gt; System.out.println(n)); 11.3 Lambda èšåˆæ“ä½œ åœ¨ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†ï¼Œå¦‚æœæ–¹æ³•å‚æ•°æ˜¯ä¸€ä¸ªæ¥å£æˆ–è€…æŠ½è±¡ç±»ç­‰ï¼Œå¯åˆ©ç”¨Lambda è¡¨è¾¾å¼ä½œä¸ºæ–¹æ³•å‚æ•°ã€‚è¡¨è¾¾å¼åˆ›å»ºä¸€ä¸ªç»§æ‰¿è¯¥æ¥å£ |æŠ½è±¡ç±»çš„åŒ¿åç±»ï¼Œè¿™ç§æ–¹æ³•ä¹Ÿå«åšåŒ¿åæ–¹æ³•ã€‚ æˆ‘ä»¬å¯ä»¥ç”¨åŒæ—¶ä½¿ç”¨å¤šä¸ªåŒ¿åæ–¹æ³•ï¼Œå®ç°èšåˆæ“ä½œã€‚ å®ä¾‹ä»‹ç» 1234567891011121314// åˆ›å»ºä¸€ä¸ªHeroç±»å‹é›†åˆï¼Œå‡†å¤‡å¤šä¸ªå¯¹è±¡æŒ‡å®šHPArrayList&lt;Hero&gt; heros = new ArrayList&lt;Hero&gt;();for(int i = 0 ; i &lt; 10 ; i++)&#123; String name = &quot;hero&quot;+i; int hp = (int)(Math.random()* 1000); heros.add(new Hero(name,hp)); // å¸¦intå‚æ•°æ„é€ å‡½æ•°&#125;// heroså¯¹è±¡æœ‰å¤šä¸ªæ–¹æ³•ï¼Œè¿›è¡Œèšåˆæ“ä½œheros .stream() .sorted((h1,h2) -&gt; h1.HP &gt; h2.HP ? 1:-1) // æ¯”è¾ƒå™¨æ¥å£ .forEach(n -&gt; System.out.println(n)); // Cosumeræ¥å£ æ›´å¤šæ“ä½œ å®ä¾‹å‚è€ƒï¼Œå…·ä½“å¾…ç”¨åˆ°è¡¥å……ï¼šèšåˆæ“ä½œ ä»¥ æºä¸º List ä¸ºä¾‹ï¼š ä¸­é—´æ“ä½œæ–¹æ³• filter ï¼šåŒ¹é… distinctï¼š å»é™¤é‡å¤(æ ¹æ®equalsåˆ¤æ–­) sorted ï¼šè‡ªç„¶æ’åº sorted(Comparator) ï¼šæŒ‡å®šæ’åº limit ï¼šä¿ç•™ skip ï¼šå¿½ç•¥ ç»“æŸæ“ä½œæ–¹æ³• forEach()ï¼šéå†æ¯ä¸ªå…ƒç´  toArray() ï¼šè½¬æ¢ä¸ºæ•°ç»„ min(Comparator) ï¼š å–æœ€å°çš„å…ƒç´  max(Comparator)ï¼š å–æœ€å¤§çš„å…ƒç´  count()ï¼š æ€»æ•° findFirst()ï¼šç¬¬ä¸€ä¸ªå…ƒç´  ç¬¬åäºŒç« ï¼šå¤šçº¿ç¨‹ 12.0 åŸºæœ¬çŸ¥è¯† çº¿ç¨‹ä¸è¿›ç¨‹ä»‹ç» ä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Ÿ æ‰“å¼€ä»»åŠ¡ç®¡ç†ç®¡ç†å™¨ï¼Œå¯ä»¥çœ‹åˆ°å¾ˆå¤šã€æ­£åœ¨è¿è¡Œã€‘çš„åº”ç”¨ç¨‹åºï¼Œè¿™å°±æ˜¯å¯¹åº”è¿›ç¨‹ã€‚ æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºï¼› ç³»ç»Ÿåˆ†é…å’Œè°ƒç”¨èµ„æºçš„åŸºæœ¬å•ä½ çº¿ç¨‹ï¼Ÿå•çº¿ç¨‹ä¸å¤šçº¿ç¨‹ï¼Ÿ çº¿ç¨‹ï¼šæ˜¯è¿›ç¨‹çš„å•ä¸ªé¡ºåºæ§åˆ¶æµï¼Œæ˜¯æ‰§è¡Œçš„æœ€å°å•ä½ï¼ˆæ‰§è¡Œè·¯å¾„ï¼‰ å•çº¿ç¨‹ï¼še.g. è®°äº‹æœ¬ç¨‹åº ä¸€ä¸ªè¿›ç¨‹å¦‚æœåªæœ‰ä¸€æ¡æ‰§è¡Œè·¯å¾„ï¼Œåˆ™ä¸ºå•çº¿ç¨‹ å¤šçº¿ç¨‹ï¼še.g. æ‰«é›·ç¨‹åºï¼šè®¡æ—¶ã€ç©å®¶æ‰«é›· ä¸€ä¸ªè¿›ç¨‹å¦‚æœæœ‰å¤šæ¡æ‰§è¡Œè·¯å¾„ï¼Œåˆ™ä¸ºå¤šçº¿ç¨‹ç¨‹åº å­çº¿ç¨‹è®¾ç½®åå­— &amp; æºç åˆ†æ MyThread.java 123456789101112131415161718package com.itheima_01;public class MyThread extends Thread &#123; // å¿…é¡»è¦å®šä¹‰è¿™ä¸ª public MyThread() &#123;&#125; // è°ƒç”¨çˆ¶ç±»ï¼ˆThreadï¼‰æ„é€ å‡½æ•°ï¼ˆä¸€ä¸ªå‚æ•°çš„æ–¹æ³•ï¼‰ // è°ƒç”¨é¡ºåºçœ‹ä¸‹æˆªå›¾ public MyThread(String name) &#123; super(name); &#125; @Override public void run() &#123; for(int i=0; i&lt;100; i++) &#123; System.out.println(getName()+&quot;:&quot;+i); &#125; &#125;&#125; MyThreadDemo.java 12345678910111213141516171819202122package com.itheima_01;/* æ–¹å¼1ï¼šç»§æ‰¿Threadç±» 1:å®šä¹‰ä¸€ä¸ªç±»MyThreadç»§æ‰¿Threadç±» 2:åœ¨MyThreadç±»ä¸­é‡å†™run()æ–¹æ³• 3:åˆ›å»ºMyThreadç±»çš„å¯¹è±¡ 4:å¯åŠ¨çº¿ç¨‹ */public class MyThreadDemo &#123; public static void main(String[] args) &#123; MyThread my1 = new MyThread(); MyThread my2 = new MyThread(); my1.setName(&quot;11&quot;);// my1.run();// my2.run(); //void startâ€‹() å¯¼è‡´æ­¤çº¿ç¨‹å¼€å§‹æ‰§è¡Œ; Javaè™šæ‹Ÿæœºè°ƒç”¨æ­¤çº¿ç¨‹çš„runæ–¹æ³• my1.start(); my2.start(); &#125;&#125; è·å–Mainæ–¹æ³•è¿›ç¨‹å ä¸èƒ½ä½¿ç”¨Threadå¯¹è±¡æ–¹æ³•ï¼šgetName()ï¼Œå› ä¸ºæ²¡ç»§æ‰¿Thread åº”è¯¥ç”¨Threadé™æ€æ–¹æ³•ï¼ŒThread.currentThread è·å–å½“å‰æ‰§è¡Œå¯¹è±¡, å†è°ƒç”¨getName() 1String mainTreadName = Thread.currentThread.getName() çº¿ç¨‹è°ƒåº¦ çº¿ç¨‹ä¸»è¦æœ‰ä¸¤ç§è°ƒåº¦ã€æ¨¡å‹ã€‘ï¼š åˆ†æ—¶è°ƒåº¦æ¨¡å‹ï¼šæ‰€æœ‰çº¿ç¨‹è½®æµä½¿ç”¨ CPU çš„ä½¿ç”¨æƒï¼Œå¹³å‡åˆ†é…æ¯ä¸ªçº¿ç¨‹å ç”¨ CPU çš„æ—¶é—´ç‰‡ æŠ¢å å¼è°ƒåº¦æ¨¡å‹ï¼šä¼˜å…ˆè®©ä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹ä½¿ç”¨ CPUï¼Œå¦‚æœçº¿ç¨‹çš„ä¼˜å…ˆçº§ç›¸åŒï¼Œé‚£ä¹ˆä¼šéšæœºé€‰æ‹©ä¸€ä¸ªï¼Œä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹è·å–çš„ CPU æ—¶é—´ç‰‡ç›¸å¯¹å¤šä¸€äº› Javaä½¿ç”¨çš„æ˜¯æŠ¢å å¼è°ƒåº¦æ¨¡å‹ ï¼Œå…·æœ‰éšæœºæ€§ã€‚ éšæœºæ€§ ï¼šå› ä¸ºCPUåœ¨æŸä¸ªæ—¶åˆ»åªèƒ½æ‰§è¡Œä¸€æ¡å‘½ä»¤ï¼Œçº¿ç¨‹åªæœ‰å¾—åˆ°CPUæ—¶é—´ç‰‡ï¼ˆä½¿ç”¨æƒï¼‰ï¼Œæ‰å¯ä»¥æ‰§è¡Œã€‚è€ŒæŠ¢å å¼è°ƒåº¦æ¨¡å‹å¤šçº¿ç¨‹æ‰§è¡Œå…·æœ‰éšæœºæ€§ï¼Œè°æŠ¢åˆ°CPUæ˜¯ä¸ç¡®å®šçš„ã€‚ çº¿ç¨‹ä¼˜å…ˆçº§ï¼š é€šè¿‡è®¾ç½®çº¿ç¨‹ä¼˜å…ˆçº§ï¼Œå¯ä»¥è®©æŸä¸ªçº¿ç¨‹å¾—åˆ°CPUçš„æ¦‚ç‡å˜å¤§ã€‚ï¼ˆä½†ä¸æ„å‘³ç€æ˜¯ç»å¯¹ä¼˜å…ˆï¼Œåªæ˜¯æ¦‚ç‡å¢å¤§ï¼‰ æ–¹æ³•å è¯´æ˜ final int getPriority() è¿”å›æ­¤çº¿ç¨‹çš„ä¼˜å…ˆçº§ final void setPriority(int newPriority) æ›´æ”¹æ­¤çº¿ç¨‹çš„ä¼˜å…ˆçº§ çº¿ç¨‹é»˜è®¤ä¼˜å…ˆçº§æ˜¯5ï¼›çº¿ç¨‹ä¼˜å…ˆçº§çš„èŒƒå›´1-10 çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ ğŸ““ é¢è¯•é‡ç‚¹ï¼ å˜ä¸ºé˜»å¡ ï¼šæ˜¯ç”± è¿è¡Œ çŠ¶æ€è¿›å…¥çš„ï¼Œ ä¸”æ˜¯è¢«sleep() ä¸€äº›é˜»å¡å¼æ–¹æ³•å¯¼è‡´çš„ å˜ä¸ºå°±ç»ªï¼š å¯èƒ½æ˜¯ æ–°å»º çŠ¶æ€è·å¾—èµ„æºï¼Œä¹Ÿå¯èƒ½æ˜¯ è¿è¡Œ çŠ¶æ€è¿›å…¥ 12.1 å¤šçº¿ç¨‹å¿«é€Ÿå…¥é—¨ ä¸ä½¿ç”¨å¤šçº¿ç¨‹ ä¸‹é¢æœ‰ä¸€ä¸ª Hero ç±»ï¼Œå®ç°äº†attack æ–¹æ³•ï¼Œç”¨äºæ¨¡æ‹Ÿæ¸¸æˆäººç‰©è¿›è¡Œæ”»å‡»ï¼š 123456789101112131415161718192021222324252627package LOL;public class Hero&#123; String name; int HP; Hero(String name ,int hp) &#123; this.name = name; this.HP = hp; &#125; // å‡½æ•°ï¼šæ”»å‡» public void attack(Hero h,int damage) &#123; h.HP -= damage; System.out.format(&quot;[%s]æ­£åœ¨æ”»å‡»[%s],[%s]è¡€é‡ä¸º:[%d]..\\n&quot;, name,h.name,h.name,h.HP); if (h.isDead()) &#123; System.out.println(h.name + &quot;--å·²ç»æŒ‚äº†ï¼\\n&quot;); &#125; &#125; // å‡½æ•°ï¼šåˆ¤æ–­æ˜¯å¦æ­»äº¡ public boolean isDead() &#123; return 0 &gt;= HP ? true :false; &#125;&#125; æˆ‘ä»¬åœ¨ä¸»å‡½æ•°ä¸­ï¼Œå®ä¾‹åŒ–æ¸¸æˆäººç‰©VNï¼Œgarren å„è‡ªåˆ†åˆ«æ”»å‡» teemoã€bh ï¼š 12345678910111213141516171819package LOL;public class hello&#123; public static void main(String[] args) &#123; Hero VN = new Hero(&quot;VN&quot;,2500); Hero teemo = new Hero(&quot;teemo&quot;,3000); Hero gareen = new Hero(&quot;gareen&quot;,5000); Hero bh = new Hero(&quot;bh&quot;,2800); // è‹±é›„å¼€å§‹æ”»å‡» while (!teemo.isDead()) VN.attack(teemo,100); while (!bh.isDead()) gareen.attack(bh,100); &#125;&#125; å› ä¸ºéƒ½åœ¨ä¸»å‡½æ•°ä¸­çš„ä¸»çº¿ç¨‹ä¸­ï¼Œæ˜¾ç„¶åº”è¯¥å…ˆæ˜¯VN æ”»å‡»ï¼Œç„¶ågarren è¿›è¡Œæ”»å‡»ï¼Œè¿™æ ·ä¸€ç§ä¸²è¡Œæ–¹å¼ã€‚ ä½†æ˜¯å®é™…æ¸¸æˆä¸­ï¼ŒVN å’Œ garren æ˜¯å¯ä»¥åŒæ—¶è¿›è¡Œæ”»å‡»çš„ï¼Œå¦‚ä½•å®ç°å‘¢ï¼Ÿ å¤šçº¿ç¨‹å®ç°å¹¶è¡Œæ”»å‡» æ ¹æ®ä¸Šé¢æ€è€ƒï¼Œæˆ‘ä»¬åº”è¯¥åˆ†åˆ«æŠŠ VNæ”»å‡»teemo å’Œ garrenæ”»å‡»bh æ”¾åœ¨ä¸åŒçº¿ç¨‹ä¸­å¹¶è¡Œæ‰§è¡Œã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œå®ç°å¤šçº¿ç¨‹æˆ‘ä»¬æœ‰ä¸‰ç§æ–¹å¼ï¼š ç»§æ‰¿ Thread ç±» å®ç° Runnable æ¥å£ åŒ¿åç±»çš„æ–¹å¼ 1. ç»§æ‰¿ Thread ç±» é€šè¿‡ç»§æ‰¿Thread ç±»ï¼Œç„¶åè¦†å†™run() æ–¹æ³•ï¼Œåœ¨run() æ–¹æ³•å†™ä¸Šéœ€è¦å¹¶å‘çš„æ“ä½œ ã€‚è¿™æ ·ï¼Œåœ¨å®ä¾‹åŒ–å¯¹è±¡åï¼Œæ‰§è¡Œå¯¹è±¡æ–¹æ³• start() å¯åŠ¨åä¾¿ä¼šåˆ†é…çº¿ç¨‹æ¥æ‰§è¡Œ run() ä¸­æ“ä½œã€‚ 1234567891011121314151617181920212223package å¤šçº¿ç¨‹;import LOL.Hero;public class KillThread extends Thread&#123; private Hero h1; private Hero h2; public KillThread(Hero h1,Hero h2) &#123; this.h1 = h1; this.h2 = h2; &#125; // è¦†å†™çˆ¶ç±»Threadä¸­run()æ–¹æ³• @Override public void run() &#123; while (!h2.isDead()) // æ¨¡æ‹Ÿä¸æ–­æ”»å‡»æ•Œæ–¹è‹±é›„ h1.attack(h2,100); &#125;&#125; ç„¶ååœ¨ä¸»å‡½æ•°ï¼Œå®ä¾‹åŒ– KillThread å¯¹è±¡ï¼Œæ‰§è¡Œstart() æ–¹æ³•æ¥åˆ›å»ºçº¿ç¨‹ï¼Œç„¶åæ‰§è¡Œæ–¹æ³•run() ä¸­æ“ä½œã€‚ æ˜¾ç„¶ï¼Œä¸‹é¢KillThread å¯¹è±¡kh1ã€kh2ï¼Œåˆ†åˆ«åˆ›å»ºäº†ä¸¤ä¸ªçº¿ç¨‹æ‰§è¡Œ VNæ”»å‡»Teemoï¼Œgarrenæ”»å‡»bhã€‚ ğŸ““ åˆ›å»ºä¸¤ä¸ªçº¿ç¨‹ï¼Œä»£ç æ’ç‰ˆä¸­æ˜¯ä¸²è¡Œçš„ï¼Œä½†æ˜¯å®é™…æ‰§è¡Œæ˜¯å¹¶è¡Œçš„ã€‚ 12345678910111213141516171819package LOL;public class hello&#123; public static void main(String[] args) &#123; Hero VN = new Hero(&quot;VN&quot;,2500); Hero teemo = new Hero(&quot;teemo&quot;,3000); Hero gareen = new Hero(&quot;gareen&quot;,5000); Hero bh = new Hero(&quot;bh&quot;,2800); // å¦‚æœæ‰§è¡Œ kt1.run()ã€kt2.run() ä¸ä¼šåˆ›å»ºæ–°çº¿ç¨‹,ç›¸å½“äºä¸²è¡Œæ“ä½œ KillThread kt1 = new KillThread(VN, teemo); kt1.start(); KillThread kt2 = new KillThread(gareen, bh); kt2.start(); &#125;&#125; æ ¹æ®ä¸‹é¢éƒ¨åˆ†è¾“å‡ºæˆªå›¾ï¼Œå¯ä»¥å‘ç° VNæ”»å‡»Teemoï¼Œgarrenæ”»å‡»bh å¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼š 2. å®ç° Runnable æ¥å£ é€šè¿‡ å®ç° Runnable æ¥å£ å’Œ ç»§æ‰¿ Thread ç±»æ¥å®ç°å¤šçº¿ç¨‹ï¼Œå¤§åŒå°å¼‚ã€‚ ç›¸æ¯”ç»§æ‰¿Threadç±»ï¼Œå®ç°Runnableæ¥å£çš„å¥½å¤„ï¼š é¿å…äº†Javaå•ç»§æ‰¿çš„å±€é™æ€§ é€‚åˆå¤šä¸ªç›¸åŒç¨‹åºçš„ä»£ç å»å¤„ç†åŒä¸€ä¸ªèµ„æºçš„æƒ…å†µï¼ŒæŠŠçº¿ç¨‹å’Œç¨‹åºçš„ä»£ç ã€æ•°æ®æœ‰æ•ˆåˆ†ç¦»ï¼Œè¾ƒå¥½çš„ä½“ç°äº†é¢å‘å¯¹è±¡çš„è®¾è®¡æ€æƒ³ å”¯ä¸€éœ€æ³¨æ„çš„æ˜¯ï¼ŒRunnable æ¥å£ è™½ç„¶è¦æ±‚å®ç° run() æ–¹æ³•ï¼Œä½†æ˜¯ï¼š ç›´æ¥è°ƒç”¨*run()*æ–¹æ³•ï¼Œå¹¶ä¸ä¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹ã€‚[é¢è¯•]éœ€è¦å€ŸåŠ©çº¿ç¨‹å¯¹è±¡ start()æ–¹æ³•ï¼Œæ‰ä¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹ã€‚ ä¸‹é¢åˆ›å»ºä¸€ä¸ª Battle ç±»ï¼Œå®ç°Runnable æ¥å£ï¼Œå¯ä»¥çœ‹åˆ°ï¼šé™¤äº†æ²¡æœ‰ç»§æ‰¿ Thread ç±»ï¼Œå…¶ä½™éƒ½ä¸€æ¨¡ä¸€æ ·ã€‚ 1234567891011121314151617181920212223package å¤šçº¿ç¨‹;import LOL.Hero;public class Battle implements Runnable // ä»¥ä¸‹å’Œç»§æ‰¿Threadæ–¹å¼ä»£ç ä¸€æ ·&#123; private Hero h1; private Hero h2; public KillThread(Hero h1,Hero h2) &#123; this.h1 = h1; this.h2 = h2; &#125; // è¦†å†™çˆ¶ç±»Threadä¸­run()æ–¹æ³• @Override public void run() &#123; while (!h2.isDead()) // æ¨¡æ‹Ÿä¸æ–­æ”»å‡»æ•Œæ–¹è‹±é›„ h1.attack(h2,100); &#125;&#125; åœ¨ä¸»å‡½æ•°éœ€è¦å€ŸåŠ© Thread å¯¹è±¡ *start()*æ–¹æ³•ï¼Œå¯åŠ¨ä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œè¿™ä¹Ÿæ˜¯å’Œç›´æ¥ç»§æ‰¿ Thread ç±»ä¸åŒåœ°æ–¹ï¼š 123456789101112131415161718package LOL;public class hello&#123; public static void main(String[] args) &#123; Hero VN = new Hero(&quot;VN&quot;,2500); Hero teemo = new Hero(&quot;teemo&quot;,3000); Hero gareen = new Hero(&quot;gareen&quot;,5000); Hero bh = new Hero(&quot;bh&quot;,2800); Battle battle1 = new Battle(gareen,teemo); new Thread(battle1).start(); // æŠŠBattleå¯¹è±¡å½“åšThreadæ„é€ å‡½æ•°å‚æ•°ä¼ é€’è¿›å» Battle battle2 = new Battle(bh,leesin); new Thread(battle2).start(); &#125;&#125; 3. åŒ¿åç±» åœ¨ 2.å®ç° Runnable æ¥å£ ä¸­ï¼Œæˆ‘ä»¬éš¾å…ä¼šæƒ³åˆ°é€šè¿‡åŒ¿åç±»æ–¹å¼æ¥å®ç°ï¼Œå› ä¸ºå®ƒæ»¡è¶³ï¼š é€šè¿‡ç»§æ‰¿æ¥å£/ç±»æ–¹å¼å®ç°ä¸€ä¸ªç±»(Battle) è¯¥ç±»å¯¹è±¡ä»…è¢«è°ƒç”¨ä¸€æ¬¡ å½“ç„¶ï¼Œåœ¨ 3.ç»§æ‰¿ Thread ç±» ä¸­ä¹Ÿæ»¡è¶³ä¸Šè¿°æ¡ä»¶ï¼Œå¯ä»¥é€šè¿‡åŒ¿åç±»å®ä¾‹KillThread å¯¹è±¡ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546package LOL;public class hello&#123; public static void main(String[] args) &#123; Hero VN = new Hero(&quot;VN&quot;,2500); Hero teemo = new Hero(&quot;teemo&quot;,3000); Hero gareen = new Hero(&quot;gareen&quot;,5000); Hero bh = new Hero(&quot;bh&quot;,2800); /* // åŒ¿åç±»ç”Ÿæˆæœ¬æ¥çš„KillThreadå¯¹è±¡ Thread t1= new Thread()&#123; public void run() &#123; while(!teemo.isDead()) gareen.attackHero(teemo); &#125; &#125;; */ // åŒ¿åç±»å®ç°ç”ŸæˆBattlelç±»å¯¹è±¡ Runnable battle1 = new Runnable() &#123; @Override public void run() &#123; while (!teemo.isDead()) VN.attack(teemo,100); &#125; &#125;; // æ³¨æ„è¦æœ‰ ; åˆ†å· new Thread(battle1).start(); Runnable battle2 = new Runnable() &#123; @Override public void run() &#123; while (!bh.isDead()) gareen.attack(bh,100); &#125; &#125;; new Thread(battle2).start(); &#125;&#125; å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ›´è¿›ä¸€æ­¥ï¼Œä½¿ç”¨ lambada è¡¨è¾¾å¼ï¼š 12345678910111213141516171819package LOL;public class hello&#123; public static void main(String[] args) &#123; Hero VN = new Hero(&quot;VN&quot;,2500); Hero teemo = new Hero(&quot;teemo&quot;,3000); Hero gareen = new Hero(&quot;gareen&quot;,5000); Hero bh = new Hero(&quot;bh&quot;,2800); // æ›´è¿›ä¸€æ­¥ï¼šé€šè¿‡lambadaè¡¨è¾¾å¼ Runnable battle1 = () -&gt; &#123;while (!teemo.isDead()) VN.attack(teemo,100);&#125;; new Thread(battle1).start(); Runnable battle2 = () -&gt; &#123;while (!bh.isDead()) gareen.attack(bh,100);&#125;; new Thread(battle2).start(); &#125;&#125; 12.2 å¤šçº¿ç¨‹å¸¸ç”¨æ–¹æ³• sleep() æ–¹æ³• sleep() æ˜¯ Thread ç±»é™æ€æ–¹æ³•ï¼Œå¯ä»¥ä½¿ å½“å‰ çº¿ç¨‹é˜»å¡ï¼Œå¹¶æŒ‡å®šæš‚åœæ—¶é—´ï¼Œé‡ç‚¹åœ¨äºç†è§£ å½“å‰ï¼š ä¸‹é¢æ˜¯14.1ä¸­ 3.åŒ¿åç±» åœ¨ä¸»å‡½æ•°å®ç°å¤šçº¿ç¨‹ä»£ç ï¼Œåˆ å‡äº† garren æ”»å‡» bh åˆ›å»ºçº¿ç¨‹éƒ¨åˆ†ã€‚ 1234567891011121314151617181920212223242526272829package LOL;public class hello&#123; public static void main(String[] args) throws InterruptedException &#123; Hero VN = new Hero(&quot;VN&quot;,2500); Hero teemo = new Hero(&quot;teemo&quot;,3000); Hero gareen = new Hero(&quot;gareen&quot;,5000); Hero bh = new Hero(&quot;bh&quot;,2800); // [1]æš‚åœ1s Thread.sleep(1000); // sleepè¦å¤„ç†å¼‚å¸¸ï¼Œä¸ºäº†æ–¹ä¾¿ç›´æ¥åœ¨ä¸»å‡½æ•°throw // åŒ¿åç±»å®ç° Runnable battle1 = new Runnable() &#123; @Override public void run() &#123; // [2]æš‚åœ2s Thread.sleep(2000); while (!teemo.isDead()) VN.attack(teemo,100); &#125; &#125;; new Thread(battle1).start(); &#125;&#125; å¯ä»¥çœ‹åˆ°ä¸Šé¢æœ‰ä¸¤ä¸ªä½ç½®å‘ç”Ÿæš‚åœï¼š [1]æš‚åœ1sï¼šæ˜¾ç„¶å½“å‰çº¿ç¨‹æ˜¯ä¸»çº¿ç¨‹ï¼Œæ‰€ä»¥ä¼šä½¿å¾—ä¸»çº¿ç¨‹æš‚åœ1sï¼› [2]æš‚åœ2sï¼šæ‰§è¡Œå®Œ new Thread(battle1).start(); å¯åŠ¨æ–°çº¿ç¨‹1ï¼Œæ–°çº¿ç¨‹1ä¼šæ‰§è¡Œ run() æ–¹æ³•ã€‚é‚£ä¹ˆå½“å‰çº¿ç¨‹å°±æ˜¯çº¿ç¨‹1ï¼Œçº¿ç¨‹1è¢«æš‚åœ2sã€‚ yield() æ–¹æ³• yield() ä¹Ÿæ˜¯ Thread ç±»é™æ€æ–¹æ³•ï¼Œä½¿å½“å‰çº¿ç¨‹å˜ä¸ºå°±ç»ªçŠ¶æ€ ï¼ˆsleep() æ˜¯é˜»å¡ï¼‰ï¼Œä½¿å¾—å…¶ä»–çº¿ç¨‹æ›´å¤šæœºä¼šè·å–CPUã€‚ ä½†ä¸èƒ½æŒ‡å®šæš‚åœæ—¶é—´ï¼Œå› ä¸ºçº¿ç¨‹é‡æ–°åˆ°å°±ç»ªçŠ¶æ€ åï¼Œæ‰§è¡Œyield()çš„çº¿ç¨‹æœ‰å¯èƒ½åœ¨è¿›å…¥å°±ç»ªçŠ¶æ€ é©¬ä¸Šåˆè¢«æ‰§è¡Œã€‚ 1234567891011121314151617181920212223242526272829package LOL;public class hello&#123; public static void main(String[] args) throws InterruptedException &#123; Hero VN = new Hero(&quot;VN&quot;,2500); Hero teemo = new Hero(&quot;teemo&quot;,3000); Hero gareen = new Hero(&quot;gareen&quot;,5000); Hero bh = new Hero(&quot;bh&quot;,2800); // [1]ä¸»çº¿ç¨‹ä»è¿è¡Œ--&gt;å°±ç»ª Thread.yield(); // å®é™…æµ‹è¯•æ²¡æœ‰æ•ˆæœï¼Œåé¢ä»£ç è¿˜æ˜¯æ‰§è¡Œä¸»å‡½æ•°ä»£ç ï¼Œä¸»çº¿ç¨‹ç«‹é©¬åˆè¢«è°ƒåº¦äº† // åŒ¿åç±»å®ç° Runnable battle1 = new Runnable() &#123; @Override public void run() &#123; while (!teemo.isDead()) VN.attack(teemo,100); // [2]VNæ”»å‡»teemoçº¿ç¨‹ä»è¿è¡Œ--&gt;å°±ç»ª Thread.yield(); // è®©å‡ºCPUè°ƒåº¦ &#125; &#125;; new Thread(battle1).start(); &#125;&#125; join() æ–¹æ³• slepp()ã€yield()éƒ½æ˜¯Threadç±»é™æ€æ–¹æ³•ï¼Œä½†jion() æ˜¯Threadç±»å®ä¾‹å¯¹è±¡æ–¹æ³•ã€‚ ä¸€ç§ç‰¹æ®Šçš„waitï¼Œå½“å‰ è¿è¡Œçº¿ç¨‹è°ƒç”¨å¦ä¸€ä¸ªçº¿ç¨‹çš„joinæ–¹æ³•ã€‚ å½“å‰çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ç›´åˆ°joinçš„çº¿ç¨‹è¿è¡Œç»“æŸ ï¼Œç­‰å¾…è¯¥çº¿ç¨‹ç»ˆæ­¢ã€‚ æ³¨æ„è¯¥æ–¹æ³•ä¹Ÿéœ€è¦æ•æ‰å¼‚å¸¸ã€‚- âš ï¸ æ­¤æ—¶æœ‰å…¶å®ƒå­çº¿ç¨‹ï¼Œä¹Ÿå¿…é¡»ç­‰åˆ°è°ƒç”¨jion() çš„çº¿ç¨‹å…ˆæ‰§è¡Œå®Œæ¯•ã€‚ â€‹ 123456789101112131415161718192021222324252627282930313233343536/* void join()ï¼šç­‰å¾…è¿™ä¸ªçº¿ç¨‹æ­»äº¡ */public class ThreadJoinDemo &#123; public static void main(String[] args) &#123; ThreadJoin tj1 = new ThreadJoin(); ThreadJoin tj2 = new ThreadJoin(); ThreadJoin tj3 = new ThreadJoin(); tj1.setName(&quot;åº·ç†™&quot;); tj2.setName(&quot;å››é˜¿å“¥&quot;); tj3.setName(&quot;å…«é˜¿å“¥&quot;); // 1.å¯åŠ¨ä¸»çº¿ç¨‹åï¼Œä¸‰ä¸ªçº¿ç¨‹æŠ¢å æ‰§è¡Œï¼Œè°éƒ½å¯èƒ½æ‰§è¡Œ tj1.start(); tj2.start(); tj3.start(); // 2.ä¸»çº¿ç¨‹ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œ // é‡åˆ°è®¾ç½®åº·ç†™çº¿ç¨‹jionåï¼Œä¸»çº¿ç¨‹å’Œå¦å¤–ä¸¤ä¸ªé˜¿å“¥çº¿ç¨‹ // ã€éƒ½é˜»å¡ã€‘ï¼Œç­‰å¾…åº·ç†™çº¿ç¨‹æ‰§è¡Œå®Œ try &#123; tj1.join(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;&#125;public class ThreadJoin extends Thread &#123; @Override public void run() &#123; for (int i = 0; i &lt; 10000; i++) &#123; System.out.println(getName() + &quot;:&quot; + i); &#125; &#125;&#125; setPriority() æ–¹æ³• setPriority() ç”¨äºè®¾ç½®ä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§çš„é«˜çš„çº¿ç¨‹æ›´é«˜å‡ ç‡è·å¾— CPU è°ƒåº¦ã€‚æœ‰ä»¥ä¸‹å‡ ä¸ªéœ€è¦çŸ¥é“çŸ¥è¯†ç‚¹ï¼š çº¿ç¨‹ä¼˜å…ˆçº§è¡¨ç¤º çº¿ç¨‹ä¼˜å…ˆçº§è¡¨ç¤ºç”¨æ•´æ•°ï¼š1~10ï¼Œä¹Ÿå¯ä»¥ç”¨java å†…ç½®çš„ä¸‰ç§ INT å‹å¸¸é‡è¡¨ç¤ºï¼š æœ€ä½ä¼˜å…ˆçº§ 1ï¼šThread.MIN_PRIORITY æ™®é€šä¼˜å…ˆçº§ 5ï¼šThread.MAX_PRIORITY æœ€é«˜ä¼˜å…ˆçº§10ï¼šThread.NORM_PRIORITY é»˜è®¤çº¿ç¨‹ä¼˜å…ˆçº§ Javaé»˜è®¤çš„çº¿ç¨‹ä¼˜å…ˆçº§æ˜¯ çˆ¶çº¿ç¨‹çš„ä¼˜å…ˆçº§ï¼Œè€Œéæ™®é€šä¼˜å…ˆçº§ Thread.NORM_PRIORITY ã€‚ è¯¦ç»†å‚è€ƒ æ“ä½œç³»ç»Ÿ ä¸€ä¹¦ï¼Œè¿™é‡Œä»¥ä¸€ä¸ªç®€å•å®ä¾‹è¯´æ˜ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142package LOL;public class hello&#123; public static void main(String[] args) throws InterruptedException &#123; Hero VN = new Hero(&quot;VN&quot;,2500); Hero teemo = new Hero(&quot;teemo&quot;,3000); Hero gareen = new Hero(&quot;gareen&quot;,5000); Hero bh = new Hero(&quot;bh&quot;,2800); Thread t1 = new Thread()&#123; @Override public void run() &#123; while (!teemo.isDead()) VN.attack(teemo,100); &#125; &#125;; Thread t2 = new Thread()&#123; @Override public void run() &#123; while (!bh.isDead()) gareen.attack(bh,100); &#125; &#125;; // è·å–çº¿ç¨‹ä¼˜å…ˆçº§ System.out.format(&quot;t1ä¼˜å…ˆçº§%dï¼Œt2ä¼˜å…ˆçº§%d\\n&quot; ,t1.getPriority(),t2.getPriority()); // é‡æ–°è®¾ç½®çº¿ç¨‹ä¼˜å…ˆçº§ t1.setPriority(Thread.MAX_PRIORITY); t2.setPriority(Thread.MIN_PRIORITY); // è·å–ä¼˜å…ˆçº§ System.out.format(&quot;t1ä¼˜å…ˆçº§%dï¼Œt2ä¼˜å…ˆçº§%d\\n&quot; ,t1.getPriority(),t2.getPriority()); // å¯åŠ¨çº¿ç¨‹ t1.start(); t2.start(); &#125;&#125; setDaemon() æ–¹æ³• setDaemon() ç”¨äºè®¾ç½®å®ˆæŠ¤çº¿ç¨‹ã€‚ä»€ä¹ˆæ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Ÿ ç®€å•ç†è§£ï¼Œä¸€ä¸ª è¿›ç¨‹ ä¸­ç”¨äºå®ˆæŠ¤å…¶å®ƒçº¿ç¨‹çš„çº¿ç¨‹ï¼Œå¦‚æœå…¶å®ƒçº¿ç¨‹ç»“æŸï¼Œåªå‰©ä¸‹å®ˆæŠ¤çº¿ç¨‹ï¼Œé‚£ä¹ˆè¿›ç¨‹ ç»“æŸã€‚ å®ˆæŠ¤çº¿ç¨‹é€šå¸¸ä¼šè¢«ç”¨æ¥åšï¼šæ—¥å¿—ã€æ€§èƒ½ç»Ÿè®¡ç­‰å·¥ä½œã€‚ 12// t1çº¿ç¨‹è¢«è®¾ä¸ºå½“å‰è¿›ç¨‹çš„å®ˆæŠ¤çº¿ç¨‹ t1.setDaemon(true); åˆ›å»ºä¸€ä¸ªç ´è§£çº¿ç¨‹ç”¨ç©·ä¸¾æ³•åŒ¹é…æŒ‡å®šçš„æŸå¯†ç ï¼›åˆ›å»ºä¸€ä¸ªæ—¥å¿—å®ˆæŠ¤çº¿ç¨‹ï¼Œæ‰“å°ç”¨è¿‡å“ªäº›å¯†ç åŒ¹é…ã€‚ ğŸ”‘ ç”±äºæ—¥å¿—çº¿ç¨‹æ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Œé‚£ä¹ˆç ´è§£çº¿ç¨‹åŒ¹é…æˆåŠŸç»“æŸï¼Œå®ˆæŠ¤çº¿ç¨‹æ—¥å¿—ä¹Ÿå°±ç»“æŸäº†ï¼› ğŸ”‘ è®¾ç½®ä¸€ä¸ªå…¬å…±å®¹å™¨ LinkList ç­”æ¡ˆæŸ¥çœ‹ï¼šå¤šçº¿ç¨‹å¸¸ç”¨æ–¹æ³• è®¾ç½®ä¸‰ä¸ªçº¿ç¨‹ï¼šâ€œå…³ç¾½â€ã€â€œå¼ é£â€ã€â€œåˆ˜å¤‡â€ ã€‚â€œåˆ˜å¤‡â€ä¸ºå½“å‰çº¿ç¨‹ï¼ˆä¹Ÿæ˜¯ä¸»çº¿ç¨‹ï¼‰ï¼Œâ€œå…³ç¾½â€å’Œâ€œå¼ é£â€ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚ ä¸‹é¢ç¤ºä¾‹ä¸­ï¼Œâ€œåˆ˜å¤‡â€çº¿ç¨‹æŒ‚äº†åï¼Œâ€œå…³ç¾½â€ã€â€œå¼ é£â€ ä¹Ÿé©¬ä¸Šåœæ­¢äº†ï¼ˆä½†è¿˜æ˜¯æŒ£æ‰äº†ä¼šï¼‰ã€‚ 12.3 å¤šçº¿ç¨‹åŒæ­¥ å¤šçº¿ç¨‹åŒæ­¥é—®é¢˜ï¼ŒæŒ‡å¤šçº¿ç¨‹åŒæ—¶ä¿®æ”¹ä¸€ä¸ªæ•°æ®æ—¶ï¼Œå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ç­‰ã€‚è§£å†³å¤šçº¿ç¨‹é—®é¢˜ï¼Œé€šå¸¸é€šè¿‡ï¼š volatileå…³é”®å­— ï¼šå¯ä¿è¯å¯è§æ€§ï¼› synchronizedå…³é”®å­— ï¼šæ˜¯ä¸€ä¸ªåŒæ­¥é”ï¼Œä¿è¯åŸå­æ€§å’Œå¯è§æ€§ï¼› Lock æ¥å£ï¼šä¿è¯åŸå­æ€§å’Œå¯è§æ€§ï¼Œè¯¦æƒ…æš‚ç•¥ã€‚ åœ¨è§£é‡Š volatile &amp; synchronized åŒæ­¥é”å‰ï¼Œå…ˆäº†è§£ä¸€äº›å¹¶å‘ç¼–ç¨‹åŸºæœ¬æ¦‚å¿µã€‚ æ€è€ƒä¸‹é¢å”®ç¥¨æ¡ˆä¾‹ï¼šä¸ºä»€ä¹ˆæ§åˆ¶å°ä¼šï¼š1. è¾“å‡ºç›¸åŒç¥¨ã€2.å‡ºç°è´Ÿæ•°ç¥¨ï¼Ÿ ä¸»å‡½æ•°ç±» 12345678910111213141516public class SellTicketDemo &#123; public static void main(String[] args) &#123; //åˆ›å»ºSellTicketç±»çš„å¯¹è±¡ SellTicket st = new SellTicket(); //åˆ›å»ºä¸‰ä¸ªThreadç±»çš„å¯¹è±¡ï¼ŒæŠŠSellTicketå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°ï¼Œå¹¶ç»™å‡ºå¯¹åº”çš„çª—å£åç§° Thread t1 = new Thread(st,&quot;çª—å£1&quot;); Thread t2 = new Thread(st,&quot;çª—å£2&quot;); Thread t3 = new Thread(st,&quot;çª—å£3&quot;); //å¯åŠ¨çº¿ç¨‹ t1.start(); t2.start(); t3.start(); &#125;&#125; SellTicket çº¿ç¨‹ç±» 123456789101112131415public class SellTicket implements Runnable &#123; private int tickets = 100; //åœ¨SellTicketç±»ä¸­é‡å†™run()æ–¹æ³•å®ç°å–ç¥¨ï¼Œä»£ç æ­¥éª¤å¦‚ä¸‹ @Override public void run() &#123; while (true) &#123; if (tickets &gt; 0) &#123; System.out.println(Thread.currentThread().getName() + &quot;æ­£åœ¨å‡ºå”®ç¬¬&quot; + tickets + &quot;å¼ ç¥¨&quot;); tickets--; &#125; &#125; &#125;&#125; è§£é‡Š ç›¸åŒç¥¨ï¼šæ‰“å°å‡ºå”®ç¥¨ã€ tickets-- ä¸¤æ¡è¯­å¥å…±äº«ticketså˜é‡ï¼Œå¯¼è‡´æ²¡æœ‰åŠæ—¶æ›´æ–°ticketså˜é‡ å‡ºç°è´Ÿæ•°ç¥¨ï¼š if (tickets &gt; 0) è¯­å¥åˆ¤æ–­å’Œ tickets--å…±äº«ticketså˜é‡ ï¼Œæ²¡æœ‰åŠæ—¶æ›´æ–°ticketså˜é‡ 1.å¦‚ä½•è§£å†³å¤šçº¿ç¨‹ å®‰å…¨é—®é¢˜å‡ºç°çš„æ¡ä»¶ æ˜¯å¤šçº¿ç¨‹ç¯å¢ƒ æœ‰å…±äº«æ•°æ® æœ‰å¤šæ¡è¯­å¥æ“ä½œï¼ˆåŒ…å«ï¼Œè¯»ã€å†™ç­‰ï¼‰å…±äº«æ•°æ® ä¸ºä»€ä¹ˆä¸€å®šè¦æ±‚æ˜¯ä¸€ä¸ªçº¿ç¨‹æœ‰å¤šæ¡è¯­å¥æ“ä½œå…±äº«æ•°æ®ï¼Ÿ å¦‚æœä¸¤ä¸ªçº¿ç¨‹ï¼Œå„åªæœ‰ä¸€æ¡è¯­å¥æ“ä½œæ•°æ®ï¼Œè™½ç„¶çº¿ç¨‹æ‰§è¡Œå…·æœ‰éšæœºæ€§ï¼Œä½†æ˜¯æ— è®ºå“ªä¸ªçº¿ç¨‹æ‰§è¡Œè‡ªå·±é‚£æ¡è¯­å¥ï¼ˆæ˜¯åŸå­æ€§è¯­å¥ï¼‰æ—¶ï¼Œå…¶å®ƒçº¿ç¨‹å³ä½¿æ­¤åˆ»æŠ¢å åˆ°CPUï¼Œä¿®æ”¹äº†å…±äº«å˜é‡ã€‚ä½†ç”±äºå‰ä¸€ä¸ªçº¿ç¨‹ä¸å†ä¼šæ‰§è¡Œå…±äº«æ•°æ®ç›¸å…³æ“ä½œï¼Œå› æ­¤å®é™…æ˜¯ä¸å½±å“çš„ã€‚ âš ï¸ åŒºåˆ†å¤šçº¿ç¨‹ä¸­çº¿ç¨‹æ¥æºåŒä¸€ä¸ªç±»å’Œä¸åŒç±»æƒ…å†µã€‚ ä¸¤ä¸ªçº¿ç¨‹æ¥è‡ªåŒä¸€ä¸ªçº¿ç¨‹ç±»ä¸¤ä¸ªå¯¹è±¡ ï¼Œè¯¥ç±»æœ‰å¤šæ¡è¯­å¥ä¿®æ”¹å…±äº«ç±»å˜é‡çš„æ“ä½œ ï¼›é”ä½ç±»çš„å…±äº«æ“ä½œæ•°æ®è¯­å¥ä¿è¯åŒä¸€æ—¶å€™åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡è¿›è¡Œä¿®æ”¹ ã€æ¶ˆè´¹ç”Ÿäº§é—®é¢˜ã€‘ä¸¤ä¸ªçº¿ç¨‹æ¥è‡ªä¸åŒçº¿ç¨‹ç±»ï¼Œä½†å„æœ‰ä¸€æ¡æˆ–å¤šæ¡è¯­å¥å¯¹å…±äº«å˜é‡è¿›è¡Œä¿®æ”¹ ï¼›ä½¿ç”¨Pã€Væ“ä½œä¿è¯åŒä¸€æ—¶å€™åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡è¿›è¡Œä¿®æ”¹ã€‚å‚è€ƒ ï¼š7.ç”Ÿäº§è€…æ¶ˆè´¹è€… å°èŠ‚å®ä¾‹ JAVAä¸­ä½¿ç”¨ wait()ã€notifyAll() æ¥å®ç°ï¼Œä½†æ˜¯å’ŒPVæ“ä½œé€»è¾‘æ˜¯ä¸ä¸€æ ·çš„ã€‚ å¦‚ä½•è§£å†³å¤šçº¿ç¨‹å®‰å…¨ï¼Ÿ æŠŠå¤šæ¡è¯­å¥æ“ä½œå…±äº«æ•°æ®çš„ä»£ç ç»™é”èµ·æ¥ï¼Œè®©ä»»æ„æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå³å¯ Javaæä¾›äº†åŒæ­¥ä»£ç å—çš„æ–¹å¼æ¥è§£å†³ 1234synchronized(ä»»æ„å¯¹è±¡) &#123; // å¤šæ¡è¯­å¥æ“ä½œå…±äº«æ•°æ®çš„ä»£ç &#125; synchronizedåŒæ­¥æ–¹å¼ä¼˜ç¼ºç‚¹ï¼Ÿ å¥½å¤„ï¼šè§£å†³äº†å¤šçº¿ç¨‹çš„æ•°æ®å®‰å…¨é—®é¢˜ å¼Šç«¯ï¼šå½“çº¿ç¨‹å¾ˆå¤šæ—¶ï¼Œå› ä¸ºæ¯ä¸ªçº¿ç¨‹éƒ½ä¼šå»åˆ¤æ–­åŒæ­¥ä¸Šçš„é”ï¼Œè¿™æ˜¯å¾ˆè€—è´¹èµ„æºçš„ï¼Œæ— å½¢ä¸­ä¼šé™ä½ç¨‹åºçš„è¿è¡Œæ•ˆç‡ å°è¯•synchronizedè§£å†³å”®ç¥¨é—®é¢˜ ä¸ºä»€ä¹ˆä¸‹é¢è¿™ç§æ–¹å¼ï¼Œæ‰§è¡Œè¿˜æ˜¯ä¸€æ ·çš„é—®é¢˜ï¼Ÿ å› ä¸ºæ¯æ¬¡åˆ›å»ºçº¿ç¨‹å¯¹è±¡ï¼Œé”å¯¹è±¡new Object ä¹Ÿæ˜¯é‡æ–°åˆ›å»ºçš„ï¼Œä¸‰ä¸ªçº¿ç¨‹å¯¹è±¡ä¸‰æŠŠé”ï¼Œæ‰€ä»¥é”ä¸ä½ å› æ­¤ï¼Œæˆ‘ä»¬è¦å®šä¹‰ä¸€ä¸ªå…¬å…±çš„é”å¯¹è±¡ï¼š 2.åŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§ åŸå­æ€§ å³ä¸€ä¸ªæˆ–å¤šä¸ªæ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œï¼Œç±»ä¼¼äºæ•°æ®åº“äº‹åŠ¡æ¦‚å¿µã€‚ åœ¨ java ä¸­ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡çš„è¯»å–å’Œèµ‹å€¼æ“ä½œæ˜¯åŸå­æ€§æ“ä½œï¼Œå…¶ä½™ä¸æ˜¯ï¼Œä¾‹å¦‚ï¼š ã€é¢è¯•é«˜é¢‘ã€‘åˆ¤æ–­ï¼šä¸‹é¢è¯­å¥1~4ï¼Œéƒ½æ˜¯åŸå­æ€§æ“ä½œå—ï¼Ÿï¼ˆå³æ˜¯å¦æ¯æ¡è¯­å¥åŒ…å«çš„æ“ä½œè¦ä¹ˆéƒ½å®Œæˆ/è¦ä¹ˆéƒ½ä¸å®Œæˆï¼‰ 1234x = 10; // è¯­å¥1y = x; // è¯­å¥2x++; // è¯­å¥3x = x + 1; // è¯­å¥4 å…¶å®ï¼Œé™¤äº†ç¬¬ä¸€æ¡è¯­å¥ï¼Œå…¶ä½™éƒ½ä¸æ˜¯åŸå­æ€§æ“ä½œã€‚ x = 10ï¼šçº¿ç¨‹æ‰§è¡Œè¯¥è¯­å¥å°†10å†™å…¥å†…å­˜ï¼› y = xï¼šè¯»å–xå€¼ --&gt; ç„¶åå°†10å†™å…¥å†…å­˜ï¼Œè¿›è¡Œäº†ä¸¤æ¬¡æ“ä½œï¼› x++ ï¼šè¯»å–xå€¼ --&gt; è¿›è¡Œ+1æ“ä½œ --&gt; å†™å…¥æ–°å€¼ï¼Œè¿›è¡Œäº†ä¸‰æ¬¡æ“ä½œï¼› x = x + 1ï¼šåŒx++ï¼Œä¸‰æ¬¡æ“ä½œã€‚ æ‰€ä»¥ï¼Œåªæœ‰x=10è¿™ç§ç®€å•èµ‹å€¼æ“ä½œæ˜¯åŸå­æ€§è¯­å¥ã€‚åœ¨ javaä¸­æä¾›äº† synchronized å…³é”®å­— å’ŒLock æ¥å£æ¥å®ç°ã€‚ å¯è§æ€§ å¯¹äºå¯è§æ€§ï¼ŒJava æä¾›äº†volatile å…³é”®å­—æ¥ä¿è¯å¯è§æ€§ï¼Œå½“ç„¶synchronized å…³é”®å­— å’ŒLock æ¥å£ä¹Ÿå¯ä»¥ä¿è¯ã€‚ å¯è§æ€§ï¼Œå³æŒ‡ä¸€ä¸ªå…±äº«å˜é‡è¢«volatile ä¿®é¥°æ—¶ï¼Œå®ƒä¼šä¿è¯ä¿®æ”¹çš„å€¼ä¼šç«‹å³è¢«æ›´æ–°åˆ°ä¸»å­˜ã€‚å½“æœ‰å…¶ä»–çº¿ç¨‹éœ€è¦è¯»å–æ—¶ï¼Œå®ƒä¼šå»å†…å­˜ä¸­è¯»å–æ–°å€¼ã€‚ æœ‰åºæ€§ åœ¨Javaå†…å­˜æ¨¡å‹ä¸­ï¼Œå…è®¸ç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¯¹æŒ‡ä»¤è¿›è¡Œé‡æ’åºã€‚ä½†æ˜¯é‡æ’åºè¿‡ç¨‹ä¸ä¼šå½±å“åˆ° å•çº¿ç¨‹ ç¨‹åºçš„æ‰§è¡Œï¼Œå´ä¼šå½±å“åˆ° å¤šçº¿ç¨‹ å¹¶å‘æ‰§è¡Œçš„æ­£ç¡®æ€§ã€‚ åœ¨java ä¸­ï¼Œä¹Ÿæ˜¯é€šè¿‡ volatileå…³é”®å­—æ¥ä¿è¯ä¸€å®šçš„â€œæœ‰åºæ€§&quot;ã€‚ 12345678910//çº¿ç¨‹1:context = loadContext(); //è¯­å¥1 contextåˆå§‹åŒ–æ“ä½œinited = true; //è¯­å¥2 //çº¿ç¨‹2:while(!inited )&#123; sleep()&#125;System.out.println(context); ç”±äºæŒ‡ä»¤é‡æ–°æ’åºï¼Œå¯èƒ½å¯¼è‡´è¯­å¥2å…ˆäºè¯­å¥1æ‰§è¡Œã€‚å³ç›¸å½“äºinited = tureè¢«æ‰§è¡Œ ï¼Œ context = loadContext() æœªè¢«æ‰§è¡Œã€‚ç„¶åçº¿ç¨‹2 é”™è¯¯åˆ¤è¯»å·²ç»åˆå§‹åŒ–å®Œæ¯• ï¼Œæ‰§è¡ŒSystem.out.println(context); æ‰“å°å‡ºcontext ã€‚ é€šè¿‡åŠ ä¸Švolatile å…³é”®å­—å¯¹ inited å˜é‡è¿›è¡Œä¿®é¥°ï¼Œå¯ä»¥é¿å…è¿™ç§æƒ…å†µã€‚ å› ä¸ºï¼Œç¨‹åºæ‰§è¡Œåˆ°volatileä¿®é¥°å˜é‡è¯»/å†™æ“ä½œæ—¶ï¼Œä¿è¯åœ¨å…¶å‰é¢çš„æ“ä½œè‚¯å®šå·²ç»å®Œæˆï¼Œåé¢æ“ä½œæœªæ‰§è¡Œã€‚ 1volatile inited = true; 3.volatile å…³é”®å­— volatile å…³é”®å­—ä¸»è¦æœ‰ä¸¤ä¸ªä½œç”¨ï¼šä½¿è¢«ä¿®é¥°å˜é‡å…·æœ‰å¯è§æ€§ &amp; ç¦æ­¢æŒ‡ä»¤é‡æ’ä¿è¯å¯è§æ€§ã€‚ ä¿è¯å¯è§æ€§ï¼Œè§å‰ã€‚è¿™é‡Œç»“åˆå®ä¾‹ä¿è¯è¢«ä¿®é¥°å˜é‡å…·æœ‰å¯è§æ€§ã€‚ è®¾è®¡ä¸€ä¸ªçº¿ç¨‹1ä¸æ–­å­¦ç‹—å«ï¼Œä¸€ä¸ªçº¿ç¨‹2è¿‡1ç§’ç»“æŸè¿™ä»¤äººçª’æ¯çš„æ“ä½œã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940// çº¿ç¨‹ç±»ï¼Œæœ‰ä¸€ä¸ªå­¦ç‹—å«æ“ä½œimport å¤šçº¿ç¨‹.test_Thread;public class test_Thread extends Thread&#123; public volatile boolean flag = true; @Override public void run() &#123; while (flag) System.out.println(&quot;æˆ‘åœ¨å­¦ç‹—å«ï¼šæ±ªæ±ªæ±ª~&quot;); &#125;&#125;// ä¸»å‡½æ•°ä¸­public class test&#123; public static void main(String[] args) throws InterruptedException &#123; test_Thread t1 = new test_Thread(); Thread t2 = new Thread()&#123; // åŒ¿åç±»æ–¹å¼ç”Ÿæˆä¸€ä¸ªçº¿ç¨‹1såç»“æŸt1çº¿ç¨‹ @Override public void run() &#123; try &#123; Thread.sleep(1000); &#125; catch (InterruptedException e) &#123; e.printStackTrace();&#125; t1.flag =false; // æŠŠflagè®¾ç½®ä¸ºflaseï¼Œç”±äºå¯è§æ€§ï¼Œå°†ç»“æŸçº¿ç¨‹t1ä¸­whileå¾ªç¯ &#125; &#125;; t1.start(); t2.start(); &#125;&#125; å®é™…è¾“å‡ºï¼šè¿‡äº†å¤§æ¦‚1sï¼Œçº¿ç¨‹1åœæ­¢äº†å­¦ç‹—å«ã€‚ 4.synchronizedå…³é”®å­— volatile å…³é”®å­—å¯ä»¥ä¿è¯å¯è§æ€§ï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯åŸå­æ€§ï¼Œä¼šå¯¼è‡´å¤šçº¿ç¨‹å‡ºç°è„æ•°æ®ç­‰é—®é¢˜ã€‚ä¾‹å¦‚ä¸‹é¢ä¾‹å­ï¼š 1. ä¸€ä¸ªDEMO âš ï¸ java å‡½æ•°ä¸èƒ½æ”¹å˜intç±»å‹å®å‚ï¼Œä¹Ÿä¸èƒ½åŠ ä¸Šref å…³é”®å­—æ”¹å˜ï¼æ‰€ä»¥å‡ºæ­¤ä¸‹ç­–ï¼šæŠŠæ•°ç»„å½“åšå‚æ•°ä¼ é€’ï¼Œç»„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æˆ‘ä»¬æƒ³é€šè¿‡å‡½æ•°æ”¹å˜çš„å€¼ã€‚æ•°ç»„æ˜¯å¼•ç”¨ç±»å‹ï¼Œå¯ä»¥æ”¹å˜é‡Œé¢çš„å€¼ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738// çº¿ç¨‹ç±»IncreaseThreadpublic class IncreaseThread extends Thread&#123; private int[] num; public IncreaseThread(int[] num) &#123; this.num = num; &#125; // å‡½æ•°ä½¿å¾—numå€¼è¢«ä¿®æ”¹ @Override public void run() &#123; num[0]++; &#125;&#125;// ä¸»å‡½æ•°ä¸­import å¤šçº¿ç¨‹.IncreaseThread;public class test&#123; public static void main(String[] args) throws InterruptedException &#123; int[] num = new int[]&#123;0&#125;; Thread addThreads[] = new Thread[100000]; for (int i = 0 ; i &lt; 100000 ; i++) &#123; IncreaseThread ih = new IncreaseThread(num); ih.start(); addThreads[i] = ih; &#125; // æ‰€æœ‰å¢åŠ å­çº¿ç¨‹éƒ½åŠ å…¥ä¸»çº¿ç¨‹ä¸­ï¼Œä¿è¯å­çº¿ç¨‹éƒ½ã€å…ˆã€‘æ‰§è¡Œå®Œ // *å¦‚æœçº¿ç¨‹å·²ç»æ‰§è¡Œå®Œï¼Œä¸ä¼šåœ¨æ‰§è¡Œå§ï¼Ÿæ˜¯ // *å¦‚æœæ²¡æœ‰è¿™è¡Œä»£ç ï¼Œå­çº¿ç¨‹ä¹Ÿä¼šåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œå®Œç»§ç»­æ‰§è¡Œ for (Thread t : addThreads) t.join(); System.out.println(num[0]); // è¾“å‡ºæœ‰æ—¶å€™æ˜¯ï¼š999995 / 99996 .. &#125;&#125; 2. åˆ†æç»“æœ æˆ‘ä»¬çœ‹åˆ°è¾“å‡ºç»“æœå¹¶éä¸º100000ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ å› ä¸º num[0]++; å¹¶éæ˜¯åŸå­æ€§è¯­å¥ï¼Œå®ƒç”±ä¸‰ä¸ªæ“ä½œï¼šå–num[0]å€¼ --&gt; +1 æ“ä½œ --&gt; å†™å…¥ num[0] ä¸‰ä¸ªæ“ä½œç»„æˆã€‚ åœ¨å¤šçº¿ç¨‹è¿™å°†å¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼Œä¾‹å¦‚æ°å¥½æŸæ—¶åˆ» num[0] = 100ï¼Œå­˜åœ¨çº¿ç¨‹Aã€Bï¼š çº¿ç¨‹Aï¼Œå–å‡º*num[0]*å€¼ = 100ï¼Œå‡†å¤‡è¿›è¡Œ+1æ“ä½œ çº¿ç¨‹Bï¼Œæ°å¥½ä¹Ÿå–å‡º*num[0]*å€¼ = 100 çº¿ç¨‹Aï¼Œæ‰§è¡Œnum[0]++ æ“ä½œï¼Œnum[0] = 101 çº¿ç¨‹Bï¼Œä¹Ÿæ‰§è¡Œ num[0]++ æ“ä½œï¼Œæ‰€ä»¥ num[0] = 101æ²¡æœ‰è¢«æ”¹å˜ æ‰€ä»¥çº¿ç¨‹Aã€Bå†™å…¥å€¼éƒ½æ˜¯101ï¼Œæ²¡æœ‰æ­£ç¡®é¡ºåºæ‰§è¡Œ++æ“ä½œã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ¯æ¬¡è¿è¡Œç»“æœéƒ½æ˜¯ &lt;100000ã€‚ 3. synchronized åŒæ­¥é” æˆ‘ä»¬å¯ä»¥ç”¨synchronized å…³é”®å­—ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹è·å–é”ï¼Œç„¶åæ‰§è¡ŒåŒæ­¥ä»£ç ã€‚ ã€é¢è¯•ã€‘synchronizedåªèƒ½ä¿®é¥°ï¼šç±»ã€æ–¹æ³•æˆ–ä»£ç å—ï¼Œä¸èƒ½ä¿®é¥°å˜é‡ã€‚ åœ¨ IncreaseThread ç±»ä¸­ç»™ run() å‡½æ•°åŠ ä¸ŠåŒæ­¥é”ï¼š 12345@Overridepublic synchronized void run()&#123; num[0]++;&#125; ä¿è¯äº† num[0]++ æ“ä½œåŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ‰§è¡Œã€‚ç»è¿‡å¤šæ¬¡æµ‹è¯•è¾“å‡ºç»“æœ == 100000ã€‚ âš ï¸ ç›´æ¥ç»™ run() åŠ é”ä¹Ÿè®¸å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½åšæ³•ï¼Œè¿™ä¼šä½¿å¾—é‡Œé¢æ‰€æœ‰éœ€è¦å¹¶è¡Œæ“ä½œéƒ½åŠ é”ã€‚å› ä¸ºè¿™é‡Œåªæœ‰ num[0]++ è¿™ä¸€æ¡è¯­å¥æ•…è¿™æ ·å†™ã€‚æ›´å¥½çš„åšæ³•æ˜¯ï¼Œå•ç‹¬è®¾è®¡ä¸€ä¸ªå‡½æ•°åŒ…å«++æ“ä½œï¼Œç„¶åç»™è¿™ä¸ªå‡½æ•°åŠ é”ï¼Œåœ¨run()ä¸­è°ƒç”¨ã€‚ 4. åŒ¿åç±»ä½¿ç”¨åŒæ­¥é” åŒ¿åç±»ä¸‹å°±æ²¡æ³•ç”¨synchronizedå…³é”®å­—é™å®šä¸€ä¸ªå‡½æ•°ï¼Œç„¶årun() æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼ˆå½“ç„¶ä½ å¯ä»¥é™å®š run() â€¦ï¼‰ æˆ‘ä»¬å¯ä»¥é¦–å…ˆå®šä¹‰ä¸€ä¸ªobject å¸¸é‡ï¼š 1final Object someObject = new Object(); ç„¶ååœ¨åŒ¿åç±»ä¸­ï¼Œsynchronized (someObject)&#123; // åŒ…å«è¦åŸå­æ€§æ‰§è¡Œçš„è¯­å¥ &#125;ï¼Œä¸‹é¢æ˜¯ç¤ºä¾‹ã€‚ æš‚æ—¶ä¸æ˜ç™½synchronized (someObject) è®¾ç½®ä¸åŒå‚æ•°æœ‰ä½•ä½œç”¨ï¼Ÿ 123456789101112131415161718192021222324252627282930public class test&#123; public static void main(String[] args) throws InterruptedException &#123; int[] num = new int[]&#123;0&#125;; Thread addThreads[] = new Thread[100000]; final Object someObject = new Object(); for (int i = 0 ; i &lt; 100000 ; i++) &#123; Thread ih = new Thread() &#123; @Override public void run() // ä¸æ¨èï¼šsynchronizedé™å®šrun() &#123; // synchronizedä½“&#123;&#125;ä»£ç è¢«ç‹¬å  synchronized (someObject) &#123; num[0]++; &#125; &#125; &#125;; ih.start(); addThreads[i] = ih; &#125; // æ‰€æœ‰å¢åŠ å­çº¿ç¨‹éƒ½åŠ å…¥ä¸»çº¿ç¨‹ä¸­ï¼Œä¿è¯å­çº¿ç¨‹éƒ½æ‰§è¡Œå®Œ for (Thread t : addThreads) t.join(); System.out.println(num[0]); // å¤šæ¬¡æµ‹è¯•è¾“å‡ºæ˜¯ï¼š100000 &#125;&#125; 5. synchronized åŒæ­¥æ–¹æ³• åŒæ­¥å¯¹è±¡æ–¹æ³• ç»™ä¸Šè¿°å–ç¥¨ä»£ç åŠ ä¸ªelseè¯­å¥ï¼šå¶æ•°æ‰§è¡Œifï¼Œå¥‡æ•°æ‰§è¡Œelseã€‚esleè¯­å¥å­˜åœ¨ä¸€ä¸ªæ–¹æ³•ï¼Œç»™å®ƒåŠ ä¸Šé”ã€‚ ä½†æ˜¯synchronized å…³é”®å­—ç›´æ¥åŠ åˆ°æ–¹æ³•ä¸Šä¼šå‡ºé—®é¢˜ï¼š åŒæ­¥å¯¹è±¡æ–¹æ³•çš„é»˜è®¤é”æ˜¯this ï¼ˆé»˜è®¤ä¸”ä¸èƒ½æŒ‡è®¤ï¼‰ï¼Œè€Œå‰è¿°ifè¯­å¥çš„æ˜¯çš„é”æ˜¯obj ï¼Œä¸¤æŠŠé”æ˜¯ä¸ä¸€æ ·çš„ï¼ å› æ­¤è¦æŠŠé”æ”¹ä¸ºthis 1234567891011121314151617181920212223242526272829303132333435363738public class SellTicket implements Runnable &#123; private int tickets = 100; private Object obj = new Object(); private int x = 0; @Override public void run() &#123; while (true) &#123; if (x % 2 == 0) &#123; // synchronized (obj) &#123; // åº”è¯¥æ”¹ä¸ºthis synchronized (this) &#123; if (tickets &gt; 0) &#123; try &#123; Thread.sleep(100); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(Thread.currentThread().getName() + &quot;æ­£åœ¨å‡ºå”®ç¬¬&quot; + tickets + &quot;å¼ ç¥¨&quot;); tickets--; &#125; &#125; else &#123; sellTicket(); &#125; x++; &#125; &#125;// private synchronized void sellTicket() &#123;// if (tickets &gt; 0) &#123;// try &#123;// Thread.sleep(100);// &#125; catch (InterruptedException e) &#123;// e.printStackTrace();// &#125; System.out.println(Thread.currentThread().getName() + &quot;æ­£åœ¨å‡ºå”®ç¬¬&quot; + tickets + &quot;å¼ ç¥¨&quot;);// tickets--;// &#125;// &#125; åŒæ­¥é™æ€æ–¹æ³• åŒæ­¥é™æ€æ–¹æ³•é»˜è®¤é”æ˜¯å½“å‰ç±» ï¼Œå› æ­¤ä¸èƒ½ç”¨å¯¹è±¡æ–¹æ³•çš„é”this å¯ä»¥é‡‡ç”¨åå°„ï¼š&lt;ç±»å&gt;.class è·å–å½“å‰ç±»çš„å­—èŠ‚ç  5.å¸¸è§çº¿ç¨‹å®‰å…¨çš„ç±» å…±åŒç‚¹ ä¸åŒç‚¹ HashMap &amp; Hashtableï¼ˆå®‰å…¨ï¼‰ éƒ½å®ç°äº†Mapæ¥å£ï¼ŒæŒ‰é”®å€¼å¯¹ä¿å­˜æ•°æ®ã€‚ 1.HashMapå¯ä»¥å­˜nullï¼ŒHashtableä¸å¯ä»¥ã€‚2. Hashtableæ˜¯çº¿ç¨‹å®‰å…¨ç±»ï¼Œput()æ–¹æ³•ç”¨synchronized å…³é”®å­—ä¿®é¥°ã€‚ StringBufferï¼ˆå®‰å…¨ï¼‰ &amp;StringBuilder æ“ä½œå­—ç¬¦ä¸²ï¼Œå¯ä»¥è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ç­‰æ“ä½œã€‚ 1.StringBuilder æ˜¯çº¿ç¨‹å®‰å…¨ç±»ï¼Œæ¯”å¦‚ public synchronized StringBuilder append(int i) æ–¹æ³•ï¼Œç”¨äº†synchronizedå…³é”®å­— ArrayList &amp; Vectorï¼ˆå®‰å…¨ï¼‰ éƒ½æ˜¯å¯æ‰©å±•åŠ¨æ€æ•°ç»„ 1.åŒä¸ŠæŸ¥çœ‹æºç å¾—çŸ¥ï¼ŒVector æ˜¯çº¿ç¨‹å®‰å…¨ç±»ã€‚ æŠŠéçº¿ç¨‹å®‰å…¨é›†åˆè½¬ä¸ºçº¿ç¨‹å®‰å…¨ å€ŸåŠ©å·¥å…·ç±» Collections ä¸­é™æ€æ–¹æ³• Collections.synchronizedList() å¯ä»¥è¿›è¡Œéå®‰å…¨é›†åˆåˆ°å®‰å…¨è½¬æ¢ã€‚ æ³¨æ„ï¼šStringBuffer ä¸å±äºé›†åˆèŒƒç•´ï¼Œä¸èƒ½è½¬æ¢ã€‚ 1234567ArrayList&lt;Integer&gt; list1 = new ArrayList&lt;Integer&gt; ();// é”™è¯¯å†™æ³•ï¼šè¿”å›æ˜¯listæ— æ³•è½¬æ¢ä¸º Arraylist//ArrayList&lt;Integer&gt; list2 = Collections.synchronizedList(list1);List&lt;Integer&gt; list2 = Collections.synchronizedList(list1);HashMap&lt;Integer,String&gt; map1 = new HashMap&lt;&gt; ();Map&lt;Integer,String&gt; map2 = Collections.synchronizedMap(map1); 6.Locké” åˆ›å»ºLocké” 123456789101112131415161718192021222324252627mport java.util.concurrent.locks.Lock;import java.util.concurrent.locks.ReentrantLock;public class SellTicket implements Runnable &#123; private int tickets = 100; private Lock lock = new ReentrantLock(); @Override public void run() &#123; while (true) &#123; try &#123; lock.lock(); // åŠ é” if (tickets &gt; 0) &#123; try &#123; Thread.sleep(100); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(Thread.currentThread().getName() + &quot;æ­£åœ¨å‡ºå”®ç¬¬&quot; + tickets + &quot;å¼ ç¥¨&quot;); tickets--; &#125; &#125; finally &#123; lock.unlock(); // Lockè¦æ‰‹åŠ¨é‡Šæ”¾é” &#125; &#125; &#125;&#125; 7.ç”Ÿäº§è€…æ¶ˆè´¹è€… ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…åœ¨åŒä¸€æ—¶é—´æ®µå†…å…±ç”¨åŒä¸€å­˜å‚¨ç©ºé—´ï¼Œç”Ÿäº§è€…å‘ç©ºé—´é‡Œç”Ÿäº§æ•°æ®ï¼Œè€Œæ¶ˆè´¹è€…å–èµ°æ•°æ®ã€‚ å¸¸ç”¨æ–¹æ³• æ¡ˆä¾‹åˆ†æ ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¡ˆä¾‹ä¸­åŒ…å«çš„ç±»ï¼š å¥¶ç®±ç±»(Box)ï¼šå­˜å‚¨ä¸€ä¸ªå…±äº«æˆå‘˜å˜é‡mikeï¼Œè¡¨ç¤ºç¬¬xç“¶å¥¶ï¼Œæä¾›å­˜å‚¨ç‰›å¥¶put()å’Œè·å–ç‰›å¥¶get()çš„æ“ä½œ ç”Ÿäº§è€…ç±»(Producer)ï¼šå®ç°Runnableæ¥å£ï¼Œé‡å†™run()æ–¹æ³•ï¼Œè°ƒç”¨å­˜å‚¨ç‰›å¥¶put()çš„æ“ä½œï¼Œå¾ªç¯æ”¾30ç“¶ æ¶ˆè´¹è€…ç±»(Customer)ï¼šå®ç°Runnableæ¥å£ï¼Œé‡å†™run()æ–¹æ³•ï¼Œè°ƒç”¨è·å–ç‰›å¥¶get()çš„æ“ä½œï¼Œæ­»å¾ªç¯ä¸æ–­è·å– æµ‹è¯•ç±»(BoxDemo)ï¼šé‡Œé¢æœ‰mainæ–¹æ³•ï¼Œmainæ–¹æ³•ä¸­çš„ä»£ç æ­¥éª¤å¦‚ä¸‹: åˆ›å»ºå¥¶ç®±å¯¹è±¡ï¼Œè¿™æ˜¯å…±äº«æ•°æ®åŒºåŸŸ åˆ›å»ºæ¶ˆè´¹è€…åˆ›å»ºç”Ÿäº§è€…å¯¹è±¡ï¼ŒæŠŠå¥¶ç®±å¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•å‚æ•°ä¼ é€’ï¼Œå› ä¸ºåœ¨è¿™ä¸ªç±»ä¸­è¦è°ƒç”¨å­˜å‚¨ç‰›å¥¶çš„æ“ä½œå¯¹è±¡ æŠŠå¥¶ç®±å¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•å‚æ•°ä¼ é€’ï¼Œå› ä¸ºåœ¨è¿™ä¸ªç±»ä¸­è¦è°ƒç”¨è·å–ç‰›å¥¶çš„æ“ä½œ åˆ›å»º2ä¸ªçº¿ç¨‹å¯¹è±¡ï¼Œåˆ†åˆ«æŠŠç”Ÿäº§è€…å¯¹è±¡å’Œæ¶ˆè´¹è€…å¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•å‚æ•°ä¼ é€’ å¯åŠ¨çº¿ç¨‹ ä¸ºä»€ä¹ˆObject.wait(),Object.notify(),Object.notifyAll()å¿…é¡»åœ¨åŒæ­¥å—synchronizedä¸­æ‰§è¡Œå‘¢? âš ï¸ é‡ç‚¹çœ‹ä¸‹é¢Pã€Vé€»è¾‘å’Œwait()ã€notify() é€»è¾‘åŒºåˆ†ã€‚ åœ¨Javaä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨wait()å’Œnofify()æˆ–notifyAll()æ¥å®ç°çº¿ç¨‹é—´é€šä¿¡ã€‚ä¸€ä¸ªçº¿ç¨‹åœ¨æµ‹è¯•æ¡ä»¶ä¸æ»¡è¶³åè¿›å…¥ç­‰å¾…çŠ¶æ€; åœ¨ç»å…¸çš„ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜ä¸­ï¼Œç”Ÿäº§è€…çº¿ç¨‹å› ç¼“å­˜åŒºæ»¡è€Œç­‰å¾…ï¼Œæ¶ˆè´¹è€…çº¿ç¨‹åœ¨æ¶ˆè´¹äº†ç¼“å­˜åŒºçš„ä¸€ä¸ªå…ƒç´ åé€šçŸ¥ç”Ÿäº§è€…çº¿ç¨‹ã€‚ è°ƒç”¨notify()å’ŒnotifyAll()æ–¹æ³•æ¥é€šçŸ¥ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ä¸€ä¸ªæ¡ä»¶å·²ç»æ”¹å˜äº†ã€‚ä¸€æ—¦é€šçŸ¥çº¿ç¨‹é€€å‡ºåŒæ­¥æ–¹æ³•æˆ–åŒæ­¥å—ï¼Œæ‰€æœ‰ç­‰å¾…çš„çº¿ç¨‹ä¼šäº‰æŠ¢å®ƒä»¬ç­‰å¾…å¯¹è±¡ä¸Šçš„å¯¹è±¡é”ã€‚ è·å–é”çš„çº¿ç¨‹ä¼šä»ç­‰å¾…çŠ¶æ€è¿”å›å¹¶ç»§ç»­æ‰§è¡Œã€‚ ä¸‹é¢åªç”¨synchronizedå…³é”®å­—é”ä½putå’Œgetæ“ä½œï¼Œç”±äºæ¶ˆè´¹è€…while(true)ä¸€ç›´æ¶ˆè´¹ä¼šå¯¼è‡´æ§åˆ¶å°æœ€åä¸€ç›´è¾“å‡ºï¼š 123456...ç”¨æˆ·æ‹¿åˆ°ç¬¬30ç“¶å¥¶ç”¨æˆ·æ‹¿åˆ°ç¬¬30ç“¶å¥¶ç”¨æˆ·æ‹¿åˆ°ç¬¬30ç“¶å¥¶ç”¨æˆ·æ‹¿åˆ°ç¬¬30ç“¶å¥¶ç”¨æˆ·æ‹¿åˆ°ç¬¬30ç“¶å¥¶ å¿…é¡»è¦è®¾ç½®è¿›ç¨‹é—´é€šä¿¡ï¼Œåªç”¨ç”Ÿäº§è€…put() äº†ä¸€ç“¶å¥¶ï¼Œæ‰èƒ½å…è®¸æ¶ˆè´¹è€…å–get() ç‰›å¥¶ ã€‚ 12345678910111213141516171819public class BoxDemo &#123; public static void main(String[] args) &#123; //åˆ›å»ºå¥¶ç®±å¯¹è±¡ï¼Œè¿™æ˜¯å…±äº«æ•°æ®åŒºåŸŸ Box b = new Box(); //åˆ›å»ºç”Ÿäº§è€…å¯¹è±¡ï¼ŒæŠŠå¥¶ç®±å¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•å‚æ•°ä¼ é€’ï¼Œå› ä¸ºåœ¨è¿™ä¸ªç±»ä¸­è¦è°ƒç”¨å­˜å‚¨ç‰›å¥¶çš„æ“ä½œ Producer p = new Producer(b); //åˆ›å»ºæ¶ˆè´¹è€…å¯¹è±¡ï¼ŒæŠŠå¥¶ç®±å¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•å‚æ•°ä¼ é€’ï¼Œå› ä¸ºåœ¨è¿™ä¸ªç±»ä¸­è¦è°ƒç”¨è·å–ç‰›å¥¶çš„æ“ä½œ Customer c = new Customer(b); //åˆ›å»º2ä¸ªçº¿ç¨‹å¯¹è±¡ï¼Œåˆ†åˆ«æŠŠç”Ÿäº§è€…å¯¹è±¡å’Œæ¶ˆè´¹è€…å¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•å‚æ•°ä¼ é€’ Thread t1 = new Thread(p); Thread t2 = new Thread(c); //å¯åŠ¨çº¿ç¨‹ t1.start(); t2.start(); &#125; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115public class Box &#123; //å®šä¹‰ä¸€ä¸ªæˆå‘˜å˜é‡ï¼Œè¡¨ç¤ºç¬¬xç“¶å¥¶ private int milk; //å®šä¹‰ä¸€ä¸ªæˆå‘˜å˜é‡ï¼Œè¡¨ç¤ºå¥¶ç®±çš„çŠ¶æ€ private boolean state = false; //æä¾›å­˜å‚¨ç‰›å¥¶å’Œè·å–ç‰›å¥¶çš„æ“ä½œ public synchronized void put(int milk) &#123; //å¦‚æœæœ‰ç‰›å¥¶ï¼Œç­‰å¾…æ¶ˆè´¹ */ if(state) &#123; try &#123; wait(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; //å¦‚æœæ²¡æœ‰ç‰›å¥¶ï¼Œå°±ç”Ÿäº§ç‰›å¥¶ this.milk = milk; System.out.println(&quot;é€å¥¶å·¥å°†ç¬¬&quot; + this.milk + &quot;ç“¶å¥¶æ”¾å…¥å¥¶ç®±&quot;); //ç”Ÿäº§å®Œæ¯•ä¹‹åï¼Œä¿®æ”¹å¥¶ç®±çŠ¶æ€ state = true; //å”¤é†’å…¶ä»–ç­‰å¾…çš„çº¿ç¨‹ notifyAll(); &#125; public synchronized void get() &#123; //å¦‚æœæ²¡æœ‰ç‰›å¥¶ï¼Œç­‰å¾…ç”Ÿäº§ if(!state) &#123; try &#123; wait(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; //å¦‚æœæœ‰ç‰›å¥¶ï¼Œå°±æ¶ˆè´¹ç‰›å¥¶ System.out.println(&quot;ç”¨æˆ·æ‹¿åˆ°ç¬¬&quot; + this.milk + &quot;ç“¶å¥¶&quot;); //æ¶ˆè´¹å®Œæ¯•ä¹‹åï¼Œä¿®æ”¹å¥¶ç®±çŠ¶æ€ state = false; //å”¤é†’å…¶ä»–ç­‰å¾…çš„çº¿ç¨‹ notifyAll(); &#125;&#125;public class Box &#123; //å®šä¹‰ä¸€ä¸ªæˆå‘˜å˜é‡ï¼Œè¡¨ç¤ºç¬¬xç“¶å¥¶ private int milk; //å®šä¹‰ä¸€ä¸ªæˆå‘˜å˜é‡ï¼Œè¡¨ç¤ºå¥¶ç®±çš„çŠ¶æ€ private boolean state = false; //æä¾›å­˜å‚¨ç‰›å¥¶å’Œè·å–ç‰›å¥¶çš„æ“ä½œ public synchronized void put(int milk) &#123; //å¦‚æœæœ‰ç‰›å¥¶ï¼Œç­‰å¾…æ¶ˆè´¹ if(state) &#123; try &#123; wait(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; //å¦‚æœæ²¡æœ‰ç‰›å¥¶ï¼Œå°±ç”Ÿäº§ç‰›å¥¶ this.milk = milk; System.out.println(&quot;é€å¥¶å·¥å°†ç¬¬&quot; + this.milk + &quot;ç“¶å¥¶æ”¾å…¥å¥¶ç®±&quot;); //ç”Ÿäº§å®Œæ¯•ä¹‹åï¼Œä¿®æ”¹å¥¶ç®±çŠ¶æ€ state = true; //å”¤é†’å…¶ä»–ç­‰å¾…çš„çº¿ç¨‹ notifyAll(); &#125; public synchronized void get() &#123; //å¦‚æœæ²¡æœ‰ç‰›å¥¶ï¼Œç­‰å¾…ç”Ÿäº§ if(!state) &#123; try &#123; wait(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; //å¦‚æœæœ‰ç‰›å¥¶ï¼Œå°±æ¶ˆè´¹ç‰›å¥¶ System.out.println(&quot;ç”¨æˆ·æ‹¿åˆ°ç¬¬&quot; + this.milk + &quot;ç“¶å¥¶&quot;); //æ¶ˆè´¹å®Œæ¯•ä¹‹åï¼Œä¿®æ”¹å¥¶ç®±çŠ¶æ€ state = false; //å”¤é†’å…¶ä»–ç­‰å¾…çš„çº¿ç¨‹ notifyAll(); &#125;&#125;public class Producer implements Runnable &#123; private Box b; public Producer(Box b) &#123; this.b = b; &#125; @Override public void run() &#123; for(int i=1; i&lt;=30; i++) &#123; b.put(i); &#125; &#125;&#125; 12.4 çº¿ç¨‹äº¤äº’ ç”Ÿæˆè€…ã€æ¶ˆè´¹è€…é—®é¢˜ï¼šp = synchronized ï¼Œå æœ‰ï¼›v = this.wait é‡Šæ”¾ã€‚ Sleep()æ–¹æ³• Wait()æ–¹æ³• sleep()ä½¿å½“å‰çº¿ç¨‹è¿›å…¥åœæ»çŠ¶æ€ï¼ˆé˜»å¡å½“å‰çº¿ç¨‹ï¼‰ï¼Œè®©å‡ºCUPçš„ä½¿ç”¨ã€ç›®çš„æ˜¯ä¸è®©å½“å‰çº¿ç¨‹ç‹¬è‡ªéœ¸å è¯¥è¿›ç¨‹æ‰€è·çš„CPUèµ„æºï¼Œä»¥ç•™ä¸€å®šæ—¶é—´ç»™å…¶ä»–çº¿ç¨‹æ‰§è¡Œçš„æœºä¼š; wait()æ–¹æ³•æ˜¯Objectç±»é‡Œçš„æ–¹æ³•ï¼›å½“ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œåˆ°wait()æ–¹æ³•æ—¶ï¼Œå®ƒå°±è¿›å…¥åˆ°ä¸€ä¸ªå’Œè¯¥å¯¹è±¡ç›¸å…³çš„ç­‰å¾…æ± ä¸­ï¼ŒåŒæ—¶å¤±å»ï¼ˆé‡Šæ”¾ï¼‰äº†å¯¹è±¡çš„æœºé”ï¼ˆæš‚æ—¶å¤±å»æœºé”ï¼Œwait(long timeout)è¶…æ—¶æ—¶é—´åˆ°åè¿˜éœ€è¦è¿”è¿˜å¯¹è±¡é”ï¼‰ï¼›å…¶ä»–çº¿ç¨‹å¯ä»¥è®¿é—®ï¼› sleep()æ˜¯Threadç±»çš„Static(é™æ€)çš„æ–¹æ³•ï¼›å› æ­¤ä»–ä¸èƒ½æ”¹å˜å¯¹è±¡çš„æœºé”ï¼Œæ‰€ä»¥å½“åœ¨ä¸€ä¸ªSynchronizedå—ä¸­è°ƒç”¨Sleep()æ–¹æ³•æ˜¯ï¼Œçº¿ç¨‹è™½ç„¶ä¼‘çœ äº†ï¼Œä½†æ˜¯å¯¹è±¡çš„æœºé”å¹¶æœ¨æœ‰è¢«é‡Šæ”¾ï¼Œå…¶ä»–çº¿ç¨‹æ— æ³•è®¿é—®è¿™ä¸ªå¯¹è±¡ï¼ˆå³ä½¿ç¡ç€ä¹ŸæŒæœ‰å¯¹è±¡é” wait()ä½¿ç”¨notifyæˆ–è€…notifyAlllæˆ–è€…æŒ‡å®šç¡çœ æ—¶é—´æ¥å”¤é†’å½“å‰ç­‰å¾…æ± ä¸­çš„çº¿ç¨‹ã€‚ åœ¨sleep()ä¼‘çœ æ—¶é—´æœŸæ»¡åï¼Œè¯¥çº¿ç¨‹ä¸ä¸€å®šä¼šç«‹å³æ‰§è¡Œï¼Œè¿™æ˜¯å› ä¸ºå…¶å®ƒçº¿ç¨‹å¯èƒ½æ­£åœ¨è¿è¡Œè€Œä¸”æ²¡æœ‰è¢«è°ƒåº¦ä¸ºæ”¾å¼ƒæ‰§è¡Œï¼Œé™¤éæ­¤çº¿ç¨‹å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚ wiat()å¿…é¡»æ”¾åœ¨synchronized blockä¸­ï¼Œå¦åˆ™ä¼šåœ¨program runtimeæ—¶æ‰”å‡ºâ€java.lang.IllegalMonitorStateExceptionâ€œå¼‚å¸¸ã€‚ â” è¯•ç€è§£é‡Šä¸‹é¢åˆ†åˆ«ç”¨ sleep(2000) å’Œ wait(2000)çš„è¾“å‡ºç»“æœï¼š 123456789101112131415161718192021222324252627282930313233343536373839public class ThreadTest implements Runnable &#123; int number = 10; public void firstMethod() throws Exception &#123; synchronized (this) &#123; number += 100; // æ‰§è¡Œåˆ°è¿™number=110 System.out.println(number); &#125; &#125; public void secondMethod() throws Exception &#123; // synchronized ä¿è¯åŸå­æ€§ï¼Œä»£ç åªèƒ½è¢«å…¨éƒ¨æ‰§è¡Œæˆ–ä¸æ‰§è¡Œ synchronized (this) &#123; /** * (ä¼‘æ¯2S,é˜»å¡çº¿ç¨‹) * ä»¥éªŒè¯å½“å‰çº¿ç¨‹å¯¹è±¡çš„æœºé”è¢«å ç”¨æ—¶, æ˜¯å¦è¢«å¯ä»¥è®¿é—®å…¶ä»–åŒæ­¥ä»£ç å— */ Thread.sleep(2000); // è¾“å‡º 2100 //this.wait(2000); // è¾“å‡º 110 number *= 200; &#125; &#125; @Override public void run() &#123; try &#123; firstMethod(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; public static void main(String[] args) throws Exception &#123; ThreadTest threadTest = new ThreadTest(); Thread thread = new Thread(threadTest); thread.start(); // æ‰§è¡ŒfirstMethod() threadTest.secondMethod(); &#125;&#125; 12.5 çº¿ç¨‹æ± å¿«é€Ÿå…¥é—¨ åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ±  ä¸‹é¢è¡¨ç¤ºåˆ›å»ºä¸€ä¸ªï¼šæ‹¥æœ‰çº¿ç¨‹ä¸ªæ•°ä¸º10ã€æœ€å¤šå¯å¢é•¿è‡³15ï¼Œå…è®¸çº¿ç¨‹ç©ºé—²60såè¢«å›æ”¶ï¼Œçº¿ç¨‹æ± ã€‚ 123456import java.util.concurrent.LinkedBlockingQueue;import java.util.concurrent.ThreadPoolExecutor;import java.util.concurrent.TimeUnit;// ä¸»å‡½æ•°ä¸­ThreadPoolExecutor threadPool= new ThreadPoolExecutor(10, 15, 60, TimeUnit.SECONDS, new LinkedBlockingQueue&lt;Runnable&gt;()); ThreadPoolExecutor ç±»ç”¨äºå®ç°çº¿ç¨‹æ± ï¼Œå…¶åˆ›å»ºå¤šçº¿ç¨‹çš„æ„é€ å‡½æ•°åŸå‹å¦‚ä¸‹ï¼š ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue workQueue, RejectedExecutionHandler handler) corePoolSize ï¼šè¡¨ç¤ºçº¿ç¨‹æ± æœ€ä½æ‹¥æœ‰çš„çº¿ç¨‹æ•° maximumPoolSize ï¼šè¡¨ç¤ºçº¿ç¨‹æ± æœ€å¤šå¯å¢é•¿åˆ°çº¿ç¨‹æ•° keepAliveTime &amp; unitï¼šè¡¨ç¤ºçº¿ç¨‹ç©ºé—²åçš„å­˜æ´»æ—¶é—´ï¼Œè¶…è¿‡åä¼šè¢«å›æ”¶ï¼Œæœ€ç»ˆä¿æŒæ± ä¸­10ä¸ªçº¿ç¨‹ workQueue ï¼šå­˜æ”¾ä»»åŠ¡çš„é˜»å¡é˜Ÿåˆ— handlerï¼šå½“é˜Ÿåˆ—å’Œæœ€å¤§çº¿ç¨‹æ± éƒ½æ»¡äº†ä¹‹åçš„é¥±å’Œç­–ç•¥ æ‰§è¡Œä»»åŠ¡ é€šè¿‡ ThreadPoolExecutor å¯¹è±¡ execute() æ–¹æ³•æ‰§è¡Œä»»åŠ¡ï¼Œæ¥å—çš„å‚æ•°ä¸º Runnable ç±»å‹ã€‚ public void execute( Runnable command ) 1234567threadPool.execute(new Runnable()&#123; @Override public void run() &#123; System.out.println(&quot;æ‰§è¡Œä»»åŠ¡&quot;); &#125;&#125;; DEMO : éå†æœå¯»æ–‡ä»¶å¤¹ ğŸ‰ å¯¹æŒ‡å®šæ–‡ä»¶å¤¹è¿›è¡Œéå†æœå¯»ï¼Œå¦‚æœæ‰¾åˆ°æ–‡ä»¶å«æœ‰â€œé»„æ—ºè¾‰â€å­—æ ·ï¼Œå°±åˆ†é…ä¸€ä¸ªçº¿ç¨‹å¯¹è¯¥æ–‡ä»¶è¿›è¡Œå¤„ç†ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738import java.util.concurrent.LinkedBlockingQueue;import java.util.concurrent.ThreadPoolExecutor;import java.util.concurrent.TimeUnit;import java.io.File;public class test&#123; public static void main(String[] args) throws InterruptedException &#123; // 1.åˆ›å»ºçº¿ç¨‹æ±  ThreadPoolExecutor threadPool= new ThreadPoolExecutor(10, 15, 60, TimeUnit.SECONDS, new LinkedBlockingQueue&lt;Runnable&gt;()); // 2.æœå¯»æŒ‡å®šæ–‡ä»¶ t.searchFile(&quot;D:/hwh/uploadToGit/æœ¬ç§‘&quot;,threadPool); &#125; // å‡½æ•°ï¼šæœå¯»æŒ‡å®šæ–‡ä»¶ public void searchFile(String root, ThreadPoolExecutor threadPool) &#123; File f = new File(root); // æ¯ä¸ªæ–‡ä»¶/æ–‡ä»¶å¤¹éƒ½ä¸€å®šä¼šè¢«éå†åˆ°ï¼šæ‰€ä»¥å¯ä»¥åœ¨è¿™é‡Œåˆ¤æ–­æ˜¯å¦æ˜¯æ–‡ä»¶ if (f.getName().contains(&quot;é»„æ—ºè¾‰&quot;)) // æ‰¾åˆ°æ»¡è¶³æ¡ä»¶æ–‡ä»¶å¼€å§‹åˆ†é…ä»»åŠ¡ &#123; // è®¾å®šä»»åŠ¡ Runnable task = new Runnable() &#123; @Override public void run() &#123; System.out.println(&quot;å­çº¿ç¨‹åœ¨å¯¹æŒ‡å®šæ–‡ä»¶æ‰§è¡Œä»»åŠ¡ï¼š&quot; + f.getName()); &#125; &#125;; // åˆ†é…çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ threadPool.execute(task); return; &#125; //é€’å½’æœå¯» for(File file : f.listFiles()) searchFile(file.getAbsolutePath(),threadPool); &#125;&#125; ç¬¬åä¸‰ç« ï¼šç½‘ç»œç¼–ç¨‹ 13.1 åŸºæœ¬çŸ¥è¯† æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯é€šä¿¡ ä¸Šå›¾è¡¨ç¤ºï¼ŒæœåŠ¡å™¨IPï¼š192.168.1.100 ï¼Œå®¢æˆ·ç«¯IPï¼š192.168.1.189ï¼Œå®ƒä»¬åˆ†åˆ«é€šè¿‡å„è‡ªçš„ç«¯å£ 8080ã€1087 å’Œå¯¹æ–¹è¿›è¡Œé€šä¿¡ã€‚ å¦‚ä½•è·å–æœ¬æœºIPåœ°å€ï¼Ÿ é€šè¿‡javaè‡ªå¸¦API è·å–æœ¬æœºIPå¯ä»¥é€šè¿‡javaè‡ªå¸¦çš„APIï¼Œå¼•ç”¨ç±»ï¼šjava.net.InetAddress 1234567891011121314import java.net.InetAddress;import java.net.UnknownHostException;try&#123; // è°ƒç”¨getLocalHost()ï¼Œå¿…é¡»å¤„ç†å¼‚å¸¸UnknownHostException InetAddress host = InetAddress.getLocalHost(); String ip = host.getHostAddress(); System.out.println(&quot;æœ¬æœºIPåœ°å€æ˜¯ï¼š&quot; + ip);&#125;catch (UnknownHostException e)&#123; System.out.println(e.getMessage());&#125; cmdå‘½ä»¤ï¼šipconfig 1C:\\Users\\86151&gt; ipconfig ping å‘½ä»¤ é€šè¿‡javaè‡ªå¸¦API ç›´æ¥å¤åˆ¶ç²˜è´´ï¼Œéœ€è¦æ—¶å†çœ‹ã€‚ 123456789101112131415161718192021222324import java.io.BufferedReader;import java.io.IOException;import java.io.InputStreamReader; public class TestSocket &#123; public static void main(String[] args) throws IOException &#123; Process p = Runtime.getRuntime().exec(&quot;ping &quot; + &quot;192.168.2.106&quot;); // ç¼“å­˜æµï¼Œå»ºç«‹åœ¨å­—ç¬¦æµä¹‹ä¸Š // InputStreamReaderç±»ç»§æ‰¿å­—ç¬¦æµç±»Readerï¼Œå¯ä½¿å¾—å­—èŠ‚æµå‘å­—ç¬¦æµè½¬æ¢ // æ³¨æ„åŠ ä¸Š &quot;gbk&quot;ï¼Œå¦åˆ™æ‰§è¡Œçš„å‘½ä»¤ä¹±ç  Reader reader = new InputStreamReader(p.getInputStream(),&quot;gbk&quot;); BufferedReader br = new BufferedReader(reader); String line = null; StringBuilder sb = new StringBuilder(); while ((line = br.readLine()) != null) &#123; if (line.length() != 0) sb.append(line + &quot;\\r\\n&quot;); &#125; System.out.println(&quot;æœ¬æ¬¡æŒ‡ä»¤è¿”å›çš„æ¶ˆæ¯æ˜¯ï¼š&quot;); System.out.println(sb.toString()); &#125;&#125; é€šè¿‡cmdå‘½ä»¤ping pingæŸä¸ªIPåœ°å€ï¼Œè¿™ä¸ªIPæ˜¯ç½‘å…³åœ°å€ 1C:\\Users\\86151&gt; ping 192.168.0.1 pingä¸€ä¸ªä¸»æœºåï¼Œå¦‚æœèƒ½è¿”å›è¯´æ˜ï¼šDNSè§£ææ­£ç¡®ï¼Œä¸”æœ¬æœºæˆ–æœ¬ç½‘å’Œå¤–éƒ¨è¿æ¥æ­£ç¡® 1C:\\Users\\86151&gt; ping baidu.com 13.2 å®æˆ˜æµ‹è¯•ç½‘ç»œè¿é€š è§‚å¯Ÿæœ¬åœ°ç½‘ç»œè®¾ç½®æ˜¯å¦æ­£ç¡®ï¼š ipconfig /all æ£€æµ‹æœ¬åœ°TCP/IP åè®®ï¼šPing 127.0.0.1 IPåœ°å€ç”±ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼Œå³ç½‘ç»œåœ°å€å’Œä¸»æœºåœ°å€ ï¼Œï¼ˆIPV4ï¼‰é•¿4ä¸ªå­—èŠ‚ï¼Œ32ä½ã€‚æ ¹æ®ç½‘ç»œåœ°å€å çš„å­—èŠ‚æ•°ä¸åŒï¼Œåˆ†ä¸ºAã€Bã€Cä¸‰ç±»åŠç‰¹æ®Šåœ°å€Dã€Eã€‚å…¨0å’Œå…¨1çš„éƒ½ä¿ç•™ä¸ç”¨ã€‚ Aç±»ï¼šç¬¬1ä¸ªå­—èŠ‚ä¸ºç½‘ç»œå·ï¼Œå3ä¸ªå­—èŠ‚ä¸ºä¸»æœºå·ã€‚æœ€å‰é¢ä¸ºâ€œ0â€ï¼Œæ‰€ä»¥åœ°å€ç½‘ç»œå·å–å€¼äº1~126ä¹‹é—´ ã€‚è€Œä¿ç•™çš„127ï¼ˆ01111111ï¼‰+ 0.0.1 å°±æ˜¯ æœ¬åœ°å›é€åœ°å€ ï¼Œä¸€èˆ¬ç”¨äºæµ‹è¯•ã€‚ æœ¬æœºå›é€åœ°å€ï¼ˆLoopback Addressï¼‰ï¼Œå³ä¸»æœºIPå †æ ˆå†…éƒ¨çš„IPåœ°å€ï¼Œä¸»è¦ç”¨äºï¼ˆ1ï¼‰ç½‘ç»œè½¯ä»¶æµ‹è¯• ä»¥åŠï¼ˆ2ï¼‰æœ¬åœ°æœºè¿›ç¨‹é—´é€šä¿¡ï¼Œæ— è®ºä»€ä¹ˆç¨‹åºï¼Œä¸€æ—¦ä½¿ç”¨å›é€åœ°å€å‘é€æ•°æ®ï¼Œåè®®è½¯ä»¶ç«‹å³è¿”å›ï¼Œä¸è¿›è¡Œä»»ä½•ç½‘ç»œä¼ è¾“ã€‚ æœ‰è¿”å›æ¥æ”¶åˆ™é…ç½®æ­£ç¡®ã€‚ æ£€æŸ¥æœ¬åœ°IPåœ°å€æ˜¯å¦æœ‰è¯¯ï¼šping æœ¬æœºIP å‚è€ƒï¼šå¥½æ–‡ï¼špingåˆ°åº•åšäº†ä»€ä¹ˆï¼Ÿ æœ‰è¿”å›æ¥æ”¶åˆ™é…ç½®æ­£ç¡®ï¼Œå¦åˆ™è¦é‡æ–°é…ç½®ä¸‹ã€‚ æ£€æŸ¥ç¡¬ä»¶é—®é¢˜ &amp; æœ¬æœºä¸æœ¬åœ°ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸ï¼ˆéå±€åŸŸç½‘å¯å¿½ç•¥ï¼‰ï¼šping æœ¬æœºç½‘å…³IP ç½‘å…³å’Œè·¯ç”±å™¨åŒºåˆ«ï¼Ÿ ç½‘å…³è®¾å¤‡ï¼šä¸€ä¸ªå¤§æ¦‚å¿µï¼Œä¸å…·ä½“ç‰¹æŒ‡ä¸€ç±»äº§å“ï¼Œåªè¦ è¿æ¥ä¸¤ä¸ªä¸åŒçš„ç½‘ç»œçš„è®¾å¤‡éƒ½å¯ä»¥å«ç½‘å…³ï¼› è·¯ç”±å™¨ï¼šä¸€èˆ¬ç‰¹æŒ‡èƒ½å¤Ÿ å®ç°è·¯ç”±å¯»æ‰¾å’Œè½¬å‘çš„ ç‰¹å®šç±»äº§å“ï¼Œè·¯ç”±å™¨å¾ˆæ˜¾ç„¶èƒ½å¤Ÿå®ç°ç½‘å…³çš„åŠŸèƒ½ã€‚ é»˜è®¤ç½‘å…³ï¼šä¸æ˜¯ä¸€ä¸ªäº§å“è€Œæ˜¯ä¸€ä¸ªç½‘ç»œå±‚çš„æ¦‚å¿µï¼ŒPCæœ¬èº«ä¸å…·å¤‡è·¯ç”±å¯»å€èƒ½åŠ›ï¼Œæ‰€ä»¥PCè¦æŠŠæ‰€æœ‰çš„IPåŒ…å‘é€åˆ°ä¸€ä¸ª é»˜è®¤çš„ä¸­è½¬åœ°å€ ä¸Šé¢è¿›è¡Œè½¬å‘ï¼Œä¹Ÿå°±æ˜¯é»˜è®¤ç½‘å…³ã€‚ å¯ä»¥åœ¨è·¯ç”±å™¨ã€ä¸‰å±‚äº¤æ¢æœºä¸Šï¼Œå¯ä»¥åœ¨é˜²ç«å¢™ä¸Šï¼Œå¯ä»¥åœ¨æœåŠ¡å™¨ä¸Šï¼Œæ‰€ä»¥å’Œç‰©ç†çš„è®¾å¤‡æ— å…³ã€‚ æ£€æŸ¥æœ¬ç½‘æˆ–æœ¬æœºä¸å¤–éƒ¨è¿æ¥æ˜¯å¦æ­£å¸¸ï¼š Ping è¿œç¨‹IPåœ°å€ æœ‰äº› IPæ˜¯pingä¸é€šçš„ï¼Œå› ä¸ºæœ‰é˜²ç«å¢™æˆ–è€…å…¶å®ƒè®¾ç½®ï¼Œè¿™é‡Œç™¾åº¦æ‰¾äº†ä¸ªèƒ½pingé€šçš„ã€‚ åœ¨5. åŸºç¡€ä¸Šæ£€æŸ¥DNSè§£æï¼šping åŸŸå å¦‚æœå¯ä»¥pingé€šï¼Œåˆ™è¯´æ˜åŸŸåè§£æå¯æ­£å¸¸è¿è¡Œã€‚ 13.3 ç½‘ç»œç¼–ç¨‹é€šä¿¡å®æˆ˜ â€‹ åœ¨13.1ä¸­ä»‹ç»äº†æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯é€šè¿‡å„è‡ªç«¯å£è¿›è¡Œç®€å•é€šä¿¡ã€‚æœ¬èŠ‚é€šè¿‡å®æˆ˜ç¼–ç¨‹ï¼Œå®ç°æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ç®€å•äº¤æµå¯¹è¯ã€‚ å¦‚ä½•ç¼–ç¨‹å®ç°é€šä¿¡ï¼Ÿ â€‹ é€šè¿‡å¥—æ¥å­—ï¼š{ IPåœ°å€ï¼Œç«¯å£å· } ï¼ŒJava æœ‰å°è£…å¥½ç±» ServerSocket &amp; Socket ï¼Œè¿›è€Œé€šè¿‡å¥—æ¥å­—è¾“å…¥ã€è¾“å‡ºæµ å®ç°é€šä¿¡ã€‚ æœåŠ¡ç«¯é€šè¿‡ ServerSocket å¯¹è±¡ ssæ‰“å¼€ç«¯å£ï¼› å®¢æˆ·ç«¯åˆ›å»ºå¥—æ¥å­— Socket å¯¹è±¡ socket è¿æ¥åˆ°æœåŠ¡ç«¯ï¼Œå¹¶é€šè¿‡ å¥—æ¥å­—å»ºç«‹ è¾“å‡ºæµ è¿›è¡Œæ•°æ®ä¼ è¾“ï¼› æœåŠ¡ç«¯é€šè¿‡ ServerSocket å¯¹è±¡ ss.accept() æ–¹æ³•ï¼Œè¿”å› Socket å¯¹è±¡ï¼ˆå®¢æˆ·ç«¯çš„ï¼Ÿï¼‰ï¼Œé€šè¿‡ è¾“å…¥æµ è¯»æ•°æ®ï¼› æœåŠ¡ç«¯è¿›è¡Œå›åº”ï¼Œå¹¶å…³é—­æœåŠ¡ã€‚ ç¼–ç¨‹å®ç° å®¢æˆ·ç«¯ - Client 1234567891011121314151617181920212223242526272829303132333435363738package QQ;import java.io.IOException;import java.net.Socket;import java.io.OutputStream;public class Client&#123; Socket socket; /** * æ„é€ å‡½æ•°ï¼šå¥—æ¥å­—åˆå§‹åŒ–è¿æ¥çš„ä¸»æœºå’Œç«¯å£ * @param host æŒ‡å®šè¿æ¥çš„ä¸»æœº * @param post æŒ‡å®šè¿æ¥çš„ç«¯å£ */ public Client(String host,int post) throws IOException &#123; socket = new Socket(host,post); &#125; /** * å®¢æˆ·ç«¯å‘é€æŒ‡å®šæ¶ˆæ¯ * @param clientMsg è¦å‘é€çš„æ¶ˆæ¯å†…å®¹ */ public void msg(String clientMsg) throws IOException &#123; // 1.å»ºç«‹[å¥—æ¥å­—å­—èŠ‚è¾“å‡ºæµ]å¯¹è±¡å‘ç”Ÿæ¶ˆæ¯ OutputStream os = socket.getOutputStream(); // 2.å®¢æˆ·ç«¯å‘æ¶ˆæ¯ // æ³¨æ„Stringç±»å‹ --&gt; byte[] os.write(clientMsg.getBytes()); // 3.æ³¨æ„ï¼šå®¢æˆ·ç«¯å¥—æ¥å­—å¿…é¡»è¦å…³é—­ï¼Œæ‰å¼€å§‹è¿æ¥æœåŠ¡ç«¯ socket.close(); &#125;&#125; Q1 : ä¸ºä»€ä¹ˆè®¾è®¡æ¯ä¸ªæ–¹æ³• t hrows IOException ï¼Ÿ A1: å› ä¸ºåˆ›å»ºå¥—æ¥å­—å¯¹è±¡socket | è°ƒç”¨å¯¹è±¡æ–¹æ³• ï¼Œéƒ½è¦å¤„ç† IOException å¼‚å¸¸ï¼Œæ¯ä¸ªæ–¹æ³•å†™ try catch å¤ªéº» çƒ¦ï¼Œä¸å¦‚å…ˆæŠ›å‡ºå¼‚å¸¸ï¼Œåœ¨ä¸»å‡½æ•°ä¸­ç»Ÿä¸€å¤„ç†ã€‚ Q2 : ä¸ºä»€ä¹ˆmsg() æ–¹æ³•å‘é€å®Œæ¶ˆæ¯ç«‹é©¬å…³é—­å¥—æ¥å­— socket.close() ï¼Œè€Œä¸æ˜¯ç­‰æœåŠ¡å™¨æ¥æ”¶äº†å†å…³é—­ ï¼Ÿ A1: äº‹å®ä¸Šï¼Œåªæœ‰å…ˆå…³é—­å¥—æ¥å­—socket.close() ï¼Œå®¢æˆ·ç«¯æ‰ä¼šå¼€å§‹è¿æ¥æœåŠ¡ç«¯ï¼ æœåŠ¡ç«¯ - Server âš ï¸ ServerSocket å¯¹è±¡ ss.accept() æ–¹æ³•ï¼Œå¿…é¡»å®¢æˆ·ç«¯å»ºç«‹è¿æ¥ä¹‹åï¼Œå¦åˆ™ä¼šä¸€ç›´é˜»å¡ï¼ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970package QQ;import java.io.IOException;import java.net.ServerSocket;import java.net.Socket;import java.io.InputStream;public class Server&#123; ServerSocket ss; Socket socket; /** * æ‰“å¼€ç«¯å£ï¼Œå»ºç«‹å¥—æ¥å­—å¯¹è±¡ç›‘å¬ç«¯å£ * @param post è¦æ‰“å¼€çš„æœåŠ¡ç«¯ç«¯å£ */ public Server(int post) throws IOException &#123; ss = new ServerSocket(post); &#125; /** * å…³é—­å¥—æ¥å­—è¿æ¥ */ public void close() throws IOException &#123; ss.close(); socket.close(); &#125; /** * æœåŠ¡ç«¯å¯¹å®¢æˆ·å‘æ¥çš„æ¶ˆæ¯è¿›è¡Œå›åº” */ public void response() throws IOException &#123; // 1.æ³¨æ„ï¼šå®¢æˆ·ç«¯å¿…é¡»å·²ç»è¿æ¥ï¼Œå¦åˆ™ä¼šä¸€ç›´é˜»å¡ socket = ss.accept(); // 2.å»ºç«‹[å¥—æ¥å­—å­—èŠ‚è¾“å…¥æµ]ï¼Œè¯»å–å®¢æˆ·ç«¯å‘è¿‡æ¥çš„æ¶ˆæ¯ InputStream is = socket.getInputStream(); byte[] all = is.readAllBytes(); // 3.ç±»å‹è½¬æ¢: å°†byte[] ---&gt; String String clientMsg = new String(all); // 4.å›åº”å®¢æˆ·ç«¯ System.out.println(&quot;æœåŠ¡ç«¯å›å¤-å°ç™½å…”å›é“ï¼š&quot; + reMsg(clientMsg)); &#125; public String reMsg(String clientMsg) &#123; if(clientMsg.contains(&quot;ä½ å¥½&quot;)) &#123; return &quot;ä½ å¥½ï¼æˆ‘æ˜¯å°ç™½å…”ã€‚&quot;; &#125; else if (clientMsg.contains(&quot;æ²™é›•&quot;)) &#123; return &quot;ä½ æ‰æ˜¯æ²™é›•ï¼ä½ å…¨å®¶éƒ½æ˜¯æ²™é›•ï¼&quot;; &#125; else if (clientMsg.contains(&quot;ä½ å«ä»€ä¹ˆ&quot;)) &#123; return &quot;my name is dad&quot;; &#125; else if (clientMsg.contains(&quot;æˆ‘å¥½çƒ¦å‘€~&quot;)) &#123; return &quot;æ”¾ä¸‹å¾—è‡ªåœ¨ã€‚&quot;; &#125; return &quot;é£å¤ªå¤§ï¼Œæ²¡å¬æ¸…ï¼&quot;; &#125;&#125; ä¸»å‡½æ•°ä¸²è” 123456789101112131415161718192021try&#123; // æœåŠ¡ç«¯æ‰“å¼€ç«¯å£ Server server = new Server(8886); // å®¢æˆ·ç«¯è¿æ¥ç«¯å£ Client client = new Client(&quot;127.0.0.1&quot;,8886); Scanner s = new Scanner(System.in); System.out.print(&quot;å®¢æˆ·ç«¯-å¤§ç°ç‹¼è¯´é“ï¼š&quot;); String clientMsg = s.nextLine(); // å®¢æˆ·ç«¯é€šè¿‡å¥—æ¥å­—è¾“å‡ºæµå‘ç”Ÿæ¶ˆæ¯ client.msg(clientMsg); // æœåŠ¡ç«¯é€šè¿‡å¥—æ¥å­—è¾“å…¥æµè¿›è¡Œå›åº” server.response(); server.close();&#125;catch (IOException e)&#123; System.out.println(e.getMessage());&#125; ç¬¬åå››ç« ï¼šJDBC 14.1 JDBC å¿«é€Ÿå…¥é—¨ ä»€ä¹ˆæ˜¯ JDBCï¼Ÿ JDBC å³ Java DataBase Connection ï¼Œæ˜¯JAVA çš„ä¸€ä¸ª API é€šè¿‡ JAVA è®¿é—®æ•°æ®åº“ã€‚ å…¶ä¸€èˆ¬æ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š è¿æ¥æ•°æ®æºï¼Œå¦‚æ•°æ®åº“ è¿›è¡Œå¢åˆ æŸ¥æ”¹æŒ‡ä»¤ å¤„ç†å“åº”å¹¶è¿”å›ç»“æœ ä¸‹è½½ JDBC å®˜ç½‘ä¸‹è½½é©±åŠ¨åŒ… ä¸‹è½½åœ°å€ï¼šDownload Connector/J é€‰æ‹©ï¼šPlatform Independent â€”&gt; mysql-connector-java-8.0.16.zip ï¼Œç„¶åä¸‹è½½ï¼š å‘ï¼šä¸‹é¢è¿˜æœ‰ä¸€ä¸ªä¸‹è½½MySQL Installer ï¼Œæ˜¯ä¸‹è½½ mysql å…¨å®¶æ¡¶ ï¼ è§£å‹ è§£å‹ä¹‹åä¼šåœ¨ä¸‹è½½ç›®å½•å‡ºç°ï¼šmysql-connector-java-8.0.16 æ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰æˆ‘ä»¬è¦çš„ jar åŒ…ï¼š å¼•ç”¨åŒ… åœ¨å·¥ç¨‹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼šlib ï¼Œç„¶åå°† mysql-connector-java-8.0.16.jar åŒ…å¤åˆ¶åˆ°è¯¥ç›®å½•ä¸‹ã€‚ åœ¨IDEAä¸­ï¼Œå³é”®é€‰æ‹©è¯¥jar åŒ… --&gt; Add as Library ï¼Œå³å¯æ·»åŠ æˆåŠŸã€‚ æ›´å¥½çš„æ·»åŠ åŒ…æ–¹æ³•ç‚¹å‡»ï¼šIDEAå¯¼å…¥åŒ…ä¸¤ç§æ–¹æ³• ç®€å• DEMO mysqlDB ç±» åœ¨ mysqlDB ç±»ä¸­ä¸»è¦æœ‰ä¸‰ä¸ªå‡½æ•°ï¼Œè´Ÿè´£æ‰§è¡Œæ“ä½œæ•°æ®åº“å¯¹åº”ä¸‰ä¸ªæµç¨‹ï¼š mysqlDB() è¿æ¥æ•°æ®åº“ ğŸ”ˆ æœ€æ–° SQL é©±åŠ¨ï¼š 1.åŠ è½½é©±åŠ¨ç¨‹åº è¿™æ­¥å¯ä»¥çœç•¥ã€‚ 123456789public mysqlDB(String url,String user,String passwd) throws Exception&#123; this.URL = url; this.USER = user; this.PASSWD = passwd; // 1.åŠ è½½é©±åŠ¨ç¨‹åº Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;); // 2.è·å–æ•°æ®åº“è¿æ¥ conn = DriverManager.getConnection(url,user,passwd); System.out.println(&quot;æˆåŠŸè¿æ¥æ•°æ®åº“ï¼&quot;);&#125; crudDB() å¢åˆ æŸ¥æ”¹ crudBOY è¡¨æ¼”æ—¶åˆ»ï¼šæ‰§è¡ŒæŒ‡å®š sql è¯­å¥ã€‚ 1234567public ResultSet crudDB(String sql) throws Exception&#123; // 3.æ“ä½œæ•°æ®åº“ Statement s = conn.createStatement(); ResultSet rs = s.executeQuery(sql); return rs;&#125; exit() é€€å‡º Statement å¯¹è±¡åº”è¯¥ä¹Ÿå…³é—­ï¼Œè¿™é‡Œæ²¡ã€‚ 1234public void exit() throws Exception&#123; conn.close();&#125; ä¸»å‡½æ•°ä¸­ åœ¨ä¸»å‡½æ•°ä¸­ä¸²æ¥æ‰€æœ‰æµç¨‹ï¼Œå’Œæ•°æ®åº“è¿›è¡Œ Connection è¿æ¥éœ€æä¾› url ï¼š url = â€œjdbc:mysql://&lt;åœ°å€&gt;:&lt;ç«¯å£&gt;/&lt;æ•°æ®åº“å&gt;?serverTimezone=UTCâ€ &lt;åœ°å€&gt;ï¼šè¿™é‡Œé€‰æ‹©æœ¬æœºåœ°å€ï¼Œ127.0.0.1 / localhost &lt;ç«¯å£&gt;ï¼šmysql ä¸“ç”¨ç«¯å£ï¼Œ3360 &lt;æ•°æ®åº“å&gt;ï¼šé¢„å…ˆå‡†å¤‡å¥½çš„æ•°æ®åº“ï¼Œtest âš ï¸?serverTimezone=UTC ï¼šæ–°ç‰ˆé©±åŠ¨å™¨å‡ºç°çš„é—®é¢˜ï¼Œè¦æŒ‡å®š time zone value ã€‚ 123456789101112131415161718192021222324252627282930import JDBC_demo.mysqlDB;import java.sql.ResultSet;public class hello&#123; public static void main(String[] args) &#123; try &#123; final String url = &quot;jdbc:mysql://127.0.0.1:3306/test?serverTimezone=UTC&quot;; final String user = &quot;root&quot;; final String passwd = &quot;123456&quot;; String sql = &quot;SELECT * FROM student WHERE gender = &#x27;F&#x27;;&quot;; // è¿æ¥æ•°æ®åº“--æ‰§è¡Œsqlè¯­å¥ mysqlDB mdb = new mysqlDB(url, user, passwd); ResultSet rs = mdb.crudDB(sql); // è¯»å–æŒ‡å®šåˆ—åæ•°æ® while(rs.next()) &#123; System.out.println(rs.getString(&quot;name&quot;) + rs.getInt(&quot;score&quot;)); &#125; mdb.exit(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125;&#125; mysqlDB ç±»å®Œæ•´ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041424344454647package JDBC_demo;import java.sql.Connection;import java.sql.DriverManager;import java.sql.ResultSet;import java.sql.Statement;public class mysqlDB&#123; final String URL ; final String USER ; final String PASSWD ; Connection conn; /** * æ„é€ å‡½æ•°ï¼šè¿›è¡Œåˆå§‹åŒ–å’Œæ•°æ®åº“è¿æ¥ * @param url jdbc:mysql://127.0.0.1:3306/&lt;æ•°æ®åº“å&gt; * @param user mysqlè´¦å· * @param passwd mysqlå¯†ç  */ public mysqlDB(String url,String user,String passwd) throws Exception &#123; this.URL = url; this.USER = user; this.PASSWD = passwd; // 1.åŠ è½½é©±åŠ¨ç¨‹åº Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;); // 2.è·å–æ•°æ®åº“è¿æ¥ conn = DriverManager.getConnection(url,user,passwd); System.out.println(&quot;æˆåŠŸè¿æ¥æ•°æ®åº“ï¼&quot;); &#125; /** * æ‰§è¡Œå¢åˆ æŸ¥æ”¹ * @param sql è¦æ‰§è¡Œçš„sqlè¯­å¥ */ public ResultSet crudDB(String sql) throws Exception &#123; // 3.æ“ä½œæ•°æ®åº“ Statement s = conn.createStatement(); ResultSet rs = s.executeQuery(sql); return rs; &#125; public void exit() throws Exception &#123; conn.close(); &#125;&#125; 14.2 æŸ¥è¯¢æŠ€å·§ â€‹ å› ä¸ºï¼Œå¢ã€åˆ ã€æ”¹å¹¶ä¸éœ€è¦å¤„ç†è¿”å›çš„æ•°æ®ï¼Œæ¯”è¾ƒç®€å•å°±æ˜¯æ‰§è¡Œsql è¯­å¥å³å¯ã€‚ä½†æ˜¯æŸ¥è¯¢è¾ƒä¸ºå¤æ‚ï¼Œè¿™é‡Œæ¥é€šè¿‡å‡ ä¸ªæŸ¥è¯¢å®ä¾‹ï¼Œæ¥è¿›ä¸€æ­¥ç†Ÿæ‚‰ JDBC APIã€‚ éªŒè¯ç”¨æˆ·ç™»é™† student è¡¨ä¸­æ²¡æœ‰è®¾ç½®å¯†ç å­—æ®µï¼Œæ‰€ä»¥ä¸‹é¢åªéªŒè¯äº†åå­—ï¼Œç®€å•è¡¨è¾¾æ„æ€ã€‚ 123456789101112131415161718192021222324252627282930import JDBC_demo.mysqlDB;import java.sql.ResultSet;public class hello&#123; public static void main(String[] args) &#123; try &#123; final String url = &quot;jdbc:mysql://127.0.0.1:3306/test?serverTimezone=UTC&quot;; final String user = &quot;root&quot;; final String passwd = &quot;123456&quot;; String sql = &quot;SELECT * FROM student WHERE name = &#x27;&#x27;&quot; + &quot;åˆ˜å©·&#x27;&quot;; // è¿æ¥æ•°æ®åº“--æ‰§è¡Œsqlè¯­å¥ mysqlDB mdb = new mysqlDB(url, user, passwd); ResultSet rs = mdb.crudDB(sql); // è¿›è¡Œåˆ¤æ–­ if(rs.next()) // re.next() è¿”å›çš„æ˜¯boolç±»å‹ï¼Œæ²¡æœ‰æ‰¾åˆ°æ•°æ®è¿”å›false System.out.println(&quot;è´¦å·å¯†ç æ­£ç¡®&quot;); else System.out.println(&quot;è´¦å·å¯†ç é”™è¯¯&quot;); mdb.exit(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125;&#125; æ‹¼æ¥å­—ç¬¦ä¸²æœ‰ä¸ªå‘ï¼Œè¦æ³¨æ„ç»™å­—ç¬¦ä¸²ç±»å‹&quot;åˆ˜å©·&quot;åŠ ä¸Šå•/åŒå¼•å·ï¼š 1String sql = &quot;SELECT * FROM student WHERE name = &#x27;&#x27;&quot; + &quot;åˆ˜å©·&#x27;&quot;; è·å–æ€»æ•° 123456789101112131415161718192021222324252627282930import JDBC_demo.mysqlDB;import java.sql.ResultSet;public class hello&#123; public static void main(String[] args) &#123; try &#123; final String url = &quot;jdbc:mysql://127.0.0.1:3306/test?serverTimezone=UTC&quot;; final String user = &quot;root&quot;; final String passwd = &quot;123456&quot;; String sql = &quot;SELECT count(*) FROM student WHERE gender = &#x27;F&#x27;&quot;; // è¿æ¥æ•°æ®åº“--æ‰§è¡Œsqlè¯­å¥ mysqlDB mdb = new mysqlDB(url, user, passwd); ResultSet rs = mdb.crudDB(sql); // è¿›è¡Œåˆ¤æ–­ rs.next(); // è¯»å–ä¸‹ä¸€è¡Œæ•°æ®ï¼Œè¿™é‡Œæ˜¯ç¬¬ä¸€è¡Œ int girl_num = rs.getInt(1); // è·å–ç¬¬ä¸€åˆ—ç¬¬ä¸€è¡Œæ•°æ® System.out.println(&quot;å¥³ç”Ÿæ€»æ•°ä¸ºï¼š&quot; + girl_num ); mdb.exit(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125;&#125; rs.next() : è¯»å–ä¸‹ä¸€è¡Œæ•°æ®ï¼Œå¦‚æœä¸‹ä¸€è¡Œæ•°æ®ä¸å­˜åœ¨è¿”å› false ï¼› è¾“å‡ºç»“æœï¼š 12æˆåŠŸè¿æ¥æ•°æ®åº“ï¼å¥³ç”Ÿæ€»æ•°ä¸ºï¼š5 14.3 å†è°ˆ Statement &amp; eceute() é¢„ç¼–è¯‘ Statement Statement å¼Šç«¯ åœ¨å‰é¢ï¼Œæˆ‘ä»¬çŸ¥é“ Statement å¯¹è±¡ä¸»è¦ç”¨äºæ‰§è¡Œ sql è¯­å¥ï¼š 1234567public ResultSet crudDB(String sql) throws Exception&#123; // 3.æ“ä½œæ•°æ®åº“ Statement s = conn.createStatement(); ResultSet rs = s.executeQuery(sql); return rs;&#125; ä½†æ˜¯ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªå¼Šç«¯ï¼š åªèƒ½æ‰§è¡Œå®Œæ•´sql è¯­å¥ï¼Œä¸èƒ½å¯¹ sql è¯­å¥è¿›è¡Œæ¨¡æ¿åŒ–ä¿®æ”¹ï¼› æ˜“é­å— sql æ³¨å…¥æ”»å‡»ï¼Œæ¯”å¦‚åœ¨å‰é¢æˆ‘ä»¬æ‹¼æ¥æŸ¥è¯¢ï¼Œæ˜¯å¦å­˜åœ¨ç”¨æˆ·sql è¯­å¥ï¼š 1String sql = &quot;SELECT * FROM student WHERE name = &quot; + name; // name ç”±ç”¨æˆ·è¾“å…¥ å¦‚æœç”¨æˆ·è¾“å…¥â€˜åˆ˜å©·â€™ OR 1=1 ,è€Œé åˆ˜å©· ï¼Œé‚£ä¹ˆæ‹¼æ¥è¯­å¥ä¸ºï¼š 1SELECT * FROM student WHERE name = &#x27;åˆ˜å©·&#x27; OR 1=1; å¦‚æœç”¨æˆ·è¡¨æœ‰100ä¸‡æ¡æ•°æ®ï¼Œé‚£ä¹ˆæ˜¾ç„¶ä¼šè€—å…‰å†…å­˜ï¼Œè®©æ•°æ®åº“è´Ÿè½½è¿‡é«˜ã€‚ PreparedStatement PreparedStatement å’Œ Statement éƒ½æ˜¯ç”¨æ¥æ‰§è¡Œ sql è¯­å¥ã€‚ä¸åŒæ˜¯PreparedStatement å¯ä»¥é€šè¿‡ ï¼Ÿ æ¥é¢„ç•™sql è¯­å¥ç¼–è¾‘ä½ç½®ï¼Œè€Œéç›´æ¥æ‹¼æ¥ã€‚ ä¸‹é¢å±•ç¤ºé‡æ–°å°è£…crubDB() æ–¹æ³•ä¸º *identityUser()*éªŒè¯ç”¨æˆ·(åŒå‰åªéªŒè¯å§“å)ï¼š 12345678910import java.sql.PreparedStatement; // æ³¨æ„è¦å¼•ç”¨PreparedStatement public ResultSet identityUser(String sql, String userName) throws Exception&#123; // 3.æ“ä½œæ•°æ®åº“ PreparedStatement ps = conn.prepareStatement(sql); ps.setString(1, userName); ResultSet rs = ps.executeQuery(); return rs;&#125; åœ¨ä¸»å‡½æ•°ä¸­ï¼Œè°ƒç”¨å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728import JDBC_demo.mysqlDB;import java.sql.ResultSet;public class hello&#123; public static void main(String[] args) &#123; final String url = &quot;jdbc:mysql://127.0.0.1:3306/test?serverTimezone=UTC&quot;; final String user = &quot;root&quot;; final String passwd = &quot;123456&quot;; String sql = &quot;SELECT * FROM student WHERE name = ?&quot;; // è¿æ¥æ•°æ®åº“--æ‰§è¡Œsqlè¯­å¥ mysqlDB mdb = new mysqlDB(url, user, passwd); ResultSet rs = mdb.identityUser(sql,&quot;åˆ˜å©·&quot;); // è¿›è¡Œåˆ¤æ–­ if(rs.next()) // re.next() è¿”å›çš„æ˜¯boolç±»å‹ï¼Œæ²¡æœ‰æ‰¾åˆ°æ•°æ®è¿”å›false System.out.println(&quot;æ­£åœ¨ç™»é™†...&quot;); else System.out.println(&quot;ç”¨æˆ·ä¸å­˜åœ¨ï¼&quot;); mdb.exit(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125;&#125; æ³¨æ„ï¼Œsqlè¯­å¥ ä¸ç”¨ç»™ ï¼Ÿ ä»£è¡¨çš„å­—ç¬¦ä¸²ç±»ä¼¼åŠ ä¸Šå•/åŒå¼•å·ï¼Œä¼šå‡ºé”™ï¼š 1String sql = &quot;SELECT * FROM student WHERE name = &#x27;?&#x27;&quot;; // é”™è¯¯å†™æ³• å› ä¸ºï¼Œps.setString(1, userName); æ–¹æ³•ä¼šè‡ªåŠ¨è®¾ç½®å¥½ã€‚ ä¸‰ç§ä¸åŒeceute æ‰§è¡Œ sql è¯­å¥ï¼Œé€šå¸¸å¤´ä¸‰ç§æ–¹æ³•ï¼šeceute() &amp; executeUpdate() &amp; executeQuery() ï¼Œå®ƒä»¬éƒ½æ˜¯ Statement å¯¹è±¡æ–¹æ³•ï¼Œä¸»è¦æœ‰ä»¥ä¸‹åŒºåˆ«ã€‚ è¿”å›å€¼ä¸åŒ eceute() ç”¨æ¥æ‰§è¡Œ sql è¯­å¥ï¼š 12Statement s = conn.createStatement();boolean rs = s.execute(sql); // è¿”å›boolç±»å‹ï¼Œåˆ¤æ–­æ‰§è¡Œæ˜¯å¦æˆåŠŸ executeUpdate() &amp; executeQuery() ç›¸ä¼¼ï¼Œä½†æ˜¯ä¸‰è€…è¿”å›å€¼ä¸åŒï¼š 1int number = s.executeUpdate(sql); // è¿”å›intç±»å‹ï¼Œæœ‰å¤šå°‘è¯­å¥è¢«å½±å“ 1ResultSet rs = s.executeQuery(sql); // è¿”å›ResultSetç±»å‹ï¼Œå¯ä»¥æŸ¥è¯¢è¿”å›æ•°æ® æ˜¯å¦æ”¯æŒæŸ¥è¯¢è¯­å¥ executeUpdate() å¯ä»¥è¿›è¡Œ å¢ã€åˆ ã€æ”¹ï¼š 123s.executeUpdate(sqlInsert); // æ‰§è¡ŒINSERTæ’å…¥æ•°æ®s.executeUpdate(sqlDelete); // æ‰§è¡ŒDELETEåˆ é™¤æ•°æ®s.executeUpdate(sqlUpdate); // æ‰§è¡ŒUPDATEæ›´æ–°æ•°æ® ä½†æ˜¯ä¸èƒ½æŸ¥è¯¢è¡¨ï¼š 1s.executeUpdate(sqlSelect); // å‡ºé”™ï¼šæ‰§è¡ŒSELECTæŸ¥è¯¢æ•°æ® executeQuery() ä¸€èˆ¬ç”¨äºæŸ¥è¯¢è¯­å¥ ï¼Œè¿›è¡Œå…¶å®ƒæ›´æ–°æ“ä½œä¼šæŠ¥é”™ï¼š java.sql.SQLException: Can not issue data manipulation statements with executeQuery(). execute() æ²¡æœ‰é™åˆ¶å¯ä»¥è¿›è¡Œï¼šå¢ã€åˆ ã€æ”¹ã€æŸ¥ ã€‚ 14.4 ç‰¹æ®Šæ“ä½œ &amp; äº‹åŠ¡ ç‰¹æ®Šæ“ä½œ æœªå±•å¼€è®²ï¼Œç”¨åˆ°å¯æŸ¥è¯¢ï¼šç‰¹æ®Šæ“ä½œ è¿™é‡Œçš„ç‰¹æ®Šæ“ä½œåŒ…æ‹¬ä¸¤ç§ï¼š è·å–è‡ªå¢é•¿idï¼šå¦‚æœè¡¨ä¸­idä¸ºAUTO_INCREMENTï¼Œæ— è®ºæ˜¯*execute()è¿˜æ˜¯executeUpdate()*éƒ½ä¸ä¼šè¿”å›è‡ªå¢é•¿idã€‚ è·å–è¡¨å…ƒæ•°æ®ï¼šè¯¸å¦‚ï¼Œæ•°æ®åº“æœåŠ¡å™¨ç‰ˆæœ¬ï¼Œé©±åŠ¨ç‰ˆæœ¬ï¼Œéƒ½æœ‰å“ªäº›æ•°æ®åº“ç­‰ç­‰ äº‹åŠ¡ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨äº‹åŠ¡ï¼Œä¸åœ¨èµ˜è¿°ï¼ŒåŒ MySQLç¬”è®°ï¼Œè¿™é‡Œä¸»è¦å±•ç¤º JDBC å¦‚ä½•ä½¿ç”¨äº‹åŠ¡ã€‚ âš ï¸ æ”¯æŒäº‹åŠ¡å‰æï¼šå½“å‰MySQLæœåŠ¡å™¨æœ¬èº«è¦æ”¯æŒINNODB, åŒæ—¶è¡¨ç±»å‹ä¸º INNODB ã€‚ æ”¯æŒäº‹åŠ¡ åœ¨å½“å‘ç°æ— æ³•æ‰§è¡Œäº‹åŠ¡æ—¶ï¼Œå†è¿›è¡Œä»¥ä¸‹ä¿®æ”¹ã€‚ è®¾ç½®è¡¨ç±»å‹ä¸º INNODB 1ALTER TABLE teble_name ENGINE = innodb; è®¾ç½®æœåŠ¡å™¨æ”¯æŒ INNODB mysql ä» 5.5 ç‰ˆæœ¬å·²å°† innoDB ä½œä¸ºé»˜è®¤å­˜å‚¨å¼•æ“ã€‚ ç‚¹å‡»æŸ¥çœ‹ï¼š å¼€å¯MYSQL INNODBçš„åŠæ³• äº‹åŠ¡å®ä¾‹ åœ¨äº‹åŠ¡ä¸­çš„å¤šä¸ªæ“ä½œï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ã€‚ åœ¨ JDBC ä¸­ï¼Œä¸»è¦æ˜¯å–æ¶ˆexcute() ç­‰ä¹‹å è‡ªåŠ¨ æäº¤ï¼Œæ”¹ä¸º æ‰‹åŠ¨ æäº¤æ‰€æœ‰æ“ä½œã€‚ 12345678910111213141516171819202122232425262728293031import JDBC_demo.mysqlDB;import java.sql.ResultSet;public class hello&#123; public static void main(String[] args) &#123; final String url = &quot;jdbc:mysql://127.0.0.1:3306/test?serverTimezone=UTC&quot;; final String user = &quot;root&quot;; final String passwd = &quot;123456&quot;; String sql = &quot;UPDATE student SET score = score + ? WHERE name = ?&quot;; // è¿æ¥æ•°æ®åº“ mysqlDB mdb = new mysqlDB(url, user, passwd); PreparedStatement ps = mdb.conn.prepareStatement(sql); // äº‹åŠ¡ï¼šåˆ˜å©·+10åˆ†ï¼Œå°ç™½-10åˆ† mdb.conn.setAutoCommit(false); // å–æ¶ˆè‡ªåŠ¨æäº¤ ps.setInt(1, 10);ps.setString(2, &quot;åˆ˜å©·&quot;); ps.executeUpdate(); // çœ‹ä¸‹é¢é”™è¯¯è§£æ ps.setInt(1, -10);ps.setString(2, &quot;å°ç™½&quot;); ps.executeUpdate(); mdb.conn.commit(); // æ‰‹åŠ¨æäº¤ &#125; catch (Exception e) &#123; e.printStackTrace(); &#125;&#125; âš ï¸ è°ƒè¯•åŠå°æ—¶çŠ¯çš„2ä¸ªé”™è¯¯ï¼Œæœ‰å…³ï¼š ps.executeUpdate(); ç”¨ps.executeQuery() ï¼Œæç¤º ï¼šCannot issue data manipulation statements with executeQuery() åŸå› ï¼šexecuteQuery() é€‚ç”¨äº SELECT ï¼Œç”¨æˆ·æ›´æ–°ç­‰æ“ä½œä¼šæŠ¥é”™ã€‚ æ·»åŠ å‚æ•°sqlï¼šps.executeQuery(sql) ï¼Œåœ¨å‰é¢åˆ›å»º PreparedStatement å¯¹è±¡å·²ç»™å‚æ•° sql ï¼Œå†æ·»å‚æ•°ä¼šå‡ºç°è§£æé”™è¯¯ã€‚ 14.5 æ•°æ®åº“çº¿ç¨‹æ± (å¾…)"},{"title":"categories","date":"2021-11-25T05:45:57.000Z","updated":"2021-11-25T05:47:33.936Z","comments":true,"path":"categories/index.html","permalink":"https://hwh.zone/categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2021-11-25T05:45:14.000Z","updated":"2021-11-25T05:47:43.270Z","comments":true,"path":"tags/index.html","permalink":"https://hwh.zone/tags/index.html","excerpt":"","text":""},{"title":"æœºå™¨å­¦ä¹ ï¼ˆä¸€ï¼‰å´æ©è¾¾ç¬”è®°","date":"2022-01-02T11:36:19.076Z","updated":"2021-12-03T03:41:02.923Z","comments":true,"path":"NO_post/æœºå™¨å­¦ä¹ ï¼ˆä¸€ï¼‰å´æ©è¾¾ç¬”è®°.html","permalink":"https://hwh.zone/NO_post/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89%E5%90%B4%E6%81%A9%E8%BE%BE%E7%AC%94%E8%AE%B0.html","excerpt":"","text":"å´æ©è¾¾çš„æœºå™¨å­¦ä¹ æœ€é‡è¦çš„è¿˜æ˜¯è¯¾åçš„labå®éªŒï¼ŒåæœŸä¼šç»§ç»­ä¸Šä¼ ã€‚è¿™é‡Œå…ˆç®€å•ä¸Šä¼ å¬è¯¾çš„ç¬”è®°ï¼Œç•¥ç²—ç³™ã€‚ ä¸€ ã€ç»ªè®º 1.1 ç›‘ç£å­¦ä¹  1.2 æ— ç›‘ç£å­¦ä¹  åªæŠŠæ•°æ®äº¤ç»™ç®—æ³•ï¼Œè‡ªåŠ¨ç»™äº‹ç‰©åˆ†ç¾¤ã€‚ ï¼ˆBCéƒ½æ˜¯æ— ç›‘ç£å­¦ä¹ ï¼‰ äºŒã€å•å˜é‡çº¿æ€§å›å½’ 2.1 æ¨¡å‹æè¿° å–æˆ¿å­ å–æˆ¿å­é¢„æµ‹ï¼Œæ—¢æ˜¯ä¸€ä¸ªç›‘ç£å­¦ä¹ æ¨¡å‹ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå›å½’æ¨¡å‹ã€‚ åŸºæœ¬å¸¸è¯† ç¬¦å· mï¼šè®­ç»ƒé›† x &amp; y ï¼šåˆ†åˆ«è¡¨ç¤ºè¾“å…¥/è¾“å‡ºå˜é‡ ç›‘ç£å­¦ä¹ æµç¨‹ 2.2 ä»£ä»·å‡½æ•° å¹³æ–¹è¯¯å·®ä»£ä»·å‡½æ•° ç®€åŒ–ç‰ˆå¹³æ–¹ä»£ä»·å‡½æ•° æ”¹å˜å‚æ•° ç®€åŒ–å¹³ä»£å‡½æ•° ï¼Œæ”¹å˜ä¸€ä¸ªå‚æ•°Î¸1å›¾åƒ å¹³ä»£å‡½æ•°ï¼Œæ”¹å˜ä¸¤ä¸ªå‚æ•°Î¸ã€Î¸1å›¾åƒ ç”¨ç­‰é«˜çº¿å›¾æ¥è¡¨ç¤ºï¼ˆJ(Î¸0,Î¸1)ç›¸åŒå³ç­‰é«˜ï¼‰ 2.3 æ¢¯åº¦ä¸‹é™ç®—æ³• â€” è‡ªåŠ¨å¯»æ‰¾æœ€å°J(ä»£ä»·)ç®—æ³• é—®é¢˜æè¿° å¦‚ä½•æœ€å¿«ä¸‹å±±ï¼Ÿ ä¸åŒä¸‹å±±ç‚¹ä¼šå¾—åˆ°ä¸åŒä¸‹å±±è·¯å¾„ï¼Œå³å±€éƒ¨æœ€ä¼˜è§£ã€‚ æ¢¯åº¦ç®—æ³•ä»‹ç» ä¸€å®šè¦åŒæ—¶æ›´æ–°ï¼Œå³è¾¹ç®—æ³•é”™è¯¯åœ¨äºÎ¸0æ›´æ–°å€¼è¢«ç”¨äº temp1ï¼Œåº”è¯¥ç”¨æ—§å€¼ã€‚ æ¢¯åº¦ä¸‹é™ç®—æ³•å¯»æ‰¾æœ€å°ä»£ä»·è¿‡ç¨‹ å¦‚æœæ–œç‡ == (d(J(Î¸))/dÎ¸)Î¸ &gt; 0 ï¼Œé‚£ä¹ˆå½“å‰Î¸ - Î±*æ–œç‡ï¼Œå°±æ˜¯ä½¿å¾—Î¸å‡å°ï¼Œé€¼è¿‘å‡½æ•°åº•ç«¯ å¦‚æœæ–œç‡ == (d(J(Î¸))/dÎ¸)Î¸ &gt; 0 ï¼Œé‚£ä¹ˆå½“å‰Î¸ - Î±*æ–œç‡ï¼Œå°±æ˜¯ä½¿å¾—Î¸å¢å¤§ï¼Œé€¼è¿‘å‡½æ•°åº•ç«¯ å­¦ä¹ é€Ÿç‡Î± å­¦ä¹ é€Ÿç‡å¤§å°å½±å“ å­¦ä¹ é€Ÿç‡å¤ªå°ï¼šé€¼è¿‘è¿‡ç¨‹å¤ªæ…¢ å­¦ä¹ é€Ÿåº¦å¤ªå¤§ï¼šå¯èƒ½ä¼šè¶Šè¿‡æœ€ä½ç‚¹ï¼ˆæœ€å°ä»£ä»·ï¼‰ï¼Œç”šè‡³æ— æ³•æ”¶æ•› æ¢¯åº¦ä¸‹é™ç®—æ³•ç‰¹ç‚¹ å¦‚æœå·²ç»åœ¨å±€éƒ¨æœ€ä½ç‚¹ æ­¤æ—¶ï¼Œæ–œç‡ä¸º0ï¼ŒÎ¸ä¸ä¼šè¢«æ›´æ–°ï¼Œè¾¾åˆ°å±€éƒ¨æœ€ä¼˜ã€‚ è‡ªåŠ¨å‡å°Î¸å˜åŒ–ç¨‹åº¦ åŸå› æ˜¯å› ä¸ºï¼Œè¶Šé€¼è¿‘æœ€ä½ç‚¹ï¼Œæ–œç‡ä¼šè‡ªåŠ¨å˜å°ï¼ŒÎ±*æ–œç‡å˜å°â€”&gt; Î¸å˜åŒ–ç¨‹åº¦é™ä½ã€‚ã€ æ€»ç»“ åŸºæœ¬æ–¹ç¨‹äº†è§£ æ¨å¯¼æˆåå¾®åˆ†é¡¹è¿‡ç¨‹ å¯¹Î¸0æ±‚å¯¼ï¼Œç»“æœå¦‚æ¡†1 å¯¹Î¸1æ±‚å¯¼ï¼Œç»“æœå¦‚æ¡†2 æ¢¯åº¦ä¸‹é™è¿‡ç¨‹ æ ¹æ®å…¬å¼ Î¸j=Î¸jâˆ’Î±âˆ—âˆ‚âˆ‚Î¸âˆ—J(Î¸0,Î¸1)\\theta_j = \\theta_j - \\alpha*\\frac{\\partial}{\\partial_\\theta}*J(\\theta_0,\\theta_1) Î¸jâ€‹=Î¸jâ€‹âˆ’Î±âˆ—âˆ‚Î¸â€‹âˆ‚â€‹âˆ—J(Î¸0â€‹,Î¸1â€‹) ä¸æ–­å‡å°‘ Î¸å€¼ï¼Œæ¢¯åº¦ä¸‹é™ä½¿ä¹‹è¾¾åˆ°å±€éƒ¨æœ€ä¼˜ã€‚ ä¸æ–­æ‹ŸåˆhÎ¸ï¼Œä½¿å¾—è´´è¿‘æ•°æ®ï¼Œè¾¾åˆ°é¢„æµ‹ ä¸‰ ã€å¤šå˜é‡çº¿æ€§å›å½’ 3.1 å¤šåŠŸèƒ½ å¤šå˜é‡é¢„æµ‹æˆ¿ä»· é¢„æµ‹å‡½æ•°æ”¹è¿› å†™å‡ºçŸ©é˜µè¡¨è¾¾å½¢å¼ 3.2 å¤šå…ƒæ¢¯åº¦ä¸‹é™æ³• ä¸ºä»€ä¹ˆå‡è®¾çš„å‡½æ•° h(Î¸)æ˜¯ä¸€ä¸ªçº¿æ€§å½¢å¼ï¼Ÿ é€šè¿‡å¤§æ¦‚é¢„æµ‹æ•°æ®åˆ†å¸ƒ å…³é”®æ˜¯è®© æœ€å°ä»£ä»·å‡½æ•° Jä¼šæœ€å°ï¼Œæ‹ŸåˆåŸæ•°æ®ã€‚å‡è®¾æˆçº¿æ€§å½¢å¼æ–¹ä¾¿æ¨å¯¼ï¼Œè®¡ç®—ã€‚ å¤šå…ƒæ¢¯åº¦ä¸‹é™è®¡ç®—æœ€å°ä»£ä»· å¤šå…ƒæ›´æ–°Î¸è§„åˆ™ å¯¹Î¸æ›´æ–°çš„ç†è§£1 â€‹ æ¯ä¸€æ¬¡æ›´æ–°Î¸jéƒ½æ˜¯ï¼Œè¦åˆ©ç”¨åˆ°æ‰€æœ‰çš„æ•°æ®é›†ï¼Œè®¡ç®—å‡ºæ­¤æ—¶Î¸jæ•°æ®é›†æ‰€æœ‰ä¸åŒç‰¹å¾{x1,x2,x3â€¦xn}åå¯¼æ•°å¹³å‡å€¼ï¼Œå†³å®šä¸‹ä¸€æ¬¡Î¸jçš„åç§»å€¼ã€‚ 12345678910#å¼€å§‹è¿­ä»£while True: cnt=cnt+1 diff = [0,0] #æ¢¯åº¦ä¸‹é™ for i in range(m): diff[0]+=h(x_train[i])-y[i] diff[1]+=(h(x_train[i])-y[i])*x_train[i] theta0=theta0-alpha/m*diff[0] theta1=theta1-alpha/m*diff[1] 3.3 å¤šå…ƒæ¢¯åº¦å®ç”¨æŠ€å·§ ä»£ä»·å‡½æ•°Jæ˜¯ä¸€ä¸ªç±»ä¼¼è¿™ç§å›¾å½¢ï¼ˆå¤šå…ƒæ›´å¤æ‚ï¼‰ï¼š ç‰¹å¾ç¼©æ”¾ï¼šä½¿å¾—ç‰¹å¾è§„æ¨¡åœ¨ä¸€ä¸ªç›¸è¿‘èŒƒå›´ å¦‚æœæ•°æ®é›†{x1,x2,x3â€¦xn}ä¸­ç‰¹å¾xiè¿‡å¤§ï¼Œå¯èƒ½ä¼šä½¿å¾—J(Î¸)å˜å¾—ç‹­é•¿ï¼Œæ”¶æ•›æ…¢ã€ä¸”éœ‡è¡ç­‰ï¼š ä¸ºä»€ä¹ˆä¼šå˜è¿™æ ·ï¼Ÿ æ”¹å˜{x1,x2,x3â€¦xn}ä¸ä¼šä½¿å¾—Î¸å‘ç”Ÿå˜åŒ–? æ›´å¥½çš„ç¡®å®šç‰¹å¾ç¼©æ”¾èŒƒå›´ xi=Xâˆ’umaxâˆ’minx_i = \\frac{X - u}{max - min} xiâ€‹=maxâˆ’minXâˆ’uâ€‹ é€‰æ‹©å­¦ä¹ é€Ÿç‡Î± è§‚æµ‹æ˜¯å¦æ”¶æ•›æ–¹æ³• ç”»å‡ºæ”¶æ•›è¿‡ç¨‹å›¾å½¢ï¼ˆè€å¸ˆæ¨èï¼‰ è®¾ç½®æŸä¸ªé™å·® ä¸æ¨èï¼Œå› ä¸ºä¸€èˆ¬éš¾ä»¥åˆ¤æ–­ã€‚ ä¸æ”¶æ•›ä¸¾ä¾‹ Î±è¿‡å¤§ å¯èƒ½å¯¼è‡´çš„æƒ…å†µï¼šè¶Šè¿‡æœ€ä½ç‚¹ï¼Œæ¥å›èµ°ï¼›ä¸æ–­é‡å¤æŸä¸ªç›¸ä¼¼å½¢çŠ¶ã€‚ å·²ç»è¯æ˜ï¼šåªè¦Î±å¤Ÿå°ï¼Œä»£ä»·å‡½æ•°Jä¸€å®šä¼šå‡å°ã€‚ Î±è¿‡å° ä¸€å®šæ”¶æ•›ï¼Œä½†æ˜¯è¿‡ç¨‹å¤ªæ…¢ã€‚ å–Î±æŠ€å·§ï¼ˆç»éªŒï¼‰ ä»ä¸€ä¸ªè¾ƒå°åˆé€‚å€¼å¦‚0.001ï¼Œæ¯æ¬¡æ˜¯å‰ä¸€æ¬¡3å€å·¦å³é€’å¢æµ‹è¯•ã€‚ 3.4 ç‰¹å¾è¡¨è¾¾å¼å’Œå¤šé¡¹å¼å›å½’ æ ¹æ®å·²çŸ¥æ•°æ®å¾—å‡ºæ›´å¥½çš„ç‰¹å¾ å¦‚ï¼Œå·²çŸ¥æˆ¿å­çš„é•¿ã€å®½ç‰¹å¾ï¼Œå…¶å®æ ¹æ®é•¿*å®½ è¿™ä¸ªæ–°ç‰¹å¾æ›´å¥½é¢„æµ‹ã€‚ å¤šå…ƒæ‹Ÿåˆä¸¾ä¾‹ï¼ˆå•ä¸€ç‰¹å¾ï¼‰ å¦‚ä¸‹å›¾æˆ¿ä»·æ˜¯ä¸€ä¸ªç±»ä¼¼äºŒæ¬¡å‡½æ•°ï¼Œé‚£ä¹ˆå¯ä»¥é€‰æ‹©å¤šé¡¹å¼æ¥æ‹Ÿåˆã€‚ ä¸ºäº†æ›´åŠ ç²¾ç¡®ï¼Œè¿˜å¯ä»¥å¢åŠ å¼€å¹³æ–¹ç­‰ï¼ˆåé¢æˆ¿ä»·å˜åŒ–å¹³ç¼“ï¼‰ 3.5 æ­£è§„æ–¹ç¨‹è§£æ³• æ–¹æ³•1ï¼šæ±‚å‡ºåå¾®åˆ†ç½®é›¶â€”éçº¿æ€§ è¿™ç§æ–¹æ³•ï¼Œæ ¹æ®å…¬å¼ä»¤æ‰€æœ‰çš„åå¾®åˆ†æ–¹ç¨‹ == 0 ï¼Œç„¶åè§£å‡º Î¸0ï¼ŒÎ¸1â€¦Î¸nã€‚ æ–¹æ³•2ï¼šå…¬å¼è§£å‡ºâ€”-çº¿æ€§ ç®€å•æ¥è¯´å°±æ˜¯æ±‚è§£ï¼šï¼ˆä¸å¯¹ï¼Œåº”è¯¥å‚è€ƒï¼šæ­£è§„æ–¹ç¨‹æ¨å¯¼è¿‡ç¨‹ï¼‰ Y=Xâˆ—Î¸Y = X*Î¸ Y=Xâˆ—Î¸ step1:XTY=XTXâˆ—Î¸step1:X^TY = X^TX*Î¸ step1:XTY=XTXâˆ—Î¸ step2:ï¼ˆXTX)âˆ’1XTY=Î¸step2:ï¼ˆX^TX)^{-1}X^TY = Î¸ step2:ï¼ˆXTX)âˆ’1XTY=Î¸ å¯æ˜¯ä¸€èˆ¬ä¹Ÿä¸ä¼šæ˜¯çº¿æ€§è§£å•Šï¼ŸÎ¸æœ‰nä¸ªï¼Œæ•°æ®é›†æœ‰å¾ˆå¤šä¸ªå¦‚mï¼Œå°±Xä¸ºm*ï¼ˆn+1ï¼‰ m &gt;&gt; nï¼Œä¸ä¸€å®šæœ‰è§£å•Šï¼Ÿ step1:y=Î¸0+Î¸1âˆ—x1+Î¸2âˆ—x2....Î¸nâˆ—xnstep1: y = \\theta_0 + \\theta_1*x_1+ \\theta_2*x_2.... \\theta_n*x_n step1:y=Î¸0â€‹+Î¸1â€‹âˆ—x1â€‹+Î¸2â€‹âˆ—x2â€‹....Î¸nâ€‹âˆ—xnâ€‹ ä¸¤ç§æ–¹æ³•å¯¹æ¯” å¦‚æœæ­£è§„æ–¹ç¨‹ï¼ŒXTXä¸å¯é€†ï¼ˆå¥‡å¼‚çŸ©é˜µï¼‰ ä¸€èˆ¬ä¸å¯é€†æƒ…å†µå¾ˆå°‘ã€‚ ä½¿ç”¨pinvæ±‚é€†è€Œéinvï¼ˆå³ä½¿ä¸å¯é€†ä¹Ÿå¯æ±‚å‡ºï¼‰ æ”¹å˜ç‰¹å¾å€¼/æ­£åˆ™åŒ–åˆ é™¤å¤šä½™ç‰¹å¾ å››ã€Octave/ Matalabä½¿ç”¨ 4.1 åŸºæœ¬æ“ä½œ æ”¹å˜æç¤ºç¬¦å· 1octave:1&gt; PS1(&#x27;&gt;&gt; &#x27;) % å°†octaveï¼š&lt;num&gt; &gt; &lt;å‘½ä»¤&gt; æç¤ºå˜æˆ &gt;&gt; &lt;å‘½ä»¤&gt; HELP å¸®åŠ© æŸ¥çœ‹å‡½æ•°å®šä¹‰ç­‰ 1&gt;&gt; help PS1 å¸¸è§„è¿ç®— 123456789101112&gt;&gt; 1+2 % åŠ ans = 3 &gt;&gt; 1-2 % å‡ans = -1&gt;&gt; 1*2 % ä¹˜ans = 2&gt;&gt; 1/2 % é™¤ans = 0.50000&gt;&gt; 1^2 % å¹‚ans = 1&gt;&gt; 1%2 % å–ä½™ans = 1 å¸ƒå°”è¿ç®— 12345678&gt;&gt; 1 == 2 # equalans = 0&gt;&gt; 1 ~= 2 # ...?ans = 1&gt;&gt; 1 &amp;&amp; 0 # ANDans = 0&gt;&gt; 1 || 0 # ORans = 1 çŸ©é˜µè¿ç®— åŠ å‡ A + 1 , A - 1 : çŸ©é˜µæ¯ä¸€ä¸ªæ•°å­—éƒ½åŠ å‡ 1 12345678910&gt;&gt; A = [1 2 3 ; 4 5 6 ; 7 8 9;];&gt;&gt; B = [1 2 3 ; 4 5 6 ; 7 8 9;];&gt;&gt; A + 1ans = 2 3 4 5 6 7 8 9 10 ä¹˜é™¤ A*B &amp; *A .B : å‰è€…å¸¸è§„çŸ©é˜µç›¸ä¹˜ï¼Œåè€…æ˜¯ç”¨å¯¹åº”A(i,j) * B(i,j) ç±»ä¼¼çš„è¿˜æœ‰ï¼š1 ./ A , A .^2 , .éƒ½æ˜¯è¡¨ç¤ºå¯¹çŸ©é˜µæ¯ä¸ªå…ƒç´ çš„æ“ä½œ 12345678910111213&gt;&gt; A * Bans = 30 36 42 66 81 96 102 126 150&gt;&gt; A .*Bans = 1 4 9 16 25 36 49 64 81 å‡½æ•° A 'ã€pinv(A)abs(A)ã€log(A)ã€exp(A)ã€max(A) &amp; ceil(A)ã€floor(A) å‘ä¸Šã€ä¸‹å–æ•´ 123456789101112&gt;&gt; A = [1 2 3 ; 4 5 6 ; 7 8 9;]A = 1 2 3 4 5 6 7 8 9&gt;&gt; A&#x27;ans = 1 4 7 2 5 8 3 6 9 sum(A)ã€prod(a) ã€max(A)ï¼šè¿”å›æ¯è¡Œå…ƒç´ å’Œã€ä¹˜ç§¯ã€æœ€å¤§å€¼ï¼Œä»¥è¡Œå‘é‡è¡¨ç¤ºã€‚ max(A,B)ï¼šæ¯”è¾ƒA å’Œ B å¯¹åº”ä½ç½®å…ƒç´ ï¼Œæ±‚æœ€å¤§ï¼Œç»„æˆæ–°çŸ©é˜µ max(A,[],1)ã€max(A,[],2)ï¼šåˆ†åˆ«è·å–æ¯ä¸€åˆ—ã€è¡Œæœ€å¤§å€¼ sum(A,1)ã€sum(A,2)ï¼šåˆ†åˆ«è·å–æ¯ä¸€åˆ—ã€è¡Œå’Œ 12345678910111213141516171819202122232425&gt;&gt; sum(A) % é»˜è®¤è·å–çš„æ˜¯æ¯ä¸€åˆ—çš„æœ€å¤§å€¼ans = 12 15 18&gt;&gt; prod(A)ans = 28 80 162 &gt;&gt; [r,c]= max(A) % r æ˜¯æ¯åˆ—æœ€å¤§æ•°å­— ï¼› cæ˜¯æ¯åˆ—æœ€å¤§æ•°å­—ç´¢å¼•r = 7 8 9c = 3 3 3 &gt;&gt; max(A,[],2) % è¿”å›æ¯è¡Œæœ€å¤§ans = 3 6 9 find(A &lt; 3) ï¼šè¿”å›çŸ©é˜µæ‰€æœ‰å°äº3çš„å…ƒç´ ï¼Œä¸ºä¸€ä¸ªåˆ—å‘é‡ 12345&gt;&gt; find(A &lt; 3)ans = 1 4 å¸ƒå°” A &lt; 3 ã€ A &gt; 3 : ç›¸å¯¹çŸ©é˜µæ¯ä¸ªå…ƒç´ éƒ½å’Œ3è¿›è¡Œboolè¿ç®—ï¼Œè¿”å›0 æˆ–è€…1 123456&gt;&gt; A &lt; 3ans = 1 1 0 0 0 0 0 0 0 è¡¥å…… A(ğŸ˜ƒ ï¼šå°†Aæ‰€æœ‰å…ƒç´ ç»„æˆä¸€ä¸ªåˆ—å‘é‡ã€‚é…åˆ max(A)å°±å¯ä»¥æ±‚çŸ©é˜µAçš„æœ€å¤§å€¼ 1234567891011121314B = 1 4 7 2 5 8 3 6 9&gt;&gt; max(B) % max é»˜è®¤æ±‚æ¯åˆ—çš„æœ€å¤§å€¼ans = 9 å˜é‡ç›¸å…³æ“ä½œ å®šä¹‰å˜é‡ 123&gt;&gt; a = pi % å˜é‡ä¼šè‡ªåŠ¨æ‰“å°a = 3.1416&gt;&gt; a = pi; % è®©å˜é‡ä¸æ‰“å° display æ‰“å°å˜é‡ 1234&gt;&gt; a = pi;&gt;&gt; display(a) a = 3.1416&gt;&gt; display(sprintf(&#x27;%0.2f&#x27;,a)) % ä»¥Cè¯­è¨€æ ¼å¼æ‰“å°å‡ºæ¥ format æ‰“å°å˜é‡ 1234567&gt;&gt; format long &gt;&gt; aa = 3.141592653589793&gt;&gt; format short&gt;&gt; aa = 3.1416 clearæ¸…é™¤å˜é‡ 12clear a % æ¸…é™¤aå˜é‡clear % æ¸…é™¤æ‰€æœ‰å˜é‡ who,whosæ˜¾ç¤ºæ‰€æœ‰å˜é‡ä¿¡æ¯ 12345678910111213141516&gt;&gt; whoVariables in the current scope:A a ans data &gt;&gt; whos % whosæ›´åŠ è¯¦ç»†Variables in the current scope: Attr Name Size Bytes Class ==== ==== ==== ===== ===== A 15x15 1800 double a 1x1 8 double ans 1x14 14 char data 3x3 72 doubleTotal is 249 elements using 1894 bytes å‘é‡å’ŒçŸ©é˜µ å¸¸è§„ç”ŸæˆçŸ©é˜µ 123456789101112131415&gt;&gt; A = [1 2; 3 4 ; 5 6] % ä»¥ï¼›åˆ†éš”çŸ©é˜µè¡Œ ï¼Œä»¥ç©ºæ ¼åˆ†éš”æ¯ä¸€è¡Œå…ƒç´ A = 1 2 3 4 5 6&gt;&gt; A = [1 2; % å¦ä¸€ç§è¾“å…¥çŸ©é˜µæ–¹æ³•&gt; 3 4;&gt; 5 6]A = 1 2 3 4 5 6 å¿«æ·ç”ŸæˆçŸ©é˜µ ::æŒ‡å®šèµ·å§‹å’Œç»“æŸç”Ÿæˆä¸€ä¸ªè¡Œå‘é‡ 12345678&gt;&gt; A = 1:0.2:2 % åŒæ—¶æŒ‡å®šæ­¥é•¿ä¸º 0.2A = 1.0000 1.2000 1.4000 1.6000 1.8000 2.0000&gt;&gt; A = 1 : 5 % ä¸æŒ‡å®šæ­¥é•¿ï¼ˆé»˜è®¤ä¸º1ï¼‰A = 1 2 3 4 5 ç›´æ¥å¤åˆ¶æŸçŸ©é˜µæŒ‡å®šå¤šå°‘å…ƒç´ ï¼Œç”Ÿæˆè¡Œå‘é‡ï¼Œä»ä¸Šè‡³ä¸‹ï¼Œä»å·¦è‡³å³å¼€å§‹ç®— 1234567891011&gt;&gt; w = rand(3,3)w = 0.920009 0.424680 0.795883 0.890070 0.048942 0.592416 0.748348 0.784034 0.366445 &gt;&gt; v = w(1:3) % 1:3 è¡¨ç¤ºç¬¬1 åˆ° ç¬¬3 ä¸ªå…ƒç´ èµ‹å€¼ç»™vè¡Œå‘é‡ï¼ˆç¬¬ä¸€åˆ—ï¼‰v = 0.92001 0.89007 0.74835 ç”¨onesã€zerosã€magicå‡½æ•°æŒ‡å®šè¡Œåˆ—ï¼Œç”Ÿæˆå…ƒç´ ä¸º1ã€0çŸ©é˜µ æˆ–è€…å¹»æ–¹æ–¹é˜µ 123456789101112131415161718&gt;&gt; ones(2,2)ans = 1 1 1 1&gt;&gt; 2*ones(2,2) % è¿˜å¯ä»¥æŒ‡å®šå€æ•°ans = 2 2 2 2 &gt;&gt; magic(3) % æ¯è¡Œã€åˆ—ã€å¯¹è§’ ç›¸åŠ ç›¸ç­‰ans = 8 1 6 3 5 7 4 9 2 randã€randnç”ŸæˆéšæœºçŸ©é˜µï¼ˆrandnç”Ÿæˆçš„çŸ©é˜µç¬¦åˆé«˜æ–¯åˆ†å¸ƒï¼‰ 1234567891011&gt;&gt; rand(2,2)ans = 0.84394 0.39302 0.33943 0.18478&gt;&gt; randn(2,2)ans = -0.32139 0.19817 0.62788 0.42349 eye ç”Ÿæˆå•ä½çŸ©é˜µ 12345678&gt;&gt; eye(3)ans =Diagonal Matrix 1 0 0 0 1 0 0 0 1 å›¾å½¢æ˜¾ç¤ºçŸ©é˜µ 12&gt;&gt; A = rand(15,15);&gt;&gt; hist(A) çŸ©é˜µæ•°æ®ç´¢å¼• A(i,j) æ˜¾ç¤ºçŸ©é˜µAï¼Œiè¡Œjåˆ—å…ƒç´  12345678&gt;&gt; A = [1 2 3 ; 4 5 6; 7 8 9]A = 1 2 3 4 5 6 7 8 9&gt;&gt; A(2,2)ans = 5 A(i,:) è·å–çŸ©é˜µAï¼Œç¬¬iè¡Œæ‰€æœ‰å…ƒç´  1234&gt;&gt; A(2,:)ans = 4 5 6 A(:,j) è·å–çŸ©é˜µAï¼Œç¬¬jåˆ—æ‰€æœ‰å…ƒç´  123456&gt;&gt; A(:,2)ans = 2 5 8 A([i,j]ğŸ˜… è·å–çŸ©é˜µAï¼Œç¬¬iè¡Œå’Œç¬¬jè¡Œå…ƒç´  12345&gt;&gt; A([1,3],:)ans = 1 2 3 7 8 9 ä¿®æ”¹çŸ©é˜µ A(:,j) = [column vector ] ï¼š ä¿®æ”¹çŸ©é˜µç¬¬jåˆ—ä¸ºæ–°åˆ—å‘é‡ A(i,:) = [column vector ] ï¼š ä¿®æ”¹çŸ©é˜µç¬¬iè¡Œä¸ºæ–°è¡Œå‘é‡ 12345678910111213&gt;&gt; A(:,2) = [8 ; 8 ; 8]A = 1 8 3 4 8 6 7 8 9&gt;&gt; A(2,:) = [7 7 7]A = 1 8 3 7 7 7 7 8 9 ç»„åˆçŸ©é˜µ [A,B] &amp; [A B] : å°†çŸ©é˜µBä½œä¸ºçŸ©é˜µAçš„æ‰©å±•åˆ—ï¼Œå½¢æˆæ–°çŸ©é˜µ 12345678910111213&gt;&gt; A = [1 1 1]A = 1 1 1&gt;&gt; B = [2 2 2]B = 2 2 2&gt;&gt; [A,B]ans = 1 1 1 2 2 2 [A;B] : å°†çŸ©é˜µBä½œä¸ºçŸ©é˜µAçš„æ‰©å±•è¡Œï¼Œå½¢æˆæ–°çŸ©é˜µï¼Œæ³¨æ„æ˜¯åˆ†å·ï¼› 12345&gt;&gt; [A;B]ans = 1 1 1 2 2 2 çŸ©é˜µé‡åº¦ size è¿”å›çŸ©é˜µå¤§å° 1234&gt;&gt; size(A)ans = 15 15 length è¿”å›è¡Œé•¿ 12&gt;&gt; length(A)ans = 15 4.2 ç§»åŠ¨æ•°æ® è·¯å¾„ç›¸å…³ pwd ï¼šå½“å‰è·¯å¾„ ï¼› cd åˆ‡æ¢ç›®å½• ï¼› ls æ˜¾ç¤ºå½“å‰ç›®å½•æ–‡ä»¶ load åŠ è½½æ–‡ä»¶ 12345678load data.datload(&#x27;data.dat&#x27;)&gt;&gt; data % ç‰¹åˆ«æ³¨æ„ä¸è¦è¾“å…¥:åç¼€åï¼ï¼ï¼data = 1 2 3 4 5 6 7 8 9 save å­˜å‚¨æ•°æ® 12345678data = 1 2 3 4 5 6 7 8 9&gt;&gt; v = data(1:3)&gt;&gt; save v.dat v 4.3 æ•°æ®ç»˜åˆ¶ è®¾ç½®æ¨ªè½´åæ ‡ &amp; å‡½æ•°ï¼ˆä¸­é—´æ•°å­—ä¸ºä»€ä¹ˆä¸èƒ½æ”¹å˜æˆ 0.1ï¼Ÿï¼Ÿï¼‰ 123&gt;&gt; t = [0:0.01:2*pi];&gt;&gt; y1 = sin(t); &gt;&gt; y2 = cos(t); ç»˜åˆ¶å›¾å½¢ 123&gt;&gt; plot(t,y1)hold on; % ä¿æŒæ­£å¼¦å›¾å½¢åœ¨åŸºç¡€ä¸Šå†ç»˜åˆ¶ä½™å¼¦å‡½æ•°&gt;&gt; plot(t,y2) æ·»åŠ ä¿¡æ¯ 1234&gt;&gt; xlabel(&#x27;time&#x27;); % å¢åŠ xåæ ‡è½´æ ‡ç­¾&gt;&gt; ylabel(&#x27;value&#x27;); % å¢åŠ yåæ ‡è½´æ ‡ç­¾&gt;&gt; legend(&#x27;sin&#x27;,&#x27;cos&#x27;); % ç”¨æ˜¾ç¤ºä¸¤æ¡çº¿ä»£è¡¨ä»€ä¹ˆå‡½æ•°&gt;&gt; title(&#x27;simple plot&#x27;) % å¢åŠ è¿™å¹…å›¾çš„æ ‡é¢˜ ä¿å­˜å›¾ç‰‡ cd &lt;ä¿å­˜è·¯å¾„&gt; ï¼›&lt;ä¿å­˜å›¾ç‰‡å&gt; 1&gt;&gt; cd &#x27;C:\\Users\\Administrator\\Desktop&#x27;;print -dpng &#x27;myPlot.png&#x27; åŒæ—¶æ˜¾ç¤ºä¸¤å¼ å›¾ç‰‡ 12&gt;&gt; figure(1);plot(t,y1);&gt;&gt; figure(2);plot(t,y2); æ˜¾ç¤ºæ¡†åˆ†éš”æˆä¸¤å— 12345&gt;&gt; subplot(1,2,1); % æŠŠç•Œé¢åˆ†æˆ1x2ï¼Œé€‰ä¸­ç¬¬ä¸€ä¸ªæ ¼å­&gt;&gt; plot(t,y1); &gt;&gt; subplot(1,2,2); % é€‰ä¸­ç¬¬äºŒä¸ªæ ¼å­&gt;&gt; plot(t,y2);&gt;&gt; axis([0.5 1 -1 1]) % ä¿®æ”¹ç¬¬äºŒå¹…å›¾çš„æ¨ªåæ ‡ä¸º[0.5,1],çºµåæ ‡ä¸º[-1,1] ç»˜åˆ¶çŸ©é˜µå›¾åƒ çŸ©é˜µä¸­ä¸€ä¸ªå…ƒç´ ä»£è¡¨ç€ä¸€ä¸ªè‰²å—ï¼Œ 123456789&gt;&gt; A = magic(3)A = 8 1 6 3 5 7 4 9 2&gt;&gt; imagesc(A) % ç”Ÿæˆä¸åŒè‰²å—çŸ©é˜µ&gt;&gt; imagesc(A),colorbar,colormap pink; % è‰²å—çš„é¢œè‰²æ·±æµ…ç”±å…ƒç´ çš„æ•°å€¼å†³å®šã€‚&gt;&gt; close % å…³é—­æ‰€æœ‰æ‰“å¼€çš„ç»˜åˆ¶å›¾åƒæ¡† 4.4 æ§åˆ¶è¯­å¥ forã€whileâ€¦ forã€whileå¾ªç¯ for : å˜é‡iä¼šè‡ªï¼‹1 whileï¼šiä¸ä¼šè‡ªåŠ ï¼Œéœ€è¦è‡ªå·±è®¾ç½®åˆå§‹å€¼ 12345678910111213141516171819&gt;&gt; rang = [1:3]rang = 1 2 3 &gt;&gt; for i = rang % ç­‰ä»·äº ï¼š for i = [1:10]&gt; disp(i);&gt; end 1 2 3&gt;&gt; i = 0&gt;&gt; while i &lt; 3&gt; disp(i);&gt; i = i+1; % åŠ ï¼›ï¼Œä½¿å¾—iä¸ä¼šè¾“å‡º&gt; end; 0 1 2 if æ³¨æ„ ifä¹Ÿè¦æœ‰endé…åˆ 12345678910&gt;&gt; i = 0 ;&gt;&gt; while true&gt; i = i+1;&gt; disp(i)&gt; if i == 3&gt; break;&gt; else if&gt; disp(&#x27;continue&#x27;)&gt; end&gt; end è°ƒç”¨è‡ªå®šä¹‰å‡½æ•° å®šä¹‰ä¸€ä¸ªåç¼€åä¸º.mæ–‡ä»¶ï¼šsquare.mï¼Œå†™å…¥å‡½æ•°ï¼š 12function y = square(x) % å‡½æ•°å¤´ï¼Œå‡½æ•°åæœ€å¥½å’Œæ–‡ä»¶åç›¸åŒy = x^2; % å‡½æ•°ä¸»ä½“ åœ¨octaveä¸­CILä¸­è°ƒç”¨ 123&gt;&gt; cd C:\\Users\\86151\\Desktop % å…ˆåˆ‡æ¢åˆ°æ–‡ä»¶æ‰€åœ¨ç›®å½•&gt;&gt; square(10)ans = 100 ä¹Ÿå¯è¿”å›å¤šä¸ªå€¼ï¼š 1234567function [a,b] = squareAndCube(x) a = x^2; b = y^3;&gt;&gt; % åœ¨octaveä¸­è°ƒç”¨ squareAndCube.m ä¸­ squareAndCubeå‡½æ•°&gt;&gt; [a,b] = squareAndCube(10)a = 100b = 1000 è®¡ç®—ä»£ä»·å‡½æ•°å®ä¾‹ 4.5 çŸ¢é‡ çŸ©é˜µåŒ–ä¸¤æ•°ç›¸ä¹˜æ±‚å’Œ æ›´å¤æ‚çš„ä¸¾ä¾‹ äº”ã€Logisticå›å½’ 5.1 åˆ†ç±» çº¿æ€§å›å½’é¢„æµ‹åˆ†ç±»é—®é¢˜ ä¾‹å¦‚é¢„æµ‹ï¼Œè‚¿ç˜¤æ˜¯å¦è‰¯æ€§é—®é¢˜ã€‚ æˆ‘ä»¬å°†å¤§äº0.5çš„é¢„æµ‹å‡½æ•°hè‚¿ç˜¤ï¼Œé¢„æµ‹ä¸ºè‰¯æ€§ï¼›å°äº0.5é¢„æµ‹ä¸ºæ¶æ€§ã€‚ ä½†æ˜¯å¦‚æœå¢åŠ ä¸€ä¸ªæ•°æ®é›†ï¼Œé¢„æµ‹å‡½æ•°æŠŠåŸæœ¬å±äºæ¶æ€§è‚¿ç˜¤é¢„æµ‹ä¸ºè‰¯æ€§ã€‚ å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œé¢„æµ‹å‡½æ•°h(x)å€¼å¯ä»¥è¶…è¿‡[0,1]èŒƒå›´ã€‚ 5.2 å‡è®¾é™ˆè¿° Sigmoidå‡½æ•° &amp; Logistic å‡½æ•° Sigmoidå‡½æ•°ï¼šg(z)=11+eâˆ’zSigmoid å‡½æ•°ï¼šg(z) = \\frac{1}{1+e^{-z}} Sigmoidå‡½æ•°ï¼šg(z)=1+eâˆ’z1â€‹ Logisticå‡½æ•°:hÎ¸(x)=g(Î¸Tx)Logistic å‡½æ•° :h_\\theta(x) = g(\\theta^Tx) Logisticå‡½æ•°:hÎ¸â€‹(x)=g(Î¸Tx) é¢„æµ‹ç—…äººæœ‰ 70% æ¦‚ç‡æ‚£æœ‰æ¶æ€§è‚¿ç˜¤ã€‚ 5.3 å†³ç­–ç•Œé™ å†ç†è§£Logistic å‡½æ•° å½“ z &gt; 0 æ—¶ï¼Œgï¼ˆzï¼‰&gt; 0.5 -----&gt; Î¸â€™ &gt; 0 æ—¶ï¼Œgï¼ˆÎ¸â€™ï¼‰&gt; 0.5ã€‚ é‚£ä¹ˆå¦‚æœè®¾ç½® é˜€å€¼ = 0.5ï¼Œåªéœ€åˆ¤æ–­ Î¸â€™ &gt; 0 ? ä¾¿å¯åˆ†ç±»äº†ã€‚ ä¸¾ä¾‹ï¼ˆä¸€ï¼‰ å¦‚æœè®¾å®šé˜€å€¼= 0.5ï¼ŒæŒ‰ç…§å‰æ¨è®ºï¼Œé¢„æµ‹ y = 1åªéœ€ ï¼š Î¸0+Î¸1x1+Î¸2x2&gt;0\\theta_0+\\theta_1x_1+\\theta_2x_2 &gt; 0 Î¸0â€‹+Î¸1â€‹x1â€‹+Î¸2â€‹x2â€‹&gt;0 ä¸å¦¨å‡è®¾ï¼ŒÎ¸0 = 0 ï¼ŒÎ¸1 = Î¸2 = 1ã€‚é‚£ä¹ˆä¾¿æ˜¯æ¨å¾—ï¼š x1+x2â‰¥3,y=1;x1+x2&lt;3,y=0x_1 + x_2 â‰¥ 3 , y = 1 ; x_1 + x_2 &lt; 3 , y = 0 x1â€‹+x2â€‹â‰¥3,y=1;x1â€‹+x2â€‹&lt;3,y=0 ç”±æ­¤å¯ä»¥å¾—åˆ°å†³ç­–è¾¹ç•Œå‡½æ•°ï¼Œå¦‚ä¸‹å›¾çº¢è‰²ç›´çº¿æ‰€ç¤ºï¼š x1+x2=3x_1 + x_2 = 3 x1â€‹+x2â€‹=3 ä¸¾ä¾‹ï¼ˆäºŒï¼‰ åŸºæœ¬æ¨å¯¼è¿‡ç¨‹åŒä¸Šï¼Œå¯ä»¥å¾—åˆ°å†³ç­–è¾¹ç•Œå‡½æ•°ï¼š x12+x22=1x_1^2+x_2^2 = 1 x12â€‹+x22â€‹=1 å¯èƒ½è¿˜æœ‰æœ‰æ›´å¤æ‚çš„å›¾å½¢å’Œå‚æ•°ï¼š 5.4 ä»£ä»·å‡½æ•° å‘é‡åŒ– Logisticå‡½æ•° é€‰æ‹©æ–°çš„ä»£ä»·å‡½æ•° ä¸ºä»€ä¹ˆè¦æ„é€ æ–°çš„ä»£ä»·å‡½æ•°ï¼Ÿ çº¿æ€§å›å½’ä»£ä»·å‡½æ•°çš„å®é™…æ„ä¹‰å°±æ˜¯å¹³æ–¹è¯¯å·®ã€‚è€Œé€»è¾‘å›å½’å´ä¸æ˜¯ï¼Œå®ƒçš„é¢„æµ‹å‡½æ•°hÎ¸(x)hÎ¸(x)æ˜¯éçº¿æ€§çš„ã€‚å¦‚æœç±»æ¯”åœ°ä½¿ç”¨çº¿æ€§å›å½’çš„ä»£ä»·å‡½æ•°äºé€»è¾‘å›å½’ï¼Œé‚£J(Î¸)J(Î¸)å¾ˆæœ‰å¯èƒ½å°±æ˜¯éå‡¸å‡½æ•°ï¼Œå³å­˜åœ¨å¾ˆå¤šå±€éƒ¨æœ€ä¼˜è§£ï¼Œä½†ä¸ä¸€å®šæ˜¯å…¨å±€æœ€ä¼˜è§£ã€‚æˆ‘ä»¬å¸Œæœ›æ„é€ ä¸€ä¸ªå‡¸å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªç¢—å‹å‡½æ•°åšä¸ºé€»è¾‘å›å½’çš„ä»£ä»·å‡½æ•°ã€‚ åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/ljp1919/article/details/79120761 åŸå…ˆæ€»ä½“ä»£ä»·å‡½æ•°ï¼š å°† å·¦è¾¹ 1/2(h_Î¸(x) - y)^2 æ›¿æ¢æˆæ–°çš„ä»£ä»·å‡½æ•°ï¼ˆä¸æ˜¯æ€»ä½“ä»£ä»·å‡½æ•°ï¼ï¼ï¼‰ï¼š å¯¹äºæ–°ä»£ä»·å‡½æ•°ç†è§£ï¼š åœ¨ y = 1 ï¼Œå³æ•°æ®é›†å®é™…åˆ†ç±»ä¸º1ï¼ŒCostå›¾åƒå¦‚ä¸‹ï¼š å¦‚æœé¢„æµ‹å‡½æ•°h(Î¸) = 0 ï¼Œå³åˆ†ç±»åˆ°0ï¼Œå’Œå®é™… 1åå·®ï¼Œåˆ™ä»£ä»· --&gt;æ— ç©·ï¼Œæƒ©ç½šè¿™ä¸ªå‡½æ•°ï¼Ÿ ç›¸åï¼Œå¦‚æœé¢„æµ‹ç»“æœh(Î¸) = 1ï¼Œé‚£ä¹ˆä»£ä»·ä¸ºâ€”&gt;0ï¼Œç¬¦åˆå®é™…æ•°æ®é›† = 1ã€‚ åŒç†ï¼Œy = 0 æ—¶ï¼Œå®é™…åˆ†ç±»ä¸º0ï¼Œä»£ä»·å‡½æ•°Costå›¾åƒå¦‚ä¸‹ï¼š ä½†æ˜¯ï¼Œå’Œå‰é¢ä»£ä»·å‡½æ•°ç›¸æ¯”æ€ä¹ˆæ›´æ–°Î¸ï¼Ÿï¼Ÿ 5.5 ç®€åŒ–ä»£ä»·å‡½æ•°ä¸æ¢¯åº¦ä¸‹é™ ç®€åŒ–ä»£ä»· &amp; å›å½’å‡½æ•° å°†å…ˆå‰ä»£ä»·å‡½æ•°å†™æˆä¸€é¡¹ï¼š é‚£ä¹ˆæ–°çš„æ€»ä½“ä»£ä»·å‡½æ•°æ˜¯ï¼š æ¢¯åº¦ä¸‹é™ æ€»ä½“æµç¨‹ ä¸æ–­è°ƒæ•´Î¸ï¼Œä½¿å¾—ä»£ä»·å‡½æ•°ï¼ˆæ€»ä½“ï¼‰æœ€å°ï¼Œæœ€åå¾—å‡ºå›å½’é¢„æµ‹å‡½æ•°ã€‚ è¯¦ç»†è¿‡ç¨‹ æ›´æ–°Î¸ï¼Œå’Œå‰ç±»ä¼¼ï¼Œå…³é”®åœ¨äºè®¡ç®—å¯¼æ•°ã€‚ï¼ˆæ²¡æ¨å¯¼å‡ºæ±‚å¯¼æ€ä¹ˆå‡ºæ¥çš„ï¼‰ å…¶ä¸­ Î¸Tx ä¸ºçº¿æ€§æ—¶ï¼Œh(x) = g(Î¸0 + Î¸2x1+Î¸3x3â€¦+Î¸nxn)ä¸ºï¼š hÎ¸(x)=11+eâˆ’Î¸Txh_\\theta(x) = \\frac{1}{1+e^{-\\theta^Tx}} hÎ¸â€‹(x)=1+eâˆ’Î¸Tx1â€‹ 5.6 é«˜çº§ä¼˜åŒ– æ¢¯åº¦ç®—æ³•ç®€ä»‹ octaveä¸­è°ƒç”¨æ¢¯åº¦ä¸‹é™ç®—æ³• å†™å¥½ä»£ä»·å‡½æ•°ç®—æ³• æ³¨æ„è¿™é‡Œå¥½åƒæ²¡æœ‰æ•°æ®é›†ï¼Œå®é™…ä¸Šè¿™å°±æ˜¯å•çº¯æ±‚è¿™ä¸ªä»£ä»·å‡½æ•°çš„æœ€å°å€¼ã€‚ ç„¶åæŠŠÎ¸è¿­ä»£ï¼Œç›´è‡³æ”¶æ•›ã€‚ å®é™…è‡ªå·±ç¼–å†™çš„ COSTFunction.må‡½æ•° è°ƒç”¨æ¢¯åº¦ä¸‹é™ç®—æ³• 5.7 å¤šå…ƒåˆ†ç±»ï¼šä¸€å¯¹å¤š é—®é¢˜ æˆ‘ä»¬çŸ¥é“ç”¨Logistic å‡½æ•°å¯¹ç±»å‹è¿›è¡ŒäºŒç»´åˆ†ç±»ï¼Œé‚£ä¹ˆå¦‚ä½•è¿›è¡Œå¤šå…ƒåˆ†ç±»å‘¢ï¼Ÿ è§£å†³ é‡‡ç”¨â€œä¸€å¯¹ä½™â€æ–¹æ³•ï¼Œç®€å•æ¥è¯´ã€‚å°±æ˜¯å…ˆnå…ƒåˆ†ç±»å˜æˆ2å…ƒåˆ†ç±»ï¼ŒåŒºåˆ†å‡ºä¸€ä¸ªã€‚ ç„¶åå¾ªç¯ä¸Šè¿°ï¼Œç›´è‡³åŒºåˆ†å‡ºæ‰€æœ‰ã€‚ å…­ã€æ­£åˆ™åŒ– 6.1 è¿‡æ‹Ÿåˆé—®é¢˜ ä»€ä¹ˆæ˜¯è¿‡æ‹Ÿåˆ æ— è®ºæ˜¯ä¹‹å‰çš„ï¼Œçº¿æ€§å›å½’å’Œé€»è¾‘å›å½’éƒ½æœ‰å‡ºç°è¿‡åº¦æ‹Ÿåˆã€‚ çº¿æ€§å›å½’è¿‡æ‹Ÿåˆ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå›¾ä¸‰è™½ç„¶åƒæ–¹ç™¾è®¡å¾ˆå¥½çš„æ‹Ÿåˆäº†æ•°æ®ï¼Œä¿ç•™äº†æ›´å¤šç‰¹å¾x3ã€x4â€¦ä½†æ˜¯å¾ˆæ˜¾ç„¶å®ƒå¹¶ä¸èƒ½å¾—åˆ°ä¸€æ¡å¾ˆå¥½çš„é¢„æµ‹å‡½æ•°ã€‚ é€»è¾‘å›å½’è¿‡æ‹Ÿåˆ å¦‚ä½•è§£å†³è¿‡æ‹Ÿåˆ å‡å°‘ç‰¹å¾ å‡å°‘ç‰¹å¾åˆ†ä¸ºäººå·¥æˆ–è€…æ¨¡å‹é€‰æ‹©ç®—æ³•æ¥è¾¾åˆ°ç›®çš„ã€‚ä½†æ˜¯å‡å°‘ç‰¹å¾ä¼šä½¿å¾—æˆ‘ä»¬æ— è§†ä¸€äº›æœ¬è¯¥æœ‰ç”¨çš„ç‰¹å¾å˜é‡ã€‚ï¼ˆæ¯”å¦‚æˆ¿å­æ˜¯å¦æ˜äº®å¯¹é¢„æµ‹ä»·æ ¼ä¹Ÿæ˜¯æœ‰å½±å“çš„ï¼‰ æ­£åˆ™åŒ– ä¿ç•™æ‰€æœ‰ç‰¹å¾ï¼Œä½†æ˜¯å‡å°‘å®ƒä»¬çš„é‡çº§ã€‚ 6.2 ä»£ä»·å‡½æ•° æ­£åˆ™åŒ–ä¸¾ä¾‹ å¼•å­ ä¾æ—§æ˜¯å›¾äºŒï¼Œè™½ç„¶ä¿ç•™æ›´å¤šç‰¹å¾ï¼Œä½†æ˜¯å›¾å½¢è¿‡äºæµ®å¤¸ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„é¢„æµ‹å‡½æ•°ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ­£åˆ™åŒ–ï¼Œå‡å°‘ç‰¹å¾ x3ã€x4çš„å½±å“ã€‚ æ­£åˆ™åŒ– å‡å°‘ç‰¹å¾ x3ã€x4çš„å½±å“ï¼Œå¯ä»¥é€šè¿‡å‡å°‘Î¸3ã€Î¸4æ¥å®ç°ï¼š åœ¨æˆ‘ä»¬ä½¿å¾—ä»£ä»·å‡½æ•°è¶Šæ¥è¶Šå°çš„è¿‡ç¨‹ä¸­ï¼ŒÎ¸3ã€Î¸4åˆ™ä¼šè¶‹äº0ã€‚ä½¿å¾—é¢„æµ‹å‡½æ•°å¥½åƒä¸å­˜åœ¨Î¸3^3ã€Î¸4^4è¿™ä¸¤é¡¹ä¸€æ ·ï¼Œâ€“é¢„æµ‹å‡½æ•°è¶Šç®€å•è¶Šä¸ä¼šå‡ºç°è¿‡åº¦æ‹Ÿåˆâ€“ã€‚ æ­£åˆ™åŒ–æ ‡å‡†è¿‡ç¨‹ ç¡®å®šç‰¹å¾ &amp; å‚æ•° å†™å‡ºä»£ä»·å‡½æ•° åŠ å…¥æ­£åˆ™æ–°é¡¹ æ­£åˆ™æ–°é¡¹ç”¨æ¥æƒ©ç½šÎ¸å‚æ•°ï¼Œæ³¨æ„ä¸€èˆ¬ä¸å¯¹Î¸0è¿›å…¥æƒ©ç½šã€‚ æ­£åˆ™åŒ–ä¸å½“åæœ æƒ©ç½šè¿‡å¤§ ä½¿å¾—å‚æ•° Î¸ éƒ½è¶‹äº0ï¼Œé‚£ä¹ˆé¢„æµ‹å‡½æ•°ä¼šè¶‹è¿‘äºä¸€æ¡æ°´å¹³ç›´çº¿ã€‚ 6.3 çº¿æ€§å›å½’æ­£åˆ™åŒ– æµç¨‹ åˆ—å‡ºä»£ä»·å‡½æ•°æ­£åˆ™è¡¨è¾¾å¼ è¿›è¡Œæ¢¯åº¦ä¸‹é™ æ ¹æ®ä»¥å‰çš„æ¢¯åº¦ä¸‹é™å…¬å¼å¯ä»¥å¾—å‡ºï¼š åŠ ä¸Šæ­£åˆ™åŒ–è¿›è¡Œçš„å˜å½¢æ¢¯åº¦ä¸‹é™å…¬å¼ï¼š ç›¸æ¯”ä¹‹å‰ï¼Œæ¯æ¬¡æ›´æ–°éƒ½å¯¹Î¸j*(1 - Î±*Î»/m)ï¼Œè€Œ (1 - Î±*Î»/m) æ˜¯ä¸€ä¸ªæ¯” 1å°ä¸€ç‚¹çš„æ•°ï¼Œåˆ™ç›¸æ¯”æœªæ­£åˆ™åŒ–å‰åŠ å¿«å‘0çš„æ–¹å‘è¶‹è¿‘ï¼Ÿï¼Ÿ é‡‡ç”¨æ­£è§„æ–¹ç¨‹æ¥è§£å†³(æ‰€æœ‰ç‰¹å¾xéƒ½æ˜¯ä¸€æ¬¡ï¼Œçº¿æ€§å›å½’) æ ¹æ®ä¹‹å‰æ­£è§„æ–¹ç¨‹è§£å‡ºÎ¸ï¼Œæ¨å¯¼è¿‡ç¨‹ï¼š Î¸=(XTX)âˆ’1XTy\\theta = (X^TX)^{-1}X^Ty Î¸=(XTX)âˆ’1XTy å¦‚æœä½¿ç”¨æ­£åˆ™åŒ–åˆ™åº”è¯¥æ˜¯ï¼š æ³¨æ„ï¼šåªè¦Î»&gt;0ï¼Œä¸Šå¼ï¼ˆï¼‰ä¸­ä¸€å®šå¯é€†ã€‚ 6.4 Logistic å›å½’æ­£åˆ™åŒ– æµç¨‹ åˆ—å‡ºä»£ä»·å‡½æ•°æ­£åˆ™è¡¨è¾¾å¼ æ¢¯åº¦ä¸‹é™ç®—æ³• octaveå®ç° å†™å‡ºcostFunctionå‡½æ•° ä¸ƒã€ç¥ç»ç½‘ç»œå­¦ä¹  7.1 éçº¿æ€§å‡è®¾ â€‹ åœ¨å‰é¢æˆ‘ä»¬è¿›è¡Œéƒ½æ˜¯çº¿æ€§å‡è®¾ï¼Œå¦‚ ï¼š h = Î¸0 + Î¸1x1 + Î¸2x2 ï¼Œè€Œä¸ä¼šå‡ºç° x1x2ã€x1^2*x2â€¦ä¹‹ç±»ã€‚ å¤šé¡¹ç‰¹å¾å¤„ç† ä¸¤é¡¹ç‰¹å¾æ—¶logisticå›å½’ æ³¨æ„ä¸‹é¢åªæœ‰ä¸¤ä¸ªç‰¹å¾x1ã€x2ï¼Œä½†æ˜¯æ˜¯éçº¿æ€§ï¼Œè¿›è¡Œå›å½’åˆ†ç±»ã€‚ å¤šä¸ªç‰¹å¾æ—¶ ä¸¾ä¾‹è¯†åˆ«æ±½è½¦ æµç¨‹ ç»™æ¯ä¸ªæ ·æœ¬é›†è¾“å…¥å­¦ä¹ ç®—æ³•å¾—å‡ºåˆ†ç±»å™¨ ç»™ä¸€è¾†æ±½è½¦æ ‡è®°ä¸¤ä¸ªåƒç´ ä½ç½®pixel1ã€pixel2ï¼Œå¹¶è®°å½•å®ƒä»¬åƒç´ å¼ºåº¦åæ ‡ ç„¶åå†è®°å½•å¦ä¸€è¾†æ±½è½¦ç›¸åŒåƒç´ ä½ç½®çš„ï¼Ÿï¼Ÿï¼Ÿåƒç´ å¼ºåº¦åæ ‡ é‡å¤ä»¥ä¸Šå¾—å‡ºæ›´å¤šå·¦è¾¹å¯¹å®ƒä»¬è¿›è¡Œåˆ†ç±» ä½†æ˜¯ï¼Œä¸€å¼ 50*50å›¾ç‰‡éƒ½æœ‰2500ä¸ªåƒç´ ç‚¹ä½ç½®ï¼Œå¯¹åº”2500ä¸ªåƒç´ å¼ºåº¦ã€‚å¦‚æœè¿˜è¦åŒ…å«æ‰€æœ‰çš„äºŒæ¬¡é¡¹ç‰¹å¾çº¦æœ‰300ä¸‡ä¸ªã€‚ è®©åˆ†ç±»å™¨å»åˆ¤æ–­ä¸€ä¸ªæ–°æ ·æœ¬æ˜¯å¦æ˜¯æ±½è½¦ 7.2 ç¥ç»å…ƒä¸å¤§è„‘ ç•¥ 7.3 æ¨¡å‹å±•ç¤º æ¨¡å‹å±•ç¤º1 ç¥ç»å…ƒ ç¥ç»å…ƒæ¨¡å‹ ç¥ç»ç½‘ç»œ å…·ä½“è§£é‡Š å„ä¸ªå‡ºç°å‚æ•°å«ä¹‰ ai^j ,ç¬¬j å±‚â€œæ¿€æ´»çš„ç¥ç»å…ƒâ€ç”¨æ¥è®¡ç®—å‰ä¸€å±‚ï¼ˆj-1ï¼‰è¾“å…¥x1ã€x2ã€x3çš„å€¼ï¼› Î¸^jï¼Œç”¨æ¥æ§åˆ¶ä»ç¬¬j åˆ° j +1å±‚çš„æ˜ å°„æƒé‡ã€‚ è®¡ç®—æµç¨‹ â€‹ ç¬¬äºŒå±‚æ´»åŠ¨ç¥ç»å…ƒai^2 ï¼Œè®¡ç®—ä»ç¬¬ä¸€å±‚åˆ°ç¬¬äºŒå±‚çš„æ˜ å°„ï¼ŒåŒæ—¶Î¸^1æ¥æ§åˆ¶æ˜ å°„æƒé‡ã€‚ â€‹ ç„¶åç¬¬ä¸‰å±‚ï¼Œè®¡ç®—æœ€ç»ˆç»“æœï¼š åœ¨ä¸Šé¢è¿™ä¸ªå¼ä¸­ï¼Œéå¸¸ç±»ä¼¼äºé€»è¾‘å›å½’ï¼š Logisticå‡½æ•°:hÎ¸(x)=g(Î¸Tx)Logistic å‡½æ•° :h_\\theta(x) = g(\\theta^Tx) Logisticå‡½æ•°:hÎ¸â€‹(x)=g(Î¸Tx) â€‹ åªä¸è¿‡ï¼Œå®ƒä¸æ˜¯ç›´æ¥åˆ©ç”¨x1ã€x2ã€x3ç‰¹å¾ä½œä¸ºè¾“å…¥ï¼Œè€Œæ˜¯å…ˆåˆ©ç”¨ç¬¬äºŒå±‚â€œç¥ç»å…ƒâ€è¿›è¡Œè®¡ç®—ã€‚å¾—å‡ºa0ï¼ˆå¤šæ·»åŠ çš„basicå•å…ƒï¼‰ã€a1ã€a2ã€a3ã€‚ æ€»ç»“ â€‹ ç¬¬jå±‚æœ‰sjä¸ªå•å…ƒï¼Œç¬¬j+1å±‚æœ‰sj+1ä¸ªå•å…ƒï¼Œé‚£ä¹ˆæ§åˆ¶ä»jå±‚åˆ°j+1å±‚æ˜ å°„æƒé‡Î¸jçš„ä¸ªæ•°åº”è¯¥æ˜¯ï¼Œç¬¬j+1å±‚å•å…ƒæ•° * ï¼ˆç¬¬jå±‚å•å…ƒæ•° + 1ï¼‰ï¼Œå³ï¼š sj+1âˆ—ï¼ˆsj+1ï¼‰,ç¬¬jå±‚ä¼šè¡¥ä¸€ä¸ªx0s_{j+1} * ï¼ˆs_j + 1ï¼‰,ç¬¬jå±‚ä¼šè¡¥ä¸€ä¸ªx_0 sj+1â€‹âˆ—ï¼ˆsjâ€‹+1ï¼‰,ç¬¬jå±‚ä¼šè¡¥ä¸€ä¸ªx0â€‹ æ¨¡å‹å±•ç¤º2 å‘é‡åŒ–ç¥ç»ç½‘ç»œå…¬ç¤º æ›´å¤æ‚çš„ç¥ç»ç½‘ç»œä¸¾ä¾‹ 7.4 ä¾‹å­å’Œç›´è§‰ç†è§£ ç›´è§‰ç†è§£1 ç¥ç»å…ƒå‡½æ•°è®¡ç®— AND å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæœ‰ä¸¤ä¸ªç‰¹å¾x1ã€x2åªå¯èƒ½æ˜¯ 0 æˆ–è€… 1ï¼ŒåŒæ—¶ç»™å®ƒä»¬èµ‹äºˆæƒé‡ Î¸: -30ã€+20ã€+20ï¼ˆ-30ç»™å¢åŠ çš„basicå•å…ƒï¼‰ã€‚ é‚£ä¹ˆå¯¹åº”çš„h(x)ï¼Œä¸ºï¼š hÎ¸(x)=g(âˆ’30+20x1+20x2)h_\\theta(x)=g(-30+20x_1+20x_2) hÎ¸â€‹(x)=g(âˆ’30+20x1â€‹+20x2â€‹) å¯¹åº”å‡½æ•°å›¾å½¢ä¸ºï¼š é‚£ä¹ˆè¾“å…¥x1ã€x2å¾—å‡ºçš„ç‰¹å¾å€¼æ˜¯ è®¡ç®—ç»“æœæ°ä¸º x1 &amp; x2ï¼Œå®ç°äº†ç¥ç»ç½‘ç»œé€»è¾‘ANDè¿ç®—ã€‚ ç¥ç»ç½‘ç»œè®¡ç®—OR åŸºæœ¬åŒä¸Šè¿‡ç¨‹ï¼š ç¥ç»ç½‘ç»œè®¡ç®—NOT ç”±äºæƒé‡Î¸1 = - 20 ï¼Œå½“ x1 = 0 æ—¶ï¼Œ h = 1ï¼Œè¶‹è¿‘1 ï¼› åä¹‹ x2 = 1 ï¼Œh = 0 ï¼Œè¾¾åˆ°å–åçš„æ•ˆæœã€‚ â€‹ è¿›ä¸€æ­¥è¿˜å¯ä»¥å¾—åˆ°ï¼Œè®¡ç®— NOT x_1 AND NOT x_2ã€‚ â€‹ åªæœ‰å½“ x1 = x2 = 0ï¼Œh = 1ã€‚é‚£ä¹ˆåªéœ€ å¯¹åº”æƒé‡Î¸1 ã€Î¸2 ä¸ºä¸€ä¸ªè¾ƒå¤§è´Ÿæ•°ï¼ŒÎ¸0 ä¸ºä¸€ä¸ªæ•´æ•°ï¼Œåªè¦ x1ã€x2æœ‰ä¸€ä¸ªä¸ä¸º0ï¼Œé‚£ä¹ˆç»“æœå¿…ä¸º0ã€‚ ç›´è§‰ç†è§£2 ç»„åˆæˆæ›´å¤æ‚çš„ç¥ç»ç½‘ç»œè®¡ç®— x1 XNOR x2 åŸºæœ¬ç¥ç»ç½‘ç»œé€»è¾‘è®¡ç®— ç»„åˆè®¡ç®—x1 XNOR x2 â€‹ x1 XNOR x2ï¼Œå³ x1ã€x2ç›¸åŒæ‰ä¼šä¸º1ã€‚è€Œå®ƒä»¬ç›´æ¥åŸºæœ¬ç»„åˆå¾ˆéš¾è®¡ç®—å‡ºæ¥ï¼ŒæŠ“ä½ç›¸åŒäºŒå­—ï¼Œæˆ‘ä»¬å¯ä»¥è”æƒ³ç”¨ANDã€‚åœ¨æ­¤ä¹‹å‰ä¸€å±‚ï¼š x1 = x2 = 0ï¼Œè¦ç»è¿‡è®¡ç®—å¾—å‡ºä¸º1ï¼Œæ˜¾ç„¶è¦ç”¨NOT x_1 AND NOT x_2 x1 = x2 = 1ï¼Œè¦ç»è¿‡è®¡ç®—å¾—å‡ºä¸º1ï¼Œæ˜¾ç„¶è¦ç”¨ AND å³å¯ æ•…æœ‰å¦‚ä¸‹ç»„åˆï¼š å…¶ä»–æ›´å¤æ‚è®¡ç®—ï¼ˆæ‰‹è¿¹åˆ¤åˆ«ï¼‰ 7.5 å¤šå…ƒåˆ†ç±»----ä»¥è¯†åˆ«æ±½è½¦ã€äººã€æ‘©æ‰˜ä¸¾ä¾‹ â€‹ ä¸ŠèŠ‚çœ‹åˆ°çš„è¯†åˆ«æ‰‹è¿¹æ•°å­—ï¼Œå°±æ˜¯ä¸€ä¸ªå¤šå…ƒåˆ†ç±»é—®é¢˜ï¼ˆè¯†åˆ«æ•°å­— 0~9ï¼‰ã€‚ç¥ç»å…ƒç½‘ç»œå®ç°å¤šå…ƒåˆ†ç±»ï¼Œæœ¬è´¨å°±æ˜¯ä¸€å¯¹å¤šæ³•çš„æ‰©å±•ã€‚ ä¸¾ä¾‹ â€‹ ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯ç»™å‡ºç‰¹å¾ x = {x1ã€x2ã€x3â€¦}(å¦‚å‰é¢ç»™å‡ºä¸¤ä¸ªåƒç´ ç‚¹åƒç´ å¼ºåº¦x1ã€x2)ï¼Œç„¶åç»è¿‡å¤šå±‚ç¥ç»ç½‘ç»œï¼Œè¾“å‡ºé¢„æµ‹æœ€åçš„ç»“æœåˆ†ç±»ï¼ˆä¸€ä¸ª4ç»´å‘é‡ï¼‰ã€‚ ç»™å‡ºæ•°æ®é›† å¦‚ä¸‹å›¾ï¼Œç»™å‡ºå¤šä¸ªå›¾å½¢ï¼Œæ¯ä¸ªå›¾å½¢éƒ½æ˜¯ä¸€ç»„ï¼ˆx^(i)ï¼Œy^(i)ï¼‰ï¼Œå…¶ä¸­ x^(i) ï¼šå¯¹åº”å›¾åƒè¾“å…¥çš„ç‰¹å¾ï¼Œä¸ºä¸€ä¸ªnç»´å‘é‡ y^(i)ï¼šå¯¹åº”è¾“å‡ºç»“æœï¼Œç”¨ä¸€ä¸ª4ç»´å‘é‡åˆ†åˆ«è¡¨ç¤º è¡Œäººã€æ±½è½¦ã€æ‘©æ‰˜è½¦ã€è´§è½¦ã€‚ è®­ç»ƒ ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿä¸‹ä¸€ç« èŠ‚åˆ†è§£ã€‚ é¢„æµ‹ç»“æœ ç”¨ä¸Šé¢è®­ç»ƒå¥½çš„ç¥ç»ç½‘ç»œæ¥è¿›è¡Œé¢„æµ‹ï¼š å…« ã€ç¥ç»ç½‘ç»œçš„åå‘ä¼ æ’­ç®—æ³• 8.1 ä»£ä»·å‡½æ•° ç¥ç»ç½‘ç»œä¸­å­—æ¯è®°æ³• L : ä»£è¡¨ç¥ç»ç½‘ç»œå±‚æ•°ï¼Œå¦‚ä¸‹å›¾ä¸º L = 4 ; S_l ï¼šä»£è¡¨ç¬¬ l å±‚çš„å•å…ƒæ•°ï¼Œå¦‚ä¸‹å›¾S_L = 4 ï¼ˆæœ€åä¸€å±‚ï¼ŒåŒæ—¶ä¹Ÿå¯è®°ä¸º K = 4ï¼‰ã€‚ Kï¼šä¸€èˆ¬è®°å½•ä¸ºæœ€åä¸€å±‚è¾“å‡ºå•å…ƒæ•° x^(i) ã€y^(i) ï¼šæ˜¯å‘é‡ï¼Œy^(i)è¡¨ç¤ºç¬¬ iä¸ªæ•°æ®é›†çš„è¾“å‡ºï¼Œç”±äºæœ‰4ä¸ªè¾“å‡ºå•å…ƒæ‰€ä»¥4ç»´ã€‚ å¦‚ ç¬¬2ä¸ªæ•°æ®é›†ï¼Œç¬¬ä¸€ä¸ªè¾“å‡ºå•å…ƒæ˜¯äººï¼Œy^(i) = (1 0 0 0)T ä»£ä»·å‡½æ•° Logistic å›å½’ä»£ä»·å‡½æ•° Logisticä»£ä»·å‡½æ•° ï¼šâˆ‘mç»„æ•°æ®ï¼ˆh(x)é¢„æµ‹ä»£ä»·åå·®ï¼‰ * 1/m ï¼Œç„¶åæ­£åˆ™åŒ–ã€‚ ç¥ç»ç½‘ç»œä»£ä»·å‡½æ•° ä»£ä»·å‡½æ•°ç†è§£ â€‹ âˆ‘mç»„æ•°æ®ï¼ˆKä¸ªè¾“å‡ºå•å…ƒh(x)é¢„æµ‹ä»£ä»·åå·®å’Œï¼‰ * 1/m ï¼Œç„¶åæ­£åˆ™åŒ–ã€‚ â€‹ ä¹Ÿå°±æ˜¯è¯´å¯¹äºæ¯ç»„æ•°ç»„ï¼Œæœ€åéƒ½æœ‰å››ä¸ªè¾“å‡ºå•å…ƒï¼Œå››ä¸ªé¢„æµ‹ç»“æœ(è½¦ã€äººã€æ‘©æ‰˜è½¦â€¦)ï¼Œå¯¹å®é™…é¢„æµ‹åå·®ä»£ä»·æ±‚å’Œã€‚ç„¶åå†å¯¹mæ•°æ®äº§ç”Ÿçš„ä»£ä»·æ±‚å’Œã€‚ æ­£åˆ™åŒ–é¡¹ç†è§£ åœ¨ç¥ç»ç½‘ç»œä¸­ï¼Œæ§åˆ¶ä»ç¬¬j å±‚åˆ° ç¬¬ j+1 å±‚æƒé‡Î¸æ•°æ˜¯ sj+1âˆ—ï¼ˆsj+1ï¼‰,ç¬¬jå±‚ä¼šè¡¥ä¸€ä¸ªx0s_{j+1} * ï¼ˆs_j + 1ï¼‰,ç¬¬jå±‚ä¼šè¡¥ä¸€ä¸ªx_0 sj+1â€‹âˆ—ï¼ˆsjâ€‹+1ï¼‰,ç¬¬jå±‚ä¼šè¡¥ä¸€ä¸ªx0â€‹ ä¸è€ƒè™‘ï¼Œç¬¬jå±‚ basic Î¸0 ï¼Œé‚£ä¹ˆåº”è¯¥æ˜¯ï¼š sj+1âˆ—sjs_{j+1} * s_j sj+1â€‹âˆ—sjâ€‹ æ‰€ä»¥ä¸å«è¾“å‡ºå±‚æ‰€æœ‰ç½‘ç»œå±‚çš„Î¸ï¼ˆå–å¹³æ–¹ï¼‰ç´¯åŠ ä¾¿åº”è¯¥æ˜¯ âˆ‘l=1Lâˆ’1âˆ‘i=1s1âˆ‘j=1sl+1(Î¸jil)2\\sum_{l=1}^{L-1}\\sum_{i=1}^{s_1}\\sum_{j=1}^{s_l+1}(\\theta_{ji}^l)^2 l=1âˆ‘Lâˆ’1â€‹i=1âˆ‘s1â€‹â€‹j=1âˆ‘slâ€‹+1â€‹(Î¸jilâ€‹)2 8.2 åå‘ä¼ æ’­ç®—æ³• æ¢¯åº¦ä¸‹é™è®¡ç®—æµç¨‹ è€Œç°åœ¨çš„å…³é”®å°±æ˜¯ï¼Œå¦‚ä½•è®¡ç®—åå¯¼é¡¹ï¼Œè¿™åˆ©ç”¨åˆ°å‰å‘ä¼ æ’­ &amp; åå‘ä¼ æ’­ç®—æ³•ã€‚ å‘é‡åŒ–å‰å‘ä¼ æ’­ç®—æ³•æµç¨‹ ä¸‹å›¾ç»™å®šä¸€ä¸ªè®­ç»ƒä¾‹å­(x,y)ï¼Œè¿›è¡Œå‰å‘ä¼ æ’­å¾—å‡ºh(x)é¢„æµ‹ç»“æœï¼ˆ4è¾“å‡ºå•å…ƒç»“æœï¼‰è¿‡ç¨‹ é‚£ä¹ˆè‡³æ­¤ï¼Œå¯ä»¥è®¡ç®—å‡ºå„å±‚çš„æ¿€æ´»å•å…ƒè¾“å‡ºå€¼ a^(4)ã€‚ å‘é‡åå‘ä¼ æ’­ç®—æ³• æ ¹æ®å‰å‘ä¼ æ’­è®¡ç®—å‡ºçš„å„å•å…ƒæ¿€æ´»å€¼a^(4) ï¼Œå¯ä»¥è¿›ä¸€æ­¥è®¡ç®—å‡ºåå‘ä¼ æ’­ã€‚ è®¡ç®—è¾“å‡ºå±‚å„æ¿€æ´»å•å…ƒå•å…ƒæ¿€æ´»å€¼ï¼ˆé¢„æµ‹å€¼ï¼‰ å’Œ çœŸå®å€¼è¯¯å·® aj(4)a_j^{(4)}aj(4)â€‹ æ˜¯æœ€åä¸€å±‚å•å…ƒè¾“å‡ºå€¼ï¼Œä¹Ÿå°±æ˜¯é¢„æµ‹å€¼ï¼›yjy_jyjâ€‹ æ˜¯å®é™…çš„çœŸå®å€¼ï¼Œå®ƒä»¬ç›¸å‡ä¾¿æ˜¯ç¬¬4å±‚ç¬¬jä¸ªè¾“å‡ºå•å…ƒè¯¯å·® æ¥ç€ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä¸‹å›¾å…¬å¼è®¡ç®—å…¶ä½™å„å±‚å•å…ƒè¯¯å·®ï¼ˆæ­¤æ—¶è¯¯å·®æ˜¯å‘é‡ï¼Œä»£è¡¨ç¬¬Lå±‚æ‰€æœ‰å•å…ƒè¯¯å·®å‘é‡ï¼Œè€Œä¸æ˜¯æŸä¸ªå…·ä½“å•å…ƒï¼‰ ä¸ç”¨è®¡ç®—ç¬¬ä¸€å±‚è¯¯å·®ï¼Œç¬¬ä¸€å±‚æ˜¯å®é™…è¾“å…¥ å…¶ä¸­ï¼š gâ€²(z(i))=a(i)âˆ—(1âˆ’a(i))g&#x27;(z^{(i)}) = a^{(i)} * (1-a^{(i)})gâ€²(z(i))=a(i)âˆ—(1âˆ’a(i)) æµç¨‹æ±‡æ€» ç»™å®šæ•°æ®åˆå§‹åŒ– å…¶ä¸­æ¯ä¸ªæ¿€æ´»å•å…ƒéƒ½æœ‰å¯¹åº”è¯¯å·®ï¼š Î”ij(l):è¡¨ç¤ºç¬¬iç»„æ•°æ®ï¼Œç¬¬lå±‚ï¼Œç¬¬jä¸ªæ¿€æ´»å•å…ƒ\\Delta_{ij}^{(l)}:è¡¨ç¤ºç¬¬iç»„æ•°æ®ï¼Œç¬¬lå±‚ï¼Œç¬¬jä¸ªæ¿€æ´»å•å…ƒ Î”ij(l)â€‹:è¡¨ç¤ºç¬¬iç»„æ•°æ®ï¼Œç¬¬lå±‚ï¼Œç¬¬jä¸ªæ¿€æ´»å•å…ƒ è®¡ç®—æ‰€æœ‰æ•°æ®ç¥ç»ç½‘ç»œè¯¯å·®å’Œ åœ¨è¿™ä¸ªå¾ªç¯ä¸­ ï¼š Î”ij(l):ç¬¬ä¸€æ¬¡å¾ªç¯ï¼šæ˜¯ç¬¬ä¸€æ¬¡ç¥ç»ç½‘ç»œæ‰€æœ‰å•å…ƒè¯¯å·®å€¼ï¼›ç¬¬äºŒæ¬¡å¾ªï¼šç¬¬ä¸€æ¬¡å¾ªç¯è¯¯å·®å’Œ+ç¬¬äºŒæ¬¡å¾ªç¯è¯¯å·®å’Œï¼›ä»¥æ­¤ç±»æ¨ã€‚\\Delta_{ij}^{(l)}:ç¬¬ä¸€æ¬¡å¾ªç¯ï¼šæ˜¯ç¬¬ä¸€æ¬¡ç¥ç»ç½‘ç»œæ‰€æœ‰å•å…ƒè¯¯å·®å€¼ï¼›\\\\ ç¬¬äºŒæ¬¡å¾ªï¼šç¬¬ä¸€æ¬¡å¾ªç¯è¯¯å·®å’Œ + ç¬¬äºŒæ¬¡å¾ªç¯è¯¯å·®å’Œï¼›\\\\ä»¥æ­¤ç±»æ¨ã€‚ Î”ij(l)â€‹:ç¬¬ä¸€æ¬¡å¾ªç¯ï¼šæ˜¯ç¬¬ä¸€æ¬¡ç¥ç»ç½‘ç»œæ‰€æœ‰å•å…ƒè¯¯å·®å€¼ï¼›ç¬¬äºŒæ¬¡å¾ªï¼šç¬¬ä¸€æ¬¡å¾ªç¯è¯¯å·®å’Œ+ç¬¬äºŒæ¬¡å¾ªç¯è¯¯å·®å’Œï¼›ä»¥æ­¤ç±»æ¨ã€‚ ä¸Šé¢ j æ²¡æœ‰å˜åŒ–ï¼Ÿï¼Ÿ è®¡ç®—åå¯¼é¡¹ï¼ˆè·³å‡ºä¸Šè¯‰å¾ªç¯åï¼‰ æ³¨æ„ï¼šç¬¬0ä¸ªæ¿€æ´»å•å…ƒï¼Œä¸ç”¨åŠ æ ‡å‡†åŒ–é¡¹ ç»è¿‡æ•°å­¦è¯æ˜å¯ä»¥å¾—å‡ºï¼Œä»£ä»·å‡½æ•°åå¯¼é¡¹å¦‚ä¸‹ï¼š 8.3 ç†è§£åå‘ä¼ æ’­ å‰å‘ä¼ æ’­ æ³¨æ„å¦‚ä½•è®¡ç®—å‡ºzï¼Œåˆè¿›ä¸€æ­¥è®¡ç®—å‡ºa â€‹ åå‘ä¼ æ’­ æŠŠæœ€å¤§ä¼¼ç„¶å‡½æ•°ï¼Œå½“åšä»£ä»·å‡½æ•°ï¼Ÿå’Œé€»è¾‘å›å½’å·®ä¸å¤šï¼Œå‹‰å¼ºå¯ä»¥ç†è§£ã€‚ è¯¯å·® = ä»£ä»·å‡½æ•°å¯¹ zj(l)z_j^{(l)}zj(l)â€‹ å¯¼æ•°ï¼Ÿ æ¼”ç¤ºåå‘ä¼ æ’­å¦‚ä½•è¿›è¡Œ Î´2(2)\\delta_2^{(2)}Î´2(2)â€‹ çš„è®¡ç®—ã€‚ Î´2(2)\\delta_2^{(2)}Î´2(2)â€‹ æ ¹æ®ç®­å¤´å¯çŸ¥ï¼Œç¬¬ä¸‰å±‚æœ‰ä¸¤ä¸ªç®­å¤´æŒ‡å‘å®ƒï¼Œéœ€è¦è®¡ç®—å‡º Î´1(3)\\delta_1^{(3)}Î´1(3)â€‹ ã€Î´2(3)\\delta_2^{(3)}Î´2(3)â€‹ ï¼Œè€Œ Î´1(3)\\delta_1^{(3)}Î´1(3)â€‹ ã€Î´2(3)\\delta_2^{(3)}Î´2(3)â€‹ éœ€è¦å…ˆè®¡ç®—ç¬¬å››å±‚è¯¯å·®ã€‚ é¦–å…ˆè®¡ç®—å‡ºç¬¬å››å±‚è¯¯å·®ï¼š Î´1(4)=y(i)âˆ’a1(4)\\delta_1^{(4)} = y^{(i)} - a_1^{(4)}Î´1(4)â€‹=y(i)âˆ’a1(4)â€‹ æ ¹æ®å‰ä¸€å±‚å•å…ƒè¯¯å·® = ä¸‹ä¸€å±‚å¯¹åº”å•å…ƒï¼ˆæœ‰ç®­å¤´ï¼‰* æƒé‡ å¯è®¡ç®—å‡ºç¬¬ä¸‰å±‚å•å…ƒè¯¯å·®ï¼š Î´1(3)=Î¸11(3)Î´1(4)\\delta_1^{(3)} = \\theta_{11}^{(3)} \\delta_1^{(4)}Î´1(3)â€‹=Î¸11(3)â€‹Î´1(4)â€‹ Î´2(3)=Î¸12(3)Î´1(4)\\delta_2^{(3)} = \\theta_{12}^{(3)} \\delta_1^{(4)}Î´2(3)â€‹=Î¸12(3)â€‹Î´1(4)â€‹ åˆ™å¯¹åº”ç¬¬äºŒå±‚å•å…ƒè¯¯å·®ï¼š Î´2(2)=Î¸12(2)Î´1(3)+Î¸22(2)Î´2(3)\\delta_2^{(2)} = \\theta_{12}^{(2)} \\delta_1^{(3)} + \\theta_{22}^{(2)} \\delta_2^{(3)}Î´2(2)â€‹=Î¸12(2)â€‹Î´1(3)â€‹+Î¸22(2)â€‹Î´2(3)â€‹ ä½†æ˜¯å‰é¢ä¸è¿˜æ˜¯æœ‰åé¢é‚£é¡¹å—ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ 8.4 å±•å¼€å‚æ•° å‘é‡åŒ– Î¸ä¸ºä»€ä¹ˆæœ‰ä¸‰ä¸ª?? 8.5 æ¢¯åº¦æ£€æµ‹ 8.6 éšæœºåˆå§‹åŒ– 8.7 ç»„åˆ 8.8 æ— äººé©¾é©¶ä¸¾ä¾‹ ä¹ã€åº”ç”¨æœºå™¨å­¦ä¹ çš„å»ºè®® 9.1 è¯„ä¼°å‡è®¾ ä¸€éƒ¨åˆ†æ•°æ®ï¼ˆ70%ï¼‰ç”¨æ¥è®­ç»ƒæ¨¡å‹ï¼Œä¸€éƒ¨åˆ†æ•°æ®ï¼ˆ30%ï¼‰ç”¨æ¥æµ‹è¯•éªŒè¯ã€‚è€ŒéªŒè¯é€šè¿‡è®¡ç®—è¯¯å·®æ–¹å¼æ¥è¡¡é‡æ•°æ®é›†æ˜¯å¦å‡†ç¡®ã€‚å¸¸ç”¨æ–¹æ³•æœ‰ï¼š è®¡ç®—æµ‹è¯•æ•°æ®é›†ä»£ä»·å‡½æ•° ç»Ÿè®¡è¯¯å·®åˆ†ç±» 9.2 æ¨¡å‹é€‰æ‹© å¯¹äºä¸€ä¸ªæ¨¡å‹å¦‚ä½•é€‰æ‹©æ‹Ÿåˆå‡½æ•°ï¼Ÿ æ°å½“çš„åšæ³•æ˜¯æŠŠä¸€ä¸ªæ•°æ®é›†åˆ†ä¸ºï¼šè®­ç»ƒé›†(60%)ã€äº¤å‰éªŒè¯é›†(20%)ã€æµ‹è¯•é›†(20%)ã€‚ âš ï¸ æ³¨æ„è¿™é‡Œå®šä¹‰çš„éƒ½æ˜¯ è¯¯å·® ï¼ŒçœŸæ­£çš„ä»£ä»·å‡½æ•° JÎ¸J_\\thetaJÎ¸â€‹ æ˜¯å¯èƒ½ä¼šæœ‰æ­£åˆ™é¡¹çš„ï¼ å…·ä½“çš„è®­ç»ƒè¿‡ç¨‹ä¸ºï¼š è®­ç»ƒæ¨¡å‹ é€‰æ‹©ä¸åŒçš„æ¨¡å‹ï¼ˆé¢„æµ‹å‡½æ•°ï¼‰hÎ¸1(x)h_{\\theta_1}{(x)}hÎ¸1â€‹â€‹(x)ã€hÎ¸2(x)h_{\\theta_2}{(x)}hÎ¸2â€‹â€‹(x) â€¦hÎ¸i(x)h_{\\theta_i}{(x)}hÎ¸iâ€‹â€‹(x)ï¼Œç”¨ è®­ç»ƒé›† è®­ç»ƒå‡ºå¯¹åº”çš„å‚æ•°Î¸1\\theta_1Î¸1â€‹ ã€Î¸2\\theta_2Î¸2â€‹ â€¦Î¸i\\theta_iÎ¸iâ€‹ é€‰æ‹©æ¨¡å‹ åˆ©ç”¨ äº¤å‰éªŒè¯é›† è®¡ç®—ä¸åŒæ¨¡å‹ä¸‹çš„è¯¯å·® Jcv(Î¸1)J_{cv}(\\theta_1)Jcvâ€‹(Î¸1â€‹)ã€ Jcv(Î¸2)J_{cv}(\\theta_2)Jcvâ€‹(Î¸2â€‹)â€¦ Jcv(Î¸i)J_{cv}(\\theta_i)Jcvâ€‹(Î¸iâ€‹) ï¼Œé€‰æ‹©è¯¯å·®æœ€å°å¯¹åº”çš„æ¨¡å‹ã€‚ éªŒè¯æ¨¡å‹ æœ€ååˆ©ç”¨ æµ‹è¯•é›† æ¥å¯¹æˆ‘ä»¬é€‰æ‹©çš„æ¨¡å‹è¿›è¡Œæœ€ç»ˆéªŒè¯ã€‚ 9.3 è¯Šæ–­åå·®å’Œæ–¹å·® å¦‚ä½•åˆ¤æ–­æˆ‘ä»¬çš„æ¨¡å‹å‡ºç°äº†é«˜åå·®æˆ–è€…é«˜æ–¹å·®ï¼Ÿ å‡ºç°é«˜åå·®ï¼ˆæ¬ æ‹Ÿåˆï¼‰ æ­¤æ—¶è®­ç»ƒè¯¯å·®å’Œäº¤å‰éªŒè¯è¯¯å·®éƒ½å¾ˆå¤§ï¼ˆè¯¯å·®éƒ½å¤§è¯´æ˜æ¨¡å‹ä¸å¤Ÿå¥½ï¼‰ã€‚ å‡ºç°é«˜æ–¹å·®ï¼ˆè¿‡æ‹Ÿåˆï¼‰ è®­ç»ƒè¯¯å·®å¾ˆå°ï¼Œè€Œäº¤å‰éªŒè¯è¯¯å·®å¾ˆå¤§ã€‚è¯´æ˜åœ¨æ–°çš„æ•°æ®æ‹Ÿåˆå·®ï¼Œåªåœ¨è®­ç»ƒæ•°æ®é›†é›†åˆå¥½ï¼Œåˆ™å±äºè¿‡æ‹Ÿåˆæƒ…å†µã€‚ 9.4 æ­£åˆ™åŒ–åå·®ã€æ–¹å·® åœ¨å‰æˆ‘ä»¬çŸ¥é“é€‰æ‹©æ¨¡å‹å¯èƒ½ä¼šå‡ºç°é«˜åå·®ã€æ–¹å·®é—®é¢˜ï¼š é«˜åå·®ï¼šæ¥è¿‘ç›´çº¿ï¼Œä¸èƒ½å¾ˆå¥½æ‹Ÿåˆæ•°æ® é«˜æ–¹å·®ï¼šå¤æ‚æ›²çº¿ï¼Œå¤šé¡¹å¼è¿‡åº¦æ‹Ÿåˆæ•°æ®ï¼Œè€Œæ²¡æœ‰å¾ˆå¥½çš„æ³›åŒ–èƒ½åŠ› å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡æ­£åˆ™åŒ–å‚æ•°ä½¿å¾—æ‹Ÿåˆå‡½æ•°åœ¨ç®€å•ç›´çº¿å’Œå¤æ‚æ›²çº¿ä¸­å˜åŒ–ï¼Œä»¥ä¸‹å›¾ä¾‹å¯ä»¥ç›´è§‚è¯´æ˜ï¼š é€šè¿‡æ”¹å˜å‚æ•° Î»\\lambdaÎ» æ¥ä¿®æ­£å‚æ•° Î¸1ã€Î¸2...Î¸n\\theta_1 ã€\\theta_2 ...\\theta_nÎ¸1â€‹ã€Î¸2â€‹...Î¸nâ€‹ â€”&gt; ä¿®æ­£åå·®å’Œé«˜æ–¹å·®ã€‚ 9.4.1 å¦‚ä½•é€‰æ‹©æ­£åˆ™å‚æ•° ä¸€èˆ¬ä»¥ æ­¥é•¿=0.02æ­¥é•¿ = 0.02æ­¥é•¿=0.02 é€’å¢æ¥é€‰æ‹© Î»\\lambdaÎ» è¿›è¡Œç‚¼ä¸¹ ï¼š é€šè¿‡é€‰æ‹©åˆé€‚çš„ Î»\\lambdaÎ» ï¼Œæˆ‘ä»¬æ‰¾åˆ°ä½¿å¾—äº¤å‰éªŒè¯è¯¯å·® JcvJ_{cv}Jcvâ€‹ æœ€å°çš„Î»\\lambdaÎ»ï¼ˆçº¢è‰²æ›²çº¿æœ€ä½ç‚¹ï¼‰ 9.5 å­¦ä¹ æ›²çº¿ å¯¹äºä¸€ä¸ªç»™å®šæ•°æ®é›†ï¼Œæˆ‘ä»¬é€‰æ‹©æ¨¡å‹å‡è®¾å‡½æ•°å¯¹å…¶è¿›è¡Œè®­ç»ƒã€‚å¯ä»¥é€šè¿‡å­¦ä¹ æ›²çº¿æ¥å¸®åŠ©æˆ‘ä»¬ç›´è§‚é€‰æ‹©å‚æ•°ã€‚ å‡ºç°é«˜åå·® ä¹Ÿå°±æ˜¯å‡ºç°æ¬ æ‹Ÿåˆï¼Œå¦‚ä¸‹å›¾ï¼š æ­¤æ—¶æ— è®ºæ˜¯ è®­ç»ƒè¯¯å·®Jcv(Î¸)J_{cv}{(\\theta)}Jcvâ€‹(Î¸)ã€äº¤å‰éªŒè¯è¯¯å·® Jtrain(Î¸)J_{train}{(\\theta)}Jtrainâ€‹(Î¸) éƒ½å¾ˆå¤§ï¼Œè¿™æ˜¯ç”±äºæˆ‘ä»¬é€‰æ‹©çš„æ¨¡å‹ä¸å½“ã€‚ å‡ºç°é«˜åå·®æ— è®º ç”¨å†å¤šçš„æ•°æ®é›†ä¹Ÿæ— æ³•é™ä½è¯¯å·® ã€‚ å› æ­¤æˆ‘ä»¬éœ€è¦é€‰æ‹©æ›´å¤æ‚çš„å¤šé¡¹å¼å‡½æ•°æ¨¡å‹æ¥æ‹Ÿåˆã€‚ å‡ºç°é«˜æ–¹å·® è¿™æ˜¯å› æ­¤é€‰æ‹©çš„æ¨¡å‹è¿‡äºå¤æ‚å‡ºç°æ¬ æ‹Ÿåˆã€‚ æ­¤æ—¶ è®­ç»ƒè¯¯å·®Jcv(Î¸)J_{cv}{(\\theta)}Jcvâ€‹(Î¸) è¾ƒå°ã€äº¤å‰éªŒè¯è¯¯å·® Jtrain(Î¸)J_{train}{(\\theta)}Jtrainâ€‹(Î¸) è¾ƒå¤§ã€‚ä½†æ˜¯å¯ä»¥é€šè¿‡å¢åŠ æ•°æ®é›†æ¥å‡å°‘Jtrain(Î¸)J_{train}{(\\theta)}Jtrainâ€‹(Î¸) ã€‚ 9.6 æ€»ç»“ï¼šç®—æ³•æ•ˆæœä¸å¥½ï¼Ÿ å¦‚æœæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªæ¨¡å‹å¦‚ä¸‹ï¼Œè¿›è¡Œè®­ç»ƒï¼š é¦–å…ˆé€šè¿‡ç”»å‡º Jcv(Î¸)J_{cv}{(\\theta)}Jcvâ€‹(Î¸) ã€ Jtrain(Î¸)J_{train}{(\\theta)}Jtrainâ€‹(Î¸) å›¾åƒï¼Œæ¥åˆ¤æ–­æˆ‘ä»¬çš„ç®—æ³•å‡ºç°ä»€ä¹ˆé—®é¢˜ã€‚ ğŸ¯ æˆ‘ä»¬æœ€ç»ˆç›®æ ‡éƒ½æ˜¯ä½¿Jtrain(Î¸)J_{train}{(\\theta)}Jtrainâ€‹(Î¸) è¯¯å·®æœ€å°ã€‚ å‡ºç°é«˜åå·® å¢åŠ æ›´å¤šç‰¹å¾ï¼šå¦‚ x3ã€x4 etc.x_3ã€x_4 \\ etc.x3â€‹ã€x4â€‹ etc. å¢åŠ å¤šé¡¹ç‰¹å¾ï¼šå¦‚ x12ã€x22ã€x1x2x_1^2ã€x_2^2ã€x_1x_2x12â€‹ã€x22â€‹ã€x1â€‹x2â€‹ å‡å°‘æ­£åˆ™åŒ–å‚æ•°Î»\\lambdaÎ» ï¼šä½¿å¾—æ‹Ÿåˆå‡½æ•°æ›´åŠ å¤æ‚ å‡ºç°é«˜æ–¹å·® è·å–æ›´å¤šæ•°æ®ï¼šæ›´å¤šæ•°æ®å¯ä»¥æœ‰æ•ˆé™ä½è¯¯å·® Jtrain(Î¸)J_{train}{(\\theta)}Jtrainâ€‹(Î¸) å‡å°‘æ›´å¤šç‰¹å¾ï¼šå¯é¿å…è¿‡æ‹Ÿåˆ å¢åŠ æ­£åˆ™åŒ–å‚æ•° Î»\\lambdaÎ» ï¼šå¯é™ä½ Î¸\\thetaÎ¸ ï¼Œä½¿å¾—æ‹Ÿåˆæ›²çº¿ç®€å•ä¸€ç‚¹ã€‚ 9.6.1 å…³äºç¥ç»ç½‘ç»œ chooseï¼šå°ä¸å¤§ï¼Ÿ å°å‹ç¥ç»ç½‘ç»œä¸€èˆ¬ä¸å®¹æ˜“å‡ºç°è¿‡æ‹Ÿåˆï¼Œå¤§å‹ç¥ç»ç½‘ç»œå®¹æ˜“å‡ºç°è¿‡æ‹Ÿåˆï¼Œä½†å¯ä»¥ä½¿ç”¨æ­£åˆ™åŒ–å‚æ•°æ¥è§£å†³ã€‚ æ‰€ä»¥ä¸€èˆ¬å¯ä»¥é€‰æ‹©å¤§ç¥ç»ç½‘ç»œæ›´å¥½ã€‚ chooseï¼šéšè—å±‚ä¸ªæ•°ï¼Ÿ ä¸€èˆ¬é€‰æ‹©1 ä¸ªæ˜¯æ¯”è¾ƒåˆç†çš„é€‰é¡¹ã€‚ ä¹Ÿå¯å°è¯•å¤šä¸ªï¼Œè¿™æ ·å°±éœ€è¦æ ¹æ® Jcv(Î¸)J_{cv}{(\\theta)}Jcvâ€‹(Î¸) ã€ Jtrain(Î¸)J_{train}{(\\theta)}Jtrainâ€‹(Î¸) ç­‰è¯¯å·®æ¥åˆ¤æ–­ï¼Œå¤šå°‘éšè—å±‚ä¸ªæ•°æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚ åã€æœºå™¨å­¦ä¹ ç³»ç»Ÿè®¾è®¡ 10.1 è¯¯å·®åˆ†æ 10.1.1 å»ºè®®æªæ–½ ä»¥ä¸‹æ˜¯ä¸€ä¸ªé‚®ä»¶åˆ†ç±»å…·ä½“å®ä¾‹æé«˜æœºå™¨å­¦ä¹ åˆ†ç±»æ­£ç¡®ç‡ã€‚ å…ˆæœ‰ä¸€ä¸ªé‚®ä»¶åˆ†ç±»ç³»ç»Ÿï¼Œå®ƒå¯¹500ä¸ª CVCVCV éªŒè¯é›†è¿›è¡Œäº† 100 æ¬¡ é”™è¯¯åˆ†ç±»ã€‚æˆ‘ä»¬äººå·¥æ£€æŸ¥è¿™100ä¸ªé”™è¯¯ï¼š æˆ‘ä»¬äººå·¥åˆ†ç±»è¿™æ˜¯ä»€ä¹ˆç±»å‹é‚®ä»¶ï¼Œç„¶åæ£€æŸ¥æ˜¯ä»€ä¹ˆåŸå› ï¼ˆç‰¹å¾ï¼‰å¯¼è‡´åˆ†ç±»é”™è¯¯: ç±»å‹ï¼šè¿™ 100å°é”™è¯¯åˆ†ç±»é‚®ä»¶ï¼Œæœ‰å››ç§ç±»å‹ åˆ†ç±»é”™è¯¯åŸå› ï¼šé‚®ä»¶æ•…æ„æ‹¼å†™é”™è¯¯ã€ä¸å¯»å¸¸çš„é‚®ä»¶è·¯å¾„ç­‰ ä½¿ç”¨æ•°å€¼åˆ†æï¼Œæ¥å†³å®šæ˜¯å¦åšæŸäº›ä¼˜åŒ–ã€‚ æ¯”å¦‚ï¼Œä¸‹é¢æ˜¯å¦åº”è¯¥å°† discount / discounted / discounting ç­‰è§†ä½œä¸ºä¸€ä¸ªå•è¯ï¼Ÿ åˆå¦‚ï¼Œæ˜¯å¦åº”è¯¥å¿½ç•¥é¦–å­—æ¯å¤§å°å†™ï¼Œmom / Mom è§†ä½œä¸€ä¸ªå•è¯ï¼Ÿ æˆ‘ä»¬åº”è¯¥å°è¯•å»è¿›è¡Œä¼˜åŒ–å‰å æ•°å€¼åˆ†æé”™è¯¯ç‡å¯¹æ¯”ï¼Œå¦‚æœä¼˜åŒ–ååˆ†ç±»é”™è¯¯æ›´ä½é‚£ä¹ˆå°±è¿›è¡Œä¼˜åŒ–ï¼Œåä¹‹åˆ™å–æ¶ˆã€‚ 10.2 ä¸å¯¹ç§°æ€§åˆ†ç±»çš„è¯¯å·®è¯„ä¼° å‡è®¾æˆ‘ä»¬é¢„æµ‹ï¼šç™Œç—‡ï¼ˆy=1ï¼‰,éç™Œç—‡ï¼ˆyâ‰ 1ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥ç”»å‡ºç±»ä¼¼ä¸‹é¢çš„å››æ–¹æ ¼å­ï¼š æˆ‘ä»¬ç”±æ­¤å¯ä»¥å¾—å‡ºä¸¤ä¸ªè¯„ä¼°æ¨¡å‹çš„æ•°å­—æ¦‚ç‡ï¼š æŸ¥å‡†ç‡ ï¼š åœ¨è¿™ä¸ªæ¨¡å‹ä¸­ï¼ŒæŸ¥å‡†ç‡=é¢„æµ‹æ­£ç¡®ä¸ºç™Œç—‡æ•°(y=1)æ‰€æœ‰é¢„æµ‹ä¸ºç™Œç—‡æ•°(y=1)æŸ¥å‡†ç‡ = \\frac{é¢„æµ‹æ­£ç¡®ä¸ºç™Œç—‡æ•°(y=1)}{æ‰€æœ‰é¢„æµ‹ä¸ºç™Œç—‡æ•°(y=1)}æŸ¥å‡†ç‡=æ‰€æœ‰é¢„æµ‹ä¸ºç™Œç—‡æ•°(y=1)é¢„æµ‹æ­£ç¡®ä¸ºç™Œç—‡æ•°(y=1)â€‹ å¬å›ç‡ï¼š åœ¨è¿™ä¸ªæ¨¡å‹ä¸­ï¼Œå¬å›ç‡=é¢„æµ‹æ­£ç¡®ä¸ºç™Œç—‡æ•°(y=1)å®é™…ä¸ºç™Œç—‡æ•°(y=1)å¬å›ç‡ = \\frac{é¢„æµ‹æ­£ç¡®ä¸ºç™Œç—‡æ•°(y=1)}{å®é™…ä¸ºç™Œç—‡æ•°(y=1)}å¬å›ç‡=å®é™…ä¸ºç™Œç—‡æ•°(y=1)é¢„æµ‹æ­£ç¡®ä¸ºç™Œç—‡æ•°(y=1)â€‹ æŸ¥å‡†ç‡é«˜è¯´æ˜ False pos ä½False \\ \\ pos \\ ä½False pos ä½ (é”™è¯¯é¢„æµ‹ä¸ºç™Œç—‡æ•°ä½) ï¼›å¬å›ç‡é«˜è¯´æ˜False neg ä½False \\ \\ neg \\ ä½False neg ä½ ï¼ˆé”™è¯¯é¢„æµ‹ä¸ºéç™Œç—‡æ•°ä½ï¼‰ 10.3 ç²¾ç¡®åº¦å’Œå¬å›ç‡çš„æƒè¡¡ ä¾æ—§ä»¥ä¹‹å‰é‚£ä¸ªé¢„æµ‹ç™Œç—‡ä¸ºä¾‹ã€‚æˆ‘ä»¬çŸ¥é“é¢„æµ‹å‡½æ•° 0â‰¤hÎ¸(x)â‰¤10 â‰¤ h_\\theta{(x)} â‰¤ 10â‰¤hÎ¸â€‹(x)â‰¤1 ï¼Œä¸”é€šå¸¸æˆ‘ä»¬å½“ hÎ¸(x)&gt;0.5h_\\theta{(x)} &gt; 0.5hÎ¸â€‹(x)&gt;0.5ï¼Œé¢„æµ‹ y =1ï¼Œå³æ˜¯ç™Œç—‡ã€‚ æé«˜æŸ¥å‡†ç‡ï¼šè°¨æ…å‘Šè¯‰ç—…äººå¾—äº†ç™Œç—‡ã€‚ å‘Šè¯‰ç—…äººå¾—äº†ç™Œç—‡æ˜¯ä¸€ä»¶éœ€è¦è°¨æ…åˆ¤æ–­çš„äº‹æƒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡æé«˜ thresholdthresholdthreshold ï¼Œæ¯”å¦‚ hÎ¸(x)&gt;0.99h_\\theta{(x)} &gt; 0.99hÎ¸â€‹(x)&gt;0.99 æ—¶æ‰åˆ¤æ–­ä¸º1å‘Šè¯‰ç—…äººå¾—äº†ç™Œç—‡ã€‚ ä½†æ˜¯è¿™æ ·åšä¼šå¯¼è‡´ï¼šæŸ¥å‡†ç‡(æ­£ç¡®é¢„æµ‹ä¸ºç™Œç—‡æ•°æé«˜)å¾—åˆ°æé«˜ï¼Œè€Œå¬å›ç‡ä¸‹é™ï¼Ÿ(åˆ¤æ–­æ­£ç¡®ä¸ºç™Œç—‡æ•°ä¸‹é™)ã€‚ æé«˜å¬å›ç‡ï¼šéœ€è¦æœ‰å¯èƒ½æ‚£ç™Œç—‡ç—…äººåŠæ—¶å¾—åˆ°æ²»ç–—ã€‚ åŒä¸Šï¼Œæ­¤æ—¶åªè¦é™ä½ thresholdthresholdthreshold ï¼Œæ¯”å¦‚ hÎ¸(x)&gt;0.01h_\\theta{(x)} &gt; 0.01hÎ¸â€‹(x)&gt;0.01 å³åˆ¤æ–­ç—…äººæˆ–æœ‰ç™Œç—‡ã€‚ åŒæ ·çš„ï¼Œè¿™æ ·åšä¼šå¯¼è‡´ï¼šæŸ¥å‡†ç‡é™ä½ï¼Œè€Œå¬å›ç‡æé«˜ï¼Ÿ(åˆ¤æ–­æ­£ç¡®ä¸ºç™Œç—‡æ•°ä¸Šå‡ï¼Œå®é™…ä¸ºç™Œç—‡æ•°ä¸å˜)ã€‚ 10.3.1 å¦‚ä½•ç»¼åˆè¯„ä»·ç®—æ³•æŸ¥å‡†ç‡/å¬å›ç‡ï¼Ÿ å¯¹äºä¸‹é¢ä¸‰ä¸ªä¸åŒç®—æ³•ï¼Œæœ‰ä¸‰ä¸ªä¸åŒæŸ¥å‡†ç‡/å¬å›ç‡ï¼Œé€‰æ‹©å“ªä¸ªç®—æ³•ï¼Ÿ å¦‚æœä¸æ˜¯å¸Œæœ›ï¼šæŸ¥å‡†ç‡/å¬å›ç‡ æŸä¸ªå€¼æ›´é«˜ï¼Œæˆ‘ä»¬å¯ä»¥ç»¼åˆè¯„ä»·ç®—æ³•ã€‚ä½†æ˜¯ï¼Œå–å¹³å‡å€¼ä¸æ˜¯ä¸€ä¸ªå¥½çš„åšæ³•ã€‚æˆ‘ä»¬é‡‡ç”¨ä¸€ç§å«åš F ScoreF\\ ScoreF Score ç»¼åˆè¯„ä»·ç®—æ³•ã€‚ F ScoreF\\ ScoreF Score è¶Šå¤§åˆ™ç®—æ³•è¶Šå¥½ï¼Œæ¯”å¦‚æç«¯æƒ…å†µï¼šå¬å›ç‡=æŸ¥å‡†ç‡=1å¬å›ç‡=æŸ¥å‡†ç‡ = 1å¬å›ç‡=æŸ¥å‡†ç‡=1 ï¼Œ F Scoremax=1F\\ Score_{max} = 1F Scoremaxâ€‹=1 10.4 æœºå™¨å­¦ä¹ æ•°æ® æœ€æˆåŠŸçš„çš„ä¸æ˜¯é‚£äº›æ‹¥æœ‰æœ€å¥½çš„ç®—æ³•çš„äººï¼Œè€Œæ˜¯é‚£äº›æ‹¥æœ‰æœ€å¤šæ•°æ®çš„ã€‚ é™ä½åå·®ï¼šä½¿ç”¨å¸¦æœ‰ä¼—å¤šå‚æ•°çš„ç®—æ³•æ¥é™ä½åå·®ï¼Œæ¯”å¦‚æ‹¥æœ‰å¤æ‚éšè—å±‚çš„ç¥ç»ç½‘ç»œã€‚ é™ä½æ–¹å·®ï¼šä½¿ç”¨å¤§æ•°æ®é›†æ¥é™ä½æ–¹å·®ï¼Œä½¿å¾—æµ‹è¯•é›†è¯¯å·®ä¹Ÿä¼šç›¸åº”å¾ˆå°ã€‚ äºŒè€…ç»“åˆï¼Œæœºå™¨å­¦ä¹ ï¼Œåƒç§‹ä¸‡ä»£ï¼Œä¸€ç»Ÿæ±Ÿæ¹–ã€‚ åä¸€ã€æ”¯æŒå‘é‡æœº(SVM) 11.1 ä¼˜åŒ–ç›®æ ‡ æˆ‘ä»¬å¯¹æ­¤å‰çš„ logistic å›å½’ä»£ä»·è¿›è¡Œä¸€äº›ä¿®æ”¹ã€‚ yi=1æ—¶ï¼Œä»£ä»·å‡½æ•°=âˆ’log11+e(âˆ’Î¸Tx)y_i = 1 æ—¶ï¼Œä»£ä»·å‡½æ•° = - log\\frac{1}{1+e^{(-\\theta^Tx)}}yiâ€‹=1æ—¶ï¼Œä»£ä»·å‡½æ•°=âˆ’log1+e(âˆ’Î¸Tx)1â€‹ ï¼šå¦‚å·¦å›¾ï¼Œæˆ‘ä»¬æƒ³è¦æ­¤æ—¶ z=Î¸Tx&gt;&gt;0z = \\theta^Tx &gt;&gt; 0z=Î¸Tx&gt;&gt;0 ï¼Œå¦‚æœæ»¡è¶³åˆ™ä»£ä»·è¶Šå°ï¼Œä¸æ»¡è¶³åˆ™ä»£ä»·åˆ™è¶Šå¤§ã€‚ è€Œæ”¯æŒå‘é‡æœºä»£ä»·å‡½æ•° cost1(z)cost_1(z)cost1â€‹(z) åˆ™æ˜¯ä¸€æ¡æŠ˜çº¿ï¼Œé€¼è¿‘äºåŸæœ¬ä»£ä»·å‡½æ•°ï¼š z&gt;1æ—¶z &gt;1 æ—¶z&gt;1æ—¶ï¼šæ­¤æ—¶ä»£ä»·ä¸º0ï¼Œæ¢è¨€ä¹‹z&gt;1âˆ’&gt;hÎ¸(x)å§‹ç»ˆ=1âˆ’&gt;ä»£ä»·å‡½æ•°=âˆ’log11+e(âˆ’Î¸Tx)=0z &gt;1 -&gt; h_\\theta (x) å§‹ç»ˆ= 1 -&gt; ä»£ä»·å‡½æ•° = - log\\frac{1}{1+e^{(-\\theta^Tx)}} = 0z&gt;1âˆ’&gt;hÎ¸â€‹(x)å§‹ç»ˆ=1âˆ’&gt;ä»£ä»·å‡½æ•°=âˆ’log1+e(âˆ’Î¸Tx)1â€‹=0 z&lt;1z &lt; 1z&lt;1 æ—¶ï¼šæ­¤æ—¶ä»£ä»·å‡½æ•°è¿‘ä¼¼åŸæœ¬ logistics å›å½’ä»£ä»·å‡½æ•° yi=âˆ’1æ—¶ï¼Œä»£ä»·å‡½æ•°=âˆ’log(1âˆ’11+e(âˆ’Î¸Tx))y_i = -1 æ—¶ï¼Œä»£ä»·å‡½æ•° = - log(1-\\frac{1}{1+e^{(-\\theta^Tx)}})yiâ€‹=âˆ’1æ—¶ï¼Œä»£ä»·å‡½æ•°=âˆ’log(1âˆ’1+e(âˆ’Î¸Tx)1â€‹) ï¼šå¦‚å³å›¾ï¼Œå…¶ä½™ç±»ä¼¼ä¸Šï¼Œä¸å†èµ˜è¿°ã€‚ å› æ­¤æˆ‘ä»¬å¯ä»¥å¾—åˆ°æœ€ç»ˆæ”¯æŒå‘é‡æœºçš„ä»£ä»·å‡½æ•°ï¼š SVM ä»£ä»·å‡½æ•°æ˜¯CA+BCA+BCA+B å½¢å¼ï¼Œè€Œä¸æ˜¯ logistics ä»£ä»·å‡½æ•° A+Î»BA + \\lambda BA+Î»B å½¢å¼ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ›´å…³æ³¨ä¸ç¬¬ä¸€é¡¹AAA çš„ä¼˜åŒ–è€Œä¸æ˜¯ç¬¬äºŒé¡¹ã€‚ å‡è®¾å‡½æ•°æ˜¯å¦æœ‰è¯¯ï¼Ÿ åº”è¯¥æ˜¯ Î¸Txâ‰¥1ï¼ŒhÎ¸(x)=1;Î¸Txâ‰¤âˆ’1ï¼ŒhÎ¸(x)=0\\theta^Tx â‰¥ 1 ï¼Œh_\\theta(x) = 1 ; \\theta^Tx â‰¤ -1 ï¼Œh_\\theta(x) = 0Î¸Txâ‰¥1ï¼ŒhÎ¸â€‹(x)=1;Î¸Txâ‰¤âˆ’1ï¼ŒhÎ¸â€‹(x)=0 ï¼Ÿï¼Ÿ 11.2 ç›´è§‚ä¸Šå¯¹å¤§é—´éš”çš„ç†è§£ å†æ¬¡å›é¡¾ä¸‹æ­¤å‰æ”¯æŒå‘é‡æœºä»£ä»·å‡½æ•° JSVMJ_{SVM}JSVMâ€‹ï¼š 11.2.1 SVMï¼šçº¿æ€§æœ€å¤§åˆ†éš” å¯¹äºä¸€ä¸ªæ ·æœ¬æˆ‘ä»¬æœ‰å¤šç§è¿›è¡Œåˆ†éš”ç›´çº¿è¿›è¡Œåˆ†ç±»ï¼Œå°±åƒä¸‹é¢è¿™ç§ï¼š æ˜¾ç„¶ï¼Œé»‘è‰²ç›´çº¿å…·æœ‰ç›´è§‚ä¸Šæœ€å¥½çš„åˆ†ç±»æ•ˆæœï¼Œå› ä¸ºå®ƒç¦»æ­£è´Ÿæ ·æœ¬éƒ½æ‹¥æœ‰ æœ€å¤§é—´è· ã€‚ è¿›ä¸€æ­¥ç›´è§‚ç†è§£ SVM ä¸­æ­£åˆ™åŒ–ç³»æ•°CCC çš„ä½œç”¨ï¼šé˜²æ­¢è¿‡æ‹Ÿåˆã€‚ ä¸‹é¢è¿™å¼ å›¾å±•ç¤ºä¸åŒæƒ…å†µä¸‹ CCC å¯èƒ½å¯¼è‡´çš„æƒ…å†µã€‚ å½“ CCC è¿‡å¤§ æ—¶ï¼šæ­¤æ—¶åˆ†éš”ç›´çº¿æ˜¯ä¸Šé¢çº¢è‰²ç›´çº¿ï¼Œæ˜¾ç„¶å®ƒå‘ç”Ÿäº†è¿‡æ‹Ÿåˆã€‚ç±»ä¼¼äº logistics å›å½’ Î»\\lambdaÎ» è¿‡å° æ—¶ï¼Œå¯¼è‡´è¿‡æ‹Ÿåˆæƒ…å†µã€‚ å½“CCC ä¸æ˜¯å¾ˆå¤§æ—¶ï¼šæ­¤æ—¶åˆ†éš”ç›´çº¿æ˜¾ç„¶å…·æœ‰æ›´å¥½çš„æ³›åŒ–èƒ½åŠ›ï¼Œä¸ä¼šå‘ç”Ÿè¿‡æ‹Ÿåˆã€‚ 11.3 å¤§é—´éš”åˆ†ç±»æ•°å­¦åŸç† å¼•å­ï¼šå¯¹äºä¸¤ä¸ªå‘é‡ u=[u1u2]u = \\begin{bmatrix} u_1\\\\u_2 \\end{bmatrix}u=[u1â€‹u2â€‹â€‹] ä¸ v=[v1v2]v= \\begin{bmatrix} v_1\\\\v_2 \\end{bmatrix}v=[v1â€‹v2â€‹â€‹] ï¼ŒuTvu^TvuTv çš„å‡ ä½•æ„ä¹‰æ€ä¹ˆç†è§£ï¼Ÿ ç›´æ¥ç»™ç»“è®ºï¼šuTvu^TvuTv = u1v1+u2v2u_1v_1 + u_2v_2u1â€‹v1â€‹+u2â€‹v2â€‹ = Pâ‹…âˆ£âˆ£uâˆ£âˆ£PÂ·||u||Pâ‹…âˆ£âˆ£uâˆ£âˆ£ = våœ¨uä¸Šçš„æŠ•å½±è·ç¦»âˆ—uçš„é•¿åº¦v åœ¨uä¸Šçš„æŠ•å½±è·ç¦»*uçš„é•¿åº¦våœ¨uä¸Šçš„æŠ•å½±è·ç¦»âˆ—uçš„é•¿åº¦ æ³¨æ„ï¼šPPP æ˜¯æœ‰æ–¹å‘çš„ï¼Œè€ŒèŒƒæ•° âˆ£âˆ£uâˆ£âˆ£||u||âˆ£âˆ£uâˆ£âˆ£ æ˜¯æ²¡æœ‰æ–¹å‘åªæœ‰è·ç¦»ã€‚ 11.3.1 æ•°å­¦åˆ†æ ğŸ¯ æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æœ€å°ä»£ä»·å‡½æ•°ã€‚ æ ¹æ®ä¸Šé¢å…¬å¼å¯çŸ¥ï¼Œç­‰ä»·ä¸º min 12âˆ‘j=1nÎ¸j2min \\ \\frac{1}{2} \\sum_{j=1}^{n}\\theta_j^2min 21â€‹âˆ‘j=1nâ€‹Î¸j2â€‹ ï¼ˆå› ä¸ºç¬¬ä¸€é¡¹å¯æ§ï¼Ÿï¼‰ï¼š åœ¨æ ¹æ® å¼•å­æ•°å­¦å…¬å¼å¼•å­æ•°å­¦å…¬å¼å¼•å­æ•°å­¦å…¬å¼ æˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥è¡¨è¾¾å¦‚ä¸‹ï¼š ç›´è§‚è§‚æµ‹SVMå¦‚ä½•ç¡®å®šæœ€å¤§é—´éš”ã€‚ ç»¿è‰²ç›´çº¿ä¸ºå†³ç­–ç›´çº¿ y=Î¸Txy = \\theta^Txy=Î¸Txï¼Œè“è‰²ç›´çº¿ä¸º Î¸\\thetaÎ¸ å‘é‡ï¼Œä¸”å®ƒä»¬äº’ç›¸å‚ç›´ ? ä»¤ Î¸0=0\\theta_0 = 0Î¸0â€‹=0 å¯ä»¥ä¿è¯å†³ç­–ç›´çº¿ä¸€å®šç»è¿‡åŸç‚¹ã€‚ å›¾1ï¼šä¸ºä»€ä¹ˆSVMå¯ä»¥å†³ç­–ç›´çº¿ä¸å¥½ï¼Ÿ æˆ‘ä»¬è¦ä½¿å¾— min 12âˆ‘j=1nÎ¸j2==minâˆ£âˆ£Î¸âˆ£âˆ£2min \\ \\frac{1}{2} \\sum_{j=1}^{n}\\theta_j^2 == min|| \\theta||^2min 21â€‹âˆ‘j=1nâ€‹Î¸j2â€‹==minâˆ£âˆ£Î¸âˆ£âˆ£2 ï¼ŒåŒæ—¶è¿˜è¦æ»¡è¶³æ¡ä»¶ï¼š {p(i)â‹…âˆ£âˆ£Î¸âˆ£âˆ£â‰¥1ï¼Œæ­£æ ·æœ¬p(i)â‹…âˆ£âˆ£Î¸âˆ£âˆ£â‰¤âˆ’1ï¼Œè´Ÿæ ·æœ¬\\begin{cases} p^{(i)}Â·||\\theta|| â‰¥1 &amp;ï¼Œæ­£æ ·æœ¬\\\\ p^{(i)}Â·||\\theta|| â‰¤-1 &amp;ï¼Œè´Ÿæ ·æœ¬\\\\ \\end{cases} {p(i)â‹…âˆ£âˆ£Î¸âˆ£âˆ£â‰¥1p(i)â‹…âˆ£âˆ£Î¸âˆ£âˆ£â‰¤âˆ’1â€‹ï¼Œæ­£æ ·æœ¬ï¼Œè´Ÿæ ·æœ¬â€‹ å¯ä»¥çœ‹åˆ°æ°å¥½ä½¿å¾—ç­‰å¼æˆç«‹çš„æ”¯æŒå‘é‡ x(1)ã€x(2)x^{(1)}ã€x^{(2)}x(1)ã€x(2) åœ¨å‘é‡ Î¸\\thetaÎ¸ ä¸Šçš„æŠ•å½±p(1)ã€p(2)p^{(1)}ã€p^{(2)}p(1)ã€p(2) éƒ½å¾ˆå°ã€‚ è€Œæˆ‘ä»¬åˆè¦æ»¡è¶³ä¸Šè¿°æ¡ä»¶ï¼Œé‚£ä¹ˆè‡ªç„¶ âˆ£âˆ£Î¸âˆ£âˆ£||\\theta||âˆ£âˆ£Î¸âˆ£âˆ£ å°±è¦å¾ˆå¤§ï¼Œè¿™ä¸æˆ‘ä»¬çš„ç›®æ ‡ä¸ç¬¦åˆï¼Œæ‰€ä»¥å¯åˆ¤æ–­å†³ç­–ç›´çº¿ä¸å¥½ã€‚ å›¾2ï¼šä¸ºä»€ä¹ˆSVMå¯ä»¥å†³ç­–ç›´çº¿å¥½ï¼Ÿ åŒä¸Šï¼Œæ­¤æ—¶æ”¯æŒå‘é‡åœ¨ Î¸\\thetaÎ¸ å‘é‡ä¸Šçš„æŠ•å½± p(1)ã€p(2)p^{(1)}ã€p^{(2)}p(1)ã€p(2) æœ€å¤§ â€”&gt; é‚£ä¹ˆ âˆ£âˆ£Î¸âˆ£âˆ£min||\\theta||_{min}âˆ£âˆ£Î¸âˆ£âˆ£minâ€‹ ã€‚ 11.4 æ ¸å‡½æ•° 11.4.1 æ ¸å‡½æ•°ï¼ˆä¸Šï¼‰ å¦‚ä½•è¿›è¡Œå¤æ‚éçº¿æ€§åˆ†ç±»ï¼Ÿ åœ¨æ­¤å‰æˆ‘ä»¬è¿›è¡Œå¤æ‚éçº¿æ€§åˆ†ç±»ï¼Œæ˜¯å¢åŠ æ›´å¤šç‰¹å¾ x1x2ã€x12ã€x22...x_1x_2ã€x_1^2ã€x_2^2...x1â€‹x2â€‹ã€x12â€‹ã€x22â€‹... è¿›è¡Œéçº¿æ€§åˆ†ç±»ï¼š å†³ç­–è¾¹ç•Œæ˜¯ï¼š Î¸TX=Î¸0+Î¸1x1+Î¸2x2+Î¸3x1x2...\\theta^TX = \\theta_0+\\theta_1x_1 +\\theta_2x_2+\\theta_3x_1x_2...Î¸TX=Î¸0â€‹+Î¸1â€‹x1â€‹+Î¸2â€‹x2â€‹+Î¸3â€‹x1â€‹x2â€‹... ï¼Œé¢„æµ‹å‡½æ•°ä¸º h(Î¸Tx)h(\\theta^Tx)h(Î¸Tx) ã€‚ è€Œç°åœ¨æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç›¸ä¼¼åº¦å‡½æ•° fff æ¥äº§ç”Ÿæ›´å¤šç‰¹å¾ï¼Œå°†ä¸Šé¢ç‰¹å¾ x1ã€x2ã€x1x2ã€x12ã€x22...x_1ã€x_2ã€x_1x_2ã€x_1^2ã€x_2^2...x1â€‹ã€x2â€‹ã€x1â€‹x2â€‹ã€x12â€‹ã€x22â€‹... æ›¿æ¢ä¸º f1ã€f2ã€f3ã€f4..f_1ã€f_2ã€f_3ã€f_4..f1â€‹ã€f2â€‹ã€f3â€‹ã€f4â€‹.. ã€‚ Î¸Tf=Î¸0+Î¸1f1+Î¸2f2+Î¸3f3...å…¶ä¸­ï¼šfi=similarity(x,l(i))=exp(âˆ’âˆ£âˆ£xâˆ’l(i)âˆ£âˆ£22Ïƒ2)\\theta^Tf = \\theta_0+\\theta_1f_1 +\\theta_2f_2+\\theta_3f_3...\\\\ å…¶ä¸­ï¼š f_i = similarity(x,l^{(i)}) = exp(-\\frac{||x-l^{(i)}||^2}{2\\sigma^2}) Î¸Tf=Î¸0â€‹+Î¸1â€‹f1â€‹+Î¸2â€‹f2â€‹+Î¸3â€‹f3â€‹...å…¶ä¸­ï¼šfiâ€‹=similarity(x,l(i))=exp(âˆ’2Ïƒ2âˆ£âˆ£xâˆ’l(i)âˆ£âˆ£2â€‹) l(i)l^{(i)}l(i) å³æ ‡è®°ã€‚ è¿›ä¸€æ­¥ç†è§£ç›¸ä¼¼åº¦å‡½æ•° l(i)ã€Ïƒl^{(i)} ã€\\sigmal(i)ã€Ïƒ ä½œç”¨ã€‚ l(i)l^{(i)}l(i) ä¼šæ ‡è®°å¯¹åº”äº§ç”Ÿçš„ä¸åŒç‰¹å¾ f1ã€f2...f_1ã€f_2 ...f1â€‹ã€f2â€‹... ï¼Œå®ƒå¯ç”¨æ¥æè¿°å’Œç‰¹å¾ xxx çš„åç¦»ï¼š å½“ l(i)æ¥è¿‘xl^{(i)} æ¥è¿‘ xl(i)æ¥è¿‘x ï¼Œfff è¾“å‡ºä¸º 111 ï¼Œ å½“ l(i)è¿œç¦»xl^{(i)} è¿œç¦» xl(i)è¿œç¦»x ï¼Œfff è¾“å‡ºä¸º 000 ã€‚ Ïƒ\\sigmaÏƒ å¯ç”¨æ¥æ§åˆ¶å½“ xè¿œç¦»l(i)x è¿œç¦» l^{(i)}xè¿œç¦»l(i) æ—¶ï¼Œå‡½æ•° fff è¶‹äº0ä¸‹é™çš„é€Ÿç‡ã€‚ åˆå§‹ l(1)=[35]l^{(1)} = \\begin{bmatrix} 3\\\\ 5 \\end{bmatrix}l(1)=[35â€‹] å½“ x=[35]x = \\begin{bmatrix} 3\\\\ 5 \\end{bmatrix}x=[35â€‹] ï¼Œæ­¤æ—¶å‡½æ•°å€¼ = 1 (é¡¶å³°å¤„)ã€‚å¦‚æœ Ïƒ\\sigmaÏƒ è¾ƒå¤§ï¼Œå¯ä»¥çœ‹å‡ºå½“ xåç¦»l(1)x åç¦» l^{(1)}xåç¦»l(1) è¶Šå¤šï¼Œåˆ™æ­¤æ—¶å‡½æ•°å€¼è¶‹äº0ä¼šç›¸æ¯”è¾ƒå…¶å®ƒå›¾æ›´å¿«ã€‚ ä¸€å¼ å›¾è¿›è¡Œæ€»ç»“å¦‚ä¸‹ï¼š ä¸€ä¸ªå®é™…è®¡ç®—å®ä¾‹ã€‚ 11.4.1 æ ¸å‡½æ•°ï¼ˆä¸‹ï¼‰ å¦‚ä½•è·å–æ ‡è®° l(1)ã€l(2)ã€l(3)...l^{(1)}ã€l^{(2)}ã€l^{(3)}...l(1)ã€l(2)ã€l(3)... ï¼Ÿ åˆå§‹é€‰æ‹© l(1)=x(1)ã€l(2)=x(2)ã€l(3)=x(3)...l^{(1)} = x^{(1)}ã€l^{(2)} = x^{(2)}ã€l^{(3)} = x^{(3)}...l(1)=x(1)ã€l(2)=x(2)ã€l(3)=x(3)... ï¼Ÿç„¶åæ€ä¹ˆæ›´æ–° l(i)l^{(i)}l(i) ? Î¸Tf=Î¸0+Î¸1f1+Î¸2f2+Î¸3f3...+Î¸mfm...å…¶ä¸­ï¼šfi=similarity(x,l(i))=exp(âˆ’âˆ£âˆ£xâˆ’x(i)âˆ£âˆ£22Ïƒ2)\\theta^Tf = \\theta_0+\\theta_1f_1 +\\theta_2f_2+\\theta_3f_3...+\\theta_mf_m...\\\\ å…¶ä¸­ï¼š f_i = similarity(x,l^{(i)}) = exp(-\\frac{||x-x^{(i)}||^2}{2\\sigma^2}) Î¸Tf=Î¸0â€‹+Î¸1â€‹f1â€‹+Î¸2â€‹f2â€‹+Î¸3â€‹f3â€‹...+Î¸mâ€‹fmâ€‹...å…¶ä¸­ï¼šfiâ€‹=similarity(x,l(i))=exp(âˆ’2Ïƒ2âˆ£âˆ£xâˆ’x(i)âˆ£âˆ£2â€‹) æœ‰å¤šä¸ªæ ·æœ¬å°±æœ‰å¤šä¸ªæ ¸å‡½æ•° fif_ifiâ€‹ï¼Ÿ æ ¸å‡½æ•°ç‰ˆä»£ä»·å‡½æ•°ã€‚ 11.5 ä½¿ç”¨SVM æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æˆç†Ÿçš„åº“æ¥å®ç°SVMç®—æ³•çš„åº”ç”¨ã€‚ é‚£ä¹ˆï¼Œå¤§é‡ç»†èŠ‚å®ç°è¢«éšè—äº†ï¼Œæˆ‘ä»¬ä»…éœ€è¦é€‰æ‹©å‚æ•° CCC å’Œ æ ¸å‡½æ•°fiæ ¸å‡½æ•°f_iæ ¸å‡½æ•°fiâ€‹ã€‚ çº¿æ€§æ ¸å‡½æ•°ï¼Œå®é™…æ²¡æœ‰åº”ç”¨åˆ°æ ¸å‡½æ•°ï¼Œä½†æˆ‘ä»¬ä¿æŒè¿™ä¹ˆä¸€ä¸ªç§°å‘¼ä»¥ä¾¿ç»Ÿä¸€ã€‚ 11.5.1 å¤šåˆ†ç±» ä¾æ—§æ˜¯ä¸€å¯¹å¤šï¼Œåˆ†ç±»KKKä¸ªç±»åˆ«ï¼Œè®­ç»ƒ KKK ä¸ªçº¿æ€§ SVMsSVMsSVMs ã€‚ ç»™å®šä¸€ç»„ç‰¹å¾(X,Y)(X,Y)(X,Y) ï¼ŒKç»„è®­ç»ƒæƒé‡Î¸\\thetaÎ¸ ï¼Œ Î¸(i)TX{\\theta^{(i)}}^TXÎ¸(i)TXå¯¹åº”æ¦‚ç‡æœ€å¤§åˆ™åˆ†ç±»ä¸º iiiã€‚ 11.5.3 logistics å›å½’ &amp; SVM ä»¥ä¸‹åˆ—ä¸¾äº†å¯¹äºç‰¹å¾ nnn ä¸æ ·æœ¬æ•° mmm ä¸åŒæƒ…å†µä¸‹ï¼Œå¦‚ä½•é€‰æ‹© logistics å›å½’ OR SVM è¿›è¡Œåˆ†ç±»ã€‚ åäºŒã€æ— ç›‘ç£å­¦ä¹  12.1 K-means ç®—æ³•"},{"title":"æ·±åº¦å­¦ä¹ åŸºç¡€ï¼ˆä¸€ï¼‰Numpy&Pytorch","date":"2022-01-02T11:54:25.548Z","updated":"2022-01-02T11:42:51.773Z","comments":true,"path":"NO_post/æ·±åº¦å­¦ä¹ åŸºç¡€ï¼ˆä¸€ï¼‰Numpy&Pytorch.html","permalink":"https://hwh.zone/NO_post/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80%EF%BC%88%E4%B8%80%EF%BC%89Numpy&Pytorch.html","excerpt":"","text":"çŸ©é˜µï¼Œæ•°ç»„ï¼ŸNumpy ä¸€ã€ å¸¸ç”¨æ–¹æ³• 0 åˆæ¬¡ä½¿ç”¨ å®‰è£…ï¼špip install numpy å¼•ç”¨ï¼šimport numpy as np 1 åˆ›å»ºæ•°ç»„ï¼šnp.arangeã€np.onesâ€¦ åŸºæœ¬æ–¹å¼ åŸºæœ¬åˆ›å»ºæ•°ç»„çš„åŠæ³•ï¼Œæ³¨æ„ä»¥ä¸‹åˆ›å»ºçš„éƒ½æ˜¯ ä¸€ç»´æ•°ç»„ (5,) ï¼š 123456a = np.array([0, 1, 2, 3, 4]) # &gt;&gt;&gt;[0 1 2 3 4]b = np.array((0, 1, 2, 3, 4)) # &gt;&gt;&gt;[0 1 2 3 4]c = np.arange(5) # &gt;&gt;&gt;[0 1 2 3 4]d = np.linspace(0, 2*np.pi, 5) # å°†[0,2Ï€]ç­‰åˆ†ä¸º5ä»½print(d) # &gt;&gt;&gt;[ 0. 1.57079633 3.14159265 4.71238898 6.28318531] ä¸ºäº†åˆ›å»º å¤šç»´æ•°ç»„ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ reshape() æ¥æ”¹å˜æ•°ç»„ç»´åº¦ï¼š 12345678910&gt;&gt;&gt; np.arange(12).reshape((3,4)) # 2D:ä¼ å…¥çš„æ˜¯ä¸€ä¸ªå…ƒç»„array([[ 0, 1, 2, 3], [ 4, 5, 6, 7], [ 8, 9, 10, 11]]) &gt;&gt;&gt; np.arange(12).reshape((2,2,3)) # 3D:ä¼ å…¥çš„æ˜¯ä¸€ä¸ªå…ƒç»„array([[[ 0, 1, 2], [ 3, 4, 5]], [[ 6, 7, 8], [ 9, 10, 11]]]) å½“ç„¶ä½ ä¹Ÿå¯ä»¥é€‰æ‹©ä¼ å…¥å¤šç»´åˆ—è¡¨ï¼š 123456&gt;&gt;&gt; A = np.array([[2,1,-2],[3,0,1],[1,1,-1]])&gt;&gt;&gt; A = np.array([[2,1,-2],[3,0,1],[1,1,-1]])&gt;&gt;&gt; Aarray([[ 2, 1, -2], [ 3, 0, 1], [ 1, 1, -1]]) åº“å‡½æ•°ç”Ÿæˆ æœ€åå¯ä»¥ä½¿ç”¨åŸºæœ¬åº“å‡½æ•° zerosã€onesã€eyesã€emptyã€fullã€randomæ¥åˆ›å»ºã€‚ 12345678910111213141516171819202122232425262728293031# 1D åˆ›å»ºä¸€ç»´å¯ä»¥ç›´æ¥ä¼ é€’ä¸€ä¸ªæ•°å­—&gt;&gt;&gt; np.zeros(6)array([0., 0., 0., 0., 0., 0.])&gt;&gt;&gt; np.ones(6)array([1., 1., 1., 1., 1., 1.])&gt;&gt;&gt; np.full(6,3)array([3, 3, 3, 3, 3, 3])# 2D é™¤äº† eyesæ–¹æ³•ï¼Œå…¶ä½™éƒ½ä¼ é€’ä¸€ä¸ªå…ƒç»„&gt;&gt;&gt; np.zeros((2,3))array([[0., 0., 0.], [0., 0., 0.]])&gt;&gt;&gt; np.empty((2,3)) # ä¸æ˜¯ç©ºçŸ©é˜µï¼Œè€Œæ˜¯å†…å®¹éšæœºarray([[0., 0., 0.], [0., 0., 0.]])&gt;&gt;&gt; np.full((2,3),6)array([[6, 6, 6], [6, 6, 6]]) &gt;&gt;&gt; np.eye(3,3) # å¯¹è§’çŸ©é˜µï¼šä¼ é€’ä¸æ˜¯å…ƒç»„ï¼Œè€Œæ˜¯ä¸¤ä¸ªæ•°å­—array([[1., 0., 0.], [0., 1., 0.], [0., 0., 1.]])&gt;&gt;&gt; np.random.random((2,3)) # éšæœºå¡«å……[0,1]ä¹‹é—´çš„ä¸€ä¸ªæ•°å€¼array([[0.91453011, 0.06663476, 0.18352908], [0.19449024, 0.06442752, 0.64491859]]) â€‹ 2 ç´¢å¼•ï¼šåˆ‡ç‰‡ã€åˆ—è¡¨ç´¢å¼•ã€å¸ƒå°”å±è”½ åŸºæœ¬ç´¢å¼• ç´¢å¼•ä¸€ä¸ªæ•°å­—ç±»ä¼¼äº python å¤šç»´åˆ—è¡¨ 12345678&gt;&gt;&gt; a = np.array([[11, 12, 13, 14, 15], [16, 17, 18, 19, 20], [21, 22, 23, 24, 25], [26, 27, 28 ,29, 30], [31, 32, 33, 34, 35]]) &gt;&gt;&gt; a[2,4] 25 åˆ‡ç‰‡ç´¢å¼• 1234567891011121314151617# ç´¢å¼•ç¬¬2åˆ—&gt;&gt;&gt; a[:, 1] [12 17 22 27 32]# ç´¢å¼•ç¬¬1åˆ—ï¼ŒæŒ‡å®šå¼€å§‹é€‰ä¸­æ•°å€¼&gt;&gt;&gt; a[1:4, 0] [16 21 26]# ç´¢å¼•ç¬¬0è¡Œï¼ŒæŒ‡å®šå¼€å§‹é€‰ä¸­æ•°å€¼&gt;&gt;&gt; a[0, 1:4] [12 13 14]# æ¯éš”2è¡Œï¼Œæ¯éš”2åˆ—è¿›è¡Œç´¢å¼•&gt;&gt;&gt; a[::2,::2] [[11 13 15] [21 23 25] [31 33 35]] åˆ—è¡¨ç´¢å¼• ä¾æ—§ä½¿ç”¨ä¸Šé¢çŸ©é˜µï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šä¸€ä¸ªåˆ—è¡¨æ¥ç´¢å¼•æŒ‡å®šä½ç½®å…ƒç´ ï¼š 12345678910&gt;&gt;&gt; a = np.array([[11, 12, 13, 14, 15], [16, 17, 18, 19, 20], [21, 22, 23, 24, 25], [26, 27, 28 ,29, 30], [31, 32, 33, 34, 35]])&gt;&gt;&gt; L = [0,2,4]&gt;&gt;&gt; a[L] # ç´¢å¼•ç¬¬ 1ã€3ã€5è¡Œarray([[11, 12, 13, 14, 15], [21, 22, 23, 24, 25], [31, 32, 33, 34, 35]]) å¸ƒå°”å±è”½ å¸ƒå°”å±è”½æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„åŠŸèƒ½ï¼Œå®ƒå…è®¸æˆ‘ä»¬æ ¹æ®æˆ‘ä»¬æŒ‡å®šçš„æ¡ä»¶æ£€ç´¢æ•°ç»„ä¸­çš„å…ƒç´ ã€‚ 12345678910# å¸ƒå°”å±è”½import matplotlib.pyplot as plta = np.linspace(0, 2 * np.pi, 50)b = np.sin(a)plt.plot(a,b)# ç”»å‡ºå€¼å¤§äº0ï¼Œä¸”å°äºÏ€/2çš„æ‰€æœ‰ç»¿è‰²ç‚¹mask = (b &gt;= 0) &amp; (a &lt;= np.pi / 2)plt.plot(a[mask], b[mask], &#x27;go&#x27;)plt.show() 3 æ’å…¥ï¼šnp.c_ ã€np.r_ è¿˜æœ‰å…¶å®ƒæ’å…¥æ–¹å¼æš‚æ—¶ä¸è¡¨ï¼Œä¸‹é¢éƒ½ä»…é™äºæ’å…¥ 2D æ•°ç»„ï¼Œæ›´é«˜ç»´æš‚æœªå°è¯•ã€‚ æŒ‰åˆ—æ’å…¥ï¼šnp.c_ æŒ‰åˆ—æ’å…¥åˆ™è¦æ±‚ï¼Œè¢«æ’å…¥çš„æ•°ç»„å’ŒåŸæ•°ç»„ è¡Œç›¸åŒ ã€‚ 123456789101112131415161718&gt;&gt;&gt; aarray([[ 0, 1, 2, 3], [ 4, 5, 6, 7], [ 8, 9, 10, 11]])# 1D æ•°ç»„ï¼Œä½†æ˜¯ç¬¬ä¸€ç»´åº¦ç›¸åŒï¼ˆè™½ç„¶çœ‹èµ·æ¥æ˜¯è¡Œå‘é‡ï¼Ÿï¼‰&gt;&gt;&gt; c0 = np.zeros((3,))&gt;&gt;&gt; np.c_[c0,a]array([[ 0., 0., 1., 2., 3.], [ 0., 4., 5., 6., 7.], [ 0., 8., 9., 10., 11.]])# 2D æ•°ç»„ï¼Œç¬¬ä¸€ç»´åº¦ç›¸åŒ&gt;&gt;&gt; c1 = np.ones((3,1))&gt;&gt;&gt; np.c_[c1,a]array([[ 1., 0., 1., 2., 3.], [ 1., 4., 5., 6., 7.], [ 1., 8., 9., 10., 11.]]) æŒ‰è¡Œæ’å…¥ï¼šnp.r_ 123456789101112&gt;&gt;&gt; aarray([[ 0, 1, 2, 3], [ 4, 5, 6, 7], [ 8, 9, 10, 11]])# æŒ‰è¡Œæ’å…¥ï¼šç¬¬2ç»´åº¦ç›¸ç­‰&gt;&gt;&gt; r0 = np.zeros((1,4))&gt;&gt;&gt; np.r_[r0,a]array([[ 0., 0., 0., 0.], [ 0., 1., 2., 3.], [ 4., 5., 6., 7.], [ 8., 9., 10., 11.]]) äºŒã€Numpy è¿›é˜¶ 2.1 å¹¿æ’­ ä»¥ä¸‹æ•´ç†è‡ªï¼šnumpyä¸­çš„å¹¿æ’­æœºåˆ¶ ä»€ä¹ˆæ˜¯å¹¿æ’­ï¼Ÿ å½“ä¸¤ä¸ªæ•°ç»„çš„å½¢çŠ¶å¹¶ä¸ç›¸åŒçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰©å±•æ•°ç»„çš„æ–¹æ³•æ¥å®ç°ç›¸åŠ ã€ç›¸å‡ã€ç›¸ä¹˜ç­‰æ“ä½œã€‚ å¹¿æ’­çš„æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ æ•°ç»„ç»´åº¦ ä¸åŒï¼Œåç¼˜ç»´åº¦çš„è½´é•¿ç›¸ç¬¦ æ•°ç»„ç»´åº¦ ç›¸åŒï¼Œå…¶ä¸­æœ‰ä¸ªè½´ä¸º1 2.1.1 ç»´åº¦ä¸åŒè¿›è¡Œå¹¿æ’­ (4,3) æ˜¯ 2Dï¼Œ(3,) æ˜¯ 1Dï¼Œä½†æ˜¯å®ƒä»¬åç¼˜ç»´åº¦ç›¸åŒï¼Œå› æ­¤å¯ä»¥æ‰©å±• (3,4,2) æ˜¯ 3Dï¼Œ(4,2) æ˜¯ 1Dï¼Œä½†æ˜¯å®ƒä»¬åç¼˜ç»´åº¦ç›¸åŒ åŒç†ï¼Œè¿˜æœ‰ ï¼ˆ4,2,3ï¼‰å’Œï¼ˆ2,3ï¼‰æ˜¯å…¼å®¹çš„ï¼Œï¼ˆ4,2,3ï¼‰è¿˜å’Œï¼ˆ3ï¼‰æ˜¯å…¼å®¹çš„ã€‚ 2.1.2 ç»´åº¦ç›¸åŒè¿›è¡Œå¹¿æ’­ è™½ç„¶ç»´åº¦ç›¸åŒï¼Œä½†æœ‰ä¸€ä¸ªä¸º1ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œå¹¿æ’­ã€‚ PTboyï¼šPyTorch ä¸€ã€å¿«é€Ÿå…¥é—¨ æœ¬ç¬”è®°ä¸»è¦å‚è€ƒï¼špytorchä¸­æ–‡æ•™ç¨‹ ã€pytorchå¼€æºä¹¦ç±ä¸­æ–‡æ•™ç¨‹ 1.1 å®‰è£… è¿›å…¥ PyTorchå®˜ç½‘ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°éœ€è¦å®‰è£…çš„è½¯ä»¶å’Œç‰ˆæœ¬ï¼š Packageï¼šåŒ…ç®¡ç†è½¯ä»¶ï¼Œå¯ä»¥ç”¨ pip ï¼Œä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨ Conda CUDA : æ˜¾å¡åŠ é€Ÿè½¯ä»¶ï¼ŒGPU è·‘ä¸€å®šè¦ä¸‹è½½ï¼ŒCPU ä¸ç”¨ã€‚æˆ‘ä»¬æ˜¾å¡æ˜¯ GTX 1650 ï¼ŒGPU å‹‰å¼ºå¯ä»¥è·‘å¾—åŠ¨ï¼Œæ•…ä¸‹è½½ã€‚ ä¸‹é¢ä¾æ¬¡è¯¦ç»†è®°å½•å®‰è£… Conda &amp; CUDA ã€‚ 1.1.1 å®‰è£… AnaConda å®‰è£…å‚è€ƒ ï¼š Anacondaè¯¦ç»†å®‰è£…åŠä½¿ç”¨æ•™ç¨‹ å®˜ç½‘ä¸‹è½½ï¼š AnaCondaæœ€æ–°ç‰ˆæœ¬ ã€‚å¤ªæ…¢äº†ï¼Œé€‰æ‹© : è…¾è®¯è½¯ä»¶ä¸‹è½½AnaConda ã€‚ ä¸‹è½½å®Œæ¯•åå¼€å§‹å®‰è£…ï¼Œä¸€ç›´ä¸‹ä¸€æ­¥å°±å¥½ ï¼Œæœ‰ä¸¤ä¸ªåœ°æ–¹éœ€è¦è¯´æ˜ï¼š å®‰è£…è·¯å¾„ï¼šå®‰è£…è·¯å¾„éœ€è¦è‹±æ–‡æ‡’å¾—æŠ˜è…¾ï¼Œç›´æ¥é»˜è®¤å®‰è£…è·¯å¾„äº† ç¯å¢ƒå˜é‡ï¼šåœ¨å®‰è£…è¿‡ç¨‹ä¸­å¯ä»¥å‹¾é€‰è‡ªåŠ¨æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œè®°å¾—å‹¾é€‰ å¦‚æœå®‰è£…æˆåŠŸï¼Œä¸”ç¯å¢ƒå˜é‡é…ç½®æˆåŠŸï¼Œåœ¨ cmd è¾“å…¥ conda -V å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç‰ˆæœ¬ä¿¡æ¯ï¼š Conda ä½¿ç”¨åˆä½“éªŒ ä»¥ä¸‹æ“ä½œéƒ½æ˜¯å‘½ä»¤è¡Œï¼Œåœ¨ cmd ç¯å¢ƒä¸­è¿›è¡Œã€‚ åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼š æ›´æ–°æ‰€æœ‰åŒ…ï¼šconda upgrade --all åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼šconda create --name ptboy python=3.7 åˆ‡æ¢ç¯å¢ƒ &amp; æŸ¥çœ‹å·²åˆ›å»ºç¯å¢ƒï¼šactivate ptboy &amp; conda env list åˆ‡æ¢/é€€å‡º python è§£é‡Šå™¨ï¼špython ã€exit() åŒ…ç®¡ç† ï¼š å®‰è£… / å¸è½½ åŒ… ï¼š conda install è¦å®‰è£…çš„åŒ…å ã€conda remove è¦å¸è½½çš„åŒ…å å’Œ pycharm è¿æ¥ï¼š ä¸‹é¢ç•¥æœ‰ä¸å¯¹ï¼Œå¯å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼šAnacondaä¸pycharmè¿æ¥ File --&gt; Settings --&gt; Project:ä½ çš„é¡¹ç›®å ---&gt; Project Interpreter ï¼Œç„¶å Add ï¼š è®¾ç½®è™šæ‹Ÿç¯å¢ƒpythonè§£é‡Šå™¨ï¼š 1.1.2 å®‰è£… CUDA &amp; cuDNN å®‰è£… CUDA ğŸ™‚ ç‹—æ—¥çš„fuck ä¸­å›½ç§»åŠ¨ç½‘å¡ï¼Œæµªè´¹æˆ‘ä¸€å¤©æ—¶é—´æ£€æŸ¥ç½‘ç»œï¼ŒåŸæ¥æ˜¯ä½ è¿™ğŸ¶ ä¸œè¥¿é™æˆ‘é€Ÿï¼ é¦–å…ˆæˆ‘ä»¬å»å®˜ç½‘ä¸‹è½½ CUDA ï¼šCUDA 10.1 ä¸‹è½½ ç‚¹å‡»å³ä¸‹è§’ Download[2.5GB] ä¸‹è½½å³å¯ã€‚ ä¸‹è½½å®Œæ¯•åï¼Œè§£å‹é»˜è®¤ä¼šæå–åˆ°ä¸´æ—¶ç›®å½•ï¼Œä¸ç”¨ä¿®æ”¹ï¼ˆä¸´æ—¶ç›®å½•ä¼šè‡ªåŠ¨åˆ é™¤ï¼‰ ä¸€ç›´ä¸‹ä¸€æ­¥ --&gt; è‡ªå®šä¹‰å®‰è£… ï¼Œå‹¾é€‰ä»¥ä¸‹ï¼š âš ï¸ ä¸€èˆ¬å®‰è£…å‡ºé”™éƒ½æ˜¯ç”±äº Visual Studio Intergration ï¼Œæ‰€ä»¥å»é™¤æ‰ï¼Œå®é™…æˆ‘ä¹Ÿç”¨ä¸åˆ° VS ç¯å¢ƒã€‚ å¦‚æœéœ€è¦VSç¯å¢ƒï¼Œå¯å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼šCUDAå®‰è£…å¤±è´¥åŸå› è§£å†³ ã€‚ ä¸‹ä¸€æ­¥ï¼Œä½¿ç”¨é»˜è®¤å®‰è£…ä½ç½®ï¼Œä¸æŠ˜è…¾äº†ï¼š ä¸€ç›´ä¸‹ä¸€æ­¥å®‰è£…ï¼Œå¾ˆå¿«ä¾¿ä¼šæ˜¾ç¤ºå®‰è£…å®Œæˆäº†ã€‚ æ¥ç€ä¾¿æ˜¯æœ€é‡è¦å®¹æ˜“å‡ºé”™çš„ ç¯å¢ƒå˜é‡é…ç½®äº† ï¼š âš ï¸ ä¸‹é¢éƒ½æ˜¯é»˜è®¤å®‰è£…è·¯å¾„ï¼Œå¦‚æœéœ€è¦è‡ªå®šä¹‰å®‰è£…æ³¨æ„ä¿®æ”¹ç¯å¢ƒå˜é‡è·¯å¾„åã€‚ é«˜çº§ç³»ç»Ÿè®¾ç½® --&gt; ç¯å¢ƒå˜é‡ --&gt; ç³»ç»Ÿå˜é‡ï¼Œæ·»åŠ ä»¥ä¸‹å‡ ä¸ªç¯å¢ƒå˜é‡ï¼š CUDA_SDK_PATH = C:\\ProgramData\\NVIDIA Corporation\\CUDA Samples\\v10.1 CUDA_LIB_PATH = %CUDA_PATH%\\lib\\x64 CUDA_BIN_PATH = %CUDA_PATH%\\bin CUDA_SDK_BIN_PATH = %CUDA_SDK_PATH%\\bin\\win64 CUDA_SDK_LIB_PATH = %CUDA_SDK_PATH%\\common\\lib\\x64 é«˜çº§ç³»ç»Ÿè®¾ç½® --&gt; ç¯å¢ƒå˜é‡ --&gt; ç³»ç»Ÿå˜é‡ --&gt; PATH , æ·»åŠ ï¼š C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.1\\lib\\x64 C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.1\\bin C:\\ProgramData\\NVIDIA Corporation\\CUDA Samples\\v10.1\\common\\lib\\x64 C:\\ProgramData\\NVIDIA Corporation\\CUDA Samples\\v10.1\\bin\\win64 åœ¨cmd é”®å…¥ nvcc -V æ¥æŸ¥çœ‹æ˜¯å¦æ­£ç¡®å®‰è£…ï¼š å®‰è£… cuDNN æˆ‘ä»¬ç»§ç»­å¼€å§‹å®‰è£… cuDNN ï¼Œä¸‹è½½cuDNN åœ°å€ï¼šcuDNN 7.6.4 ä¸‹è½½ âš ï¸ ä¸‹è½½å‰è¦å…ˆæ³¨å†Œä¼šå‘˜ï¼Œé€‰æ‹© QQç™»é™†é©¬ä¸Šå°±æ³¨å†Œå¥½äº†ï¼Ÿ ç‚¹å‡»ä¸Šè¿°çº¢æ¡†ä½ç½®ä¸‹è½½å³å¯ï¼Œè§£å‹æ–‡ä»¶å¤åˆ¶ä¸‹å›¾æ‰€ç¤º3ä¸ªæ–‡ä»¶ï¼š ç„¶åæ‰¾åˆ° CUDA å®‰è£…ç›®å½•ï¼ˆæˆ‘ä¹‹å‰æ˜¯é»˜è®¤ï¼‰ï¼Œå¤åˆ¶æ›¿æ¢å¯¹åº”ä¸‹é¢ä¸‰ä¸ªæ–‡ä»¶ï¼š æ•´ä½“æµ‹è¯•å®‰è£… åˆ‡æ¢åˆ°ç›®å½•(é»˜è®¤) ï¼šC:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.1\\extras\\demo_suite å¯ä»¥çœ‹åˆ°ä¸Šè¿°ä¸¤ä¸ªç¨‹åºï¼šbandwidthTest.exe ã€deviceQuery.exe ä¸¤ä¸ªæµ‹è¯•ç¨‹åºã€‚ åœ¨ cmd ä¸­è¿è¡Œè¿™ä¸¤ä¸ªæµ‹è¯•ç¨‹åºï¼š å‡ºç°ä»¥ä¸Šä¿¡æ¯åˆ™è¯æ˜å®‰è£…æˆåŠŸã€‚ ç¬¬ä¸€æ¬¡å®‰è£…å‡ºé”™ï¼šåŸå› æ˜¯é©±åŠ¨ç‰ˆæœ¬è·Ÿä¸ä¸Š CUDA ç‰ˆæœ¬ã€‚ è§£å†³åŠæ³•å¦‚ä¸‹ï¼Œä¸‹è½½ NVIDIA GeForce Experience ï¼šè…¾è®¯ä¸‹è½½ NVIDIA GeForce Experience ã€‚ æ‰“å¼€è½¯ä»¶æ›´æ–°é©±åŠ¨ï¼Œä¸‹è½½ GeForce Game Ready Driverï¼š å®‰è£…ï¼Œä¼šæç¤ºä½ æ›´æ–°é©±åŠ¨ï¼Œç›´æ¥æ›´æ–°å°±å¥½ã€‚å†æ¬¡è¿è¡Œä¾¿ä¼šå‘ç°å¯ä»¥æ­£å¸¸è¿è¡Œæµ‹è¯•ä¿¡æ¯äº†ã€‚ 1.1.3 å®‰è£… pytorch è¿›å…¥å®˜ç½‘ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®‰è£…å‘½ä»¤ï¼š 1conda install pytorch torchvision torchaudio cudatoolkit=10.2 -c pytorch å°è¯•æ›¿æ¢æºåŠ å¿«é€Ÿåº¦ã€‚ å‚æ•° -c pytorch æŒ‡çš„æ˜¯ pytorh å®˜æ–¹ä»“åº“ï¼Œç”±äºé€Ÿåº¦å¤ªæ…¢æˆ‘ä»¬æ¢æˆæ¸…åæºï¼š 12345conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/conda config --set show_channel_urls yes âš ï¸ ä¸€å¼€å§‹å¥½åƒæ²¡æœ‰å¼•ç”¨ pytorch æ¸…åæºï¼ˆç¬¬ä¸‰ä¸ªï¼‰ï¼Œä¸€ç›´å®˜æ–¹å®‰è£…ä¸æˆåŠŸã€‚ å†æ‰§è¡Œå®‰è£…å‘½ä»¤å³å¯å¿«é€Ÿå®‰è£…äº†ï¼š 1conda install pytorch torchvision cudatoolkit=10.1 æœ€ååˆ‡æ¢åˆ° python è§£é‡Šå™¨ï¼Œè¾“å…¥ import torch ï¼Œä¸æŠ¥é”™åˆ™å®‰è£…æˆåŠŸäº†ï¼š 12(ptboy) C:\\Users\\86151&gt;python&gt;&gt;&gt; import pytorch è¡¥å…… ä¸€å¼€å§‹ç”±äºå®‰è£…å¤ªæ…¢å°è¯•å„ç§åŠæ³•ï¼Œåˆ é™¤äº† .condarcæ–‡ä»¶(everythingè¿›è¡Œæœç´¢) é»˜è®¤é€šé“ default ï¼ˆæœ€åä¸€è¡Œï¼‰ã€‚æœ€ç»ˆæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š 12345channels: - https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/ - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/ - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/show_channel_urls: true 1.1.4 å®‰è£…ä½¿ç”¨ jupyter è¯¥éƒ¨åˆ†ä¸»è¦å‚è€ƒäº ï¼šJupyter Notebookä»‹ç»ã€å®‰è£…åŠä½¿ç”¨æ•™ç¨‹ å¿«é€Ÿå¯åŠ¨ å®‰è£… è¿›å…¥åˆ° cmd ç•Œé¢è¿›è¡Œå®‰è£…ã€‚æˆ‘æœ€å¼€å§‹æƒ³åœ¨æŒ‡å®šç¯å¢ƒ activate otä¸‹å®‰è£…ï¼Œæ˜¾ç¤ºç¼ºå°‘ä¾èµ–ã€‚ æˆ‘æƒ³åé¢è¿˜å¯ä»¥è®¾ç½®å¼•ç”¨ç¯å¢ƒä¸º ot ï¼Œå°±ä¸ç®¡äº†ã€‚ 1conda install jupyter å¯åŠ¨ å¯åŠ¨åç•Œé¢é‚£ä¸€å †æ–‡ä»¶ï¼Œå…¶å®æ˜¯æˆ‘ä»¬å®¶ç›®å½•ä¸­çš„æ–‡ä»¶ã€‚ åœ¨ cmd çª—å£è¾“å…¥ä¸‹é¢å‘½ä»¤ï¼Œä¼šè‡ªåŠ¨åœ¨æµè§ˆå™¨æ‰“å¼€ jupyterã€‚ âš ï¸ ä¸è¦å…³é—­ cmd å¦åˆ™åœ¨ Jupyter ä¸­ä¹Ÿæ— æ³•ç»§ç»­æ“ä½œï¼ 1jupyter notebook å¦‚æœæƒ³æ¢ä¸ªæµè§ˆå™¨æ‰“å¼€ï¼Œå¯ä»¥æŸ¥çœ‹åˆ° cmd ä¸­æœ‰ token å€¼ï¼š è¾“å…¥ http://localhost:8080 åœ¨é”®å…¥ä¸Šè¿°token å³å¯ï¼ ä¹Ÿå¯ä»¥ä½¿ç”¨ jupyter notebook list æŸ¥çœ‹token å€¼ã€‚ å¯åŠ¨é…ç½® æŒ‡å®šç«¯å£å¯åŠ¨ï¼š 1jupyter notebook --port &lt;port_number&gt; å¯åŠ¨ä½†ä¸æ‰“å¼€æœåŠ¡å™¨ï¼š 1jupyter notebook --no-browser è®¾ç½®æ–‡ä»¶ä¿å­˜è·¯å¾„ ä»…è¯´å¦‚ä½•åœ¨ windows è®¾ç½®ï¼Œlinux å‚ç…§æœ€å¼€å§‹æåˆ°çš„æ•™ç¨‹ã€‚ é»˜è®¤ä¿å­˜æ–‡æ¡£æ˜¯åœ¨å®¶ç›®å½•ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹æƒ³è¦ä¿å­˜æ–‡ä»¶çš„ç›®å½•ã€‚é¦–å…ˆæŸ¥è¯¢é…ç½®æ–‡ä»¶åœ°å€ï¼š 1jupyter notebook --generate-config ç¼–è¾‘è¯¥é…ç½®æ–‡ä»¶ï¼šæ‰¾åˆ° c.NotebookApp.notebook_dir å–æ¶ˆæ³¨é‡Šé…ç½®è‡ªå·±æƒ³ä¿å­˜çš„è·¯å¾„ å®é™…æµ‹è¯•æœ€å¥½ç”¨ \\\\ , æˆåŠŸåå†å¯åŠ¨å°±èƒ½çœ‹è§ä¸€ä¸ªæ¸…çˆ½çš„ç•Œé¢ åŸºæœ¬ä½¿ç”¨ ä¸»ç•Œé¢ &amp; ç¬”è®°æœ¬é¡µé¢ç®€ä»‹ æ ¹æ®ä¸Šå›¾æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª.ipynb æ–‡ä»¶ï¼Œç¼–è¾‘ä¸Šé¢æµ‹è¯•ä»£ç  &amp; mdæ–‡å­— è¿›è¡Œè¾“å‡ºã€‚ ESC è¿›å…¥å‘½ä»¤æ¨¡å¼ ï¼š a åœ¨å½“å‰cellåˆ›å»ºä¸€ä¸ªcell b åœ¨å½“å‰cellä¹‹ååˆ›å»ºä¸€ä¸ªcell m è¿›å…¥ markdown æ¨¡å¼ï¼ˆå•å…ƒæ ¼å‰é¢ In[] æ²¡äº†ï¼‰ y è¿›å…¥ code ï¼ˆå•å…ƒæ ¼å‰é¢ In[] åˆå‡ºç°äº†ï¼‰ l æ˜¾ç¤º cell ä¸­æ€»è¡Œæ•° dd åˆ é™¤å½“å‰cell æ‰©å±•åŠŸèƒ½ æ‰©å±•åŠŸèƒ½1 ï¼š å…³è” Jupyter Notebookå’Œ conda ç¯å¢ƒã€‚ å®‰è£… nb_conda 1conda install nb_conda âš ï¸ å‡ºç°æŠ¥ä»¥ä¸‹é”™è¯¯ æ‘¸ä¸ç€å¤´è„‘ï¼Œæˆ‘ä¸»è¦åšäº†ä»¥ä¸‹äº‹å°±å¯ä»¥äº†ï¼š conda clean -- packages (å¥½åƒæ²¡è½¯ç”¨) ä¿®æ”¹äº†ä¸‹æ–‡ä»¶ .condarc å»é™¤æ¸…åæºæ¢æˆåˆ«çš„æºï¼ˆï¼Ÿï¼Ÿï¼‰ æ„‰å¿«æŸ¥çœ‹ç¯å¢ƒ æ­¤æ—¶åœ¨ jupyter ä¼šå¢åŠ ä¸€åˆ— Conda æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹Conda æ‹¥æœ‰çš„ç¯å¢ƒå˜é‡ã€‚ âš ï¸ ä½†æ˜¯æ­¤æ—¶ä¸èƒ½ç›´æ¥ç‚¹å‡»åˆ‡æ¢ç¯å¢ƒï¼Œå¦‚ ot æŸ¥çœ‹ç¯å¢ƒåˆä»–å¨˜æŠ¥é”™ï¼š è§£å†³æŠ¥é”™ï¼š åˆ‡æ¢ conda ç¯å¢ƒ å¦‚æœæƒ³è¦æŒ‡å®š conda æŒ‡å®šç¯å¢ƒï¼Œç»è¿‡æµ‹è¯•è¦å…ˆåœ¨cmd æ¿€æ´»æŒ‡å®šç¯å¢ƒï¼š 1activeta ot ç„¶åå†å¯åŠ¨ Jupyter ï¼Œå³å‘ç°æ­¤æ—¶ conda ç¯å¢ƒä»¥åŠåˆ‡æ¢åˆ° ot ï¼š æ‰©å±•2ï¼šåœ¨ jupyter ä½¿ç”¨ markdowm âš ï¸ ä¸€å¼€å§‹æŠ¥å„ç§é”™è¯¯ï¼Œåˆæ˜¯ conda.exe ä¸å­˜åœ¨ / äº§ç”Ÿå†²çªã€‚è§£å†³å¦‚ä¸‹ï¼š å¸è½½ Anaconda æœ‰äº›å†²åŠ¨äº†ï¼Œæ„Ÿè§‰å¯ä»¥ä¸å¸è½½ã€‚ æ–°å»ºç¯å¢ƒ base0 âš ï¸ æœ€å¼€å§‹å®‰è£… 3.7 ç‰ˆæœ¬ï¼Œåé¢å®‰è£…æ‰©å±•æ˜¾ç¤ºæŠ¥é”™äº§ç”Ÿå†²çªã€‚ 1conda create --name base0 --python=3.5 æ¥ä¸‹æ¥ä»¥ä¸‹å‘½ä»¤éƒ½èƒ½æ­£å¸¸æ‰§è¡Œäº†ã€‚ ç»è¿‡æµ‹è¯•å®é™…å¯è¡Œçš„å®‰è£…æ‰©å±•æ’ä»¶æ–¹æ³•ï¼š ç”¨ pip å®‰è£…æ‰©å±• 1pip install conda-forge jupyter_contrib_nbextensions è§£å†³å®‰è£…çš„ç›¸å…³ä¾èµ– æ‰§è¡Œ 1. å‘½ä»¤ä¼šæ˜¾ç¤ºè¦å…ˆå®‰è£… lxml ä¹‹ç±»ï¼Œä¸ºäº†é€Ÿåº¦å…ˆç›´æ¥ç”¨conda å®‰è£…ï¼š 1conda install lxml å®‰è£…æ‰©å±• 1pip install conda-forge jupyter_contrib_nbextensions è¿™æ ·å°±å¯ä»¥å¿«é€Ÿå®‰è£…å¥½æ‰©å±•äº†ã€‚ ä½†æ˜¯æ‰“å¼€æ‰©å±•å¯èƒ½å‡ºç°ä¸‹é¢é—®é¢˜ï¼š å°è¯•æ‰§è¡Œä¸‹é¢å‘½ä»¤å³å¯è§£å†³ï¼š 1jupyter contrib nbextensions install --sys-prefix --skip-running-check å®‰è£…æ‰©å±• 1conda install -c conda-forge jupyter_contrib_nbextensions å¼€å§‹ä½¿ç”¨ markdown ç‚¹å‡»å¯¼èˆªæ å¤šå‡ºæ¥çš„ Nbextensions ç±»ç›®ï¼Œå‹¾é€‰ Tableof Contents â‘µ ã€‚ ç„¶åä¾¿å¯ä»¥åœ¨ Jupyter ä¸­ä½¿ç”¨ markdown äº† ï¼š è¡¥å……ä½¿ç”¨ åŠ è½½å„ç§ åŠ è½½æŒ‡å®šç½‘å€æºç  1%load URL åŠ è½½æœ¬åœ° python æ–‡ä»¶ 1%load Pythonæ–‡ä»¶çš„ç»å¯¹è·¯å¾„ ğŸ™‚ å…¶å®ä½ ä¸æƒ³åŠ è½½ python æ–‡ä»¶å†è¿è¡Œï¼Œä¹Ÿå¯ç›´æ¥è¿è¡Œæ–‡ä»¶ã€‚ 1%run Pythonæ–‡ä»¶çš„ç»å¯¹è·¯å¾„ ä½¿ç”¨ shell å‘½ä»¤ 1!shellå‘½ä»¤ !pwd : è·å–å½“å‰ç¬”è®°æœ¬æ‰€åœ¨ç»å¯¹è·¯å¾„ä½ç½® ä¹Ÿå¯åœ¨ jupyter æ‰“å¼€ç»ˆç«¯ ï¼Œ new â€”&gt; Terminal ã€‚ å¿«æ·é”® æŒ‰escé”®è¿›å…¥å‘½ä»¤æ¨¡å¼ï¼Œæ­¤æ—¶ä¸èƒ½æ“ä½œå•å…ƒæ ¼ æŒ‰enteræˆ–returné”®è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œå¯ç¼–è¾‘å•å…ƒæ ¼ 1.2 å¼ é‡ 1.2.1 ç”Ÿæˆå¼ é‡ ä»¥ä¸‹éƒ½éœ€å¼•å…¥å¦‚ä¸‹åŒ…ã€‚ 12from __future__ import print_functionimport torch åº“å‡½æ•°ç”Ÿæˆ ç±»ä¼¼äº numpy åº“å‡½æ•°ç”Ÿæˆndarrayï¼Œä½†æœ‰æ—¶å€™ numpy ä¼ å…¥æœ‰æ—¶æ˜¯tripleï¼Œè€Œ pytorch ä¼ å…¥åŸºæœ¬éƒ½æ˜¯ int 12345678# empty ï¼š æ²¡æœ‰åˆå§‹åŒ–çš„å¼ é‡ï¼ˆå…ƒç´ éšæœºï¼‰torch.empty(5, 3)# randï¼šéšæœºåˆå§‹åŒ–å¼ é‡torch.rand(5, 3)# zerosï¼šç”Ÿæˆå…¨é›¶å¼ é‡torch.zeros(5, 3, dtype=torch.long) # åŒæ—¶è¿˜æŒ‡å®šå…ƒç´ ç±»ä¼¼ä¸º long ç›´æ¥æ„é€  12x = torch.tensor([5.5, 3])print(x)Copy è¾“å‡ºï¼š 1tensor([5.5000, 3.0000]) æ ¹æ®å·²æœ‰å¼ é‡æ„é€  123456X = torch.zeros(3,3)print(X)# æ ¹æ®Xå®ä¾‹æ–¹æ³• new_ones ç”Ÿæˆå…¨0å¼ é‡ï¼Œå¤§å°ä¹Ÿå¯æ”¹å˜ï¼ˆé‚£ä¸ç­‰äºç›´æ¥åº“å‡½æ•°åˆ›å»ºï¼Ÿï¼‰X1 = X.new_ones(2,2,dtype=torch.double)print(X1) è¾“å‡ºï¼š 12345tensor([[0., 0., 0.], [0., 0., 0.], [0., 0., 0.]])tensor([[1., 1.], [1., 1.]], dtype=torch.float64) 1.2.2 å¸¸ç”¨å¼ é‡æ–¹æ³• å½¢çŠ¶ç›¸å…³ 123456789101112# 1.æŸ¥çœ‹å½¢çŠ¶X.size() # è¾“å‡ºï¼štorch.Size([3, 3])# 2.æ”¹å˜å½¢çŠ¶ &gt;&gt;&gt; x = torch.randn(4, 4)torch.Size([4, 4])&gt;&gt;&gt; y = x.view(16)torch.Size([16])&gt;&gt;&gt; z = x.view(-1, 8) # å‚æ•°ä¸º-1ï¼ŒæŒ‡çš„æ˜¯è¿™ä¸ªç»´åº¦æ ¹æ®ï¼šå…ƒç´ ä¸ªæ•°/å…¶å®ƒç»´åº¦ ï¼Œè‡ªåŠ¨è®¡ç®—å‡ºæ¥torch.Size([2, 8]) ç´¢å¼•æ“ä½œ ç±»ä¼¼ numpy è¿›è¡Œå„ç§ç´¢å¼•æ“ä½œã€‚ 12345&gt;&gt;&gt; x = torch.rand(3,3)&gt;&gt;&gt; xtensor([[0.3667, 0.7708, 0.9581], [0.0958, 0.6113, 0.3566], [0.6013, 0.0894, 0.2580]]) åˆ‡ç‰‡ç´¢å¼•ï¼š 123# ç´¢å¼•ç¬¬2åˆ—&gt;&gt;&gt; x[:,1]tensor([0.7708, 0.6113, 0.0894]) ä¸æƒ³å†™äº†â€¦ä»Šå¤©æ˜¯ 2019 / 11 / 12 16:58 ï¼Œæˆ‘æ˜¯é’é’è‰åŸå¸¦ç°ç‹¼å“ˆå“ˆ numpyæ•°ç»„ â‡„ Torch å¼ é‡ ndarray æ•°ç»„æ¯ä¸ªå…ƒç´ ä¹‹é—´æ˜¯ç©ºæ ¼ ï¼ŒTensor æ˜¯ é€—å· ã€‚ torch å¼ é‡ â†’ numpy æ•°ç»„ ï¼š 1234# numpy()a = torch.ones(5) # å¼ é‡ : tensor([1., 1., 1., 1., 1.])b = a.numpy() # ndarray :[1. 1. 1. 1. 1.] torch å¼ é‡ â† numpy æ•°ç»„ ï¼š 1234# torch.form_numpy()a = np.ones(5) # ndarrayï¼š[1. 1. 1. 1. 1.]b = torch.from_numpy(a) # å¼ é‡ï¼š tensor([1., 1., 1., 1., 1.]) 1.2.3 å¼ é‡è¿ç®— åŠ å‡ä¹˜é™¤ ä»…ä»¥åŠ æ³•ä¸ºä¾‹ï¼Œæ›´å¤šä¸Šç™¾ç§è¿ç®—å‚è€ƒï¼šè¿™é‡Œ 1234567891011# 1.ç›´æ¥ç›¸åŠ y = torch.rand(5, 3)print(x + y)# 2.åº“å‡½æ•° torch.addtorch.add(x, y)# 3.å¼ é‡å®ä¾‹æœ¬èº«å‡½æ•°ï¼ˆin-placeï¼‰y.add_(x) # adds x to y# å…¶å®ƒin-placeæ“ä½œx.copy_(y) # å¤åˆ¶yåˆ°x 1.3 è‡ªåŠ¨æ±‚å¯¼ pytorch åœ¨æ‰€æœ‰ç¥ç»ç½‘ç»œçš„æ ¸å¿ƒæ˜¯ autograd åŒ…ï¼Œè€Œautograd åŒ…æ ¸å¿ƒç±»æ˜¯ torch.Tensor ã€‚ å¦‚ä½•è¿›è¡Œè‡ªåŠ¨æ±‚å¯¼ ï¼š ç»™å¸Œæœ›è¿½è¸ªå¯¹å®ƒè¿›è¡Œæ±‚å¯¼çš„å¼ é‡xï¼Œè®¾ç½®å±æ€§ requires_grad = True å½“å®Œæˆè®¡ç®—åï¼Œé€šè¿‡è°ƒç”¨ backward(gradient) æ–¹æ³•ï¼Œè‡ªåŠ¨è®¡ç®—æ‰€æœ‰çš„æ¢¯åº¦ï¼ˆè‡ªåŠ¨ç´¯åŠ åˆ° grad å±æ€§ï¼‰ è°ƒç”¨ backward() æ–¹æ³•éœ€è¦æŒ‡å®šä¸€ä¸ªå‚æ•°gradientï¼Œè¯¥å‚æ•°åŒ¹é…å¼ é‡å½¢çŠ¶ ï¼Ÿ ç‰¹åˆ«çš„ï¼Œå¦‚æœæ­¤æ—¶å¼ é‡æ˜¯æ ‡é‡ï¼Œå¯ä¸ä¼ å…¥å‚æ•°ï¼Œç­‰ä»·æ­¤æ—¶ gradient = torch.tensor(1) ã€‚ é€šè¿‡è¢«è¿½è¸ªçš„å¼ é‡ x å±æ€§å€¼ grad ï¼Œå³ x.grad ä¾¿å¯æ±‚å‡ºå®ƒçš„æ¢¯åº¦ å¦‚æœä¸å¸Œæœ›è·Ÿè¸ªå†å²è®°å½• ï¼š å°†ä»£ç å—åŒ…è£…åœ¨ with torch.no_grad()ï¼š ä¸­ 1.3.1 å…³äº Function Function æ˜¯è‡ªåŠ¨æ±‚å¯¼å¦å¤–ä¸€ä¸ªéå¸¸é‡è¦çš„*ç±»* ã€‚Tensorç±» å’Œ Functionç±»äº’ç›¸è¿æ¥å¹¶ç”Ÿæˆä¸€ä¸ªéå¾ªç¯å›¾ï¼Œå®ƒè¡¨ç¤ºå’Œå­˜å‚¨äº†å®Œæ•´çš„è®¡ç®—å†å²ã€‚ æ¯ä¸ªå¼ é‡éƒ½æœ‰ä¸€ä¸ª.grad_fnå±æ€§ï¼Œè¿™ä¸ªå±æ€§å¼•ç”¨äº†ä¸€ä¸ªåˆ›å»ºäº†Tensorçš„Function ï¼ˆæ²¡å¤ªæ˜ç™½ ï¼Ÿï¼‰ 1.3.2 å‘é‡æ±‚å¯¼ï¼ˆæ²¡å¤ªæ•´æ˜ç™½ï¼‰ å·²çŸ¥ yâƒ—=f(xâƒ—)\\vec y = f(\\vec x)yâ€‹=f(x) ï¼Œ å…¶ä¸­ yâƒ—\\vec yyâ€‹ å’Œ xâƒ—\\vec xx éƒ½æ˜¯å‘é‡ï¼Œé‚£ä¹ˆ yâƒ—\\vec yyâ€‹ å¯¹ xâƒ—\\vec xx çš„æ¢¯åº¦å½¢å¼åº”è¯¥æ˜¯ï¼Ÿ åœ¨æ•°å­¦ä¸Šï¼Œâˆ‚yâƒ—âˆ‚xâƒ—\\frac{\\partial \\vec y}{\\partial \\vec x}âˆ‚xâˆ‚yâ€‹â€‹ åº”è¯¥æ˜¯ä¸€ä¸ªé›…å¯æ¯”çŸ©é˜µï¼Œå¯è®°ä¸º JJJ : J=[âˆ‚yâƒ—1âˆ‚xâƒ—1 ... âˆ‚yâƒ—mâˆ‚xâƒ—1...âˆ‚yâƒ—1âˆ‚xâƒ—n ... âˆ‚yâƒ—mâˆ‚xâƒ—n]J = \\begin{bmatrix} \\frac{\\partial \\vec y_1}{\\partial \\vec x_1} \\ ... \\ \\frac{\\partial \\vec y_m}{\\partial \\vec x_1} \\\\ ... \\\\ \\frac{\\partial \\vec y_1}{\\partial \\vec x_n} \\ ... \\ \\frac{\\partial \\vec y_m}{\\partial \\vec x_n} \\end{bmatrix} J=â£â¡â€‹âˆ‚x1â€‹âˆ‚yâ€‹1â€‹â€‹ ... âˆ‚x1â€‹âˆ‚yâ€‹mâ€‹â€‹...âˆ‚xnâ€‹âˆ‚yâ€‹1â€‹â€‹ ... âˆ‚xnâ€‹âˆ‚yâ€‹mâ€‹â€‹â€‹â¦â¤â€‹ å·²çŸ¥ l=g(yâƒ—)l=g(\\vec y)l=g(yâ€‹) å…¶ä¸­ lll ä¸ºæ ‡é‡ ï¼Œé‚£ä¹ˆ âˆ‚lâˆ‚yâƒ—\\frac{\\partial l }{\\partial \\vec y}âˆ‚yâ€‹âˆ‚lâ€‹ æ¢¯åº¦vvv å½¢å¼åº”è¯¥æ˜¯ï¼Ÿ v=[âˆ‚lâˆ‚y1 ... âˆ‚lâˆ‚ym]Tv = \\begin{bmatrix} \\frac{\\partial l }{\\partial y_1} \\ ... \\ \\frac{\\partial l }{\\partial y_m} \\end{bmatrix} ^T v=[âˆ‚y1â€‹âˆ‚lâ€‹ ... âˆ‚ymâ€‹âˆ‚lâ€‹â€‹]T æ ¹æ®ä¸Šè¿°ï¼Œæˆ‘ä»¬å·²çŸ¥ J=âˆ‚yâƒ—âˆ‚xâƒ—J = \\frac{\\partial \\vec y}{\\partial \\vec x}J=âˆ‚xâˆ‚yâ€‹â€‹ ï¼Œ v=âˆ‚lâˆ‚yâƒ—v =\\frac{\\partial l }{\\partial \\vec y}v=âˆ‚yâ€‹âˆ‚lâ€‹ , é‚£ä¹ˆ âˆ‚lâˆ‚xâƒ—\\frac{\\partial l }{\\partial \\vec x}âˆ‚xâˆ‚lâ€‹ ? æ ¹æ®é“¾å¼æ³•åˆ™ï¼š âˆ‚lâˆ‚xâƒ—\\frac{\\partial l }{\\partial \\vec x}âˆ‚xâˆ‚lâ€‹ = âˆ‚lâˆ‚yâƒ—â‹…âˆ‚yâƒ—âˆ‚xâƒ—\\frac{\\partial l }{\\partial \\vec y} Â· \\frac{\\partial \\vec y}{\\partial \\vec x}âˆ‚yâ€‹âˆ‚lâ€‹â‹…âˆ‚xâˆ‚yâ€‹â€‹ âˆ‚lâˆ‚xâƒ—=âˆ‚lâˆ‚yâƒ—â‹…âˆ‚yâƒ—âˆ‚xâƒ—=Jâ‹…v=[âˆ‚yâƒ—1âˆ‚xâƒ—1 ... âˆ‚yâƒ—mâˆ‚xâƒ—1...âˆ‚yâƒ—1âˆ‚xâƒ—n ... âˆ‚yâƒ—mâˆ‚xâƒ—n][âˆ‚lâˆ‚y1...âˆ‚lâˆ‚ym]=[âˆ‚lâˆ‚x1...âˆ‚lâˆ‚xm]\\frac{\\partial l }{\\partial \\vec x} = \\frac{\\partial l }{\\partial \\vec y} Â· \\frac{\\partial \\vec y}{\\partial \\vec x} = JÂ·v = \\begin{bmatrix} \\frac{\\partial \\vec y_1}{\\partial \\vec x_1} \\ ... \\ \\frac{\\partial \\vec y_m}{\\partial \\vec x_1} \\\\ ... \\\\ \\frac{\\partial \\vec y_1}{\\partial \\vec x_n} \\ ... \\ \\frac{\\partial \\vec y_m}{\\partial \\vec x_n} \\end{bmatrix} \\begin{bmatrix} \\frac{\\partial l }{\\partial y_1} \\\\ ... \\\\ \\frac{\\partial l }{\\partial y_m} \\end{bmatrix} = \\begin{bmatrix} \\frac{\\partial l }{\\partial x_1} \\\\ ... \\\\ \\frac{\\partial l }{\\partial x_m} \\end{bmatrix} âˆ‚xâˆ‚lâ€‹=âˆ‚yâ€‹âˆ‚lâ€‹â‹…âˆ‚xâˆ‚yâ€‹â€‹=Jâ‹…v=â£â¡â€‹âˆ‚x1â€‹âˆ‚yâ€‹1â€‹â€‹ ... âˆ‚x1â€‹âˆ‚yâ€‹mâ€‹â€‹...âˆ‚xnâ€‹âˆ‚yâ€‹1â€‹â€‹ ... âˆ‚xnâ€‹âˆ‚yâ€‹mâ€‹â€‹â€‹â¦â¤â€‹â£â¡â€‹âˆ‚y1â€‹âˆ‚lâ€‹...âˆ‚ymâ€‹âˆ‚lâ€‹â€‹â¦â¤â€‹=â£â¡â€‹âˆ‚x1â€‹âˆ‚lâ€‹...âˆ‚xmâ€‹âˆ‚lâ€‹â€‹â¦â¤â€‹ 1.3.3 ä¸¾ä¸ªæ —å­ 1import torch æ —å­1 ä»¥ä¸‹è¿‡ç¨‹å¯è¡¨ç¤ºä¸º ï¼šout=14âˆ‘izi=14âˆ‘i3(xi+2)2out = \\frac{1}{4} \\sum_i z_i = \\frac{1}{4} \\sum_i 3(x_i+2)^2out=41â€‹âˆ‘iâ€‹ziâ€‹=41â€‹âˆ‘iâ€‹3(xiâ€‹+2)2 1234x = torch.ones(2,2,requires_grad=True) # è¿½è¸ªå¼ é‡xy = x + 2z = y * y * 3out = z.mean() out è°ƒç”¨æ–¹æ³• backward è¿›è¡Œåå‘ä¼ æ’­ï¼Œå› ä¸º out æ˜¯æ ‡é‡ï¼Œæ‰€ä»¥å¯ä¸ç”¨ä¼ å‚æ•°ï¼š cvb n 1out.backward() ç”±äº x è®¾ç½®äº† requires_grad = True ï¼Œå…¶æ¢¯åº¦ä¼šè¢«è‡ªåŠ¨ç´¯åŠ ï¼Œæˆ‘ä»¬å¯è®¡ç®—å…¶æ¢¯åº¦ä¸ºï¼š 12345x.grad# è¾“å‡º# tensor([[4.5000, 4.5000],# [4.5000, 4.5000]]) Q : æ²¡æ˜ç™½ï¼Œæ ¹æ® 1.3.2 èŠ‚ï¼Œæ­¤æ—¶è¾“å‡ºä¸è¯¥æ˜¯ä¸€ä¸ª 4*1 å¤§å°å¼ é‡å—ï¼Ÿ A: éä¹Ÿï¼Œå› ä¸ºæ­¤æ—¶x æ˜¯ 2*2 å¤§å°ï¼Œè€Œ 1.3.2 èŠ‚ x æ˜¯ m*1 å¤§å° æ —å­2 ä»¥ä¸‹è¿‡ç¨‹å¯è¡¨ç¤ºä¸ºï¼š y=(xâˆ—2)2âˆ—y.data.normy = (x*2)^{2*y.data.norm}y=(xâˆ—2)2âˆ—y.data.norm 12345678910x = torch.randn(3, requires_grad=True)y = x * 2while y.data.norm() &lt; 1000: y = y * 2print(y)# è¾“å‡ºy# tensor([-920.6895, -115.7301, -867.6995], grad_fn=&lt;MulBackward&gt;) æ˜¾ç„¶ï¼Œæ­¤æ—¶ yyy æ˜¯ä¸€ä¸ªå‘é‡ï¼Œé‚£ä¹ˆæ­¤æ—¶è°ƒç”¨ backward è¿›è¡Œåå‘ä¼ æ’­éœ€ä¼ é€’å‚æ•° gradient ï¼š ä¾ç„¶ä¸å¤ªæ˜ç™½æ­¤æ—¶ gradient å‚æ•°æ„ä¹‰ï¼Ÿ å¤§å°å’Œ x ä¿æŒä¸€è‡´ï¼Œé‚£ä¹ˆå…¶ä¸­çš„åˆ—è¡¨å€¼æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ ç»è¿‡è¯·æ•™å¤§å¸ˆå…„ï¼Œè§£é‡Šå¦‚ä¸‹ï¼š gradient å‚æ•°è¡¨ç¤ºå­¦ä¹ é€Ÿç‡ Î±\\alphaÎ± ï¼Œå½“ Î±=1\\alpha = 1Î±=1 æ—¶ x.grad = 512 ï¼›Î±=0.1\\alpha = 0.1Î±=0.1 ,é‚£ä¹ˆ x.grad = 51.2ã€‚ æ§åˆ¶å½“å‰æ¢¯åº¦å˜åŒ–é€Ÿç‡ï¼Œè€Œä¸”å¯å¯¹äºæ¯ä¸ªä¸åŒæ ·æœ¬ xix_ixiâ€‹ è¿›è¡Œæ§åˆ¶ã€‚ 123456gradients = torch.tensor([0.1, 1.0, 0.0001], dtype=torch.float)y.backward(gradients)print(x.grad)# tensor([ 51.2000, 512.0000, 0.0512]) 1.4 ç¥ç»ç½‘ç»œ æˆ‘çš„ç¥ç»ç½‘ç»œéƒ½æ˜¯æ²¡æœ‰å¥½å¥½è®­ç»ƒå•Šï¼Œåšç¬”è®°è¿˜åœ¨èƒ¡æ€ä¹±å†™ï¼Œç°åœ¨åå‘ä¼ æ’­è¿˜æ¥å¾—åŠå—ï¼Ÿ 14.1 å¿«é€Ÿå…¥é—¨ å®šä¹‰ç½‘ç»œ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647import torchimport torch.nn as nnimport torch.nn.functional as Fclass Net(nn.Module): def __init__(self): super(Net, self).__init__() # class torch.nn.Conv1d(in_channels, out_channels, kernel_size, stride=1, padding=0, dilation=1, groups=1, bias=True) # è¾“å…¥å›¾åƒchannelsï¼š1ï¼›è¾“å‡ºchannelsï¼š6ï¼›kernel = 5x5ï¼Œæ–¹é˜µå¯åªå†™ä¸€ä¸ªæ•°å­—5 self.conv1 = nn.Conv2d(1, 6, 5) self.conv2 = nn.Conv2d(6, 16, 5) # class torch.nn.Linear(in_features, out_features, bias=True) # in_features ï¼š è¾“å…¥æ ·æœ¬çš„å¤§å° # out_featuresï¼š è¾“å‡ºæ ·æœ¬çš„å¤§å° # nn.Linear ä¼ å…¥ç›¸è¿ä¸¤ä¸ªlayerå„è‡ªå¤§å°ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°fc(x),å¯ç”¨æ¥è®¡ç®—å‰å‘ä¼ æ’­ä¸‹ä¸€å±‚layerå€¼ self.fc1 = nn.Linear(16 * 5 * 5, 120) self.fc2 = nn.Linear(120, 84) self.fc3 = nn.Linear(84, 10) def forward(self, x): # torch.nn.functional.max_pool2d(input, kernel_size, stride=None, padding=0, dilation=1, ceil_mode=False, return_indices=False) # inputï¼šè¾“å…¥çš„å¼ é‡ã€‚åœ¨è¿™é‡Œæ¿€æ´»å‡½æ•°ä¸ºreluï¼Œä¼šå°†ç¥ç»å…ƒè¾“å…¥å€¼æ˜ å°„åˆ°æ–°å€¼ï¼ˆè¾“å‡ºå€¼ï¼‰ x = F.max_pool2d(F.relu(self.conv1(x)), (2, 2)) x = F.max_pool2d(F.relu(self.conv2(x)), 2) x = x.view(-1, self.num_flat_features(x)) # å’Œå…¨è¿æ¥å±‚ç›¸è¿å…ˆå¹³é“º x = F.relu(self.fc1(x)) x = F.relu(self.fc2(x)) x = self.fc3(x) return x def num_flat_features(self, x): &quot;&quot;&quot; å¹³é“ºå·ç§¯å±‚å›¾åƒç‰¹å¾å‘é‡ï¼š å› ä¸ºè¾“å…¥å›¾ç‰‡size = (1,1,32,32),è¡¨ç¤ºè¾“å…¥1å¼ å¤§å°ä¸º1@32*32çš„ç‰¹å¾å›¾ æ˜¾ç„¶ç¬¬ä¸€ä¸ªå‚æ•°1ï¼ŒæŒ‡å›¾ç‰‡ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯ä¸€æ¬¡æ‰¹å¤„ç†çš„æ•°é‡ &quot;&quot;&quot; size = x.size()[1:] # é™¤å»æ‰¹å¤„ç†ç»´åº¦çš„å…¶ä»–æ‰€æœ‰ç»´åº¦ï¼Œ[1,16,5,5] --&gt; [16,5,5] num_features = 1 for s in size: num_features *= s return num_featuresnet = Net() ç°åœ¨è®©æˆ‘ä»¬è¿›è¡Œå‰å‘ä¼ æ’­å’Œåå‘ä¼ æ’­ã€æ›´æ–°æƒé‡ç­‰ã€‚ä¸‹ä¸€èŠ‚å°†ä¼šä»¥å®é™…ä¾‹å­æ¥ç»Ÿåˆä¸‹é¢æ–¹æ³•ã€‚ å‰å‘ä¼ æ’­ 12input = torch.randn(1, 1, 32, 32) # éšæœºè¾“å…¥ä¸€å¼ å›¾åƒout = net(input) # å‰å‘ä¼ æ’­ è¾“å‡ºï¼š 12tensor([[ 0.0399, -0.0856, 0.0668, 0.0915, 0.0453, -0.0680, -0.1024, 0.0493, -0.1043, -0.1267]], grad_fn=&lt;AddmmBackward&gt;) æŸå¤±å‡½æ•° ä¸€ä¸ªæŸå¤±å‡½æ•°æ¥å—ä¸€å¯¹ (output, target) ä½œä¸ºè¾“å…¥ï¼Œnn åŒ…å¤šä¸ªä¸åŒæŸå¤±å‡½æ•°ã€‚ ä¾‹å¦‚ï¼šå‡æ–¹è¯¯å·®æŸå¤±å‡½æ•°MSEï¼Œnn.MSELoss() 123456output = net(input)target = torch.randn(10) # æœ¬ä¾‹å­ä¸­ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®target = target.view(1, -1) # ä½¿ç›®æ ‡å€¼ä¸æ•°æ®å€¼å½¢çŠ¶ä¸€è‡´,size=(1,10)criterion = nn.MSELoss()loss = criterion(output, target) # tensor(1.0263, grad_fn=&lt;MseLossBackward&gt;) åå‘ä¼ æ’­ Q : ä¼ å…¥ä¸€ä¸ªéšæœºæ¢¯åº¦è¿›è¡Œåå‘ä¼ æ’­ï¼Ÿ æœ‰äº† loss å‡½æ•°æˆ‘ä»¬ä¾¿å¯ä»¥è¿›è¡Œåå‘ä¼ æ’­ã€‚ 12net.zero_grad() # æ¸…é™¤æ‰€æœ‰å‚æ•°çš„æ¢¯åº¦ç¼“å­˜loss.backward(torch.randn(1, 10)) # ä¼ å…¥ä¸€ä¸ªéšæœºæ¢¯åº¦è¿›è¡Œåå‘ä¼ æ’­ï¼Ÿ åŒæ—¶æˆ‘ä»¬è¿˜å¯ä»¥æŸ¥çœ‹åå‘ä¼ æ’­å conv1 å±‚ bias æ¢¯åº¦ï¼š 12&gt;&gt;&gt; net.conv1.bias.gradtensor([ 0.0084, 0.0019, -0.0179, -0.0212, 0.0067, -0.0096]) 1.4.2 ä¸¾ä¸ªæ —å­ï¼šè®­ç»ƒåˆ†ç±»å™¨ è¿™éƒ¨åˆ†ä¸»è¦å‚è€ƒï¼šåŸºäºPyTorchçš„CIFAR10å°è®° è®­ç»ƒä¸€ä¸ªå›¾åƒåˆ†ç±»å™¨å¯æŒ‰ç…§ä»¥ä¸‹é¡ºåºè¿›è¡Œï¼š ä½¿ç”¨torchvisionåŠ è½½å’Œå½’ä¸€åŒ– CIFAR10 è®­ç»ƒé›†å’Œæµ‹è¯•é›† å®šä¹‰ä¸€ä¸ªå·ç§¯ç¥ç»ç½‘ç»œ å®šä¹‰æŸå¤±å‡½æ•° åœ¨è®­ç»ƒé›†ä¸Šè®­ç»ƒç½‘ç»œ åœ¨æµ‹è¯•é›†ä¸Šæµ‹è¯•ç½‘ç»œ 1 åŠ è½½æ•°æ® è¯¥éƒ¨åˆ†ä¸»è¦å‚è€ƒäº ï¼š åŸºäºPyTorchçš„CIFAR10å°è®° æµ‹è¯•æ•°æ®é›†ä½¿ç”¨ CIFAR10ï¼Œç›´æ¥ç”¨torchvision å¤ªæ…¢ï¼Œæˆ‘ä»¬ä½¿ç”¨ é“¾æ¥ æ¥è¿›è¡Œä¸‹è½½ã€‚ ä¸‹è½½å®Œæ¯•åï¼Œå¯¼å…¥åŒ…å’Œä¸€äº›åŸºæœ¬å‚æ•°ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344import torchimport torchvisionimport torchvision.transforms as transformsimport matplotlib.pyplot as pltimport numpy as np# å‚æ•°è®¾ç½®EPOCHS = 20BATCH_SIZE = 512# 0.åˆ›å»ºä¸€ä¸ªè½¬æ¢å™¨ï¼Œå°†torchvisionæ•°æ®é›†çš„è¾“å‡ºèŒƒå›´[0,1]è½¬æ¢ä¸ºå½’ä¸€åŒ–èŒƒå›´çš„å¼ é‡[-1,1]# ä¸ºä»€ä¹ˆéœ€è¦è½¬æ¢ï¼Ÿtransform = transforms.Compose\\([ transforms.ToTensor(), transforms.Normalize((0.5, 0.5, 0.5), (0.5, 0.5, 0.5))])# 1.åˆ›å»ºè®­ç»ƒé›†trainset = torchvision.datasets.CIFAR10\\( root=&#x27;./data&#x27;, # å­˜æ”¾çš„ç›®å½• train=True, # æ˜¯å¦è®­ç»ƒé›† download=True, # æ˜¯å¦éœ€è¦ä¸‹è½½ transform=transform # æ˜¯å¦è¿›è¡Œè½¬æ¢)# 2.åˆ›å»ºæµ‹è¯•é›†testset = torchvision.datasets.CIFAR10\\( root=&#x27;./data&#x27;, train=False, download=True, transform=transform)# 3.åˆ›å»ºè®­ç»ƒ/æµ‹è¯•åŠ è½½å™¨# shuffle -- æ˜¯å¦æ‰“ä¹±é¡ºåºtrainloader = torch.utils.data.DataLoader(trainset, batch_size=BATCH_SIZE, shuffle=True )testloader = torch.utils.data.DataLoader (testset, batch_size=BATCH_SIZE, shuffle=True )# 4.è®¾ç½®ç±»åˆ«æ ‡ç­¾classes = (&#x27;plane&#x27;, &#x27;car&#x27;, &#x27;bird&#x27;, &#x27;cat&#x27;, &#x27;deer&#x27;, &#x27;dog&#x27;, &#x27;frog&#x27;, &#x27;horse&#x27;, &#x27;ship&#x27;, &#x27;truck&#x27;) ä¸Šé¢ä¸€äº›ä»£ç è¿›è¡Œè§£é‡Šï¼š è½¬æ¢å™¨ 1transform = transforms.Compose([transforms.ToTensor(), transforms.Normalize((0.5, 0.5, 0.5), (0.5, 0.5, 0.5))]) ToTensor(): å°†ä¸€ä¸ªå–å€¼æ˜¯ [0,255]çš„PI.Imageï¼ˆæˆ–è€… shape=(H,W,C) çš„ndarrayï¼‰ â€”&gt; å–å€¼æ˜¯[0,1,0]çš„torch.FloadTensorï¼ˆåŒæ—¶ shape=(C,H,W)ï¼‰ Normalize(mean, std) ï¼š ç»™å®šå‡å€¼ meanã€stdï¼Œä¼šå°†Tensoræ­£åˆ™åŒ–ï¼Œå³ï¼šNormalized_image=(image-mean)/std transforms.Compose([ transforms.CenterCrop(10),transforms.ToTensor() ]) å°†å¤šä¸ª transform ç»„åˆèµ·æ¥ä½¿ç”¨ï¼Œæ¯”å¦‚ä¸Šé¢æ˜¯è¿›è¡Œäº† ä¸­å¿ƒè£å‰ª + ToTensor 2 å®šä¹‰ç½‘ç»œ è¯¥ç½‘ç»œå®šä¹‰åœ¨æ–‡ä»¶: CNN1.py 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960import torchLR = 0.005 # å­¦ä¹ ç‡class Net(torch.nn.Module): # å®šä¹‰ç½‘ç»œç»“æ„ï¼š3ä¸ªå·ç§¯å±‚ + 1ä¸ªå…¨è¿æ¥å±‚ def __init__(self): super(Net, self).__init__() # 3ä¸ªå·ç§¯å±‚ # å®šä¹‰è¯¥å·ç§¯å±‚ä¾æ¬¡ç»è¿‡ï¼š 3*3å·ç§¯æ ¸ --&gt; ReLUæ¿€æ´»å‡½æ•° --&gt; æ± åŒ–å±‚ä¸‹é‡‡æ · self.conv1 = torch.nn.Sequential\\ (# Conv2d(in_channels, out_channels, kernel_size, stride=1, padding=0, dilation=1) torch.nn.Conv2d(3, 16, 3, padding=1), # 3@32*32 -&gt; 16@32*32 torch.nn.ReLU(), # ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å·ç§¯æ ¸å¤§å°2*2ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯stride torch.nn.MaxPool2d(2, 2) # 16*32*32 -&gt; 16*16*16 ) self.conv2 = torch.nn.Sequential\\ ( torch.nn.Conv2d(16, 32, 3, padding=1), # 16*16*16 -&gt; 32*16*16 torch.nn.ReLU(), torch.nn.MaxPool2d(2, 2) # 32*16*16 -&gt; 32*8*8 ) self.conv3 = torch.nn.Sequential\\ ( torch.nn.Conv2d(32, 64, 3, padding=1), # 32*8*8 -&gt; 64*8*8 torch.nn.ReLU(), torch.nn.MaxPool2d(2, 2) # 64*8*8 -&gt; 64*4*4 ) # 1ä¸ªå…¨è¿æ¥å±‚ï¼ˆ2ä¸ªï¼Ÿï¼‰ self.fc1 = torch.nn.Sequential\\ ( # class torch.nn.Linear(in_features, out_features, bias=True) torch.nn.Linear(64*4*4, 32), torch.nn.ReLU(), # torch.nn.Dropout() ) self.fc2 = torch.nn.Linear(32, 10) # å‰å‘ä¼ æ’­ def forward(self, x): x = self.conv1(x) x = self.conv2(x) x = self.conv3(x) x = x.view(-1, 64*4*4) # å’Œå…¨è¿æ¥å±‚ç›¸è¿å…ˆæ‰å¹³åŒ– x = self.fc1(x) x = self.fc2(x) return xnet = Net()net.cuda()# æŸå¤±å‡½æ•°ï¼šä½¿ç”¨äº¤å‰ç†µcriterion = torch.nn.CrossEntropyLoss() # æƒé‡æ›´æ–°è§„åˆ™ï¼šä½¿ç”¨Adamä¸‹é™ï¼ˆoptim.SGD,éšæœºæ¢¯åº¦ä¸‹é™ï¼‰optimizer = torch.optim.Adam(net.parameters(), lr=LR) 3 è®­ç»ƒå‡½æ•° &amp; æµ‹è¯•å‡½æ•° 1234567891011121314151617181920212223242526272829# 5.è®­ç»ƒå‡½æ•°def train(model, criterion, optimizer, trainloader, epochs=5, interval=50): print(&#x27;----- Train Start -----&#x27;) for epoch in range(epochs): running_loss = 0.0 # éå†æ•°æ®è¿­ä»£å™¨ï¼šè·å–æ•°æ®ä¿¡æ¯ for step, (x,y) in enumerate(trainloader): # è·å–è¾“å…¥ # [æ˜“é”™] ä½¿ç”¨GPUè®­ç»ƒï¼Œæ•°æ®ä¹Ÿéœ€è¦è®¾ç½®cuda inputs, labels = x.cuda(),y.cuda() # ä¸‹é¢å…¶å®å°±æ˜¯æ¢¯åº¦ä¸‹é™è¿‡ç¨‹ï¼Œå‚è€ƒï¼šhttps://www.zhihu.com/question/305638940 # æƒé‡æ¸…é›¶ optimizer.zero_grad() # ä¸€æ¬¡bacthè®¡ç®—å‡ºçš„æ¢¯åº¦g(losså¯¹weigthå¯¼æ•°ï¼‰ç”¨äº # æ›´æ–°æƒé‡ w = w - Î±*g åï¼Œä¸‹æ¬¡gè¦æ¸…é›¶é‡æ–°è®¡ç®— # è®¡ç®—lossåå‘ä¼ æ’­ output = model(inputs) # æœŸæœ›è¾“å‡ºå€¼ loss = criterion(output, labels) # è¯¥æ¬¡ä»£ä»· loss.backward() # åå‘ä¼ æ’­ optimizer.step() # æ›´æ–°æƒé‡ # è¾“å‡ºæ¯log_interval=50æ¬¡æ‰¹æ¬¡å¹³å‡loss # lossæ˜¯å¼ é‡ï¼štensor(2.3109, device=&#x27;cuda:0&#x27;, grad_fn=&lt;NllLossBackward&gt;) running_loss += loss.item() if step % log_interval == (log_interval - 1): print(&#x27;[%d, %5d] loss: %.4f&#x27; %(epoch+1, step+1, running_loss/ interval)) running_loss = 0.0 print(&#x27;----- Train Finished -----&#x27;) ç°åœ¨æˆ‘ä»¬æ¥å¼€å§‹è®¾ç½®æµ‹è¯•å‡½æ•°ï¼š 1234567891011121314151617181920212223242526272829303132333435# 6.æµ‹è¯•å‡½æ•°def test(model, testloader): print(&#x27;------ Test Start -----&#x27;) correct = 0 total = 0 with torch.no_grad(): for test_x, test_y in testloader: # æ‰¹å¤„ç†æ•°é‡ï¼Œbatch_size = 512: ä¸€æ¬¡è¾“å…¥512å¼ å›¾ç‰‡ # images.shape = torch.Size([512,3,32,32]) lable.shape = torch.Size([512]) images, labels = test_x.cuda(), test_y.cuda() # output.shape = torch.Size([512,10]) output = model(images) # predicted.shape = torch.Size([512]) # torch.max : è¿”å›æ¯è¡Œæœ€å¤§å€¼ï¼Œå¦‚æœ[æŒ‡å®šç»´åº¦] è¿˜ä¼šè¿”å›å¯¹åº”æœ€å¤§å€¼ç´¢å¼• # output.data : è·å–å¼ é‡æ•°æ®ï¼Œè¿”å›è¿˜æ˜¯ä¸€ä¸ªå¼ é‡ï¼Ÿ _, predicted = torch.max(output.data, 1) # size() æ–¹æ³•ï¼šè·å–å¤§å°ï¼Œè¿”å›ä¸€ä¸ªå¼ é‡å¦‚ï¼štorch.Size([3, 4]) # sum() æ–¹æ³•ï¼šæ±‚å¼ é‡æ‰€æœ‰å…ƒç´ å’Œï¼Œè¿”å›ä¸€ä¸ªå¼ é‡å¦‚ï¼štensor(3.2860) # item() æ–¹æ³•ï¼šæŠŠ[1]ä¸ªå…ƒç´ å¤§å°çš„å¼ é‡ï¼Œè½¬æ¢ä¸º pythonæ•°å€¼ç±»å‹ total += labels.size(0) correct += (predicted == labels).sum().item() accuracy = 100 * correct / total print(&#x27;Accuracy of the network is: %.4f %%&#x27; % accuracy) return accuracyif __name__ == &#x27;__main__&#x27;: # train(CNN1.net, CNN1.criterion, CNN1.optimizer, trainloader, epochs=EPOCHS) test(CNN1.net, testloader) æœ€åæµ‹è¯•å‡†ç¡®ç‡ä¸ºï¼š71.3% å·¦å³ã€‚ 4 è§„èŒƒä»£ç ç»“æ„ è¯¥éƒ¨åˆ†ä¸»è¦å‚è€ƒï¼š PyTorchå®æˆ˜æŒ‡å— å®šä¹‰æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š 1234567891011121314151617â”œâ”€â”€ checkpoints/â”œâ”€â”€ data/â”‚ â”œâ”€â”€ __init__.pyâ”‚ â”œâ”€â”€ dataset.pyâ”‚ â””â”€â”€ get_data.shâ”œâ”€â”€ models/â”‚ â”œâ”€â”€ __init__.pyâ”‚ â”œâ”€â”€ AlexNet.pyâ”‚ â”œâ”€â”€ BasicModule.pyâ”‚ â””â”€â”€ ResNet34.pyâ””â”€â”€ utils/â”‚ â”œâ”€â”€ __init__.pyâ”‚ â””â”€â”€ visualize.pyâ”œâ”€â”€ config.pyâ”œâ”€â”€ main.pyâ”œâ”€â”€ requirements.txtâ”œâ”€â”€ README.md äºŒã€å¸¸ç”¨å‡½æ•° å½’ä¸€ï¼šBatchNorm2d ä¸­æ–‡æ–‡æ¡£è§£é‡Š pytorch ä¸­æ–‡æ–‡æ¡£ ï¼šclass torch.nn.BatchNorm2d çŸ¥ä¹é—®ç­”ï¼šBNä¸ºä»€ä¹ˆæ•ˆæœå¥½? âš ï¸ å‚æ•° num_features : å®é™…åªä¼ çš„æ˜¯é€šé“æ•°ï¼ å®ä¾‹è¡¥å…… å‚è€ƒï¼šPytorchä¸­çš„Batch Normalizationæ“ä½œ å‡è®¾å­˜åœ¨4 ä¸ª batch ï¼Œæ¯ä¸ªç‰¹å¾å›¾å¤§å°ä¸ºï¼š3*2*2 ï¼Œå³é€šé“æ•°ä¸º 3 ï¼Œé•¿å®½ä¸º 2*2 ã€‚é‚£ä¹ˆå½’ä¸€åŒ–å¦‚ä¸‹ï¼š æ¯ä¸ªbatch ï¼Œä»ç›¸åŒé€šé“ï¼ˆæ¯”å¦‚ç¬¬ä¸€ä¸ªRé€šé“ï¼‰å–å‡ºç‰¹å¾å›¾å…¶å¤§å°ä¸º 2*2 ä¸Šè¿°ä¸€å…±æœ‰ 4 ä¸ª 2*2 çš„ç‰¹å¾å›¾ï¼Œå¯¹è¿™16 ä¸ªå…ƒç´ è¿›è¡Œå½’ä¸€åŒ–æ“ä½œ é‡å¤ 1 2 ä¸¤æ¬¡ ï¼ˆä¸€å…±3ä¸ªé€šé“ï¼‰ï¼Œåˆ™å¯¹å‰©ä½™ä¸¤ä¸ªé€šé“çš„16*2 ä¸ªå…ƒç´ ä¹Ÿè¿›è¡Œäº†å½’ä¸€åŒ–"},{"title":"å‰ç«¯åŸºç¡€ï¼ˆä¸€ï¼‰JavaScriptåŸºç¡€ç¬”è®°","date":"2022-01-02T11:54:25.545Z","updated":"2022-01-02T11:41:01.648Z","comments":true,"path":"NO_post/å‰ç«¯åŸºç¡€ï¼ˆä¸€ï¼‰JavaScriptç¬”è®°.html","permalink":"https://hwh.zone/NO_post/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%EF%BC%88%E4%B8%80%EF%BC%89JavaScript%E7%AC%94%E8%AE%B0.html","excerpt":"","text":"ç¬¬ä¸€ç« ï¼šå¿«é€Ÿå…¥é—¨ 1.1 hello javaScript! æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªç®€å• test.js æ–‡ä»¶ï¼Œé‡Œé¢æœ‰ä¸€è¡Œä»£ç è¾“å‡º â€œhello javaScript!â€ ï¼š 1alert(&quot;hello javaScript!&quot;); ç„¶ååœ¨å‡†å¤‡å¥½çš„ .html æ–‡ä»¶head æ ‡ç­¾å†…å¼•å…¥test.js æ–‡ä»¶ï¼š 123456789&lt;!DOCTYPE HTML&gt;&lt;html&gt; &lt;head&gt; &lt;!--è¿™é‡Œé»˜è®¤å½“å‰è·¯å¾„æ˜¯index.htmlæ‰€åœ¨ç›®å½•--&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;test.js&quot;&gt; &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;/body&gt;&lt;/html&gt; æ³¨æ„åŒºåˆ†å¼•å…¥ .jsæ–‡ä»¶ å’Œ cssæ–‡ä»¶åŒºåˆ«ï¼š .jsæ–‡ä»¶ ç”¨ä¸€å¯¹ &lt;script&gt;&lt;/script&gt; æ ‡ç­¾åŒ…å›´å¼•ç”¨ ï¼›.css æ–‡ä»¶ç”¨ æ ‡ç­¾æŒ‡å‘ï¼š 1&lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=&quot;main.css&quot; &gt; .jsæ–‡ä»¶ ç”¨ src å±æ€§æŒ‡å‘ ï¼›.css æ–‡ä»¶ç”¨ href å±æ€§æŒ‡å‘ã€‚ å¼•å…¥ js / cssæ–‡ä»¶ä¸æˆåŠŸï¼Ÿ æ²¡æœ‰ä¿å­˜æ–‡ä»¶ é»˜è®¤ VSCode ä¸ä¼šè‡ªåŠ¨ä¿å­˜æ–‡ä»¶ï¼Œå¦‚æœä¸è‡ªå·± ctrl+s ï¼Œæ‰“å¼€æµè§ˆå™¨ F12 --&gt; Source å‘ç° mian.cssæ–‡ä»¶ä¸ºç©ºã€‚ å¯ä»¥è®¾ç½®è‡ªåŠ¨ä¿å­˜æ–‡ä»¶ï¼Œæˆ–è€…è‡ªå·±æ‰‹åŠ¨ä¿å­˜è§£å†³ã€‚ é”™ç”¨ href å±æ€§ å¼•ç”¨ jsæ–‡ä»¶ è§å‰ã€‚ 1.2 å®‰è£… codeRunner æ’ä»¶ æˆ‘ä»¬è‚¯å®šä¸å¸Œæœ›ï¼Œæ¯æ¬¡è¾“å‡ºä¸€äº›ä¿¡æ¯ï¼Œéƒ½è¦æ‰“å¼€æµè§ˆå™¨å»æŸ¥çœ‹ï¼š 1alert(&quot;æˆ‘æƒ³è¾“å‡ºä¸€äº›ä¿¡æ¯&quot;); å¦‚æœå¯ä»¥ç›´æ¥åœ¨ VSCoder ä¸­å°±æ‰“å°å‡ºä¿¡æ¯å¤šå¥½å•Šï¼ä½†æ˜¯ç›´æ¥å†™åœ¨js æ–‡ä»¶ä¸­ï¼Œåªèƒ½åœ¨æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹ã€‚ 1console.log(&quot;æˆ‘æƒ³è¾“å‡ºä¸€äº›ä¿¡æ¯&quot;); å¦‚ä½•ç›´æ¥æ‰“å°ä¿¡æ¯ï¼Ÿ JavaScript å¯ä»¥ç›´æ¥æ‰“å°ï¼šæ•°ç»„ã€å¯¹è±¡ã€å­—ç¬¦ä¸²ã€æ•°å€¼ç±»å‹ç­‰ ç¬¬ä¸€ç§æ–¹å¼åªèƒ½åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹ï¼Œåæ¥ä¸¤ç§å¯ä»¥ç›´æ¥åœ¨VSä¸­æŸ¥çœ‹ã€‚ åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­ ä½¿ç”¨VSè‡ªå¸¦ç»ˆç«¯ æˆ‘ä»¬å¯ä»¥ç”¨vsè‡ªå¸¦ç»ˆç«¯ï¼Œå¦‚æœå·²ç»å®‰è£…å¥½ node.js ä¾¿å¯ä»¥ç›´æ¥åœ¨VSä¸­è¾“å‡ºï¼š å…¶å®ï¼Œè¿™å°±å®ç°ç›¸å½“äºåœ¨ cmd ä¸­æ‰§è¡Œè¿™æ®µä»£ç ã€‚ åˆ©ç”¨ CodeRunner æ’ä»¶ ä¸‹è½½å¥½ CodeRunner æ’ä»¶ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è¿è¡Œ js æ–‡ä»¶ï¼š CodeRunner è¿è¡Œä¹±ç /æŠ¥é”™ Node.js æ˜¯å¦å®‰è£… CodeRunner è¿˜æ˜¯é€šè¿‡ Node.js æ¥è¿è¡Œ js æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰å®‰è£…è‡ªç„¶å‡ºé”™ã€‚ ç‰¹åˆ«çš„ï¼Œå®‰è£… Node.js ä¼šè‡ªåŠ¨é…ç½®å¥½ç¯å¢ƒå˜é‡ï¼Œæ‰€ä»¥åŸºæœ¬å¯ä»¥æ’é™¤ç¯å¢ƒå˜é‡é…ç½®é”™è¯¯å¯¼è‡´è¯¥é—®é¢˜ã€‚ ç»ˆç«¯æ˜¯å¦èƒ½è¾“å‡º é¦–å…ˆåœ¨ cmd å°è¯•è¿è¡Œ jsæ–‡ä»¶ ï¼Œå¦‚æœèƒ½æ­£ç¡®è¾“å‡º ï¼›ä½†æ˜¯åœ¨ VSç»ˆç«¯ä¸­è¿˜æ˜¯è¿è¡ŒæŠ¥é”™/ä¹±ç ã€‚å¯ä»¥æ’é™¤æ˜¯Node.js ç›¸å…³é…ç½®é—®é¢˜ã€‚ å¦‚æœcmd ä¸­ä¹Ÿæ— æ³•è¿è¡Œï¼Œå°è¯•é‡æ–°é…ç½® node.js ç¯å¢ƒå˜é‡æˆ–è€…ç›´æ¥å¸è½½é‡æ–°å®‰è£…ã€‚ å°è¯•ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡ŒVSCoder æˆ‘å‡ºç°çš„ä¹±ç /æ— æ³•æ‰§è¡Œé—®é¢˜ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡ŒæˆåŠŸè§£å†³ã€‚ 1ã€2 å‡æ— é—®é¢˜ï¼Œ å¯ä»¥å°è¯•ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ VSCoder ã€‚ä¹Ÿå¯ä»¥è®¾ç½®æ¯æ¬¡æ‰“å¼€éƒ½æ˜¯ä»¥ç®¡ç†å‘˜èº«ä»½ï¼š å³é”® VSCoder å›¾æ ‡ â€”&gt; å±æ€§ --&gt; å…¼å®¹æ€§ â€”&gt; ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œæ­¤ç¨‹åº --&gt; åº”ç”¨ã€‚ 1.3 åŸºæœ¬è¯­æ³• 1. å˜é‡å’Œæ³¨é‡Š javsScript æ³¨é‡Šæœ‰å•è¡Œæ³¨é‡Š &amp; å¤šè¡Œæ³¨é‡Šä¸¤ç§æ–¹å¼ï¼š 12// alert(&quot;æˆ‘ä¸æƒ³è¢«æ‰§è¡Œ&quot;); /* alert(&quot;æˆ‘ä¸æƒ³è¢«æ‰§è¡Œ&quot;); */ javsScript æ˜¯å¼±ç±»å‹è¯­è¨€ï¼Œæ‰€æœ‰å˜é‡éƒ½å¯ç”¨ var &lt;å˜é‡å&gt; å½¢å¼å®šä¹‰ã€‚ 123456789101112131415// 1.javsScriptä¸åŒºåˆ†æ•´æ•°å’Œæµ®ç‚¹å‹ï¼Œç»Ÿç§°Numbervar num = 3.5; var num1 = 3; var num2 = 1.234*e3;// 2.å­—ç¬¦ä¸²var str = &#x27;æˆ‘æ˜¯å•å¼•å·åŒ…å›´å­—ç¬¦ä¸²&#x27;; var str1 = &#x27;&#x27;æˆ‘æ˜¯åŒå¼•å·åŒ…å›´å­—ç¬¦ä¸²&#x27;&#x27;;// 3.å¸ƒå°”ç±»å‹var b = false;// 4.æ¯”è¾ƒè¿ç®—ç¬¦var b1 = false == 0; var b2 = false === 0;var b3 = 2 &gt; 4? ; // ...// 5.å¸¸é‡const PI = 3.14; // const&amp;letä¿®é¥°éƒ½æ˜¯å—çº§ä½œç”¨åŸŸï¼ˆè§åï¼‰ å°å¿ƒï¼== ã€NaNã€æµ®ç‚¹æ•° ä¸æ¨è==æ¯”è¾ƒè¿ç®—ç¬¦ ä¸æ¨èä½¿ç”¨ == è¿ç®—ç¬¦ï¼Œè¿™æ˜¯ JavaScript è¯­è¨€è®¾è®¡ç¼ºé™·ï¼Œä¼šå‡ºç°éš¾ä»¥æ„æ–™çš„é”™è¯¯ï¼Œæ¨èä½¿ç”¨ ===æ¥æ›¿æ¢ã€‚ åˆ¤æ–­æµ®ç‚¹æ•°ç›¸ç­‰ ç”±äºè®¡ç®—æœºä¸èƒ½ç²¾ç¡®è¡¨ç¤ºæµ®ç‚¹æ•°ï¼Œæ‰€ä»¥åˆ¤æ–­ä¸¤ä¸ªæµ®ç‚¹æ•°æ˜¯å¦ç›¸ç­‰ï¼Œæ¯”è¾ƒå®ƒä»¬å·®å€¼æ˜¯å¦å°äºæŸä¸ªè¶³å¤Ÿå°å€¼ï¼š 1Math.abs(1 / 3 - (1 - 2 / 3)) &lt; 0.0000001; // true åˆ¤æ–­æ˜¯å¦NaN 12var num = NaN;alert(num === NaN); // è¾“å‡ºfalse ä¸ºä»€ä¹ˆè¾“å‡º false ï¼Ÿè¿™æ˜¯å› ä¸º NaNå’Œæ‰€æœ‰å…¶å®ƒå€¼éƒ½åˆ¤æ–­ä¸ç›¸ç­‰ï¼ŒåŒ…æ‹¬å®ƒè‡ªå·±ï¼Œå”¯ä¸€åˆ¤æ–­æ–¹æ³•æ˜¯ï¼š 1isNaN(NaN); // true åˆ¤æ–­ null ï¼š å˜é‡ === nullï¼› åˆ¤æ–­ Arrayï¼šArray.isArray(arr); typeof å¯ä»¥åˆ¤æ–­å‡º Numberã€Booleanã€Stringã€function &amp; undefined ç±»å‹ï¼Œä¾‹å¦‚ï¼š åˆ¤æ–­å…¨å±€å˜é‡æ˜¯å¦å­˜åœ¨ï¼štypeof window.myVar === 'undefined' åˆ¤æ–­å±€éƒ¨å˜é‡æ˜¯å¦å­˜åœ¨ï¼štypeof myVar === 'undefined' ã€‚ å…¨å±€å˜é‡ æˆ‘ä»¬çŸ¥é“ï¼Œå¸¸è§„å®šä¹‰å…¨å±€å˜é‡ï¼ŒæŠŠå˜é‡ä¸å®šä¹‰åœ¨ä»»ä½•åµŒå¥—{}ä¸­å³å¯ã€‚ äº‹å®ä¸Šï¼Œå˜é‡å®šä¹‰å¯ä¸ç”¨ var å…³é”®å­—ï¼Œæ­¤æ—¶å®šä¹‰çš„ä¹Ÿæ˜¯å…¨å±€å˜é‡ï¼š 12345num = 3.5; str = &#x27;æˆ‘æ˜¯å­—ç¬¦ä¸²&#x27;; b = false;console.log(&#x27;num = &#x27;+num + &#x27; , str = &#x27;+ str + &#x27;, b = &#x27;+b); å¦‚ä½•ç†è§£æ­¤æ—¶å®šä¹‰çš„æ˜¯å…¨å±€å˜é‡ï¼Ÿè¯·çœ‹ä¸‹ä¾‹ï¼š 123456789function f()&#123; // ä¸ç”¨varå…³é”®å­—å£°æ˜å‡½æ•°å†…éƒ¨å˜é‡ a = 1 ; for(i = 1 ; i &lt; 3 ; i++);&#125;f();console.log(a); // å¯è®¿é—®ï¼Œè¾“å‡ºï¼š1console.log(i); // å¯è®¿é—®ï¼Œè¾“å‡ºï¼š3 aã€i çœ‹ä¼¼æ˜¯å‡½æ•°å†…éƒ¨å±€éƒ¨å˜é‡ï¼Œå®é™…å·²æ˜¯å…¨å±€å˜é‡ï¼Œå¯ä»¥è®¿é—®ã€‚ ç±»å‹è½¬æ¢ ç”±äº JavaScript æ²¡æœ‰é‚£ä¹ˆå¤æ‚ç±»å‹ï¼Œæ¯”å¦‚æ•°å€¼ç±»å‹ä¹‹é—´è½¬æ¢ï¼ˆint --&gt; double â€¦ï¼‰ã€‚ å¸¸ç”¨çš„æœ‰å¦‚ Number ã€ String ã€Booleanã€objectç±»å‹ä¹‹é—´è½¬æ¢ ï¼š 123456789101112131415161718192021222324252627282930313233343536// ç±»å‹è½¬æ¢// 1.ä»»ä½•ç±»å‹è½¬æ¢ä¸ºStringç±»å‹ï¼š String()è½¬æ¢ OR .toStringvar num = 123.45 , b = true ;// toString()console.log(num.toString()); // è¾“å‡ºï¼š123.45console.log(b.toString()); // è¾“å‡ºï¼štrue// String()console.log(String(num)); // è¾“å‡ºï¼š123.45console.log(String(b)); // è¾“å‡ºï¼štrue// 2.ä»»æ„ç±»å‹è½¬æ¢æˆNumberç±»å‹ï¼šç”¨Number() OR parseInt()ã€parseFloat()var str = &#x27;123.45&#x27; , b = true ;// Number()console.log(Number(str)); // è¾“å‡ºï¼š123.45console.log(Number(b)); // è¾“å‡ºï¼š1// parseInt()ã€parseFloat()// è½¬æ¢ä¸äº†booleanç±»å‹ï¼console.log(parseFloat(str)); // è¾“å‡ºï¼š123.45console.log(parseFloat(b)); // è¾“å‡ºï¼šNaN// 3.ä»»æ„ç±»å‹è½¬æ¢ä¸ºBooleanç±»å‹ï¼šç”¨Boolean()// æ³¨æ„ï¼šåªæœ‰ 0ã€&#x27;&#x27;è½¬æ¢ä¸ºï¼šfalse ï¼›å…¶ä½™å…¨éƒ¨è½¬æ¢ä¸ºture// ä»¥ä¸‹éƒ½è½¬æ¢ä¸ºtureconsole.log(Boolean(&#x27;false&#x27;)); // ä¹Ÿæ˜¯tureï¼åªæœ‰æ•°å­—0ã€&#x27;&#x27;ä¼šè½¬æ¢ä¸ºfalseï¼ï¼console.log(Boolean(&#x27;123.45&#x27;)); console.log(Boolean(123.45)); // ä»¥ä¸‹éƒ½è½¬æ¢ä¸ºfalseconsole.log(Boolean(&#x27;&#x27;)); console.log(Boolean(0)); ç‰¹åˆ«çš„ï¼Œå…·ä½“çš„å€¼ä¹Ÿå¯ä»¥è°ƒç”¨ .toString() æ–¹æ³•ï¼Œè½¬æ¢ä¸º Sting ç±»å‹ã€‚ 123 // æ³¨æ„1.toString()å‡ºé”™ï¼Œä¸¤ä¸ª.. OR (1).toString()1..toString(); // 1false.toString(); // false 2. å­—ç¬¦ä¸² å¦‚ä½•ä¼˜é›…è¡¨ç¤ºå­—ç¬¦ä¸² é™¤äº†å‰é¢ä»‹ç»ç”¨ â€™ â€˜ æˆ–è€… â€œ â€ åŒ…å›´ï¼Œè¿˜å¯ä»¥ç”¨æœ€æ–°ES6æ ‡å‡†ï¼Œåå¼•å· `` åŒ…å›´å¤šè¡Œå­—ç¬¦ä¸²ã€‚ âš ï¸ åå¼•å·æ˜¯å·¦ä¸Šè§’ ESC æ­£ä¸‹æ–¹å¯¹åº”é”® ~ ï¼Œåˆ‡æ¢åˆ°è‹±æ–‡çŠ¶æ€ä¸‹å¯ä»¥æ‰“å‡º**`** 1234alert(`æˆ‘æ˜¯å¤šè¡Œå­—ç¬¦ä¸²é…·ä¸é…·`) 1alert(`æˆ‘æ˜¯\\nå¤šè¡Œå­—ç¬¦ä¸²\\né…·ä¸é…·`) // å’Œä¸Šé¢å†™æ³•ç­‰ä»· å­—ç¬¦ä¸²æ‹¼æ¥ é™¤äº†å¸¸è§ç”¨ + å·è¿›è¡Œæ‹¼æ¥ï¼Œè¿˜å¯ä»¥ç”¨ES6æ–°å¢çš„æ¨¡æ¿å­—ç¬¦ä¸²è¿›è¡Œæ‹¼æ¥ã€‚ âš ï¸ æ¨¡æ¿å­—ç¬¦ä¸€å®šè¦ä½¿ç”¨åå¼•å· ` ï¼Œå¦åˆ™${â€¦}å½“å­—ç¬¦ä¸²è¾“å‡ºäº†ã€‚ 12345var name = &#x27;hwh&#x27;;var age = 20;// var message = &#x27;æˆ‘æ˜¯&#x27;+ name + &#x27;,ä»Šå¹´&#x27;+ age+&#x27;å²å•¦ï¼&#x27;;var message = `æˆ‘æ˜¯$&#123;name&#125;,ä»Šå¹´$&#123;age&#125;å²å•¦ï¼`; // ä¸€å®šè¦ä½¿ç”¨åå¼•å· `,å¦åˆ™$&#123;..&#125;å½“å­—ç¬¦ä¸²è¾“å‡ºalert(message); å¸¸ç”¨å­—ç¬¦ä¸²æ“ä½œ è·å–å­—ç¬¦ä¸²æŒ‡å®šä½ç½®å­—ç¬¦ ç›´æ¥æŠŠå­—ç¬¦ä¸²å½“åšæ•°ç»„è¿›è¡Œç´¢å¼•å³å¯ï¼š 12var s = &#x27;hello world&#x27;;alert(s[0]); // è¾“å‡ºï¼šh ä½†æ˜¯å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼Œä¸èƒ½å¯¹å…¶æŸä¸ªå­—ç¬¦ç´¢å¼•èµ‹å€¼ï¼Œä¸ä¼šæœ‰ä»»ä½•æ•ˆæœï¼ˆä½†ä¸æŠ¥é”™ï¼‰ï¼š 12s[0] = &#x27;l&#x27;;alert(s); // è¿˜æ˜¯è¾“å‡ºï¼šhello world å¸¸ç”¨å­—ç¬¦ä¸²æ–¹æ³• 12345678910111213// 1.è½¬æ¢å­—ç¬¦ä¸²å¤§å°å†™var s = &#x27;Hello&#x27;;var upper = s.toUpperCase(); // è¿”å›&#x27;HELLO&#x27;var lower = s.toLowerCase(); // è¿”å›&#x27;hello&#x27;å¹¶èµ‹å€¼ç»™å˜é‡lower// 2.è¿”å›å­—ç¬¦åœ¨å­—ç¬¦ä¸²ä¸­ä½ç½®var str = &quot;hello javaScript!&quot;;alert(str.indexOf(&#x27;java&#x27;)); // è¾“å‡º6ï¼šjæ˜¯ç¬¬6ä¸ªå­—ç¬¦ï¼Œä»0è®¡æ•°ã€‚å‰é¢æœ‰6å­—ç¬¦ï¼š hello + ç©ºæ ¼ // 3.å­—ç¬¦ä¸²æˆªå–var s = &#x27;hello, world&#x27;s.substring(0, 5); // ä»ç´¢å¼•0å¼€å§‹åˆ°5ï¼ˆä¸åŒ…æ‹¬5ï¼‰ï¼Œè¿”å›&#x27;hello&#x27;s.substring(7); // ä»ç´¢å¼•7å¼€å§‹åˆ°ç»“æŸï¼Œè¿”å›&#x27;world&#x27; 3. æ•°ç»„ å®šä¹‰ä¸€ä¸ªç®€å•æ•°ç»„ï¼Œé€šå¸¸æœ‰ ç›´æ¥å®šä¹‰ &amp; new ä¸¤ç§æ–¹å¼ï¼š 12345var s = []; // var s = new Array();var s1 = [1,2];// var s1 = new Array(1,2); å¥‡å¦™æ•°ç»„ JavaScript å’Œå…¶å®ƒè¯­è¨€æ•°ç»„æœ‰å¾ˆå¤šä¸åŒï¼Œè¿™é‡Œä¸€ä¸€è¯´é“ã€‚ æ•°ç»„ä¸é™åˆ¶ç±»å‹ ä¸‹é¢æ˜¯ä¸€ä¸ªé•¿åº¦ = 6ï¼ŒåŒ…å«å¤šç§ç±»å‹çš„æ•°ç»„ã€‚ 1var arr = [1, 2, 3.14, &#x27;Hello&#x27;, null, true]; æ”¹å˜æ•°ç»„å¤§å°å¾ˆç®€å• ä»¥å¾€è¯­è¨€è¦æ‰©å±•æ•°ç»„æ€»æ˜¯ä¸€ä»¶å¤æ‚çš„äº‹ï¼Œæ¯”å¦‚ java ç”¨é›†åˆ ArrayList æ¥å®ç°ã€‚ JavaScript ç›´æ¥æ”¹å˜æ•°ç»„ length å±æ€§å³å¯ï¼š 12345var arr = [1, 2, 3];// æ‰©å¤§æ•°ç»„arr.length = 6; // arræ•°ç»„å˜ä¸ºï¼š[1, 2, 3, undefined, undefined, undefined]// ç¼©å°æ•°ç»„arr.length = 1; // arræ•°ç»„å˜ä¸ºï¼š[1] å¯ä»¥è¶Šç•Œèµ‹å€¼ å¾ˆå¤šç¼–ç¨‹è¯­è¨€æ˜¯ä¸å…è®¸è¶Šç•Œèµ‹å€¼æ•°ç»„ï¼Œä½†JavaScript å…è®¸ï¼Œå®ƒä¼šè‡ªåŠ¨æ‰©å¤§æ•°ç»„ã€‚ 12var arr = [1, 2, 3];arr[6] = 6; // arræ•°ç»„å˜ä¸ºï¼š[1, 2, 3, undefined, undefined, 6] ä½†æ˜¯ï¼Œè¿™ç§åšæ³•ä¸è¢«æ¨èï¼Œå°½é‡ä¿è¯ç´¢å¼•ä¸ä¼šè¶Šç•Œï¼ å¸¸ç”¨æ•°ç»„æ“ä½œ ä»¥ä¸‹æ˜¯å¸¸ç”¨æ•°ç»„æ“ä½œçš„æ–¹æ³•ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758var arr = [1,2,3,4,5,6];// 1.æ•°ç»„è½¬ä¸ºå­—ç¬¦ä¸²var str = String(arr);console.log(str); // è¾“å‡ºï¼š1,2,3,4,5,6// 2.indexOfï¼šè¿”å›æŒ‡å®šå…ƒç´ ä½ç½®var i = arr.indexOf(1);console.log(i); // è¾“å‡ºï¼š0// 3.sliceï¼šå·¦å¼€å³é—­æˆªå–å…ƒç´ , å¯¹åº”Stringçš„substring()æ–¹æ³•// ä¸æŒ‡å®šç¬¬äºŒä¸ªå‚æ•°ï¼Œä¼šæˆªå–ç¬¬ä¸€ä¸ªå‚æ•°ä½ç½®ä»¥åæ‰€æœ‰å…ƒç´ var sub03 = arr.slice(0,3) var sub3 = arr.slice(0) console.log(sub03); // è¾“å‡ºï¼š[ 1, 2, 3 ]console.log(sub3); // è¾“å‡ºï¼š[ 1, 2, 3, 4, 5, 6 ]// 4.push å’Œ pop å°¾éƒ¨å¢å‡å…ƒç´ arr.push(&quot;hello&quot;,&quot;js&quot;);console.log(arr); // è¾“å‡ºï¼š[ 1, 2, 3, 4, 5, 6, &#x27;hello&#x27;, &#x27;js&#x27; ]arr.pop() ; arr.pop();console.log(arr); // è¾“å‡ºï¼š[ 1, 2, 3, 4, 5, 6 ]// 5.unshift å’Œ shift å¤´éƒ¨å¢å‡å…ƒç´ arr.unshift(&quot;A&quot;,&quot;B&quot;);console.log(arr); // è¾“å‡ºï¼š[ &#x27;A&#x27;, &#x27;B&#x27;, 1, 2, 3, 4, 5, 6 ]arr.shift(); arr.shift();console.log(arr); // è¾“å‡ºï¼š[ 1, 2, 3, 4, 5, 6 ]// 6.åè½¬å’Œæ’åºarr.reverse(); console.log(arr); // è¾“å‡ºï¼š[ 6, 5, 4, 3, 2, 1 ]arr.sort(); console.log(arr); // è¾“å‡ºï¼š[ 1, 2, 3, 4, 5, 6 ]// 7.spliceï¼šä»æŒ‡å®šä½ç½®åˆ é™¤è‹¥å¹²å…ƒç´ ï¼Œå†ä»è¯¥ä½ç½®æ·»åŠ è‹¥å¹²å…ƒç´ var arr = [&quot;c#&quot;,&quot;c&quot;,&quot;c++&quot;,&quot;python&quot;,&quot;java&quot;,&quot;javascript&quot;];// åˆ é™¤&amp;æ·»åŠ ï¼šä»ç´¢å¼•1å¼€å§‹åˆ é™¤2ä¸ªå…ƒç´ ï¼Œç„¶åå†ä»åŸç´¢å¼•ä½ç½®æ·»åŠ ä¸¤ä¸ªå…ƒç´ var delElem = arr.splice(1,2,&quot;1&quot;,&quot;2&quot;); // è¿”å›è¢«åˆ é™¤çš„å…ƒç´ :[&quot;c&quot;,&quot;c++&quot;]console.log(arr); // è¾“å‡ºï¼š[ &#x27;c#&#x27;, &#x27;1&#x27;, &#x27;2&#x27;, &#x27;python&#x27;, &#x27;java&#x27;, &#x27;javascript&#x27; ]// åªåˆ é™¤ï¼šä¸è®¾å®š2ä¸ªå‚æ•°ä»¥ä¸Šå°±è¡Œvar delElem1 = arr.splice(1,2);console.log(arr); // è¾“å‡ºï¼š[ &#x27;c#&#x27;, &#x27;python&#x27;, &#x27;java&#x27;, &#x27;javascript&#x27; ]// åªæ·»åŠ ï¼šè®¾ç½®ç¬¬äºŒä¸ªå‚æ•°ä¸º0ï¼Œå³åˆ é™¤0ä¸ªå…ƒç´ var delElem2 = arr.splice(1,0,&quot;c&quot;,&quot;c++&quot;);console.log(arr); // è¾“å‡ºï¼š[ &#x27;c#&#x27;, &#x27;c&#x27;, &#x27;c++&#x27;, &#x27;python&#x27;, &#x27;java&#x27;, &#x27;javascript&#x27; ]// 8.concatï¼šè¿æ¥ä¸¤ä¸ªæ•°ç»„,ä½†ä¸æ”¹å˜åŸæ•°ç»„ï¼Œåªæ˜¯è¿”å›ä¸€ä¸ªæ–°æ•°ç»„var arr1 = [1,2,3,4,5];var arr2 = arr1.concat(&quot;hwh&quot;,[&quot;ä¸Š&quot;,&quot;å±±&quot;,&quot;æ‰“&quot;,&quot;è€&quot;,&quot;è™&quot;]);console.log(arr2); // è¾“å‡ºï¼š[ 1, 2, 3, 4, 5, &#x27;hwh&#x27;, &#x27;ä¸Š&#x27;, &#x27;å±±&#x27;, &#x27;æ‰“&#x27;, &#x27;è€&#x27;, &#x27;è™&#x27; ]// 9.joinï¼šå°†æ•°ç»„è½¬ä¸ºå­—ç¬¦ä¸²ï¼Œå¯æŒ‡å®šè¿æ¥å­—ç¬¦var arr3 = arr1.join(&#x27;~&#x27;);console.log(arr3); // è¾“å‡ºï¼š1~2~3~4~5 å¤šç»´æ•°ç»„ å¤šç»´æ•°ç»„ï¼šå¦‚æœæŸä¸ªå…ƒç´ æ˜¯å¤šç»´æ•°ç»„ï¼Œé‚£ä¹ˆå°±å¯ä»¥å½¢æˆå¤šç»´æ•°ç»„ã€‚ 123// å¤šç»´æ•°ç»„var darr = [[1, 2, 3], [400, 500, 600], &#x27;-&#x27;];console.log(darr[1][1]); // è¾“å‡ºï¼š500 4. å¯¹è±¡ æ³¨æ„ï¼šåœ¨ JavaScript ä¸­æ²¡æœ‰ç±»è¿™ä¸ªæ¦‚ç‡ï¼Œé€šè¿‡åŸå‹é“¾æ¥å®ç°ç±»ä½œä¸ºæ¨¡æ¿æ¦‚å¿µï¼Œåœ¨åè¯¦è¿°ã€‚ä¸‹é¢éƒ½æ˜¯å…·ä½“å¯¹è±¡ï¼ ä¾‹å¦‚ä¸‹é¢åˆ›å»ºä¸€ä¸ªhwhå¯¹è±¡ï¼Œç±»ä¼¼äº python ä½¿ç”¨é”®å€¼å¯¹å®šä¹‰ map ã€‚ å½“ç„¶ï¼Œè¿˜å¯ä»¥ç»™å¯¹è±¡å¢æ·»æ–¹æ³•ï¼ˆæ³¨æ„ï¼Œæ­¤æ—¶ä¸å«å‡½æ•°ï¼ï¼‰ï¼Œè¯¦è§ ç¬¬äºŒç« ï¼šå‡½æ•° 2.3èŠ‚ 123456var hwh = &#123; name:&quot;huangwanghui&quot;, school:&quot;chongqingU&quot;, &#x27;stu-num&#x27;: 123456 // æ³¨æ„ï¼šæœ€åä¸€è¡Œä»£ç ä¸è¦åŠ é€—å·ï¼Œå¦åˆ™åœ¨ä½ç‰ˆæœ¬IEå¯èƒ½ä¼šæŠ¥é”™&#125; è®¿é—®å¯¹è±¡å±æ€§ è®¿é—®å¯¹è±¡å±æ€§æœ‰ä¸¤ç§åŠæ³•ï¼š é€šè¿‡&lt;å¯¹è±¡å.å±æ€§å&gt; å½¢å¼ 12console.log(hwh.name); // è¾“å‡ºï¼šhuangwanghuiconsole.log(hwh.school); // è¾“å‡ºï¼šchongqingU ç‰¹åˆ«çš„ï¼Œè®¿é—®ä¸å­˜åœ¨å±æ€§ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯ä¼šè¿”å› undefined ï¼š 1console.log(hwh.school); // è¾“å‡ºï¼šundefined é€šè¿‡&lt;å¯¹è±¡å['å±æ€§å']&gt; å½¢å¼ ç†è®ºä¸Šï¼Œæ‰€æœ‰è®¿é—®å¯¹è±¡å±æ€§éƒ½å¯é€šè¿‡è¯¥æ–¹å¼ï¼Œç‰¹åˆ«ä»¥ä¸‹ä¸¤ç§æƒ…å†µåªèƒ½ä½¿ç”¨&lt;å¯¹è±¡å['å±æ€§å']&gt;è¿™ç§æ–¹å¼ã€‚ å±æ€§åä¸æ˜¯æ ‡å‡†å˜é‡å å¦‚ â€˜stu-numâ€™ å«å˜é‡å®šä¹‰éæ³•å­—ç¬¦ - ï¼Œæ‰€ä»¥è¦ç”¨ â€™â€˜ åŒ…å›´ï¼Œåªèƒ½é€šè¿‡ &lt;å¯¹è±¡å['å±æ€§å']&gt; è®¿é—®è¯¥å±æ€§ã€‚ 12console.log(hwh.stu-num); // è¾“å‡ºï¼šNaNconsole.log(hwh[&#x27;stu-num&#x27;]); // è¾“å‡ºï¼š123456 å¾ªç¯éå†å±æ€§æ—¶ åœ¨ä¸‹é¢éå†å¯¹è±¡å±æ€§ï¼Œä¸ºä»€ä¹ˆéƒ½æ˜¯è¾“å‡º undefinedï¼Ÿ 123456// éå†å±æ€§for(var a in hwh)&#123; console.log(a); // è¾“å‡ºï¼šname shcool &#x27;stu-num&#x27; console.log(hwh.a); // è¾“å‡ºï¼šundefined undefined undefined&#125; å› ä¸ºï¼Œæ­¤æ—¶ hwh.a ç›¸å½“äºè®¿é—®çš„æ˜¯hwhå¯¹è±¡ä¸€ä¸ªå±æ€§åä¸ºaçš„å±æ€§ï¼Œè¿™è‡ªç„¶æ˜¯ä¸å­˜åœ¨çš„ã€‚ æ­£ç¡®åšæ³•ä½¿ç”¨å¯¹è±¡å['å±æ€§å']ä¾¿å¯æ­£å¸¸è¾“å‡ºï¼š 1234for(var a in hwh)&#123; console.log(hwh[a]); // è¾“å‡ºï¼šhuangwanghui chongqingU 123456&#125; ç»™å¯¹è±¡å¢åˆ å±æ€§ ç»™å¯¹è±¡å¢å‡å±æ€§è¾ƒä¸ºç®€å•ï¼Œå¢åŠ å±æ€§ç±»ä¼¼äºæ•°ç»„å¢åŠ å…ƒç´ ï¼Œåˆ é™¤å±æ€§è¦åˆ©ç”¨ delete å…³é”®å­—ã€‚ 123456// å¢åˆ å±æ€§hwh.age = 23;console.log(hwh.age); // è¾“å‡ºï¼š23delete hwh.age;console.log(hwh.age); // è¾“å‡ºï¼šundefined åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ‹¥æœ‰æŸå±æ€§ åˆ¤æ–­å¯¹è±¡æ˜¯å¦ç”¨äºæŸå±æ€§ä¹Ÿæœ‰ä¸¤ç§åŠæ³•ã€‚ åˆ©ç”¨ in åˆ¤æ–­ä¸€ä¸ªå±æ€§æ˜¯å¦å­˜åœ¨ 12console.log(&#x27;name&#x27; in hwh);console.log(&#x27;age&#x27; in hwh); ä½†æ˜¯è¿™ç§æ–¹æ³•æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œin åˆ¤æ–­å±æ€§ä¸ä¸€å®šå±äº hwhï¼Œè¿˜å¯èƒ½æ˜¯ hwh ç»§æ‰¿å¾—åˆ°çš„ã€‚ æ¯”å¦‚åŸå‹é“¾ä¸­ï¼Œhwh è‚¯å®šä¼šæŒ‡å‘æ‰€æœ‰å±æ€§éƒ½æŒ‡å‘çš„ Objectï¼Œ Object å«æœ‰ä¸€ä¸ªtoString å±æ€§ï¼š 1console.log(&#x27;toString&#x27; in hwh); // è¾“å‡ºï¼štrue åˆ©ç”¨hasOwnProperty()æ–¹æ³• è¿™ç§æ–¹æ³•å¯ä»¥ä¸ä¼šåˆ¤æ–­ç»§æ‰¿å¾—åˆ°çš„å±æ€§å±äºå¯¹è±¡ã€‚ 1console.log(&#x27;toString&#x27; in hwh); // è¾“å‡ºï¼šfalse 5. æ¡ä»¶åˆ¤æ–­ &amp; å¾ªç¯ æ¡ä»¶åˆ¤æ–­ JavaScript æŠŠnullã€undefinedã€0ã€NaN &amp; ç©ºå­—ç¬¦ä¸²''è§†ä¸ºfalseï¼Œå…¶ä»–å€¼ä¸€æ¦‚è§†ä¸ºtrueï¼Œå› æ­¤ä¸‹é¢ä»£ç æ¡ä»¶åˆ¤æ–­çš„ç»“æœæ˜¯trueã€‚ 12345var s = &#x27;123&#x27;;if (s.length) // æ¡ä»¶è®¡ç®—ç»“æœä¸º3&#123; // do something&#125; å¾ªç¯ åœ¨ JavaScript å¾ªç¯å’Œ java ç­‰é«˜çº§è¯­è¨€å¾ªç¯æ²¡æœ‰å¤ªå¤§åŒºåˆ«ã€‚ ç‰¹åˆ«çš„ï¼Œåœ¨ JavaScript ä¸­æ•°ç»„ä¹Ÿè¢«çœ‹ä½œæ˜¯å¯¹è±¡ï¼Œå®ƒçš„ç´¢å¼•åˆ™è¢«è§†ä¸ºä¸€ä¸ªå±æ€§ã€‚ç„¶è€Œéå†æ•°ç»„æ—¶ï¼Œå¦‚æœä½¿ç”¨ forâ€¦inå¾ªç¯æ—¶ï¼Œå¦‚ç»™æ•°ç»„å¢åŠ ä¸€ä¸ªå±æ€§ï¼Œå°†å¯¼è‡´ä¸€ä¸ªéš¾ä»¥æ„æ–™çš„ç»“æœã€‚ è¿™ä¸ªé—®é¢˜å¯ä»¥ç”¨ forâ€¦of å¾ªç¯è§£å†³ï¼Œå®ƒè¿˜å¯ä»¥ä¸“ç”¨äºéå†é›†åˆç±»å‹ï¼Œè¯¦è§ 7. iterable ç±»å‹ ã€‚ 12345678910111213141516171819202122232425262728293031323334var num = [1,2,3,4,5,&quot;ä¸Šå±±æ‰“è€è™&quot;];// 1.æ™®é€šforå¾ªç¯for(var i = 0 ; i &lt; num.length; i++)&#123; console.log(num[i]); // è¾“å‡ºï¼š 1 2 3 4 5 ä¸Šå±±æ‰“è€è™&#125;// 2.for..in å¾ªç¯// é™¤äº†å‰é¢ç”¨æ¥éå†å¯¹è±¡å±æ€§ï¼Œéå†æ•°ç»„ä¹Ÿç±»ä¼¼// for..in å¾ªç¯çš„åˆ°æ—¶ String è€Œä¸æ˜¯ Numberï¼Œforå¾ªç¯å‘¢ï¼Ÿ// ç›´æ¥è¾“å‡ºiæ˜¯æ•°ç»„åºå·ï¼š0 1 2 3 4 5 ï¼Œå¯ç†è§£ä¸ºæŠŠæ•°ç»„å½“å¯¹è±¡ï¼Œåºå·æ˜¯å®ƒâ€œå±æ€§åâ€for(var i in num)&#123; console.log(i); // è¾“å‡ºï¼š 0 1 2 3 4 5 console.log(num[i]);&#125;// 3.while å¾ªç¯var i = 0;while(i&lt;6)&#123; console.log(num[i]); i++;&#125;// 4.do...while å¾ªç¯// æ³¨æ„ï¼šdo...while å¾ªç¯è‡³å°‘ä¼šæ‰§è¡Œä¸€æ¬¡ï¼var j = 0;do&#123; console.log(num[j]); j++;&#125;while(j&lt;6); 6. Map &amp; Set åœ¨å‰é¢ JavaScript ä¸­ 4.å¯¹è±¡ ä¸­&#123;&#125; è¡¨è¾¾æ–¹å¼å¯ä»¥è§†ä½œå…¶å®ƒè¯­è¨€ Map æˆ– Dictionary æ•°æ®ç»“æ„é”®å€¼å¯¹è¡¨è¾¾æ–¹å¼ã€‚ BUTï¼ŒJavaScript ä¸­ å¯¹è±¡ä¸­é”®åªèƒ½æ˜¯å­—ç¬¦ä¸² ï¼Œè€Œåœ¨æœ¬è®² Map &amp; Set å°†ä¸å±€é™äºè¿™ç‚¹ï¼Œè¿˜å¯ä»¥æ˜¯ Numberç­‰ç±»å‹ã€‚ MAP MAP åŸºæœ¬åˆ›å»ºã€å¢ == æ”¹ã€åˆ æ“ä½œï¼Œå’Œï¼š 123456789101112131415161718// map// 1.åˆ›å»ºï¼šæ³¨æ„æ˜¯([[..],[..],[..]])å½¢å¼å¤–ä¾§è¿˜æœ‰ä¸€ä¸ª[]var m = new Map([[1,&quot;hwh&quot;],[2,&#x27;liuting&#x27;],[3,&#x27;xiaoming&#x27;]]); // 2.å¢åŠ (ä¿®æ”¹)é”®å€¼å¯¹m.set(4,&#x27;xiaobai&#x27;); // ä¸å­˜åœ¨è¯¥é”®4ï¼Œåˆ™æ˜¯åˆ›å»ºæ–°é”®å€¼å¯¹m.set(4,&#x27;xiaohei&#x27;); // å­˜åœ¨é”®å€¼4ï¼Œé‚£ä¹ˆæ˜¯ä¿®æ”¹é”®4å¯¹åº”é”®å€¼å¯¹// 3.åˆ é™¤é”®å€¼å¯¹m.delete(4);// 4.åˆ¤æ–­æ˜¯å¦å­˜åœ¨é”®å€¼var b = m.has(4);console.log(b); // ç”±äºè¢«åˆ é™¤æ‰€ä»¥æ˜¯ï¼šfalse// 5.è·å–é”®å€¼å¯¹var a = m.get(2);console.log(a); // è¾“å‡ºï¼šliuting æ³¨æ„ï¼Œå½“map é”®æ˜¯String ç±»å‹ä¸€å®šè¦åŠ å¼•å·ï¼ˆå¯¹è±¡å¦‚æœå˜é‡åç¬¦åˆè§„èŒƒå¯ä»¥ä¸åŠ ï¼‰ï¼Œè€Œä¸”è®¿é—®ä¹Ÿè¦åŠ å¼•å·ï¼š 123var m = new Map([[&#x27;a&#x27;,1],[&quot;b&quot;,2]]); // m.get(a); // å‡ºé”™m.get(&#x27;a&#x27;); MAP å’Œå¯¹è±¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ MAP å’Œå¯¹è±¡éƒ½æ˜¯åˆ©ç”¨ é”®å€¼å¯¹ å½¢å¼æ„é€ ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä»¥ä¸‹åŒºåˆ«ï¼š åˆ é™¤ã€æ·»åŠ å…ƒç´ æ–¹å¼ä¸åŒ è®¿é—®å½¢å¼ä¸åŒï¼šMAPé€šè¿‡get() æ–¹æ³•ï¼Œå¯¹è±¡é€šè¿‡ å¯¹è±¡.å±æ€§å æˆ–è€… å¯¹è±¡[å±æ€§å]å½¢å¼ è®¿é—®é€Ÿåº¦ä¸åŒï¼šMAP æ‹¥æœ‰æå¿«çš„è®¿é—®é€Ÿåº¦ æ”¯æŒkeyç±»å‹ä¸åŒï¼šMAPæ”¯æŒå¤šç§ç±»å‹ä½œä¸ºkeyï¼Œå¯¹è±¡åªæ”¯æŒå­—ç¬¦ä¸²String ç±»å‹ Set Setå’ŒMapç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€ç»„keyçš„é›†åˆï¼Œä½†ä¸å­˜å‚¨valueã€‚ ç”±äºkeyä¸èƒ½é‡å¤ï¼Œæ‰€ä»¥ï¼Œåœ¨Setä¸­ï¼Œæ²¡æœ‰é‡å¤çš„keyã€‚å¦‚ï¼Œåˆ›å»ºæ—¶å‡ºç°é‡å¤keyï¼Œåªä¼šä¿ç•™ä¸€ä¸ªã€‚ 1234567891011// Set// 1.åˆ›å»ºï¼šå‡ºç°é‡å¤é”®å€¼è¢«è¿‡æ»¤var s = new Set([1,2,2,3]); // å®é™…é›†åˆä¸­æ•°æ®ï¼š&#123;1, 2, 3&#125;// ç±»ä¼¼çš„ï¼šmapä¹Ÿåªä¼šä¿å­˜æœ€åæ’å…¥çš„é‡å¤é”®å€¼var m = new Map([[&#x27;a&#x27;,1],[&#x27;a&#x27;,2],[&quot;b&quot;,2]]); // å®é™…é›†åˆä¸­æ•°æ®ï¼š&#123;[&#x27;a&#x27;,2],[&quot;b&quot;,2]&#125;// 2.å¢åŠ s.add(4);// 3.åˆ é™¤s.delete(4); Set å’Œæ•°ç»„ Array åŒºåˆ«ï¼Ÿ åˆ é™¤ã€æ·»åŠ å…ƒç´ æ–¹æ³•ä¸åŒ Set å¯ä»¥å»é‡ï¼Œè€Œä¸”å¯ä»¥ å¿«é€ŸæŸ¥æ‰¾ ï¼Œä½†æ— æ³•å®ç°æŒ‰ä¸‹æ ‡æŸ¥æ‰¾ç­‰æ“ä½œ 7. å¦‚ä½•ä¼˜é›…éå†é›†åˆ for â€¦ in éå†é›†åˆ éå†æ•°ç»„ Array å¯ä»¥ç”¨ä¸‹æ ‡å¾ªç¯ï¼Œå¦‚ä½•éå†é›†åˆç±»å‹å¦‚ Map &amp; Set ç±»å‹ï¼Ÿèƒ½ç”¨ for â€¦ in å¾ªç¯å—ï¼Ÿ æˆ‘ä»¬å°è¯•ç”¨ forâ€¦in å¾ªç¯éå†é›†åˆï¼š 12345678var m = new Map([[1,&quot;hwh&quot;],[2,&#x27;liuting&#x27;],[3,&#x27;xiaoming&#x27;]]); var s = new Set([1,2,3]); // for...in éå†é›†åˆfor(var i in s)&#123; console.log(i); // ä»€ä¹ˆéƒ½æ²¡è¾“å‡º&#125; å¾ˆä¸å¹¸ï¼Œä»€ä¹ˆéƒ½æ²¡è¾“å‡ºã€‚ äº‹å®ä¸Šï¼ŒArrayã€Map &amp; Set éƒ½å±äºiterable ç±»å‹ã€‚å¯¹äº iterable ç±»å‹å¯ä»¥ç”¨ forâ€¦of å¾ªç¯è¾“å‡ºï¼š 123456789// for...of éå†é›†åˆfor(var i of m)&#123; console.log(i); // è¾“å‡ºï¼š[ 1, &#x27;hwh&#x27; ] [ 2, &#x27;liuting&#x27; ] [ 3, &#x27;xiaoming&#x27; ]&#125;for(var i of s)&#123; console.log(i); // è¾“å‡ºï¼š1 2 3&#125; forEach() éå†é›†åˆ éå†é›†åˆæ›´åŠ ä¼˜é›…å®‰å…¨çš„æ–¹å¼æ˜¯é€šè¿‡ iterableå†…ç½®çš„forEach() æ–¹æ³•ï¼Œå®ƒæ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œæ¯æ¬¡è¿­ä»£è‡ªåŠ¨å›è°ƒè¯¥å‡½æ•°ã€‚ forEach() æ˜¯ä¸€ä¸ªé«˜çº§æ–¹æ³•ï¼Œæ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥éå†æ•°ç»„ã€‚è¯¦è§ 2.4 é«˜é˜¶å‡½æ•° â€“ forEach() 1234567891011121314151617181920212223242526272829303132// forEach() éå†é›†åˆvar m = new Map([[1,&quot;hwh&quot;],[2,&#x27;liuting&#x27;],[3,&#x27;xiaoming&#x27;]]); var s = new Set([1,2,3]); var arr = [&#x27;A&#x27;,&#x27;B&#x27;,&#x27;C&#x27;];// éå†Mapm.forEach( function(value) &#123; console.log(value); // è¾“å‡ºï¼šhwh liuting xiaoming &#125;); // éå†Sets.forEach( function(element) &#123; console.log(element); // è¾“å‡ºï¼š1 2 3 &#125;);// éå†Arrayarr.forEach( function(element) &#123; console.log(element); // è¾“å‡ºï¼šA B C &#125;);// éå†å¯¹è±¡ï¼šæ³¨æ„ä¸èƒ½éå†å¯¹è±¡ï¼ï¼ for â€¦ in å¾ªç¯çš„å¼Šç«¯ï¼šæ•°ç»„é•¿åº¦ä¸ä¸€è‡´ æˆ‘ä»¬å·²ç»çŸ¥é“ ï¼ŒArray éƒ½å±äºiterable ç±»å‹ ï¼Œä½†æˆ‘ä»¬ç”¨ for â€¦ in å¯ä»¥éå†è¾“å‡ºArray ã€‚ ä½†æ˜¯ï¼Œæˆ‘ä»¬åœ¨å‰ä¹ŸçŸ¥é“ï¼Œæ•°ç»„ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå®ƒçš„ä¸‹æ ‡å°±æ˜¯å±æ€§åã€‚å¦‚æœæˆ‘ä»¬ç»™ä¸€ä¸ªæ•°ç»„å¢åŠ å±æ€§åï¼Œç„¶åéå†ï¼š 12345678var arr = [&#x27;A&#x27;,&#x27;B&#x27;,&#x27;C&#x27;];// ç±»ä¼¼å¯¹è±¡ä¸€èˆ¬ï¼Œç»™æ•°ç»„å¢åŠ å±æ€§arr.name = &#x27;alpha&#x27;;for(var i in arr)&#123; console.log(i); // è¾“å‡ºå±æ€§åï¼š0 1 2 name&#125; ä¾æ¬¡è¾“å‡ºçš„æ˜¯æ•°ç»„çš„å±æ€§åï¼Œå¥½å§ï¼Œè¿™æ²¡ä»€ä¹ˆä¸æ­£å¸¸ã€‚ ä½†æ˜¯æˆ‘ä»¬å†å°è¯•æ‰“å°æ­¤æ—¶çš„æ•°ç»„å¤§å°ï¼š 1console.log(arr.length); // è¾“å‡ºï¼š3 å™¢â€¦ä¸å¿ç›´è§†ï¼Œæ•°ç»„é•¿åº¦ç«Ÿç„¶æ˜¯3ï¼Œè€Œä¸æ˜¯4ï¼ ä¸ºä»€ä¹ˆè¯´forâ€¦ of å¾ªç¯å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ å› ä¸ºforâ€¦ of å¾ªç¯åªä¼šéå†ï¼Œé›†åˆå†…çš„å…ƒç´ ï¼Œè¿™ç§ä¸æ­£å½“é€šè¿‡ æ•°ç»„å.å±æ€§ èµ‹å€¼æ–¹å¼ä¸ä¼šè¢«è¾“å‡ºï¼š 12345for(var i of arr)&#123; console.log(i); // è¾“å‡ºå…ƒç´ è€Œéå±æ€§åï¼šA B C &#125;console.log(arr.length); // è¾“å‡ºï¼š3 è¿™æ ·å¾ªç¯éå†æ•°ç»„å…ƒç´ ä¸ªæ•° === æ•°ç»„é•¿åº¦ï¼Œä¿è¯äº†ä¸€è‡´æ€§ã€‚ è€Œä¸”ï¼Œä½ åº”è¯¥è¿˜æ³¨æ„åˆ°ä¸€ä¸ªç»†èŠ‚ï¼Œæ­¤æ—¶è¾“å‡ºçš„æ˜¯å…ƒç´ ï¼Œè€Œéæ˜¯å±æ€§åã€‚ ç¬¬äºŒç«  ï¼šå‡½æ•° 2.1 å‡½æ•°åŸºæœ¬å…¥é—¨ å‡½æ•°å®šä¹‰ åœ¨ JavaScript ä¸­ï¼Œå®šä¹‰å‡½æ•°æœ‰ä¸¤ç§æ–¹å¼ï¼šä¸€ç§ç±»ä¼¼äºå…¶å®ƒé«˜çº§è¯­è¨€ï¼Œä½†æ²¡æœ‰è¿”å›å€¼ç±»å‹ï¼›ä¸€ç§åŒ¿åå‡½æ•°æ–¹å¼ã€‚ 123456789101112// å‡½æ•°å®šä¹‰// 1.ç¬¬ä¸€ç§ç±»ä¼¼å…¶å®ƒé«˜çº§è¯­è¨€å®šä¹‰å‡½æ•°ï¼Œä½†æ²¡æœ‰è¿”å›å€¼ç±»å‹ï¼Œjsä¹Ÿä¸éœ€è¦å®šä¹‰ç±»å‹function max(a,b)&#123; return a &gt; b ? a : b;&#125;// 2.ç¬¬äºŒç§åŒ¿åå‡½æ•°ï¼Œå…¶å®å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼ŒæŠŠå‡½æ•°åmax1è§†ä½œæŒ‡å‘è¯¥å‡½æ•°çš„å˜é‡var max1 = function(a,b)&#123; return a &gt; b ? a : b;&#125; åœ¨ JavaScript ä¸­ï¼Œè¿™ä¸¤ç§æ–¹å¼æ˜¯å®Œå…¨ç­‰ä»·çš„ï¼Œè‡ªç„¶è°ƒç”¨æ–¹å¼ä¹Ÿæ˜¯ä¸€è‡´çš„ï¼š 123// è°ƒç”¨å‡½æ•°console.log(max(1,2)); // è¾“å‡ºï¼š2console.log(max1(1,2)); // è¾“å‡ºï¼š2 âš ï¸ ä¸åŠ ()ï¼Œç›´æ¥è°ƒç”¨å‡½æ•°ä¸ä¼šæŠ¥é”™ï¼Œåªä¼šè¾“å‡ºå‡½æ•°åï¼š 1console.log(max); // [Function: max] ä½†æ˜¯å¯ä»¥æŠŠå‡½æ•°ä½œä¸ºå˜é‡ä¼ é€’ç»™å¦å¤–ä¸€ä¸ªå˜é‡ï¼š 12var my_max = max;my_max(1,2); // 2 å°å¿ƒä½ çš„ return è¯­å¥ JavaScript å¼•æ“ ä¼šåœ¨è¡Œæœ«è‡ªåŠ¨æ·»åŠ åˆ†å·ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ä½¿ç”¨ return äº§ç”Ÿæ„æ–™ä¹‹å¤–çš„é”™è¯¯ï¼š 1234567function max(a,b)&#123; return a &gt; b ? a : b;&#125;// è°ƒç”¨maxmax(1,2); // è¾“å‡ºï¼šä»€ä¹ˆéƒ½æ²¡æœ‰è¾“å‡º ä½ ä¼šæƒŠå–œçš„å‘ç°ï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰è¾“å‡ºï¼è¿™æ˜¯å› ä¸ºï¼Œç”±äºè‡ªåŠ¨æ·»åŠ åˆ†å·ï¼Œå‡½æ•°å®é™…å·²ç»å˜æˆï¼š 12345function max(a,b)&#123; return ; // è¿™é‡Œè¢«æ·»åŠ äº†åˆ†å·ï¼Œå‡½æ•°æ‰§è¡Œåˆ°è¿™ç»“æŸäº† a &gt; b ? a : b;&#125; æ‰€ä»¥ï¼Œç»†å¿ƒçš„ä½ ä¸€å®šä¼šé¿è¿‡è¿™ä¸ªå‘å§ï¼Ÿ å¥‡å¦™çš„å‡½æ•°å‚æ•° ä¼ é€’å‚æ•°ä¸ªæ•°ä»»æ„ï¼Ÿ å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦ JavaScript ï¼Œåœ¨ä¸Šé¢å®šä¹‰max å‡½æ•°æˆ‘ä»¬å¯ä»¥æƒŠè®¶çš„å‘ç°ï¼Œå¯ä»¥ä¼ é€’ä¸æ­¢ä¸¤ä¸ªå‚æ•°ï¼ 12// å¤šä¸ªå‚æ•°è°ƒç”¨console.log(max(1,2,&#x27;A&#x27;,&#x27;B&#x27;)); // è¾“å‡ºï¼š2 è€Œä¸”å®ƒè¿˜è®¡ç®—å‡ºäº†æ­£ç¡®ç»“æœï¼ äº‹å®ä¸Šï¼ŒJavaScript å…è®¸ä¼ é€’ä»»æ„ä¸ªå‚æ•°ï¼Œå¦‚æœå‡½æ•°å†…éƒ¨ä¸ä½¿ç”¨å¤šä½™çš„å‚æ•°è‡ªç„¶ä¹Ÿå°±ä¸ä¼šå½±å“åˆ°ç»“æœã€‚ é‚£ä¹ˆä¼ é€’å‚æ•°æ¯”å®é™…å®šä¹‰å°‘å‘¢ï¼Ÿ 1console.log(max(1)); // è¾“å‡ºï¼šundefined æ€ä¹ˆå¤„ç†æ‰€æœ‰å‚æ•°ï¼Ÿ åœ¨ä¸Šé¢è™½ç„¶æˆ‘ä»¬è°ƒç”¨ max() å‡½æ•°è¾“å…¥äº†å¤šä½™å‚æ•°ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯æƒ³æŠŠå¤šä½™å‚æ•°ç»™è¾“å‡ºæ¥ï¼Œè¯¥å¦‚ä½•å¤„ç†ï¼Ÿ åœ¨å‡½æ•°å†…éƒ¨åˆ©ç”¨ arguments ï¼Œå¯ä»¥è·å–æ‰€æœ‰å‚æ•°ã€‚ 12345678910111213// argumentsfunction max(a,b)&#123; if(arguments.length &gt; 2) // è¾“å‡ºè¶…è¿‡å®šä¹‰ä¸ªæ•°çš„å‚æ•° &#123; for(var i = 2 ; i &lt; arguments.length ; i++ ) console.log(arguments[i]); &#125; return a &gt; b ? a : b;&#125;// è°ƒç”¨maxmax(1,2,&quot;hhhä¸è®¸ç¬‘ï¼&quot;); // è¾“å‡ºï¼šhhhä¸è®¸ç¬‘ï¼ ä¸€èˆ¬å¸¸ç”¨çš„ä¹Ÿå°±æ˜¯ï¼šarguments.length &amp; arguments[i] ç”¨æ¥è·å–å‚æ•°é•¿åº¦å’ŒæŒ‡å®šç´¢å¼•å‚æ•°ã€‚ ä¼˜é›…çš„å¤„ç†å¤šä½™å‚æ•° ä¸Šé¢è™½ç„¶ç”¨arguments è·å–åˆ°æ‰€æœ‰å‚æ•°ï¼Œç„¶åè¾“å‡ºå¤šä½™å‚æ•°ï¼Œä½†æ˜¯æ€»æ„Ÿè§‰å¾ˆå˜æ‰­ã€‚ ä½†æ˜¯æœ‰æ²¡æœ‰ä¸€ç§æ–¹å¼ï¼Œè®©æˆ‘ä»¬ç›´æ¥å¤„ç†å¤šä½™å‚æ•° ï¼Œè€Œä¸æ˜¯è¦ä»ç´¢å¼• 2 å…ˆæ’é™¤å‰ä¸¤ä¸ªå‚æ•°ï¼Ÿ å¯ä»¥ä½¿ç”¨ rest æ¥è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œå¤šä½™å‚æ•°ä¼šä»¥æ•°ç»„å½¢å¼ äº¤ç»™ rest å˜é‡ï¼š 12345678910// rest// å‡½æ•°å®šä¹‰çš„æ—¶å€™è¦ä»¥ï¼š...restæ¥æ ‡è¯†[ä»å“ªé‡Œå¼€å§‹ç®—æ˜¯å¤šä½™å‚æ•°]function max(a,b,...rest)&#123; console.log(rest); // ä¼šä»¥[æ•°ç»„]å½¢å¼è¾“å‡º return a &gt; b ? a : b;&#125;// è°ƒç”¨maxmax(1,2,&quot;hhhä¸è®¸ç¬‘ï¼&quot;); // è¾“å‡ºï¼š[ &#x27;hhhä¸è®¸ç¬‘ï¼&#x27; ] 2.2 å˜é‡ä½œç”¨åŸŸä¸è§£æ„èµ‹å€¼ 1. å¿«é€Ÿäº†è§£å˜é‡ä½œç”¨åŸŸ å˜é‡ä½œç”¨åŸŸå—{}çŸ¥è¯†åŸºæœ¬å’Œå…¶å®ƒè¯­è¨€æ²¡æœ‰å¤ªå¤§åŒºåˆ«ï¼Œä½†æ˜¯æœ‰å‡ ä¸ª JavaScript æ‰€ç‰¹æœ‰ç‰¹æ€§ã€‚ å˜é‡æå‡ æ‰§è¡Œä¸‹é¢å‡½æ•°ä¼šæŠ¥é”™å—ï¼Ÿå¦‚æœä¸ä¼šï¼Œé‚£ä¹ˆè¾“å‡ºä»€ä¹ˆï¼Ÿ 123456789&#x27;use strict&#x27;;function f()&#123; var x = 1; console.log( x + y); var y = 2;&#125;f(); æ‰§è¡Œè¿™æ®µä»£ç ï¼Œæˆ‘ä»¬å‘ç°ï¼šç¼–è¯‘å™¨æ²¡æœ‰æŠ¥é”™ï¼Œä½†æ˜¯è¾“å‡º NaN ã€‚ è¿™æ˜¯å› ä¸ºjavascript æœ‰ä¸€ä¸ªå¾ˆå¥‡æ€ªçš„ç‰¹æ€§ï¼šå®ƒä¼šè‡ªåŠ¨æå‡ å˜é‡çš„å£°æ˜ åˆ°å‡½æ•°é¡¶ç«¯ï¼Œä½†æ˜¯åˆä¸ä¼šæå‡ å˜é‡çš„èµ‹å€¼ã€‚ åœ¨ç¼–è¯‘å™¨çœ¼é‡Œï¼Œå®ƒçœ‹åˆ°çš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š 12345678910&#x27;use strict&#x27;;function f()&#123; var x = 1; var y ; // æå‡äº†å®šä¹‰ console.log( x + y); // æ‰§è¡Œåä¹Ÿå¹¶æ²¡æœ‰æŠ¥é”™ y = 2; // æ²¡æœ‰æå‡èµ‹å€¼&#125;f(); æ‰€ä»¥è™½ç„¶å¯ä»¥ä½¿ç”¨å˜é‡ y ä½†æ˜¯åˆä¸èƒ½ä½¿ç”¨å®ƒçš„å€¼ï¼Œæ‰€ä»¥è¾“å‡ºï¼šNaN ã€‚ é¿å…é”™è¯¯ ğŸ˜‹ å¯¹äºè¿™ç§æ€ªå¼‚ç‰¹æ€§ï¼Œæˆ‘ä»¬æœ€å¥½æå‰ç”¨ var å£°æ˜æ‰€æœ‰è¦ä½¿ç”¨çš„å˜é‡ã€‚ 1234567function f()&#123; var x = 1, y = 2, z; // do something &#125; ğŸ˜‹ ç”¨ let å…³é”®å­—æ¥é™å®šå˜é‡èŒƒå›´ï¼Œç”³æ˜ä¸€ä¸ªå—çº§ä½œç”¨åŸŸã€‚ ç”±äºè¿™ç§å˜é‡æå‡ç‰¹æ€§ï¼Œå¯¼è‡´å˜é‡å®é™…ä½œç”¨åŸŸæ˜¯å‡½æ•°å†…éƒ¨ï¼Œä¼šä½¿å¾—for ç­‰å¾ªç¯è¯­å—æ— æ³•å®šä¹‰å…·æœ‰å±€éƒ¨ä½œç”¨åŸŸå˜é‡ï¼š 1234567891011function f()&#123; console.log(i); // ä¸æŠ¥é”™å¯ä»¥ä½¿ç”¨iï¼Œä½†æ˜¯è¾“å‡ºï¼šundefined for(var i = 0 ; i &lt; 3 ; i++) &#123; // do something &#125; console.log(i); // å¯ä»¥ä½¿ç”¨iå€¼ï¼Œè¾“å‡ºï¼š3&#125;f(); æˆ‘ä»¬å¯ä»¥é€šè¿‡ let å…³é”®å­—æ¥è¾¾åˆ°ï¼Œé™å®š i ä¸ºå±€éƒ¨å˜é‡ï¼š 1234567891011function f()&#123; console.log(i); // ä¼šæŠ¥é”™ï¼Œä¸èƒ½ä½¿ç”¨å±€éƒ¨å˜é‡i for(let i = 0 ; i &lt; 3 ; i++) &#123; // do something &#125; console.log(i); // ä¼šæŠ¥é”™ï¼Œä¸èƒ½ä½¿ç”¨å±€éƒ¨å˜é‡i&#125;f(); 2. å…¨å±€ä½œç”¨åŸŸ ä¸åœ¨ä»»ä½•å‡½æ•°å†…å®šä¹‰çš„å˜é‡å°±å…·æœ‰å…¨å±€ä½œç”¨åŸŸã€‚ ç‰¹åˆ«çš„ï¼Œé¡¶å±‚å‡½æ•°ä¹Ÿæ˜¯å…¨å±€å˜é‡ã€‚è™½ç„¶ä¹çœ‹æœ‰ç‚¹éš¾ä»¥ç†è§£ï¼Œä½†æ˜¯å›æƒ³å®ƒçš„åŒ¿åå‡½æ•°å†™æ³•ï¼Œä¾¿ä¸€ç›®äº†ç„¶ã€‚ 1234567891011121314&#x27;use strict&#x27;;// å…¨å±€ä½œç”¨åŸŸvar author = &#x27;hwh&#x27;;var f2 = function()&#123; return &#x27;é¡¶å±‚å‡½æ•°ä¹Ÿæ˜¯å…¨å±€å˜é‡&#x27;;&#125;// å…¨å±€å˜é‡ä»»æ„åµŒå¥—å—ä¸­éƒ½å¯ä»¥è°ƒç”¨&#123; console.log(author); console.log(f2());&#125; window å¯¹è±¡ window æ˜¯javascript é»˜è®¤å…¨å±€å¯¹è±¡ ï¼Œæ‰€æœ‰å…¨å±€å˜é‡ éƒ½è¢«ç»‘å®šåˆ° window ä¸Šä½œä¸ºä¸€ä¸ªå±æ€§ã€‚ 1234567// window// è°ƒç”¨windowå¯¹è±¡ï¼šconsole.log ä¼šæŠ¥é”™ï¼Œç”¨alertæ‰“å¼€ç½‘é¡µå¯æ­£å¸¸è¾“å‡ºï¼Ÿ&#123;// console.log(window.author); // å‡ºé”™ alert(window.author); // æ‰“å¼€ç½‘é¡µè¾“å‡ºï¼šhwh alert(window.f2()); // æ‰“å¼€ç½‘é¡µè¾“å‡ºï¼šé¡¶å±‚å‡½æ•°ä¹Ÿæ˜¯å…¨å±€å˜é‡&#125; å¯ä»¥çœ‹åˆ°ï¼Œå…¨å±€å˜é‡å¯ä»¥ä½œä¸ºå®ƒçš„å±æ€§ä¸€æ ·è¢«è°ƒç”¨ã€‚äº‹å®ä¸Š alert() ä¹Ÿæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ã€‚ ä¸‹é¢å°è¯•ç»™ å‡½æ•°å˜é‡ alert èµ‹å€¼ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œä½¿å¾—å®ƒä¸èƒ½æ‰§è¡Œ alert() åŸæœ¬è¾“å‡ºåŠŸèƒ½ã€‚ 123456789101112&#x27;use strict&#x27;;window.alert(&#x27;è°ƒç”¨window.alert()&#x27;);// å®šä¹‰ä¸€ä¸ªå˜é‡ä¿å­˜å‡½æ•°ï¼ˆå‡½æ•°ä¹Ÿæ˜¯å˜é‡ï¼‰var old_alert = window.alert;// ç»™alertèµ‹ä¸€ä¸ªæ–°å‡½æ•°:window.alert = function () &#123;&#125;// å°è¯•è°ƒç”¨alert()alert(&#x27;æˆ‘è¿˜èƒ½è¾“å‡ºå—ï¼Ÿ&#x27;); // æ‰“å¼€ç½‘é¡µå‘ç°è¿™å¥è¯ä¸ä¼šè¢«è¾“å‡º æ›´å¥½çš„å®šä¹‰å…¨å±€å˜é‡ å…¨å±€å˜é‡ä¼šç»‘å®šåˆ°å¯¹è±¡windowä¸Šï¼Œä¸åŒçš„ JavaScript æ–‡ä»¶å¦‚æœä½¿ç”¨äº†ç›¸åŒçš„å…¨å±€å˜é‡ï¼Œæˆ–è€…å®šä¹‰äº†ç›¸åŒåå­—çš„é¡¶å±‚å‡½æ•°ï¼Œéƒ½ä¼šé€ æˆå‘½åå†²çªï¼Œå¹¶ä¸”å¾ˆéš¾è¢«å‘ç°ã€‚ å‡å°‘å†²çªçš„ä¸€ä¸ªæ–¹æ³•æ˜¯æŠŠè‡ªå·±çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°å…¨éƒ¨ç»‘å®šåˆ°ä¸€ä¸ªå…¨å±€å˜é‡ä¸­ã€‚ä¾‹å¦‚ï¼š 1234567891011// å”¯ä¸€çš„å…¨å±€å˜é‡NOTE:var NOTE = &#123;&#125;; // å¯¹è±¡ï¼Ÿ// å…¶ä»–å˜é‡:NOTE.author = &#x27;hwh&#x27;;NOTE.version = 1.0;// å…¶ä»–å‡½æ•°:NOTE.f = function () &#123; return 1;&#125;; 3. è§£ææ„å€¼ ä»€ä¹ˆæ˜¯è§£ææ„å€¼ï¼Ÿç®€å•æ¥è¯´ï¼Œå¯ä»¥ åŒæ—¶å¯¹ä¸€ç»„å˜é‡è¿›è¡Œèµ‹å€¼ã€‚ 1234// è§£ææ„å€¼// æ³¨æ„ï¼šè§£ææ„å€¼æ¶‰åŠå¤šä¸ªå˜é‡èµ‹å€¼ï¼Œä¸¤è¾¹éƒ½è¦ç”¨[]åŒ…å›´var x,y,z,rest;[x,y,z] = [1,2,3]; è¿˜å¯ä»¥åƒå‰ä¸€æ ·ï¼Œç”¨... æ ‡è¯†rest ï¼Œä»¥æ•°ç»„å½¢å¼æ¥æ”¶æŒ‡å®šä½ç½®ä¹‹åæ‰€æœ‰èµ‹å€¼ã€‚ 123// 1.è§£æèµ‹å€¼ï¼š...rest[x,y,z,...rest] = [1,2,3,4,5];console.log(rest); // è¾“å‡ºï¼š[ 4, 5] è§£æ„æ•°ç»„ é™¤äº†ä¸Šè¿°åŸºæœ¬ç‰¹ç‚¹ï¼Œè§£æ„æ•°ç»„è¿˜æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š 12// è§£ææ•°ç»„ var x,y,z,rest; å…è®¸å¾…èµ‹å€¼å˜é‡ä¸ªæ•° â‰  å³ä¾§å˜é‡æ•° 12345678// 1. å…è®¸å¾…èµ‹å€¼å˜é‡ä¸ªæ•° â‰  å³ä¾§å˜é‡æ•°// å¾…èµ‹å€¼å˜é‡ &gt; å³ä¾§ï¼Œå‰©ä½™æœªèµ‹å€¼å˜é‡èµ‹undefined [x,y,z] = [1,2]; // ç­‰ä»·äºï¼š[x,y,z] = [1,2,undefined];console.log(&#x27;x=&#x27;+x+&#x27;,y=&#x27;+y+&#x27;,z =&#x27;+z); // è¾“å‡º ï¼šx=1,y=2,z=undefined// å¾…èµ‹å€¼å˜é‡ &lt; å³ä¾§ï¼Œåªä¼šå¯¹åº”ä¾æ¬¡å°†å¾…èµ‹å€¼å˜é‡èµ‹å€¼å®Œæ¯•[x,y,z] = [1,2,3,4,5]; // ç­‰ä»·äºï¼š[x,y,z] = [1,2,3]; console.log(&#x27;x=&#x27;+x+&#x27;,y=&#x27;+y+&#x27;,z =&#x27;+z); // è¾“å‡ºï¼šx = 1,y = 2,z = 3 è®¾ç½®é»˜è®¤å€¼ 123// 2.å¯ä»¥è®¾ç½®é»˜è®¤å€¼[x,y,z = 666] = [1,2];console.log(&#x27;x=&#x27;+x+&#x27;,y=&#x27;+y+&#x27;,z =&#x27;+z); // è¾“å‡ºï¼šx=1,y=2,z=666 å¿½ç•¥æŸäº›å€¼ 1234// 3.å¿½ç•¥å€¼var a,b;[a, ,b ] = [1,2,3];console.log(&#x27;a = &#x27;+ a + &#x27;,b = &#x27;+ b); // è¾“å‡ºï¼ša = 1,b = 3 è§£æ„å¯¹è±¡ å‰é¢éƒ½æ˜¯è§£æ„æ•°ç»„ï¼Œå¯¹è±¡ç”±ä¸€å¯¹å¯¹é”®å€¼ç»„æˆï¼Œå’Œè§£æ„æ•°ç»„è‡ªç„¶æœ‰äº›ä¸åŒã€‚ 123// å¯¹è±¡è§£æ„èµ‹å€¼var o = &#123;x:&#x27;one&#x27; , y:&#x27;two&#x27;,z:&#x27;three&#x27;,a:&#x27;four&#x27;,b:&#x27;five&#x27;&#125;;var &#123;x,y,z,a,b&#125; = o; ç‰¹åˆ«çš„ï¼Œå¦‚æœä¸æ˜¯å¯¹ä¸€ä¸ªå·²å­˜åœ¨å¯¹è±¡è§£æ„ï¼Œè€Œæ˜¯è¿›è¡Œæ— å£°æ˜èµ‹å€¼ï¼Œèµ‹å€¼è¯­å¥æœ‰æ‰€ä¸åŒï¼š 12345// è¿™ç§æ— å£°æ˜èµ‹å€¼ï¼Œè¦æ±‚èµ‹å€¼è¯­å¥å‘¨å›´æœ‰ (...)var x,y,z;( &#123;x,y,...rest&#125; = &#123;x:&#x27;one&#x27; , y:&#x27;two&#x27;,3:&#x27;three&#x27;,4:&#x27;four&#x27;,5:&#x27;five&#x27;&#125; );console.log(x); // è¾“å‡ºï¼šoneconsole.log(rest); // è¾“å‡ºï¼š&#123; &#x27;3&#x27;: &#x27;three&#x27;, &#x27;4&#x27;: &#x27;four&#x27;, &#x27;5&#x27;: &#x27;five&#x27; &#125; å¯¹è±¡è§£æ„è¿˜æœ‰ä»¥ä¸‹ä¸€äº›åŸºæœ¬ç‰¹ç‚¹ï¼š 1var o = &#123;x:&#x27;one&#x27; , y:&#x27;two&#x27;,z:&#x27;three&#x27;,a:&#x27;four&#x27;,b:&#x27;five&#x27;&#125;; å…è®¸å¾…èµ‹å€¼å˜é‡ä¸ªæ•° â‰  å³ä¾§å˜é‡æ•° 123// 1.å¾…èµ‹å€¼å˜é‡ &lt; å³ä¾§ï¼ŒæŒ‰å¯¹åº”é”®å€¼èµ‹å€¼å®Œæ¯•,[é¡ºåºä¸å½±å“]var &#123;x,b,a&#125; = o;console.log(&#x27;x=&#x27;+x+&#x27;,y=&#x27;+y+&#x27;,z =&#x27;+z); // è¾“å‡ºï¼šx=one ,a=four ,b=five å·¦å³ä¸¤ä¾§é”®å€¼è¦å¯¹åº” 123// 2.å·¦å³ä¸¤ä¾§é”®å€¼è¦å¯¹åº”var &#123;x,Y,z,a,b&#125; = o; // å·¦ä¾§Yå’Œå³ä¾§é”®å€¼yï¼Œä¸å¯¹åº”console.log(Y); // æ— æ³•è§£æ„æˆåŠŸï¼Œè¾“å‡ºï¼šundefined ç»™æ–°å˜é‡æä¾›é»˜è®¤å€¼å’Œå‚æ•° 12345// 3.ç»™æ–°å˜é‡æä¾›é»˜è®¤å€¼å’Œå‚æ•°var &#123;x:xx = 10, y:yy = 5&#125; = &#123;x: 3&#125;;console.log(xx); // 3console.log(yy); // 5 è§£æ„åµŒå¥—å¯¹è±¡å’Œæ•°ç»„ è§£æ„åµŒå¥—å¯¹è±¡å’Œæ•°ç»„ï¼Œå…·æœ‰çš„åŸºæœ¬ç‰¹ç‚¹å’Œä¸Šé¢æ˜¯ä¸€è‡´çš„ã€‚ä¸»è¦ä¸åŒåœ¨äºï¼š è§£æ„åµŒå¥—å¯¹è±¡è¦ä¿è¯å±‚æ¬¡ä¸€è‡´ï¼›è§£æ„åµŒå¥—æ•°ç»„ï¼Œä¸ä»…è¦ä¿è¯å±‚æ¬¡ä¸€è‡´è¿˜è¦ä¿è¯ä½ç½®ä¸€è‡´ã€‚ åµŒå¥—æ•°ç»„ æ•°ç»„æœ¬èº«æœ‰åµŒå¥—ï¼Œè§£æ„èµ‹å€¼è¦ä¿è¯åµŒå¥—ä½ç½®å’Œå±‚æ¬¡ä¸€è‡´ã€‚ 123// 1.æ•°ç»„åµŒå¥—let [x,[y,z]] = [1,[2,3]];let [[y,z],x] = [1,[2,3]]; // å‡ºé”™ä½ç½®ä¸ä¸€è‡´ åµŒå¥—å¯¹è±¡ å¯¹ä¸€ä¸ªå¯¹è±¡è¿›è¡Œè§£æ„èµ‹å€¼æ—¶ï¼ŒåŒæ ·å¯ä»¥ç›´æ¥å¯¹åµŒå¥—çš„å¯¹è±¡å±æ€§è¿›è¡Œèµ‹å€¼ï¼Œä¿è¯å±‚æ¬¡ä¸€è‡´ã€‚ 123456789101112131415var person = &#123; name: &#x27;hwh&#x27;, age: 23, gender: &#x27;M&#x27;, school: &#x27;chongqingU&#x27;, address: &#123; city: &#x27;FUZHOU&#x27;, street: &#x27;No.1 Road&#x27;, zipcode: &#x27;341000&#x27; &#125;&#125;;// åªéœ€ä¿è¯å±‚æ¬¡ä¸€è‡´ï¼šèµ‹å€¼æ—¶æŒ‰é”®å€¼èµ‹å€¼ï¼Œé¡ºåºä½ç½®å¯ä»¥è°ƒæ¢var &#123;name, address: &#123;city, zipcode&#125;&#125; = person; æ³¨æ„ï¼Œaddress å¹¶ä¸æ˜¯å˜é‡åï¼Œå°è¯•è¾“å‡ºä¼šæŠ¥é”™ã€‚å®ƒåªæ˜¯ä¸ºäº†cityã€zipcodeè·å–å¯¹è±¡å±æ€§ï¼š 123456// æµ‹è¯•è¾“å‡º console.log(address); // æŠ¥é”™ï¼Œaddressä¸æ˜¯å˜é‡ console.log(person.address); // è¾“å‡ºï¼š &#123; city: &#x27;FUZHOU&#x27;, street: &#x27;No.1 Road&#x27;, zipcode: &#x27;341000&#x27; &#125;// è¾“å‡ºï¼šname:hwh,city:FUZHOU ,zipcode:341000console.log(&#x27;name:&#x27;+name+&#x27;,city:&#x27;+ city,&#x27;,zipcode:&#x27;+ zipcode); ä½¿ç”¨åœºæ™¯ äº¤æ¢ä¸¤ä¸ªå˜é‡ 123// 1.äº¤æ¢å˜é‡x yvar x=1, y=2;[x, y] = [y, x] å¿«é€Ÿè·å–é¡µé¢åŸŸå &amp; è·¯å¾„ 12// 2.å¿«é€Ÿè·å–é¡µé¢åŸŸåå’Œè·¯å¾„var &#123;hostname:domain, pathname:path&#125; = location; å‡åŒ–å‡½æ•°å‚æ•°å®šä¹‰ å¦‚ä¸‹é¢å¯ä»¥æ–¹ä¾¿å¿«é€Ÿåˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚ 1234function myDate(&#123;year, mon, day, hour=0, min=0, sec=0&#125;) &#123; return new Date(year + &#x27;-&#x27; + month + &#x27;-&#x27; + day + &#x27; &#x27; + hour + &#x27;:&#x27; + minute + &#x27;:&#x27; + second);&#125; å¦‚ä¸Šé¢å‡½æ•°æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œè€Œä¸æ˜¯å»å®šä¹‰6ä¸ªå‚æ•°ï¼š 1function myDate(year,mon,day,hour=0,min=0,sec=0) åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œæ ¹æ®è§£ææ„å€¼ï¼Œå½¢å‚å¯¹è±¡ç»™å®å‚å¯¹è±¡èµ‹å€¼ ï¼š 1myDate(&#123;2019,07,19&#125;); 2.3 æ–¹æ³•ä¸thiså¤§å‘ åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ç»‘å®šå‡½æ•°ï¼Œç§°ä¸ºè¿™ä¸ªå¯¹è±¡çš„æ–¹æ³•ã€‚ 123456789101112131415//æ–¹æ³•var hwh = &#123; birth: 1996, gender: &#x27;M&#x27;, school: &#x27;chongqingU&#x27;, age:function() &#123; var nowYear = new Date().getFullYear(); return nowYear - this.birth; // è°ƒç”¨å¯¹è±¡é‡Œå±æ€§ï¼Œä¸ç”¨thisä¼šæŠ¥é”™ &#125;&#125;console.log(hwh.age()); // è¾“å‡ºï¼š23console.log(hwh.age); // è¾“å‡ºï¼š[Function: age] æˆ‘ä»¬çŸ¥é“ï¼Œthis å…³é”®å­—æ˜¯ç”¨æ¥æŒ‡å‘å½“å‰å¯¹è±¡ã€‚åœ¨JavaScript æ²¡æœ‰ç±»è¿™ä¸ªæ¦‚å¿µï¼Œthis åœ¨ä¸Šè¿°ä»£ç æŒ‡å‘çš„æ˜¯ hwh è¿™ä¸ªå¯¹è±¡ã€‚this.birth å› æ­¤å¯ä»¥æ‹¿åˆ° hwh çš„ birth å±æ€§ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¹Ÿçœ‹åˆ° JavaScript ä¸­ this å…³é”®å­—å’Œå¸¸ç”¨é«˜çº§è¯­è¨€ç¬¬ä¸€ä¸ªä¸åŒç‚¹ï¼š å³ä½¿æ˜¯åœ¨å¯¹è±¡å†…éƒ¨ï¼Œè°ƒç”¨å¯¹è±¡å±æ€§ä¹Ÿè¦ this.å±æ€§å è¿›è¡Œè°ƒç”¨ï¼Œå¦åˆ™ä¼šå‡ºé”™ã€‚ ä½†æ˜¯ï¼Œç”±äºjsæœ¬èº«è®¾è®¡ç¼ºé™·ï¼Œthis åœ¨å‡½æ•°å†…éƒ¨ä¸ä¸€å®šæŒ‡å‘å½“å‰å¯¹è±¡ï¼Œä¹Ÿå¯èƒ½æŒ‡å‘å…¨å±€å¯¹è±¡ window ã€‚ 1. å°å¿ƒä½¿ç”¨ä½ çš„ this æ–°å˜é‡æŒ‡å‘æ–¹æ³• å¦‚æœä½ å°è¯•ç”¨ä¸€ä¸ªæ–°å˜é‡ my_age æŒ‡å‘å‡½æ•°å†…éƒ¨æ–¹æ³• age() : 123456789101112131415var hwh = &#123; birth: 1996, gender: &#x27;M&#x27;, school: &#x27;chongqingU&#x27;, age:function() &#123; var nowYear = new Date().getFullYear(); return nowYear - this.birth; // è°ƒç”¨å¯¹è±¡é‡Œå±æ€§ï¼Œä¸ç”¨thisä¼šæŠ¥é”™ &#125;&#125;// æ–°å˜é‡æŒ‡å‘å¯¹è±¡æ–¹æ³•var my_age = hwh.age;console.log(my_age()); // è¾“å‡ºï¼š NaN whyï¼Ÿï¼Ÿä¸ºä»€ä¹ˆçªç„¶æŠ¥é”™ï¼Ÿ è¿™æ˜¯å› ä¸ºï¼Œä»¥ å¯¹è±¡å.æ–¹æ³•å() è°ƒç”¨ this æŒ‡å‘å½“å‰å¯¹è±¡ ï¼›ä½†æ˜¯ å•ç‹¬è°ƒç”¨å‡½æ•° ï¼Œthis æŒ‡å‘å…¨å±€å¯¹è±¡ window ï¼ å¤šå±‚å‡½æ•°å†…éƒ¨ç”¨ this å–œæ¬¢é‡æ„çš„ä½ ï¼Œåˆé—²å¾—è›‹ç–¼ï¼Œçªå‘å¥‡æƒ³ï¼Œåœ¨ageæ–¹æ³•å†…éƒ¨å†å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥è¿”å›å€¼ï¼š 1234567891011121314151617var hwh = &#123; birth: 1996, gender: &#x27;M&#x27;, school: &#x27;chongqingU&#x27;, age:function() &#123; function getAge() &#123; var nowYear = new Date().getFullYear(); return nowYear - this.birth; // è°ƒç”¨å¯¹è±¡é‡Œå±æ€§ï¼Œä¸ç”¨thisä¼šæŠ¥é”™ &#125; return getAge(); &#125;&#125;console.log(hwh.age()); // è¾“å‡ºï¼šNaN åˆå‡ºé”™äº†ï¼è™½ç„¶ this å…³é”®å­—åœ¨ å¯¹è±¡ageæ–¹æ³•å†…éƒ¨ æŒ‡å‘å½“å‰å¯¹è±¡ï¼Œä½†åœ¨ ageæ–¹æ³•å†…å‡½æ•°å†… æŒ‡å‘å…¨å±€å¯¹è±¡ window ï¼ èªæ˜çš„ä½ ä¹Ÿè®¸ä¼šæƒ³ï¼Œæ—¢ç„¶åœ¨ ageæ–¹æ³•å†…éƒ¨è¿˜æ˜¯æŒ‡å‘å½“å‰å¯¹è±¡ï¼Œé‚£æˆ‘å¯ä»¥æ•è·æ­¤æ—¶this ï¼Œå†åœ¨æ–¹æ³•å†…éƒ¨å‡½æ•°ä½¿ç”¨ï¼š 12345678910111213141516171819var hwh = &#123; birth: 1996, gender: &#x27;M&#x27;, school: &#x27;chongqingU&#x27;, age:function() &#123; // æ•è·this var that = this; function getAge() &#123; var nowYear = new Date().getFullYear(); return nowYear - this.birth; // è°ƒç”¨å¯¹è±¡é‡Œå±æ€§ï¼Œä¸ç”¨thisä¼šæŠ¥é”™ &#125; return getAge(); &#125;&#125;console.log(hwh.age()); // è¾“å‡ºï¼š23 æ›´ä¼˜é›…è§£å†³this é”™è¯¯æŒ‡å‘ï¼šæ”¹å†™ä¸ºç®­å¤´å‡½æ•°ï¼Œè¯¦è§ï¼š2.6 ç®­å¤´å‡½æ•° ã€‚ æé†’ä¸è¦çŠ¯é”™ï¼šstrict æ¨¡å¼ ä¸Šè¿°ä¸¤ç§æƒ…å†µï¼Œè¿˜å¯ä»¥åœ¨ strict æ¨¡å¼ä¸‹è®©å‡½æ•°çš„this æŒ‡å‘ undefined ï¼Œè€Œä¸æ˜¯window ï¼Œè¿™æ ·ç¼–è¯‘å™¨ä¼šæŠ›å‡ºé”™è¯¯ã€‚ 12345&#x27;use strict&#x27;;// ä¸Šé¢å‡½æ•°å†™æ³•...console.log(hwh1.age()); //æŠ›å‡ºé”™è¯¯ï¼š Cannot read property &#x27;birth&#x27; of undefined 2. apply æ–¹æ³• åœ¨å‰é¢ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ strict æ¨¡å¼ï¼Œä½¿å¾—this æŒ‡å‘ undefined è®©ç¼–è¯‘å™¨æé†’æˆ‘ä»¬ä¸è¦è®© this é”™è¯¯æŒ‡å‘ã€‚ ä½†æ˜¯ï¼Œå¯ä»¥æ§åˆ¶ this æ­£ç¡®æŒ‡å‘æˆ‘ä»¬æ‰€æœŸæœ›çš„å—ï¼Ÿ æ¯ä¸ªå‡½æ•°æœ¬èº«æ‹¥æœ‰çš„apply() æ–¹æ³•ï¼Œå¯ä»¥åšåˆ°è¿™ç‚¹ã€‚ 123456789101112131415161718192021&#x27;use strict&#x27;;function getAge()&#123; var nowYear = new Date().getFullYear(); return nowYear - this.birth; &#125;var hwh = &#123; birth: 1996, gender: &#x27;M&#x27;, school: &#x27;chongqingU&#x27;, age:getAge&#125;// è®©getAge() ä¸­thisä»æŒ‡å‘ undefined (ä¸¥æ ¼æ¨¡å¼ä¸‹ä¸æ˜¯windowï¼‰ --&gt; hwh// å‚æ•°1ï¼šè¡¨ç¤ºæ–¹æ³•è¦æŒ‡å‘çš„å¯¹è±¡// å‚æ•°2ï¼šè¡¨ç¤ºæ–¹æ³•éœ€è¦çš„å‚æ•°ï¼Œç”¨æ•°ç»„å°è£…å¥½ã€‚è¿™é‡Œ[]è¡¨ç¤ºä¸ºç©ºgetAge.apply(hwh,[]); console.log(hwh.age()); // è¾“å‡º23 call æ–¹æ³• call æ–¹æ³•å’Œ apply æ–¹æ³•å¾ˆç±»ä¼¼ï¼Œèƒ½è¾¾åˆ°ç›¸åŒæ•ˆæœï¼Œå®ƒä»¬å”¯ä¸€åŒºåˆ«æ˜¯ä¼ é€’å‚æ•°ä¸åŒã€‚ æ¯”å¦‚ï¼Œè°ƒç”¨ Math.max(3, 5, 4)ï¼Œåˆ†åˆ«ç”¨ apply() å’Œ call() å®ç°å¦‚ä¸‹ï¼š 12Math.max.apply(null, [3, 5, 4]); // 5Math.max.call(null, 3, 5, 4); // 5 å¯ä»¥çœ‹åˆ°ï¼Œapply() éœ€è¦æŠŠå‚æ•°å°è£…å¥½ Araay æ•°ç»„å†ä¼ å…¥ ï¼› call() åˆ™éœ€é€ä¸ªä¼ å…¥å‚æ•°ã€‚ æ–°çš„é—®é¢˜ åœ¨ æ–°å˜é‡æŒ‡å‘æ–¹æ³• å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°è¯•ç”¨ apply æ¥æ”¹å˜æ–°å˜é‡å‡½æ•°æŒ‡å‘ï¼š 1234567891011121314151617var hwh = &#123; birth: 1996, gender: &#x27;M&#x27;, school: &#x27;chongqingU&#x27;, age:function() &#123; var nowYear = new Date().getFullYear(); return nowYear - this.birth; // è°ƒç”¨å¯¹è±¡é‡Œå±æ€§ï¼Œä¸ç”¨thisä¼šæŠ¥é”™ &#125;&#125;// æ–°å˜é‡æŒ‡å‘å¯¹è±¡æ–¹æ³•var my_age = hwh.age;my_age.apply(hwh,[]); // æ”¹å˜thisæŒ‡å‘ä¸æˆåŠŸï¼Ÿconsole.log(my_age()); // è¾“å‡ºï¼š NaN å´å‘ç°ï¼Œmy_age æ–¹æ³•æŒ‡å‘å¹¶æ²¡æœ‰è¢«æ”¹å˜ï¼Œè¿˜æ˜¯è¾“å‡º NaN ? ä¹‹æ‰€ä»¥ä¸å°è¯•ï¼Œå¤šå±‚å‡½æ•°å†…éƒ¨ç”¨ this ä¸€èŠ‚ç”¨apply æ”¹å˜ï¼Œæ˜¯å› ä¸ºæ— æ³•å–é‡Œå±‚å‡½æ•°åã€‚è€Œç›´æ¥å°è¯•åœ¨é‡Œå±‚å‡½æ•°é‡Œä½¿ç”¨å‡½æ•°åï¼Œé‚£å°±å˜æˆé€’å½’äº†ï¼ 1234567891011121314151617var hwh = &#123; birth: 1996, gender: &#x27;M&#x27;, school: &#x27;chongqingU&#x27;, age:function() &#123; function getAge() &#123; // åªèƒ½åœ¨è¿™é‡Œå¯ä»¥å–åˆ°getAgeå‡½æ•°åï¼Œå¯æ˜¯å˜æˆäº†é€’å½’ // getAge.apply(hwh,[]); // æŠ¥é”™ï¼šæ— é™é€’å½’ var nowYear = new Date().getFullYear(); return nowYear - this.birth; // è°ƒç”¨å¯¹è±¡é‡Œå±æ€§ï¼Œä¸ç”¨thisä¼šæŠ¥é”™ &#125; return getAge(); &#125;&#125; è£…é¥°å™¨ åˆ©ç”¨ apply()ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åŠ¨æ€æ”¹å˜å‡½æ•°çš„è¡Œä¸ºã€‚ JavaScript çš„æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯åŠ¨æ€çš„ï¼Œå³ä½¿å†…ç½®çš„å‡½æ•°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é‡æ–°æŒ‡å‘æ–°çš„å‡½æ•°ã€‚ï¼ˆ è¦†å†™ï¼Ÿï¼Ÿï¼‰ å¢åŠ ç»Ÿè®¡è°ƒç”¨å¤šå°‘æ¬¡æ–¹æ³• parseInt() ï¼Œåœ¨ä¸æ”¹å˜åŸæœ‰åŠŸèƒ½åŸºç¡€ä¸Šã€‚ 12345678910111213141516// è£…é¥°å™¨ // ä¸‹é¢ä»£ç åœ¨ VSCode + codeRunneræŠ¥é”™ï¼šwindow is not defined// åœ¨æµè§ˆå™¨ä¸­æ§åˆ¶å°å¯æ­£å¸¸è¾“å‡ºvar count = 0;var oldParseInt = parseInt;window.parseInt = function()&#123; count++; return oldParseInt.apply(null,arguments);&#125;parseInt(&#x27;10&#x27;); parseInt(&#x27;10&#x27;); parseInt(&#x27;10&#x27;);console.log(count); // è¾“å‡ºï¼š3 ä½†æ˜¯ä¸‹é¢æ–¹æ³•ä¹Ÿèƒ½è°ƒç”¨åŸå‡½æ•°ï¼Œæ— æ³•è¯´æ˜è£…é¥°å™¨ä½œç”¨ï¼Ÿ 123456window.parseInt = function()&#123; count++; // return oldParseInt(null,arguments); // æŠ¥é”™ï¼šparseIntæ˜¯å‡½æ•°å˜é‡ï¼Œè¿™é‡Œè¿”å›çš„æ˜¯å‡½æ•°å€¼ return oldParseInt; // æˆåŠŸè¾“å‡º ï¼šå‡½æ•°ä¹‹é—´çš„èµ‹å€¼&#125; 2.4 é«˜é˜¶å‡½æ•° åœ¨ JavaScript ä¸­ ï¼Œå˜é‡å¯ä»¥æŒ‡å‘å‡½æ•°ï¼Œå‡½æ•°å‚æ•°èƒ½æ¥æ”¶å˜é‡ï¼Œé‚£ä¹ˆè‡ªç„¶å¯ä»¥æŠŠ å‡½æ•°å½“åšå¦ä¸€ä¸ªå‡½æ•°å‚æ•°ä¼ é€’ ã€‚ é«˜é˜¶å‡½æ•°ï¼Œç®€å•æ¥è¯´å°±æ˜¯æŠŠå‡½æ•°å½“å‚æ•°ï¼Œç±»ä¼¼äºC/C++ä¸­å‡½æ•°æŒ‡é’ˆå’ŒC#ä¸­å§”æ‰˜ã€‚ ä¸‹é¢æ˜¯å››ä¸ªåŸºæœ¬å››åˆ™è¿ç®—å‡½æ•°ï¼š 1234567891011// åŠ function add(a,b)&#123; return a+b;&#125;// é™¤function div(a,b)&#123; return a/b;&#125;// ä¹˜ã€å‡.. æˆ‘ä»¬å¯ä»¥æŠŠå®ƒä»¬å½“åšå‚æ•°ï¼Œå®ç°ä¸€ä¸ªå‡½æ•°å°±å¯ä»¥è®¡ç®—å››ç§ä¸åŒè¿ç®—ï¼š 123456function myfuc(a,b,f)&#123; return f(a,b);&#125;var result = myfuc(1,3,div); // 0.3333333.. æ˜ å°„ï¼šmap / reduce map() è¿™é‡Œçš„map() å’Œå‰é¢é›†åˆmap ä¸åŒï¼Œå®ƒæ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œè¡¨ç°å¯¹æ•°ç»„æ¯ä¸ªå…ƒç´ è¿›è¡ŒæŸç§æ˜ å°„å…³ç³»ã€‚ å‡è®¾å­˜åœ¨ä¸€ä¸ªæ•°ç»„ï¼šarr = [x1,x2,x3â€¦] ï¼Œå’Œå›è°ƒå‡½æ•° f(x)ã€‚ arr.map() æŠŠå‡½æ•° f(x) ä½œä¸ºå‚æ•° ï¼Œä¼šè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ [f(x1), f(x2), f(x3) â€¦] 12345678910// mapfunction pow(x)&#123; return x*x;&#125;var arr = [1,2,3,4,5];var newArr = arr.map(pow);console.log(newArr); // è¾“å‡ºï¼š[ 1, 4, 9, 16, 25 ] â” æ•°ç»„çš„å…ƒç´ ä¼šè‡ªåŠ¨ä½œä¸ºå›è°ƒå‡½æ•°f(x) ç¬¬ä¸€ä¸ªå½¢å‚çš„å®å‚è¿›è¡Œèµ‹å€¼ï¼Œå¦‚æœf(x) æ²¡æœ‰å‚æ•°å‘¢ï¼Ÿæˆ–è€…ä¸æ­¢ä¸€ä¸ªå‚æ•°å‘¢ï¼Ÿ 123456789function pow()&#123; return 1;&#125;var arr = [1,2,3,4,5];// å¦‚æœæ²¡æœ‰å‚æ•°ï¼Œæ¯ä¸€æ¬¡powå‡½æ•°è¿”å›å€¼ 1 ä½œä¸ºæ–°æ•°ç»„å…ƒç´ var newArr = arr.map(pow);console.log(newArr); // è¾“å‡ºï¼š[ 1, 1, 1, 1, 1 ] äº‹å®ä¸Šå›è°ƒå‡½æ•° f(x) æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œé€šå¸¸æˆ‘ä»¬åªä½¿ç”¨ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤º Array æŸä¸ªå…ƒç´ ï¼š 123456789101112131415var arr = [1,2,3,4,5];var newArr = arr.map( function(element,index,self) &#123; console.log(element); // ä¾æ¬¡æ‰“å°: 1,2,3,4,5 console.log(index); // ä¾æ¬¡æ‰“å°: 0,1,2,3,4 console.log(self); // selfå°±æ˜¯å˜é‡arr,æ¯æ¬¡éƒ½æ‰“å°arr:[ 1, 2, 3, 4, 5 ] return element*element; &#125;);console.log(newArr); // è¾“å‡ºï¼š[ 1, 4, 9, 16, 25 ] è¯•åˆ†æï¼šæŠŠparseIntå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œä¸ºä»€ä¹ˆå¾—åˆ°æ„æ–™ä¹‹å¤–çš„ç»“æœï¼Ÿ 1234var arr = [&#x27;1&#x27;,&#x27;2&#x27;,&#x27;3&#x27;,&#x27;4&#x27;,&#x27;5&#x27;];var newArr = arr.map(parseInt);console.log(newArr); // è¾“å‡ºï¼š[ 1, NaN, NaN, NaN, NaN ] ğŸ™‚ æŸ¥çœ‹MDNæ–‡æ¡£ï¼šMDN-Array.map() reduce() reduce() å’Œ map() ç±»ä¼¼ï¼šä¼ å…¥çš„å‚æ•°å‡½æ•°f å¾ªç¯æ¯æ¬¡å¯¹æ•°ç»„å‰ä¸¤ä¸ªå…ƒç´ è¿ç®—ï¼Œè¿ç®—ç»“æœrä½œä¸ºæ•°ç»„é¦–å…ƒç´ æ’å…¥å¤´éƒ¨ã€‚ å‡è®¾å­˜åœ¨ä¸€ä¸ªæ•°ç»„ï¼šarr = [x1,x2,x3,x4â€¦] ï¼Œå’ŒæŸä¸ªå‡½æ•° f(x,y)ã€‚ arr.map() æŠŠå‡½æ•° f(x,y) ä½œä¸ºå‚æ•° ï¼Œä¼šè¿”å›ä¸€ä¸ªå€¼ï¼šf(f(x1,x2),x3) 12345678910// reducefunction sum(x1,x2)&#123; return x1+x2; &#125;var arr = [1, 2, 3, 4, 5];var s = arr2.reduce(sum);console.log(s); // è¾“å‡ºï¼š15 å½“ç„¶æ— è®ºæ˜¯ map / reduce ä¼ é€’å‚æ•°éƒ½å¯ä»¥ç”¨ lambada è¡¨è¾¾å¼è¿›è¡Œç®€åŒ–ï¼š 1234var arr2 = [1, 2, 3, 4, 5];var s = arr2.reduce((x1,x2) =&gt; x1+x2);console.log(s); // è¾“å‡ºï¼š15 è‡ªå®šè§„åˆ™ï¼šfilter / sort â€¦ ä¸‹åˆ—é«˜çº§å‡½æ•°éƒ½æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š æ ¹æ®ä¼ é€’çš„å›è°ƒå‡½æ•° è‡ªå®šä¹‰æŸç§åˆ¤æ–­è§„åˆ™ å¯¹æ•°ç»„æ¯ä¸ªå…ƒç´ è¿›è¡Œåˆ¤æ–­ï¼Œæ ¹æ®è¿”å›ç»“æœ ture / false å†³å®šå¯¹å…ƒç´ è¿›è¡Œä¸åŒæ“ä½œ filter() filterä¹Ÿæ˜¯å¸¸ç”¨é«˜çº§å‡½æ•°ï¼Œå®ƒç”¨äºæŠŠArray æŸäº›å…ƒç´ è¿‡æ»¤æ‰ï¼Œç„¶åè¿”å›å‰©ä¸‹çš„å…ƒç´ ã€‚ å…·ä½“è¿‡ç¨‹ï¼š*filter()*æŠŠä¼ å…¥çš„å›è°ƒå‡½æ•°ä¾æ¬¡ä½œç”¨äºæ¯ä¸ªå…ƒç´  ï¼Œå›è°ƒå‡½æ•°è¿”å›å€¼ä¸º ture åˆ™è¯¥å…ƒç´ ä¿ç•™ï¼Œå¦åˆ™åˆ é™¤ã€‚ 1234567891011var arr = [1, 2, 3, 4, 5];var arr1 = arr.filter( function(x) &#123; return x % 2 == 0; // åªè¿”å›å¶æ•° &#125;);console.log(arr1); // è¾“å‡ºï¼š[ 2, 4 ] ç»™å®šæ•°ç»„Array ï¼Œå»é™¤é‡Œé¢é‡å¤çš„å…ƒç´ ã€‚ï¼ˆæ²¡çœ‹å¤ªæ˜ç™½ï¼‰ 123456789101112131415&#x27;use strict&#x27;;var r, arr = [&#x27;apple&#x27;, &#x27;strawberry&#x27;, &#x27;banana&#x27;, &#x27;pear&#x27;, &#x27;apple&#x27;, &#x27;orange&#x27;, &#x27;orange&#x27;];r = arr.filter( // æ•°ç»„å½“å‰å…ƒç´ ã€æ•°ç»„å½“å‰å…ƒç´ ç´¢å¼•ã€æ•°ç»„æœ¬èº«åˆ†åˆ«ä½œä¸ºå›è°ƒå‡½æ•°3å½¢å‚çš„å®å‚å€¼ function (element, index, self) &#123; return self.indexOf(element) === index; // è¿™é‡Œæ²¡å¤ªæ˜ç™½ &#125;);console.log(r.toString()); // è¾“å‡ºï¼šapple,strawberry,banana,pear,orange sort() JavaScript ä¸­çš„ sort() é«˜çº§æ’åºå‡½æ•°ï¼Œæ— ä¼ é€’å›è°ƒå‡½æ•°æƒ…å†µä¸‹ï¼Œæ’åºçš„æ“ä½œé¡ºåºå¦‚ä¸‹ï¼š å…ˆå°†æ•°ç»„çš„æ‰€æœ‰å…ƒç´ è½¬æ¢æˆ String å­—ç¬¦ä¸² sort() æ ¹æ®æ¯ä¸ªå­—ç¬¦ä¸² é¦–å­—ç¬¦ ASCIIå€¼ æ¥ä»å°åˆ°å¤§æ’åº æ‰€ä»¥çœ‹èµ·æ¥ä¼šæœ‰ä¸‹é¢&quot;å¥‡æ€ª&quot;ç»“æœï¼š10 æ’åœ¨ 2 å‰é¢ 1[10, 20, 1, 2].sort(); // [1, 10, 2, 20] è¿™æ˜¯å› ä¸ºæ•°ç»„å…ƒç´ å…ˆè½¬æ¢æˆ String ç±»å‹ï¼ŒæŒ‰ é¦–å­—ç¬¦ ASCIIå€¼ æ’åºè§„åˆ™ï¼š â€˜1â€™ &gt; â€˜2â€™ ==&gt; â€˜10â€™ &gt; â€˜2â€™ã€‚ å®šä¹‰è‡ªå·±çš„æ’åºè§„åˆ™ æˆ‘ä»¬æ¥å®šä¹‰æ•°å­—ä»å°åˆ°å¤§æ’åºè§„åˆ™å›è°ƒå‡½æ•°ï¼Œä½¿å¾—èƒ½æ­£å¸¸è¾“å‡ºæˆ‘ä»¬æœŸæœ›çš„æ•°å­—æ’åºç»“æœã€‚ æ’åºè§„åˆ™ï¼šç±»æ¯”å†’æ³¡æ’åºï¼Œåˆ¤æ–­ä¸¤ä¸ªå…ƒç´ å¤§å°ï¼Œå†³å®šæ˜¯å¦äº¤æ¢ä½ç½®ï¼Ÿ 123456789101112var arr = [10, 20, 1, 2];arr1 = arr.sort( function(x,y) &#123; if(x&gt;y) return 1; else return -1; &#125;);console.log(arr1); // è¾“å‡ºï¼š[ 1, 2, 10, 20 ] å¯¹åº”ï¼Œå†’æ³¡æ’åºå†™æ³•ï¼š 123456789101112131415161718192021function cmp(x,y)&#123; if(x&gt;y) return 1; else return -1;&#125;var s = [10, 20, 1, 2];for(let i = 0; i &lt; arr.length ; i++)&#123; for(j = arr.length -1 ; j -i &gt; 0; j--) &#123; // cmpä½œä¸ºæ’åºè§„åˆ™ï¼Œå†³å®šæ˜¯å¦äº¤æ¢ä¸¤ä¸ªå…ƒç´  if(cmp(s[j],s[j-1]) == -1) &#123; temp = s[j]; s[j] = s[j-1]; s[j-1] = temp; &#125; &#125; console.log(s[i]); // ä¾æ¬¡è¾“å‡ºï¼š1 2 10 20&#125; å¦‚æœï¼Œè¦æ±‚ä»å°åˆ°å¤§è¾“å‡ºå‘¢ï¼Ÿ é‡æ–°å®šä¹‰ä¸‹ ä½•ä¸ºå¤§ å³å¯ã€‚ 123456789101112var arr = [10, 20, 1, 2];arr1 = arr.sort( function(x,y) &#123; if(x&gt;y) return -1; // æ”¹æˆè¿”å› -1 else return 1; // æ”¹æˆè¿”å› 1 &#125;);console.log(arr1); // è¾“å‡ºï¼š[ 20, 10, 2, 1 ] åŒç†ï¼Œå¯¹åº”å†’æ³¡æ’åºæ”¹æ¢cmpæ’åºè§„åˆ™ï¼ˆäº¤æ¢if / elseè¿”å›å€¼ï¼‰ã€‚å·²æµ‹è¯•æˆåŠŸè¾“å‡ºï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚ every() every() è‡ªå®šå›è°ƒå‡½æ•°åˆ¤æ–­è§„åˆ™ï¼Œå¯¹æ‰€æœ‰æ•°ç»„å…ƒç´ è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœå›è°ƒå‡½æ•°éƒ½ è¿”å›ture ï¼Œè¯´æ˜æ‰€æœ‰å…ƒç´ éƒ½æ»¡è¶³åˆ¤æ–­æ¡ä»¶ï¼Œé‚£ä¹ˆ*every()* è¿”å› tureï¼Œå¦åˆ™è¿”å›false ã€‚ ç»™å®šä¸€ä¸ªåŒ…å«æŒ‡å®šå­—ç¬¦ä¸²æ•°ç»„ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ»¡è¶³æŒ‡å®šæµ‹è¯•æ¡ä»¶ã€‚ 123456789var arr = [&#x27;Apple&#x27;, &#x27;pear&#x27;, &#x27;orange&#x27;];var b = arr.every( function (s) &#123; return s.length &gt; 0; &#125;); console.log(b);// true, å› ä¸ºæ¯ä¸ªå…ƒç´ éƒ½æ»¡è¶³ s.length&gt;0 find() åŒä¸Šè‡ªå®š å›è°ƒå‡½æ•°åˆ¤æ–­è§„åˆ™ï¼Œå¯¹æ‰€æœ‰å…ƒç´ è¿›è¡Œåˆ¤æ–­ã€‚å¦‚æœå›è°ƒå‡½æ•°è¿”å› ture ï¼Œåˆ™æ‰¾åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œ find() è¿”å›è¯¥å…ƒç´ ï¼›å¦‚æœæ‰€æœ‰å…ƒç´ éƒ½éå†å®Œæ¯•ï¼Œæ²¡æœ‰è¿”å› ture ï¼Œåˆ™è¯´æ˜æœªæ‰¾åˆ°å…ƒç´ ï¼Œfind() è¿”å› undefinedã€‚ 123456789var arr = [&#x27;Apple&#x27;, &#x27;pear&#x27;, &#x27;orange&#x27;];var tmp = arr.find( function (s) &#123; s.toLowerCase() === s; // æ‰¾åˆ°ç¬¬ä¸€ä¸ªå…¨æ˜¯å°å†™å­—æ¯çš„å­—ç¬¦ä¸² &#125;); console.log(tmp);// è¾“å‡ºï¼špear findIndex() å’Œ find() ç±»å‹ï¼Œä¸åŒåœ¨äº findIndex() æ‰¾åˆ°å…ƒç´ è¿”å›è¯¥ç´¢å¼•è€Œéè¿”å›å…ƒç´ ï¼›å¦‚æœæ²¡æ‰¾åˆ°å…ƒç´ åˆ™è¿”å› -1ã€‚ ç‰¹åˆ«ï¼šforEach() åŒå‰ forEach å¾ªç¯ï¼Œå®ƒå¯ç”¨æ¥éå† æ•°ç»„ã€é›†åˆ ã€‚åªå•çº¯ä¼ é€’æ•°ç»„å…ƒç´ ç­‰ä¿¡æ¯ï¼Œå…·ä½“å¯¹æ•°ç»„å…ƒç´ ç­‰è¿›è¡Œä»€ä¹ˆæ“ä½œç”±ä¼ é€’çš„å›è°ƒå‡½æ•°å†³å®šã€‚ åˆ©ç”¨forEach() å°è¯•éå†ä¸€ä¸ªæ•°ç»„ã€‚ 12var arr = [&#x27;Apple&#x27;, &#x27;pear&#x27;, &#x27;orange&#x27;];arr.forEach(console.log); ç”±äºå›è°ƒå‡½æ•°é»˜è®¤æœ‰ä¸‰ä¸ªå‚æ•°ï¼šelementã€indexã€self ï¼Œconsole.log æ¥æ”¶è¿™ä¸‰ä¸ªå®å‚ä¾æ¬¡æ‰“å°å®ƒä»¬ä¿¡æ¯ï¼š 123Apple 0 [ &#x27;Apple&#x27;, &#x27;pear&#x27;, &#x27;orange&#x27; ]pear 1 [ &#x27;Apple&#x27;, &#x27;pear&#x27;, &#x27;orange&#x27; ]orange 2 [ &#x27;Apple&#x27;, &#x27;pear&#x27;, &#x27;orange&#x27; ] forEach() éå†ä¸€ä¸ªæ•°ç»„ï¼Œåªæ‰“å°å‡ºæ•°ç»„å…ƒç´ ã€‚ æˆ‘ä»¬å¯ä»¥é‡å†™ console.log æ–¹æ³•ï¼Œè®©å®ƒåªæ¥æ”¶ä¸€ä¸ªå‚æ•°ã€‚ 123456789var arr = [&#x27;Apple&#x27;, &#x27;pear&#x27;, &#x27;orange&#x27;];var old_console_log = console.log;console.log = function(element) // é‡å†™&#123; old_console_log(element);&#125;arr.forEach(console.log); // ä¾æ¬¡è¾“å‡ºï¼šApple pear orange forEach() è¿˜å¯ä»¥éå†é›†åˆï¼Œå¦‚ Setã€Map ç­‰ã€‚æ³¨ï¼šä¸èƒ½éå†å¯¹è±¡ï¼éå†å¯¹è±¡ç›´æ¥for å¾ªç¯å°±è¡Œã€‚ 12345var arr2 = new Set([1,2,3]); arr2.forEach( console.log // ä¾æ¬¡è¾“å‡ºï¼š1 2 3); 2.5 é—­åŒ… ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ å‰é¢æˆ‘ä»¬äº†è§£åˆ°ï¼Œå‡½æ•°å¯ä»¥ä½œä¸º å‚æ•°ï¼Œé‚£ä¹ˆå‡½æ•°è‡ªç„¶ä¹Ÿå¯ä½œä¸º è¿”å›å€¼ã€‚ é—­åŒ…ï¼Œç®€å•æ¥è¯´å°±æ˜¯æºå¸¦çŠ¶æ€çš„å‡½æ•°ï¼Œå…¶è¿”å›å€¼æ˜¯ä¸€ä¸ªä¹Ÿæ˜¯å‡½æ•°ï¼Œè€Œä¸”å®ƒçš„çŠ¶æ€å¯ä»¥å®Œå…¨å¯¹å¤–éšè—èµ·æ¥ã€‚ å®ƒçš„ä½œç”¨æœ‰ï¼š å¯åˆ›å»ºå‡½æ•°å·¥å‚ã€å‡å°‘å‡½æ•°å‚æ•° å®ç°æºå¸¦çŠ¶æ€çš„é—­åŒ…ï¼Œè·å–å‡½æ•°å†…éƒ¨å±€éƒ¨å˜é‡ä¸”å˜é‡ä¸€ç›´åœ¨å†…å­˜ä¸­ å‡½æ•°å·¥å‚ è®¡ç®—æŒ‡å®š x å€¼çš„ 2æ¬¡æ–¹ / 3æ¬¡æ–¹ã€‚ ä¹Ÿè®¸èªæ˜çš„ä½ ï¼Œå¾ˆå¿«æƒ³åˆ°åˆ©ç”¨ç³»ç»Ÿè‡ªå¸¦ API è®¡ç®—x æ¬¡æ–¹ï¼š 1234var x = 5; // xå€¼ä»»æ„Math.pow(x,2); // 25Math.pow(x,3); // 125 ä½†æ˜¯ï¼Œå¦‚æœè®¡ç®—æŒ‡å®š x å€¼çš„ 2æ¬¡æ–¹ / 3æ¬¡æ–¹æ˜¯ å¸¸ç”¨ çš„ï¼Œä½ è§‰å¾—æ²¡å¿…è¦æ¯æ¬¡éƒ½æŒ‡å®šå‚æ•° å¹‚æ¬¡ ï¼Œå¹²è„†ç›´æ¥è‡ªå®šä¹‰ pow2 / pow3 å‡½æ•°ï¼Œåªæ¥æ”¶å‚æ•° x ï¼š 123456789101112function pow2(x)&#123; return Math.pow(x,2);&#125;function pow3(x)&#123; return Math.pow(x,3);&#125;pow2(5);pow3(5); ä½†æ˜¯ï¼Œå¦‚æœè®¡ç®— x å€¼çš„ 4æ¬¡æ–¹ / 5æ¬¡æ–¹ä¹Ÿ å¸¸ç”¨ ï¼Œå®šä¹‰4ä¸ªå‡½æ•°æ˜¾ç„¶ä¸å¤ªç®€æ´ã€‚ è¿™é‡Œï¼Œå¯ä»¥ç”¨é—­åŒ…åˆ›å»ºä¸€ä¸ªå‡½æ•°å·¥å‚ï¼Œè¿”å›åŒç±»æˆ‘ä»¬éœ€è¦çš„å‡½æ•°ï¼š 12345678910111213function creat_pow(n) // åˆ›å»ºpowå‡½æ•°å·¥ç¨‹ï¼Œå‚æ•°ä¸ºæŒ‡å®šå¹‚æ¬¡&#123; return function(x) // è¿”å›å‡½æ•°ï¼Œå‚æ•°ä¸ºå˜é‡x &#123; return Math.pow(x,n); &#125;&#125;var pow2 = creat_pow(2); // æ³¨æ„è¿™é‡Œå‚æ•°æ˜¯ï¼šå¹‚æ¬¡ï¼Œè¿”å›è®¡ç®—æŒ‡å®šå¹‚æ¬¡å‡½æ•°var pow3 = creat_pow(3);pow2(5); // 25 æ³¨æ„è¿™é‡Œå‚æ•°æ˜¯ï¼šå˜é‡xï¼Œå³é—­åŒ…é‡Œéšè—çš„å±€éƒ¨å˜é‡xï¼Œè®¡ç®—å®ƒçš„æŒ‡å®šå¹‚æ¬¡pow3(5); // 125 åœ¨è¿™é‡Œæˆ‘ä»¬è¿˜å¯ä»¥çœ‹åˆ°ï¼Œé—­åŒ…å‡½æ•°pow éšè—ä¸€ä¸ªçŠ¶æ€ï¼šå˜é‡x ï¼Œå³pow å†…éƒ¨è¿”å›çš„åŒ¿åå‡½æ•°å±€éƒ¨å˜é‡å‚æ•°x ã€‚ä»è€ŒæŠŠä¸€ä¸ªå¤šå‚æ•°å‡½æ•°ï¼Œå˜ä¸ºå•å‚æ•°å‡½æ•°ã€‚ åˆæœ‰ï¼Œåˆ©ç”¨é—­åŒ…å¿«é€Ÿç”Ÿæˆä¸åŒç±»ä¼¼å‡½æ•°ï¼Œç»™Webè¿›è¡Œäº‹ä»¶ç»‘å®šã€‚ å‚ç…§ï¼šé—­åŒ…çš„åº”ç”¨ â€“ åº”ç”¨äºwebå¼€å‘ æ›´æ·±å…¥ç†è§£ â€œé—­åŒ…â€ éš¾é“é—­åŒ…åªæ˜¯ä¸ºäº†è¿”å›å‡½æ•°è¿›è€Œåˆ›å»ºå‡½æ•°å·¥å‚ OR å‡å°‘å‡½æ•°å‚æ•°å—ï¼Ÿæ€ä¹ˆç†è§£é—­åŒ…æ˜¯æºå¸¦çŠ¶æ€çš„å‡½æ•°ï¼Ÿè¯·çœ‹ä¸‹ä¾‹ï¼š æˆ‘ä»¬çŸ¥é“ï¼Œå‡½æ•°å†…éƒ¨çš„å±€éƒ¨å˜é‡ï¼Œåœ¨å‡½æ•°é€€å‡ºåä¾¿è‡ªåŠ¨æ¶ˆäº¡ï¼š 12345678910111213function creat_counter(initial)&#123; var n = initial; return function() &#123; return n++; &#125;&#125;var c = creat_counter(0); // è¿”å›çš„æ˜¯å‡½æ•°ï¼Œæ•…å¸¦ä¸Š()æ˜¯ä¸ºäº†æ‰§è¡Œç„¶åè¿”å›å‡½æ•°console.log(c()); // 1console.log(c()); // 2console.log(c()); // 3 éå¸¸å¥‡æ€ªçš„æ˜¯ï¼Œä¸ºä»€ä¹ˆè¿™é‡Œçš„å±€éƒ¨å˜é‡ n å®ç°äº†é€’å¢å‘¢ï¼Ÿå˜é‡n ä¸æ˜¯åº”è¯¥åœ¨æ‰§è¡Œï¼švar c = creat_counter(0); åå°±å·²ç»æ¶ˆäº¡äº†å—ï¼Ÿ å…¶å®ï¼šåœ¨è¿”å›çš„å‡½æ•°ä¸­ï¼Œå®ç°äº†ä¸€ä¸ªé—­åŒ…ç¯å¢ƒï¼Œè¯¥é—­åŒ…æºå¸¦äº†å¤–éƒ¨æ— æ³•è®¿é—®çš„å±€éƒ¨å˜é‡x ã€‚ è¿™æ˜¯ç”±äº creat_counter æ˜¯å†…éƒ¨åŒ¿åå­å‡½æ•°çš„çˆ¶å‡½æ•°ï¼Œè€Œcreat_counter è¢«èµ‹å€¼ç»™å…¨å±€å˜é‡ cï¼Œå› æ­¤å…¶å†…éƒ¨å˜é‡n ã€åŒ¿åå­å‡½æ•°éƒ½åœ¨å†…å­˜ä¸­ï¼Œæ²¡æœ‰è¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ã€‚ è¿™æ ·çˆ¶å‡½æ•°å†…éƒ¨ï¼Œå­å‡½æ•°å¤–éƒ¨çš„å±€éƒ¨å˜é‡nï¼Œåœ¨ JavaScript ç±»ä¼¼ç±»çš„ç§æœ‰å˜é‡ã€‚æˆ‘ä»¬è¿˜å¯ä»¥è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œçœ‹èµ·æ¥æ›´åƒæ˜¯ ç±»å¯¹è±¡è°ƒç”¨æ–¹æ³•ã€‚ å®ç°ç±»ä¼¼classæœºåˆ¶å°è£…ç§æœ‰å˜é‡çš„ä¸€ä¸ªç®€å•è®¡æ•°å™¨ã€‚ 1234567891011121314151617function creat_counter(initial)&#123; var n = initial; // çœ‹èµ·æ¥å°±æ˜¯ä¸€ä¸ªç§æœ‰å˜é‡ï¼Œå¤–éƒ¨æ— æ³•è®¿é—® function increase() &#123; return n++; &#125; // è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢æœ‰incå±æ€§ï¼Œè¿™æ ·è°ƒç”¨èµ·æ¥åƒæ˜¯å¯¹è±¡è°ƒç”¨æ–¹æ³•ã€‚ // æ³¨æ„ inc:f2() é”™è¯¯ï¼Œå¸¦()æ˜¯æ‰§è¡Œå‡½æ•° return &#123;inc:increase&#125;; &#125;var c = creat_counter(0); // è¿”å›çš„æ˜¯å¯¹è±¡ï¼Œå¸¦ä¸Š()æ˜¯ä¸ºäº†æ‰§è¡Œå‡½æ•°åè¿”å›å¯¹è±¡// çœ‹èµ·æ¥åƒæ˜¯å¯¹è±¡è°ƒç”¨æ–¹æ³•c.inc(); // 1c.inc(); // 2c.inc(); // 3 å°å¿ƒï¼è¿”å›å‡½æ•°ä¸ç«‹å³æ‰§è¡Œ æˆ‘ä»¬éœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼Œé—­åŒ…è¿”å›çš„ å‡½æ•°fun å¹¶ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯ç›´åˆ°è°ƒç”¨ å‡½æ•°fun() æ‰ä¼šæ‰§è¡Œã€‚ è¿™æ ·ï¼Œåœ¨æˆ‘ä»¬è¿”å›å‡½æ•°å¼•ç”¨ä»»ä½•åç»­ä¼šå‘ç”Ÿçš„å˜é‡éƒ½ä¼šäº§ç”Ÿæ„æ–™ä¹‹å¤–ç»“æœï¼Œæ¯”å¦‚å¾ªç¯å˜é‡ï¼š 12345678910function count() &#123; var arr = []; // å®šä¹‰ä¸€ä¸ªæ•°ç»„ï¼Œç”¨äºå‹å…¥ä¸‰ä¸ªå‡½æ•° for (var i=1; i&lt;=3; i++) // å¾ªç¯å‹å…¥ä¸€ä¸ªåŒ¿åå‡½æ•°è®¡ç®—å½“å‰i^2ï¼šç”¨ç®­å¤´å‡½æ•°ç®€å†™ arr.push( () =&gt; &#123; return i * i &#125;); return arr;&#125;var results = count();var f1 = results[0]; var f2 = results[1]; var f3 = results[2]; å½“æˆ‘ä»¬å°è¯•æ‰§è¡Œ f1()ã€ f2()ã€ f3() ä¼šå‘ç°ä¸€ä¸ªå‡ºäººæ„æ–™çš„ç»“æœï¼š 123f1(); // 16f2(); // 16f3(); // 16 å…¨éƒ½æ˜¯16ï¼è¿™æ˜¯å› ä¸ºï¼Œç”±äºå˜é‡æå‡ï¼Œå¾ªç¯å±€éƒ¨å˜é‡ i å·²ç»æ˜¯å‡½æ•°å†…éƒ¨å…¨å±€å˜é‡äº†ã€‚ åŒæ—¶ï¼Œarr.push() å‹å…¥å‡½æ•°æ—¶ï¼Œå‡½æ•°å¹¶æœªç«‹å³æ‰§è¡Œã€‚ç­‰åˆ° return arr æ—¶ï¼Œæ­¤æ—¶å¼•ç”¨çš„å˜é‡i å·²ç»æ‰§è¡Œå®Œ3æ¬¡å¾ªç¯åå˜ä¸º 4 äº†ã€‚ æˆ‘ä»¬æœ‰ä¸¤ç§è§£å†³åŠæ³•ï¼š å¾ªç¯å†…éƒ¨å˜é‡ç”¨ let å…³é”®å­—å£°æ˜ï¼Œè¿™æ ·ç­‰åˆ° return arr æ—¶ï¼Œå‡½æ•°å¼•ç”¨çš„å˜é‡æ˜¯å¯¹åº”å¾ªç¯æ¬¡æ•°å±€éƒ¨å˜é‡ i ã€‚ 12for (let i=1; i&lt;=3; i++) // let arr.push( () =&gt; &#123; return i * i &#125;); å†åˆ›å»ºä¸€ä¸ªå‡½æ•° ç«‹å³æ‰§è¡Œï¼Œç”¨è¯¥å‡½æ•°çš„å‚æ•°ç»‘å®šå¾ªç¯å˜é‡å½“å‰çš„å€¼ï¼Œå‚ç…§ï¼šå»–é›ªå³°æ•™ç¨‹â€“é—­åŒ… 123456789for (var i=1; i&lt;=3; i++) arr.push( ( function (n) &#123; return function () &#123; return n * n;&#125; &#125; )(i) // å½“å‰ièµ‹å€¼ç»™å‡½æ•°å½¢å‚nç«‹å³æ‰§è¡Œ ); ä¸ºä»€ä¹ˆç›´æ¥å‹å…¥åŒ¿åå‡½æ•°ï¼Œè€Œæ˜¯è¦å†…éƒ¨å†è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Ÿ 123456789101112131415161718function count() &#123; var arr = []; // å®šä¹‰ä¸€ä¸ªæ•°ç»„ï¼Œç”¨äºå‹å…¥ä¸‰ä¸ªå‡½æ•° for (var i=1; i&lt;=3; i++) arr.push( ( function (n) &#123; return n * n; // ç›´æ¥è¿”å›å‡ºé”™ï¼Ÿï¼Ÿ &#125; )(i) ); return arr;&#125;var results = count();var f1 = results[0];console.log(f1()); // æŠ¥é”™ï¼š f1 is not a function è¿™æ˜¯å› ä¸ºè¡¨é¢çœ‹arr.push() å‹å…¥çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä½†ç”±äºç«‹å³æ‰§è¡Œï¼Œå®é™…ä¸Šå‹å…¥çš„æ˜¯å‡½æ•°è¿”å›å€¼ï¼æ‰€ä»¥æ‰å¿…é¡»è®¾è®¡å‹å…¥å‡½æ•°è¿”å›å€¼æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚ 2.6 ç®­å¤´å‡½æ•° ç®­å¤´å‡½æ•°å’Œ Lambda è¡¨è¾¾å¼éƒ½ç”¨äºç®€å†™åŒ¿åå‡½æ•°ï¼Œå…¶è¯­æ³•ä¹ŸåŸºæœ¬ç›¸åŒï¼š(parameters) =&gt; &#123; statements; &#125;ã€‚ åŒæ—¶åœ¨æ»¡è¶³ä¸€å®šæ¡ä»¶ä¸‹ï¼Œè¿˜å¯ä»¥è¿›ä¸€æ­¥ç®€å†™ï¼š å‚æ•°ç±»å‹å¯é€‰ ï¼šä¸éœ€è¦å£°æ˜å‚æ•°ç±»å‹ï¼Œç¼–è¯‘å™¨å¯ä»¥ç»Ÿä¸€è¯†åˆ«å‚æ•°å€¼ï¼› åªæœ‰ä¸€ä¸ªå‚æ•° ï¼š å‚æ•° ()å¯é€‰ ä¸»ä½“{}åªæœ‰ä¸€æ¡è¯­å¥ ï¼šæ­¤æ—¶ return å…³é”®å­— &amp; {} ï¼Œå¯ä¸å†™ã€‚æ³¨æ„ ï¼ ä¸»ä½“{} ä¸çœç•¥æ—¶ï¼Œå“ªæ€•åªæœ‰ä¸€æ¡è¯­å¥ï¼Œå‡½æ•°æœ‰è¿”å›å€¼returnå…³é”®å­—ä¸å¯çœï¼ ä¸»ä½“{} çœç•¥æ—¶ï¼Œreturn ä¹Ÿå¿…é¡»çœç•¥ï¼ åˆ©ç”¨ç®­å¤´å‡½æ•°ï¼Œå®ç°ç»™æŒ‡å®šæ•°ç»„æ’åºã€‚ 1234567&#x27;use strict&#x27;var arr = [10, 20, 1, 2];// arr.sort( (x, y) =&gt; x &gt; y ? 1: -1;); // é”™è¯¯ï¼šå‡½æ•°ä½œä¸ºå‚æ•°ä¸è¦åŠ åˆ†å·ï¼arr.sort( (x, y) =&gt; x &gt; y ? 1: -1 );console.log(arr); // [1, 2, 10, 20] âš ï¸ è¯•ç€æŒ‡å‡ºä¸‹åˆ—ç®­å¤´å‡½æ•°ä¸ºä»€ä¹ˆä¸å¯¹ï¼Ÿ 1arr.sort( (x, y) =&gt; &#123; x &gt; y ? 1: -1; &#125;); // é”™è¯¯å†™æ³• ä¸»ä½“{}åªæœ‰ä¸€æ¡è¯­å¥ï¼Œä¸çœç•¥{}æ—¶ï¼Œè¯­å¥è¦æœ‰åˆ†å· &amp; returnä¸å¯çœï¼ 1arr.sort( (x, y) =&gt; &#123; return x &gt; y ? 1: -1; &#125;); // æ­£ç¡®å†™æ³• ä¼˜é›…çš„è§£å†³ this é”™è¯¯æŒ‡å‘ åœ¨å‰é¢ï¼Œæˆ‘ä»¬æåˆ° JavaScript ä¸€ä¸ªè®¾è®¡é”™è¯¯ï¼Œåœ¨åµŒå¥—å‡½æ•°å†…éƒ¨ this ä¼šæŒ‡å‘å…¨å±€å¯¹è±¡window (ä¸¥æ ¼æ¨¡å¼ä¸‹æŒ‡å‘ undefined) è€Œéè°ƒç”¨å‡½æ•°çš„å¯¹è±¡ï¼ä¸ºæ­¤æˆ‘ä»¬æå‡ºä¸€ç§è§£å†³åŠæ³•ï¼šåœ¨åµŒå¥—å‡½æ•°é‡Œæ•è·thisã€‚ 12345678910111213141516171819var hwh = &#123; birth: 1996, gender: &#x27;M&#x27;, school: &#x27;chongqingU&#x27;, age:function() &#123; // æ•è·thisï¼Œæ­¤æ—¶thisä¸åœ¨åµŒå¥—å‡½æ•°å†…éƒ¨è¿˜æ˜¯æŒ‡å‘è°ƒç”¨å¯¹è±¡ var that = this; function getAge() &#123; var nowYear = new Date().getFullYear(); return nowYear - this.birth; // è°ƒç”¨å¯¹è±¡é‡Œå±æ€§ï¼Œä¸ç”¨thisä¼šæŠ¥é”™ &#125; return getAge(); &#125;&#125;console.log(hwh.age()); // è¾“å‡ºï¼š23 ç°åœ¨æˆ‘ä»¬å¯ä»¥ç®­å¤´å‡½æ•°æ›´åŠ ä¼˜é›…çš„è§£å†³this æŒ‡å‘é”™è¯¯é—®é¢˜ã€‚ 1234567891011121314var hwh = &#123; birth: 1996, gender: &#x27;M&#x27;, school: &#x27;chongqingU&#x27;, age:function() &#123; // æ— éœ€æ•è·thisï¼Œæ­¤æ—¶thisä¹Ÿèƒ½æ­£ç¡®æŒ‡å‘è°ƒç”¨æ–¹æ³•çš„å¯¹è±¡ var getAge = () =&gt; new Date().getFullYear() - this.birth; return getAge(); // æ³¨æ„ï¼šè¿”å›ä¸æ˜¯å‡½æ•°ï¼Œè€Œæ˜¯è°ƒç”¨åå‡½æ•°å€¼ &#125;&#125;console.log(hwh.age()); // è¾“å‡ºï¼š23 æˆ‘çš„ç†è§£æ˜¯ï¼Œæ­¤æ—¶å·²ç»ä¸æ˜¯åœ¨åµŒå¥—å‡½æ•°å†…éƒ¨è°ƒç”¨this ï¼Œè€Œåœ¨å¤–å±‚å‡½æ•°å†…è°ƒç”¨thisï¼Œä¸ä¼šå‡ºç°this é”™è¯¯æŒ‡å‘é—®é¢˜ã€‚ å› ä¸ºåœ¨å¤–å±‚å‡½æ•°ä½¿ç”¨this æ˜¯å¯ä»¥è‡ªåŠ¨ç»‘å®šåˆ°å½“å‰è°ƒç”¨å‡½æ•°çš„å¯¹è±¡ï¼Œä½†ç›´æ¥åœ¨å¯¹è±¡å†…éƒ¨è°ƒç”¨this è¿˜æ˜¯ä¼šå‡ºé”™ã€‚ è¯•åˆ†æï¼šä¸ºä»€ä¹ˆå¯¹è±¡å†…éƒ¨ç›´æ¥this è°ƒç”¨å±æ€§å‡ºé”™ã€‚ 1234567891011var hwh = &#123; birth: 1996, gender: &#x27;M&#x27;, school: &#x27;chongqingU&#x27;, my_birth: this.birth, age:() =&gt; new Date().getFullYear() - this.birth&#125;console.log(hwh.my_birth); // undefinedconsole.log(hwh.age()); // NaN æ¯”å¦‚è°ƒç”¨ hwh.my_birth ç›¸å½“äºä»¥ä¸‹è¿‡ç¨‹ï¼š 12hwh = new hwh(); hwh.my_birth = this.birth; // æ­¤æ—¶thisæŒ‡å‘äº†å…¨å±€å¯¹è±¡ï¼ hwh.age() è°ƒç”¨é”™è¯¯åŒç†ã€‚é‚£ä¹ˆå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ ç›®å‰é™¤äº†applyã€call æ”¹å˜ this æŒ‡å‘ï¼ˆæ²¡è¯•è¿‡ï¼‰ï¼Œå¯å£°æ˜ä¸€ä¸ªå‡½æ•°åœ¨é‡Œé¢this è°ƒç”¨å¯ä»¥ç»‘å®šåˆ°æ­£ç¡®å¯¹è±¡ã€‚ 1234567891011121314var hwh = &#123; birth: 1996, gender: &#x27;M&#x27;, school: &#x27;chongqingU&#x27;, my_birth: function() &#123; return this.birth; &#125;, age:function() &#123; return () =&gt; new Date().getFullYear() - this.birth; &#125;&#125;console.log(hwh.my_birth); // 1996console.log(hwh.age()); // 23 2.7 generator generator å³ç”Ÿæˆå™¨ï¼Œæ˜¯ES6 æ–°å¼•å…¥æ•°æ®ç±»å‹ï¼Œçœ‹ä¸Šå»åƒä¸€ä¸ªå‡½æ•°ï¼Œä½†å¯ä»¥è¿”å›å¤šæ¬¡ã€‚ 123456789101112function* f(x)&#123; yield x + 1; yield x + 2; yield x + 3;&#125;var myGenerator = f(0);var x1 = myGenerator.next(); console.log(x1); // è¾“å‡ºï¼š&#123; value: 1, done: false &#125;var x2 = myGenerator.next(); console.log(x2); // è¾“å‡ºï¼š&#123; value: 2, done: false &#125;var x3 = myGenerator.next(); console.log(x3); // è¾“å‡ºï¼š&#123; value: 3, done: false &#125;var x4 = myGenerator.next(); console.log(x4); // è¾“å‡ºï¼š&#123; value: undefined, done: true &#125; å®ƒå¤šä¸ªè¿”å›å€¼å¯ä»¥ è®°å½•å‡½æ•°ä¸åŒæ—¶åˆ»çš„æ‰§è¡ŒçŠ¶æ€ï¼Œä»è¯­æ³•ä¸Šçœ‹å’Œå‡½æ•°æœ‰ä»¥ä¸‹å‡ ä¸ªåŒºåˆ«ï¼š åŸºæœ¬å®šä¹‰ï¼šå‡½æ•°æ˜¯function f(x) ï¼Œè€Œç”Ÿæˆå™¨è¦å¤šå‡ºä¸€ä¸ª* ï¼Œfunction* f(x) è¿”å›å€¼ï¼šgenerator ç”Ÿæˆå™¨å¯ä»¥æœ‰å¤šä¸ªè¿”å›å€¼ï¼Œè®°å½•å‡½æ•°ä¸åŒæ—¶åˆ»çŠ¶æ€ ä½¿ç”¨ï¼šç›´æ¥è°ƒç”¨ generator ä¸æ˜¯è¿”å›å€¼ï¼Œè€Œæ˜¯è¿”å› ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡ ï¼Œå¯è°ƒç”¨å®ƒçš„ next() å‡½æ•°æ¥è¾“å‡ºè¿”å›å€¼ã€‚ ç”Ÿæˆå™¨ä¸åŒè¿”å›å€¼ä»¥å¯¹è±¡å½¢å¼ä¿å­˜ï¼š{value : å½“å‰è¿”å›å€¼ï¼Œdone: åˆ¤æ–­æ˜¯å¦å·²ç»è¾“å‡ºå®Œæ¯•} æˆ‘ä»¬è¿˜å¯ä»¥æ›´ç®€æ´ç”¨ forâ€¦of å¾ªç¯æ¥éå†generator è¾“å‡ºï¼š 123456// ä¸‹é¢åœ¨æµè§ˆå™¨é‡Œå¦‚æ˜¯è¾“å‡ºï¼šå¦‚æœç›´æ¥åœ¨VSCodeæ‰“å°ï¼Œè¿˜ä¼šåœ¨ç¬¬ä¸€è¡Œè¾“å‡ºï¼š// Object [Generator] &#123;&#125;for(var x of myGenerator)&#123; console.log(x); // ä¾æ¬¡è¾“å‡ºï¼š1 2 3&#125; é‚£ä¹ˆï¼Œgenerator è¿™ç§å¯ä»¥è¿”å›å¤šä¸ªå€¼ï¼Œè®°å½•ä¸åŒæ—¶åˆ»æ‰§è¡ŒçŠ¶æ€çš„&quot;å‡½æ•°&quot;æœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿè¯·çœ‹ä¸‹ä¾‹ï¼š è¯•ç€ç¼–å†™ä¸€ä¸ªä»¥ 0ã€1 å¼€å¤´çš„æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼š0 1 1 2 3 5 8 13 21 34 â€¦ æŒ‰ç…§ä»¥å‰æ€è·¯ï¼Œæˆ‘ä»¬è‹¥è¦è¿”å›è¯¥æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œå¿…é¡»è¦ç”¨ æ•°ç»„ä¿å­˜å¤šä¸ªå€¼ ï¼Œä¸”çœ‹æ›´ä¼˜é›…çš„generator å¦‚ä½•åšåˆ°ï¼š 1234567891011121314151617181920function* fib(x)&#123; var a = 0, b = 1, c = -1; yield a; // è¿”å› 0 yield b; // è¿”å› 1 while(c &lt; x) &#123; c = a + b; [a,b] = [b,c]; yield c; &#125;&#125;var myGenerator = fib(5);for(var x of myGenerator)&#123; console.log(x); // ä¾æ¬¡è¾“å‡ºï¼š0 1 1 2 3 5&#125; generator ä¸ç”¨æ•°ç»„æ¥ä¿å­˜æ¯æ¬¡å¾ªç¯è®¡ç®—çš„å€¼ï¼Œè€Œæ˜¯ç›´æ¥å°†å½“å‰è®¡ç®—å€¼çš„å€¼ yield è¿”å›å³å¯ã€‚ generator ç®€åŒ– AJAX ï¼ˆå¾…ï¼‰ ç¬¬ä¸‰ç« ï¼šæ ‡å‡†å¯¹è±¡ 3.1 å°åŸå°‘å¹´å¯¹è±¡ä¸å‘ typeof åœ¨ JavaScript çš„ä¸–ç•Œé‡Œï¼Œä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡ï¼Œä½ å–œæ¬¢ä½†ä¸å–œæ¬¢ä½ çš„å§‘å¨˜ä¹Ÿæ˜¯ã€‚ typeof æ“ä½œç¬¦è·å–å¯¹è±¡çš„ç±»å‹ï¼Œå®ƒæ€»æ˜¯è¿”å›ä¸€ä¸ª å­—ç¬¦ä¸²ã€‚ 1234567891011121314151617// 1.å­—ç¬¦ä¸²ã€æ•°å€¼ã€å¸ƒå°”åŸºæœ¬ç±»å‹typeof 123; // &#x27;number&#x27;typeof true; // &#x27;boolean&#x27;typeof &#x27;str&#x27;; // &#x27;string&#x27;// 2.å‡½æ•°typeof Math.abs; // &#x27;function&#x27;// 3.é¢„è®¾ç‰¹æ®Šå€¼typeof NaN; // &#x27;number&#x27;typeof undefined; // &#x27;undefined&#x27;typeof null; // &#x27;object&#x27;// 4.[] &#123;&#125; ?typeof []; // &#x27;object&#x27;typeof &#123;&#125;; // &#x27;object&#x27; æ ¹æ®åˆ©ç”¨ tepeof æ¥åˆ¤æ–­ä¸€äº›å˜é‡ã€‚æ¯”å¦‚ï¼š åˆ¤è¯»å…¨å±€å˜é‡ã€å±€éƒ¨å˜é‡æ˜¯å¦å­˜åœ¨ã€‚ åˆ¤æ–­å…¨å±€å˜é‡æ˜¯å¦å­˜åœ¨ï¼štypeof window.myVar === 'undefined' åˆ¤æ–­å±€éƒ¨å˜é‡æ˜¯å¦å­˜åœ¨ï¼štypeof myVar === 'undefined' ã€‚ åˆ¤æ–­æ˜¯å¦ nullã€Array ã€‚ æˆ‘ä»¬ä»ä¸Šä¹ŸçŸ¥é“ï¼Œtypeof æ— æ³•åˆ¤æ–­å‡ºæ˜¯å¦ nullã€Array (å®ƒä»¬å’Œ []ã€ {} éƒ½æ˜¯ objectç±»å‹)ï¼Œä½†å¯ä»¥ï¼š åˆ¤æ–­ null ï¼š å˜é‡ === nullï¼› åˆ¤æ–­ Arrayï¼šArray.isArray(arr); åŒ…è£…å¯¹è±¡ å’Œ java ç±»ä¼¼ï¼ŒJavaScript è¿˜æä¾›äº†åŒ…è£…å¯¹è±¡ï¼Œæ¯”å¦‚ int å¯å°è£…è½¬æ¢ä¸º integer ç±»å‹å¯¹è±¡ã€‚ 1234// å°è£…è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡var n = new Number(123) ; console.log(n); // è¾“å‡ºï¼š[Number: 123]var b = new Boolean(true); console.log(b); // è¾“å‡ºï¼š[Boolean: true]var s = new String(&#x27;str&#x27;); console.log(s); // è¾“å‡ºï¼š[String: &#x27;str&#x27;] ä½†æ˜¯æ³¨æ„ï¼šåŒ…è£…å¯¹è±¡çœ‹ä¸Šå»å€¼å’ŒåŸæ¥ä¸€æ ·ä½†æ˜¯å·²ç»æ˜¯ object ç±»å‹ï¼ 12345678console.log(typeof n); // è¾“å‡ºï¼šobject console.log(typeof b); // è¾“å‡ºï¼šobjectconsole.log(typeof s); // è¾“å‡ºï¼šobject// å’Œæ­¤å‰ä¸åŒï¼console.log(typeof 123); // è¾“å‡ºï¼šnumberconsole.log(typeof true); // è¾“å‡ºï¼šbooleanconsole.log(typeof &#x27;str&#x27;); // è¾“å‡ºï¼šstring 3.2 Date Dateå¯¹è±¡ç”¨æ¥è¡¨ç¤ºæ—¥æœŸå’Œæ—¶é—´ï¼Œæœ‰ä»¥ä¸‹ä¸‰ç§åˆ›å»ºå…¶å¯¹è±¡æ–¹å¼ã€‚ 12345678910111213141516171819// 1.é»˜è®¤æ„é€ å‡½æ•°// ç”¨nowå¯¹è±¡è·å–çš„æ—¶é—´å§‹ç»ˆæ˜¯[å½“å‰æœ€æ–°]æ—¶é—´// è¾“å‡ºçš„æ˜¯UTCæ—¶é—´ï¼Œä¸æœ¬åœ°æ—¶é—´ç›¸å·®8ä¸ªå°æ—¶var now = new Date(); console.log(now); // è¾“å‡ºï¼š2019-07-23T08:25:35.884Z// 2.æŒ‡å®šæ—¥æœŸå’Œæ—¶é—´æ„å»º// é»˜è®¤å‚æ•° = 0var date = new Date(2019,6,23,16,20,30,123);console.log(date); // è¾“å‡ºï¼š2019-07-23T16:20:30.123Z// 3.æŒ‡å®šæ—¶é—´æˆ³åˆ›å»º// å…ˆå°†ç¬¦åˆ[ISO 8601æ ¼å¼]å­—ç¬¦ä¸²---&gt;æ—¶é—´æˆ³var timeStamp = Date.parse(&#x27;2019-07-23T16:20:30.123&#x27;);console.log(timeStamp); // è¾“å‡ºï¼š1563870030123ï¼Œè¿™æ˜¯ä¸€ä¸ªæ—¶é—´æˆ³// è½¬æ¢ä¸ºDateå¯¹è±¡var date = new Date(timeStamp);console.log(date); // è¾“å‡ºï¼š2019-07-23T16:20:30.123Z å¸¸ç”¨çš„è·å–æ—¶é—´å„ç§ä¿¡æ¯å¯¹è±¡æ–¹æ³•ï¼š 12345678910111213141516var now = new Date();now; // 2019-07-23T08:47:48.033Z// å¯¹è±¡æ–¹æ³•now.getFullYear(); // 2019, å¹´ä»½now.getMonth(); // 6, æœˆä»½ï¼Œæ³¨æ„æœˆä»½èŒƒå›´æ˜¯0~11ï¼Œ6è¡¨ç¤º7æœˆnow.getDate(); // 23, 24å·now.getDay(); // 2, æ˜ŸæœŸäºŒnow.getHours(); // 16, 24å°æ—¶åˆ¶now.getMinutes(); // 47, åˆ†é’Ÿnow.getSeconds(); // 48, ç§’now.getMilliseconds(); // 033, æ¯«ç§’æ•°now.getTime(); // 1563871956469, æ—¶é—´æˆ³// é™æ€æ–¹æ³•console.log(Date.now()); // è¾“å‡ºï¼š1563871956469 æ—¶åŒºé—®é¢˜ æˆ‘ä»¬çœ‹åˆ°ä¸Šé¢è¾“å‡ºçš„æ—¶é—´ï¼Œå¹¶ä¸æ˜¯æˆ‘ä»¬æœ¬åœ°æ—¶é—´ï¼Œè€Œæ˜¯UTCæ—¶é—´å’Œæœ¬åœ°ç›¸å·®8ä¸ªå°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è¾“å‡ºæœ¬åœ°æ—¶é—´ã€‚ 12345678910// 1.ç›´æ¥å°†å½“å‰æ—¶é—´è½¬ä¸ºæœ¬åœ°æ—¶é—´console.log(now.toLocaleString()); // è¾“å‡ºï¼š2019-7-23 5:10:21 PM// 2.è·å–æ—¶é—´æˆ³ï¼Œç„¶åè¿›è¡Œæ—¶åŒºè½¬æ¢// é™æ€ORåŠ¨æ€æ–¹æ³•è·å–æ—¶é—´æˆ³var timeStamp = Date.now(); // æˆ–è€… var timeStamp = new Date().getTime();// ç›´æ¥ç”¨æ—¶é—´æˆ³æ„å»ºå¯¹è±¡var date = new Date(timeStamp);console.log(date.toLocaleString()); // è¾“å‡ºï¼š2019-7-23 5:10:21 PM 3.3 RegExpï¼ˆå¾…ï¼‰ RegExp æ˜¯ä¸“é—¨ç”¨äºæ­£åˆ™è§£æçš„ç±»ï¼Œé¦–å…ˆæˆ‘ä»¬è¦å¯¹æ­£åˆ™è¡¨è¾¾å¼ç†Ÿæ‚‰ã€‚ æ­£åˆ™è¡¨è¾¾å¼ 3.4 JSON JSON æ˜¯ JavaScript Object Notation çš„ç¼©å†™ï¼Œå®ƒæ˜¯ä¸€ç§æ•°æ®äº¤æ¢æ ¼å¼ï¼Œå®é™…ä¸Šä¹Ÿæ˜¯ JavaScript çš„ä¸€ä¸ªå­é›†ã€‚ å…¶æ”¯æŒçš„æ•°æ®ç±»å‹æœ‰ï¼š objectï¼šå³JavaScript çš„&#123; ... &#125;è¡¨ç¤ºæ–¹å¼ (å¯åµŒå¥—) numberã€booleanã€ stringã€nullã€arrayï¼šå’Œ JavaScript ä¸­å¯¹åº”ç±»å‹å®Œå…¨ä¸€è‡´ json æ•°æ®å¯ä»¥æ˜¯ä¸Šé¢æ”¯æŒæ•°æ®ç±»å‹ ä»»æ„ä¸€ä¸ªæˆ–å¤šä¸ªç»„åˆ ï¼Œè€Œä¸æ˜¯åªèƒ½åœ¨object {â€¦} åŒ…å«é”®å€¼å¯¹å½¢å¼ ã€‚ è§‚å¯Ÿä¸‹é¢ json æ ¼å¼æ•°æ®{â€¦}å’Œ js å¯¹è±¡{â€¦}æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ 1234567891011// ç»„åˆæˆjsonæ ¼å¼æ•°æ®&#123; &quot;birth&quot;: 1996, &quot;gender&quot;: &quot;M&quot;, &quot;school&quot;: &quot;chongqingU&quot;, &quot;skills&quot;: [ &quot;3C&quot;, &quot;python&quot;, &quot;2j&quot; ]&#125; åªè¦æ˜¯å­—ç¬¦ä¸²ï¼Œå¦‚é”®å€¼å¿…é¡»ç”¨åŒå¼•å· â€˜â€™ â€˜â€™ è€Œä¸” json è¿˜è§„å®šå­—ç¬¦é›†å¿…é¡»æ˜¯ UTF-8ï¼Œè¿™æ ·å¯ä»¥æ”¯æŒå¤šè¯­è¨€äº†ã€‚ json å’Œ js å¯¹è±¡/æ•°ç»„/å­—ç¬¦ä¸²ï¼ˆjsonæ”¯æŒï¼‰ç­‰ å¯ä»¥äº’ç›¸è½¬æ¢ï¼Œè¿™åˆç§°ä¸ºåºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚ åºåˆ—åŒ– å°†JavaScript æ•°æ®ç±»å‹è½¬æ¢ä¸º json ç§°ä¹‹ä¸ºåºåˆ—åŒ–ã€‚å¦‚ä¸‹é¢æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼š 12345678var hwh = &#123; birth: 1996, gender: &#x27;M&#x27;, school: &#x27;chongqingU&#x27;, skills: [&#x27;3C&#x27;,&#x27;python&#x27;,&#x27;2j&#x27;], age:function()&#123; return new Date().getFullYear() - this.birth; &#125;&#125; åœ¨ JavaScript å†…ç½®äº† json APIï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨ JSON.stringify()æ¥è½¬æ¢ä¸º json æ ¼å¼ï¼š 12345// @valueï¼šä¼ é€’ä¸€ä¸ªå¯¹è±¡æˆ–è€…æ•°ç»„(?)// @replacer: ä¼ é€’ä¸€ä¸ªæ–¹æ³•ç”¨æ¥æ”¹å˜ç»“æœæ˜¾ç¤ºï¼Œæˆ–è€…ä¼ é€’æ•°ç»„ç­›é€‰æŒ‡å®šé”®å€¼// @space : ä¼ é€’ç©ºç™½å­—ç¬¦ç­‰ç”¨æ¥æ ¼å¼åŒ–ç»“æœï¼Œä½¿å¾—ç»“æœæ›´æ˜“è¯»JSON.stringify(hwh,null,&#x27; &#x27;); å°è¯•è¾“å‡ºç»“æœï¼š 12345678910111213141516// è¿”å›å­—ç¬¦ä¸²var s = JSON.stringify(hwh,null,&#x27; &#x27;);console.log(typeof s); // è¾“å‡ºï¼šstringï¼Œè¯´æ˜è½¬æ¢åjsonæ ¼å¼æ•°æ®æ˜¯å­—ç¬¦ä¸²console.log(s);// åºåˆ—åŒ–ç»“æœ&#123; &quot;birth&quot;: 1996, &quot;gender&quot;: &quot;M&quot;, &quot;school&quot;: &quot;chongqingU&quot;, &quot;skills&quot;: [ &quot;3C&quot;, &quot;python&quot;, &quot;2j&quot; ]&#125; ç‰¹åˆ«çš„ï¼Œå…è®¸çš„æ•°æ®ç±»å‹å¦‚æœä¸å±äºjson æ”¯æŒç±»å‹ï¼Œåºåˆ—åŒ–æ—¶ä¸ä¼šæ˜¾ç¤ºè¯¥ç±»å‹ï¼Œå¦‚ å‡½æ•°ageé”®å€¼å¯¹ æ²¡æœ‰æ˜¾ç¤ºã€‚ å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è½¬æ¢å…¶å®ƒjson æ”¯æŒçš„æ•°æ®ç±»å‹ï¼š 123console.log(JSON.stringify(&#x27;str&#x27;)); // è¾“å‡ºï¼š&quot;str&quot;console.log(JSON.stringify(123)); // è¾“å‡ºï¼š123console.log(JSON.stringify(true)); // è¾“å‡ºï¼štrue è¿›ä¸€æ­¥å¤„ç†ï¼šä¼ é€’å‡½æ•° åœ¨å‰ä»‹ç»ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ç¬¬äºŒä¸ªå‚æ•° @replacer å¯¹é”®å€¼å¯¹è¿›è¡Œç­›é€‰ã€æŒ‡å®šå¤„ç†æ–¹æ³•ç­‰ã€‚ ç­›é€‰å‡ºJavaScriptå¯¹è±¡æŒ‡å®šé”®å€¼ï¼šbirthã€genderã€school å¯¹åº”é”®å€¼å¯¹ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¼ é€’ä¸€ä¸ªæ•°ç»„åŒ…å«æˆ‘ä»¬å¸Œæœ›ç•™ä¸‹çš„é”®å€¼ï¼Œæ¥è¾¾åˆ°ç›®çš„ã€‚ 123456789var s = JSON.stringify(hwh,[&#x27;birth&#x27;,&#x27;gender&#x27;,&#x27;school&#x27;],&#x27; &#x27;);console.log(s);// åºåˆ—åŒ–ç»“æœ&#123; &quot;birth&quot;: 1996, &quot;gender&quot;: &quot;M&quot;, &quot;school&quot;: &quot;chongqingU&quot;&#125; 12345678// æ•°ç»„å¥½åƒä¸è¡Œï¼Ÿï¼Ÿvar s = JSON.stringify([&#x27;hwh&#x27;,&#x27;lt&#x27;],[0],&#x27; &#x27;);// åºåˆ—åŒ–ç»“æœ[ &quot;hwh&quot;, &quot;lt&quot;,] å°†æ‰€æœ‰é”®å€¼è½¬æ¢ä¸ºå¤§å†™ã€‚ï¼ˆä¸ºä»€ä¹ˆä¸èƒ½å¯¹é”®å€¼ key å¤§å†™ï¼Ÿåªèƒ½ä¿®æ”¹å±æ€§ï¼Ÿï¼‰ éœ€è¦å¯¹é”®å€¼å¯¹è¿›è¡Œå¤„ç†ï¼Œå¯ä»¥ä¼ é€’ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¼šå¯¹æ‰€æœ‰é”®å€¼å¯¹è¿›è¡Œæ“ä½œã€‚ 123456// ç®­å¤´å‡½æ•°// å¿…é¡»åˆ¤æ–­æ˜¯å¦æ˜¯ stringç±»å‹ï¼Œå› ä¸ºå¦‚birthå±æ€§å°±æ˜¯Number// æ³¨æ„ï¼štypeofè¿”å›Stringç±»å‹å­—ç¬¦ä¸²ï¼// ä¸ºä»€ä¹ˆä¸èƒ½è½¬æ¢é”®å€¼keyä¸ºå¤§å†™ï¼Ÿvar valueToUpper = (key,value) =&gt; typeof value === &#x27;string&#x27; ? value.toUpperCase():value; âš ï¸ ä¼ é€’çš„å‡½æ•°ä»»ä½•æƒ…å†µè¦æœ‰è¿”å›å€¼ï¼æ¯”å¦‚ä¸Šé¢ä¸æ‰“ç®—å¯¹å±æ€§value è¿›è¡Œä¿®æ”¹ä¹Ÿè¦ return value ã€‚ æˆ‘ä»¬å°è¯•è¾“å‡ºç»“æœï¼š 12345678910111213var s = JSON.stringify(hwh,valueToUpper,&#x27; &#x27;);console.log(s);&#123; &quot;birth&quot;: 1996, &quot;gender&quot;: &quot;M&quot;, &quot;school&quot;: &quot;CHONGQINGU&quot;, &quot;skills&quot;: [ &quot;3C&quot;, &quot;PYTHON&quot;, &quot;2J&quot; ]&#125; ååºåˆ—åŒ– æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨ JSON.parse() å°† json æ ¼å¼å­—ç¬¦ä¸²è§£æè½¬æ¢ä¸º javaScriptå¯¹è±¡ ã€‚ 123456789// 1.ååºåˆ—åŒ–å¯¹è±¡ JSON.parse(&#x27;&#123;&quot;name&quot;:&quot;hwh&quot;, &quot;age&quot;:23&#125;&#x27;); // Object &#123;name: &#x27;hwh&#x27;, age: 23&#125;// 2.ååºåˆ—åŒ–æ•°ç»„JSON.parse(&#x27;[1,2,3,true]&#x27;); // [1, 2, 3, true]// 3.ååºåˆ—åŒ–å…¶å®ƒåŸºæœ¬ç±»å‹JSON.parse(&#x27;true&#x27;); // trueJSON.parse(&#x27;123.45&#x27;); // 123.45 âš ï¸ è¦è§£æçš„ json æ•°æ®ä¸€å®šè¦æ˜¯å­—ç¬¦ä¸²ï¼ 1234567// 1.å°è¯•è§£æå¯¹è±¡ï¼Ÿvar hwh = &#123;&quot;name&quot;:&quot;hwh&quot;, &quot;age&quot;:23&#125;; // è¿™æ—¢ä¸æ˜¯å¯¹è±¡ï¼ˆé”®å€¼æœ‰&quot;&quot;ï¼‰ï¼Œä¹Ÿä¸æ˜¯å­—ç¬¦ä¸²console.log(JSON.parse(hwh)); // è§£æé”™è¯¯// 2.å°è¯•è§£ææ•°ç»„ï¼Ÿvar arr = [1,2,3,true];console.log(JSON.parse(arr)); // è§£æé”™è¯¯ è¿›ä¸€æ­¥å¤„ç†ï¼šä¼ é€’å‡½æ•° äº‹å®ä¸ŠJSON.parse() æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œè¿˜å¯ä¼ ç¬¬äºŒä¸ªå‡½æ•°å‚æ•° @reviver å¯¹json å­—ç¬¦ä¸²è¿›è¡Œå¤„ç†ï¼š æŠŠä¼ é€’è¿›æ¥çš„json å­—ç¬¦ä¸²ï¼Œé”®å€¼nameå¯¹åº”å±æ€§ååŠ ä¸Šâ€œåŒå­¦â€ã€‚ 123456789101112131415// ååºåˆ—åŒ–ï¼šjsonå­—ç¬¦ä¸²è½¬æ¢ä¸ºå¯¹è±¡// JSON.parse(@text,@reviver)// @textï¼šä¼ é€’åˆæ³•jsonå­—ç¬¦ä¸²// @reviverï¼šä¼ é€’ä¸€ä¸ªå‡½æ•°æ”¹å˜è¾“å‡ºç»“æœvar json_hwh = &#x27;&#123;&quot;name&quot;:&quot;hwh&quot;, &quot;age&quot;:23&#125;&#x27;;var addSome = function(key,value)&#123; if(key === &quot;name&quot;) return value + &#x27;åŒå­¦&#x27;; // å¯¹valueè¿›è¡Œä¿®æ”¹ else return value; // æ˜“é”™ï¼šå…¶å®ƒæƒ…å†µä¹Ÿä¸€å®šè¦æœ‰è¿”å›å€¼ï¼å¦åˆ™æœ€åè§£æä¸ºundefinedçš„ï¼&#125;var obj = JSON.parse(json_hwh,addSome); å°è¯•è¾“å‡ºç»“æœï¼š 1234console.log(obj);// ååºåˆ—åŒ–ç»“æœ&#123; name: &#x27;hwhåŒå­¦&#x27;, age: 23 &#125; ç¬¬å››ç« ï¼šé¢å¯¹å¯¹è±¡ç¼–ç¨‹ 4.1 åœ¨ JS ä¸–ç•Œé¢å¯¹å¯¹è±¡ JavaScript æ‰€æœ‰æ•°æ®éƒ½å¯ä»¥çœ‹æˆå¯¹è±¡ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¹‹å‰ä½¿ç”¨ï¼šNumberã€Arrayã€string &amp; åŸºæœ¬çš„**{â€¦} **å®šä¹‰çš„å¯¹è±¡ã€‚ ä½†è¿™å¹¶æ²¡æœ‰çœŸæ­£å‘æŒ¥é¢å¯¹å¯¹è±¡ç¼–ç¨‹å¨åŠ›ã€‚ ç†Ÿæ‚‰ javaã€C# çš„ä½ ä¸€å®šçŸ¥é“ï¼šç±» &amp; å®ä¾‹ä¹‹é—´åŒºåˆ«ï¼Œå°±æ˜¯æ¨¡æ¿ä¸åˆ›å»ºçš„å®ä¾‹å¯¹è±¡ã€‚BUT ï¼Œåœ¨JavaScript ä¸­å¹¶æ²¡æœ‰ç±»å’Œå®ä¾‹æ¦‚å¿µï¼Œåœ¨JavaScript ä¸–ç•Œé‡Œæ˜¯é€šè¿‡ åŸå‹ï¼ˆprototypeï¼‰ ç­‰æ–¹å¼å®ç°çš„ã€‚ 1.åˆ›å»ºå¯¹è±¡ é—²çš„è›‹ç–¼çš„ä½ æƒ³åˆ›å»ºä¸€ä¸ªhwhå¯¹è±¡ï¼Œä»–ä¼šå”± ã€è·³ã€rapã€å–œæ¬¢æ‰“ç¯®çƒï¼Œåˆæ‡’å¾—9ç‚¹é’Ÿéƒ½ä¸ä¸€å®šèµ·åºŠçš„ä½ æ°å¥½çœ‹åˆ°ä½ ä¹‹å‰åˆ›å»ºçš„ä¸€ä¸ªstudentå¯¹è±¡ï¼š 12345678910var student = &#123; name : &quot;å°æ˜&quot;, age: 18, school: &quot;chongqingU&quot;, sing: function () &#123; console.log(&quot;i am sing..&quot;); &#125;&#125; å¯æ˜¯hwh ä¸å«å°æ˜ï¼Œä¹Ÿä¸æ˜¯18å²å•Šï¼æ›´é‡è¦çš„å°æ˜ä»–å±…ç„¶ä¸ä¼šè·³ã€rapã€ğŸ€ï¼ ç†Ÿæ‚‰åŸå‹é“¾çš„ä½ å¾®å¾®ä¸€ç¬‘ï¼Œä¸æ…Œä¸å¿™çš„åˆ›å»ºäº†ä¸€ä¸ªhwh å¯¹è±¡ï¼š 123456789101112131415161718var hwh = &#123; name: &quot;huangwanghui&quot;, age: 23, // å¯¹è±¡å¢åŠ é¢å¤–æ–¹æ³• jump: function() &#123; console.log(&quot;i am jump..&quot;); &#125;, rap: function() &#123; console.log(&quot;i am rap..&quot;); &#125;, play_basketball: function() &#123; console.log(&quot;i am playing basketball ..&quot;); &#125;&#125; ç„¶åæŠŠhwh._proto_ å±æ€§æŒ‡å‘studentï¼Œçœ‹ä¸Šå»å¥½åƒç»§æ‰¿äº†studentï¼š 1234567hwh.__proto__ = student; // æ³¨æ„ï¼šprotoå·¦å³å„æœ‰ä¸¤ä¸ª_ï¼Œä¸æ˜¯ä¸€ä¸ªï¼console.log(&quot;å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ¸£æ¸£è¾‰ :&quot; + hwh.name);hwh.sing(); // å”±ï¼ši am sing..hwh.jump(); // è·³ï¼ši am jump..hwh.rap(); // rapï¼ši am rap..hwh.play_basketball(); // æ‰“ç¯®çƒï¼ši am playing basketball .. é€šè¿‡åŒåé”®å€¼å¯ä»¥è¦†ç›–studentåŸæœ‰é”®å€¼ï¼Œé€šè¿‡åˆ›å»ºæ–°é”®å€¼å¯¹å¯ä»¥ä½¿å¾—hwh å¯ä»¥è·³ã€rapã€æ‰“ç¯®çƒã€‚ æ‰©å±•äº†è§£ ä¸ºä»€ä¹ˆè¿™ç§æ–¹å¼çœ‹ä¸Šå»å¥½åƒ â€œç»§æ‰¿â€äº† student å±æ€§ï¼Ÿ å› ä¸ºåœ¨JavaScript ä¸­ï¼Œå®ä¾‹å¯¹è±¡hwhå¦‚æœæ²¡æœ‰æ‰¾åˆ°å±æ€§ã€æ–¹æ³•å®ƒä¼šè‡ªåŠ¨åœ¨å…¶ hwh._proto_ å¯¹è±¡å±æ€§ä¸­æŸ¥æ‰¾ï¼ˆ_proto_ æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼‰ã€‚è¿™ä¸ªæ—¶å€™æŠŠå¯¹è±¡student èµ‹å€¼ hwh._proto_ ï¼Œé‚£ä¹ˆå°±ä¼šè‡ªåŠ¨æŸ¥æ‰¾å¯¹è±¡ student å±æ€§ã€‚ âš ï¸ _proto_ æ˜¯æ¯ä¸€ä¸ªå¯¹è±¡æˆ–å‡½æ•°éƒ½æœ‰çš„å±æ€§ï¼ˆé»˜è®¤æŒ‡å‘ Object.prototypeï¼‰ï¼Œä½†æ˜¯å‡½æ•°è¿˜æœ‰ prototype å±æ€§ã€‚ æ‰€ä»¥hwh._proto_ ï¼ˆä¹Ÿå°±æ˜¯å¯¹è±¡student ï¼‰ä¸­ä¹Ÿæœ‰è¿™ä¸ªå±æ€§ï¼š æ­¤æ—¶æŸ¥æ‰¾çš„åŸå‹é“¾ä¸ºï¼š å¦‚æœæ˜¯ç”¨åé¢ä»‹ç» æ„é€ å‡½æ•°åˆ›å»ºhwhå¯¹è±¡æ–¹å¼ ï¼Œå…¶æŸ¥æ‰¾åŸå‹é“¾ä¸ºï¼š Object.create()åˆ›å»ºå¯¹è±¡ é€šå¸¸åœ¨å†™ JavaScript ä»£ç ï¼Œä¸æ¨è ä½¿ç”¨ å¯¹è±¡å.__proto__ æ–¹å¼æ”¹å˜å¯¹è±¡åŸå‹ã€‚ æˆ‘ä»¬åº”è¯¥ç”¨ Object.create(å¯¹è±¡o) åˆ›å»ºä¸€ä¸ªåŸºäºå¯¹è±¡o åŸå‹æ–°å¯¹è±¡ï¼š ç”¨Object.create() æ–¹å¼åˆ›å»ºåŸºäºåŸå‹student çš„å¯¹è±¡hwh ï¼Œç›¸å½“ å¤åˆ¶ äº†studentå¯¹è±¡ã€‚ 1234567891011121314// åŸºäºåŸå‹studentåˆ›å»ºå¯¹è±¡hwhvar hwh = Object.create(student);// å¯¹è±¡ä¿®æ”¹å±æ€§hwh.name = &#x27;huangwanghui&#x27;;hwh.age = 23;// å¯¹è±¡å¢åŠ æ–¹æ³•hwh.jump = () =&gt; console.log(&quot;i am jump..&quot;);hwh.rap = () =&gt; console.log(&quot;i am rap..&quot;);hwh.play_basketball = () =&gt; console.log(&quot;i am playing basketball ..&quot;);// æµ‹è¯•è°ƒç”¨console.log(hwh.name); // è¾“å‡ºï¼šhuangwanghuihwh.jump(); // è¾“å‡ºï¼ši am jump.. æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡ å‰é¢æˆ‘ä»¬ä»‹ç»äº†ä¸¤ç§åŸºäºstudentåŸå‹åˆ›å»ºhwh å¯¹è±¡æ–¹å¼ï¼šå…¶ä¸­ hwh.__proto___ = student è¿™ç§åˆ›å»ºå¯¹è±¡æ–¹å¼ï¼Œæˆ‘ä»¬ä¸æ¨èä¿®æ”¹å®ä¾‹hwh çš„*_proto__* å±æ€§ã€‚ è€Œä¸”æˆ‘ä»¬çŸ¥é“ï¼Œæ­¤å‰student éƒ½æ˜¯å¯¹è±¡ï¼š 1234567891011// åŸå‹å¯¹è±¡studentvar student = &#123; name : &quot;å°æ˜&quot;, age: 18, school: &quot;chongqingU&quot;, sing: function () &#123; console.log(&quot;i am sing..&quot;); &#125;&#125; æˆ‘ä»¬æŠŠstudent æ”¹å†™æˆä¸€ä¸ªå‡½æ•°ï¼š 1234567891011// æ„é€ å‡½æ•°Studentfunction Student(name,age,school) // æ„é€ å‡½æ•°é¦–å­—æ¯å»ºè®®å¤§å†™&#123; this.name = name; this.age = age, this.school = school, this.sing = function () // å¿…é¡»å…¨éƒ¨ç”¨thiså¼•ç”¨å‡½æ•°å†…éƒ¨å˜é‡ &#123; console.log(&quot;i am sing..&quot;); &#125;&#125; å‡½æ•°å†…éƒ¨çœ‹èµ·æ¥å¾ˆåƒå¯¹è±¡é”®å€¼å¯¹å½¢å¼åªä¸è¿‡ é”®å€¼:å±æ€§ å˜ä¸ºï¼šthis.é”®å€¼:å±æ€§ï¼Œç‰¹åˆ«çš„ å‡½æ•°æ‰€æœ‰å˜é‡ï¼ˆâ€œé”®å€¼â€ï¼‰å¿…é¡»ç”¨this å¼•ç”¨ ï¼Œåœ¨å‡½æ•°å†…éƒ¨ï¼ˆéstrict æ¨¡å¼ï¼‰this æŒ‡å‘å…¨å±€å¯¹è±¡window ï¼›new åˆ›å»ºæ–°å¯¹è±¡åï¼Œä¼šè‡ªåŠ¨å°† this æŒ‡å‘åˆ°æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚ è¿™ä¹Ÿå°±æ˜¯æ„é€ å‡½æ•°ï¼Œä½¿ç”¨ new å®ƒä¼šè¿”å›ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼š å®ä¾‹å¯¹è±¡ ç»§æ‰¿æ„é€ å‡½æ•°æ‰€æœ‰å±æ€§ å®ä¾‹å¯¹è±¡ _proto_ å±æ€§è‡ªåŠ¨ç»‘å®šä¸ºæ„é€ å‡½æ•°åŸå‹prototype å±æ€§ã€‚ åŒæ ·ï¼Œè‡ªç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹å¯¹è±¡è¿›è¡Œå¢æ”¹ï¼š 1234567891011// newè¿”å›ä¸€ä¸ªå¯¹è±¡var hwh = new Student(&quot;hwh&quot;,23,&quot;chongqingU&quot;); // å¯¹è±¡å¢åŠ é¢å¤–æ–¹æ³•hwh.jump = () =&gt; console.log(&quot;i am jump..&quot;);hwh.rap = () =&gt; console.log(&quot;i am rap..&quot;);hwh.play_basketball = () =&gt; console.log(&quot;i am playing basketball ..&quot;);// æµ‹è¯•è¾“å‡ºhwh.sing(); // è¾“å‡ºï¼ši am sing..hwh.jump(); // è¾“å‡ºï¼ši am jump.. åŒå‰ï¼Œæ­¤æ—¶åŸå‹é“¾æŸ¥æ‰¾é¡ºåºä¸ºï¼š å¯¹è±¡student åŸå‹å¯¹è±¡prototype ä¼šè‡ªåŠ¨èµ‹å€¼ç»™ hwh._proto_ ï¼ˆstudent.prototype å±æ€§ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼‰ å¦‚æœæ²¡æœ‰åœ¨å®ä¾‹hwh ä¸­æ‰¾åˆ°å±æ€§ã€æ–¹æ³•å°±ä¼šè‡ªåŠ¨åœ¨hwh._proto_ ä¸­æŸ¥æ‰¾ï¼Œç­‰ä»·äºåœ¨ student.prototype æŸ¥æ‰¾ å¯¹è±¡student.prototype åˆæœ‰ä¸ªå¯¹è±¡å±æ€§ student.prototype._proto_ å®ƒè¢«èµ‹å€¼ä¸ºObject åŸå‹Object.prototype å¦‚æœstudent.prototype æ²¡æœ‰æ‰¾åˆ°å±æ€§ï¼Œå°±ä¼šæ¥ç€åœ¨ student.prototype._proto_ ä¸­æŸ¥æ‰¾ï¼ˆç­‰ä»·åœ¨åŸå‹Object.prototype ä¸­æŸ¥æ‰¾ï¼‰ æœ€åè¿˜æœ‰è¿˜æ‰¾åˆ°è¿”å›null 2. åˆè¯†åŸå‹é“¾ å½“æˆ‘ä»¬ç”¨å¯¹è±¡å.xxxè®¿é—®ä¸€ä¸ªå¯¹è±¡å±æ€§æ—¶ï¼ŒJavaScript å¼•æ“æŸ¥æ‰¾é¡ºåºå¦‚ä¸‹ï¼š å…ˆåœ¨å½“å‰å¯¹è±¡ä¸ŠæŸ¥æ‰¾è¯¥å±æ€§ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼› åœ¨å…¶åŸå‹å¯¹è±¡ä¸Šæ‰¾ï¼Œå¦‚æœè¿˜æ²¡æœ‰æ‰¾åˆ°ï¼› ä¸€ç›´ä¸Šæº¯åˆ° Object.prototype --&gt; null ï¼› ä¸Šæº¯åˆ°null è¯´æ˜æœªæ‰¾åˆ°ï¼Œè¿”å› undefined ã€‚ ç­‰ç­‰ï¼Œè¿™é‡ŒåŸå‹é“¾æ˜¯ä»€ä¹ˆï¼Ÿ å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª Array å¯¹è±¡ï¼š 1var arr = [1, 2, 3]; æ•°ç»„ arr å®ƒçš„åŸå‹é“¾æ˜¯ï¼š 1arr ----&gt; Array.prototype ----&gt; Object.prototype ----&gt; null ç”±äº Array.prototype å®šä¹‰äº† indexof() ã€shift() ç­‰æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ åŒç†ï¼Œåˆ›å»ºä¸€ä¸ªå‡½æ•° fun() å…¶åŸå‹é“¾ä¸ºï¼š 1foo ----&gt; Function.prototype ----&gt; Object.prototype ----&gt; null é‚£ä¹ˆå‰é¢ä»¥æ„é€ å‡½æ•°åˆ›å»ºçš„hwhå¯¹è±¡åŸå‹é“¾æ˜¯ï¼Ÿï¼ˆå‚è€ƒ 1.åˆ›å»ºå¯¹è±¡ â€” æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡ ä¸€èŠ‚ï¼‰ æ„é€ å‡½æ•° åˆ›å»ºçš„hwhå¯¹è±¡å…¶åŸå‹é“¾ï¼š 1hwh ----&gt; Student.prototype ----&gt; Object.prototype ----&gt; null æˆ–è€…ç”¨å›¾è¡¨è¾¾ï¼š âš ï¸ è¿™é‡Œ Arrayã€Functionã€Student éƒ½æ˜¯æ„é€ å‡½æ•°ï¼Œå› æ­¤æœ‰prototype å±æ€§ å³å‡½æ•°åŸå‹ï¼ˆè§ä¸‹è¯¦è¿°ï¼‰ã€‚ â€‹ æ³¨ï¼šæ¯ä¸€ä¸ªå¯¹è±¡æˆ–å‡½æ•°éƒ½æœ‰*_proto_*å±æ€§ï¼ˆé»˜è®¤æŒ‡å‘ Object.prototypeï¼‰ï¼Œä½†åªæœ‰å‡½æ•°æ‰æœ‰ prototype å±æ€§ã€‚ ä½¿ç”¨åŸå‹é“¾åŸºæœ¬åŸåˆ™ åŸºæœ¬ä½¿ç”¨åŸå‹é“¾åŸåˆ™ï¼š åŸå‹é“¾ä¸åº”è¯¥è¿‡é•¿ï¼Œè¿™ä¼šåœ¨æŸ¥æ‰¾å¯¹è±¡å±æ€§èŠ±è´¹è¿‡å¤šæ—¶é—´ã€‚ æ„é€ å‡½æ•°åé¦–å­—æ¯åº”è¯¥ä¸ºå¤§å†™ï¼ˆåƒçº¦å®šç±»åé¦–å­—æ¯å¤§å†™ï¼‰ã€‚ 3.æ·±å…¥ç†è§£åŸå‹é“¾ prototype &amp; _proto_ åœ¨å‰æˆ‘ä»¬çŸ¥é“æ„é€ å‡½æ•°ä¹Ÿæ˜¯å¯ä»¥æ‹¥æœ‰å±æ€§çš„ï¼Œprototype æ˜¯åªæœ‰å‡½æ•°æ‰æ‹¥æœ‰çš„å…±æœ‰å±æ€§ã€‚å±æ€§prototype åˆç§°ä¸º å‡½æ•°åŸå‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚ _proto_ æ˜¯æ‰€æœ‰å¯¹è±¡ã€å‡½æ•°éƒ½æœ‰å±æ€§ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒæŒ‡å‘ç”Ÿæˆå®ƒçš„æ„é€ å‡½æ•°åŸå‹prototype å±æ€§ã€‚å› ä¸ºæ‰€æœ‰å¯¹è±¡éƒ½æ´¾ç”Ÿè‡ª Object æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥é»˜è®¤æŒ‡å‘åŸå‹object.prototype å±æ€§ã€‚å¦‚æœæ˜¯é€šè¿‡æ„é€ å‡½æ•°åˆ›å»ºçš„å®ä¾‹å¯¹è±¡ï¼Œåˆ™æŒ‡å‘ç”Ÿæˆå®ƒçš„æ„é€ å‡½æ•°åŸå‹prototype ã€‚ ï¼ˆè€Œprototype ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥ä¸éš¾ç†è§£å®ƒä¹Ÿæœ‰*_proto_*å±æ€§ ï¼šprototype._proto_ï¼‰ åœ¨å‡½æ•°åŸå‹ä¸Šå®šä¹‰çš„æ–¹æ³•ã€å±æ€§ä¼šè¢«æ‰€æœ‰å®ä¾‹â€œç»§æ‰¿â€ï¼Œï¼ˆå‡†ç¡®æ¥è¯´ï¼Œæ„é€ å‡½æ•°new å‡ºçš„å®ä¾‹æ‰ä¼šç»§æ‰¿æ„é€ å‡½æ•°æ‰€æœ‰å±æ€§ï¼Œå‡½æ•°åŸå‹ä¸Šå®šä¹‰çš„æ–¹æ³•ã€å±æ€§åªæ˜¯å¯ä»¥é€šè¿‡åŸå‹é“¾æŸ¥æ‰¾è€Œè¢«ä½¿ç”¨ï¼Œçœ‹ä¸Šå»å¥½åƒâ€œç»§æ‰¿â€äº†ï¼‰ã€‚ å‡½æ•°åŸå‹å¯¹è±¡prototypeä¸»è¦åŒ…å«çš„å±æ€§æ–¹æ³•å¦‚ä¸‹ï¼ˆprototype æ˜¯ä¸€ä¸ªå¯¹è±¡æ‰€ä»¥ä¹Ÿæœ‰å¾ˆå¤šé”®å€¼å¯¹å±æ€§ï¼‰ï¼š åŸå‹æœ¬èº«å®šä¹‰çš„ åŸå‹ å±æ€§ã€æ–¹æ³•ï¼ˆåªæœ‰é€šè¿‡ å‡½æ•°å.prototype.å±æ€§å = æ–¹æ³•/å±æ€§ å®šä¹‰çš„æ‰æ˜¯åŸå‹æ–¹æ³•ã€å±æ€§ ï¼‰ constructor å±æ€§ï¼šæŒ‡å‘æ„é€ å‡½æ•°æœ¬èº« _proto_ å±æ€§ï¼šå’ŒåŸå‹é“¾ä¸Šçº§æ„é€ å‡½æ•°åŸå‹prototypeå±æ€§ç­‰ä»· è¿›ä¸€æ­¥ç†è§£å‡½æ•°åŸå‹å¯¹è±¡ï¼Ÿ æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç©ºæ„é€ å‡½æ•° Student() ï¼š 123456function Student() // æ„é€ å‡½æ•°é¦–å­—æ¯å»ºè®®å¤§å†™&#123; this.name = &quot;hwh&quot;; // [æ³¨1]&#125;Student.prototype.shcool = &quot;chongqingU&quot;; // ç»™Studentå‡½æ•°å¢åŠ å±æ€§ï¼Œè¿™æ ·å¯ä»¥å¢åŠ åˆ°åŸå‹å¯¹è±¡ä¸ŠStudent.age = 23; // [æ³¨2] è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬ä¹‹å‰ç”¨å¯¹è±¡æ¥ä½œä¸ºåŸå‹åˆ›å»ºå®ä¾‹ï¼Œ æŠŠå‡½æ•°Student()æ”¹ä¸ºå¯¹è±¡Studentåº”è¯¥æ˜¯ï¼š 1234567// [æ³¨1] æ·»åŠ çš„å±æ€§nameä¸å±äºå‡½æ•°åŸå‹æ–¹æ³•å±æ€§ï¼Œä½†å¯è¢«åˆ›å»ºçš„å®ä¾‹ç»§æ‰¿ï¼Œæ˜¯å®ä¾‹å±æ€§// [æ³¨2] æ·»åŠ çš„å±æ€§ageï¼Œæ—¢ä¸å±äºå‡½æ•°åŸå‹æ–¹æ³•å±æ€§ï¼Œä¹Ÿä¸ä¼šè¢«å®ä¾‹ç»§æ‰¿ï¼Œåªèƒ½è‡ªå¨±è‡ªä¹Student &#123; school: &#x27;chongqingU&#x27;&#125; è¿™æ ·æˆ‘ä»¬ä¾¿æœ‰äº†å‡½æ•°åŸå‹ Student.prototype çš„ä¸€ä¸ªåˆæ­¥é›å½¢ï¼š 1234Student.prototype &#123; school: &#x27;chongqingU&#x27;&#125; å½“ç„¶ï¼Œå®é™…çš„ Student.prototype å±æ€§ä¸ä¼šè¿™ä¹ˆç®€å•ï¼šå®ƒè¿˜æ‹¥æœ‰constructorå±æ€§æŒ‡å‘æ„é€ å‡½æ•°æœ¬èº« ï¼›_proto_ å±æ€§æŒ‡å‘ä¸Šä¸€çº§æ„é€ å‡½æ•°åŸå‹prototype ã€‚ æˆ‘ä»¬å°è¯•æ‰“å°ä¼šå‡ºæ¥ç±»ä¼¼ä¸‹é¢ç»“æ„ï¼š 123456789101112131415console.log(Student.prototype);&#123; shcool:&quot;chongqingU&quot; // 1.å‡½æ•°åŸå‹å¢åŠ çš„åŸå‹å±æ€§ï¼šshcool constructor: Æ’ doSomething(), // 2.constructorï¼šæŒ‡å‘Studentæœ¬èº« __proto__: &#123; // 3.__proto__ï¼š== object.prototype constructor: Æ’ Object(), hasOwnProperty: Æ’ hasOwnProperty(), isPrototypeOf: Æ’ isPrototypeOf(), propertyIsEnumerable: Æ’ propertyIsEnumerable(), toLocaleString: Æ’ toLocaleString(), toString: Æ’ toString(), valueOf: Æ’ valueOf() &#125;&#125; å¯ä»¥çœ‹åˆ°æ„é€ å‡½æ•°Student.prototype._proto_ å±æ€§æŒ‡å‘â€”&gt;ä¸Šä¸€çº§æ„é€ å‡½æ•°object.prototype å±æ€§ã€‚ (_proto_ å±æ€§é»˜è®¤æŒ‡å‘Object åŸå‹) 1Student.prototype.__proto__ === object.prototype; // ture tç”±ä¸Šä»‹ç»æˆ‘ä»¬ä¹ŸçŸ¥é“ï¼Œç”¨æ„é€ å‡½æ•°åˆ›å»ºçš„å®ä¾‹*_proto_* å±æ€§ï¼Œä¼šæŒ‡å‘ç”Ÿæˆå®ƒçš„æ„é€ å‡½æ•°åŸå‹ prototype å±æ€§ã€‚ åˆ©ç”¨æ„é€ å‡½æ•°Student åˆ›å»ºå®ä¾‹hwh å¯¹è±¡ï¼Œæ‰“å°å‡ºå®ƒçš„ _proto_ å±æ€§ã€‚ 12var hwh = new Student();console.log(hwh.__proto__); ä¸‹é¢æ‰“å°å‡ºçš„å®é™…å°±æ˜¯åŸå‹ Student.prototype : 1234567&#123; shcool:&quot;chongqingU&quot; // 1.åŸå‹æœ¬èº«æ‹¥æœ‰çš„å±æ€§ï¼šshcool constructor: Æ’ doSomething(), // 2.constructorï¼šæŒ‡å‘Studentæœ¬èº« __proto__: &#123; // 3.__proto__ï¼š== object.prototype // ... &#125;&#125; æ€»ç»“ä¸€ä¸‹ï¼Œå‡½æ•°åŸå‹å¯çœ‹ä½œæ˜¯ æ„é€ å‡½æ•°çš„ä¸€ä¸ª&quot;å®ä¾‹&quot; ï¼Œä½†æ˜¯ï¼š åªæœ‰ å‡½æ•°å.prototype.å±æ€§ OR å‡½æ•°å.prototype.æ–¹æ³• å£°æ˜çš„å±æ€§/æ–¹æ³•æ‰æ˜¯åŸå‹å±æ€§/æ–¹æ³• &quot;å®ä¾‹&quot;è¿˜è‡ªåŠ¨æ‹¥æœ‰ constructor &amp; _proto_ å±æ€§åˆ†åˆ«æŒ‡å‘å‡½æ•°æœ¬èº«å’Œä¸‹ä¸€çº§æ„é€ å‡½æ•°åŸå‹ åŸå‹é“¾æŸ¥æ‰¾ å¥½çš„èªæ˜çš„ä½ è‚¯å®šæƒ³èµ·æ¥ï¼Œæˆ‘ä»¬å‰é¢å†™å‡ºçš„ Student æ„é€ å‡½æ•°åˆ›å»ºçš„ hwh å¯¹è±¡åŸå‹é“¾ï¼š å’Œæˆ‘ä»¬æ­¤å‰è¯´è¿‡çš„åŸå‹é“¾æŸ¥æ‰¾æŸå±æ€§è§„åˆ™ï¼š 1å½“å‰å¯¹è±¡æŸ¥æ‰¾å±æ€§ ---&gt; ä¸Šä¸€çº§åŸå‹æŸ¥æ‰¾ ---&gt; .... ---&gt; objectåŸå‹æŸ¥æ‰¾ ---&gt; è¿˜æ²¡æ‰¾åˆ°åˆ™ä¸ºnull ç”¨ä¸€å¼ å›¾æ¦‚å†µæ•´ä¸ªè¿‡ç¨‹åº”è¯¥æ˜¯ï¼š åœ¨å¯¹è±¡ hwh æœ¬èº«å®ä¾‹å±æ€§æŸ¥æ‰¾ï¼Œæœªæ‰¾åˆ°åˆ™åœ¨ hwh._proto_ æŸ¥æ‰¾ hwh._proto__ å®é™… ===ä¸Šçº§åŸå‹Student.prototype ï¼Œåœ¨è¯¥åŸå‹ä¸­æŸ¥æ‰¾å®šä¹‰çš„åŸå‹å±æ€§ã€æ–¹æ³• æœªæ‰¾åˆ°åˆ™åœ¨hwh._proto_.prototype._proto_ === Student.prototype._proto_ ===ä¸Šçº§åŸå‹ Object.prototypeï¼ŒæŸ¥æ‰¾è¯¥åŸå‹ä¸­å®šä¹‰çš„å±æ€§ã€æ–¹æ³• è¿˜æœªæ‰¾åˆ°åˆ™è¿”å›null å¦‚æœæˆ‘ä»¬æŠŠæ„é€ å‡½æ•°Student åŸå‹æŒ‡å‘å¦å¤–ä¸€ä¸ªå®ä¾‹ï¼Œé‚£ä¹ˆåŸå‹é“¾æŸ¥æ‰¾é¡ºåºå¦‚ä½•å˜åŒ–ï¼Ÿ åˆ›å»ºå®ä¾‹ltï¼Œå®ƒæœ‰å±æ€§name = â€œliutingâ€ ã€‚æŠŠStudent.prototypeæŒ‡å‘ltåï¼Œåˆ†æåŸå‹é“¾æŸ¥æ‰¾nameè¿‡ç¨‹ã€‚ 123456function Student() &#123;&#125;var lt = new Student(); lt.name = &quot;liuting&quot;; æ­¤æ—¶æˆ‘ä»¬è¿˜å¯ä»¥çœ‹åˆ°ï¼šlt.__proto__ === Student.prototype ä¸ºture ï¼ŒæŒ‡å‘ç”Ÿæˆå®ƒçš„æ„é€ å‡½æ•°åŸå‹ã€‚ è€Œå½“æŠŠStudent åŸå‹æŒ‡å‘lt åï¼š 1Student.prototype = lt; // StudentåŸå‹æŒ‡å‘lt lt.__proto__ === Student.prototype ä¸º falseï¼Œ lt._proto_ è¿˜æ˜¯ä¿å­˜åŸæ¥æœªä¿®æ”¹å‰çš„Student å‡½æ•°åŸå‹**ã€‚ å†ç”¨æ„é€ å‡½Studentæ•°åˆ›å»ºæ–°å¯¹è±¡hwhï¼š 12var hwh = new Student();hwh.__proto__ === Student.prototype === lt; // ture ç”¨ä¸€å¼ å›¾æ¦‚æ‹¬åŸå‹é“¾å˜åŒ–åº”è¯¥æ˜¯ï¼š æˆ‘ä»¬å°è¯•è¾“å‡º hwh.nameï¼Œæ˜¾ç„¶å¯ä»¥åœ¨åŸå‹é“¾ å®ä¾‹lt çš„ ltå±æ€§æ–¹æ³• æ‰¾åˆ° name å±æ€§ï¼š 1console.log(hwh.name); // è¾“å‡º:liuting 4.2 æ„é€ å‡½æ•°ç»§æ‰¿ æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ„é€ å‡½æ•° Student()ï¼š 12345function Student()&#123;&#125;var hwh = new Student(); å…¶åŸå‹é“¾ä¸ºï¼š 1hwh ---&gt; Student.prototype ---&gt; Object.prototype ---&gt; null ç°åœ¨æˆ‘ä»¬åˆå®šä¹‰äº†ä¸ªæ„é€ å‡½æ•° People() : 1234function People()&#123; this.eat = () =&gt; console.log(&quot;i am eating&quot;);&#125; æˆ‘ä»¬å¸Œæœ›Student èƒ½ç»§æ‰¿ People ,ä»è€Œå¯ä»¥ä½¿ç”¨ People çš„ eat() æ–¹æ³•ï¼Œå¹¶ä¸”æŠŠåŸå‹é“¾ä¿®æ”¹ä¸ºï¼š 1hwh ---&gt; Student.prototype ---&gt; People.prototype ---&gt; Object.prototype ---&gt; null é‚£ä¹ˆè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ 1. æ„é€ å‡½æ•°ç»‘å®š å‰é¢æˆ‘ä»¬è®²è¿‡applyæ–¹æ³•ï¼šå‡½æ•°å.apply(å¯¹è±¡å,[]) ã€‚ å¯ä»¥å°†å‡½æ•°æ‰€æœ‰ ç»‘å®šåˆ°thisçš„å±æ€§ è½¬è€Œâ€”&gt; ç»‘å®šåˆ°æŒ‡å®šå¯¹è±¡ ä¸Šã€‚ï¼ˆæ³¨ï¼šéä¸¥æ ¼æ¨¡å¼ä¸‹å‡½æ•°this æŒ‡å‘ undefinedï¼‰ å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ„é€ å‡½æ•°People ç»‘å®šåˆ°thisçš„å±æ€§ â€”&gt; ç»‘å®šåˆ°æ„é€ å‡½æ•°Student ç”Ÿæˆçš„å¯¹è±¡ä¸Šã€‚ 123456789function Student()&#123; // thisæŒ‡å‘Studentæ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ // å°†æ„é€ å‡½æ•°Peopleç»‘å®šåˆ°thisçš„å±æ€§(ä¸æ˜¯Peopleæ‰€æœ‰å±æ€§) ---&gt; ç»‘å®šåˆ°Studentå¯¹è±¡ä¸Š People.apply(this,[]);&#125;var hwh = new Student();hwh.eat(); // è¾“å‡ºï¼ši am eating è¿™æ ·åªæ˜¯ç»§æ‰¿äº†Student æ‰€æœ‰çš„å±æ€§ï¼Œä½†æ˜¯å…¶åŸå‹é“¾æ²¡æœ‰æ”¹å˜ï¼Œè¿˜æ˜¯ï¼š 1hwh ---&gt; Student.prototype ---&gt; Object.prototype ---&gt; null ä¹‹æ‰€ä»¥hwh èƒ½è°ƒç”¨ eat() æ–¹æ³•ï¼Œæ˜¯å› ä¸ºè¯¥æ–¹æ³•å·²ç»ç»‘å®šåˆ° hwh å¯¹è±¡ä¸Šã€‚ 2. prototype æ¨¡å¼ å¦‚æœæˆ‘ä»¬æŠŠ Student åŸå‹æŒ‡å‘ â€”&gt;ä¸€ä¸ª People çš„å®ä¾‹ï¼Œé‚£ä¹ˆæ‰€æœ‰Student å®ä¾‹éƒ½èƒ½â€œç»§æ‰¿â€People å±æ€§ã€æ–¹æ³•ï¼ˆå‡†ç¡®æ¥è¯´ï¼Œæ˜¯é€šè¿‡åŸå‹é“¾ä½¿å¾—Student å®ä¾‹å¯¹è±¡hwh å¯ä»¥ä½¿ç”¨æ„é€ å‡½æ•°People çš„å±æ€§ã€æ–¹æ³•ï¼‰ã€‚ 1234567Student.prototype = new People();// è‰¯å¥½ä¹ æƒ¯ï¼šä¿®æ”¹äº†prototypeè¦è®¾ç½®å›prototype.constructorStudent.prototype.constructor = Student;var hwh = new Student();hwh.eat(); // è¾“å‡ºï¼ši am eating æ­¤æ—¶åŸå‹ç»§æ‰¿é“¾ä¸ºï¼š 1hwh --&gt;Student.prototype == new People() --&gt;People.prototype --&gt;Object.prototype --&gt; null ç”¨ä¸€å¼ å›¾è¡¨ç¤ºä¸ºï¼š ä¸ºä»€ä¹ˆæœ‰â€œè‰¯å¥½ä¹ æƒ¯â€ï¼Ÿ åœ¨ä¸Šé¢æˆ‘ä»¬ä¿®æ”¹äº† Student.prototype æŒ‡å‘ï¼Œç«‹é©¬æœ‰é‡æ–°è®¾ç½®äº† Student.prototype.constructor æŒ‡å›Student ã€‚ å¦‚æœä¸è¿™ä¹ˆåšï¼š 1234Student.prototype = new People();var hwh = new Student();hwh.eat(); // è¾“å‡ºï¼ši am eating ä¸å½±å“é€šè¿‡åŸå‹é“¾ä½¿ç”¨People.eat() æ–¹æ³•ï¼Œä½†æˆ‘ä»¬å°è¯•è¾“å‡ºï¼šhwh.constructor 1234567cosole.log(hwh.constructor);// è¾“å‡ºç»“æœfunction People()&#123; this.eat = () =&gt; console.log(&quot;i am eating&quot;);&#125; å‘ç°æ„é€ å‡½æ•°Student ç”Ÿæˆçš„å¯¹è±¡hwh.constructor å±æ€§æ˜¯æŒ‡å‘æ„é€ å‡½æ•°People ï¼ é¦–å…ˆï¼Œæˆ‘ä»¬è¦çŸ¥é“hwh æœ¬èº«æ˜¯æ²¡æœ‰constructorè¿™ä¸ªå±æ€§çš„ã€‚å®ƒæ˜¯é€šè¿‡åŸå‹é“¾æŸ¥æ‰¾åˆ°æ„é€ å‡½æ•° People.prototype.constructor å±æ€§çš„ï¼Œè‡ªç„¶å®ƒæ˜¯æŒ‡å‘æ„é€ å‡½æ•° People äº†ï¼š ä½†æ˜¯å¯¹è±¡hwhï¼Œæ˜¯ç”±æ„é€ å‡½æ•°Student() ç”Ÿæˆçš„ï¼Œæˆ‘ä»¬åœ¨åº”è¯¥è®©hwh.constructor æŒ‡å‘ç”Ÿæˆå®ƒçš„æ„é€ å‡½æ•°Student()ï¼ æ‰€ä»¥å°±æœ‰äº†ä¸Šé¢çš„ â€œè‰¯å¥½ä¹ æƒ¯â€ï¼š 1Student.prototype.constructor = Student; ä½†æ˜¯ï¼Œä½ å¯èƒ½ä¼šæ‹…å¿ƒï¼Œè¿™æ ·People.prototype.constructor ä¸å°±è¢«ä¿®æ”¹äº†å—ï¼Ÿ å®é™…ä¸Šï¼Œè¿™æ ·åšåªä¼šåœ¨Student.prototype ä¹Ÿå°±æ˜¯åŒ¿åå¯¹è±¡ new People() +é”®å€¼å¯¹ï¼šconstructor : f Student() çœ‹ä¸Šå»å¥½åƒåŸºæœ¬è§£å†³äº†åŸå‹é“¾ç»§æ‰¿é—®é¢˜ï¼Ÿä½†æ˜¯ç”±äºè¦åˆ›å»ºå®ä¾‹å¯¹è±¡ï¼Œå¼€é”€è¾ƒå¤§ã€‚ 3. ç›´æ¥ç»§æ‰¿ prototype é€šè¿‡ç›´æ¥æŠŠStudent.prototype åŸå‹å±æ€§ç›´æ¥æŒ‡å‘ People.prototype åŸå‹å±æ€§ï¼Œæ¥è¾¾åˆ°ç»§æ‰¿People å±æ€§ã€æ–¹æ³•ã€‚ é€šè¿‡è¿™ç§æ–¹å¼ï¼Œéœ€è¦æŠŠPeople çš„å±æ€§ã€æ–¹æ³•ç»‘å®šåˆ°åŸå‹å¯¹è±¡People.prototype ï¼š 1234function People()&#123;&#125;People.prototype.eat = () =&gt; console.log(&quot;i am eating&quot;); å¥½äº†ï¼Œæˆ‘ä»¬å¼€å§‹ â€œ ç»§æ‰¿ â€ People.prototype ï¼š 123456Student.prototype = People.prototype;// è‰¯å¥½çš„ä¹ æƒ¯ï¼šæ¯æ¬¡ä¿®æ”¹å‡½æ•°åŸå‹ï¼Œéƒ½åº”è¯¥è®¾ç½®å›constructorStudent.prototype.constructor = Student;var hwh = new Student();hwh.eat(); // è¾“å‡ºï¼ši am eating çœ‹èµ·æ¥å¤©è¡£æ— ç¼ï¼Œè€Œä¸”è¿™æ¯”ç¬¬ 2 ç§æ–¹æ³•æ•ˆç‡æ›´é«˜ï¼šä¸ç”¨åˆ›å»º People å®ä¾‹ã€‚ ä½†è¿™ç§æ–¹å¼çš„åŸå‹é“¾ä¸ºï¼š 1hwh ---&gt; Student.prototype == People.prototype ---&gt; Object.prototype ---&gt; null å®ƒæ²¡æœ‰ä½“ç° Student å’ŒPeopleä¹‹é—´åŸå‹ç»§æ‰¿å…³ç³»ï¼Œè€Œä¸”ä¹Ÿéšè—äº†ä¸€ä¸ªç¼ºç‚¹ã€‚ ç»§æ‰¿ prototype æ–¹å¼ç¼ºç‚¹ è¿™ç§æ–¹å¼ï¼Œ Student.prototype å’Œ People.prototype ç°åœ¨æŒ‡å‘äº† åŒä¸€ä¸ªå¯¹è±¡ ï¼Œä»»ä½•å¯¹ Student.prototype ä¿®æ”¹éƒ½å°†ååº”åœ¨People.prototype ä¸Šã€‚ æˆ‘ä»¬åœ¨ç¬¬äºŒè¡Œä¿®æ”¹äº†ï¼šStudent.prototype.constructor = Student; ï¼Œä¼šå¯¼è‡´People.prototype.constructor ä¹Ÿè¢«æŒ‡å‘ä¸ºæ„é€ å‡½æ•° Student ã€‚ 123456People.prototype.constructor// è¾“å‡ºç»“æœfunction Student()&#123;&#125; æˆ‘çš„ç–‘é—®ï¼Ÿ ä¸ºä»€ä¹ˆä¸å¯ä»¥ç›´æ¥è®¾ç½® Student.prototype._proto_ æŒ‡å‘ People.prototype ï¼Ÿï¼Ÿï¼Ÿ è¿™ç§æ–¹å¼è¢«å¾ˆå¤šåšæ–‡éƒ½æŒ‡å‡ºä¸åº”è¯¥æå€¡ï¼ŒåŸå› å½±å“æ€§èƒ½ï¼ŸMDN-ä¸æ¨èä½¿ç”¨Object.prototype._proto_ 1234Student.prototype.__proto__ = People.prototype;var hwh = new Student();hwh.eat(); // å¯ä»¥è¾“å‡ºï¼ši am eating å®ç°äº†åŸå‹é“¾ç»§æ‰¿å…³ç³» åŒæ—¶å› ä¸ºæ²¡æœ‰ä¿®æ”¹Student.prototype ï¼Œä¸ç”¨è®¾ç½® Student.prototype.constructor = Student 4. åˆ©ç”¨ç©ºå¯¹è±¡ä½œä¸ºä¸­ä»‹ ä¸€ç§åŸºæœ¬å®Œç¾çš„æ–¹æ³•ï¼šæ—¢å¯ä½“ç°åŸå‹é“¾ Student å’ŒPeople ç»§æ‰¿å…³ç³»ï¼Œä¹Ÿä¸ä¼šå¯¼è‡´constructor ä¹‹ç±»é—®é¢˜ã€‚ ç”±äºç¬¬3ç§åŠæ³•ï¼Œä¼šå‡ºç°æŒ‡å‘åŒä¸€å¯¹è±¡å¯¼è‡´constructor æ„æ–™ä¹‹å¤–è¢«ä¿®æ”¹é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å€Ÿç”¨ä¸€ä¸ªç©ºå‡½æ•°ä½œä¸ºä¸­ä»‹ã€‚ 123456789101112131415161718// ç©ºå‡½æ•°Fä½œä¸ºåª’ä»‹function F()&#123;&#125;// æŠŠFåŸå‹æŒ‡å‘PeopleåŸå‹F.prototype = People.prototype;// æ­¤æ—¶Student.prototypeåŸå‹æŒ‡å‘ç©ºå‡½æ•°Få®ä¾‹å¯¹è±¡Student.prototype = new F();// è‰¯å¥½ä¹ æƒ¯ï¼šæ¯æ¬¡ä¿®æ”¹å‡½æ•°åŸå‹ï¼Œéƒ½åº”è¯¥è®¾ç½®å›constructor// ç”±äºæ­¤æ—¶Student.prototype å’Œ People.prototypeä¸å†æŒ‡å‘åŒä¸€å¯¹è±¡// æ­¤æ—¶ä¿®æ”¹constructorä¸ä¼šå¯¼è‡´ People.prototype.constructor è¢«åŒæ­¥ä¿®æ”¹Student.prototype.constructor = Student; var hwh = new Student();hwh.eat(); // è¾“å‡ºï¼ši am eating å™¢ï¼Œæˆ‘çš„å¤©ï¼è¿™æ˜¯å†å˜é­”æœ¯å—ï¼Ÿåˆ°åº•æ€ä¹ˆä¸€å›äº‹å‘¢ï¼Ÿ 1hwh ---&gt; Student.prototype == new F() ---&gt; F.prototype = People.prototype --&gt; Object.prototype ---&gt; null 5. æ‹·è´ç»§æ‰¿ è¿™ç§æ–¹å¼æ¯”è¾ƒæš´åŠ›â€¦ é¦–å…ˆï¼ŒæŠŠPeople çš„å±æ€§ã€æ–¹æ³•ç»‘å®šåˆ°åŸå‹å¯¹è±¡People.prototype ï¼š 1234567function Student()&#123;&#125;function People()&#123;&#125;People.prototype.eat = () =&gt; console.log(&quot;i am eating&quot;); æ¥ç€å®ç°å°†People åŸå‹å±æ€§å…¨éƒ¨æ‹·è´åˆ° Student åŸå‹å±æ€§ä¸Šï¼š 123456789// éå†å¯¹è±¡åªéœ€æ™®é€šforå¾ªç¯// éå†å¾ªç¯åªèƒ½ç”¨&lt;å¯¹è±¡å[&#x27;key&#x27;]&gt;æ–¹å¼ï¼Œå…¶ä¸­&#x27;&#x27;åœ¨[i]ä¸ç”¨åŠ ï¼Œiå·²ç»æ˜¯å­—ç¬¦ä¸²for(var i in People.prototype)&#123; Student.prototype[i] = People.prototype[i];&#125;var hwh = new Student();hwh.eat(); // è¾“å‡ºï¼ši am eating å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡åŸå‹é“¾ å®ä¾‹å¯¹è±¡hwh å¯ä»¥è®¿é—®åˆ°æ„é€ å‡½æ•°Student.prototype.eat å±æ€§æ–¹æ³•ã€‚ 4.3 class ç»§æ‰¿ å†™çš„æ¯”è¾ƒç®€å•ï¼Œéœ€è¦æ—¶å†è¡¥å……ã€‚ åˆè¯† class åœ¨ES6æ ‡å‡†å¼•å…¥äº† class å…³é”®å­—ï¼Œæ¯”åŸå…ˆJavaScript åŸºäºåŸå‹é“¾çš„å¯¹è±¡æ¨¡å‹æ›´åŠ ç®€å•ã€‚ ç°åœ¨æœ‰ä¸€ä¸ªæ„é€ å‡½æ•° Student å¯ç”¨æ¥new å‡ºå®ä¾‹å¯¹è±¡ï¼Œå®ƒåƒä¸‹é¢è¿™æ ·ï¼š 123456function Student(name,age) &#123; this.name = name; this.age = age;&#125;Student.prototype.learn = function() &#123; console.log(&quot;i am learning..&quot;); &#125;; æŠŠå®ƒæ”¹å†™æˆclass ï¼š 1234567891011121314151617181920class Student&#123; // æ„é€ æ–¹æ³• // newç”Ÿæˆå®ä¾‹å¯¹è±¡æ—¶è‡ªåŠ¨è°ƒç”¨è¯¥æ–¹æ³•ï¼Œä¸ºæ‰€æœ‰ç±»å®ä¾‹å¯¹è±¡ç”Ÿæˆä¸‹åˆ—å®ä¾‹å±æ€§ constructor(name,age) &#123; this.name = name; this.age = age; &#125; // learnæ–¹æ³• learn() &#123; console.log(&quot;i am learning..&quot;); &#125;&#125;// å°è¯•è°ƒç”¨var hwh = new Student(&#x27;hwh&#x27;,23);hwh.learn(); // è¾“å‡ºï¼ši am learning.. çœ‹èµ·æ¥æ¯”æ­¤å‰å†™æ³•ç®€å•å¤šäº†ï¼Œä½†å…¶å®åœ¨JavaScript ç±» class æœ¬è´¨è¿˜æ˜¯å‡½æ•°ï¼š 1typeof Student; // function å¦ä¸€æ–¹é¢ï¼Œå‡½æ•°è‡ªç„¶ä¸€å®šæœ‰åŸå‹å±æ€§prototype ï¼š å½“ç„¶ï¼Œè¿™ä¸ªâ€™'å‡½æ•°&quot;æœ‰ç‚¹ç‰¹æ®Šï¼Œæ‰€æœ‰ç›´æ¥åœ¨ç±»ä¸­å®šä¹‰çš„å±æ€§ã€æ–¹æ³•ä¼šè¢«ç›´æ¥ç»‘å®šåˆ°å‡½æ•°åŸå‹ä¸Šã€‚ æ‰€ä»¥ä¸Šé¢ class Student ç­‰ä»·è¿™ä¹ˆå†™ï¼š 12345678910class Student&#123; constructor(name,age) &#123; this.name = name; this.age = age; &#125;&#125;Student.prototype.learn = function() &#123; console.log(&quot;i am learning..&quot;); &#125;; ä½¿ç”¨ class å®ç°ç»§æ‰¿ ä½¿ç”¨class å¯ä»¥æ–¹ä¾¿çš„å®ç°ç»§æ‰¿ï¼Œæˆ‘æƒ³åˆšåˆšå­¦å®ŒåŸå‹ç»§æ‰¿çš„ä½ ä¸ä¼šå¿˜è®°è¢«å®ƒæ”¯é…çš„ææƒ§ã€‚ ç°åœ¨è¿™æœ‰ä¸€ä¸ªç±» Girl_Student ç»§æ‰¿ Student ï¼Œä½ å¯ä»¥è¿™ä¹ˆå†™ï¼š 123456789101112131415161718class Girl_Student extends Student&#123; constructor(name,age,grade) &#123; // ES6è§„å®šå¿…é¡»è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ä¸€æ¬¡ super(name,age); this.grade = grade; &#125; myGrade() &#123; console.log(&#x27;I am at grade: &#x27; + this.grade); &#125;&#125;var gs = new Girl_Student(&#x27;lt&#x27;,23,395);gs.myGrade(); // è°ƒç”¨è‡ªèº«æ–¹æ³•ï¼šI am at grade 395gs.learn(); // è°ƒç”¨çˆ¶ç±»æ–¹æ³•ï¼ši am learning.. ç¬¬äº”ç« ï¼šæµè§ˆå™¨ 5.1 æµè§ˆå™¨å¸¸ç”¨å¯¹è±¡ window window å¯¹è±¡ä¸ä½†å……å½“å…¨å±€ä½œç”¨åŸŸï¼Œè€Œä¸”è¡¨ç¤º æµè§ˆå™¨çª—å£ï¼Œå¸¸ç”¨å±æ€§å¦‚ä¸‹ï¼š å±æ€§å ä½œç”¨ innerWidth å†…å®½åº¦ï¼Œä¸åŒ…å«èœå•æ ã€å·¥å…·æ ç­‰å ä½å…ƒç´  innerHeight å†…é«˜åº¦ï¼Œä¸åŒ…å«èœå•æ ã€å·¥å…·æ ç­‰å ä½å…ƒç´  screen screen å¯¹è±¡è¡¨ç¤º å±å¹• çš„ä¿¡æ¯ï¼Œå¸¸ç”¨å±æ€§æœ‰ï¼š å±æ€§å ä½œç”¨ width å±å¹•å®½åº¦ï¼Œä»¥åƒç´ ä¸ºå•ä½ height å±å¹•é«˜åº¦ï¼Œä»¥åƒç´ ä¸ºå•ä½ colorDepth é¢œè‰²ä½æ•°ï¼Œå¦‚16 navigator navigator å¯¹è±¡è¡¨ç¤º æµè§ˆå™¨ ä¿¡æ¯ï¼Œå¸¸ç”¨å±æ€§æœ‰ï¼š å±æ€§å ä½œç”¨ appName æµè§ˆå™¨åç§° appVersion æµè§ˆå™¨ç‰ˆæœ¬ language æµè§ˆå™¨è¯­è¨€ platform æ“ä½œç³»ç»Ÿç±»å‹ userAgent æµè§ˆå™¨è®¾å®šçš„ user-Agent å­—ç¬¦ä¸² location location å¯¹è±¡è¡¨ç¤º å½“å‰é¡µé¢URL ä¿¡æ¯ï¼Œå¸¸ç”¨å±æ€§æœ‰ï¼š ä»¥ http://www.example.com:8080/path/index.html?a=1&amp;b=2#TOP ä¸ºä¾‹ã€‚ å±æ€§å ä½œç”¨ href å®Œæ•´åœ°å€ï¼šä¸Šé¢å…¨éƒ¨è“å­—åŸŸå protocol åè®®åï¼š http host åŸŸåï¼š www.example.com port ç«¯å£ï¼š 8080 pathname è·¯å¾„åï¼š /path/index.html search æŸ¥è¯¢ï¼Ÿï¼š?a=1&amp;b=2 hash å“ˆå¸Œï¼Ÿï¼šTOP è¿˜å¯ä»¥åˆ©ç”¨å¯¹è±¡æ–¹æ³•ï¼š æ–¹æ³•å å®ä¾‹ reload() location.reload(); // é‡æ–°åŠ è½½å½“å‰ç•Œé¢ assign() location.assign(â€˜https://www.baidu.comâ€™); // å½“å‰ç•Œé¢æ‰“å¼€ç™¾åº¦ï¼Œå¿…é¡»å¸¦æœ‰åè®®ç±»å‹ï¼ history å·²ä¸æ¨èä½¿ç”¨ï¼Œç®€å•ä»‹ç»å¸¸ç”¨æ–¹æ³•ï¼š æ–¹æ³•å å®ä¾‹ back() history.back() // ç›¸å½“ç‚¹å‡»æµè§ˆå™¨åé€€æŒ‰é’® forward() history.forward() // ç›¸å½“ç‚¹å‡»æµè§ˆå™¨å‰è¿›æŒ‰é’® ä¸æ¨èä½¿ç”¨çš„ä¸€ä¸ªå®ä¾‹åœºæ™¯ã€‚ å¦‚æœæˆ‘ä»¬åœ¨ç™»é™†æˆåŠŸè°ƒç”¨ history.back() è¯•å›¾å›åˆ°ç™»é™†å‰ç•Œé¢ï¼Œåˆè¦é‡æ–°ç™»é™†äº†ï¼ document document å¯¹è±¡æ˜¯æµè§ˆå™¨ä¸­ DOMæ ‘æ ¹èŠ‚ç‚¹ ï¼Œå¯åˆ©ç”¨å®ƒè¿›è¡Œæ“ä½œDOMã€è·å–cookieç­‰ï¼Œå¸¸ç”¨å±æ€§å¦‚ä¸‹ï¼š å±æ€§å å®ä¾‹ cookie document.cookie() // è·å– cookie æ›´å¤šæ“ä½œDOMï¼Œè¯¦è§ä¸‹èŠ‚åˆ†è§£ã€‚ 5.2 æ“ä½œDOM 1.è·å–èŠ‚ç‚¹ getElementByâ€¦() è·å–èŠ‚ç‚¹ æ³¨ï¼šæ ‡ç­¾ä¹Ÿå¯ç§°ä¸ºå…ƒç´ ã€èŠ‚ç‚¹ã€‚ æ–¹æ³•å ä½œç”¨ getElementById() æ ¹æ® æ ‡ç­¾IDå±æ€§ æ¥è·å–èŠ‚ç‚¹ getElementByName() æ ¹æ® nameå±æ€§ æ¥è·å–èŠ‚ç‚¹ getElementByClassName() æ ¹æ® æ ‡ç­¾classå±æ€§ æ¥è·å–èŠ‚ç‚¹ getElementByTagName() æ ¹æ® æ ‡ç­¾å æ¥è·å–èŠ‚ç‚¹ï¼Œå¦‚divã€img ä¸€äº›ç®€å•æ“ä½œå®ä¾‹ã€‚ 123456789// è¿”å›IDä¸º&#x27;test&#x27;çš„èŠ‚ç‚¹ï¼švar test = document.getElementById(&#x27;test&#x27;);// è·å–èŠ‚ç‚¹testä¸‹çš„æ‰€æœ‰ç›´å±[å­èŠ‚ç‚¹]:var cs = test.children;// è·å–èŠ‚ç‚¹testä¸‹ç¬¬ä¸€ä¸ªã€æœ€åä¸€ä¸ª[å­èŠ‚ç‚¹]ï¼švar first = test.firstElementChild;var last = test.lastElementChild; CSSé€‰æ‹©å™¨è·å–èŠ‚ç‚¹ æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨ CSSé€‰æ‹©å™¨ selector è¯­æ³•æ¥è·å–èŠ‚ç‚¹ï¼š æ–¹æ³•å ä½œç”¨ querySelector(selector) è·å–æ»¡è¶³æ¡ä»¶çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ querySelectorAll(selector) è·å–æ»¡è¶³æ¡ä»¶çš„æ‰€æœ‰èŠ‚ç‚¹ åŸºæœ¬é€‰æ‹©å™¨ç”¨æ³•ï¼š é€‰æ‹©å™¨ç±»å‹ ç”¨æ³• æ ‡ç­¾é€‰æ‹©å™¨ï¼šæ ‡ç­¾å document.querySelector(â€œdivâ€) // è·å–ç¬¬ä¸€ä¸ªdivæ ‡ç­¾èŠ‚ç‚¹ ç±»é€‰æ‹©å™¨ï¼š.ç±»å document.querySelector(â€œ.keyâ€) // è·å–ç¬¬ä¸€ä¸ªclass = keyèŠ‚ç‚¹ IDé€‰æ‹©å™¨ï¼š#IDå document.querySelector(â€œ#uidâ€) // è·å–ç¬¬ä¸€ä¸ªID = uid èŠ‚ç‚¹ å±æ€§é€‰æ‹©å™¨ï¼š[å±æ€§=å±æ€§å] document.querySelector(â€œ[type=text]â€) // è·å–ç¬¬ä¸€ä¸ªname =&quot; text&quot; èŠ‚ç‚¹ å±‚çº§é€‰æ‹©å™¨ æˆ‘ä»¬è¿˜å¯ä»¥è¿›è¡Œé€‰æ‹©å™¨ç»„åˆç­›é€‰æŒ‡å®šå…ƒç´ åä»£ï¼š å…³ç³»é€‰æ‹©å™¨ç»„åˆ ä½œç”¨ A B åŒ¹é…Aå…ƒç´ ä¸­çš„å­å…ƒç´ Bï¼ŒBå¯ä»¥æ˜¯A ä»»æ„çº§åˆ«åä»£ A &gt; B åŒ¹é…Aå…ƒç´ ä¸­çš„ä¸‹çº§å­å…ƒç´ Bï¼Œåªèƒ½æ˜¯ ç›´ç³»åä»£ A + B åŒ¹é…Aå…ƒç´ ä¸­çš„ä»»ä¸€ä¸‹ä¸€ä¸ªå…„å¼Ÿå…ƒç´ Bï¼ˆåŒçº§ï¼‰ B ~ E åŒ¹é…Bå…ƒç´ åé¢çš„æ‹¥æœ‰å…±åŒçˆ¶å…ƒç´ çš„å…„å¼Ÿå…ƒç´ E è¿‡æ»¤å™¨ è¿‡æ»¤å™¨ä¸€èˆ¬ä¸å•ç‹¬ä½¿ç”¨ï¼Œé™„åŠ åˆ°é€‰æ‹©å™¨ä¸Šæ›´ç²¾ç¡®å®šä½å…ƒç´  ï¼š&lt;é€‰æ‹©å™¨&gt;ï¼š&lt;å…ƒç´ çŠ¶æ€å…³é”®å­—&gt; âš ï¸ åœ¨jQuery ä¸­å†’å·ï¼š å’Œé€‰æ‹©å™¨å‰ä¸€å®šè¦æœ‰ç©ºæ ¼ï¼ 12$(&#x27;#test-form:radio&#x27;); // é”™è¯¯å†™æ³•ï¼šæ— æ³•é€‰æ‹©è¡¨å•ä¸­å•é€‰æ¡†$(&#x27;#test-form :radio&#x27;); // æ­£ç¡®å†™æ³•ï¼Œè¦æœ‰ç©ºæ ¼ï¼ æŒ‡å®šé€‰å®šå…ƒç´ å¤„äºä½•ç§çŠ¶æ€æ—¶çš„CSSæ ·å¼ ã€‚ æŒ‡å®šaæ ‡ç­¾å¤„äºå„ç§çŠ¶æ€çš„æ ·å¼ ä»¥ åœ¨CSSä¸­ä¿®æ”¹ä¸åŒçŠ¶æ€a æ ‡ç­¾é¢œè‰²ä¸ºä¾‹ã€‚ 1234567891011// link-åŒ¹é…å½“å‰å…ƒç´ è¿æ¥a :link &#123;color: slategray;&#125;// visited-åŒ¹é…å·²è®¿é—®è¿‡çš„è¿æ¥a :link &#123;color: #4b2f89;&#125;// active-åŒ¹é…å…ƒç´ å½“ä¸­æ¿€æ´»çŠ¶æ€ï¼ˆé¼ æ ‡æ‚¬åœï¼‰çš„é“¾æ¥a :active &#123;color: blue;&#125; // hover-åŒ¹é…å…ƒç´ å½“ä¸­æœªæ¿€æ´»çŠ¶æ€çš„é“¾æ¥a :hover &#123;color: blue;&#125; åŒ¹é…ä¸€ç»„å…„å¼Ÿå…ƒç´ æŸå…ƒç´  åˆ†ç±» å®ä¾‹ :first-child åŒ¹é…ä¸€ç»„pæ ‡ç­¾ç¬¬ä¸€ä¸ªpæ ‡ç­¾ï¼šp:first-child :nth-child() åŒ¹é…ä¸€ç»„pæ ‡ç­¾ç¬¬ä¸€ä¸ªpæ ‡ç­¾ï¼šp:nth-child(1) åŒ¹é…è¡¨æ ¼ä¸­çš„å¥‡æ•°è¡Œï¼štr:nth-child(2n+1) åŒ¹é…è¡¨æ ¼ä¸­çš„å¶æ•°è¡Œï¼štr:nth-child(2n) æ›´å¤šï¼š:nth-last-child(an + b)ã€:nth-of-type(an+b)ã€:last-of-type â€¦ è¡¨å•ç›¸å…³ åˆ†ç±» å®ä¾‹ :input é€‰æ‹© è¡¨å• ä»¥ä¸‹æ ‡ç­¾ï¼š&lt;input&gt;ï¼Œ&lt;textarea&gt;ï¼Œ&lt;select&gt;å’Œ&lt;button&gt; :enabled é€‰æ‹© è¡¨å• å¯ä»¥æ­£å¸¸è¾“å…¥çš„&lt;input&gt;ã€&lt;select&gt; ï¼š$(â€˜#test-form :enabledâ€™) :disabled é€‰æ‹© è¡¨å• é‚£äº›ä¸èƒ½è¾“å…¥çš„ &lt;input&gt;ã€&lt;select&gt;ï¼š$(â€˜#test-form :disabledâ€™) :file é€‰æ‹©æ–‡ä»¶ï¼š input : file === input[type=file] :checkbox é€‰æ‹©å¤é€‰æ¡†ï¼šinput : checkbox=== input[type=checkbox] :radio é€‰æ‹©å•é€‰æ¡†ï¼šinput : radio === input[type=radio] :focus é€‰æ‹©å½“å‰è¾“å…¥ç„¦ç‚¹ï¼šä¾‹å¦‚æŠŠå…‰æ ‡æ”¾åˆ°ä¸€ä¸ª&lt;input&gt;ä¸Šï¼Œ$(â€˜input:focusâ€™) ä¾¿å¯é€‰ä¸­ :checked é€‰æ‹©å½“å‰å‹¾ä¸Šçš„å•é€‰æ¡†å’Œå¤é€‰æ¡†ï¼š$(â€˜input[type=radio]:checkedâ€™) é€‰æ‹©è¡¨å•id = test-form ä¸‹æ‰€æœ‰ &lt;input&gt;ï¼Œ&lt;textarea&gt;ï¼Œ&lt;select&gt;å’Œ&lt;button&gt; èŠ‚ç‚¹ã€‚ 12// æ— æ³•ç”¨ï¼šdocument.querySelectorALL(&#x27;#test-form :input&#x27;) ï¼Ÿï¼Ÿ$(&#x27;#test-form :input&#x27;); å…¶å®ƒæ›´å¤š åˆ†ç±» å®ä¾‹ :empty åŒ¹é…æ²¡æœ‰å­å…ƒç´ çš„å…ƒç´  :target ç”¨äºåŒ¹é…URIä¸­çš„IDæ ‡è¯†ï¼ˆå³ï¼šé”šç‚¹ï¼‰éƒ¨åˆ† è·å–èŠ‚ç‚¹åŸºæœ¬ä¿¡æ¯ 1&lt;input type=&quot;text&quot; id=&#x27;user&#x27;&gt; å¯ä»¥è·å–åŸºæœ¬å±æ€§ç­‰ä¿¡æ¯ï¼Œä¸å­˜åœ¨çš„å±æ€§å­—ç¬¦ä¸²ç±»å‹è¿”å›ç©ºå­—ç¬¦ä¸² â€œâ€ ï¼Œå¸ƒå°”ç±»å‹é»˜è®¤è¿”å› falseï¼š 123456789101112var u = document.querySelector(&#x27;#user&#x27;);// è·å–å­˜åœ¨çš„å±æ€§u.type; // &quot;text&quot;u.id; // &quot;user&quot;// è·å–ä¸å­˜åœ¨çš„å±æ€§u.name; // &quot;&quot;u.checked; // false// æ–‡æœ¬æ¡†å€¼u.value ; // &quot;hwh&quot;ï¼Œå·²ç»åœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥hwh 2.æ›´æ–°DOM æ›´æ–°DOMèŠ‚ç‚¹æ–‡æœ¬ æˆ‘ä»¬å¸¸ç”¨ä»¥ä¸‹å±æ€§å¯¹DOMèŠ‚ç‚¹æ–‡æœ¬å†…å®¹è¿›è¡Œä¿®æ”¹ï¼š å±æ€§å ç”¨æ³• innerHTML å¯ä»¥æ’å…¥HTMLæ ‡ç­¾ &amp; å­—ç¬¦ä¸² innerText åªèƒ½æ’å…¥å­—ç¬¦ä¸²ï¼Œæ’å…¥HTMLæ ‡ç­¾ä¼šè§£ææˆå­—ç¬¦ä¸² textContent åŒä¸Šï¼Œä½†ä¼šè¿”å›æ‰€æœ‰æ–‡æœ¬åŒ…æ‹¬éšè—æ–‡æœ¬ æ›´æ–°æ ‡ç­¾ã€å­—ç¬¦ä¸²å®ä¾‹ã€‚ 1&lt;div id=&quot;content&quot;&gt; test &lt;/div&gt; 1234567891011var c = document.getElementById(&#x27;content&#x27;);c.innerText; // è¾“å‡ºï¼š&quot;test&quot;// 1.æ’å…¥HTMLc.innerHTML = &#x27;&lt;p&gt; hello test!&lt;/p&gt;&#x27;; // æ‰“å¼€æµè§ˆå™¨divæ ‡ç­¾å†…è¾“å‡ºï¼šhello test!// 2.æ’å…¥å­—ç¬¦ä¸²c.innerText = &#x27;&lt;p&gt; hello test!&lt;/p&gt;&#x27;; // æ‰“å¼€æµè§ˆå™¨divæ ‡ç­¾å†…è¾“å‡ºï¼š&lt;p&gt; hello test!&lt;/p&gt;// 3.æ’å…¥å­—ç¬¦ä¸²c.textContent = &#x27;&lt;p&gt; hello test!&lt;/p&gt;&#x27;; // æ‰“å¼€æµè§ˆå™¨divæ ‡ç­¾å†…è¾“å‡ºï¼š&lt;p&gt; hello test!&lt;/p&gt; æ›´æ–°CSSæ ·å¼ è·å–èŠ‚ç‚¹åï¼Œåˆ©ç”¨ style å±æ€§è¿›è¡Œæ ·å¼è®¾ç½®ã€‚ å±æ€§å ç”¨æ³• style DOMèŠ‚ç‚¹ style å±æ€§å¯¹åº”æ‰€æœ‰çš„CSSï¼Œå¯ç›´æ¥è·å–ORè®¾ç½®ã€‚ è¿›è¡Œç®€å•CSSæ ·å¼è®¾ç½®ã€‚ 12345var c = document.getElementById(&#x27;content&#x27;);// è®¾ç½®CSSc.style.color = &#x27;#ff0000&#x27;;c.style.fontSize = &#x27;1200px&#x27;; âš ï¸ æ³¨æ„ fontSize ç­‰åœ¨javaScript ä¸­æ˜¯é©¼å³°å‘½åï¼Œè€Œåœ¨CSSä¸­æ˜¯ font-size ï¼ 3.æ’å…¥DOM åœ¨å‰æˆ‘ä»¬åˆ©ç”¨ï¼šc.innerHTML = '&lt;p&gt; hello test!&lt;/p&gt;'; å¯ä»¥åœ¨&lt;div&gt; ... &lt;/div&gt;æ’å…¥HTMLæ ‡ç­¾ï¼Œä½†æ˜¯ä¼šæ›¿æ¢æ‰é‡Œé¢æ‰€æœ‰DOMèŠ‚ç‚¹å†…å®¹ã€‚ ä¸ºæ­¤æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š æ–¹æ³•å ç”¨æ³• appendChild(newElem) æ·»åŠ å­èŠ‚ç‚¹newElem ä¸ºå½“å‰çˆ¶èŠ‚ç‚¹å¯¹è±¡ æœ€åä¸€ä¸ªå­èŠ‚ç‚¹ insertBefore(newElemï¼Œref) æ·»åŠ å­èŠ‚ç‚¹newElem ä¸ºå½“å‰çˆ¶èŠ‚ç‚¹å¯¹è±¡ å¦ä¸€ä¸ªå­èŠ‚ç‚¹refå‰ ä¸‹é¢ä¸ºé¢„è®¾å¥½çš„HTMLç»“æ„ï¼š 123456&lt;ul id=&quot;programLanguage&quot;&gt; &lt;li id=&quot;C#&quot;&gt;C#&lt;/li&gt; &lt;li id=&quot;C&quot;&gt;C&lt;/li&gt; &lt;li id=&quot;python&quot;&gt;python&lt;/li&gt; &lt;li id=&quot;java&quot;&gt;java&lt;/li&gt; &lt;/ul&gt; åˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼š&lt;li id=&quot;javascript&quot;&gt;javascript&lt;/li&gt; æ’å…¥åˆ°åˆ—è¡¨æœ«å°¾ã€‚ 123456789var ul_pl = document.getElementById(&#x27;programLanguage&#x27;);// åˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹var li_js = document.createElement(&#x27;li&#x27;);li_js.id = &#x27;python&#x27;;li_js.innerText = &#x27;javaScript&#x27;;// æ’å…¥åˆ°æœ«å°¾ul_pl.appendChild(li_js); åˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼š&lt;li id=&quot;C++&quot;&gt;C++&lt;/li&gt; æ’å…¥åˆ°åˆ— python å‰ã€‚ 12345678910var ul_pl = document.getElementById(&#x27;programLanguage&#x27;);var li_py = document.getElementById(&#x27;python&#x27;);// åˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹var li_cpp = document.createElement(&#x27;li&#x27;);li_cpp.id = &#x27;C++&#x27;;li_cpp.innerText = &#x27;C++&#x27;;// æ’å…¥åˆ°æœ«å°¾ul_pl.insertBefore(li_cpp,li_py); 4. åˆ é™¤DOM è¦åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé¦–å…ˆè¦è·å¾—è¯¥èŠ‚ç‚¹æœ¬èº«ä»¥åŠå®ƒçš„çˆ¶èŠ‚ç‚¹ï¼Œç„¶åè°ƒç”¨çˆ¶èŠ‚ç‚¹çš„removeChild()æŠŠè‡ªå·±åˆ æ‰ï¼š åˆ é™¤æŒ‡å®šåˆ—è¡¨ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹ã€‚ 123456var ul_pl = document.getElementById(&#x27;programLanguage&#x27;);// è·å–åˆ—è¡¨ç¬¬ä¸‰ä¸ªå­èŠ‚ç‚¹var li3 = ul_pl.children[2];// è°ƒç”¨è¯¥ä»˜èŠ‚ç‚¹åˆ é™¤è¯¥å­èŠ‚ç‚¹ul_pl.removeChild(li3); âš ï¸ æ³¨æ„ï¼š DOMæ ‘ä¸­èŠ‚ç‚¹è™½ç„¶è¢«åˆ é™¤ï¼Œä½†æ˜¯è¿˜åœ¨å†…å­˜ä¸­ï¼Œå¯ä»¥éšæ—¶è¢«æ·»åŠ åˆ°åˆ«çš„ä½ç½® childrenå±æ€§ å®æ—¶å˜åŒ–ï¼Œåˆ é™¤åçˆ¶èŠ‚ç‚¹.chidrenè¿”å›çš„åˆ—è¡¨ä¼šå¯¹åº”å‡å°‘ 5.3 æ“ä½œè¡¨å• å¸¸ç”¨è¡¨å•å…ƒç´  &lt;form&gt; å…ƒç´ å®šä¹‰ HTML è¡¨å•ï¼Œæ”¶é›†ç”¨æˆ·è¾“å…¥ ï¼š&lt;form&gt;... è¡¨å•å…ƒç´ ...&lt;/form&gt; ã€‚ä»¥ä¸‹æ˜¯å¸¸ç”¨è¡¨å•å…ƒç´ ï¼š å¸¸ç”¨è¡¨å•å…ƒç´  è¡¨å•å…ƒç´  æè¿° &lt;input&gt; æœ€é‡è¦çš„è¡¨å•å…ƒç´ ï¼Œå«æœ‰ä¸åŒç±»å‹çš„ input å…ƒç´  ã€å¤é€‰æ¡†ã€å•é€‰æŒ‰é’®ã€æäº¤æŒ‰é’®ç­‰ã€‚ &lt;select&gt; å®šä¹‰ä¸‹æ‹‰åˆ—è¡¨ï¼š &lt;textarea&gt; å®šä¹‰å¤šè¡Œè¾“å…¥æ–‡æœ¬åŸŸï¼š &lt;button&gt; æŒ‰é’®ï¼šç‚¹å‡»åå‡ºå‘onclickäº‹ä»¶ä»£ç ï¼Œè¾“å‡ºHello World! ä¸åŒç±»å‹çš„ input å…ƒç´  ï¼šæœ‰å¤é€‰æ¡†ã€å•é€‰æŒ‰é’®ã€æäº¤æŒ‰é’®ç­‰ï¼š å¸¸ç”¨inputç±»å‹ ç±»å‹ æè¿° text æ–‡æœ¬è¾“å…¥ï¼š&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt; password å¯†ç è¾“å…¥ï¼š&lt;input type=&quot;password&quot; name=&quot;psw&quot;&gt; submit æäº¤è¡¨å•æŒ‰é’®ï¼š&lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt; radio å•é€‰æŒ‰é’®ï¼š â—‹Male â—‹Female ï¼ˆå¤šä¸ªå•é€‰æŒ‰é’®ç»„åˆæˆ å¤šé€‰ä¸€ ï¼Œnameè¦ç›¸åŒï¼‰ checkbox å¤é€‰æ¡†ï¼šâ–¡ I have a bike â–¡ I have a car button å’Œå‰è¡¨å•å…ƒç´ buttonç±»ä¼¼ï¼Œä½†æ²¡æœ‰åé¢&lt;/button&gt;ï¼š number è¾“å…¥æ•°å€¼ï¼Œå¹¶å¯å¯¹å…¶ä½œå‡ºé™åˆ¶ï¼š date åŒ…å«æ—¥æœŸçš„è¾“å…¥å­—æ®µï¼š color é¢œè‰²é€‰æ‹©å™¨ä¼šå‡ºç°è¾“å…¥å­—æ®µï¼š æ›´å¤šè¾“å…¥ç±»å‹ï¼štimeï¼ˆæ—¶é—´é€‰æ‹©å™¨ï¼‰ã€datetime &amp; datetime-localï¼ˆæ—¥æœŸé€‰æ‹©å™¨ï¼‰ã€searchï¼ˆæœç´¢å­—æ®µç±»ä¼¼æ–‡æœ¬å­—æ®µï¼‰ã€tel &amp; url &amp; email ï¼ˆå¯è‡ªåŠ¨éªŒè¯æ˜¯å¦æ˜¯ç”µè¯ã€ç½‘å€ã€é‚®ç®±åœ°å€ï¼‰ æ“ä½œè¡¨å• æ“ä½œå€¼ å¯¹äº textã€passwordã€hiddenä»¥åŠselect ç­‰ç›´æ¥value è·å–ã€è®¾ç½®å€¼å³å¯ï¼š 12345// &lt;input type=&quot;text&quot; name = &quot;username&quot;&gt;var input = document.getElementsByName(&#x27;username&#x27;);input.value; // ç”¨æˆ·è¾“å…¥å€¼input.value = &quot;hello!&quot;; // è®¾ç½®å€¼ å¯¹äº radio ã€checkboxï¼Œå¦‚æœè·å– value å§‹ç»ˆæ˜¯é¢„è®¾å€¼ï¼Œä¸èƒ½è·å–ç”¨æˆ·è¾“å…¥é€‰æ‹©å€¼ã€‚ åº”è¯¥ç”¨èŠ‚ç‚¹ checkedå±æ€§åˆ¤æ–­ç”¨æˆ·é€‰ä¸­ï¼š 1234567891011121314/*&lt;form&gt;&lt;input type=&quot;checkbox&quot; name=&quot;vehicle&quot; id=&quot;b&quot; value=&quot;Bike&quot;&gt;I have a bike&lt;input type=&quot;checkbox&quot; name=&quot;vehicle&quot; id=&quot;c&quot; value=&quot;Car&quot;&gt;I have a car &lt;/form&gt; */var bike = document.getElementsById(&#x27;b&#x27;);if(bike.checked)&#123; // do something&#125; bike.checked = false; // è®¾ç½®æŒ‰é’®æœªè¢«é€‰ä¸­ æäº¤è¡¨å• HTML è¡¨å•ç”¨äºæ”¶é›†ç”¨æˆ·è¾“å…¥ï¼Œæ¯”å¦‚ä¸‹ä¾‹æ”¶é›†ç”¨æˆ·è¾“å…¥çš„è´¦å·ã€å¯†ç éªŒè¯ç™»é™†ï¼š æäº¤è¡¨å•ä¸€èˆ¬æœ‰å¦‚ä¸‹ä¸‰ç§æ–¹æ³•ï¼š é€šè¿‡ æŒ‰é’®æäº¤ é€šè¿‡ form å¯¹è±¡ submit() æ–¹æ³•æäº¤ ajax æ–¹å¼æäº¤ type=â€œsubmitâ€ è¡¨å•æäº¤ 12345&lt;form action=&quot;demo_form.asp&quot; id=&quot;demo_form&quot; style=&#x27;text-align: center&#x27; method=&quot;GET&quot;&gt; &lt;p&gt;ç”¨æˆ·ï¼š&lt;input type=&quot;text&quot; id=&#x27;user&#x27; name=&#x27;user&#x27;&gt; &lt;/p&gt; &lt;p&gt;å¯†ç ï¼š&lt;input type=&quot;password&quot; id=&#x27;pwd&#x27; name = &#x27;pwd&#x27;&gt;&lt;/p&gt; &lt;input type=&quot;submit&quot; value=&quot;ç«‹å³ç™»é™†&quot; style=&#x27;width:210px&#x27;&gt; &lt;/form&gt; action å±æ€§ï¼šå®šä¹‰æäº¤è¡¨å•æ‰§è¡Œçš„åŠ¨ä½œï¼Œå¦‚æœçœç•¥åˆ™ä¼šè¢«ç½®ä¸ºå½“å‰é¡µé¢ã€‚åœ¨è¿™é‡Œæäº¤çš„è¡¨å•å€¼ä¼šäº¤ç»™è„šæœ¬ä»£ç  demo_form.asp å¤„ç†ã€‚ method å±æ€§ï¼šå®šä¹‰æäº¤æ–¹å¼ä¸ºGET æˆ–è€… POST ç‚¹å‡» ç«‹å³ç™»é™† æŒ‰é’®åï¼Œä¼šè‡ªåŠ¨æŠŠè¡¨å•å€¼æäº¤ç»™è„šæœ¬æ–‡ä»¶ demo_form.asp å¤„ç† ã€‚ æœåŠ¡å™¨æ¥æ”¶åˆ°çš„æäº¤å†…å®¹ä¸ºï¼ˆGET æ–¹å¼æäº¤ï¼‰ï¼š 1user=hwh&amp;pwd=123456 âš ï¸ åªæœ‰è®¾ç½® name å±æ€§çš„è¡¨å•å€¼æ‰ä¼šè¢«æäº¤ï¼Œæäº¤çš„å€¼æ„é€ æ–¹å¼ä¸ºï¼šname1:value1&amp;name2:value2â€¦ submit() æ–¹æ³•æäº¤ å¯ä»¥é€šè¿‡ï¼šç‚¹å‡»buttonã€ç‚¹å‡»é“¾æ¥ ç­‰æ–¹å¼è§¦å‘äº‹ä»¶ï¼Œjs è°ƒç”¨form DOMå¯¹è±¡submit() æ–¹æ³•æäº¤è¡¨å•æ•°æ®ã€‚ âš ï¸ ä¸æ¨èè¿™ç§æ–¹å¼ï¼Œæ‰°ä¹±äº†åŸæœ‰æµè§ˆå™¨æäº¤è¡¨å•ã€‚ 12345&lt;form action=&quot;demo_form.asp&quot; id=&quot;demo_form&quot; style=&#x27;text-align: center&#x27; method=&quot;GET&quot;&gt; &lt;p&gt;ç”¨æˆ·ï¼š&lt;input type=&quot;text&quot; id=&#x27;user&#x27; name=&#x27;user&#x27;&gt; &lt;/p&gt; &lt;p&gt;å¯†ç ï¼š&lt;input type=&quot;password&quot; id=&#x27;pwd&#x27; name = &#x27;pwd&#x27;&gt;&lt;/p&gt; &lt;input type=&quot;button&quot; id=&#x27;btn&#x27; value=&quot;ç«‹å³ç™»é™†&quot; onclick=&quot;submitForm()&quot; style=&#x27;width:210px&#x27;&gt; &lt;/form&gt; å’Œå‰é¢ type=â€œsubmitâ€ è¡¨å•æäº¤æ–¹å¼ å¯¹æ¯”ï¼Œtype=â€œsubmitâ€ è¢«ä¿®æ”¹ä¸º â€”&gt; type=â€œbuttonâ€ button æŒ‰é’®è®¾ç½®äº†å±æ€§ onclick ï¼Œç»‘å®šclick äº‹ä»¶æ‰§è¡Œ submitForm() å‡½æ•°ã€‚ 12345var form = document.getElementById(&quot;demo_form&quot;);function submitForm()&#123; form.submit();&#125; ä¹Ÿå¯ç”¨ jQuery å®ç° ï¼š 123456789var form = $(&quot;#demo_form&quot;);var button = $(&quot;#btn&quot;);button.click( function() &#123; form.submit(); &#125;); æœåŠ¡å™¨æ¥æ”¶åˆ°çš„æäº¤å†…å®¹ä¸ºï¼ˆGET æ–¹å¼æäº¤ï¼‰ï¼š 1user=hwh&amp;pwd=123456 ajax æäº¤ ajax æ–¹å¼æäº¤éœ€è¦å…ˆç†è§£ 5.5 AJAX ä¸€èŠ‚ã€‚ html ä»£ç éƒ¨åˆ†ï¼š 12345&lt;form action=&quot;&quot; id=&quot;demo_form&quot; style=&#x27;text-align: center&#x27; method=&quot;GET&quot;&gt; &lt;p&gt;ç”¨æˆ·ï¼š&lt;input type=&quot;text&quot; id=&#x27;user&#x27; name=&#x27;user&#x27;&gt; &lt;/p&gt; &lt;p&gt;å¯†ç ï¼š&lt;input type=&quot;password&quot; id=&#x27;pwd&#x27; name = &#x27;pwd&#x27;&gt;&lt;/p&gt; &lt;input type=&quot;button&quot; id=&#x27;btn&#x27; value=&quot;ç«‹å³ç™»é™†&quot; onclick=&quot;submitForm()&quot; style=&#x27;width:210px&#x27;&gt; &lt;/form&gt; ç‚¹å‡»ç™»é™†æŒ‰é’®ï¼Œå‘é€ ajax è¯·æ±‚ js ä»£ç éƒ¨åˆ†ï¼š 1234567891011121314function submitForm()&#123; // åˆ›å»ºå¯¹è±¡ var xmlhttp = new XMLHttpRequest(); // ç»‘å®šonreadystatechangeäº‹ä»¶å¤„ç†æœåŠ¡å™¨å“åº” xmlhttp.onreadystatechange = function() &#123; if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200) alert(xmlhttp.responseText) &#125; // å‘é€è¯·æ±‚ xmlhttp.open(&quot;GET&quot;,&quot;/demo_form.asp&quot;,true); xmlhttp.send();&#125; ğŸ™‚ ä¹Ÿå¯ç”¨ jQuery å®ç° ajax è¯·æ±‚ï¼š 12345678910111213141516function submitForm()&#123; var userName = $(&#x27;#user&#x27;).val(); var password = $(&#x27;#pwd&#x27;).val(); $.ajax ( &#123; type: &quot;Get&quot;, url: &quot;/demo_form.asp&quot;, username: userName, password:password, dataType : &quot;json&quot;, success: function(respMsg)&#123;&#125; &#125; );&#125; æ›´å¤šæäº¤æ–¹å¼ æ›´å¤šæäº¤æ–¹å¼ï¼Œå‚è€ƒï¼šå…­ç§æäº¤ form è¡¨å•æ–¹å¼ 5.4 æ“ä½œæ–‡ä»¶ ç”¨åˆ°å†æã€‚ 5.5 AJAX ä»€ä¹ˆæ˜¯ AJAX ? ä¼ ç»Ÿçš„ç½‘é¡µï¼ˆä¸ä½¿ç”¨ AJAXï¼‰å¦‚æœéœ€è¦æ›´æ–°å†…å®¹ï¼Œå¿…éœ€é‡è½½æ•´ä¸ªç½‘é¡µé¢ã€‚ å¦‚ä½•ä¸é‡æ–°åŠ è½½ç•Œé¢æ›´æ–°å†…å®¹ï¼Ÿ AJAX = å¼‚æ­¥ JavaScript å’Œ XMLï¼Œå¯ä»¥å®ç°ç½‘é¡µå¼‚æ­¥æ›´æ–°ï¼Œè¿™æ„å‘³ç€ä¸é‡æ–°åŠ è½½ç½‘é¡µè€Œè¿›è¡Œæ›´æ–°ã€‚ AJAX åº”ç”¨å®ä¾‹ å½“æˆ‘ä»¬ä½¿ç”¨ç™¾åº¦æœç´¢ï¼Œåœ¨è¾“å…¥æ¡†è¾“å…¥æœç´¢å†…å®¹æ—¶ï¼Œé€šè¿‡AJAXå’ŒæœåŠ¡å™¨è¿›è¡Œè¯·æ±‚è¿”å›ä¸€åˆ—æ¨èæœç´¢ç»“æœã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¹¶æ²¡æœ‰é‡æ–°åŠ è½½ç•Œé¢ã€‚ é‚£ä¹ˆåœ¨å‰ç«¯å’ŒæœåŠ¡å™¨åå°éƒ½æ˜¯å…·ä½“æ€ä¹ˆå®ç°æ²Ÿé€šå‘¢ï¼Ÿè¿™é‡Œä»¥ä¸€ä¸ªæ¨èå§“åå®ä¾‹demoä¸ºä¾‹ã€‚ PART1 ï¼š å‰ç«¯html å‰ç«¯ html å®ç°è§ä¸‹ï¼š 123456789101112131415&lt;html&gt;&lt;head&gt;&lt;script type=&quot;text/javascript&quot;&gt; // ajaxéƒ¨åˆ†... &lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;h3&gt;è¯·åœ¨ä¸‹é¢çš„è¾“å…¥æ¡†ä¸­é”®å…¥å­—æ¯ï¼ˆA - Zï¼‰ï¼š&lt;/h3&gt;&lt;form action=&quot;&quot;&gt; å§“æ°ï¼š&lt;input type=&quot;text&quot; id=&quot;txt1&quot; onkeyup=&quot;showHint(this.value)&quot; /&gt;&lt;/form&gt;&lt;p&gt;å»ºè®®ï¼š&lt;span id=&quot;txtHint&quot;&gt;&lt;/span&gt;&lt;/p&gt; &lt;/body&gt;&lt;/html&gt; PART2 ï¼šå‰ç«¯ js å®ç° AJAX 123456789101112131415161718192021222324// ajaxéƒ¨åˆ†...function success(res) &#123; console.log(&quot;æ‹¿åˆ°æœåŠ¡å™¨æˆåŠŸå“åº”ç»“æœï¼š&quot; + res); &#125;function fail(res) &#123; console.log(&quot;æ‹¿åˆ°æœåŠ¡å™¨å¤±è´¥å“åº”ç»“æœï¼š&quot; + res);&#125;function showHint(str)&#123; // åˆ›å»ºå¯¹è±¡ var xmlhttp = new XMLHttpRequest(); // ç»‘å®šonreadystatechangeäº‹ä»¶å¤„ç†æœåŠ¡å™¨å“åº” xmlhttp.onreadystatechange = function() &#123; if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200) &#123; success(xmlhttp.responseText); &#125; else &#123; fail(xmlhttp.responseText); &#125; &#125; // å‘é€è¯·æ±‚ xmlhttp.open(&quot;GET&quot;,&quot;/ajax/gethint.asp?q=&quot;+str,true); xmlhttp.send();&#125; ä»¥ä¸‹ç»†åˆ†ajax æ‰§è¡Œè¿‡ç¨‹ï¼š åˆ›å»ºå¯¹è±¡ ç°ä»£æµè§ˆå™¨ä½¿ç”¨ XMLHttpRequest å¯¹è±¡ ç”¨äºåœ¨åå°ä¸æœåŠ¡å™¨äº¤æ¢æ•°æ®ï¼š 1var xmlhttp=new XMLHttpRequest(); å¯¹äºIE5ã€6ä¸å¾—ä¸ä½¿ç”¨ ActiveXObject å¯¹è±¡ï¼š 1var xmlhttp=new XMLHttpRequest(); å‘é€è¯·æ±‚ å¦‚éœ€å°†è¯·æ±‚å‘é€åˆ°æœåŠ¡å™¨ï¼Œæˆ‘ä»¬ä½¿ç”¨ XMLHttpRequest å¯¹è±¡çš„ open() &amp; send() æ–¹æ³•ï¼š æ–¹æ³• æè¿° open(method,url,async) è§„å®šï¼šè¯·æ±‚çš„ç±»å‹ã€URLå¤„ç†è„šæœ¬æ–‡ä»¶ ã€æ˜¯å¦å¼‚æ­¥å¤„ç†è¯·æ±‚ send(string) å°†è¯·æ±‚å‘é€åˆ°æœåŠ¡å™¨ï¼šstring å‚æ•°ä»…ç”¨äº POST è¯·æ±‚ 12xmlhttp.open(&quot;GET&quot;,&quot;/ajax/gethint.asp?q=&quot;+str,true);xmlhttp.send(); è¯·æ±‚æ–¹æ³•ä¸ºGET ç±»å‹ï¼Œåœ¨ä»¥ä¸‹æƒ…å†µæ¨èä½¿ç”¨ POST è¯·æ±‚ï¼š æ— æ³•ä½¿ç”¨ç¼“å­˜æ–‡ä»¶ï¼ˆæ›´æ–°æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶æˆ–æ•°æ®åº“ï¼‰ å‘æœåŠ¡å™¨å‘é€å¤§é‡æ•°æ®ï¼ˆPOST æ²¡æœ‰æ•°æ®é‡é™åˆ¶ï¼‰ å‘é€åŒ…å«æœªçŸ¥å­—ç¬¦çš„ç”¨æˆ·è¾“å…¥æ—¶ï¼ŒPOST æ¯” GET æ›´ç¨³å®šä¹Ÿæ›´å¯é  url = /ajax/gethint.asp?q= str ï¼š/ajax/gethint.asp æ˜¯å¤„ç†è„šæœ¬é€šå¸¸ä¸º ASP/PHP æ–‡ä»¶ ï¼›?q=str æ˜¯è¯·æ±‚çš„å‚æ•°ï¼ŒGET æ–¹å¼å¿…é¡»å‘URL æ·»åŠ ä¿¡æ¯ã€‚ true ï¼šè¡¨ç¤ºå¼€å¯å¼‚æ­¥ï¼ŒXMLHttpRequest å¯¹è±¡å¦‚æœè¦ç”¨äº AJAX çš„è¯å¿…é¡»è®¾ç½®ä¸º true ã€‚ æœåŠ¡å™¨å“åº” å¦‚éœ€è·å¾—æ¥è‡ªæœåŠ¡å™¨çš„å“åº”ï¼Œä½¿ç”¨ XMLHttpRequest å¯¹è±¡çš„ responseText ã€ responseXML å±æ€§ï¼š å±æ€§ æè¿° responseText è·å¾—å­—ç¬¦ä¸²å½¢å¼çš„å“åº”æ•°æ® responseXML è·å¾— XML å½¢å¼çš„å“åº”æ•°æ® åŒæ—¶ï¼Œé€šè¿‡è„šæœ¬å’ŒæœåŠ¡å™¨äº¤äº’è¿‡ç¨‹ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®è¿æ¥çŠ¶æ€æ¥è§¦å‘æ‰§è¡Œæ“ä½œã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨XMLHttpRequest å¯¹è±¡çš„ onreadystatechange äº‹ä»¶ï¼š å±æ€§ æè¿° onreadystatechange å­˜å‚¨å‡½æ•°ï¼ˆæˆ–å‡½æ•°åï¼‰ï¼Œæ¯å½“ readyState å±æ€§æ”¹å˜æ—¶ï¼Œå°±ä¼šè°ƒç”¨è¯¥å‡½æ•°ã€‚ readyState åŒå‰ responseText ã€ responseXML ä¹Ÿæ˜¯XMLHttpRequest å¯¹è±¡å±æ€§ï¼š å±æ€§ æè¿° readyState å­˜æœ‰ XMLHttpRequest çš„çŠ¶æ€ï¼šä» 0 --&gt; 4 å‘ç”Ÿå˜åŒ– status 200: â€œOKâ€ 404: æœªæ‰¾åˆ°é¡µé¢ å¯¹åº”å®é™…ä»£ç ä¸ºï¼š 1234567891011xmlhttp.onreadystatechange = function()&#123; if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200) &#123; success(xmlhttp.responseText); &#125; else &#123; fail(xmlhttp.responseText); &#125;&#125; PART3 ï¼šæœåŠ¡å™¨ç«¯*.ASP* è„šæœ¬ ä»¥ä¸‹ä¸º gethint.asp æ–‡ä»¶ï¼Œæ ¹æ®ç”¨æˆ·è¾“å…¥å­—æ¯è¿”å›æ¨èçš„åå­—ï¼š ğŸ™‚ å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç”¨ PHP å®ç°ï¼Œè¿™é‡Œä»ç•¥ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960&lt;%response.expires=-1dim a(30)&#x27;ç”¨åå­—æ¥å¡«å……æ•°ç»„a(1)=&quot;Anna&quot;a(2)=&quot;Brittany&quot;a(3)=&quot;Cinderella&quot;a(4)=&quot;Diana&quot;a(5)=&quot;Eva&quot;a(6)=&quot;Fiona&quot;a(7)=&quot;Gunda&quot;a(8)=&quot;Hege&quot;a(9)=&quot;Inga&quot;a(10)=&quot;Johanna&quot;a(11)=&quot;Kitty&quot;a(12)=&quot;Linda&quot;a(13)=&quot;Nina&quot;a(14)=&quot;Ophelia&quot;a(15)=&quot;Petunia&quot;a(16)=&quot;Amanda&quot;a(17)=&quot;Raquel&quot;a(18)=&quot;Cindy&quot;a(19)=&quot;Doris&quot;a(20)=&quot;Eve&quot;a(21)=&quot;Evita&quot;a(22)=&quot;Sunniva&quot;a(23)=&quot;Tove&quot;a(24)=&quot;Unni&quot;a(25)=&quot;Violet&quot;a(26)=&quot;Liza&quot;a(27)=&quot;Elizabeth&quot;a(28)=&quot;Ellen&quot;a(29)=&quot;Wenche&quot;a(30)=&quot;Vicky&quot;&#x27;è·å¾—æ¥è‡ª URL çš„ q å‚æ•°q=ucase(request.querystring(&quot;q&quot;))&#x27;å¦‚æœ q å¤§äº 0ï¼Œåˆ™æŸ¥æ‰¾æ•°ç»„ä¸­çš„æ‰€æœ‰æç¤ºif len(q)&gt;0 then hint=&quot;&quot; for i=1 to 30 if q=ucase(mid(a(i),1,len(q))) then if hint=&quot;&quot; then hint=a(i) else hint=hint &amp; &quot; , &quot; &amp; a(i) end if end if nextend if&#x27;å¦‚æœæœªæ‰¾åˆ°æç¤ºï¼Œåˆ™è¾“å‡º &quot;no suggestion&quot;&#x27;å¦åˆ™è¾“å‡ºæ­£ç¡®çš„å€¼if hint=&quot;&quot; then response.write(&quot;no suggestion&quot;)else response.write(hint)end if%&gt; jQuery &amp; ajax jQuery æä¾›äº†å¯¹JavaScript ajax é«˜åº¦çš„å°è£…API ï¼Œå¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š å‡½æ•° æè¿° $.ajax({name:val, name:val,â€¦}) å¸¸ç”¨äºå…¶ä»–jQuery Ajaxæ–¹æ³•ä¸èƒ½å®Œæˆçš„è¯·æ±‚ $.post(url, data, func, dataType) POSTæ–¹å¼æ‰§è¡ŒAjaxè¯·æ±‚ï¼Œä»æœåŠ¡å™¨åŠ è½½æ•°æ®ã€‚ $.get(url, data, func, dataType) GETæ–¹å¼æ‰§è¡ŒAjaxè¯·æ±‚ï¼Œä»æœåŠ¡å™¨åŠ è½½æ•°æ®ã€‚ $.getJSON(url, data, func) GETæ–¹å¼ä»æœåŠ¡å™¨åŠ è½½JSONæ ¼å¼æ•°æ®ã€‚ç›¸è¾ƒäº$.get()ä¸å¿…å†æŒ‡å®šdataType $.load(url, data, func) POSTæ–¹å¼å°†æœåŠ¡å™¨åŠ è½½çš„æ•°æ®æ’å…¥æŒ‡å®šDOMä¸­ï¼Œdataä¸å­˜åœ¨åˆ™ä»¥GETæ–¹å¼ $.getScript(url, func) GETæ–¹å¼æ‰§è¡ŒAjaxè¯·æ±‚ï¼Œä»æœåŠ¡å™¨åŠ è½½å¹¶æ‰§è¡Œå›ä¼ çš„JavaScriptã€‚ æ³¨ï¼šä¸Šè¿°æ–¹æ³• func éƒ½æ˜¯æŒ‡åœ¨æ–¹æ³•å®Œæˆåæ‰§è¡Œçš„å›è°ƒï¼ˆcallbackï¼‰å‡½æ•° ã€‚ æ ¼å¼ï¼šfunc(data, status, xhr) å‚æ•°ï¼šdata â€” æœåŠ¡å™¨è¿”å›æ•°æ®ï¼›status â€” å“åº”çŠ¶æ€ ï¼›xhr â€“ XMLHttpRequestå¯¹è±¡ã€‚ä¸€èˆ¬å…³æ³¨ data å³å¯ã€‚ $.ajax() .ajax()âˆ—å®Œæ•´å‚æ•°å½¢å¼ä¸ºï¼šâˆ—.ajax()* å®Œæ•´å‚æ•°å½¢å¼ä¸ºï¼š*.ajax()âˆ—å®Œæ•´å‚æ•°å½¢å¼ä¸ºï¼šâˆ—.ajax({name:val, name:val,â€¦}) ï¼Œå…¶å‚æ•°ä¸ºä¸€ä¸ªå¯¹è±¡ {} ï¼Œå¯é€‰å­—æ®µä¸ºï¼š urlï¼šé“¾æ¥åœ°å€ï¼Œå­—ç¬¦ä¸²è¡¨ç¤º dataï¼šéœ€å‘é€åˆ°æœåŠ¡å™¨çš„æ•°æ®ï¼ŒGETã€POSTéƒ½å¯ä»¥ï¼Œæ ¼å¼ä¸º {A: â€˜â€¦â€™, B: â€˜â€¦â€™} typeï¼šæŒ‡å®šè¯·æ±‚ç±»å‹ä¸ºï¼šâ€œPOSTâ€ æˆ– â€œGETâ€ timeoutï¼šè¯·æ±‚è¶…æ—¶æ—¶é—´ / æ¯«ç§’ cacheï¼šæ˜¯å¦ç¼“å­˜è¯·æ±‚ç»“æœï¼Œboolè¡¨ç¤º contentTypeï¼šå†…å®¹ç±»å‹ï¼Œé»˜è®¤ä¸º â€œapplication/x-www-form-urlencodedâ€ dataTypeï¼šæœåŠ¡å™¨å“åº”çš„æ•°æ®ç±»å‹ï¼Œå­—ç¬¦ä¸²è¡¨ç¤º successï¼šè¯·æ±‚æˆåŠŸåï¼ŒæœåŠ¡å™¨å›è°ƒçš„å‡½æ•° errorï¼šè¯·æ±‚å¤±è´¥åï¼ŒæœåŠ¡å™¨å›è°ƒçš„å‡½æ•° completeï¼šè¯·æ±‚å®Œæˆåè°ƒç”¨çš„å‡½æ•°ï¼Œæ— è®ºè¯·æ±‚æ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œéƒ½ä¼šè°ƒç”¨è¯¥å‡½æ•°ï¼›å¦‚æœè®¾ç½®äº†successä¸errorå‡½æ•°ï¼Œåˆ™è¯¥å‡½æ•°åœ¨å®ƒä»¬ä¹‹åè¢«è°ƒç”¨ asyncï¼šæ˜¯å¦å¼‚æ­¥å¤„ç†ï¼Œboolè¡¨ç¤ºï¼Œé»˜è®¤ä¸ºtrueï¼›è®¾ç½®è¯¥å€¼ä¸ºfalseåï¼ŒJSä¸ä¼šå‘ä¸‹æ‰§è¡Œï¼Œè€Œæ˜¯åŸåœ°ç­‰å¾…æœåŠ¡å™¨è¿”å›æ•°æ®ï¼Œå¹¶å®Œæˆç›¸åº”çš„å›è°ƒå‡½æ•°åï¼Œå†å‘ä¸‹æ‰§è¡Œ usernameï¼šè®¿é—®è®¤è¯è¯·æ±‚ä¸­æºå¸¦çš„ç”¨æˆ·åï¼Œå­—ç¬¦ä¸²è¡¨ç¤º passwordï¼šè¿”å›è®¤è¯è¯·æ±‚ä¸­æºå¸¦çš„å¯†ç ï¼Œå­—ç¬¦ä¸²è¡¨ç¤º ä¸‹é¢é€šè¿‡ $.ajax() æ–¹æ³•è¯·æ±‚æœåŠ¡å™¨åŠ è½½ä¸€ä¸ªtxtæ–‡æœ¬ã€‚ htmlä»£ç éƒ¨åˆ†ï¼š 123456789101112&lt;html&gt;&lt;head&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;/jquery/jquery.js&quot;&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;div id=&quot;myDiv&quot;&gt;&lt;h2&gt;é€šè¿‡ AJAX æ”¹å˜æ–‡æœ¬&lt;/h2&gt;&lt;/div&gt;&lt;button id=&quot;b01&quot; type=&quot;button&quot;&gt;ç‚¹æˆ‘åŠ è½½txt&lt;/button&gt;&lt;/body&gt;&lt;script type=&quot;text/javascript&quot;&gt;// ajaxå®ç°éƒ¨åˆ†...&lt;/script&gt;&lt;/html&gt; 1234567891011// ajaxå®ç°éƒ¨åˆ†...$(&quot;#b01&quot;).click(function()&#123; htmlobj=$.ajax (&#123; url:&quot;/jquery/test1.txt&quot;, type:&quot;GET&quot;, async:false &#125;); $(&quot;#myDiv&quot;).html(htmlobj.responseText);&#125;); ç‚¹å‡»åæ˜¾ç¤ºï¼š å›è°ƒå‡½æ•° ä¹Ÿå¯ä½¿ç”¨å›è°ƒå‡½æ•°ï¼Œå¦‚æœæˆåŠŸå°±æ˜¾ç¤ºï¼š 1234567891011// ajaxå®ç°éƒ¨åˆ†...$(&quot;#b01&quot;).click(function()&#123; htmlobj=$.ajax (&#123; url:&quot;/jquery/test1.txt&quot;, type:&quot;GET&quot;, async:false, success:function(data)&#123; $(&quot;#myDiv&quot;).html(data); &#125; &#125;); &#125;); å›è°ƒå‡½æ•°successæœ‰å‚æ•° data ï¼Œæ¥æ”¶æœåŠ¡å™¨è¿”å›æ•°æ®ï¼Œè¿™é‡Œæ¥æ”¶çš„æ˜¯æ–‡æœ¬ï¼štest1.txt ã€‚ ä¹Ÿå¯ä»¥ä½¿ç”¨é“¾å¼è°ƒç”¨å›è°ƒå‡½æ•°ï¼Œç±»ä¼¼å‰é¢ Promise ï¼š 12345678910111213// ajaxå®ç°éƒ¨åˆ†...$(&quot;#b01&quot;).click(function()&#123; htmlobj=$.ajax (&#123; url:&quot;/jquery/test1.txt&quot;, type:&quot;GET&quot;, async:false &#125;) .done(function(data)&#123; $(&quot;#myDiv&quot;).html(data); &#125;) .fail(function (xhr,status)&#123; $(&quot;#myDiv&quot;).html(&#x27;å¤±è´¥:&#x27;+xhr.status+&#x27;åŸå› :&#x27;+ status);&#125;) .always(function () &#123; alert(&#x27;è¯·æ±‚å®Œæˆ: æ— è®ºæˆåŠŸæˆ–å¤±è´¥éƒ½ä¼šè°ƒç”¨&#x27;);&#125;);&#125;); $.get() ç®€å•çš„ GET è¯·æ±‚åŠŸèƒ½ä»¥*.get()âˆ—å–ä»£å¤æ‚âˆ—.get()* å–ä»£å¤æ‚ *.get()âˆ—å–ä»£å¤æ‚âˆ—.ajax()* ï¼Œè¯·æ±‚æˆåŠŸæ—¶å¯è°ƒç”¨å›è°ƒå‡½æ•°ã€‚ å…¶æ ¼å¼ä¸ºï¼š$.get(url, data, func, dataType) urlï¼šé“¾æ¥åœ°å€ï¼Œå­—ç¬¦ä¸²è¡¨ç¤º dataï¼šéœ€è¦å‘ç”Ÿåˆ°æœåŠ¡å™¨çš„æ•°æ®ï¼Œä»¥é”®å€¼å¯¹å½¢å¼ func(data, status, xhr)ï¼šå›è°ƒå‡½æ•°ï¼Œdata â€” æœåŠ¡å™¨è¿”å›æ•°æ®ï¼›status â€” å“åº”çŠ¶æ€ ï¼›xhr â€“ XMLHttpRequestå¯¹è±¡ã€‚ä¸€èˆ¬å…³æ³¨ data å³å¯ã€‚ dataTypeï¼šæœåŠ¡å™¨è¿”å›æ•°æ®çš„æ ¼å¼ ä»¥*$.get()* å®ç°ä¸Šè¿°ç‚¹å‡»æŒ‰é’®åŠ è½½æŒ‡å®šæ–‡æœ¬ã€‚ 123456789// ajaxå®ç°éƒ¨åˆ†...$(&quot;#b01&quot;).click(function()&#123; htmlobj=$.get(&quot;/jquery/test1.txt&quot; ,function(data,status) &#123; $(&quot;#myDiv&quot;).html(data); &#125;); &#125;); å›è°ƒå‡½æ•°function(data,status) å‚æ•°dataã€status åˆ†åˆ«æ¥æ”¶æœåŠ¡å™¨è¿”å›çš„æ•°æ®ã€çŠ¶æ€ã€‚ ç‚¹å‡»åæ˜¾ç¤ºï¼š âš ï¸ ç»è¿‡æµ‹è¯•ï¼Œä¼¼ä¹åªèƒ½åœ¨å›è°ƒå‡½æ•°é‡Œæ¥æ”¶æ•°æ®ï¼Œåƒ*$.ajax()* ä¸€æ ·ç”¨responseText è·å–è¿”å›æ•°æ®ä¸æˆåŠŸï¼š 123456// ajaxå®ç°éƒ¨åˆ†...$(&quot;#b01&quot;).click(function()&#123; htmlobj=$.get(&quot;/jquery/test1.txt&quot;); $(&quot;#myDiv&quot;).html(htmlobj.responseText); // ç‚¹å‡»æŒ‰é’®åŠ è½½æ•°æ®ä¸æˆåŠŸï¼Ÿï¼Ÿï¼&#125;); $.post() å’Œ $.get() ç±»ä¼¼ï¼Œæ¥æ”¶å‚æ•°ä¸€è‡´ï¼Œé™¤äº†è¯·æ±‚æ–¹å¼å˜ä¸ºäº† post æ–¹å¼ã€‚ å…¶æ ¼å¼ä¸ºï¼š$.post(url, data, func, dataType) å‘æŒ‡å®šç•Œé¢å‘é€ HTTP POST è¯·æ±‚ï¼Œå¹¶è·å¾—è¿”å›çš„ç»“æœ ã€‚ 12345678910111213141516171819202122232425&lt;html&gt;&lt;head&gt;&lt;script src=&quot;/jquery/jquery-1.11.1.min.js&quot;&gt;&lt;/script&gt;&lt;/head&gt;&lt;body style=&quot;text-align: center&quot;&gt;&lt;p&gt; å§“åï¼š&lt;input id=&#x27;user&#x27;&gt; &lt;/p&gt;&lt;p&gt; åŸå¸‚ï¼š&lt;input id=&#x27;city&#x27;&gt; &lt;/p&gt;&lt;button&gt;å‘é€ POST è¯·æ±‚ï¼Œè·å–è¿”å›ç»“æœ &lt;/button&gt;&lt;div id=&quot;myDiv&quot;&gt;&lt;/div&gt;&lt;/body&gt;&lt;script&gt;$(&quot;button&quot;).click(function()&#123; $.post(&quot;/example/jquery/demo_test_post.asp&quot;, &#123; name:$(&#x27;#user&#x27;).val(), city:$(&#x27;#city&#x27;).val() &#125;, function(data,status) &#123; $(&#x27;#myDiv&#x27;).html(&quot;æ•°æ®ï¼š&quot; + data + &quot;&lt;br&gt;çŠ¶æ€ï¼š&quot; + status); &#125;);&#125;);&lt;/script&gt;&lt;/html&gt; $.load() $.load() å¦‚æœæ•°æ®å­˜åœ¨åˆ™ä»¥ POST æ–¹å¼ï¼ˆä¸å­˜åœ¨åˆ™ä»¥ GET æ–¹å¼ï¼‰åŠ è½½æœåŠ¡å™¨è¿”å›çš„æ•°æ®åˆ° æŒ‡å®š DOM èŠ‚ç‚¹ä¸­ ã€‚ å…¶æ ¼å¼ä¸ºï¼š$(selector).load(URL,data,func)ã€‚ ä¸¾ä¸ªä¾‹å­ ä¾æ—§ä»¥ä¸Š $.post() æ‰€ä¸¾å®ä¾‹ä¸ºä¾‹ï¼ŒåŠ è½½æœåŠ¡å™¨è¿”å›çš„ç»“æœåˆ°æŒ‡å®šèŠ‚ç‚¹ä¸­ã€‚ 123456789101112131415161718192021222324&lt;html&gt;&lt;head&gt;&lt;script src=&quot;/jquery/jquery-1.11.1.min.js&quot;&gt;&lt;/script&gt;&lt;/head&gt;&lt;body style=&quot;text-align: center&quot;&gt;&lt;p&gt; å§“åï¼š&lt;input id=&#x27;user&#x27;&gt; &lt;/p&gt;&lt;p&gt; åŸå¸‚ï¼š&lt;input id=&#x27;city&#x27;&gt; &lt;/p&gt;&lt;button&gt;å‘é€ POST è¯·æ±‚ï¼Œè·å–è¿”å›ç»“æœ &lt;/button&gt;&lt;div id=&quot;myDiv&quot;&gt;&lt;/div&gt;&lt;/body&gt;&lt;script&gt;$(&quot;button&quot;).click(function()&#123; $(&#x27;#myDiv&#x27;).load(&quot;/example/jquery/demo_test_post.asp&quot;, &#123; name:$(&#x27;#user&#x27;).val(), city:$(&#x27;#city&#x27;).val() &#125; );&#125;);&lt;/script&gt;&lt;/html&gt; ä¸Šé¢ä¼šå°†è¿”å›çš„ç»“æœè‡ªåŠ¨åŠ è½½åˆ°æŒ‡å®šèŠ‚ç‚¹ #myDiv ä¸­ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å›è°ƒå‡½æ•°æ¥è‡ªå®šä¹‰åŠ è½½ï¼š 1234567891011121314$(&quot;button&quot;).click(function()&#123; $(&#x27;#myDiv&#x27;).load(&quot;/example/jquery/demo_test_post.asp&quot;, &#123; name:$(&#x27;#user&#x27;).val(), city:$(&#x27;#city&#x27;).val() &#125;, function(data,status,xhr) &#123; $(&#x27;#myDiv&#x27;).html(&quot;æ•°æ®ï¼š&quot; + data + &quot;&lt;br&gt;çŠ¶æ€ï¼š&quot; + status); &#125; );&#125;); å›è°ƒå‡½æ•°å‚æ•°æ„ä¹‰åŒå‰ï¼Œæ˜¾ç¤ºç»“æœä¸ºï¼š å†ä¸¾ä¸ªä¾‹å­ ä¹Ÿå¯ç›´æ¥åŠ è½½url æŒ‡å®šèµ„æºï¼Œä¸ç”¨ä¼ é€’å…¶å®ƒå‚æ•°ã€‚ ç‚¹å‡»æŒ‰é’®åï¼ŒæŒ‡å®šèŠ‚ç‚¹ç›´æ¥åŠ è½½ demo_test.txt æ–‡ä»¶å†…å®¹ã€‚ 1234567891011121314151617&lt;html&gt;&lt;head&gt;&lt;script src=&quot;/jquery/jquery-1.11.1.min.js&quot;&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;h3 id=&quot;test&quot;&gt;è¯·ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®ï¼Œé€šè¿‡ jQuery AJAX æ”¹å˜è¿™æ®µæ–‡æœ¬ã€‚&lt;/h3&gt;&lt;button id=&quot;btn1&quot; type=&quot;button&quot;&gt;è·å¾—å¤–éƒ¨çš„å†…å®¹&lt;/button&gt;&lt;/body&gt;&lt;script&gt; $(&quot;#btn1&quot;).click(function() &#123; $(&#x27;#test&#x27;).load(&#x27;/example/jquery/demo_test.txt&#x27;); &#125;);&lt;/script&gt;&lt;/html&gt; ç‚¹å‡»åæ˜¾ç¤ºï¼š 5.6 Promise åˆè¯† Promise å…ˆä¸ç†ä¼šé‚£äº›å¤æ‚çš„æ¦‚å¿µï¼Œæˆ‘ä»¬æ¥ç›´è§‚äº†è§£ä¸‹ Promise æ˜¯ä»€ä¹ˆï¼š å¾ˆå®¹æ˜“å¾—çŸ¥ï¼ŒPromise åŸæ¥æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼š åœ¨è‡ªå·±èº«ä¸Šæœ‰ all()ã€reject()ã€resolve() ç­‰æ–¹æ³• åœ¨åŸå‹ä¸Šæœ‰ then()ã€catch() ç­‰æ–¹æ³•ï¼Œthen() è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ã€‚ é‚£ä¹ˆ new Promise() å‡ºæ¥çš„å¯¹è±¡è‡ªç„¶ä¹Ÿæ‹¥æœ‰ä»¥ä¸Šæ–¹æ³•ã€‚ ä¸¾ä¸ªæ —å­ åŸç”Ÿ JavaScript æ‰§è¡Œå¼‚æ­¥ åœ¨ JavaScript ä¸–ç•Œé‡Œï¼Œæ‰€æœ‰ä»£ç éƒ½æ˜¯å•çº¿ç¨‹æ‰§è¡Œã€‚å› æ­¤ JavaScript æ‰€æœ‰ç½‘ç»œæ“ä½œã€æµè§ˆå™¨äº‹ä»¶éƒ½å¿…é¡»å¼‚æ­¥æ‰§è¡Œã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æŸä¸ªæ—¶é—´ç‚¹ï¼Œä¼šæ‰§è¡ŒæŸä¸ªå‡½æ•°ã€‚ç„¶åæ ¹æ®å‡½æ•°çŠ¶æ€æ‰§è¡Œä¸åŒçš„å¤„ç†å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯å¸¸è¯´çš„å›è°ƒå‡½æ•°ã€‚ å¦‚ï¼Œç”Ÿæˆä¸€ä¸ª0-2ä¹‹é—´çš„éšæœºæ•°ï¼Œå¦‚æœå°äº1ï¼Œåˆ™ç­‰å¾…1såè¿”å›æˆåŠŸï¼Œå¦åˆ™è¿”å›å¤±è´¥ã€‚ 123456789101112131415161718192021function success(str)&#123; console.log(str); &#125;function fail(str) &#123; console.log(str); &#125;function test()&#123; var timeOut = Math.random() * 2; log(&#x27;set timeout to: &#x27; + timeOut + &#x27; seconds.&#x27;); setTimeout(function () &#123; if (timeOut &lt; 1) &#123; success(&#x27;æˆåŠŸï¼šç”Ÿæˆéšæœºæ•°å°äº1&#x27;); &#125; else &#123; fail(&#x27;å¤±è´¥ï¼šç”Ÿæˆéšæœºæ•°å¤§äº1&#x27;); &#125; &#125;, 1000);&#125;test(); æœ¬æ–‡ä¸­æ‰€æœ‰å¼‚æ­¥æ“ä½œå‡ä»¥ setTimeoutä¸ºä¾‹å­ï¼Œè€Œä¸ä½¿ç”¨ ajax ã€‚ å¯ä»¥çœ‹åˆ°ï¼Œæ‰§è¡Œtest() â€”&gt; å»¶è¿Ÿ1såæ‰§è¡ŒåŒ¿ååˆ¤æ–­å‡½æ•° â€”&gt; æ ¹æ®åˆ¤æ–­ç»“æœæ‰§è¡Œå›è°ƒå‡½æ•°ï¼šsuccess() ã€fail() ã€‚ Promise æ‰§è¡Œå¼‚æ­¥ å¦‚æœæˆ‘ä»¬ç”¨ Promise å¯¹è±¡æ¥æ‰§è¡Œå¯ä»¥è¾¾åˆ°ç›¸åŒæ•ˆæœï¼š 123456789101112131415161718192021222324252627282930313233function test(resolve, reject) &#123; var timeOut = Math.random() * 2; setTimeout(function () &#123; if (timeOut &lt; 1) &#123; var date = &#x27;ç”Ÿæˆéšæœºæ•°å°äº1&#x27;; resolve(date); // ä¼ é€’å‚æ•°dateç»™Promiseå¯¹è±¡.thenæ–¹æ³•å†…éƒ¨åŒ¿åå‡½æ•°å‚æ•° &#125; else &#123; var date = &#x27;ç”Ÿæˆéšæœºæ•°å¤§äº1&#x27;; reject(date); // ä¼ é€’å‚æ•°dateç»™Promiseå¯¹è±¡.catchæ–¹æ³•å†…éƒ¨åŒ¿åå‡½æ•°å‚æ•° &#125; &#125;, 1000);&#125;var p1 = new Promise(test);var p2 = p1.then( function (result) &#123; console.log(&#x27;æˆåŠŸï¼š&#x27; + result); // å¦‚æœæ‰§è¡ŒæˆåŠŸè¾“å‡ºï¼š&#x27;æˆåŠŸï¼šç”Ÿæˆéšæœºæ•°å°äº1&#x27; &#125;);var p3 = p2.catch( function (reason) &#123; console.log(&#x27;å¤±è´¥ï¼š&#x27; + reason); // å¦‚æœæ‰§è¡Œå¤±è´¥è¾“å‡ºï¼š&#x27;å¤±è´¥ï¼šç”Ÿæˆéšæœºæ•°å¤§äº1&#x27; &#125;); å’‹çœ‹ä¹‹ä¸‹é¦–å…ˆæ–¹æ³• function test(â€¦) å’Œä¹‹å‰æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œåªä¸è¿‡å¤šäº†ä¸¤ä¸ªå‡½æ•°å‚æ•° resolve, reject ï¼Œæ›¿æ¢äº†ä¹‹å‰å›è°ƒå‡½æ•° successã€fail åœ¨æ¥ä¸‹æ¥ä»£ç ä¸­ä½ç½®ï¼Œæ•´ä½“é€»è¾‘æ²¡æœ‰å˜åŒ–ã€‚ resolve, reject å¯ä»¥åˆ†åˆ«å°† Promise çŠ¶æ€ç½®ä¸ºï¼šfullfiledã€ rejected resolve, reject è¿˜å¯å°†è‡ªèº«çš„æ¥æ”¶çš„å‚æ•°ï¼ˆæœ¬ä¾‹ä¸ºdateï¼‰ ï¼Œåˆ†åˆ«ä¼ ç»™thenã€catch æ–¹æ³•ï¼ˆè§ä¸‹ï¼‰ åªä¸è¿‡åœ¨ä¸‹é¢å¤šäº†ä¸€å±‚å¯¹ test() çš„å°è£…ï¼šåˆ›å»ºä¸€ä¸ª Promise å¯¹è±¡ï¼Œä¼ é€’ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæ‰¿è¯ºä¸€å®šæ‰§è¡Œã€‚ 1var p1 = new Promise(test); ç´§æ¥ç€æ ¹æ®æ­¤æ—¶ Promise çŠ¶æ€æ˜¯fullfiledã€ rejected æ‰§è¡Œ then() è¿˜æ˜¯ catch() æ–¹æ³•ã€‚ æ¯”å¦‚ï¼Œéšæœºæ•°&lt;1 â€”&gt; æ‰§è¡Œresolve() â€”&gt; Promise çŠ¶æ€ä¸ºfullfiled ----&gt; æ‰§è¡Œ then() æ–¹æ³•ï¼š 1234567var p2 = p1.then( function (result) &#123; console.log(&#x27;æˆåŠŸï¼š&#x27; + result); // å¦‚æœæ‰§è¡ŒæˆåŠŸè¾“å‡ºï¼š&#x27;æˆåŠŸï¼šç”Ÿæˆéšæœºæ•°å°äº1&#x27; &#125;); then(func) å‚æ•°ä¸ºä¸€ä¸ªå‡½æ•°ï¼ŒåŒæ—¶å®ƒä¹Ÿæ‹¿åˆ°äº†resolve(date) çš„å‚æ•°date ï¼Œèµ‹å€¼ç»™äº†result ï¼ˆæˆ‘æ˜¯è¿™ä¹ˆç†è§£çš„çš„ï¼‰ã€‚ æ‰€ä»¥å¦‚æœæ‰§è¡Œä¼šæ‰“å°å‡ºï¼š åŒç†ï¼Œéšæœºæ•°&gt;1 â€”&gt; æ‰§è¡Œreject() â€”&gt; Promise çŠ¶æ€ä¸º rejected ----&gt; æ‰§è¡Œ catch() æ–¹æ³•ï¼š 1234567var p3 = p2.catch( function (reason) &#123; console.log(&#x27;å¤±è´¥ï¼š&#x27; + reason); // å¦‚æœæ‰§è¡Œå¤±è´¥è¾“å‡ºï¼š&#x27;å¤±è´¥ï¼šç”Ÿæˆéšæœºæ•°å¤§äº1&#x27; &#125;); Promise å¯¹è±¡å¯ä»¥ä¸²è”èµ·æ¥ï¼Œæ‰€ä»¥ä¸Šè¿°ä»£ç å¯ä»¥ç®€åŒ–ä¸ºï¼š 12new Promise(test).then (function (result)&#123; console.log(&#x27;æˆåŠŸï¼š&#x27; + result); &#125; .catch(function (reason)&#123; console.log(&#x27;å¤±è´¥ï¼š&#x27; + reason); &#125; è¿™å°±å®Œäº†ï¼Ÿ çœ‹åˆ°è¿™å„¿ä½ å¯èƒ½ä¸å±‘ä¸€é¡¾ï¼Œè¿™ä¹ˆä¼ çš„ç¥ä¹å…¶ç¥çš„ Promise å°±è¿™ç‚¹èƒ½è€ï¼ŸæŠŠåŸæ¥å¥½å¥½çš„ test() æ–¹æ³•ï¼Œæ•´ä¸¤ä¸ªå‚æ•°ç„¶åç”¨ Promise å°è£…ä¸€ä¸‹å°±æ²¡äº†ï¼Ÿ å½“ç„¶ï¼Œçœ‹åˆ°è¿™ä½ ä¹Ÿå¯èƒ½å‘ç°äº† Promise å…¶ä¸­ä¸€ä¸ªä¼˜ç‚¹ï¼šæ‰§è¡Œä»£ç å’Œå¤„ç†ç»“æœçš„ä»£ç æ¸…æ™°åœ°åˆ†ç¦» ã€‚ æ¯”å¦‚ä¸Šé¢ï¼šæ‰§è¡Œä»£ç  test() åªè´Ÿè´£æ•´ä½“é€»è¾‘ä¼ é€’æ•°æ®ï¼Œè€Œå¤„ç†ä»£ç æ¥æ”¶æ•°æ®è¿›è¡Œå¤„ç†ç”±then() ã€ catch() å®Œæˆã€‚ æ›´å¤§ä¼˜ç‚¹ï¼Œæ˜¯ç”¨ Promise å¤„ç†å¤šä¸ªå¼‚æ­¥æ“ä½œï¼Œè¯·çœ‹ä¸‹èŠ‚ã€‚ æ›´æ­£ç¡®çš„ä½¿ç”¨Promiseå§¿åŠ¿ï¼šå¤„ç†å¤šå¼‚æ­¥ è¯•æƒ³æœ‰å¤šä¸ªå¼‚æ­¥ä»»åŠ¡å‡½æ•°ï¼Œjob1ã€job2ã€job3â€¦ï¼š æ‰§è¡Œjob1ï¼Œjob1æ‰§è¡ŒæˆåŠŸ â€”&gt; æ‰§è¡Œjob2ï¼Œjob2æ‰§è¡ŒæˆåŠŸ â€”&gt; æ‰§è¡Œjob3ï¼Œjob3æ‰§è¡ŒæˆåŠŸ â€”&gt; â€¦ æ˜¾ç„¶job1æˆäº†ä¸€ä¸ªå¤šå±‚å›è°ƒå‡½æ•°ï¼Œjob2æ‰§è¡Œå®Œæˆåä¹Ÿæœ‰ç›¸åº”å›è°ƒå‡½æ•°job3æ‰§è¡Œï¼Œjob3æœ‰å›è°ƒå‡½æ•°job4â€¦ å¦‚æœä¸ä½¿ç”¨ Promise æ„å‘³ç€æˆ‘ä»¬è¦å±‚å±‚åµŒå¥— job1ã€job2ã€job3â€¦ã€‚è¿™æ—¢ä¸æ˜“è¯»ï¼Œä¹Ÿä¸çµæ´»ï¼Œè€Œæˆ‘ä»¬ä½¿ç”¨ Promise å å¯ä»¥å°†ä»£ç ç®€å†™ä¸ºï¼š 1p.then(job1).then(job2).then(job3).then...; åˆ†åˆ«å®ç°å¼‚æ­¥å‡½æ•°job1_add1ã€job2_mul2ã€job3_div3 ä¾æ¬¡å¯¹æ•°å­—0è¿›è¡Œ *+1ã€2ã€/3ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546// æ–°å»ºä¸€ä¸ªPromiseå¯¹è±¡var p = new Promise(function (resolve, reject) &#123; resolve(0); // ä¼ é€’æ•°æ®ï¼šæ•°å­—0&#125;);// job1ä»»åŠ¡ï¼šå°†ä¼ è¿‡æ¥çš„æ•°å­—åŠ 1,è¿™é‡Œä¼ è¿‡æ¥çš„æ•°å­—æ˜¯0function job1_add1(num)&#123; /* ä¸ºä»€ä¹ˆè¿”å› Promise å¯¹è±¡ï¼Ÿ é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ï¼ŒsetTimeoutå…±æœ‰å››ä¸ªå‚æ•°ï¼Œåé¢ä¸¤ä¸ªå‚æ•°ä¼šä¼ å…¥å›è°ƒå‡½æ•°ï¼ˆè¿™é‡Œæ˜¯resolveï¼‰ æˆ‘ä»¬çŸ¥é“ï¼Œresolveå‚æ•°å¯ä»¥è¢«thenæ–¹æ³•æ‹¿åˆ°ï¼Œè¿™æ ·åœ¨æ¥ä¸‹æ¥çš„thenæ–¹æ³•å¯ä»¥è·å–åˆ°ä¼ é€’çš„å‚æ•°: p.then(job1_add1).then(job2_mul2).then(job3_div3) ä½ ä¹Ÿå¯ä»¥ç›´æ¥ä¼ é€’æ•°æ®è€ŒéPromiseå¯¹è±¡ï¼Œåé¢thenä¹Ÿå¯ä»¥æ¥æ”¶åˆ°ï¼š return num+1; */ console.log(&#x27;è®¡ç®—ï¼š&#x27;+ num + &#x27; + 1&#x27;); return new Promise(function (resolve, reject) &#123; setTimeout(resolve, 600, num + 1); &#125;);&#125;// job2ä»»åŠ¡ï¼šå°†ä¼ è¿‡æ¥çš„æ•°å­—Ã—2ï¼Œè¿™é‡Œä¼ è¿‡æ¥çš„æ˜¯0+1 = 1function job2_mul2(num)&#123; console.log(&#x27;è®¡ç®—ï¼š&#x27;+ num + &#x27; * 2&#x27;); return new Promise(function (resolve, reject) &#123; setTimeout(resolve, 500, num * 2); &#125;);&#125;// job2ä»»åŠ¡ï¼šå°†ä¼ è¿‡æ¥çš„æ•°å­—Ã·3ï¼Œè¿™é‡Œä¼ è¿‡æ¥çš„æ˜¯ (0+1)*2 = 2function job3_div3(num)&#123; console.log(&#x27;è®¡ç®—ï¼š&#x27;+ num + &#x27; / 3&#x27;); return new Promise(function (resolve, reject) &#123; setTimeout(resolve, 400, num / 3); &#125;);&#125;// æ‰§è¡Œå¤šå¼‚æ­¥ä»»åŠ¡p.then(job1_add1).then(job2_mul2).then(job3_div3); æ‰§è¡Œç»“æœï¼š æ›´å¤šæœ‰å…³ Promise é™¤äº†å‰é¢æåˆ° thenã€catch æ–¹æ³•ï¼ŒPromise è¿˜æä¾›äº†é™æ€ æ–¹æ³• allã€race ç­‰ã€‚ all() æ–¹æ³• Promise çš„all(PromiesArr) æ–¹æ³•æä¾›äº†å¹¶è¡Œæ‰§è¡Œå¼‚æ­¥æ“ä½œçš„èƒ½åŠ›ï¼Œå¹¶ä¸”åœ¨æ‰€æœ‰å¼‚æ­¥æ“ä½œæ‰§è¡Œå®Œåæ‰æ‰§è¡Œå›è°ƒã€‚ ç”±äºå¯ä»¥åœ¨ä¸€ä¸ªå›è°ƒä¸­å¤„ç†æ‰€æœ‰è¿”å›æ•°æ®ï¼Œè¿™æ ·æ¯”å¦‚åœ¨æ‰“å¼€ç½‘é¡µï¼Œé¢„å…ˆåŠ è½½éœ€è¦ç”¨åˆ°çš„æ‰€æœ‰èµ„æºå¦‚å›¾ç‰‡ç­‰ï¼Œç­‰å…¨éƒ¨åŠ è½½å®Œåœ¨æ‰§è¡Œå›è°ƒã€‚ ä¾æ—§ä»¥ä¸Šé¢å¼‚æ­¥å‡½æ•°job1_add1ã€job2_mul2ã€job3_div3 ä¸ºä¾‹ï¼š å¼‚æ­¥æ‰§è¡Œä¸‰ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œåˆ†åˆ«å°†å„è‡ªä¼ é€’çš„å‚æ•°å€¼è¿›è¡Œï¼š+1ã€*2ã€/3ã€‚ 12345Promise.all([job1_add1(1),job2_mul2(2),job3_div3(3)]) .then(function(results) &#123; console.log(results); &#125;); ä¸‰ä¸ªå¼‚æ­¥æ“ä½œéƒ½æ‰§è¡Œå®Œæ¯•åï¼Œall(PromiesArr) ä¼šæŠŠå®ƒä»¬è¿”å›çš„æ•°æ®ç»„æˆæ•°ç»„ä¼ ç»™ then()ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢resultsã€‚ æ³¨æ„æ˜¯ä¼ é€’ Promise å¯¹è±¡æ•°ç»„ï¼Œè€Œéå‡½æ•°ï¼Œä¸‹é¢è¿™ç§å†™æ³•é”™è¯¯ï¼š 1Promise.all([job1_add1,job2_mul2,job3_div3]) è¿™æ˜¯ä¼ é€’çš„å‚æ•°æ˜¯å‡½æ•°æ•°ç»„ï¼Œè€ŒéPromiseå¯¹è±¡ æ•°ç»„ã€‚åªæœ‰å‡½æ•°éƒ½æ‰§è¡Œåæ‰æ˜¯Promiseå¯¹è±¡æ•°ç»„ï¼ˆjob1_add1ã€job2_mul2ã€job3_div3 è¿”å›Promiseå¯¹è±¡ï¼‰ã€‚ æ‰€ä»¥ï¼Œall() ä¸èƒ½å®ç°å‰é¢ä¸‰ä¸ªå¼‚æ­¥æ“ä½œç»“æœäº¤äº’ä¾æ¬¡è¿›è¡Œï¼š+1ã€*2ã€/3ï¼Œå› ä¸ºä¼ é€’çš„å‚æ•°å€¼è¢«å†™æ­»äº†ï¼Œå®ƒä»¬ä¸å­˜åœ¨åµŒå¥—å…³ç³»ï¼Œæ›´ä½•å†µè®ºä¼ å€¼äº†ã€‚ æœ€åæ‰§è¡Œçš„ç»“æœä¸ºï¼š race() æ–¹æ³• æœ‰äº›æ—¶å€™ï¼Œå¤šä¸ªå¼‚æ­¥ä»»åŠ¡æ˜¯ä¸ºäº†å®¹é”™ã€‚æ¯”å¦‚ï¼ŒåŒæ—¶å‘ä¸¤ä¸ªURLè¯»å–ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯ï¼Œåªéœ€è¦è·å¾—å…ˆè¿”å›çš„ç»“æœå³å¯ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œç”¨Promise.race()å®ç°ï¼š 123456789101112var p1 = new Promise(function (resolve, reject)&#123; setTimeout(resolve, 500, &#x27;P1&#x27;);&#125;);var p2 = new Promise(function (resolve, reject) &#123; setTimeout(resolve, 600, &#x27;P2&#x27;);&#125;);Promise.race([p1, p2]).then(function (result) &#123; console.log(result); // &#x27;P1&#x27;&#125;); ç»ƒä¹ ï¼šå°†AJAX å¼‚æ­¥æ‰§è¡Œå‡½æ•°è½¬ä¸º Promise å¯¹è±¡ åœ¨å‰æˆ‘ä»¬ä¸¾ä¸ªajaxåº”ç”¨å®ä¾‹ï¼šæ ¹æ®ç”¨æˆ·è¾“å…¥å­—æ¯ï¼Œè§¦å‘showHint æ–¹æ³•ajax æ–¹å¼è¯·æ±‚æœåŠ¡å™¨è¿”å›æ¨èå§“åã€‚ å…¶ä¸­ ajax å®ç°éƒ¨åˆ†è§ä¸‹ï¼š 123456789101112131415161718192021222324// ajaxéƒ¨åˆ†...function success(res) &#123; console.log(&quot;æ‹¿åˆ°æœåŠ¡å™¨æˆåŠŸå“åº”ç»“æœï¼š&quot; + res); &#125;function fail(res) &#123; console.log(&quot;æ‹¿åˆ°æœåŠ¡å™¨å¤±è´¥å“åº”ç»“æœï¼š&quot; + res);&#125;function showHint(str)&#123; // åˆ›å»ºå¯¹è±¡ var xmlhttp = new XMLHttpRequest(); // ç»‘å®šonreadystatechangeäº‹ä»¶å¤„ç†æœåŠ¡å™¨å“åº” xmlhttp.onreadystatechange = function() &#123; if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200) &#123; success(xmlhttp.responseText); &#125; else &#123; fail(xmlhttp.status); &#125; &#125; // å‘é€è¯·æ±‚ xmlhttp.open(&quot;GET&quot;,&quot;/ajax/gethint.asp?q=&quot;+str,true); xmlhttp.send();&#125; ç°è¦æ±‚ï¼šå°†ajax å¼‚æ­¥æ‰§è¡Œå‡½æ•°*showHint()*è½¬æ¢ä¸º Promise å¯¹è±¡ç®€åŒ–å¼‚æ­¥å¤„ç†ã€‚ æœ€å¼€å§‹ï¼Œæˆ‘ç”¨Promise å¯¹è±¡ç›´æ¥å°è£… showHintï¼š 123456789101112131415161718192021222324function showHint(str) // å‚æ•°ä¸å¯¹ï¼Œåº”è¯¥ä¸º function showHint(resolve, reject)&#123; // åˆ›å»ºå¯¹è±¡ var xmlhttp = new XMLHttpRequest(); // ç»‘å®šonreadystatechangeäº‹ä»¶å¤„ç†æœåŠ¡å™¨å“åº” xmlhttp.onreadystatechange = function() &#123; if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200) &#123; resolve(xmlhttp.responseText); &#125; else &#123; reject(xmlhttp.status); &#125; &#125; // å‘é€è¯·æ±‚ xmlhttp.open(&quot;GET&quot;,&quot;/ajax/gethint.asp?q=&quot;+str,true); xmlhttp.send();&#125;var p = new Promise(showHint);p.then (function(res)&#123; console.log(&quot;æ‹¿åˆ°æœåŠ¡å™¨æˆåŠŸå“åº”ç»“æœï¼š&quot; + res);&#125;) .catch(function(res)&#123; console.log(&quot;æ‹¿åˆ°æœåŠ¡å™¨å¤±è´¥å“åº”ç»“æœï¼š&quot; + res);&#125;); ä½†æ˜¯è¿™æ ·æœ‰ä¸€ä¸ªé—®é¢˜ï¼šfunction showHint(str){â€¦} å‚æ•°ä¸å¯¹ï¼Œåº”è¯¥ä¸ºï¼š 1234function showHint(resolve, reject)&#123; ....&#125; å¦åˆ™æ— æ³•åœ¨åé¢ä½¿ç”¨ resolveã€reject å‡½æ•°ï¼ä½†æ˜¯è¿™æ ·åˆæ— æ³•ä½¿ç”¨å‡½æ•°è‡ªå¸¦ str å‚æ•°ï¼Œæ‰€ä»¥è§£å†³åŠæ³•ä¸ºï¼šæŠŠå‡½æ•°showHint å†…éƒ¨éœ€è¦åˆ¤æ–­æ‰§è¡Œä¸åŒå›è°ƒå‡½æ•°çš„éƒ¨åˆ†ï¼ŒåŒ…è£…æˆ Promiseå¯¹è±¡è¿”å›ï¼š 123456789101112131415161718192021222324var p;function showHint(str) // å‚æ•°ä¸å¯¹ï¼Œåº”è¯¥ä¸º function showHint(resolve, reject)&#123; // åˆ›å»ºå¯¹è±¡ var xmlhttp = new XMLHttpRequest(); // ç»‘å®šonreadystatechangeäº‹ä»¶å¤„ç†æœåŠ¡å™¨å“åº” p = new Promise( function(resolve,reject) &#123; xmlhttp.onreadystatechange = function() &#123; if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200) &#123; resolve(xmlhttp.responseText); &#125; else &#123; reject(xmlhttp.responseText); &#125; &#125; &#125;); // å‘é€è¯·æ±‚ xmlhttp.open(&quot;GET&quot;,&quot;/ajax/gethint.asp?q=&quot;+str,true); xmlhttp.send();&#125; è¿™æ ·å°±å¯ä»¥ä½¿ç”¨resolveã€reject å‡½æ•°äº†ï¼Œç„¶åå†è®©è¿”å›çš„Promiseå¯¹è±¡æ‰§è¡Œ then ã€catch ï¼š 12p.then (function(res)&#123; console.log(&quot;æ‹¿åˆ°æœåŠ¡å™¨æˆåŠŸå“åº”ç»“æœï¼š&quot; + res);&#125;) .catch(function(res)&#123; console.log(&quot;æ‹¿åˆ°æœåŠ¡å™¨å¤±è´¥å“åº”ç»“æœï¼š&quot; + res);&#125;); ç¬¬å…­ç« ï¼šjQuery 6.1 é€‰æ‹©å™¨ åœ¨å‰ 5.2èŠ‚ ä»‹ç»äº†ï¼š è·å–DOM èŠ‚ç‚¹ï¼šgetElementbyâ€¦() æ–¹æ³• OR CSS å±‚çº§é€‰æ‹©å™¨ æ“ä½œDOM èŠ‚ç‚¹ é€šè¿‡ innerTextã€innerHtml å±æ€§ä¿®æ”¹èŠ‚ç‚¹æ–‡æœ¬ é€šè¿‡ style å±æ€§ä¿®æ”¹CSS æ ·å¼ é€šè¿‡ appendChild() ã€insertBefore() ã€*removeChild()*æ–¹æ³•æ’å…¥ã€åˆ é™¤èŠ‚ç‚¹ jQuery æä¾›è·å–DOM èŠ‚ç‚¹æ–¹æ³• æœ¬è´¨æ˜¯ CSS å±‚çº§é€‰æ‹©å™¨ è¯­æ³•ï¼Œä¸å†èµ˜è¿°ã€‚ä½†æ˜¯è¿˜ç‰¹åˆ«æä¾› find()ã€filter()ã€map() æ–¹æ³•è¿›è¡ŒæŸ¥æ‰¾å’Œè¿‡æ»¤ï¼Œè¯¦è§ä¸‹ã€‚ æŸ¥æ‰¾å’Œè¿‡æ»¤ 123456&lt;ul id=&quot;programLanguage&quot;&gt; &lt;li id=&quot;C#&quot;&gt;C#&lt;/li&gt; &lt;li id=&quot;C&quot;&gt;C&lt;/li&gt; &lt;li id=&quot;python&quot;&gt;python&lt;/li&gt; &lt;li id=&quot;java&quot;&gt;java&lt;/li&gt; &lt;/ul&gt; find()ã€next()ã€prev()ã€parent() åœ¨å‰é¢æˆ‘ä»¬çŸ¥é“æ€ä¹ˆè·å–ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä½†æ˜¯å¦‚æœè·å–ä¸€ä¸ªèŠ‚ç‚¹åï¼Œè¿˜æƒ³è·å–å®ƒçš„å­ã€å…„å¼Ÿã€çˆ¶èŠ‚ç‚¹å‘¢ï¼Ÿ jQuery ä¸ºæˆ‘ä»¬æä¾›äº† find()ã€next()ã€prev() æ–¹æ³•æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼š 123456789101112// find()var C = $(&#x27;#programLanguage&#x27;).find(&#x27;#C&#x27;);C.text(); // è¾“å‡º: C// parent()var pl = C.parent(); pl; // èŠ‚ç‚¹ï¼šul#programLanguage// next()ã€prev()C.next(); // èŠ‚ç‚¹ï¼šli#pythonC.prev(); // èŠ‚ç‚¹ï¼šli#C# first()ã€last() å¦‚æœæˆ‘ä»¬è·å–åˆ°ä¸€ä¸ªèŠ‚ç‚¹æ•°ç»„ï¼Œå¯¹èŠ‚ç‚¹æ•°ç»„çš„æ“ä½œå’Œæ™®é€šæ•°ç»„æ“ä½œæœ‰ä»€ä¹ˆä¸åŒå—ï¼Ÿ æ™®é€šæ•°ç»„å¯ä»¥ä½¿ç”¨çš„APIæ–¹æ³•å’ŒjQuery å¯¹è±¡æä¾›çš„APIå¤šæœ‰ä¸åŒï¼Œä¸å¯æ··ä¸ºä¸€è°ˆï¼Œä»¥ä¸‹æ˜¯å¸¸ç”¨ä¸€äº›æ–¹æ³•ï¼š 12345var lis = $(&#x27;#programLanguage li&#x27;);lis.first(); // è·å–ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç­‰ä»·äºï¼š#programLanguage li:first-childlis.last(); // è·å–æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œç­‰ä»·äºï¼š#programLanguage li:last-childlis.slice(0, 2); // è¾“å‡ºï¼š[C#,C], æ•°ç»„çš„slice()æ–¹æ³•ä¸€è‡´ æ›´å¤šæ–¹æ³•ä»¥åç”¨åˆ°å†æã€‚ filter()ã€map() filter()ã€map() å’Œæˆ‘ä»¬å‰ä»‹ç»çš„é«˜é˜¶å‡½æ•°ç±»ä¼¼ã€‚ é€šè¿‡ filter() è¿‡æ»¤å‡º â€™Câ€˜ å¼€å¤´ç¼–ç¨‹è¯­è¨€ã€‚ 123456789101112131415161718192021// filter()è¿‡æ»¤ç¬¦åˆæ¡ä»¶çš„åŸå¯¹è±¡æ•°ç»„å…ƒç´ // è¿”å›ï¼šæ•°ç»„ var lis = $(&#x27;#programLanguage li&#x27;);var firstIsC = lis.filter( /* è¿‡æ»¤æ¡ä»¶ï¼›é¦–å­—æ¯ä¸ºC æ³¨æ„ï¼šæ­¤æ—¶æ˜¯DOMèŠ‚ç‚¹å¯¹è±¡ä¸æ˜¯jQueryå¯¹è±¡ why? ç›´æ¥ç®­å¤´å‡½æ•°thisç»‘å®šwindow */ // () =&gt; this.innerHTML.indexOf(&#x27;C&#x27;) === 0 function() &#123; return this.innerHTML.indexOf(&#x27;C&#x27;) === 0; &#125;);// è¾“å‡ºæµ‹è¯•firstIsC ; // jQuery.fn.init(2) [li#C#, li#C, prevObject: jQuery.fn.init(4)] é€šè¿‡ map() éå†è¿”å›æ‰€æœ‰å¯¹è±¡èŠ‚ç‚¹æ–‡æœ¬ã€‚ 12345678910111213// map()// éå†æ‰€æœ‰å¯¹è±¡å…ƒç´ è¿”å›ä¸€ä¸ªæ•°ç»„var lis = $(&#x27;#programLanguage li&#x27;);var texts = lis.map( function() &#123; return this.innerHTML; &#125;);// è¾“å‡ºæµ‹è¯•texts; // [&quot;C#&quot;, &quot;C&quot;, &quot;python&quot;, &quot;java&quot;] ç»¼åˆç»ƒä¹  123456789101112131415161718&lt;form id=&quot;test-form&quot; action=&quot;#0&quot; onsubmit=&quot;return false;&quot;&gt; &lt;p&gt;&lt;label&gt;Name: &lt;input name=&quot;name&quot;&gt;&lt;/label&gt;&lt;/p&gt; &lt;p&gt;&lt;label&gt;Email: &lt;input name=&quot;email&quot;&gt;&lt;/label&gt;&lt;/p&gt; &lt;p&gt;&lt;label&gt;Password: &lt;input name=&quot;password&quot; type=&quot;password&quot;&gt;&lt;/label&gt;&lt;/p&gt; &lt;p&gt;Gender: &lt;label&gt;&lt;input name=&quot;gender&quot; type=&quot;radio&quot; value=&quot;m&quot; checked&gt; Male&lt;/label&gt; &lt;label&gt;&lt;input name=&quot;gender&quot; type=&quot;radio&quot; value=&quot;f&quot;&gt; Female&lt;/label&gt; &lt;/p&gt; &lt;p&gt;&lt;label&gt;City: &lt;select name=&quot;city&quot;&gt; &lt;option value=&quot;BJ&quot; selected&gt;Beijing&lt;/option&gt; &lt;option value=&quot;SH&quot;&gt;Shanghai&lt;/option&gt; &lt;option value=&quot;CD&quot;&gt;Chengdu&lt;/option&gt; &lt;option value=&quot;XM&quot;&gt;Xiamen&lt;/option&gt; &lt;/select&gt; &lt;/label&gt;&lt;/p&gt; &lt;p&gt;&lt;button type=&quot;submit&quot;&gt;Submit&lt;/button&gt;&lt;/p&gt;&lt;/form&gt; è¾“å…¥å€¼åï¼Œç”¨ jQuery è·å–è¡¨å•çš„ JSON å­—ç¬¦ä¸²ï¼Œå¦‚ï¼š&#123;&quot;name&quot;:&quot;Michael&quot;,&quot;email&quot;:...&#125;ã€‚ 12345678910111213141516171819202122232425var obj = &#123;&#125;;// é™å®šçŠ¶æ€:input å¯è·å–ï¼š&lt;input&gt;ï¼Œ&lt;textarea&gt;ï¼Œ&lt;select&gt;å’Œ&lt;button&gt; å…ƒç´ $(&#x27;#test-form :input&#x27;).filter( function() &#123; // è¿‡æ»¤èŠ‚ç‚¹æ•°ç»„ä¸­ï¼šæœªé€‰ä¸­çš„radioå•é€‰æ¡†èŠ‚ç‚¹å’ŒsubmitæŒ‰é’®èŠ‚ç‚¹ // thisæ˜¯DOMå¯¹è±¡ï¼Œè·å–èŠ‚ç‚¹å±æ€§typeã€checkedç­‰ var isNotChecked = this.type === &#x27;radio&#x27; &amp;&amp; !this.checked; if( isNotChecked || this.type === &#x27;submit&#x27;) return false; else return true; &#125;).map( function() &#123; // selectå…ƒç´ å¯ç›´æ¥è·å–nameå±æ€§å’Œé€‰ä¸­çš„å€¼ return obj[this.name] = this.value; &#125;)json = JSON.stringify(obj,null,&#x27; &#x27;); 6.2 jQuery æ“ä½œ DOM ä¿®æ”¹ Text &amp; HTML jQuery å¯¹è±¡æä¾›äº† text()ã€html() æ–¹æ³•æ¥è·å–èŠ‚ç‚¹æ–‡æœ¬å’ŒHTMLæ–‡æœ¬ï¼Œä¾‹å¦‚ä»¥ä¸‹HTMLç»“æ„ï¼š 123456&lt;ul id=&quot;programLanguage&quot;&gt; &lt;li id=&quot;C#&quot;&gt;C#&lt;/li&gt; &lt;li id=&quot;C&quot;&gt;C&lt;/li&gt; &lt;li id=&quot;python&quot;&gt;python&lt;/li&gt; &lt;li id=&quot;java&quot;&gt;java&lt;/li&gt; &lt;/ul&gt; åˆ†åˆ«è·å–æ–‡æœ¬å’ŒHTMLï¼š 12$(&#x27;#C&#x27;).html(); // C$(&#x27;#C&#x27;).text(); // C è®¾ç½®æ–‡æœ¬ &amp; HTMLï¼Œåªéœ€ç»™text()ã€html() æ–¹æ³•ä¼ é€’å‚æ•°å³å¯ï¼š 1$(&#x27;#C&#x27;).text(&#x27;æˆ‘æ˜¯è¥¿è¯­è¨€&#x27;); // æˆ‘æ˜¯è¥¿è¯­è¨€ ç‰¹åˆ«å·§å¦™çš„æ˜¯ï¼ŒjQuery å¯ä»¥ç»™é€‰ä¸­å¤šä¸ªèŠ‚ç‚¹è®¾ç½®æ–‡æœ¬ã€CSSã€å±æ€§ç­‰ï¼Œå…·æœ‰ æ‰¹é‡æ“ä½œ ç‰¹ç‚¹ï¼š 123456// docmentå¯¹è±¡ä¸å…·æœ‰ æ‰¹é‡æ“ä½œ ç‰¹ç‚¹document.getElementsByTagName(&#x27;li&#x27;).innerText = &#x27;test&#x27;; // è®¾ç½®ä¸æˆåŠŸï¼ŒèŠ‚ç‚¹å†…å®¹æœªè¢«æ”¹å˜document.querySelectorAll(&#x27;li&#x27;).innerText = &#x27;test&#x27;; // è®¾ç½®ä¸æˆåŠŸï¼ŒèŠ‚ç‚¹å†…å®¹æœªè¢«æ”¹å˜// jQueryå¯¹è±¡å…·æœ‰ æ‰¹é‡æ“ä½œ ç‰¹ç‚¹$(&#x27;li&#x27;).text(&#x27;test&#x27;); // è®¾ç½®æˆåŠŸï¼Œæ‰€æœ‰lièŠ‚ç‚¹æ–‡æœ¬è¢«è®¾ç½® &#x27;test&#x27; ä¿®æ”¹CSS åŒå‰ï¼Œä¹Ÿå¯ç”¨ CSS() æ–¹æ³•è·å–ã€ä¿®æ”¹CSSæ ·å¼ï¼Œä¹Ÿå…·æœ‰ æ‰¹é‡æ“ä½œ ç‰¹ç‚¹ï¼Œå…³äºè¯¥ç‰¹ç‚¹ä»¥ä¸‹ä¸å†èµ˜è¿°ã€‚ è·å–CSSæ ·å¼ï¼š 1$(&#x27;li&#x27;).css(&#x27;color&#x27;); // &quot;rgb(0, 0, 0)&quot; è®¾ç½®CSSæ ·å¼ï¼š 1$(&#x27;li&#x27;).css(&#x27;color&#x27;,&#x27;red&#x27;); // æ–‡æœ¬å…¨å˜ä¸ºçº¢è‰² æ¸…é™¤CSSæ ·å¼ï¼š 1$(&#x27;li&#x27;).css(&#x27;color&#x27;,&#x27;&#x27;); // ç­‰ä»·æŠŠè¯¥å±æ€§è®¾ç½®ä¸ºç©ºå³å¯ æ˜¾ç¤ºå’Œéšè—DOM éšè—DOMèŠ‚ç‚¹ï¼Œæ³¨æ„DOMæ ‘ç»“æ„æ²¡æœ‰è¢«æ”¹å˜ï¼š 1$(&#x27;li&#x27;).hide(); // å¯¹åº”CSSè®¾ç½®ï¼šdisplay = none; æ˜¾ç¤ºDOMèŠ‚ç‚¹ï¼š 1$(&#x27;li&#x27;).show(); // å¯¹åº”CSSè®¾ç½®ï¼šdisplay = inline; æˆ–è€… display = block; ä¿®æ”¹DOMä¿¡æ¯ èŠ‚ç‚¹å®½é«˜ï¼šwidth()ã€heigth() è·å–å®½é«˜ï¼š 12$(&#x27;li&#x27;).width(); // 1860$(&#x27;li&#x27;).heigth(); // 21.5126 âš ï¸ ç»è¿‡æµ‹è¯•ï¼Œå¤šä¸ªæ ‡ç­¾æ˜¾ç¤ºçš„æ˜¯å…¶ä¸­ä¸€ä¸ªæ ‡ç­¾å®½é«˜ï¼Ÿ 12$(&#x27;#C&#x27;).width(); // 1860$(&#x27;#C&#x27;).heigth(); // 21.5126 è®¾ç½®å®½é«˜ï¼š 12$(&#x27;#C&#x27;).width(400); $(&#x27;#C&#x27;).heigth(1800); èŠ‚ç‚¹å±æ€§ï¼šattr() ã€removeAttr() è·å–å±æ€§ï¼Œä¸å­˜åœ¨è¿”å› undefinedï¼š 123$(&#x27;#C&#x27;).attr(&#x27;id&#x27;); // C$(&#x27;li&#x27;).attr(&#x27;id&#x27;); // C#ï¼Œå¤šä¸ªèŠ‚ç‚¹è¿”å›ç¬¬ä¸€ä¸ªèŠ‚ç‚¹æŒ‡å®šå±æ€§å€¼$(&#x27;#C&#x27;).attr(&#x27;name&#x27;); // undefinedï¼Œä¸å­˜åœ¨è¿”å›undefined è®¾ç½®å±æ€§ï¼Œç±»ä¼¼CSS() æ–¹æ³•ï¼š 1$(&#x27;#C&#x27;).attr(&#x27;name&#x27;,&#x27;iamC&#x27;); // &lt;li id=&quot;C&quot; name=&#x27;iamC&#x27;&gt;C&lt;/li&gt; åˆ é™¤å±æ€§ï¼š 1$(&#x27;#C&#x27;).removeAttr(&#x27;name&#x27;); ç‰¹åˆ«çš„ï¼Œå…³äºä¸€äº›å±æ€§åªæœ‰å‡ºç°å’Œæ²¡å‡ºç°ä¸¤ç§æƒ…å†µåˆ¤æ–­ï¼Œå¦‚ï¼š checkedã€selected ã€‚ å¯¹äºä»¥ä¸‹HTMLç»“æ„ï¼š 1&lt;input id=&quot;test-radio&quot; type=&quot;radio&quot; name=&quot;test&quot; checked=&quot;checked&quot; value=&quot;1&quot;&gt; å¦‚æœä½¿ç”¨attr() è·å– checked å±æ€§ï¼š 1$(&#x27;#test-radio&#x27;).attr(&#x27;checked&#x27;); // &#x27;checked&#x27; è™½ç„¶æ­£ç¡®è¿”å›äº†å±æ€§å€¼ï¼Œä½†æ˜¯ checked å±æ€§åªæœ‰[è¢«é€‰ä¸­]ã€[æœªè¢«é€‰ä¸­]ä¸¤ç§æƒ…å†µï¼Œç”¨ trueã€falseè¿”å›æ›´å¥½ï¼š 1$(&#x27;#test-radio&#x27;).is(&#x27;:checked&#x27;); // true,ç”¨is()æ–¹æ³•åˆ¤æ–­æ›´å¥½ âš ï¸ ä¸çŸ¥é“ä¸ºä»€ä¹ˆæœ‰æ—¶å€™ attr è®¾ç½®é€‰ä¸­æ— æ•ˆï¼Œå»ºè®®ä½¿ç”¨ prop æ–¹æ³•ï¼š 12$(&#x27;#test_checkbox&#x27;).attr(&#x27;checked&#x27;,&#x27;checked&#x27;); // é€‰ä¸­æ— æ•ˆï¼Ÿ$(&#x27;#test_checkbox&#x27;).prop(&#x27;checked&#x27;,true); // å¯é€‰ä¸­ selected ç­‰åŒç†ä¸å†èµ˜è¿°ã€‚ ä¿®æ”¹DOMç»“æ„ æ·»åŠ èŠ‚ç‚¹ å¦‚æœæˆ‘ä»¬è¦åœ¨ä»¥ä¸‹ ul èŠ‚ç‚¹æ·»åŠ å­èŠ‚ç‚¹ &lt;li id=&quot;python&quot;&gt;python&lt;/li&gt;ï¼š 1234&lt;ul id=&quot;programLanguage&quot;&gt; &lt;li id=&quot;C#&quot;&gt;C#&lt;/li&gt; &lt;li id=&quot;C&quot;&gt;C&lt;/li&gt;&lt;/ul&gt; jQuery è™½ç„¶æä¾›äº†html() æ–¹æ³•ï¼Œä½†æ˜¯ä¼šä¿®æ”¹ ul èŠ‚ç‚¹æ‰€æœ‰èŠ‚ç‚¹ã€‚ ä¸ºæ­¤æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š æ–¹æ³•å ç”¨æ³• append(newElem) æ·»åŠ å­èŠ‚ç‚¹newElem ä¸ºå½“å‰çˆ¶èŠ‚ç‚¹å¯¹è±¡ æœ€åä¸€ä¸ªå­èŠ‚ç‚¹ prepend(newElem) æ·»åŠ å­èŠ‚ç‚¹newElem ä¸ºå½“å‰çˆ¶èŠ‚ç‚¹å¯¹è±¡ ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ å¦‚æœæ˜¯åŒçº§èŠ‚ç‚¹å¯¹è±¡ï¼Œè¿˜å¯ä»¥ç”¨ï¼š æ–¹æ³•å ç”¨æ³• after(newElem) æ·»åŠ å­èŠ‚ç‚¹newElem ä¸ºå½“å‰èŠ‚ç‚¹å¯¹è±¡ ä¸‹ä¸€ä¸ªå…„å¼Ÿå­èŠ‚ç‚¹ before(newElem) æ·»åŠ å­èŠ‚ç‚¹newElem ä¸ºå½“å‰èŠ‚ç‚¹å¯¹è±¡ å‰ä¸€ä¸ªå…„å¼Ÿå­èŠ‚ç‚¹ å°† python æ–°èŠ‚ç‚¹æ·»åŠ ä¸ºul åˆ—è¡¨æœ€åä¸€ä¸ªæ–°èŠ‚ç‚¹ã€‚ çˆ¶èŠ‚ç‚¹å¯¹è±¡æ–¹æ³•ï¼š 12var pl = $(&#x27;#programLanguage&#x27;);pl.append(&#x27;&lt;li id=&quot;python&quot;&gt;python&lt;/li&gt;&#x27;); åŒçº§èŠ‚ç‚¹å¯¹è±¡æ–¹æ³•ï¼š 12var last = $(&#x27;#programLanguage li:last-child&#x27;);last.after(&#x27;&lt;li id=&quot;python&quot;&gt;python&lt;/li&gt;&#x27;); åˆ é™¤èŠ‚ç‚¹ æ–¹æ³•å ç”¨æ³• remove() åˆ é™¤å½“å‰èŠ‚ç‚¹å¯¹è±¡ï¼Œå¯ä½œç”¨äºå¤šä¸ªèŠ‚ç‚¹å¯¹è±¡ã€‚ åˆ é™¤æ‰€æœ‰åˆ—è¡¨é¡¹ã€‚ 1$(&#x27;li&#x27;).remove(); // æ‰€æœ‰&lt;li&gt;è¢«åˆ é™¤ ç»¼åˆæµ‹è¯• å¯¹äºä»¥ä¸‹html ç»“æ„ï¼šé™¤äº†åˆ—å‡ºè¯­è¨€å¤–ï¼Œè¯·å†æ·»åŠ  Pascalã€Lua ã€Rubyï¼Œç„¶åæŒ‰å­—æ¯é¡ºåºæ’åºèŠ‚ç‚¹ã€‚ 1234567&lt;div id=&quot;test-div&quot;&gt; &lt;ul&gt; &lt;li&gt;&lt;span&gt;JavaScript&lt;/span&gt;&lt;/li&gt; &lt;li&gt;&lt;span&gt;Python&lt;/span&gt;&lt;/li&gt; &lt;li&gt;&lt;span&gt;Swift&lt;/span&gt;&lt;/li&gt; &lt;/ul&gt;&lt;/div&gt; 123456789101112131415161718192021var language = [&#x27;Pascal&#x27;,&#x27;Lua&#x27;,&#x27;Ruby&#x27;];var ul = $(&#x27;#test-div ul&#x27;);for(var i = 0; i &lt; language.length; i++ )&#123; ul.append(&#x27;&lt;li&gt;&lt;span&gt;&#x27; + language[i] + &#x27;&lt;/span&gt;&lt;/li&gt;&#x27;);&#125;// è·å–æ‰€æœ‰liæ ‡ç­¾æ’åºvar lis = ul.find(&#x27;li&#x27;);lis.sort( function(x,y) &#123; // ä¸æ˜¯jQueryå¯¹è±¡ï¼Œè€Œæ˜¯DOMå¯¹è±¡ï¼Ÿä¸èƒ½ç”¨x.text() &gt; y.text() if(x.innerText &gt; y.innerText) return 1; else return -1; &#125;);// æ·»åŠ å·²æ’åºå¥½çš„liæ ‡ç­¾ul.html(lis); è¡¨å•è¾“å…¥æ¡†å€¼ å¯¹äºè¡¨å•å…ƒç´ ï¼ŒjQuery ç»Ÿä¸€ç”¨val() æ–¹æ³•è·å– DOM å¯¹è±¡ value å±æ€§ï¼Œç»Ÿä¸€è¾“å…¥æ¡†å–å€¼å’Œèµ‹å€¼é—®é¢˜ï¼š æ–¹æ³•å ç”¨æ³• val() æ— å‚æ•°è·å–æ–‡æœ¬æ¡†å€¼ï¼›æœ‰å‚æ•°è®¾ç½®æ–‡æœ¬æ¡†å€¼ã€‚ å¯¹äºä»¥ä¸‹ html ç»“æ„ï¼š 1 å°è¯•å¯¹ä»¥ä¸Šä¸åŒ input ç±»å‹è¾“å…¥æ¡†å€¼æ“ä½œã€‚ 123456789// è·å–è¾“å…¥æ¡†å€¼$(&#x27;#test-input&#x27;).val(); // &#x27;test&#x27;$(&#x27;#test-select&#x27;).val(); // &#x27;BJ&#x27;$(&#x27;#test-textarea&#x27;).val(); // &#x27;Hello&#x27;// è®¾ç½®è¾“å…¥æ¡†å€¼$(&#x27;#test-input&#x27;).val(&#x27;abc@example.com&#x27;); // æ–‡æœ¬æ¡†çš„å†…å®¹å·²å˜ä¸ºabc@example.com$(&#x27;#test-select&#x27;).val(&#x27;SH&#x27;); // é€‰æ‹©æ¡†å·²å˜ä¸ºShanghai$(&#x27;#test-textarea&#x27;).val(&#x27;Hi&#x27;); // æœ¬åŒºåŸŸå·²æ›´æ–°ä¸º&#x27;Hi&#x27; å¯¹åº”docment å¯¹è±¡ value å±æ€§ï¼š 1document.querySelector(&#x27;#test-input&#x27;).value = &#x27;abc@example.com&#x27;; ä¸è¦å°è¯•ç”¨ attr() æ–¹æ³• 1&lt;p&gt;ç”¨æˆ·åï¼š&lt;input type=&quot;text&quot; id=&#x27;user&#x27;&gt; &lt;/p&gt; attr() æ–¹æ³•æ˜¯ç”¨æ¥è·å–ã€è®¾ç½®å±æ€§ï¼Œç”¨äºæ–‡æœ¬æ¡†ä¼šå¯¼è‡´æ„æƒ³ä¸åˆ°çš„é”™è¯¯ï¼š 1$(&#x27;#user&#x27;).attr(&#x27;value&#x27;,&#x27;hwh&#x27;); // æˆåŠŸè®¾ç½®æ–‡æœ¬æ¡†å€¼ä¸º:&#x27;hwh&#x27; ä½†æ˜¯å½“æˆ‘ä»¬é‡æ–°ä¿®æ”¹æ–‡æœ¬æ¡†å€¼ä¸ºï¼šâ€˜ltâ€™ï¼Œå†å»å°è¯•è·å–æ–‡æœ¬æ¡†å€¼ï¼š 1$(&#x27;#user&#x27;).attr(&#x27;value&#x27;); // &#x27;hwh&#x27; è¯»å–ç»“æœè¿˜æ˜¯hwhï¼è¿™æ˜¯å› ä¸ºå®é™…htmlç»“æ„å·²ç»æ˜¯ï¼š 1&lt;p&gt;ç”¨æˆ·åï¼š&lt;input type=&quot;text&quot; id=&#x27;user&#x27; value=&#x27;hwh&#x27;&gt; &lt;/p&gt; æ¯æ¬¡è¯»å–éƒ½æ˜¯valueå€¼ï¼Œ ä¿®æ”¹æ–‡æœ¬æ¡†å†…å®¹ä¸ä¼šæ”¹å˜valueå±æ€§ ã€‚ 6.3 äº‹ä»¶ ç±»ä¼¼C#äº‹ä»¶ï¼Œå¸¸ç”¨æœ‰é¼ æ ‡äº‹ä»¶ã€é”®ç›˜äº‹ä»¶ã€å…¶ä»–äº‹ä»¶ç­‰ã€‚ é¼ æ ‡äº‹ä»¶ å¸¸ç”¨é¼ æ ‡äº‹ä»¶ï¼Œå‚æ•°ä¸ºå‡½æ•°ç”¨äºå¤„ç†äº‹ä»¶ï¼š äº‹ä»¶æ–¹æ³• è§£é‡Š click(func) é¼ æ ‡å•å‡»æ—¶è§¦å‘ dblclick(func) é¼ æ ‡åŒå‡»æ—¶è§¦å‘ mouseenter(func) é¼ æ ‡è¿›å…¥æ—¶è§¦å‘ mouseleave(func) é¼ æ ‡ç¦»å¼€æ—¶è§¦å‘ mousemove(func) é¼ æ ‡å†…éƒ¨ç§»åŠ¨æ—¶è§¦å‘ hover(func) é¼ æ ‡è¿›å…¥å’Œé€€å‡ºæ—¶è§¦å‘ï¼Œç›¸å½“äº mouseenter()+ mouseleave() ã€‚ å­˜åœ¨ä»¥ä¸‹htmlç»“æ„ï¼š 1234&lt;ul id=&quot;programLanguage&quot;&gt; &lt;li id=&quot;C#&quot;&gt;C#&lt;/li&gt; &lt;li id=&quot;C&quot;&gt;C&lt;/li&gt;&lt;/ul&gt; ç»‘å®š click äº‹ä»¶ï¼Œç‚¹å‡» &lt;li#C&gt; æ—¶è§¦å‘ã€‚ 12345678var C = $(&#x27;#C&#x27;);C.click( function() &#123; alert(&#x27;hello C!&#x27;); &#125;) æœ‰æ—¶å€™è¿˜ä¼šç”¨åˆ°ä¸€ç§ on() æ–¹æ³•ç»‘å®šäº‹ä»¶ï¼š äº‹ä»¶æ–¹æ³• è§£é‡Š on(evet,func) on() ç»‘å®šäº‹ä»¶ï¼Œä¼ å…¥äº‹ä»¶åç§° &amp; äº‹ä»¶å¤„ç†å‡½æ•° 12345678var C = $(&#x27;#C&#x27;);C.on(&#x27;click&#x27;, function() &#123; alert(&#x27;hello C!&#x27;); &#125;) äº‹ä»¶å‚æ•° æ‰€æœ‰æ—¶é—´ éƒ½ä¼šä¼ å…¥Event å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå¯ä»¥è·å–æ›´å¤šä¿¡æ¯ã€‚ ç»‘å®š mousemove äº‹ä»¶ï¼Œå½“é¼ æ ‡åœ¨ &lt;div#testMouseMoveDiv&gt; åŒºåŸŸç§»åŠ¨å¯ä»¥è·å–åˆ°é¼ æ ‡ä½ç½®ã€‚ 1234567$(&#x27;#testMouseMoveDiv&#x27;).mousemove( function (e) &#123; $(&#x27;#testMouseMoveSpan&#x27;).text(&#x27;pageX = &#x27; + e.pageX + &#x27;, pageY = &#x27; + e.pageY); &#125;); é”®ç›˜äº‹ä»¶ é”®ç›˜äº‹ä»¶ä»…ä½œç”¨åœ¨å½“å‰ç„¦ç‚¹çš„DOMä¸Šï¼Œé€šå¸¸æ˜¯&lt;input&gt;å’Œ&lt;textarea&gt;ï¼š äº‹ä»¶æ–¹æ³• è§£é‡Š keydown(func) é”®ç›˜æŒ‰ä¸‹æ—¶è§¦å‘ keyup(func) é”®ç›˜æ¾å¼€æ—¶è§¦å‘ keypress(func) æŒ‰ä¸€æ¬¡é”®åè§¦å‘ æœ‰ä»¥ä¸‹html ç»“æ„ï¼š 12&lt;p&gt;ç”¨æˆ·åï¼š&lt;input type=&quot;text&quot; id=&#x27;user&#x27;&gt; &lt;/p&gt; &lt;label id=&quot;check&quot;&gt;&lt;/label&gt;&lt;p&gt;å¯†ç ï¼š&lt;input type=&quot;text&quot; id=&#x27;pwd&#x27;&gt;&lt;/p&gt; å½“ç”¨æˆ·åœ¨ &lt;input#user&gt; è¾“å…¥å®Œæ¯•ï¼Œå³ä¾§ &lt;lable#check&gt; æ˜¾ç¤ºæ˜¯å¦å·²å­˜åœ¨ç”¨æˆ·åã€‚ 1234567891011var user = $(&#x27;#user&#x27;);user.change( function() &#123; if(this.value === &#x27;hwh&#x27;) $(&#x27;#check&#x27;).text(&#x27;ç”¨æˆ·å­˜åœ¨ï¼&#x27;).css(&#x27;color&#x27;,&#x27;red&#x27;); else $(&#x27;#check&#x27;).text(&#x27;å¯ä»¥ä½¿ç”¨ï¼&#x27;).css(&#x27;color&#x27;,&#x27;blue&#x27;); &#125;); å…¶ä»–äº‹ä»¶ äº‹ä»¶æ–¹æ³• è§£é‡Š change(func) å½“&lt;input&gt;ã€&lt;select&gt;æˆ–&lt;textarea&gt;çš„å†…å®¹æ”¹å˜æ—¶è§¦å‘ focus(func) å½“ DOM è·å¾—ç„¦ç‚¹æ—¶è§¦å‘ blur(func) å½“ DOM å¤±å»ç„¦ç‚¹æ—¶è§¦å‘ submit(func) å½“&lt;form&gt;æäº¤æ—¶è§¦å‘ ready(func) å½“é¡µé¢è¢«è½½å…¥å¹¶ä¸” DOM æ ‘å®Œæˆåˆå§‹åŒ–åè§¦å‘ æœ‰ä»¥ä¸‹html ç»“æ„ï¼š 12&lt;p&gt;ç”¨æˆ·åï¼š&lt;input type=&quot;text&quot; id=&#x27;user&#x27;&gt; &lt;/p&gt; &lt;label id=&quot;check&quot;&gt;&lt;/label&gt;&lt;p&gt;å¯†ç ï¼š&lt;input type=&quot;text&quot; id=&#x27;pwd&#x27;&gt;&lt;/p&gt; change(func) äº‹ä»¶ï¼šå½“ç”¨æˆ·åœ¨ &lt;input#user&gt; è¾“å…¥å®Œæ¯•ï¼Œå³ä¾§ &lt;lable#check&gt; æ˜¾ç¤ºæ˜¯å¦å·²å­˜åœ¨ç”¨æˆ·åã€‚ 1234567891011var user = $(&#x27;#user&#x27;);user.change( function() &#123; if(this.value === &#x27;hwh&#x27;) $(&#x27;#check&#x27;).text(&#x27;ç”¨æˆ·å­˜åœ¨ï¼&#x27;).css(&#x27;color&#x27;,&#x27;red&#x27;); else $(&#x27;#check&#x27;).text(&#x27;å¯ä»¥ä½¿ç”¨ï¼&#x27;).css(&#x27;color&#x27;,&#x27;blue&#x27;); &#125;); change äº‹ä»¶å½“è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹æ‰ä¼šè§¦å‘ï¼ˆç§»åˆ°åˆ«å¤„äº†ä¸å†è¾“å…¥äº†ï¼‰ æœ€å¥½æŠŠå‡½æ•°ç›´æ¥å†™åœ¨change é‡Œé¢ï¼Œå¦åˆ™ä¸çŸ¥é“ä¸ºä»€ä¹ˆè§¦å‘ä¸äº†ï¼Ÿ 1user.change(changeUserName()); // å°è£…å¥½çš„å‡½æ•°å†™å…¥ä¸æˆï¼Ÿ ready äº‹ä»¶ä½œç”¨äºdocmentå¯¹è±¡ï¼Œå½“DOMèŠ‚ç‚¹éƒ½è½½å…¥æµè§ˆå™¨è§¦å‘ï¼šè¯•åˆ†æä»¥ä¸‹é”™è¯¯ï¼Ÿ 123456789101112131415&lt;html&gt;&lt;head&gt; &lt;script&gt; // ä»£ç æœ‰è¯¯: $(&#x27;#testForm).on(&#x27;submit&#x27;, function () &#123; alert(&#x27;submit!&#x27;); &#125;); &lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;form id=&quot;testForm&quot;&gt; ... &lt;/form&gt;&lt;/body&gt; æ ‡ç­¾å†…jsä»£ç åœ¨å‰ï¼ŒDOM èŠ‚ç‚¹è¿˜æ²¡åŠ è½½å®Œæ¯•å°±æ“ä½œ èŠ‚ç‚¹æ‰€ä»¥å‡ºé”™ã€‚æˆ‘ä»¬å¯ä»¥ï¼š - æŠŠ æ ‡ç­¾åœ¨å - æˆ–è€…ï¼Œç”¨ *docment* å¯¹è±¡ *read* äº‹ä»¶å‡½æ•° ä¿è¯DOMèŠ‚ç‚¹éƒ½åŠ è½½å®Œæ¯• å†ç»‘å®š*submit*äº‹ä»¶ 1234567 $(document).ready(function () &#123; $(&#x27;#testForm).on(&#x27;submit&#x27;, function () &#123; alert(&#x27;submit!&#x27;); &#125;);&#125;); ä¹Ÿå¯ä»¥åƒå‰ä¸€èˆ¬ç®€åŒ–ä¸ç”¨onæ–¹æ³•ï¼š 1234567 $(document).on(&#x27;ready&#x27;, function () &#123; $(&#x27;#testForm).submit(function () &#123; alert(&#x27;submit!&#x27;); &#125;);&#125;); ç”šè‡³*read* äº‹ä»¶è¿˜å¯ä»¥å†ç®€åŒ–ï¼š *$(document).on('ready', function ()...* ---> *$(function ()..* 1234$(function () &#123; console.log(&#x27;init A...&#x27;);&#125;); ### äº‹ä»¶è§¦å‘æ¡ä»¶ äº‹ä»¶çš„è§¦å‘æ€»æ˜¯ç”±ç”¨æˆ·æ“ä½œå¼•å‘çš„ï¼Œä½†æ˜¯ï¼Œæ¯”å¦‚ç”¨JavaScriptä»£ç å»æ”¹åŠ¨æ–‡æœ¬æ¡†çš„å€¼ï¼Œä¸ä¼šè§¦å‘`change`äº‹ä»¶ï¼š 12var input = $(&#x27;#test-input&#x27;);input.val(&#x27;change it!&#x27;); // æ— æ³•è§¦å‘changeäº‹ä»¶ æˆ‘ä»¬å¯ä»¥é€šè¿‡ç›´æ¥è°ƒç”¨æ— å‚æ•° *change()* æ–¹æ³•æ‰‹åŠ¨è§¦å‘äº‹ä»¶ï¼š 123var input = $(&#x27;#test-input&#x27;);input.val(&#x27;change it!&#x27;);input.change(); // è§¦å‘changeäº‹ä»¶ #### æµè§ˆå™¨å®‰å…¨é™åˆ¶ åœ¨æµè§ˆå™¨ä¸­ï¼Œæœ‰äº› *JavaScript* ä»£ç åªæœ‰åœ¨ç”¨æˆ·è§¦å‘ä¸‹æ‰èƒ½æ‰§è¡Œã€‚ä¾‹å¦‚ï¼Œ`window.open()`å‡½æ•°ï¼š 12345// æ— æ³•å¼¹å‡ºæ–°çª—å£ï¼Œå°†è¢«æµè§ˆå™¨å±è”½:$(function ()&#123; window.open(&#x27;/&#x27;);&#125;); è¿™äº›â€œæ•æ„Ÿä»£ç â€åªèƒ½ç”±ç”¨æˆ·æ“ä½œæ¥è§¦å‘ã€‚ ### ç»¼åˆæµ‹è¯• æœ‰ä»¥ä¸‹ *Form* è¡¨å•ï¼š 1234567891011121314&lt;form id=&quot;test-form&quot; action=&quot;test&quot;&gt; &lt;legend&gt;è¯·é€‰æ‹©æƒ³è¦å­¦ä¹ çš„ç¼–ç¨‹è¯­è¨€ï¼š&lt;/legend&gt; &lt;fieldset&gt; &lt;p&gt;&lt;label class=&quot;selectAll&quot;&gt;&lt;input type=&quot;checkbox&quot;&gt; &lt;span class=&quot;selectAll&quot;&gt;å…¨é€‰&lt;/span&gt; &lt;span class=&quot;deselectAll&quot;&gt;å…¨ä¸é€‰&lt;/span&gt; &lt;/label&gt;&lt;/p&gt; &lt;p&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;lang&quot; value=&quot;python&quot;&gt; Python&lt;/label&gt;&lt;/p&gt; &lt;p&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;lang&quot; value=&quot;ruby&quot;&gt; Ruby&lt;/label&gt;&lt;/p&gt; &lt;p&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;lang&quot; value=&quot;haskell&quot;&gt; Haskell&lt;/label&gt;&lt;/p&gt; &lt;p&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;lang&quot; value=&quot;scheme&quot;&gt; Scheme&lt;/label&gt;&lt;/p&gt; &lt;p&gt;&lt;button type=&quot;submit&quot;&gt;Submit&lt;/button&gt;&lt;/p&gt; &lt;/fieldset&gt;&lt;/form&gt; > è¦æ±‚å®Œæˆï¼š > > - å½“ç”¨æˆ·å‹¾ä¸Šâ€œå…¨é€‰â€æ—¶ï¼Œè‡ªåŠ¨é€‰ä¸­æ‰€æœ‰è¯­è¨€ï¼Œå¹¶æŠŠâ€œå…¨é€‰â€å˜æˆâ€œå…¨ä¸é€‰â€ > - å½“ç”¨æˆ·å»æ‰â€œå…¨ä¸é€‰â€æ—¶ï¼Œè‡ªåŠ¨ä¸é€‰ä¸­æ‰€æœ‰è¯­è¨€ï¼Œå¹¶æŠŠâ€œå…¨ä¸é€‰â€å˜æˆâ€œå…¨é€‰â€ 12345678910111213141516171819&#x27;use strict&#x27;;var form = $(&#x27;#test-form&#x27;), langs = form.find(&#x27;[name=lang]&#x27;), selectAll = form.find(&#x27;label.selectAll :checkbox&#x27;), selectAllLabel = form.find(&#x27;label.selectAll span.selectAll&#x27;), deselectAllLabel = form.find(&#x27;label.selectAll span.deselectAll&#x27;), invertSelect = form.find(&#x27;a.invertSelect&#x27;);// é‡ç½®åˆå§‹åŒ–çŠ¶æ€:form.find(&#x27;*&#x27;).show().off();form.find(&#x27;:checkbox&#x27;).prop(&#x27;checked&#x27;, false).off();deselectAllLabel.hide();// æ‹¦æˆªformæäº¤äº‹ä»¶:form.off().submit(function (e) &#123; e.preventDefault(); alert(form.serialize());&#125;); æ¥ä¸Šï¼Œç»‘å®šäº‹ä»¶ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455var isAllSelected = false;selectAll.click( function() &#123; if(!isAllSelected ) &#123; langs.each ( /* ä¸èƒ½ç”¨lambadaè¡¨è¾¾å¼ï¼Œåº”è¯¥ä¸‹é¢thiséƒ½æœªç»‘å®šæ­£ç¡®ï¼Ÿ ç»è¿‡æµ‹è¯•åœ¨function()&#123;...&#125; thisç»‘å®šæ­£ç¡®ã€‚ */ // () =&gt; this.checked = &#x27;checked&#x27; // () =&gt; $(this).prop(&#x27;checked&#x27;,true) function() &#123; /* attræ— æ³•æˆåŠŸè®¾ç½®å±æ€§ ï¼šä¸èµ·ä½œç”¨ï¼Ÿ */ // $(this).attr(&#x27;checked&#x27;,&#x27;checked&#x27;) ; $(this).prop(&#x27;checked&#x27;,true); // æµ‹è¯•æˆåŠŸ &#125; ) deselectAllLabel.show(); selectAllLabel.hide(); selectAll.prop(&#x27;checked&#x27;,false); isAllSelected = true; &#125; else &#123; langs.each ( /* ä¸èƒ½ç”¨lambadaè¡¨è¾¾å¼ï¼Œåº”è¯¥ä¸‹é¢thiséƒ½æœªç»‘å®šæ­£ç¡®ï¼Ÿ ç»è¿‡æµ‹è¯•åœ¨function()&#123;...&#125; thisç»‘å®šæ­£ç¡®ã€‚ */ // () =&gt; this.checked = &#x27;checked&#x27; // () =&gt; $(this).prop(&#x27;checked&#x27;,true) function() &#123; /* attræ— æ³•æˆåŠŸè®¾ç½®å±æ€§ ï¼šä¸èµ·ä½œç”¨ï¼Ÿ */ // $(this).attr(&#x27;checked&#x27;,&#x27;checked&#x27;) ; $(this).prop(&#x27;checked&#x27;,false); // æµ‹è¯•æˆåŠŸ &#125; ) deselectAllLabel.hide(); selectAllLabel.show(); isAllSelected = false; &#125; &#125;); å¯ä»¥åˆ©ç”¨*jQuery* æ‰¹é‡æ“ä½œç‰¹ç‚¹ï¼Œä¸ç”¨*each()*éå†: 1234567891011121314151617181920212223242526var isAllSelected = false; // åˆ¤æ–­æ­¤æ—¶å•é€‰æ¡†æ˜¯ï¼šå…¨éƒ¨å‹¾é€‰ OR å…¨ä¸å‹¾é€‰selectAll.click( function() &#123; if(!isAllSelected ) &#123; // å…¨éƒ¨å‹¾é€‰ langs.prop(&#x27;checked&#x27;,true); // å…¨é€‰éšè—ã€å…¨ä¸é€‰æ˜¾ç¤º deselectAllLabel.show(); selectAllLabel.hide(); selectAll.prop(&#x27;checked&#x27;,false); isAllSelected = true; &#125; else &#123; // å…¨éƒ¨å–æ¶ˆå‹¾é€‰ langs.prop(&#x27;checked&#x27;,false); // å…¨é€‰æ˜¾ç¤ºï¼Œå…¨ä¸é€‰éšè— deselectAllLabel.hide(); selectAllLabel.show(); isAllSelected = false; &#125; &#125;); ## 6.4 åŠ¨ç”» ç”¨ *JavaScript* å®ç°åŠ¨ç”»ï¼Œæ¯”å¦‚å®ç°æ·¡å‡ºæ•ˆæœï¼Œè®©é€‰ä¸­å…ƒç´ åœ¨1så†…æ”¹å˜ *CSS* *opacityï¼ˆé€æ˜åº¦ï¼‰* å±æ€§å€¼è‡³0ã€‚ æœ¬è´¨éƒ½æ˜¯é€šè¿‡ä¿®æ”¹CSSå±æ€§ï¼Œ*jQuery* å°è£…äº†å‡½æ•°è®©è¿™ä¸€åˆ‡å˜å¾—æ›´åŠ ç®€å•ã€‚ ### é€æ¸æ˜¾éš æ— å‚æ•°çš„ *show()ã€hide()* æ–¹æ³•ç›´æ¥æ˜¾ç¤ºã€éšè—å…ƒç´ ï¼›æœ‰å‚æ•°æŒ‡å®šæ—¶é—´å¯ä»¥å®ç°åŠ¨ç”»æ•ˆæœã€‚ | æ–¹æ³• | æè¿° | | :------------------------: | :----------------------------------------------------------: | | *show(timeSeconds,func)* | åœ¨æŒ‡å®š *timeSeconds* æ˜¾ç¤ºå…¨éƒ¨ï¼Œ*func* æŒ‡å®šæ˜¾ç¤ºå®ŒæˆåæŒ‡å®šçš„æ–¹æ³• | | *hide(timeSeconds,func)* | åœ¨æŒ‡å®š *timeSeconds* éšè—å…¨éƒ¨ï¼Œ*func* æŒ‡å®šæ˜¾ç¤ºå®ŒæˆåæŒ‡å®šçš„æ–¹æ³• | | *toggle(timeSeconds,func)* | æ ¹æ®å½“å‰çŠ¶æ€ï¼Œè‡ªåŠ¨è°ƒç”¨ *show()ã€hide()* æ–¹æ³• | - *timeSeconds* ä»¥æ¯«ç§’ä¸ºå•ä½ï¼ŒåŒæ—¶å¯ä»¥ç”¨ *â€˜slowâ€™ã€â€˜fastâ€™* ç­‰ç‰¹æ®Šå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°å€¼ã€‚ - æ˜¾ç¤ºè¿‡ç¨‹æ˜¯ä»å·¦ä¸Šè§’ ---> å±•å¼€é“ºæ»¡æ•´ä¸ªå¹³é¢ ï¼›éšè—åˆ™æ˜¯ä»å³ä¸‹è§’ --> éšè—æ•´ä¸ªå¹³é¢ã€‚ > :slightly_smiling_face: ç®€å•å®ä¾‹ 123456var div = $(&#x27;#test-show-hide&#x27;);// åœ¨1ç§’é’Ÿå†…é€æ¸æ¶ˆå¤±div.hide(1000); // åœ¨0.6ç§’é’Ÿå†…é€æ¸æ˜¾ç¤ºdiv.show(&#x27;slow&#x27;); å°±åƒæ­¤å‰è¯´è¿‡ï¼Œä¸Šé¢æ˜¾ç¤ºæ˜¯ä»å·¦ä¸Šå±•å¼€ï¼Œä¸‹é¢æ–¹æ³•å¯ä»¥ä»å‚ç›´æ–¹æ³•é€æ¸å±•å¼€ã€æ”¶ç¼© ~ just like æ‹‰çª—å¸˜ã€‚ | æ–¹æ³• | æè¿° | | :-----------------------------: | :--------------: | | *slideUp(timeSeconds,func)* | æ‹‰çª—å¸˜èˆ¬æ˜¾ç¤º | | *slideDown(timeSeconds,func)* | æ‹‰çª—å¸˜èˆ¬æ”¶èµ·éšè— | | *slideToggle(timeSeconds,func)* | è‡ªåŠ¨è°ƒç”¨ä¸Šé¢æ–¹æ³• | ### æ·¡å…¥æ·¡å‡º *fadeIn() ã€fadeOut()* å¯é€šè¿‡ä¸æ–­è®¾ç½® *DOM* *CSS* *opacity* å±æ€§æ¥å®ç°æ·¡å…¥æ·¡å‡ºåŠ¨ç”»æ•ˆæœã€‚ | æ–¹æ³• | æè¿° | | :----------------------------: | :--------------: | | *fadeIn(timeSeconds,func)* | æ·¡å…¥æ˜¾ç¤º | | *fadeOut(timeSeconds,func)* | æ·¡å‡ºéšè— | | *fadeToggle(timeSeconds,func)* | è‡ªåŠ¨è°ƒç”¨ä¸Šé¢æ–¹æ³• | å­˜åœ¨ä»¥ä¸‹è¡¨æ ¼ï¼š ![1565600702619](https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/1565600702619.png) > è¯•å®Œæˆä»¥ä¸‹ä»£ç ï¼Œä½¿å¾—æ¯æ¬¡åˆ é™¤è¡¨ä¸­ç¬¬ä¸€é¡¹å¯ä»¥æ·¡å‡ºæ˜¾ç¤ºã€‚ 123456789&#x27;use strict&#x27;;function deleteFirstTR() &#123; var tr = $(&#x27;#test-table&gt;tbody&gt;tr:visible&#x27;).first(); // åœ¨ä»¥ä¸‹å®Œæˆäº‹ä»¶ç»‘å®š...&#125;deleteFirstTR(); å®Œæˆçš„ä»£ç å¦‚ä¸‹ï¼š 1tr.fadeOut(1000,() =&gt; tr.remove()); ### è‡ªå®šä¹‰åŠ¨ç”» å¯¹ä¸Šé¢æä¾›çš„åŠ¨ç”»æ•ˆæœä¸æ»¡æ„ï¼Ÿå°è¯•è‡ªå®šä¹‰åŠ¨ç”»å§ã€‚ | æ–¹æ³• | æè¿° | | :-----------------------------------: | :----------------------------------------------------------: | | *animate(cssStyleï¼ŒtimeSeconds,func)* | åœ¨æŒ‡å®š*timeSeconds* è¾¾åˆ°é¢„è®¾*cssStyle* å€¼ï¼Œæœ€åæ‰§è¡Œ *func* å‡½æ•° | ç°åœ¨æˆ‘ä»¬æ¥è¯•è¯•è‡ªå®šä¹‰å®ç°ä¸Šé¢æ·¡å‡ºåˆ é™¤è¡¨æ ¼æ•ˆæœå§ã€‚ > æ·¡å‡ºåˆ é™¤è¡¨æ ¼ã€‚ 12345678910&#x27;use strict&#x27;;function deleteFirstTR() &#123; var tr = $(&#x27;#test-table&gt;tbody&gt;tr:visible&#x27;).first(); // åœ¨ä»¥ä¸‹å®Œæˆäº‹ä»¶ç»‘å®š... tr.animate(&#123; opacity:0 &#125;, 1000, () =&gt; tr.remove())&#125;deleteFirstTR(); ### ä¸²è¡ŒåŠ¨ç”» å¦‚æœæœ‰ä¸¤ä¸ªåŠ¨ç”»æ•ˆæœï¼š 12345var div = $(&#x27;#test-animates&#x27;);// æ”¾å¤§div.animate( &#123; width: &#x27;256px&#x27;, height: &#x27;256px&#x27;&#125;, 2000);// ç¼©å°div.animate( &#123; width: &#x27;128px&#x27;, height: &#x27;128px&#x27;&#125;, 2000); å¸Œæœ›å®ç°æ”¾å¤§ --> ç¼©å° è¿ç»­åŠ¨ç”»æ•ˆæœï¼Œå¦‚æœè¿™æ ·ç®€å•çš„è¿ç»­æ‰§è¡Œä¸¤ä¸ªåŠ¨ç”»ï¼š 1div.animate( &#123; width: &#x27;256px&#x27;, height: &#x27;256px&#x27;&#125;, 2000).animate( &#123; width: &#x27;128px&#x27;, height: &#x27;128px&#x27;&#125;, 2000); æ˜¯æ— æ³•å®ç°çš„ï¼Œå› ä¸ºï¼š*åŠ¨ç”»éœ€è¦æ‰§è¡Œä¸€æ®µæ—¶é—´ï¼Œæ‰€ä»¥jQueryå¿…é¡»ä¸æ–­è¿”å›æ–°çš„Promiseå¯¹è±¡æ‰èƒ½åç»­æ‰§è¡Œæ“ä½œ* ã€‚ æ‰€ä»¥æˆ‘ä»¬éœ€è¦å€ŸåŠ© *delay()* æ–¹æ³•å®ç°æš‚åœï¼Œç»™äºˆæ—¶é—´è¿”å›æ–°çš„ *Promise* å¯¹è±¡æ‰§è¡Œåç»­æ“ä½œï¼š 123div.animate( &#123; width: &#x27;256px&#x27;, height: &#x27;256px&#x27;&#125;, 2000) .delay(1000) .animate( &#123; width: &#x27;128px&#x27;, height: &#x27;128px&#x27;&#125;, 2000); ### åŠ¨ç”»æ²¡æœ‰æ•ˆæœï¼Ÿ *jQuery* åŠ¨ç”»çš„åŸç†æ˜¯é€æ¸æ”¹å˜ *CSS* å€¼ï¼Œè€Œæœ‰äº›æƒ…å†µæ˜¯æ— æ³•æ”¹å˜æˆåŠŸçš„ã€‚ä¾‹å¦‚ï¼š - *slideUp()* é€æ¸æŠŠ*CSS*å±æ€§*height* --> 0ï¼Œä½†æ˜¯é*block* å±æ€§å€¼*DOM* å…ƒç´ å¯¹å®ƒä»¬è®¾ç½® *height* æ˜¯ä¸èµ·ä½œç”¨çš„ã€‚ - *animate()* è®¾ç½® *background-color* æ²¡æœ‰æ•ˆæœï¼Œå› ä¸º *jQuery* æ²¡æœ‰å®ç°ã€‚"},{"title":"æ·±åº¦å­¦ä¹ åŸºç¡€ï¼ˆäºŒï¼‰OpenCV","date":"2022-01-02T11:54:25.546Z","updated":"2022-01-02T11:43:17.878Z","comments":true,"path":"NO_post/æ·±åº¦å­¦ä¹ åŸºç¡€ï¼ˆäºŒï¼‰OpenCV.html","permalink":"https://hwh.zone/NO_post/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80%EF%BC%88%E4%BA%8C%EF%BC%89OpenCV.html","excerpt":"","text":"ä¸€ã€åˆè¯†OpenCV ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯ä»¥ä¸€é”®å®‰è£… OpenCV ï¼š 1conda install -c menpo opencv 1.1 ç¯å¢ƒæ­å»º ç®€å•æµ‹è¯•æ˜¯å¦æ­å»ºæˆåŠŸOpenCVï¼š 1234567891011import cv2 as cv# 1.æµ‹è¯•æ‰“å¼€å›¾ç‰‡src = cv.imread(&quot;C:/Users/86151/Pictures/1571142354306.png&quot;)# æ‰“å¼€ä¸€ä¸ªåä¸ºâ€œtestâ€çš„çª—å£ï¼ˆä¸çŸ¥é“æœ‰ä»€ä¹ˆç”¨ï¼Ÿï¼‰cv.namedWindow(&quot;test&quot;,cv.WINDOW_AUTOSIZE) # æ‰“å¼€æŒ‡å®šè·¯å¾„å›¾ç‰‡cv.imshow(&quot;111&quot;,src)cv.waitKey(0) # ç­‰å¾…ç”¨æˆ·è¾“å…¥å…³é—­å›¾ç‰‡ï¼Œè¿™é‡Œå¥½åƒä»»æ„é”®å…³é—­cv.destroyAllWindows()print(&quot;hello opencv!&quot;) 1.2 å›¾åƒåŠ è½½å’Œä¿å­˜ 1.2.1 å›¾ç‰‡ï¼šè¯»å–+åŸºæœ¬å±æ€§ æ˜¾ç¤ºå›¾ç‰‡åŒæ—¶æ‰“å°ä¸€äº›åŸºæœ¬ä¿¡æ¯ã€‚ 123456789101112131415# 2.è¯»å–å›¾ç‰‡ï¼šä¸­æ–‡è·¯å¾„å¥½åƒä¼šæŠ¥é”™imageSrc = r&quot;C:/Users/86151/Pictures/1571142354306.png&quot;image = cv.imread(imageSrc)# æ˜¾ç¤ºå›¾ç‰‡å’ŒåŸºæœ¬ä¿¡æ¯cv.imshow(&quot;hwh&quot;,image)cv.waitKey(0)print(type(image)) # &lt;class &#x27;numpy.ndarray&#x27;&gt;print(image.shape) # (278, 1068, 3),ä¾æ¬¡å¯¹åº”ï¼šå®½ã€é«˜ã€é€šé“æ•°print(image.size) # 890712 = 278*1068*3print(image.dtype) # uint8,æ¯ä¸ªåƒç´ åŸºæœ¬å•å…ƒï¼Ÿ# ä¿å­˜å›¾ç‰‡cv.imwrite(&quot;D:/result.png&quot;,image) å›¾ç‰‡ä½¿ç”¨ cv.imread è¯»å–åä¸‰ä½ numpy æ•°ç»„ï¼Œä¾‹å¦‚ image[0,0,0] ç´¢å¼•ç¬¬ä¸€ä¸ªåƒç´ å€¼ã€‚ æ —å­1ï¼šå°†å›¾ç‰‡RGBä¸‰é€šé“è¿›è¡Œæ‹†åˆ†ã€åˆå¹¶åˆ†åˆ«å±•ç¤ºã€‚ é¦–å…ˆæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ cv.split() å°†å›¾ç‰‡è¿›è¡Œåˆ†éš”ï¼š 12345678910image = cv.imread(r&quot;C:\\Users\\86151\\Pictures\\standingCat.jpg&quot;)# cv.splitï¼šå°†å›¾ç‰‡åˆ†å‰²ä¸ºBGRä¸‰é€šé“b,g,r = cv.split(image)cv.imshow(&#x27;r&#x27;,r)cv.imshow(&#x27;g&#x27;,g)cv.imshow(&#x27;b&#x27;,b)# cv.mergeï¼šåˆå¹¶æˆRGBï¼ˆä¸æ˜¯BGRï¼‰å›¾åƒrgb = cv.merge([r,g,b])cv.imshow(&#x27;rgb&#x27;,rgb) å…¶å®ƒï¼šnumpyåˆ›å»ºå›¾ç‰‡ 12345# åˆ›å»ºä¸€å¼ ä¸‰é€šé“é»‘è‰²å›¾ç‰‡ï¼š255*255*3image = np.zeros((255,255,3),np.uint8) # æ¯ä¸ªåƒç´ å€¼éƒ½å ä¸€ä¸ªå­—èŠ‚ï¼ˆ0-255ï¼‰cv.imshow(&#x27;black&#x27;,image)cv.waitKey(0) 1.2.2 è§†é¢‘ï¼šè¯»å– 123456789101112# 3.è§†é¢‘# VideoCaptureï¼šæŒ‡å®šè§†é¢‘è·¯å¾„ï¼Œä¸æŒ‡å®šï¼ˆå‚æ•°=0ï¼‰åˆ™æ˜¯æ‰“å¼€è‡ªå¸¦æ‘„åƒå¤´capture = cv.VideoCapture(0)while(1): ret,frame = capture.read() # cv.flip: ä½¿å›¾åƒé•œåƒé¢ å€’ï¼Œæ¢å¤æ­£å¸¸ frame = cv.flip(frame,1) cv.imshow(&quot;video&quot;,frame) # cv.waitKey:æ¯å¤„ç†ä¸€å¸§éƒ½ç­‰å¾…50msï¼ŒåŒæ—¶å½“æŒ‰ä¸‹ESC(ASCII=27)é€€å‡º c = cv.waitKey(50) if c==27: break; 1.3 è‰²å½©ç©ºé—´ è¯¥éƒ¨åˆ†ä¸»è¦å‚è€ƒï¼šå›¾åƒè‰²å½©ç©ºé—´æ€»ç»“ 1.3.1 è‰²å½©ç©ºé—´åˆè¯† å›¾åƒé€šé“ ä»æ•°å­¦æ–¹å¼ç†è§£ï¼Œä¸€å¼ å›¾ç‰‡æ˜¯ä¸€ä¸ªæ•°å€¼çŸ©é˜µã€‚å¦‚æœæœ‰n ä¸ªé€šé“ï¼Œåˆ™æŒ‡æŒ‰*ä¸åŒæ–¹å¼* å¯åˆ†è§£æˆ n ä¸ªåŒå¤§å°ã€ä¸åŒæ•°å€¼çŸ©é˜µä¹‹å’Œã€‚ å¦‚ä¸‹ä¸‰é€šé“RGB ï¼Œå¯å°†åŸå§‹å½©è‰²å›¾ç‰‡ â€”&gt; åˆ†è§£æˆ RGB ä¸‰é€šé“ï¼š RGB ä¸‰ä¸ªåˆ†é‡ Rã€Gã€Bå–å€¼å¤§å°åœ¨ [0,255] ä¹‹é—´ã€‚ å¸¸ç”¨è‰²å½©ç©ºé—´æœ‰ï¼šBGRã€RGBã€GRAYã€RGBã€HSVã€YUV ç­‰ 1.3.2 è‰²å½©ç©ºé—´è½¬æ¢ ç®€å•ä½¿ç”¨å¦‚ä¸‹ä»£ç å¯ä»¥è¿›è¡Œä¸åŒè‰²å½©ç©ºé—´çš„è½¬æ¢ï¼š 123456789101112# 4.è‰²å½©ç©ºé—´è½¬æ¢image = cv.imread(r&quot;C:\\Users\\86151\\Pictures\\standingCat.jpg&quot;)cv.imshow(&quot;standingCat&quot;,image)# è½¬æ¢ä¸ºGRAYgray = cv.cvtColor(image,cv.COLOR_BGR2GRAY)cv.imshow(&quot;gray&quot;,gray)# è½¬æ¢ä¸ºRGBRGB = cv.cvtColor(image,cv.COLOR_BGR2RGB)cv.imshow(&quot;RGB&quot;,RGB)cv.waitKey(0) HSVç©ºé—´é¢œè‰²ä¸‰é€šé“èŒƒå›´ æ —å­ 1ï¼šå°†è§†é¢‘ä¸­çº¢è‰²è½¬æ¢ä¸º --&gt;ç™½è‰²çªå‡ºæ˜¾ç¤ºï¼Œå…¶ä½™é¢œè‰²éƒ½æ˜¯é»‘è‰²ä¾¿äºè·Ÿè¸ªã€‚ åœ¨å›¾åƒå¤„ç†ä¸­ï¼Œé€šå¸¸ä¸ä¼šç›´æ¥å¯¹RGBå›¾åƒåšå¤„ç†ï¼Œå› ä¸ºRGBå’Œäººç±»è§†è§‰ç›¸å·®è¾ƒè¿œã€‚æ•…ä¸‹é¢ä»£ç å°†æ¯ä¸€å¸§éƒ½è½¬æ¢åˆ° HSV è‰²å½©ç©ºé—´ã€‚ 1234567891011121314151617181920212223242526# 5.è§†é¢‘è‰²å½©ç©ºé—´è½¬æ¢capture = cv.VideoCapture(&quot;D:/hwh/uploadToGit/code/python/5_learn_pytorch/src/video1.mp4&quot;)while(True): ret,frame = capture.read() if ret == False: # åˆ¤æ–­è§†é¢‘æµæ˜¯å¦è¯»å–å®Œæ¯• break # è½¬æ¢åˆ°hsvè‰²å½©ç©ºé—´ï¼Œè¿”å›hsvå¸§ hsv = cv.cvtColor(frame,cv.COLOR_BGR2HSV) # è®¾ç½®é»‘è‰²åƒç´ ä¸‰é€šé“å€¼é˜€å€¼èŒƒå›´ # å°†hsvå¸§è½¬æ¢ä¸ºäºŒå€¼åŒ–maskå¸§ lower_hsv = np.array([0,43 ,46]) # è®¾ç½®çº¢è‰²æœ€ä½ä¸‰é€šé“å€¼ï¼ˆåœ¨hsvè‰²å½©ç©ºé—´ï¼‰ upper_hsv = np.array([10,255,255]) # è®¾ç½®çº¢è‰²æœ€é«˜ä¸‰é€šé“å€¼ï¼ˆåœ¨hsvè‰²å½©ç©ºé—´ï¼‰ mask = cv.inRange(hsv,lowerb=lower_hsv,upperb=upper_hsv) # æ˜¾ç¤ºåŸå§‹è§†é¢‘ cv.namedWindow(&quot;testVideo&quot;,0) # ç¬¬äºŒå‚æ•°ä¸æ˜ cv.resizeWindow(&quot;testVideo&quot;,900,600) # è®¾ç½®çª—å£å¤§å° cv.imshow(&quot;testVideo&quot;,frame) # æ˜¾ç¤ºå½“å‰è¯»å–çš„å¸§ # æ˜¾ç¤ºmaskäºŒå€¼åŒ–è§†é¢‘ cv.namedWindow(&quot;mask&quot;, 0) cv.resizeWindow(&quot;mask&quot;, 900, 600) cv.imshow(&quot;mask&quot;,mask) c = cv.waitKey(20) if c == 27: break 1.4 åƒç´ è¿ç®— 1.4.1 åŸºæœ¬åŠ å‡ä¹˜é™¤ è¯•åˆ†æï¼Œä¸‹é¢ä¸¤å¼ å›¾ç‰‡è¿›è¡ŒåŠ å‡ä¹˜é™¤å¾—åˆ°çš„ç»“æœã€‚ å®šä¹‰åŸºæœ¬ä»£ç ï¼š åŠ å‡æ“ä½œï¼š 1234# å›¾ç‰‡ç›¸åŠ add_image = cv.add(src1,src2);# å›¾ç‰‡ç›¸å‡substract_image = cv.substract(src1,src2); å›¾ç‰‡ç›¸åŠ ï¼šé»‘è‰²=0ï¼Œç™½è‰²=255ã€‚æ‰€ä»¥src1é»‘è‰²èƒŒæ™¯ç›¸åŠ å¯¹src2æ²¡å½±å“ï¼Œè€Œsrc1ç™½è‰²å­—ä½“å’Œsrc2ç›¸åŠ ä¼šè¶…è¿‡255è¢«æˆªæ–­ä¾æ—§æ˜¾ç¤ºLinuxç™½è‰²å­—ä½“ã€‚ å›¾ç‰‡ç›¸å‡ï¼šèƒŒæ™¯æ˜¯é»‘è‰²ï¼Ÿå› ä¸ºsrc1èƒŒæ™¯é»‘è‰²-src2 &lt; 0ï¼Œä¾æ—§å–0æ•…ç»“æœä¸ºé»‘è‰² ï¼› å­—ä½“äº”é¢œå…­è‰²ï¼Ÿå› ä¸ºsrcä¸­Linuxå­—ä½“æ˜¯ç™½è‰²=255ï¼Œå‡å»src2å€¼ï¼Œå˜æˆå…¶å®ƒé¢œè‰²äº†ã€‚ ä¹˜æ³•æ“ä½œï¼š å›¾ç‰‡ç›¸ä¹˜ï¼šèƒŒæ™¯é»‘è‰²ï¼Ÿå› ä¸ºsrc1é»‘è‰²=0 * ç¬¬äºŒå¼ å›¾å¯¹åº”éƒ¨åˆ† == 0 ï¼Œè¿˜æ˜¯æ˜¾ç¤ºé»‘è‰² ï¼› å­—ä½“æ˜¯ç™½è‰²å‘¨å›´åˆäº”é¢œå…­è‰²ï¼Ÿ è¿™æ˜¯å› ä¸º src1ä¸­Linuxå­—ä½“å‘¨å›´æœ‰åé”¯é½¿ï¼Œå‘¨å›´è¾¹ç¼˜æœ‰å¹³æ»‘æœ‰æ¨¡ç³Šï¼Œå®ƒå‘¨å›´åƒç´ å€¼å¹¶ä¸ä¸º0ï¼Œå’Œsrc2ç›¸ä¹˜åï¼Œæ‰€ä»¥æœ€ç»ˆåƒç´ å€¼å¹¶ä¸ä¸º0è€Œç›¸ä¹˜å€¼å˜å¤§äº†å°±å®¹æ˜“æ˜¾ç¤ºå‡ºå…¶å®ƒé¢œè‰²ã€‚ 14.2 MASKï¼ˆæ©è†œï¼‰ MASKæ©è†œï¼Œå³å›¾å’Œæ©è†œæŒ‰ä½ä¸è¿›è¡Œè¿ç®—ï¼Œç­›é€‰å‡ºæ„Ÿå…´è¶£çš„åŒºåŸŸã€‚ ç”±äºmaskå’ŒåŸå›¾åƒç´ å€¼ âˆˆ[0,255]âˆˆ[0,255]âˆˆ[0,255] ï¼Œæ‰€ä»¥å®šä¹‰é€»è¾‘ä¸å¦‚ä¸‹ï¼š maskå’ŒåŸå›¾å¯¹åº”ç‚¹åƒç´ å€¼éƒ½ &gt;0&gt;0&gt;0 ï¼Œåˆ™ä¸ºçœŸï¼Œè¾“å‡º*åŸå›¾åƒç´ åƒç´ å€¼* å…¶ä¸­ä¸€ä¸ªç­‰äº0ï¼Œåˆ™ä¸ºå‡ï¼Œè¾“å‡ºå¯¹äº*ç‚¹åƒç´ å€¼ä¸º0* è¿™æ ·å®šä¹‰maskæ„ä¹‰åœ¨äºï¼š å¯¹äºè‡ªå·±æ•¢å…´è¶£çš„åŒºåŸŸï¼Œmask=0ï¼Œåˆ™æŒ‰ä½ä¸å¿…ä¸º0ï¼ˆæ˜¾ç¤ºä¸ºé»‘è‰²ï¼‰ è‡ªå·±ä¸æ„Ÿå…´è¶£çš„åŒºåŸŸè®¾ç½® mask&gt;0 ,åˆ™ä¾æ—§è¾“å‡ºä¸ºåŸå›¾åƒç´ åƒç´ å€¼ ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼šæ›´å¤šå‚è€ƒ maskåªèƒ½æ˜¯äºŒç»´çŸ©é˜µï¼Œä¸åŸå›¾ shape[:2] ç›¸åŒï¼ˆshape[:2] æ˜¯ 1*3 çŸ©é˜µï¼Œå½“å…¶æ˜¯ä¸€ç»´çŸ©é˜µ [:2] ç´¢å¼•çš„æ˜¯å‰ä¸¤ä¸ªæ•°å­—ï¼Œè€Œéå‰ä¸¤è¡Œï¼ï¼‰ 1.4.3 é€»è¾‘æ“ä½œ 12345678image1 = cv.imread(r&quot;C:\\Users\\86151\\Pictures\\test1.jpg&quot;)image2 = cv.imread(r&quot;C:\\Users\\86151\\Pictures\\test2.jpg&quot;)# é€»è¾‘ä¸dst1 = cv.bitwise_and(image1,image2)# é€»è¾‘æˆ–dst2 = cv.bitwise_or(image1,image2)# å–å dst3 = cv.bitwise_not(image1) ä¸Šå›¾æ˜¯é€»è¾‘ä¸ç»“æœ æ —å­1ï¼šinRang+mask å®ä¾‹ï¼šç»“åˆä¸ŠèŠ‚åˆ©ç”¨å°†å›¾åƒæ©è†œmaskï¼Œçªå‡ºæ˜¾ç¤ºæŸäº›æŒ‡å®šé¢œè‰²å˜åŒ–ä¸ºç™½è‰²ï¼ˆå…¶ä½™ä¸ºé»‘è‰²ï¼‰ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ bitwise_and ï¼Œä½¿å¾—çªå‡ºæ˜¾ç¤ºçš„é¢œè‰²ä¸ºåŸæ¥é¢œè‰²ï¼Œè€Œéç™½è‰²ã€‚ 12345678910111213141516171819202122232425262728capture = cv.VideoCapture(&quot;D:/hwh/uploadToGit/code/python/5_learn_pytorch/src/video1.mp4&quot;)while(True): ret,frame = capture.read() if ret == False: # è§†é¢‘æµè¯»å–å®Œæ¯• break hsv = cv.cvtColor(frame,cv.COLOR_BGR2HSV) lower_hsv = np.array([0,43 ,46]) upper_hsv = np.array([10,255,255]) # åœ¨è¿™é‡Œmaskâˆˆ&#123;0,255&#125;ï¼Œåªæœ‰ä¸¤ä¸ªæ•°å­— mask = # å‰é¢ä¸¤ä¸ªå‚æ•°åŸå›¾è¿›è¡Œç›¸åŠ ï¼ˆé€»è¾‘ä¸ä¸å˜ï¼Ÿï¼‰ï¼Œç„¶åé€šè¿‡æ©è†œmaskæŒ‰ä½ä¸å®ç°è¾“å‡ºåŸå›¾åƒç´ å€¼ï¼Ÿ dst = cv.bitwise_and(frame,frame,mask=mask) # æ˜¾ç¤ºåŸå§‹è§†é¢‘1 cv.namedWindow(&quot;testVideo&quot;,0) cv.resizeWindow(&quot;testVideo&quot;,600,400) cv.imshow(&quot;testVideo&quot;,frame) # æ˜¾ç¤ºmaskäºŒå€¼åŒ–è§†é¢‘2 cv.namedWindow(&quot;mask&quot;, 0) cv.resizeWindow(&quot;mask&quot;, 600, 400) cv.imshow(&quot;mask&quot;,mask) # æ˜¾ç¤ºé€»è¾‘ä¸æ“ä½œè§†é¢‘3 cv.namedWindow(&quot;dst&quot;, 0) cv.resizeWindow(&quot;dst&quot;, 600, 400) cv.imshow(&quot;dst&quot;,dst) c = cv.waitKey(20) if c == 27: break å®é™…ä¸ŠåŸå›¾ &amp; maskè¾“å‡ºéé»‘éƒ¨åˆ†å’Œ åŸå›¾åŒºåˆ«è¿˜æ˜¯æŒºå¤§çš„å•Šï¼Ÿ 1.4.4 å…¶å®ƒï¼šå¯¹æ¯”åº¦addWeightç­‰ æœ‰ç‚¹ç±»æ˜¯addï¼Œä¹Ÿæ˜¯è¿›è¡Œå›¾åƒå åŠ ä¸è¿‡ä¼šè®¾ç½®å„ç§æƒé‡å’Œå‚æ•°ã€‚æŒ‰ä¸‹å…¬å¼è®¡ç®—ç»“æœå›¾ï¼š alpha ï¼š src1 çŸ©é˜µå…ƒç´ æƒé‡ ï¼› beta ï¼š src2 çŸ©é˜µæƒé‡ï¼›gamma æœ€åå„å…ƒç´ å†ç›¸åŠ å€¼ã€‚ ä¸¾ä¾‹ï¼šå¯é€šè¿‡ addWeighted è°ƒæ•´å›¾ç‰‡çš„äº®åº¦ã€å¯¹æ¯”åº¦ç­‰ ç”Ÿæˆä¸€å¼ çº¯0çŸ©é˜µ blank ï¼Œé‚£betaæœ‰ä»€ä¹ˆç”¨ï¼Ÿä¹˜ä¸Šä¸€ä¸ªé›¶çŸ©é˜µä¸å˜ï¼Ÿ æ­¤æ—¶ alpha å³å¯æ˜¯è®¤ä¸ºæ˜¯å¯¹æ¯”åº¦ï¼ˆç­‰æ¯”å¢å¤§å…ƒç´ åƒç´ å€¼ï¼Œé»‘è‰²è¿˜æ˜¯é»‘ï¼Œåˆ«çš„ä¼šç­‰æ¯”å˜å¤§ï¼‰ï¼Œgamma å¯è°ƒèŠ‚äº®åº¦ï¼ˆå€¼è¶Šå¤§è¶Šç™½â€“&gt;è¶Šäº®ï¼‰ 12345678910111213# 7.addWeight è°ƒæ•´å¯¹æ¯”åº¦image = cv.imread(r&quot;C:\\Users\\86151\\Pictures\\standingCat.jpg&quot;)# åˆ›å»ºä¸€å¼ å’ŒåŸå›¾ç­‰å¤§çº¯é»‘å›¾h,w,c = image.shapeblank = np.zeros([h,w,c],dtype=image.dtype)# å¢åŠ å¯¹æ¯”åº¦dst = cv.addWeighted(image,1.2,blank,1-1.2,10)# æ˜¾ç¤ºå›¾ç‰‡cv.imshow(&#x27;image&#x27;,image)cv.imshow(&#x27;dst&#x27;,dst)cv.waitKey(0) å…¶å®ƒæ“ä½œã€‚ 12345# æ‰“å°å‡ºå›¾ç‰‡ä¸‰ä¸ªé€šé“åƒç´ å‡å€¼m1 = cv.mean(src1)# æ‰“å°å‡ºå›¾ç‰‡ä¸‰ä¸ªé€šé“åƒç´ å‡å€¼å’Œæ–¹å·®m1,dev1 = cv.meanStdDev(m1) 1.5 ç»˜å›¾ä¸é¼ æ ‡äº‹ä»¶ è¯¥éƒ¨åˆ†ä¸»è¦å‚ç…§äºï¼šopenCV-Python ä¸­æ–‡æ•™ç¨‹ 1.5.1 ç»˜å›¾ ä»¥ä¸‹ä¸ºç®€å•å®ä¾‹ï¼Œç»˜åˆ¶çŸ©å½¢ã€å¤šè¾¹å½¢ã€åœ†ã€æ¤­åœ†ã€æ·»åŠ æ–‡å­—ç­‰ 12345678910111213141516171819202122232425262728293031image = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\standingCat.jpg&quot;)# 1.ç”»çº¿# å‚æ•°ä¾æ¬¡æ„ä¹‰ï¼šåŸå›¾ï¼Œèµ·å§‹ç‚¹åæ ‡ï¼Œç»ˆç‚¹åæ ‡ï¼Œçº¿é¢œè‰²ï¼Œçº¿åšåº¦cv.line(image,(0,0),(250,250),(255,0,0),5)# 2.ç”»çŸ©å½¢# å‚æ•°ä¾æ¬¡æ„ä¹‰ï¼šåŸå›¾ï¼Œå·¦ä¸Šè§’åæ ‡ï¼Œå³ä¸‹è§’åæ ‡ï¼Œè¾¹é¢œè‰²ï¼Œè¾¹åšåº¦cv.rectangle(image,(50,50),(250,250),(255,255,0),1)# 3.ç”»åœ†# å‚æ•°ä¾æ¬¡æ„ä¹‰ï¼šåŸå›¾ï¼Œåœ†å¿ƒåæ ‡ï¼ŒåŠå¾„ï¼Œè¾¹é¢œè‰²ï¼Œè¾¹åšåº¦# æŒ‡å®šè¾¹åšåº¦=-1ï¼Œåˆ™åœ†ä¼šå‘å†…å¡«å……cv.circle(image,(250,250),20,(0,0,255),-1)# 4.ç”»æ¤­åœ†# å‚æ•°ä¾æ¬¡æ„ä¹‰ï¼šåŸå›¾ï¼Œåœ†å¿ƒåæ ‡ï¼Œ(é•¿è½´ï¼ŒçŸ­è½´)ï¼Œæ—‹è½¬è§’åº¦ï¼Œæ¤­åœ†å¼§èµ·å§‹è§’ï¼Œæ¤­åœ†å¼§ç»ˆæ­¢è§’ï¼Œé¢œè‰²cv.ellipse(image,(250,250),(100,50),30,70,360,255,1)# 5.ç”»å¤šè¾¹å½¢# å‚æ•°ä¾æ¬¡æ„ä¹‰ï¼šåŸå›¾ï¼Œå¤šè¾¹å½¢å„ç‚¹åæ ‡ï¼Œæ˜¯å¦é—­åˆï¼Œè¾¹é¢œè‰²# æŒ‡å®šå¤šè¾¹å½¢å„ç‚¹å·¦è¾¹ï¼Œ[å¿…é¡»æ˜¯int32]pts=np.array([[100,50],[200,300],[400,200],[500,100]],np.int32)cv.polylines(image,[pts],True,(46.46,46))# 6.æ·»åŠ æ–‡å­—# å‚æ•°ä¾æ¬¡æ„ä¹‰ï¼šåŸå›¾ï¼Œç»˜åˆ¶ä½ç½®ï¼Œå­—ä½“ç±»å‹ï¼Œå¤§å°ï¼Œé¢œè‰²ï¼Œç²—ç»†ï¼Œç±»å‹font = cv.FONT_HERSHEY_SCRIPT_SIMPLEXcv.putText(image,&#x27;HELLO OPENCV!&#x27;,(100,200),font,2,(0,0,255),cv.LINE_4)cv.imshow(&#x27;result&#x27;,image)cv.waitKey(0) 1.5.2 é¼ æ ‡äº‹ä»¶ åˆ©ç”¨é¼ æ ‡äº‹ä»¶ï¼Œå®ç°å¯¹å›¾ç‰‡æŒ‡å®šåŒºåŸŸè£å‰ªã€‚ 123456789101112131415161718192021222324252627282930# 9.é¼ æ ‡äº‹ä»¶# 1.åˆ›å»ºå›è°ƒå‡½æ•°ï¼šdraw_circle(event,x,y,flags,param)# 2.ç»‘å®šå›è°ƒå‡½æ•°&amp;çª—å£ï¼šsetMouseCallback(&#x27;window&#x27;,draw_circle)def draw_circle(event,x,y,flags,param): global ix,iy,drawing,mode # è§¦å‘å·¦é”®æŒ‰ä¸‹äº‹ä»¶ï¼šEVENT_LBUTTONDOWN if event == cv.EVENT_LBUTTONDOWN: ix,iy = x,y # è·å–å·¦é”®æŒ‰ä¸‹åˆå§‹åæ ‡ elif event == cv.EVENT_LBUTTONUP: cv.rectangle(image,(ix,iy),(x,y),(0,0,255),1) cv.imshow(&#x27;crop&#x27;,image[iy:y,ix:x]) # æœªè§£å†³ï¼šç”¨é¼ æ ‡ç§»åŠ¨+æ‹–æ‹½äº‹ä»¶æ¥åˆ¤æ–­ï¼Œä¼šæ¯æ¬¡ç§»åŠ¨ç”»ä¸€ä¸ªçŸ©å½¢ï¼Œæœ€åå‡ºç°å¾ˆå¤šçŸ©å½¢ # å·²ç”»çš„çŸ©å½¢åˆæ— æ³•æ¸…é™¤ # è§¦å‘é¼ æ ‡ç§»åŠ¨ &amp; å·¦é”®æ‹–æ‹½äº‹ä»¶ # elif event==cv.EVENT_MOUSEMOVE and flags==cv.EVENT_FLAG_LBUTTON: # if drawing == True: # elif event==cv.EVENT_LBUTTONUP: # drawing = Falseimage = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\standingCat.jpg&quot;)cv.namedWindow(&#x27;img&#x27;)cv.setMouseCallback(&#x27;img&#x27;,draw_circle)while(1): # æ”¾åœ¨å¾ªç¯é‡Œï¼Œä¸€ç›´æ˜¾ç¤ºï¼Ÿ cv.imshow(&#x27;img&#x27;, image) k = cv.waitKey(1) if k == ord(&#x27;q&#x27;): break äºŒã€è¿›å‡»ï¼openCVï¼ 2.1 ROIä¸æ³›æ´ªå¡«å…… ç®€å•æ¥è¯´ï¼šè·å–æ„Ÿå…´è¶£åŒºåŸŸROIå¯¹å®ƒè¿›è¡ŒæŒ‡å®šæ–¹å¼å¡«å……ã€‚ ä¾‹å­ï¼šæˆªå–æŒ‡å®šåŒºåŸŸï¼Œè½¬æ¢ä¸ºGRAYå›¾åƒå¹¶è¦†ç›–åŸå›¾ç›¸åŒåŒºåŸŸ 123456789101112131415161718192021222324252627282930# ROIä¸å¡«å……# è¯¥ä¾‹å­åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š# 1.å®ç°æŒ‡å®šå›¾ç‰‡å¯¹å…¶è¿›è¡Œéƒ¨åˆ†æˆªå›¾# 2.å°†æˆªå›¾éƒ¨åˆ†è½¬æ¢ä¸ºç°è‰²ï¼Œå¹¶è¦†ç›–åŸå›¾ç›¸åŒåŒºåŸŸdef crop_trans_Img(event,x,y,flags,param): global x0,y0,x1,y1 # è§¦å‘å·¦é”®æŒ‰ä¸‹äº‹ä»¶ï¼šEVENT_LBUTTONDOWN if event == cv.EVENT_LBUTTONDOWN: x0,y0 = x,y # è·å–å·¦é”®æŒ‰ä¸‹æ—¶åˆå§‹åæ ‡ # è§¦å‘å·¦é”®æŠ¬èµ·äº‹ä»¶ï¼šEVENT_LBUTTONUPï¼Œè£å‰ªæŒ‡å®šåŒºåŸŸå›¾ç‰‡å¹¶è½¬æ¢ä¸ºç°åº¦å›¾ elif event == cv.EVENT_LBUTTONUP: x1,y1 = x, y # æŒ‡å®šè£å‰ªåŒºåŸŸ cv.rectangle(image,(x0,y0),(x1,y1),(0,0,255),1) # è·å–è£å†³åŒºåŸŸå›¾ crop = image[y0:y1,x0:x1] # è£å‰ªåŒºåŸŸè½¬æ¢ä¸ºç°åº¦å›¾Gray gray_crop = cv.cvtColor(crop,cv.COLOR_BGR2GRAY) # å°†[ç°åº¦å›¾--&gt; BGRå›¾] --&gt; è¦†ç›–åŸå›¾æŒ‡å®šåŒºåŸŸ image[y0:y1, x0:x1] = cv.cvtColor(gray_crop,cv.COLOR_GRAY2BGR)image = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\standingCat.jpg&quot;)cv.namedWindow(&#x27;img&#x27;)cv.setMouseCallback(&#x27;img&#x27;,crop_trans_Img) # imgçª—å£ç»‘å®šå›è°ƒå‡½æ•°while(1): cv.imshow(&#x27;img&#x27;, image) k = cv.waitKey(1) if k == ord(&#x27;q&#x27;): break 2.1.1 FloodFillï¼šæ³›æ´ªå¡«å…… å®šä¹‰ï¼ŒfloodFill(image,mask,seePoint,newVal,rect,loDiff,upDiff,scalar,flags) : maskï¼šå¿…é¡»å®½é«˜æ¯”åŸå›¾å¤§2åƒç´ ï¼›å¯¹ä¸æƒ³å¡«å……åŒºåŸŸè®¾ç½®ä¸ºéé›¶å€¼ï¼Œåˆ™ä¸è¢«å¡«å……ï¼ˆä¸ºåŸåƒç´ å€¼ï¼‰ å³mask &gt; 0 åŒºåŸŸä¾æ—§è¡¨ç°ä¸ºåŸå›¾åƒç´ å€¼ï¼›mask = 0 ï¼Œåˆ™ä¼šè¢«æŒ‡å®šå¡«å……ï¼ˆå‰é¢è®²mask=0ï¼Œå€¼=0ï¼Œå³é»‘è‰²ï¼Œå’Œè¿™æœ‰ç‚¹ä¸åŒçš„ï¼‰ loDiffã€upDiffï¼šå®šä¹‰æŒ‡å®šè§†ä¸ºè¿é€šå¯è¢«å¡«å……åƒç´ å€¼èŒƒå›´ï¼ˆå½©è‰²è¿˜è¦è®¾ç½®ä¸‰é€šé“è¿™ç§ä½ã€é«˜Diffï¼‰ flagsï¼šå¡«å……æ–¹æ³•é€‰æ‹©ï¼Œä¸€èˆ¬å½©è‰²å›¾ç‰‡é€‰æ‹©cv.FLOODFILL_FIXED_RANGE ï¼›è¿˜æœ‰å¯ä»¥é€‰æ‹©cv.FLOODFILL_FIXED_MASK_ONLY å¥½åƒæ˜¯åªå¡«å……mask=0åŒºåŸŸï¼Ÿï¼Ÿï¼Ÿï¼Ÿ åˆ©ç”¨maskï¼Œå®ç°å¯¹æŒ‡å®šåŒºåŸŸè¿›è¡Œæ³›æ´ªå¡«å……ã€‚ 1234567891011image = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\standingCat.jpg&quot;)copyImg = image.copy()h,w = copyImg.shape[:2]# è®¾ç½®maskï¼Œå¯¹äºæƒ³æ„Ÿå…´è¶£çš„åŒºåŸŸè®¾ç½®0mask = np.ones([h+2,w+2],np.uint8)mask[100:800,200:700] = 0# è¿›è¡Œæ³›æ´ªå¡«å……cv.floodFill(copyImg,mask,(250,250),(0,255,255),(20,20,20),(100,100,100),cv.FLOODFILL_FIXED_RANGE)cv.imshow(&#x27;flood&#x27;,copyImg)cv.waitKey(0) 2.2 æ¨¡ç³Šæ“ä½œ 2.2.1 å‡å€¼æ¨¡ç³Šã€ä¸­å€¼æ¨¡ç³Š å‡å€¼æ¨¡ç³Š ä½œç”¨ï¼šå¯¹éšæœºå™ªå£°æœ‰å¾ˆå¥½å»å™ªæ•ˆæœ å®ç°ï¼šé€šè¿‡æŒ‡å®šsize=(h,w)size=(h,w)size=(h,w)çš„å…¨1å·ç§¯æ ¸ï¼Œè®¡ç®—æ–°åƒç´ å€¼ = (h,w)èŒƒå›´åƒç´ çº¿æ€§åŠ æƒhâˆ—w\\frac{(h,w)èŒƒå›´åƒç´ çº¿æ€§åŠ æƒ}{h*w}hâˆ—w(h,w)èŒƒå›´åƒç´ çº¿æ€§åŠ æƒâ€‹ APIï¼šblur(src,dst,ksize,anchor=Point(-1,-1), borderType=BORDER_DEFAULT ) ä¸­å€¼æ¨¡ç³Š ä½œç”¨ï¼šå¯¹æ¤’ç›å™ªå£°æœ‰å¾ˆå¥½å»å™ªæ•ˆæœ å®ç°ï¼šæŒ‡å®šé•¿å®½ç›¸åŒsize=(h,h)size=(h,h)size=(h,h)å·ç§¯æ ¸ï¼Œ åœ¨å¯¹å›¾åƒè¿›è¡Œå·ç§¯è¿‡ç¨‹ä¸­ï¼Œå°†å·ç§¯æ ¸åŒºåŸŸå†…åƒç´ å€¼ä»å°â€“&gt;å¤§æ’åºï¼Œå–ä¸­å€¼åƒç´ ä½œä¸ºæ•´ä¸ªåŒºåŸŸåƒç´ å€¼ã€‚ API : medianBlur( src,dst,ksize ) å®ä¾‹1ï¼šè°ƒç”¨openCVçš„APIæ¥å®ç°å‡å€¼æ¨¡ç³Šï¼Œä¸­å€¼æ¨¡ç³Šã€‚ æ³¨ï¼šå®é™…ä¸Šå¥½åƒä¸‹é¢éƒ½æ²¡æœ‰æŒ‡å®šå‚æ•° dst å•Šï¼Ÿ 12345678910image = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\standingCat.jpg&quot;)cv.imshow(&#x27;orign&#x27;,image)# å‡å€¼æ¨¡ç³ŠavgBlurImg = cv.blur(image,(5,5))cv.imshow(&#x27;avgBlur&#x27;,avgBlurImg)# ä¸­å€¼æ¨¡ç³ŠmedianBlurImg = cv.medianBlur(image,5) # å¿…é¡»æ˜¯æ–¹é˜µï¼ŒåªæŒ‡å®šä¸€ä¸ªæ•°å­—å³å¯cv.imshow(&#x27;medianBlur&#x27;,medianBlurImg)cv.waitKey(0) å®ä¾‹2ï¼šè‡ªå®šä¹‰å·ç§¯æ ¸å®ç°å‡å€¼æ»¤æ³¢ã€‚ 12345# è‡ªå®šä¹‰å·ç§¯æ ¸å®ç°å‡å€¼æ»¤æ³¢kernel = np.ones([5,5],np.float32)/25autoAvgImg = cv.filter2D(image,-1,kernel=kernel)cv.imshow(&#x27;aotuAvgImg&#x27;,autoAvgImg)cv.waitKey(0) æ•ˆæœå’Œè°ƒç”¨API ä¸€æ ·ã€‚ 2.2.2 é«˜æ–¯æ¨¡ç³Š å’Œå‰å‡å€¼æ¨¡ç³Šä¸€æ ·ï¼Œä¹Ÿæ˜¯è¿›è¡Œå·ç§¯ã€‚åªä¸è¿‡é«˜æ–¯æ¨¡ç³Šçš„å·ç§¯æ ¸é™„å’Œé«˜æ–¯åˆ†å¸ƒè€Œå·²ã€‚ é«˜æ–¯åˆ†å¸ƒï¼ˆåˆä¸ºæ­£æ€åˆ†å¸ƒï¼‰ï¼š é«˜æ–¯æ¨¡ç³Š ä½œç”¨ï¼šå¯¹é«˜æ–¯å™ªå£°æœ‰è¾ƒå¥½å¤„ç†æ•ˆæœ API : GaussianBlur(src,ksize,sigmaX,dst,sigmaY,borderType: Any = None) å®ä¾‹1ï¼šç®€å•è°ƒç”¨æ¥å£å®ç°å¯¹å›¾ç‰‡çš„é«˜æ–¯æ¨¡ç³Šã€‚ 123456789# 13.é«˜æ–¯æ¨¡ç³Šimage = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\standingCat.jpg&quot;)cv.imshow(&#x27;origin&#x27;,image)# GaussianBlur:è°ƒç”¨é«˜æ–¯æ¨¡ç³Š# xæ ‡å‡†å·®=sigmax=15ï¼Œå·ç§¯æ ¸å¤§å°è®¾ç½®ä¸º0åˆ™ä¼šæ ¹æ®sigmaxè‡ªåŠ¨è®¡ç®—GaussianImg = cv.GaussianBlur(image,(0,0),15)cv.imshow(&#x27;guassian image&#x27;,GaussianImg)cv.waitKey(0) å®ä¾‹2ï¼šåˆ©ç”¨é«˜æ–¯æ¨¡ç³Šå¯¹é«˜æ–¯å™ªå£°è¿›è¡Œå¤„ç†ã€‚ å¯å‘ç°é«˜æ–¯å™ªå£°å¯¹é«˜æ–¯æ¨¡ç³Šäº§ç”Ÿç»“æœæ²¡ä»€ä¹ˆå½±å“ã€‚ 12345678910111213141516171819202122232425262728# 14.é«˜æ–¯æ¨¡ç³Šå¯¹é«˜æ–¯å™ªå£°è¿›è¡Œå¤„ç†image = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\standingCat.jpg&quot;)cv.imshow(&#x27;origin&#x27;,image)# ç»™å›¾ç‰‡åŠ ä¸Šé«˜æ–¯å™ªå£°h,w,c = image.shapefor row in range(h): for col in range(w): # ç”Ÿæˆé«˜æ–¯éšæœºå™ªå£°åƒç´ å€¼ # loc:æ¦‚ç‡åˆ†å¸ƒçš„å‡å€¼ï¼›scaleï¼šæ¦‚ç‡åˆ†å¸ƒæ ‡å‡†å·®ï¼›sizeï¼šè¾“å‡ºçš„shapeï¼Œé»˜è®¤è¾“å‡ºä¸€ä¸ª # ä¾‹å¦‚æ­£æ€åˆ†å¸ƒï¼ˆÎ¼=0,Ïƒ=1 ï¼‰ == random.normal(loc=0, scale=1, size) s = np.random.normal(loc=0,scale=20,size=3) # è·å–BGRä¸‰ä¸ªé€šé“å¯¹åº”åƒç´ å€¼ b = image[row,col,0] g = image[row,col,1] r = image[row,col,2] # ç»™æ¯ä¸ªåƒç´ ç‚¹åŠ ä¸Šé«˜æ–¯å™ªå£°ç”Ÿæˆçš„åƒç´ å€¼ image[row, col, 0] = (b + s[0]) % 255 image[row, col, 1] = (g + s[1]) % 255 image[row, col, 2] = (r + s[2]) % 255cv.imshow(&#x27;Guassian noise&#x27;,image)# é«˜æ–¯æ¨¡ç³Šå¯¹é«˜æ–¯å™ªå£°å›¾ç‰‡è¿›è¡Œå¤„ç†GaussianImg = cv.GaussianBlur(image,(0,0),15)cv.imshow(&#x27;GaussianImg&#x27;,GaussianImg)cv.waitKey(0) 2.2.3 EPFæ¨¡ç³Šï¼šé«˜æ–¯åŒè¾¹ã€å‡å€¼åç§» EPFï¼Œå³è¾¹ç¼˜ä¿ç•™æ»¤æ³¢ã€‚å¸¸ç”¨æœ‰åŸºäºé«˜æ–¯åŒè¾¹å’Œå‡å€¼åç§»ã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨å‰ é«˜æ–¯æ¨¡ç³Š åªè€ƒè™‘äº†ç©ºé—´åˆ†å¸ƒï¼Œè€Œæ²¡æœ‰åƒç´ ä¹‹é—´å·®å¼‚é—®é¢˜ï¼š å¦‚æœåƒç´ å·®å¼‚å¾ˆå¤§ï¼Œè¯´æ˜å®ç°æ˜¾è‘—ç‰¹å¾ï¼Œæˆ‘ä»¬åº”è¯¥å°†å®ƒè¿›è¡Œå¹³æ»‘å—ï¼Ÿ æ˜¾ç„¶æ˜¯ä¸åº”è¯¥çš„ï¼Œè€Œä¸”å¾€å¾€åœ¨ å›¾åƒè¾¹ç¼˜ å‡ºç°åƒç´ å·®å¼‚å˜å¤§ã€‚åœ¨openCVä¸­æä¾›äº†ï¼šé«˜æ–¯åŒè¾¹ã€å‡å€¼æ¼‚ç§» æ¥å®ç°è¾¹ç¼˜ä¿ç•™ã€‚ é«˜æ–¯åŒè¾¹æ¨¡ç³Š é«˜æ–¯åŒè¾¹ç¾é¢œæ•ˆæœæ æ çš„ã€‚ ä¸Šè¿°æ˜¯é«˜æ–¯åŒè¾¹æ¨¡ç³ŠåŸç†å›¾ï¼ˆæ²¡å¤ªæ˜ç™½ï¼‰ API : cv.bilateralFilter(src, d, sigmaColor, sigmaSpace[, dst[, borderType]]) d : æ»¤æ³¢å™¨å¤§å°ï¼Œd&gt;5d&gt;5d&gt;5 æ‰§è¡Œæ•ˆç‡ä½ï¼Œä¸€èˆ¬å–d=5d=5d=5ï¼› dâ‰¤0dâ‰¤0dâ‰¤0 æ—¶ç”± sigmaSpaceç¡®å®šä¸”æˆæ­£æ¯” sigmaColor ï¼šå€¼è¶Šå¤§ï¼Œäº¤ç•Œå¤„å³è¾¹ç¼˜è¶Šæ¨¡ç³Š sigmaSpace ï¼šå€¼è¶Šå¤§ï¼Œå³é¢œè‰²å¹³å‡çš„åœ°æ–¹è¶Šæ¨¡ç³Š ä¸€ä¸ªç®€å•æµ‹è¯•ï¼šåˆ©ç”¨é«˜æ–¯åŒè¾¹æ¨¡ç³ŠæŠŠç…§ç‰‡å˜å¾—æ›´ç¾ç¾çš„ã€‚ 12345678910# 15.é«˜æ–¯åŒè¾¹æ¨¡ç³Šimage = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\testlx.jpg&quot;)cv.imshow(&#x27;origin&#x27;,image)# d=0,ç”±sigamColorç¡®å®šï¼›sigamColor=100 ï¼›sigamSpace=15# å¥½åƒåˆç•¥è¿‡äº†dstå‚æ•°å•Šï¼Ÿï¼Ÿlx_beautiful = cv.bilateralFilter(image,0,100,15)cv.imshow(&quot;lx_beautiful&quot;,lx_beautiful)cv.waitKey(0) å‡å€¼é£˜ç§»æ¨¡ç³Š ä¹Ÿèƒ½ä¿ç•™è¾¹ç¼˜ï¼Œä½†æ˜¯æ›´ç±»ä¼¼äºå¡é€šæ•ˆæœã€‚ å‡å€¼é£˜ç§»æ¨¡ç³Šï¼š åŸç†ï¼šåˆæ˜¯ä»€ä¹ˆè‰²å½©èšç±»å¹³æ»‘æ»¤æ³¢ï¼Œç»“åˆæ³›æ´ªå¡«å……å¯ä»¥è¿›è¡Œå›¾åƒåˆ†å‰²ï¼Ÿ API : pyrMeanShiftFiltering(src, sp, sr[, dst[, maxLevel[, termcrit]]]) spã€sr ï¼š å€¼è¶Šå¤§ï¼Œåˆ™å›¾åƒè‰²å½©å¹³æ»‘æ•ˆæœè¶Šå¥½ï¼Œä½†è€—æ—¶ä¹Ÿè¶Šå¤šã€‚ ç®€å•æµ‹è¯•ï¼šå‡å€¼æ¼‚ç§»æŠŠç…§ç‰‡å˜å¾—â€¦ 12345678# 15.å‡å€¼æ¼‚ç§»æ¨¡ç³Šimage = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\testlx.jpg&quot;)cv.imshow(&#x27;origin&#x27;,image)lx_beautiful = cv.pyrMeanShiftFiltering(image,10,50)cv.imshow(&quot;lx_beautiful&quot;,lx_beautiful)cv.waitKey(0) 2.3 å›¾åƒç›´æ–¹å›¾ å›¾åƒç›´æ–¹å›¾ï¼š æ„ä¹‰ï¼šç›´æ–¹å›¾æ˜¯å›¾åƒ åƒç´ å¼ºåº¦ åˆ†å¸ƒçš„å›¾å½¢è¡¨è¾¾æ–¹å¼ï¼Œç»Ÿè®¡æ¯ä¸€ä¸ªå¼ºåº¦å€¼æ‰€å…·æœ‰çš„åƒç´ ä¸ªæ•°ã€‚ ä¾‹å¦‚ä¸‹åˆ—ç°åº¦ç›´æ–¹å›¾ï¼š xxx è½´ä»£è¡¨ç°åº¦å€¼ï¼ˆ0-255ï¼‰ ï¼› yyy è½´ä»£è¡¨åŒä¸€ä¸ªç°åº¦å€¼ç‚¹çš„æ•°ç›®ã€‚ å½©è‰²å›¾åƒå¦‚ä½•è®¾ç½®ç›´æ–¹å›¾ï¼Ÿ ä¸‰ä¸ªé€šé“å€¼è¿˜æ˜¯âˆˆ[0,255]âˆˆ[0,255]âˆˆ[0,255] ,é‚£ä¹ˆåˆ†åˆ«ç»Ÿè®¡å„ä¸ªä¸åŒé€šé“ç›¸åŒåƒç´ å€¼å°±å¥½äº†ã€‚ å¸¸ç”¨ä¸€äº›æœ¯è¯­ï¼š rangeï¼šæ¯ä¸ªç‰¹å¾ç©ºé—´çš„å–å€¼èŒƒå›´ï¼Œä¾‹å¦‚ range=[0,255] binï¼šç›´æ¡æˆ–ç»„è·ï¼Œè¡¨ç¤ºæ¯ä¸ªç‰¹å¾å­ç©ºé—´çš„æ®µçš„æ•°ç›® ä¸‹é¢å›¾åƒ14ä½æ˜¯ä»€ä¹ˆæ„æ€ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰ 2142^{14}214 ä¸åŒåƒç´ å€¼ï¼Œä¸æ˜¯åªä¼š âˆˆ[0,255]âˆˆ[0,255]âˆˆ[0,255] ? è¿™é‡ŒæŒ‡å¾—åº”è¯¥æ˜¯å›¾åƒå¤§å°=14ï¼Œç„¶åç°åº¦å›¾ä¼šæœ‰ 14âˆ—1414*1414âˆ—14 ä¸ªåƒç´ ç‚¹ã€‚ 2.3.1 å®ä¾‹ï¼šç›´æ–¹å›¾åˆåº”ç”¨ ä¸‹é¢æˆ‘ä»¬åˆ†åˆ«ä»‹ç»ä¸¤ä¸ªAPI æ¥è®¡ç®—å›¾åƒ ç›´æ–¹å›¾ å’Œ ç›´æ–¹æŠ˜çº¿å›¾ ï¼š matplotlib::plt.hist() è®¡ç®—ç›´æ–¹å›¾ x ï¼šæ•°ç»„ï¼Œå¿…é¡»æ˜¯(n,)æ•°ç»„ï¼Œæ‰€ä»¥å›¾åƒè¦ç”¨ image.ravel() å‡½æ•°è¿›è¡Œé™ç»´ bins ï¼šæŒ‡å®šbinä¸ªæ•° range ï¼š æ˜¾ç¤ºçš„åŒºé—´ cv.calcHist(images, channels, mask, histSize, ranges[, hist[, accumulate]]) è¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„(histSize,1)ï¼Œç»Ÿè®¡äº†æŒ‡å®š histSize çš„åƒç´ å¼ºåº¦ç»Ÿè®¡ä¸ªæ•°ã€‚ å®ä¾‹1ï¼šåˆ©ç”¨matplotlib::plt.hist()ç»˜åˆ¶å‡ºå›¾åƒä¸åŒåƒç´ å¼ºåº¦ç»Ÿè®¡æ•°ç›´æ–¹å›¾ 123456789# 16.ç›´æ–¹å›¾image = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\standingCat.jpg&quot;)cv.imshow(&#x27;origin&#x27;,image)# ç»˜åˆ¶ç›´æ–¹å›¾# image.ravel()å°†åŸå›¾640*640*3ç»´åº¦é™ä¸ºä¸€ç»´ 2288000=640*640*3# æ³¨æ„è¿™é‡Œæ˜¯256ä¸æ˜¯255plt.hist(image.ravel(),256,[0,256])plt.show()cv.waitKey(0) å®ä¾‹2ï¼šåˆ©ç”¨ cv.calcHist() ç»Ÿè®¡æŒ‡å®šå›¾åƒå’Œé€šé“çš„å„ä¸ªåƒç´ å¼ºåº¦ä¸ªæ•°ã€‚ 1234567891011# 17.ç»˜åˆ¶ç›´æ–¹æŠ˜çº¿å›¾ï¼Ÿimage = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\standingCat.jpg&quot;)cv.imshow(&#x27;origin&#x27;,image)color = (&#x27;blue&#x27;,&#x27;green&#x27;,&#x27;red&#x27;) # ä¸‰ä¸ªé€šé“å„ä¸ªåƒç´ ç»Ÿè®¡æŠ˜çº¿ä¸åŒé¢œè‰²for i,color in enumerate(color): hist =cv.calcHist([image],[i],None,[256],[0,256]) plt.plot(hist,color=color) plt.xlim([0,256])plt.show() 2.3.3 ç›´æ–¹å›¾åº”ç”¨ ç›´æ–¹å›¾å‡è¡¡åŒ– ç›´æ–¹å›¾å‡è¡¡åŒ–ï¼šåˆ©ç”¨å›¾åƒç›´æ–¹å›¾ å¯¹æ¯”åº¦è¿›è¡Œè°ƒæ•´ çš„æ–¹æ³•ã€‚å¯å‚è€ƒè¿™ç¯‡æ–‡ç«  åŸç†ï¼šå¾…è¡¥å…… API ï¼š ç›´æ–¹å›¾å‡è¡¡åŒ– ï¼š cv.equalizeHist(src[, dst]) å±€éƒ¨ç›´æ–¹å›¾å‡è¡¡åŒ–ï¼š cv2.createCLAHA(clipLimit=8.0, titleGridSize=(8, 8)) clipLimit ï¼šé¢œè‰²å¯¹æ¯”åº¦çš„é˜ˆå€¼ titleGridSize ï¼šè¿›è¡Œåƒç´ å‡è¡¡åŒ–çš„ç½‘æ ¼å¤§å°ï¼Œå³åœ¨å¤šå°‘ç½‘æ ¼ä¸‹è¿›è¡Œç›´æ–¹å›¾çš„å‡è¡¡åŒ–æ“ä½œ å®ä¾‹1ï¼šé€šè¿‡ç›´æ–¹å›¾å‡è¡¡åŒ–æå‡å›¾åƒè´¨é‡ã€‚ 123456789101112# 18.ç›´æ–¹å›¾å‡è¡¡åŒ–image = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\standingCat.jpg&quot;)# å°†åŸå›¾è½¬æ¢ä¸ºç°åº¦å›¾gray = cv.cvtColor(image,cv.COLOR_BGR2GRAY)cv.imshow(&#x27;origin_gay&#x27;,gray)# ç›´æ–¹å›¾å‡è¡¡åŒ–åªèƒ½æ˜¯ç°åº¦å›¾ï¼Œå¦‚æœæ˜¯å½©è‰²å›¾ï¼Ÿä¸èƒ½ï¼Ÿdst = cv.equalizeHist(gray)cv.imshow(&#x27;equalHistImg&#x27;,dst)cv.waitKey(0) å®ä¾‹2ï¼šå±€éƒ¨å›¾ç›´æ–¹å›¾å‡è¡¡åŒ–ï¼Œè§£å†³å…¨å±€çš„å‡è¡¡åŒ–æ•´ä½“äº®åº¦æå‡ä½¿å¾—å±€éƒ¨å›¾åƒçš„ç»†èŠ‚å˜å¾—æ¨¡ç³Šã€‚ å¥½åƒè¿™å¼ å›¾ä¸èƒ½ä½“ç°å±€éƒ¨ç›´æ–¹å›¾å‡è¡¡åŒ–å¯ä»¥ä¿ç•™æ›´å¤šç»†èŠ‚ï¼Ÿä¸‹é¢è¿™å¼ å›¾æœ€å³ä¾§å±€éƒ¨å‡è¡¡åŒ–æ˜¾ç„¶ä¿å­˜çš„äººè„¸æ›´å¤šç»†èŠ‚ï¼š 1234567891011121314# 19.å±€éƒ¨ç›´æ–¹å›¾å‡è¡¡åŒ–image = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\standingCat.jpg&quot;)# å°†åŸå›¾è½¬æ¢ä¸ºç°åº¦å›¾gray = cv.cvtColor(image,cv.COLOR_BGR2GRAY)# æ˜¾ç¤ºå…¨å±€å‡è¡¡åŒ–å›¾åƒcv.imshow(&#x27;hist&#x27;,cv.equalizeHist(gray))# å®ä¾‹åŒ–è‡ªé€‚åº”ç›´æ–¹å›¾å‡è¡¡åŒ–ç³»æ•°clahe = cv.createCLAHE(5.0,(8,8))dst = clahe.apply(gray)cv.imshow(&#x27;clahe&#x27;,dst)cv.waitKey(0) ç›´æ–¹å›¾æ¯”è¾ƒ æ‰‹åŠ¨åˆ›å»ºå›¾åƒç›´æ–¹å›¾æ–¹æ³• create_rgb_hist æ²¡æœ‰å¤ªæ˜ç™½ï¼Ÿ ç›´æ–¹å›¾åå‘æŠ•å½± è¯¥å°èŠ‚ä¾‹å­ä½¿ç”¨çš„èŒƒå›´å½’ä¸€åŒ–åˆ°[0,255]ï¼Œè€Œä¸æ˜¯ä¸€å€¼å½’ä¸€åŒ–ã€‚å¯æŸ¥çœ‹ OpenCVä¸­çŸ©é˜µçš„å½’ä¸€åŒ– ä½œç”¨ï¼šç”¨äºå›¾åƒåˆ†å‰²æˆ–æŸ¥æ‰¾å›¾åƒä¸­æ„Ÿå…´è¶£çš„å¯¹è±¡ å½’ä¸€åŒ–: è®¡ç®—åå‘ç›´æ–¹å›¾ï¼š å®ä¾‹1ï¼šè®¡ç®—äºŒç»´ç›´æ–¹å›¾å¹¶æ˜¾ç¤ºã€‚ 1234567891011# 20.æ˜¾ç¤ºhsväºŒç»´ç›´æ–¹å›¾image = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\standingCat.jpg&quot;)cv.imshow(&#x27;origin&#x27;,image)# è®¡ç®—ç›´æ–¹å›¾åå‘æŠ•å½±å…ˆè½¬æ¢åˆ°hsvè‰²å½©ç©ºé—´(?)hsv = cv.cvtColor(image,cv.COLOR_BGR2HSV)# hsvï¼Œå› ä¸ºäº®åº¦(v)å¾ˆå®¹æ˜“å—åˆ°å¤–ç•Œå½±å“ï¼Œæ‰€ä»¥æˆ‘ä»¬è®¤ä¸ºé¢œè‰²æœ¬è´¨æ˜¯hsvï¼Œhâˆˆ[0,180],vâˆˆ[0,256]hist = cv.calcHist([hsv],[0,1],None,[180,256],[0,180,0,256])cv.imshow(&#x27;hist2D&#x27;,hist)cv.waitKey(0) å®ä¾‹2ï¼šæå–ç…§ç‰‡å¤´å‘ä¸ºæ„Ÿå…´è¶£åŒºåŸŸï¼Œè¿›è¡Œåå‘ç›´æ–¹å›¾æŠ•å½±ã€‚ âš ï¸ ç»è¿‡æµ‹è¯•æ„Ÿå…´è¶£åŒºåŸŸåº”è¯¥æ˜¯ä¸€ç±»é¢œè‰²ï¼Œè€Œä¸åº”è¯¥æ˜¯æ•´ä¸ªè„¸ä»€ä¹ˆçš„ï¼Ÿ 123456789101112131415161718192021222324# 21.ç›´æ–¹å›¾åå‘æŠ•å½±# è¯»å–roiå›¾åƒå¹¶è½¬æ¢åˆ°hsvè‰²å½©ç©ºé—´roi = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\testlx_roi2.jpg&quot;)roi_hsv = cv.cvtColor(roi,cv.COLOR_BGR2HSV)cv.imshow(&#x27;roi&#x27;,roi)# è¯»å–ç›®æ ‡å›¾åƒå¹¶è½¬æ¢åˆ°hsvè‰²å½©ç©ºé—´target = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\testlx.jpg&quot;)target_hsv = cv.cvtColor(target,cv.COLOR_BGR2HSV)cv.imshow(&#x27;target&#x27;,target)# è®¡ç®—roiå›¾åƒç›´æ–¹å›¾å¹¶[èŒƒå›´]å½’ä¸€åŒ–åˆ°[0,255]# roi_hist.shape=(180,256)# å¦‚æœæƒ³æ•ˆæœæ›´å¥½ï¼Œå¯ä»¥æŠŠbinä¸é‚£ä¹ˆç»†åŒ–ï¼Œå³binæ•°ç›®è°ƒæ•´å°‘ç‚¹ï¼š[180,256] --&gt; [32,64]roi_hist = cv.calcHist([roi_hsv],[0,1],None,[180,256],[0,180,0,256]) # å½’ä¸€åŒ–èŒƒå›´è‡³0-256ï¼Œcv.NORM_MINMAXå¸¸ç”¨çš„çº¿æ€§å¹³ç§»ç¼©æ”¾å½’ä¸€åŒ–cv.normalize(roi_hist,roi_hist,0,256,cv.NORM_MINMAX)# è®¡ç®—åå‘ç›´æ–¹å›¾æŠ•å½±dst = cv.calcBackProject([target_hsv],[0,1],roi_hist,[0,180,0,256],1)cv.imshow(&#x27;dst&#x27;,dst)cv.waitKey(0) 2.4 æ¨¡æ¿åŒ¹é… æ¨¡æ¿åŒ¹é…å³ç»™å®šæ¨¡æ¿ï¼ˆtemplateï¼‰åœ¨ç›®æ ‡ï¼ˆtargetï¼‰ä¸­è¿›è¡Œæœç´¢åŒ¹é…ï¼Œç”»å‡ºé”šæ¡†ã€‚ åŒ¹é…ï¼šmatchTemplate åŸç†ï¼šåˆ©ç”¨æ¨¡æ¿åœ¨ç›®æ ‡å›¾åƒåŒ¹é…ï¼ˆå·ç§¯ï¼‰ï¼Œè¿”å›æ‰€æœ‰åŒ¹é…ç»“æœçŸ©é˜µA å¯¹äºTM_SQDIFF æ–¹æ³•ï¼Œç»“æœçŸ©é˜µA ä¸­*æœ€å°å€¼ä½ç½®* å¯¹åº”æœ€ä½³åŒ¹é…æ—¶æ¨¡æ¿å›¾åƒ*å·¦ä¸Šè§’* ä½ç½® å¯¹äºTM_CCORR or TM_CCOEFF æ–¹æ³•ï¼ŒA ä¸­*æœ€å¤§å€¼ä½ç½®* å¯¹åº”æœ€ä½³åŒ¹é…æ¨¡æ¿å›¾åƒ*å·¦ä¸Šè§’* ä½ç½® åŸå‹ï¼šcv.matchTemplate(image, templ, method[, result[, mask]]) ä¾‹1ï¼šç»™å®šæ¨¡æ¿å›¾åƒçŒ«è„¸ï¼Œåœ¨ç›®æ ‡å›¾åƒçŒ«ä¸­ç”»å‡ºå¯¹åº”æ¨¡æ¿å›¾åƒä½ç½®çº¢æ¡†ã€‚ 12345678910111213141516171819202122232425262728# 22.æ¨¡æ¿åŒ¹é…# è¯»å–æ¨¡æ¿å›¾åƒï¼ˆçŒ«è„¸ï¼‰template = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\standingCat_roi.jpg&quot;)cv.imshow(&#x27;template&#x27;,template)th,tw = template.shape[:2] # shape=(h,w,c)# è¯»å–ç›®æ ‡å›¾åƒï¼ˆçŒ«ï¼‰target = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\standingCat.jpg&quot;)# æ¨¡æ¿åŒ¹é…çš„ä¸‰ç§æ–¹æ³•methods = [cv.TM_SQDIFF_NORMED,cv.TM_CCOEFF_NORMED,cv.TM_CCORR_NORMED]tl = [0,0]for md in methods: # é‡‡ç”¨æŒ‡å®šæ–¹æ³•md,è¿›è¡Œæ¨¡æ¿åŒ¹é… result = cv.matchTemplate(target,template,md) # minMaxLocï¼šè¿”å›çŸ©é˜µä¸­æœ€å°å€¼ã€æœ€å¤§å€¼ã€æœ€å°å€¼ä½ç½®ï¼Œæœ€å¤§å€¼ä½ç½® minVal,maxVal,minLoc,maxLoc = cv.minMaxLoc(result) if md == cv.TM_SQDIFF_NORMED: tl = minLoc else: tl = maxLoc # æ³¨æ„å³ä¸‹è§’ = ï¼ˆå·¦ä¸Šè§’x+å®½ï¼Œå·¦ä¸Šè§’y+é«˜ï¼‰ cv.rectangle(target,tl,(tl[0]+tw,tl[1]+th),(0,0,255),2) cv.imshow(str(md),target)cv.waitKey(0) 2.5 å›¾åƒäºŒå€¼åŒ– ä»€ä¹ˆæ˜¯å›¾åƒçš„äºŒå€¼åŒ–ï¼Ÿè¯¥éƒ¨åˆ†ä¸»è¦å‚è€ƒ : å›¾åƒäºŒå€¼åŒ– ä¸€å¹…å›¾åƒåŒ…æ‹¬ç›®æ ‡ç‰©ä½“ã€èƒŒæ™¯è¿˜æœ‰å™ªå£°ï¼Œè¦æƒ³*ä»å¤šå€¼çš„æ•°å­—å›¾åƒä¸­ç›´æ¥æå–å‡ºç›®æ ‡ç‰©ä½“*ï¼Œé€šè¿‡è®¾å®šä¸€ä¸ªé˜ˆå€¼Tï¼Œç”¨Tå°†å›¾åƒçš„æ•°æ®åˆ†æˆä¸¤éƒ¨åˆ†ï¼šå¤§äºTçš„åƒç´ ç¾¤å’Œå°äºTçš„åƒç´ ç¾¤ã€‚è¿™æ˜¯ç ”ç©¶ç°åº¦å˜æ¢çš„æœ€ç‰¹æ®Šçš„æ–¹æ³•ï¼Œç§°ä¸ºå›¾åƒçš„äºŒå€¼åŒ–ï¼ˆBinarizationï¼‰ã€‚ ä¾‹å¦‚ï¼šå°†å›¾åƒä¸Šçš„åƒç´ ç‚¹çš„ç°åº¦å€¼è®¾ç½®ä¸º0æˆ–255ï¼Œæ•´ä¸ªå›¾åƒå‘ˆç°å‡ºæ˜æ˜¾çš„åªæœ‰é»‘å’Œç™½çš„è§†è§‰æ•ˆæœã€‚ 1 hsväºŒå€¼åŒ–ï¼š inRange åœ¨ä¹‹å‰æˆ‘ä»¬è¿˜æ¥è§¦è¿‡ inRange å°†å›¾åƒè¿›è¡ŒäºŒå€¼åŒ– ï¼š åœ¨ hsv è‰²å½©ç©ºé—´ä¸­ï¼Œå¯¹äºæŒ‡å®š hminâˆ’hmaxã€sminâˆ’smaxã€vminâˆ’vmaxh_{min}-h_{max} ã€s_{min}-s_{max} ã€v_{min}-v_{max}hminâ€‹âˆ’hmaxâ€‹ã€sminâ€‹âˆ’smaxâ€‹ã€vminâ€‹âˆ’vmaxâ€‹ èŒƒå›´å†…åƒç´ å€¼è®¾ç½®ä¸ºç™½è‰²å…¶ä½™ä¸ºé»‘è‰²ã€‚ è¿™æ˜¯é’ˆå¯¹åœ¨ hsv è‰²å½©ç©ºé—´ï¼Œè€Œä¸‹é¢ threshold æ˜¯æŒ‡å¯¹ å•é€šé“ç°åº¦å›¾ è¿›è¡ŒäºŒå€¼åŒ–ã€‚ 2 grayäºŒå€¼åŒ–ï¼šthreshold ç›¸å…³API : cv2.threshold(img, threshold, maxval,type) threshold : æ˜¯è®¾å®šçš„é˜ˆå€¼ maxval: å½“ç°åº¦å€¼å¤§äºï¼ˆæˆ–å°äºï¼‰é˜ˆå€¼æ—¶å°†è¯¥ç°åº¦å€¼èµ‹æˆçš„å€¼ type : å½“å‰äºŒå€¼åŒ–çš„æ–¹å¼ï¼ˆä¿æŒåŸæ ·æŒ‡çš„æ˜¯ä¿æŒåŸå›¾åƒåƒç´ å€¼ï¼‰ threshold æ–¹æ³•é’ˆå¯¹ å•é€šé“ç°åº¦å›¾ ï¼Œå½©è‰²å›¾è¦å…ˆè½¬æ¢ä¸ºç°åº¦å›¾ã€‚ 1234567891011121314151617181920212223242526272829303132# 23.å›¾åƒäºŒå€¼åŒ–ï¼šthresholdimage = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\standingCat.jpg&quot;)image_gray = cv.cvtColor(image,cv.COLOR_BGR2GRAY)cv.imshow(&#x27;origin_gray&#x27;,image_gray)# è¿›è¡ŒäºŒå€¼åŒ–# THRESH_BINARY: å¤§äºé˜ˆå€¼=127ï¼Œè¢«ç½®ä¸º255ï¼Œå°äºé˜ˆå€¼=127ï¼Œè¢«ç½®ä¸º0# è¿™é‡ŒmaxVal=255ï¼Œæ˜¯å¤§äºé˜ˆå€¼è¢«è®¾ç½®çš„å€¼ï¼Œè€Œä¸æ˜¯é»˜è®¤å°±è®¾ç½®ä¸º255ï¼ret1,binary1 = cv.threshold(image_gray,127,255,type=cv.THRESH_BINARY)cv.imshow(&#x27;THRESH_BINARY&#x27;,binary1)# THRESH_BINARY_INV: å’ŒTHRESH_BINARYè®¾ç½®ç›¸året2,binary2 = cv.threshold(image_gray,127,255,type=cv.THRESH_BINARY_INV)cv.imshow(&#x27;THRESH_BINARY_INV&#x27;,binary2)# THRESH_TRUNCï¼šå¤§äºé˜ˆå€¼éƒ¨åˆ†è¢«ç½®ä¸ºthresholdï¼Œå°äºéƒ¨åˆ†ä¿æŒåŸæ ·ï¼ˆåŸå›¾åƒç´ å€¼ï¼‰# è¿™é‡ŒåŠä¸‹é¢maxValï¼ˆ0ï¼‰è®¾ç½®ä¸èµ·ä½œç”¨ï¼Œå¤§äºé˜ˆå€¼ä¸ºåŸå›¾åƒå€¼ret3,binary3 = cv.threshold(image_gray,127,0,type=cv.THRESH_TRUNC )cv.imshow(&#x27;THRESH_TRUNC&#x27;,binary3)# THRESH_TOZEROï¼šå°äºé˜ˆå€¼éƒ¨åˆ†è¢«ç½®ä¸º0ï¼Œå¤§äºéƒ¨åˆ†ä¿æŒä¸å˜ï¼ˆåŸå›¾åƒç´ å€¼ï¼‰ret4,binary4 = cv.threshold(image_gray,127,0,type=cv.THRESH_TOZERO )cv.imshow(&#x27;THRESH_TOZERO&#x27;,binary4)# THRESH_TOZERO_INV ï¼šå¤§äºé˜ˆå€¼éƒ¨åˆ†è¢«ç½®ä¸º0ï¼Œå°äºéƒ¨åˆ†ä¿æŒä¸å˜ ï¼ˆåŸå›¾åƒç´ å€¼ï¼‰ret5,binary5 = cv.threshold(image_gray,127,0,type=cv.THRESH_TOZERO_INV )cv.imshow(&#x27;THRESH_TOZERO_INV&#x27;,binary5)# [é‡è¦] cv.THRESH_OTSUï¼šæ˜¯æœ€å¤§é—´å·®æ³•ï¼ŒæŒ‰å›¾åƒç°åº¦ç‰¹æ€§å°†å›¾åƒåˆ†ä¸ºå‰æ™¯å’ŒèƒŒæ™¯ä¸¤éƒ¨åˆ†cv.waitKey(0) 3 grayäºŒå€¼åŒ–ï¼šadaptiveThreshold è¯¥éƒ¨åˆ†ä¸»è¦å‚è€ƒï¼šè‡ªé€‚åº”åŒ–é˜ˆå€¼æ“ä½œ è‡ªé€‚åº”é˜ˆå€¼ï¼Œåˆ™æ˜¯æ ¹æ®åƒç´ çš„ é‚»åŸŸå—çš„åƒç´ å€¼åˆ†å¸ƒæ¥ç¡®å®šè¯¥åƒç´ ä½ç½®ä¸Šçš„äºŒå€¼åŒ–é˜ˆå€¼ ï¼š æ¯ä¸ªåƒç´ ä½ç½®å¤„çš„äºŒå€¼åŒ–é˜ˆå€¼ä¸æ˜¯å›ºå®šä¸å˜çš„ï¼Œè€Œæ˜¯ç”±å…¶å‘¨å›´é‚»åŸŸåƒç´ çš„åˆ†å¸ƒæ¥å†³å®šçš„ äº®åº¦è¾ƒé«˜å›¾åƒåŒºåŸŸäºŒå€¼åŒ–é˜ˆå€¼é€šå¸¸è¾ƒé«˜ï¼Œè€Œäº®åº¦ä½çš„å›¾åƒåŒºåŸŸçš„äºŒå€¼åŒ–é˜ˆå€¼åˆ™ä¼šç›¸é€‚åº”å˜å° ä¸åŒäº®åº¦ã€å¯¹æ¯”åº¦ã€çº¹ç†çš„å±€éƒ¨å›¾åƒåŒºåŸŸå°†ä¼šæ‹¥æœ‰ç›¸å¯¹åº”çš„å±€éƒ¨äºŒå€¼åŒ–é˜ˆå€¼ æ¯ä¸€ä¸ªåƒç´ è®¡ç®—é˜ˆå€¼è¿‡ç¨‹ï¼š é¦–å…ˆè¯¥åƒç´ ç‚¹å‘¨å›´ B*B åŒºåŸŸå†…åƒç´ åŠ æƒå¹³å‡ï¼ˆå¯¹åº”æ–¹æ³•æœ‰å¹³å‡å€¼æ³•ã€é«˜æ–¯å¹³å‡ä¸¤ç§æ–¹æ³•ï¼‰ æœ€åå‡å»ä¸€ä¸ªå¸¸æ•°Cï¼Œå¾—åˆ°è¯¥åƒç´ ç‚¹çš„é˜ˆå€¼ ç›¸å…³API : cv.adaptiveThreshold(src, maxValue, adaptiveMethod, thresholdType, blockSize, C[, dst]) maxValue ï¼šé˜ˆå€¼ï¼Ÿ adaptiveType : æŒ‡è‡ªé€‚åº”çš„é˜ˆå€¼ æ±‚å¹³å‡å€¼æ–¹æ³•ï¼ŒåŒä¸Šæœ‰ä¸¤ç§å¯é€‰ ADAPTIVE_THRESH_MEAN_C ï¼šå…ˆæ±‚å‡ºé¢†åŸŸå—ä¸­çš„å‡å€¼ï¼Œå†å‡å»å¸¸æ•°C ADAPTIVE_THRESH_GAUSSIAN_Cï¼šå±€éƒ¨é‚»åŸŸå—çš„é«˜æ–¯åŠ æƒå’Œï¼Œæœ€åå‡å»å¸¸æ•°C thresholdType ï¼šé˜ˆå€¼ç±»å‹ï¼Œæœ‰ä¸¤ç§å¯é€‰ï¼šTHRESH_BINARY æˆ–THRESH_BINARY_INV ï¼Ÿ åŒå‰ï¼ŒTHRESH_BINARY å¤§äºé˜ˆå€¼ç½®ä¸ºé˜ˆå€¼ï¼Œå°äºé˜ˆå€¼ç½®ä¸º0ï¼›THRESH_BINARY_INV ç›¸åã€‚ blockSizeï¼š æŒ‡å®šçš„é¢†åŸŸå—åŒºåŸŸå¤§å°ï¼Œé€šå¸¸ä¸º3ã€5ã€7 C : ä¸Šé¢è¯´çš„å¸¸æ•°C å®ä¾‹ï¼šå¯ä»¥çœ‹åˆ°è‡ªé€‚åº”é˜ˆå€¼åŒ–å¾ˆå¥½çš„ä¿ç•™äº† è¾¹ç¼˜ä¿¡æ¯ ã€‚ 123456789101112# 24.è‡ªé€‚åº”é˜ˆå€¼ï¼šadaptiveThresholdimage = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\standingCat.jpg&quot;)image_gray = cv.cvtColor(image,cv.COLOR_BGR2GRAY)cv.imshow(&#x27;origin_gray&#x27;,image_gray)# è‡ªé€‚åº”é˜ˆå€¼# ä¸çŸ¥é“ä¸ºä»€ä¹ˆè®¾ç½®C=10,blockSize=5(åŒºåŸŸå¤§å°ä¸º5*5=25)adaptive_binary = cv.adaptiveThreshold(image_gray,255,cv.ADAPTIVE_THRESH_GAUSSIAN_C,cv.THRESH_BINARY,25,10)cv.imshow(&#x27;adaptive_binary&#x27;,adaptive_binary)cv.waitKey(0) 4 è¶…å¤§å›¾åƒäºŒå€¼åŒ– è¯¥éƒ¨åˆ†ä¸»è¦å‚è€ƒï¼šè¶…å¤§å›¾åƒäºŒå€¼åŒ–å’Œç©ºç™½è¿‡æ»¤ å¤„ç†è¶…å¤§å›¾åƒçš„æ€è·¯å…¶å®å°±æ˜¯åˆ†å—æ€æƒ³ï¼š å°†å›¾åƒåˆ†æˆä¸€ä¸ªä¸ªå°å— å¯¹æ¯ä¸ªå°å—è¿›è¡Œ threshold ã€adaptiveThreshold äºŒå€¼åŒ–æ“ä½œï¼Œè·å–äºŒå€¼åŒ–å›¾åƒ å°†åŸå›¾ï¼ˆç°åº¦å›¾åƒï¼‰å¯¹åº”åŒºåŸŸè¦†ç›–ä¸ºä¸Šè¿°çš„äºŒå€¼åŒ–å›¾åƒ åˆ†åˆ«ä½¿ç”¨å…¨å±€é˜ˆå€¼/å±€éƒ¨é˜ˆå€¼å¯¹åˆ†å—å›¾åƒè¿›è¡Œå¤„ç†æ¯”è¾ƒã€‚ å·¦ä¾§å…¨å±€é˜ˆå€¼å¤„ç†ï¼Œå¯¼è‡´æ¯ä¸ªåˆ†å—ä¹‹é—´çš„å›¾åƒå·®è·è¾ƒå¤§ï¼Œå‡ºç°åˆ†å—è¾¹ç•Œ ç°è±¡ã€‚ å³ä¾§å±€éƒ¨é˜ˆå€¼å¤„ç†ï¼Œå°±æ²¡æœ‰æ˜æ˜¾çš„åˆ†å—ç°è±¡ 12345678910111213141516171819# 25.è¶…å¤§å›¾åƒäºŒå€¼åŒ–def big_image_binary(image): print(image.shape) #(4208, 2368, 3) cw,ch = 256,256 h,w = image.shape[:2] #è¦äºŒå€¼åŒ–å›¾åƒï¼Œè¦å…ˆè¿›è¡Œç°åº¦åŒ–å¤„ç† gray = cv.cvtColor(image,cv.COLOR_RGB2GRAY) for row in range(0,h,ch): for col in range(0,w,cw): roi = gray[row:row+ch,col:col+cw] #è·å–åˆ†å— # å…¨å±€é˜ˆå€¼ # ret,binary = cv.threshold(roi,0,255,cv.THRESH_BINARY|cv.THRESH_OTSU) # å±€éƒ¨é˜ˆå€¼ binary = cv.adaptiveThreshold(roi,255,cv.ADAPTIVE_THRESH_GAUSSIAN_C,cv.THRESH_BINARY,127,20) gray[row:row + ch, col:col + cw] = binary #åˆ†å—è¦†ç›– print(np.std(binary),np.mean(binary)) cv.imwrite(&quot;binary2.jpg&quot;,gray) ç©ºç™½åŒºåŸŸè¿‡æ»¤ ç®€å•æ¥è¯´å°±æ˜¯æˆ‘ä»¬è®¤ä¸ºè¯¥åŒºåŸŸæ˜¯ç©ºç™½å›¾åƒï¼Œä¸è¿›è¡ŒäºŒå€¼åŒ–ï¼ˆä½†å¯å…¨å˜ä¸ºé»‘æˆ–è€…ç™½ï¼‰ã€‚ 123456789101112131415161718192021# ç©ºç™½åŒºåŸŸè¿‡æ»¤def big_image_binary(image): print(image.shape) #(4208, 2368, 3) cw,ch = 128,128 h,w = image.shape[:2] gray = cv.cvtColor(image,cv.COLOR_RGB2GRAY) # è¦äºŒå€¼åŒ–å›¾åƒï¼Œè¦å…ˆè¿›è¡Œç°åº¦åŒ–å¤„ç† for row in range(0,h,ch): for col in range(0,w,cw): roi = gray[row:row+ch,col:col+cw] # è·å–åˆ†å— # é€šè¿‡è·å–åˆ†å—åŒºåŸŸçš„æ–¹å·®å’Œå¹³å‡å€¼æ¥åˆ¤æ–­æ˜¯å¦æ˜¯ç©ºç™½åŒºåŸŸ dev = np.std(roi) avg = np.mean(roi) if dev &lt; 15 and avg &gt; 200: # æ»¡è¶³æ¡ä»¶ï¼Œæ¥è¿‘ç©ºç™½åŒºåŸŸï¼Œè®©ä»–å˜é»‘ gray[row:row + ch, col:col + cw] = 0 #å…¨éƒ¨éƒ½èµ‹å€¼ä¸º0 else: ret,binary = cv.threshold(roi,0,255,cv.THRESH_BINARY|cv.THRESH_OTSU) gray[row:row + ch, col:col + cw] = binary print(np.std(binary), np.mean(binary)) cv.imwrite(&quot;binary.jpg&quot;,gray 2.6 å›¾åƒç¼©æ”¾ å¦‚æœè¦è¿›è¡Œå¯¹å›¾åƒè¿›è¡Œ æ”¾å¤§æˆ–ç¼©å° é€šå¸¸æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼ˆåœ¨openCVä¸­æä¾›ï¼‰ï¼š âš ï¸ ä»¥ä¸‹æ–¹æ³•éƒ½å¯ä»¥è¿›è¡Œ æ”¾å¤§æˆ–ç¼©å° ï¼ˆå…·ä½“æ€ä¹ˆå®ç°ç¼©å°å›¾åƒï¼Œè¿˜å¾…ç†è§£ï¼‰ INTER_NEAREST ï¼šæœ€è¿‘é‚»æ’å€¼æ³• INTER_LINEAR ï¼š åŒçº¿æ€§æ’å€¼æ³•ï¼ˆé»˜è®¤ï¼‰ INTER_AREA ï¼š åŸºäºå±€éƒ¨åƒç´ çš„é‡é‡‡æ ·ï¼Œç¼©å°å›¾åƒé€šå¸¸é€‰æ‹© INTER_CUBIC ï¼š åŸºäº4x4åƒç´ é‚»åŸŸçš„3æ¬¡æ’å€¼æ³• INTER_LANCZOS4 ï¼š åŸºäº8x8åƒç´ é‚»åŸŸçš„Lanczosæ’å€¼ åœ¨ openCV ä¸­å¯ä½¿ç”¨ä»¥ä¸‹APIå®ç°å¯¹å›¾åƒç¼©æ”¾ï¼š ç®€å•ç²—æš´çš„ resize å‡½æ•° ï¼šå®ç°æ•ˆç‡æœ€é«˜ cv::pyrUP ã€cv::pyrDown ï¼šå¯¹å›¾åƒè¿›è¡Œä¸Šé‡‡æ ·ã€ä¸‹é‡‡æ ·ï¼Œå¸¸ç”¨äºå›¾åƒé‡‘å­—å¡”ä¸­ï¼Œä¸‹è¯¦ 2.6.1 ç¼©æ”¾ï¼šresize å‡½æ•°åŸå‹ï¼š å®ä¾‹ï¼šæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ resize å‡½æ•°å¯¹å›¾åƒè¿›è¡Œç¼©æ”¾ã€‚ 123456789101112# 26.resize# image.shape = (640, 640, 3)image = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\standingCat.jpg&quot;)print(image.shape)cv.imshow(&#x27;origin&#x27;,image)# resizeåˆ° 512*512,é‡‡ç”¨åŒçº¿æ€§æ’å€¼# å½©è‰²å›¾è™½ç„¶æœ‰ä¸‰é€šé“ï¼Œä½†æ˜¯åªéœ€æŒ‡å®šé•¿ã€å®½å°±è¡Œresize_image = cv.resize(image,(512,512),interpolation=cv.INTER_LINEAR)cv.imshow(&#x27;resize_image&#x27;,resize_image)cv.waitKey(0) 2.6.2 å›¾åƒé‡‘å­—å¡”ï¼špyrUP ã€pyrDown å›¾åƒé‡‘å­—å¡”æ˜¯ä¸€ç³»åˆ—å›¾åƒçš„é›†åˆï¼Œæ‰€æœ‰å›¾åƒæ¥æºäºåŒä¸€å¼ åŸå§‹å›¾åƒï¼Œé€šè¿‡æ¢¯æ¬¡å‘ä¸‹é‡‡æ ·è·å¾—ã€‚ é€šå¸¸æœ‰ä¸¤ç§ç±»å‹çš„å›¾åƒé‡‘å­—å¡” ï¼š é«˜æ–¯é‡‘å­—å¡”(Gaussian pyramid)ï¼šç”¨æ¥å‘ä¸‹é‡‡æ · æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”(Laplacian pyramid)ï¼šç”¨æ¥ä»é‡‘å­—å¡”åº•å±‚å›¾åƒé‡å»ºä¸Šå±‚æœªé‡‡æ ·å›¾åƒï¼Œå¯ä»¥å¯¹å›¾åƒè¿›è¡Œæœ€å¤§ç¨‹åº¦çš„è¿˜åŸ. é«˜æ–¯é‡‘å­—å¡” é«˜æ–¯é‡‘å­—å¡”ç”¨äºä¸‹é‡‡æ ·è¿‡ç¨‹å¯æè¿°å¦‚ä¸‹ï¼š å¯¹å›¾åƒè¿›è¡Œé«˜æ–¯å†…æ ¸å·ç§¯ï¼Œå…¶ä¸­é«˜æ–¯å†…æ ¸= â”â€‹ è¿™ä¸€æ­¥å·ç§¯ä¸ä¼šç¼©å°å›¾åƒå°ºå¯¸å—ï¼Ÿ å°†æ‰€æœ‰å¶æ•°è¡Œã€åˆ—å»é™¤ï¼Œè¿™æ ·å¾—åˆ°çš„å›¾å½¢é•¿ã€å®½æ˜¯åŸå›¾12\\frac{1}{2}21â€‹ ã€‚ åœ¨openCVä¸­æä¾›äº†pyrDown å‡½æ•°æ¥å®ç°ä¸‹é‡‡æ ·ï¼š å®ä¾‹ï¼šä½¿ç”¨é«˜æ–¯é‡‘å­—å¡”æ¥ç¼©æ”¾å›¾åƒã€‚ 123456789101112131415# 27.é«˜æ–¯é‡‘å­—å¡”image = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\standingCat.jpg&quot;)# resizeåˆ° 512*512image = cv.resize(image,(512,512),interpolation=cv.INTER_AREA)cv.imshow(&#x27;origin&#x27;,image)level = 3pyramid_imgs = []for i in range(level): dst = cv.pyrDown(image) pyramid_imgs.append(dst) image = dst cv.imshow(&#x27;L&#x27;+str(i),dst)cv.waitKey(0) æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡” æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”ä¸­ä½¿ç”¨äº†ä¸Šé‡‡æ ·ï¼Œå…¶ä¸Šé‡‡æ ·è¿‡ç¨‹å¦‚ä¸‹ï¼š å°†å›¾åƒåœ¨æ¯ä¸ªæ–¹å‘ä¸Šæ‰©å¤§ä¸ºåŸæ¥çš„ä¸¤å€ï¼Œæ–°å¢çš„è¡Œå’Œåˆ—ä»¥0å¡«å…… ä½¿ç”¨å…ˆå‰åŒæ ·çš„å†…æ ¸(ä¹˜ä»¥4)ä¸æ”¾å¤§åçš„å›¾åƒå·ç§¯ï¼Œæˆ–å¾—â€æ–°å¢åƒç´ â€çš„è¿‘ä¼¼å€¼ âš ï¸ åŒä¸Šç–‘é—®ï¼Œå·ç§¯è¿™ä¸€æ­¥ä¸ä¼šæ”¹å˜å›¾åƒå¤§å°å—ï¼Ÿé‚£å°±ä¸æ˜¯æ”¾å¤§2å€äº†ï¼Ÿ åœ¨openCVä¸­æä¾›äº†pyrUp å‡½æ•°æ¥å®ç°ä¸Šé‡‡æ ·ï¼š æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”å›¾åƒå¯ä¸ä»…ä»…é€šè¿‡å¯¹å›¾åƒå‘ä¸Šé‡‡æ ·å°±å¾—åˆ°ï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹ï¼š é€šè¿‡é«˜æ–¯é‡‘å­—å¡”å¾—åˆ°ä¸€ç³»åˆ—ä¸åŒå±‚çº§(0-L)å›¾åƒG å…ˆå¯¹æœ€é«˜å±‚çº§å›¾åƒG[L] --&gt; ä¸Šé‡‡æ ·(pyrUp)å¾—åˆ°EP[L-1] --&gt; G[L-1] - EP[L-1] == æ‹‰æ™®æ‹‰æ–¯å›¾L[L-1] å¯¹æ¬¡é«˜å±‚å›¾åƒG[L-1] --&gt; ä¸Šé‡‡æ ·(pyrUp)å¾—åˆ°EP[L-2] --&gt; G[L-2] - EP[L-2] == æ‹‰æ™®æ‹‰æ–¯å›¾åƒL[L-2] é‡å¤æ­¥éª¤ 2-3 ï¼Œç›´è‡³é«˜æ–¯é‡‘å­—å¡”æœ€ä½å±‚ï¼ˆåŸå›¾ç¬¬ä¸€æ¬¡ä¸‹é‡‡æ ·å›¾ï¼‰ æ˜¾ç„¶ï¼Œæ ¹æ®ä¸Šè¿°æ­¥éª¤ï¼Œæ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”æ˜¯é€šè¿‡ æºå›¾ä¸‹é‡‡æ ·å¯¹åº”å±‚çº§ - ä¸Šé‡‡æ ·ç›¸åº”å±‚çº§ è·å–ã€‚ä¿ç•™çš„æ®‹å·®ï¼Œä¸ºå›¾åƒè¿˜åŸåšå‡†å¤‡ï¼ˆğŸ™‚ æ­¤å¤„å¤åŸä¸æ˜¯å¾ˆæ¸…æ¥š ï¼‰ã€‚ å®ä¾‹ï¼šè·å–æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”å›¾åƒã€‚ 12345678910111213# 28.æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”# ä¸‹é¢ pyramid_imgs è¡¨ç¤ºé«˜æ–¯é‡‘å­—å¡”ä¸‹é‡‡æ ·è·å¾—å›¾åƒé›†åˆfor i in range(level-1,-1,-1): # å·¦é—­å³å¼€ä»[2,-1)ï¼Œé€’å‡é€‰æ‹©æ­¥ä¼=-1 if i != 0: expand = cv.pyrUp(pyramid_imgs[i], dstsize=pyramid_imgs[i - 1].shape[:2]) lpls = cv.subtract(pyramid_imgs[i - 1], expand) else: # æ­¤æ—¶å·²ç»æ”¾å¤§è‡³åŸå›¾å¤§å° expand = cv.pyrUp(pyramid_imgs[i], dstsize=image.shape[:2]) lpls = cv.subtract(image, expand) cv.imshow(&#x27;lpls&#x27;+str(i),lpls)cv.waitKey(0) 2.7 å›¾åƒæ¢¯åº¦ è¯¥éƒ¨åˆ†ä¸»è¦å‚è€ƒæ¸…æ™°æ˜“æ‡‚çš„ï¼šå›¾åƒæ¢¯åº¦çš„åŸºæœ¬åŸç† æˆ‘ä»¬çŸ¥é“ç”¨ å‡å€¼æ»¤æ³¢å™¨ ç­‰ ï¼Œå¯ä»¥é™ä½å›¾åƒå™ªå£°ï¼Œä½†æ˜¯ä¼šä½¿å¾—å›¾åƒå˜å¾—æ¨¡ç³Š ã€‚ Q1 : é‚£ä¹ˆæ¨¡ç³Šå›¾åƒå’Œæ¸…æ™°å›¾åƒåˆæ˜¯æ€ä¹ˆåŒºåˆ†å®šä¹‰çš„å‘¢ï¼Ÿ å›¾åƒæ¨¡ç³Šï¼šå› ä¸ºå›¾åƒè½®å»“ä¸æ˜æ˜¾ï¼Œæ¢è¨€ä¹‹ï¼Œè½®å»“è¾¹ç¼˜ç°åº¦å˜åŒ–ä¸å¼ºçƒˆ ï¼Œå±‚æ¬¡æ„Ÿä¸å¼ºã€‚ è‡ªç„¶æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿å¾— è½®å»“ç°åº¦å˜å¾—å¼ºçƒˆ â€”&gt; è”ç³»åˆ° å›¾åƒæ¢¯åº¦ ã€‚ é‚£ä¹ˆæ¢¯åº¦åˆæ˜¯å¦‚ä½•å¢å¼ºå›¾åƒæ¸…æ™°åº¦å‘¢ï¼Ÿ é¦–å…ˆæˆ‘ä»¬äº†è§£ä¸‹å¦‚ä½•è®¡ç®—å›¾åƒçš„æ¢¯åº¦ã€‚ æˆ‘ä»¬çŸ¥é“å›¾åƒæ˜¯ä¸€ä¸ªç¦»æ•£äºŒç»´å‡½æ•°ï¼Œé‚£ä¹ˆå…¶ xã€yxã€yxã€y æ–¹å‘æ¢¯åº¦å¯å®šä¹‰å¦‚ä¸‹ï¼š æ˜¾ç„¶è¿™å°±ç›¸å½“äº æ¢¯åº¦ = 2ä¸ªç›¸é‚»åƒç´ ä¹‹é—´å·®å€¼ è€ƒè™‘ä¸‹é¢è¿™å¼ å›¾ï¼šå·¦éƒ¨åˆ†æ˜¯å›¾åƒæŸä¸ªXæ–¹å‘åƒç´ å˜åŒ–å€¼ï¼Œå³ä¾§éƒ¨åˆ†æ˜¯è¯¥åƒç´ Xæ–¹å‘æ¢¯åº¦å€¼ã€‚ å°† åŸå›¾Xæ–¹å‘åƒç´ å€¼+è¯¥Xæ–¹å‘æ¢¯åº¦=æ–°å›¾Xæ–¹å‘åƒç´ å€¼åŸå›¾Xæ–¹å‘åƒç´ å€¼ + è¯¥Xæ–¹å‘æ¢¯åº¦ = æ–°å›¾Xæ–¹å‘åƒç´ å€¼åŸå›¾Xæ–¹å‘åƒç´ å€¼+è¯¥Xæ–¹å‘æ¢¯åº¦=æ–°å›¾Xæ–¹å‘åƒç´ å€¼ ã€‚ è¿™æ ·ï¼šå°†æœ‰æ¢¯åº¦å€¼çš„ç›¸é‚»åƒç´ çš„ç°åº¦å€¼å˜å¤§äº†ï¼›è€Œæ²¡æœ‰ç°åº¦å€¼å˜æ¢çš„åƒç´ å€¼ä¸å˜ã€‚ ç‰¹åˆ«çš„ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å°† xå’Œyxå’Œyxå’Œyæ–¹å‘ç»“åˆæ¥è®¡ç®—æ–°å›¾åƒç´ å€¼ã€‚è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š ä¸€èˆ¬ä½¿ç”¨æ‹Ÿåˆå…¬å¼ï¼Œç®€åŒ–è®¡ç®—ï¼š M(x,y)M(x,y)M(x,y) å³è®¤ä¸ºæ˜¯æ¢¯åº¦å˜åŒ–å€¼ï¼ŒåŸå›¾åƒåƒç´ åŠ ä¸Šè¯¥å€¼ä¾¿å¯è·å¾—æœ€ç»ˆæ–°å›¾åƒç´ å€¼ã€‚ 2.7.1 å›¾åƒæ±‚å¯¼ï¼šSobelã€Scharrã€Lapacian OpenCVæä¾›ä¸‰ç§ä¸åŒæ¢¯åº¦æ»¤æ³¢å™¨ï¼ˆé«˜é€šæ»¤æ³¢å™¨ï¼‰ï¼šSobelï¼ŒScharrå’Œ Lapacian ï¼š Sobelã€Scharr ï¼šç”¨äºæ±‚å›¾åƒä¸€é˜¶å¯¼æˆ–äºŒé˜¶å¯¼ Lapacian ï¼šæ±‚å›¾åƒäºŒé˜¶å¯¼ï¼Œå¯¹ Sobel çš„éƒ¨åˆ†ä¼˜åŒ– Sobel &amp; Scharr æ„Ÿè§‰å°±æ˜¯å®šä¹‰å·ç§¯æ ¸ï¼Œç„¶åè¿›è¡Œå·ç§¯ã€‚ä½†æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆè¿™æ ·å¯ä»¥æ±‚å¯¼ã€‚ Sobel ç®—å­ ï¼šé«˜æ–¯å¹³æ»‘å’Œå¾®åˆ†æ“ä½œçš„ç»“åˆä½“ï¼Œå› æ­¤æŠ—å™ªå£°èƒ½åŠ›å¾ˆå¥½ ddepthï¼šæŒ‡å›¾åƒæ·±åº¦ï¼Œç›®æ ‡å›¾åƒæ·±åº¦å¿…é¡» &gt;= åŸå›¾åƒæ·±åº¦ã€‚-1 è¡¨ç¤ºå’ŒåŸå›¾åƒæ·±åº¦ä¸€è‡´ã€‚ dxã€dyï¼šè¡¨ç¤ºæ±‚å¯¼çš„æ–¹å‘ï¼Œ0 è¡¨ç¤ºè¿™ä¸ªæ–¹å‘ä¸è¿›è¡Œæ±‚å¯¼ï¼Œ1 è¡¨ç¤ºæœ‰ã€‚ ksizeï¼šå·ç§¯æ ¸å¤§å°ï¼Œå½“ ksize=-1 ï¼Œä¼šä½¿ç”¨ 3*3 Scharrå·ç§¯æ ¸ã€‚å®ƒçš„æ•ˆæœæ¯”Sobelå¥½ Scharr ç®—å­ï¼š ä»¥Scharr ç®—å­ä¸ºä¾‹ï¼šå®ç°è®¡ç®—å›¾åƒæŒ‡å®šæ–¹å‘çš„æ¢¯åº¦ã€‚ 12345678910111213141516171819202122232425# 29.å›¾åƒæ±‚å¯¼ï¼šSobelã€Scharrã€Lapacian# æ¼”ç¤ºScharrç®—å­æ±‚å¯¼æ¢¯åº¦ï¼ŒSobelåŒç†image = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\standingCat.jpg&quot;)cv.imshow(&#x27;origin&#x27;,image)# Scharrç®—å­å¯¹å›¾åƒæ±‚å¯¼# ä¸ºä»€ä¹ˆä½¿ç”¨CV_32Fï¼Ÿ# å› ä¸ºScharrç®—å­æ±‚å¯¼åä¼šæœ‰è´Ÿå€¼&amp;å¤§äº255å€¼ã€‚è€ŒåŸå›¾æ˜¯unit8ä½ï¼Œå³8ä½æ— ç¬¦å·æ•°ã€‚# æ‰€ä»¥scharrå»ºç«‹å›¾åƒä½ç½®ä¸å¤Ÿï¼Œéœ€è¦ä½¿ç”¨32Fæœ‰ç¬¦å·æ•°æ®ç±»å‹ã€‚grad_x = cv.Scharr(image,cv.CV_32F,1,0)grad_y = cv.Scharr(image,cv.CV_32F,0,1)# ç»è¿‡å¤„ç†åï¼Œåˆ«ç”¨convertScaleAbs()å‡½æ•°å°†å…¶è½¬å›åŸæ¥çš„uint8å½¢å¼ã€‚# å¦åˆ™å°†æ— æ³•æ˜¾ç¤ºå›¾åƒï¼Œè€Œåªæ˜¯ä¸€å‰¯ç°è‰²çš„çª—å£ã€‚# dst = cv2.convertScaleAbs(src[, dst[, alpha[, beta]]])# å¯é€‰å‚æ•°alphaæ˜¯ä¼¸ç¼©ç³»æ•°ï¼Œbetaæ˜¯åŠ åˆ°ç»“æœä¸Šçš„ä¸€ä¸ªå€¼ã€‚ç»“æœè¿”å›uint8ç±»å‹çš„å›¾ç‰‡grad_x = cv.convertScaleAbs(grad_x)grad_y = cv.convertScaleAbs(grad_y)cv.imshow(&#x27;gradx&#x27;,grad_x)cv.imshow(&#x27;grady&#x27;,grad_y)cv.waitKey(0) âš ï¸ ä¸Šé¢å›¾ä¸é€‚åˆæ¼”ç¤ºå¢åŠ å›¾åƒæ¸…æ™°åº¦ï¼Œå¯çœ‹ä¸‹é¢è¿™å¼ å›¾ï¼š æ¢¯åº¦å›¾æ˜¯xã€yxã€yxã€y æ–¹å‘åˆ†åˆ«è®¡ç®—ç„¶åç»å¯¹å€¼ç›¸åŠ ï¼š Laplacian ç®—å­ ä½œç”¨ å¯¹å™ªå£°æ•æ„Ÿï¼Œä¼šäº§ç”ŸåŒè¾¹æ•ˆæœã€‚ä¸èƒ½æ£€æµ‹å‡ºè¾¹çš„æ–¹å‘ã€‚é€šå¸¸ä¸ç›´æ¥ç”¨è¾¹æ£€æµ‹ã€‚ä¸€èˆ¬ç”¨æ¥æ£€æµ‹ä¸€ä¸ªåƒç´ æ˜¯åœ¨è¾¹çš„äº®çš„ä¸€è¾¹è¿˜æ˜¯æš—çš„ä¸€è¾¹åˆ©ç”¨é›¶è·¨è¶Šï¼Œç¡®å®šè¾¹çš„ä½ç½®ã€‚ åŸç† å›¾åƒä¸­çš„è¾¹ç¼˜åŒºåŸŸï¼Œåƒç´ å€¼ä¼šå‘ç”Ÿâ€œè·³è·ƒâ€ï¼Œå¯¹è¿™äº›åƒç´ æ±‚å¯¼ï¼Œåœ¨å…¶*ä¸€é˜¶å¯¼æ•°æå€¼å¤„å°±æ˜¯è¾¹ç¼˜* ã€‚ API å®ä¾‹ï¼šåˆ©ç”¨ Laplacian æ£€æµ‹å›¾åƒçš„è¾¹ã€‚ 12345678910# Lapacianimage = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\standingCat.jpg&quot;)cv.imshow(&#x27;origin&#x27;,image)dst = cv.Laplacian(image,cv.CV_32F,ksize=3)dst = cv.convertScaleAbs(dst)cv.imshow(&#x27;Lapacian&#x27;,dst)cv.waitKey(0) 2.7.2 Cannyè¾¹ç¼˜æå– è¯¥éƒ¨åˆ†ä¸»è¦å‚è€ƒï¼šè¾¹ç¼˜æ£€æµ‹ä¹‹Canny ä½œç”¨ï¼šæå–å›¾åƒè¾¹ç¼˜ æµç¨‹ï¼šè¯¦ç»†æµç¨‹ç®—æ³•å®ç°å‚è€ƒä¸Šè¿°æ–‡ç« é“¾æ¥ ä½¿ç”¨é«˜æ–¯æ»¤æ³¢å™¨ï¼Œä»¥å¹³æ»‘å›¾åƒï¼Œæ»¤é™¤å™ªå£° è®¡ç®—å›¾åƒä¸­æ¯ä¸ªåƒç´ ç‚¹çš„æ¢¯åº¦å¼ºåº¦å’Œæ–¹å‘ åº”ç”¨éæå¤§å€¼ï¼ˆNon-Maximum Suppressionï¼‰æŠ‘åˆ¶ï¼Œä»¥æ¶ˆé™¤è¾¹ç¼˜æ£€æµ‹å¸¦æ¥çš„æ‚æ•£å“åº” åº”ç”¨åŒé˜ˆå€¼ï¼ˆDouble-Thresholdï¼‰æ£€æµ‹æ¥ç¡®å®šçœŸå®çš„å’Œæ½œåœ¨çš„è¾¹ç¼˜ é€šè¿‡æŠ‘åˆ¶å­¤ç«‹çš„å¼±è¾¹ç¼˜æœ€ç»ˆå®Œæˆè¾¹ç¼˜æ£€æµ‹ API threshold1ã€threshold2å³å¯¹åº”é˜ˆå€¼Tä½ã€Té«˜T_ä½ã€T_é«˜Tä½â€‹ã€Té«˜â€‹ï¼š åƒç´ å€¼&gt;Té«˜åƒç´ å€¼&gt;T_é«˜åƒç´ å€¼&gt;Té«˜â€‹ : è¢«è®¤ä¸ºæ˜¯è¾¹ç¼˜åƒç´ ï¼Œä¿ç•™ Tä½&lt;åƒç´ å€¼&lt;Té«˜T_ä½&lt;åƒç´ å€¼&lt;T_é«˜Tä½â€‹&lt;åƒç´ å€¼&lt;Té«˜â€‹ : å½“è¯¥åƒç´ å’Œé«˜äºä¸Šé™çš„åƒç´ ç‚¹è¿æ¥æ‰ä¿ç•™ åƒç´ å€¼&lt;Tä½åƒç´ å€¼&lt;T_ä½åƒç´ å€¼&lt;Tä½â€‹ : ä¸è®¤ä¸ºæ˜¯è¾¹ç¼˜åƒç´ ï¼Œèˆå¼ƒ ä¸€èˆ¬è®¾ç½® Té«˜/Tä½=3:1T_é«˜/T_ä½ = 3:1Té«˜â€‹/Tä½â€‹=3:1 æˆ–è€… Té«˜/Tä½=2:1T_é«˜/T_ä½ = 2:1Té«˜â€‹/Tä½â€‹=2:1 å®ä¾‹ï¼šåˆ©ç”¨Cannyå‡½æ•°è¿›è¡Œè¾¹ç¼˜æ£€æµ‹ã€‚ 123456789# 30.cannyè¾¹ç¼˜æ£€æµ‹image = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\standingCat.jpg&quot;)cv.imshow(&#x27;origin&#x27;,image)# cannyè¾¹ç¼˜æ£€æµ‹ï¼Œå¯ä»¥ä½¿ç”¨è¿™ç§ä¸ç”¨æä¾›gradxã€gradyçš„APIedge_detect = cv.Canny(image,50,150)cv.imshow(&#x27;edge detect&#x27;,edge_detect)cv.waitKey(0) 2.8 ç›´çº¿ã€åœ†ã€è½®å»“æ£€æµ‹ 2.8.1 ç›´çº¿æ£€æµ‹ï¼šéœå¤«å˜æ¢ ç»™å®šä¸€å‰¯å›¾åƒï¼ˆä¸€èˆ¬æ˜¯äºŒå€¼å›¾åƒï¼Œåƒç´ å€¼å¯¹æ£€æµ‹ç›´çº¿æ²¡æœ‰ä½œç”¨ï¼‰å¦‚ä½•æ£€æµ‹æ˜¯å¦å­˜åœ¨ç›´çº¿ï¼Ÿ ä¸€ç§å¾ˆç›´è§‚çš„æƒ³æ³•ï¼šä»»é€‰ä¸€å¯¹ç‚¹ï¼Œå†³å®šä¸€æ¡çº¿ï¼Œç„¶åæµ‹è¯•æ‰€æœ‰å…¶ä»–ç‚¹æ˜¯å¦æ¥è¿‘è¿™æ¡çº¿ï¼Œä»è€Œå¾—å‡ºæ¥è¿‘è¿™æ¡ç‰¹æ®Šçº¿çš„æ‰€æœ‰ç‚¹çš„å­é›†ã€‚ ä½†æ˜¯è¿™ç§æ–¹æ³•æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨çš„ éœå¤«å˜æ¢ ã€‚ åœ¨äº†è§£éœå¤«å˜æ¢ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä»€ä¹ˆæ˜¯ å¯¹å¶æ€§ ã€‚ å¯¹å¶æ€§ æˆ‘æ‰€ç†è§£çš„å¯¹å¶æ€§ï¼šå°†ç›´è§’åæ ‡ç³»çš„ ç‚¹ å¯¹åº” å‚æ•°ç©ºé—´çš„ ç›´çº¿ã€‚ åœ¨ç›´è§’ç©ºé—´xâˆ’yx-yxâˆ’yï¼Œè¿‡ç‚¹A(x0,y0)A(x_0,y_0)A(x0â€‹,y0â€‹) æ‰€æœ‰ç›´çº¿ç¡®å®šä¸€ç°‡ç›´çº¿ï¼Œéƒ½æ»¡è¶³æ–¹ç¨‹ï¼šy0=kâˆ—x0+by_0=k*x_0+by0â€‹=kâˆ—x0â€‹+b ã€‚ å¦‚æœè½¬æ¢å‚æ•°ç©ºé—´ kâˆ’bk-bkâˆ’b ï¼Œé‚£ä¹ˆè¿‡ç‚¹A(x0,y0)A(x_0,y_0)A(x0â€‹,y0â€‹) æ‰€æœ‰ ç›´çº¿å°±å¯ä»¥æè¿°ä¸º ä¸€æ¡ ç›´çº¿ï¼šb=âˆ’kx0+y0b=-kx_0+y_0b=âˆ’kx0â€‹+y0â€‹: åœ¨å‚æ•°ç©ºé—´kâˆ’bk-bkâˆ’b ï¼Œæ–œç‡æ˜¯ç‚¹ AAA æ¨ªåæ ‡ âˆ’x0-x_0âˆ’x0â€‹ , æˆªè·æ˜¯ç‚¹AAA çºµåæ ‡ y0y_0y0â€‹ é‚£ä¹ˆå¦‚æœåœ¨ç›´è§’åæ ‡ç³»å­˜åœ¨å¤šä¸ªç‚¹åœ¨åŒä¸€ç›´çº¿l1(æ–œç‡=k1,æˆªè·=b1)l_1(æ–œç‡=k_1,æˆªè·=b_1)l1â€‹(æ–œç‡=k1â€‹,æˆªè·=b1â€‹)ä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´ï¼šå®ƒä»¬åœ¨å‚æ•°ç©ºé—´kâˆ’bk-bkâˆ’b å¿…ç„¶ä¼šäº¤äºä¸€ç‚¹ (k1,b1)(k_1,b_1)(k1â€‹,b1â€‹) ã€‚ å¦‚æœæœ‰nä¸ªç‚¹åœ¨ä¸€æ¡ç›´çº¿ä¸Šï¼Œé‚£ä¹ˆåœ¨å‚æ•°ç©ºé—´å°±ä¼šå­˜åœ¨å¯¹åº”äº¤äºnä¸ªç‚¹ï¼Œé‚£ä¹ˆåœ¨å‚æ•°ç©ºé—´ç›¸äº¤ç›´çº¿æœ€å¤šçš„ç‚¹(k,b)(k,b)(k,b) , å°±æ˜¯æˆ‘ä»¬åœ¨ xâˆ’yx-yxâˆ’y ç›´è§’åæ ‡å¯¹åº”ç›´çº¿æ–œç‡å’Œæˆªè·çš„è§£ ã€‚ éœå¤«å˜åŒ–&amp;å‚æ•°ç©ºé—´é€‰æ‹© ä¸Šè¿°å‚æ•°ç©ºé—´æ˜¯é€‰æ‹©ç›´è§’åæ ‡ç³»ç©ºé—´ kâˆ’bk-bkâˆ’b , ä½†æ˜¯è¿™æ ·ä¼šå¸¦æ¥ä¸€ä¸ªé—®é¢˜ï¼šæ— æ³•æ£€æµ‹å‚ç›´ç›´çº¿ å› æ­¤æˆ‘ä»¬è€ƒè™‘å°†å‚æ•°ç©ºé—´è½¬æ¢åˆ°æåæ ‡ç³» râˆ’Î¸r-\\thetarâˆ’Î¸ : âš ï¸ ä¸ºä»€ä¹ˆæ˜ å°„åˆ°æåæ ‡æ˜¯æ›²çº¿ï¼Ÿ ä¸ºä»€ä¹ˆç»™å®šæ’ç­‰å¼ xcosÎ¸+ysinÎ¸=pxcos\\theta+ysin\\theta=pxcosÎ¸+ysinÎ¸=p è¿›è¡Œå˜æ¢ï¼Ÿ åŒå‰ï¼Œåœ¨æåæ ‡ç³»ç›¸äº¤æœ€å¤šçš„ç‚¹(Î¸ï¼Œp)(\\thetaï¼Œp)(Î¸ï¼Œp) ï¼Œä¾¿å¯è½¬æ¢åˆ°ç›´è§’åæ ‡ç³»æ±‚è§£å¯¹åº”æ–œç‡å’Œæˆªè·ã€‚ ç†è®ºä¸Šï¼Œä¸€ä¸ªç‚¹ä¼šå¯¹åº”æ— æ•°æ¡ç›´çº¿ï¼Œåœ¨å‚æ•°ç©ºé—´ pâˆ’Î¸p-\\thetapâˆ’Î¸ è‡ªç„¶ä¹Ÿæ˜¯è¿ç»­çš„ã€‚ä½†äº‹å®ä¸Šï¼Œæˆ‘ä»¬ä¼šè§„å®šç›´çº¿çš„æ•°é‡ï¼Œå°† Î¸\\thetaÎ¸ ç¦»æ•£åŒ–ä¸ºç­‰é—´è·ç¦»æ•£å€¼ï¼Œç›¸åº”ppp ä¹Ÿç¦»æ•£ä¸ºç­‰é—´è·ç¦»æ•£å€¼ã€‚ è¿™æ ·ï¼Œå‚æ•°ç©ºé—´å°±æ˜¯ä¸€ä¸ªç­‰å¤§å°*ç½‘æ ¼* ã€‚å½“å‚æ•°ç©ºé—´æœ‰ç›´çº¿ç›¸äº¤äºè¿™ä¸ªç‚¹ï¼Œåˆ™ç½‘æ ¼ç´¯åŠ å™¨+1ï¼š HoughLines() éœå¤«å˜æ¢ï¼Œåˆ©ç”¨openCVæ£€æµ‹å›¾åƒå…·ä½“æµç¨‹å¯æ€»ç»“å¦‚ä¸‹ï¼š å½©è‰²å›¾åƒ-&gt;ç°åº¦å›¾ å»å™ªï¼ˆé«˜æ–¯æ ¸ï¼‰ è¾¹ç¼˜æå–ï¼ˆcannyã€sobelï¼‰ âš ï¸ Cannyæ–¹æ³•ä¸­åŒ…å«è®¡ç®—æ¢¯åº¦ï¼Œéæœ€å¤§ä¿¡å·æŠ‘åˆ¶å’ŒåŒé˜ˆå€¼è¾“å‡º äºŒå€¼åŒ–ï¼ˆåˆ¤æ–­æ­¤å¤„æ˜¯å¦ä¸ºè¾¹ç¼˜ç‚¹ï¼Œå°±çœ‹ç°åº¦å€¼==255ï¼‰ æ˜ å°„åˆ°éœå¤«ç©ºé—´ å–å±€éƒ¨æå¤§å€¼ï¼Œè®¾å®šé˜ˆå€¼ï¼Œè¿‡æ»¤å¹²æ‰°ç›´çº¿ ç»˜åˆ¶ç›´çº¿ã€æ ‡å®šè§’ç‚¹ ä¸‹é¢ä»£ç æ²¡æœ‰è¿›è¡Œç¬¬ä¸‰æ­¥äºŒå€¼åŒ–ï¼Œæ˜¯å› ä¸º cannyè‡ªå¸¦äºŒå€¼åŒ–å—ï¼Ÿ å¯¹çš„ rhoï¼šç”Ÿæˆæåæ ‡åƒç´ æ‰«ææ­¥é•¿ï¼ˆç¦»æ•£åŒ–ï¼‰ thetaï¼šç”Ÿæˆæåæ ‡æ—¶æ‰«æè§’åº¦æ­¥é•¿ï¼ˆç¦»æ•£åŒ–ï¼‰ thresholdï¼šåªæœ‰è¶³å¤Ÿäº¤ç‚¹çš„æåæ ‡æ‰è¢«è®¤ä¸ºæ˜¯ç›´çº¿ å®ä¾‹ï¼šåˆ©ç”¨openCV &amp; éœå¤«å˜æ¢æ¥æ£€æµ‹å›¾åƒç›´çº¿ã€‚ ä¸ºä»€ä¹ˆæ£€æµ‹ç›´çº¿å›¾åƒä¸Šé¢æ€»æ˜¯å‡ºç°è¿™äº›ä¸æ­£å¸¸ç›´çº¿ï¼Ÿ 12345678910111213141516171819202122232425262728293031323334353637383940# 31.éœå¤«å˜æ¢image = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\building.jpg&quot;)# 0.é«˜æ–¯æ»¤æ³¢ï¼ˆæ•ˆæœä¹Ÿä¸å¥½ï¼Œæœ€å¥½å–æ¶ˆè¿™æ­¥äº†ï¼‰# image = cv.GaussianBlur(image,(3,3),0)cv.imshow(&#x27;origin&#x27;,image)# 1.è½¬æ¢ä¸ºç°åº¦å›¾gray = cv.cvtColor(image,cv.COLOR_BGR2GRAY)# 2.è¾¹ç¼˜æ£€æµ‹canny# åˆ†åˆ«è®¾å®šé˜ˆå€¼åƒç´ ä¸º50ã€150ï¼Œsobelç®—å­å¤§å°=3edges = cv.Canny(gray,50,150,apertureSize=3)# 3.éœå¤«å˜æ¢# ç”Ÿæˆæåæ ‡æ‰«ææ­¥é•¿=1ï¼Œè§’åº¦=1Â°ï¼Œè‡³å°‘æœ‰200ä¸ªäº¤ç‚¹æ‰è®¤ä¸ºæ˜¯ç›´çº¿lines = cv.HoughLines(edges,1,np.pi/180,200)# 4.ç”»å‡ºç›´çº¿for line in lines: r,theta = line[0] # æåæ ‡pã€Î¸ # è®¡ç®—ç›´çº¿ä¸¤ç«¯ç‚¹ # ä¸ºä»€ä¹ˆæ˜¯è¿™ä¹ˆè®¡ç®—ä¹Ÿä¸æ¸…æ¥šï¼Ÿ cos = np.cos(theta) sin = np.sin(theta) x0 = r*cos y0 = r*sin # è®¡ç®—ç›´çº¿æœ€å¤§ç‚¹(x1,y1) x1 = int(x0 + 1000 * (-sin)) y1 = int(x0 + 1000 * (cos)) # è®¡ç®—ç›´çº¿æœ€å°ç‚¹(x2,y2) x2 = int(x0 - 1000 * (-sin)) y2 = int(x0 - 1000 * (cos)) # ç”»å‡ºç›´çº¿ cv.line(image,(x1,y1),(x2,y2),(0,0,255),2)cv.imshow(&#x27;detect line&#x27;,image)cv.waitKey(0) HoughLinesP() éœå¤«æ¦‚ç‡å˜æ¢æ˜¯éœå¤«å˜æ¢çš„åŠ å¼ºç‰ˆï¼š åŸç†ï¼šæš‚ç•¥ï¼Œå¾…è¡¥ APIï¼šæ•ˆæœå’ŒAPIæ¥å£éƒ½æ¯”éœå¤«å˜æ¢è¦å¥½å¾ˆå¤š å®ä¾‹ï¼šåˆ©ç”¨openCV &amp; éœå¤«å˜æ¢æ¥æ£€æµ‹å›¾åƒç›´çº¿ã€‚ 123456789101112131415161718192021# 32.éœå¤«æ¦‚ç‡å˜æ¢image = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\building.jpg&quot;)# 0.è¿›è¡Œé«˜æ–¯æ¨¡ç³Šï¼ˆå®æµ‹æ•ˆæœå˜å¥½ï¼‰# ksizeå’Œsigmaå¯ä»¥äº’ç›¸è®¡ç®—ï¼Œæ•…æŒ‡å®šsigmaX=0image = cv.GaussianBlur(image,(3,3),0)cv.imshow(&#x27;origin&#x27;,image)# 1.è½¬æ¢ä¸ºç°åº¦å›¾gray = cv.cvtColor(image,cv.COLOR_BGR2GRAY)# 2.è¾¹ç¼˜æ£€æµ‹cannyedges = cv.Canny(gray,50,150,apertureSize=3)# 3.éœå¤«æ¦‚ç‡å˜æ¢lines = cv.HoughLinesP(edges,1,np.pi/180,200,minLineLength=50,maxLineGap=10)for line in lines: x1,y1,x2,y2 = line[0] cv.line(image, (x1, y1), (x2, y2), (0, 0, 255), 2)cv.imshow(&#x27;detect line&#x27;,image)cv.waitKey(0) 2.8.2 åœ†æ£€æµ‹ï¼šéœå¤«å˜æ¢ åœ¨å‰ï¼Œè‹¥å¹²ç‚¹åœ¨åŒä¸€ç›´çº¿ä¸Šï¼Œåˆ™å®ƒä»¬å¿…æœ‰ä¸€æ¡ç›´çº¿y=kx+by=k x+by=kx+b ç»è¿‡å®ƒä»¬ã€‚ä¸ºäº†è§£ç®—å‡ºkã€bkã€bkã€b æˆ‘ä»¬å°†è¿™ è‹¥å¹²ç‚¹ å˜æ¢åˆ°æåæ ‡å‚æ•°ç©ºé—´kâˆ’bk-bkâˆ’b å¾—åˆ°å¯¹åº” è‹¥å¹²æ›²çº¿ , è¿™äº›æ›²çº¿è‹¥å­˜åœ¨äº¤ç‚¹A(ka,ba)A(k_a,b_a)A(kaâ€‹,baâ€‹) åˆ™è¯´æ˜å­˜åœ¨ä¸€æ¡ç›´çº¿ y=kax+bay=k_a x+b_ay=kaâ€‹x+baâ€‹ ä½¿å¾—å®ƒä»¬åœ¨åŒä¸€ç›´çº¿ä¸Šã€‚ é‚£å¦‚ä½•ç¡®å®šå‡ ä¸ªç‚¹æ˜¯åœ¨åŒä¸€åœ†ä¸Šï¼Ÿ åœ¨ xâˆ’yx-yxâˆ’y åæ ‡ç³»ï¼Œåœ†è¡¨è¾¾å¼å¯å†™ä½œï¼š(xâˆ’a)2+(yâˆ’b)2=r(x-a)^2+(y-b)^2 = r(xâˆ’a)2+(yâˆ’b)2=r ã€‚ åŒæ ·å°†å…¶æ˜ å°„åˆ°å‚æ•°ç©ºé—´ râˆ’aâˆ’br-a-brâˆ’aâˆ’b ä¸­ã€‚ âš ï¸ ä¸Šæœ‰ä¸‰ä¸ªå‚æ•°rabrabrabï¼Œåœ¨OpenCVä¸­å¯é€šè¿‡è®¾å®šrrr èŒƒå›´ï¼Œå¾ªç¯éå†rrr å€¼ï¼Œåˆ™åªåœ¨äºŒç»´ç©ºé—´aâˆ’ba-baâˆ’b å¯»æ‰¾åœ†å¿ƒ(a,b)(a,b)(a,b) å³å¯ã€‚ é‚£ä¹ˆï¼Œåœ¨äºŒç»´ç©ºé—´aâˆ’ba-baâˆ’b , åœ†(xâˆ’a)2+(yâˆ’b)2=r(x-a)^2+(y-b)^2 = r(xâˆ’a)2+(yâˆ’b)2=r è¢«æ˜ å°„æˆä»€ä¹ˆæ ·å­ï¼Ÿ æ˜¾ç„¶ä¹Ÿæ˜¯ä¸ªåœ†ï¼Œæ­¤æ—¶åœ†å¿ƒæ˜¯ (x,y)(x,y)(x,y) , rrr å·²çŸ¥ ï¼š(aâˆ’x)2+(bâˆ’y)2=r(a-x)^2+(b-y)^2 = r(aâˆ’x)2+(bâˆ’y)2=r ã€‚ å‡è®¾åœ¨ xâˆ’yx-yxâˆ’y åæ ‡ç³»å­˜åœ¨ä¸‰ä¸ªç‚¹ a(x1,y1)ã€b(x2,y2)ã€a(x2,y2)a(x_1,y_1)ã€b(x_2,y_2)ã€a(x_2,y_2)a(x1â€‹,y1â€‹)ã€b(x2â€‹,y2â€‹)ã€a(x2â€‹,y2â€‹) ã€‚æ˜¾ç„¶å®ƒä»¬ä»»æ„ä¸€ä¸ªç‚¹ï¼Œç”±äºåœ†å¿ƒ(a,b)(a,b)(a,b) ä¸ç¡®å®šï¼Œåœ¨xâˆ’yx-yxâˆ’y åæ ‡ç³»å¯ä»¥ç”»å‡ºæ— æ•°ä¸ªåœ†ã€‚ ä¸‰ä¸ªç‚¹æ˜ å°„åˆ° aâˆ’ba-baâˆ’b äºŒç»´ç©ºé—´ï¼Œåˆ™ä¸ºç¡®å®šçš„ä¸€ä¸ªåœ†ï¼Œåœ†å¿ƒåˆ†åˆ«ä¸ºa(x1,y1)ã€b(x2,y2)ã€a(x2,y2)a(x_1,y_1)ã€b(x_2,y_2)ã€a(x_2,y_2)a(x1â€‹,y1â€‹)ã€b(x2â€‹,y2â€‹)ã€a(x2â€‹,y2â€‹) å¦‚æœå®ƒä»¬åœ¨åŒä¸€ä¸ªåœ†ä¸Šï¼Œé‚£ä¹ˆå¿…ç„¶å­˜åœ¨ä¸€ä¸ªåœ†ï¼Œåœ†å¿ƒä¸º(a1,b1)(a_1,b_1)(a1â€‹,b1â€‹) åŠå¾„ä¸ºrrr ï¼Œéƒ½ç»è¿‡è¿™ä¸‰ä¸ªç‚¹ã€‚æ¢è¨€ä¹‹ï¼Œåœ¨å‚æ•°ç©ºé—´è¿™ä¸‰ä¸ªç‚¹å¯¹åº”çš„åœ†å¿…ç„¶ä¼šäº¤äºä¸€ä¸ªç‚¹(a1,b1)(a_1,b_1)(a1â€‹,b1â€‹) ã€‚ç”±äºåœ¨å‡è®¾åŠå¾„rrr å€¼æƒ…å†µéå†æœå¯»ï¼Œé‚£ä¹ˆæ­¤æ—¶åŠå¾„å·²çŸ¥ã€‚è‡³æ­¤ï¼Œåœ†å°±è¢«ç¡®å®šä¸‹æ¥äº†ã€‚ å½“ç„¶ï¼Œä¸Šè¿°è¿‡ç¨‹ä¸‰ä¸ªç‚¹åœ¨å‚æ•°ç©ºé—´å¯¹åº”çš„åœ†äº¤äºä¸€ä¸ªç‚¹ï¼Œå°±ç¡®å®šä¸€ä¸ªç‚¹è¿˜æ˜¯å¤ªå°‘äº†ã€‚å®é™…å¯ä»¥æŒ‡å®šæ›´å¤šç‚¹äº¤äºä¸€ä¸ªç‚¹æ‰è®¤ä¸ºç¡®å®å­˜åœ¨åœ†ã€‚ HoughCircles() ä¸‹é¢æ˜¯åŸºæœ¬APIç”¨æ³•ã€‚ method : æ£€æµ‹åœ†æ–¹æ³•ï¼Œä¾‹å¦‚éœå¤«æ¢¯åº¦æ³•ï¼šCV_HOUGH_GRADIENT dpï¼šæ£€æµ‹åœ†å¿ƒçš„ç´¯åŠ å™¨å›¾åƒçš„åˆ†è¾¨ç‡äºè¾“å…¥å›¾åƒä¹‹æ¯”çš„å€’æ•°ã€‚dp= 1æ—¶ï¼Œç´¯åŠ å™¨å’Œè¾“å…¥å›¾åƒå…·æœ‰ç›¸åŒçš„åˆ†è¾¨ç‡ã€‚å¦‚æœdp=2ï¼Œç´¯åŠ å™¨ä¾¿æœ‰è¾“å…¥å›¾åƒä¸€åŠé‚£ä¹ˆå¤§çš„å®½åº¦å’Œé«˜åº¦ minDistï¼šåœ†çš„åœ†å¿ƒä¹‹é—´çš„æœ€å°è·ç¦»ã€‚å‚æ•°å¦‚æœå¤ªå°ï¼Œå¤šä¸ªç›¸é‚»çš„åœ†å¯èƒ½è¢«é”™è¯¯åœ°æ£€æµ‹æˆäº†ä¸€ä¸ªé‡åˆçš„åœ†ã€‚åä¹‹ï¼Œå‚æ•°è®¾ç½®å¤ªå¤§çš„è¯ï¼ŒæŸäº›åœ†å°±ä¸èƒ½è¢«æ£€æµ‹å‡ºæ¥äº†ã€‚ param1ï¼šé»˜è®¤å€¼100ã€‚æ˜¯ç¬¬ä¸‰ä¸ªå‚æ•°methodè®¾ç½®çš„æ£€æµ‹æ–¹æ³•çš„å¯¹åº”çš„å‚æ•°ï¼Œå¯¹äºéœå¤«æ¢¯åº¦æ³•CV_HOUGH_GRADIENTï¼Œå®ƒè¡¨ç¤ºä¼ é€’ç»™cannyè¾¹ç¼˜æ£€æµ‹ç®—å­çš„é«˜é˜ˆå€¼ï¼Œä½é˜ˆå€¼ä¸ºé«˜é˜ˆå€¼çš„ä¸€åŠã€‚ param2ï¼šé»˜è®¤å€¼100ã€‚åŒä¸Šï¼Œå¯¹äºéœå¤«æ¢¯åº¦æ³•CV_HOUGH_GRADIENTï¼Œå®ƒè¡¨ç¤ºæ£€æµ‹é˜¶æ®µåœ†å¿ƒçš„ç´¯åŠ å™¨é˜ˆå€¼ã€‚å®ƒè¶Šå°çš„è¯ï¼Œå°±å¯ä»¥æ£€æµ‹åˆ°æ›´å¤šæ ¹æœ¬ä¸å­˜åœ¨çš„åœ†ï¼Œè€Œå®ƒè¶Šå¤§çš„è¯ï¼Œèƒ½é€šè¿‡æ£€æµ‹çš„åœ†å°±æ›´åŠ æ¥è¿‘å®Œç¾çš„åœ†å½¢äº†ã€‚ minRadiusã€maxRadius ï¼š è¡¨ç¤ºè®¾ç½®åœ†åŠå¾„çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ã€‚ å®ä¾‹ï¼šä½¿ç”¨HoughCircles() æ£€æµ‹å›¾åƒä¸­å­˜åœ¨çš„åœ†å½¢ã€‚ 123456789101112131415161718192021# 33.éœå¤«å˜æ¢åœ†æ£€æµ‹image = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\circles.jpg&quot;)cv.imshow(&#x27;origin&#x27;,image)# éœå¤«å˜æ¢æ˜“å—å™ªå£°å½±å“ï¼Œå…ˆè¿›è¡Œå‡å€¼æ¼‚ç§»æ»¤æ³¢å‡å°‘å™ªå£°dst = cv.pyrMeanShiftFiltering(image,10,100)# è½¬æ¢ä¸ºç°åº¦å›¾gray = cv.cvtColor(image,cv.COLOR_BGR2GRAY)# éœå¤«å˜æ¢åœ†æ£€æµ‹# param1ã€param2è°ƒå‚å¾ˆé‡è¦ã€‚æœ€å¼€å§‹param1=50ï¼Œæ•ˆæœå¾ˆå·®ï¼Œcannyçš„é«˜é˜ˆå€¼è®¾ç½®å¤ªä½circles = cv.HoughCircles(gray,cv.HOUGH_GRADIENT,1,20,param1=100,param2=30,minRadius=0,maxRadius=0)# ç”»åœ†[æ³¨æ„ç»´åº¦é—®é¢˜]# circles.shape=ï¼ˆ1,3,3ï¼‰,ç¬¬ä¸€ä¸ªç»´åº¦ä¸æ˜ã€‚ç¬¬äºŒä¸ªç»´åº¦æ˜¯åœ†ä¸ªæ•°ï¼Œç¬¬ä¸‰ä¸ªç»´åº¦å¯¹åº”åœ†ä¸‰ä¸ªå‚æ•°for i in circles[0,:]: cv.circle(image,(i[0],i[1]),i[2],(0,0,255),2)cv.imshow(&#x27;circles&#x27;,image)cv.waitKey(0) 2.8.3 è½®å»“æ£€æµ‹ åŸç† å¾…è¡¥å…… findContours åŸç†ä¸æ‡‚ï¼ŒAPIçœ‹å¾—ä¹Ÿç¨€é‡Œç³Šæ¶‚çš„ã€‚å‚æ•°æ„ä¹‰å¯ä»¥å‚è€ƒ ï¼šè½®å»“å‘ç° æ•´ä¸ªAPIæ“ä½œæ­¥éª¤å¯ä»¥æ€»ç»“å¦‚ä¸‹ï¼š å¯¹å›¾åƒè¿›è¡Œé«˜æ–¯æ»¤æ³¢ï¼Œå‡å°‘å™ªå£° è½¬æ¢ä¸ºäºŒå€¼å›¾åƒï¼šthreshold æˆ–è€… canny è¾¹ç¼˜æå–éƒ½å¯ é€šè¿‡äºŒå€¼å›¾åƒå¯»æ‰¾è½®å»“ï¼šfindContours æç»˜è½®å»“ï¼šdrawContours å®ä¾‹1ï¼šå¯»æ‰¾å›¾åƒè½®å»“ï¼ˆé€šè¿‡thresholdè·å–äºŒå€¼å›¾åƒï¼‰ 1234567891011121314151617181920212223242526272829# 34.è½®å»“å‘ç°ï¼ˆé€šè¿‡thresholdè·å–äºŒå€¼å›¾åƒï¼‰image = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\circles.jpg&quot;)cv.imshow(&#x27;origin&#x27;,image)# 0.é«˜æ–¯æ»¤æ³¢å›¾åƒå‡å°‘å™ªå£°GaussianImg = cv.GaussianBlur(image,(3,3),0)# 1.è½¬æ¢ä¸ºç°åº¦å›¾åƒgrayImg = cv.cvtColor(GaussianImg,cv.COLOR_BGR2GRAY)# 2.threshold è·å–äºŒå€¼å›¾åƒ# å¦‚æœé€‰æ‹©äºŒå€¼æ–¹å¼æ˜¯ cv.THRESH_BINARYï¼Œç”±äºåŸå›¾åƒç´ &gt;0,ç»“æœå°±æ˜¯äºŒå€¼åŒ–å›¾å…¨ç™½è‰²# cv.THRESH_OTSUï¼šæ˜¯æœ€å¤§é—´å·®æ³•ï¼ŒæŒ‰å›¾åƒç°åº¦ç‰¹æ€§å°†å›¾åƒåˆ†ä¸ºå‰æ™¯å’ŒèƒŒæ™¯ä¸¤éƒ¨åˆ†ret,binaryImg = cv.threshold(grayImg,0,255,cv.THRESH_BINARY|cv.THRESH_OTSU)cv.imshow(&#x27;binaryImg&#x27;,binaryImg)# 3.findContours è½®å»“æå–# cv.RETR_EXTERNAL è·å–å¤–éƒ¨è½®å»“ ï¼› cv.CHAIN_APPROX_SIMPLE cloneImage,contours,heriachy= cv.findContours(binaryImg,cv.RETR_EXTERNAL,cv.CHAIN_APPROX_SIMPLE)# 4. drawContours ç»˜å‡ºè½®å»“for i,contour in enumerate(contours): # æ³¨æ„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¼ é€’æ‰€æœ‰è½®å»“ï¼ cv.drawContours(image,contours,i,(0,0,255),-1) print(i)cv.imshow(&#x27;detect contours&#x27;,image)cv.waitKey(0) å®ä¾‹2ï¼šå¯»æ‰¾å›¾åƒè½®å»“ï¼ˆé€šè¿‡cannyè·å–äºŒå€¼å›¾åƒï¼‰ 123456789101112131415161718192021222324# 35.è½®å»“å‘ç°ï¼ˆé€šè¿‡cannyè·å–äºŒå€¼å›¾åƒï¼‰image = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\circles.jpg&quot;)cv.imshow(&#x27;origin&#x27;,image)# 0.é«˜æ–¯æ»¤æ³¢å›¾åƒå‡å°‘å™ªå£°GaussianImg = cv.GaussianBlur(image,(3,3),0)# 1.è½¬æ¢ä¸ºç°åº¦å›¾åƒgrayImg = cv.cvtColor(GaussianImg,cv.COLOR_BGR2GRAY)# 2.canny è·å–äºŒå€¼å›¾åƒbinaryImg = cv.Canny(grayImg,50,150)cv.imshow(&#x27;binaryImg&#x27;,binaryImg)# 3.findContours è½®å»“æå–cloneImage,contours,heriachy= cv.findContours(binaryImg,cv.RETR_EXTERNAL,cv.CHAIN_APPROX_SIMPLE)# 4. drawContours ç»˜å‡ºè½®å»“for i,contour in enumerate(contours): cv.drawContours(image,contours,i,(0,0,255),-1)cv.imshow(&#x27;detect contours&#x27;,image)cv.waitKey(0) 2.9 å¯¹è±¡æµ‹é‡ è¿™éƒ¨åˆ†å¯¹è±¡æµ‹é‡ä¸»è¦åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼š åŸºäºå‰2.8 èŠ‚ å‘ç°è½®å»“ åå¯¹è½®å»“è¿›è¡Œ è®¡ç®—å¼§é•¿å’Œé¢ç§¯ å¯¹å‘ç°çš„è½®å»“è¿›è¡Œå¤šè¾¹å½¢æ‹Ÿåˆ 2.9.1 é¢ç§¯&amp;å¤šè¾¹å½¢æ‹Ÿåˆâ€¦ åŸç† å¾…è¡¥å…… API cv.contourArea(contour) ï¼šè·å–æ¯ä¸ªè½®å»“é¢ç§¯ cv.boundingRect(contour) ï¼šè·å–è½®å»“çš„å¤–æ¥çŸ©å½¢ cv.moments(contour) ï¼šæ±‚å–è½®å»“çš„å‡ ä½•è· cv.arcLength(contour,True) ï¼šæ±‚å–è½®å»“çš„å‘¨é•¿ï¼ŒæŒ‡å®šé—­åˆ è¿‡ç¨‹æ€»ç»“ è·å–ç°åº¦å›¾åƒï¼šcvtColor äºŒå€¼åŒ–å›¾åƒï¼šthreshold æˆ– canny å‘ç°è½®å»“ï¼šfindContours è®¡ç®—é¢ç§¯ / å‘¨é•¿/å¤šè¾¹å½¢æ‹Ÿåˆ ç­‰ å®ä¾‹ï¼šè·å–å›¾åƒé¢ç§¯ã€ç»˜å‡ºå¤–æ¥çŸ©å½¢æ¡†ã€æ ¹æ®å‡ ä½•è·è®¡ç®—è½®å»“ä¸­å¿ƒï¼ˆä¸æ˜ç™½åŸç†ï¼‰ 12345678910111213141516171819202122232425262728293031323334353637383940414243# 36.å¯¹è±¡æµ‹é‡# è®¡ç®—é¢ç§¯ã€ç»˜å‡ºå¤–æ¥çŸ©å½¢ã€æ ¹æ®å‡ ä½•è·è®¡ç®—è½®å»“ä¸­å¿ƒï¼ˆä¸æ˜ç™½ï¼‰image = cv.imread(r&quot;C:\\\\Users\\\\86151\\\\Pictures\\\\circles.jpg&quot;)cv.imshow(&#x27;origin&#x27;,image)# 1.è½¬æ¢ä¸ºç°åº¦å›¾åƒgrayImg = cv.cvtColor(image,cv.COLOR_BGR2GRAY)# 2.threshold è·å–äºŒå€¼å›¾åƒret,binaryImg = cv.threshold(grayImg,0,255,cv.THRESH_OTSU)cv.imshow(&#x27;binaryImg&#x27;,binaryImg)# 3.å‘ç°è½®å»“cloneImage,contours,heriachy= cv.findContours(binaryImg,cv.RETR_EXTERNAL,cv.CHAIN_APPROX_SIMPLE)# 4.è®¡ç®—è½®å»“é¢ç§¯ã€å¤–æ¥çŸ©å½¢ã€æ±‚ä¸­å¿ƒç‚¹# debugï¼šåœ¨äºŒå€¼å›¾åƒåŒ–æ²¡ååº”ï¼Ÿfor i,contour in enumerate(contours): # è®¡ç®—è½®å»“é¢ç§¯ area = cv.contourArea(contour) # print(area) # ç»˜åˆ¶å¤–æ¥çŸ©å½¢ x,y,w,h = cv.boundingRect(contour) cv.rectangle(image,(x,y),(x+w,y+h),(0,0,255),1) # æ ¹æ®å‡ ä½•è·è·å–ä¸­å¿ƒç‚¹å¹¶ç»˜åˆ¶ m = cv.moments(contour) # è·å–å‡ ä½•è· if m[&#x27;m00&#x27;] == 0: # æœ‰å¯èƒ½å‡ºç° m[&#x27;m00&#x27;] == 0 continue else: cx = m[&#x27;m10&#x27;] / m[&#x27;m00&#x27;] # ä¸­å¿ƒx cy = m[&#x27;m01&#x27;] / m[&#x27;m00&#x27;] # ä¸­å¿ƒy cv.circle(image,(np.int(cx),np.int(cy)),1,(0,255,0),-1) # æ‹Ÿåˆå¤šè¾¹å½¢ # 4æ˜¯ä¸é˜ˆå€¼çš„é—´éš”å¤§å°ï¼Œè¶Šå°è¶Šæ˜“æ‰¾å‡ºï¼ŒTrueæ˜¯æ˜¯å¦æ‰¾é—­åˆå›¾åƒ # è¿”å›æ‹Ÿåˆæ›²çº¿ approxCurve = cv.approxPolyDP(contour, 4, True) # å¦‚æœæ‹Ÿåˆæ›²çº¿çš„è¾¹æ•°å¤§äº4åˆ™ç»˜å‡ºï¼ˆä¸‰è§’å½¢ã€å››è¾¹å½¢ç­‰&lt;=4å°±ä¸ä¼šç»˜å‡ºï¼‰ if approxCurve.shape[0] &gt; 4: cv.drawContours(image, contours, i, (255, 0, 0), 2) cv.imshow(&#x27;draw&#x27;,image)cv.waitKey(0) 2.10 å›¾åƒå½¢æ€å­¦"}],"posts":[{"title":"C++ä»é›¶å¼€å§‹ï¼ˆåäºŒï¼‰ï¼šLinuxç³»ç»Ÿç¼–ç¨‹å…¥é—¨","slug":"C++ä»é›¶å¼€å§‹ï¼ˆåäºŒï¼‰ï¼šLinuxç³»ç»Ÿç¼–ç¨‹å…¥é—¨","date":"2022-04-03T05:45:34.660Z","updated":"2022-06-16T14:09:21.171Z","comments":true,"path":"p/45495/","link":"","permalink":"https://hwh.zone/p/45495/","excerpt":"","text":"ğŸŒŸã€ŠC++ä»é›¶å¼€å§‹ã€‹ ç³»åˆ—ï¼Œæ¯•ä¸šè®ºæ–‡åˆç¨¿å†™å®Œä¸‰ä¸ªæœˆè¿‡å»ï¼Œç»ˆäºåˆå¼€å§‹æ›´æ–°äº†â€¦ğŸ¥— C++ä»é›¶å¼€å§‹https://hwh.zone/p/62712 Linuxç³»ç»Ÿç¼–ç¨‹ä½œä¸ºã€ŠC++ä»é›¶å¼€å§‹ã€‹ä¸‰éƒ¨æ›²ä¹‹ä¸€ï¼Œè‡ªæœ‰å…¶æå…¶é‡è¦çš„åœ°ä½ã€‚ å¦‚æœå°†Linuxæ¯”ä½œä¸ºä¸€å°æ€§èƒ½å‡ºä¼—çš„è·‘è½¦ï¼Œæˆ‘ä»¬ä¸€å®šä¸ä¼šåªæ»¡è¶³äºé©¾é©¶å®ƒä¸Šä¸‹ç­ï¼Œåªä¼šæŒ‚æŒ¡ã€è¸©æ²¹é—¨å’Œæ§åˆ¶æ–¹å‘ä¹‹ç±»çš„åŸºæœ¬æ“ä½œã€‚æˆ‘ä»¬æƒ³è¦æ›´åŠ äº†è§£å®ƒï¼ŒæŒ–æ˜æ›´å¤šçš„æ½œèƒ½ã€‚ å­¦ä¹ ç³»ç»Ÿç¼–ç¨‹ä¾¿æ˜¯è®©ä½ åšåˆ°è¿™ä¸€ç‚¹ã€‚ Linuxç³»ç»Ÿå†…å®¹çº·ç¹å¤æ‚ï¼Œåœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ã€ŠLinuxç³»ç»Ÿç¼–ç¨‹æ‰‹å†Œã€‹ä½¿æˆ‘å—ç›Šè‰¯å¤šã€‚åœ¨æœ¬éƒ¨æ›²ä¸­ï¼Œæˆ‘å°†å°½é‡ç”¨ç®€æ´çš„è¯­è¨€è¿›è¡Œæ€»ç»“å’Œæ‰©å±•ã€‚ å¥½äº†ï¼Œè½»æ¾ä¸€ç‚¹ï¼Œè®©æˆ‘ä»¬å…ˆä»Linuxçš„å‰èº«â€”â€”UNIXå†å²è¯´èµ·å§ã€‚ UNIXå†å² UNIXå’ŒCç®€å² 1969å¹´ï¼Œbellå®éªŒå®¤ï¼ˆéš¶å±AT&amp;Tç”µè¯å…¬å¸ï¼‰ï¼ŒKen Thompsonï¼Œå¼€å‘å‡ºäº†é¦–ä¸ª UNIX ç³»ç»Ÿã€‚ UNIX æ˜¯MULTICSï¼ˆå¤šä¿¡æ¯åŠè®¡ç®—æœåŠ¡ï¼ŒMultiplexed Information and Computing Serviceï¼‰ä¸€è¯çš„åŒå…³è¯­ã€‚ 1970å¹´ï¼ŒAT&amp;T çš„å·¥ç¨‹å¸ˆï¼Œåœ¨Digital PDP-11 å°å‹æœºä»¥æ±‡ç¼–è¯­è¨€é‡å†™äº†UNIXã€‚ 1971å¹´ï¼ŒThompson åœ¨ bell å®éªŒå®¤çš„åŒäº‹ï¼ŒDennis Ritchieè®¾è®¡å®ç°äº†Cè¯­è¨€ã€‚ C è¯­è¨€ç”±äºå…¶é«˜æ•ˆã€çµæ´»ã€åŠŸèƒ½ä¸°å¯Œã€è¡¨è¾¾åŠ›å¼ºå’Œè¾ƒå¥½çš„å¯ç§»æ¤æ€§ç­‰ç‰¹ç‚¹ï¼Œè¿…é€Ÿé£é¡èµ·æ¥ã€‚ 1973 å¹´ï¼ŒUNIX å·²ç»è¢«ç§»æ¤åˆ°äº† PDP-11 å°å‹æœºä¸Šï¼Œå¹¶ä»¥ C è¯­è¨€å¯¹UNIXè¿›è¡Œäº†é‡å†™ã€‚ 1977å¹´ï¼Œå› ä¸ºæ³•å¾‹ç¦æ­¢ AT&amp;Té”€å”® UNIXï¼ŒAT&amp;Tå…¬å¸å…è®¸é«˜æ ¡ä½¿ç”¨UNIXï¼Œæå¤§ä¿ƒè¿›äº†UNIXçš„å‘å±•ã€‚ç¬¬ä¸ƒç‰ˆ UNIX å‘å¸ƒçš„é‡è¦æ„ä¹‰è¿˜åœ¨äºï¼Œä»è¯¥ç‰ˆæœ¬èµ·ï¼ŒUNIX åˆ†è£‚ä¸ºäº†ä¸¤å¤§åˆ†æ”¯ï¼šBSD å’Œ System Vã€‚ 1979å¹´ï¼Œä¼¯å…‹åˆ©å‘å¸ƒé¦–ä¸ªå®Œæ•´çš„ï¼Œå±äºè‡ªå·± UNIX å‘å¸ƒç‰ˆ 3BSDï¼ˆä¼¯å…‹åˆ©è½¯ä»¶å‘å¸ƒï¼ŒBerkeley Software Distributionï¼‰è¯ç”Ÿã€‚ åœ¨æ­¤æœŸé—´ï¼Œéšç€ AT&amp;T ä¸å†å¯¹ç”µä¿¡å¸‚åœºå½¢æˆå„æ–­ï¼Œè¯¥å…¬å¸è¢«è·å‡†é”€å”® UNIXã€‚è¿™ä¹Ÿå°±å‚¬ç”Ÿå‡ºäº†å¦ä¸€ç§ UNIX çš„å˜ç§â€”System Vï¼Œæ—¥åï¼Œå®ƒä¹Ÿæˆä¸ºäº†æŸäº›å•†ä¸š UNIX å®ç°çš„åŸºçŸ³ã€‚ 1983 å¹´ï¼ŒåŠ å·å¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡çš„è®¡ç®—æœºç³»ç»Ÿç ”ç©¶ç»„ï¼ˆComputer Systems Research Groupï¼‰å‘å¸ƒäº† 4.2BSDã€‚ è¯¥ç‰ˆæœ¬çš„å‘å¸ƒæ„ä¹‰æ·±è¿œï¼Œå› ä¸ºå…¶åŒ…å«äº†å®Œæ•´çš„ TCP/IP å®ç°ï¼Œå…¶ä¸­åŒ…æ‹¬å¥—æ¥å­—åº”ç”¨ç¼–ç¨‹æ¥å£ï¼ˆAPIï¼‰ä»¥åŠå„ç§ç½‘ç»œå·¥å…·ã€‚ Linuxç®€å² åœ¨å½“æ—¶UNIXæ—¶ä»£ï¼Œè®¡ç®—æœºè½¯ä»¶çš„æ¶ˆè´¹è€…ä¸ä½†æ— æƒé˜…è¯»è‡ªå·±æ‰€è´­è½¯ä»¶çš„æºç ï¼Œè€Œä¸”è¿˜ä¸èƒ½å¤åˆ¶ã€æ›´æ”¹åŠé‡æ–°å‘è¡Œæ‰€è´­è½¯ä»¶ã€‚Stallmanè®¤ä¸ºï¼Œè¿™åªä¼šé€ æˆç¨‹åºå‘˜ä¹‹é—´å‹¾å¿ƒæ–—è§’ã€æ•å¸šè‡ªççš„å±€é¢ï¼Œæ— æ³•å®ç°å·¥ä½œååŒå’Œæˆæœå…±äº«ã€‚ 1984å¹´ï¼ŒMIT çš„ç¨‹åºå‘˜Richard Stallmanï¼Œå‘èµ·äº† GNU é¡¹ç›®ï¼ˆâ€œGNUâ€™s not UNIXâ€çš„é€’å½’ç¼©å†™å½¢å¼ï¼‰ã€‚ GNU é¡¹ç›®ç”±æ­¤åˆ¶å®šäº† GNU GPLåè®®ï¼šä»¥ GPL è®¸å¯åè®®å‘å¸ƒçš„è½¯ä»¶ä¸ä½†å¿…é¡»å¼€æ”¾æºç ï¼Œè€Œä¸”åº”èƒ½åœ¨ GPL æ¡æ¬¾çš„çº¦æŸä¸‹è‡ªç”±å¯¹å…¶è¿›è¡Œé‡æ–°å‘å¸ƒã€‚å¯ä»¥ä¸å—é™åˆ¶çš„ä¿®æ”¹ä»¥ GPL è®¸å¯åè®®å‘å¸ƒçš„è½¯ä»¶ï¼Œä½†ä»»ä½•ç»ä¿®æ”¹åå‘å¸ƒçš„è½¯ä»¶ä»éœ€éµå®ˆ GPL æ¡æ¬¾ï¼› GNU é¡¹ç›®è¿˜å¼€å‘å‡ºäº†Emacs æ–‡æœ¬ç¼–è¾‘å™¨ã€GCCã€bash shell ä»¥åŠ glibcï¼ˆGNU C è¯­è¨€åº“ï¼‰ï¼Œåªè¦å†æ‹¥æœ‰ä¸€ä¸ªèƒ½å¤Ÿæœ‰æ•ˆè¿ä½œçš„å†…æ ¸ï¼Œå°±èƒ½ä½¿ GNU é¡¹ç›®å¼€å‘å‡ºçš„UNIX ç³»ç»Ÿâ€œåŠŸå¾·åœ†æ»¡â€ã€‚ 1991 å¹´ï¼ŒLinus Torvaldsï¼Œå¼€å‘å‡ºUNIXå†…æ ¸â€œé›å½¢â€ï¼Œå¯ä»¥ç¼–è¯‘å¹¶è¿è¡Œå„ç§ GNU ç¨‹åºã€‚ ä¸ºäº†ä¼ æ‰¿ UNIX å†å²æ‚ ä¹…çš„å…‰è£ä¼ ç»Ÿï¼Œæ€»ä»¥å­—æ¯â€œXâ€ç»“å°¾ï¼Œäººä»¬æœ€ç»ˆå°†è¿™ä¸€å†…æ ¸å‘½åä¸º Linuxã€‚ åº” Torvalds ä¹‹é‚€ï¼Œè®¸å¤šå…¶ä»–ç¨‹åºå‘˜ä¹ŸåŠ å…¥åˆ°äº†æ”¹è¿›å†…æ ¸çš„è¡Œåˆ—ä¸­ã€‚éšç€æ—¶å…‰çš„æµé€ï¼Œåœ¨ä¸€å¹²ç¨‹åºå‘˜çš„ä¸æ‡ˆåŠªåŠ›ä¸‹ï¼ŒLinux é€æ¸å‘å±•å£®å¤§ï¼Œå¹¶è¢«ç§»æ¤åˆ°äº†å¤šç§ç¡¬ä»¶æ¶æ„ä¹‹ä¸Šã€‚ æ ‡å‡†åŒ–è¿‡ç¨‹ 20 ä¸–çºª 80 å¹´ä»£æœ«ï¼ŒUNIX å’Œ C è¯­è¨€çš„å®ç°â€œç™¾èŠ±é½æ”¾â€ï¼Œæ‰€å¼•å‘çš„å¯ç§»æ¤æ€§é—®é¢˜è¿«ä½¿äººä»¬å¼€å±•é’ˆå¯¹ä»¥ä¸Šä¸¤è€…çš„æ ‡å‡†åŒ–å·¥ä½œã€‚ C è¯­è¨€å’Œ UNIX ç³»ç»Ÿçš„æ ‡å‡†åŒ–è¿›ç¨‹ä¹Ÿæ˜¾å¾—æ„ˆå‘é‡è¦ã€‚ Cæ ‡å‡† C è¯­è¨€æ ‡å‡†ç‹¬ç«‹äºä»»ä½•æ“ä½œç³»ç»Ÿï¼Œæ¢è¨€ä¹‹ï¼ŒC è¯­è¨€å¹¶ä¸ä¾é™„äº UNIX ç³»ç»Ÿã€‚ 1989 å¹´ï¼Œç¾å›½å›½å®¶æ ‡å‡†å§”å‘˜ä¼šANSIçš„C è¯­è¨€æ ‡å‡†ï¼ˆC89æ ‡å‡†ï¼‰è·æ‰¹ã€‚ è¿™ä»½æ ‡å‡†åœ¨å®šä¹‰ C è¯­è¨€è¯­æ³•å’Œè¯­ä¹‰çš„åŒæ—¶ï¼Œè¿˜å¯¹æ ‡å‡† C è¯­è¨€åº“æ“ä½œè¿›è¡Œäº†æè¿°ï¼Œè¿™åŒ…æ‹¬ stdio å‡½æ•°ã€å­—ç¬¦ä¸²å¤„ç†å‡½æ•°ã€æ•°å­¦å‡½æ•°ã€å„ç§å¤´æ–‡ä»¶ç­‰ç­‰ã€‚ éšä¹‹äº 1990 å¹´ï¼ŒC89æ ‡å‡†è¢«å›½é™…æ ‡å‡†åŒ–ç»„ç»‡ISOé‡‡çº³ï¼› 1999å¹´ï¼ŒISO å¯¹ C è¯­è¨€æ ‡å‡†çš„ä¿®è®¢ç‰ˆï¼ŒC99æ ‡å‡†æ­£å¼è¢«æ‰¹å‡†ã€‚ å¯¹ C è¯­è¨€åŠå…¶æ ‡å‡†åº“çš„ä¸€ç³»åˆ—ä¿®æ”¹ï¼Œè¯¸å¦‚ï¼Œå¢åŠ äº† long long å’Œå¸ƒå°”æ•°æ®ç±»å‹ã€C++é£æ ¼çš„æ³¨é‡Šï¼ˆ//ï¼‰ã€å—é™æŒ‡é’ˆä»¥åŠå¯å˜é•¿æ•°ç»„ç­‰ã€‚ æ“ä½œç³»ç»Ÿæ¥å£ 1989å¹´ï¼Œæ“ä½œç³»ç»Ÿæ ‡å‡†åŒ–çš„â€œç¬¬ä¸€æ¬¡åƒèƒèŸ¹â€ä¾¿å‚¬ç”Ÿå‡ºäº† POSIX.1ã€‚ æœ¯è¯­â€œPOSIXï¼ˆå¯ç§»æ¤æ“ä½œç³»ç»Ÿ Portable Operating System Interface çš„ç¼©å†™ï¼‰â€ï¼› ç¬¦åˆ POSIX.1 æ ‡å‡†çš„æ“ä½œç³»ç»Ÿåº”å‘ç¨‹åºæä¾›è°ƒç”¨å„é¡¹æœåŠ¡çš„ APIï¼ŒPOSIX.1 æ–‡æ¡£å¯¹æ­¤ä½œäº†è§„èŒƒã€‚å‡¡æ˜¯æä¾›äº†ä¸Šè¿° API çš„æ“ä½œç³»ç»Ÿéƒ½å¯è¢«è®¤å®šä¸ºç¬¦åˆ POSIX.1 æ ‡å‡†ã€‚ 1988 å¹´å’Œ 1990 å¹´ï¼ŒIEEE å’Œ ISO å…ˆåå°† POSIX.1 é‡‡çº³ä¸ºæ ‡å‡†ã€‚ 2001 å¹´ï¼ŒPOSIX 1003.1-2001 æ ‡å‡†é¢å¸ƒï¼Œå–ä»£äº† SUSv2ã€POSIX.1ã€POSIX.2 ä»¥åŠå¤§æ‰¹çš„æ—©æœŸ POSIX æ ‡å‡†ã€‚ 2008 å¹´ï¼Œäººä»¬ç»§ç»­å®Œæˆå¯¹POSIXæ ‡å‡†å’Œ SUS è§„èŒƒçš„ä¿®è®¢ï¼Œäºæ˜¯ï¼ŒåˆäºŒä¸ºä¸€çš„ POSIX 1003.1-2008 å’Œ SUSv4 æ ‡å‡†æµ®å‡ºæ°´é¢ã€‚ å¯¹Linuxå‘å±•å†å²æœ‰äº†ç®€å•äº†è§£åï¼Œæˆ‘ä»¬å†æ¥äº†è§£Linuxç³»ç»Ÿç¼–ç¨‹çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µå§ã€‚ ä¸€ã€åŸºæœ¬æ¦‚å¿µ åœ¨æœ¬ç« ä¸­ï¼Œä¸»è¦å°†ä»‹ç»Linux&amp;ç³»ç»Ÿç¼–ç¨‹çš„åŸºæœ¬æ¦‚å¿µï¼Œä»¥æœŸæ›´å¥½åœ°ç†è§£åç»­ç« èŠ‚ã€‚ 1.1 LinuxåŸºæœ¬æ¦‚å¿µ 1.1.1 æ“ä½œç³»ç»Ÿä¸å†…æ ¸ æ“åœºç³»ç»Ÿä¸å†…æ ¸è¡¨ç°ä¸ºåŒ…å«å…³ç³»ã€‚ æ“ä½œç³»ç»Ÿï¼ŒæŒ‡å®Œæ•´çš„è½¯ä»¶åŒ…ï¼Œè¿™åŒ…æ‹¬ç”¨æ¥ç®¡ç†è®¡ç®—æœºèµ„æºï¼ˆå³CPUã€RAMå’Œè®¾å¤‡ï¼‰çš„æ ¸å¿ƒå±‚è½¯ä»¶ï¼Œä»¥åŠé™„å¸¦çš„æ‰€æœ‰æ ‡å‡†è½¯ä»¶å·¥å…·ï¼Œè¯¸å¦‚å‘½ä»¤è¡Œè§£é‡Šå™¨ã€å›¾å½¢ç”¨æˆ·ç•Œé¢ã€æ–‡æœ¬ç¼–è¾‘å™¨ç­‰ï¼› å†…æ ¸ï¼Œåˆ™ç‰¹æŒ‡ç®¡ç†èµ„æºçš„æ ¸å¿ƒå±‚è½¯ä»¶ã€‚ å†…æ ¸æœ‰ä»€ä¹ˆç”¨ï¼Ÿ å†…æ ¸æ‰€æä¾›çš„æ ¸å¿ƒå±‚è½¯ä»¶ï¼Œä¸€èˆ¬æ‰§è¡Œä»¥ä¸‹ä¸»è¦ä»»åŠ¡ï¼š è¿›ç¨‹è°ƒåº¦ï¼Œå³ç”¨äºæ§åˆ¶è¿›ç¨‹å¯¹CPUä½¿ç”¨ã€‚ CPUåœ¨ä¸€æ—¶é—´æ®µåªèƒ½æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œè€ŒLinuxå±äºæŠ¢å å¼å¤šä»»åŠ¡æ“ä½œç³»ç»Ÿï¼Œè¿™æ„å‘³ç€å¤šä¸ªè¿›ç¨‹ï¼ˆä¸€ä¸ªè¿è¡Œä¸­çš„ç¨‹åºæˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œè¿›ç¨‹â€ï¼‰å¯åŒæ—¶é©»ç•™åœ¨å†…å­˜ã€‚åˆ†é…CPUä½•æ—¶ç»™å“ªäº›è¿›ç¨‹ä½¿ç”¨ï¼Œä»¥åŠæ¯ä¸ªè¿›ç¨‹èƒ½ä½¿ç”¨å¤šé•¿æ—¶é—´ï¼Œéƒ½éœ€è¦å†…æ ¸è¿›è¡Œè¿›ç¨‹è°ƒåº¦ã€‚ è¿›ç¨‹é€šä¿¡ï¼Œç”¨äºå¤šè¿›ç¨‹ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚ å†…å­˜ç®¡ç†ï¼Œè€Œç‰©ç†å†…å­˜ï¼ˆRAMï¼‰ä»ç„¶å±äºæœ‰é™èµ„æºï¼Œå†…æ ¸å¿…é¡»ä»¥å…¬å¹³ã€é«˜æ•ˆåœ°æ–¹å¼åœ¨è¿›ç¨‹é—´å…±äº«è¿™ä¸€èµ„æºã€‚ Linuxé€šå¸¸é‡‡ç”¨è™šæ‹Ÿå†…å­˜ç®¡ç†æœºåˆ¶ï¼Œå®ƒæœ‰ä»¥ä¸‹å¥½å¤„ï¼š å†…å­˜éš”ç¦»ï¼Œè¿›ç¨‹ä¸è¿›ç¨‹ä¹‹é—´&amp;è¿›ç¨‹ä¸å†…æ ¸ä¹‹é—´éš”ç¦»ã€‚å› æ­¤ä¸€ä¸ªè¿›ç¨‹æ— æ³•è¯»å–å…¶å®ƒè¿›ç¨‹æˆ–å†…æ ¸çš„å†…å®¹ã€‚ åªéœ€å°†è¿›ç¨‹ä¸€éƒ¨åˆ†ä¿å­˜åœ¨å†…å­˜ä¸­ã€‚ä¸ä½†é™ä½äº†æ¯ä¸ªè¿›ç¨‹å¯¹å†…å­˜çš„éœ€æ±‚é‡ï¼Œè€Œä¸”è¿˜èƒ½åœ¨ RAM ä¸­åŒæ—¶åŠ è½½æ›´å¤šçš„è¿›ç¨‹ æ–‡ä»¶ç³»ç»Ÿï¼Œå†…æ ¸åœ¨ç£ç›˜ä¹‹ä¸Šæä¾›äº†æ–‡ä»¶ç³»ç»Ÿã€‚ IOè®¾å¤‡è®¿é—®ï¼Œå¦‚é”®ç›˜ã€æ‰“å°æœºç­‰ã€‚ ç½‘ç»œè¿æ¥ï¼Œå†…æ ¸ä»¥ç”¨æˆ·è¿›ç¨‹çš„åä¹‰æ”¶å‘ç½‘ç»œæ¶ˆæ¯ï¼ˆæ•°æ®åŒ…ï¼‰ã€‚ æä¾›ç³»ç»Ÿè°ƒç”¨åº”ç”¨ç¼–ç¨‹æ¥å£ï¼ˆAPIï¼‰ï¼šè¿›ç¨‹å¯åˆ©ç”¨å†…æ ¸å…¥å£ç‚¹ï¼ˆä¹Ÿç§°ä¸ºç³»ç»Ÿè°ƒç”¨ï¼‰è¯·æ±‚å†…æ ¸å»æ‰§è¡Œå„ç§ä»»åŠ¡ã€‚ ä»¥ä¸Šå†…å®¹æ¯ä¸€éƒ¨åˆ†éƒ½å°†åç»­æ‰©å±•å¼€æ¥åˆ†ææ¢è®¨ã€‚ å†…æ ¸æ€å’Œç”¨æˆ·æ€ CPU å¯åœ¨ç”¨æˆ·æ€å’Œæ ¸å¿ƒæ€ä¸¤ç§ä¸åŒçŠ¶æ€è¿è¡Œï¼Œå¯¹åº”åœ°å°†è™šæ‹Ÿå†…å­˜åŒºåŸŸåˆ’åˆ†ï¼ˆæ ‡è®°ï¼‰ä¸ºç”¨æˆ·ç©ºé—´éƒ¨åˆ†æˆ–å†…æ ¸ç©ºé—´éƒ¨åˆ†ã€‚ ç”¨æˆ·æ€ï¼ŒCPU åªèƒ½è®¿é—®è¢«æ ‡è®°ä¸ºç”¨æˆ·ç©ºé—´çš„å†…å­˜ï¼Œæ— æ³•æ‰§è¡Œä¸åˆ©äºç³»ç»Ÿè¿è¡Œçš„æ“ä½œã€‚ æ ¸å¿ƒæ€ï¼ŒCPU æ—¢èƒ½è®¿é—®ç”¨æˆ·ç©ºé—´å†…å­˜ï¼Œä¹Ÿèƒ½è®¿é—®å†…æ ¸ç©ºé—´å†…å­˜ï¼Œä¹Ÿèƒ½æ‰§è¡Œä¸€äº›æ ¸å¿ƒæ“ä½œå¦‚ï¼šæ‰§è¡Œå®•æœºï¼ˆhaltï¼‰æŒ‡ä»¤å»å…³é—­ç³»ç»Ÿï¼Œè®¿é—®å†…å­˜ç®¡ç†ç¡¬ä»¶ç­‰ã€‚ è¿™æ ·åšä¿è¯äº†ç³»ç»Ÿçš„å®‰å…¨å’Œæ•ˆç‡ã€‚ 1.1.2 shell shell ä¹Ÿç§°ä¹‹ä¸ºå‘½ä»¤è§£é‡Šå™¨ï¼Œä¸»è¦ç”¨äºè¯»å–ç”¨æˆ·è¾“å…¥çš„å‘½ä»¤ï¼Œå¹¶æ‰§è¡Œç›¸åº”çš„ç¨‹åºä»¥å“åº”å‘½ä»¤ã€‚ çºµè§‚ UNIX å†å²ï¼Œå‡ºç°è¿‡ä»¥ä¸‹å‡ ç§é‡è¦çš„ shellï¼ˆæŒ‰æ—¶é—´é¡ºåºï¼‰ï¼š Bourne shell (sh)ï¼Œå†å²æœ€ä¸ºæ‚ ä¹…ï¼Œç”±Steve Boumeç¼–å†™ã€‚Bourne shell åŒ…å«äº†åœ¨å…¶ä»– shell ä¸­å¸¸è§çš„è®¸å¤šç‰¹æ€§ï¼ŒI/O é‡å®šå‘ã€ç®¡é“ã€æ–‡ä»¶åç”Ÿæˆï¼ˆé€šé…ç¬¦ï¼‰ã€å˜é‡ã€ç¯å¢ƒå˜é‡å¤„ç†ã€å‘½ä»¤æ›¿æ¢ã€åå°å‘½ä»¤æ‰§è¡Œç­‰ã€‚ C shellï¼ˆcshï¼‰ï¼Œç”± Bill Joyç¼–å†™è€Œæˆï¼Œæ§åˆ¶è¯­æ³•ä¸Cè¯­è¨€æœ‰å¾ˆå¤šç›¸ä¼¼ä¹‹å¤„è€Œå› æ­¤å¾—åã€‚C shell ä¸ Bourne shell å¹¶ä¸å…¼å®¹ï¼Œä¸”åŒ…å«ä¸€äº›æä¸ºå®ç”¨çš„ç‰¹æ€§ï¼Œå¦‚å‘½ä»¤å†å²è®°å½•ï¼Œå‘½ä»¤ç¼–è¾‘ç­‰ã€‚ Korn shellï¼ˆkshï¼‰ï¼Œç”±David Korn ç¼–å†™ï¼Œä¸ä½†å…¼å®¹äº†shè¿˜å¸æ”¶äº†cshç›¸å…³ç‰¹æ€§ã€‚ Bourne again shellï¼ˆbashï¼‰ï¼Œè¿™æ¬¾ shell æ˜¯ GNU é¡¹ç›®å¯¹ Bourne shell çš„é‡æ–°å®ç°ï¼Œæä¾›äº†ä¸ C shell å’Œ Korn shel æ‰€ç±»ä¼¼çš„äº¤äº’å¼ç‰¹æ€§ã€‚ ä¸è¿‡ï¼Œè®¾è®¡ shell çš„ç›®çš„ä¸ä»…ä»…æ˜¯ç”¨äºäººæœºäº¤äº’ï¼Œå¯¹ shell è„šæœ¬ï¼ˆåŒ…å« shell å‘½ä»¤çš„æ–‡æœ¬æ–‡ä»¶ï¼‰è¿›è¡Œè§£é‡Šä¹Ÿæ˜¯å…¶ç”¨é€”ä¹‹ä¸€ã€‚ä¸ºå®ç°è¿™ä¸€ç›®çš„ï¼Œæ¯æ¬¾ shell éƒ½å†…ç½®æœ‰è®¸å¤šé€šå¸¸ä¸ç¼–ç¨‹è¯­è¨€ç›¸å…³çš„åŠŸèƒ½ï¼Œå…¶ä¸­åŒ…æ‹¬å˜é‡ã€å¾ªç¯å’Œæ¡ä»¶è¯­å¥ã€I/O å‘½ä»¤ä»¥åŠå‡½æ•°ç­‰ã€‚ 1.1.3 ç”¨æˆ·å’Œç»„ ç³»ç»Ÿä¼šå¯¹æ¯ä¸ªç”¨æˆ·çš„èº«ä»½åšå”¯ä¸€æ ‡è¯†ï¼Œç”¨æˆ·å¯éš¶å±äºå¤šä¸ªç»„ã€‚ ç”¨æˆ· ç³»ç»Ÿçš„æ¯ä¸ªç”¨æˆ·éƒ½æ‹¥æœ‰å”¯ä¸€çš„ç™»å½•åï¼ˆç”¨æˆ·åï¼‰å’Œä¸ä¹‹ç›¸å¯¹åº”çš„æ•´æ•°å‹ç”¨æˆ·IDï¼ˆUIDï¼‰ã€‚ åœ¨ç³»ç»Ÿæ–‡ä»¶/etc/passwd æ˜¾ç¤ºäº†æ›´å…·ä½“çš„ä¿¡æ¯ã€‚ 123456[root@roy-cpp cpp-learn]# cat /etc/passwdroot:x:0:0:root:/root:/bin/bashbin:x:1:1:bin:/bin:/sbin/nologindaemon:x:2:2:daemon:/sbin:/sbin/nologinadm:x:3:4:adm:/var/adm:/sbin/nologin... ä»¥ä¸Š7ä¸ªå­—æ®µåˆ†åˆ«å¯¹åº”ï¼šç”¨æˆ·å:å£ä»¤:ç”¨æˆ·æ ‡è¯†å·:ç»„æ ‡è¯†å·:æ³¨é‡Šæ€§æè¿°:ä¸»ç›®å½•:ç™»å½•Shell ã€‚ä¸‹é¢å¯¹å…¶ä¸­éƒ¨åˆ†å­—æ®µè¿›è¡Œè§£é‡Šï¼š å£ä»¤ï¼Œä¸€äº›ç³»ç»Ÿä¸­ï¼Œå­˜æ”¾ç€åŠ å¯†åçš„ç”¨æˆ·å£ä»¤å­—ï¼Œä½†è¿™å­˜åœ¨å®‰å…¨éšæ‚£ã€‚å› æ­¤ï¼Œåœ¨Linuxä½¿ç”¨äº†shadowæŠ€æœ¯ï¼Œä½¿ç”¨xæˆ–*è¿›è¡Œæ›¿ä»£ï¼Œè€ŒæŠŠçœŸæ­£çš„åŠ å¯†åçš„ç”¨æˆ·å£ä»¤å­—å­˜æ”¾åˆ°/etc/shadowæ–‡ä»¶ä¸­ã€‚ ç”¨æˆ·æ ‡å¿—å·ï¼Œå³UIDï¼Œä¸ºä¸€ä¸ªæ•´æ•°ï¼ŒèŒƒå›´ä¸º0~65535ã€‚0æ˜¯è¶…çº§ç”¨æˆ·rootçš„æ ‡è¯†å·ï¼Œ1-99ç”±ç³»ç»Ÿä¿ç•™ï¼Œä½œä¸ºç®¡ç†è´¦å·ï¼Œæ™®é€šç”¨æˆ·çš„æ ‡è¯†å·ä»100å¼€å§‹ã€‚ ç»„æ ‡å¿—å·ï¼Œå³GIDï¼Œè®°å½•ç”¨æˆ·æ‰€å±çš„ç”¨æˆ·ç»„ï¼Œå¯¹åº”ç€/etc/groupæ–‡ä»¶ä¸­çš„ä¸€æ¡è®°å½•ã€‚ æ³¨é‡Šæ€§æè¿°ï¼Œè®°å½•ç€ç”¨æˆ·çš„ä¸€äº›ä¸ªäººæƒ…å†µï¼Œä½†å¹¶æ²¡æœ‰ä»€ä¹ˆå®é™…çš„ç”¨é€”ã€‚ ä¸»ç›®å½•ï¼Œç”¨æˆ·åœ¨ç™»å½•åˆ°ç³»ç»Ÿä¹‹åæ‰€å¤„çš„ç›®å½•ï¼Œå„ç”¨æˆ·å¯¹è‡ªå·±çš„ä¸»ç›®å½•æœ‰å®Œæ•´çš„è¯»ï¼ˆrï¼‰ã€å†™ï¼ˆwï¼‰ã€æ‰§è¡Œï¼ˆxï¼‰æƒé™ã€‚ ç™»é™†shellï¼Œç”¨æˆ·ç™»å½•åˆ°ç³»ç»Ÿåè¿è¡Œçš„å‘½ä»¤è§£é‡Šå™¨ï¼Œå³shellã€‚ åœ¨/etc/passwdæˆ‘ä»¬ä¹Ÿæ³¨æ„åˆ°ï¼Œé™¤äº†æˆ‘ä»¬ç†ŸçŸ¥çš„rootè´¦æˆ·ï¼Œè¿˜æœ‰ä¸€äº›å…¶å®ƒç³»ç»Ÿè´¦æˆ·ï¼šbinï¼ˆæ‹¥æœ‰å¯æ‰§è¡Œçš„ç”¨æˆ·å‘½ä»¤æ–‡ä»¶ï¼‰ã€sysï¼ˆæ‹¥æœ‰ç³»ç»Ÿæ–‡ä»¶ï¼‰ã€admï¼ˆæ‹¥æœ‰å¸æˆ·æ–‡ä»¶ï¼‰ã€‚ ç»„ å‡ºäºç®¡ç†ç›®çš„ï¼Œæ¯”å¦‚ä¸ºäº†æ§åˆ¶å¯¹æ–‡ä»¶å’Œå…¶ä»–èµ„æºçš„è®¿é—®ï¼Œå°†å¤šä¸ªç”¨æˆ·åˆ†ç»„æ˜¯éå¸¸å®ç”¨çš„åšæ³•ã€‚ æ¯ä¸ªç”¨æˆ·ç»„éƒ½å¯¹åº”ç€ç³»ç»Ÿç»„æ–‡ä»¶/etc/group ä¸­çš„ä¸€è¡Œè®°å½•ï¼š 12345[root@roy-cpp cpp-learn]# cat /etc/grouproot:x:0:bin:x:1:daemon:x:2:sys:x:3: ä»¥ä¸Š4ä¸ªå­—æ®µåˆ†åˆ«å¯¹åº”ï¼Œ ç»„å:å£ä»¤:ç»„æ ‡è¯†å·:ç»„å†…ç”¨æˆ·åˆ—è¡¨ã€‚ å…¶ä¸­ç»„å†…ç”¨æˆ·åˆ—è¡¨ï¼Œæ˜¯å±äºè¿™ä¸ªç»„çš„æ‰€æœ‰ç”¨æˆ·çš„åˆ—è¡¨ï¼Œä¸åŒç”¨æˆ·ä¹‹é—´ç”¨é€—å·,åˆ†éš”ã€‚ 1.1.4 ç›®å½•ä¸æ–‡ä»¶ ç›®å½• Linuxç›®å½•å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š å•æ ¹ç›®å½•ç»“æ„ï¼ŒLinuxå†…æ ¸ç»´æŠ¤ä¸€å¥—å•æ ¹ç›®å½•ç»“æ„ï¼Œå­˜æ”¾ç³»ç»Ÿæ‰€æœ‰æ–‡ä»¶ã€‚è¿™å’Œæˆ‘ä»¬ç†ŸçŸ¥Windowsç³»ç»Ÿä¸åŒï¼Œå®ƒçš„æ¯ä¸ªç£ç›˜ï¼ˆå¦‚Cç›˜ï¼‰éƒ½æœ‰å„è‡ªçš„ç›®å½•å±‚çº§ã€‚ ç»å¯¹è·¯å¾„ä¸ç›¸å¯¹è·¯å¾„ã€‚ ç»å¯¹è·¯å¾„ä»¥/å¼€å§‹ï¼Œå¦‚ä¸Šå›¾ä¸­/etc/passwd ï¼› ç›¸å¯¹è·¯å¾„ä¸ä»¥/å¼€å§‹ï¼Œå¦‚ä¸Šå›¾ä¸­ï¼Œåœ¨usrç›®å½•ä¸‹ï¼Œinclude/sys/types.h ã€../home/mtk/.bashrc åˆ†åˆ«å¯å¼•ç”¨æ–‡ä»¶types.hå’Œ.bashrcã€‚ æ–‡ä»¶ Linuxæ–‡ä»¶ä¸»è¦å€¼å¾—å…³æ³¨ä»¥ä¸‹ä¸‰ç‚¹ï¼š æ–‡ä»¶ç±»å‹ï¼Œåœ¨Linuxæ–‡ä»¶ç³»ç»Ÿå†…ï¼Œâ€œä¸€åˆ‡çš†ä¸ºæ–‡ä»¶â€ã€‚è¿™æ„å‘³ç€æ–‡ä»¶ç±»å‹ä¸ä»…åŒ…å«æ™®é€šæ–‡æœ¬æ–‡ä»¶ï¼Œè¿˜åŒ…å«ï¼šè®¾å¤‡ã€ç®¡é“ã€å¥—æ¥å­—ã€ç›®å½•ã€ç¬¦å·é“¾æ¥ç­‰ã€‚ æ–‡ä»¶åï¼Œæ–‡ä»¶åæœ€é•¿å¯è¾¾ 255 ä¸ªå­—ç¬¦ã€‚æ–‡ä»¶åå¯ä»¥åŒ…å«é™¤/å’Œç©º å­—ç¬¦ï¼ˆ\\0ï¼‰å¤–çš„æ‰€æœ‰å­—ç¬¦ã€‚ æ­¤å¤–ï¼Œè¿˜åº”é¿å…ä»¥è¿å­—ç¬¦-ä½œä¸ºæ–‡ä»¶åçš„èµ·å§‹å­—ç¬¦ï¼Œå› ä¸ºä¸€æ—¦åœ¨ shell å‘½ä»¤ä¸­ä½¿ç”¨è¿™ç§æ–‡ä»¶åï¼Œä¼šè¢«è¯¯è®¤ä¸ºå‘½ä»¤è¡Œé€‰é¡¹å¼€å…³ã€‚ æ–‡ä»¶IOæ¨¡å‹ï¼ŒUNIX ç³»ç»Ÿ I/O æ¨¡å‹æœ€ä¸ºæ˜¾è‘—çš„ç‰¹æ€§ä¹‹ä¸€æ˜¯å…¶ I/O é€šç”¨æ€§æ¦‚å¿µã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŒä¸€å¥—ç³»ç»Ÿè°ƒç”¨ï¼ˆopen()ã€read()ã€write()ã€close()ç­‰ï¼‰æ‰€æ‰§è¡Œçš„ I/O æ“ä½œï¼Œå¯æ–½ä¹‹äºæ‰€æœ‰æ–‡ä»¶ç±»å‹ï¼ŒåŒ…æ‹¬è®¾å¤‡æ–‡ä»¶ã€‚ å¦å¤–ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒUNIXç³»ç»Ÿæœ¬è´¨åªæä¾›å­—èŠ‚æµæ–‡ä»¶ï¼Œå› æ­¤æ²¡æœ‰â€œæ–‡ä»¶ç»“æŸç¬¦â€çš„æ¦‚å¿µã€‚UNIXç³»ç»Ÿread()å¦‚ä½•åˆ¤æ–­æ–‡ä»¶ç»“æŸï¼Ÿè¯»å–æ–‡ä»¶æ—¶å¦‚æ— æ•°æ®è¿”å›ï¼Œä¾¿ä¼šè®¤å®šæŠµè¾¾æ–‡ä»¶æœ«å°¾ã€‚ 1.1.5 è¿›ç¨‹ è¿›ç¨‹æ˜¯æ­£åœ¨æ‰§è¡Œçš„ç¨‹åºå®ä¾‹ã€‚ æ‰§è¡Œç¨‹åºæ—¶ï¼Œå†…æ ¸ä¼šå°†ç¨‹åºä»£ç è½½å…¥è™šæ‹Ÿå†…å­˜ï¼Œä¸ºç¨‹åºå˜é‡åˆ†é…ç©ºé—´ï¼Œå»ºç«‹å†…æ ¸è®°è´¦ï¼ˆbookkeepingï¼‰æ•°æ®ç»“æ„ï¼Œä»¥è®°å½•ä¸è¿›ç¨‹æœ‰å…³çš„å„ç§ä¿¡æ¯ï¼ˆæ¯”å¦‚ï¼Œè¿›ç¨‹ IDã€ç”¨æˆ· IDã€ç»„ ID ä»¥åŠç»ˆæ­¢çŠ¶æ€ç­‰ï¼‰ã€‚ è¿›ç¨‹å†…å­˜å¸ƒå±€ ä¸‹å›¾å±•ç¤ºäº†ä¸€ä¸ªè™šæ‹Ÿè¿›ç¨‹ï¼ˆç¨‹åºï¼‰å†…å­˜ç©ºé—´è¿è¡Œæ—¶åˆ†å¸ƒå¸ƒå±€ã€‚é«˜åœ°å€çš„1GBï¼ˆWindowsé»˜è®¤2GBï¼‰ç©ºé—´åˆ†é…ç»™å†…æ ¸ï¼Œä¹Ÿç§°ä¸ºå†…æ ¸ç©ºé—´ï¼›å‰©ä¸‹çš„3GBåˆ†ç»™ç”¨æˆ·ï¼Œä¹Ÿç§°ç”¨æˆ·ç©ºé—´ï¼ˆç¨‹åºä½¿ç”¨çš„ï¼‰ã€‚ ä¸€ä¸ªè¿›ç¨‹æœ¬è´¨æ˜¯ç”±ä»£ç æ®µã€æ•°æ®æ®µã€å †ã€æ ˆå››éƒ¨åˆ†ç»„æˆçš„ ã€‚ ä½œä¸ºç¨‹åºå‘˜ï¼Œæˆ‘ä»¬æ›´å…³æ³¨çš„æ˜¯ç”¨æˆ·ç©ºé—´ä¸­çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯ï¼š æ ˆï¼ˆStackï¼‰ï¼šå­˜å‚¨ä»£ç ä¸­è°ƒç”¨å‡½æ•°ã€å®šä¹‰å±€éƒ¨å˜é‡(ä½†ä¸åŒ…å«staticä¿®é¥°çš„å˜é‡)ã€ä¿å­˜çš„ä¸Šä¸‹æ–‡ç­‰ï¼› ç‰¹ç‚¹ï¼šå­˜æ”¾çš„æ•°æ®ä»æ ˆé¡¶ï¼ˆä½åœ°å€ï¼‰å‹å…¥ï¼Œä¹Ÿæ˜¯ä»æ ˆé¡¶ï¼ˆä½åœ°å€ï¼‰å¼¹å‡ºï¼Œæ‰€ä»¥æœ‰äººè¯´æ ˆæ˜¯å‘ä¸‹ç”Ÿé•¿çš„ã€‚å‡½æ•°é€€å‡ºæ—¶ï¼Œæ‰€æœ‰æ•°æ®ä¼šè‡ªåŠ¨é‡Šæ”¾å†…å­˜ï¼ˆå‡ºæ ˆï¼‰ã€‚ æ–‡ä»¶æ˜ å°„åŒºåŸŸ ï¼š æ ˆå’Œå †ä¸­é—´é‚£ä¸ªç©ºç™½åŒºåŸŸã€‚åŠ¨æ€åº“ã€å…±äº«å†…å­˜ç­‰æ˜ å°„ç‰©ç†ç©ºé—´çš„å†…å­˜ï¼Œä¸€èˆ¬æ˜¯ mmap å‡½æ•°æ‰€åˆ†é…çš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚ å †ï¼ˆHeapï¼‰ï¼šå­˜å‚¨é‚£äº›ç”Ÿå­˜æœŸä¸å‡½æ•°è°ƒç”¨æ— å…³çš„æ•°æ®ï¼Œå¦‚åŠ¨æ€åˆ†é…çš„å†…å­˜ã€‚å †ï¼ˆåŠ¨æ€ï¼‰åˆ†é…çš„æ¥å£é€šå¸¸æœ‰malloc()ã€calloc()ã€realloc()ã€newç­‰ã€‚ ç‰¹ç‚¹ï¼šç›¸å¯¹äºæ ˆï¼Œå †æ˜¯å‘ä¸Šç”Ÿé•¿çš„ï¼›å †ç©ºé—´éœ€è¦ä¸»åŠ¨é‡Šæ”¾ï¼Œå¦åˆ™ä¼šä¾ç„¶å­˜åœ¨ã€‚ æ•°æ®æ®µï¼ˆ.dataï¼‰ï¼šä¿å­˜å…¨å±€å˜é‡ã€å¸¸é‡ã€é™æ€å˜é‡çš„å†…å®¹çš„ä¸€å—å†…å­˜åŒºåŸŸã€‚ ä»£ç æ®µï¼ˆ.text &amp; .initï¼‰ï¼š .text ç”¨äºå­˜æ”¾æ•´ä¸ªç¨‹åºä¸­çš„ä»£ç ï¼Œ .init ç”¨äºå­˜æ”¾ç³»ç»Ÿä¸­ç”¨æ¥åˆå§‹åŒ–å¯åŠ¨ä½ çš„ç¨‹åºçš„ä¸€æ®µä»£ç  ã€‚ è¿›ç¨‹åˆ›å»ºã€æ‰§è¡ŒåŠç»ˆæ­¢ è¿›ç¨‹åˆ›å»ºè°ƒç”¨fork()å‡½æ•°ï¼Œæ–°åˆ›å»ºè¿›ç¨‹è¢«ç§°ä¸ºå­è¿›ç¨‹ã€‚æ­£å¦‚â€œforkâ€æ‰€æš—ç¤ºçš„ï¼Œ å­è¿›ç¨‹ä¼šå¤åˆ¶çˆ¶è¿›ç¨‹æ•°æ®æ®µã€å †ã€æ ˆç­‰çš„å‰¯æœ¬å¹¶å¯ä»¥è¿›è¡Œä¿®æ”¹ï¼› ä»£ç æ®µåœ¨å†…å­˜è¢«æ ‡è®°ä¸ºåªè¯»ï¼Œåˆ™ç”±çˆ¶ã€å­è¿›ç¨‹å…±äº«ã€‚ è¿›ç¨‹æ‰§è¡Œå¾€å¾€æŒ‡çš„æ˜¯ï¼Œ1ï¼‰æ‰§è¡Œçˆ¶è¿›ç¨‹å…±äº«ä»£ç å…¶å®ƒå‡½æ•°ï¼Œæˆ–2ï¼‰è°ƒç”¨execve()å»åŠ è½½æ‰§è¡Œå…¨æ–°ç¨‹åºã€‚ execve()ä¼šé”€æ¯æ‰€æœ‰ä»£ç æ®µã€æ•°æ®æ®µåŠå †æ ˆå†…å®¹ï¼Œå¹¶æ ¹æ®æ–°æ®µåˆ›å»ºæ–°æ®µè¿›è¡Œæ›¿æ¢ï¼› ä»¥execve()ä¸ºåŸºç¡€ï¼ŒCè¯­è¨€åº“æä¾›ä»¥â€œexecâ€æ‰“å¤´çš„ç›¸å…³å‡½æ•°ã€‚ è¿›ç¨‹ç»ˆæ­¢å¾€å¾€å¯é€šè¿‡ï¼Œ1ï¼‰è°ƒç”¨_exit()å‡½æ•°ï¼Œæˆ–2ï¼‰å‘è¿›ç¨‹ä¼ é€’ä¿¡å·æ€æ­»ã€‚ æ ¹æ®æƒ¯ä¾‹ï¼Œç»ˆæ­¢çŠ¶æ€ä¸º 0 è¡¨ç¤ºè¿›ç¨‹â€œåŠŸæˆèº«é€€â€ï¼Œé 0 åˆ™è¡¨ç¤ºæœ‰é”™è¯¯å‘ç”Ÿã€‚ ç‰¹æ®Šè¿›ç¨‹ initè¿›ç¨‹ ç³»ç»Ÿå¼•å¯¼æ—¶ï¼Œå†…æ ¸ä¼šåˆ›å»ºä¸€ä¸ªåä¸º init çš„ç‰¹æ®Šè¿›ç¨‹ï¼Œå…¶ä¸»è¦ä»»åŠ¡æ˜¯åˆ›å»ºå¹¶ç›‘æ§ç³»ç»Ÿè¿è¡Œæ‰€éœ€çš„ä¸€ç³»åˆ—è¿›ç¨‹ã€‚ 1ç”Ÿä¸‡ç‰©ï¼Œinit è¿›ç¨‹çš„è¿›ç¨‹å·æ€»ä¸º 1ï¼Œä¸”æ€»æ˜¯ä»¥è¶…çº§ç”¨æˆ·æƒé™è¿è¡Œï¼Œç³»ç»Ÿçš„æ‰€æœ‰è¿›ç¨‹ä¸æ˜¯ç”± initï¼ˆä½¿ç”¨ frok()ï¼‰â€œäº²è‡ªâ€åˆ›å»ºï¼Œå°±æ˜¯ç”±å…¶åä»£è¿›ç¨‹åˆ›å»ºã€‚ ä¸æ—¥åŒè¾‰ï¼Œè°ï¼ˆå“ªæ€•æ˜¯è¶…çº§ç”¨æˆ·ï¼‰éƒ½ä¸èƒ½â€œæ€æ­»â€init è¿›ç¨‹ï¼Œåªæœ‰å…³é—­ç³»ç»Ÿæ‰èƒ½ç»ˆæ­¢è¯¥è¿›ç¨‹ã€‚ å®ˆæŠ¤è¿›ç¨‹ å®ˆæŠ¤è¿›ç¨‹æŒ‡çš„æ˜¯å…·æœ‰ç‰¹æ®Šç”¨é€”çš„è¿›ç¨‹ï¼Œç³»ç»Ÿåˆ›å»ºå’Œå¤„ç†æ­¤ç±»è¿›ç¨‹çš„æ–¹å¼ä¸å…¶ä»–è¿›ç¨‹ç›¸åŒï¼Œä½†ä»¥ä¸‹ç‰¹å¾æ˜¯å…¶æ‰€ç‹¬æœ‰çš„ï¼š é•¿ç”Ÿä¸è€ï¼Œå®ˆæŠ¤è¿›ç¨‹é€šå¸¸åœ¨ç³»ç»Ÿå¼•å¯¼æ—¶å¯åŠ¨ï¼Œç›´è‡³ç³»ç»Ÿå…³é—­å‰ï¼Œä¼šä¸€ç›´â€œå¥åœ¨â€ã€‚ åå°è¿è¡Œï¼Œä¸”æ— æ§åˆ¶ç»ˆç«¯ä¾›å…¶è¯»å–æˆ–å†™å…¥æ•°æ®ã€‚ å®ˆæŠ¤è¿›ç¨‹ä¸­çš„ä¾‹å­æœ‰ syslogdï¼ˆåœ¨ç³»ç»Ÿæ—¥å¿—ä¸­è®°å½•æ¶ˆæ¯ï¼‰å’Œ httpdï¼ˆåˆ©ç”¨ HTTP åˆ†å‘ Web é¡µé¢ï¼‰ã€‚ ç¯å¢ƒåˆ—è¡¨ æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä»½ç¯å¢ƒåˆ—è¡¨ï¼Œå³åœ¨è¿›ç¨‹ç”¨æˆ·ç©ºé—´å†…å­˜ä¸­ç»´æŠ¤çš„ä¸€ç»„ç¯å¢ƒå˜é‡ã€‚è¿™ä»½åˆ—è¡¨çš„æ¯ä¸€å…ƒç´ éƒ½ç”±ä¸€ä¸ªåç§°åŠå…¶ç›¸å…³å€¼ç»„æˆã€‚ ç”± fork()åˆ›å»ºçš„æ–°è¿›ç¨‹ï¼Œä¹Ÿä¼šç»§æ‰¿çˆ¶è¿›ç¨‹çš„ç¯å¢ƒå‰¯æœ¬ã€‚ åœ¨å¤§å¤šæ•°shellä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨exportå‘½ä»¤è¿›è¡Œåˆ›å»ºç¯å¢ƒå˜é‡ï¼š 123[root@roy-cpp cpp-learn]# export myval=&#x27;hello unix&#x27;[root@roy-cpp cpp-learn]# echo $myvalhello unix æˆ‘ä»¬è¿˜å¯ä»¥æ‰“å°å·²é¢„å®šä¹‰çš„ç¯å¢ƒå˜é‡ï¼š PATHï¼Œç”¨æˆ·è¾“å…¥å‘½ä»¤åï¼Œshellæœç´¢çš„ç›®å½•åˆ—è¡¨ï¼› HOMEï¼Œç”¨æˆ·ç™»é™†ç›®å½•çš„è·¯å¾„åã€‚ 1234[root@roy-cpp cpp-learn]# echo $PATH /root/.vscode-server/bin/f80445acd5a3dadef24aa209168452a3d97cc326/bin/remote-cli:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin[root@roy-cpp cpp-learn]# echo $HOME/root è¿™äº›é¢„å®šä¹‰çš„å˜é‡ä¹Ÿå¾ˆå¥½åœ°å¯ä»¥ç›´æ¥è¢«shellè„šæœ¬å’Œç¨‹åºè¿›è¡Œè®¿é—®ã€‚ è¿›ç¨‹é€šä¿¡ Linux ç³»ç»Ÿä¸Šè¿è¡Œæœ‰å¤šä¸ªè¿›ç¨‹ï¼Œæœ‰äº›è¿›ç¨‹å¿…é¡»ç›¸äº’åˆä½œä»¥è¾¾æˆé¢„æœŸç›®çš„ï¼Œå› æ­¤å½¼æ­¤é—´éœ€è¦é€šä¿¡å’ŒåŒæ­¥æœºåˆ¶ã€‚ è¯»å†™ç£ç›˜æ–‡ä»¶ä¸­çš„ä¿¡æ¯ï¼Œæ¥è¿›ç¨‹é—´é€šä¿¡æ˜¯ä¸€ç§å®¹æ˜“è¢«æ¥å—ä¸”ç®€å•å¯è¡Œçš„åŠæ³•ã€‚ ä½†è¿™ç§æ–¹æ³•æ—¢æ…¢åˆç¼ºä¹çµæ´»æ€§ã€‚å› æ­¤ï¼Œåƒæ‰€æœ‰ç°ä»£ UNIX å®ç°é‚£æ ·ï¼ŒLinux ä¹Ÿæä¾›äº†ä¸°å¯Œçš„è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰æœºåˆ¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ ä¿¡å·ï¼ˆsignalï¼‰ï¼Œç”¨æ¥è¡¨ç¤ºäº‹ä»¶çš„å‘ç”Ÿã€‚ ç®¡é“ï¼ˆäº¦å³ shell ç”¨æˆ·æ‰€ç†Ÿæ‚‰çš„â€œ|â€æ“ä½œç¬¦ï¼‰å’Œ FIFOï¼Œç”¨äºåœ¨è¿›ç¨‹é—´ä¼ é€’æ•°æ®ã€‚ å¥—æ¥å­—ï¼Œä¾›åŒä¸€å°ä¸»æœºæˆ–æ˜¯è”ç½‘çš„ä¸åŒä¸»æœºä¸Šæ‰€è¿è¡Œçš„è¿›ç¨‹ä¹‹é—´ä¼ é€’æ•°æ®ã€‚ æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”¨äºåœ¨è¿›ç¨‹é—´äº¤æ¢æ¶ˆæ¯ï¼ˆæ•°æ®åŒ…ï¼‰ã€‚ ä¿¡å·é‡ï¼ˆsemaphoreï¼‰ï¼Œç”¨æ¥åŒæ­¥è¿›ç¨‹åŠ¨ä½œã€‚ å…±äº«å†…å­˜ï¼Œå…è®¸ä¸¤ä¸ªåŠä¸¤ä¸ªä»¥ä¸Šè¿›ç¨‹å…±äº«ä¸€å—å†…å­˜ã€‚å½“æŸè¿›ç¨‹æ”¹å˜äº†å…±äº«å†…å­˜çš„å†…å®¹æ—¶ï¼Œå…¶ä»–æ‰€æœ‰è¿›ç¨‹ä¼šç«‹å³äº†è§£åˆ°è¿™ä¸€å˜åŒ–ã€‚ 1.1.6 å†…å­˜æ˜ å°„ å†…å­˜æ˜ å°„ï¼ˆMemory-mappedï¼Œmmapï¼‰ï¼Œå³å°†ä¸€ä¸ªæ–‡ä»¶æˆ–è€…å…¶ä»–å¯¹è±¡æ˜ å°„åˆ°è¿›ç¨‹çš„åœ°å€ç©ºé—´ï¼Œå®ç°æ–‡ä»¶ç£ç›˜åœ°å€å’Œåº”ç”¨ç¨‹åºè¿›ç¨‹è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­ä¸€æ®µè™šæ‹Ÿåœ°å€çš„æ˜ å°„å…³ç³»ã€‚ ç‰¹åˆ«çš„ï¼Œç”±æŸä¸€è¿›ç¨‹æ‰€æ˜ å°„çš„å†…å­˜å¯ä»¥ä¸å…¶ä»–è¿›ç¨‹çš„æ˜ å°„å…±äº«ã€‚ æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼š ä¸¤ä¸ªè¿›ç¨‹éƒ½é’ˆå¯¹æŸä¸€æ–‡ä»¶çš„ç›¸åŒéƒ¨åˆ†åŠ ä»¥æ˜ å°„ï¼› ç”± fork()åˆ›å»ºçš„å­è¿›ç¨‹è‡ªçˆ¶è¿›ç¨‹å¤„ç»§æ‰¿æ˜ å°„ã€‚ ä½†è¿™ä¹Ÿç”±æ­¤å¼•å‘äº†ä¸€ä¸ªé—®é¢˜ï¼šæŸä¸ªè¿›ç¨‹å¯¹å…±äº«é¡µé¢å†…å®¹çš„æ”¹åŠ¨ä¸€å®šä¼šä¸ºå…¶ä»–è¿›ç¨‹æ‰€è§å—ï¼Ÿ å…¶å®è¿™å–å†³äºåˆ›å»ºæ˜ å°„æ—¶æ‰€ä¼ å…¥çš„æ ‡å¿—å‚æ•°ã€‚ è‹¥ä¼ å…¥æ ‡å¿—ä¸ºç§æœ‰ï¼Œåˆ™æŸè¿›ç¨‹å¯¹æ˜ å°„å†…å®¹çš„ä¿®æ”¹å¯¹äºå…¶ä»–è¿›ç¨‹æ˜¯ä¸å¯è§çš„ï¼Œè€Œä¸”è¿™äº›æ”¹åŠ¨ä¹Ÿä¸ä¼šçœŸåœ°è½å®åˆ°æ–‡ä»¶ä¸Šï¼› è‹¥ä¼ å…¥æ ‡å¿—ä¸ºå…±äº«ï¼Œå¯¹æ˜ å°„å†…å®¹çš„ä¿®æ”¹å°±ä¼šä¸ºå…¶ä»–è¿›ç¨‹æ‰€è§ï¼Œå¹¶ä¸”è¿™äº›ä¿®æ”¹ä¹Ÿä¼šé€ æˆå¯¹æ–‡ä»¶çš„æ”¹åŠ¨ã€‚ å†…å­˜æ˜ å°„ç”¨é€”å¾ˆå¤šï¼Œå¦‚æ–‡ä»¶ I/Oï¼ˆå³æ˜ å°„å†…å­˜ I/Oï¼‰ä»¥åŠè¿›ç¨‹é—´é€šä¿¡ï¼ˆé€šè¿‡å…±äº«æ˜ å°„ï¼‰ã€‚åœ¨åç»­æˆ‘ä»¬è¿˜ä¼šæ›´æ·±å…¥çš„æ¢è®¨ã€‚ 1.1.7 ä¿¡å· å°½ç®¡1.5.5å°†ä¿¡å·è§†ä¸º IPC çš„æ–¹æ³•ä¹‹ä¸€ï¼Œä½†å…¶åœ¨å…¶ä»–æ–¹é¢çš„å¹¿æ³›åº”ç”¨åˆ™æ›´ä¸ºæ™®éã€‚ äººä»¬å¾€å¾€å°†ä¿¡å·ç§°ä¸ºâ€œè½¯ä»¶ä¸­æ–­â€ã€‚è¿›ç¨‹æ”¶åˆ°ä¿¡å·ï¼Œå°±æ„å‘³ç€æŸä¸€äº‹ä»¶æˆ–å¼‚å¸¸æƒ…å†µçš„å‘ç”Ÿã€‚ ä¿¡å·çš„ç±»å‹å¾ˆå¤šï¼Œæ¯ä¸€ç§åˆ†åˆ«æ ‡è¯†ä¸åŒçš„äº‹ä»¶æˆ–æƒ…å†µã€‚é‡‡ç”¨ä¸åŒçš„æ•´æ•°æ¥æ ‡è¯†å„ç§ä¿¡å·ç±»å‹ï¼Œå¹¶ä»¥ SIGxxxx å½¢å¼çš„ç¬¦å·ååŠ ä»¥å®šä¹‰ã€‚ ä¿¡å·å‘é€ï¼Œå†…æ ¸ã€å…¶ä»–è¿›ç¨‹ï¼ˆåªè¦å…·æœ‰ç›¸åº”çš„æƒé™ï¼‰æˆ–è¿›ç¨‹è‡ªèº«å‡å¯å‘è¿›ç¨‹å‘é€ä¿¡å·ã€‚ å‘ç”Ÿä¸‹åˆ—æƒ…å†µä¹‹ä¸€æ—¶ï¼Œå†…æ ¸å¯å‘è¿›ç¨‹å‘é€ä¿¡å·ï¼š ç”¨æˆ·é”®å…¥ä¸­æ–­å­—ç¬¦ï¼ˆé€šå¸¸ä¸º Control-Cï¼‰ã€‚ è¿›ç¨‹çš„å­è¿›ç¨‹ä¹‹ä¸€å·²ç»ç»ˆæ­¢ã€‚ ç”±è¿›ç¨‹è®¾å®šçš„å®šæ—¶å™¨ï¼ˆå‘Šè­¦æ—¶é’Ÿï¼‰å·²ç»åˆ°æœŸã€‚ è¿›ç¨‹å°è¯•è®¿é—®æ— æ•ˆçš„å†…å­˜åœ°å€ã€‚ åœ¨ shell ä¸­ï¼Œå¯ä½¿ç”¨ kill å‘½ä»¤å‘è¿›ç¨‹å‘é€ä¿¡å·ã€‚åœ¨ç¨‹åºå†…éƒ¨ï¼Œç³»ç»Ÿè°ƒç”¨ kill()å¯æä¾›ç›¸åŒçš„åŠŸèƒ½ã€‚ ä¿¡å·å›å¤ï¼Œæ”¶åˆ°ä¿¡å·æ—¶ï¼Œè¿›ç¨‹ä¼šæ ¹æ®ä¿¡å·é‡‡å–å¦‚ä¸‹åŠ¨ä½œä¹‹ä¸€ï¼š å¿½ç•¥ä¿¡å·ã€‚ è¢«ä¿¡å·â€œæ€æ­»â€ã€‚ å…ˆæŒ‚èµ·ï¼Œä¹‹åå†è¢«ä¸“ç”¨ä¿¡å·å”¤é†’ã€‚ å°±å¤§å¤šæ•°ä¿¡å·ç±»å‹è€Œè¨€ï¼Œç¨‹åºå¯é€‰æ‹©ä¸é‡‡å–é»˜è®¤çš„ä¿¡å·åŠ¨ä½œï¼Œè€Œæ˜¯å¿½ç•¥ä¿¡å·æˆ–è€…å»ºç«‹è‡ªå·±çš„ä¿¡å·å¤„ç†å™¨ã€‚ä¿¡å·å¤„ç†å™¨æ˜¯ç”±ç¨‹åºå‘˜å®šä¹‰çš„å‡½æ•°ï¼Œä¼šåœ¨è¿›ç¨‹æ”¶åˆ°ä¿¡å·æ—¶è‡ªåŠ¨è°ƒç”¨ï¼Œæ ¹æ®ä¿¡å·çš„äº§ç”Ÿæ¡ä»¶æ‰§è¡Œç›¸åº”åŠ¨ä½œã€‚ 1.1.8 çº¿ç¨‹ åœ¨ç°ä»£ UNIX å®ç°ä¸­ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½å¯æ‰§è¡Œå¤šä¸ªçº¿ç¨‹ã€‚ ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Ÿ çº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿèƒ½å¤Ÿè¿›è¡Œè¿ç®—è°ƒåº¦çš„æœ€å°å•ä½ï¼Œè¢«åŒ…å«åœ¨è¿›ç¨‹ä¹‹ä¸­ï¼Œæ˜¯è¿›ç¨‹ä¸­çš„å®é™…è¿ä½œå•ä½ã€‚ æ¯ä¸ªçº¿ç¨‹éƒ½ä¼šæ‰§è¡Œç›¸åŒçš„ç¨‹åºä»£ç ï¼Œå…±äº«åŒä¸€æ•°æ®åŒºåŸŸå’Œå †ï¼› æ¯ä¸ªçº¿ç¨‹éƒ½æ‹¥æœ‰å±äºè‡ªå·±çš„æ ˆï¼Œç”¨æ¥è£…è½½æœ¬åœ°å˜é‡å’Œå‡½æ•°è°ƒç”¨é“¾æ¥ä¿¡æ¯ã€‚ ä¸ºä»€ä¹ˆéœ€è¦çº¿ç¨‹ï¼Ÿ çº¿ç¨‹çš„ä¸»è¦ä¼˜ç‚¹ï¼š ååŒçº¿ç¨‹ä¹‹é—´çš„æ•°æ®å…±äº«ï¼ˆé€šè¿‡å…¨å±€å˜é‡ï¼‰æ›´ä¸ºå®¹æ˜“ã€è‡ªç„¶ï¼› å¤šçº¿ç¨‹åˆ›å»ºã€é”€æ¯ç­‰å¼€é”€å°ï¼› CPUåˆ©ç”¨ç‡é«˜ï¼Œå¦‚æœä¸€ä¸ªå­ä»»åŠ¡é˜»å¡ï¼Œç¨‹åºå¯ä»¥å°†CPUè°ƒåº¦åˆ°å¦å¤–ä¸€ä¸ªå­ä»»åŠ¡è¿›è¡Œå·¥ä½œã€‚è¿™æ ·CPUè¿˜æ˜¯ä¿ç•™åœ¨æœ¬ç¨‹åºä¸­ï¼Œè€Œä¸æ˜¯è¢«è°ƒåº¦åˆ°åˆ«çš„è¿›ç¨‹å»ã€‚è¿™æ ·ï¼Œæé«˜äº†æœ¬ç¨‹åºæ‰€è·å¾—çš„CPUæ—¶é—´å’Œåˆ©ç”¨ç‡ã€‚ çº¿ç¨‹ä¹‹é—´å¦‚ä½•é€šä¿¡ï¼Ÿ åˆ©ç”¨å‰è¿°è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡æ–¹å¼ï¼ˆIPCï¼‰ï¼› åˆ©ç”¨å…±äº«çš„å…¨å±€å˜é‡è¿›è¡Œé€šä¿¡ï¼Œå€ŸåŠ©äºçº¿ç¨‹ API æ‰€æä¾›çš„æ¡ä»¶å˜é‡å’Œäº’æ–¥æœºåˆ¶ï¼Œè¿›ç¨‹æ‰€å±çš„çº¿ç¨‹ä¹‹é—´å¾—ä»¥ç›¸äº’é€šä¿¡å¹¶åŒæ­¥è¡Œä¸ºã€‚ 1.1.9 ä¼šè¯ã€æ§åˆ¶ç»ˆç«¯å’Œæ§åˆ¶è¿›ç¨‹ ä¼šè¯ã€æ§åˆ¶ç»ˆç«¯å’Œæ§åˆ¶è¿›ç¨‹ä¹‹é—´æ¦‚å¿µå’Œå…³ç³»å¦‚ä¸‹ã€‚ ä¼šè¯ ä¼šè¯æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹ç»„çš„é›†åˆï¼Œä¼šè¯ä¸­çš„æ‰€æœ‰è¿›ç¨‹éƒ½å…·æœ‰ç›¸åŒçš„ä¼šè¯æ ‡è¯†ç¬¦ã€‚ ä¼šè¯ä¸shellçš„å…³ç³»ï¼Ÿ ä½¿ç”¨ä¼šè¯æœ€å¤šçš„æ˜¯æ”¯æŒä»»åŠ¡æ§åˆ¶çš„ shellï¼Œç”± shell åˆ›å»ºçš„æ‰€æœ‰è¿›ç¨‹ç»„ä¸ shell è‡ªèº«éš¶å±äºåŒä¸€ä¼šè¯ï¼Œshell æ˜¯æ­¤ä¼šè¯çš„ä¼šè¯é¦–è¿›ç¨‹ã€‚ æ§åˆ¶ç»ˆç«¯ å½“ä¸€ä¸ªç»ˆç«¯ä¸ä¸€ä¸ªä¼šè¯ç›¸å…³è”åï¼Œé‚£ä¹ˆè¿™ä¸ªç»ˆç«¯å°±ç§°ä¸ºè¯¥ä¼šè¯çš„æ§åˆ¶ç»ˆç«¯ï¼Œå»ºç«‹ä¸æ§åˆ¶ç»ˆç«¯è¿æ¥çš„ä¼šè¯é¦–è¿›ç¨‹ï¼ˆä¸€èˆ¬æ˜¯shellï¼‰è¢«ç§°ä¸ºæ§åˆ¶è¿›ç¨‹(controlling process)ã€‚ æ§åˆ¶ç»ˆç«¯å…³é—­æ—¶ï¼Œä¼šè¯ä¸­å„ä¸ªè¿›ç¨‹çš„å˜åŒ–ï¼Ÿ ç®€å•æ¥è¯´ï¼Œshellè¿›ç¨‹å’Œå‰å°æ‰€æœ‰è¿›ç¨‹ä¼šé€€å‡ºï¼Œåå°æ— ç»ˆç«¯è¾“å‡ºè¿›ç¨‹é€€å‡ºã€‚ é¦–å…ˆä¼šå‘ä¸€ä¸ªæŒ‚æ–­ä¿¡å·SIGHUPç»™ä¼šè¯é¦–è¿›ç¨‹ï¼ˆä¸€èˆ¬ä¸ºshellï¼‰ï¼Œå³shellè¿›ç¨‹é€€å‡ºã€‚ å½“ä¼šè¯é¦–è¿›ç¨‹shellé€€å‡ºæ—¶ï¼ŒæŒ‚æ–­ä¿¡å·ï¼ˆSIGHUPï¼‰è¿˜ä¼šç»§ç»­å‘é€ç»™å‰å°è¿›ç¨‹ç»„å’Œåå°æœ‰ç»ˆç«¯è¾“å‡ºçš„æ‰€æœ‰è¿›ç¨‹ã€‚ è‹¥è¿›ç¨‹æœªå¯¹æŒ‚æ–­ä¿¡å·ï¼ˆSIGHUPï¼‰è¿›è¡Œå¤„ç†æ—¶ï¼Œæ‰€æœ‰æ”¶åˆ°è¯¥ä¿¡å·çš„è¿›ç¨‹å°†è¢«ç»ˆæ­¢ã€‚ å¦‚ä½•è®©è¿›ç¨‹åœ¨ç»ˆç«¯å…³é—­æ—¶ï¼Œä¸å—å…¶å½±å“è¿›è¡Œæ‰§è¡Œï¼Ÿ æ ¹æ®å‰è¿°ï¼Œè‹¥æƒ³è¿›ç¨‹åœ¨ç»ˆç«¯å…³é—­æ—¶ä¸å—å½±å“ï¼š å¦‚æœè¯¥è¿›ç¨‹æ— ç»ˆç«¯è¾“å‡ºï¼Œè®©è¯¥è¿›ç¨‹æˆä¸ºåå°è¿›ç¨‹ï¼› å¦‚æœè¯¥è¿›ç¨‹æœ‰ç»ˆç«¯è¾“å‡ºï¼Œè¿˜å¿½ç•¥SIGHUPä¿¡å·ï¼› è®©ç¨‹åºå¯¹æŒ‚æ–­ä¿¡å·SIGHUPè¿›è¡Œå¤„ç†ã€‚ é’ˆå¯¹1ã€2æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼š 1nohup &lt;command&gt; &amp; nohubï¼Œå¿½ç•¥æ‰€æœ‰æŒ‚æ–­ï¼ˆSIGHUPï¼‰ä¿¡å·ï¼› &amp;ï¼Œç¨‹åºè¿›ç¨‹è¿›å…¥åå°è¿è¡Œã€‚ å®ä¾‹ï¼šnohub python run.py &amp; ã€‚ é’ˆå¯¹3ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è®©ç¨‹åºè‡ªåŠ¨å…·å¤‡é˜²é€€å‡ºåŠŸèƒ½ã€‚ 123456789101112131415161718192021#include &quot;apue.h&quot;#include &lt;fcntl.h&gt; // å¤„ç†ç¨‹åºstatic void sig_hup(int signo)&#123; printf(&quot;received signup\\n&quot;);&#125; static int count; int main(void)&#123; setbuf(stdout,NULL); printf(&quot;pid = %d\\n&quot;,getpid()); // æ³¨å†ŒæŒ‚æ–­ä¿¡å·(SIGHUP)çš„å¤„ç†ç¨‹åº // è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬çš„ç¨‹åºå°±ä¸ä¼šå› æ”¶åˆ°æŒ‚æ–­ä¿¡å·è€Œé€€å‡ºäº† signal(SIGHUP, sig_hup); while(1) &#123; count++; &#125; exit(0);&#125; 1.10 /procç›®å½• Linuxç³»ç»Ÿä¸Šçš„/procç›®å½•æ˜¯ä¸€ç§æ–‡ä»¶ç³»ç»Ÿï¼Œå³procæ–‡ä»¶ç³»ç»Ÿã€‚ /procæ˜¯ä¸€ç§ä¼ªæ–‡ä»¶ç³»ç»Ÿï¼ˆä¹Ÿå³è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼‰ï¼Œå­˜å‚¨çš„æ˜¯å½“å‰å†…æ ¸è¿è¡ŒçŠ¶æ€çš„ä¸€ç³»åˆ—ç‰¹æ®Šæ–‡ä»¶ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è¿™äº›æ–‡ä»¶ï¼š æŸ¥çœ‹ç³»ç»Ÿæœ‰å…³ï¼ˆ1ï¼‰ç¡¬ä»¶åŠå½“å‰ï¼ˆ2ï¼‰æ­£åœ¨è¿è¡Œè¿›ç¨‹çš„ä¿¡æ¯ï¼› æ›´æ”¹å…¶ä¸­æŸäº›æ–‡ä»¶æ¥æ”¹å˜å†…æ ¸çš„è¿è¡ŒçŠ¶æ€ã€‚ ä¾‹å¦‚ï¼ŒæŸ¥çœ‹ç£ç›˜ä¿¡æ¯ï¼š 1234567[root@roy-cpp proc]# cat /proc/devices Character devices: 1 mem 4 /dev/vc/0 4 tty 4 ttyS... 1.2 ç³»ç»Ÿç¼–ç¨‹åŸºæœ¬æ¦‚å¿µ ä»€ä¹ˆæ˜¯ç³»ç»Ÿç¼–ç¨‹ï¼Ÿ ç³»ç»Ÿç¼–ç¨‹ï¼Œæ˜¯æŒ‡è¿›ç¨‹ï¼ˆæˆ–è€…è¯´ç¨‹åºï¼‰ä»¥APIå½¢å¼ï¼Œå»è°ƒç”¨ç³»ç»Ÿå†…æ ¸æä¾›çš„ä¸€ç³»åˆ—æœåŠ¡å¦‚ï¼š åˆ›å»ºè¿›ç¨‹ æ‰§è¡ŒIO è¿›ç¨‹é€šä¿¡ â€¦ ç­‰æ¥å®Œæˆç¨‹åºç¼–å†™ã€‚ å¯ä»¥çœ‹åˆ°å‰è¿°æ ¸å¿ƒè¿‡ç¨‹æ˜¯è°ƒç”¨ç³»ç»Ÿå†…æ ¸æœåŠ¡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ç³»ç»Ÿè°ƒç”¨ã€‚ 1.2.1 ç³»ç»Ÿè°ƒç”¨ åœ¨æ·±å…¥ç³»ç»Ÿè°ƒç”¨çš„è¿ä½œæ–¹å¼ä¹‹å‰ï¼Œè¯·åŠ¡å¿…ç‰¢è®°ä»¥ä¸‹å‡ ç‚¹ï¼š æ£€æµ‹è¿”å›çŠ¶æ€ï¼Œæ— è®ºä½•æ—¶ï¼Œåªè¦æ‰§è¡Œäº†ç³»ç»Ÿè°ƒç”¨æˆ–è€…åº“å‡½æ•°ï¼Œæ£€æŸ¥è°ƒç”¨çš„è¿”å›çŠ¶æ€ä»¥ç¡®å®šè°ƒç”¨æ˜¯å¦æˆåŠŸï¼Œè¿™æ˜¯ä¸€æ¡ç¼–ç¨‹é“å¾‹ã€‚ æ ¸å¿ƒæ€åˆ‡æ¢ï¼Œç³»ç»Ÿè°ƒç”¨å°†å¤„ç†å™¨ä»ç”¨æˆ·æ€åˆ‡æ¢åˆ°æ ¸å¿ƒæ€ï¼Œä»¥ä¾¿ CPU è®¿é—®å—åˆ°ä¿æŠ¤çš„å†…æ ¸å†…å­˜ã€‚ æ¯ä¸ªç³»ç»Ÿè°ƒç”¨ç”±æ•°å­—æ ‡è¯†ï¼Œç³»ç»Ÿè°ƒç”¨çš„ç»„æˆæ˜¯å›ºå®šçš„ï¼Œæ¯ä¸ªç³»ç»Ÿè°ƒç”¨éƒ½ç”±ä¸€ä¸ªå”¯ä¸€çš„æ•°å­—æ¥æ ‡è¯†ã€‚ æ¯ä¸ªç³»ç»Ÿè°ƒç”¨éƒ½æœ‰å¯¹åº”å‚æ•°ã€‚ ç°åœ¨æˆ‘ä»¬æ¥ä»¥å…·ä½“çš„ç¡¬ä»¶å¹³å°x86-32ä¸ºä¾‹ï¼Œæ¥åˆ†æç³»ç»Ÿè°ƒç”¨å‘ç”Ÿæ—¶çš„æ­¥éª¤ï¼š è°ƒç”¨å¤–å£³å‡½æ•°ï¼Œåº”ç”¨ç¨‹åºé€šè¿‡è®¾ç½®ç›¸åº”çš„å‚æ•°æ¥è°ƒç”¨ C è¯­è¨€å‡½æ•°åº“ä¸­çš„å¤–å£³å‡½æ•°ï¼Œç„¶åå‘èµ·ç³»ç»Ÿè°ƒç”¨ï¼› å‚æ•°ä¼ å…¥å¯„å­˜å™¨ï¼Œå†…æ ¸å¸Œæœ›å°†è¿™äº›å‡½æ•°å‚æ•°ç½®å…¥ç‰¹å®šå¯„å­˜å™¨ï¼Œå› æ­¤ï¼Œå¤–å£³å‡½æ•°ä¼šå°†ä¸Šè¿°å‚æ•°å¤åˆ¶åˆ°å¯„å­˜å™¨ï¼› ç³»ç»Ÿè°ƒç”¨ç¼–å·ä¼ å…¥å¯„å­˜å™¨%eaxï¼Œç”±äºæ‰€æœ‰ç³»ç»Ÿè°ƒç”¨è¿›å…¥å†…æ ¸çš„æ–¹å¼ç›¸åŒï¼Œå†…æ ¸éœ€åŒºåˆ†æ¯ä¸ªç³»ç»Ÿè°ƒç”¨ï¼Œä¸ºæ­¤ï¼Œå¤–å£³å‡½æ•°ä¼šå°†ç³»ç»Ÿè°ƒç”¨ç¼–å·å¤åˆ¶åˆ°ä¸€ä¸ªç‰¹æ®Šçš„ CPU å¯„å­˜å™¨ï¼ˆ%eaxï¼‰ä¸­ï¼› æ‰§è¡Œä¸­æ–­ï¼Œå¤–å£³å‡½æ•°æ‰§è¡Œä¸­æ–­æœºå™¨æŒ‡ä»¤ï¼ˆint 0x80ï¼‰â†’å¤„ç†å™¨ä»ç”¨æˆ·æ€åˆ‡æ¢åˆ°æ ¸å¿ƒæ€â†’æ‰§è¡Œç³»ç»Ÿä¸­æ–­ 0x80ï¼› å“åº”ä¸­æ–­ï¼Œä¿å­˜å¯„å­˜å™¨å€¼â†’å®¡æ ¸ç³»ç»Ÿç¼–å·æœ‰æ•ˆæ€§â†’æŸ¥è¯¢æœåŠ¡åˆ—è¡¨sys_call_tableâ†’æ‰§è¡Œç³»ç»Ÿè°ƒç”¨â†’è¿”å›çŠ¶æ€å‚æ•°ç»™sys_call()ï¼› å…³äºsys_call_tableï¼Œåœ¨ Linux/x86-32 ä¸Šï¼Œexecve()çš„ç³»ç»Ÿè°ƒç”¨å·ä¸º 11(__NR_execve)ã€‚å› æ­¤ï¼Œåœ¨ sys_call_table å‘é‡ä¸­ï¼Œæ¡ç›® 11 åŒ…å«äº†è¯¥ ç³»ç»Ÿè°ƒç”¨çš„æœåŠ¡ä¾‹ç¨‹ sys_execve()çš„åœ°å€ã€‚ ç»“æŸä¸­æ–­ï¼Œå†…æ ¸æ ˆä¸­æ¢å¤å„å¯„å­˜å™¨å€¼â†’ç³»ç»Ÿè°ƒç”¨è¿”å›å€¼ç½®äºæ ˆä¸­â†’å¤„ç†å™¨åˆ‡å›ç”¨æˆ·æ€ã€‚ è¿”å›å€¼é”™è¯¯å¤„ç†ï¼Œè‹¥ç³»ç»Ÿè°ƒç”¨æœåŠ¡ä¾‹ç¨‹çš„è¿”å›å€¼è¡¨æ˜è°ƒç”¨æœ‰è¯¯ï¼Œå¤–å£³å‡½æ•°ä¼šä½¿ç”¨è¯¥å€¼æ¥è®¾ç½®å…¨å±€å˜é‡ errnoã€‚ 1.2.2 Cè¯­è¨€å‡½æ•°åº“glibc GNU C è¯­è¨€å‡½æ•°åº“[glibc](http://www. gnu.org/software/libc/)ï¼Œæ˜¯ Linux ä¸Šæœ€å¸¸ç”¨çš„å®ç°ã€‚ æŸ¥çœ‹ä¸€ä¸‹æˆ‘ä»¬æœºå™¨ä¸Šçš„glibcç‰ˆæœ¬å§ï¼š 12[root@roy-cpp TLPI]# /lib64/libc.so.6 GNU C Library (GNU libc) stable release version 2.17, by Roland McGrath et al. åŠ¨æ€åº“libc.so.6 å¯è§†ä¸ºå¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¾“å‡ºå½“å‰glibcç‰ˆæœ¬ï¼Œä¸€èˆ¬ä½äºç›®å½•/lib64/libc.so.6 æˆ– /lib/libc.so.6 ä¸‹ã€‚ 1.2.3 å¤„ç†è¿”å›çš„é”™è¯¯ ä¸æ£€æŸ¥çŠ¶æ€å€¼ï¼Œå°‘æ•²å‡ è¡Œä»£ç å¬èµ·æ¥çš„ç¡®è¯±äººï¼Œä½†å®é™…å´å¾—ä¸å¿å¤±ã€‚ æ¯ä¸ªç³»ç»Ÿè°ƒç”¨å’Œåº“å‡½æ•°éƒ½ä¼šè¿”å›æŸç±»çŠ¶æ€å€¼ï¼Œè¦äº†è§£è°ƒç”¨æ˜¯å¦æˆåŠŸï¼Œå¿…é¡»åšæŒå¯¹çŠ¶æ€å€¼è¿›è¡Œæ£€æŸ¥ã€‚ è¿™èƒ½èŠ‚çº¦æˆ‘ä»¬å¤§æŠŠçš„ç¨‹åºè°ƒè¯•æ—¶é—´ã€‚ å¤„ç†ç³»ç»Ÿè°ƒç”¨é”™è¯¯ ç»å¤§éƒ¨åˆ†ç³»ç»Ÿæ£€æŸ¥è°ƒç”¨é”™è¯¯ä¿¡æ¯æ­¥éª¤ï¼š å…ˆæ£€æŸ¥ç³»ç»Ÿè°ƒç”¨è¿”å›å€¼æ˜¯å¦é”™è¯¯ï¼ˆä¸º-1ï¼‰ï¼Œå¦‚æœé”™è¯¯è½¬2ï¼› ç»§ç»­æ£€æŸ¥ errnoå·ï¼Œæ¥ç¡®å®šå…·ä½“é”™è¯¯ã€‚ ä¸‹é¢ä¸¾ä¸€ä¸ªä¾‹å­ã€‚ 123456789cnt = read(fd,buf1,len);if(cnt == -1) // æ£€æŸ¥è¿”å›å€¼&#123; if(errno == EINTR) // æ£€æŸ¥errnoå· std::cout &lt;&lt; &quot;read was interrupted by a signal.&quot; ; else // do something exit(-1);&#125; æ£€æŸ¥errnoå·ä¹Ÿå¯ä»¥ç›´æ¥æ›¿æ¢ä½¿ç”¨perror(char* str) å‡½æ•°ï¼Œå…¶ä¼šæ‰“å°æˆ‘ä»¬è¾“å…¥å­—ç¬¦ä¸²str + å½“å‰errorå¯¹åº”çš„é”™è¯¯ä¿¡æ¯ã€‚ ä»¥ä¸‹æ˜¯ä¸€ä¸ªæ›´å®Œæ•´çš„ä¾‹å­å±•ç¤ºã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657#include &lt;fcntl.h&gt; /* For O_RDWR */#include &lt;unistd.h&gt; /* For open(), creat() */#include &lt;stdio.h&gt; #include &lt;string.h&gt; /* For strlen()*/#include &lt;stdlib.h&gt;#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;iomanip&gt; /* For setw() */int main()&#123; int fd = 0; int cnt = 0; char filename[20] = &quot;./test/1.txt&quot;; // æ‰“å¼€æ–‡ä»¶ fd = open(filename,O_RDWR|O_EXCL|O_TRUNC,S_IRWXG); std::cout &lt;&lt; &quot;open the file.&quot; &lt;&lt; std::endl; if(fd == -1) // åˆ¤æ–­æ–‡ä»¶æ˜¯å¦æˆåŠŸæ‰“å¼€ &#123; perror(&quot;file open error.\\n&quot;); exit(-1); &#125; // å†™æ•°æ® std::cout &lt;&lt; &quot;writ data to the file.&quot; &lt;&lt; std::endl; int i = 0, len = 0; char buf[100] = &#123;0&#125;; std::cout &lt;&lt; &quot;please input: &quot; &lt;&lt; std::endl; std::cin.getline(buf,100); len = strlen(buf); cnt = write(fd,buf,len); if(cnt == -1) &#123; perror(&quot;file write error.&quot;); exit(-1); &#125; close(fd); // å…³é—­æ–‡ä»¶ // è¯»å–æ–‡ä»¶ char buf1[100] =&#123;0&#125;; std::cout &lt;&lt; &quot;read file.&quot; &lt;&lt; std::endl; fd = open(filename,O_RDONLY); // å†æ¬¡æ‰“å¼€æ–‡ä»¶ if(fd == -1) // åˆ¤æ–­æ–‡ä»¶æ˜¯å¦æ‰“å¼€æˆåŠŸ &#123; perror(&quot;file open error.\\n&quot;); exit(-1); &#125; cnt = read(fd,buf1,len); if(cnt == -1) &#123; perror(&quot;file read error.&quot;); exit(-1); &#125; std::cout &lt;&lt; buf1; close(fd); return 0;&#125; è¾“å‡ºï¼š 12345678[root@roy-cpp TLPI]# g++ -g chap3.cpp -o chap3.out [root@roy-cpp TLPI]# ./chap3.out open the file.writ data to the file.please input: hello royread file.hello roy å¤„ç†åº“å‡½æ•°è°ƒç”¨é”™è¯¯ åº“å‡½æ•°è°ƒç”¨å’Œç³»ç»Ÿè°ƒç”¨é”™è¯¯æœ‰äº›ä¸åŒã€‚ å’Œç³»ç»Ÿè°ƒç”¨ä¸€è‡´ï¼šè¿”å›å€¼ä¸º-1ï¼Œé…åˆerrorå·è¿›è¡Œæ£€æŸ¥ï¼› å‡ºé”™è¿”å›å€¼ä¸ä¸€å®šä¸º-1ï¼Œå¦‚fopenå‡ºé”™è¿”å›NULLæŒ‡é’ˆï¼Œé…åˆerrorè¿›è¡Œæ£€æŸ¥ï¼› éƒ¨åˆ†åº“å‡½æ•°æ ¹æœ¬ä¸ä½¿ç”¨errorã€‚ åœ¨æœ¬ç« ï¼Œä¸»è¦ä»‹ç»äº†Linuxå‘å±•å†å²ï¼Œä»¥åŠLinux&amp;ç³»ç»Ÿç¼–ç¨‹çš„åŸºæœ¬æ¦‚å¿µã€‚åœ¨ä¸‹ä¸€ç« ï¼Œæˆ‘å°†ä¸»è¦ä»‹ç»æ–‡ä»¶I/Oç›¸å…³çŸ¥è¯†ã€‚ æ›´æ–°è®°å½• 2022-06-16 ï¼šæ›´æ–°ç¬”è®° ç¬¬ä¸€æ¬¡æ›´æ–° å‚è€ƒæ–‡çŒ® [1] http://shareinto.github.io/2016/11/17/linux-terminal/ [2] é»‘é©¬ç¨‹åºå‘˜æ•™ç¨‹ï¼šhttps://book.itheima.net/course/223/","categories":[{"name":"C++","slug":"C","permalink":"https://hwh.zone/categories/C/"},{"name":"ä»é›¶å¼€å§‹","slug":"C/ä»é›¶å¼€å§‹","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"},{"name":"Linuxç³»ç»Ÿç¼–ç¨‹","slug":"C/ä»é›¶å¼€å§‹/Linuxç³»ç»Ÿç¼–ç¨‹","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/Linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"}],"tags":[{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://hwh.zone/tags/%E6%95%99%E7%A8%8B/"},{"name":"ç³»ç»Ÿç¼–ç¨‹","slug":"ç³»ç»Ÿç¼–ç¨‹","permalink":"https://hwh.zone/tags/%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"}]},{"title":"C++ä»é›¶å¼€å§‹ï¼ˆåä¸€ï¼‰ï¼šC++è¿›é˜¶ï¼ˆä¸‹ï¼‰STL","slug":"C++ä»é›¶å¼€å§‹ï¼ˆåä¸€ï¼‰ï¼šC++è¿›é˜¶ï¼ˆä¸‹ï¼‰STL","date":"2022-02-14T09:55:49.585Z","updated":"2022-02-23T08:37:50.948Z","comments":true,"path":"p/17467/","link":"","permalink":"https://hwh.zone/p/17467/","excerpt":"","text":"ğŸŒŸã€ŠC++ä»é›¶å¼€å§‹ã€‹ ç³»åˆ—ï¼Œå¼€å§‹æ›´æ–°ä¸­â€¦ C++ä»é›¶å¼€å§‹https://hwh.zone/p/62712 ä¹ã€STL STL å³â€œæ ‡å‡†æ¨¡æ¿åº“â€ï¼ˆ â€œStandard Template Libraryâ€ï¼‰ çš„ç¼©å†™ï¼Œ æ˜¯C++æ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†ï¼Œä½¿ç”¨æ—¶ä¸ç”¨å•ç‹¬å®‰è£…ï¼Œç›´æ¥å¼•å…¥å¤´æ–‡ä»¶å³å¯ã€‚ æ¯”å¦‚ï¼š 12# include &lt;vector&gt; // å¼•å…¥vector# include &lt;array&gt; // å¼•å…¥array STLå‘å±•å†å²é‡è¦æ—¶åˆ»ä¸€è§ˆï¼š 1987å¹´ï¼šè´å°”å®éªŒå®¤Stepanov è¿›è¡ŒC++æ³›å‹è½¯ä»¶åº“çš„ç ”ç©¶ï¼› 1992å¹´ï¼šAlex Stepanov æ­£å¼æå‡º STLï¼ˆStandard Template Libraryï¼‰ï¼› 1994å¹´ï¼šSTL æ­£å¼çº³å…¥ C++ æ ‡å‡†åŒ–è¿›ç¨‹ä¹‹ä¸­ï¼Œéšè€… C++ æ ‡å‡†çš„æ”¹è¿›ï¼ŒSTL ä¹Ÿä¸æ–­åšç€ç›¸åº”æ¼”åŒ–ï¼› 1998å¹´ï¼šANSI/ISO C++ æ ‡å‡†æ­£å¼å®šæ¡ˆï¼ŒSTL æ­£å¼æˆä¸ºC++ æ ‡å‡†åº“ä¸å¯æˆ–ç¼ºçš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚ STL å‡ ä¹æ‰€æœ‰çš„ä»£ç éƒ½é‡‡ç”¨äº†æ¨¡æ¿ç±»å’Œæ¨¡ç‰ˆå‡½æ•°çš„æ–¹å¼ï¼Œç”±æ­¤æä¾›äº†å¾ˆå¥½çš„ä»£ç é‡ç”¨æœºä¼šã€‚ STLä»å¹¿ä¹‰ä¸Šè®²åˆ†ä¸ºä¸‰ç±»ï¼š containerï¼ˆå®¹å™¨ï¼‰ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ä¸åŒçš„æ•°æ®ç»“æ„ï¼Œå¦‚vectorï¼ˆåº•å±‚æ˜¯æ•°ç»„ï¼‰ã€listï¼ˆåº•å±‚æ˜¯é“¾è¡¨ï¼‰ã€mapï¼ˆåº•å±‚æ˜¯çº¢é»‘æ ‘ï¼‰ç­‰æ¥ç»„ç»‡æ•°æ®ã€‚è¿™ä¸ºæˆ‘ä»¬é«˜æ•ˆç»„ç»‡ä¸åŒæ•°æ®ï¼Œæä¾›äº†æå¤§çš„æ–¹ä¾¿ã€‚ algorithmï¼ˆç®—æ³•ï¼‰ï¼Œåˆ™æ–¹ä¾¿äº†æˆ‘ä»¬å¯¹å®¹å™¨ï¼ˆæˆ–æ•°ç»„ï¼‰ä¸­çš„æ•°æ®è¿›è¡Œå„ç§éªšæ“ä½œï¼Œå¦‚æ’åºï¼ˆsortï¼‰ã€æŸ¥æ‰¾ï¼ˆfindï¼‰ã€åˆå¹¶ï¼ˆmergeï¼‰ç­‰ã€‚STLç®—æ³•æä¾›äº†ç°æˆçš„æ¥å£ï¼ˆå‡½æ•°ï¼‰ï¼Œå¯ä»¥å¿«é€Ÿå®ç°ä¸Šè¿°æ“ä½œã€‚è€Œä¸”ä¸€èˆ¬æ¥è¯´ï¼ŒSTLçš„å®ç°è¿œæ¯”æˆ‘ä»¬è‡ªèº«å®ç°çš„ç®—æ³•è¦é«˜æ•ˆï¼Œå°½é‡é¿å…è‡ªå·±é€ è½®å­ï¼Œç›´æ¥ä½¿ç”¨STLä¸­çš„æ¥å£å‡½æ•°æ›´å¥½ã€‚ iteratorï¼ˆè¿­ä»£å™¨ï¼‰ï¼Œæä¾›äº†éå†ä¸åŒå®¹å™¨ï¼ˆæˆ–æ•°ç»„ï¼‰çš„å…ƒç´ æ—¶çš„ç»Ÿä¸€è®¿é—®æ–¹å¼ã€‚è¿™å¾—ç›ŠäºSTLä¸ºæ¯ç§å®¹å™¨ç±»è®¾è®¡äº†ä¸€ä¸ªå†…åµŒçš„iteratorç±»ï¼Œä¸åŒçš„å®¹å™¨éƒ½æœ‰è‡ªå·±ä¸“å±çš„iteratorï¼Œå› æ­¤è®¿é—®ä¸åŒå®¹å™¨ä¸­çš„æ•°æ®å¯ç»Ÿä¸€ä½¿ç”¨container&lt;type&gt;::iteratoræ–¹å¼ï¼š 12345vector&lt;int&gt; v &#123;1,2,3,4,5&#125;; // vectorvector&lt;int&gt;::iterator t = v.begin(); // iteratorarray&lt;int,5&gt; arr &#123;1,2,3,4,5&#125;; // arrayarray&lt;int,5&gt;::iterator t = arr.begin(); // iterator æ™®é€šæ•°ç»„åä¹Ÿå¯è§†ä¸ºä¸€ä¸ªæŒ‡å‘é¦–å…ƒç´ çš„è¿­ä»£å™¨ï¼š 12int* arr = new int[5]&#123;1,2,3,4,5&#125;; *(arr++); // 2, arrä½œä¸ºè¿­ä»£å™¨ æ›´å¦™çš„æ˜¯ï¼Œè¿­ä»£å™¨ä½¿å¾—å®¹å™¨å’Œç®—æ³•çš„å®ç°å¯ä»¥åˆ†å¼€ï¼Œå¿…è¦æ—¶åˆå¯ä½œä¸ºâ€œç²˜åˆå‰‚â€å°†äºŒè€…è”ç³»èµ·æ¥ã€‚ ç°åœ¨æˆ‘ä»¬æŒ‰ï¼šè¿­ä»£å™¨ã€å®¹å™¨ã€ç®—æ³•çš„é¡ºåºä¾æ¬¡å¯¹STLè¿›è¡Œè¯¦ç»†ä»‹ç»ã€‚ 9.1 è¿­ä»£å™¨ æ­£å¦‚å‰è¿°ï¼Œè¿­ä»£å™¨ç”¨äºéå†å®¹å™¨ï¼ˆæˆ–æ•°ç»„ï¼‰ä¸­å­˜å‚¨çš„å…ƒç´ ã€‚ 9.1.1 è®¤è¯†è¿­ä»£å™¨ å®¹å™¨è¿­ä»£å™¨ï¼šiterator STL æ ‡å‡†åº“ä¸ºæ¯ä¸€ç§æ ‡å‡†å®¹å™¨å®šä¹‰äº†è¿­ä»£å™¨ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§ä¸‹é¢æ–¹å¼è¿›è¡Œè®¿é—®ï¼š 1&lt;å®¹å™¨ç±»å&gt;::iterator å°±åƒï¼š 12vector&lt;int&gt;::iterator;array&lt;int,5&gt;::iterator; è¿™é‡Œçš„ç±»æˆå‘˜&lt;å®¹å™¨ç±»å&gt;::iterator å¯¹äºä¸åŒå®¹å™¨ï¼Œè¿”å›çš„æ˜¯ä¸åŒåŠŸèƒ½çš„è¿­ä»£å™¨ã€‚ å®¹å™¨ åº•å±‚æ•°æ®ç»“æ„ è¿­ä»£å™¨ç±»å‹ array æ•°ç»„ éšæœºè®¿é—®è¿­ä»£å™¨ vector æ•°ç»„ éšæœºè®¿é—®è¿­ä»£å™¨ deque æ•°ç»„ éšæœºè®¿é—®è¿­ä»£å™¨ list åŒé“¾è¡¨ åŒå‘è¿­ä»£å™¨ set / multiset / map / multimap çº¢é»‘æ ‘ åŒå‘è¿­ä»£å™¨ forward_list å•é“¾è¡¨ æ­£å‘è¿­ä»£å™¨ unordered_map / unordered_set / â€¦ å“ˆå¸Œè¡¨ æ­£å‘è¿­ä»£å™¨ stack / queue å¯¹åŸºç¡€å®¹å™¨listã€dequeç­‰è¿›è¡Œå°è£… ä¸æ”¯æŒè¿­ä»£å™¨ ä¸Šè¿°ä¸‰ç§è¿­ä»£å™¨è§£é‡Šå¦‚ä¸‹ï¼š ä»¥ä¸‹pã€qä»£è¡¨å¯¹åº”çš„è¿­ä»£å™¨ã€‚ è¾“å…¥ã€è¾“å‡ºè¿­ä»£å™¨ï¼šæ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒä»¬ä¸æ˜¯æŠŠå®¹å™¨ï¼ˆæˆ–æ•°ç»„ï¼‰å½“åšæ“ä½œå¯¹è±¡ï¼Œè€Œæ˜¯æŠŠè¾“å…¥æµ/è¾“å‡ºæµä½œä¸ºæ“ä½œå¯¹è±¡ã€‚ è¾“å…¥è¿­ä»£å™¨ï¼šåªè¯»ï¼Œä¸€æ¬¡ä¼ é€’ ï¼Œä¸ºè¾“å…¥è¿­ä»£å™¨é¢„å®šä¹‰å®ç°åªæœ‰istream_iteratorå’Œistreambuf_iteratorï¼Œç”¨äºä»ä¸€ä¸ªè¾“å…¥æµä¸­è¯»å–æ•°æ®ã€‚å…¶æ”¯æŒçš„æ“ä½œç¬¦æœ‰ *p,++p,p++,p!=q,p == q ï¼› è¾“å‡ºè¿­ä»£å™¨ï¼šåªå†™ï¼Œä¸€æ¬¡ä¼ é€’ ï¼Œä¸ºè¾“å‡ºè¿­ä»£å™¨çš„é¢„å®šä¹‰å®ç°åªæœ‰ostream_iteratorå’Œostreambuf_iteratorï¼Œç”¨äºå‘ä¸€ä¸ªè¾“å‡ºæµå†™æ•°æ®ã€‚æ”¯æŒçš„æ“ä½œç¬¦å’Œè¾“å…¥è¿­ä»£å™¨ä¸€è‡´ã€‚ æ­£å‘è¿­ä»£å™¨ï¼šç»“åˆäº†è¾“å…¥ã€è¾“å‡ºè¿­ä»£å™¨å‡ ä¹æ‰€æœ‰çš„åŠŸèƒ½ï¼Œæ”¯æŒæ­£å‘éå†ã€å–å€¼ã€èµ‹å€¼åŠç›¸å…³æ¯”è¾ƒæ“ä½œã€‚ æ“ä½œ æè¿° p++ æˆ– ++p è¿”å›påä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ *p è·å–è¿­ä»£å™¨æ‰€æŒ‡å‘å…ƒç´ çš„å€¼ p = p+1 èµ‹å€¼æ“ä½œ p == p+1 æ¯”è¾ƒæ“ä½œ p != p+1 æ¯”è¾ƒæ“ä½œ åŒå‘è¿­ä»£å™¨ï¼šå…·æœ‰æ­£å‘è¿­ä»£å™¨çš„å…¨éƒ¨åŠŸèƒ½ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜å¯ä»¥å‘åç§»åŠ¨ï¼Œå³--pæˆ–p-- ã€‚ é¢å¤–æ“ä½œï¼ˆç›¸æ¯”æ­£å‘è¿­ä»£å™¨ï¼‰ æè¿° p-- æˆ– --p è¿”å›på‰ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ éšæœºè®¿é—®è¿­ä»£å™¨ï¼šå…·æœ‰åŒå‘è¿­ä»£å™¨çš„å…¨éƒ¨åŠŸèƒ½ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜å¯ä»¥éšæœºéå†å®¹å™¨å…ƒç´ ï¼ˆæ˜¾ç„¶ï¼ŒæŒ‡é’ˆå°±æ˜¯è¿™ä¹ˆä¸€ä¸ªè¿­ä»£å™¨ï¼‰ã€‚ é¢å¤–æ“ä½œï¼ˆç›¸æ¯”åŒå‘è¿­ä»£å™¨ï¼‰ æè¿° p+=i p å¾€åç§»åŠ¨ i ä¸ªå…ƒç´  p-=i p å¾€å‰ç§»åŠ¨ i ä¸ªå…ƒç´  p+i è¿”å› p åé¢ç¬¬ i ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ p-i è¿”å› p å‰é¢ç¬¬ i ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ p[i] è¿”å› p åé¢ç¬¬ i ä¸ªå…ƒç´ çš„å¼•ç”¨ æ­¤å¤–ï¼Œä¸¤ä¸ªéšæœºè®¿é—®è¿­ä»£å™¨ p1ã€p2 ï¼š å¯ä»¥ç”¨ &lt;ã€&gt;ã€&lt;=ã€&gt;= è¿ç®—ç¬¦è¿›è¡Œæ¯”è¾ƒï¼› è¡¨è¾¾å¼ p2-p1 ä¹Ÿæ˜¯æœ‰å®šä¹‰çš„ï¼Œè¿”å›åŒºé—´[p1,p2]çš„å…ƒç´ ä¸ªæ•°ã€‚ å†æ€è€ƒä¸åŒå®¹å™¨å¯¹åº”çš„è¿­ä»£å™¨å°±å¾ˆå¥½ç†è§£äº†ï¼š åº•å±‚æ•°æ®ç»“æ„æ˜¯æ•°ç»„çš„ï¼ˆarray/vector/dequeï¼‰ï¼Œå…·ä½“éšæœºè®¿é—®çš„ç‰¹æ€§ï¼Œè‡ªç„¶æœ€é€‚åˆéšæœºè¿­ä»£å™¨ï¼› åº•å±‚æ•°æ®ç»“æ„æ˜¯åŒé“¾è¡¨å’Œçº¢é»‘æ ‘çš„ï¼ˆlist/set/mapï¼‰ï¼Œæ— æ³•éšæœºè®¿é—®ï¼Œä½†å¯ä»¥å‰ã€åæ–¹å‘éå†ï¼Œæ‰€ä»¥ä½¿ç”¨åŒå‘è¿­ä»£å™¨ï¼› åº•å±‚æ•°æ®ç»“æ„æ˜¯å•é“¾è¡¨ã€å“ˆå¸Œè¡¨çš„ï¼ˆforward_list/unordered_map / unordered_setï¼‰ï¼Œæ— æ³•éšæœºè®¿é—®ä¹Ÿæ— æ³•æ­£å‘éå†ï¼Œæœ€ååªèƒ½ä½¿ç”¨æ­£å‘è¿­ä»£å™¨ã€‚ stack / queue ä¸ºäº†ç»´æŒç‰¹æ®Šçš„æ•°æ®è®¿é—®è§„åˆ™â€œå…ˆè¿›åå‡ºâ€ / â€œå…ˆè¿›å…ˆå‡ºâ€ï¼Œä¸å…è®¸å‰/å/éšæœºè¿­ä»£å™¨åœ¨è¿™é‡Œä½¿ç”¨ï¼Œå¦åˆ™ä¼šç ´åè§„åˆ™ã€‚ å®¹å™¨å…¶å®ƒè¿­ä»£å™¨ æ¯ä¸ªå®¹å™¨ç±»é™¤äº†æˆå‘˜iteratorè¿˜å¯èƒ½æœ‰å…¶å®ƒçš„è¿­ä»£å™¨ï¼š è¿­ä»£å™¨ ä½¿ç”¨æ ¼å¼ é»˜è®¤è¿­ä»£å™¨ &lt;å®¹å™¨ç±»å&gt;::iterator å¸¸é‡æ­£å‘è¿­ä»£å™¨ &lt;å®¹å™¨ç±»å&gt;::const_iterator åå‘è¿­ä»£å™¨ &lt;å®¹å™¨ç±»å&gt;::reverse_iterator å¸¸é‡åå‘è¿­ä»£å™¨ &lt;å®¹å™¨ç±»å&gt;::const_reverse_iterator è¿™äº›è¿­ä»£å™¨æ˜¯å¯¹ç±»æˆå‘˜iteratorçš„è¿›ä¸€æ­¥é™åˆ¶ã€‚ å¸¸é‡æ­£å‘/åå‘è¿­ä»£å™¨ï¼šä¿ç•™iteratorçš„åŸºæœ¬ç‰¹æ€§ï¼Œä½†å¸¸é‡è¿­ä»£å™¨æ— æ³•ä¿®æ”¹å…¶æŒ‡å‘çš„å…ƒç´ ï¼› åå‘è¿­ä»£å™¨ï¼šä¿ç•™iteratorçš„åŸºæœ¬ç‰¹æ€§ï¼Œä½†iteratorè¿›è¡Œ ++ æ“ä½œæ—¶ï¼Œè¿­ä»£å™¨ä¼šæŒ‡å‘å®¹å™¨ä¸­çš„åä¸€ä¸ªå…ƒç´ ï¼›è€Œåå‘è¿­ä»£å™¨è¿›è¡Œ ++ æ“ä½œæ—¶ï¼Œè¿­ä»£å™¨ä¼šæŒ‡å‘å®¹å™¨ä¸­çš„å‰ä¸€ä¸ªå…ƒç´ ã€‚ æ“ä½œ æè¿° p++ æˆ– ++p è¿”å›på‰ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ ä¸è¿‡ä»¥ä¸Š 4 ç§å®šä¹‰è¿­ä»£å™¨ï¼Œå¹¶ä¸æ˜¯æ¯ä¸ªå®¹å™¨éƒ½å…¨éƒ¨æ‹¥æœ‰ã€‚ éƒ¨åˆ†å®¹å™¨åŒæ—¶æ”¯æŒä»¥ä¸Š 4 ç§æ–¹å¼ï¼Œæ¯”å¦‚ arrayã€dequeã€vectorï¼› è€Œæœ‰äº›å®¹å™¨åªæ”¯æŒéƒ¨åˆ†ï¼Œä¾‹å¦‚ forward_list å®¹å™¨åªæ”¯æŒæ­£å‘è¿­ä»£å™¨ï¼Œä¸æ”¯æŒåå‘è¿­ä»£å™¨ã€‚ ä»¥vectorä¸ºä¾‹æ¼”ç¤ºvectorç±»ä¸­å››ç§è¿­ä»£å™¨æˆå‘˜çš„ä½¿ç”¨ã€‚ åŒå‰ï¼Œvectorçš„iteratoræ˜¯éšæœºè¿­ä»£å™¨ï¼Œå¸¸é‡è¿­ä»£å™¨å’Œåå‘è¿­ä»£å™¨åªæ˜¯å¯¹iteratorçš„è¿›ä¸€æ­¥é™åˆ¶ï¼Œä½†ä¹Ÿå…·æœ‰éšæœºè¿­ä»£å™¨çš„åŸºæœ¬ç‰¹æ€§ã€‚ 123456789101112131415161718192021222324252627282930313233#include &lt;vector&gt;#include &lt;iostream&gt;int main()&#123; vector&lt;int&gt; vec &#123;1,2,3,4,5&#125;; // vectoré»˜è®¤çš„æ˜¯éšæœºè¿­ä»£å™¨ std::cout &lt;&lt; &quot;éšæœºè¿­ä»£å™¨éå†ï¼š&quot;; vector&lt;int&gt;::iterator iter = vec.begin(); iter[1] = 20; // éšæœºè¿­ä»£å™¨ç‰¹æ€§[] for(; iter != vec.end() ; iter++) std::cout &lt;&lt; *(iter) &lt;&lt; &quot; &quot;; // 1 20 3 4 5 // å¸¸é‡è¿­ä»£å™¨ std::cout &lt;&lt; &quot;\\nå¸¸é‡è¿­ä»£å™¨éå†ï¼š&quot;; vector&lt;int&gt;::const_iterator c_iter = vec.cbegin(); // c_iter[1] = 20; // errorï¼Œåªè¯» // æ³¨æ„ï¼Œrbegin()/crbegin() è¿”å›çš„æ˜¯å°¾å…ƒç´ è¿­ä»£å™¨ // åå‘è¿­ä»£å™¨ std::cout &lt;&lt; &quot;\\nåå‘è¿­ä»£å™¨éå†ï¼š&quot;; vector&lt;int&gt;::reverse_iterator r_iter = vec.rbegin(); for(; r_iter != vec.rend() ; r_iter++) std::cout &lt;&lt; *(r_iter) &lt;&lt; &quot; &quot;; // 5 4 3 20 1 // å¸¸é‡åå‘è¿­ä»£å™¨ std::cout &lt;&lt; &quot;\\nå¸¸é‡åå‘è¿­ä»£å™¨éå†ï¼š&quot;; vector&lt;int&gt;::const_reverse_iterator cr_iter = vec.crbegin(); // c_iter[1] = 20; // errorï¼Œåªè¯» return 0;&#125; è¾“å‡ºï¼š 123[root@roy-cpp test]# ./test.out éšæœºè¿­ä»£å™¨éå†ï¼š1 20 3 4 5 åå‘è¿­ä»£å™¨éå†ï¼š5 4 3 20 1 å®é™…ç¼–ç ä¸­ï¼Œå¯ç”¨autoå…³é”®å­—å‡å°‘å®šä¹‰è¿­ä»£å™¨ç±»å‹æ—¶çš„ä¹¦å†™ï¼š 1auto iter = vec.begin(); ä¸‹æ–‡æˆ‘ä»¬ä¼šé»˜è®¤é‡‡ç”¨è¿™ç§ä¹¦å†™æ–¹å¼ã€‚æ›´å¤šè¿­ä»£å™¨çš„ä½¿ç”¨ç¤ºä¾‹ä¼šç©¿æ’åœ¨åæ–‡ä¸­ã€‚ 9.1.2 è¿­ä»£å™¨å’ŒæŒ‡é’ˆï¼Ÿ è¿­ä»£å™¨å’ŒæŒ‡é’ˆè¡¨ç°å¾—å’ŒæŒ‡é’ˆæä¸ºç±»ä¼¼ï¼Œä»¥è‡³äºæˆ‘ä»¬ä¼šäº§ç”Ÿç–‘æƒ‘ï¼šè¿­ä»£å™¨æ˜¯ä»€ä¹ˆï¼Ÿå®ƒå°±æ˜¯æŒ‡é’ˆå—ï¼Ÿ å…ˆè¯´ç»“è®ºï¼Œè¿­ä»£å™¨ä¸æ˜¯æŒ‡é’ˆï¼Œå®ƒåªæ˜¯æŒ‡é’ˆçš„ä¸€å±‚å°è£…ï¼Œåœ¨STLä¸­å®ç°ä¸ºä¸€ä¸ªæ¨¡æ¿ç±»ã€‚ ä¸ºä»€ä¹ˆè¦è¿›è¡Œè¿™ç§å°è£…ï¼Ÿ è¿™æ ·å¯ç»Ÿä¸€ä¸åŒå®¹å™¨çš„æŒ‡é’ˆæ“ä½œã€‚æ¯”å¦‚ï¼Œarray/list/â€¦åº•å±‚éƒ½æ˜¯åˆ©ç”¨æŒ‡é’ˆç®—æœ¯è¿ç®—æŸ¥æ‰¾å…ƒç´ ï¼Œä½†å…·ä½“çš„è¡Œä¸ºä¸åŒï¼Œé‡‡ç”¨iteratorå¯æŠŠåº•å±‚æŒ‡é’ˆæ“ä½œæŠ½è±¡å‡ºæ¥ï¼Œæ ¹æ®å®¹å™¨ä¸åŒçš„åº•å±‚æ•°æ®ç»“æ„æ¥å®ç°ä¸åŒçš„++ã€â€“ç­‰æŒ‡é’ˆæ“ä½œã€‚ æºç ç®€å•è§‚å¯Ÿè¿­ä»£å™¨ã€‚ 1234567#include &lt;vector&gt;int main()&#123; vector&lt;int&gt; vec &#123;1,2,3,4,5&#125;; vector&lt;int&gt;::iterator iter = vec.begin(); &#125; F12æŸ¥çœ‹vector&lt;int&gt;::iteratorå®šä¹‰ï¼š iteratorå®šä¹‰åœ¨æ¨¡æ¿ç±»vectorä¸­ï¼Œæ˜¯ __gnu_cxx::__normal_iterator&lt;pointer, vector&gt; çš„åˆ«åï¼Œæ³¨æ„åˆ°æ¨¡æ¿å‚æ•°pointerï¼› __normal_iteratoræ˜¯linuxä¸­STLè‡ªå®šä¹‰çš„è¿­ä»£å™¨æ¨¡æ¿ï¼Œè€Œpointeræ˜¯æ™®é€šæŒ‡é’ˆç±»å‹åˆ«åï¼Œè¿™é‡Œæ˜¯int* ã€‚ ç»§ç»­è¿›å…¥__normal_iteratorç±»ä¸­ï¼š _M_current ç±»å‹ä¸º_Iterator ï¼Œå³ä¸ºpointerï¼ˆè¿™é‡Œæ˜¯int*ï¼‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘åº•å±‚æ•°ç»„é¦–å…ƒç´  ã€‚ ç±»ä¸­è¿˜æœ‰è¿­ä»£å™¨çš„å„ç§æ“ä½œï¼Œä»¥++æ“ä½œä¸ºä¾‹ï¼š å¯è§è¿­ä»£å™¨ç¡®å®åªæ˜¯å¯¹æŒ‡é’ˆè¿›è¡Œäº†ä¸€å±‚å°è£…ï¼Œæœ¬è´¨è¿˜æ˜¯é€šè¿‡æŒ‡é’ˆå®ç°äº†å„ç§æ“ä½œã€‚ 9.2 å®¹å™¨ STLä¸­çš„å®¹å™¨ä¹Ÿæ˜¯æ¨¡æ¿ç±»ï¼Œæœ¬è´¨æ˜¯å°è£…äº†ä¸åŒçš„åŸºæœ¬æ•°æ®ç»“æ„ï¼ˆæ•°ç»„ã€é“¾è¡¨ç­‰ï¼‰çš„æ¨¡æ¿ç±»ã€‚STLæä¾›ä¸‰ç§æ ‡å‡†å®¹å™¨ï¼Œåˆ†åˆ«æ˜¯ï¼š åºåˆ—å®¹å™¨ æ’åºå®¹å™¨ å“ˆå¸Œå®¹å™¨ è¿™ä¸‰ç§å®¹å™¨ä¸»è¦ç‰¹ç‚¹å¦‚ä¸‹ã€‚ å®¹å™¨ç§ç±» åŒ…å«çš„å…·ä½“å®¹å™¨ åº•å±‚æ•°æ®ç»“æ„ ç‰¹ç‚¹ åºåˆ—å®¹å™¨ vector å‘é‡å®¹å™¨ã€list åˆ—è¡¨å®¹å™¨ä»¥åŠ deque åŒç«¯é˜Ÿåˆ—å®¹å™¨ æ•°ç»„æˆ–é“¾è¡¨ åºåˆ—å®¹å™¨ä¸­çš„å…ƒç´ ä»¥çº¿æ€§æ–¹å¼å­˜å‚¨ï¼Œä½†å…ƒç´ ä¸æ˜¯æ’å¥½åºçš„ æ’åºå®¹å™¨ set é›†åˆå®¹å™¨ã€multiset å¤šé‡é›†åˆå®¹å™¨ã€map æ˜ å°„å®¹å™¨ä»¥åŠ multimap å¤šé‡æ˜ å°„å®¹å™¨ çº¢é»‘æ ‘ æ’åºå®¹å™¨ä¸­çš„å…ƒç´ ï¼Œä»¥é”®å€¼å¯¹å½¢å¼å­˜å‚¨ï¼Œé»˜è®¤æ˜¯æŒ‰é”®å€¼æ’åºå¥½çš„ å“ˆå¸Œå®¹å™¨ unordered_set å“ˆå¸Œé›†åˆã€unordered_multiset å“ˆå¸Œå¤šé‡é›†åˆã€unordered_map å“ˆå¸Œæ˜ å°„ä»¥åŠ unordered_multimap å“ˆå¸Œå¤šé‡æ˜ å°„ å“ˆå¸Œè¡¨ å“ˆå¸Œå®¹å™¨ä¸­å…ƒç´ åŒæ ·ä»¥é”®å€¼å¯¹æ–¹å¼å­˜å‚¨ï¼Œä½†å…ƒç´ æ˜¯æœªæ’åºçš„ï¼Œå…ƒç´ çš„ä½ç½®ç”±å“ˆå¸Œå‡½æ•°ç¡®å®š ä¸‹é¢å¼€å§‹å…·ä½“ä»‹ç»ã€‚ 9.2.1 åºåˆ—å¼å®¹å™¨ æœ¬èŠ‚ä¸»è¦æ¢è®¨ä»¥ä¸‹å®¹å™¨ï¼š å®¹å™¨ åº•å±‚æ•°æ®ç»“æ„ ç‰¹ç‚¹ è¿­ä»£å™¨ç±»å‹ array æ•°ç»„ å¤§å°å›ºå®šã€æ— æ³•ä¿®æ”¹ éšæœºè¿­ä»£å™¨ vector æ•°ç»„ å¤§å°å¯å˜ã€åªèƒ½å°¾éƒ¨æ’å…¥/åˆ é™¤ éšæœºè¿­ä»£å™¨ deque æ•°ç»„ å¤§å°å¯å˜ã€åŒå‘é˜Ÿåˆ—ï¼Œå¤´å°¾å¯é«˜æ•ˆæ’å…¥/åˆ é™¤ éšæœºè¿­ä»£å™¨ list åŒé“¾è¡¨ å¤§å°å¯å˜ï¼ŒåŒé“¾è¡¨ï¼Œå¤´å°¾å¯é«˜æ•ˆæ’å…¥/åˆ é™¤ åŒå‘è¿­ä»£å™¨ forward_list å•é“¾è¡¨ å¤§å°å¯å˜ï¼Œå•é“¾è¡¨ï¼Œä»…å¯åœ¨å¤´éƒ¨æ’å…¥/åˆ é™¤ å‰å‘è¿­ä»£å™¨ å®ƒä»¬æœ€ä¸»è¦çš„åŒºåˆ«ï¼Œç”±åº•å±‚æ•°æ®ç»“æ„å†³å®šã€‚ array array å®¹å™¨åº•å±‚æ•°æ®ç»“æ„æ˜¯æ™®é€šçš„é™æ€æ•°ç»„ï¼Œæ‰€ä»¥arrayå¤§å°æ˜¯å›ºå®šçš„ï¼Œæ— æ³•åŠ¨æ€æ‰©å±•ã€‚ array å®¹å™¨ä»¥ç±»æ¨¡æ¿çš„å½¢å¼å®šä¹‰åœ¨ &lt;array&gt; å¤´æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12template&lt;typename _Tp, std::size_t _Nm&gt;struct array è¿™é‡Œå®é™…æ˜¯ä½¿ç”¨æ¨¡æ¿ç»“æ„ä½“structï¼Œä½†åœ¨C++ä¸­å’Œclasså·®åˆ«ä¸å¤§ï¼Œå¯ä»¥è§†ä¸ºç±»æ¨¡æ¿ã€‚ åœ¨ array&lt;_Tp,_Nm&gt; æ¨¡æ¿ä¸­ï¼š _Tpï¼Œç”¨äºæŒ‡æ˜å®¹å™¨ä¸­å…ƒç´ æ•°æ®ç±»å‹ï¼› _Nmï¼Œç”¨äºæŒ‡æ˜å®¹å™¨çš„å¤§å°ã€‚ ä¸€ä¸ªç®€å•ä½¿ç”¨å®ä¾‹ã€‚ 12345678910111213141516#include &lt;iostream&gt;#include &lt;array&gt;int main()&#123; array&lt;int, 5&gt; arr &#123;10, 20, 30, 40, 50&#125;; // åˆå§‹åŒ– auto first = arr.cbegin(); auto last = arr.cend(); while (first != last) &#123; std::cout &lt;&lt; *first &lt;&lt; &quot; &quot;; ++first; &#125; std::cout &lt;&lt; &quot;\\n&quot;; return 0; &#125; è¾“å‡ºï¼š åº•å±‚å®ç° æœ¬èŠ‚ä¸»è¦æ¢è®¨ä»¥ä¸‹é—®é¢˜ï¼š arrayåº•å±‚æ•°æ®ç»“æ„ï¼Ÿ arrayè¿­ä»£å™¨ç»“æ„ï¼Ÿ æˆ‘ä»¬å‰é¢è¯´è¿‡arrayåº•å±‚æ˜¯ä¸€ä¸ªå®¹é‡å¤§å°å›ºå®šçš„æ•°ç»„ï¼Œå®ƒå…·ä½“æ˜¯ä»€ä¹ˆæ ·å‘¢ï¼Ÿ 1array&lt;int, 5&gt; arr&#123;10, 20, 30, 40, 50&#125;; F12æŸ¥çœ‹arrayå®šä¹‰ï¼š æ³¨æ„åˆ°ä¸Šé¢çº¢æ¡†å¤„çš„ä»£ç ï¼š 12typedef _GLIBCXX_STD_C::__array_traits&lt;_Tp, _Nm&gt; _AT_Type;typename _AT_Type::_Type _M_elems; // typenameè¯´æ˜_AT_Type::_Typeæ˜¯ä¸€ä¸ªç±»å‹ æˆå‘˜ _M_elemsä¾¿æ˜¯åº•å±‚æ•°ç»„ã€‚è¦åˆ†æå‡º_M_elemsç±»å‹ï¼Œé¦–å…ˆè¦çŸ¥é“_AT_Type::_Typeæ˜¯ä»€ä¹ˆæ„æ€ã€‚ æ³¨æ„åˆ°ç¬¬ä¸€è¡Œä»£ç ï¼Œ_AT_Typeæ˜¯__array_traits&lt;_Tp, _Nm&gt;çš„åˆ«åï¼ŒæŸ¥çœ‹__array_traitså®šä¹‰ï¼š 123456789template&lt;typename _Tp, std::size_t _Nm&gt;struct __array_traits&#123; typedef _Tp _Type[_Nm]; // _Typeæ˜¯ä¸€ä¸ªé™æ€æ•°ç»„ static constexpr _Tp&amp; _S_ref(const _Type&amp; __t, std::size_t __n) noexcept &#123; return const_cast&lt;_Tp&amp;&gt;(__t[__n]); &#125;&#125;; æ‰€ä»¥ï¼š_AT_Typeå°±æ˜¯ä¸€ä¸ªarrayèƒå–ç±»ï¼Œè€Œ_Typeæ˜¯å®ƒçš„æˆå‘˜ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªé™æ€æ•°ç»„ï¼Œç±»å‹ä¸º_Tp[_Nm]ã€‚ å›åˆ°_M_elemsç›¸å…³å®šä¹‰ï¼š 1typename _AT_Type::_Type _M_elems; _M_elemsçœŸæ­£é¢è²Œä¾¿å‘¼ä¹‹æ¬²å‡ºï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­_Tpä¸ºintï¼Œ_Nmä¸º5 ï¼Œæ‰€ä»¥ä¸Šè¿°ç­‰ä»·äºï¼š 1int[5] _M_elems; æ¯ä¸ªå®¹å™¨éƒ½ä¼šæœ‰å¯¹åº”çš„è¿­ä»£å™¨ï¼Œarrayçš„è¿­ä»£å™¨æ˜¯ä»€ä¹ˆï¼Ÿ è¯´å‡ºæ¥ä½ æœ‰ç‚¹æƒŠè®¶ï¼Œarrayçš„è¿­ä»£å™¨å°±ç®€å•å®ç°ä¸ºæŒ‡é’ˆã€‚ iterator å³ä¸º_Tp * ï¼› const_iterator å³ä¸ºconst _Tp * ã€‚ æ‰€ä»¥ä½ ä¼šå‘ç°å³ä½¿arrayçš„iterator æ²¡æœ‰å®ç°operator++å‡½æ•° ï¼Œä¾æ—§å¯ä»¥è¿™ä¹ˆä½¿ç”¨ï¼š 123array&lt;int,3&gt; arr&#123;1,2,3&#125;;auto iter = arr.begin(); // ç­‰ä»·äº int* iter = arr.begin(); iter++; // ok å› ä¸ºæ­¤æ—¶å°±æ˜¯å¯¹ä¸€ä¸ªint*æŒ‡é’ˆè¿›è¡Œ++æ“ä½œã€‚ arrayè®©æˆ‘ä»¬å¯ä»¥çµæ´»å®šä¹‰å„ç§ç±»å‹çš„æ•°ç»„ï¼Œä¿è¯äº†å®‰å…¨æ€§åˆå‡ ä¹ä¸æŸå¤±æ•ˆç‡ã€‚å¦‚æœæƒ³ä½¿ç”¨é™æ€æ•°ç»„ï¼ˆå›ºå®šæ•°ç»„ï¼‰ï¼Œarrayé¦–é€‰æ¨èä½¿ç”¨ã€‚ æˆå‘˜å‡½æ•° arrayå…·æœ‰ä¼—å¤šçš„æˆå‘˜å‡½æ•°ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¯¹arrayè¿›è¡Œå„ç§æ“ä½œã€‚ æˆ‘ä»¬å…ˆä¸€ç¹ä¸ºå¿«ã€‚ è¿­ä»£å™¨ç›¸å…³ æˆå‘˜å‡½æ•° åŠŸèƒ½ begin() è¿”å›æŒ‡å‘å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„æ­£å‘è¿­ä»£å™¨ end() è¿”å›æŒ‡å‘å®¹å™¨æœ€åä¸€ä¸ªå…ƒç´ ä¹‹åä¸€ä¸ªä½ç½®çš„æ­£å‘è¿­ä»£å™¨ rbegin() è¿”å›æŒ‡å‘æœ€åä¸€ä¸ªå…ƒç´ çš„åå‘è¿­ä»£å™¨ rend() è¿”å›æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ ä¹‹å‰ä¸€ä¸ªä½ç½®çš„åå‘è¿­ä»£å™¨ cbegin() å’Œ begin() åŠŸèƒ½ç›¸åŒï¼Œåªä¸è¿‡å…¶è¿”å›çš„è¿­ä»£å™¨ç±»å‹ä¸ºå¸¸é‡æ­£å‘è¿­ä»£å™¨ cend() å’Œ end() åŠŸèƒ½ç›¸åŒï¼Œåªä¸è¿‡å…¶è¿”å›çš„è¿­ä»£å™¨ç±»å‹ä¸ºå¸¸é‡æ­£å‘è¿­ä»£å™¨ crbegin() å’Œ rbegin() åŠŸèƒ½ç›¸åŒï¼Œåªä¸è¿‡å…¶è¿”å›çš„è¿­ä»£å™¨ç±»å‹ä¸ºå¸¸é‡åå‘è¿­ä»£å™¨ crend() å’Œ rend() åŠŸèƒ½ç›¸åŒï¼Œåªä¸è¿‡å…¶è¿”å›çš„è¿­ä»£å™¨ç±»å‹ä¸ºå¸¸é‡åå‘è¿­ä»£å™¨ æ³¨æ„ï¼Œå¦‚æœæ˜¯ const ç±»å‹å®¹å™¨ï¼Œè¿”å›çš„ä¸€å®šæ˜¯å¸¸é‡æ­£å‘è¿­ä»£å™¨ï¼Œå¸¸é‡è¿­ä»£å™¨ä¸èƒ½ä¿®æ”¹æŒ‡å‘çš„å…ƒç´ ï¼› begin() å’Œ end() ä¸ºC++11æ–°å¢ï¼Œæ“ä½œå¯¹è±¡è¿˜å¯ä»¥æ˜¯æ•°ç»„ã€‚ åŒ…å«ä½¿ç”¨çš„ä¸€äº›å°ä¾‹å­ ä¸»è¦æˆå‘˜å‡½æ•° æ ‡ç²—éƒ¨åˆ†æ˜¯å¸¸ç”¨çš„å‡½æ•°ã€‚ æˆå‘˜å‡½æ•° åŠŸèƒ½ size() è¿”å›å®¹å™¨ä¸­å½“å‰å…ƒç´ çš„æ•°é‡ï¼Œå…¶å€¼å§‹ç»ˆç­‰äºåˆå§‹åŒ– array ç±»çš„ç¬¬äºŒä¸ªæ¨¡æ¿å‚æ•° N max_size() è¿”å›å®¹å™¨å¯å®¹çº³å…ƒç´ çš„æœ€å¤§æ•°é‡ï¼Œå…¶å€¼å§‹ç»ˆç­‰äºåˆå§‹åŒ– array ç±»çš„ç¬¬äºŒä¸ªæ¨¡æ¿å‚æ•° N empty() åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©ºï¼Œå’Œé€šè¿‡ size()==0 çš„åˆ¤æ–­æ¡ä»¶åŠŸèƒ½ç›¸åŒï¼Œä½†å…¶æ•ˆç‡å¯èƒ½æ›´å¿« at(n) è¿”å›å®¹å™¨ä¸­ n ä½ç½®å¤„å…ƒç´ çš„å¼•ç”¨ï¼Œä½œç”¨ç±»ä¼¼[]ï¼Œä½†è¯¥å‡½æ•°è¿˜ä¼šæ£€æŸ¥ n æ˜¯å¦æœ‰æ•ˆï¼Œæ— æ•ˆä¼šæŠ›å‡º out_of_range å¼‚å¸¸ front() è¿”å›å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç›´æ¥å¼•ç”¨ï¼Œè¯¥å‡½æ•°ä¸é€‚ç”¨äºç©ºçš„ array å®¹å™¨ back() è¿”å›å®¹å™¨ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„ç›´æ¥å¼•ç”¨ï¼Œè¯¥å‡½æ•°åŒæ ·ä¸é€‚ç”¨äºç©ºçš„ array å®¹å™¨ data() è¿”å›ä¸€ä¸ªæŒ‡å‘å®¹å™¨é¦–ä¸ªå…ƒç´ çš„æŒ‡é’ˆï¼Œåˆ©ç”¨è¯¥æŒ‡é’ˆå¯å®ç°å¤åˆ¶å®¹å™¨ä¸­æ‰€æœ‰å…ƒç´ ç­‰ç±»ä¼¼åŠŸèƒ½ fill(val) å°† val è¿™ä¸ªå€¼èµ‹å€¼ç»™å®¹å™¨ä¸­çš„æ¯ä¸ªå…ƒç´  array1.swap(array2) äº¤æ¢ array1 å’Œ array2 å®¹å™¨ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œä½†å‰ææ˜¯å®ƒä»¬å…·æœ‰ç›¸åŒçš„é•¿åº¦å’Œç±»å‹ã€‚ ç”±äºè¿™äº›å‡½æ•°éƒ½æ¯”è¾ƒç®€å•ï¼Œæ‰€ä»¥å°±ä¸ä¸¾ä¾‹è¯´æ˜å•¦ã€‚ vector vectoråŸºæœ¬æ˜¯å¹³æ—¶æœ€å¸¸ç”¨çš„å®¹å™¨ä¹‹ä¸€ï¼Œå’Œ array å®¹å™¨ç±»ä¼¼ï¼Œåº•å±‚æ•°æ®ç»“æ„éƒ½æ˜¯æ•°ç»„ï¼Œåªä¸è¿‡arrayæ˜¯é™æ€æ•°ç»„å¤§å°å›ºå®šï¼Œè€Œvectoråº•å±‚æ˜¯ä¸€ä¸ªåŠ¨æ€æ•°ç»„ã€‚ æœ€è®©äººæ¬£æ…°çš„æ˜¯ï¼Œvectorä¼šåŠ¨æ€æ‰©å±•ï¼ˆä½†ä¸ä¼šæ”¶ç¼©ï¼‰æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ï¼Œå³è‡ªåŠ¨æ‰©å®¹ï¼Œæˆ‘ä»¬æ— éœ€æ“å¿ƒæ•°ç»„å¢é•¿é—®é¢˜ã€‚ vectorå®¹å™¨ä»¥ç±»æ¨¡æ¿çš„å½¢å¼å®šä¹‰åœ¨ &lt;vector&gt; å¤´æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123template&lt;typename _Tp, typename _Alloc = std::allocator&lt;_Tp&gt; &gt;class vector : protected _Vector_base&lt;_Tp, _Alloc&gt; åœ¨ vector&lt;_Tp,_Alloc&gt; æ¨¡æ¿ä¸­ï¼š _Tp ï¼Œç”¨äºæŒ‡æ˜å®¹å™¨ä¸­å…ƒç´ æ•°æ®ç±»å‹ï¼› _Alloc ï¼Œå†…å­˜åˆ†é…å™¨ï¼Œé»˜è®¤é‡‡ç”¨äºŒçº§é…ç½®å™¨ï¼Œä¸€èˆ¬ä¸ç”¨æˆ‘ä»¬å…³å¿ƒã€‚ ç®€å•ä½¿ç”¨ç¤ºä¾‹ï¼š 1234567891011121314151617#include &lt;iostream&gt;#include &lt;vector&gt;int main()&#123; // vector&lt;int,std::allocator&lt;int&gt;&gt; vec &#123;1,2,3,4,5,6&#125;; // æ¨¡æ¿å‚æ•°å®Œæ•´ä½¿ç”¨ vector&lt;int&gt; vec &#123;1,2,3,4,5,6&#125;; vec.push_back(&quot;7&quot;); // ç»§ç»­æ’å…¥æ•°æ®ï¼Œvectorè‡ªåŠ¨æ‰©å®¹ï¼Œç¨‹åºå‘˜æ— éœ€å…³å¿ƒ vec.push_back(&quot;8&quot;); vec.push_back(&quot;9&quot;); for (auto i = vec.begin(); i &lt; vec.end(); i++) &#123; std::cout &lt;&lt; *i &lt;&lt; &quot; &quot;; &#125; std::cout &lt;&lt; &quot;\\n&quot;; return 0; &#125; å¯ä»¥çœ‹åˆ°ï¼Œç›¸æ¯”arrayï¼Œvectorå¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨push_backç­‰æ–¹æ³•æ’å…¥æ–°æ•°æ®ã€‚ è¾“å‡ºï¼š 12[root@roy-cpp test]# ./test.out 1 2 3 4 5 6 7 8 9 åº•å±‚å®ç° åœ¨æœ¬èŠ‚æˆ‘ä»¬ä¸»è¦æ¢è®¨ä»¥ä¸‹é—®é¢˜ï¼š vectoråº•å±‚æ•°æ®ç»“æ„ï¼Ÿ vectoråº•å±‚è¿­ä»£å™¨å¦‚ä½•å®ç°ï¼Ÿ vectoråº•å±‚æ˜¯å¦‚ä½•è¿›è¡Œåˆå§‹åŒ–çš„ï¼Ÿ vectoråº•å±‚è‡ªåŠ¨æ‰©å®¹æœºåˆ¶è¿‡ç¨‹å’ŒåŸç†ï¼Ÿ æˆ‘ä»¬å…ˆäº†è§£ä¸‹vectorç±»ç»§æ‰¿ç»“æ„åŠæ ¸å¿ƒæˆå‘˜ã€‚ æ³¨æ„åˆ°ï¼Œvector ç»§æ‰¿äº† _Vector_base ï¼Œ_Vector_baseä¸“é—¨è´Ÿè´£vectorçš„å†…å­˜ç®¡ç†ã€‚ _Vector_baseæ ¸å¿ƒæ˜¯å†…éƒ¨ç±»_Vector_impl ï¼Œå®ƒç»§æ‰¿äº†_Tp_alloc_type è·å¾—å†…å­˜åˆ†é…é‡Šæ”¾çš„åŠŸèƒ½ã€‚ _Vector_implæ ¸å¿ƒæˆå‘˜ï¼š M_startï¼Œ_M_finishï¼Œ_M_end_of_storage ï¼šæ‰€æœ‰å…³äºåœ°å€ï¼Œå®¹é‡å¤§å°ç­‰æ“ä½œéƒ½éœ€è¦ç”¨åˆ°è¿™ä¸‰ä¸ªæŒ‡é’ˆã€‚ _M_start ï¼Œä»£è¡¨èµ·å§‹ä½ç½®çš„æŒ‡é’ˆ _M_finish ï¼Œä»£è¡¨å·²å­˜å‚¨çš„å…ƒç´ çš„æœ«å°¾ä½ç½® _M_end_of_storageï¼Œ ä»£è¡¨æ•´ä¸ªvectorç©ºé—´çš„ç»“æŸä½ç½® _M_allocateå’Œ_M_deallocateï¼šåˆ†åˆ«åˆ†é…å’Œé‡Šæ”¾vectoræ‰€ç”¨å†…å­˜ï¼Œvectoråªéœ€è¦è´Ÿè´£å…ƒç´ æ„é€ å’Œææ„ã€‚ _M_allocateï¼Œæœ€ç»ˆé€šè¿‡mallocå®ç°å†…å­˜åˆ†é…ï¼› _M_deallocateï¼Œé€šè¿‡freeå®ç°å†…å­˜é‡Šæ”¾ã€‚ äº†è§£äº†vectorç±»å¤§è‡´ç»“æ„ï¼Œå†æ¥ä¾æ¬¡å›ç­”èŠ‚å‰çš„é—®é¢˜ï¼š vectoråº•å±‚æ•°æ®ç»“æ„ï¼Ÿ vectoråº•å±‚æ˜¯ä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼Œåˆå§‹åŒ–æ—¶ä¼šè®©æŒ‡é’ˆ_M_start ï¼ˆ_Tp*ç±»å‹ï¼‰ä¼šæŒ‡å‘åˆ†é…å†…å­˜ã€‚ vectorè¿­ä»£å™¨å¦‚ä½•å®ç°ï¼Ÿ åŒå‰9.1.2èŠ‚ï¼Œåœ¨vectorç±»ä¸­å¯æ‰¾åˆ°iteratorç›¸å…³å®šä¹‰ï¼š 1typedef __gnu_cxx::__normal_iterator&lt;pointer, vector&gt; iterator; è¿›å…¥__normal_iteratorç±»ä¸­ï¼š ä¸»è¦æˆå‘˜_M_current ç±»å‹ä¸º_Iterator ï¼Œå³ä¸ºpointerï¼ˆè¿™é‡Œæ˜¯int*ï¼‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘åº•å±‚æ•°ç»„é¦–å…ƒç´  ã€‚ ç±»ä¸­è¿˜å°è£…è¿­ä»£å™¨çš„å„ç§æ“ä½œï¼Œä»¥++æ“ä½œä¸ºä¾‹ï¼š vectoræ˜¯å¦‚ä½•è¿›è¡Œåˆå§‹åŒ–çš„ï¼Ÿ 1vector&lt;string&gt; vec &#123;&quot;Hello&quot;, &quot;World&quot;&#125;; vectorç±»åœ¨æ„é€ æ—¶åˆ†é…åˆå§‹æ•°ç»„å†…å­˜ã€‚vectorç±»æ”¯æŒå¤šç§æ„é€ å‡½æ•°ï¼Œå¦‚æ™®é€šæ„é€ å‡½æ•°ã€ç§»åŠ¨æ„é€ å‡½æ•°ã€æ‹·è´æ„é€ å‡½æ•°ç­‰ã€‚ ä»¥æ™®é€šæ„é€ å‡½æ•°ä¸ºä¾‹ï¼š 12345678910/** * @brief åˆå§‹åŒ–ä¸ºnä¸ª__valueå€¼ï¼Œå¦‚æœæ²¡æŒ‡å®šå°±ä½¿ç”¨è¯¥ç±»å‹é»˜è®¤å€¼ * @param __n The number of elements to initially create. * @param __a An allocator.*/explicit vector(size_type __n, const value_type&amp; __value = value_type(),const allocator_type&amp; __a = allocator_type()) : _Base(__n, __a) &#123; _M_fill_initialize(__n, __value); // åˆå§‹åŒ–æ‰€æœ‰å…ƒç´ ä¸º__value &#125; æ ¸å¿ƒæ˜¯è°ƒç”¨äº†åŸºç±»æ„é€ å‡½æ•°_Base(__n, __a) ï¼š 1typedef _Vector_base&lt;_Tp, _Alloc&gt; _Base; åœ¨_Vector_base æŸ¥åˆ°å…¶å®šä¹‰ï¼š å…³é”®å‡½æ•°_Vector_base::_M_create_storageå®ç°ä¸ºï¼š _M_allocate æœ€ç»ˆå°±æ˜¯é€šè¿‡_M_impl.allocateå®ç°ï¼› _M_impl.allocate æœ€ç»ˆé€šè¿‡mallocå®ç°å†…å­˜åˆ†é…ã€‚ ç»¼ä¸Šæ‰€è¿°ï¼Œvectoré€šè¿‡æ„é€ å‡½æ•°åˆå§‹åŒ–ï¼Œæœ€ç»ˆè°ƒç”¨mallocåˆ†é…äº†åº•å±‚æ•°ç»„å†…å­˜ç©ºé—´ã€‚ vectorè‡ªåŠ¨æ‰©å®¹æœºåˆ¶å®ç°çš„è¿‡ç¨‹å’ŒåŸç†ï¼Ÿ 123vec.push_back(&quot;7&quot;); // ç»§ç»­æ’å…¥æ•°æ®ï¼Œvectorè‡ªåŠ¨æ‰©å®¹ï¼Œç¨‹åºå‘˜æ— éœ€å…³å¿ƒvec.push_back(&quot;8&quot;);vec.push_back(&quot;9&quot;); å¦‚ä¸‹æ‰€ç¤ºï¼Œå·¦å›¾ä»£è¡¨æ‰©å®¹å‰çš„å­˜å‚¨ç»“æ„ï¼Œå³å›¾æ˜¯æ‰©å®¹åçš„å­˜å‚¨ç»“æ„ã€‚ æ‰©å®¹æ¡ä»¶ï¼š size()å‡½æ•°è¿”å›çš„æ˜¯å·²ç”¨ç©ºé—´å¤§å°ï¼Œcapacity()è¿”å›çš„æ˜¯æ€»ç©ºé—´å¤§å°ï¼Œcapacity()-size()åˆ™æ˜¯å‰©ä½™çš„å¯ç”¨ç©ºé—´å¤§å°ï¼› å½“size()å’Œcapacity()ç›¸ç­‰ï¼Œè¯´æ˜vectorç›®å‰çš„ç©ºé—´å·²è¢«ç”¨å®Œï¼Œå¦‚æœå†æ·»åŠ æ–°å…ƒç´ ï¼Œåˆ™ä¼šå¼•èµ·vectorç©ºé—´çš„åŠ¨æ€å¢é•¿ã€‚ æ‰©å®¹è¿‡ç¨‹ï¼š é‡æ–°åˆ†é…ä¸€å—ä¸¤å€äºåŸæ¥å¤§å°çš„å†…å­˜ç©ºé—´ï¼› å°†åŸæ¥çš„å­˜å‚¨ç©ºé—´çš„å…ƒç´ ï¼Œä¾æ¬¡æ‹·è´åˆ°æ–°çš„2*capacityå¤§å°çš„å­˜å‚¨ç©ºé—´ä¹‹ä¸­ã€‚ æˆå‘˜å‡½æ•° vectorå…·æœ‰ä¼—å¤šçš„æˆå‘˜å‡½æ•°ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¯¹vectorè¿›è¡Œå„ç§æ“ä½œã€‚ æˆ‘ä»¬å…ˆä¸€ç¹ä¸ºå¿«ã€‚ è¿­ä»£å™¨ç›¸å…³ åŒarrayã€‚ æˆå‘˜å‡½æ•° åŠŸèƒ½ begin() è¿”å›æŒ‡å‘å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„æ­£å‘è¿­ä»£å™¨ end() è¿”å›æŒ‡å‘å®¹å™¨æœ€åä¸€ä¸ªå…ƒç´ ä¹‹åä¸€ä¸ªä½ç½®çš„æ­£å‘è¿­ä»£å™¨ rbegin() è¿”å›æŒ‡å‘æœ€åä¸€ä¸ªå…ƒç´ çš„åå‘è¿­ä»£å™¨ rend() è¿”å›æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ ä¹‹å‰ä¸€ä¸ªä½ç½®çš„åå‘è¿­ä»£å™¨ cbegin() å’Œ begin() åŠŸèƒ½ç›¸åŒï¼Œåªä¸è¿‡å…¶è¿”å›çš„è¿­ä»£å™¨ç±»å‹ä¸ºå¸¸é‡æ­£å‘è¿­ä»£å™¨ cend() å’Œ end() åŠŸèƒ½ç›¸åŒï¼Œåªä¸è¿‡å…¶è¿”å›çš„è¿­ä»£å™¨ç±»å‹ä¸ºå¸¸é‡æ­£å‘è¿­ä»£å™¨ crbegin() å’Œ rbegin() åŠŸèƒ½ç›¸åŒï¼Œåªä¸è¿‡å…¶è¿”å›çš„è¿­ä»£å™¨ç±»å‹ä¸ºå¸¸é‡åå‘è¿­ä»£å™¨ crend() å’Œ rend() åŠŸèƒ½ç›¸åŒï¼Œåªä¸è¿‡å…¶è¿”å›çš„è¿­ä»£å™¨ç±»å‹ä¸ºå¸¸é‡åå‘è¿­ä»£å™¨ æ³¨æ„ï¼Œå¦‚æœæ˜¯ const ç±»å‹å®¹å™¨ï¼Œè¿”å›çš„ä¸€å®šæ˜¯å¸¸é‡æ­£å‘è¿­ä»£å™¨ï¼Œå¸¸é‡è¿­ä»£å™¨ä¸èƒ½ä¿®æ”¹æŒ‡å‘çš„å…ƒç´ ï¼› begin() å’Œ end() ä¸ºC++11æ–°å¢ï¼Œæ“ä½œå¯¹è±¡è¿˜å¯ä»¥æ˜¯æ•°ç»„ã€‚ ä¸»è¦æˆå‘˜å‡½æ•° æ ‡ç²—éƒ¨åˆ†æ˜¯å¸¸ç”¨çš„å‡½æ•°ã€‚ æˆå‘˜å‡½æ•° åŠŸèƒ½ size() è¿”å›å®¹å™¨ä¸­å½“å‰å…ƒç´ çš„æ•°é‡ capacity() è¿”å›å½“å‰å®¹é‡ reserve() å¢åŠ å®¹å™¨çš„å®¹é‡ max_size() è¿”å›å®¹å™¨å¯å®¹çº³å…ƒç´ çš„æœ€å¤§æ•°é‡ empty() åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©ºï¼Œå’Œé€šè¿‡ size()==0 çš„åˆ¤æ–­æ¡ä»¶åŠŸèƒ½ç›¸åŒï¼Œä½†å…¶æ•ˆç‡å¯èƒ½æ›´å¿« at(n) è¿”å›å®¹å™¨ä¸­ n ä½ç½®å¤„å…ƒç´ çš„å¼•ç”¨ï¼Œä½œç”¨ç±»ä¼¼[]ï¼Œä½†è¯¥å‡½æ•°è¿˜ä¼šæ£€æŸ¥ n æ˜¯å¦æœ‰æ•ˆï¼Œå¦‚æœä¸æ˜¯ä¼šæŠ›å‡º out_of_range å¼‚å¸¸ front() è¿”å›å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç›´æ¥å¼•ç”¨ back() è¿”å›å®¹å™¨ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„ç›´æ¥å¼•ç”¨ data() è¿”å›ä¸€ä¸ªæŒ‡å‘å®¹å™¨é¦–ä¸ªå…ƒç´ çš„æŒ‡é’ˆï¼Œåˆ©ç”¨è¯¥æŒ‡é’ˆå¯å®ç°å¤åˆ¶å®¹å™¨ä¸­æ‰€æœ‰å…ƒç´ ç­‰ç±»ä¼¼åŠŸèƒ½ swap() äº¤æ¢ä¸¤ä¸ªå®¹å™¨çš„æ‰€æœ‰å…ƒç´  ç›¸æ¯”arrayç‹¬æœ‰çš„æ–¹æ³•ï¼ˆå¯ä»¥å°¾éƒ¨æ’å…¥ã€åˆ é™¤å…ƒç´ ç­‰ï¼‰ï¼š æˆå‘˜å‡½æ•° åŠŸèƒ½ push_back() åœ¨å®¹å™¨çš„å°¾éƒ¨æ·»åŠ ä¸€ä¸ªå…ƒç´  pop_back() ç§»å‡ºå®¹å™¨å°¾éƒ¨çš„å…ƒç´  emplace_back() åœ¨å®¹å™¨çš„å°¾éƒ¨æ·»åŠ ä¸€ä¸ªå…ƒç´  erase() ç§»å‡ºä¸€ä¸ªå…ƒç´ æˆ–ä¸€æ®µå…ƒç´ ï¼Œè¿”å›æŒ‡å‘åˆ é™¤å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ clear() ç§»å‡ºæ‰€æœ‰çš„å…ƒç´ ï¼Œå®¹å™¨å¤§å°å˜ä¸º 0 å…³äºåˆ é™¤vectorç©ºé—´é‡Šæ”¾æœ‰äº›å°é—®é¢˜ã€‚ clear()ã€erase()æ–¹æ³•å‡ä¸ä¼šé‡Šæ”¾vectoræ‰€å ç”¨çš„å†…å­˜ç©ºé—´ã€‚ 1234567891011121314151617#include &lt;iostream&gt;#include &lt;vector&gt;int main() &#123; vector&lt;int&gt; vec &#123;1,2,3,4,5&#125;; std::cout&lt;&lt; vec.size() &lt;&lt; std::endl; // 5 std::cout&lt;&lt; vec.capacity() &lt;&lt; std::endl; // 5 vec.erase(vec.begin(), vec.begin()+1); std::cout&lt;&lt; vec.size() &lt;&lt; std::endl; // 4 std::cout&lt;&lt; vec.capacity() &lt;&lt; std::endl; // 5 , capacityæœªæ”¹å˜ vec.clear(); std::cout&lt;&lt; vec.size() &lt;&lt; std::endl; // 0 std::cout&lt;&lt; vec.capacity() &lt;&lt; std::endl; // 5 , capacityæœªæ”¹å˜&#125; å› ä¸ºvectorå†…å­˜å ç”¨ç©ºé—´åªå¢ä¸å‡ï¼š åˆ†é…äº†10,000ä¸ªå­—èŠ‚ï¼Œç„¶åeraseæ‰åé¢9,999ä¸ªï¼Œç•™ä¸‹ä¸€ä¸ªæœ‰æ•ˆå…ƒç´ ï¼Œä½†æ˜¯å†…å­˜å ç”¨ä»ä¸º10,000ä¸ªï¼› æ‰€æœ‰å†…å­˜ç©ºé—´ï¼Œåœ¨vectorå¯¹è±¡ææ„æ—¶æ‰èƒ½è¢«ç³»ç»Ÿå›æ”¶ã€‚ æ¢å¥è¯è¯´ï¼Œclear()ã€erase()æ–¹æ³•åªæ˜¯å‡å°‘äº†vectorçš„sizeå¤§å°ï¼Œæ²¡æœ‰æ”¹å˜capacityã€‚ æˆ‘ä»¬å¯ä»¥å€ŸåŠ©swapæ–¹æ³•å½»åº•åˆ é™¤ã€‚ 1234567891011#include &lt;iostream&gt;#include &lt;vector&gt;int main() &#123; vector&lt;int&gt; vec &#123;1,2,3,4,5&#125;; vector&lt;int&gt;().swap(vec); // swap std::cout&lt;&lt; vec.size() &lt;&lt; std::endl; // 0 std::cout&lt;&lt; vec.capacity() &lt;&lt; std::endl; // 0ï¼Œå½»åº•åˆ é™¤&#125; vector&lt;int&gt;()ä½¿ç”¨é»˜è®¤æ„é€ å‡½æ•°å»ºç«‹ä¸´æ—¶vectorå¯¹è±¡ï¼Œå†åœ¨è¯¥ä¸´æ—¶å¯¹è±¡ä¸Šè°ƒç”¨swapæˆå‘˜ï¼› swapè°ƒç”¨ä¹‹ååŸæ¥vectorå ç”¨çš„ç©ºé—´å°±ç­‰äºä¸€ä¸ªé»˜è®¤æ„é€ çš„å¯¹è±¡çš„å¤§å°ï¼Œè€Œä¸´æ—¶å¯¹è±¡å°±å…·æœ‰åŸæ¥å¯¹è±¡vecçš„å¤§å°ï¼› ä¸´æ—¶å¯¹è±¡éšå³è¢«ææ„ï¼Œå…¶å ç”¨çš„ç©ºé—´ï¼ˆåŸæ¥vecçš„ç©ºé—´ï¼‰ä¹Ÿè¢«é‡Šæ”¾ã€‚ å¦ä¸€æ–¹é¢ï¼Œä¼šåŠ¨æ€å¢é•¿å’Œç¼©å°çš„å®¹å™¨ï¼Œå¦‚dequeï¼Œä¾¿æ²¡æœ‰ä¸Šé¢çƒ¦æ‰°ï¼šclear()ã€erase()æ–¹æ³•åˆ é™¤å…ƒç´ åï¼Œå…¶å†…å­˜ä¹Ÿéšä¹‹ç¼©å‡ã€‚ ä¸‹èŠ‚æˆ‘ä»¬ä¸€èµ·æ¥è®¤è¯†ä¸‹å§ã€‚ deque vector å¯ä»¥åœ¨å°¾éƒ¨å¿«é€Ÿæ·»åŠ å’Œç§»é™¤å…ƒç´ ï¼Œè™½ç„¶ç†è®ºä¸Šä¹Ÿå¯ä»¥åœ¨å¤´éƒ¨è¿›è¡Œæ“ä½œï¼Œä½†å› ä¸ºå…¶åº•å±‚æ˜¯ä¸€ä¸ªä¸€ç»´åŠ¨æ€æ•°ç»„ï¼Œå› æ­¤æ— è®ºæ˜¯æ·»åŠ å’Œç§»é™¤å…ƒç´ éƒ½æ¶‰åŠåˆ°æ•°ç»„æ‰€æœ‰å…ƒç´ çš„ç§»åŠ¨ï¼Œæ•ˆç‡éƒ½å¥‡å·®ï¼Œå› æ­¤STLç›¸å…³å¤´éƒ¨æ“ä½œçš„æ–¹æ³•vector::push_front()éƒ½æ²¡æœ‰æä¾›ã€‚ deque ï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰ç”¨äºå¼¥è¡¥ vector çš„ä¸è¶³ï¼Œåœ¨é¦–å°¾ä¸¤ç«¯éƒ½å¯ä»¥å¿«é€Ÿæ·»åŠ å’Œåˆ é™¤ï¼ŒSTLä¼šæä¾›å¤´ã€å°¾æ’å…¥ã€åˆ é™¤æ–¹æ³•ï¼ˆvectorå¤´éƒ¨æ“ä½œæ•ˆç‡ä½ï¼ŒSTLåªæä¾›äº†å°¾éƒ¨æ’å…¥ã€åˆ é™¤ç›¸å…³æ–¹æ³•ï¼‰ï¼Œå…¶ç›´è§‚å½¢å¼è¡¨ç°å¦‚ä¸‹ï¼š ä¸è¿‡è¿™ç§â€œæ•´ä½“è¿ç»­â€æ˜¯ä¸€ç§å‡è±¡ï¼Œdequeåº•å±‚å®é™…å®ç°ä¸ºä¸€ä¸ªäºŒç»´åŠ¨æ€æ•°ç»„ ã€‚æ­£å¼ä»‹ç»å…¶åº•å±‚å®ç°å‰ï¼Œæˆ‘ä»¬æŒ‰è€è§„çŸ©å…ˆä»‹ç»å®¹å™¨ä¸Šå±‚å°è£…å’ŒåŸºæœ¬ä½¿ç”¨ã€‚ dequeå®¹å™¨ä»¥ç±»æ¨¡æ¿çš„å½¢å¼å®šä¹‰åœ¨ &lt;deque&gt; å¤´æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123template&lt;typename _Tp, typename _Alloc = std::allocator&lt;_Tp&gt; &gt;class deque : protected _Deque_base&lt;_Tp, _Alloc&gt; åœ¨ deque&lt;_Tp,_Alloc&gt; æ¨¡æ¿ä¸­ï¼š _Tpï¼Œç”¨äºæŒ‡æ˜å®¹å™¨ä¸­å…ƒç´ æ•°æ®ç±»å‹ï¼› _Allocï¼Œå†…å­˜åˆ†é…å™¨ï¼Œé»˜è®¤é‡‡ç”¨äºŒçº§é…ç½®å™¨ï¼Œä¸€èˆ¬ä¸ç”¨æˆ‘ä»¬å…³å¿ƒã€‚ ç®€å•ä½¿ç”¨å®ä¾‹ã€‚ 123456789101112131415161718192021222324#include &lt;iostream&gt;#include &lt;deque&gt;void printDeque(const deque&lt;int&gt;&amp; d)&#123; std::cout&lt;&lt;&quot;size = &quot; &lt;&lt; d.size() &lt;&lt;&quot; : &quot;; // dequeæ²¡æœ‰`capacity`()å‡½æ•° for(auto first = d.begin(); first != d.end(); first++) std::cout&lt;&lt;*first&lt;&lt;&quot; &quot;; std::cout&lt;&lt;&quot;\\n&quot;; &#125;int main()&#123; deque&lt;int&gt; d &#123;1,2,3&#125;; d.push_back(4); d.push_front(0); printDeque(d); // size = 5 : 0 1 2 3 4 d.pop_back(); d.pop_front(); printDeque(d); // size = 3 : 1 2 3 return 0;&#125; åº•å±‚å®ç° æœ¬èŠ‚æˆ‘ä»¬ä¸»è¦æ¢è®¨ä»¥ä¸‹é—®é¢˜ï¼š dequeåº•å±‚æ•°æ®ç»“æ„åŠå®ç°ï¼Ÿ dequeåº•å±‚è¿­ä»£å™¨å¦‚ä½•å®šä¹‰ï¼Ÿ dequeä»€ä¹ˆæ—¶å€™è¿›è¡Œæ‰©å®¹ï¼Ÿå¦‚ä½•æ‰©å®¹ï¼Ÿ dequeåº•å±‚å¦‚ä½•æ’å…¥ã€åˆ é™¤ä¸€ä¸ªæ•°æ®ï¼Ÿ æˆ‘ä»¬å…ˆäº†è§£ä¸‹dequeç±»ç»§æ‰¿ç»“æ„åŠæ ¸å¿ƒæˆå‘˜ï¼ˆç±»ä¼¼vectorç»§æ‰¿ç»“æ„ï¼‰ã€‚ æ³¨æ„åˆ°ï¼Œdequeç»§æ‰¿äº† _Deque_base ï¼Œ_Deque_baseä¸“é—¨è´Ÿè´£vectorçš„å†…å­˜ç®¡ç†ã€‚ _Deque_baseæ ¸å¿ƒæ˜¯å†…éƒ¨ç±»_Deque_impl ï¼Œå®ƒç»§æ‰¿äº†_Tp_alloc_type è·å¾—å†…å­˜åˆ†é…é‡Šæ”¾çš„åŠŸèƒ½ã€‚ 12345678910111213template&lt;typename _Tp, typename _Alloc&gt;class _Deque_base&#123; public: ... protected: typedef typename _Alloc::template rebind&lt;_Tp&gt;::other _Tp_alloc_type; struct _Deque_impl: public _Tp_alloc_type &#123; _Tp** _M_map; // mapæ•°ç»„ï¼Œå…¶ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ˆèŠ‚ç‚¹ï¼‰ï¼ŒæŒ‡å‘ä¸€å—ç¼“å†²åŒº size_t _M_map_size; iterator _M_start; iterator _M_finish; _Deque_implæ ¸å¿ƒæˆå‘˜ï¼š _M_mapï¼šäºŒç»´åŠ¨æ€æ•°ç»„mapï¼› _M_startï¼Œ_M_finishï¼šè¿­ä»£å™¨ï¼Œstart è¿­ä»£å™¨è®°å½•ç€ map æ•°ç»„ä¸­é¦–ä¸ªè¿ç»­ç©ºé—´çš„ä¿¡æ¯ï¼Œfinish è¿­ä»£å™¨è®°å½•ç€ map æ•°ç»„ä¸­æœ€åä¸€ä¸ªè¿ç»­ç©ºé—´çš„ä¿¡æ¯ã€‚ dequeçš„begin() å’Œ end() æ–¹æ³•å°±æ˜¯é€šè¿‡ä»–ä»¬å®ç°çš„ï¼š 12iterator begin() &#123; return _M_start; &#125;iterator end() &#123; return _M_finish; &#125; å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ä¾æ¬¡å›ç­”èŠ‚å‰çš„é—®é¢˜ã€‚ æˆ‘ä»¬å…ˆæ¢è®¨ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šdequeåº•å±‚æ•°æ®ç»“æ„åŠå®ç°ï¼Ÿ deque å®¹å™¨ç”¨äºŒç»´åŠ¨æ€æ•°ç»„ï¼ˆæ•°ç»„åå‡è®¾ä¸º mapï¼‰å­˜å‚¨ç€å„ä¸ªè¿ç»­ç©ºé—´çš„é¦–åœ°å€ ï¼Œæ¯ä¸ªè¿ç»­ç©ºé—´æ˜¯ç­‰é•¿çš„å†…å­˜ç¼“å­˜åŒºåŸŸï¼ˆä¸‹å›¾ä¸­çš„stratå’Œfinishå¯¹åº”ä¸Šé¢çš„_M_startå’Œ_M_finishï¼‰ã€‚ æ‰€ä»¥ç¬¬ä¸€ä¸ªé—®é¢˜ç­”æ¡ˆæ€»ç»“å¦‚ä¸‹ï¼šdequeåº•å±‚æ•°æ®ç»“æ„å°±æ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„_Tp** ï¼Œç”±_Deque_implç±»è´Ÿè´£ç›¸å…³å†…å­˜åˆ†é…ã€‚ æœ€åè¡¥å……ä¸€ç‚¹dequeç±»ä¸­_Map_pointerä»‹ç»ã€‚ 123456789101112template&lt;typename _Tp, typename _Alloc = std::allocator&lt;_Tp&gt; &gt;class deque : protected _Deque_base&lt;_Tp, _Alloc&gt;&#123; typedef _Deque_base&lt;_Tp, _Alloc&gt; _Base; typedef typename _Base::_Tp_alloc_type _Tp_alloc_type; public: ... typedef typename _Tp_alloc_type::pointer pointer; ... protected: // _Map_pointerï¼Œä¸€ä¸ªäºŒçº§æŒ‡é’ˆï¼ŒæŒ‡å‘äºŒç»´æ•°ç»„map typedef pointer* _Map_pointer; _Map_pointeræ˜¯ä¸€ä¸ªäºŒç»´æŒ‡é’ˆç±»å‹ã€‚ _Map_pointerå…¶å®å°±æ˜¯_Tp**ï¼š å®¹æ˜“çŸ¥é“ï¼Œ_Map_pointer æ˜¯_Deque_base&lt;_Tp, _Alloc&gt;::_Tp_alloc_type::pointer* åˆ«åï¼› æŸ¥çœ‹_Tp_alloc_typeå®šä¹‰ï¼š 123456class _Deque_base&#123; protected: // _Allocæ˜¯æ¨¡æ¿å‚æ•°è®¾ç½®çš„åˆ†é…å™¨ï¼Œ_Tpæ˜¯æ¨¡æ¿å‚æ•°çš„ç±»å‹ // _Tp_alloc_typeæ˜¯ç©ºé—´é…ç½®å™¨çš„ç±»å‹ typedef typename _Alloc::template rebind&lt;_Tp&gt;::other _Tp_alloc_type; _Tp_alloc_type å°±æ˜¯otherçš„åˆ«åï¼Œç»è¿‡ä¸€ç•ªè‰°éš¾çš„æ±‚çŸ¥ï¼Œåœ¨ä¸‰å¼ å›¾å¸¦ä½ å¼„æ‡‚STLä¸­å†…å­˜åˆ†é…å™¨ ä¸­ç¡®å®šï¼šotherç±»å‹å…¶å®æ˜¯allocator&lt;_Tp1&gt;è¿™ä¸ªç±»å‹ï¼Œå¦‚æœæˆ‘ä»¬ä¼ å‚ä¸ºint é‚£å°±æ˜¯allocator&lt;int&gt; ã€‚ æŸ¥çœ‹pointerå®šä¹‰ï¼š æ‰€ä»¥ï¼Œæœ€ç»ˆpointer* ç­‰ä»·äº__Tp** ï¼Œå¦‚æœæˆ‘ä»¬ä¼ å…¥çš„ç±»å‹ä¸ºintï¼Œé‚£å°±æ˜¯int** ã€‚ 1typedef pointer* _Map_pointer; ç»§ç»­ç¬¬äºŒä¸ªé—®é¢˜ï¼šdequeè¿­ä»£å™¨å¦‚ä½•å®šä¹‰ï¼Ÿ å‰é¢æˆ‘ä»¬è¯´è¿‡ï¼Œ_M_startï¼Œ_M_finishéƒ½æ˜¯iteratorç±»å‹ï¼š 1typedef _Deque_iterator&lt;_Tp, _Tp&amp;, _Tp*&gt; iterator; æŸ¥çœ‹_Deque_iteratorå®šä¹‰ï¼š 12345678910111213template&lt;typename _Tp, typename _Ref, typename _Ptr&gt;struct _Deque_iterator&#123; typedef _Deque_iterator&lt;_Tp, _Tp&amp;, _Tp*&gt; iterator; ... ... typedef _Tp** _Map_pointer; typedef _Deque_iterator _Self; _Tp* _M_cur; // å¯ä»¥çœ‹æˆæ˜¯åŸç”ŸæŒ‡é’ˆï¼Œè¡¨ç¤ºå½“å‰çš„å…ƒç´ ä½ç½® _Tp* _M_first; // ç¼“å†²åŒºå¼€å§‹å¤„ï¼Œå¯çœ‹æˆæ˜¯ç¬¬äºŒç»´ç¬¬ä¸€ä¸ªå…ƒç´ çš„ä½ç½® _Tp* _M_last; // ç¼“å†²åŒºæœ«ç«¯çš„ä¸‹ä¸€ä¸ªä½ç½®ï¼Œç¬¬äºŒç»´çš„æœ€åå…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½® _Map_pointer _M_node; // _M_nodeæŒ‡å‘ç¬¬ä¸€ç»´ ç›¸æ¯”dequeçš„è¿­ä»£å™¨åº•å±‚å®ç° ï¼Œvectorä¸­çš„è¿­ä»£å™¨å°±åº•å±‚å°è£…äº†ä¸€ä¸ªå…‰æºœæºœçš„_M_currentæŒ‡é’ˆï¼Œ ç®€å•äº†å¾ˆå¤šï¼š ç¬¬ä¸‰ä¸ªé—®é¢˜ï¼šdequeä»€ä¹ˆæ—¶å€™è¿›è¡Œæ‰©å®¹ï¼Ÿå¦‚ä½•æ‰©å®¹ï¼Ÿ æ”¾ä¸€å¼ å›¾ï¼š dequeä½•æ—¶åŠå¦‚ä½•æ‰©å®¹ä¸€ç›®äº†ç„¶ï¼š æ‰©å®¹æ—¶æœºï¼šmapæ•°ç»„å·²æ»¡ï¼› æ‰©å®¹æ–¹å¼ï¼šå†ç”³è¯·ä¸€å—æ›´å¤§çš„è¿ç»­ç©ºé—´ä¾› map æ•°ç»„ä½¿ç”¨ï¼Œå°†åŸæœ‰æ•°æ®ï¼ˆå¾ˆå¤šæŒ‡é’ˆï¼‰æ‹·è´åˆ°æ–°çš„ map æ•°ç»„ä¸­ï¼Œç„¶åé‡Šæ”¾æ—§mapæ•°ç»„çš„ç©ºé—´ï¼ˆä¸é‡Šæ”¾mapæ•°ç»„ä¸­çš„æŒ‡é’ˆæŒ‡å‘çš„ç©ºé—´ï¼‰ã€‚ æœ€åä¸€ä¸ªé—®é¢˜ï¼šdequeåº•å±‚å¦‚ä½•æ’å…¥ã€åˆ é™¤ä¸€ä¸ªæ•°æ®ï¼Ÿ å¦‚æœæ˜¯æ’å…¥æ“ä½œï¼Œéœ€åˆ†ä¸‰ç§æƒ…å†µè®¨è®ºï¼šåœ¨å®¹å™¨çš„å°¾éƒ¨æ’å…¥ã€åœ¨å®¹å™¨çš„é¦–éƒ¨æ’å…¥ã€åœ¨å®¹å™¨çš„æŒ‡å®šä½ç½®å‰æ’å…¥å…ƒç´ ã€‚è¿™é‡Œä»…ä»¥åœ¨å®¹å™¨çš„å°¾éƒ¨æ’å…¥ä¸ºä¾‹åˆ†æã€‚ åœ¨å®¹å™¨çš„å°¾éƒ¨æ’å…¥ æ­¤æ—¶ï¼ŒcuræŒ‡å‘çš„æ˜¯å«æœ‰å®é™…å€¼çš„ä¸‹ä¸€ä¸ªä½ç½®ï¼Œlastè¡¨ç¤ºæœ€åä¸€ä¸ªå®é™…å€¼çš„ä¸‹ä¸€ä¸ªä½ç½®ã€‚ 1push_back(const T&amp; t) æ‰¾åˆ°finishç»‘å®šçš„ç¼“å†²åŒºï¼Œå¦‚æœç¼“å­˜åŒºè¿˜æœ‰ç©ºé—²ä½ç½®ï¼ˆstart.cur!=start.lastï¼‰ï¼Œåˆ™åœ¨curä½ç½®æ’å…¥å…ƒç´ ï¼Œå¹¶æ›´æ–°cur++ ï¼Œå¦åˆ™è½¬2ï¼› æ²¡æœ‰ç©ºé—²ä½ç½®å¯ä»¥æ’å…¥å…ƒç´ ï¼Œåˆ™åœ¨finish.nodeï¼ˆè¿™æ˜¯ç¬¬ä¸€ç»´ï¼‰çš„åä¸€ä¸ªä½ç½®ç”³è¯·ä¸€ä¸ªç¼“å†²åŒºï¼ˆå¦‚æœmapæ»¡äº†ï¼Œè§¦å‘æ‰©å®¹ï¼‰ï¼Œå¹¶å°†finishç»‘å®šåˆ°è¯¥æ–°ç¼“å†²åŒºï¼Œé‡å¤1ä¸­æ­¥éª¤æ’å…¥å…ƒç´ ã€‚ åˆ é™¤æ“ä½œç±»ä¼¼ï¼ŒåŒæ ·éœ€è¦åˆ†ä¸‰ç§æƒ…å†µï¼šåœ¨å®¹å™¨çš„å°¾éƒ¨åˆ é™¤ã€åœ¨å®¹å™¨çš„é¦–éƒ¨åˆ é™¤ã€åœ¨å®¹å™¨çš„æŒ‡å®šä½ç½®å‰åˆ é™¤å…ƒç´ ã€‚è¿™é‡Œä»…ä»¥åœ¨å®¹å™¨çš„å°¾éƒ¨åˆ é™¤ä¸ºä¾‹åˆ†æã€‚ åœ¨å®¹å™¨çš„å°¾éƒ¨åˆ é™¤ 1pop_back() æ‰¾åˆ°finishç»‘å®šçš„ç¼“å†²åŒºï¼Œå¦‚æœfinishæ‰€ç»‘å®šçš„ç¼“å†²åŒºä¸Šæœ‰1ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œå°†æœ€åä¸€ä¸ªæœ‰æ•ˆå…ƒç´ ææ„å³å¯destroy(â€“finish.cur)ï¼Œå¦åˆ™è½¬2ï¼› finishæ‰€ç»‘å®šçš„ç¼“å†²åŒºä¸ºç©ºï¼Œå³finish.cur==finish.firstï¼š å…ˆå°†è¯¥ç©ºç¼“å†²åŒºçš„ç©ºé—´é‡Šæ”¾æ‰deallocate_node(finish.first)ï¼› å†å°†finishç»‘å®šåˆ°ä¸Šä¸€ä¸ªmapç»“ç‚¹å’Œç¼“å†²åŒºï¼› 12finish.set_node(finish.node-1);finish.cur=finish.last-1; æœ€åå°†æœ€åä¸€ä¸ªå…ƒç´ æï¼ˆä¹Ÿæ˜¯å½“å‰è¦åˆ é™¤çš„å…ƒç´ ï¼‰æ„destroy(finish.cur)ã€‚ ä»è¿™é‡Œä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œç›¸æ¯”vectorï¼Œdequeç¡®å®ä¼šåŠ¨æ€é‡Šæ”¾å†…å­˜ï¼Œä¸ä¼šåªå¢ä¸å‡ã€‚ æˆå‘˜å‡½æ•° dequeå…·æœ‰ä¼—å¤šçš„æˆå‘˜å‡½æ•°ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¯¹dequeè¿›è¡Œå„ç§æ“ä½œã€‚ æˆ‘ä»¬å…ˆä¸€ç¹ä¸ºå¿«ã€‚ è¿­ä»£å™¨ç›¸å…³ åŒarrayï¼Œvectorã€‚ æˆå‘˜å‡½æ•° åŠŸèƒ½ begin() è¿”å›æŒ‡å‘å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„æ­£å‘è¿­ä»£å™¨ end() è¿”å›æŒ‡å‘å®¹å™¨æœ€åä¸€ä¸ªå…ƒç´ ä¹‹åä¸€ä¸ªä½ç½®çš„æ­£å‘è¿­ä»£å™¨ rbegin() è¿”å›æŒ‡å‘æœ€åä¸€ä¸ªå…ƒç´ çš„åå‘è¿­ä»£å™¨ rend() è¿”å›æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ ä¹‹å‰ä¸€ä¸ªä½ç½®çš„åå‘è¿­ä»£å™¨ cbegin() å’Œ begin() åŠŸèƒ½ç›¸åŒï¼Œåªä¸è¿‡å…¶è¿”å›çš„è¿­ä»£å™¨ç±»å‹ä¸ºå¸¸é‡æ­£å‘è¿­ä»£å™¨ cend() å’Œ end() åŠŸèƒ½ç›¸åŒï¼Œåªä¸è¿‡å…¶è¿”å›çš„è¿­ä»£å™¨ç±»å‹ä¸ºå¸¸é‡æ­£å‘è¿­ä»£å™¨ crbegin() å’Œ rbegin() åŠŸèƒ½ç›¸åŒï¼Œåªä¸è¿‡å…¶è¿”å›çš„è¿­ä»£å™¨ç±»å‹ä¸ºå¸¸é‡åå‘è¿­ä»£å™¨ crend() å’Œ rend() åŠŸèƒ½ç›¸åŒï¼Œåªä¸è¿‡å…¶è¿”å›çš„è¿­ä»£å™¨ç±»å‹ä¸ºå¸¸é‡åå‘è¿­ä»£å™¨ æ³¨æ„ï¼Œå¦‚æœæ˜¯ const ç±»å‹å®¹å™¨ï¼Œè¿”å›çš„ä¸€å®šæ˜¯å¸¸é‡æ­£å‘è¿­ä»£å™¨ï¼Œå¸¸é‡è¿­ä»£å™¨ä¸èƒ½ä¿®æ”¹æŒ‡å‘çš„å…ƒç´ ï¼› begin() å’Œ end() ä¸ºC++11æ–°å¢ï¼Œæ“ä½œå¯¹è±¡è¿˜å¯ä»¥æ˜¯æ•°ç»„ã€‚ ä¸»è¦æˆå‘˜å‡½æ•° æ ‡ç²—éƒ¨åˆ†æ˜¯å¸¸ç”¨çš„å‡½æ•°ã€‚ å¤´ã€å°¾æ“ä½œæ•ˆç‡å‡é«˜ï¼Œæ‰€ä»¥ä¼šéƒ½æä¾›push_front() ã€push_front()ç­‰å¤´ã€å°¾éƒ¨ç­‰æ’å…¥ã€åˆ é™¤æ–¹æ³•ã€‚ æˆå‘˜å‡½æ•° åŠŸèƒ½ size() è¿”å›å®¹å™¨ä¸­å½“å‰å…ƒç´ çš„æ•°é‡ capacity dequeæ²¡æœ‰è¯¥æ–¹æ³•ï¼Œvectoræœ‰ reserve() dequeæ²¡æœ‰è¯¥æ–¹æ³•ï¼Œvectoræœ‰ max_size() è¿”å›å®¹å™¨å¯å®¹çº³å…ƒç´ çš„æœ€å¤§æ•°é‡ empty() åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©ºï¼Œå’Œé€šè¿‡ size()==0 çš„åˆ¤æ–­æ¡ä»¶åŠŸèƒ½ç›¸åŒï¼Œä½†å…¶æ•ˆç‡å¯èƒ½æ›´å¿« at(n) è¿”å›å®¹å™¨ä¸­ n ä½ç½®å¤„å…ƒç´ çš„å¼•ç”¨ï¼Œä½œç”¨ç±»ä¼¼[]ï¼Œä½†è¯¥å‡½æ•°è¿˜ä¼šæ£€æŸ¥ n æ˜¯å¦æœ‰æ•ˆï¼Œå¦‚æœä¸æ˜¯ä¼šæŠ›å‡º out_of_range å¼‚å¸¸ front() è¿”å›å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç›´æ¥å¼•ç”¨ back() è¿”å›å®¹å™¨ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„ç›´æ¥å¼•ç”¨ data() dequeæ²¡æœ‰è¯¥æ–¹æ³•ï¼Œvectoræœ‰ swap() äº¤æ¢ä¸¤ä¸ªå®¹å™¨çš„æ‰€æœ‰å…ƒç´  ç›¸æ¯”arrayç‹¬æœ‰çš„æ–¹æ³•ï¼ˆå¯ä»¥å¤´ã€å°¾éƒ¨æ’å…¥ã€åˆ é™¤å…ƒç´ ç­‰ï¼‰ï¼š æˆå‘˜å‡½æ•° åŠŸèƒ½ push_back() åœ¨å®¹å™¨çš„å°¾éƒ¨æ·»åŠ ä¸€ä¸ªå…ƒç´  emplace_back() åœ¨å®¹å™¨çš„å°¾éƒ¨æ·»åŠ ä¸€ä¸ªå…ƒç´  push_front() åœ¨å®¹å™¨çš„å¤´éƒ¨æ·»åŠ ä¸€ä¸ªå…ƒç´  emplace_front() åœ¨å®¹å™¨å¤´éƒ¨ç”Ÿæˆä¸€ä¸ªå…ƒç´  erase() ç§»å‡ºä¸€ä¸ªå…ƒç´ æˆ–ä¸€æ®µå…ƒç´ ï¼Œè¿”å›æŒ‡å‘åˆ é™¤å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ clear() ç§»å‡ºæ‰€æœ‰çš„å…ƒç´ ï¼Œå®¹å™¨å¤§å°å˜ä¸º 0 pop_back() ç§»å‡ºå®¹å™¨å°¾éƒ¨çš„å…ƒç´  pop_front() ç§»é™¤å®¹å™¨å¤´éƒ¨çš„å…ƒç´  è¿™äº›æ–¹æ³•éƒ½æ¯”è¾ƒç®€å•ï¼Œä¸è¿‡å¤šä»‹ç»ã€‚ list listå®¹å™¨çš„åº•å±‚æ˜¯ç”¨åŒå‘é“¾è¡¨å®ç°çš„ï¼Œç”šè‡³ä¸€äº› STL ç‰ˆæœ¬ä¸­ï¼ˆæ¯”å¦‚ SGI STLï¼‰ï¼Œlist å®¹å™¨çš„åº•å±‚å®ç°ä½¿ç”¨çš„æ˜¯åŒå‘å¾ªç¯é“¾è¡¨ã€‚ aï¼‰åŒå‘é“¾è¡¨ï¼Œbï¼‰å¾ªç¯é“¾è¡¨ åŒé“¾è¡¨ç›¸æ¯”æ•°ç»„æœ‰å¾ˆå¤šå¥½å¤„ï¼š æ’å…¥å’Œåˆ é™¤æ“ä½œæ•ˆç‡é«˜ï¼ˆä½†æŸ¥æ‰¾æ•ˆç‡ä½ï¼‰ï¼Œå¤´ã€å°¾æ’å…¥/åˆ é™¤æ“ä½œä¹Ÿæ˜¯ï¼Œæ‰€ä»¥STLä¼šéƒ½æä¾›äº†push_front()ã€push_back()ç­‰å¤´ã€å°¾éƒ¨æ“ä½œæ–¹æ³•ï¼› æ‰©å±•æ–¹ä¾¿ï¼› å†…å­˜ç©ºé—´ä¸è¦æ±‚è¿ç»­ï¼Œå¯å……åˆ†åˆ©ç”¨ç©ºé—´ï¼› â€¦ è¿™äº›ä¹Ÿæ˜¯listæ‰€å…·æœ‰çš„ä¼˜ç‚¹ã€‚å¦å¤–ä¸€ä¸ªå¥½å¤„å¯èƒ½ç°åœ¨æœ‰ç‚¹éš¾ä»¥ç†è§£ï¼ˆåæ–‡ä¼šè§£é‡Šï¼‰ï¼š åœ¨vectorä¸­å¦‚æœè¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œä¼šå¯¼è‡´åç»­è¿­ä»£å™¨ä¼šå¤±æ•ˆï¼Œè€Œåœ¨Listä¸­ï¼šæ’å…¥ä¸ä¼šå¯¼è‡´è¿­ä»£å™¨å¤±æ•ˆï¼›åˆ é™¤ä¹Ÿåªä¼šä½¿å¾—å½“å‰è¿­ä»£å™¨å¤±æ•ˆï¼Œåç»­è¿­ä»£å™¨ä¸ä¼šå¤±æ•ˆã€‚ listå®¹å™¨ä»¥ç±»æ¨¡æ¿çš„å½¢å¼å®šä¹‰åœ¨ &lt;list&gt; å¤´æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123template&lt;typename _Tp, typename _Alloc = std::allocator&lt;_Tp&gt; &gt;class list : protected _List_base&lt;_Tp, _Alloc&gt; åœ¨ list&lt;_Tp,_Alloc&gt; æ¨¡æ¿ä¸­ï¼š _Tpï¼Œç”¨äºæŒ‡æ˜å®¹å™¨ä¸­å…ƒç´ æ•°æ®ç±»å‹ï¼› _Allocï¼Œå†…å­˜åˆ†é…å™¨ï¼Œé»˜è®¤é‡‡ç”¨äºŒçº§é…ç½®å™¨ï¼Œä¸€èˆ¬ä¸ç”¨æˆ‘ä»¬å…³å¿ƒã€‚ ç®€å•ä½¿ç”¨å®ä¾‹ã€‚ 123456789101112131415161718192021222324#include &lt;iostream&gt;#include &lt;list&gt;void printList(const list&lt;int&gt;&amp; l)&#123; std::cout&lt;&lt;&quot;size = &quot; &lt;&lt; l.size() &lt;&lt;&quot; : &quot;; // listæ²¡æœ‰`capacity`()å‡½æ•° for(auto first = l.begin(); first != l.end(); first++) std::cout&lt;&lt;*first&lt;&lt;&quot; &quot;; std::cout&lt;&lt;&quot;\\n&quot;; &#125;int main()&#123; list&lt;int&gt; l &#123;1,2,3&#125;; l.push_back(4); l.push_front(0); printList(l); // size = 5 : 0 1 2 3 4 l.pop_back(); l.pop_front(); printList(l); // size = 3 : 1 2 3 return 0;&#125; å› ä¸ºlistä¸æ­¢æ˜¯é“¾è¡¨è¿˜æ˜¯åŒå‘é“¾è¡¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å¤´ã€å°¾éƒ½æ˜¯å¯ä»¥æ’å…¥/åˆ é™¤çš„ã€‚ åº•å±‚å®ç° æœ¬èŠ‚æˆ‘ä»¬ä¸»è¦æ¢è®¨ä»¥ä¸‹é—®é¢˜ï¼š liståº•å±‚æ•°æ®ç»“æ„åŠå®ç°ï¼Ÿ liståº•å±‚è¿­ä»£å™¨å¦‚ä½•å®šä¹‰ï¼Ÿ liståº•å±‚å¦‚ä½•æ’å…¥ã€åˆ é™¤ä¸€ä¸ªæ•°æ®ï¼Ÿ æˆ‘ä»¬å…ˆäº†è§£ä¸‹listç±»ç»§æ‰¿ç»“æ„åŠæ ¸å¿ƒæˆå‘˜ï¼ˆç±»ä¼¼vectorã€dequeç»§æ‰¿ç»“æ„ï¼‰ã€‚ æ³¨æ„åˆ°ï¼Œlistç»§æ‰¿äº† _List_base ï¼Œ_List_baseä¸“é—¨è´Ÿè´£listçš„å†…å­˜ç®¡ç†ã€‚ _List_baseæ ¸å¿ƒæ˜¯å†…éƒ¨ç±»_List_impl ï¼Œå®ƒç»§æ‰¿äº†_Tp_alloc_type è·å¾—å†…å­˜åˆ†é…é‡Šæ”¾çš„åŠŸèƒ½ã€‚ 1234567891011121314151617181920template&lt;typename _Tp, typename _Alloc&gt;class _List_base&#123; protected: typedef typename _Alloc::template rebind&lt;_List_node&lt;_Tp&gt; &gt;::other _Node_alloc_type; typedef typename _Alloc::template rebind&lt;_Tp&gt;::other _Tp_alloc_type; struct _List_impl: public _Node_alloc_type &#123; __detail::_List_node_base _M_node; // å¤´ç»“ç‚¹ï¼Œä¸å­˜å‚¨æ•°æ® _List_impl(): _Node_alloc_type(), _M_node() &#123; &#125; _List_impl(const _Node_alloc_type&amp; __a): _Node_alloc_type(__a), _M_node() &#123; &#125; ... &#125;; // _List_impl... _List_implæ ¸å¿ƒæˆå‘˜ï¼š _M_nodeï¼šlistå¤´ç»“ç‚¹ï¼Œä¸å­˜å‚¨æ•°æ® å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ä¾æ¬¡å›ç­”èŠ‚å‰çš„é—®é¢˜ã€‚ ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šliståº•å±‚æ•°æ®ç»“æ„åŠå®ç°ï¼Ÿ liståº•å±‚æ˜¯é“¾è¡¨ï¼Œå¤´ç»“ç‚¹ä¸º_M_nodeã€‚å¤´èŠ‚ç‚¹æ˜¯_List_node_baseç±»å‹ï¼Œä¸å­˜å‚¨æ•°æ®ã€‚ ä½†æ•°æ®ç»“ç‚¹æ˜¯_List_node ç±»å‹ï¼Œå­˜å‚¨æ•°æ®ã€‚ å€ŸåŠ©_M_nodeå¯ä»¥å®ç°ï¼Œlistä¸­å‡ ä¹æ‰€æœ‰çš„æˆå‘˜å‡½æ•°ã€‚ ç¬¬äºŒä¸ªé—®é¢˜ï¼šliståº•å±‚è¿­ä»£å™¨å¦‚ä½•å®šä¹‰ï¼Ÿ åœ¨listç±»ä¸­ï¼Œæ‰¾åˆ°iteratorå®šä¹‰ï¼š 1typedef _List_iterator&lt;_Tp&gt; iterator; å…¶å®šä¹‰å¦‚ä¸‹ï¼š 12345678910111213141516171819template&lt;typename _Tp&gt;struct _List_iterator&#123; // å®šä¹‰ä¸€å †åˆ«å typedef _List_iterator&lt;_Tp&gt; _Self; typedef _List_node&lt;_Tp&gt; _Node; typedef ptrdiff_t difference_type; // listä¸ºä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œè¿­ä»£å™¨å¿…é¡»å…·å¤‡å‰ç§»ã€åç§»çš„èƒ½åŠ›ï¼Œæ‰€ä»¥æä¾›äº†bidirectional iterator typedef std::bidirectional_iterator_tag iterator_category; typedef _Tp value_type; typedef _Tp* pointer; typedef _Tp&amp; reference; // æ„é€ å‡½æ•°1ï¼šå®ä¾‹åŒ–å¤´ç»“ç‚¹_M_nodeæŒ‡é’ˆ _List_iterator(): _M_node() &#123; &#125; // æ„é€ å‡½æ•°2ï¼šç»™å®šå€¼å®ä¾‹åŒ– explicit _List_iterator(__detail::_List_node_base* __x): _M_node(__x) &#123; &#125; ... ç»§ç»­çœ‹çœ‹å…·ä½“_List_iteratorç›¸å…³å‡½æ•°ã€‚ operator++ çš„åç½®è‡ªå¢ï¼Œå°†å½“å‰ _M_node ç§»åŠ¨åˆ° _M_node-&gt;_M_next æ‰€åœ¨çš„ä½ç½®ï¼Œå¹¶è¿”å›ç§»åŠ¨ä¹‹åçš„è¿­ä»£å™¨ã€‚ 123456// _Self æ˜¯_List_iterator&lt;_Tp&gt; ä¸€ä¸ªç±»å‹åˆ«å_Self&amp; operator++()&#123; _M_node = _M_node-&gt;_M_next; return *this;&#125; operator--å¤§åŒå°å¼‚ã€‚ 12345_Self&amp; operator--()&#123; _M_node = _M_node-&gt;_M_prev; return *this;&#125; æœ€åä¸€ä¸ªé—®é¢˜ï¼šliståº•å±‚å¦‚ä½•æ’å…¥ã€åˆ é™¤ä¸€ä¸ªæ•°æ®ï¼Ÿ å¤§è‡´åº”è¯¥å°±æ˜¯é“¾è¡¨çš„æ’å…¥ã€åˆ é™¤ç›¸å…³æ“ä½œã€‚è¿™é‡Œæœ‰æœºä¼šå†è¡¥ä¸Šå§ã€‚ æˆå‘˜å‡½æ•° listå…·æœ‰ä¼—å¤šçš„æˆå‘˜å‡½æ•°ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¯¹listè¿›è¡Œå„ç§æ“ä½œã€‚ æˆ‘ä»¬å…ˆä¸€ç¹ä¸ºå¿«ã€‚ è¿­ä»£å™¨ç›¸å…³ åŒarrayã€vectorï¼Œdequeã€‚ æˆå‘˜å‡½æ•° åŠŸèƒ½ begin() è¿”å›æŒ‡å‘å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„æ­£å‘è¿­ä»£å™¨ end() è¿”å›æŒ‡å‘å®¹å™¨æœ€åä¸€ä¸ªå…ƒç´ ä¹‹åä¸€ä¸ªä½ç½®çš„æ­£å‘è¿­ä»£å™¨ rbegin() è¿”å›æŒ‡å‘æœ€åä¸€ä¸ªå…ƒç´ çš„åå‘è¿­ä»£å™¨ rend() è¿”å›æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ ä¹‹å‰ä¸€ä¸ªä½ç½®çš„åå‘è¿­ä»£å™¨ cbegin() å’Œ begin() åŠŸèƒ½ç›¸åŒï¼Œåªä¸è¿‡å…¶è¿”å›çš„è¿­ä»£å™¨ç±»å‹ä¸ºå¸¸é‡æ­£å‘è¿­ä»£å™¨ cend() å’Œ end() åŠŸèƒ½ç›¸åŒï¼Œåªä¸è¿‡å…¶è¿”å›çš„è¿­ä»£å™¨ç±»å‹ä¸ºå¸¸é‡æ­£å‘è¿­ä»£å™¨ crbegin() å’Œ rbegin() åŠŸèƒ½ç›¸åŒï¼Œåªä¸è¿‡å…¶è¿”å›çš„è¿­ä»£å™¨ç±»å‹ä¸ºå¸¸é‡åå‘è¿­ä»£å™¨ crend() å’Œ rend() åŠŸèƒ½ç›¸åŒï¼Œåªä¸è¿‡å…¶è¿”å›çš„è¿­ä»£å™¨ç±»å‹ä¸ºå¸¸é‡åå‘è¿­ä»£å™¨ æ³¨æ„ï¼Œå¦‚æœæ˜¯ const ç±»å‹å®¹å™¨ï¼Œè¿”å›çš„ä¸€å®šæ˜¯å¸¸é‡æ­£å‘è¿­ä»£å™¨ï¼Œå¸¸é‡è¿­ä»£å™¨ä¸èƒ½ä¿®æ”¹æŒ‡å‘çš„å…ƒç´ ï¼› begin() å’Œ end() ä¸ºC++11æ–°å¢ï¼Œæ“ä½œå¯¹è±¡è¿˜å¯ä»¥æ˜¯æ•°ç»„ã€‚ ä¸»è¦æˆå‘˜å‡½æ•° æ ‡ç²—éƒ¨åˆ†æ˜¯å¸¸ç”¨çš„å‡½æ•°ã€‚ liståº•å±‚æ˜¯åŒé“¾è¡¨ï¼Œåªæœ‰åŒå‘è¿­ä»£å™¨æ²¡æœ‰éšæœºè¿­ä»£å™¨ï¼Œä¸€äº›éšæœºè¿­ä»£å™¨æ‰æ”¯æŒçš„æ–¹æ³•ï¼Œæ¯”å¦‚at(n)ã€[n]éƒ½æ˜¯ä¸æ”¯æŒçš„ï¼› å¤´ã€å°¾æ“ä½œæ•ˆç‡å‡é«˜ï¼Œæ‰€ä»¥ä¼šæä¾›push_front() ã€push_back()ç­‰å¤´ã€å°¾éƒ¨ç­‰æ’å…¥ã€åˆ é™¤æ–¹æ³•ã€‚ æˆå‘˜å‡½æ•° åŠŸèƒ½ size() listæ²¡æœ‰ï¼Œvectorã€dequeæœ‰ capacity listã€dequeæ²¡æœ‰è¯¥æ–¹æ³•ï¼Œvectoræœ‰ reserve() listã€dequeæ²¡æœ‰è¯¥æ–¹æ³•ï¼Œvectoræœ‰ max_size() è¿”å›å®¹å™¨å¯å®¹çº³å…ƒç´ çš„æœ€å¤§æ•°é‡ empty() åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©ºï¼Œå’Œé€šè¿‡ size()==0 çš„åˆ¤æ–­æ¡ä»¶åŠŸèƒ½ç›¸åŒï¼Œä½†å…¶æ•ˆç‡å¯èƒ½æ›´å¿« at(n) ä¸æ”¯æŒ front() è¿”å›å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç›´æ¥å¼•ç”¨ back() è¿”å›å®¹å™¨ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„ç›´æ¥å¼•ç”¨ data() listã€dequeæ²¡æœ‰è¯¥æ–¹æ³•ï¼Œvectoræœ‰ swap() äº¤æ¢ä¸¤ä¸ªå®¹å™¨çš„æ‰€æœ‰å…ƒç´  ç›¸æ¯”arrayç‹¬æœ‰çš„æ–¹æ³•ï¼ˆå¯ä»¥å¤´ã€å°¾éƒ¨æ’å…¥ã€åˆ é™¤å…ƒç´ ç­‰ï¼‰ï¼š æˆå‘˜å‡½æ•° åŠŸèƒ½ push_back() åœ¨å®¹å™¨çš„å°¾éƒ¨æ·»åŠ ä¸€ä¸ªå…ƒç´  emplace_back() åœ¨å®¹å™¨çš„å°¾éƒ¨æ·»åŠ ä¸€ä¸ªå…ƒç´  push_front() åœ¨å®¹å™¨çš„å¤´éƒ¨æ·»åŠ ä¸€ä¸ªå…ƒç´  emplace_front() åœ¨å®¹å™¨å¤´éƒ¨ç”Ÿæˆä¸€ä¸ªå…ƒç´  erase() ç§»å‡ºä¸€ä¸ªå…ƒç´ æˆ–ä¸€æ®µå…ƒç´ ï¼Œè¿”å›æŒ‡å‘åˆ é™¤å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ clear() ç§»å‡ºæ‰€æœ‰çš„å…ƒç´ ï¼Œå®¹å™¨å¤§å°å˜ä¸º 0 pop_back() ç§»å‡ºå®¹å™¨å°¾éƒ¨çš„å…ƒç´  pop_front() ç§»é™¤å®¹å™¨å¤´éƒ¨çš„å…ƒç´  ç›¸æ¯”dequeæ–°å¢ï¼ˆé“¾è¡¨çš„ä¸€äº›æ“ä½œæ–¹æ³•ï¼‰ï¼š æˆå‘˜å‡½æ•° åŠŸèƒ½ splice() å°†ä¸€ä¸ª list å®¹å™¨ä¸­çš„å…ƒç´ æ’å…¥åˆ°å¦ä¸€ä¸ªå®¹å™¨çš„æŒ‡å®šä½ç½® remove(val) åˆ é™¤å®¹å™¨ä¸­æ‰€æœ‰ç­‰äº val çš„å…ƒç´  remove_if() åˆ é™¤å®¹å™¨ä¸­æ»¡è¶³æ¡ä»¶çš„å…ƒç´  unique() åˆ é™¤å®¹å™¨ä¸­ç›¸é‚»çš„é‡å¤å…ƒç´ ï¼Œåªä¿ç•™ä¸€ä¸ª merge() åˆå¹¶ä¸¤ä¸ªäº‹å…ˆå·²æ’å¥½åºçš„ list å®¹å™¨ï¼Œå¹¶ä¸”åˆå¹¶ä¹‹åçš„ list å®¹å™¨ä¾ç„¶æ˜¯æœ‰åºçš„ sort() é€šè¿‡æ›´æ”¹å®¹å™¨ä¸­å…ƒç´ çš„ä½ç½®ï¼Œå°†å®ƒä»¬è¿›è¡Œæ’åº reverse() åè½¬å®¹å™¨ä¸­å…ƒç´ çš„é¡ºåº æ–°å¢çš„å‡½æ•°æœ‰ç‚¹æ„æ€ï¼Œåˆé€‚çš„æ—¶å€™è¿›è¡Œè¡¥å……ã€‚ è¿­ä»£å™¨å¤±æ•ˆ åˆ†æâ€œè¿­ä»£å™¨å¤±æ•ˆâ€è¿™ä¸ªé—®é¢˜å‰ï¼Œæˆ‘ä»¬å…ˆå›å¿†ä¸€ä¸‹å„ä¸ªå®¹å™¨çš„åº•å±‚æ•°æ®ç»“æ„ï¼š å®¹å™¨ åº•å±‚æ•°æ®ç»“æ„ å¯¹åº”çš„è¿­ä»£å™¨ç±»å‹ arrayã€vectorã€deque æ•°ç»„ éšæœºè®¿é—®è¿­ä»£å™¨ listã€forward_list é“¾è¡¨ åŒå‘è¿­ä»£å™¨ set / multiset / map / multimap çº¢é»‘æ ‘ åŒå‘è¿­ä»£å™¨ stack / queue list å’Œ deque å®ç°ï¼Œå°é—­å¤´éƒ¨ ä¸æ”¯æŒè¿­ä»£å™¨ å¥½äº†ï¼Œè®©æˆ‘ä»¬æ­£å¼å¼€å§‹å§ã€‚ çœ‹ä¸‹é¢è¿™æ®µçœ‹ä¼¼æ— å®³çš„ä»£ç ï¼š 1234567891011#include &lt;vector&gt;int main()&#123; vector&lt;int&gt; vec &#123;1,2,3,4,5&#125;; for(auto it=vec.begin(); it != vec.end(); it++) &#123; vec.erase(it); // è¿­ä»£å™¨å¤±æ•ˆ &#125; return 0;&#125; æ‰§è¡Œæ—¶å´å‘ç”Ÿäº†é”™è¯¯ï¼š 12[root@roy-cpp test]# ./test.out Segmentation fault è¿™æ®µä»£ç å¯¹äºlistã€vectorã€dequeç­‰å®¹å™¨éƒ½ä¼šå‡ºé”™ï¼ˆarrayä¾‹å¤–ï¼Œå®ƒæ²¡æœ‰erase()æ–¹æ³•ï¼‰ï¼Œç©¶å…¶åŸå› å°±æ˜¯å‡ºç°è¿­ä»£å™¨å¤±æ•ˆã€‚ è¿­ä»£å™¨it åˆå§‹åŒ–æŒ‡å‘äº†ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œåˆ¤æ–­æ¡ä»¶æˆç«‹è¿›å…¥å¾ªç¯ä½“ï¼› æ‰§è¡Œvec.erase(it)ï¼Œitè¢«åˆ é™¤ï¼› æ‰§è¡Œit++å‡ºé”™ï¼Œitå·²å¤±æ•ˆæ— æ³•é€’å¢ã€‚ å¾—ç›Šäºeraseæ–¹æ³•çš„è¿”å›å€¼æ˜¯ä¸‹ä¸€ä¸ªæœ‰æ•ˆçš„ iteratorï¼Œè§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ã€‚ 123456789101112#include &lt;vector&gt;int main()&#123; vector&lt;int&gt; vec &#123;1,2,3,4,5&#125;; for(auto it=vec.begin(); it != vec.end(); ) &#123; it = vec.erase(it); // è¿­ä»£å™¨å¤±æ•ˆ // it++; // itå·²ç»æ˜¯ä¸‹ä¸€ä¸ªè¿­ä»£å™¨äº†ä¸ç”¨++ &#125; return 0;&#125; æˆ–è€…ï¼š âš ï¸ å…³è”å®¹å™¨ï¼šmapã€setã€multimapã€multisetç­‰å¯ä»¥ä½¿ç”¨ä¸¤ç§æ–¹å¼ï¼Œä½†listã€vectorã€dequeæ— æ³•ä½¿ç”¨ä¸‹é¢è¿™ç§æ–¹å¼ï¼Œå¦åˆ™ä¼šå‡ºé”™ï¼ˆä¸ºå•¥ï¼Ÿï¼‰ã€‚ 12345678910111213#include &lt;map&gt;int main()&#123; map&lt;int,int&gt; map1; map1.emplace(1,1); map1.emplace(2,2); for(auto it=map1.begin(); it != map1.end(); ) &#123; map1.erase(it++); // è¿­ä»£å™¨å¤±æ•ˆ &#125; return 0;&#125; it++ä¼šå¤åˆ¶ä¸€ä¸ªitå‰¯æœ¬ä¼ é€’ç»™erase() å‡½æ•°ï¼› itæ‰§è¡Œ++æ“ä½œï¼› æœ€åå†æ‰§è¡Œerase()å°† å¤åˆ¶çš„itå‰¯æœ¬åˆ é™¤ï¼Œå®ƒå’ŒitæŒ‡å‘åŒä¸€å…ƒç´ ï¼Œæ‰€ä»¥æœ€åitè¿˜æ˜¯å¤±æ•ˆäº†ã€‚ è¿­ä»£å™¨å¤±æ•ˆæ€»ç»“å¦‚ä¸‹ï¼š å¦‚æœåº•å±‚æ•°æ®ç»“æ„æ˜¯ä¸€ç»´æ•°ç»„çš„ï¼ˆvectorï¼‰ æ’å…¥æ“ä½œï¼šæ’å…¥ä½ç½®åŠä¹‹åçš„è¿­ä»£å™¨éƒ½å¤±æ•ˆï¼Œå› ä¸ºæ’å…¥ä½ç½®åçš„æ‰€æœ‰å…ƒç´ éƒ½éœ€è¦ç§»åŠ¨ï¼›å¦‚æœè¿˜è§¦å‘äº†æ‰©å®¹ï¼Œåˆ™æ‰€æœ‰è¿­ä»£å™¨éƒ½å¤±æ•ˆï¼› åˆ é™¤æ“ä½œï¼šåˆ é™¤ä½ç½®åŠä¹‹åçš„è¿­ä»£å™¨éƒ½å¤±æ•ˆï¼Œå› ä¸ºåˆ é™¤ä½ç½®ä¹‹åçš„å…ƒç´ éƒ½éœ€ç§»åŠ¨ï¼› å¦‚æœåº•å±‚æ•°æ®ç»“æ„æ˜¯äºŒç»´æ•°ç»„çš„ï¼ˆdequeï¼‰ æ’å…¥æ“ä½œï¼šé¦–éƒ¨æˆ–è€…å°¾éƒ¨æ’å…¥ä¸ä¼šä½¿è¿­ä»£å™¨å¤±æ•ˆï¼Œå› ä¸ºä¸å½±å“å…¶å®ƒå…ƒç´ ä½ç½®ï¼Œä¸­é—´æ’å…¥ä¼šä½¿å¾—æ‰€æœ‰è¿­ä»£å™¨å¤±æ•ˆï¼Œå› ä¸ºæ‰€æœ‰å…ƒç´ éƒ½è¢«å½±å“è¦ç§»åŠ¨ï¼› åˆ é™¤æ“ä½œï¼šéƒ¨æˆ–å°¾éƒ¨åˆ é™¤å…ƒç´ åªä¼šä½¿å¾—è¢«åˆ é™¤ä½ç½®çš„è¿­ä»£å™¨å¤±æ•ˆï¼Œä¸­é—´åˆ é™¤ä¼šä½¿å¾—æ‰€æœ‰è¿­ä»£å™¨å¤±æ•ˆï¼ŒåŸå› åŒä¸Šã€‚ å¦‚æœåº•å±‚æ•°æ®ç»“æ„æ˜¯é“¾è¡¨çš„ï¼ˆlistã€forward_listï¼‰ æ’å…¥æ“ä½œï¼šèŠ‚ç‚¹æ— éœ€ç§»åŠ¨ï¼Œæ‰€æœ‰è¿­ä»£å™¨æœ‰æ•ˆï¼› åˆ é™¤æ“ä½œï¼šèŠ‚ç‚¹æ— éœ€ç§»åŠ¨ï¼Œä»…åˆ é™¤çš„èŠ‚ç‚¹è¿­ä»£å™¨å¤±æ•ˆã€‚ å¦‚æœåº•å±‚æ•°æ®ç»“æ„æ˜¯çº¢é»‘æ ‘çš„ï¼ˆset / multiset / map / multimapï¼‰ æ’å…¥æ“ä½œï¼šä¸å½±å“å…¶å®ƒèŠ‚ç‚¹ï¼Œæ‰€æœ‰è¿­ä»£å™¨æœ‰æ•ˆï¼› åˆ é™¤æ“ä½œï¼šä¸å½±å“å…¶å®ƒèŠ‚ç‚¹ï¼Œä»…åˆ é™¤çš„èŠ‚ç‚¹è¿­ä»£å™¨å¤±æ•ˆã€‚ forward_list forward_liståº•å±‚å®ç°å’Œlistä¸€æ ·ï¼Œéƒ½æ˜¯é“¾è¡¨ï¼Œä½†æ˜¯forward_listä½¿ç”¨çš„æ˜¯å•é“¾è¡¨ï¼Œè€Œlistæ˜¯åŒé“¾è¡¨ã€‚ å•é“¾è¡¨ç›¸æ¯”åŒé“¾è¡¨çµæ´»æ€§å·®äº†å¾ˆå¤šï¼š å°¾éƒ¨æ’å…¥ã€åˆ é™¤æ“ä½œæ•ˆç‡ä½ï¼› åªèƒ½å‰å‘éå†ï¼Œä¸èƒ½åå‘éå†ï¼ˆå› æ­¤forward_liståªæœ‰å‰å‘è¿­ä»£å™¨ï¼Œè€Œä¸”ä¸ä¼šå…·æœ‰ rbegin()ã€rend() ä¹‹ç±»çš„æˆå‘˜å‡½æ•°ï¼‰ï¼› â€¦ ä½†æ˜¯å•é“¾è¡¨ç©ºé—´åˆ©ç”¨åˆ©ç”¨ç‡æ›´é«˜ï¼ˆnodeä¸ç”¨ä¿å­˜å‰å‘æŒ‡é’ˆï¼‰ï¼Œè€Œä¸”éµå¾ªå¥¥å¡å§†å‰ƒåˆ€åŸåˆ™ï¼šâ€œè‹¥æ— å¿…è¦ï¼Œå‹¿å¢å®ä½“â€â€”â€”åœ¨è¯¸å¤šå¯ä»¥æ»¡è¶³éœ€æ±‚çš„ç»“æ„ä¸­ï¼Œé€‰æ‹©å½±å“èŒƒå›´æœ€å°çš„ã€‚ æ‰€ä»¥åªè¦æ˜¯ list å®¹å™¨å’Œ forward_list å®¹å™¨éƒ½èƒ½å®ç°çš„æ“ä½œï¼Œåº”ä¼˜å…ˆé€‰æ‹© forward_list å®¹å™¨ã€‚ forward_list å®¹å™¨ä»¥ç±»æ¨¡æ¿çš„å½¢å¼å®šä¹‰åœ¨ &lt;forward_list &gt; å¤´æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123template&lt;typename _Tp, typename _Alloc = allocator&lt;_Tp&gt; &gt;class forward_list : private _Fwd_list_base&lt;_Tp, _Alloc&gt; åœ¨ forward_list&lt;_Tp,_Alloc&gt; æ¨¡æ¿ä¸­ï¼š _Tpï¼Œç”¨äºæŒ‡æ˜å®¹å™¨ä¸­å…ƒç´ æ•°æ®ç±»å‹ï¼› _Allocï¼Œå†…å­˜åˆ†é…å™¨ï¼Œé»˜è®¤é‡‡ç”¨äºŒçº§é…ç½®å™¨ï¼Œä¸€èˆ¬ä¸ç”¨æˆ‘ä»¬å…³å¿ƒã€‚ ç®€å•ä½¿ç”¨å®ä¾‹ã€‚ 12345678910111213141516171819202122232425#include &lt;iostream&gt;#include &lt;forward_list&gt;void printList(const forward_list&lt;int&gt;&amp; fl)&#123; // forward_list æ²¡æœ‰size()æ–¹æ³• // ç”¨distanceæ–¹æ³•å®ç° std::cout&lt;&lt;&quot;size = &quot; &lt;&lt; std::distance(std::begin(fl), std::end(fl)) &lt;&lt;&quot; : &quot;; // forward_list æ²¡æœ‰capacity()å‡½æ•° for(auto first = fl.begin(); first != fl.end(); first++) std::cout&lt;&lt;*first&lt;&lt;&quot; &quot;; std::cout&lt;&lt;&quot;\\n&quot;; &#125;int main()&#123; forward_list&lt;int&gt; fl &#123;1,2,3&#125;; // fl.emplace_front(4); // åº•å±‚æ˜¯å•é“¾è¡¨ï¼Œä¸æ”¯æŒå°¾éƒ¨ç›¸å…³æ“ä½œçš„å‡½æ•°/è¿­ä»£å™¨ fl.emplace_front(0); // å¤´éƒ¨æ’å…¥ï¼Œå°¾éƒ¨ä¸è¡Œ printList(fl); // size = 4 : 0 1 2 3 fl.pop_front(); // å¤´éƒ¨åˆ é™¤ printList(fl); // size = 3 : 1 2 3 return 0;&#125; æ³¨æ„åˆ°ï¼š forward_liståªèƒ½å¤´éƒ¨è¿›è¡Œäº†æ’å…¥ç­‰æ“ä½œï¼Œä¸èƒ½åœ¨å°¾éƒ¨ï¼› forward_listæ²¡æœ‰sizeæ–¹æ³•ï¼Œåªèƒ½ç”¨distanceæ–¹æ³•å®ç°ã€‚ åº•å±‚å®ç° æœ¬èŠ‚æˆ‘ä»¬ä¸»è¦æ¢è®¨ä»¥ä¸‹é—®é¢˜ï¼š forward_liståº•å±‚æ•°æ®ç»“æ„åŠå®ç°ï¼Ÿ forward_liståº•å±‚è¿­ä»£å™¨å¦‚ä½•å®šä¹‰ï¼Ÿ forward_liståº•å±‚å¦‚ä½•æ’å…¥ã€åˆ é™¤ä¸€ä¸ªæ•°æ®ï¼Ÿ forward_liståº•å±‚å®ç°å’Œlistæä¸ºç›¸ä¼¼ï¼Œè¿™é‡Œç›´æ¥ç»™å‡ºå…³é”®ç­”æ¡ˆã€‚ forward_liståº•å±‚æ•°æ®ç»“æ„åŠå®ç°ï¼Ÿ forward_liståº•å±‚æ˜¯ä½†é“¾è¡¨ï¼Œå¤´ç»“ç‚¹ä¸º_M_headã€‚å¤´èŠ‚ç‚¹æ˜¯_Fwd_list_node_baseç±»å‹ï¼Œä¸å­˜å‚¨æ•°æ®ã€‚ forward_liståº•å±‚è¿­ä»£å™¨å¦‚ä½•å®šä¹‰ï¼Ÿ æ²¡å•¥å¥½è¯´çš„ï¼Œå’Œlistå·®ä¸å¤šã€‚ forward_liståº•å±‚å¦‚ä½•æ’å…¥ã€åˆ é™¤ä¸€ä¸ªæ•°æ®ï¼Ÿ å°±æ˜¯å•é“¾è¡¨ç›¸å…³çš„æ“ä½œï¼Œæœ‰å¤´ç»“ç‚¹æ“ä½œæ¯”è¾ƒç»Ÿä¸€ã€‚ æˆå‘˜å‡½æ•° forward_listå…·æœ‰ä¼—å¤šçš„æˆå‘˜å‡½æ•°ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¯¹forward_listè¿›è¡Œå„ç§æ“ä½œã€‚ æˆ‘ä»¬å…ˆä¸€ç¹ä¸ºå¿«ã€‚ è¿­ä»£å™¨ç›¸å…³ å’Œarrayã€vectorã€dequeï¼Œlistä¸åŒï¼Œforward_listæ²¡æœ‰å°¾éƒ¨ç›¸å…³è¿­ä»£å™¨å‡½æ•°ã€‚ æˆå‘˜å‡½æ•° åŠŸèƒ½ begin() è¿”å›æŒ‡å‘å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„æ­£å‘è¿­ä»£å™¨ end() è¿”å›æŒ‡å‘å®¹å™¨æœ€åä¸€ä¸ªå…ƒç´ ä¹‹åä¸€ä¸ªä½ç½®çš„æ­£å‘è¿­ä»£å™¨ cbegin() å’Œ begin() åŠŸèƒ½ç›¸åŒï¼Œåªä¸è¿‡å…¶è¿”å›çš„è¿­ä»£å™¨ç±»å‹ä¸ºå¸¸é‡æ­£å‘è¿­ä»£å™¨ cend() å’Œ end() åŠŸèƒ½ç›¸åŒï¼Œåªä¸è¿‡å…¶è¿”å›çš„è¿­ä»£å™¨ç±»å‹ä¸ºå¸¸é‡æ­£å‘è¿­ä»£å™¨ æ³¨æ„ï¼Œå¦‚æœæ˜¯ const ç±»å‹å®¹å™¨ï¼Œè¿”å›çš„ä¸€å®šæ˜¯å¸¸é‡æ­£å‘è¿­ä»£å™¨ï¼Œå¸¸é‡è¿­ä»£å™¨ä¸èƒ½ä¿®æ”¹æŒ‡å‘çš„å…ƒç´ ï¼› begin() å’Œ end() ä¸ºC++11æ–°å¢ï¼Œæ“ä½œå¯¹è±¡è¿˜å¯ä»¥æ˜¯æ•°ç»„ã€‚ ä¸»è¦æˆå‘˜å‡½æ•° æ ‡ç²—éƒ¨åˆ†æ˜¯å¸¸ç”¨çš„å‡½æ•°ã€‚ listã€forward_liståº•å±‚æ˜¯é“¾è¡¨ï¼Œæ²¡æœ‰éšæœºè¿­ä»£å™¨ï¼Œä¸€äº›éšæœºè¿­ä»£å™¨æ‰æ”¯æŒçš„æ–¹æ³•ï¼Œæ¯”å¦‚at(n)éƒ½æ˜¯ä¸æ”¯æŒçš„ï¼› forward_liståº•å±‚æ˜¯å•é“¾è¡¨ï¼Œåªæœ‰å¤´éƒ¨æ“ä½œæ•ˆç‡é«˜ï¼Œæ‰€ä»¥å°¾éƒ¨æ“ä½œç›¸å…³çš„æ–¹æ³•push_back()ç­‰STLä¸æä¾›ï¼› æˆå‘˜å‡½æ•° åŠŸèƒ½ size() forward_listä¸æ”¯æŒï¼Œå¯ç”¨std::distance() æ–¹æ³•é—´æ¥å®ç° capacity forward_listã€listã€dequeæ²¡æœ‰è¯¥æ–¹æ³•ï¼Œvectoræœ‰ reserve() forward_listã€listã€dequeæ²¡æœ‰è¯¥æ–¹æ³•ï¼Œvectoræœ‰ max_size() è¿”å›å®¹å™¨å¯å®¹çº³å…ƒç´ çš„æœ€å¤§æ•°é‡ empty() åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©ºï¼Œå’Œé€šè¿‡ size()==0 çš„åˆ¤æ–­æ¡ä»¶åŠŸèƒ½ç›¸åŒï¼Œä½†å…¶æ•ˆç‡å¯èƒ½æ›´å¿« at(n) - front() è¿”å›å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç›´æ¥å¼•ç”¨ data() forward_listã€listã€dequeæ²¡æœ‰è¯¥æ–¹æ³•ï¼Œvectoræœ‰ swap() äº¤æ¢ä¸¤ä¸ªå®¹å™¨çš„æ‰€æœ‰å…ƒç´  ç›¸æ¯”arrayç‹¬æœ‰çš„æ–¹æ³•ï¼ˆå¯ä»¥å¤´éƒ¨æ’å…¥ã€åˆ é™¤å…ƒç´ ç­‰ï¼‰ï¼š æˆå‘˜å‡½æ•° åŠŸèƒ½ push_front() åœ¨å®¹å™¨çš„å¤´éƒ¨æ·»åŠ ä¸€ä¸ªå…ƒç´  | emplace_front() | åœ¨å®¹å™¨å¤´éƒ¨ç”Ÿæˆä¸€ä¸ªå…ƒç´  | | erase() | ç§»å‡ºä¸€ä¸ªå…ƒç´ æˆ–ä¸€æ®µå…ƒç´ ï¼Œè¿”å›æŒ‡å‘åˆ é™¤å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ | | clear() | ç§»å‡ºæ‰€æœ‰çš„å…ƒç´ ï¼Œå®¹å™¨å¤§å°å˜ä¸º 0 | | pop_front() | ç§»é™¤å®¹å™¨å¤´éƒ¨çš„å…ƒç´  | ç›¸æ¯”dequeæ–°å¢ï¼ˆé“¾è¡¨ç›¸å…³æ–¹æ³•ï¼‰ï¼š æˆå‘˜å‡½æ•° åŠŸèƒ½ splice() å°†ä¸€ä¸ª forward_listå®¹å™¨ä¸­çš„å…ƒç´ æ’å…¥åˆ°å¦ä¸€ä¸ªå®¹å™¨çš„æŒ‡å®šä½ç½® remove(val) åˆ é™¤å®¹å™¨ä¸­æ‰€æœ‰ç­‰äº val çš„å…ƒç´  remove_if() åˆ é™¤å®¹å™¨ä¸­æ»¡è¶³æ¡ä»¶çš„å…ƒç´  unique() åˆ é™¤å®¹å™¨ä¸­ç›¸é‚»çš„é‡å¤å…ƒç´ ï¼Œåªä¿ç•™ä¸€ä¸ª merge() åˆå¹¶ä¸¤ä¸ªäº‹å…ˆå·²æ’å¥½åºçš„ forward_listå®¹å™¨ï¼Œå¹¶ä¸”åˆå¹¶ä¹‹åçš„ forward_listå®¹å™¨ä¾ç„¶æ˜¯æœ‰åºçš„ sort() é€šè¿‡æ›´æ”¹å®¹å™¨ä¸­å…ƒç´ çš„ä½ç½®ï¼Œå°†å®ƒä»¬è¿›è¡Œæ’åº reverse() åè½¬å®¹å™¨ä¸­å…ƒç´ çš„é¡ºåº 9.2.2 å…³è”å¼å®¹å™¨ åºåˆ—å¼å®¹å™¨å…ƒç´ æ˜¯é¡ºåºå­˜å‚¨çš„ï¼Œè€Œâ€œå…³è”å¼å®¹å™¨â€æ˜¯ä»¥é”®å€¼å¯¹æ–¹å¼å­˜å‚¨çš„ï¼Œé¡¾åæ€ä¹‰æ¯ä¸ªå…ƒç´ éƒ½ä¼šå’Œä¸€ä¸ªâ€œé”®â€ç›¸å…³è”çš„ã€‚è¿™ç§ç‰¹æ€§ç®€å•è§£é‡Šæ¥è¯´ï¼Œå°±æ˜¯æŸ¥æ‰¾åˆ°â€œé”®â€å°±å¯ä»¥æŸ¥æ‰¾åˆ°ç›¸å…³å…ƒç´ ã€‚ åœ¨åº•å±‚å®ç°ä¸­ï¼Œå…³è”å®¹å™¨çš„â€œé”®å€¼å¯¹â€é‡‡ç”¨çº¢é»‘æ ‘æ¥å­˜å‚¨ï¼Œè¿™ä½¿å¾—å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å®ç°æ’åºï¼Œæ‰€ä»¥å…³è”å¼å®¹å™¨çš„å…ƒç´ éƒ½ä¼šæŒ‰ç…§é”®å€¼çš„å¤§å°åšå‡åºæ’åºã€‚ æœ¬èŠ‚ä¸»è¦æ¢è®¨ä»¥ä¸‹å®¹å™¨ï¼š é™¤æ­¤ä¹‹å¤–ï¼ŒC++ 11 è¿˜æ–°å¢äº† 4 ç§å“ˆå¸Œå®¹å™¨ï¼Œå³ unordered_mapã€unordered_multimap ä»¥åŠ unordered_setã€unordered_multisetã€‚ä¸¥æ ¼æ¥è¯´ï¼Œå®ƒä»¬ä¹Ÿå±äºå…³è”å¼å®¹å™¨ï¼Œä½†ç”±äºå“ˆå¸Œå®¹å™¨åº•å±‚é‡‡ç”¨çš„æ˜¯å“ˆå¸Œè¡¨ï¼Œè€Œä¸æ˜¯çº¢é»‘æ ‘ï¼Œæ”¾åœ¨ä¸‹èŠ‚9.2.3è®²è§£ã€‚ å®¹å™¨ åº•å±‚æ•°æ®ç»“æ„ ç‰¹ç‚¹ è¿­ä»£å™¨ç±»å‹ map çº¢é»‘æ ‘ï¼Œä¸‹åŒ é”®å¿…é¡»å”¯ä¸€ï¼Œä¼šæ ¹æ®é”®å¤§å°é»˜è®¤å‡åºæ’åº åŒå‘è¿­ä»£å™¨ï¼Œä¸‹åŒ multimap åŸºæœ¬åŒmapï¼Œä½†multimap é”®å¯é‡å¤ set é”®å’Œå€¼å®Œå…¨ç›¸åŒï¼Œé”®ä¾æ—§å”¯ä¸€ï¼Œé»˜è®¤å‡åº multiset åŸºæœ¬åŒsetï¼Œä½†multiset é”®å¯é‡å¤ pair æˆ‘ä»¬çŸ¥é“ï¼Œå…³è”å¼å®¹å™¨å­˜å‚¨çš„æ˜¯â€œé”®å€¼å¯¹â€å½¢å¼çš„æ•°æ®ï¼Œå³&lt;key,value&gt;å½¢å¼ã€‚ C++STLä¸“é—¨æä¾›äº†pairç±»æ¨¡æ¿ï¼Œç”¨æ¥å°è£…â€œé”®å€¼å¯¹â€è¿™ç§å½¢å¼çš„æ•°æ®ã€‚ å®ƒè¢«å®šä¹‰ä¸ºï¼š 123456template&lt;class _T1, class _T2&gt;struct pair&#123; _T1 first; _T2 second; ... ä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼š 12345678910111213141516171819#include &lt;utility&gt;#include &lt;string&gt; int main()&#123; // åˆå§‹åŒ– pair&lt;int,string&gt; kv1&#123;1,&quot;ä¸€&quot;&#125;; pair&lt;int,string&gt; kv2&#123;2,&quot;äºŒ&quot;&#125;; // ä¿®æ”¹ kv1.first = -1; kv1.second =&quot;è´Ÿä¸€&quot;; // æ¯”è¾ƒ:é”®å€¼å¯¹å®Œå…¨ç›¸å…³è¿”å›trueï¼Œå¦åˆ™false bool is_equal = kv1 == kv2 ? true : false; // swapäº¤æ¢é”®å€¼å¯¹ kv1.swap(kv2);&#125; ä½ è¿˜å¯ä»¥ä½¿ç”¨make_pair æ¥åˆ›å»ºpairå¯¹è±¡ï¼š 1pair&lt;int,string&gt; kv3&#123;make_pair(3, &quot;ä¸‰&quot;)&#125;; åé¢æˆ‘ä»¬ä¼šå¤§é‡ç”¨åˆ°è¿™ç§æ–¹å¼åˆ›å»ºpairå¯¹è±¡ã€‚ map ä½œä¸ºå…³è”å¼å®¹å™¨çš„ä¸€ç§ï¼Œmapç”¨ pair ç±»æ¨¡æ¿åˆ›å»ºé”®å€¼å¯¹ï¼Œåº•å±‚ç»“æ„æ˜¯çº¢é»‘æ ‘è€Œä¸”è¿˜ä¼šæ ¹æ®å„é”®å€¼å¯¹çš„é”®çš„å¤§å°ï¼Œè¿›è¡Œå‡åºæ’åºã€‚ mapå®¹å™¨ä»¥ç±»æ¨¡æ¿å½¢å¼å®šä¹‰åœ¨ &lt;map&gt; å¤´æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12345template &lt;typename _Key, typename _Tp, typename _Compare = std::less&lt;_Key&gt;, typename _Alloc = std::allocator&lt;std::pair&lt;const _Key, _Tp&gt; &gt; &gt;class map åœ¨ map&lt;_Key,_Tp,_Compare,_Alloc&gt; æ¨¡æ¿ä¸­ï¼š _Keyï¼ŒæŒ‡å®šé”®çš„ç±»å‹ï¼› _Tpï¼ŒæŒ‡å®šå€¼çš„ç±»å‹ï¼› _Compareï¼šæŒ‡å®šæ’åºé¡ºåºï¼Œé»˜è®¤é€‰ç”¨å‡åºstd::less&lt;_Key&gt;ï¼Œä¹Ÿå¯ä»¥é€‰ç”¨std::greater&lt;_Key&gt; æˆ–è€…è‡ªå®šä¹‰æ’åºè§„åˆ™ï¼› _Allocï¼Œé»˜è®¤é€‰ç”¨äºŒçº§å†…å­˜åˆ†é…å™¨ã€‚ ç‰¹åˆ«çš„ï¼Œå…³è”å¼å®¹å™¨ï¼ˆå¦‚mapï¼‰çš„é”®å€¼keyéƒ½æ˜¯ä¸èƒ½ä¿®æ”¹çš„ï¼Œåªèƒ½é€šè¿‡ï¼šå…ˆæ‰‹åŠ¨åˆ é™¤é”®å€¼å¯¹ï¼Œå†æ’å…¥ï¼Œè¿™ç§é—´æ¥çš„æ–¹å¼ä¿®æ”¹ã€‚ å‡è®¾å…³è”å®¹å™¨å…è®¸ä¿®æ”¹é”®å€¼çš„ï¼Œå› ä¸ºå…¶åº•å±‚æ˜¯çº¢é»‘æ ‘ï¼š é¦–å…ˆéœ€è¦åˆ é™¤è¯¥é”®ï¼Œç„¶åè°ƒèŠ‚å¹³è¡¡ å†æ’å…¥ä¿®æ”¹åçš„é”®å€¼ï¼Œå†è°ƒèŠ‚å¹³è¡¡ å¦‚æ­¤ä¸€æ¥ï¼Œä¸¥é‡ç ´åäº†çº¢é»‘æ ‘çš„ç»“æ„ï¼Œå¯¼è‡´iteratorå¤±æ•ˆï¼Œä¸çŸ¥é“åº”è¯¥æŒ‡å‘ä¹‹å‰çš„ä½ç½®ï¼Œè¿˜æ˜¯æŒ‡å‘æ”¹å˜åçš„ä½ç½®ã€‚æ‰€ä»¥STLä¸­å°†å…³è”å¼å®¹å™¨çš„è¿­ä»£å™¨è®¾ç½®æˆconstï¼Œä¸å…è®¸ä¿®æ”¹è¿­ä»£å™¨çš„å€¼ã€‚ 123auto map1 = std::map&lt;int,std::string&gt; &#123; std::make_pair(1,&quot;ä¸€&quot;),std::make_pair(2,&quot;äºŒ&quot;)&#125;;map1.find(&quot;two&quot;)-&gt;first = 0; // errorï¼Œä¸å…è®¸ä¿®æ”¹ ä¸€ä¸ªç®€å•ä½¿ç”¨å®ä¾‹ã€‚ 12345678910111213141516171819202122232425262728293031#include&lt;map&gt;#include&lt;utility&gt;#include&lt;iostream&gt;#include&lt;string&gt; void printMap(const map&lt;int,string&gt;&amp; m)&#123; std::cout&lt;&lt;&quot;size = &quot; &lt;&lt; m.size() &lt;&lt;&quot; : &quot;; // æ‰“å°é”®å€¼å¯¹ for(auto iter = m.begin(); iter != m.end(); iter++) std::cout&lt;&lt;&quot;&lt;key=&quot;&lt;&lt; iter-&gt;first &lt;&lt;&quot;, value=&quot; &lt;&lt; iter-&gt;second &lt;&lt; &quot;&gt; &quot;; std::cout&lt;&lt;&quot;\\n&quot;; &#125;int main()&#123; // make_pair map&lt;int,std::string&gt; map1 &#123; std::make_pair(1,&quot;ä¸€&quot;),std::make_pair(2,&quot;äºŒ&quot;)&#125;; map1[1]; // &quot;ä¸€&quot; map1[2]; // &quot;äºŒ&quot; // æ’å…¥ map1.emplace(std::make_pair(0,&quot;é›¶&quot;)); map1.emplace(std::make_pair(4,&quot;å››&quot;)); printMap(map1); // åˆ é™¤ map1.erase(3); map1.erase(4); printMap(map1);&#125; åœ¨æœ¬ä¾‹ä¸­ï¼Œmapåˆå§‹åŒ–è¿˜å¯ä»¥ç®€åŒ–ä¸ºï¼š 1map&lt;int,std::string&gt; map1 &#123; &#123;1,&quot;ä¸€&quot;&#125;,&#123;2,&quot;äºŒ&quot;&#125;&#125;; è¾“å‡ºï¼ˆæ³¨æ„æ‰“å°å‡ºæ¥çš„é¡ºåºæŒ‰keyå‡åºæ‰“å°çš„ï¼‰ï¼š 123[root@roy-cpp test]# ./test.out size = 4 : &lt;key=0, value=é›¶&gt; &lt;key=1, value=ä¸€&gt; &lt;key=2, value=äºŒ&gt; &lt;key=4, value=å››&gt; size = 3 : &lt;key=0, value=é›¶&gt; &lt;key=1, value=ä¸€&gt; &lt;key=2, value=äºŒ&gt; æˆå‘˜å‡½æ•° mapå…·æœ‰ä¼—å¤šçš„æˆå‘˜å‡½æ•°ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¯¹mapè¿›è¡Œå„ç§æ“ä½œã€‚ æˆ‘ä»¬å…ˆä¸€ç¹ä¸ºå¿«ã€‚ è¿­ä»£å™¨ç›¸å…³ åŒarrayã€vectorï¼Œdequeã€listã€‚ æˆå‘˜å‡½æ•° åŠŸèƒ½ begin() è¿”å›æŒ‡å‘å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„æ­£å‘è¿­ä»£å™¨ end() è¿”å›æŒ‡å‘å®¹å™¨æœ€åä¸€ä¸ªå…ƒç´ ä¹‹åä¸€ä¸ªä½ç½®çš„æ­£å‘è¿­ä»£å™¨ rbegin() è¿”å›æŒ‡å‘æœ€åä¸€ä¸ªå…ƒç´ çš„åå‘è¿­ä»£å™¨ rend() è¿”å›æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ ä¹‹å‰ä¸€ä¸ªä½ç½®çš„åå‘è¿­ä»£å™¨ cbegin() å’Œ begin() åŠŸèƒ½ç›¸åŒï¼Œåªä¸è¿‡å…¶è¿”å›çš„è¿­ä»£å™¨ç±»å‹ä¸ºå¸¸é‡æ­£å‘è¿­ä»£å™¨ cend() å’Œ end() åŠŸèƒ½ç›¸åŒï¼Œåªä¸è¿‡å…¶è¿”å›çš„è¿­ä»£å™¨ç±»å‹ä¸ºå¸¸é‡æ­£å‘è¿­ä»£å™¨ crbegin() å’Œ rbegin() åŠŸèƒ½ç›¸åŒï¼Œåªä¸è¿‡å…¶è¿”å›çš„è¿­ä»£å™¨ç±»å‹ä¸ºå¸¸é‡åå‘è¿­ä»£å™¨ crend() å’Œ rend() åŠŸèƒ½ç›¸åŒï¼Œåªä¸è¿‡å…¶è¿”å›çš„è¿­ä»£å™¨ç±»å‹ä¸ºå¸¸é‡åå‘è¿­ä»£å™¨ æ³¨æ„ï¼Œå¦‚æœæ˜¯ const ç±»å‹å®¹å™¨ï¼Œè¿”å›çš„ä¸€å®šæ˜¯å¸¸é‡æ­£å‘è¿­ä»£å™¨ï¼Œå¸¸é‡è¿­ä»£å™¨ä¸èƒ½ä¿®æ”¹æŒ‡å‘çš„å…ƒç´ ï¼› begin() å’Œ end() ä¸ºC++11æ–°å¢ï¼Œæ“ä½œå¯¹è±¡è¿˜å¯ä»¥æ˜¯æ•°ç»„ã€‚ ä¸»è¦æˆå‘˜å‡½æ•° æ ‡ç²—éƒ¨åˆ†æ˜¯å¸¸ç”¨çš„å‡½æ•°ã€‚ å…³è”å®¹å™¨è™½ç„¶åº•å±‚ä¹Ÿæ˜¯åŒå‘è¿­ä»£å™¨ï¼Œä¸æ˜¯éšæœºè¿­ä»£å™¨ï¼Œä¸€äº›éšæœºè¿­ä»£å™¨æ‰æ”¯æŒçš„æ–¹æ³•ï¼Œæ¯”å¦‚at(n)ã€[n]æ˜¯ä¸æ”¯æŒçš„ï¼Œä½†æ”¯æŒæŒ‰é”®å€¼æŸ¥æ‰¾at(key)ã€[key]æ–¹æ³•ï¼› å…³è”å®¹å™¨ä¸èƒ½åœ¨æŒ‡å®šä½ç½®ä¸Šåˆ é™¤ã€æ’å…¥å…ƒç´ ï¼Œæ‰€ä»¥STLæ²¡æœ‰æä¾›push_back()ã€push_front()ä¹‹ç±»å¤´å°¾æ“ä½œæ–¹æ³•ï¼Œè€Œæ˜¯ä½¿ç”¨emplace() æˆ–insert()ã€‚ æˆå‘˜å‡½æ•° åŠŸèƒ½ empty() è‹¥å®¹å™¨ä¸ºç©ºï¼Œåˆ™è¿”å› trueï¼›å¦åˆ™ false size() è¿”å›å½“å‰ map å®¹å™¨ä¸­å­˜æœ‰é”®å€¼å¯¹çš„ä¸ªæ•° max_size() è¿”å› map å®¹å™¨æ‰€èƒ½å®¹çº³é”®å€¼å¯¹çš„æœ€å¤§ä¸ªæ•°ï¼Œä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œå…¶è¿”å›å€¼äº¦ä¸ç›¸åŒ operator[key] mapå®¹å™¨é‡è½½äº† [] è¿ç®—ç¬¦ï¼Œè·å–æŒ‡å®šé”®çš„å€¼ï¼ŒæŸ¥æ‰¾å¤±è´¥æ·»åŠ æ–°çš„é”®å€¼å¯¹ at(key) æ‰¾åˆ° map å®¹å™¨ä¸­ key é”®å¯¹åº”çš„å€¼ï¼ŒæŸ¥æ‰¾å¤±è´¥å¼•å‘ out_of_range å¼‚å¸¸ insert() å‘ map å®¹å™¨ä¸­æ’å…¥é”®å€¼å¯¹ï¼Œå¦‚æœkeyé‡å¤ä¼šè¦†ç›– erase() åˆ é™¤ map å®¹å™¨æŒ‡å®šä½ç½®ã€æŒ‡å®šé”®ï¼ˆkeyï¼‰å€¼æˆ–è€…æŒ‡å®šåŒºåŸŸå†…çš„é”®å€¼å¯¹ swap() äº¤æ¢ 2 ä¸ª map å®¹å™¨ä¸­å­˜å‚¨çš„é”®å€¼å¯¹ï¼Œè¿™æ„å‘³ç€ï¼Œæ“ä½œçš„ 2 ä¸ªé”®å€¼å¯¹çš„ç±»å‹å¿…é¡»ç›¸åŒã€‚ clear() æ¸…ç©º map å®¹å™¨ä¸­æ‰€æœ‰çš„é”®å€¼å¯¹ï¼Œå³ä½¿ map å®¹å™¨çš„ size() ä¸º 0 emplace() åŸºæœ¬åŒinsertï¼Œä½†ç›¸æ¯”insertæ•ˆç‡æ›´é«˜ count(key) åœ¨å½“å‰ map å®¹å™¨ä¸­ï¼ŒæŸ¥æ‰¾é”®ä¸º key çš„é”®å€¼å¯¹çš„ä¸ªæ•°å¹¶è¿”å›ã€‚æ³¨æ„ï¼Œç”±äº map å®¹å™¨ä¸­å„é”®å€¼å¯¹çš„é”®çš„å€¼æ˜¯å”¯ä¸€çš„ï¼Œå› æ­¤è¯¥å‡½æ•°çš„è¿”å›å€¼æœ€å¤§ä¸º 1ã€‚ ç›¸æ¯”åºåˆ—å®¹å™¨ï¼Œå…³è”å®¹å™¨ç‹¬æœ‰çš„ä¸€äº›å‡½æ•°ï¼š æˆå‘˜å‡½æ•° åŠŸèƒ½ find(key) åœ¨ map å®¹å™¨ä¸­æŸ¥æ‰¾é”®ä¸º key çš„é”®å€¼å¯¹ï¼Œæ‰¾åˆ°è¿”å›å¯¹åº”è¿­ä»£å™¨ï¼ˆå’Œatã€[]ä¸åŒï¼Œä¸æ˜¯è¿”å›valueï¼‰ï¼Œå¦‚æœæ²¡æ‰¾åˆ°è¿”å›å’Œ end() æ–¹æ³•ä¸€æ ·çš„è¿­ä»£å™¨ lower_bound(key) è¿”å›ä¸€ä¸ªæŒ‡å‘å½“å‰ map å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªå¤§äºæˆ–ç­‰äº key çš„é”®å€¼å¯¹çš„åŒå‘è¿­ä»£å™¨ï¼Œå¦‚æœæ²¡æ‰¾åˆ°è¿”å›å’Œ end() æ–¹æ³•ä¸€æ ·çš„è¿­ä»£å™¨ upper_bound(key) ç±»ä¼¼ä¸Šï¼Œä¸è¿‡è¿”å›çš„æ˜¯ç¬¬ä¸€ä¸ªå¤§äº keyçš„ï¼ˆä¸åŒ…å«ç­‰äºï¼‰ ç®€å•å¯¹æ¯”ä¸‹operator[key] å’Œat(key) è¿™ä¸¤ç§æŸ¥è¯¢keyçš„æ–¹å¼ã€‚ æ³¨æ„åˆ°ï¼Œoperator[key] å¦‚æœæ²¡æŸ¥æ‰¾åˆ°keyï¼Œè¿˜ä¼šç›´æ¥ç»™mapæ’å…¥å½“å‰æœªæŸ¥æ‰¾åˆ°çš„keyã€‚ 12345678910111213141516#include&lt;map&gt;#include&lt;string&gt; #include&lt;iostream&gt; int main()&#123; // ç©ºmap map&lt;int,std::string&gt; map1 &#123; &#125;; // at(key) // map1.at(1); // errorç¨‹åºç»ˆæ­¢ï¼ŒæŠ›å‡ºå¼‚å¸¸ // [key] map1[1]; std::cout&lt;&lt; map1.begin()-&gt;first &lt;&lt;&quot;,&quot; &lt;&lt; map1.begin()-&gt;second &lt;&lt; std::endl;&#125; ç¼–è¯‘å™¨è‡ªåŠ¨åˆå§‹åŒ–äº†valueï¼šå¦‚æœæ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œåˆ™å€¼ä¸º 0ï¼›å¦‚æœæ˜¯ string ç±»å‹ï¼Œå…¶å€¼ä¸º â€œâ€ï¼Œå³ç©ºå­—ç¬¦ä¸²ã€‚ è¾“å‡ºï¼š 12[root@roy-cpp test]# ./test.out 1,&quot;&quot; åº•å±‚å®ç° æœ¬èŠ‚æˆ‘ä»¬ä¸»è¦æ¢è®¨ä»¥ä¸‹é—®é¢˜ï¼š mapåº•å±‚æ•°æ®ç»“æ„åŠå®ç°ï¼Ÿ mapåº•å±‚è¿­ä»£å™¨å¦‚ä½•å®šä¹‰ï¼Ÿ mapåº•å±‚å¦‚ä½•æ’å…¥ã€åˆ é™¤ä¸€ä¸ªæ•°æ®ï¼Ÿ æœ¬èŠ‚åªåšç®€å•åˆ†æã€‚ mapåº•å±‚æ•°æ®ç»“æ„åŠå®ç°ï¼Ÿ å‰é¢æˆ‘ä»¬è¯´è¿‡ï¼Œmapåº•å±‚æ˜¯çº¢é»‘æ ‘ï¼Œå¯ä»¥åœ¨mapä»£ç ä¸­éªŒè¯ï¼š 12345678910111213141516template &lt;typename _Key, typename _Tp, typename _Compare = std::less&lt;_Key&gt;,typename _Alloc = std::allocator&lt;std::pair&lt;const _Key, _Tp&gt; &gt; &gt;class map&#123; public: typedef _Key key_type; typedef _Tp mapped_type; typedef std::pair&lt;const _Key, _Tp&gt; value_type; ... private: typedef typename _Alloc::template rebind&lt;value_type&gt;::other _Pair_alloc_type; // çº¢é»‘æ ‘æ¨¡æ¿ç±» typedef _Rb_tree&lt;key_type, value_type, _Select1st&lt;value_type&gt;, key_compare, _Pair_alloc_type&gt; _Rep_type; /// The actual tree structure. _Rep_type _M_t; // mapåº•å±‚çš„çº¢é»‘æ ‘ ... å…·ä½“å±•å¼€å°±æ˜¯å¯¹çº¢é»‘æ ‘çš„åˆ†æäº†ï¼Œå¤§è‡´äº†è§£åˆ°è¿™å°±è¡Œã€‚ mapåº•å±‚è¿­ä»£å™¨å¦‚ä½•å®šä¹‰ï¼Ÿ mapä¸­è¿­ä»£å™¨ä½¿ç”¨çš„æ˜¯çº¢é»‘ä¸­çš„è¿­ä»£å™¨ï¼š 1typedef typename _Rep_type::iterator iterator; 12345678910enum _Rb_tree_color &#123; _S_red = false, _S_black = true &#125;;struct _Rb_tree_node_base &#123; typedef _Rb_tree_node_base* _Base_ptr; typedef const _Rb_tree_node_base* _Const_Base_ptr; _Rb_tree_color _M_color; _Base_ptr _M_parent; // çˆ¶æŒ‡é’ˆ _Base_ptr _M_left; // å·¦æŒ‡é’ˆ _Base_ptr _M_right; // å³æŒ‡é’ˆ mapåº•å±‚å¦‚ä½•æ’å…¥ã€åˆ é™¤ä¸€ä¸ªæ•°æ®ï¼Ÿ ä¸»è¦æ˜¯çº¢é»‘æ ‘ç›¸å…³åˆ é™¤ã€æ’å…¥æ“ä½œã€‚ multimap multimap å®¹å™¨å…·æœ‰å’Œ map æä¸ºç›¸ä¼¼çš„ç‰¹æ€§ï¼š multimap å®¹å™¨çš„ç±»æ¨¡æ¿ä¹Ÿå®šä¹‰åœ¨&lt;map&gt;å¤´æ–‡ä»¶ï¼› ä¹ŸæŒ‰é”®å€¼å¯¹æ–¹å¼å­˜å‚¨æ•°æ®ï¼Œåº•å±‚ä¹Ÿæ˜¯çº¢é»‘æ ‘ç»“æ„ï¼› ä¼šæ ¹æ®é”®å€¼å‡åºæ’åºå…ƒç´ ï¼› æˆå‘˜å‡½æ•°å¤§éƒ¨åˆ†ç›¸åŒï¼› é”®å€¼æ— æ³•ä¿®æ”¹ï¼› â€¦ ä¸»è¦çš„ä¸åŒä½“ç°åœ¨ï¼š multimap å¯ä»¥åŒæ—¶å­˜å‚¨å¤šä¸ªé”®ç›¸åŒçš„é”®å€¼å¯¹ï¼› multimap é™¤äº†find(key)ï¼Œä¸èƒ½ä½¿ç”¨at(key) æˆ– operator[key] ç­‰ç›´æ¥æŒ‰keyè·å–valueçš„æ–¹å¼ï¼ˆå¾ˆå¥½ç†è§£ï¼Œmultimapä¼šå­˜åœ¨å¤šä¸ªé‡å¤çš„é”®ï¼‰ã€‚ multimap ä¹Ÿå®šä¹‰åœ¨ &lt;map&gt; å¤´æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12345template &lt;typename _Key, typename _Tp, typename _Compare = std::less&lt;_Key&gt;, typename _Alloc = std::allocator&lt;std::pair&lt;const _Key, _Tp&gt; &gt; &gt;class multimap åœ¨ multimap &lt;_Key,_Tp,_Compare,_Alloc&gt; æ¨¡æ¿ä¸­ï¼š _Keyï¼ŒæŒ‡å®šé”®çš„ç±»å‹ï¼› _Tpï¼ŒæŒ‡å®šå€¼çš„ç±»å‹ï¼› _Compareï¼šæŒ‡å®šæ’åºé¡ºåºï¼Œé»˜è®¤é€‰ç”¨å‡åºstd::less&lt;_Key&gt;ï¼Œä¹Ÿå¯ä»¥é€‰ç”¨std::greater&lt;_Key&gt; æˆ–è€…è‡ªå®šä¹‰æ’åºè§„åˆ™ï¼› _Allocï¼Œé»˜è®¤é€‰ç”¨äºŒçº§å†…å­˜åˆ†é…å™¨ã€‚ ä¸€ä¸ªç®€å•ä½¿ç”¨å®ä¾‹ï¼ˆä½¿ç”¨èµ·æ¥å’Œmapå¾ˆç›¸ä¼¼ï¼‰ã€‚ 123456789101112131415161718192021222324252627282930#include&lt;map&gt;#include&lt;utility&gt;#include&lt;iostream&gt;#include&lt;string&gt; void printMMap(const multimap&lt;int,string&gt;&amp; m)&#123; std::cout&lt;&lt;&quot;size = &quot; &lt;&lt; m.size() &lt;&lt;&quot; : &quot;; // æ‰“å°é”®å€¼å¯¹ for(auto iter = m.begin(); iter != m.end(); iter++) std::cout&lt;&lt;&quot;&lt;key=&quot;&lt;&lt; iter-&gt;first &lt;&lt;&quot;, value=&quot; &lt;&lt; iter-&gt;second &lt;&lt; &quot;&gt; &quot;; std::cout&lt;&lt;&quot;\\n&quot;; &#125;int main()&#123; // make_pair multimap&lt;int,std::string&gt; mmap1 &#123; std::make_pair(1,&quot;ä¸€&quot;),std::make_pair(1,&quot;å£¹&quot;)&#125;; // é”®å€¼ç›¸åŒï¼Œéƒ½æ˜¯1 // map1[1] = &quot;one&quot;; // errorï¼Œæ— æ³•ä¿®æ”¹é”®å€¼ // æ’å…¥ mmap1.emplace(std::make_pair(0,&quot;é›¶&quot;)); mmap1.emplace(std::make_pair(4,&quot;å››&quot;)); printMMap(mmap1); // åˆ é™¤ mmap1.erase(3); mmap1.erase(4); printMMap(mmap1);&#125; è¾“å‡ºï¼ˆè‡ªåŠ¨æ’åºï¼‰ï¼š 123[root@roy-cpp test]# ./test.out size = 4 : &lt;key=0, value=é›¶&gt; &lt;key=1, value=ä¸€&gt; &lt;key=1, value=å£¹&gt; &lt;key=4, value=å››&gt; size = 3 : &lt;key=0, value=é›¶&gt; &lt;key=1, value=ä¸€&gt; &lt;key=1, value=å£¹&gt; å…³äºæˆå‘˜å‡½æ•° multimapçš„æˆå‘˜å‡½æ•°ï¼Œé™¤äº†ä¸èƒ½ä½¿ç”¨at(key)ã€operator[key] ï¼ŒåŸºæœ¬å’Œmapä¸€è‡´ï¼Œæ•…ä¸å•åˆ—äº†ã€‚ set mapå’Œsetéƒ½æ˜¯ä»¥çº¢é»‘æ ‘ä½œä¸ºåº•å±‚æ•°æ®ç»“æ„ï¼Œæ‰€ä»¥å¤–éƒ¨è¡¨ç°çš„ä¹Ÿæä¸ºç›¸ä¼¼ï¼š ä¸å…è®¸å‡ºç°é”®å€¼é‡å¤ï¼› æ‰€æœ‰çš„å…ƒç´ éƒ½ä¼šè¢«è‡ªåŠ¨æ’åºï¼› ä¸èƒ½é€šè¿‡è¿­ä»£å™¨æ¥æ”¹å˜setçš„å€¼ï¼Œå› ä¸ºsetçš„å€¼å°±æ˜¯é”®ï¼ˆå…³è”å®¹å™¨çš„é”®å€¼ä¸å…è®¸ä¿®æ”¹ï¼‰ï¼› æˆå‘˜å‡½æ•°æä¸ºç±»ä¼¼ï¼› â€¦ ä¸»è¦åŒºåˆ«åœ¨äºï¼š setå®¹å™¨å­˜å‚¨çš„é”®å€¼å¯¹ï¼ˆkey-valueï¼‰çš„keyã€valueå®Œå…¨ç›¸åŒã€‚åœ¨åº•å±‚å®ç°ä¸Šï¼Œmapåº•å±‚åŒºåˆ«ä¹Ÿä¸»è¦æ˜¯ä¿®æ”¹çº¢é»‘æ ‘å­˜å‚¨çš„keyã€valueä¿å­˜ä¸€è‡´ï¼› setå®¹å™¨é™¤äº†find(key)ï¼Œä¸èƒ½ä½¿ç”¨at(key) æˆ– operator[key]è·å–value ï¼Œè™½ç„¶åœ¨åº•å±‚å®ç°ä¸Šsetçš„keyç­‰äºvalueï¼Œä½†æ˜¯ä¸å…è®¸è·å–valueã€‚ å¯¹äºç¬¬ä¸€ä¸ªåŒºåˆ«ï¼Œæˆ‘ä»¬æŸ¥çœ‹setå®¹å™¨åº•å±‚å®ç°ï¼š 123456789101112131415161718template&lt;typename _Key, typename _Compare = std::less&lt;_Key&gt;,typename _Alloc = std::allocator&lt;_Key&gt; &gt;class set&#123; ... public: typedef _Key key_type; typedef _Key value_type; // å’Œkey_typeä¸€æ · ... private: typedef typename _Alloc::template rebind&lt;_Key&gt;::other _Key_alloc_type; // å’Œmapå‡ ä¹ä¸€è‡´ // å”¯ä¸€åŒºåˆ«åœ¨äºçº¢é»‘æ ‘ç±»æ¨¡æ¿å‚æ•°key_typeå’Œvalue_typeå…¶å®æ˜¯ä¸€æ ·çš„ // åˆå§‹åŒ–æ—¶å®ƒä»¬çš„å€¼ä¹Ÿä¸€æ · typedef _Rb_tree&lt;key_type, value_type, _Identity&lt;value_type&gt;, key_compare, _Key_alloc_type&gt; _Rep_type; _Rep_type _M_t; // Red-black tree representing set. å¯ä»¥çœ‹åˆ°ï¼Œåº•å±‚å®ç°ä¸Škeyã€valueçš„ç±»å‹ã€å€¼éƒ½ä¼šè¢«è®¾ç½®ä¸ºä¸€æ ·ã€‚set å®¹å™¨ç±»æ¨¡æ¿çš„å®šä¹‰ä¸­ï¼Œä¹Ÿä»…æä¾›ç¬¬ 1 ä¸ªå‚æ•°ï¼ˆ_Keyï¼‰ç”¨äºè®¾å®šå­˜å‚¨æ•°æ®çš„ç±»å‹ã€‚ set å®¹å™¨ä»¥ç±»æ¨¡æ¿å½¢å¼å®šä¹‰åœ¨ &lt;set&gt; å¤´æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1234template&lt;typename _Key, typename _Compare = std::less&lt;_Key&gt;, typename _Alloc = std::allocator&lt;_Key&gt; &gt;loc = std::allocator&lt;std::pair&lt;const _Key, _Tp&gt; &gt; &gt;class set åœ¨ set&lt;_Key,_Compare,_Alloc&gt; æ¨¡æ¿ä¸­ï¼š _Keyï¼ŒæŒ‡å®šé”®çš„ç±»å‹ï¼› _Compareï¼šæŒ‡å®šæ’åºé¡ºåºï¼Œé»˜è®¤é€‰ç”¨å‡åºstd::less&lt;_Key&gt;ï¼Œä¹Ÿå¯ä»¥é€‰ç”¨std::greater&lt;_Key&gt; æˆ–è€…è‡ªå®šä¹‰æ’åºè§„åˆ™ï¼› _Allocï¼Œé»˜è®¤é€‰ç”¨äºŒçº§å†…å­˜åˆ†é…å™¨ã€‚ ä¸€ä¸ªç®€å•ä½¿ç”¨å®ä¾‹ã€‚ 123456789101112131415161718192021222324252627282930#include&lt;set&gt;#include&lt;utility&gt;#include&lt;iostream&gt;#include&lt;string&gt; void printSet(const set&lt;int&gt;&amp; s)&#123; std::cout&lt;&lt;&quot;size = &quot; &lt;&lt; s.size() &lt;&lt;&quot; : &quot;; // æ‰“å°seté”®å€¼ for(auto iter = s.begin(); iter != s.end(); iter++) std::cout&lt;&lt;&quot;key=&quot;&lt;&lt;*iter&lt;&lt; &quot; &quot;; // iter-&gt;first setä¸å…è®¸ä½¿ç”¨ std::cout&lt;&lt;&quot;\\n&quot;; &#125;int main()&#123; // åˆå§‹åŒ– set&lt;int&gt; set1 &#123; 1,2,3,4 &#125;; // é”®å€¼ä¸èƒ½ç›¸åŒ // set1[1]; // errorï¼Œä¸èƒ½ä½¿ç”¨[key]æˆ–at(key) // æ’å…¥ set1.emplace(0); set1.emplace(4); printSet(set1); // åˆ é™¤ set1.erase(3); set1.erase(4); printSet(set1);&#125; è¾“å‡ºï¼š 123[root@roy-cpp test]# ./test.out size = 5 : key=0 key=1 key=2 key=3 key=4 size = 3 : key=0 key=1 key=2 å…³äºæˆå‘˜å‡½æ•° setã€multimapçš„æˆå‘˜å‡½æ•°ï¼Œé™¤äº†ä¸èƒ½ä½¿ç”¨at(key)ã€operator[key] ï¼ŒåŸºæœ¬å’Œmapä¸€è‡´ï¼ˆåº•å±‚å®ç°ä¸Šå°±éå¸¸ç›¸ä¼¼ï¼‰ï¼Œæ•…ä¸å•åˆ—äº†ã€‚ multiset multisetå’Œmapçš„ä¸»è¦åŒºåˆ«åœ¨äºï¼š multisetå¯ä»¥å­˜å‚¨ç›¸åŒçš„é”®å€¼ï¼› multiseté”®å€¼å¯¹ç›¸åŒï¼› é™¤äº†map/unordered_mapï¼Œmultisetå’Œsetã€multimapä¸€æ ·ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨at(key) æˆ– operator[key]ï¼Œä½†å¯ä»¥ä½¿ç”¨find(key) ã€‚ multiset ä¹Ÿå®šä¹‰åœ¨ &lt;set&gt; å¤´æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1234template &lt;typename _Key, typename _Compare = std::less&lt;_Key&gt;, typename _Alloc = std::allocator&lt;_Key&gt; &gt;class multiset åœ¨ multiset&lt;_Key,_Compare,_Alloc&gt; æ¨¡æ¿ä¸­ï¼š _Keyï¼ŒæŒ‡å®šé”®çš„ç±»å‹ï¼› _Compareï¼šæŒ‡å®šæ’åºé¡ºåºï¼Œé»˜è®¤é€‰ç”¨å‡åºstd::less&lt;_Key&gt;ï¼Œä¹Ÿå¯ä»¥é€‰ç”¨std::greater&lt;_Key&gt; æˆ–è€…è‡ªå®šä¹‰æ’åºè§„åˆ™ï¼› _Allocï¼Œé»˜è®¤é€‰ç”¨äºŒçº§å†…å­˜åˆ†é…å™¨ã€‚ ä¸€ä¸ªç®€å•ä½¿ç”¨å®ä¾‹ï¼ˆä½¿ç”¨èµ·æ¥å’Œsetå¾ˆç›¸ä¼¼ï¼‰ã€‚ 1234567891011121314151617181920212223242526272829#include&lt;set&gt;#include&lt;utility&gt;#include&lt;iostream&gt;#include&lt;string&gt; void printMSet(const multiset&lt;int&gt;&amp; ms)&#123; std::cout&lt;&lt;&quot;size = &quot; &lt;&lt; ms.size() &lt;&lt;&quot; : &quot;; for(auto iter = ms.begin(); iter != ms.end(); iter++) std::cout&lt;&lt;&quot;key=&quot;&lt;&lt;*iter&lt;&lt; &quot; &quot;; // iter-&gt;first ï¼Œsetã€multisetä¸å…è®¸ä½¿ç”¨ std::cout&lt;&lt;&quot;\\n&quot;; &#125;int main()&#123; // make_pair multiset&lt;int&gt; mset1 &#123; 1,1,2,3 &#125;; // å­˜åœ¨é”®å€¼ç›¸åŒ // mset1[1]; // errorï¼Œä¸èƒ½ä½¿ç”¨[key]æˆ–at(key) // æ’å…¥ mset1.emplace(0); mset1.emplace(4); printMSet(mset1); // åˆ é™¤ mset1.erase(3); mset1.erase(4); printMSet(mset1);&#125; è¾“å‡ºï¼ˆè‡ªåŠ¨æ’åºï¼‰ï¼š 123[root@roy-cpp test]# ./test.out size = 6 : key=0 key=1 key=1 key=2 key=3 key=4 size = 4 : key=0 key=1 key=1 key=2 å…³äºæˆå‘˜å‡½æ•° multimapã€setã€multisetçš„æˆå‘˜å‡½æ•°ï¼Œé™¤äº†ä¸èƒ½ä½¿ç”¨at(key)ã€operator[key] ï¼ŒåŸºæœ¬å’Œmapä¸€è‡´ï¼ˆåº•å±‚å®ç°ä¸Šå°±éå¸¸ç›¸ä¼¼ï¼‰ï¼Œæ•…ä¸å•åˆ—äº†ã€‚ 9.2.3 æ— åºå…³è”å¼å®¹å™¨ æœ¬èŠ‚ä¸»è¦ä»‹ç»ä»¥ä¸‹å®¹å™¨ï¼š å®¹å™¨ åº•å±‚æ•°æ®ç»“æ„ ç‰¹ç‚¹ è¿­ä»£å™¨ç±»å‹ unordered_map å“ˆå¸Œè¡¨ï¼Œä¸‹åŒ é”®å¿…é¡»å”¯ä¸€ï¼Œä¼šæ ¹æ®é”®å¤§å°é»˜è®¤å‡åºæ’åº å‰å‘è¿­ä»£å™¨ï¼Œä¸‹åŒ unordered_multimap åŸºæœ¬åŒå‰ï¼Œä½†unordered_multimapé”®å¯é‡å¤ unordered_set é”®å’Œå€¼å®Œå…¨ç›¸åŒï¼Œé”®ä¾æ—§å”¯ä¸€ï¼Œé»˜è®¤å‡åº unordered_multiset åŸºæœ¬åŒå‰ï¼Œä½†unordered_multiseté”®å¯é‡å¤ æ­£å¦‚åå­—â€œunorderedâ€æ‰€æš—ç¤ºçš„ï¼Œè¿™äº›å…³è”å¼å®¹å™¨æ˜¯æ— åºçš„ï¼Œå®ƒä»¬ä¸ä¼šåƒä¹‹å‰çš„map/set/multimap/multiset/ç­‰å…³è”å®¹å™¨ä¸€æ ·ï¼Œè‡ªåŠ¨æŒ‰é”®å€¼å¤§å°å¯¹å­˜å‚¨çš„é”®å€¼å¯¹è¿›è¡Œæ’åºã€‚ ä¸ºä»€ä¹ˆæ— åºå…³è”å®¹å™¨ä¸ä¼šè‡ªåŠ¨æ’åºäº†ï¼Ÿ è¿™æ˜¯å› ä¸ºâ€œunorderedâ€ç‰ˆæœ¬çš„å…³è”å¼å®¹å™¨åº•å±‚æ•°æ®ç»“æ„é‡‡ç”¨çš„æ˜¯å“ˆå¸Œè¡¨ è€Œä¸æ˜¯çº¢é»‘æ ‘ ï¼Œå“ˆå¸Œè¡¨ç»“æ„ä¸é€‚åˆæ’å…¥å…ƒç´ æ—¶è¿›è¡Œæ’åºã€‚ å“ˆå¸Œè¡¨ï¼ˆHash tableï¼‰æ˜¯æ ¹æ®å…³é”®ç å€¼(Key value)è€Œç›´æ¥è¿›è¡Œè®¿é—®çš„æ•°æ®ç»“æ„ã€‚ ä¾‹å¦‚ï¼Œ std::unordered_mapåœ¨å†…å­˜ä¸­çš„å“ˆå¸Œè¡¨å½¢å¼ç»“æ„ï¼š ç›´è§‚ä¸Šæ¥çœ‹ï¼š å“ˆå¸Œè¡¨æ˜¯ä¸€ä¸ªbucketsæ•°ç»„ï¼ˆC++ä¸­ä½¿ç”¨vectorå®ç°ï¼‰ï¼› æ¯ä¸ªbucketæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘å®ƒå¤–æŒ‚çš„é”®å€¼å¯¹é“¾è¡¨ï¼ˆæœ‰æ—¶å€™æˆ‘ä»¬ç”¨â€œbucketâ€æŒ‡ä»£å¤–æŒ‚çš„é“¾è¡¨ï¼‰ã€‚ åœ¨å“ˆå¸Œè¡¨æŸ¥æ‰¾æŒ‡å®škeyçš„valueå¤§è‡´è¿‡ç¨‹å¦‚ä¸‹ï¼š ä»¥ std::unordered_map ä¸­ [key] æˆ– at(key) æŸ¥æ‰¾è¿‡ç¨‹ä¸ºä¾‹ã€‚ ä½¿ç”¨hash(key)å‡½æ•°è¿›è¡Œå“ˆå¸Œæ˜ å°„ï¼Œå¾—åˆ°ä¸€ä¸ªkeyå¯¹åº”çš„å“ˆå¸Œå€¼ï¼› å°†å“ˆå¸Œå€¼å’Œæ¡¶æ•°é‡n åšå“ˆå¸Œå€¼ % nè¿ç®—ï¼Œå…ƒç´ ç»“æœå³bucketçš„ç¼–å·ï¼ˆä¸‹æ ‡ï¼‰ï¼Œç”±æ­¤å®šä½åˆ°å…·ä½“çš„bucketä¸Šï¼› éå†æŸ¥æ‰¾å®šä½çš„bucketå¤–æŒ‚çš„é”®å€¼å¯¹é“¾è¡¨ï¼Œå¦‚æœæ‰¾åˆ°keyè¿”å›å¯¹åº”valueï¼ˆfind(key)æ–¹æ³•è¿”å›å¯¹åº”è¿­ä»£å™¨ï¼‰ï¼Œå¦‚æœæ²¡æ‰¾åˆ°æŠ›å‡ºå¼‚å¸¸ï¼ˆfind(key)æ–¹æ³•è¿”å›è¿­ä»£å™¨unordered_map::end()ï¼‰ã€‚ ä¸ºä»€ä¹ˆè¦é‡æ–°è®¾è®¡å“ˆå¸Œè¡¨ä½œä¸ºåº•å±‚ç»“æ„ï¼Ÿ è¿™æ¶‰åŠåˆ°çº¢é»‘æ ‘å’Œå“ˆå¸Œè¡¨çš„æ•°æ®ç»“æ„ç‰¹æ€§ï¼š æŸ¥æ‰¾ã€ä¿®æ”¹æ•ˆç‡ä¸Šï¼šå“ˆå¸Œè¡¨æ›´å¿«ï¼ˆå“ˆå¸Œæ˜ å°„æŸ¥æ‰¾ï¼‰ï¼Œå¸¸æ•°çº§åˆ«O(1)ï¼Œä½†å“ˆå¸Œç¢°æ’ä¸¥é‡æœ€åO(n)ï¼›çº¢é»‘æ ‘æ›´æ…¢ï¼ˆäºŒå‰æ ‘äºŒåˆ†æŸ¥æ‰¾ï¼‰ï¼Œä½†ç¨³å®šO(logn)çº§åˆ«ï¼› æ’å…¥ã€åˆ é™¤æ•ˆç‡ä¸Šï¼šå“ˆå¸Œè¡¨æ›´å¿«ï¼Œå¸¸æ•°çº§åˆ«O(1)ï¼Œçº¢é»‘æ ‘æ›´æ…¢ï¼Œä½†ç¨³å®šO(logn)ã€‚ æ‰€ä»¥ï¼Œé€‰æ‹©å“ˆå¸Œè¡¨ä½œä¸ºåº•å±‚ç»“æ„çš„æ— åºå®¹å™¨ï¼Œå¢åˆ æŸ¥æ”¹æ•ˆç‡é€šå¸¸æ˜¯æ›´å¥½çš„ã€‚ä¸€èˆ¬å»ºè®®é€‰æ‹©æ— åºå…³è”å®¹å™¨ï¼Œé™¤éä½ çœŸçš„éœ€è¦keyæœ‰åºã€‚ unordered_map unordered_map å®¹å™¨å’Œ map å®¹å™¨ä¸€æ ·ï¼š ä»¥é”®å€¼å¯¹ï¼ˆpairç±»å‹ï¼‰çš„å½¢å¼å­˜å‚¨æ•°æ®ï¼› å­˜å‚¨çš„å„ä¸ªé”®å€¼å¯¹çš„é”®äº’ä¸ç›¸åŒä¸”ä¸å…è®¸è¢«ä¿®æ”¹ã€‚ ä½†ç”±äº unordered_map å®¹å™¨åº•å±‚é‡‡ç”¨çš„æ˜¯å“ˆå¸Œè¡¨å­˜å‚¨ç»“æ„ï¼Œè¯¥ç»“æ„æœ¬èº«ä¸å…·æœ‰å¯¹æ•°æ®çš„æ’åºåŠŸèƒ½ï¼Œæ‰€ä»¥æ­¤å®¹å™¨å†…éƒ¨ä¸ä¼šè‡ªè¡Œå¯¹å­˜å‚¨çš„é”®å€¼å¯¹è¿›è¡Œæ’åºã€‚ unordered_map å®¹å™¨ä»¥ç±»æ¨¡æ¿å½¢å¼å®šä¹‰åœ¨ &lt;unordered_map&gt; å¤´æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12345template&lt;class _Key, class _Tp, class _Hash = hash&lt;_Key&gt;, class _Pred = std::equal_to&lt;_Key&gt;, class _Alloc = std::allocator&lt;std::pair&lt;const _Key, _Tp&gt; &gt; &gt;class unordered_map : __check_copy_constructible&lt;_Alloc&gt; åœ¨ unordered_map&lt;_Key,_Tp,_Hash,_Pred,_Alloc&gt; æ¨¡æ¿ä¸­ï¼š _Keyï¼ŒæŒ‡å®šé”®çš„ç±»å‹ï¼› _Tpï¼ŒæŒ‡å®šå€¼çš„ç±»å‹ï¼› _Hashï¼šæŒ‡å®šè¦ä½¿ç”¨çš„å“ˆå¸Œå‡½æ•°ï¼Œé»˜è®¤é€‰ç”¨hash&lt;_Key&gt;ï¼Œä¸è¿‡é»˜è®¤å“ˆå¸Œå‡½æ•°åªé€‚ç”¨äºåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆåŒ…æ‹¬ string ç±»å‹ï¼‰ï¼Œè€Œä¸é€‚ç”¨äºè‡ªå®šä¹‰çš„ç»“æ„ä½“æˆ–è€…ç±»ï¼› _Predï¼šunordered_mapä¸å…è®¸é”®å€¼ç›¸ç­‰ï¼Œè€Œåˆ¤æ–­æ˜¯å¦ç›¸ç­‰çš„è§„åˆ™ï¼Œå°±ç”±æ­¤å‚æ•°æŒ‡å®šï¼› _Allocï¼Œé»˜è®¤é€‰ç”¨äºŒçº§å†…å­˜åˆ†é…å™¨ã€‚ ä½¿ç”¨ç®€å•ä¸¾ä¾‹ã€‚ å’Œmapçš„æä¾›çš„ä¸Šå±‚å‡½æ•°æ¥å£åŸºæœ¬ä¸€è‡´ï¼Œå¦‚emplace() æ’å…¥å…ƒç´ ç­‰ã€‚ 12345678910111213141516171819202122232425262728#include&lt;unordered_map&gt;#include&lt;utility&gt;#include&lt;iostream&gt;#include&lt;string&gt; void printUMap(const unordered_map&lt;int,string&gt;&amp; m)&#123; std::cout&lt;&lt;&quot;size = &quot; &lt;&lt; m.size() &lt;&lt;&quot; : &quot;; // æ‰“å°é”®å€¼å¯¹ for(auto iter = m.begin(); iter != m.end(); iter++) std::cout&lt;&lt;&quot;&lt;key=&quot;&lt;&lt; iter-&gt;first &lt;&lt;&quot;, value=&quot; &lt;&lt; iter-&gt;second &lt;&lt; &quot;&gt; &quot;; std::cout&lt;&lt;&quot;\\n&quot;; &#125;int main()&#123; unordered_map&lt;int,std::string&gt; umap1 &#123; &#123;1,&quot;ä¸€&quot;&#125;,&#123;2,&quot;äºŒ&quot;&#125;&#125;; umap1[1]; // &quot;ä¸€&quot; umap1[2]; // &quot;äºŒ&quot; // æ’å…¥ umap1.emplace(std::make_pair(0,&quot;é›¶&quot;)); umap1.emplace(std::make_pair(4,&quot;å››&quot;)); printUMap(umap1); // åˆ é™¤ umap1.erase(3); umap1.erase(4); printUMap(umap1);&#125; è¾“å‡ºï¼ˆæœªæ’åºï¼‰ï¼š 123[root@roy-cpp test]# ./test.out size = 4 : &lt;key=4, value=å››&gt; &lt;key=0, value=é›¶&gt; &lt;key=2, value=äºŒ&gt; &lt;key=1, value=ä¸€&gt; size = 3 : &lt;key=0, value=é›¶&gt; &lt;key=2, value=äºŒ&gt; &lt;key=1, value=ä¸€&gt; æˆå‘˜å‡½æ•° unordered_map æ—¢å¯ä»¥çœ‹åšæ˜¯å…³è”å¼å®¹å™¨ï¼Œæ›´å±äºè‡ªæˆä¸€è„‰çš„æ— åºå®¹å™¨ã€‚æ‰€ä»¥å…¶æˆå‘˜å‡½æ•°å¯åˆ†ä¸ºï¼š è¿­ä»£å™¨ç›¸å…³ åŸºæœ¬æ–¹æ³• æ— åºå®¹å™¨ç‹¬æœ‰æ–¹æ³• æˆ‘ä»¬å…ˆä¸€ç¹ä¸ºå¿«ã€‚ è¿­ä»£å™¨ç›¸å…³ æ— åºå®¹å™¨åªæœ‰å‰å‘è¿­ä»£å™¨ï¼Œå°¾éƒ¨æ“ä½œç›¸å…³è¿­ä»£å™¨å’Œå‡½æ•°éƒ½æ²¡æœ‰ã€‚ æˆå‘˜å‡½æ•° åŠŸèƒ½ begin() è¿”å›æŒ‡å‘å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„æ­£å‘è¿­ä»£å™¨ end() è¿”å›æŒ‡å‘å®¹å™¨æœ€åä¸€ä¸ªå…ƒç´ ä¹‹åä¸€ä¸ªä½ç½®çš„æ­£å‘è¿­ä»£å™¨ cbegin() å’Œ begin() åŠŸèƒ½ç›¸åŒï¼Œåªä¸è¿‡å…¶è¿”å›çš„è¿­ä»£å™¨ç±»å‹ä¸ºå¸¸é‡æ­£å‘è¿­ä»£å™¨ cend() å’Œ end() åŠŸèƒ½ç›¸åŒï¼Œåªä¸è¿‡å…¶è¿”å›çš„è¿­ä»£å™¨ç±»å‹ä¸ºå¸¸é‡æ­£å‘è¿­ä»£å™¨ æ³¨æ„ï¼Œå¦‚æœæ˜¯ const ç±»å‹å®¹å™¨ï¼Œè¿”å›çš„ä¸€å®šæ˜¯å¸¸é‡æ­£å‘è¿­ä»£å™¨ï¼Œå¸¸é‡è¿­ä»£å™¨ä¸èƒ½ä¿®æ”¹æŒ‡å‘çš„å…ƒç´ ï¼› begin() å’Œ end() ä¸ºC++11æ–°å¢ï¼Œæ“ä½œå¯¹è±¡è¿˜å¯ä»¥æ˜¯æ•°ç»„ã€‚ åŸºæœ¬æ–¹æ³•ï¼ˆåŸºæœ¬åŒmapï¼‰ æ ‡ç²—éƒ¨åˆ†æ˜¯å¸¸ç”¨çš„å‡½æ•°ã€‚ æ— åºå…³è”å®¹å™¨è™½ç„¶åº•å±‚ä¸æ˜¯éšæœºè¿­ä»£å™¨ï¼Œä¸€äº›éšæœºè¿­ä»£å™¨æ‰æ”¯æŒçš„æ–¹æ³•ï¼Œæ¯”å¦‚at(n)ã€[n]æ˜¯ä¸æ”¯æŒçš„ï¼Œä½†æ”¯æŒæŒ‰é”®å€¼æŸ¥æ‰¾at(key)ã€[key]æ–¹æ³•ï¼› å…³è”å®¹å™¨ä¸èƒ½åœ¨æŒ‡å®šä½ç½®ä¸Šåˆ é™¤ã€æ’å…¥å…ƒç´ ï¼Œæ‰€ä»¥STLæ²¡æœ‰æä¾›push_back()ã€push_front()ä¹‹ç±»å¤´å°¾æ“ä½œæ–¹æ³•ï¼Œè€Œæ˜¯ä½¿ç”¨emplace() æˆ–insert()ã€‚ æˆå‘˜å‡½æ•° åŠŸèƒ½ empty() è‹¥å®¹å™¨ä¸ºç©ºï¼Œåˆ™è¿”å› trueï¼›å¦åˆ™ false size() è¿”å›å½“å‰ unordered_mapå®¹å™¨ä¸­å­˜æœ‰é”®å€¼å¯¹çš„ä¸ªæ•° max_size() è¿”å› unordered_mapå®¹å™¨æ‰€èƒ½å®¹çº³é”®å€¼å¯¹çš„æœ€å¤§ä¸ªæ•°ï¼Œä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œå…¶è¿”å›å€¼äº¦ä¸ç›¸åŒ operator[key] mapå®¹å™¨é‡è½½äº† [] è¿ç®—ç¬¦ï¼Œè·å–æŒ‡å®šé”®çš„å€¼ï¼ŒæŸ¥æ‰¾å¤±è´¥æ·»åŠ æ–°çš„é”®å€¼å¯¹ at(key) æ‰¾åˆ° map å®¹å™¨ä¸­ key é”®å¯¹åº”çš„å€¼ï¼ŒæŸ¥æ‰¾å¤±è´¥å¼•å‘ out_of_range å¼‚å¸¸ insert() å‘ map å®¹å™¨ä¸­æ’å…¥é”®å€¼å¯¹ï¼Œå¦‚æœkeyé‡å¤ä¼šè¦†ç›– erase() åˆ é™¤ map å®¹å™¨æŒ‡å®šä½ç½®ã€æŒ‡å®šé”®ï¼ˆkeyï¼‰å€¼æˆ–è€…æŒ‡å®šåŒºåŸŸå†…çš„é”®å€¼å¯¹ swap() äº¤æ¢ 2 ä¸ª map å®¹å™¨ä¸­å­˜å‚¨çš„é”®å€¼å¯¹ï¼Œè¿™æ„å‘³ç€ï¼Œæ“ä½œçš„ 2 ä¸ªé”®å€¼å¯¹çš„ç±»å‹å¿…é¡»ç›¸åŒã€‚ clear() æ¸…ç©º map å®¹å™¨ä¸­æ‰€æœ‰çš„é”®å€¼å¯¹ï¼Œå³ä½¿ map å®¹å™¨çš„ size() ä¸º 0 emplace() åŸºæœ¬åŒinsertï¼Œä½†ç›¸æ¯”insertæ•ˆç‡æ›´é«˜ count(key) åœ¨å½“å‰ map å®¹å™¨ä¸­ï¼ŒæŸ¥æ‰¾é”®ä¸º key çš„é”®å€¼å¯¹çš„ä¸ªæ•°å¹¶è¿”å›ã€‚æ³¨æ„ï¼Œç”±äº map å®¹å™¨ä¸­å„é”®å€¼å¯¹çš„é”®çš„å€¼æ˜¯å”¯ä¸€çš„ï¼Œå› æ­¤è¯¥å‡½æ•°çš„è¿”å›å€¼æœ€å¤§ä¸º 1ã€‚ æ— åºå®¹å™¨ç‹¬æœ‰æ–¹æ³• ç›¸æ¯”åºåˆ—å®¹å™¨ã€æœ‰åºå®¹å™¨ï¼Œæ— åºå®¹å™¨ç‹¬æœ‰çš„ä¸€äº›å“ˆå¸Œè¡¨ç›¸å…³æ–¹æ³•ï¼š æˆå‘˜å‡½æ•° åŠŸèƒ½ bucket_count() è¿”å›å½“å‰æ¡¶æ•°é‡ï¼ˆä¸€ä¸ªçº¿æ€§é“¾è¡¨ä»£è¡¨ä¸€ä¸ªæ¡¶ï¼‰ max_bucket_count() è¿”å›æœ€å¤šå¯ä»¥ä½¿ç”¨å¤šå°‘æ¡¶ bucket_size(n) è¿”å›ç¬¬ n ä¸ªæ¡¶ä¸­å­˜å‚¨é”®å€¼å¯¹çš„æ•°é‡ bucket(key) è¿”å›ä»¥ keyä¸ºé”®çš„é”®å€¼å¯¹æ‰€åœ¨æ¡¶çš„ç¼–å· load_factor() è¿”å› unordered_map å®¹å™¨ä¸­å½“å‰çš„è´Ÿè½½å› å­ï¼Œå³è´Ÿè½½å› å­ = å®¹å™¨å­˜å‚¨çš„æ€»é”®å€¼å¯¹ / æ¡¶æ•° ï¼Œ load_factor() = size() / bucket_count() max_load_factor() è¿”å›æˆ–è€…è®¾ç½®å½“å‰ unordered_map å®¹å™¨çš„è´Ÿè½½å› å­ rehash(n) å°†å½“å‰å®¹å™¨åº•å±‚ä½¿ç”¨æ¡¶çš„æ•°é‡è®¾ç½®ä¸º n reserve() å°†å­˜å‚¨æ¡¶çš„æ•°é‡ï¼ˆä¹Ÿå°±æ˜¯ bucket_count() æ–¹æ³•çš„è¿”å›å€¼ï¼‰è®¾ç½®ä¸ºè‡³å°‘å®¹çº³countä¸ªé”®å€¼å¯¹ï¼ˆä¸è¶…è¿‡æœ€å¤§è´Ÿè½½å› å­ï¼‰æ‰€éœ€çš„æ•°é‡ï¼Œå¹¶é‡æ–°æ•´ç†å®¹å™¨ hash_function() è¿”å›å½“å‰å®¹å™¨ä½¿ç”¨çš„å“ˆå¸Œå‡½æ•°å¯¹è±¡ å¯¹äºæ— åºå®¹å™¨çš„ç‹¬æœ‰æ–¹æ³•è¿›è¡Œæµ‹è¯•ã€‚ 12345678910111213141516171819202122232425262728293031323334353637#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;unordered_map&gt;using namespace std;void printUmapInfo(const unordered_map&lt;string, string&gt;&amp; umap)&#123; cout &lt;&lt; &quot;umap åˆå§‹æ¡¶æ•°: &quot; &lt;&lt; umap.bucket_count() &lt;&lt; endl; cout &lt;&lt; &quot;umap æœ€å¤§å¯ä½¿ç”¨æ¡¶æ•°: &quot; &lt;&lt; umap.max_bucket_count() &lt;&lt; endl; cout &lt;&lt; &quot;umap å½“å‰å­˜åœ¨çš„é”®å€¼å¯¹: &quot; &lt;&lt; umap.size() &lt;&lt; endl; cout &lt;&lt; &quot;umap åˆå§‹è´Ÿè½½å› å­: &quot; &lt;&lt; umap.load_factor() &lt;&lt; endl; cout &lt;&lt; &quot;umap æœ€å¤§è´Ÿè½½å› å­: &quot; &lt;&lt; umap.max_load_factor() &lt;&lt; endl; cout &lt;&lt; &quot;â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”&quot; &lt;&lt; endl;&#125;int main()&#123; // åˆ›å»ºç©º umap å®¹å™¨ unordered_map&lt;string, string&gt; umap; // è®¾ç½® umap ä½¿ç”¨æœ€é€‚åˆå­˜å‚¨ 9 ä¸ªé”®å€¼å¯¹çš„æ¡¶æ•° umap.reserve(9); printUmapInfo(umap); // å‘ umap å®¹å™¨æ·»åŠ  3 ä¸ªé”®å€¼å¯¹ umap[&quot;name&quot;] = &quot;royhuang&quot;; umap[&quot;age&quot;] = &quot;25&quot;; umap[&quot;university&quot;] = &quot;chongqingU&quot;; printUmapInfo(umap); // è°ƒç”¨ bucket() è·å–æŒ‡å®šé”®å€¼å¯¹ä½äºæ¡¶çš„ç¼–å· cout &lt;&lt; &quot;â€œageâ€å­˜å‚¨åœ¨ç¬¬ï¼š&quot; &lt;&lt; umap.bucket(&quot;age&quot;) &lt;&lt;&quot;ä¸ªæ¡¶&quot;&lt;&lt; endl; // è‡ªè¡Œè®¡ç®—æŸé”®å€¼å¯¹ä½äºå“ªä¸ªæ¡¶ auto fn = umap.hash_function(); cout &lt;&lt; &quot;hash(age)%nï¼Œè®¡ç®—â€œageâ€å­˜å‚¨åœ¨ç¬¬ï¼š&quot; &lt;&lt; fn(&quot;age&quot;) % (umap.bucket_count()) &lt;&lt;&quot;ä¸ªæ¡¶&quot;&lt;&lt; endl; return 0;&#125; è¾“å‡ºï¼š 123456789101112131415[root@roy-cpp test]# ./test.out umap åˆå§‹æ¡¶æ•°: 11umap æœ€å¤§å¯ä½¿ç”¨æ¡¶æ•°: 576460752303423487umap å½“å‰å­˜åœ¨çš„é”®å€¼å¯¹: 0umap åˆå§‹è´Ÿè½½å› å­: 0umap æœ€å¤§è´Ÿè½½å› å­: 1â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”umap åˆå§‹æ¡¶æ•°: 11umap æœ€å¤§å¯ä½¿ç”¨æ¡¶æ•°: 576460752303423487umap å½“å‰å­˜åœ¨çš„é”®å€¼å¯¹: 3umap åˆå§‹è´Ÿè½½å› å­: 0.272727umap æœ€å¤§è´Ÿè½½å› å­: 1â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€œageâ€å­˜å‚¨åœ¨ç¬¬ï¼š5ä¸ªæ¡¶hash(age)%nï¼Œè®¡ç®—â€œageâ€å­˜å‚¨åœ¨ç¬¬ï¼š5ä¸ªæ¡¶ åº•å±‚å®ç° unordered_mapåº•å±‚å®ç°ä¸»è¦å°±æ˜¯å“ˆå¸Œè¡¨ï¼š å…·ä½“é€»è¾‘æš‚ç•¥ã€‚ unordered_multimap å›å¿†mapå’Œmultimapçš„åŒºåˆ«ï¼š mapå’Œmultimapä¸»è¦çš„ä¸åŒä½“ç°åœ¨ï¼š multimap å¯ä»¥åŒæ—¶å­˜å‚¨å¤šä¸ªé”®ç›¸åŒçš„é”®å€¼å¯¹ï¼› multimap é™¤äº†find(key)ï¼Œä¸èƒ½ä½¿ç”¨at(key) æˆ– operator[key] ç­‰ç›´æ¥æŒ‰keyè·å–valueçš„æ–¹å¼ï¼ˆå¾ˆå¥½ç†è§£ï¼Œmultimapä¼šå­˜åœ¨å¤šä¸ªé‡å¤çš„é”®ï¼‰ã€‚ multimap ä¹Ÿå®šä¹‰åœ¨ &lt;map&gt; å¤´æ–‡ä»¶ï¼Œâ€¦ unordered_mapå’Œunordered_multimapçš„åŒºåˆ«åŒä¸Šï¼š unordered_multimapå¯ä»¥åŒæ—¶å­˜å‚¨å¤šä¸ªé”®ç›¸åŒçš„é”®å€¼å¯¹ï¼› unordered_multimapé™¤äº†find(key)ï¼Œä¸èƒ½ä½¿ç”¨at(key) æˆ– operator[key] ç­‰ç›´æ¥æŒ‰keyè·å–valueçš„æ–¹å¼ ã€‚ unordered_multimapä¹Ÿå®šä¹‰åœ¨ &lt;unordered_map&gt; å¤´æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨èµ·æ¥åŸºæœ¬å’Œunordered_mapæ²¡å·®ï¼Œä¸å†é‡å¤ä»‹ç»äº†ã€‚ unordered_set å›å¿†setå’Œmapçš„åŒºåˆ«ï¼š ä¸»è¦åŒºåˆ«åœ¨äºï¼š setå®¹å™¨å­˜å‚¨çš„é”®å€¼å¯¹ï¼ˆkey-valueï¼‰çš„keyã€valueå®Œå…¨ç›¸åŒã€‚åœ¨åº•å±‚å®ç°ä¸Šï¼Œmapåº•å±‚åŒºåˆ«ä¹Ÿä¸»è¦æ˜¯ä¿®æ”¹çº¢é»‘æ ‘å­˜å‚¨çš„keyã€valueä¿å­˜ä¸€è‡´ ; setå®¹å™¨é™¤äº†find(key)ï¼Œä¸èƒ½ä½¿ç”¨at(key) æˆ– operator[key]è·å–value ï¼Œè™½ç„¶åœ¨åº•å±‚å®ç°ä¸Šsetçš„keyç­‰äºvalueï¼Œä½†æ˜¯ä¸å…è®¸è·å–valueã€‚ unordered_setå’Œunordered_mapçš„åŒºåˆ«åŒä¸Šã€‚ unordered_multiset å›å¿†multisetå’Œmapçš„åŒºåˆ«ï¼š multisetå’Œmapçš„ä¸»è¦åŒºåˆ«åœ¨äºï¼š multisetå¯ä»¥å­˜å‚¨ç›¸åŒçš„é”®å€¼ï¼› multiseté”®å€¼å¯¹ç›¸åŒï¼› é™¤äº†map/unordered_mapï¼Œmultisetå’Œsetã€multimapä¸€æ ·ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨at(key) æˆ– operator[key]ï¼Œä½†å¯ä»¥ä½¿ç”¨find(key) ã€‚ unordered_mapå’Œunordered_multisetçš„åŒºåˆ«åŒä¸Šã€‚ 9.2.4 å®¹å™¨é€‚é…å™¨ æœ¬èŠ‚ä¸»è¦ä»‹ç»ä»¥ä¸‹å®¹å™¨ï¼š å®¹å™¨ åº•å±‚æ•°æ®ç»“æ„ ç‰¹ç‚¹ è¿­ä»£å™¨ç±»å‹ stack ï¼ˆé»˜è®¤ï¼‰deque å…ƒç´ â€œå…ˆè¿›åå‡ºâ€ æ—  queue ï¼ˆé»˜è®¤ï¼‰deque å…ƒç´ â€œå…ˆè¿›å…ˆå‡ºâ€ æ—  priority_queue ï¼ˆé»˜è®¤ï¼‰vector å…ƒç´ â€œå…ˆè¿›ä¼˜å…ˆçº§é«˜å…ˆå‡ºâ€ æ—  æˆ–è®¸ä½ å’Œç¬¬ä¸€æ¬¡æ¥è§¦â€œå®¹å™¨é€‚é…å™¨â€è¿™ä¸ªåè¯çš„æˆ‘ï¼Œéƒ½ä¼šæ„Ÿåˆ°çº³é—·ï¼šè¿™è¯å¬èµ·æ¥æœ‰äº›å¤æ€ªï¼Œå®ƒæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå®ƒä¹Ÿæ˜¯å®¹å™¨å—ï¼Ÿ â€œå®¹å™¨é€‚é…å™¨â€æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ åœ¨æ ˆï¼ˆstackï¼‰è¿™ç§æ•°æ®ç»“æ„ä¸­ï¼Œå¿…é¡»è¦æ»¡è¶³â€œå…ˆè¿›åå‡ºâ€è¿™ç§ç‰¹æ€§ã€‚è€Œæˆ‘ä»¬ä¹‹å‰çš„å®¹å™¨ï¼Œå¦‚dequeã€listéƒ½æ— æ³•æ»¡è¶³è¿™ç§ç‰¹æ€§ã€‚ ä½†æˆ‘ä»¬å¯ä»¥ï¼Œæ¯”å¦‚å¯¹åŸºç¡€å®¹å™¨dequeï¼Œè¿›è¡Œä¸€å±‚å°è£…ï¼šç¦æ­¢å¤´éƒ¨è¿›å‡ºåªå…è®¸å°¾éƒ¨è¿›å‡ºï¼Œè¿™æ ·å°±é€‚é…äº†æ ˆâ€œå…ˆè¿›åå‡ºâ€çš„ç‰¹æ€§ã€‚è¿™ç§é€šè¿‡ï¼Œå°è£…æŸä¸ªåºåˆ—å¼å®¹å™¨ï¼Œå¹¶é‡æ–°ç»„åˆè¯¥å®¹å™¨ä¸­åŒ…å«çš„æˆå‘˜å‡½æ•°æ¥å®ç°â€œéœ€è¦çš„ç‰¹æ€§â€çš„å®¹å™¨ï¼ˆå¿…è¦æ—¶ä¹Ÿå¯ä»¥è‡ªåˆ›æ–°å‡½æ•°ï¼‰ï¼Œå°±ç§°ä¸ºå®¹å™¨é€‚é…å™¨ã€‚ æ‰€ä»¥ï¼Œå®¹å™¨é€‚é…å™¨è‡ªç„¶ä¹Ÿæ˜¯å®¹å™¨ã€‚ç‰¹åˆ«çš„ï¼ŒSTLä¸­çš„å®¹å™¨é€‚é…å™¨ï¼ŒåŸºç¡€å®¹å™¨å¹¶ä¸æ˜¯å›ºå®šçš„ï¼Œè¿˜å…è®¸æˆ‘ä»¬é€‰æ‹©æ»¡è¶³æ¡ä»¶çš„åŸºç¡€å®¹å™¨ã€‚é‡‡ç”¨çš„åº•å±‚åŸºç¡€å®¹å™¨ä¸åŒï¼Œå…¶æ‰§è¡Œæ•ˆç‡ä¹Ÿä¸å°½ç›¸åŒï¼Œä¸€èˆ¬æ¥è¯´ä½¿ç”¨é»˜è®¤çš„å°±è¡Œã€‚ stack stack æ ˆé€‚é…å™¨æ˜¯ä¸€ç§å•ç«¯å¼€å£çš„å®¹å™¨ï¼Œè¯¥å®¹å™¨æ¨¡æ‹Ÿçš„å°±æ˜¯æ ˆå­˜å‚¨ç»“æ„ï¼Œåªèƒ½åœ¨æ ˆé¡¶æ’å…¥ã€åˆ é™¤ã€‚ ä¸‹å›¾å±•ç¤ºäº†stackçš„ç®€å•ä½¿ç”¨ã€‚ stack å®¹å™¨ä»¥ç±»æ¨¡æ¿çš„å½¢å¼å®šä¹‰åœ¨ &lt;stack&gt; å¤´æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12template&lt;typename _Tp, typename _Sequence = deque&lt;_Tp&gt; &gt;class stack åœ¨ stack&lt;_Tp,_Sequence&gt; æ¨¡æ¿ä¸­ï¼š _Tpï¼Œç”¨äºæŒ‡æ˜å®¹å™¨ä¸­å…ƒç´ æ•°æ®ç±»å‹ï¼› _Sequenceï¼ŒæŒ‡å®šåº•å±‚ä½¿ç”¨çš„åŸºç¡€å®¹å™¨ã€‚ ç®€å•ä½¿ç”¨å®ä¾‹ã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨é»˜è®¤çš„dequeä½œä¸ºåŸºç¡€å®¹å™¨ï¼Œè€Œæ˜¯ä½¿ç”¨listã€‚ 1234567891011121314151617181920212223#include &lt;iostream&gt;#include &lt;stack&gt;#include &lt;list&gt;using namespace std;int main()&#123; // æ„å»º stack å®¹å™¨é€‚é…å™¨ list&lt;int&gt; values&#123; 1, 2, 3 &#125;; // åŸºç¡€å®¹å™¨list stack&lt;int, list&lt;int&gt;&gt; my_stack(values); // æŸ¥çœ‹ my_stack å­˜å‚¨å…ƒç´ çš„ä¸ªæ•° cout &lt;&lt; &quot;size of my_stack: &quot; &lt;&lt; my_stack.size() &lt;&lt; endl; my_stack.push(4); cout &lt;&lt; &quot;size of my_stack: &quot; &lt;&lt; my_stack.size() &lt;&lt; endl; // å°† my_stack ä¸­å­˜å‚¨çš„å…ƒç´ ä¾æ¬¡å¼¹æ ˆï¼Œç›´åˆ°å…¶ä¸ºç©º while (!my_stack.empty()) &#123; cout &lt;&lt; my_stack.top() &lt;&lt; endl; my_stack.pop(); // å°†æ ˆé¡¶å…ƒç´ å¼¹æ ˆ &#125; return 0;&#125; åº•å±‚å®ç° stackåº•å±‚å°±æ˜¯å°è£…äº†åŸºç¡€å®¹å™¨ã€‚ 12345678template&lt;typename _Tp, typename _Sequence = deque&lt;_Tp&gt; &gt;class stack&#123; ... protected: // See queue::c for notes on this name. _Sequence c; // åº•å±‚åŸºç¡€å®¹å™¨ï¼Œæ¨¡æ¿å‚æ•°æŒ‡å®š ... æŸ¥çœ‹ç»å…¸çš„stack::push()ã€stack::pop() å®ç°ï¼š 123456789101112131415push(const value_type&amp; __x) // å¼•ç”¨&#123; c.push_back(std::move(__x)); // å°±æ˜¯åŸºç¡€å®¹å™¨çš„push_backæ–¹æ³•&#125;push(value_type&amp;&amp; __x) // å³å€¼å¼•ç”¨&#123; c.push_back(std::move(__x)); &#125;pop()&#123; __glibcxx_requires_nonempty(); c.pop_back(); // åŸºç¡€å®¹å™¨çš„pop_backæ–¹æ³•&#125; ç¡®å®ä¸»è¦è¿˜æ˜¯å€ŸåŠ©åŸºç¡€å®¹å™¨çš„æˆå‘˜å’Œæ–¹æ³•å®ç°ã€‚ æˆå‘˜å‡½æ•° ç›¸æ¯”å…¶å®ƒåºåˆ—æˆ–å…³è”å¼å®¹å™¨ï¼Œstack æ˜¯ä¸€ç±»å­˜å‚¨æœºåˆ¶ç®€å•ã€æä¾›æˆå‘˜å‡½æ•°è¾ƒå°‘çš„å®¹å™¨ã€‚ ç‰¹åˆ«çš„ï¼Œå®¹å™¨é€‚é…å™¨éƒ½æ²¡æœ‰è¿­ä»£å™¨ï¼Œæ‰€ä»¥éå†å…ƒç´ ï¼šåªèƒ½ä¸æ–­ç§»é™¤å…ƒç´ ï¼Œå»è®¿é—®ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚ æˆå‘˜å‡½æ•° åŠŸèƒ½ empty() å½“ stack æ ˆä¸­æ²¡æœ‰å…ƒç´ æ—¶ï¼Œè¯¥æˆå‘˜å‡½æ•°è¿”å› trueï¼›åä¹‹ï¼Œè¿”å› false size() è¿”å› stack æ ˆä¸­å­˜å‚¨å…ƒç´ çš„ä¸ªæ•° top() è¿”å›ä¸€ä¸ªæ ˆé¡¶å…ƒç´ çš„å¼•ç”¨ï¼Œç±»å‹ä¸º T&amp;ï¼Œå¦‚æœæ ˆä¸ºç©ºï¼Œç¨‹åºä¼šæŠ¥é”™ã€‚ push(const T&amp; val) å…ˆå¤åˆ¶ valï¼Œå†å°† val å‰¯æœ¬å‹å…¥æ ˆé¡¶ï¼Œè¿™æ˜¯é€šè¿‡è°ƒç”¨åº•å±‚å®¹å™¨çš„ push_back() å‡½æ•°å®Œæˆçš„ push(T&amp;&amp; obj) ä»¥ç§»åŠ¨å…ƒç´ çš„æ–¹å¼å°†å…¶å‹å…¥æ ˆé¡¶ï¼Œè¿™æ˜¯é€šè¿‡è°ƒç”¨åº•å±‚å®¹å™¨çš„æœ‰å³å€¼å¼•ç”¨å‚æ•°çš„ push_back() å‡½æ•°å®Œæˆçš„ã€‚ pop() å¼¹å‡ºæ ˆé¡¶å…ƒç´  emplace(argâ€¦) argâ€¦ å¯ä»¥æ˜¯ä¸€ä¸ªå‚æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªå‚æ•°ï¼Œä½†å®ƒä»¬éƒ½åªç”¨äºæ„é€ ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶åœ¨æ ˆé¡¶ç›´æ¥ç”Ÿæˆè¯¥å¯¹è±¡ï¼Œä½œä¸ºæ–°çš„æ ˆé¡¶å…ƒç´  swap(stack &amp; other_stack) å°†ä¸¤ä¸ª stack é€‚é…å™¨ä¸­çš„å…ƒç´ è¿›è¡Œäº’æ¢ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿›è¡Œäº’æ¢çš„ 2 ä¸ª stack é€‚é…å™¨ä¸­å­˜å‚¨çš„å…ƒç´ ç±»å‹ä»¥åŠåº•å±‚é‡‡ç”¨çš„åŸºç¡€å®¹å™¨ç±»å‹ï¼Œéƒ½å¿…é¡»ç›¸åŒ queue å’Œ stack æ ˆå®¹å™¨é€‚é…å™¨ä¸åŒï¼Œqueue å®¹å™¨é€‚é…å™¨æœ‰ 2 ä¸ªå¼€å£ï¼Œä¸€ä¸ªå¼€å£ï¼ˆå°¾éƒ¨ï¼‰ä¸“é—¨ç”¨æ¥åŠ å…¥å…ƒç´ ï¼Œå¦ä¸€ä¸ªå¼€å¤´ï¼ˆå¤´éƒ¨ï¼‰ä¸“é—¨ç”¨æ¥ç§»é™¤å…ƒç´ ã€‚ è¿™ç§å­˜å‚¨ç»“æ„æœ€å¤§çš„ç‰¹ç‚¹æ˜¯ï¼Œæœ€å…ˆè¿›å…¥ queue çš„å…ƒç´ ï¼Œä¹Ÿå¯ä»¥æœ€å…ˆä» queue ä¸­å‡ºæ¥ï¼Œå³â€œå…ˆè¿›å…ˆå‡ºâ€ã€‚ ä¸‹å›¾å±•ç¤ºäº†queueè¿™ç§ç»“æ„ã€‚ stack å®¹å™¨ä»¥ç±»æ¨¡æ¿çš„å½¢å¼å®šä¹‰åœ¨ &lt;stack&gt; å¤´æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12template&lt;typename _Tp, typename _Sequence = deque&lt;_Tp&gt; &gt;class stack åœ¨ stack&lt;_Tp,_Sequence&gt; æ¨¡æ¿ä¸­ï¼š _Tpï¼Œç”¨äºæŒ‡æ˜å®¹å™¨ä¸­å…ƒç´ æ•°æ®ç±»å‹ï¼› _Sequenceï¼ŒæŒ‡å®šåº•å±‚ä½¿ç”¨çš„åŸºç¡€å®¹å™¨ã€‚ ç®€å•ä½¿ç”¨å®ä¾‹ã€‚ 123456789101112131415161718192021222324#include &lt;iostream&gt;#include &lt;queue&gt;#include &lt;list&gt;using namespace std;int main()&#123; // æ„å»º stack å®¹å™¨é€‚é…å™¨ list&lt;int&gt; values&#123; 1, 2, 3 &#125;; // åŸºç¡€å®¹å™¨list queue&lt;int, list&lt;int&gt;&gt; my_queue(values); // æŸ¥çœ‹ my_stack å­˜å‚¨å…ƒç´ çš„ä¸ªæ•° cout &lt;&lt; &quot;size of my_queue: &quot; &lt;&lt; my_queue.size() &lt;&lt; endl; my_queue.push(4); cout &lt;&lt; &quot;size of my_queue: &quot; &lt;&lt; my_queue.size() &lt;&lt; endl; // å°† my_stack ä¸­å­˜å‚¨çš„å…ƒç´ ä¾æ¬¡å¼¹æ ˆï¼Œç›´åˆ°å…¶ä¸ºç©º while (!my_queue.empty()) &#123; cout &lt;&lt; my_queue.front() &lt;&lt; endl; //å°†æ ˆé¡¶å…ƒç´ å¼¹æ ˆ my_queue.pop(); &#125; return 0;&#125; è¾“å‡ºï¼š 1234567[root@roy-cpp test]# ./test.out size of my_queue: 3size of my_queue: 41234 åº•å±‚å®ç° åŒstackï¼Œqueueåº•å±‚å°±æ˜¯å°è£…äº†åŸºç¡€å®¹å™¨ã€‚ 12345678template&lt;typename _Tp, typename _Sequence = deque&lt;_Tp&gt; &gt;class queue&#123; ... protected: // See queue::c for notes on this name. _Sequence c; // åº•å±‚åŸºç¡€å®¹å™¨ï¼Œæ¨¡æ¿å‚æ•°æŒ‡å®š ... queue::pushã€queue::popæ–¹æ³•å®ç°ï¼š 123456789101112131415push(const value_type&amp; __x) // å¼•ç”¨&#123; c.push_back(std::move(__x)); // å°±æ˜¯åŸºç¡€å®¹å™¨çš„push_backæ–¹æ³•&#125;push(value_type&amp;&amp; __x) // å³å€¼å¼•ç”¨&#123; c.push_back(std::move(__x)); &#125;pop()&#123; __glibcxx_requires_nonempty(); c.pop_front(); // åŸºç¡€å®¹å™¨çš„pop_frontæ–¹æ³•ï¼Œstackè¿™é‡Œæ˜¯pop_backï¼Œæ‰€ä»¥æ˜¯å°¾éƒ¨å¼¹å‡º&#125; æˆå‘˜å‡½æ•° queue å®¹å™¨é€‚é…å™¨æ‹¥æœ‰stack æˆå‘˜å‡½æ•°åŸºæœ¬æ‰€æœ‰å‡½æ•°ï¼ˆé™¤äº†top()ã€emplace()ï¼‰ã€‚ ç‰¹åˆ«çš„ï¼Œå®¹å™¨é€‚é…å™¨éƒ½æ²¡æœ‰è¿­ä»£å™¨ï¼Œæ‰€ä»¥éå†å…ƒç´ ï¼šåªèƒ½ä¸æ–­ç§»é™¤å…ƒç´ ï¼Œå»è®¿é—®ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚ æˆå‘˜å‡½æ•° åŠŸèƒ½ empty() å½“ queueä¸­æ²¡æœ‰å…ƒç´ æ—¶ï¼Œè¯¥æˆå‘˜å‡½æ•°è¿”å› trueï¼›åä¹‹ï¼Œè¿”å› false size() è¿”å› queueä¸­å­˜å‚¨å…ƒç´ çš„ä¸ªæ•° top() queueæ²¡æœ‰ push(const T&amp; val) å…ˆå¤åˆ¶ valï¼Œå†å°† val å‰¯æœ¬å‹å…¥é˜Ÿå°¾ï¼Œè¿™æ˜¯é€šè¿‡è°ƒç”¨åº•å±‚å®¹å™¨çš„ push_back() å‡½æ•°å®Œæˆçš„ push(T&amp;&amp; obj) ä»¥ç§»åŠ¨å…ƒç´ çš„æ–¹å¼å°†å…¶å‹å…¥é˜Ÿå°¾ï¼Œè¿™æ˜¯é€šè¿‡è°ƒç”¨åº•å±‚å®¹å™¨çš„æœ‰å³å€¼å¼•ç”¨å‚æ•°çš„ push_back() å‡½æ•°å®Œæˆçš„ã€‚ pop() å¼¹å‡ºé˜Ÿå¤´ï¼ˆç¬¬ä¸€ä¸ªï¼‰å…ƒç´  emplace(argâ€¦) queueæ²¡æœ‰ swap(queue &amp; other_stack) å°†ä¸¤ä¸ª queueé€‚é…å™¨ä¸­çš„å…ƒç´ è¿›è¡Œäº’æ¢ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿›è¡Œäº’æ¢çš„ 2 ä¸ª queueé€‚é…å™¨ä¸­å­˜å‚¨çš„å…ƒç´ ç±»å‹ä»¥åŠåº•å±‚é‡‡ç”¨çš„åŸºç¡€å®¹å™¨ç±»å‹ï¼Œéƒ½å¿…é¡»ç›¸åŒ queue ç‹¬æœ‰çš„å‡½æ•°ï¼š æˆå‘˜å‡½æ•° åŠŸèƒ½ front() è¿”å› queue ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„å¼•ç”¨ back() è¿”å› queue ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„å¼•ç”¨ priority_queue priority_queue å®¹å™¨é€‚é…å™¨ä¸­å…ƒç´ çš„è¿›å‡ºï¼Œéµå¾ªâ€œå…ˆè¿›ä¼˜å…ˆçº§é«˜çš„å…ˆå‡ºâ€åŸåˆ™ã€‚ é‚£priority_queue ä¸­å…ƒç´ ä¼˜å…ˆçº§æ˜¯å¦‚ä½•è¯„å®šï¼Ÿ æ¯ä¸ª priority_queue å®¹å™¨é€‚é…å™¨åœ¨åˆ›å»ºæ—¶ï¼Œéƒ½åˆ¶å®šäº†ä¸€ç§â€œæ’åºè§„åˆ™â€ã€‚æ ¹æ®æ­¤è§„åˆ™ï¼Œè¯¥å®¹å™¨é€‚é…å™¨ä¸­å­˜å‚¨çš„å…ƒç´ å°±æœ‰äº†ä¼˜å…ˆçº§é«˜ä½ä¹‹åˆ†ã€‚ æ¯”å¦‚è¿™ç§â€œæ’åºè§„åˆ™â€ï¼Œå¯ä»¥æ˜¯ï¼šå…ƒç´ å€¼ä»å¤§åˆ°å°æˆ–ä»å°åˆ°å¤§ã€‚ priority_queueä¸­å…ƒç´ è¿›å‡ºå’Œqueueæœ‰äº›ä¸åŒï¼š è¿›ï¼šä¸ç›´æ¥æ’åˆ°é˜Ÿå°¾ï¼Œæ‰¾åˆ°ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ï¼Œå¹¶å°†å…¶ç§»åŠ¨åˆ°é˜Ÿåˆ—çš„é˜Ÿå¤´ï¼› å‡ºï¼šç›´æ¥ç§»å‡ºé˜Ÿå¤´ï¼Œç„¶åæ‰¾åˆ°å½“å‰ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ï¼Œå¹¶å°†å…¶ç§»åŠ¨åˆ°é˜Ÿå¤´ã€‚ ä¼˜å…ˆé˜Ÿåˆ—å¯ä»¥ä½¿ç”¨æ•°ç»„ã€äºŒå‰æœç´¢æ ‘ã€é“¾è¡¨å’Œå †æ•°æ®ç»“æ„æ¥å®ç°ã€‚ä½†æ˜¯ï¼Œæœ€å¥½çš„é€‰æ‹©æ˜¯å †æ•°æ®ç»“æ„ï¼Œå› ä¸ºå®ƒæœ‰åŠ©äºç›¸å¯¹æ›´å¿«ã€æ›´æœ‰æ•ˆåœ°å®ç°ä¼˜å…ˆçº§é˜Ÿåˆ—ã€‚ priority_queueå®¹å™¨ä»¥ç±»æ¨¡æ¿çš„å½¢å¼å®šä¹‰åœ¨ &lt;queue&gt; å¤´æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1234 template&lt;typename _Tp, typename _Sequence = vector&lt;_Tp&gt;, typename _Compare = less&lt;typename_Sequence::value_type&gt; &gt;class priority_queue åœ¨ priority_queue&lt;_Tp,_Sequence,_Compare&gt; æ¨¡æ¿ä¸­ï¼š _Tpï¼Œç”¨äºæŒ‡æ˜å®¹å™¨ä¸­å…ƒç´ æ•°æ®ç±»å‹ï¼› _Sequenceï¼ŒæŒ‡å®šåº•å±‚ä½¿ç”¨çš„åŸºç¡€å®¹å™¨ï¼› _Compare ï¼ŒæŒ‡å®šæ’åºè§„åˆ™ã€‚ ç®€å•ä½¿ç”¨ä¾‹å­ã€‚ æ³¨æ„priority_queueçš„åˆå§‹åŒ–æœ‰äº›ä¸åŒã€‚ 1234567891011121314151617181920212223242526#include &lt;iostream&gt;#include &lt;queue&gt;#include &lt;deque&gt;#include &lt;list&gt;using namespace std;int main()&#123; // æ„å»º stack å®¹å™¨é€‚é…å™¨ deque&lt;int&gt; values&#123; 5, 1, 3&#125;; // æ­¤æ—¶æ˜¯æ— åºçš„list // priority_queue&lt;int, deque&lt;int&gt;&gt; my_priority_queue(values); // error,ä¸èƒ½ä½¿ç”¨è¿™ç§æ–¹å¼åˆå§‹åŒ– priority_queue&lt;int, deque&lt;int&gt;&gt; my_priority_queue&#123;values.begin(),values.end()&#125; ; // åˆå§‹åŒ–æŒ‡å®šä¸¤ä¸ªè¿­ä»£å™¨ // æŸ¥çœ‹ my_priority_queue å­˜å‚¨å…ƒç´ çš„ä¸ªæ•° cout &lt;&lt; &quot;size of my_priority_queue: &quot; &lt;&lt; my_priority_queue.size() &lt;&lt; endl; my_priority_queue.push(4); cout &lt;&lt; &quot;size of my_priority_queue: &quot; &lt;&lt; my_priority_queue.size() &lt;&lt; endl; // å°† my_stack ä¸­å­˜å‚¨çš„å…ƒç´ ä¾æ¬¡å¼¹æ ˆï¼Œç›´åˆ°å…¶ä¸ºç©º while (!my_priority_queue.empty()) &#123; cout &lt;&lt; my_priority_queue.top() &lt;&lt; endl; // è¾“å‡ºæœ‰åº // é˜Ÿå¤´å…ƒç´ ï¼ˆæœ€é«˜ä¼˜å…ˆçº§å‡ºæ ˆï¼‰ my_priority_queue.pop(); &#125; return 0;&#125; è¾“å‡ºï¼ˆæœ‰åºï¼‰ï¼š 1234567[root@roy-cpp test]# ./test.out size of my_priority_queue: 3size of my_priority_queue: 45431 æˆå‘˜å‡½æ•° priority_queue æ‹¥æœ‰çš„æˆå‘˜å‡½æ•°å’Œtackæ›´åƒï¼ˆåŸºæœ¬ä¸€è‡´ï¼‰ï¼š æœ‰top() æ–¹æ³•ï¼Œæ²¡æœ‰queueç‹¬æœ‰çš„front() æˆ–back() æ–¹æ³•ï¼› ç‰¹åˆ«çš„ï¼Œå®¹å™¨é€‚é…å™¨éƒ½æ²¡æœ‰è¿­ä»£å™¨ï¼Œæ‰€ä»¥éå†å…ƒç´ ï¼šåªèƒ½ä¸æ–­ç§»é™¤å…ƒç´ ï¼Œå»è®¿é—®ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚ æˆå‘˜å‡½æ•° åŠŸèƒ½ empty() å½“ stack æ ˆä¸­æ²¡æœ‰å…ƒç´ æ—¶ï¼Œè¯¥æˆå‘˜å‡½æ•°è¿”å› trueï¼›åä¹‹ï¼Œè¿”å› false size() è¿”å› stack æ ˆä¸­å­˜å‚¨å…ƒç´ çš„ä¸ªæ•° top() è¿”å›ä¸€ä¸ªæ ˆé¡¶å…ƒç´ çš„å¼•ç”¨ï¼Œç±»å‹ä¸º T&amp;ï¼Œå¦‚æœæ ˆä¸ºç©ºï¼Œç¨‹åºä¼šæŠ¥é”™ã€‚ push(const T&amp; val) å…ˆå¤åˆ¶ valï¼Œå†å°† val å‰¯æœ¬å‹å…¥æ ˆé¡¶ï¼Œè¿™æ˜¯é€šè¿‡è°ƒç”¨åº•å±‚å®¹å™¨çš„ push_back() å‡½æ•°å®Œæˆçš„ push(T&amp;&amp; obj) ä»¥ç§»åŠ¨å…ƒç´ çš„æ–¹å¼å°†å…¶å‹å…¥æ ˆé¡¶ï¼Œè¿™æ˜¯é€šè¿‡è°ƒç”¨åº•å±‚å®¹å™¨çš„æœ‰å³å€¼å¼•ç”¨å‚æ•°çš„ push_back() å‡½æ•°å®Œæˆçš„ã€‚ pop() å¼¹å‡ºæ ˆé¡¶å…ƒç´  emplace(argâ€¦) argâ€¦ å¯ä»¥æ˜¯ä¸€ä¸ªå‚æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªå‚æ•°ï¼Œä½†å®ƒä»¬éƒ½åªç”¨äºæ„é€ ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶åœ¨æ ˆé¡¶ç›´æ¥ç”Ÿæˆè¯¥å¯¹è±¡ï¼Œä½œä¸ºæ–°çš„æ ˆé¡¶å…ƒç´  swap(stack &amp; other_stack) å°†ä¸¤ä¸ª stack é€‚é…å™¨ä¸­çš„å…ƒç´ è¿›è¡Œäº’æ¢ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿›è¡Œäº’æ¢çš„ 2 ä¸ª stack é€‚é…å™¨ä¸­å­˜å‚¨çš„å…ƒç´ ç±»å‹ä»¥åŠåº•å±‚é‡‡ç”¨çš„åŸºç¡€å®¹å™¨ç±»å‹ï¼Œéƒ½å¿…é¡»ç›¸åŒ 9.2.5 å®¹å™¨æœ€ä½³å®è·µ åœ¨æœ¬èŠ‚æˆ‘ä»¬ä»åŸºæœ¬ä½¿ç”¨ã€åº•å±‚å®ç°ã€å¸¸ç”¨å‡½æ•°ç­‰æ–¹é¢ä»‹ç»äº†ä¼—å¤šå®¹å™¨ï¼Œå®ƒä»¬å¯åˆ†ä¸ºï¼š åºåˆ—å¼å®¹å™¨ï¼šarrayã€vectorã€dequeã€list å’Œ forward_listï¼› å…³è”å¼å®¹å™¨ï¼šmapã€multimapã€set å’Œ multisetï¼› æ— åºå…³è”å¼å®¹å™¨ï¼šunordered_mapã€unordered_multimapã€unordered_set å’Œ unordered_multisetï¼› å®¹å™¨é€‚é…å™¨ï¼šstackã€queue å’Œ priority_queueã€‚ è¿™ä¹ˆå¤šå®¹å™¨ï¼Œå®é™…ç¼–ç è¯¥é€‰æ‹©å“ªä¸€ä¸ªå‘¢ï¼Ÿ å›å¿†å„ä¸ªæ•°æ®ç»“æ„çš„ç‰¹ç‚¹ã€‚ ç‰¹ç‚¹ å¯¹åº”å®¹å™¨ å¯¹åº”è¿­ä»£å™¨ æ•°ç»„ æŸ¥æ‰¾æ•ˆç‡é«˜ä¸”å¯éšæœºæŸ¥æ‰¾ã€ï¼ˆé™¤å°¾éƒ¨ï¼‰æ’å…¥åˆ é™¤æ•ˆç‡ä½ array/vector/deque éšæœºè¿­ä»£å™¨ é“¾è¡¨ ç©ºé—´åˆ©ç”¨ç‡é«˜ï¼Œæ’å…¥åˆ é™¤æ•ˆç‡é«˜ï¼ŒæŸ¥æ‰¾è¾ƒæ•°ç»„ä½ list/forwar_list åŒå‘æˆ–å‰å‘è¿­ä»£å™¨ çº¢é»‘æ ‘ åœ¨STLä¸­å­˜å‚¨é”®å€¼å¯¹ï¼Œå¢åˆ æŸ¥æ”¹æ•ˆç‡å‡é«˜ï¼Œè¿˜ä¼šæ’åº map/set/â€¦ åŒå‘è¿­ä»£å™¨ å“ˆå¸Œè¡¨ åœ¨STLä¸­å­˜å‚¨é”®å€¼å¯¹ï¼Œä¸ä¼šæ’åºï¼Œä½†æ¯”çº¢é»‘æ ‘æ•ˆç‡æ›´é«˜ unordered_map/ unordered_set/â€¦ å‰å‘è¿­ä»£å™¨ é¦–å…ˆï¼Œä¸€èˆ¬æ¥è¯´é™¤ééœ€è¦é”®å€¼æœ‰åºï¼Œåœ¨æ— åºå…³è”å¼å®¹å™¨/å…³è”å¼å®¹å™¨ä¸­ï¼Œä¼˜å…ˆè€ƒè™‘æ— åºå…³è”å¼å®¹å™¨ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å†ä»æ—¶é—´æ•ˆç‡è§’åº¦ å‡ºå‘è€ƒè™‘å„ç§å®¹å™¨çš„é€‰æ‹©ï¼š å¦‚æœæŸ¥æ‰¾å…ƒç´ æ•ˆç‡è¦æ±‚é«˜ ï¼šé€‰æ‹©unordered_map/unordered_setæˆ–array/vector/deque å¦‚æœæ•°æ®å¯æŒ‰é”®å€¼å¯¹å­˜å‚¨ï¼šé€‰æ‹©unordered_map/unordered_setï¼ŒO(1)å¸¸æ•°çº§åˆ«æŸ¥æ‰¾é”®å€¼ï¼› å¦‚æœåªèƒ½é¡ºåºå­˜å‚¨ ï¼šé€‰æ‹©array/vector/deque å¦‚æœå­˜å‚¨çš„æ˜¯é™æ€æ•°æ®ï¼šé€‰arrayï¼› å¦‚æœå­˜å‚¨çš„æ˜¯åŠ¨æ€æ•°æ®ï¼šåªåœ¨å°¾éƒ¨å¢ã€åˆ é€‰vectorï¼›å¤´ã€å°¾å‡éœ€è¦å¢ã€åˆ é€‰dequeã€‚ å¦‚æœæ’å…¥ã€åˆ é™¤æ•ˆç‡è¦æ±‚é«˜ï¼š å¦‚æœæ’å…¥ã€åˆ é™¤ä½ç½®æœ‰è¦æ±‚ ï¼šlist/forwar_list å¦‚æœåªåœ¨å¤´éƒ¨æ’å…¥ã€åˆ é™¤æ•°æ®ï¼šé€‰forwar_listï¼› å¦‚æœå¤´ã€å°¾å‡éœ€æ’å…¥ã€åˆ é™¤æ•°æ®ï¼šé€‰listã€‚ å¦‚æœæ’å…¥ã€åˆ é™¤ä½ç½®æ²¡è¦æ±‚ï¼šé€‰æ‹©unordered_map/unordered_setï¼ŒO(lgn)çº§åˆ«å¤æ‚åº¦ã€‚ è‡³äºstackã€queue å’Œ priority_queueåˆ™ä¸€èˆ¬æ˜¯åœ¨ä½ éœ€è¦ï¼šâ€œå…ˆè¿›åå‡ºâ€ã€â€œå…ˆè¿›å…ˆå‡ºâ€æˆ–â€œæŒ‰ä¼˜å…ˆçº§åˆ«å‡ºé˜Ÿâ€ï¼Œè¿™ç§ç‰¹æ®Šæƒ…å†µæ‰è€ƒè™‘ã€‚ 9.3 ç®—æ³• STLæä¾›äº†è®¸å¤šç®—æ³•ï¼Œä¾›æˆ‘ä»¬æ¥å¯¹å®¹å™¨ï¼ˆæˆ–æ•°ç»„ï¼‰ä¸­æ•°æ®è¿›è¡Œæ“ä½œï¼Œé€šå¸¸å¯åˆ†ä¸¤ç±»ï¼š ä¼šæ”¹å˜å®ƒä»¬æ‰€åº”ç”¨çš„åºåˆ—çš„ç®—æ³• ä¸æ”¹å˜å®ƒä»¬æ‰€åº”ç”¨çš„åºåˆ—çš„ç®—æ³• å¯é€šè¿‡å¼•å…¥äº&lt;algorithm&gt;å¤´æ–‡ä»¶æ¥ä½¿ç”¨ï¼š 1#include &lt;algorithm&gt; ä¸è¿‡åœ¨æœ¬æ–‡ä¸­ï¼Œä¸»è¦è¿˜æ˜¯æŒ‰ç®—æ³•åŠŸèƒ½æ¥è¿›è¡Œä»‹ç»ã€‚è€Œä¸”æœ¬æ–‡ä¸ä¼šå¯¹å„ç§ç®—æ³•è¿›è¡Œå…·ä½“ä»‹ç»ï¼Œé€šå¸¸åªæ˜¯å¯¹å¸¸ç”¨ç®—æ³•è¿›è¡Œç®€å•æ¦‚å†µã€‚ ä¸ºä»€ä¹ˆä¸è¯¦ç»†ä»‹ç»å„ç±»ç®—æ³•ï¼Ÿ ä¸»è¦åŸå› å¦‚ä¸‹ï¼š æœ¬æ–‡å·²ç»è¶³å¤Ÿé•¿ï¼ˆ~3Wå­—ï¼‰ï¼Œæ¯ä¸ªç®—æ³•è¯¦ç»†ä»‹ç»çš„è¯ï¼Œç¯‡å¹…é•¿åº¦éš¾ä»¥ä¼°è®¡æŠŠæ§ï¼› ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬åªéœ€å¯¹å¤§è‡´å‡½æ•°åŠŸèƒ½æœ‰æ‰€äº†è§£å°±è¡Œï¼Œå®é™…ç¼–ç å¯æŸ¥çœ‹å…·ä½“çš„APIæ¥å£ï¼Œå†æ·±å…¥ç†è§£å³å¯ã€‚ å¦å¤–ï¼Œä½œè€…åœ¨å®é™…å·¥ä½œä¸­å¦‚æœå¯¹ä¸€äº›ç®—æ³•æœ‰â€œè¸©å‘å’Œç†è§£â€ï¼Œè¿˜ä¼šè¡¥å……åˆ°æœ¬æ–‡ä¸­ã€‚ 9.3.1 sort C++ STL æ ‡å‡†åº“æä¾›å¾ˆå¤šå®ç”¨çš„æ’åºå‡½æ•°ï¼Œé€šè¿‡è°ƒç”¨å®ƒä»¬ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆè½»æ¾åœ°å®ç°å¯¹æ™®é€šæ•°ç»„æˆ–è€…å®¹å™¨ä¸­æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ è¿›è¡Œæ’åºã€‚ å‡½æ•°å ç”¨æ³• sort (first, last) å¯¹å®¹å™¨æˆ–æ™®é€šæ•°ç»„ä¸­ [first, last) èŒƒå›´å†…çš„å…ƒç´ è¿›è¡Œæ’åºï¼Œé»˜è®¤è¿›è¡Œå‡åºæ’åº stable_sort (first, last) å’Œ sort() å‡½æ•°åŠŸèƒ½ç›¸ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºï¼Œå¯¹äº [first, last) èŒƒå›´å†…å€¼ç›¸åŒçš„å…ƒç´ ï¼Œè¯¥å‡½æ•°ä¸ä¼šæ”¹å˜å®ƒä»¬çš„ç›¸å¯¹ä½ç½® partial_sort (first, middle, last) ä» [first,last) èŒƒå›´å†…ï¼Œç­›é€‰å‡º muddle-first ä¸ªæœ€å°çš„å…ƒç´ å¹¶æ’åºå­˜æ”¾åœ¨ [firstï¼Œmiddle) åŒºé—´ä¸­ partial_sort_copy (first, last, result_first, result_last) ä» [first, last) èŒƒå›´å†…ç­›é€‰å‡º result_last-result_first ä¸ªå…ƒç´ æ’åºå¹¶å­˜å‚¨åˆ° [result_first, result_last) æŒ‡å®šçš„èŒƒå›´ä¸­ is_sorted (first, last) æ£€æµ‹ [first, last) èŒƒå›´å†…æ˜¯å¦å·²ç»æ’å¥½åºï¼Œé»˜è®¤æ£€æµ‹æ˜¯å¦æŒ‰å‡åºæ’åº is_sorted_until (first, last) å’Œ is_sorted() å‡½æ•°åŠŸèƒ½ç±»ä¼¼ï¼Œå”¯ä¸€çš„åŒºåˆ«åœ¨äºï¼Œå¦‚æœ [first, last) èŒƒå›´çš„å…ƒç´ æ²¡æœ‰æ’å¥½åºï¼Œåˆ™è¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªæŒ‡å‘é¦–ä¸ªä¸éµå¾ªæ’åºè§„åˆ™çš„å…ƒç´ çš„è¿­ä»£å™¨ 9.3.2 merge æœ‰äº›åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°† 2 ä¸ªæœ‰åºåºåˆ—åˆå¹¶ä¸º 1 ä¸ªæœ‰åºåºåˆ—ï¼Œè¿™æ—¶å°±å¯ä»¥å€ŸåŠ© merge() å®ç°ã€‚ å‡½æ•°å ç”¨æ³• merge (first1, last1, first2, last2, result) first1ã€last1ã€first2 ä»¥åŠ last2 éƒ½ä¸ºè¾“å…¥è¿­ä»£å™¨ï¼Œ[first1, last1) å’Œ [first2, last2) å„ç”¨æ¥æŒ‡å®šä¸€ä¸ªæœ‰åºåºåˆ—ï¼›result ä¸ºè¾“å‡ºè¿­ä»£å™¨ï¼ŒæŒ‡å®šå­˜å‚¨ä½ç½® merge (first1, last1, first2, last2, result, comp) åŒä¸Šï¼Œä¸è¿‡å¤šäº†comp ç”¨äºè‡ªå®šä¹‰æ’åºè§„åˆ™ ä¸¾ä¾‹ï¼š 123456789101112131415#include &lt;iostream&gt; // std::cout#include &lt;algorithm&gt; // std::merge#include &lt;vector&gt; // std::vectorusing namespace std;int main()&#123; // first å’Œ second æ•°ç»„ä¸­å„å­˜æœ‰ 1 ä¸ªæœ‰åºåºåˆ— int first[] = &#123; 5,10,15,20,25 &#125;; int second[] = &#123; 7,17,27,37,47,57 &#125;; // ç”¨äºå­˜å‚¨æ–°çš„æœ‰åºåºåˆ— vector&lt;int&gt; myvector(11); // å°† [first,first+5) å’Œ [second,second+6) åˆå¹¶ä¸º 1 ä¸ªæœ‰åºåºåˆ—ï¼Œå¹¶å­˜å‚¨åˆ° myvector å®¹å™¨ä¸­ merge(first, first + 5, second, second + 6, myvector.begin()); return 0;&#125; 9.3.3 find find() å‡½æ•°æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ¨¡æ¿å‡½æ•°ï¼Œç”¨äºåœ¨æŒ‡å®šèŒƒå›´å†…æŸ¥æ‰¾å’Œç›®æ ‡å…ƒç´ å€¼ç›¸ç­‰çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ å‡½æ•°å ç”¨æ³• find(first, last, const T&amp; val) è¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªè¾“å…¥è¿­ä»£å™¨ï¼Œfirst å’Œ last ä¸ºè¾“å…¥è¿­ä»£å™¨ï¼Œ[first, last) ç”¨äºæŒ‡å®šè¯¥å‡½æ•°çš„æŸ¥æ‰¾èŒƒå›´ï¼›val ä¸ºè¦æŸ¥æ‰¾çš„ç›®æ ‡å…ƒç´ ã€‚ å…¶å®ƒçš„â€œfindâ€å‡½æ•°ï¼š find_if() æˆ– find_not_if()ï¼Œ å’Œfindå”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œå‰è€…éœ€è¦æ˜ç¡®æŒ‡å®šè¦æŸ¥æ‰¾çš„å…ƒç´ çš„å€¼ï¼Œè€Œåè€…åˆ™å…è®¸è‡ªå®šä¹‰æŸ¥æ‰¾è§„åˆ™ï¼› find_end() æˆ– search()ï¼Œç”¨äºåœ¨åºåˆ— A ä¸­æŸ¥æ‰¾åºåˆ— Bï¼Œ æœ€åä¸€æ¬¡æˆ–ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼› find_first_of()ï¼šåœ¨ A åºåˆ—ä¸­æŸ¥æ‰¾å’Œ B åºåˆ—ä¸­ï¼Œå’ŒBä¸­ä»»æ„å…ƒç´ ç›¸åŒ¹é…çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ ä¸¾ä¾‹ï¼š 12345678910111213141516171819202122#include &lt;iostream&gt; // std::cout#include &lt;algorithm&gt; // std::find#include &lt;vector&gt; // std::vectorusing namespace std;int main() &#123; // find() å‡½æ•°ä½œç”¨äºæ™®é€šæ•°ç»„ char stl[] =&quot;royhuang&quot;; // è°ƒç”¨ find() æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå­—ç¬¦ &#x27;r&#x27; char * p = find(stl, stl + strlen(stl), &#x27;r&#x27;); // åˆ¤æ–­æ˜¯å¦æŸ¥æ‰¾æˆåŠŸ if (p != stl + strlen(stl)) cout &lt;&lt; p &lt;&lt; endl; // find() å‡½æ•°ä½œç”¨äºå®¹å™¨ std::vector&lt;int&gt; myvector&#123; 10,20,30,40,50 &#125;; std::vector&lt;int&gt;::iterator it; it = find(myvector.begin(), myvector.end(), 30); if (it != myvector.end()) cout &lt;&lt; &quot;æŸ¥æ‰¾æˆåŠŸï¼š&quot; &lt;&lt; *it; return 0;&#125; 9.3.4 reverse reverseå‡½æ•°å¯ä»¥åè½¬ä¸€ä¸ªå®¹å™¨ä¸­çš„å…ƒç´ ã€‚ å‡½æ•°å ç”¨æ³• reverse(_first, last) reverseå‡½æ•°åè½¬çš„èŒƒå›´æ˜¯[first,last)ï¼Œä¸åŒ…æ‹¬lastæŒ‡å‘çš„å…ƒç´  ç®€å•å®ä¾‹ã€‚ 12345678910#include &lt;iostream&gt; #include &lt;algorithm&gt; #include &lt;vector&gt; int main () &#123; std::vector&lt;int&gt; myvector &#123;1,2,3,4,5&#125;; std::reverse(myvector.begin(),myvector.end()); // 5 4 3 2 1 return 0;&#125; 9.3.5 copy_n copy_n() ç®—æ³•ï¼Œå¯ä»¥ä»æºå®¹å™¨å¤åˆ¶æŒ‡å®šä¸ªæ•°çš„å…ƒç´ åˆ°ç›®æ ‡å®¹å™¨ä¸­ã€‚ å‡½æ•°å ç”¨æ³• copy_n(source_first, size, target_start) source_first æ˜¯æŒ‡å‘æºå®¹å™¨çš„èµ·å§‹ä½ç½®çš„è¿­ä»£å™¨ï¼Œsizeæ˜¯è¦å¤åˆ¶çš„å…ƒç´ æ€»æ•°ï¼Œ target_startæ˜¯ç›®æ ‡å®¹å™¨çš„å¼€å§‹è¿­ä»£å™¨ ç®€å•å®ä¾‹ã€‚ 123456789101112131415#include &lt;iostream&gt;#include &lt;algorithm&gt;#include &lt;vector&gt;using namespace std; int main()&#123; int arr[] = &#123; 10, 20, 30, 40, 50 &#125;; vector&lt;int&gt; v1(5); // å¤åˆ¶arrä¸­5ä¸ªå…ƒç´ åˆ°v1ä¸­ copy_n(arr, 5, v1.begin()); return 0;&#125; 9.3.6 fillå’Œfill_n fill() å’Œ fill_n() ç®—æ³•æä¾›äº†ä¸€ç§ä¸ºå…ƒç´ åºåˆ—å¡«å…¥æŒ‡å®šå€¼çš„ç®€å•æ–¹å¼ï¼Œfill() ä¼šå¡«å……æ•´ä¸ªåºåˆ—ï¼› fill_n() åˆ™ä»¥ç»™å®šçš„è¿­ä»£å™¨ä¸ºèµ·å§‹ä½ç½®ï¼Œä¸ºæŒ‡å®šä¸ªæ•°çš„å…ƒç´ è®¾ç½®å€¼ã€‚ å‡½æ•°å ç”¨æ³• fill(first, last, value) ç»™å®¹å™¨åœ¨ä½ç½®[first,last)ï¼Œå¡«å……æŒ‡å®šå€¼value fill_n(first, 10, value) ä»æŒ‡å®šä½ç½®firstå¼€å§‹ï¼Œå¡«å……nä¸ªvalue 9.4 æ€»ç»“ æœ¬æ–‡æ˜¯ã€ŠC++ä»é›¶å¼€å§‹ä¹‹C++ç¯‡ã€‹æœ€åä¸€ç¯‡åšå®¢ï¼Œå› æ­¤é™¤äº†STLæ€»ç»“éƒ¨åˆ†ï¼Œè¿˜ç‰¹æ„è¡¥å……äº†ã€ŠC++ç¯‡ã€‹çš„æ€»ç»“ã€‚ 9.4.1 STLæ€»ç»“ åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œä½œè€…ä¸»è¦ä»ï¼šSTLè¿­ä»£å™¨ã€STLå®¹å™¨ã€STLç®—æ³•å¯¹STLè¿›è¡Œäº†å…¨é¢ä»‹ç»ï¼Œå…¶ä¸­STLå®¹å™¨æ˜¯é‡ç‚¹é˜è¿°å†…å®¹ã€‚ è¿­ä»£å™¨ï¼šæœ¬è´¨æ˜¯æŒ‡é’ˆçš„ä¸€å±‚å°è£…ï¼Œå…·ä½“å®ç°ä¸ºæ¨¡æ¿ç±»ï¼Œæ¯ä¸ªå®¹å™¨éƒ½æœ‰è‡ªå·±çš„è¿­ä»£å™¨ç±»ã€‚è¿­ä»£å™¨ä¸»è¦åŠŸèƒ½æ˜¯ï¼Œæä¾›äº†ç»Ÿä¸€è®¿é—®å„ç§å®¹å™¨çš„æ–¹å¼ï¼ŒåŒæ—¶ä¹Ÿä½¿å¾—ç®—æ³•å’Œå®¹å™¨å¾—äºè§£è€¦ï¼Œå¿…è¦æ—¶å¯ä»¥ä½œä¸ºâ€œç²˜åˆå‰‚â€å°†äºŒè€…è”ç³»èµ·æ¥ã€‚ å®¹å™¨ï¼šå®¹å™¨ç”¨æ¥ç»„ç»‡å­˜å‚¨æ•°æ®ï¼Œå…·ä½“å®ç°ä¹Ÿæ˜¯æ¨¡æ¿ç±»ï¼Œæœ¬è´¨æ˜¯å¯¹æ•°ç»„ã€é“¾è¡¨ã€çº¢é»‘æ ‘ã€å“ˆå¸Œè¡¨ç­‰åŸºæœ¬æ•°æ®ç»“æ„çš„å°è£…ã€‚æœ€åä½œè€…è¿˜å¯¹å®è·µä¸­å„ç§å®¹å™¨çš„é€‰æ‹©ï¼Œè¿›è¡Œäº†ç®€å•æ€»ç»“ã€‚ ç®—æ³•ï¼šSTLä¸­æä¾›äº†å¤§é‡çš„ç®—æ³•ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œå…·ä½“å®ç°æ˜¯æ¨¡æ¿å‡½æ•°ã€‚ç†è®ºä¸Šå¦‚æœèƒ½ä½¿ç”¨STLä¸­ç®—æ³•å°±å°½é‡ä½¿ç”¨ï¼Œæœ¬æ–‡ä¸»è¦å¯¹ï¼šsortã€mergeã€findã€reverseã€copy_nã€fillç­‰å¸¸ç”¨ç®—æ³•è¿›è¡Œäº†ç®€ç•¥ä»‹ç»ã€‚ ä¸è¿‡åœ¨æœ¬æ–‡æˆå‹ä¸­ï¼Œä¹Ÿå‘ç°äº†ä¸€äº›ä¸è¶³ï¼š åšæ–‡è¿‡é•¿~3Wå­—ï¼Œæ”¾åœ¨ä¸€ç¯‡æ–‡ç« ä¸­æ˜¾å¾—è¿‡é•¿ï¼Œä¸åˆ©äºé˜…è¯»ï¼› ä½œè€…æ°´å¹³æœ‰é™ï¼Œå¯¹STLåº•å±‚åˆ†æåŠSTLç®—æ³•ç­‰å°šç¼ºä¹ç›¸å…³çŸ¥è¯†æˆ–ç»éªŒï¼Œå†™ä½œä¸­éš¾å…éƒ¨åˆ†æè¿°ä¸æ¸…ã€‚ é’ˆå¯¹ä¸Šè¿°é—®é¢˜æˆ–æœªå‘ç°çš„ä¸€äº›é—®é¢˜ï¼ŒåæœŸä½œè€…ä¼šå°½é‡è¿›è¡Œå®Œå–„ï¼Œå¹¶å°†æ›´æ–°è®°å½•åŒæ­¥åœ¨æ–‡åã€‚ 9.4.2 C++æ€»ç»“ åœ¨é‡åº†ä»Šå¤©è¿™ä¸ªè®©äººæœ‰ç‚¹æ˜æ˜æ¬²ç¡çš„ä¸‹åˆï¼ŒSTLç¯‡ç»ˆäºå®Œç»“ï¼Œä¸ç¦èˆ’äº†ä¸€å£æ°”ï¼Œé•¿è¾¾2.7wçš„æ€»ç»“æ—¢æ˜¯ã€ŠC++ç¯‡ã€‹æœ€åä¸€ç¯‡åšå®¢ï¼Œä¹Ÿåº”è¯¥æ˜¯ç›®å‰æˆ‘å†™çš„æœ€é•¿çš„ä¸€ç¯‡åšå®¢ã€‚ ä¹Ÿç»ˆäºå¯ä»¥å›è¿‡ç¥æ¥ï¼Œåšä¸€ä¸ªå°ç»“ã€‚ æ—¶é—´å›åˆ°~3ä¸ªæœˆå‰ï¼Œå¤§çº¦æ˜¯11.20å·ï¼Œä¹Ÿå°±æ˜¯9æœˆç»“æŸæ‰¾å·¥ä½œç—›å¿«ç©äº†2ä¸ªæœˆåï¼Œæˆ‘æ„Ÿåˆ°ç©ºè™šè¿‡äºæ— æ‰€äº‹äº‹ï¼Œå¼€å§‹æŠ˜è…¾èµ·äº†è‡ªå·±çš„ç½‘ç«™ã€‚åœ¨ä¸ªäººç½‘ç«™æ€»ç»“å®Œè‡ªå·±å®ä¹ å’Œç§‹æ‹›ç¬”è®°åï¼Œä¹ŸèŒå‘äº†å­¦ä¹ C++çš„æƒ³æ³•â€”â€”ä¸»è¦æ˜¯æƒ³åˆ°è‡ªå·±åœ¨è…¾è®¯å®ä¹ ä»Javaè½¬åˆ°C++çš„ç—›è‹¦ç»å†ï¼Œå°±è¿˜æ˜¯åœ¨å·¥ä½œå‰æå‰å­¦ä¹ ä¸€éC++å§ï¼ˆèœæ˜¯åŸç½ªï¼‰ã€‚ äºæ˜¯ä¾¿æœ‰äº†ã€ŠC++ä»é›¶å¼€å§‹ã€‹ è¿™ä¸ªç³»åˆ—ã€‚ è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡å°è¯•å†™æ¡†æ¶è¿™ä¹ˆå¤§çš„ç³»åˆ—æ–‡ç« ï¼ˆå…‰C++ç¯‡å·²ç»~13W+å­—ï¼‰ï¼Œæ•´ä¸ªç³»åˆ—å®Œæˆä¼°è®¡è‡³å°‘æœ‰40Wå­—ã€‚å½“ç„¶å­—æ•°å¤šå°‘å¹¶ä¸é‡è¦ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å­¦ä¹ åˆ°å¾ˆå¤šï¼Œæ¯”å¦‚æ˜ç¡®äº†ä¸€ä¸ªå¾ˆé‡è¦çš„åŸåˆ™ï¼šâ€œå†™çš„æ–‡ç« ä¸æ˜¯ç»™è‡ªå·±çœ‹çš„ç¬”è®°ï¼Œè€Œæ˜¯ç»™åˆ«äººçœ‹çš„åšå®¢â€ã€‚ç§‰ç€è¿™ä¸ªåŸåˆ™ï¼Œæ¯ç¯‡åšå®¢å†™å®Œï¼Œæˆ‘éƒ½ä¼šä»£å…¥ä¸€ä¸ªâ€œæ—è§‚è€…â€è§†è§’ï¼Œè‡ªå·±è¯»å‡ éï¼Œçœ‹é€»è¾‘æ˜¯å¦æ¸…æ™°ã€æ–‡ç« æ˜¯å¦æœ‰é”™è¯¯ç­‰ã€‚æ‰€ä»¥ï¼Œæ¯ç¯‡åšå®¢ç”šè‡³æ•´ä¸ªç³»åˆ—å…¶å®ä¸€ç›´åœ¨å®Œå–„ä¸­ã€‚ä½†é™äºè‡ªå·±çš„æ°´å¹³ï¼Œé”™è¯¯å’Œæè¿°ä¸æ¸…æ™°çš„åœ°æ–¹ä¾æ—§ä¸å°‘ï¼Œæ¯”å¦‚æ¯æ¬¡æˆ‘è‡ªå·±é‡è¯»æ—¶ä¾æ—§èƒ½å‘ç°ï¼ˆå¥½æ¶ˆæ¯æ˜¯è¶Šæ¥è¶Šå°‘äº†ï¼‰ã€‚ whateverï¼Œç›¸ä¿¡ä¸æ–­è¿›æ­¥&amp;å®Œå–„ï¼Œæ€»èƒ½è¾¾åˆ°æ»¡æ„çš„æ•ˆæœã€‚ ã€ŠC++ä»é›¶å¼€å§‹ã€‹ æ¥ä¸‹æ¥å°†ä¸»è¦ä¸“æ³¨äºLinux/C++å¼€å‘æ–¹é¢çš„çŸ¥è¯†ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥çš„å†…å®¹åˆ†ä¸ºä¸¤å¤§ç¯‡ç« ï¼š ã€ŠC++ä»é›¶å¼€å§‹ä¹‹Linux/C++ç³»ç»Ÿç¼–ç¨‹ã€‹ ã€ŠC++ä»é›¶å¼€å§‹ä¹‹ç½‘ç»œç¼–ç¨‹ã€‹ å’Œã€ŠC++ä»é›¶å¼€å§‹ä¹‹C++ã€‹äº’ä¸ºã€ŠC++ä»é›¶å¼€å§‹ã€‹çš„ä¸‰éƒ¨æ›²ã€‚ æ•¬è¯·æœŸå¾…ï¼ æ›´æ–°è®°å½• 2022-02-19ï¼šæ›´æ–°ç¬”è®° ç¬¬ä¸€æ¬¡æ›´æ–° å‚è€ƒèµ„æ–™ 1.å—¨è¯¾ç½‘-STLæ•™ç¨‹ï¼šhttps://haicoder.net/stl/stl-data-structure.html â†©2.è¿­ä»£å™¨ï¼ˆiteratorï¼‰å’ŒæŒ‡é’ˆï¼ˆpointerï¼‰åŒºåˆ«åœ¨å“ªï¼Ÿhttps://www.zhihu.com/question/54047747 â†©3.STL æºç å‰–æï¼šhttps://www.kancloud.cn/digest/stl-sources/ â†©4.C++ STL: å®¹å™¨vectoræºç åˆ†æï¼šhttps://blog.csdn.net/Z_Stand/article/details/106866871 â†©5.stlæºç åˆ†æä¹‹vectorï¼šhttps://www.cnblogs.com/coderkian/p/3888429.html â†©6.Priority Queue - Insertion, Deletion and Implementation in C++ â†©","categories":[{"name":"C++","slug":"C","permalink":"https://hwh.zone/categories/C/"},{"name":"ä»é›¶å¼€å§‹","slug":"C/ä»é›¶å¼€å§‹","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"},{"name":"C++è¿›é˜¶","slug":"C/ä»é›¶å¼€å§‹/C-è¿›é˜¶","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/C-%E8%BF%9B%E9%98%B6/"}],"tags":[{"name":"C++","slug":"C","permalink":"https://hwh.zone/tags/C/"},{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://hwh.zone/tags/%E6%95%99%E7%A8%8B/"},{"name":"C++è¿›é˜¶","slug":"C-è¿›é˜¶","permalink":"https://hwh.zone/tags/C-%E8%BF%9B%E9%98%B6/"},{"name":"STL","slug":"STL","permalink":"https://hwh.zone/tags/STL/"}]},{"title":"C++ä»é›¶å¼€å§‹ï¼ˆåï¼‰ï¼šC++è¿›é˜¶ï¼ˆä¸Šï¼‰æ¨¡æ¿","slug":"C++ä»é›¶å¼€å§‹ï¼ˆå››ï¼‰ï¼šC++è¿›é˜¶ï¼ˆä¸Šï¼‰æ¨¡æ¿","date":"2022-02-11T08:17:22.936Z","updated":"2022-02-19T10:01:34.873Z","comments":true,"path":"p/51012/","link":"","permalink":"https://hwh.zone/p/51012/","excerpt":"","text":"ğŸŒŸã€ŠC++ä»é›¶å¼€å§‹ã€‹ ç³»åˆ—ï¼Œå¼€å§‹æ›´æ–°ä¸­â€¦ C++ä»é›¶å¼€å§‹https://hwh.zone/p/62712 å…«ã€æ¨¡æ¿ æ¨¡æ¿ï¼ˆTemplateï¼‰æ˜¯C++ä¸­çš„æ³›å‹ç¼–ç¨‹çš„åŸºç¡€ã€‚ å°±åƒç±»æ˜¯ä¸€ç§æ¨¡æ¿ï¼Œå¯ä»¥åˆ›å»ºä¸åŒçš„å¯¹è±¡ã€‚æ¨¡æ¿ï¼ˆTemplateï¼‰ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºä¸åŒçš„â€œå¯¹è±¡â€ï¼Œåªä¸è¿‡è¿™ä¸ªâ€œå¯¹è±¡â€æ˜¯å‡½æ•°æˆ–ç±»ã€‚ ç±»ä¸ºåŒä¸€ç±»å‹çš„ä¸åŒå¯¹è±¡ï¼Œæä¾›äº†ä¸€ä»½â€œé€šç”¨çš„ä»£ç â€ã€‚è€Œäº§ç”Ÿæ‰€éœ€çš„ä¸åŒå¯¹è±¡ï¼Œåªéœ€å®ä¾‹åŒ–ç±»ç”Ÿæˆå¯¹è±¡æ—¶é€šè¿‡ï¼š åˆ†é…å†…å­˜ï¼šä¸ºä¸åŒå¯¹è±¡åˆ†é…ä¸åŒå†…å­˜ï¼Œè¿™å†³å®šäº†å®ƒä»¬ç‰©ç†æ„ä¹‰ä¸Šçš„ä¸åŒï¼› æ„é€ å‡½æ•°åˆå§‹åŒ–ï¼šè°ƒç”¨æŒ‡å®šæ„é€ å‡½æ•°å’Œå‚æ•°è¿›è¡Œåˆå§‹åŒ–ï¼Œå¯ä»¥è®©å¯¹è±¡äº§ç”Ÿå€¼æ„ä¹‰ä¸Šçš„ä¸åŒã€‚ æ¨¡æ¿ç±»ä¼¼ï¼Œæ ¹æ®ç±»æ¨¡æ¿/å‡½æ•°æ¨¡æ¿å¯ä»¥å®ä¾‹åŒ–å‡ºä¸åŒçš„ç±»/å‡½æ•°ã€‚è¿™äº›ç±»ä¹‹é—´æˆ–å‡½æ•°ä¹‹é—´çš„å·®å¼‚æ€§ï¼Œæ˜¯åœ¨å®ä¾‹åŒ–æ—¶ï¼š ç¼–è¯‘å™¨ä¼šä¸ºæ¯ä¸ªå®ä¾‹å‡ºæ¥çš„ç±»/å‡½æ•°åˆ†é…ä¸åŒç©ºé—´ï¼› å¦ä¸€æ–¹é¢ï¼Œæ˜¯å®ä¾‹åŒ–æ—¶æˆ‘ä»¬å¯ä»¥æŒ‡å®šä¸åŒçš„æ•°æ®ç±»å‹ã€‚ æ¨¡æ¿æœ€å¤§çš„å¥½å¤„ä¾¿ä½“ç°åœ¨ç¬¬2ç‚¹ï¼Œè®©æˆ‘ä»¬ç¼–å†™çš„ç±»æˆ–å‡½æ•°å’Œæ•°æ®ç±»å‹æ— å…³ï¼Œä»è€Œå®ç°äº†é€šç”¨ç¼–ç¨‹ã€‚ æœ¬æ–‡ä¸»è¦æ¢è®¨ä»¥ä¸‹å†…å®¹ï¼š å‡½æ•°æ¨¡æ¿ã€ç±»æ¨¡æ¿çš„åº”ç”¨åœºæ™¯åŠåŸºæœ¬ä½¿ç”¨ï¼› æ¨¡æ¿å‚æ•°ï¼› æ¨¡æ¿ç‰¹åŒ–åº”ç”¨åœºæ™¯åŠä½¿ç”¨ï¼ŒåŒ…å«å…¨ç‰¹åŒ–å’Œåç‰¹åŒ–ã€‚ 8.1 æ¨¡æ¿åˆè¯† 8.1.1 å‡½æ•°æ¨¡æ¿ æˆ‘ä»¬å¯èƒ½å®ç°è¿‡è¿™ä¹ˆä¸€ä¸ªmySwap å‡½æ•°ï¼š 123456void mySwap(int&amp;a , int&amp; b) &#123; int temp = a; a = b; b = temp;&#125; è¿™è™½ç„¶ç®€å•åˆ°éƒ½ä¸éœ€è¦è¿›è¡Œæ³¨é‡Šï¼Œä½†æ˜¯å¦‚æœå“ªä¸€å¤©æˆ‘ä»¬å¸Œæœ›äº¤æ¢çš„æ•°ç±»å‹æ˜¯long ã€charã€std::string ç­‰ï¼Œè¿™è‚¯å®šå°±è®©ä½ å‘æ„äº†ã€‚ æ€»ä¸ç„¶å®šä¹‰èŒ«èŒ«å¤šçš„ã€ä»…ä»…æ•°æ®ç±»å‹ä¸åŒçš„å‡½æ•°å§ï¼Ÿè¿˜å¥½ä½ çŸ¥é“å‡½æ•°æ¨¡æ¿ï¼š 123456789101112131415161718192021// templateå…è®¸æˆ‘ä»¬çš„å‡½æ•°ä¸å†å—é™äºæ•°æ®ç±»å‹template&lt;typename T&gt; void mySwap(T&amp; a, T&amp; b)&#123; T temp = a; a = b; b = temp;&#125;int main()&#123; int a = 0, b = 1; int a1 = 0, b1 = 1; long a2 = 0, b2 = 1; mySwap&lt;int&gt;(a,b); // ï¼ˆ1ï¼‰å®ä¾‹åŒ–æ¨¡æ¿æŒ‡å®šæ•°æ®ç±»å‹ mySwap&lt;int&gt;(a1,b1); // ï¼ˆ2ï¼‰ mySwap&lt;long&gt;(a2,b2); // ï¼ˆ3ï¼‰&#125; ä¸ºä½ çš„æœºæ™ºç‚¹èµã€‚ç°åœ¨æˆ‘ä»¬æ¢è®¨ä¸€ç‚¹é«˜æ·±çš„é—®é¢˜ï¼š å‡½æ•°æ¨¡æ¿å®ä¾‹åŒ–ç”Ÿæˆçš„â€œå¯¹è±¡â€åœ¨å“ªé‡Œï¼Ÿï¼ˆ1ï¼‰ã€ï¼ˆ2ï¼‰ä¸¤å¤„ä¼šåˆ†åˆ«å£°æ˜ä¸¤ä¸ªå¯¹è±¡å—ï¼Ÿ æˆ‘å¯ä»¥å°†æ¨¡æ¿çš„å£°æ˜ï¼ˆ.hï¼‰å’Œå®šä¹‰ï¼ˆ.cppï¼‰åˆ†å¼€å—ï¼Ÿ å‡½æ•°å¯¹è±¡ç”Ÿæˆ æ¨¡æ¿å®ä¾‹åŒ–ç”Ÿæˆçš„å‡½æ•°ï¼Œç”±ç¼–è¯‘å™¨åœ¨ç¼–è¯‘é˜¶æ®µå®Œæˆã€‚ï¼ˆ1ï¼‰ã€ï¼ˆ2ï¼‰ä¸¤å¤„åªä¼šç”Ÿæˆä¸€ä¸ªå…·ä½“å‡½æ•°ï¼š æ³¨æ„åˆ°ä¸Šå›¾çº¢æ¡†ï¼ˆ1ï¼‰ã€ï¼ˆ2ï¼‰å¤„ï¼Œéƒ½æ˜¯æ‰§è¡Œå‡½æ•°æ¨¡æ¿ç”Ÿæˆçš„åŒä¸€ä¸ªå‡½æ•°ã€‚ å‡½æ•°æ¨¡æ¿çš„å£°æ˜å’Œå®šä¹‰æ— æ³•åˆ†å¼€ æ¨¡æ¿çš„å£°æ˜å’Œå®šä¹‰ä¸å¯ä»¥åˆ†å¼€ï¼Œå¦‚æœä½ å°è¯•è¿™ä¹ˆåšï¼š 123// swap.htemplate&lt;typename T&gt; void mySwap(T&amp; t1, T&amp; t2); 12345678// swap.cpptemplate&lt;typename T&gt; void mySwap(T&amp; a, T&amp; b)&#123; T temp = a; a = b; b = temp;&#125; 12345678// test.cpp# include &quot;swap.h&quot;int main()&#123; int a = 0, b = 1; mySwap&lt;int&gt;(a,b); &#125; ç¼–è¯‘æ—¶ä¼šå‘ç”Ÿé”™è¯¯ï¼š 1234[root@roy-cpp test]# g++ -std=c++11 test.cpp swap.cpp -o test.out/tmp/ccrmjFSC.o: In function `main&#x27;:test.cpp:(.text+0x25): undefined reference to `void mySwap&lt;int&gt;(int&amp;, int&amp;)&#x27;collect2: error: ld returned 1 exit status ä¸Šè¿°æ˜¾ç¤ºé“¾æ¥æ—¶æ‰¾ä¸åˆ°å‡½æ•° mySwap&lt;int&gt;(int&amp;, int&amp;)çš„å®šä¹‰ã€‚ ç†ä¸€ç†æ•´ä¸ªç¼–è¯‘è¿‡ç¨‹ï¼š é¢„ç¼–è¯‘ï¼šæºæ–‡ä»¶test.cppã€ swap.cppè¿›è¡Œå¤´æ–‡ä»¶æ›¿æ¢ç­‰ï¼› ç¼–è¯‘ï¼štest.cppã€ swap.cpp åˆ†åˆ«å•ç‹¬ç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶test.o ã€swap.oã€‚ test.cpp ç¼–è¯‘åˆ° mySwap&lt;int&gt;(a,b) å‘ç°ä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Œä¸è¿‡æ²¡å…³ç³»ï¼Œå…ˆåœ¨å‡½æ•°ä½ç½®ç”Ÿæˆç¬¦å·æ ‡è®°ä¸ºæœªå®šä¹‰ï¼Œåœ¨é“¾æ¥æ—¶å†å¯»æ‰¾è¿™ä¸ªå‡½æ•°ï¼› swap.cpp è¿›è¡Œç¼–è¯‘ï¼ŒæœŸæœ›swap.o ç”Ÿæˆæˆ‘ä»¬æ‰€éœ€çš„å‡½æ•°ç¬¦å·ï¼Œä½†æ˜¯å¾ˆæ„å¤–ï¼Œæ²¡æœ‰ä»»ä½•ç¬¦å·è¢«ç”Ÿæˆã€‚ æ‰€ä»¥æ±‡ç¼–å®Œæˆåï¼Œé“¾æ¥æ—¶æ— æ³•æ‰¾åˆ°mySwapä»»ä½•ç›¸å…³å®šä¹‰ï¼Œé“¾æ¥æŠ¥é”™ã€‚ ä¸ºä»€ä¹ˆswap.o æ²¡æœ‰ç”Ÿæˆå…·ä½“å‡½æ•°ï¼Ÿ è¿™æ˜¯å› ä¸ºæ¨¡æ¿åˆ†ä¸¤æ¬¡ç¼–è¯‘ï¼š ç¬¬ä¸€æ¬¡ç¼–è¯‘å‘ç”Ÿåœ¨ swap.cppä¸­ï¼ˆå®ä¾‹åŒ–å‰ï¼‰ï¼Œä»…å¯¹æ¨¡æ¿è¿›è¡Œä¸€äº›è¯­æ³•æ£€æŸ¥ç­‰ï¼Œä¸ç”Ÿæˆå…·ä½“å‡½æ•°ï¼Œæ‰€ä»¥ swap.o ç¬¦å·è¡¨æ²¡æœ‰ç”Ÿæˆä»»ä½•ç¬¦å·ï¼› ç¬¬äºŒæ¬¡ç¼–è¯‘æ˜¯åœ¨test.cppä¸­ï¼ˆå®ä¾‹åŒ–æ—¶ï¼‰ï¼Œç¼–è¯‘åˆ°è°ƒç”¨ä»£ç mySwap&lt;int&gt;(a,b)æ—¶ï¼Œæ‰ä¼šå»ç¼–è¯‘ swap.cppä¸­æ¨¡æ¿mySwapç”Ÿæˆå…·ä½“å‡½æ•°ï¼Œå› ä¸ºè¿™ä¸ªæ—¶å€™ç¼–è¯‘å™¨æ‰çŸ¥é“éœ€è¦çš„ç±»å‹æ˜¯intï¼ŒçŸ¥é“ç”Ÿæˆä»€ä¹ˆå‚æ•°ç±»å‹çš„å‡½æ•°ã€‚ ä½†æ˜¯test.cpp çš„å¤´æ–‡ä»¶ swap.h ä»…åŒ…å«å‡½æ•°æ¨¡æ¿mySwap çš„å£°æ˜ï¼Œæ— æ³•å¾—çŸ¥å…¶å®šä¹‰ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨æ— æ³•æ ¹æ®å…¶ç”Ÿæˆå…·ä½“å‡½æ•°ã€‚ æœ€ç»ˆå¯¼è‡´é“¾æ¥æ—¶å‘ç”Ÿé”™è¯¯ã€‚ è§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼Œæ¨¡æ¿çš„å®šä¹‰å’Œå£°æ˜éƒ½æ”¾åœ¨å¤´æ–‡ä»¶ä¸­å³å¯ï¼Œè¿™æ ·ç”Ÿæˆå‡½æ•°å¯¹è±¡çš„æ—¶å€™å°±å¯ä»¥çœ‹åˆ°å‡½æ•°æ¨¡æ¿å®Œæ•´å®šä¹‰ã€‚ è¯•ä¸€è¯•ã€‚ æ³¨æ„åˆ°æˆ‘ä»¬è¿˜åœ¨swap.h è®¾ç½®äº†å®å¼€å…³ï¼Œé¿å…æ¨¡æ¿å®šä¹‰å‡ºç°åœ¨å¤´æ–‡ä»¶ä¸­æ—¶ï¼Œè€Œswap.hè¢«å¤šä¸ªæ–‡ä»¶å¼•ç”¨ï¼Œå¯¼è‡´mySwap å‡ºç°é‡å¤å®šä¹‰ã€‚ 1234567891011// swap.h#ifndef mySwap_H#define mySwap_Htemplate&lt;typename T&gt; void mySwap(T&amp; a, T&amp; b) // å®šä¹‰å’Œå£°æ˜åœ¨ä¸€å—å„¿&#123; T temp = a; a = b; b = temp;&#125;#endif 12345678// test.cpp# include &quot;swap.h&quot;int main()&#123; int a = 0, b = 1; mySwap&lt;int&gt;(a,b); &#125; å†æ¬¡ç¼–è¯‘ä¸€åˆ‡æ­£å¸¸ï¼š è¿™ä¸ªè§£å†³æ–¹æ¡ˆåŒæ ·é€‚åˆç±»æ¨¡æ¿ã€‚ ä»€ä¹ˆæ˜¯ç±»æ¨¡æ¿ï¼Ÿå¥¥æˆ‘ä»¬è¿˜æ²¡å¼€å§‹è®²å‘¢ï¼Œçœ‹å®˜è€çˆ·è¯·çœ‹ä¸‹æ–‡ã€‚ 8.1.2 ç±»æ¨¡æ¿ è®¤è¯†ç±»æ¨¡æ¿ ç±»æ¨¡æ¿åŒæ ·ä½¿å¾—æˆ‘ä»¬ç¼–å†™çš„ç±»ä¸ç”¨å†å’Œæ•°æ®ç±»å‹ç›¸å…³ï¼Œæ›´åŠ é€šç”¨ã€‚ ä¸‹é¢è¿™ä¸ªæ¨¡æ¿ç±»StaticArrayï¼Œå…è®¸æˆ‘ä»¬åˆ›å»ºä¸åŒæˆå‘˜æ•°æ®ç±»å‹çš„é™æ€æ•°ç»„ç±»ã€‚ 12345678910111213template &lt;typename T, int size&gt; class StaticArray&#123;private: T m_array[size]&#123;&#125;;public: T* getArray() &#123; return m_array; &#125; T&amp; operator[](int index) &#123; return m_array[index]; &#125;&#125;; ç®€å•ä½¿ç”¨ä¸€ä¸‹ï¼š 123456int main()&#123; StaticArray&lt;int, 4&gt; myArray1&#123;&#125;; StaticArray&lt;long, 10&gt; myArray2&#123;&#125;; return 0;&#125; æ„Ÿè§‰è¿˜ä¸é”™ã€‚ ä¹Ÿè®¸ä½ æ³¨æ„åˆ°ï¼Œæˆ‘ä»¬è¿›è¡Œæ¨¡æ¿å®šä¹‰æ—¶å¥½åƒæœ‰ç‚¹â€œå¥‡æ€ªâ€ï¼š 12template &lt;typename T, int size&gt; class StaticArray è¿™é‡Œè¿˜ä½¿ç”¨äº†å‚æ•° int ï¼Œ C++ç§°ä¹‹ä¸ºâ€œéæ¨¡æ¿ç±»å‹å‚æ•°â€ï¼Œè€Œä¸æ˜¯åªä½¿ç”¨â€œæ¨¡æ¿ç±»å‹å‚æ•°â€ï¼Œå³typename ã€‚ æ¨¡æ¿å‚æ•° â€œæ¨¡æ¿ç±»å‹å‚æ•°â€ ï¼Œæ˜¯ä¸€ä¸ªå ä½ç¬¦ç±»å‹ï¼Œç”¨äºæ›¿ä»£ä½œä¸ºå‚æ•°ä¼ å…¥çš„ç±»å‹ã€‚ â€œéæ¨¡æ¿ç±»å‹å‚æ•°â€ï¼Œåˆ™æ˜¯é¢„å®šä¹‰çš„ç±»å‹ï¼Œå®ƒå…è®¸ä»¥ä¸‹ç±»å‹ï¼š æ•´æ•°ç±»å‹ï¼ˆæµ®ç‚¹ç±»å‹åœ¨C++20èµ·å¼€å§‹æ”¯æŒï¼‰ æšä¸¾ç±»å‹ æŒ‡å‘ç±»å¯¹è±¡/å‡½æ•°/ç±»æˆå‘˜å‡½æ•°çš„æŒ‡é’ˆ/å¼•ç”¨ std::nullptr_t å›é¡¾æˆ‘ä»¬ä¹‹å‰çš„ä»£ç ï¼š 1StaticArray&lt;int, 4&gt; myArray1&#123;&#125;; å®ä¾‹åŒ–ç±»æ¨¡æ¿StaticArray æ—¶ï¼Œç¼–è¯‘å™¨ä¼šå°† Tæ›¿æ¢ä¸ºintï¼Œsize æ›¿æ¢ä¸º 4 ã€‚æ­¤æ—¶ï¼Œint æ˜¯ä¸€ä¸ªç±»å‹å‚æ•°ï¼Œè€Œ 4 æ˜¯ä¸€ä¸ªéç±»å‹å‚æ•°ã€‚ æœ€ç»ˆm_arrayæ˜¯ int[4] ç±»å‹ã€‚ æœ€åæ³¨æ„ï¼Œéæ¨¡æ¿ç±»å‹å‚æ•°åªèƒ½ç”¨è¡¨è¾¾å¼ åˆå§‹åŒ–ï¼Œéè¡¨è¾¾å¼ æ˜¯ä¸è¢«å…è®¸çš„ã€‚ 12int x = 4;StaticArray&lt;int, x&gt; myArray1&#123;&#125;; // error 8.2 æ¨¡æ¿ç‰¹åŒ– æ¨¡æ¿ä½¿å¾—æˆ‘ä»¬ä¸ç”¨å†æ‹…å¿ƒä»…ä»…å› ä¸ºæ•°æ®ç±»å‹ä¸åŒï¼Œè€Œå»å®šä¹‰å¤šä¸ªæä¸ºç±»ç›¸ä¼¼çš„å‡½æ•°æˆ–ç±»ã€‚ å› ä¸ºæˆ‘ä»¬çš„ç±»æ¨¡æ¿/å‡½æ•°æ¨¡æ¿ï¼Œå¯ä»¥å¤„ç†ä¸åŒæ•°æ®ç±»å‹ã€‚ä¹Ÿå°±æ˜¯å¯¹äºä¸åŒæ•°æ®ç±»å‹ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ä½¿ç”¨åŒä¸€å¥—æ¨¡æ¿ä»£ç ã€‚ è¿™ä¼šå¸¦æ¥å¦ä¸€ä¸ªé—®é¢˜ï¼šåŒä¸€å¥—ä»£ç ï¼Œå¯¹ç‰¹å®šçš„æ•°æ®ç±»å‹ä¹Ÿè®¸å¹¶ä¸èƒ½å¾ˆå¥½åœ°å¤„ç†ã€‚ è¿™å°±ä¾æ—§éœ€è¦æˆ‘ä»¬é’ˆå¯¹ç‰¹å®šæ•°æ®ç±»å‹ï¼Œå‡†å¤‡ç‰¹å®šæ¨¡æ¿ã€‚ ä¹‹å‰çš„ä¾‹å­ï¼š 12345678910111213141516171819template &lt;typename T, int size&gt; // ç±»æ¨¡æ¿class StaticArray&#123;private: T m_array[size]&#123;&#125;;public: T* getArray() &#123; return m_array; &#125; T&amp; operator[](int index) &#123; return m_array[index]; &#125; void print() &#123; for (int i&#123; 0 &#125;; i &lt; size; ++i) std::cout &lt;&lt; m_array[i] &lt;&lt; &#x27; &#x27;; std::cout &lt;&lt; &#x27;\\n&#x27;; &#125;&#125;; ç°åœ¨æœ‰ä¸€ä¸ªæˆå‘˜å‡½æ•°printæœŸæœ›å¯ä»¥æ‰“å°StaticArray çš„ä¸åŒæ•°æ®ç±»å‹æˆå‘˜m_arrayã€‚ æ³¨æ„ï¼Œè¿™ä¸ªå‡½æ•°ä¸ºæ•°ç»„m_array æ¯ä¸ªå…ƒç´ éƒ½è®¾ç½®äº†ç©ºæ ¼ ' ' ã€‚ è¿™çœ‹èµ·æ¥æ²¡ä»€ä¹ˆæ¯›ç—…ï¼š å¯¹äºéå­—ç¬¦ç±»å‹ï¼Œåœ¨æ¯ä¸ªæ•°ç»„å…ƒç´ ä¹‹é—´æ”¾ç½®ä¸€ä¸ªç©ºæ ¼æ˜¯æœ‰æ„ä¹‰çš„ï¼š 11 2 3 4 5 ä½†å¯¹äºå­—ç¬¦ç±»å‹æ•°ç»„ï¼Œcharæ•°ç»„ ï¼Œä½ è‚¯å®šä¸æƒ³æ‰“å°å‡ºæ¥çš„ç»“æœæ˜¯è¿™æ ·çš„ï¼š 1h e l l o w o r l d ! æ‰€ä»¥æˆ‘ä»¬å¸Œæœ›å‡½æ•°æ¨¡æ¿ï¼ˆæˆå‘˜å‡½æ•°printæ­¤æ—¶ä¹Ÿæ˜¯æ¨¡æ¿ï¼Œä½œä¸ºç±»æ¨¡æ¿çš„æˆå‘˜ï¼‰ï¼Œé’ˆå¯¹ç‰¹å®šçš„æ•°æ®ç±»å‹charï¼Œèƒ½è¿›è¡Œç‰¹åˆ«å¤„ç†ã€‚ è¿™å°±æ˜¯æ¨¡æ¿ç‰¹åŒ–çš„æ€æƒ³ï¼Œ æ¨¡æ¿ç‰¹åŒ–å…·ä½“åˆåˆ†ä¸ºæ¨¡æ¿å…¨ç‰¹åŒ–å’Œåç‰¹åŒ–ï¼š å…¨ç‰¹åŒ–å°±æ˜¯é™å®šæ­»æ¨¡æ¿å®ç°çš„æ¨¡æ¿ç±»å‹å‚æ•°ï¼› åç‰¹åŒ–å°±æ˜¯å¦‚æœè¿™ä¸ªæ¨¡æ¿æœ‰å¤šä¸ªç±»å‹å‚æ•°ï¼Œé‚£ä¹ˆåªé™å®šå…¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚ 8.2.1 å‡½æ•°æ¨¡æ¿ç‰¹åŒ– å‡½æ•°æ¨¡æ¿ç‰¹åŒ–åˆè¯† å…ˆä»æ™®é€šå‡½æ•°æ¨¡æ¿ç‰¹åŒ–è¯´èµ·ï¼Œå†è°ˆè®ºæˆå‘˜å‡½æ•°æ¨¡æ¿ç‰¹åŒ–ã€‚ å‡½æ•°æ¨¡æ¿æœ‰ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼š å¯¹äºå‡½æ•°æ¨¡æ¿ï¼Œåªæœ‰å…¨ç‰¹åŒ–ï¼Œä¸èƒ½åç‰¹åŒ–ï¼› ç¼–è¯‘å™¨ä¼˜å…ˆåŒ¹é…ï¼šå…¨ç‰¹åŒ–&gt;åç‰¹åŒ–&gt;å‡½æ•°æ¨¡æ¿ã€‚ 1234567891011121314151617181920212223242526/* tmp.cpp */ // å‡½æ•°æ¨¡æ¿template&lt;typename T1, typename T2&gt;void fun(T1 a , T2 b) &#123;&#125;// å…¨ç‰¹åŒ–template&lt;&gt;void fun&lt;int ,char&gt;(int a, char b) // å£°æ˜æ—¶&lt;&gt;æŒ‡å®šå‚æ•°ç±»å‹&#123;&#125;// å‡½æ•°ä¸å­˜åœ¨åç‰¹åŒ–ï¼šä¸‹é¢çš„ä»£ç æ˜¯é”™è¯¯çš„/*template&lt;typename T1&gt;void fun&lt;T1,char&gt;( T1 a , char b) // åç‰¹åŒ–ï¼Œerror&#123;&#125;*/int main()&#123; fun&lt;int,double&gt;(1,2); // åŒ¹é…æ¨¡æ¿å‡½æ•°ï¼Œä½¿ç”¨æ—¶&lt;&gt;æŒ‡å®šå‚æ•°ç±»å‹ fun&lt;int,char&gt;(1,2); // åŒ¹é…å…¨ç‰¹åŒ–&#125; æ³¨æ„åˆ°ï¼š å…¨ç‰¹åŒ–é€šè¿‡å°–æ‹¬å·&lt;int,char&gt;ï¼Œå¯¹æ¨¡æ¿ä¸¤ä¸ªç±»å‹å‚æ•°éƒ½è¿›è¡Œäº†é™åˆ¶ï¼ŒT1ã€T2åˆ†åˆ«é™å®šä¸º int ã€charï¼› åç‰¹åŒ–&lt;T1,char&gt;ï¼Œåªå¯¹T2è¿›è¡Œäº†é™åˆ¶ä¸ºcharï¼ŒT1æ²¡æœ‰é™åˆ¶ï¼ˆéƒ¨åˆ†é™åˆ¶ï¼‰ã€‚ ä¸ºä»€ä¹ˆå‡½æ•°æ¨¡æ¿ä¸å…è®¸åç‰¹åŒ–ï¼Ÿ å‡½æ•°å¯ä»¥è¿›è¡Œé‡è½½ï¼Œå‡½æ•°æ¨¡æ¿ä¹Ÿä¸ä¾‹å¤–ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œé‡è½½ã€‚ ä½†å› ä¸ºå‡½æ•°é‡è½½å°±å¯ä»¥å®ç°åç‰¹åŒ–ï¼Œæ‰€ä»¥åç‰¹åŒ–æ²¡æœ‰å¿…è¦ã€‚ 123456789101112131415/* tmp.cpp */ // å‡½æ•°æ¨¡æ¿1template&lt;typename T1, typename T2&gt;void fun(T1 a , T2 b);/*// å‡½æ•°ä¸å­˜åœ¨åç‰¹åŒ–ï¼šä¸‹é¢çš„ä»£ç æ˜¯é”™è¯¯çš„template&lt;typename T1&gt;void fun&lt;T1,char&gt;( T1 a , char b); // åç‰¹åŒ–ï¼Œerror*/// å‡½æ•°æ¨¡æ¿2ï¼Œé‡è½½äº†æ¨¡æ¿1// å®ç°äº†åç‰¹åŒ–template&lt;typename T1&gt;void fun(T1 a , char b); // ä¸æ˜¯åç‰¹åŒ–ï¼Œæ³¨æ„æ²¡æœ‰&lt;&gt; åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå‡½æ•°æ¨¡æ¿çš„åç‰¹åŒ–è¿˜æ²¡æœ‰å¾—åˆ°C++æ ‡å‡†çš„æ”¯æŒï¼Œä¸æ’é™¤å®ƒåœ¨å°†æ¥ä¼šè¢«çº³å…¥æ ‡å‡†çš„å¯èƒ½ã€‚ å‡½æ•°æ¨¡æ¿é‡è½½å¯ä»¥å®ç°åç‰¹åŒ–ï¼Œé‚£ä¹Ÿåº”è¯¥èƒ½å®ç°å…¨ç‰¹åŒ–å§ï¼Ÿ 1234567891011// å‡½æ•°æ¨¡æ¿1template&lt;typename T1, typename T2&gt;void fun(T1 a , T2 b);// 1.å…¨ç‰¹åŒ–template&lt;&gt;void fun&lt;int ,char&gt;(int a, char b); // &lt;&gt;æŒ‡å®šå‚æ•°ç±»å‹// 2.æ¨¡æ¿2ï¼Œé‡è½½äº†å‡½æ•°æ¨¡æ¿1template&lt;&gt;void fun(int a, char b); 1ã€2ä¸¤å¤„ä»£ç è¢«è§†ä¸ºæ˜¯ç­‰ä»·çš„ï¼Œå…¨ç‰¹åŒ–å°±æ˜¯æ¨¡æ¿1çš„é‡è½½ã€‚ é‚£ä¸ºå•¥å…¨ç‰¹åŒ–è¢«å…è®¸ä½¿ç”¨ï¼Ÿä¸æ˜ç™½ï¼Œæœ‰æœºä¼šå˜æ¸…ä¸€ä¸‹ã€‚ ä¸è¿‡è¯·æ³¨æ„ï¼Œå…¨ç‰¹åŒ–çš„å‡½æ•°æ¨¡æ¿å·²ç»ä¸èƒ½ç§°ä¹‹ä¸ºæ¨¡æ¿ã€‚ å…¨ç‰¹åŒ–æ¥ç®¡äº†ç¼–è¯‘å™¨çš„å·¥ä½œï¼Œå®ä¾‹åŒ–å‡ºäº†å‡½æ•°ã€‚æŸ¥çœ‹tmp.cppçš„ç¬¦å·è¡¨ï¼Œä¹Ÿå‘ç°ç¡®å®å·²æœ‰ç¬¦å·ç”Ÿæˆï¼š è€Œæ¨¡æ¿ï¼ˆåŠåç‰¹åŒ–ï¼‰åªæœ‰åœ¨ç¼–è¯‘åˆ°è°ƒç”¨ä»£ç æ—¶æ‰ä¼šè¿›è¡Œå®ä¾‹åŒ–ï¼Œç”Ÿæˆå…·ä½“å‡½æ•°ç¬¦å·ã€‚ æˆå‘˜å‡½æ•°æ¨¡æ¿å…¨ç‰¹åŒ– ç»§ç»­å‰é¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬é‡‡ç”¨å‡½æ•°æ¨¡æ¿å…¨ç‰¹åŒ–è§£å†³ã€‚æ³¨æ„ï¼Œæ­¤æ—¶printæ˜¯æˆå‘˜å‡½æ•°ã€‚ 123456789101112131415161718192021222324252627282930#include&lt;cstring&gt;#include&lt;iostream&gt;template &lt;typename T, int size&gt; // ç±»æ¨¡æ¿class StaticArray&#123;private: T m_array[size]&#123;&#125;;public: T* getArray() &#123; return m_array; &#125; T&amp; operator[](int index) &#123; return m_array[index]; &#125; void print() &#123; for (int i&#123; 0 &#125;; i &lt; size; ++i) std::cout &lt;&lt; m_array[i] &lt;&lt; &#x27; &#x27;; std::cout &lt;&lt; &#x27;\\n&#x27;; &#125;&#125;;template &lt;&gt; // æˆå‘˜å‡½æ•°æ¨¡æ¿å…¨ç‰¹åŒ–void StaticArray&lt;char, 13&gt;::print()&#123; for (int count&#123; 0 &#125;; count &lt; 13; ++count) std::cout &lt;&lt; m_array[count]; // å»é™¤äº†å­—ç¬¦ä¹‹é—´çš„ç©ºæ ¼&#125; æ³¨æ„åˆ°ï¼Œtemplate &lt;&gt; æ¨¡æ¿å‚æ•°å·²ä¸ºç©ºï¼Œä»£ç 26è¡Œå¤„StaticArray&lt;char, 13&gt;å°†åŸæœ¬å‚æ•°T è¢«æ›¿æ¢ä¸ºchar ï¼Œsize è¢«æ›¿æ¢ä¸º13 ã€‚ 1234567int main()&#123; StaticArray&lt;char, 13&gt; char13&#123;&#125;; std::strcpy(char13.getArray(), &quot;Hello world!&quot;); // æ•°ç»„ä¸èƒ½ä½œä¸ºå·¦å€¼ï¼Œç”¨strcpyå¤åˆ¶ char13.print(); return 0;&#125; å†æ¬¡ç¼–è¯‘è¾“å‡ºæ­£å¸¸ï¼š 12[root@roy-cpp test]# ./test.out Hello world! ä½†è¿™ä¸ªå…¨ç‰¹åŒ–ä¾‹å­ï¼Œå¯¹æ¨¡æ¿æ‰€æœ‰ç±»å‹çš„å‚æ•°éƒ½é™å®šæ­»äº†ï¼ŒåŒ…æ‹¬sizeã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åªèƒ½å¤„ç†ç‰¹å®šé•¿åº¦ä¸º13çš„å­—ç¬¦ä¸²ã€‚ è™½ç„¶æˆ‘ä»¬å¾ˆæƒ³ä½¿ç”¨åç‰¹åŒ–ï¼Œåªå¯¹Tè¿›è¡Œé™åˆ¶ä¸ºchar ï¼Œå¯¹size ä¸è¿›è¡Œé™åˆ¶ï¼š 123456template &lt;int size&gt; // å‡½æ•°æ¨¡æ¿åç‰¹åŒ–ï¼Ÿerrorvoid StaticArray&lt;char, size&gt;::print()&#123; for (int count&#123; 0 &#125;; count &lt; 13; ++count) std::cout &lt;&lt; m_array[count]; &#125; C++ä¸å…è®¸å‘€ï¼é‚£å°±è¯•è¯•å‡½æ•°é‡è½½å§ã€‚ ä½†æ˜¯æˆå‘˜å‡½æ•°print()æ ¹æœ¬æ²¡åŠæ³•é‡è½½ï¼Œå› ä¸ºå®ƒæ²¡æœ‰ä»»ä½•å‚æ•°æ¥å¯¹T è¿›è¡Œé™åˆ¶ã€‚é™¤éå®ƒæ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼š 12345678910111213template &lt;typename T, int size&gt;void print(StaticArray&lt;T, size&gt;&amp; array) // éæˆå‘˜å‡½æ•°ï¼Œæœ‰ä¸€ä¸ªStaticArrayç±»å‹å‚æ•°&#123; for (int count&#123; 0 &#125;; count &lt; size; ++count) std::cout &lt;&lt; array[count] &lt;&lt; &#x27; &#x27;;&#125;template &lt;int size&gt;void print(StaticArray&lt;char, size&gt;&amp; array) // å‡½æ•°é‡è½½ï¼Œæ­¤æ—¶ok&#123; for (int count&#123; 0 &#125;; count &lt; size; ++count) std::cout &lt;&lt; array[count];&#125; ä¸è¿‡æˆ‘ä»¬å¯ä»¥è¿‚å›ä¸€ç‚¹ï¼šå‡½æ•°æ¨¡æ¿ä¸èƒ½åç‰¹åŒ–ï¼Œä¸ä»£è¡¨ç±»æ¨¡æ¿ä¸èƒ½åç‰¹åŒ–ï¼ˆç±»æ²¡æœ‰é‡è½½ï¼Œä¸ä¼šå—åˆ°é™åˆ¶ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥åç‰¹åŒ–å‡ºä¸€ä¸ªç±»æ¨¡æ¿ï¼Œä¸“é—¨è®©æˆå‘˜å‡½æ•°printå¤„ç†ä¸åŒé•¿åº¦çš„char ç±»å‹æ•°æ®ã€‚ è¿™å°±æ˜¯ç±»æ¨¡æ¿çš„åç‰¹åŒ–ã€‚ 8.2.2 ç±»æ¨¡æ¿ç‰¹åŒ– ç±»æ¨¡æ¿å…¨ã€åç‰¹åŒ– æˆ‘ä»¬ä½¿ç”¨ç±»æ¨¡æ¿åç‰¹åŒ–ï¼Œè®©æˆå‘˜å‡½æ•°print å¯ä»¥å¤„ç†ä¸åŒé•¿åº¦çš„charç±»å‹æ•°æ®ã€‚ 123456789101112131415161718192021// template &lt;typename T, int size&gt;template &lt;int size&gt; class StaticArray&lt;char,size&gt; // ç±»æ¨¡æ¿åç‰¹åŒ–&#123;private: char m_array[size]&#123;&#125;;public: char* getArray() &#123; return m_array; &#125; char&amp; operator[](int index) &#123; return m_array[index]; &#125; void print() &#123; for (int i&#123; 0 &#125;; i &lt; size; ++i) std::cout &lt;&lt; m_array[i]; std::cout &lt;&lt; &#x27;\\n&#x27;; &#125;&#125;; è¯•ä¸€è¯•ï¼š 123456789101112int main()&#123; StaticArray&lt;char, 7&gt; char7&#123;&#125;; // é•¿åº¦ä¸º7 std::strcpy(char7.getArray(), &quot;Hello&quot;); StaticArray&lt;char, 13&gt; char13&#123;&#125;; // é•¿åº¦ä¸º13 std::strcpy(char13.getArray(), &quot;Hello world!&quot;); char7.print(); // ok char13.print(); // ok return 0;&#125; è¾“å‡ºï¼š ç±»æ¨¡æ¿å…¨ç‰¹åŒ–ä½¿ç”¨ç±»ä¼¼ï¼Œè¿™é‡Œä»…åšä¸€ä¸ªç®€å•å¯¹æ¯”ï¼š 1234567891011// ç±»æ¨¡æ¿template &lt;typename T, int size&gt; class StaticArray;// ç±»æ¨¡æ¿åç‰¹åŒ–template &lt;int size&gt; class StaticArray&lt;char,size&gt;; // å°–æ‹¬å·æŒ‡å®šå‚æ•°// ç±»æ¨¡æ¿å…¨ç‰¹åŒ–template &lt;&gt; class StaticArray&lt;char,14&gt;; // å°–æ‹¬å·æŒ‡å®šå‚æ•° æŒ‡é’ˆåç‰¹åŒ– å…ˆè§‚å¯Ÿä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š 1234567891011// ç±»æ¨¡æ¿1template &lt;typename T&gt;class Storage;// æ¨¡æ¿1çš„å…¨ç‰¹åŒ–ç‰ˆæœ¬template &lt;&gt;class Storage&lt;char*&gt;;// ç±»æ¨¡æ¿2ï¼Œæ¨¡æ¿1çš„åç‰¹åŒ–ç‰ˆæœ¬template &lt;typename T&gt;class Storage&lt;T*&gt;; æˆ–è®¸è®©ä½ æœ‰ç‚¹æƒŠè®¶ï¼Œç±»æ¨¡æ¿2ä¾æ—§è¢«è§†ä¸ºæ˜¯ç±»æ¨¡æ¿1çš„åç‰¹åŒ–ç‰ˆæœ¬ã€‚å³ä½¿æˆ‘ä»¬æ²¡æœ‰å‡†ç¡®åœ°æŒ‡å®šåº•å±‚ç±»å‹ï¼Œåªæ˜¯å‘Šè¯‰ç¼–è¯‘å™¨å®ƒç”¨äºæŒ‡é’ˆç±»å‹ã€‚ ä¸‹é¢æ˜¯å…·ä½“å®ä¾‹åº”ç”¨ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970#include &lt;iostream&gt;#include &lt;cstring&gt;// æ¨¡æ¿1ï¼šåªé€‚åˆå­˜å‚¨ï¼ˆå•ä¸ªï¼‰éæŒ‡é’ˆç±»å‹æˆå‘˜template &lt;typename T&gt;class Storage&#123;private: T m_value;public: Storage(T value): m_value &#123; value &#125; // åªèƒ½åˆå§‹åŒ–éæŒ‡é’ˆæˆå‘˜ï¼ˆå•ä¸ªï¼‰ï¼Œå€¼å¤åˆ¶æ–¹å¼ &#123; &#125; ~Storage() &#123; &#125;&#125;;// æ¨¡æ¿2ï¼šæ¨¡æ¿1çš„åç‰¹åŒ–ç‰ˆæœ¬ï¼Œå¯ä»¥å­˜å‚¨ï¼ˆå•ä¸ªï¼‰æŒ‡é’ˆç±»å‹æˆå‘˜template &lt;typename T&gt;class Storage&lt;T*&gt;&#123;private: T* m_value;public: Storage(T* value): m_value &#123; new T &#123; *value &#125; &#125; // é€‚åˆåˆå§‹åŒ–ï¼ˆå•ä¸ªï¼‰æŒ‡é’ˆæˆå‘˜ï¼Œnewåˆ†é… &#123; &#125; ~Storage() &#123; delete m_value; &#125;&#125;;// æ¨¡æ¿1çš„å…¨ç‰¹åŒ–ç‰ˆæœ¬ï¼šé€‚åˆå­˜å‚¨char*æŒ‡é’ˆæ•°ç»„template &lt;&gt;class Storage&lt;char*&gt;&#123;private: char* m_value;public: Storage(char* value) &#123; int length &#123; 0 &#125;; while (value[length] != &#x27;\\0&#x27;) ++length; ++length; m_value = new char[length]; for (int count = 0; count &lt; length; ++count) m_value[count] = value[count]; &#125; ~Storage() &#123; delete m_value; &#125;&#125;;int main()&#123; Storage&lt;int&gt; my_int &#123; 5 &#125;; int x &#123; 7 &#125;; Storage&lt;int*&gt; my_int_ptr(&amp;x); char *name &#123; new char[40]&#123; &quot;royhuang&quot; &#125; &#125;; Storage&lt; char*&gt; my_name(name); delete[] name;&#125; æ¨¡æ¿ç›¸å…³ä»‹ç»overï¼Œä¸‹ç« æˆ‘ä»¬å¼€å§‹ä»‹ç»C++æ ‡å‡†åº“STLã€‚ æ›´æ–°è®°å½• 2022-02-11 ï¼šæ›´æ–°ç¬”è®° ç¬¬ä¸€æ¬¡æ›´æ–° å‚è€ƒèµ„æ–™ 1.C++ æ¨¡æ¿åç‰¹åŒ–ä¸å…¨ç‰¹åŒ– â€“ ç‚é…± (kejiang.co) â†©2.C++æ¨¡æ¿templateç”¨æ³•æ€»ç»“ï¼šhttps://blog.csdn.net/qq_35637562/article/details/55194097 â†©","categories":[{"name":"C++","slug":"C","permalink":"https://hwh.zone/categories/C/"},{"name":"ä»é›¶å¼€å§‹","slug":"C/ä»é›¶å¼€å§‹","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"},{"name":"C++è¿›é˜¶","slug":"C/ä»é›¶å¼€å§‹/C-è¿›é˜¶","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/C-%E8%BF%9B%E9%98%B6/"}],"tags":[{"name":"C++","slug":"C","permalink":"https://hwh.zone/tags/C/"},{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://hwh.zone/tags/%E6%95%99%E7%A8%8B/"},{"name":"C++åŸºç¡€","slug":"C-åŸºç¡€","permalink":"https://hwh.zone/tags/C-%E5%9F%BA%E7%A1%80/"},{"name":"æ¨¡æ¿","slug":"æ¨¡æ¿","permalink":"https://hwh.zone/tags/%E6%A8%A1%E6%9D%BF/"}]},{"title":"C++ä»é›¶å¼€å§‹ï¼ˆä¹ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸‹ï¼‰ç»§æ‰¿å’Œè™šå‡½æ•°","slug":"C++ä»é›¶å¼€å§‹ï¼ˆä¸‰ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸‹ï¼‰ç»§æ‰¿å’Œè™šå‡½æ•°","date":"2022-02-08T08:24:59.978Z","updated":"2022-02-19T10:00:56.454Z","comments":true,"path":"p/60158/","link":"","permalink":"https://hwh.zone/p/60158/","excerpt":"","text":"ğŸŒŸã€ŠC++ä»é›¶å¼€å§‹ã€‹ ç³»åˆ—ï¼Œå¼€å§‹æ›´æ–°ä¸­â€¦ C++ä»é›¶å¼€å§‹https://hwh.zone/p/62712 ä¸ƒã€ç»§æ‰¿å’Œè™šå‡½æ•° 7.1 ç»§æ‰¿ é¢å¯¹å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€ï¼Œç»§æ‰¿åœ¨é¢å¯¹å¯¹è±¡ä¸­çš„é‡è¦æ€§ä¸è¨€è€Œå–»ã€‚ æœ¬ç« ä¸»è¦æ¢è®¨çš„é—®é¢˜ï¼š ä¸ºä»€ä¹ˆéœ€è¦ç»§æ‰¿ï¼Ÿ ç»§æ‰¿çš„è®¿é—®æƒé™å’Œæˆå‘˜è®¿é—®æƒé™çš„åŒºåˆ«ï¼Ÿ ç»§æ‰¿çš„æ´¾ç”Ÿç±»å‡ºç°å’ŒåŸºç±»åŒæ ·ï¼ˆå‡½æ•°ç­¾åã€è¿”å›ç±»å‹ä¸€è‡´ï¼‰çš„å‡½æ•°ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ æ´¾ç”Ÿç±»å¯¹è±¡æ„é€ æ—¶ï¼Œæ˜¯å¦‚ä½•è¿›è¡Œæ„é€ çš„ï¼Ÿ å¤šé‡ç»§æ‰¿ä¼˜ç¼ºç‚¹åŠè±å½¢é—®é¢˜ã€‚ 7.1.1 ä¸ºä»€ä¹ˆéœ€è¦ç»§æ‰¿ï¼Ÿ æƒ³è±¡è¿™ä¹ˆä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœå­˜åœ¨ä¸€äº›ç®€å•ã€åŸºæœ¬çš„å¯¹è±¡ï¼Œå¦‚ä½•æ¥åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Ÿ é€šå¸¸æˆ‘ä»¬ä½¿ç”¨å¯¹è±¡ç»„åˆå’Œå¯¹è±¡ç»§æ‰¿ä¸¤ç§æ–¹å¼ã€‚ å¯¹è±¡ç»„åˆã€‚è¿™ç¬¦åˆæˆ‘ä»¬æœ€ç›´è§‚çš„è®¤çŸ¥ï¼Œé€‚åˆæ–°å¯¹è±¡ä¸åŸºæœ¬å¯¹è±¡ä¹‹é—´å­˜åœ¨has-a å…³ç³»ã€‚ ä¾‹å¦‚ï¼Œä¸€ä¸ªæˆ¿é—´æœ‰ä¸€å¼ æ¡Œå­å’Œå‡³å­ã€‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªClassRoomç±»ï¼Œç„¶åç»„åˆtable å’Œ chairæ„æˆClassRoomã€‚ 12345678class ClassRoom // æ•™å®¤&#123; private: Table _table; // æ¡Œå­ Chair _chair; // æ¤…å­ public: ClassRoom(Table table,Chair chair):_table(table),_chair(chair)&#123;&#125;&#125;; å¯¹è±¡ç»§æ‰¿ï¼Œä¹Ÿæ˜¯æœ¬èŠ‚çš„é‡ç‚¹ã€‚ä¸å¯¹è±¡ç»„åˆé€šè¿‡ç»„åˆå…¶ä»–å¯¹è±¡æ¥åˆ›å»ºæ–°å¯¹è±¡ä¸åŒï¼Œç»§æ‰¿ç›´æ¥è·å–å…¶ä»–å¯¹è±¡çš„å±æ€§å’Œè¡Œä¸ºï¼Œç„¶åè¿›è¡Œæ‰©å±•æ¥åˆ›å»ºæ–°å¯¹è±¡ã€‚ ä¸‹é¢çš„ClassRoom ä¾¿ç»§æ‰¿äº†Room ï¼Œè·å–äº†Roomçš„price ã€area å±æ€§ï¼Œç„¶åå†è¿›è¡Œæ‰©å±•ã€‚ 123456789101112131415161718class Room &#123; private: double _price; double _area; public: Room(double price,double area):_price(price),_area(area)&#123;&#125;&#125;;class ClassRoom: public Room&#123; private: Table _table; // æ¡Œå­ Chair _chair; // æ¤…å­ public: ClassRoom(Table table,Chair chair,double price,double area): _table(table),_chair(chair),Room(price,area)&#123;&#125;&#125;; ä¸Šä¾‹çš„ä¾‹å­å¾ˆå¥½åœ°å±•ç¤ºäº†ç»§æ‰¿çš„ä½œç”¨ï¼šæ´¾ç”Ÿç±»é€šè¿‡ç»§æ‰¿æ¥é‡ç”¨è¢«ç»§æ‰¿ç±»ï¼ˆåŸºç±»ï¼‰ï¼Œç„¶åæ´¾ç”Ÿç±»å¯ä»¥æ·»åŠ ã€ä¿®æ”¹æˆ–éšè—ç›¸å…³åŠŸèƒ½æ¥è¿›è¡Œæ‰©å±•ã€‚ è¿™ä½¿å¾—ç»§æ‰¿ï¼š æé«˜äº†ä»£ç çš„å¤ç”¨æ€§ã€ç»´æŠ¤æ€§ ç±»ä¸ç±»ä¹‹é—´äº§ç”Ÿäº†è”ç³»ï¼Œè¿™æ˜¯å¤šæ€çš„å‰æ ä¸è¿‡å¦ä¸€æ–¹é¢ï¼Œç»§æ‰¿æœ‰è¿å¼€å‘åŸåˆ™â€œé«˜å†…èšã€ä½è€¦åˆâ€ï¼Œå› ä¸ºç»§æ‰¿ä¼šå¢åŠ ç±»çš„è€¦åˆæ€§ï¼ˆç±»ä¸ç±»ä¹‹é—´å…³ç³»å˜å¾—ç´§å¯†ï¼‰ã€‚ whateverï¼Œå–„ç”¨ç»§æ‰¿æ˜¯ç†Ÿç»ƒè¿ç”¨OOPï¼ˆObject Oriented Programmingï¼ŒOOPï¼‰æ€æƒ³çš„é‡è¦ä½“ç°ã€‚ ä¸Šé¢çš„ä¾‹å­ä¹Ÿå¸¦æ¥ä¸€äº›æ€è€ƒï¼š ç»§æ‰¿è®¿é—®æƒé™æ˜¯ä»€ä¹ˆï¼Ÿå’Œä¹‹å‰çš„ç±»æˆå‘˜è®¿é—®æƒé™æœ‰ä»€ä¹ˆä¸åŒå—ï¼Ÿ 1class ClassRoom: public Room æ´¾ç”Ÿç±»æ€ä¹ˆæ·»åŠ ã€ä¿®æ”¹æˆ–éšè—åŸºç±»ç›¸å…³åŠŸèƒ½ï¼Ÿ æ´¾ç”Ÿç±»å®ä¾‹åŒ–æ—¶ï¼Œæ„é€ å‡½æ•°ã€ææ„å‡½æ•°çš„é¡ºåºæœ‰ä»€ä¹ˆè®²ç©¶å—ï¼Ÿä¸ºä»€ä¹ˆå­˜åœ¨è¿™ä¹ˆä¸€ä¸ªé¡ºåºï¼Ÿ å¾ˆå¤šè¯­è¨€å¦‚Javaæ˜¯ä¸å…è®¸å¤šé‡ç»§æ‰¿çš„ï¼Œè€ŒC++ä¸ºä»€ä¹ˆè¦å…è®¸å¤šé‡ç»§æ‰¿ï¼Œå¤šé‡ç»§æ‰¿ä¼šå¸¦æ¥ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ å¸¦ç€é—®é¢˜æ¥å’Œæˆ‘ä¸€èµ·è®¤è¯†ä¸€ä¸‹å§ã€‚ 7.1.2 ç»§æ‰¿ç›¸å…³æ¦‚å¿µ ç»§æ‰¿æƒé™å’Œè®¿é—®ç¬¦ å…ˆä»ç±»æˆå‘˜è®¿é—®ç¬¦è¯´èµ·ï¼Œç±»æˆå‘˜è®¿é—®æ§åˆ¶ç¬¦å®ç°äº†ç±»çš„å°è£…ã€‚ 123456789class Base&#123;public: int _public &#123;&#125;; protected: int _protected &#123;&#125;; private: int _private &#123;&#125;; &#125;; å›é¡¾ä¸€ä¸‹privateã€publicè®¿é—®ç¬¦ï¼š privateï¼šç§æœ‰æˆå‘˜ï¼Œè¯¥æˆå‘˜ä»…åœ¨ç±»å†…å¯ä»¥è¢«è®¿é—®ï¼Œåœ¨ç±»ä½“å¤–ï¼ˆåŒ…æ‹¬æ´¾ç”Ÿç±»ï¼‰æ˜¯éšè—çŠ¶æ€ï¼› publicï¼šå…¬æœ‰æˆå‘˜ï¼Œè¯¥æˆå‘˜åœ¨ç±»å†…ã€ç±»å¤–ä¹Ÿéƒ½å¯ä»¥è¢«è®¿é—®ï¼Œæ˜¯ç±»å¯¹å¤–æä¾›çš„å¯è®¿é—®æ¥å£ã€‚ åœ¨ç»§æ‰¿ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥äº†ç¬¬ä¸‰ç§è®¿é—®ä¿®é¥°ç¬¦ï¼š protectedï¼šä¿æŠ¤æˆå‘˜ï¼Œå’Œç§æœ‰æˆå‘˜ç±»ä¼¼ï¼Œä¸è¿‡åœ¨æ´¾ç”Ÿç±»å¯ä»¥è¢«è®¿é—®ã€‚ å›åˆ°æˆ‘ä»¬æœ¬å°èŠ‚çš„é‡ç‚¹ï¼šç»§æ‰¿æƒé™çš„è®¿é—®ç¬¦ã€‚ æ´¾ç”Ÿç±»éšå¼åŒ…å«äº†åŸºç±»çš„å‰¯æœ¬ã€‚ä¸åŒç»§æ‰¿æƒé™çš„è®¿é—®ç¬¦ï¼Œæœ¬è´¨å°±æ˜¯ä¿®æ”¹åŸºç±»å‰¯æœ¬çš„å…¬æœ‰æˆå‘˜ã€ä¿æŠ¤æˆå‘˜ï¼Œåœ¨æ´¾ç”Ÿç±»ä¸­çš„è®¿é—®æƒé™ï¼ˆç§æœ‰æˆå‘˜ä¸å—å½±å“ï¼‰ã€‚ æ ¸å¿ƒæ¦‚å¿µå¼ºè°ƒï¼š æ´¾ç”Ÿç±»å¹¶éæ˜¯ä¿®æ”¹äº†åŸæœ‰ç±»ï¼ˆåŸºç±»ï¼‰æˆå‘˜çš„è®¿é—®æƒé™ï¼Œè€Œæ˜¯ä¿®æ”¹æ´¾ç”Ÿç±»æŒæœ‰åŸºç±»çš„å‰¯æœ¬åŸæœ¬çš„è®¿é—®æƒé™ï¼› ç»§æ‰¿æ–¹å¼å¯¹ç§æœ‰æˆå‘˜æ— å½±å“ã€‚ ä¸åŒç»§æ‰¿æƒé™çš„åŸºç±»å‰¯æœ¬è®¿é—®æƒé™ä¿®æ”¹è§„åˆ™ï¼š publicç»§æ‰¿ï¼šæ‰€æœ‰åŸºç±»æˆå‘˜å‰¯æœ¬éƒ½ä¿æŒåŸæœ‰æƒé™ï¼› privateç»§æ‰¿ï¼šæ‰€æœ‰åŸºç±»æˆå‘˜å‰¯æœ¬è¢«ä¿®æ”¹ä¸ºprivateï¼› protectedç»§æ‰¿ï¼šæ‰€æœ‰åŸºç±»æˆå‘˜å‰¯æœ¬è¢«ä¿®æ”¹ä¸ºprotectedï¼› publicç»§æ‰¿æ˜¯ä½¿ç”¨æœ€å¸¸ç”¨ç»§æ‰¿æ–¹å¼ï¼Œå…¶æ¬¡æ˜¯privateç»§æ‰¿ï¼Œprotectedç»§æ‰¿åŸºæœ¬ä¸ä½¿ç”¨ã€‚ æˆ‘ä»¬æ¥å®é™…éªŒè¯ä¸‹ä¸Šè¿°ç»“è®ºï¼ˆprotectedç»§æ‰¿ä¸ä¸¾ä¾‹ï¼Œå› ä¸ºåŸºæœ¬ä¸ç”¨ï¼‰ã€‚ publicç»§æ‰¿ã€‚ æ³¨æ„åˆ°ï¼Œæ´¾ç”Ÿç±»ä¸­çš„åŸºç±»å‰¯æœ¬æˆå‘˜è®¿é—®æƒé™å’ŒåŸºç±»ä¸€è‡´ã€‚ 12345678910111213141516171819202122232425262728293031323334class Base&#123;public: int m_public &#123;&#125;;protected: int m_protected &#123;&#125;;private: int m_private &#123;&#125;;&#125;;class Pub: public Base&#123;public: Pub() &#123; m_public = 1; // okay m_protected = 2; // okay // m_private = 3; // not okay &#125;&#125;;int main()&#123; Base base; base.m_public = 1; // okay base.m_protected = 2; // not okay base.m_private = 3; // not okay // åœ¨æ´¾ç”Ÿç±»ä¸­å’ŒåŸºç±»æˆå‘˜è®¿é—®æƒé™ä¸€è‡´ Pub pub; pub.m_public = 1; // okay pub.m_protected = 2; // not okay pub.m_private = 3; // not okay return 0;&#125; privateç»§æ‰¿ã€‚ æ³¨æ„åˆ°ï¼Œæ´¾ç”Ÿç±»ä¸­çš„åŸºç±»å‰¯æœ¬æˆå‘˜çš„è®¿é—®æƒé™éƒ½è¢«ä¿®æ”¹ä¸ºprivateã€‚ 123456789101112131415161718192021222324252627282930313233343536class Base&#123;public: int m_public &#123;&#125;;protected: int m_protected &#123;&#125;;private: int m_private &#123;&#125;;&#125;;class Pri: private Base&#123;public: Pub() &#123; // m_public = 1; // not okay // æ­¤æ—¶è®¿é—®çš„åŸºç±»æˆå‘˜ï¼Œè®¿é—®æƒé™æŒ‰åŸºç±»æˆå‘˜æ¥ m_protected = 2; // okay // m_private = 3; // not okay &#125;&#125;;int main()&#123; Base base; base.m_public = 1; // okay // åŸºç±»m_protectedè®¿é—®æƒé™ä¾æ—§æ˜¯protectedï¼Œç±»å¤–æ— æ³•è®¿é—® base.m_protected = 2; // not okay base.m_private = 3; // not okay // æ´¾ç”Ÿç±»ä¸­çš„åŸºæœ¬å‰¯æœ¬æ‰€æœ‰æˆå‘˜çš„è®¿é—®æƒé™ä¸ºprivate Pub pub; pub.m_public = 1; // not okay pub.m_protected = 2; // not okayï¼Œæ´¾ç”Ÿç±»ä¸­çš„m_protectedå·²ç»æ˜¯privateæƒé™ï¼Œæ— æ³•è®¿é—® pub.m_private = 3; // not okay return 0;&#125; usingä¿®æ”¹è®¿é—®æƒé™ é€šè¿‡ç»§æ‰¿æƒé™è®¾ç½®ï¼Œè™½ç„¶å¯ä»¥ä¿®æ”¹æ´¾ç”Ÿç±»åŸºç±»å‰¯æœ¬åŸæœ¬çš„è®¿é—®æƒé™ï¼Œä½†ä¹Ÿæœ‰å±€é™æ€§ï¼š ä¸èƒ½ä¿®æ”¹åŸºç±»å‰¯æœ¬å•ä¸ªæˆå‘˜è®¿é—®æƒé™ï¼Œåªèƒ½å…¨éƒ¨ä¿®æ”¹ï¼› æ— æ³•ä¿®æ”¹privateæˆå‘˜æƒé™ï¼ˆæ¯”å¦‚ä¸ºprivateâ†’publicï¼‰ã€‚ usingå¼¥è¡¥äº†è¿™ä¸ªç¼ºé™·ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åªå°†åŸºç±»æŸä¸ªå…¬å…±æˆå‘˜è®¾ä¸ºç§æœ‰ï¼ˆé€šå¸¸ç”¨æ¥éšè—åŸºç±»ä¸­æŸä¸ªåŠŸèƒ½ï¼‰ï¼š 123456789101112131415161718192021222324#include &lt;iostream&gt;class Base&#123;public: int m_value &#123;&#125;;&#125;;class Derived : public Base&#123;private: using Base::m_value; // ç±»å¤–è®¿é—®çš„æ´¾ç”Ÿç±»åŸºç±»å‰¯æœ¬æˆå‘˜m_valueï¼Œå¹¶ä¿®æ”¹ä¸ºprivateï¼Œæ— æ³•è®¿é—®public: Derived(int value) &#123; m_value = value; // è¿™ä¸ªæ—¶å€™è®¿é—®çš„æ˜¯åŸºç±»æˆå‘˜m_valueï¼ˆpublicä¿®é¥°ï¼Œä¸æ˜¯æ´¾ç”Ÿç±»çš„åŸºç±»å‰¯æœ¬ï¼‰ï¼Œæ‰€ä»¥è¿˜å¯ä»¥è®¿é—® &#125;&#125;;int main()&#123; Derived derived &#123; 7 &#125;; std::cout &lt;&lt; derived.m_value; // errorï¼Œæ— æ³•è®¿é—® return 0;&#125; è‡ªç„¶ï¼Œä¹Ÿå¯ä»¥å°†ç§æœ‰è®¾ä¸ºå…¬æœ‰ï¼ˆä¸è¿‡è¿™ç ´åäº†ç±»çš„å°è£…æ€§ï¼Œæ…ç”¨ï¼‰ï¼š 12345678910111213141516171819202122232425262728293031#include &lt;iostream&gt;class Base&#123;private: int m_value &#123;&#125;;public: Base(int value): m_value &#123; value &#125; &#123; &#125;protected: void printValue() const &#123; std::cout &lt;&lt; m_value; &#125;&#125;;class Derived: public Base&#123;public: // æ­¤æ—¶åˆå§‹åŒ–åŸºç±»æˆå‘˜m_valueï¼Œåªèƒ½é€šè¿‡è°ƒç”¨åŸºç±»æ„é€ å‡½æ•°è¿™ç§æ–¹å¼ï¼Œå› ä¸ºå®ƒæ˜¯privateï¼Œæ— æ³•ç›´æ¥è®¿é—® Derived(int value): Base &#123; value &#125; &#123; &#125; using Base::printValue; // æ´¾ç”Ÿç±»åŸºæœ¬å‰¯æœ¬æˆå‘˜m_valueè®¿é—®æƒé™ä¿®æ”¹ä¸ºpublic&#125;;int main()&#123; Derived derived &#123; 7 &#125;; derived.printValue(); // 7ï¼Œok return 0;&#125; å‡½æ•°é‡å†™ å‰é¢æˆ‘ä»¬æåˆ°è¿‡ç»§æ‰¿çš„å¥½å¤„ï¼šâ€œæ´¾ç”Ÿç±»é€šè¿‡ç»§æ‰¿æ¥é‡ç”¨è¢«ç»§æ‰¿ç±»ï¼ˆåŸºç±»ï¼‰ï¼Œç„¶åå¯ä»¥é€šè¿‡æ·»åŠ ã€ä¿®æ”¹æˆ–éšè—ç›¸å…³åŠŸèƒ½å¯ä»¥è¿›ä¸€æ­¥æ‰©å±•â€ ã€‚ è¿™é‡Œçš„ï¼šæ·»åŠ ã€ä¿®æ”¹æˆ–éšè—ç›¸å…³åŠŸèƒ½ï¼Œæ˜¯å¦‚ä½•åšåˆ°çš„ï¼Ÿ ç­”æ¡ˆæ˜¯é€šè¿‡å‡½æ•°é‡å†™ã€‚ ç†è§£è¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆè¦æ˜ç™½æ´¾ç”Ÿç±»å¯¹è±¡æ˜¯å¦‚ä½•è°ƒç”¨ä¸€ä¸ªå‡½æ•°çš„ï¼ˆä¸è€ƒè™‘è™šå‡½æ•°ï¼‰ï¼š ç¼–è¯‘å™¨é¦–å…ˆæŸ¥çœ‹è¯¥æˆå‘˜æ˜¯å¦å­˜åœ¨æ´¾ç”Ÿç±»ä¸­ï¼Œå¦‚æœä¸å­˜åœ¨è½¬2ï¼› æ²¿ç€ç»§æ‰¿é“¾å¾€ä¸Šèµ°ï¼ŒæŸ¥çœ‹æ˜¯å­˜åœ¨ä»»ä½•çˆ¶ç±»å®šä¹‰ä¸­ï¼Œå¦‚æœä¸å­˜åœ¨è½¬3ï¼› ä¸å­˜åœ¨è¯¥å‡½æ•°ï¼Œè°ƒç”¨å¤±è´¥ã€‚ å‡½æ•°é‡å†™ä¾¿æ˜¯åˆ©ç”¨è¿™ä¸ªè°ƒç”¨é¡ºåºï¼šåœ¨æ´¾ç”Ÿç±»ä¸­å®šä¹‰ä¸€ä¸ªå’ŒåŸºç±»å®Œå…¨ä¸€è‡´ï¼ˆä¸æ­¢åŒåï¼Œè€Œä¸”å‡½æ•°ç­¾åã€è¿”å›ç±»å‹å®Œå…¨ä¸€è‡´ï¼‰çš„å‡½æ•°ï¼Œåœ¨å‡½æ•°ä½“å¯¹åŸæœ‰åŠŸèƒ½è¿›è¡Œä¿®æ”¹ï¼Œè¾¾åˆ°æ·»åŠ ã€ä¿®æ”¹ã€éšè—ç›¸å…³åŠŸèƒ½ã€‚å› ä¸ºç¼–è¯‘å™¨é¦–å…ˆè°ƒç”¨çš„ä¼šæ˜¯æ´¾ç”Ÿç±»ä¸­çš„å‡½æ•°ã€‚ çœ‹ä¸€ä¸ªå®ä¾‹å§ã€‚ ä¸‹é¢æ´¾ç”Ÿç±»ä¸­å¯¹åŸºç±»çš„print å®ç°äº†éšè—ï¼Œä½ æ°¸è¿œæ— æ³•é€šè¿‡æ´¾ç”Ÿç±»è®¿é—®åˆ°åŸºç±»çš„printæ–¹æ³•ã€‚ 1234567891011121314151617181920212223242526class Base&#123;private: void print() const &#123; std::cout &lt;&lt; &quot;Base&quot;; &#125;&#125;;class Derived : public Base&#123;public: void print() const &#123; std::cout &lt;&lt; &quot;Derived &quot;; &#125;&#125;;int main()&#123; Derived derived; derived.print(); // calls derived::print() return 0;&#125; è¾“å‡ºï¼š 1Derived å®Œå…¨éšè—åŸºç±»çš„æ–¹æ³•ä¹Ÿè®¸å¹¶ä¸æ˜¯ä½ æ‰€éœ€è¦çš„ï¼Œä½†ä½ è¿˜å¯ä»¥å¯¹åŸºç±»çš„printæ·»åŠ åŠŸèƒ½ã€‚ 12345678910class Derived : public Base&#123;public: void print() const &#123; Base::print(); // èŒƒå›´è¿ç®—ç¬¦è°ƒç”¨åŸºç±»printå‡½æ•° std::cout &lt;&lt; &quot;Derived &quot;; // æ·»åŠ æ‰“å°è¾“å‡º &#125;&#125;; è¾“å‡ºï¼š 12BaseDerived åŒæ—¶ï¼Œæˆ‘ä»¬åº”è¯¥æ³¨æ„åˆ°å‡½æ•°é‡è½½å’Œå‡½æ•°é‡å†™çš„å¼‚åŒã€‚ å‡½æ•°é‡å†™åˆ†åˆ«ä½äºåŸºç±»ã€æ´¾ç”Ÿç±»ï¼Œè€Œå‡½æ•°é‡è½½ä½äºåŒä¸€ç±»ä¸­ã€‚ å‡½æ•°é‡å†™çš„å‡½æ•°ç­¾åå®Œå…¨ä¸€è‡´ï¼ˆä¸æ­¢åŒåï¼‰ï¼Œè€Œå‡½æ•°é‡è½½ä»…ä»…æ˜¯åŒåï¼Œå‡½æ•°ç­¾åå¹¶ä¸åŒã€‚ å‡½æ•°é‡å†™æ˜¯è¿è¡Œæ—¶å¤šæ€çš„ä¸€ç§ä½“ç°ï¼ˆä¸€ä¸ªæ–¹æ³•åœ¨ä¸åŒçš„å­ç±»ä¸­è¡¨ç°å‡ºä¸åŒçš„è¡Œä¸ºï¼‰ï¼Œä¸ºäº†èƒ½å¯¹åŸºç±»çš„åŠŸèƒ½å®ç°ä¿®æ”¹ã€éšè—ç­‰è€Œç”Ÿï¼Œè€Œå‡½æ•°é‡è½½æ˜¯ä¸ºäº†è§£å†³å‘½åç©ºé—´æ±¡æŸ“é—®é¢˜è€Œç”Ÿã€‚ 7.1.3 æ´¾ç”Ÿç±»æ„é€ å‡½æ•° æˆ‘ä»¬çŸ¥é“æ´¾ç”Ÿç±»ç»§æ‰¿è‡³åŸºç±»ï¼Œé‚£æ´¾ç”Ÿç±»è¿›è¡Œå®ä¾‹åŒ–æ—¶ï¼š åŸºç±»éƒ¨åˆ†ç”±è°è´Ÿè´£åˆå§‹åŒ–ï¼Ÿæ˜¯åŸºç±»æ„é€ å‡½æ•°å—ï¼Ÿ æ´¾ç”Ÿç±»æ„é€ å‡½æ•°åªè´Ÿè´£åˆå§‹åŒ–æ´¾ç”Ÿç±»æ‰©å±•éƒ¨åˆ†å—ï¼Ÿ åŸºç±»å’Œæ´¾ç”Ÿç±»æ„é€ å‡½æ•°æ‰§è¡Œé¡ºåºæ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ æ„é€ é¡ºåº ä¸Šè¿°ç­”æ¡ˆåˆ†åˆ«æ˜¯ï¼š åŸºç±»éƒ¨åˆ†åˆå§‹åŒ–ç”±åŸºç±»æ„é€ å‡½æ•°è´Ÿè´£ï¼› æ´¾ç”Ÿç±»æ„é€ å‡½æ•°åªè´Ÿè´£æ´¾ç”Ÿç±»æ‰©å±•éƒ¨åˆ†åˆå§‹åŒ–ï¼› C++ åˆ†é˜¶æ®µæ„é€ æ´¾ç”Ÿç±»ï¼Œä»æœ€åŸºç±»ï¼ˆåœ¨ç»§æ‰¿æ ‘çš„é¡¶éƒ¨ï¼‰å¼€å§‹ï¼Œåˆ°æœ€å­ç±»ï¼ˆåœ¨ç»§æ‰¿æ ‘çš„åº•éƒ¨ï¼‰ç»“æŸã€‚ éªŒè¯ä¸€ä¸‹ã€‚ 12345678910111213141516171819202122232425262728293031323334class A&#123;public: A()&#123; std::cout &lt;&lt; &quot;A\\n&quot;; &#125;&#125;;class B: public A&#123;public: B()&#123; std::cout &lt;&lt; &quot;B\\n&quot;; &#125;&#125;;class C: public B&#123;public: C()&#123; std::cout &lt;&lt; &quot;C\\n&quot;; &#125;&#125;;class D: public C&#123;public: D()&#123; std::cout &lt;&lt; &quot;D\\n&quot;; &#125;&#125;;int main()&#123; std::cout &lt;&lt; &quot;æ„é€  A: \\n&quot;; A a; std::cout &lt;&lt; &quot;æ„é€  B: \\n&quot;; B b; std::cout &lt;&lt; &quot;æ„é€  C: \\n&quot;; C c; std::cout &lt;&lt; &quot;æ„é€  D: \\n&quot;; D d;&#125; è¾“å‡ºï¼š 1234567891011121314æ„é€  Aï¼šAæ„é€  Bï¼šA Bæ„é€  Cï¼šA B Cæ„é€  Dï¼šA B C D å¯ä»¥çœ‹åˆ°ï¼Œ C++ æ€»æ˜¯é¦–å…ˆæ„é€ â€œç¬¬ä¸€ä¸ªâ€æˆ–â€œæœ€åŸºâ€ç±»ï¼Œç„¶åå®ƒæŒ‰é¡ºåºéå†ç»§æ‰¿æ ‘å¹¶æ„é€ æ¯ä¸ªæ´¾ç”Ÿç±»ï¼› åŸºç±»æ„é€ å‡½æ•°å’Œæ´¾ç”Ÿç±»æ„é€ å„è‡ªè´Ÿè´£ç›¸åº”çš„éƒ¨åˆ†ã€‚ é¡ºä¾¿ä¸€æï¼Œææ„å‡½æ•°æ‰§è¡Œé¡ºåºæ°æ°å’Œæ„é€ å‡½æ•°ç›¸åã€‚ ä¸ºä»€ä¹ˆè¦æŒ‰è¿™ç§æ„é€ é¡ºåºï¼Ÿ å­ç±»ç»§æ‰¿äº†çˆ¶ç±»ï¼Œäº†è§£çˆ¶ç±»çš„ä¸€åˆ‡ï¼Œä¸”ç»å¸¸éœ€ä½¿ç”¨çˆ¶ç±»çš„æˆå‘˜æˆ–å‡½æ•°ï¼Œä½†çˆ¶ç±»å¯¹å­ç±»ä¸€æ— æ‰€çŸ¥ã€‚ä¸ºäº†å®‰å…¨ï¼Œé¦–å…ˆå®ä¾‹åŒ–çˆ¶ç±»å¯ä»¥ç¡®ä¿çˆ¶ç±»æˆå‘˜åœ¨è¢«æ´¾ç”Ÿç±»ä½¿ç”¨å‰ï¼Œå°±å·²ç»å‡†å¤‡å¥½äº†ã€‚ å¦ä¸€æ–¹é¢ï¼Œè¿„ä»Šä¸ºæ­¢ï¼Œæ´¾ç”Ÿç±»å®ä¾‹åŒ–æ—¶çš„åŸºç±»æ„é€ å‡½æ•°éƒ½æ˜¯éšå¼è°ƒç”¨çš„ã€‚ å¦‚æœæˆ‘ä»¬æƒ³åœ¨æ´¾ç”Ÿç±»åˆå§‹åŒ–åŸºç±»æˆå‘˜ï¼Œè¯¥å¦‚ä½•å®ç°ï¼Ÿ èƒ½ä¸èƒ½ç›´æ¥æ˜¾å¼è°ƒç”¨åŸºç±»æ„é€ å‡½æ•°åˆå§‹åŒ–ï¼Ÿ åˆå§‹åŒ–åŸºç±»æˆå‘˜ ä¸ºäº†æ–¹ä¾¿è¯´æ˜ï¼Œå…ˆå°†åŸºç±»æˆå‘˜m_id å£°æ˜ä¸ºpublicï¼Œè¯•æƒ³å¦‚ä½•åœ¨æ´¾ç”Ÿç±»ä¸­å¯¹å…¶åˆå§‹åŒ–ï¼Ÿ 12345678910111213#include &lt;iostream&gt;class Base&#123;public: int m_id &#123;&#125;; Base(int id=0) : m_id&#123; id &#125; &#123; std::cout&lt;&lt; &quot;In base, m_id = &quot; &lt;&lt; id &lt;&lt;std::endl; &#125; int getId() const &#123; return m_id; &#125;&#125;; æ—¢ç„¶m_idå·²è¢«å£°æ˜ä¸ºpublicï¼Œå®¹æ˜“æƒ³åˆ°ä¸¤ç§åˆå§‹åŒ–æ–¹å¼ï¼š æ´¾ç”Ÿç±»æ„é€ å‡½æ•°æˆå‘˜åˆ—è¡¨åˆå§‹åŒ–ï¼› æ´¾ç”Ÿç±»æ„é€ å‡½æ•°ä½“å†…èµ‹å€¼ã€‚ ä½†ç¬¬ä¸€ç§æ–¹å¼ä¸è¢«C++å…è®¸ï¼Œå› ä¸ºç¬¬ä¸€ç§æˆå‘˜åˆ—è¡¨æ–¹å¼ä¼šå¯¼è‡´m_id åœ¨åŸºç±»å’Œæ´¾ç”Ÿç±»åˆå§‹åŒ–ä¸¤æ¬¡ï¼Œè€Œåˆå§‹åŒ–åªèƒ½æœ‰ä¸€æ¬¡ã€‚ 123456789101112class Derived: public Base&#123;private: double m_cost &#123;&#125;;public: // errorï¼Œä¸è¢«å…è®¸ Derived(double cost, int id): m_id&#123; id &#125;,m_cost&#123; cost &#125; &#123; std::cout&lt;&lt; &quot;In Derived, m_cost = &quot; &lt;&lt; m_cost &lt;&lt;std::endl; &#125; double getCost() const &#123; return m_cost; &#125;&#125;; ç¬¬äºŒç§æ–¹å¼æ˜¯å…è®¸çš„ï¼Œå› ä¸ºè¿™æ˜¯é‡æ–°èµ‹å€¼ï¼Œä¸æ˜¯åˆå§‹åŒ–ï¼š 123456789101112class Derived: public Base&#123;private: double m_cost &#123;&#125;;public: Derived(double cost, int id): m_cost&#123; cost &#125; &#123; m_id&#123; id &#125;; // ok std::cout&lt;&lt; &quot;In Derived, m_cost = &quot; &lt;&lt; m_cost &lt;&lt;std::endl; &#125; double getCost() const &#123; return m_cost; &#125;&#125;; ä½†è¿™æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š ä¸å¤Ÿä¼˜é›…ï¼Œæ˜¯é‡æ–°èµ‹å€¼ï¼Œè€Œä¸æ˜¯ç›´æ¥åˆå§‹åŒ–ï¼› å¦‚æœm_id æ˜¯private/const/å¼•ç”¨ï¼Œè¿™ç§æ–¹å¼ä¹Ÿæ— æ³•ä½¿ç”¨ã€‚ å¦‚æœå¯ä»¥åœ¨æ´¾ç”Ÿç±»ç›´æ¥è°ƒç”¨åŸºç±»æ„é€ å‡½æ•°åˆå§‹åŒ–ï¼Œé‚£è¯¥å¤šå¥½å‘€ï¼ ç°åœ¨æˆ‘ä»¬åœ¨æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°æˆå‘˜åˆ—è¡¨ä¸­ï¼Œæ˜¾ç¤ºè°ƒç”¨äº†åŸºç±»æ„é€ å‡½æ•°ã€‚ 123456789101112131415161718192021222324252627282930313233#include &lt;iostream&gt;class Base&#123;private: // ç§æœ‰ int m_id &#123;&#125;;public: Base(int id=0) : m_id&#123; id &#125; &#123; std::cout&lt;&lt; &quot;In base, m_id = &quot; &lt;&lt; id &lt;&lt;std::endl; &#125; int getId() const &#123; return m_id; &#125;&#125;;class Derived: public Base&#123;private: double m_cost &#123;&#125;;public: // ç›´æ¥è°ƒç”¨åŸºç±»æ„é€ å‡½æ•°Base&#123; id &#125;åˆå§‹åŒ– Derived(double cost, int id): Base&#123; id &#125;,m_cost&#123; cost &#125; &#123; std::cout&lt;&lt; &quot;In Derived, m_cost = &quot; &lt;&lt; m_cost &lt;&lt;std::endl; &#125; double getCost() const &#123; return m_cost; &#125;&#125;;int main()&#123; Derived d&#123;2.33,1&#125;;&#125; è¾“å‡ºï¼š 12In base, m_id = 1In Derived, m_cost = 2.33 ä»¥ä¸Šå®Œç¾è§£å†³äº†åˆå§‹åŒ–åŸºç±»æˆå‘˜çš„éœ€æ±‚ï¼Œä½†æ³¨æ„ï¼š åŸºç±»æ„é€ å‡½æ•°Base&#123; id &#125;åªè¢«æ‰§è¡Œäº†ä¸€æ¬¡ï¼Œä¾æ—§æ˜¯ä»ç»§æ‰¿é“¾é¡¶éƒ¨å¾€ä¸‹æ„é€ ï¼Œæ´¾ç”Ÿç±»åªæ˜¯æŒ‡å®šäº†åŸºç±»æ„é€ å‡½æ•°çš„å‚æ•°ï¼› æˆå‘˜åˆ—è¡¨çš„åŸºç±»æ„é€ å‡½æ•°Base&#123; id &#125; çš„é¡ºåºæ— å…³ç´§è¦ï¼Œæ— è®ºå¦‚ä½•ï¼ŒåŸºç±»æ„é€ å‡½æ•°æ€»æ˜¯ç‡å…ˆæ‰§è¡Œçš„ï¼š é¦–å…ˆæ‰§è¡ŒåŸºç±»æ„é€ å‡½æ•°ï¼ˆæ ¹æ®æ´¾ç”Ÿç±»ä¸­æŒ‡å®šçš„å‚æ•°ï¼‰ï¼› ç„¶åæ‰§è¡Œæ´¾ç”Ÿç±»æ„é€ å‡½æ•°æˆå‘˜åˆ—è¡¨åˆå§‹åŒ–ï¼› æœ€åæ‰§è¡Œæ´¾ç”Ÿç±»æ„é€ å‡½æ•°ä½“å†…ä»£ç ã€‚ 7.1.4 å¤šé‡ç»§æ‰¿ å¤šé‡ç»§æ‰¿ä¼˜ç¼ºç‚¹ åœ¨å‰é¢æˆ‘ä»¬æåˆ°ï¼š å¾ˆå¤šè¯­è¨€å¦‚Javaæ˜¯ä¸å…è®¸å¤šé‡ç»§æ‰¿çš„ï¼ŒC++ä¸ºä»€ä¹ˆè¦å…è®¸å¤šé‡ç»§æ‰¿ï¼Œå¤šé‡ç»§æ‰¿ä¼šå¸¦æ¥ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ è¿™æ˜¯ä¸ªå¾ˆæœ‰æ„æ€çš„é—®é¢˜ï¼Œæˆ‘ä»¬æ¥è¯´è¯´å¤šé‡ç»§æ‰¿çš„ä¼˜ç¼ºç‚¹ã€‚ å¤šé‡ç»§æ‰¿çš„ä¼˜ç‚¹å¾ˆæ˜æ˜¾ï¼šç®€å•ï¼Œæ¸…æ™°ï¼Œæ›´æœ‰åˆ©äºå¤ç”¨ã€‚ ä½†å®ƒçš„ç¼ºç‚¹åŒæ ·æ˜æ˜¾ï¼š äºŒä¹‰æ€§ã€‚å¦‚æœä¸¤ä¸ªåŸºç±»ï¼ˆBã€Cï¼‰å…·æœ‰åŒåçš„æ–¹æ³•ï¼ˆdo()ï¼‰ï¼Œåœ¨æ´¾ç”Ÿç±»ä¸­å¿…é¡»æŒ‡å®šæ­¤æ–¹æ³•æ¥æºäºå“ªä¸ªåŸºç±»ã€‚å¦‚ä¸‹å›¾ï¼š 123D d&#123;&#125;;d.do(); // errord.B::do(); // ::èŒƒå›´é™å®šï¼Œok è±å½¢ç»§æ‰¿ã€‚ä½†å¦‚æœæ˜¯è±å½¢ç»§æ‰¿ï¼Œä¸ä½†ä¼šå¸¦æ¥äºŒä¹‰æ€§é—®é¢˜ï¼Œè¿˜ä¼šä½¿å¾—æ´¾ç”Ÿç±»ä¸­å…·æœ‰é‡å¤æ‹·è´çš„é—®é¢˜ã€‚ å¦‚ä¸‹å›¾ï¼š æ´¾ç”Ÿç±»Dä¸­æ‹·è´äº†ä¸¤ä»½Açš„å‰¯æœ¬ï¼å¦ä¸€æ–¹é¢è¿™ä¹ŸåŠ é‡äº†äºŒä¹‰æ€§é—®é¢˜ï¼Œå› ä¸ºa ä¹Ÿå­˜åœ¨äº†äºŒä¹‰æ€§é—®é¢˜ï¼Œè™½ç„¶å®ƒåªåœ¨Aä¸­è¢«å®šä¹‰äº†ä¸€æ¬¡ã€‚ 123D d&#123;&#125;;d.a(); // errord.B::a(); // ::èŒƒå›´é™å®šï¼Œok èŒƒå›´é™å®šè™½ç„¶èƒ½è§£å†³ï¼Œä½†ç»ˆç©¶ä¸æ˜¯å¥½æ–¹æ³•ï¼Œä¸å¤Ÿä¼˜é›…ï¼Œé‡å¤æ•°æ®æ‹·è´çš„é—®é¢˜ä¹Ÿä¾æ—§å­˜åœ¨ã€‚ è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆC#å’ŒJavaä¸­ä¸æ”¯æŒç±»å¤šç»§æ‰¿ï¼Œè€Œæ˜¯ä½¿ç”¨ç±»å•ç»§æ‰¿å’Œæ¥å£å¤šç»§æ‰¿è®¾è®¡æ›¿ä»£ç±»å¤šç»§æ‰¿ã€‚ æ—¢ç„¶C++é€‰æ‹©äº†å¤šé‡ç»§æ‰¿ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹äºŒä¹‰æ€§å’Œé‡å¤æ‹·è´çš„é—®é¢˜å¦‚ä½•è§£å†³ï¼š äºŒä¹‰æ€§ï¼šå¯é€šè¿‡èŒƒå›´é™å®šç¬¦:: æ¶ˆé™¤äºŒä¹‰æ€§ï¼› é‡å¤æ‹·è´ï¼šå­˜åœ¨è±å½¢ç»§æ‰¿ä¸­ï¼Œé€šå¸¸ä½¿ç”¨è™šç»§æ‰¿æ¥è§£å†³ã€‚ è™šç»§æ‰¿ ç±»é€šè¿‡è™šç»§æ‰¿å¯ä»¥æŒ‡å‡ºå®ƒå¸Œæœ›å…±äº«çš„è™šåŸºç±»ï¼Œå¯¹äºè™šåŸºç±»ï¼Œæ— è®ºåœ¨æ´¾ç”Ÿå±‚æ¬¡ä¸­è¢«ç»§æ‰¿å¤šå°‘æ¬¡ï¼Œéƒ½åªå­˜åœ¨ä¸€ä»½å…±äº«çš„åŸºç±»å­å¯¹è±¡ã€‚ åœ¨ä¸Šä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è®©ç±»Bã€Céƒ½è™šç»§æ‰¿Aï¼Œè¿™æ ·Aåœ¨Dä¸­åªä¼šæœ‰ä¸€æ¬¡æ‹·è´ã€‚ å®é™…ç¼–ç éªŒè¯ï¼š 123456789101112131415161718192021222324class A&#123; public: int a&#123;&#125;;&#125;;class B : virtual public A&#123; public: void doSomething() &#123;&#125;&#125;;class C : virtual public A&#123; public: void doSomething() &#123;&#125;&#125;;class D : public B, public C&#123;&#125;;int main()&#123; D d&#123;&#125;; d.a; // okï¼Œé¿å…äº†é‡å¤æ‹·è´ï¼Œä¹Ÿé—´æ¥æ¶ˆé™¤äº†Aä¸­æˆå‘˜çš„äºŒä¹‰æ€§&#125; Bã€Cã€Då…±äº«äº†åŒä¸€ä»½Açš„å‰¯æœ¬ã€‚ æ³¨æ„ï¼Œè™šç»§æ‰¿åªæ˜¯é¿å…äº†é‡å¤æ‹·è´çš„é—®é¢˜ï¼Œå¹¶æ²¡æœ‰æ¶ˆé™¤äºŒä¹‰æ€§ï¼ŒBã€Cä¸­doSomething ä¾æ—§å­˜åœ¨äºŒä¹‰æ€§é—®é¢˜ã€‚ æˆ‘ä»¬ç†Ÿæ‚‰çš„istreamå’Œostream ä¹Ÿæ˜¯è™šç»§æ‰¿äºios ï¼š 123class istream : virtual public ios &#123;...&#125;;class ostream : virtual public ios &#123;...&#125;;class iostream : public istream, public ostream &#123;...&#125;; æœ€åæˆ‘ä»¬å†æ¥æ¢è®¨ä¸‹ï¼Œè™šç»§æ‰¿å’Œéè™šç»§æ‰¿æ–¹å¼çš„æ„é€ å‡½æ•°æ‰§è¡Œé¡ºåºï¼š éè™šç»§æ‰¿ï¼Œæ„é€ å‡½æ•°æ‰§è¡Œé¡ºåºï¼šAâ†’Bâ†’Aâ†’Câ†’Dï¼› è™šç»§æ‰¿ï¼Œæ„é€ å‡½æ•°æ‰§è¡Œé¡ºåºï¼šAâ†’Bâ†’Câ†’Dã€‚ å¯è§éè™šç»§æ‰¿ä¸­ï¼ŒAè¢«åˆå§‹åŒ–äº†ä¸¤æ¬¡ï¼Œè™šç»§æ‰¿ä¸­Aç¡®å®åªè¢«åˆå§‹åŒ–äº†ä¸€æ¬¡ã€‚ ææ„å‡½æ•°æ‰§è¡Œé¡ºåºæ°ç›¸åï¼š éè™šç»§æ‰¿ï¼Œææ„å‡½æ•°æ‰§è¡Œé¡ºåºï¼šDâ†’Câ†’Aâ†’Bâ†’Aï¼› è™šç»§æ‰¿ï¼Œææ„å‡½æ•°æ‰§è¡Œé¡ºåºï¼šDâ†’Câ†’Bâ†’Aã€‚ æœ€ä½³å®è·µ äº‹å®è¯æ˜ï¼Œå¤§å¤šæ•°å¯ä»¥ä½¿ç”¨å¤šé‡ç»§æ‰¿è§£å†³çš„é—®é¢˜ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å•ç»§æ‰¿æ¥è§£å†³ã€‚ å¦ä¸€æ–¹é¢ï¼Œå¾ˆå¤šç°ä»£ç¼–ç¨‹è¯­è¨€ï¼Œå¦‚ Java å’Œ C#ï¼Œå°†ç±»é™åˆ¶ä¸ºæ™®é€šç±»çš„å•ç»§æ‰¿ï¼Œåªå…è®¸æ¥å£ç±»çš„å¤šç»§æ‰¿ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡é¿å…åœ¨C++ä¸­ä½¿ç”¨å¤šé‡ç»§æ‰¿ï¼Œé™¤éï¼š è¿™ä¸ªæ—¶å€™å¤šç»§æ‰¿æ˜¯æœ€å¥½çš„é€‰æ‹©ï¼› è¢«å¤šç»§æ‰¿çš„ç±»æ˜¯è®¾è®¡è‰¯å¥½çš„æ¥å£ç±»ã€‚ 7.2 è™šå‡½æ•° é¦–å…ˆå›å¿†ä¸‹C++çš„å¤šæ€æ€§è¡Œä¸ºè¡¨ç°ï¼šå¯¹è±¡åœ¨ä¸åŒä¸Šä¸‹æ–‡ç¯å¢ƒä¼šè¡¨ç°å‡ºä¸åŒçš„ç‰¹æ€§ã€‚ è¿™æœ‰ç‚¹æŠ½è±¡ï¼Œæˆ‘ä»¬å…·ä½“ä¸€ç‚¹ã€‚ C++æ”¯æŒä¸¤ç§å¤šæ€ï¼š ç¼–è¯‘æ—¶å¤šæ€ï¼ˆé™æ€å¤šæ€ï¼‰ï¼šé€šè¿‡é‡è½½å‡½æ•°å®ç°ï¼Œå‡½æ•°åœ°å€æ—©ç»‘å®šï¼Œç¼–è¯‘æœŸé—´å°±å¯ä»¥ç¡®å®šå‡½æ•°çš„é“¾æ¥åœ°å€ï¼› è¿è¡Œæ—¶å¤šæ€ï¼ˆåŠ¨æ€å¤šæ€ï¼‰ï¼šé€šè¿‡è™šå‡½æ•°å®ç°ï¼Œå‡½æ•°åœ°å€æ™šç»‘å®šï¼Œè¿è¡ŒæœŸé—´æ ¹æ®è™šè¡¨æ¥ç¡®å®šå‡½æ•°é“¾æ¥åœ°å€ã€‚ é‡è½½çš„åŒåå‡½æ•°ï¼Œåœ¨å‡½æ•°ç­¾åä¸åŒï¼ˆä¸åŒçš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼‰ï¼Œä¼šè°ƒç”¨ä¸åŒçš„å‡½æ•°ï¼ˆè¡¨ç°ä¸åŒçš„è¡Œä¸ºï¼‰ã€‚ è™šå‡½æ•°çš„ä½œç”¨ä¾¿ä½“ç°åœ¨C++çš„åŠ¨æ€å¤šæ€æ€§ä¸Šï¼Œå¯ä»¥æ ¹æ®è°ƒç”¨å‡½æ•°çš„å¯¹è±¡çš„ç±»å‹ï¼ˆä¸åŒçš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼‰ï¼Œä¼šæ‰§è¡Œä¸åŒçš„è™šå‡½æ•°ï¼ˆè¡¨ç°ä¸åŒçš„è¡Œä¸ºï¼‰ã€‚ å…¶å¤§è‡´å®ç°è¿‡ç¨‹å¦‚ä¸‹ï¼š é¦–å…ˆï¼Œåœ¨åŸºç±»çš„å‡½æ•°å‰åŠ ä¸Švirtualå…³é”®å­—ï¼Œä¹Ÿå°±æ˜¯è™šå‡½æ•°ï¼ŒåŒæ—¶åœ¨æ´¾ç”Ÿç±»ä¸­é‡å†™è¯¥å‡½æ•°ï¼› ç„¶åï¼Œå£°æ˜åŸºç±»ç±»å‹çš„æŒ‡é’ˆï¼ˆæˆ–å¼•ç”¨ï¼‰ï¼Œè¯¥æŒ‡é’ˆï¼ˆæˆ–å¼•ç”¨ï¼‰ä¼šæŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡ï¼› æœ€åï¼Œä½¿ç”¨åŸºç±»æŒ‡é’ˆï¼ˆæˆ–å¼•ç”¨ï¼‰è°ƒç”¨è¯¥è™šå‡½æ•°ï¼Œå¦‚æœæŒ‡å‘å¯¹è±¡ç±»å‹æ˜¯æ´¾ç”Ÿç±»ï¼Œå°±è°ƒç”¨æ´¾ç”Ÿç±»çš„å‡½æ•°ï¼›å¦‚æœæŒ‡å‘å¯¹è±¡ç±»å‹æ˜¯åŸºç±»ï¼Œå°±è°ƒç”¨åŸºç±»çš„å‡½æ•° ã€‚ è¿™ä¾¿é€šè¿‡è™šå‡½æ•°å®ç°äº†C++åŠ¨æ€å¤šæ€æ€§ï¼Œä¸‹é¢æˆ‘ä»¬å¼€å§‹å…·ä½“æ¢è®¨ï¼š åŸºç±»æŒ‡é’ˆ/å¼•ç”¨æŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ è™šå‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿè™šå‡½æ•°å®ç°å¤šæ€çš„åŸç†ï¼Ÿ ææ„å‡½æ•°ã€æ„é€ å‡½æ•°å’Œè™šå‡½æ•°ä¹‹é—´çš„ä¸€äº›é—®é¢˜ï¼Ÿ åŸºç±»æŒ‡é’ˆ/å¼•ç”¨â†”å’Œæ´¾ç”Ÿç±»æŒ‡é’ˆ/å¼•ç”¨ä¹‹é—´çš„è½¬æ¢æ˜¯å®‰å…¨çš„å—ï¼Ÿï¼ˆä¸Šè¡Œè½¬æ¢å’Œä¸‹è¡Œè½¬æ¢ï¼‰ å¯¹è±¡åˆ‡ç‰‡å¼•å‘çš„ä¸€äº›ç¼–ç é—®é¢˜ã€‚ 7.2.1 æŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡çš„åŸºç±»æŒ‡é’ˆå’Œå¼•ç”¨ è®¤è¯†åŸºç±»æŒ‡é’ˆå’Œå¼•ç”¨ æˆ‘ä»¬äº†è§£åˆ°ï¼Œæ´¾ç”Ÿç±»ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š ç»§æ‰¿çš„åŸºç±»éƒ¨åˆ†ï¼› è‡ªèº«æ‰©å±•çš„éƒ¨åˆ†ã€‚ å¥½äº†ï¼Œæ„‰å¿«åœ°æ¥å—è¿™ä¸ªè®¾å®šåã€‚ä¸‹é¢ç±»å®ä¾‹å†…å­˜å¸ƒå±€å°±å¾ˆå®¹æ˜“æ¥å—äº†ï¼š æ³¨æ„ï¼Œæ´¾ç”Ÿç±»Derivedå®ä¾‹åŒ–åå†…å­˜å¸ƒå±€ï¼šå…ˆæ‹·è´åŸºç±»éƒ¨åˆ†ï¼Œå†æ‰©å±•äº†è‡ªèº«éƒ¨åˆ†ï¼Œæ‰€ä»¥åŸºç±»éƒ¨åˆ†åœ¨å‰ã€‚ ç°åœ¨æœ‰ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„é—®é¢˜ï¼š ç†è®ºä¸Šï¼Œæ´¾ç”Ÿç±»å¯¹è±¡æ˜¯åŒ…å«åŸºç±»éƒ¨åˆ†çš„ï¼Œé‚£åŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨èƒ½æŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡å—ï¼Ÿå¦‚æœèƒ½ï¼ŒåŸºç±»æŒ‡é’ˆèƒ½ä½¿ç”¨æ´¾ç”Ÿç±»æ‰©å±•éƒ¨åˆ†çš„æˆå‘˜å—ï¼Ÿ ç­”æ¡ˆåˆ†åˆ«æ˜¯ï¼šèƒ½ï¼Œä¸èƒ½ã€‚ 123456789101112131415int main()&#123; Derived derived&#123; 5 &#125;; // åŸºç±»æŒ‡é’ˆå’Œå¼•ç”¨éƒ½å¯ä»¥æŒ‡å‘æ´¾ç”Ÿç±» Base&amp; rBase = derived ; Base* pBase = &amp;derived; // åŸºç±»æŒ‡é’ˆåªèƒ½è°ƒç”¨åŸºç±»çš„æ–¹æ³•ï¼ˆåŸºç±»å¼•ç”¨åŒç†ï¼‰ pBase-&gt;getName(); // baseï¼Œè°ƒç”¨çš„æ˜¯åŸºç±»æ–¹æ³• pBase-&gt;getValue(); // 5 //pBase-&gt;getValueDoubled(); // errorï¼Œä¸èƒ½è°ƒç”¨æ´¾ç”Ÿç±»çš„æ–¹æ³• return 0;&#125; å¦ä¸€æ–¹é¢ï¼Œä½ å¯èƒ½ä¼šè¯´è¿™ä¸ªä¾‹å­å¾ˆå‚»ï¼šâ€œå½“æˆ‘èƒ½ä½¿ç”¨æ´¾ç”Ÿå¯¹è±¡æ—¶ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨æŒ‡å‘æ´¾ç”Ÿå¯¹è±¡åŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨ï¼Ÿâ€ è¿™æ¶‰åŠåˆ°å¤šæ€çš„â€œæ¥å£é‡ç”¨åŸåˆ™â€ï¼šä¸è®ºä¼ é€’è¿‡æ¥çš„ç©¶ç«Ÿæ˜¯ç±»çš„å“ªä¸ªå¯¹è±¡ï¼Œå‡½æ•°éƒ½èƒ½å¤Ÿé€šè¿‡åŒä¸€ä¸ªæ¥å£è°ƒç”¨åˆ°é€‚åº”å„è‡ªå¯¹è±¡çš„å®ç°æ–¹æ³•ã€‚ æˆ‘ä»¬ä¸¾ä¾‹è¯´æ˜ã€‚ ä¸ºä»€ä¹ˆéœ€è¦åŸºç±»æŒ‡é’ˆå’Œå¼•ç”¨ï¼Ÿ å‡è®¾æœ‰å¤šä¸ªæ´¾ç”Ÿç±»ï¼šDerivedã€Derived1ã€Derived2â€¦ç­‰éƒ½æ´¾ç”ŸäºBaseã€‚ç°åœ¨å¤–éƒ¨æœ‰ä¸€ä¸ªå‡½æ•°printNameè¦æ±‚æ‰“å°å®ƒä»¬çš„åå­—ï¼š 1234void printName(Derived* pd)&#123; std::cout&lt;&lt;pd-&gt;getName()&lt;&lt;std::endl;&#125; ä½†æ˜¯è¿™ä¸ªå‡½æ•°åªèƒ½æ‰“å°Derivedçš„åå­—ï¼ŒDerived1ç­‰ä¸èƒ½æ‰“å°ï¼Œå› ä¸ºDerivedå’ŒDerived1ç­‰æ˜¯ä¸åŒç±»å‹ï¼š 12345Derived d;printName(d); // okDerived1 d1;printName(d1); // errorï¼ŒDerivedç±»å‹ä¸åŒ¹é…Derived1 æ‰€ä»¥ï¼Œä¸ºäº†Derived1ã€Derived2â€¦DerivedNï¼Œéƒ½èƒ½è¢«æ‰“å°ï¼Œæˆ‘ä»¬ä¸å¾—ä¸å†å®šä¹‰Nä¸ªåŸºæœ¬ä¸€æ ·çš„printNameå‡½æ•°ï¼š 123456789void printName(Derived1* pd)&#123; std::cout&lt;&lt;pd-&gt;getName()&lt;&lt;std::endl;&#125;void printName(Derived2* pd)&#123; std::cout&lt;&lt;pd-&gt;getName()&lt;&lt;std::endl;&#125;... è¿™è‚¯å®šä¼šè®©ä½ æœ‰ç‚¹æ— å¥ˆï¼Œå¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬çŸ¥é“åŸºç±»æŒ‡é’ˆï¼ˆæˆ–å¼•ç”¨ï¼‰å¯ä»¥æ¥å—æ´¾ç”Ÿç±»å¯¹è±¡ã€‚äºæ˜¯ä¸€åˆ‡ä¾¿ä¸ç”¨è¿™ä¹ˆéº»çƒ¦ï¼š 123456789101112void printName(Base* pBase)&#123; std::cout&lt;&lt;pBase-&gt;getName()&lt;&lt;std::endl;&#125;Derived d;Derived1 d1;Derived2 d2;printName(d); // ok, æ‰“å°ï¼šBaseprintName(d1); // ok, æ‰“å°ï¼šBaseprintName(d2); // ok, æ‰“å°ï¼šBase ä½†ç»†å¿ƒçš„ä½ ä¹Ÿæ³¨æ„åˆ°ï¼Œæ‰“å°å…¨éƒ½æ˜¯åŸºç±»çš„åï¼šå³è°ƒç”¨çš„æ˜¯åŸºç±»çš„getNameå‡½æ•°ï¼Œè€Œä¸æ˜¯æ´¾ç”Ÿç±»çš„getName å‡½æ•°ã€‚æ˜¾ç„¶ï¼Œæ­¤æ—¶å¹¶æ²¡æœ‰ä½“ç°ç±»çš„åŠ¨æ€å¤šæ€æ€§ï¼Œå› ä¸ºgetNameå‡½æ•°çš„é“¾æ¥åœ°å€åœ¨ç¼–è¯‘æ—¶ä¾¿ç¡®å®šäº†ï¼Œé“¾æ¥çš„æ˜¯åŸºç±»çš„getNameå‡½æ•°åœ°å€ã€‚ è¿™ä¹Ÿå°±æ˜¯æ—©ç»‘å®šï¼Œå¦‚ä¸‹å›¾ã€‚ â†‘å¯ä»¥çœ‹åˆ°ï¼Œç¼–è¯‘ä¹‹åï¼ŒgetName åœ¨æ±‡ç¼–ä»£ç ä¸­å·²è¢«æ›¿æ¢ä¸ºç¬¦å·ï¼š _ZNK4Base7getNameB5cxx11Ev ï¼Œå¯¹åº”è°ƒç”¨åœ°å€ä¸º400c02ã€‚ ä½†å¦‚æœgetNameæ˜¯è™šå‡½æ•°ä¸€åˆ‡å¼€å§‹å˜å¾—ä¸ä¸€æ ·ã€‚ å¦‚æœåŸºç±»çš„getNameå‡½æ•°è¢«å£°æ˜ä¸ºè™šå‡½æ•°ï¼Œå…¶åœ°å€ä¾¿ä¼šåœ¨è¿è¡Œæ—¶ç»‘å®šä¸ºè°ƒç”¨çš„æ´¾ç”Ÿç±»å¯¹è±¡çš„getNameå‡½æ•°åœ°å€ã€‚è¿›è€Œå®ç°ä¸‹é¢æ•ˆæœï¼š 123printName(d); // ok, æ‰“å°ï¼šDerivedprintName(d1); // ok, æ‰“å°ï¼šDerived1printName(d2); // ok, æ‰“å°ï¼šDerived2 æˆ‘ä»¬å°†ä»ç±»å®ä¾‹åŒ–å†…å­˜å¸ƒå±€å˜åŒ–è§’åº¦è¿›è¡Œå‰–æã€‚ 7.2.2 è™šå‡½æ•°å’Œå¤šæ€ è™šå‡½æ•°å®ç°å¤šæ€ ç»§ç»­å‰é¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬çœ‹çœ‹è™šå‡½æ•°å¦‚ä½•å®ç°å¤šæ€å§ã€‚ ä¸ºäº†æ–¹ä¾¿æè¿°ï¼Œè¿™é‡Œåªå±•ç¤ºäº†æ´¾ç”Ÿç±»Derivedã€Derived1ï¼Œæ³¨æ„æ´¾ç”Ÿç±»çš„ç­¾åã€è¿”å›ç±»å‹è¦å’ŒåŸºç±»å®Œå…¨ä¸€è‡´ï¼ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950#include &lt;string&gt;class Base&#123;protected: int m_value &#123;&#125;;public: Base(int value): m_value&#123; value &#125; &#123; &#125; // åŸºç±»getNameå‡½æ•°è¢«å£°æ˜ä¸ºè™šå‡½æ•° virtual std::string getName() const &#123; return &quot;Base&quot;; &#125; int getValue() const &#123; return m_value; &#125;&#125;;class Derived: public Base&#123;public: Derived(int value): Base&#123; value &#125; &#123; &#125; // æ´¾ç”Ÿç±»getNameå‡½æ•°çš„virtualå¯çœç•¥ virtual std::string getName() const &#123; return &quot;Derived&quot;; &#125; int getValueDoubled() const &#123; return m_value * 2; &#125;&#125;;class Derived1: public Base&#123;public: Derived1(int value): Base&#123; value &#125; &#123; &#125; // æ´¾ç”Ÿç±»getNameå‡½æ•°çš„virtualå¯çœç•¥ virtual std::string getName() const &#123; return &quot;Derived1&quot;; &#125; int getValueDoubled() const &#123; return m_value * 2; &#125;&#125;;void printName(Base* pBase)&#123; std::cout&lt;&lt;pBase-&gt;getName()&lt;&lt;std::endl;&#125;int main()&#123; Derived derived&#123;0&#125;; Derived1 derived1&#123;1&#125;; printName(&amp;derived); // Derivedï¼Œè°ƒç”¨çš„æ˜¯æ´¾ç”Ÿç±»æ–¹æ³•Derived::getName printName(&amp;derived1); // Derived1ï¼Œè°ƒç”¨çš„æ˜¯æ´¾ç”Ÿç±»æ–¹æ³•Derived1::getName return 0;&#125; ç±»ä¼¼çš„ï¼š 1234Base* pBase = &amp;derived;pBase-&gt;getName(); // Derivedï¼ŒåŒä¸ŠpBase = &amp;derived1;pBase-&gt;getName(); // Derived1 å’Œå‰é¢éè™šå‡½æ•°getNameç¼–è¯‘å™¨æ—©åœ¨ç¼–è¯‘æœŸç»‘å®šäº†åŸºç±»å‡½æ•°åœ°å€ä¸åŒï¼Œè™šå‡½æ•°é‡‡ç”¨æ™šç»‘å®šï¼ˆåŠ¨æ€ç»‘å®šï¼‰ï¼šç¼–è¯‘å™¨æ£€æŸ¥åˆ°åŸºç±»çš„getNameå‡½æ•°æ˜¯è™šå‡½æ•°ï¼Œä¸ä¼šæ—©æ—©ç»‘å®šå‡½æ•°getNameåˆ°ç‰¹å®šå…¥å£åœ°å€ã€‚ ä¸‹å›¾è¯´æ˜äº†è¿™ä¸ªä¸åŒã€‚ â†‘æ­¤æ—¶getName å‡½æ•°çš„åœ°å€æ˜¯é€šè¿‡å¯„å­˜å™¨raxçš„å€¼ç¡®å®šçš„ï¼Œrax å­˜æ”¾çš„ä¾¿æ˜¯æ´¾ç”Ÿç±»çš„è™šè¡¨ä¸­getName å‡½æ•°åœ°å€ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„æ™šç»‘å®šã€‚ æ—©ç»‘å®šå’Œæ™šç»‘å®š æœ¬èŠ‚å¯¹æ—©ç»‘å®šå’Œæ™šç»‘å®šè¿›è¡Œæ›´å…¨é¢çš„æ€»ç»“ã€‚ ç¼–è¯‘ç¨‹åºæ—¶ï¼Œç¼–è¯‘å™¨ä¼šå°† C++ ç¨‹åºä¸­çš„æ¯æ¡è¯­å¥è½¬æ¢ä¸ºä¸€è¡Œæˆ–å¤šè¡Œæœºå™¨è¯­è¨€ï¼Œé‡åˆ°å‡½æ•°åˆ™æ˜¯è½¬æ¢ä¸ºä¸€ä¸ªå¯ç”¨åœ°å€ã€‚ 123# å¯¹åº”ä»£ç ï¼šadd(1,2) # è½¬æ¢ä¸ºåœ°å€0x400937call 400937 &lt;_Z3addii&gt; ä½†åœ¨ç¼–è¯‘æœŸé—´ï¼Œæˆ‘ä»¬ä¸ä¸€å®šèƒ½ç¡®å®šè¦è°ƒç”¨å“ªä¸ªå‡½æ•°ï¼Œå¿…é¡»è¦åœ¨è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šã€‚ç”±æ­¤åŒºåˆ†å‡ºäº†æ—©ç»‘å®šå’Œæ™šç»‘å®šï¼š æ—©ç»‘å®šï¼šåœ¨ç¼–è¯‘å™¨æœŸé—´å°±å¯ä»¥ç›´æ¥ç¡®å®šçš„è°ƒç”¨å‡½æ•°ï¼Œä¼šå°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªè°ƒç”¨åœ°å€ï¼Œè¿™å°±æ˜¯æ—©ç»‘å®šï¼› æ™šç»‘å®šï¼šåœ¨ç¼–è¯‘æœŸé—´ä¸å¯ä»¥ç›´æ¥ç¡®å®šçš„è°ƒç”¨å‡½æ•°ï¼Œè¿è¡ŒæœŸé—´æ‰è½¬æ¢ä¸ºå…·ä½“è°ƒç”¨çš„åœ°å€ï¼Œä¾¿æ˜¯æ™šç»‘å®šã€‚ ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼šæˆ‘ä»¬é€šè¿‡å‡½æ•°æŒ‡é’ˆæ ¹æ®æ“ä½œç¬¦æŒ‡å‘ç›¸åº”è¿ç®—å‡½æ•°ï¼Œä½†æ“ä½œç¬¦æ˜¯åœ¨è¿è¡ŒæœŸé—´ç”±ç”¨æˆ·ç¡®å®šçš„ã€‚ æ™šç»‘å®šä¸€èˆ¬é€šè¿‡å‡½æ•°æŒ‡é’ˆå®ç°ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142#include &lt;iostream&gt;int add(int x, int y)&#123; return x + y;&#125;int subtract(int x, int y)&#123; return x - y;&#125;int multiply(int x, int y)&#123; return x * y;&#125;int main()&#123; int op; // æ“ä½œç¬¦ç”±ç”¨æˆ·ç¡®å®š std::cout &lt;&lt; &quot;Enter an operation (0=add, 1=subtract, 2=multiply): &quot;; std::cin &gt;&gt; op; // ï¼ˆ1ï¼‰æ™šç»‘å®š int (*pFcn1)(int, int) = add; // ï¼ˆ2ï¼‰æ™šç»‘å®š int (*pFcn2)(int, int) = nullptr; switch (op) &#123; case 0: pFcn2 = add; break; case 1: pFcn2 = subtract; break; case 2: pFcn2 = multiply; break; &#125; // ï¼ˆ3ï¼‰æ—©ç»‘å®šè°ƒç”¨ add(1, 2); // ï¼ˆ4ï¼‰æ™šç»‘å®šè°ƒç”¨ pFcn1(1, 2); // ï¼ˆ5ï¼‰æ™šç»‘å®šè°ƒç”¨ pFcn2(1, 2); return 0;&#125; æ³¨æ„åˆ°ï¼Œï¼ˆ1ï¼‰ã€ï¼ˆ2ï¼‰éƒ½æ˜¯æ™šç»‘å®šã€‚ å¯¹äºï¼ˆ1ï¼‰ï¼Œç¼–è¯‘å™¨åŒæ ·æ— æ³•åœ¨ç¼–è¯‘æœŸé—´ç¡®å®šï¼Œå‡½æ•°æŒ‡é’ˆpFcn1æŒ‡å‘çš„æ˜¯å“ªä¸ªå‡½æ•°ã€‚å› ä¸ºå‡½æ•°æŒ‡é’ˆï¼š éœ€è¦å…ˆè¯»å–pFcn1 ä¿å­˜çš„å‡½æ•°åœ°å€ æ‰èƒ½å†è·³è½¬åˆ°ç›¸åº”å‡½æ•° æ˜¾ç„¶ï¼Œâ€œè¯»â€è¿™ä¸ªæ“ä½œåœ¨ç¼–è¯‘æœŸé—´æ˜¯æ— æ³•å®Œæˆçš„ï¼Œæ‰€ä»¥pFcn1 æ— æ³•ç¡®å®šæŒ‡å‘å“ªä¸ªå‡½æ•°ã€‚ æœ€åï¼Œæˆ‘ä»¬å†æ¥ç›´è§‚å¯¹æ¯”ä¸‹æ—©ç»‘å®šå’Œæ™šç»‘å®šè°ƒç”¨ï¼ˆ3ï¼‰ã€ï¼ˆ4ï¼‰ã€ï¼ˆ5ï¼‰æ—¶çš„ä¸åŒã€‚ æ—©ç»‘å®šï¼ˆâ‘ å¤„ï¼‰ï¼šå› ä¸ºadd(1,2)å‡½æ•°å¯ç›´æ¥è¢«è°ƒç”¨ï¼Œæ‰€ä»¥åœ¨ç¼–è¯‘æœŸé—´å°±è¢«æ›¿æ¢ä¸ºå‡½æ•°å…¥å£åœ°å€_Z3addiiï¼ˆ0x400877ï¼‰ï¼› æ™šç»‘å®šï¼ˆâ‘¡å¤„ï¼‰ï¼šPFcn1æ— æ³•è¢«ç›´æ¥è°ƒç”¨ï¼Œå…ˆå°†æŒ‡é’ˆPFcn1 ä¿å­˜çš„å‡½æ•°åœ°å€ï¼ˆåœ°å€-16(%rbp)ä¸­çš„å€¼ï¼Œè¿™ä¸ªå€¼æ˜¯è¿è¡Œæ—¶è®¡ç®—çš„ï¼‰å­˜å…¥å¯„å­˜å™¨rax ä¸­ï¼Œæœ€åæ‰æ ¹æ®å¯„å­˜å™¨ä¿å­˜çš„å‡½æ•°åœ°å€è¿›è¡Œè°ƒç”¨ã€‚ æ™šç»‘å®šï¼ˆâ‘¢å¤„ï¼‰ï¼šåŒâ‘¡ã€‚ æœ‰äº†è¿™äº›æ¦‚å¿µï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹æ¢è®¨è™šå‡½æ•°åŠ¨æ€ç»‘å®šå®ç°çš„è¿‡ç¨‹å’ŒåŸç†ï¼Œè¿™ä¸å¯é¿å…æ¶‰åŠåˆ°è™šè¡¨ã€‚ è™šè¡¨ ä¸ºäº†å®ç°è™šå‡½æ•°ï¼ŒC++ ä½¿ç”¨äº†ä¸€ç§ç‰¹æ®Šå½¢å¼çš„åæœŸç»‘å®šï¼Œç§°ä¸ºè™šè¡¨ï¼ˆvtableï¼‰ã€‚ æ¯ä¸ªä½¿ç”¨è™šå‡½æ•°çš„ç±»ï¼ˆæˆ–æ´¾ç”Ÿè‡ªä½¿ç”¨è™šå‡½æ•°çš„ç±»ï¼‰éƒ½æœ‰è‡ªå·±çš„è™šè¡¨ï¼š è™šè¡¨æ˜¯ç¼–è¯‘å™¨æœŸé—´è®¾ç½®çš„é™æ€ä¸€ç»´æ•°ç»„ï¼Œæ•°ç»„æ¯ä¸€ä¸ªæ¡ç›®éƒ½æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œå®ƒæŒ‡å‘è¯¥ç±»çš„è™šå‡½æ•°ï¼› æ¯ä¸ªç±»è¿˜æœ‰ä¸ªéšè—æŒ‡é’ˆ*__vptr ï¼Œå®ƒå¯ä»¥è¢«ç»§æ‰¿ï¼š åœ¨åˆ›å»ºç±»å®ä¾‹æ—¶ï¼Œå¯¹è±¡çš„è™šè¡¨ä¼šè¢«åˆ›å»ºï¼Œ*__vptr ä¼šè¢«ç±»æ„é€ å‡½æ•°åˆå§‹åŒ–æŒ‡å‘è¯¥ç±»çš„è™šè¡¨ï¼ˆå‡†ç¡®æ¥è¯´æ˜¯åœ¨æ„é€ å‡½æ•°ä½“è¿›å…¥å‰åˆå§‹åŒ–çš„ï¼Œä¹Ÿå°±æ˜¯æˆå‘˜åˆ—è¡¨ä¸­ï¼‰ï¼› ç›¸æ¯”*this æŒ‡é’ˆï¼Œ*__vptræ˜¯ä¸€ä¸ªçœŸæ­£çš„æŒ‡é’ˆï¼Œå®ƒä½¿å¾—æ¯ä¸ªç±»çš„å¯¹è±¡éƒ½å¢åŠ äº†ä¸€ä¸ªæŒ‡é’ˆçš„å¤§å°ï¼ˆ4å­—èŠ‚æˆ–8å­—èŠ‚ï¼‰ã€‚ è™šè¡¨å’Œè™šè¡¨æŒ‡é’ˆæ˜¯åœ¨æ„é€ å‡½æ•°ä¸­è¿›è¡Œåˆ›å»ºå’Œåˆå§‹åŒ–çš„ã€‚ çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚ 1234567891011121314151617181920class Base&#123;public: virtual void function1() &#123;&#125;; virtual void function2() &#123;&#125;;&#125;;class D1: public Base&#123;public: virtual void function1() &#123;&#125;; virtual void function3() &#123;&#125;; void function4() &#123;&#125;;&#125;;int main()&#123; D1 d1; Base* dPtr = &amp;d1; dPtr-&gt;function1(); return 0;&#125; æ ¹æ®7.2.1 èŠ‚æˆ‘ä»¬çŸ¥é“ï¼Œç†è®ºä¸ŠåŸºç±»æŒ‡é’ˆdPtråªèƒ½â€œçœ‹åˆ°â€æ´¾ç”Ÿç±»å¯¹è±¡d1çš„åŸºç±»éƒ¨åˆ†ã€‚ä½†è¿™é‡Œå´æˆåŠŸè°ƒç”¨äº†d1 çš„æˆå‘˜è™šå‡½æ•°function1 ã€‚ ä¸‹å›¾ç±»å®ä¾‹å¸ƒå±€å½¢è±¡åœ°è¯´æ˜äº†åŸå› ï¼š åˆ›å»ºæ´¾ç”Ÿç±»D1çš„å®ä¾‹d1 æ—¶ï¼Œå…ˆæ„é€ äº†åŸºç±»Baseå¯¹è±¡éƒ¨åˆ†ï¼Œç„¶åç”¨åŸºç±»æ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ï¼Œè¿™ä¸ªè¿‡ç¨‹è®¾ç½®äº†åŸºç±»å¯¹è±¡çš„è™šæŒ‡é’ˆå’Œè™šè¡¨ï¼› ç„¶åæ„é€ æ´¾ç”Ÿç±»æ‰©å±•éƒ¨åˆ†ï¼Œæ´¾ç”Ÿç±»æ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ï¼š åŸæ¥ç»§æ‰¿çš„åŸºç±»è™šè¡¨ï¼Œä¿®æ”¹base::function1 â†’ ä¸º Derived::function1 ï¼› å¢åŠ æ´¾ç”Ÿç±»è‡ªå·±çš„è™šå‡½æ•°Derived::function3 ï¼› å®Œæˆå…¶å®ƒåˆå§‹åŒ–å·¥ä½œã€‚ å®ä¾‹d1 æ„å»ºå®Œæˆï¼ˆå†…å­˜å¸ƒå±€å¦‚ä¸Šå›¾ï¼‰ã€‚ ç°åœ¨æˆ‘ä»¬å†æ¥è§£é‡Šä¸‹é¢è¿™è¡Œä»£ç å‘ç”Ÿäº†ä»€ä¹ˆï¼š 1dPtr-&gt;function1(); ç¼–è¯‘å™¨è¯†åˆ«å‡ºfunction1 æ˜¯è™šå‡½æ•°ï¼Œå¼€å§‹åˆ†ææ­¤æ—¶è°ƒç”¨å¯¹è±¡ï¼Œæ¥ç¡®å®šä½¿ç”¨å“ªä¸ªç±»å¯¹è±¡çš„è™šæŒ‡é’ˆï¼Œè¿›è€Œç¡®å®šè™šè¡¨æ¥æ‰¾åˆ°ç›¸åº”è™šå‡½æ•°æŒ‡é’ˆåœ°å€ï¼› æŒ‡é’ˆdPtræ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒæ˜¯åŸºç±»çš„æŒ‡é’ˆï¼ˆå¼•ç”¨åŒç†ï¼‰ï¼Œä½†æŒ‡å‘çš„æ˜¯æ´¾ç”Ÿç±»å¯¹è±¡d1â€”â€”è¿™ç§æƒ…å†µï¼Œæ˜¯æ ¹æ®æŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡ç¡®å®šï¼› æ‰€ä»¥ï¼Œæœ€ç»ˆæ ¹æ®dPtr-&gt;d1.*__vptr æ¥æŸ¥æ‰¾å¯¹è±¡d1çš„è™šè¡¨ï¼ˆä¸Šå›¾çš„D1å¯¹è±¡è™šè¡¨ï¼‰ï¼Œä»è€Œè°ƒç”¨äº†D1::function1 ã€‚ è°ƒç”¨function2ç±»ä¼¼ï¼š 1dPtr-&gt;function2(); ç¼–è¯‘å™¨è¯†åˆ«å‡ºfunction2 æ˜¯è™šå‡½æ•° ï¼ŒåŒæ—¶ç¡®å®šäº†å½“å‰è°ƒç”¨å¯¹è±¡æ˜¯d1 ; æ ¹æ®d1è™šæŒ‡é’ˆæŸ¥æ‰¾d1 çš„è™šè¡¨ï¼Œè¿›è€Œæ‰¾åˆ°function2å‡½æ•°æŒ‡é’ˆï¼Œä¸è¿‡è¿™ä¸ªæŒ‡é’ˆä¿å­˜çš„æ˜¯Base è™šè¡¨çš„function2å‡½æ•°åœ°å€ï¼› æœ€ç»ˆè°ƒç”¨äº†Base::function2 ã€‚ ä»æ±‡ç¼–è§’åº¦æ¥éªŒè¯ä¸Šè¿°è¿‡ç¨‹ï¼ˆç²¾ç®€äº†äº›ä»£ç ï¼Œä¸å½±å“é˜…è¯»ï¼‰ï¼š æ³¨æ„å³ä¾§çº¢æ¡†å¤„çš„æ±‡ç¼–ä»£ç ï¼š1.ç¡®å®šå¯¹è±¡ç±»å‹â†’2.æ ¹æ®è™šæŒ‡é’ˆæ‰¾åˆ°è™šè¡¨â†’3.æ ¹æ®è™šè¡¨å’Œåç§»è®¡ç®—è™šå‡½æ•°æŒ‡é’ˆåœ°å€â†’4.æ ¹æ®è™šå‡½æ•°æŒ‡é’ˆè·å–è™šå‡½æ•°è°ƒç”¨åœ°å€â†’5.è°ƒç”¨å‡½æ•°ã€‚ 123456789101112# 1.-8(%rbp)æ˜¯å †ä¸Šd1å†…å­˜é¦–åœ°å€ï¼Œå­˜å…¥å¯„å­˜å™¨raxä¸­movq -8(%rbp), %rax # 2.è·å–d1é¦–åœ°å€ä¿å­˜çš„å€¼ï¼Œå­˜åœ¨å¯„å­˜å™¨raxä¸­ã€‚å› ä¸ºd1å†…å­˜é¦–åœ°å€ï¼Œå³æ˜¯è™šæŒ‡é’ˆåœ°å€ï¼Œæ‰€ä»¥è·å–äº†è™šæŒ‡é’ˆä¿å­˜çš„å†…å®¹ï¼Œå³è™šè¡¨é¦–åœ°å€æ”¾å…¥å¯„å­˜åŒºraxä¸­movq (%rax), %rax # 3.è™šè¡¨é¦–åœ°å€+åç§»8ä¸ªå­—èŠ‚è¡¨ç¤ºfunction2å‡½æ•°æŒ‡é’ˆï¼Œç„¶åå­˜å…¥å¯„å­˜å™¨raxä¸­addq $8, %rax # 4.è·å–å‡½æ•°æŒ‡é’ˆä¿å­˜çš„å€¼ï¼Œå³function2çš„å‡½æ•°åœ°å€ï¼Œæœ€ç»ˆä¿å­˜åœ¨raxä¸­movq (%rax), %rax movq -8(%rbp), %rdxmovq %rdx, %rdi# 5.è°ƒç”¨function2call *%rax è™šå‡½æ•°æ€§èƒ½é—®é¢˜ è¿„ä»Šä¸ºæ­¢ï¼Œæˆ‘ä»¬ä»‹ç»äº†ä¸‰ç§å‡½æ•°è°ƒç”¨æ–¹å¼ï¼š æ—©ç»‘å®šæ–¹å¼ï¼šç›´æ¥è°ƒç”¨ï¼› æ™šç»‘å®šæ–¹å¼ï¼šå‡½æ•°æŒ‡é’ˆä¸è™šå‡½æ•°ã€‚ å…¶ä¸­ï¼Œç›´æ¥è°ƒç”¨æ–¹å¼åªéœ€1æ¬¡å°±å¯ä»¥æ‰¾åˆ°è°ƒç”¨çš„å‡½æ•°ï¼›å‡½æ•°æŒ‡é’ˆéœ€è¦ä¸¤æ¬¡ï¼šè¯»å–å‡½æ•°æŒ‡é’ˆä¿å­˜çš„å‡½æ•°åœ°å€â†’è°ƒç”¨å‡½æ•°ï¼›è€Œè™šå‡½æ•°éœ€è¦ä¸‰æ¬¡ï¼šè¯»å–è™šæŒ‡é’ˆ*__vptr æ‰¾åˆ°è™šè¡¨â†’è¯»å–è™šè¡¨ä¸­è¦è°ƒç”¨çš„è™šå‡½æ•°æŒ‡é’ˆä¿å­˜çš„å‡½æ•°åœ°å€â†’è°ƒç”¨å‡½æ•°ã€‚ æ˜¾ç„¶è¿™å¸¦æ¥äº†é¢å¤–çš„æ—¶é—´å¼€é”€ã€‚ å¦å¤–ï¼Œä»»ä½•ä½¿ç”¨è™šå‡½æ•°çš„ç±»å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª è™šæŒ‡é’ˆ*__vptr ï¼Œæ‰€ä»¥åˆ›å»ºå¯¹è±¡ä¹Ÿéœ€è¦å¤šä½™å†…å­˜å­˜å‚¨è¯¥æŒ‡é’ˆï¼Œè¿™è¿˜å¸¦æ¥é¢å¤–ç©ºé—´å¼€é”€ã€‚ æ‰€ä»¥ï¼Œè™šå‡½æ•°è™½å¥½ä½†ä¸è¦è¿‡åº¦å“¦ã€‚ 7.2.3 è™šå‡½æ•°äºŒä¸‰äº‹ overrideã€finalåŠåå˜ç±»å‹ æœ¬èŠ‚æˆ‘ä»¬å°†ä¸»è¦ä»‹ç»overrideã€finalåŠåå˜è¿”å›ç±»å‹ï¼š overrideï¼šåœ¨æ´¾ç”Ÿç±»å‡½æ•°æ ‡è®°è¯¥å‡½æ•°é‡å†™äº†åŸºç±»çš„è™šå‡½æ•°ï¼Œä»¥é¿å…é‡å†™æ—¶æ´¾ç”Ÿç±»å‡½æ•°çš„è¿”å›ç±»å‹ã€å‡½æ•°ç­¾åå’ŒåŸºç±»è™šå‡½æ•°ä¸ä¸€è‡´çš„ä¹¦å†™é”™è¯¯ï¼› finalï¼šæ˜¾å¼æ ‡è®°æŸä¸ªå‡½æ•°ä¸å¸Œæœ›ä¸é‡å†™ï¼Œå¦‚æœè¢«é‡å†™ç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼› åå˜è¿”å›ç±»å‹ï¼šåŸºç±»å‡½æ•°è¿”å›ç±»å‹æ˜¯åŸºç±»çš„æŒ‡é’ˆï¼ˆæˆ–å¼•ç”¨ï¼‰ï¼Œæ´¾ç”Ÿç±»è¿”å›é‡å†™å‡½æ•°çš„è¿”å›ç±»å‹å¯ä»¥æ˜¯æ´¾ç”Ÿç±»çš„æŒ‡é’ˆï¼ˆæˆ–å¼•ç”¨ï¼‰ï¼Œæ­¤æ—¶ä¾æ—§è§†ä¸ºé‡å†™ã€‚ å…ˆä»overrideè¯´èµ·ã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œæ´¾ç”Ÿç±»è™šå‡½æ•°åªæœ‰åœ¨å…¶ç­¾åå’Œè¿”å›ç±»å‹å®Œå…¨åŒ¹é…æ—¶æ‰è¢«è§†ä¸ºé‡å†™ã€‚ ä¸€ä¸ç•™ç¥å¯èƒ½å°±ä¼šå‡ºé”™ï¼š 1234567891011121314#include &lt;iostream&gt;#include &lt;string&gt;class A&#123;public: virtual std::string getName(int x) &#123; return &quot;A&quot;; &#125; // éå¸¸å‡½æ•°&#125;;class B : public A&#123;public: virtual std::string getName(int x) const &#123; return &quot;B&quot;; &#125; // å¸¸å‡½æ•°&#125;; æ‰€ä»¥ï¼Œä¸ºäº†èƒ½è®©ç¼–è¯‘å™¨å¸®æˆ‘ä»¬è‡ªåŠ¨æ£€æŸ¥ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘åœ¨æ´¾ç”Ÿç±»Bä¸­ï¼Œä½¿ç”¨overrideå…³é”®å­—ã€‚ 12345class B : public A&#123;public: virtual std::string getName(int x) const override &#123; return &quot;B&quot;; &#125; // errorï¼Œç¼–è¯‘å™¨æŠ¥é”™&#125;; æ­¤æ—¶ç¨‹åºäº§ç”Ÿäº†ç¼–è¯‘é”™è¯¯ã€‚ ä½¿ç”¨overrideè¯´æ˜ç¬¦æ²¡æœ‰äº§ç”Ÿæ€§èƒ½æŸå¤±ï¼Œæ‰€ä»¥åœ¨æ´¾ç”Ÿç±»ä¸­çš„é‡å†™å‡½æ•°è¯·å°½é‡ä½¿ç”¨overrideè¯´æ˜ç¬¦ã€‚ finalè¯´æ˜ç¬¦æ¯”è¾ƒç®€å•ä»…ä»…å¸Œæœ›æŸä¸ªå‡½æ•°ä¸ä¼šè¢«é‡å†™ã€‚ å’Œoverrideè¯´æ˜ç¬¦åœ¨åŒä¸€ä½ç½®ä½¿ç”¨ï¼ˆå‡½æ•°ä½“å‰ï¼‰ï¼ŒäºŒè€…ä¹Ÿå¯ä»¥åŒæ—¶å­˜åœ¨ã€‚ 12345678910111213141516171819202122#include &lt;string&gt;class A&#123;public: virtual std::string getName() &#123; return &quot;A&quot;; &#125;&#125;;class B : public A&#123;public: // okay, æ­¤æ—¶getNameå‡½æ•°è¢«finalä¿®é¥° std::string getName() override final &#123; return &quot;B&quot;; &#125; &#125;class C : public B &#123;public: // errorï¼Œæ— æ³•é‡å†™Bä¸­çš„getNameå‡½æ•° std::string_view getName() override &#123; return &quot;C&quot;; &#125;&#125;; finalä¹Ÿå¯ä»¥ä¿®é¥°ç±»è¡¨ç¤ºæ— æ³•ç»§æ‰¿ã€‚ 123class test final // å…¶å®ƒç±»æ— æ³•ç»§æ‰¿test&#123;&#125; æœ€åæ˜¯åå˜è¿”å›ç±»å‹ã€‚ å¦‚æœåŸºç±»è¿”å›ç±»å‹æ˜¯åŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨ï¼Œé‚£ä¹ˆæ´¾ç”Ÿç±»é‡å†™å‡½æ•°çš„è¿”å›ç±»å‹å¯ä»¥æ˜¯æ´¾ç”Ÿç±»çš„å¼•ç”¨æˆ–æŒ‡é’ˆã€‚æ­¤æ—¶ä¾æ—§è§†ä¸ºé‡å†™ã€‚ ä¸è¿‡ï¼Œä¸‹é¢è¿™ä¸ªä¾‹å­è—äº†ç‚¹ç„æœºã€‚ 123456789101112131415161718192021222324252627#include &lt;iostream&gt;#include &lt;string_view&gt;class Base&#123;public: // è¿”å›ç±»å‹æ˜¯ï¼šbase* virtual Base* getThis() &#123; std::cout &lt;&lt; &quot;è°ƒç”¨ Base::getThis()\\n&quot;; return this; &#125; void printType() &#123; std::cout &lt;&lt; &quot;Base\\n&quot;; &#125;&#125;;class Derived : public Base&#123;public: // è¿”å›ç±»å‹æ˜¯Derived*ï¼Œä¾æ—§è§†ä¸ºæ˜¯åŸºç±»getThisçš„é‡å†™ Derived* getThis() override &#123; std::cout &lt;&lt; &quot;è°ƒç”¨ Derived::getThis()\\n&quot;; return this; &#125; void printType() &#123; std::cout &lt;&lt; &quot;Derived\\n&quot;; &#125;&#125;;int main()&#123; Derived d&#123;&#125;; Base* b&#123; &amp;d &#125;; // è¾“å‡ºä¼šæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ b-&gt;getThis()-&gt;printType(); return 0;&#125; è¾“å‡ºï¼š 12è°ƒç”¨ Derived::getThis()Base ç»“æœåˆ†æï¼š b-&gt;getThis()ï¼Œå› ä¸ºgetThis æ˜¯è™šå‡½æ•°ï¼Œæ‰€ä»¥getThis åœ¨è¿è¡Œæ—¶æ‰ä¼šè¢«ç¡®å®šï¼Œbæ˜¯dçš„æŒ‡é’ˆï¼ŒæŸ¥æ‰¾å¯¹è±¡dè™šè¡¨æœ€ç»ˆè°ƒç”¨è¾“å‡ºï¼š 1è°ƒç”¨ Derived::getThis() b-&gt;getThis() è™½ç„¶è¿”å›äº†Derived* ï¼Œä½†å› ä¸ºC++æ˜¯é™æ€è¯­è¨€ï¼Œè€ŒprintType åˆæœªå£°æ˜ä¸ºè™šå‡½æ•°ï¼Œæ‰€ä»¥printTypeè°ƒç”¨å¯¹è±¡ç±»å‹å…¶å®åœ¨ç¼–è¯‘æ—¶å°±å·²ç»ç¡®å®šä¸ºBase ã€‚ æ‰€ä»¥æœ€ç»ˆDerived*åªèƒ½å‘ä¸Šè½¬å‹ä¸ºBase* ï¼Œè°ƒç”¨Base::printTypeè¾“å‡ºï¼š 1Base ææ„ã€æ„é€ å‡½æ•°ä¸è™šå‡½æ•° ææ„ã€æ„é€ å‡½æ•°ä¸è™šå‡½æ•°ä¹‹é—´éœ€è®°ä½ä»¥ä¸‹ä¸¤ç‚¹ï¼š ä¸è¦åœ¨æ„é€ å‡½æ•°æˆ–ææ„å‡½æ•°ä¸­è°ƒç”¨è™šå‡½æ•°ï¼› ææ„å‡½æ•°å¯å£°æ˜ä¸ºè™šå‡½æ•°ï¼Œæ„é€ å‡½æ•°ä¸èƒ½å£°æ˜ä¸ºè™šå‡½æ•°ã€‚ æˆ‘ä»¬å…ˆæ¥è®¨è®ºç¬¬ä¸€ç‚¹ï¼šä¸è¦ä»æ„é€ å‡½æ•°æˆ–ææ„å‡½æ•°è°ƒç”¨è™šå‡½æ•°ã€‚ è¦è§£é‡Šè¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦å›å¿†ä¸¤ä¸ªçŸ¥è¯†ç‚¹ï¼š æ¯ä¸ªç±»å¯¹è±¡è™šæŒ‡é’ˆæŒ‡å‘å½“å‰ç±»è™šè¡¨ï¼Œè™šæŒ‡é’ˆæ ¹æ®å½“å‰è°ƒç”¨çš„å¯¹è±¡ç¡®å®šï¼› åˆ›å»ºæ´¾ç”Ÿç±»å¯¹è±¡æ—¶ï¼Œå…ˆè°ƒç”¨åŸºç±»éƒ¨åˆ†æ„é€ å‡½æ•°ï¼Œå†è°ƒç”¨æ´¾ç”Ÿç±»æ„é€ å‡½æ•°ï¼›é”€æ¯æ´¾ç”Ÿç±»å¯¹è±¡æ—¶ï¼Œææ„å‡½æ•°æ‰§è¡Œé¡ºåºå’Œæ„é€ å‡½æ•°æ°ç›¸åã€‚ è®¾æƒ³ä¸‹ï¼Œæˆ‘ä»¬ä»åŸºç±»çš„æ„é€ å‡½æ•°è°ƒç”¨è™šå‡½æ•°ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ åˆ›å»ºæ´¾ç”Ÿç±»å¯¹è±¡ï¼Œå¼€å§‹è°ƒç”¨åŸºç±»æ„é€ å‡½æ•°ï¼› è¿›å…¥åŸºç±»æ„é€ å‡½æ•°è°ƒç”¨è™šå‡½æ•°ï¼Œå³ï¼šthis-&gt;è™šå‡½æ•°()ï¼Œå½“å‰thiså¯¹è±¡æ˜¯åŸºç±»å¯¹è±¡è€Œä¸æ˜¯æ´¾ç”Ÿç±»å¯¹è±¡ ï¼Œæ‰€ä»¥æœ€ç»ˆä½¿ç”¨çš„æ˜¯åŸºç±»å¯¹è±¡è™šæŒ‡é’ˆï¼Œåœ¨åŸºç±»çš„è™šè¡¨ä¸­è°ƒç”¨äº†åŸºç±»çš„è™šå‡½æ•°ç‰ˆæœ¬è€Œä¸æ˜¯æ´¾ç”Ÿç±»ä¸­çš„ï¼› æœ€åå†è°ƒç”¨æ´¾ç”Ÿç±»æ„é€ å‡½æ•°ã€‚ ç±»ä¼¼çš„é”™è¯¯å­˜åœ¨ææ„å‡½æ•°ä¸­ï¼š é”€æ¯å¯¹è±¡ï¼Œå¼€å§‹è°ƒç”¨æ´¾ç”Ÿç±»ææ„å‡½æ•°ï¼› æ´¾ç”Ÿç±»éƒ¨åˆ†è¢«é”€æ¯ï¼Œæ¥ç€è°ƒç”¨åŸºç±»ææ„å‡½æ•°ï¼› è¿›å…¥åŸºç±»ææ„å‡½æ•°è°ƒç”¨è™šå‡½æ•°ï¼ŒåŒæ ·çš„ï¼Œæ­¤æ—¶å¯¹è±¡æ˜¯åŸºç±»å¯¹è±¡è€Œä¸æ˜¯æ´¾ç”Ÿç±»å¯¹è±¡ï¼Œæ‰€ä»¥è™šå‡½æ•°å§‹ç»ˆè§£æä¸ºè¯¥å‡½æ•°çš„åŸºç±»ç‰ˆæœ¬ã€‚ æˆ‘ä»¬å†æ¥è®¨è®ºç¬¬äºŒç‚¹ï¼šææ„å‡½æ•°å¯å£°æ˜ä¸ºè™šå‡½æ•°ï¼Œæ„é€ å‡½æ•°ä¸èƒ½å£°æ˜ä¸ºè™šå‡½æ•°ã€‚ ææ„å‡½æ•°å£°æ˜ä¸ºè™šå‡½æ•°ï¼Œç‰¹åˆ«æ˜¯æ˜ç¡®è¦ä½œä¸ºåŸºç±»ä¸­çš„ææ„å‡½æ•°ï¼Œå¯ä»¥é¿å…æ´¾ç”Ÿç±»å†…å­˜æ²¡æœ‰è¢«é‡Šæ”¾äº§ç”Ÿå†…å­˜æ³„æ¼ã€‚è¿™æ ·é‡Šæ”¾åŸºç±»å†…å­˜æ—¶ï¼Œä¼šæ‰§è¡Œæ´¾ç”Ÿç±»ææ„å‡½æ•°ï¼Œè€Œæ´¾ç”Ÿç±»ææ„å‡½æ•°æ‰§è¡Œåè¿˜ä¼šè°ƒç”¨åŸºç±»ææ„å‡½æ•°ï¼Œç¡®ä¿äº†å†…å­˜è¢«ææ„å®Œå…¨ã€‚ ä¸‹é¢è¿™ä¸ªä¾‹å­å¸®åŠ©ç†è§£ï¼š æ³¨æ„ï¼ŒåŸºç±»æŒ‡é’ˆbase æŒ‡å‘äº†newåŠ¨æ€åˆ†é…åœ¨å †ä¸Šçš„æ´¾ç”Ÿç±»å¯¹è±¡å†…å­˜ï¼Œæ‰€ä»¥åªèƒ½æˆ‘ä»¬æ˜¾å¼deleteç®¡ç†å †å†…å­˜é‡Šæ”¾ã€‚ 123456789101112131415161718192021222324252627282930313233#include &lt;iostream&gt;class Base&#123;public: ~Base() // éè™šå‡½æ•° &#123; std::cout &lt;&lt; &quot;è°ƒç”¨ ~Base()\\n&quot;; &#125;&#125;;class Derived: public Base&#123;private: int* m_array;public: Derived(int length): m_array&#123; new int[length] &#125; &#123; &#125; ~Derived() &#123; std::cout &lt;&lt; &quot;è°ƒç”¨ ~Derived()\\n&quot;; delete[] m_array; &#125;&#125;;int main()&#123; Base *base = new Derived&#123;5&#125;; // é‡Šæ”¾baseæŒ‡å‘çš„å†…å­˜ delete base; return 0;&#125; æœ€ç»ˆè¾“å‡ºï¼š 1è°ƒç”¨ ~Base() å› ä¸ºbaseæŒ‡å‘çš„æ˜¯å †ä¸Šçš„æ´¾ç”Ÿç±»å¯¹è±¡ï¼Œæ‰€ä»¥è¿™ä¸ªå¯¹è±¡ç¦»å¼€ä½œç”¨åŸŸä¹Ÿä¸ä¼šè‡ªåŠ¨é‡Šæ”¾ï¼Œåªèƒ½æˆ‘ä»¬ä½¿ç”¨deleteæ˜¾å¼åˆ é™¤ã€‚ ä½†æ­¤æ—¶åªæœ‰åŸºç±»éƒ¨åˆ†æ‰§è¡Œäº†ææ„å‡½æ•°ï¼Œæ´¾ç”Ÿç±»ææ„å‡½æ•°æ²¡æœ‰æ‰§è¡Œï¼Œå¯¼è‡´m_array æŒæœ‰çš„å†…å­˜å‘ç”Ÿæ³„æ¼ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦å°†åŸºç±»çš„ææ„å‡½æ•°å£°æ˜ä¸ºè™šå‡½æ•°ã€‚ä¿®æ”¹å¦‚ä¸‹ï¼š 1234virtual ~Base() // è™šå‡½æ•°&#123; std::cout &lt;&lt; &quot;è°ƒç”¨ ~Base()\\n&quot;;&#125; å†æ¬¡æ‰§è¡Œè¾“å‡ºï¼š 12è°ƒç”¨ ~Derived()è°ƒç”¨ ~Base() è¿™æ ·ï¼Œæ´¾ç”Ÿç±»çš„ææ„å‡½æ•°æ‰§è¡Œå®Œè¿˜ä¼šæ‰§è¡ŒåŸºç±»çš„ææ„å‡½æ•°ï¼ˆåä¹‹ä¸è¡Œï¼‰ã€‚ ä¸è¿‡ï¼Œæ„é€ å‡½æ•°ä¸èƒ½å£°æ˜ä¸ºè™šå‡½æ•°ã€‚ å¾ˆå¥½ç†è§£ï¼Œå› ä¸ºè¿™ç ´åäº†æ„é€ å‡½æ•°æ‰§è¡Œé¡ºåºï¼šå…ˆåŸºç±»æ„é€ å‡½æ•°â†’å†æ´¾ç”Ÿç±»æ„é€ å‡½æ•°ã€‚ å½“åŸºç±»æ„é€ è¢«å£°æ˜ä¸ºè™šå‡½æ•°æ—¶ï¼šå…ˆæ´¾ç”Ÿç±»æ„é€ å‡½æ•°okï¼Œä½†åŸºç±»æ„é€ å‡½æ•°æ°¸è¿œç­‰ä¸åˆ°æ‰§è¡Œï¼Œæ´¾ç”Ÿç±»æ„é€ å‡½æ•°å¹¶æ²¡æœ‰ä¹‰åŠ¡è°ƒç”¨åŸºç±»æ„é€ å‡½æ•°ã€‚ ç»¼ä¸Šæ‰€è¿°ï¼š æ°¸è¿œä¸è¦ä»æ„é€ å‡½æ•°æˆ–ææ„å‡½æ•°è°ƒç”¨è™šå‡½æ•°ï¼› å½“å‰ç±»å¦‚æœæ‰“ç®—ä½œä¸ºåŸºç±»ï¼Œè¯·å°†ææ„å‡½æ•°å£°æ˜ä¸ºvirtualï¼ˆå¦‚æœä¸æ‰“ç®—ä½œä¸ºåŸºç±»ï¼Œææ„å‡½æ•°ä¸ç”¨å£°æ˜ä¸ºvirtualï¼Œä½†ç±»æœ€å¥½æ ‡è®°ä¸ºfinalï¼‰ï¼› æ°¸è¿œä¸è¦æŠŠæ„é€ å‡½æ•°å£°æ˜ä¸ºvirtualã€‚ çº¯è™šå‡½æ•°ã€æŠ½è±¡åŸºç±»ä¸æ¥å£ç±» è¿„ä»Šä¸ºæ­¢ï¼Œæˆ‘ä»¬ç¼–å†™çš„è™šå‡½æ•°éƒ½æœ‰å‡½æ•°ä½“ã€‚C++å…è®¸æˆ‘ä»¬åˆ›å»ºä¸€ç§ç‰¹æ®Šçš„å‡½æ•°ï¼Œçº¯è™šå‡½æ•°ï¼Œå®ƒæ²¡æœ‰å®ä½“ç”±æ´¾ç”Ÿç±»å®ç°å…·ä½“å®šä¹‰ã€‚ ç”±æ­¤è¿˜å¼•ç”³å‡ºå…¶å®ƒå‡ ä¸ªæ¦‚å¿µï¼š æŠ½è±¡åŸºç±»ï¼šå…·æœ‰çº¯è™šå‡½æ•°çš„ç±»ä¾¿æ˜¯æŠ½è±¡åŸºç±»ï¼› æ¥å£ç±»ï¼šæ²¡æœ‰æˆå‘˜å˜é‡ï¼Œåªæœ‰çº¯è™šå‡½æ•°çš„ç±»ã€‚ è¦åˆ›å»ºä¸€ä¸ªçº¯è™šå‡½æ•°ï¼Œåªéœ€ä¸ºå‡½æ•°èµ‹å€¼0å³å¯ã€‚ 12345678910111213141516#include &lt;string&gt;#include &lt;utility&gt;class Animal&#123;protected: // ä¿æŠ¤æˆå‘˜ Animal() &#123; &#125;public: // çº¯è™šå‡½æ•°ï¼Œ=0 virtual const char* speak() const = 0; // é»˜è®¤æ„é€ å‡½æ•° virtual ~Animal() = default;&#125;; è¿™é‡Œæˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ªAnimal åªä½œä¸ºåŸºç±»ï¼Œå› æ­¤ï¼š Animal æ„é€ å‡½æ•°è¢«å£°æ˜ä¸ºprotected ï¼Œé¿å…å…¶è¢«å¤–éƒ¨è¢«å®ä¾‹åŒ–ï¼›ä½†æ˜¯ä¸è¦å£°æ˜ä¸ºprivate ï¼Œå¦åˆ™æ´¾ç”Ÿç±»æ— æ³•å®ä¾‹åŒ–ã€‚ å†…éƒ¨æˆ‘ä»¬å£°æ˜äº†çº¯è™šå‡½æ•°speak() ï¼Œå› ä¸ºæˆ‘ä»¬åªå¸Œæœ›å®ƒåœ¨æ´¾ç”Ÿç±»ä¸­è¢«å®ç°ï¼ŒåŸºç±»å®ç°æ²¡æœ‰æ„ä¹‰ã€‚ æ­¤æ—¶Animal å› ä¸ºåŒ…å«çº¯è™šå‡½æ•°ï¼Œæ‰€ä»¥ä¹Ÿè¢«ç§°ä¸ºæŠ½è±¡åŸºç±»ã€‚æŠ½è±¡åŸºç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œæ‰€ä»¥è¿™é‡Œçš„Animal æ„é€ å‡½æ•°ï¼Œç›´æ¥å£°æ˜publicä¹Ÿå¯ä»¥ï¼š 123456789101112131415#include &lt;string&gt;#include &lt;utility&gt;class Animal&#123;protected: // ä¿æŠ¤æˆå‘˜public: Animal() &#123; &#125; // çº¯è™šå‡½æ•°ï¼Œ=0 virtual const char* speak() const = 0; // é»˜è®¤æ„é€ å‡½æ•° virtual ~Animal() = default;&#125;; çº¯è™šå‡½æ•°è¿˜æœ‰å‡ ä¸ªç‰¹è´¨ï¼š çº¯è™šå‡½æ•°å¿…é¡»è¢«æ´¾ç”Ÿç±»å®ç°ï¼ˆé‡å†™ï¼‰ï¼› 123456789101112131415class Cow: public Animal&#123;public: Cow() &#123; &#125; // const char* speak() const override &#123; return &quot;å’ª&quot;; &#125;&#125;;int main()&#123; Cow cow&#123;&#125;; std::cout &lt;&lt; cow.speak() &lt;&lt; &#x27;\\n&#x27;; // errorï¼Œæ´¾ç”Ÿç±»Cowæ²¡æœ‰å®ç°çº¯è™šå‡½æ•°speak() return 0;&#125; çº¯è™šå‡½æ•°å¯ä»¥æœ‰å‡½æ•°ä½“ï¼Œä¸è¿‡åªèƒ½åœ¨ç±»å¤–å®ç°ï¼ˆä¸å¸¸ç”¨ï¼‰ã€‚ 123456789101112131415161718192021#include &lt;string&gt;#include &lt;utility&gt;class Animal&#123;protected: // ä¿æŠ¤æˆå‘˜ Animal() &#123; &#125;public: // çº¯è™šå‡½æ•°ï¼Œ=0 virtual const char* speak() const = 0; // é»˜è®¤æ„é€ å‡½æ•° virtual ~Animal() = default;&#125;;const char* Animal::speak() const // åªèƒ½ç±»å¤–å®ç°&#123; return &quot;ï¼Ÿï¼Ÿï¼Ÿ&quot;; // &quot;ï¼Ÿï¼Ÿï¼Ÿ&quot;æ˜¯å­—ç¬¦ä¸²å¸¸é‡ï¼Œåœ¨å¸¸é‡åŒº&#125; æœ€åå€¼å¾—ä¸€æçš„æ˜¯ï¼ŒæŠ½è±¡ç±»ä»ç„¶å…·æœ‰è™šè¡¨ã€‚ è™šåŸºç±» 7.1.4èŠ‚ä¸­å¤šé‡ç»§æ‰¿å¯¼è‡´çš„â€œè±å½¢é—®é¢˜â€ï¼Œæˆ‘ä»¬æœ€ç»ˆè§£å†³æ–¹æ¡ˆæ˜¯é€šè¿‡è™šç»§æ‰¿è§£å†³ï¼š æ­¤æ—¶Aè¢«ç§°ä¸ºè™šåŸºç±»ã€‚ è™šåŸºç±»å¯¹è±¡ï¼Œåœ¨ç»§æ‰¿æ ‘ä¸­è¢«æ‰€æœ‰å¯¹è±¡å…±äº«ï¼Œä¹Ÿå°±æ˜¯åªä¼šæ„é€ ä¸€æ¬¡ï¼› æ´¾ç”Ÿè™šåŸºç±»æœ€å¤šçš„ç±»ï¼Œè´Ÿè´£åˆ›å»ºè™šåŸºç±»ï¼› åœ¨ä¸Šå›¾ä¸­ï¼ŒBã€Céƒ½åªæ´¾ç”Ÿäº†ä¸€æ¬¡è™šåŸºç±»Aï¼Œè€ŒDæ´¾ç”Ÿäº†ä¸¤æ¬¡ï¼Œæ‰€ä»¥ç”±Dè´Ÿè´£æ„å»ºè™šåŸºç±»Aï¼ˆè°ƒç”¨è™šåŸºç±»çš„æ„é€ å‡½æ•°ä¸€æ¬¡ï¼‰ã€‚ 7.2.4 åŠ¨æ€è½¬æ¢ä¸å¯¹è±¡åˆ‡ç‰‡ ä¸Šè¡Œè½¬æ¢å’Œä¸‹è¡Œè½¬æ¢ åŸºæœ¬æ¦‚å¿µï¼š ä¸Šè¡Œè½¬æ¢ï¼šæ´¾ç”Ÿç±»æŒ‡é’ˆæˆ–å¼•ç”¨è½¬æ¢ä¸ºâ†’åŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨ï¼ŒC++å¯ä»¥éšå¼åœ°è¿›è¡Œï¼Œè¿™ç§è½¬æ¢æ˜¯å®‰å…¨çš„ï¼› ä¸‹è¡Œè½¬æ¢ï¼šåŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨è½¬æ¢ä¸ºâ†’æ´¾ç”Ÿç±»æŒ‡é’ˆæˆ–å¼•ç”¨ ï¼Œè¿™ç§è½¬æ¢æ˜¯ä¸å®‰å…¨çš„ï¼Œæœ€å¥½é€šè¿‡dynamic_cast æˆ– static_cast æ˜¾å¼å®Œæˆã€‚ ä¸‹è¡Œè½¬æ¢æ—¢ç„¶æ˜¯ä¸å®‰å…¨çš„ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å­˜åœ¨ï¼Ÿ æˆ‘ä»¬ç»å¸¸ä¼šæœ‰è¿™ç§éœ€æ±‚ï¼šè™½ç„¶åªæœ‰åŸºç±»æŒ‡é’ˆï¼Œä½†è¿˜æ˜¯æƒ³æ ¹æ®åŸºç±»æŒ‡é’ˆè®¿é—®æ´¾ç”Ÿç±»ç›¸å…³çš„ä¿¡æ¯ã€‚ åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†è§£å†³æ–¹æ¡ˆï¼šåœ¨åŸºç±»å£°æ˜å’Œæ´¾ç”Ÿç±»å‡½æ•°ä¸€è‡´çš„è™šå‡½æ•°ã€‚ä½†è™šå‡½æ•°å¹¶éä¸‡çµè¯ï¼Œå› ä¸º: è¿™ç»™åŸºç±»å¸¦æ¥äº†é¢å¤–çš„è´Ÿæ‹…ï¼Œä¸å¾—ä¸åœ¨åŸºç±»é‡å¤å£°æ˜äº†ä¸€ä¸ªè™šå‡½æ•°ã€‚ è€ƒè™‘ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œè¯´æ˜äº†ä¸Šè¿°é—®é¢˜ã€‚ ä½¿ç”¨åŸºç±»æŒ‡é’ˆè®¿é—®æ´¾ç”Ÿç±»getNameæ–¹æ³•ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940#include &lt;string&gt;#include &lt;iostream&gt;class Base&#123;public: Base() &#123; &#125; virtual ~Base() = default; // ä¸å¾—ä¸é¢å¤–åœ¨åŸºç±»å£°æ˜ä¸€ä¸ªè™šå‡½æ•°ï¼Œä»¥ä¾¿å¯è§£æåˆ°æ´¾ç”Ÿç±»ä¸­ // å®é™…ä¸Šå®ƒä»€ä¹ˆä¹Ÿæ²¡åš virtual const std::string getName() const &#123; &#125;;&#125;;class Derived : public Base&#123;protected: std::string m_name&#123;&#125;;public: Derived(const std::string&amp; name): m_name&#123;name&#125; &#123; &#125; const std::string getName() const &#123; return m_name; &#125;&#125;;Base* getObject(bool returnDerived)&#123; if (returnDerived) return new Derived&#123; &quot;Derived&quot;&#125;; else return new Base&#123;&#125;;&#125;int main()&#123; Base* b&#123; getObject(true) &#125;; std::cout &lt;&lt; b-&gt;getName()&lt;&lt;std::endl; // Derived delete b; return 0;&#125; è™½ç„¶æœ€ç»ˆæˆåŠŸè®¿é—®åˆ°æ´¾ç”Ÿç±»çš„getNameæ–¹æ³•ï¼Œä½†æ˜¯ä¸å¾—ä¸åœ¨åŸºç±»é¢å¤–å®šä¹‰ä¸€ä¸ªè™šå‡½æ•°ï¼šå³ä½¿å®ƒå¯¹åŸºç±»æ˜¯æ¯«æ— ä½œç”¨çš„ã€‚ å¦ä¸€æ–¹é¢ï¼Œè€ƒå¯Ÿè¿™è¡Œä»£ç ï¼š 1Base* b&#123; getObject(true) &#125;; getObject(true) è¿”å›çš„æ˜¯Derivedç±»å‹æŒ‡é’ˆï¼› ç„¶åä¸Šè¡Œè½¬æ¢ä¸ºBaseæŒ‡é’ˆï¼Œã€‚ ä¹Ÿå°±æ˜¯è¯´BaseæŒ‡é’ˆb ä¿å­˜äº†Derivedå¯¹è±¡çš„å†…å­˜åœ°å€ï¼Œåªä¸è¿‡åªèƒ½è®¿é—®åŸºç±»éƒ¨åˆ†ã€‚ä½†ä¹Ÿå¤©ç”Ÿå…·å¤‡äº†è®¿é—®Derivedå¯¹è±¡çš„â€œæ½œè´¨â€ï¼ŒDerivedå¯¹è±¡çš„å…¶å®ƒéƒ¨åˆ†ä¾æ—§å­˜åœ¨ã€‚ æˆ‘ä»¬å¯ä»¥åˆ©ç”¨dynamic_castå¼ºåˆ¶è½¬æ¢å‘æ˜è¿™ç§æ½œåŠ›ï¼š 1234567891011// æ­¤æ—¶åŸºç±»çš„è™šå‡½æ•°getNameå·²è¢«åˆ é™¤int main()&#123; Base* b&#123; getObject(true) &#125;; Derived* d&#123; dynamic_cast&lt;Derived*&gt;(b) &#125;; if (d) // ç¡®ä¿è½¬æ¢æˆåŠŸ std::cout &lt;&lt; d-&gt;getName() &lt;&lt; &#x27;\\n&#x27;; delete b; return 0;&#125; è¾“å‡ºï¼š 1Derived æœ€åå¼ºè°ƒä¸€ä¸‹dynamic_cast å¤±è´¥æ—¶çš„å¤„ç†ï¼š dynamic_castå¤±è´¥è¿”å›NULLï¼ˆå¦‚æœæ˜¯å¼•ç”¨ï¼Œè¿”å› std::bad_cast å¼‚å¸¸ï¼‰ï¼Œï¼ˆæœ€ä½³å®è·µï¼‰è¯·ç¼–ç æ—¶åŠ¡å¿…è¿›è¡Œåˆ¤æ–­ï¼Œç¡®ä¿ä½ çš„ä¸‹è¡Œè½¬æ¢æˆåŠŸï¼› static_cast å¤±è´¥ä¹Ÿä¸è¿”å›NULLï¼Œå› æ­¤ä¸å»ºè®®ä½¿ç”¨static_castï¼Œå®ƒè¿‡äºç²—æš´ä¸å¤Ÿå®‰å…¨ã€‚ ä¸‹è¡Œè½¬æ¢è¿˜æ˜¯è™šå‡½æ•°ï¼Ÿ ä¸€èˆ¬æ¥è¯´ï¼Œä½¿ç”¨è™šå‡½æ•°åº”è¯¥ä¼˜äºå‘ä¸‹è½¬æ¢ã€‚ä½†æ˜¯ï¼Œæœ‰æ—¶å‘ä¸‹è½¬æ¢æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼š å½“ä¸èƒ½ä¿®æ”¹åŸºç±»æ·»åŠ è™šå‡½æ•°æ—¶ï¼ˆä¾‹å¦‚ï¼ŒåŸºç±»æ˜¯æ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†ï¼‰ï¼› å½“éœ€è¦è®¿é—®ç‰¹å®šäºæ´¾ç”Ÿç±»çš„ä¸œè¥¿æ—¶ï¼ˆä¾‹å¦‚ï¼Œä»…å­˜åœ¨äºæ´¾ç”Ÿç±»ä¸­çš„å‡½æ•°ï¼‰ï¼› å‘åŸºç±»æ·»åŠ è™šå‡½æ•°æ²¡æœ‰æ„ä¹‰æ—¶ï¼ˆä¾‹å¦‚ï¼ŒåŸºç±»å‡½æ•°ä½“æ²¡æœ‰å®ç°çš„å¿…è¦ï¼‰ã€‚ ä¸è¿‡èƒ½ä½¿ç”¨ä¸‹è¡Œè½¬æ¢æ˜¯å»ºç«‹åœ¨ï¼šä½ ä½¿ç”¨çš„åŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨æ˜¯å¦å…·æœ‰è½¬æ¢ä¸‹è¡Œè½¬æ¢çš„æ½œè´¨â€”â€”æŒ‡å‘çš„æ˜¯æ´¾ç”Ÿç±»å¯¹è±¡ï¼Ÿ å¦‚æœä¸å…·æœ‰çš„è¯ï¼Œæ¯”å¦‚æŒ‡å‘çš„æ˜¯ä¸€ä¸ªåŸºç±»å¯¹è±¡ï¼Œå¼ºè¡Œè½¬æ¢ä¼šå‡ºé”™ã€‚ 1234567int main()&#123; Base* b&#123; getObject(false) &#125;; std::cout &lt;&lt;dynamic_cast&lt;Derived*&gt;(b)-&gt;getName()&lt;&lt;std::endl; delete b; return 0;&#125; è¾“å‡ºï¼š 12[root@roy-cpp test]# ./test.out Segmentation fault å¯¹è±¡åˆ‡ç‰‡ åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬éƒ½æ˜¯åˆ©ç”¨åŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨ æŒ‡å‘äº†ä¸€ä¸ªæ´¾ç”Ÿç±»å¯¹è±¡ï¼Œå¤§æ¦‚ç±»ä¼¼ä¸‹é¢è¿™æ ·ï¼š 1234567int main()&#123; Derived derived&#123; 5 &#125;; Base&amp; ref&#123; derived &#125;; // å¼•ç”¨ Base* ptr&#123; &amp;derived &#125;; // æŒ‡é’ˆ return 0;&#125; ä¸Šé¢çš„refã€ptr è™½ç„¶åªèƒ½â€œçœ‹åˆ°â€derivedçš„Baseéƒ¨åˆ†ï¼Œä½†derivedå…¶å®ƒéƒ¨åˆ†ä¾æ—§æ˜¯å­˜åœ¨çš„ã€‚ å¦‚æœä¸ç”¨æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘å‘¢ï¼Ÿå°±åƒè¿™æ ·ï¼š 123456int main()&#123; Derived derived&#123; 5 &#125;; Base base &#123; derived &#125;; // éæŒ‡é’ˆæˆ–å¼•ç”¨ return 0;&#125; ä¸Šé¢base å¤åˆ¶äº†Derived å¯¹è±¡çš„ Base éƒ¨åˆ†ï¼Œè€Œ Derived å¯¹è±¡å…¶å®ƒéƒ¨åˆ†å·²è¢«ä¸¢å¼ƒï¼Œä¸å†å­˜åœ¨ ï¼Œè¿™å°±æ˜¯å¯¹è±¡åˆ‡ç‰‡ã€‚ å¯¹è±¡åˆ‡ç‰‡å¾ˆå®¹æ˜“å¯¼è‡´ä¸€äº›æ„æ–™ä¹‹å¤–çš„é—®é¢˜ï¼Œæ¯”å¦‚å‡½æ•°å‚æ•°å€¼ä¼ é€’æ—¶ã€‚ å‡è®¾æ­¤æ—¶Baseæœ‰ä¸€ä¸ªè™šå‡½æ•°getNameï¼Œå®ƒçš„ä½œç”¨æ˜¯æ‰“å°å‡ºâ€œBaseâ€ï¼›æ´¾ç”Ÿç±»getNameè¿›è¡Œäº†é‡å†™ï¼Œä¸è¿‡å®ƒæ‰“å°çš„æ˜¯â€œDerivedâ€ã€‚ å‡½æ•°printNameæ¥å—ä¸€ä¸ªBaseç±»å‹å‚æ•°ï¼Œæ˜¯å€¼ä¼ é€’æ–¹å¼ï¼Œå®ƒä¸»è¦ä»»åŠ¡æ˜¯è°ƒç”¨getNameå‡½æ•°ã€‚ 1234567891011void printName(const Base base) // ä¸æ˜¯å¼•ç”¨æˆ–æŒ‡é’ˆä¼ é€’&#123; base.getName();&#125;int main()&#123; Derived d&#123; 5 &#125;; printName(d); return 0;&#125; è¾“å‡ºï¼š 1Base å› ä¸ºå‘ç”Ÿäº†å¯¹è±¡åˆ‡ç‰‡ï¼Œå³ä½¿getNameæ˜¯è™šå‡½æ•°ä¹Ÿä¸ä¼šè°ƒç”¨Derived::getNameï¼Œè€Œæ˜¯è°ƒç”¨åŸºç±»ç‰ˆæœ¬Base::getNameï¼ˆè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å»ºè®®å‡½æ•°çš„ç±»ç±»å‹å‚æ•°å°½é‡å£°æ˜ä¸ºå¼•ç”¨æˆ–æŒ‡é’ˆï¼‰ã€‚ æœ€åï¼Œæˆ‘ä»¬å†ä¸¾ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜å¯¹è±¡åˆ‡ç‰‡å¸¦æ¥ç¼–ç é—®é¢˜ï¼šä½¿ç”¨vectorå®ç°å¤šæ€æ—¶ï¼Œå‘ç”Ÿäº†å¯¹è±¡åˆ‡ç‰‡ã€‚ 1234567891011121314151617#include &lt;iostream&gt;#include &lt;vector&gt;int main()&#123; std::vector&lt;Base&gt; v&#123;&#125;; Base b&#123;&#125;; Derived d&#123;&#125;; v.push_back(b); v.push_back(d); for (const auto* element : v) std::cout &lt;&lt; element-&gt;getName() &lt;&lt; &#x27;\\n&#x27;; return 0;&#125; è¾“å‡ºï¼š 12BaseBase ä¸å‰é¢çš„ç¤ºä¾‹ç±»ä¼¼ï¼Œå› ä¸º std::vector è¢«å£°æ˜ä¸º Base ç±»å‹çš„å‘é‡ï¼Œæ‰€ä»¥å½“å°† dæ·»åŠ åˆ°å‘é‡æ—¶ï¼Œdè¢«åˆ‡ç‰‡äº†ã€‚ è€Œä¸”ï¼Œå°è¯•ä½¿ç”¨å¼•ç”¨ä¼ å‚ä¹Ÿä¸èµ·ä½œç”¨ï¼š 1std::vector&lt;Base&amp;&gt; v&#123;&#125;; ä¼šå‘ç”Ÿç¼–è¯‘é”™è¯¯ï¼Œå› ä¸ºstd::vectorçš„å…ƒç´ å¿…é¡»æ˜¯å¯åˆ†é…çš„ï¼Œè€Œå¼•ç”¨ä¸èƒ½é‡æ–°åˆ†é…ï¼ˆä»…èƒ½åˆå§‹åŒ–ï¼‰ã€‚ æœ€ç»ˆè§£å†³æ–¹æ¡ˆæ˜¯å£°æ˜ä¸ºæŒ‡é’ˆä¼ å‚ï¼š 1234std::vector&lt;Base*&gt; v&#123;&#125;;v.push_back(&amp;b); v.push_back(&amp;d); é‡æ–°ç¼–è¯‘ï¼Œè¾“å‡ºæ­£å¸¸ï¼š 12BaseDerived ç»¼ä¸Šæ‰€è¿°ï¼šå°½ç®¡ C++ æ”¯æŒé€šè¿‡å¯¹è±¡åˆ‡ç‰‡å°†æ´¾ç”Ÿå¯¹è±¡åˆ†é…ç»™åŸºç±»å¯¹è±¡ï¼Œä½†è¿™æ˜¯ä¸ªè®©äººæ„Ÿåˆ°å¤´ç–¼çš„è¡Œä¸ºã€‚ æ‰€ä»¥ï¼Œè¯·å°½é‡é¿å…ä½¿ç”¨åˆ‡ç‰‡ï¼› ç¡®ä¿å‡½æ•°å‚æ•°æ˜¯å¼•ç”¨ï¼ˆæˆ–æŒ‡é’ˆï¼‰ã€‚ ä¸‹ç« æˆ‘ä»¬å¼€å§‹ä»‹ç»æ¨¡æ¿ç›¸å…³çŸ¥è¯†ã€‚ æ›´æ–°è®°å½• 2022-02-09 ï¼šæ›´æ–°ç¬”è®° ç¬¬ä¸€æ¬¡æ›´æ–° å‚è€ƒèµ„æ–™ 1.What is the difference between &quot;IS -A&quot; relationship and &quot;HAS-A&quot; relationship in Java? â†©2.ã€C++åŸºç¡€ä¹‹äºŒåä¸€ã€‘è±å½¢ç»§æ‰¿å’Œè™šç»§æ‰¿ï¼šhttps://blog.csdn.net/jackystudio/article/details/17877219 â†©3.å¤šé‡ç»§æ‰¿çš„ä¼˜ç¼ºç‚¹ï¼šhttps://blog.csdn.net/woodforestbao/article/details/4500406 â†©4.C++ å¤šæ€ ï¼šhttps://zhuanlan.zhihu.com/p/37340242 â†©5.C++åŸºç±»çš„ææ„å‡½æ•°ä¸ºä½•è¦å£°æ˜ä¸ºè™šå‡½æ•° ï¼šhttps://zhuanlan.zhihu.com/p/148290103 â†©6.C++ç±»å¯¹è±¡çš„å†…å­˜ç»“æ„ ï¼šhttps://blog.csdn.net/MOU_IT/article/details/89045103 â†©","categories":[{"name":"C++","slug":"C","permalink":"https://hwh.zone/categories/C/"},{"name":"ä»é›¶å¼€å§‹","slug":"C/ä»é›¶å¼€å§‹","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"},{"name":"C++é¢å¯¹å¯¹è±¡","slug":"C/ä»é›¶å¼€å§‹/C-é¢å¯¹å¯¹è±¡","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/C-%E9%9D%A2%E5%AF%B9%E5%AF%B9%E8%B1%A1/"}],"tags":[{"name":"C++","slug":"C","permalink":"https://hwh.zone/tags/C/"},{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://hwh.zone/tags/%E6%95%99%E7%A8%8B/"},{"name":"ç»§æ‰¿","slug":"ç»§æ‰¿","permalink":"https://hwh.zone/tags/%E7%BB%A7%E6%89%BF/"},{"name":"è™šå‡½æ•°","slug":"è™šå‡½æ•°","permalink":"https://hwh.zone/tags/%E8%99%9A%E5%87%BD%E6%95%B0/"}]},{"title":"C++ä»é›¶å¼€å§‹ï¼ˆå…«ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸­ï¼‰è¿ç®—ç¬¦é‡è½½","slug":"C++ä»é›¶å¼€å§‹ï¼ˆä¸‰ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸­ï¼‰è¿ç®—ç¬¦é‡è½½","date":"2022-01-27T06:47:34.826Z","updated":"2022-02-19T10:01:15.117Z","comments":true,"path":"p/43924/","link":"","permalink":"https://hwh.zone/p/43924/","excerpt":"","text":"ğŸŒŸã€ŠC++ä»é›¶å¼€å§‹ã€‹ ç³»åˆ—ï¼Œå¼€å§‹æ›´æ–°ä¸­â€¦ C++ä»é›¶å¼€å§‹https://hwh.zone/p/62712 å…­ã€è¿ç®—ç¬¦é‡è½½ åœ¨å‰é¢æˆ‘ä»¬æ¥è§¦è¿‡å‡½æ•°é‡è½½ï¼Œè®©æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šä¸ªåŒåå‡½æ•°ï¼Œåªè¦å®ƒä»¬æœ‰å”¯ä¸€çš„å‡½æ•°ç­¾åï¼ˆç”±å‡½æ•°å‚æ•°ç±»å‹ã€ä¸ªæ•°ã€å‡½æ•°åç»„æˆï¼‰å¯ä»¥è®©ç¼–è¯‘å™¨åŒºåˆ†å³å¯ã€‚ åœ¨C++ä¸­ï¼Œè¿ç®—ç¬¦è¢«è§†ä¸ºå‡½æ•°ï¼Œè‡ªç„¶ä¹Ÿå¯ä»¥è¿›è¡Œé‡è½½ã€‚ è®¤è¯†ä¸‹è¿ç®—ç¬¦è¿™ä¸ªç‰¹æ®Šçš„å‡½æ•°ã€‚ è¿ç®—ç¬¦operator+ ä½œä¸ºå‡½æ•°ï¼Œæ¥æ”¶äº†ä¸¤ä¸ªintç±»å‹å‚æ•°ï¼š 123int x &#123; 2 &#125;;int y &#123; 3 &#125;;x+y; é‡è½½å‡½æ•°operator+ ï¼Œåˆæ¥æ”¶äº†ä¸¤ä¸ªdouble ç±»å‹å‚æ•°ï¼š 123double x &#123; 2 &#125;;double y &#123; 3 &#125;;x+y; è¿™éƒ½æ˜¯C++ä¸ºæˆ‘ä»¬å†…ç½®å®ç°äº†operator+ é‡è½½ï¼Œç”¨äºC++åŸºæœ¬ç±»å‹ä¹‹é—´è¿ç®—ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå®šä¹‰é‡è½½è‡ªå·±çš„è¿ç®—ç¬¦å‡½æ•°ã€‚ è™½ç„¶C++ ä¸­å‡ ä¹æ‰€æœ‰çš„è¿ç®—ç¬¦æˆ‘ä»¬éƒ½å¯ä»¥è¿›è¡Œé‡è½½ï¼Œä½†è¦æ³¨æ„ä»¥ä¸‹è§„åˆ™ï¼š é‡è½½è¿ç®—ç¬¦ä¸­çš„è‡³å°‘ä¸€ä¸ªæ“ä½œæ•°å¿…é¡»æ˜¯ç”¨æˆ·å®šä¹‰çš„ç±»å‹ï¼Œæ¯”å¦‚é‡è½½operator+ å‡½æ•°ï¼Œä¸€ä¸ªå‚æ•°æ˜¯intï¼Œä¸€ä¸ªæ˜¯double æ˜¯ä¸è¡Œçš„ï¼› æ— æ³•æ›´æ”¹è¿ç®—ç¬¦æ”¯æŒçš„æ“ä½œæ•°æ•°é‡ï¼Œä¼˜å…ˆçº§ä¹Ÿè¢«ä¿ç•™ã€‚ 12345678910111213141516171819#include&lt;iostream&gt;class myInt&#123; private: int i; public: myInt(int a):i(a)&#123; &#125; int getValue()&#123;return i;&#125; &#125;;// é‡è½½æ“ä½œç¬¦å½¢å¼myInt operator+(myInt&amp; i1,myInt&amp; i2)&#123; return myInt(i1.getValue()+i2.getValue());&#125;// æ™®é€šå‡½æ•°myInt add(myInt&amp; i1,myInt&amp; i2)&#123; return myInt(i1.getValue()+i2.getValue());&#125; æ™®é€šå‡½æ•°ä¹Ÿå¯ä»¥å®ç°é‡è½½è¿ç®—ç¬¦æ‰€éœ€çš„åŠŸèƒ½ï¼Œé‡è½½è¿ç®—ç¬¦æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ é‡è½½è¿ç®—ç¬¦å¯ä»¥è®©ç¨‹åºè¡¨è¾¾æ›´ç›´è§‚ï¼š 123456789int main()&#123; myInt i1&#123;1&#125;; myInt i2&#123;2&#125;; myInt i3 = i1+i2; // i3.getValue()=3ï¼Œæ›´ç›´è§‚ myInt i4 = add(i1,i2); // i3.getValue()=3 return 0;&#125; å¦‚æœé‡è½½è¿ç®—ç¬¦å¹¶ä¸èƒ½è®©ä½ çš„ç¨‹åºæ›´æ¸…æ™°ï¼Œè¯·è°¨æ…ä½¿ç”¨ã€‚ æœ¬ç« ä¸»è¦ä»‹ç»ï¼š é‡è½½è¿ç®—ç¬¦çš„å‹å…ƒ/æ™®é€š/æˆå‘˜ä¸‰ç§æ–¹å¼ã€‚ ç‰¹æ®Šé‡è½½ï¼Œå¦‚é‡è½½()ã€=ä»‹ç»ã€‚ 6.1 é‡è½½è¿ç®—ç¬¦çš„ä¸‰ç§æ–¹å¼ é‡è½½è¿ç®—ç¬¦æœ‰ä¸‰ç§ä¸åŒçš„æ–¹å¼ï¼š å‹å…ƒå‡½æ•°æ–¹å¼ æ™®é€šå‡½æ•°æ–¹å¼ æˆå‘˜å‡½æ•°æ–¹å¼ æŒ‰ç…§é¡ºåºæˆ‘ä»¬ä¾æ¬¡æ¥çœ‹ä¸‹ã€‚ 6.1.1 å‹å…ƒå‡½æ•° é‡è½½å‹å…ƒåˆè¯† ä¸‹é¢å±•ç¤ºäº†é‡è½½operator+ ï¼Œå…¶ä½™æ“ä½œç¬¦- ã€/ ã€* ç­‰ç±»ä¼¼ã€‚ æ³¨æ„åˆ°å‡½æ•°operator+ æ˜¯ç±»MinMax çš„å‹å…ƒå‡½æ•°ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨MinMaxçš„ç§æœ‰æˆå‘˜ã€‚ 123456789101112131415161718192021222324252627#include &lt;iostream&gt;class Cents&#123;private: int m_cents&#123;&#125;;public: Cents(int cents): m_cents&#123; cents &#125;&#123;&#125; // ç±»ä¸­å£°æ˜å‹å…ƒå‡½æ•°åŸå‹ friend Cents operator+(const Cents&amp; c1, const Cents&amp; c2)&#125;;// å‹å…ƒå‡½æ•°å®šä¹‰Cents operator+(const Cents&amp; c1, const Cents&amp; c2)&#123; return &#123; c1.m_cents + c2.m_cents &#125;;&#125;int main()&#123; Cents cents1&#123; 6 &#125;; Cents cents2&#123; 8 &#125;; Cents centsSum = cents1 + cents2 ; std::cout &lt;&lt; &quot;I have &quot; &lt;&lt; centsSum.getCents() &lt;&lt; &quot; cents.\\n&quot;; return 0;&#125; è¾“å‡ºï¼š 1I have 14 cents. æ›´å¤šä¾‹å­ï¼šé‡è½½I/Oè¿ç®—ç¬¦ ä¸‹é¢æ˜¯ä¸€ä¸ªåŒæ—¶ä½¿ç”¨é‡è½½çš„ operator&lt;&lt; å’Œ operator&gt;&gt; çš„ç¤ºä¾‹ ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344include &lt;iostream&gt;class Point&#123;private: double m_x&#123;&#125;; double m_y&#123;&#125;; double m_z&#123;&#125;;public: Point(double x=0.0, double y=0.0, double z=0.0): m_x&#123;x&#125;, m_y&#123;y&#125;, m_z&#123;z&#125;&#123;&#125; // ç±»å‹å‹å…ƒå‡½æ•°å£°æ˜ friend std::ostream&amp; operator&lt;&lt; (std::ostream&amp; out, const Point&amp; point); friend std::istream&amp; operator&gt;&gt; (std::istream&amp; in, Point&amp; point);&#125;;std::ostream&amp; operator&lt;&lt; (std::ostream&amp; out, const Point&amp; point)&#123; out &lt;&lt; &quot;Point(&quot; &lt;&lt; point.m_x &lt;&lt; &quot;, &quot; &lt;&lt; point.m_y &lt;&lt; &quot;, &quot; &lt;&lt; point.m_z &lt;&lt; &#x27;)&#x27;; // è¿”å›std::ostreamå¯¹è±¡outï¼Œè¿™æ ·å°±å¯ä»¥å½¢æˆé“¾å¼ä½¿ç”¨ // åƒè¿™æ ·ï¼šout&lt;&lt;point1&lt;&lt;&quot; &quot; &lt;&lt; point2 return out;&#125;// å’Œå‰æœ‰ç‚¹ä¸ä¸€æ ·ï¼Œé‡è½½çš„å‚æ•°ç±»å‹ä¸åŒstd::istream&amp; operator&gt;&gt; (std::istream&amp; in, Point&amp; point)&#123; in &gt;&gt; point.m_x; in &gt;&gt; point.m_y; in &gt;&gt; point.m_z; // åŒå‰è¿”å›std::istreamå¯¹è±¡inï¼Œå½¢æˆé“¾å¼ return in;&#125;int main()&#123; std::cout &lt;&lt; &quot;Enter a point: &quot;; Point point1; Point point2; // é“¾å¼è¾“å…¥ std::cin &gt;&gt; point1 &gt;&gt; point2; // é“¾å¼è¾“å‡º std::cout &lt;&lt; &quot;You entered: &quot; &lt;&lt; point1 &lt;&lt; &quot; &quot; &lt;&lt; point2&lt;&lt;&#x27;\\n&#x27;; return 0;&#125; è¾“å‡ºï¼š 1234[root@roy-cpp test]# ./test.out Enter a point: 1 2 34 5 6You entered: Point(1, 2, 3) Point(4, 5, 6) 6.1.2 æ™®é€šå‡½æ•° ä½¿ç”¨å‹å…ƒå‡½æ•°è™½ç„¶å¾ˆæ–¹ä¾¿ï¼Œä½†ä¹Ÿä¸€å®šç¨‹åº¦çš„ç ´åäº†ç±»çš„å°è£…æ€§ã€‚å› æ­¤æˆ‘ä»¬å»ºè®®å°½é‡å°†é‡è½½è¿ç®—ç¬¦å®ç°ä¸ºæ™®é€šå‡½æ•°ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªå°ä¾‹å­ã€‚ æ³¨æ„åˆ°æ™®é€šå‡½æ•°å’Œå®ç°ä¸ºå‹å…ƒå‡½æ•°æä¸ºç±»ä¼¼ï¼Œé™¤äº†å‹å…ƒå‡½æ•°éœ€è¦åœ¨ç±»ä¸­å…ˆå£°æ˜å‡½æ•°åŸå‹ friend Cents operator+(const Cents&amp;,const Cents&amp;) ï¼Œå…¶ä½™æ²¡æœ‰åŒºåˆ«ã€‚ 123456789101112131415161718192021222324#include &lt;iostream&gt;class Cents&#123;private: int m_cents&#123;&#125;;public: Cents(int cents): m_cents&#123; cents &#125;&#123;&#125; // è®¿é—®ç§æœ‰æˆå‘˜çš„æ¥å£å‡½æ•° int getCents() const &#123; return m_cents; &#125;&#125;;// æ™®é€šå‡½æ•°ï¼Œéå‹å…ƒCents operator+(const Cents&amp; c1, const Cents&amp; c2)&#123; return Cents&#123; c1.getCents() + c2.getCents() &#125;;&#125;int main()&#123; Cents cents1&#123; 6 &#125;; Cents cents2&#123; 8 &#125;; Cents centsSum = cents1 + cents2 ; // ok return 0;&#125; 6.1.3 æˆå‘˜å‡½æ•° é‡è½½æˆå‘˜åˆè¯† æˆå‘˜é‡è½½è¿ç®—ç¬¦å’Œå‹å…ƒé‡è½½è¿ç®—ç¬¦å¾ˆç±»ä¼¼ï¼Œä½†æ˜¯ä¹Ÿæœ‰äº›ä¸åŒï¼š é‡è½½çš„è¿ç®—ç¬¦è¢«å®šä¹‰ä¸ºæˆå‘˜è€Œä¸æ˜¯å‹å…ƒï¼ˆä¾‹å¦‚ï¼Œæ˜¯Cents::operator+ è€Œä¸æ˜¯operator+ ï¼‰ï¼› å·¦è¾¹çš„ç±»ç±»å‹å‚æ•°const Cents&amp;è¢«ç§»é™¤äº†ï¼Œå˜æˆäº†éšå«çš„ *this å¯¹è±¡ã€‚ çœ‹ä»£ç è¯´è¯ã€‚ 1234567891011121314151617181920212223242526272829303132#include &lt;iostream&gt;class Cents&#123;private: int m_cents &#123;&#125;;public: Cents(int cents): m_cents &#123; cents &#125; &#123; &#125; // friend Cents operator+(const Cents &amp;cents, int value); // å¯¹æ¯”æ™®é€šå‡½æ•°å£°æ˜ï¼š // 1. å°‘äº†friendå£°æ˜ï¼Œæœ¬æ¥å°±æ˜¯æˆå‘˜å‡½æ•°å¯ä»¥è®¿é—®ç§æœ‰æˆå‘˜æ²¡å¿…è¦ // 2. å·¦å‚æ•°è¢«çœç•¥ï¼Œéšå«ä¸º*thiså¯¹è±¡ Cents operator+ (int value); int getCents() const &#123; return m_cents; &#125;&#125;;// å¯¹æ¯”æ™®é€šå‡½æ•°å¤šäº†Cents::ï¼ˆæˆå‘˜å‡½æ•°ï¼‰ï¼Œå¤šäº†å·¦å‚æ•°Cents Cents::operator+ (int value)&#123; // m_centsè¢«è§†ä¸ºthis-&gt;m_cents return Cents &#123; m_cents + value &#125;;&#125;int main()&#123; Cents cents1 &#123; 6 &#125;; Cents cents2 &#123; cents1 + 2 &#125;; std::cout &lt;&lt; &quot;I have &quot; &lt;&lt; cents2.getCents() &lt;&lt; &quot; cents.\\n&quot;; return 0;&#125; è¾“å‡ºï¼š 1I have 8 cents. é‡è½½ä¸€å…ƒå‡½æ•° æ­£ (+)ã€è´Ÿ (-) å’Œé€»è¾‘é (!) è¿ç®—ç¬¦éƒ½æ˜¯ä¸€å…ƒè¿ç®—ç¬¦ï¼Œè¿™æ„å‘³ç€å®ƒä»¬åªå¯¹ä¸€ä¸ªæ“ä½œæ•°è¿›è¡Œæ“ä½œï¼Œä¹Ÿå°±æ˜¯åªå¯¹åº”ç”¨å®ƒä»¬çš„å¯¹è±¡è¿›è¡Œæ“ä½œï¼Œæ‰€ä»¥é€šå¸¸ä¸€å…ƒè¿ç®—ç¬¦é‡è½½è¢«å®ç°ä¸ºæˆå‘˜å‡½æ•°ã€‚ ä¸‹é¢æ˜¯ä¸ªç®€å•çš„ä¾‹å­ï¼Œæ³¨æ„è´Ÿè¿ç®—ç¬¦å’Œå‡å·è¿ç®—ç¬¦ä¹‹é—´æ²¡æœ‰æ··æ·†ï¼Œå› ä¸ºå®ƒä»¬å…·æœ‰ä¸åŒæ•°é‡çš„å‚æ•°ã€‚ 1234567891011121314151617181920212223242526#include &lt;iostream&gt;class Cents&#123;private: int m_cents &#123;&#125;;public: Cents(int cents): m_cents(cents) &#123;&#125; // é‡è½½-è´Ÿè¿ç®—ç¬¦ï¼Œæˆå‘˜å‡½æ•°æ–¹å¼ Cents operator-() const; int getCents() const &#123; return m_cents; &#125;&#125;;// å®šä¹‰å¤„Cents Cents::operator-() const&#123; return -m_cents; &#125;int main()&#123; const Cents nickle&#123; 5 &#125;; std::cout &lt;&lt; &quot;A nickle of debt is worth &quot; &lt;&lt; (-nickle).getCents() &lt;&lt; &quot; cents\\n&quot;; return 0;&#125; 6.1.4 æœ€ä½³å®ç°ï¼šä½¿ç”¨ä»€ä¹ˆæ–¹å¼é‡è½½ ä¸‹é¢æ˜¯ä¸€äº›ç»éªŒæ³•åˆ™ï¼š æ™®é€šå‡½æ•°æˆ–å‹å…ƒå‡½æ•°ä¼˜å…ˆè€ƒè™‘æ™®é€šå‡½æ•°ï¼Œå¯é¿å…å°è£…æ€§è¢«ç ´åã€‚ ä½¿ç”¨æˆå‘˜å‡½æ•°ï¼š åœ¨å¤„ç†ä¿®æ”¹å·¦æ“ä½œæ•°çš„äºŒå…ƒè¿ç®—ç¬¦ï¼ˆä¾‹å¦‚ operator+=ï¼‰æ—¶ï¼Œé€šå¸¸é¦–é€‰æˆå‘˜å‡½æ•°ç‰ˆæœ¬ï¼Œå› ä¸ºæœ€å³è¾¹çš„æ“ä½œæ•°æˆä¸ºä¸€ä¸ªæ˜¾å¼å‚æ•°ï¼Œä¸ä¼šæ··æ·†è°ï¼ˆå·¦å‚æ•°ï¼‰è¢«ä¿®æ”¹ï¼› ä½†æ˜¯å·¦å‚æ•°ç±»å‹å¿…é¡»è¦æ˜¯å½“å‰ç±»ç±»å‹ï¼Œå¦‚operator&lt;&lt;ï¼Œå®ƒå…·æœ‰ ostream ç±»å‹çš„å·¦æ“ä½œæ•°ï¼Œæ­¤æ—¶æŒ‰æ™®é€šå‡½æ•°æ–¹å¼é‡è½½æœ€å¥½ã€‚ ä¸€å…ƒè¿ç®—ç¬¦é€šå¸¸ä¹Ÿä½œä¸ºæˆå‘˜å‡½æ•°é‡è½½ï¼Œæ­¤æ—¶æˆå‘˜ç‰ˆæœ¬æ²¡æœ‰å‚æ•°ã€‚ ä½¿ç”¨æ™®é€šå‡½æ•°ï¼š åœ¨å¤„ç†ä¸ä¿®æ”¹å·¦æ“ä½œæ•°çš„äºŒå…ƒè¿ç®—ç¬¦ï¼ˆä¾‹å¦‚ operator+ï¼‰æ—¶ï¼Œæ™®é€šæˆ–å‹å…ƒå‡½æ•°ç‰ˆæœ¬å…·æœ‰â€œå¯¹ç§°â€çš„é¢å¤–å¥½å¤„ï¼Œå› ä¸ºæ‰€æœ‰æ“ä½œæ•°éƒ½æˆä¸ºæ˜¾å¼å‚æ•°ã€‚ 6.2 é‡è½½()è¿ç®—ç¬¦ åˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä»¬æ¥è§¦çš„è¿ç®—ç¬¦ï¼Œå‚æ•°ç±»å‹è™½ç„¶å¯ä»¥è®¾ç½®ï¼Œä½†å‚æ•°ç±»å‹æ˜¯å›ºå®šçš„ã€‚ è€Œé‡è½½æ‹¬å·è¿ç®—ç¬¦ operator() ï¼Œå…è®¸æˆ‘ä»¬æ”¹å˜å®ƒçš„å‚æ•°ç±»å‹å’Œæ•°é‡ã€‚ è¿™æœ‰ä»€ä¹ˆç”¨ï¼Ÿ operator() ä¸€å¤§ç”¨å¤„æ˜¯ç”¨æ¥å®ç°å‡½å­ï¼ˆå‡½æ•°å¯¹è±¡ï¼‰ã€‚ç›¸æ¯”æ™®é€šå‡½æ•°ï¼Œ å‡½å­å¯ä»¥å°†ä»»æ„æ•°é‡çš„æ•°æ®å­˜å‚¨åœ¨æˆå‘˜å˜é‡ï¼Œè€Œä¸ç”¨åœ¨å½¢å‚ä¸­å®šä¹‰é¿å…äº†å¯èƒ½çš„å€¼ä¼ é€’å¼€é”€ï¼› å‡½å­å¯ä»¥ä¿å­˜ç»“æœå’ŒçŠ¶æ€ï¼Œæé«˜ä»£ç çµæ´»æ€§ï¼› å‡½æ•°æŒ‡é’ˆä¸èƒ½å†…è”ï¼Œå‡½å­å¯ä»¥ï¼Œæ•ˆç‡æ›´é«˜ï¼ˆæ²¡éªŒè¯è¿‡ï¼‰ã€‚ 6.2.1 å®ç°å‡½å­ è¯·çœ‹ä¸‹ä¾‹ã€‚ 1234567891011121314151617181920212223242526#include &lt;iostream&gt;class Accumulator&#123;private: int m_counter&#123; 0 &#125;;public: int operator() (int i); int getCounter() &#123; return m_counter;&#125;&#125;;// 1.å‡½å­æ•°æ®æˆå‘˜m_counterä¿å­˜åœ¨ç±»ä¸­ï¼Œè€Œä¸æ˜¯å½¢å‚ä¸­å®šä¹‰int Accumulator::operator() (int i)&#123; return (m_counter += i); &#125;int main()&#123; Accumulator acc&#123;&#125;; // å‡½å­å°±åƒå‡½æ•°ä¸€æ ·ä½¿ç”¨ std::cout &lt;&lt; acc(10) &lt;&lt; &#x27;\\n&#x27;; // 10 std::cout &lt;&lt; acc(20) &lt;&lt; &#x27;\\n&#x27;; // 30 // 2.å‡½å­ä¿å­˜äº†ç»“æœçŠ¶æ€ acc.getCounter(); // 30 return 0;&#125; å‡½å­æ›´å¤šçš„æ˜¯åº”ç”¨åœ¨å…³è”å®¹å™¨å’ŒSTLï¼Œå…¶ä¸­è®¸å¤šç®—æ³•éƒ½æ˜¯å¯ä»¥ç”¨å‡½æ•°æˆ–å‡½æ•°å¯¹è±¡è‡ªå®šä¹‰æ¯”è¾ƒå™¨çš„ã€‚ è¯·çœ‹ä¸‹ä¾‹ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839#include &lt;algorithm&gt;#include &lt;array&gt;#include &lt;iostream&gt;class MyGreater&#123; public: bool operator()(int a, int b) &#123; return (a &gt; b); &#125;&#125;;bool myLesser(int a, int b)&#123; return (a &lt; b);&#125;void print(const std::array&lt;int,6&gt;&amp; arr)&#123; for (int i : arr) &#123; std::cout &lt;&lt; i &lt;&lt; &#x27; &#x27;; &#125; std::cout &lt;&lt; &#x27;\\n&#x27;;&#125;int main()&#123; std::array&lt;int,6&gt; arr = &#123; 13, 90, 99, 5, 40, 80 &#125;; // std::sortç¬¬ä¸‰ä¸ªæŒ‡é’ˆæ¥å—ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆ // æ™®é€šå‡½æ•°ï¼Œæ­¤æ—¶myLesseræ˜¯å‡½æ•°åœ°å€ std::sort(arr.begin(), arr.end(), myLesser); print(arr); // å‡½å­ï¼Œæ­¤æ—¶MyGreater()ä¹Ÿæ˜¯å‡½æ•°åœ°å€ï¼Œä¸è¦()è¿·æƒ‘ std::sort(arr.begin(), arr.end(), MyGreater()); print(arr); return 0;&#125; è¾“å‡ºï¼š 1234[root@roy-cpp test]# g++ -std=c++11 test.cpp -o test.out[root@roy-cpp test]# ./test.out 5 13 40 80 90 99 99 90 80 40 13 5 6.3 é‡è½½=è¿ç®—ç¬¦ 6.3.1 åŒºåˆ†å¤åˆ¶æ„é€ å‡½æ•° å¤åˆ¶æ„é€ å‡½æ•°å’Œèµ‹å€¼è¿ç®—ç¬¦çš„ç”¨é€”å‡ ä¹ç›¸åŒâ€”â€”éƒ½æ˜¯å°†ä¸€ä¸ªå¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€ä¸ªå¯¹è±¡ã€‚ ä½†å®ƒä»¬æœ€æ ¸å¿ƒçš„åŒºåˆ«åœ¨äºä½œç”¨çš„æ—¶æœºä¸åŒï¼š å¤åˆ¶æ„é€ å‡½æ•°ï¼šåªè¦å¯¹è±¡åœ¨å£°æ˜æ—¶ç”¨äº†å¦ä¸€ä¸ªå¯¹è±¡ï¼ˆå¯èƒ½æ˜¯ç¼–è¯‘å™¨åˆ›å»ºçš„åŒ¿åå¯¹è±¡ï¼‰è¿›è¡Œåˆå§‹åŒ–ï¼Œå°±ä¼šè§¦å‘å¤åˆ¶æ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¿›è¡Œå¤åˆ¶åˆå§‹åŒ–ã€‚ èµ‹å€¼è¿ç®—ç¬¦ï¼šä¸æ˜¯åœ¨å¯¹è±¡å£°æ˜æ—¶ï¼Œè€Œæ˜¯ä¸€ä¸ªå·²å­˜åœ¨çš„å¯¹è±¡è¢«å¦ä¸€ä¸ªå¯¹è±¡é‡æ–°èµ‹å€¼æ—¶ ï¼Œå°±ä¼šè§¦å‘èµ‹å€¼è¿ç®—ç¬¦å‡½æ•°ã€‚ æˆ‘ä»¬é€šè¿‡ä¾‹å­æ¥ç†è§£ã€‚ 1234567891011121314151617181920212223class Date&#123;private: int m_year&#123;&#125;; int m_month&#123;&#125;; int m_day&#123;&#125;;public: Date() = default; Date(int day,int month=1,int year=2022) &#123; std::cout&lt;&lt; &quot;æ„é€ å‡½æ•°è¢«è°ƒç”¨&quot;&lt;&lt;std::endl; m_year=year;m_month=month;m_day=day; &#125;; Date(Date const&amp; tmp): m_year(tmp.m_year),m_month(tmp.m_month),m_day(tmp.m_day) &#123; std::cout&lt;&lt; &quot;å¤åˆ¶æ„é€ å‡½æ•°è¢«è°ƒç”¨&quot;&lt;&lt;std::endl; &#125; Date&amp; operator=(const Date&amp; date) &#123; std::cout&lt;&lt; &quot;oprator=è¢«è°ƒç”¨&quot;&lt;&lt;std::endl; m_year=date.m_year; m_month=date.m_year; m_day=date.m_year; &#125;&#125;; ä¸»å‡½æ•°ä¸­ï¼š 1234567int main()&#123; // éƒ½æ˜¯å¤åˆ¶åˆå§‹åŒ– Date date1 = 25; // 1 Date date2 = Date&#123;25&#125;; // 2 Date date3 = date2; // 3&#125; 1ã€2åœ¨å¯¹è±¡date1ã€date2å£°æ˜æ—¶ç”¨åŒ¿åå¯¹è±¡è¿›è¡Œåˆå§‹åŒ–ï¼ˆç¼–è¯‘å™¨è¦ä½¿å¾—= å·¦å³æ“ä½œç±»å‹ä¸€è‡´ï¼Œåˆ†åˆ«åœ¨=å³ä¾§åˆ›å»ºäº†DateåŒ¿åå¯¹è±¡ï¼Œç„¶åè°ƒç”¨å¤åˆ¶æ„é€ å‡½æ•°æ¥åˆå§‹åŒ–date1ã€date2ï¼‰ã€‚ 3å¤„date3ä¹Ÿæ˜¯å£°æ˜æ—¶ä½¿ç”¨äº†å…¶å®ƒå¯¹è±¡ï¼ˆdate2ï¼‰è¿›è¡Œåˆå§‹åŒ–ï¼Œæ‰€ä»¥ä¹Ÿä¼šè°ƒç”¨å¤åˆ¶æ„é€ å‡½æ•°ã€‚ ä½†æ˜¯1ã€2å¤„ä¼šè¢«ç¼–è¯‘å™¨ä¼˜åŒ–ä½¿ç”¨æ™®é€šæ„é€ å‡½æ•°åˆå§‹åŒ–ï¼Œæ‰€ä»¥æœ€åè¾“å‡ºï¼š 123æ„é€ å‡½æ•°è¢«è°ƒç”¨æ„é€ å‡½æ•°è¢«è°ƒç”¨å¤åˆ¶æ„é€ å‡½æ•°è¢«è°ƒç”¨ æˆ‘ä»¬å†æ¥çœ‹çœ‹è°ƒç”¨èµ‹å€¼è¿ç®—ç¬¦= çš„æƒ…å†µï¼š 1234567int main()&#123; Date date1 = 25; // 1 Date date2 = Date&#123;25&#125;; // 2 date2 = 31; // 3 date2 = date1; // 4&#125; è¾“å‡ºï¼š 1234æ„é€ å‡½æ•°è¢«è°ƒç”¨æ„é€ å‡½æ•°è¢«è°ƒç”¨oprator=è¢«è°ƒç”¨oprator=è¢«è°ƒç”¨ ä¹Ÿå°±æ˜¯3ã€4å¤„éƒ½æ˜¯è°ƒç”¨äº†èµ‹å€¼è¿ç®—ç¬¦= è¿›è¡Œèµ‹å€¼ï¼ˆä¸æ˜¯åˆå§‹åŒ–ï¼‰ï¼š 3å¤„ï¼Œdate2ä¸æ˜¯å£°æ˜æ—¶è¿›è¡Œåˆå§‹åŒ–ï¼Œè€Œæ˜¯ä½¿ç”¨ç¼–è¯‘å™¨ç”Ÿæˆçš„åŒ¿åå¯¹è±¡è¿›è¡Œé‡æ–°èµ‹å€¼ ï¼› 4å¤„ï¼ŒåŒç†ï¼Œdate2ä¸æ˜¯å£°æ˜æ—¶è¿›è¡Œåˆå§‹åŒ– ï¼Œä½¿ç”¨date1è¿›è¡Œé‡æ–°èµ‹å€¼ ã€‚ å®ƒä»¬éƒ½ç¬¦åˆå‰æ–‡æ‰€è¿°ï¼šâ€œè€Œæ˜¯ä¸€ä¸ªå·²å­˜åœ¨çš„å¯¹è±¡è¢«å¦ä¸€ä¸ªå¯¹è±¡é‡æ–°èµ‹å€¼æ—¶ ï¼Œå°±ä¼šè§¦å‘èµ‹å€¼è¿ç®—ç¬¦å‡½æ•°â€ ã€‚ æ›´æ–°è®°å½• 2022-01-29 ï¼šæ›´æ–°ç¬”è®° ç¬¬ä¸€æ¬¡æ›´æ–° å‚è€ƒèµ„æ–™ 1.C++STLä¸­çš„å‡½æ•°å¯¹è±¡ ï¼šhttps://blog.csdn.net/CV_Jason/article/details/83899253 â†©","categories":[{"name":"C++","slug":"C","permalink":"https://hwh.zone/categories/C/"},{"name":"ä»é›¶å¼€å§‹","slug":"C/ä»é›¶å¼€å§‹","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"},{"name":"C++é¢å¯¹å¯¹è±¡","slug":"C/ä»é›¶å¼€å§‹/C-é¢å¯¹å¯¹è±¡","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/C-%E9%9D%A2%E5%AF%B9%E5%AF%B9%E8%B1%A1/"}],"tags":[{"name":"C++","slug":"C","permalink":"https://hwh.zone/tags/C/"},{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://hwh.zone/tags/%E6%95%99%E7%A8%8B/"},{"name":"C++åŸºç¡€","slug":"C-åŸºç¡€","permalink":"https://hwh.zone/tags/C-%E5%9F%BA%E7%A1%80/"},{"name":"è¿ç®—ç¬¦é‡è½½","slug":"è¿ç®—ç¬¦é‡è½½","permalink":"https://hwh.zone/tags/%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD/"}]},{"title":"C++ä»é›¶å¼€å§‹ï¼ˆä¸ƒï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸Šï¼‰å¿«é€Ÿå…¥é—¨","slug":"C++ä»é›¶å¼€å§‹ï¼ˆä¸‰ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸Šï¼‰å¿«é€Ÿå…¥é—¨","date":"2022-01-24T07:37:07.955Z","updated":"2022-03-01T11:48:26.198Z","comments":true,"path":"p/17506/","link":"","permalink":"https://hwh.zone/p/17506/","excerpt":"","text":"ğŸŒŸã€ŠC++ä»é›¶å¼€å§‹ã€‹ ç³»åˆ—ï¼Œå¼€å§‹æ›´æ–°ä¸­â€¦ C++ä»é›¶å¼€å§‹https://hwh.zone/p/62712 äº”ã€é¢å¯¹å¯¹è±¡å…¥é—¨ C++å’ŒCä¸€å¤§ä¸»è¦åŒºåˆ«ï¼Œä¾¿æ˜¯å¼•å…¥äº†å…¥é¢å¯¹å¯¹è±¡ã€‚ ä¸ºä»€ä¹ˆéœ€è¦å¼•å…¥é¢å¯¹å¯¹è±¡ï¼Ÿå®ƒæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ 5.1 ä¸ºä»€ä¹ˆéœ€è¦é¢å¯¹å¯¹è±¡ï¼Ÿ 5.1.1 ä»é¢å‘è¿‡ç¨‹è¯´èµ· åœ¨ä¼ ç»Ÿç¼–ç¨‹ä¸­ï¼Œæ•°æ®å’Œå¤„ç†è¯¥æ•°æ®çš„å‡½æ•°æ˜¯å•ç‹¬çš„å®ä½“ï¼Œå®ƒä»¬ç»„åˆåœ¨ä¸€èµ·ä»¥äº§ç”Ÿæ‰€éœ€çš„ç»“æœã€‚ ä¹Ÿå°±æ˜¯é¢å‘è¿‡ç¨‹é€šå¸¸åšæ³•ã€‚ ä½†æ˜¯ç”±äºé¢å‘è¿‡ç¨‹çš„è¿™ç§åˆ†ç¦»ï¼Œä¼ ç»Ÿç¼–ç¨‹é€šå¸¸ä¸èƒ½æä¾›éå¸¸ç›´è§‚çš„ç°å®è¡¨ç¤ºï¼š 1goToHome(you); åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¡Œä¸ºä¸»ä½“you å’Œè¡Œä¸ºgoToHome è¢«åˆ†éš”äº†ï¼šyou è¢«å½“åšå•ç‹¬çš„æ•°æ®å®ä½“ï¼Œè¡Œä¸ºgoToHome è¢«å½“åšå•ç‹¬çš„å‡½æ•°å®ä½“ã€‚ é¢å¯¹å¯¹è±¡åˆ™æä¾›äº†æ›´ç›´è§‚çš„è¡¨ç¤ºèƒ½åŠ›ã€‚ å› ä¸ºé¢å¯¹å¯¹è±¡å°†å¯¹è±¡ï¼ˆè¡Œä¸ºä¸»ä½“ï¼‰ã€å±æ€§å’Œè¡Œä¸ºå°è£…åˆ°ç‹¬ç«‹ã€å¯é‡ç½®çš„ç±»ä¸­ã€‚ è€Œè¿™äº›å±æ€§å’Œè¡Œä¸ºå¾€å¾€ä¹Ÿè¢«è®¤ä¸ºæ˜¯å¯†ä¸å¯åˆ†çš„ã€‚ 1you.goToHome(); æ˜¾ç„¶ï¼Œè¿™è®©å¯¹è±¡ï¼ˆyouï¼‰æ˜¯è°ï¼Œä»¥åŠæ­£åœ¨è°ƒç”¨ä»€ä¹ˆè¡Œä¸ºï¼ˆgoToHomeï¼‰æ›´æ¸…æ¥šäº†ã€‚æˆ‘ä»¬ä¸å†ä¸“æ³¨äºç¼–å†™å‡½æ•°ï¼Œè€Œæ˜¯ä¸“æ³¨äºå®šä¹‰è¡Œä¸ºé›†çš„å¯¹è±¡ã€‚ è¿™ï¼Œä¹Ÿå°±æ˜¯é¢å¯¹å¯¹è±¡ã€‚ å¾—ç›Šäºè¿™ç§ä¸“æ³¨äºå¯¹è±¡çš„è¡Œä¸ºï¼Œé¢å¯¹å¯¹è±¡å¸¦æ¥ä»¥ä¸‹å‡ ä¸ªå¥½å¤„ï¼š ä»£ç æ¨¡å—åŒ– æ›´å®¹æ˜“ç†è§£ã€ç›´è§‚ å¯é‡ç”¨æ€§é«˜ ç°åœ¨æˆ‘ä»¬æ¥ä¸¾ä¸€ä¸ªæ›´å…·ä½“çš„ä¾‹å­è¿›è¡Œå¯¹æ¯”ï¼šåˆ†åˆ«ä½¿ç”¨é¢å‘è¿‡ç¨‹å’Œé¢å‘å¯¹è±¡çš„æ–¹å¼ï¼Œæ‰“å°å¹´/æœˆ/æ—¥åˆ°å±å¹•ä¸Šã€‚ é¢å¯¹è¿‡ç¨‹ æŒ‰ç…§é¢å¯¹è¿‡ç¨‹çš„æ€æƒ³ï¼ŒDateå½“åšç‹¬ç«‹å˜é‡ç»„ç»‡äº†â€œå¹´/æœˆ/æ—¥â€ï¼Œâ€œæ‰“å°â€åˆ™å½“åšç‹¬ç«‹è¡Œä¸ºï¼ˆå‡½æ•°ï¼‰ã€‚ 123456789101112131415161718192021#include &lt;iostream&gt;struct Date&#123; int year &#123;&#125;; int month &#123;&#125;; int day &#123;&#125;;&#125;;void print(const DateStruct&amp; date)&#123; std::cout &lt;&lt; date.year &lt;&lt; &#x27;/&#x27; &lt;&lt; date.month &lt;&lt; &#x27;/&#x27; &lt;&lt; date.day;&#125;int main()&#123; Date today &#123; 2022, 1, 24 &#125;; today.day = 25; print(today); // 2022/1/25 return 0;&#125; é¢å‘å¯¹è±¡ é¢å‘å¯¹è±¡åˆ™å°†Dateè§†ä½œè¡Œä¸ºä¸»ä½“ï¼ˆå¯¹è±¡ï¼‰ï¼Œâ€œå¹´/æœˆ/æ—¥â€è¢«å½“åšå…¶æˆå‘˜å˜é‡ï¼Œâ€œæ‰“å°â€åˆ™æ˜¯å…¶æˆå‘˜å‡½æ•°ã€‚æ­¤æ—¶æ˜ç¡®äº†è¡Œä¸ºä¸»ä½“å¯¹è±¡Dateï¼Œå»ºç«‹äº†â€œå¹´/æœˆ/æ—¥â€å’Œè¡Œä¸ºâ€œæ‰“å°â€çš„å…³è”ã€‚ 1234567891011121314151617181920212223#include &lt;iostream&gt;class Date // classå…³é”®å­—&#123;public: int _year &#123;&#125;; // æˆå‘˜å˜é‡ int _month &#123;&#125;; int _day &#123;&#125;; void print() // æˆå‘˜å‡½æ•° &#123; std::cout &lt;&lt; m_year &lt;&lt; &#x27;/&#x27; &lt;&lt; m_month &lt;&lt; &#x27;/&#x27; &lt;&lt; m_day; &#125;&#125;;int main()&#123; Date today &#123; 2022, 1, 24 &#125;; today._day = 25; // ä¸»ä½“å¯¹è±¡.è¡Œä¸º() today.print(); // 2022/1/25 return 0;&#125; ç›¸ä¿¡ä½ å¯¹é¢å¯¹å¯¹è±¡æœ‰äº†æ›´æ·±åˆ»çš„ç†è§£ï¼Œç°åœ¨æ¥æ›´ç³»ç»Ÿåœ°äº†è§£é¢å¯¹å¯¹è±¡åŸºæœ¬ç»„æˆå§ã€‚ 5.1.2 é¢å¯¹å¯¹è±¡ç»„æˆ æˆå‘˜ç»„æˆ å…¶å®ï¼Œå‰é¢æˆ‘ä»¬å·²ç»å±•ç¤ºäº†é¢å¯¹å¯¹è±¡æœ€åŸºæœ¬çš„ç»„æˆï¼šæˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°ã€‚ é¢å¯¹å¯¹è±¡è¿˜å¯ä»¥æœ‰æˆå‘˜ç±»å‹ ã€åµŒå¥—ç±»å‹ã€‚ æˆå‘˜ç±»å‹ æˆå‘˜ç±»å‹è§„å®šè¿™ä¸ªç±»åŸºæœ¬æ•°æ®ç±»å‹ï¼Œè¿™æ ·æˆ‘ä»¬åªéœ€æ›´æ–°ç±»å‹åˆ«åï¼Œè€Œä¸å¿…æ›¿æ¢åŸºæœ¬ç±»å‹ã€‚ è¿™æ ·è¯´æœ‰ç‚¹éš¾ä»¥ç†è§£ï¼Œä¸¾ä¸ªä¾‹å­ï¼švectorç±»è§„å®šçš„ç±»å‹size_type ã€‚ size_t å½’æ ¹ç©¶åº•å°±æ˜¯ç±»å‹long unsigned int åˆ«å ä¹Ÿå°±æ˜¯è¯´ä¸‹é¢ä¸¤ç§å†™æ³•æ˜¯ç­‰ä»·çš„ã€‚ 12std::vector&lt;int&gt;::size_type x; // ç­‰ä»·ï¼šunsigned long int x std::cout&lt;&lt;typeid(x).name()&lt;&lt; &quot; &quot;; // mï¼Œè¡¨ç¤ºunsigned long (int) stl_vector.h å˜é‡åŸºæœ¬éƒ½æ˜¯ä½¿ç”¨çš„è¿™ç§ç±»å‹åˆ«åå£°æ˜ï¼Œæ¯”å¦‚æˆ‘ä»¬ç†Ÿæ‚‰çš„size() æ–¹æ³•å£°æ˜ï¼š å›åˆ°å‰é¢ï¼šè¿™æ ·åšæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ å½“æˆ‘ä»¬æƒ³ä¿®æ”¹vectorä½¿ç”¨çš„åŸºæœ¬ç±»å‹ï¼Œåªéœ€è¦å°†ä¿®æ”¹ç±»å‹åˆ«åå°±è¡Œï¼š 12// #define __SIZE_TYPE__ long unsigned int#define __SIZE_TYPE__ int // ç°åœ¨vectoråŸºæœ¬ç±»å‹è¢«ä½ å£°æ˜ä¸ºint åµŒå¥—ç±»å‹ è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œåªè¦ï¼šç±»ç±»å‹ã€ç»“æ„ä½“ç±»å‹ã€æšä¸¾ç±»å‹åœ¨ç±»ä¸­å£°æ˜ï¼Œå°±å¯ä»¥ç§°å…¶ä¸ºåµŒå¥—ç±»å‹ã€‚ ä»¥æšä¸¾ç±»å‹åµŒå¥—ä¸ºä¾‹ã€‚ 123456789101112131415161718192021222324252627282930#include &lt;iostream&gt;class Fruit&#123;public: // æ­¤æ—¶æšä¸¾ç±»å‹å£°æ˜åœ¨ç±»Fruitä¸­ // æ‰€ä»¥æšä¸¾ç±»å‹æ­¤æ—¶æ˜¯ä¸ªåµŒå¥—ç±»å‹ enum FruitType &#123; apple, banana, cherry &#125;;private: FruitType m_type &#123;&#125;;public: Fruit(FruitType type) :m_type &#123; type &#125; &#123;&#125; FruitType getType() const &#123; return m_type; &#125;&#125;;int main()&#123; // æ³¨æ„æšä¸¾ç±»å‹ä¸é™åˆ¶ä½œç”¨èŒƒå›´ Fruit apple &#123; Fruit::apple &#125;; // è°ƒç”¨æ„é€ å‡½æ•°Fruit(FruitType type) apple.getType() ; // FruitType::apple return 0;&#125; è®¿é—®æ§åˆ¶ç¬¦ ç±»æˆå‘˜è®¿é—®æ§åˆ¶ç¬¦å®ç°äº†ç±»çš„å°è£…ï¼ŒC++è®¿é—®ç¬¦åŒ…æ‹¬ï¼š pprivateï¼šç§æœ‰æˆå‘˜ï¼Œè¯¥æˆå‘˜ä»…åœ¨ç±»å†…å¯ä»¥è¢«è®¿é—®ï¼Œåœ¨ç±»ä½“å¤–ï¼ˆåŒ…æ‹¬æ´¾ç”Ÿç±»ï¼‰æ˜¯éšè—çŠ¶æ€ï¼› publicï¼šå…¬æœ‰æˆå‘˜ï¼Œè¯¥æˆå‘˜åœ¨ç±»å†…ã€ç±»å¤–ä¹Ÿéƒ½å¯ä»¥è¢«è®¿é—®ï¼Œæ˜¯ç±»å¯¹å¤–æä¾›çš„å¯è®¿é—®æ¥å£ã€‚ åœ¨ç»§æ‰¿ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥äº†ç¬¬ä¸‰ç§ä¿®é¥°ç¬¦ï¼š protectedï¼šä¿æŠ¤æˆå‘˜ï¼Œå’Œç§æœ‰æˆå‘˜ç±»ä¼¼ï¼Œä¸è¿‡åœ¨æ´¾ç”Ÿç±»å¯ä»¥è¢«è®¿é—®ã€‚ æœ€ä½³å®è·µï¼šä»é™ä½ç±»çš„è€¦åˆæ€§æ¥è¯´ï¼Œä¼˜å…ˆè€ƒè™‘privateè€Œä¸æ˜¯protectã€‚ Base ç±»ä¸­ä¸‰ç§æˆå‘˜è®¿é—®æƒé™ä¹Ÿå¯ä»¥ç”¨ä¸‹å›¾å½¢è±¡è¡¨ç¤ºï¼š å…·ä½“å®ä¾‹ï¼š 12345678910111213141516171819202122232425262728class Base&#123;public: int m_public &#123;&#125;; protected: int m_protected &#123;&#125;; private: int m_private &#123;&#125;; &#125;;class Derived: public Base&#123;public: Derived() &#123; m_public = 1; // ok m_protected = 2; // ok m_private = 3; // errorï¼Œæ´¾ç”Ÿç±»è®¿é—®ç§æœ‰æˆå‘˜ &#125;&#125;;int main()&#123; Base base; base.m_public = 1; // ok base.m_protected = 2; // errorï¼Œç±»å¤–è®¿é—®ä¿æŠ¤æˆå‘˜ base.m_private = 3; // errorï¼Œç±»å¤–è®¿é—®ç§æœ‰æˆå‘˜&#125; ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œè¿›ä¸€æ­¥è¯´æ˜protectedè®¿é—®è¯´æ˜ç¬¦ä½œç”¨ã€‚ æ¶‰åŠåˆ°7.1 ç»§æ‰¿ä¸€äº›çŸ¥è¯†ï¼š æ´¾ç”Ÿç±»ç”±ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼šç»§æ‰¿çš„åŸºç±»å‰¯æœ¬éƒ¨åˆ†ï¼Œæ´¾ç”Ÿç±»è‡ªèº«æ‰©å±•çš„éƒ¨åˆ†ã€‚ æ´¾ç”Ÿç±»å®ä¾‹åŒ–æ—¶ï¼Œå¿…é¡»å…ˆè°ƒç”¨åŸºç±»æ„é€ å‡½æ•°åˆå§‹åŒ–åŸºç±»å‰¯æœ¬éƒ¨åˆ†ï¼Œå†è°ƒç”¨æ´¾ç”Ÿç±»æ„é€ å‡½æ•°åˆå§‹åŒ–æ´¾ç”Ÿç±»éƒ¨åˆ†ã€‚ å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåŸºç±»Aï¼Œæˆ‘ä»¬å¸Œæœ›å®ƒï¼š Aä¸èƒ½è¢«å®ä¾‹åŒ–ï¼› ä½†èƒ½è¢«ç»§æ‰¿ï¼Œæ´¾ç”Ÿç±»ç±»å¯ä»¥å®ä¾‹åŒ–ã€‚ ä¸ºäº†æ»¡è¶³ç¬¬ä¸€ç‚¹ï¼Œæˆ‘ä»¬æƒ³åˆ°å¯ä»¥å°†Açš„æ„é€ å‡½æ•°å£°æ˜ä¸ºprivateã€‚ ä½†è¿™æ ·å°±æ— æ³•æ»¡è¶³ç¬¬äºŒç‚¹ï¼šæ´¾ç”Ÿç±»æ— æ³•å®ä¾‹åŒ–ï¼Œå› ä¸ºæ´¾ç”Ÿç±»æ— æ³•è°ƒç”¨åŸºç±»å‰¯æœ¬çš„ç§æœ‰æ„é€ å‡½æ•°ã€‚ 1234567891011121314class A&#123; private: A()&#123;&#125;&#125;class B: public A&#123; public: B()&#123;&#125;&#125;int main()&#123; B b ; // error: â€˜A::A()â€™ is private&#125; è¿™ä¸ªæ—¶å€™éœ€è¦å°†Açš„æ„é€ å‡½æ•°å£°æ˜ä¸ºprotectedï¼š 12protected: A()&#123;&#125; è¿™æ ·æ´¾ç”Ÿç±»å°±å¯ä»¥è°ƒç”¨åŸºç±»çš„æ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–åŸºç±»å‰¯æœ¬äº†ã€‚ æœ€ä½³å®è·µï¼šç±»æˆå‘˜å˜é‡æ˜¯ç§æœ‰çš„ï¼Œç±»æˆå‘˜å‡½æ•°æ˜¯å…¬å¼€çš„ã€‚ ä¸ºä»€ä¹ˆè¿™ä¹ˆå»ºè®®ï¼Ÿ å¯¹äºæ™®é€šäººè€Œè¨€ï¼Œé¥æ§å™¨å°±æ˜¯ä¸€ä¸ªç®€å•çš„åŒ…æ‹¬è‹¥å¹²çš„æŒ‰é’®ç•Œé¢ï¼Œç”¨æˆ·åªå…³å¿ƒæŒ‰é’®æŒ‰ä¸‹çš„æ•ˆæœï¼Œä½†ä¸å…³å¿ƒå…·ä½“æ˜¯å¦‚ä½•å’Œç”µè§†é€šä¿¡ã€‚ç±»ä¼¼çš„ï¼Œè¸©ä¸‹æ²¹é—¨è¸æ¿ä¹Ÿä¸éœ€è¦å…³å¿ƒå†…ç‡ƒæœºå¦‚ä½•ä½¿å¾—è½¦è½®è½¬åŠ¨ã€‚ è¿™å…¶å®å°±æ˜¯æ¥å£åˆ†ç¦»çš„æ€æƒ³ï¼šé™ä½å¯¹è±¡å¤æ‚æ€§ï¼Œä½¿å¾—æˆ‘ä»¬åœ¨ä¸äº†è§£å¯¹è±¡å¦‚ä½•å·¥ä½œçš„å‰æä¸‹ï¼Œå¯ä»¥å»ä½¿ç”¨å¯¹è±¡ã€‚ ä¸‰å¤§ç‰¹æ€§ä¹‹å°è£… ç»“æ„åˆ†ç¦»æ€æƒ³ä¹Ÿå°±æ˜¯é¢å¯¹å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ï¼šå°è£…ï¼Œçš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚ æ€ä¹ˆå®ç°å°è£…ï¼Ÿ åœ¨ C++ ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡è®¿é—®è¯´æ˜ç¬¦å®ç°å°è£…ã€‚ç±»çš„æ‰€æœ‰æˆå‘˜å˜é‡éƒ½æ˜¯ç§æœ‰çš„ï¼ˆéšè—å®ç°ç»†èŠ‚ï¼‰ï¼Œå¤§å¤šæ•°æˆå‘˜å‡½æ•°éƒ½æ˜¯å…¬å¼€çš„ï¼ˆå‘ç”¨æˆ·å…¬å¼€æ¥å£ï¼‰ã€‚ å°è£…å…·ä½“æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ é™ä½å¯¹è±¡å¤æ‚æ€§ï¼ŒåŒå‰ï¼› ä¿æŠ¤æ•°æ®ï¼Œç±»ä¸­å®šä¹‰çš„æˆå‘˜å˜é‡éƒ½æ˜¯å…¨å±€å˜é‡ï¼Œæ„å‘³ç€å®ƒå¯ä»¥è¢«ç±»ä»»ä½•å¯¹è±¡ä¿®æ”¹ï¼Œè¿™å¾ˆå±é™©ã€‚ä½¿ç”¨privateä¿®é¥°é¿å…äº†è¿™ä¸€ç‚¹ï¼Œè®¿é—®æ•°æ®åªèƒ½å…¬å…±æ¥å£å‡½æ•°ï¼› æ›´å®¹æ˜“è°ƒè¯•ï¼Œå› ä¸ºæ¯ä¸ªäººéƒ½åªèƒ½é€šè¿‡åŒä¸€ä¸ªå…¬å…±å‡½æ•°ä¿®æ”¹æŸä¸ªå€¼ï¼Œè¿™æ ·å€¼ä¸æ­£ç¡®æ—¶å¾ˆå®¹æ˜“è¿›è¡Œdebugï¼› æ›´å®¹æ˜“ä¿®æ”¹ï¼Œâ€¦ å¦å¤–ä¸¤å¤§ç‰¹æ€§å°†ä¼šåœ¨åé¢ç« èŠ‚ä»‹ç»ï¼š ç»§æ‰¿ï¼šè®©æŸç§ç±»å‹ï¼ˆæ´¾ç”Ÿç±»ï¼‰å¯¹è±¡è·å¾—å¦ä¸€ä¸ªç±»å‹å¯¹è±¡ï¼ˆåŸºç±»ï¼‰çš„å±æ€§å’Œæ–¹æ³•ã€‚ å¤šæ€ï¼šC++ å¤šæ€æŒ‡ç›¸åŒå¯¹è±¡æ”¶åˆ°ä¸åŒæ¶ˆæ¯ï¼Œæˆ–ä¸åŒå¯¹è±¡æ”¶åˆ°ç›¸åŒæ¶ˆæ¯æ—¶ï¼Œäº§ç”Ÿä¸åŒçš„å®ç°åŠ¨ä½œã€‚ ç±»å’Œç»“æ„ä½“è¿™ä¹ˆåƒï¼Ÿ çœ‹åˆ°è¿™ä½ ä¸ç¦æƒ³åæ§½ï¼Œä½ è¯´ç±»è¿™äº›åŠŸèƒ½ï¼š åµŒå¥—ã€å˜é‡ã€å‡½æ•° ç»“æ„ä½“éƒ½æ”¯æŒå•Šï¼Ÿç”šè‡³ä½ è¿˜çŸ¥é“æ›´å¤šï¼š ç»“æ„ä½“æ”¯æŒç»§æ‰¿ã€å¤šæ€â€¦ æ˜¯çš„ï¼Œåœ¨C++ä¸­ç±»å’Œç»“æ„ä½“é™¤äº†é»˜è®¤è®¿é—®ç¬¦å¤–å¤ªåƒäº†ï¼Œä»¥è‡³äºå¾ˆå¤šå¼€å‘äººå‘˜è®¤ä¸ºè¿™æ˜¯ä¸ªé”™è¯¯çš„è®¾è®¡ã€‚ ç¡®å®ï¼Œè¿™çš„ç¡®æœ‰ç‚¹ä¸åˆç†ã€‚æ ¹æ®å‰äººç»éªŒâ€”â€” æœ€ä½³å®è·µï¼šå°† struct ç”¨äºçº¯æ•°æ®ç»“æ„ï¼Œå¯¹åŒæ—¶å…·æœ‰æ•°æ®å’Œå‡½æ•°çš„å¯¹è±¡ä½¿ç”¨ classã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå»ºè®®structå£°æ˜ä¸ºPOD(Plain Old Data)ç±»å‹è¿›è¡Œä½¿ç”¨ã€‚ ä»€ä¹ˆæ˜¯PODç±»å‹ï¼Ÿ å¦‚æœstruct/class/enumç­‰ï¼Œåªå®šä¹‰äº†å¸¸è§„æ•°æ®ç±»å‹(ä¸å«æœ‰è‡ªå®šä¹‰æ•°æ®ç±»å‹)ï¼Œä¸ä½¿ç”¨å°åŒ…æˆ–è€…å…¶å®ƒé¢å¯¹å¯¹è±¡ç‰¹å¾ï¼Œé‚£ä¹ˆå°±æ˜¯PODç±»å‹ã€‚ 123456struct myDate // PODç±»å‹&#123; int i; float f; char c;&#125;; 5.2 æ„é€ å‡½æ•°åŠåˆå§‹åŒ– å½“ä¸€ä¸ªç±»/ç»“æ„ä½“çš„æ‰€æœ‰æˆå‘˜éƒ½æ˜¯å…¬å…±æˆå‘˜æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åˆ—è¡¨åˆå§‹åŒ–ç±»/ç»“æ„ä½“ï¼š 123456789101112class Foo&#123;public: int m_x ; int m_y ;&#125;;int main()&#123; Foo foo1 &#123; 1, 2 &#125;; return 0;&#125; ä½†æ˜¯å‰é¢æˆ‘ä»¬ä¹Ÿå¼ºè°ƒè¿‡ï¼Œæˆå‘˜å˜é‡ä¸€èˆ¬å£°æ˜ä¸ºprivateã€‚ æ­¤æ—¶å¦‚ä½•åˆå§‹åŒ–privateä¿®é¥°çš„æˆå‘˜å˜é‡ï¼Ÿ å¦‚æœç§æœ‰æˆå‘˜å˜é‡ä»…ä»…æ˜¯éœ€è¦é›¶å€¼åˆå§‹åŒ–ï¼Œåœ¨ç±»æˆå‘˜å˜é‡ä½¿ç”¨åˆ—è¡¨åˆå§‹åŒ–&#123;&#125;å³å¯ 123456class Foo&#123;public: int m_x&#123;&#125; ; // å£°æ˜æ—¶åˆ—è¡¨åˆå§‹åŒ– int m_y&#123;&#125; ; // å£°æ˜æ—¶åˆ—è¡¨åˆå§‹åŒ–&#125;; å¦‚æœç§æœ‰æˆå‘˜å˜é‡éœ€è¦æŒ‡å®šå€¼ï¼Œä½¿ç”¨æ„é€ å‡½æ•°å¯ä»¥æŒ‡å®šåˆå§‹åŒ–ç±»çš„æˆå‘˜å˜é‡ã€‚ æ„é€ å‡½æ•°æœ‰ç‰¹å®šå‘½åè§„åˆ™ï¼š å’Œç±»åŒå æ²¡æœ‰è¿”å›ç±»å‹ ä»é»˜è®¤æ„é€ å‡½æ•°å¼€å§‹å§ã€‚ 5.2.1 é»˜è®¤æ„é€ å‡½æ•°ã€åˆå§‹åŒ–åŠç±»åˆ†é… é»˜è®¤æ„é€ å‡½æ•° ä¸å¸¦å‚æ•°ï¼ˆæˆ–æ‰€æœ‰å‚æ•°éƒ½å…·æœ‰é»˜è®¤å€¼ï¼‰çš„æ„é€ å‡½æ•°ç§°ä¸ºé»˜è®¤æ„é€ å‡½æ•°ã€‚ ã€æ³¨ã€‘æ²¡æœ‰ä¸€ä¸ªæ„é€ å‡½æ•°è¢«æ˜¾å¼å£°æ˜æ—¶ï¼Œç¼–è¯‘å™¨ä¼šéšå¼å£°æ˜ä¸€ä¸ªé»˜è®¤æ„é€ å‡½æ•°ã€‚ 123456789101112131415161718192021#include &lt;iostream&gt;class Fraction&#123;private: int m_numerator &#123;&#125;; int m_denominator &#123;&#125;;public: Fraction() // é»˜è®¤æ„é€ å‡½æ•° &#123; m_numerator = 0; m_denominator = 1; &#125;&#125;;int main()&#123; Fraction frac&#123;&#125;; // é»˜è®¤æ„é€ å‡½æ•° return 0;&#125; æ‰§è¡ŒFraction frac&#123;&#125;æ—¶ï¼Œä¼šåˆ›å»ºç±»Fractionçš„å®ä¾‹ fracï¼Œç„¶åè°ƒç”¨é»˜è®¤æ„é€ å‡½æ•°åˆå§‹åŒ–å¯¹è±¡fracã€‚ æœ‰æ—¶å€™ä½ ä¹Ÿä¼šçœ‹åˆ°ä¸‹é¢åˆå§‹åŒ–æ–¹å¼ï¼š 12Fraction frac;Fraction frac(); è¿™äºŒè€…æœ‰ä»€ä¹ˆä¸åŒå—ï¼Ÿ åˆ—è¡¨åˆå§‹åŒ–å’Œç›´æ¥åˆå§‹åŒ– Fraction frac&#123;&#125; é€šå¸¸ç§°ä¸ºåˆ—è¡¨åˆå§‹åŒ–ï¼Œè€Œ Fraction frac / Fraction frac() è¢«ç§°ä¸ºç›´æ¥åˆå§‹åŒ–ã€‚ å®ƒä»¬éƒ½ä¼šåœ¨æ‰§è¡Œæ—¶è°ƒç”¨ç›¸å…³æ„é€ å‡½æ•°ï¼Œä½†æ˜¯&#123;&#125; æ–¹å¼è¿˜å¯èƒ½ä¼šä½¿å¾—ç¼–è¯‘å™¨è°ƒç”¨æ„é€ å‡½æ•°ä¹‹å‰ï¼Œå¯¹æˆå‘˜å˜é‡è¿›è¡Œé›¶å€¼åˆå§‹åŒ–ã€‚ éªŒè¯ä¸€ä¸‹ã€‚ 123456789101112131415161718192021222324#include &lt;iostream&gt;class Fraction&#123;private: int m_numerator ; // å»é™¤&#123;&#125; int m_denominator ;public: Fraction() // ä¸åšä»»ä½•äº‹ &#123; // m_numerator = 0; // m_denominator = 1; &#125;&#125;;int main()&#123; Fraction frac1&#123;&#125;; // åˆ—è¡¨åˆå§‹åŒ– Fraction frac2; // ç›´æ¥åˆå§‹åŒ– std::cout&lt;&lt;frac1.m_numerator&lt;&lt;std::endl; std::cout&lt;&lt;frac2.m_numerator&lt;&lt;std::endl; return 0;&#125; è¾“å‡ºï¼š 1202082139952 å¯è§åˆ—è¡¨åˆå§‹åŒ–æ–¹å¼ç¡®å®å¯¹æˆå‘˜å˜é‡è¿›è¡Œäº†é›¶å€¼åˆå§‹åŒ–ï¼Œè€Œè¿›è¡Œç›´æ¥åˆå§‹åŒ–å­˜çš„æ˜¯åƒåœ¾å€¼ï¼ˆè¿™ä¸€ç‚¹æˆ‘ä»¬åœ¨1.2.4èŠ‚ä¹Ÿæ€»ç»“å¯¹æ¯”è¿‡ï¼Œæ­¤æ—¶æˆå‘˜å˜é‡å€¼éƒ½æ˜¯é»˜è®¤åˆå§‹åŒ–çš„åƒåœ¾å€¼ï¼‰ã€‚ ç±»é™æ€åˆ†é…å’ŒåŠ¨æ€åˆ†é… åœ¨è¿™ä¹‹å‰æˆ‘ä»¬è§åˆ°ç±»çš„å¯¹è±¡éƒ½æ˜¯é™æ€åˆ†é…çš„ï¼š 12Fraction frac2;Fraction frac1&#123;&#125;; ç¼–è¯‘å™¨é™æ€å»ºç«‹ä¸€ä¸ªç±»å¯¹è±¡ï¼Œåœ¨æ ˆç©ºé—´ä¸­åˆ†é…å†…å­˜ï¼Œæ‰€ä»¥è¯¥å¯¹è±¡å†…å­˜ä¸éœ€è¦æˆ‘ä»¬ç®¡ç†ï¼Œç¼–è¯‘å™¨è´Ÿè´£é‡Šæ”¾ã€‚ æˆ‘ä»¬è¿˜å¯ä»¥è¿›è¡ŒåŠ¨æ€åˆ†é…ï¼ˆnewæ–¹å¼ï¼‰ï¼š 1Fraction* pfrac = new Fraction&#123;&#125;; æ­¤æ—¶ç¼–è¯‘å™¨åŠ¨æ€å»ºç«‹ä¸€ä¸ªç±»å¯¹è±¡ï¼Œåœ¨å †ç©ºé—´ä¸Šåˆ†é…å†…å­˜ï¼Œéœ€è¦æˆ‘ä»¬ä½¿ç”¨deleteæ˜¾å¼åˆ é™¤ç®¡ç†å†…å­˜ã€‚ ç±»å¦‚ä½•å®ç°åªèƒ½é™æ€åˆ†é…æˆ–åªèƒ½åŠ¨æ€åˆ†é…å¯¹è±¡ ï¼Ÿ åªèƒ½é™æ€åˆ†é…ï¼šæŠŠnewã€deleteè¿ç®—ç¬¦é‡è½½ä¸ºprivateï¼› åªèƒ½åŠ¨æ€åˆ†é…ï¼šæŠŠæ„é€ è®¾ä¸ºprivate/protectedå±æ€§ï¼Œç±»é™æ€å‡½æ•°åˆ†é…å¯¹è±¡ã€‚ ä¸‹é¢æ˜¯å®ä¾‹ã€‚ 123456789101112131415161718192021222324252627282930#include &lt;iostream&gt;using namespace std;// åªèƒ½é™æ€åˆ†é…ï¼Œç¦ç”¨newï¼ˆå£°æ˜ä¸ºprivateï¼‰class A&#123;private: void* operator new(size_t t)&#123;&#125; // æ³¨æ„å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°å’Œè¿”å›å€¼éƒ½æ˜¯å›ºå®šçš„ void operator delete(void* ptr)&#123;&#125; // é‡è½½äº†newå°±éœ€è¦é‡è½½deletepublic: A()&#123;&#125; ~A()&#123;&#125;&#125;;// åªèƒ½åŠ¨æ€åˆ†é…ï¼ˆå¤–éƒ¨æ— æ³•ä½¿ç”¨æ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ— æ³•å®ä¾‹åŒ–ï¼Œåªèƒ½é€šè¿‡å†…éƒ¨å‡½æ•°åŠ¨æ€åˆ†é…å†…å­˜è¿”å›ï¼‰class B&#123;private: B()&#123;&#125;public: static B* create()&#123;return new B();&#125; // é™æ€å‡½æ•°ï¼Œå› ä¸ºä¸èƒ½åˆ›å»ºå¯¹è±¡ ~B()&#123;&#125;&#125;;int main()&#123; A a; // é™æ€åˆ†é… B* b = B::create(); // åŠ¨æ€åˆ†é… return 0;&#125; 5.2.2 è½¬æ¢æ„é€ å‡½æ•° C++ ä¼šå°†ä»»ä½•æ„é€ å‡½æ•°è§†ä¸ºéšå¼è½¬æ¢è¿ç®—ç¬¦ï¼Œåœ¨4.X.1 ç”¨æˆ·è‡ªå®šä¹‰éšå¼è½¬æ¢æœ‰è¿‡è¯¦ç»†ä»‹ç»ã€‚ ç®€å•å›å¿†ä¸€ä¸‹ã€‚ 1234567891011121314151617181920212223#include &lt;iostream&gt;using namespace std;class dog &#123; public: // 1.è½¬æ¢æ„é€ å‡½æ•° dog(string name) &#123;m_name = name;&#125; // 2.ç±»å‹è½¬æ¢é‡è½½ operator string()&#123; return m_name;&#125; private: string m_name;&#125;;int main() &#123; string dogname = &quot;dog&quot;; // 1.è½¬æ¢æ„é€ å‡½æ•° dog d = dogname; // ok // 2.ç±»å‹è½¬æ¢é‡è½½ std::cout &lt;&lt; &quot;my name is &quot; &lt;&lt; string(d) &lt;&lt; &quot;\\n&quot;; return 0;&#125; å…·ä½“è¿‡ç¨‹æ¶‰åŠåˆ°å¤åˆ¶åˆå§‹åŒ–ï¼š 1dog d = dogname; // ok è¡¨è¾¾å¼ä»å³åˆ°å·¦ï¼Œæ„é€ å‡½æ•°dog(string)ä½œä¸ºè½¬æ¢æ„é€ å‡½æ•° ï¼Œç¼–è¯‘å™¨å…ˆåˆ›å»ºdogä¸´æ—¶åŒ¿åå¯¹è±¡ï¼Œä½¿å¾—=ä¸¤è¾¹æ“ä½œç±»å‹ä¸€è‡´ï¼› ç„¶ådog(string) åˆå§‹åŒ–åŒ¿åå¯¹è±¡ï¼› è‡³æ­¤ï¼Œå®Œæˆäº†stringç±»å‹éšå¼è½¬æ¢ä¸ºdog ã€‚æ¥ä¸‹æ¥æ˜¯å¤åˆ¶åˆå§‹åŒ–ç›¸å…³è¿‡ç¨‹ï¼š ç¼–è¯‘å™¨åˆ›å»ºå¯¹è±¡d ï¼› è°ƒç”¨å¤åˆ¶æ„é€ å‡½æ•°ï¼Œç”¨åŒ¿åå¯¹è±¡æˆå‘˜å€¼å¤åˆ¶åˆå§‹åŒ–å¯¹è±¡d ã€‚ åˆå§‹åŒ–ç›¸å…³å·¥ä½œç»†èŠ‚&amp;åŸç†è¯·çœ‹ä¸‹æ–‡ã€‚ 5.2.3 å†è°ˆåˆå§‹åŒ–ğŸŒŸ å›é¡¾ä¸€ä¸‹ä¸‰ç§åˆå§‹åŒ–æ–¹å¼ã€‚ ä¸‹é¢æ˜¯åˆ—è¡¨åˆå§‹åŒ–&#123;&#125; åˆå§‹åŒ–ï¼ˆå¯èƒ½ä¼šå¯¹éé™æ€æˆå‘˜è¿›è¡Œé›¶å€¼åˆå§‹åŒ–ï¼‰ã€‚ 12345678910111213141516171819class Date&#123;private: int m_year&#123;&#125;; int m_month&#123;&#125;; int m_day&#123;&#125;;public: Date() = default; Date(int day,int month=1,,int month=1int year=2022) // å¸¦å‚æ•°çš„æ„é€ å‡½æ•°ï¼Œå­˜åœ¨é»˜è®¤å€¼ &#123; m_year=year;m_month=month;m_day=day; &#125;;&#125;;int main()&#123; Date date&#123;25&#125;; // åˆ—è¡¨åˆå§‹åŒ–ï¼Œè°ƒç”¨å¸¦å‚æ„é€ å‡½æ•° return 0;&#125; ä¹Ÿå¯ä»¥ä½¿ç”¨ç›´æ¥åˆå§‹åŒ–æ–¹å¼ï¼š 1Date date(25); // ç›´æ¥åˆå§‹åŒ– ç”šè‡³ä½ è¿˜å¯ä»¥ä½¿ç”¨å¤åˆ¶åˆå§‹åŒ–ï¼š 1234Date date1 = 25; // 1ï¼Œè¿˜è¿›è¡Œäº†éšå¼è½¬æ¢ï¼Œç­‰ä»·äºDate date1 =Date(25)Date date2 = Date(25); // 2Date date3 = Date&#123;25&#125;; // 3Date date4 = date3; // 4 = å·¦ä¾§æ˜¯è¢«åˆå§‹åŒ–çš„å¯¹è±¡ï¼Œå› ä¸º=å·¦å³ä¸¤ä¾§æ“ä½œç±»å‹è¦ç›¸ç­‰ï¼Œæ‰€ä»¥= å³ä¾§ä¼šå…ˆç”Ÿæˆä¸€ä¸ªï¼ˆåŒ¿åï¼‰å¯¹è±¡ï¼Œå¯¹å·¦ä¾§å¯¹è±¡æˆå‘˜è¿›è¡Œï¼ˆå¤åˆ¶ï¼‰åˆå§‹åŒ–ã€‚ ä½†æ˜¯ï¼Œæˆ‘ä»¬å»ºè®®é¿å…ä½¿ç”¨ç±»è¿›è¡Œå¤åˆ¶åˆå§‹åŒ–ï¼Œå› ä¸ºä¸€èˆ¬æ•ˆç‡è¾ƒä½ä¸”ä¸å®‰å…¨ã€‚ ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿå¤åˆ¶åˆå§‹åŒ–æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ å¤åˆ¶åˆå§‹åŒ– å‚è€ƒï¼šC++çš„ç›´æ¥åˆå§‹åŒ–ä¸å¤åˆ¶åˆå§‹åŒ– å…ˆè¯´è¯´ç›´æ¥åˆå§‹åŒ–æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š æ³¨æ„ï¼Œæ„é€ å‡½æ•°æ²¡æœ‰åˆ›å»ºå¯¹è±¡ï¼Œåªè¿›è¡Œåˆå§‹åŒ–ã€‚ 1Date date(25); // ç›´æ¥åˆå§‹åŒ– ç¼–è¯‘å™¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡date ï¼› åˆå§‹åŒ–staticé™æ€æˆå‘˜ï¼› æœ€åè°ƒç”¨åŒ¹é…çš„æ„é€ å‡½æ•° Date(int day,int year=2022,int month=1)åˆå§‹åŒ–dateçš„éé™æ€æˆå‘˜ã€‚ åˆ—è¡¨åˆå§‹åŒ–ç±»ä¼¼ï¼Œåªæ˜¯åœ¨è°ƒç”¨æ„é€ å‡½æ•°å‰ï¼Œå¯èƒ½è¿˜ä¼šå¯¹éé™æ€æˆå‘˜è¿›è¡Œé›¶å€¼åˆå§‹åŒ–ã€‚ å¯¹äºå¤åˆ¶åˆå§‹åŒ–ï¼Œè¿˜æ¶‰åŠåˆ°ç¼–è¯‘å™¨ä¸ºæˆ‘ä»¬éšå¼å£°æ˜çš„å¤åˆ¶æ„é€ å‡½æ•°ã€‚ ä¸€ä¸ªç©ºç±»é»˜è®¤ä¼šæ·»åŠ ä»¥ä¸‹å‡½æ•°ï¼ŒåŒ…æ‹¬å¤åˆ¶æ„é€ å‡½æ•°ï¼š 12345678// ç¼ºçœæ„é€ å‡½æ•°Date();// ææ„å‡½æ•°~Date();// èµ‹å€¼è¿ç®—å‡½æ•°Date&amp; operator=(const Date&amp;);// å¤åˆ¶æ„é€ å‡½æ•° ï¼ˆcopy constructorï¼‰Date(Date const&amp; tmp); å…¶ä¸­å¤åˆ¶æ„é€ å‡½æ•°å®Œæ•´å®šä¹‰ä¸ºï¼š 123// æˆå‘˜åˆ—è¡¨æ–¹å¼ï¼Œä¸‹èŠ‚ä»‹ç»Date(Date const&amp; tmp):m_year(tmp.m_year),m_month(tmp.m_month),m_day(tmp.m_day) &#123;&#125; å›åˆ°å¤åˆ¶åˆå§‹åŒ–ï¼š 1Date date = Date(25); // å¤åˆ¶åˆå§‹åŒ– ä¸ºäº†=ä¸¤ä¾§æ“ä½œç±»å‹ä¸€è‡´ï¼Œç¼–è¯‘å™¨é¦–å…ˆåˆ›å»ºä¸€ä¸ªåŒ¿åå¯¹è±¡ï¼Œä¸ºæ–¹ä¾¿è®°ä¸ºtmpï¼› æ³¨ï¼šDate(25) æ˜¯ä¸€ç§åŒ¿åå¯¹è±¡åˆå§‹åŒ–æ–¹å¼ï¼Œå®ƒéšè—äº†å¯¹è±¡çš„åå­—ï¼Œç­‰ä»·äºï¼š 1Date tmp(25); // åŒ¿åå¯¹è±¡å‡è®¾ä¸ºtmp æ‰§è¡ŒDate(25)ï¼Œï¼ˆåŒ¿åå¯¹è±¡ä¸­çš„ï¼‰æ„é€ å‡½æ•° Date(int day,int year=2022,int month=1) åˆå§‹åŒ–ä¸´æ—¶å¯¹è±¡ï¼› ç¼–è¯‘å™¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡date ï¼› æœ€åç¼–è¯‘å™¨å†è°ƒç”¨ï¼ˆå¯¹è±¡dateä¸­ï¼‰æ‹·è´æ„é€ å‡½æ•°ï¼Œå°†ä¸´æ—¶åŒ¿åå¯¹è±¡tmpä½œä¸ºæ‹·è´æ„é€ å‡½æ•°å‚æ•° ï¼Œdate æ¯ä¸ªæˆå‘˜å€¼å¤åˆ¶ä¸´æ—¶åŒ¿åå¯¹è±¡æˆå‘˜ã€‚ åªè¦å¯¹è±¡åœ¨å£°æ˜æ—¶ç”¨äº†å¦ä¸€ä¸ªå¯¹è±¡ï¼ˆå¯èƒ½æ˜¯ç¼–è¯‘å™¨åˆ›å»ºçš„åŒ¿åå¯¹è±¡ï¼‰è¿›è¡Œåˆå§‹åŒ–ï¼Œå°±ä¼šè§¦å‘å¤åˆ¶æ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯å¤åˆ¶åˆå§‹åŒ–ã€‚ å¦ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬ä¸è¦æ‰§ç€äºè¡¨è±¡ï¼Œ=ä¸é‡è¦ï¼šå¤åˆ¶åˆå§‹åŒ–æ ¸å¿ƒåœ¨äºè°ƒç”¨å¤åˆ¶æ„é€ å‡½æ•°ï¼Œè€Œä¸æ˜¯è°ƒç”¨æ™®é€šæ„é€ å‡½æ•°åˆå§‹åŒ–ã€‚ ä¸‹é¢è¿™ç§æ–¹å¼è™½ç„¶æ²¡æœ‰= ï¼Œçœ‹èµ·æ¥åƒç›´æ¥åˆå§‹åŒ–ã€‚ä½†Date date5 å£°æ˜æ—¶ä½¿ç”¨äº†å¯¹è±¡date1 è¿›è¡Œåˆå§‹åŒ–ï¼Œæ‰€ä»¥ä¾æ—§æ˜¯å¤åˆ¶åˆå§‹åŒ–ã€‚ 1Date date5(date1); // å¤åˆ¶åˆå§‹åŒ– æ˜¾ç„¶ï¼Œè¿™ç§â€œå¤åˆ¶â€æ•ˆç‡å¯æƒ³è€Œè¨€æ˜¯ä½ä¸‹çš„ï¼Œå› ä¸ºå®ƒè¿˜å¯èƒ½ä¼šåˆ›å»ºä¸´æ—¶åŒ¿åå¯¹è±¡ã€‚ ä¸è¿‡æ ‡å‡†è§„å®šï¼Œä¸ºäº†æé«˜æ•ˆç‡ï¼Œå…è®¸ç¼–è¯‘å™¨åœ¨åˆé€‚çš„åœ°æ–¹è¿›è¡Œä¼˜åŒ–ï¼Œè·³è¿‡åˆ›å»ºä¸´æ—¶åŒ¿åå¯¹è±¡è¿™ä¸€æ­¥ï¼Œç›´æ¥è°ƒç”¨æ„é€ å‡½æ•°æ„é€ è¦åˆ›å»ºçš„å¯¹è±¡ã€‚ ä¸‹é¢4ä¸ªå¤åˆ¶åˆå§‹åŒ–å“ªäº›ä¼šæ‰§è¡Œå¤åˆ¶æ„é€ å‡½æ•°ï¼Ÿ 123456789101112131415161718192021222324252627class Date&#123;private: int m_year&#123;&#125;; int m_month&#123;&#125;; int m_day&#123;&#125;;public: Date() = default; Date(int day,int month=1,int year=2022) &#123; m_year=year;m_month=month;m_day=day; std::cout&lt;&lt; &quot;æ„é€ å‡½æ•°è¢«è°ƒç”¨&quot;&lt;&lt;std::endl; &#125;; Date(Date const&amp; tmp): m_year(tmp.m_year),m_month(tmp.m_month),m_day(tmp.m_day) &#123; std::cout&lt;&lt; &quot;å¤åˆ¶æ„é€ å‡½æ•°è¢«è°ƒç”¨&quot;&lt;&lt;std::endl; &#125;&#125;;int main()&#123; // éƒ½æ˜¯å¤åˆ¶åˆå§‹åŒ– Date date1 = 25; // 1 Date date2 = Date(25); // 2 Date date3 = Date&#123;25&#125;; // 3 Date date4 = date3; // 4&#125; ç»“æœå¯èƒ½ä¼šè®©ä½ æœ‰äº›æƒŠè®¶ï¼šé™¤äº†æ–¹å¼4 ï¼Œå…¶ä½™éƒ½æ²¡ç”¨è°ƒç”¨å¤åˆ¶æ„é€ å‡½æ•°ï¼š 123456[root@roy-cpp test]# g++ -std=c++11 test.cpp -o test.out[root@roy-cpp test]# ./test.out æ„é€ å‡½æ•°è¢«è°ƒç”¨æ„é€ å‡½æ•°è¢«è°ƒç”¨æ„é€ å‡½æ•°è¢«è°ƒç”¨å¤åˆ¶æ„é€ å‡½æ•°è¢«è°ƒç”¨ ä¹Ÿå°±æ˜¯é™¤äº†æ–¹å¼4 ï¼Œç¼–è¯‘å™¨éƒ½è¿›è¡Œäº†ä¼˜åŒ–ï¼ˆ1ã€2ã€3ç”Ÿæˆäº†åŒ¿åå¯¹è±¡ï¼Œç¼–è¯‘å™¨å¯ä»¥è·³è¿‡ï¼‰ã€‚æ‰€ä»¥æ–¹å¼1ã€2ã€3ç­‰ä»·äºï¼š 123Date date1(25);Date date2(25);Date date3(25); ä¸ä»…å¦‚æ­¤ï¼Œå¤åˆ¶åˆå§‹åŒ–æ•ˆç‡ä½çš„åŒæ—¶è¿˜å¹¶ä¸å®‰å…¨ã€‚ å› ä¸ºè¿™ç§æ‹·è´æ–¹å¼æ˜¯æµ…æ‹·è´ï¼Œå¦‚æœå­˜åœ¨æŒ‡é’ˆä¹Ÿåªæ˜¯å¤åˆ¶å…¶å€¼ï¼Œä¸ä¼šå¤åˆ¶å…¶æŒ‡å‘çš„åŒºåŸŸã€‚ æ·±æ‹·è´å’Œæµ…æ‹·è´ æµ…æ‹·è´ä¼šå¸¦æ¥ä»€ä¹ˆé—®é¢˜ï¼Ÿ æµ…æ‹·è´çš„æŒ‡é’ˆå’ŒåŸæ¥çš„æŒ‡é’ˆæŒ‡å‘åŒä¸€å—åœ°å€ï¼Œå¦‚æœåŸæ¥çš„æŒ‡é’ˆæ‰€æŒ‡å‘çš„èµ„æºé‡Šæ”¾äº†ï¼Œé‚£ä¹ˆå†é‡Šæ”¾æµ…æ‹·è´çš„æŒ‡é’ˆçš„èµ„æºå°±ä¼šå‡ºç°double freeã€‚ 12345678910111213class Test&#123; int *p&#123;nullptr&#125;; public: Test()&#123;p = new int(4);&#125; ~Test()&#123;delete p;&#125; &#125;;int main()&#123; Test ob1; Test ob2 = ob1;&#125; ç¼–è¯‘æ‰§è¡Œå‡ºé”™ï¼š ç»™å„ä½çœ‹å®˜åˆ†æä¸‹åŸå› ï¼š Test ob1æ„é€ ç±»å¯¹è±¡ob1ï¼Œè¿™æ˜¯è°ƒç”¨äº†æ„é€ å‡½æ•°ï¼Œä¸ºob1.påˆ†é…äº†å†…å­˜ç©ºé—´ï¼› Test ob2 = ob1ï¼Œè°ƒç”¨å¤åˆ¶æ„é€ å‡½æ•°æ„é€ ç±»å¯¹è±¡ob2 = ob1; main()å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œå…¨å±€å‡½æ•°çš„è¿è¡Œå‘¨æœŸç»“æŸï¼Œç³»ç»Ÿå›æ”¶å†…å­˜ï¼ˆææ„å‡½æ•°é™¤äº†æ˜¾ç¤ºdeleteæ‰§è¡Œï¼Œå¯¹è±¡ç¦»å¼€ä½œç”¨èŒƒå›´ä¼šè‡ªåŠ¨æ‰§è¡Œï¼‰ï¼š å…ˆè°ƒç”¨ob1çš„ææ„å‡½æ•°ï¼Œå°†ob1.pæŒ‡å‘çš„å†…å­˜é‡Šæ”¾ï¼› å†è°ƒç”¨ob2çš„ææ„å‡½æ•°ï¼Œå°†ob2.pæŒ‡å‘çš„å†…å­˜é‡Šæ”¾ã€‚ ä½†æ˜¯ç”±äºob2.pçš„å†…å­˜å·²ç»åœ¨ä¸Šä¸€æ­¥è¢«é‡Šæ”¾ï¼Œæ‰€ä»¥é€ æˆäº†double freeã€‚ è§£å†³è¿™ä¸ªé—®é¢˜ä¹Ÿå¾ˆç®€å•ï¼š ç¦æ­¢ä½¿ç”¨æ‹·è´æ„é€ å‡½æ•°ï¼š ä½¿ç”¨deleteå…³é”®å­—ç¦æ­¢ï¼ˆæ¨èï¼‰ï¼š 12// C++11æ–°ç‰¹æ€§deleteTest(Test &amp;ob) = delete; æˆ–å£°æ˜ä¸ºprivateï¼š 12private: // å°è¯•è°ƒç”¨ç§æœ‰æˆå‘˜å‡½æ•°ä¼šå‡ºé”™ Test(Test &amp;ob)&#123;...&#125;; è®©ä½¿ç”¨è€…æ— æ³•ä½¿ç”¨é»˜è®¤æ„é€ å‡½æ•°ã€‚ æ·±æ‹·è´ï¼š è‡ªå·±æ˜¾ç¤ºå£°æ˜å¤åˆ¶æ„é€ å‡½æ•°ï¼Œå¯¹æˆå‘˜å˜é‡å®ç°æ·±æ‹·è´ï¼ˆå¤åˆ¶æŒ‡é’ˆå†…å­˜åŒºåŸŸå€¼ï¼‰ã€‚ æ·±æ‹·è´ä¸ä»…æ‹·è´å€¼ï¼Œè¿˜å¼€è¾Ÿå‡ºä¸€å—æ–°çš„ç©ºé—´ç”¨æ¥å­˜æ”¾æ–°çš„å€¼ï¼Œå³ä½¿åŸå…ˆçš„å¯¹è±¡è¢«ææ„æ‰ï¼Œé‡Šæ”¾å†…å­˜äº†ä¹Ÿä¸ä¼šå½±å“åˆ°æ·±æ‹·è´å¾—åˆ°çš„å€¼ã€‚ 123456789101112131415161718192021class Test&#123; int *p&#123;nullptr&#125;; public: Test() &#123; p = new int[4](); &#125; ~Test()&#123;delete p;&#125; Test(const Test&amp; other) // å®ç°æ·±æ‹·è´ &#123; if(p) // pä¸ç©º delete p; if(other.p) // other.pä¸ç©º &#123; p = new int[4](); for(int i = 0; i&lt; 4 ; i++) p[i] = other.p[i]; &#125; &#125; &#125;; æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ æ€ä¹ˆåˆå§‹åŒ–ç±»ç§æœ‰æˆå‘˜ï¼Ÿ çœ‹è¿‡å‰é¢æ–‡ç« çš„ä½ è‚¯å®šè„±å£è€Œå‡ºï¼šæ„é€ å‡½æ•°å‘€ï¼ è¿˜æœ‰å—ï¼Ÿå¯¹äº†ï¼Œè¿˜æœ‰åˆ—è¡¨åˆå§‹åŒ–ã€‚å°±åƒè¿™æ ·ï¼š 1234567class Date&#123;private: int m_year&#123; 1900 &#125;; int m_month&#123; 1 &#125;; int m_day&#123; 1 &#125;; ... ä½†å¦‚æœç§æœ‰æˆå‘˜è¢«constä¿®é¥°å‘¢ï¼Ÿ åˆ—è¡¨åˆå§‹åŒ–ä¾æ—§å¯ä»¥ï¼š 123const int m_year&#123; 1900 &#125;;const int m_month&#123; 1 &#125;;const int m_day&#123; 1 &#125;; ä½†æ˜¯å¦‚æœç”¨æˆ·æƒ³ä½¿ç”¨æ„é€ å‡½æ•°åˆå§‹åŒ–ï¼š 123// å¸¦å‚æ•°çš„æ„é€ å‡½æ•°ï¼Œå­˜åœ¨é»˜è®¤å€¼Date(int day,int year,int month) &#123;m_year=year;m_month=month;m_day=day;&#125;; å‡ºé”™ï¼š 12const int Date::m_yearexpression must be a modifiable lvalue ç­‰ä»·äºï¼š 12const int m_year&#123; 1900 &#125;;m_year = year; // å¸¸é‡ä¸èƒ½ä¿®æ”¹ï¼Œå‡ºé”™ è¿™ç§æƒ…å†µå°±éœ€è¦ç”¨åˆ°æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ã€‚ æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨å¯ä»¥è®©ç”¨æˆ·åˆå§‹åŒ–ç§æœ‰å˜é‡ï¼ŒåŒ…æ‹¬å¸¸é‡ã€‚ æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨åœ¨æ„é€ å‡½æ•°åæ¥: è¿›è¡Œåˆå§‹åŒ–ã€‚ 123456789101112131415161718192021222324#include &lt;iostream&gt;class Date&#123;private: const int m_year&#123; 1900 &#125;; const int m_month&#123; 1 &#125;; const int m_day&#123; 1 &#125;;public: Date() = default; Date(int year,int month,int day ):m_year(year),m_month(month),m_day(day) // å¸¦å‚æ•°çš„æ„é€ å‡½æ•°ï¼Œå­˜åœ¨é»˜è®¤å€¼ &#123;&#125; void printDay() &#123; std::cout&lt;&lt;m_day&lt;&lt;std::endl; &#125;&#125;;int main()&#123; Date d&#123;2022,1,26&#125;; d.printDay(); // 26ï¼Œç¡®å®é‡æ–°åˆå§‹åŒ–äº† return 0;&#125; æˆå‘˜åˆå§‹åŒ–è¿˜å¯ä»¥åˆå§‹åŒ–æ•°ç»„æˆå‘˜ã€‚ åœ¨ C++11ä¹‹å‰ï¼Œåªèƒ½é€šè¿‡æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨å°†æ•°ç»„æˆå‘˜å½’é›¶ï¼š 1234567891011class Something&#123;private: const int m_array[5];public: Something(): m_array &#123;&#125; // åªå½’é›¶ &#123; &#125;&#125;; ç°åœ¨è¿˜å¯ä»¥èµ‹å€¼ï¼š 1234567891011class Something&#123;private: const int m_array[5];public: Something(): m_array &#123;1,2,3,4,5&#125; // å¯¹æ•°ç»„è¿›è¡Œèµ‹å€¼ &#123; &#125;&#125;; æœ€åæ³¨æ„ï¼Œåˆå§‹åŒ–åˆ—è¡¨ä¸­çš„å˜é‡æ˜¯æŒ‰ç…§ç±»å£°æ˜é¡ºåºè¿›è¡Œåˆå§‹åŒ–ï¼Œè€Œä¸æ˜¯åˆ—è¡¨æŒ‡å®šçš„é¡ºåºã€‚ æˆå‘˜åˆ—è¡¨åˆå§‹åŒ–æ›´å¿«ï¼Ÿ å‡†ç¡®æ¥è¯´ï¼š å¯¹äºå†…ç½®æ•°æ®ç±»å‹ï¼Œå¤åˆç±»å‹ï¼ˆæŒ‡é’ˆï¼Œå¼•ç”¨ï¼‰,æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨å’Œæ„é€ å‡½æ•°ä½“å†…è¿›è¡Œæ€§èƒ½æ²¡æœ‰ä»€ä¹ˆå·®åˆ«ï¼› å¯¹äºç”¨æˆ·è‡ªå®šä¹‰ç±»å‹ï¼ˆç±»ç±»å‹ï¼‰ï¼Œæˆå‘˜åˆ—è¡¨åˆå§‹åŒ–ä¼šå¿«å¾ˆå¤šã€‚ è¿™æ˜¯å› ä¸ºå¯¹äºç”¨æˆ·è‡ªå®šä¹‰ç±»å‹ï¼Œä½¿ç”¨æˆå‘˜åˆ—è¡¨åˆå§‹åŒ–ä¼šå°‘ä½¿ç”¨ä¸€æ¬¡æ„é€ å‡½æ•°ã€‚ 1234567891011121314151617// å‡†å¤‡å¥½classAclass classA &#123;public: // é»˜è®¤æ„é€ å‡½æ•° classA() &#123; cout &lt;&lt; &quot;classA()&quot; &lt;&lt; endl; &#125; // å¤åˆ¶æ„é€ å‡½æ•° classA(const classA&amp; a) &#123; cout &lt;&lt; &quot;copy classA()&quot; &lt;&lt; endl; &#125; // ææ„å‡½æ•° ~classA() &#123; cout &lt;&lt; &quot;~classA()&quot; &lt;&lt; endl; &#125; // é‡è½½èµ‹å€¼è¿ç®—ç¬¦ classA&amp; operator=(const classA&amp; a) &#123; cout &lt;&lt; &quot;operator= in classA&quot; &lt;&lt; endl; return *this; &#125;&#125;; ç†è§£è¿™ä¸ªé—®é¢˜éœ€è¦ä¸€ç‚¹å‰ç½®çŸ¥è¯†ï¼š ä»€ä¹ˆæ—¶å€™ä¼šä½¿ç”¨å¤åˆ¶æ„é€ å‡½æ•°ï¼Ÿå£°æ˜ä¸€ä¸ªå¯¹è±¡æ—¶ç”¨å¦å¤–ä¸€ä¸ªå·²å­˜åœ¨çš„å¯¹è±¡è¿›è¡Œåˆå§‹åŒ–æ—¶ï¼Œä¼šè°ƒç”¨å¤åˆ¶æ„é€ å‡½æ•°ã€‚ 123A a;A b = A(); // ç¼–è¯‘å™¨ç”ŸæˆåŒ¿åï¼Œç„¶åè°ƒç”¨å¤åˆ¶æ„é€ å‡½æ•°åˆå§‹bï¼ˆä¸è¿‡ç¼–è¯‘å™¨ä¼šä¼˜åŒ–ï¼‰A b = a; // å·²å­˜åœ¨çš„å¯¹è±¡aè°ƒç”¨å¤åˆ¶æ„é€ å‡½æ•°åˆå§‹åŒ–b ä»€ä¹ˆæ—¶å€™ä¼šä½¿ç”¨èµ‹å€¼è¿ç®—ç¬¦ï¼Ÿ é‡è½½=èµ‹å€¼è¿ç®—ç¬¦åœ¨ä¸‹ç« ä»‹ç»ã€‚ å½“ä¸€ä¸ªå·²å­˜åœ¨çš„å¯¹è±¡ç”¨å¦å¤–ä¸€ä¸ªå·²å­˜åœ¨çš„å¯¹è±¡è¿›è¡Œèµ‹å€¼æ—¶ã€‚ 123A a;A b;b = a; // a,bä¹‹å‰å°±å·²å­˜åœ¨ï¼Œæ­¤æ—¶aè°ƒç”¨èµ‹å€¼è¿ç®—ç¬¦å‡½æ•°å¯¹bè¿›è¡Œèµ‹å€¼ ç±»å¯¹è±¡æˆå‘˜åˆå§‹åŒ–åŠ¨ä½œæ—©äºæ„é€ å‡½æ•°ä½“æ‰§è¡Œå‰ï¼Œå’Œæˆå‘˜åˆ—è¡¨åŒæ—¶å‘ç”Ÿã€‚ æœ‰äº†è¿™äº›åŸºç¡€çŸ¥è¯†ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸ºä»€ä¹ˆæˆå‘˜åˆ—è¡¨åˆå§‹åŒ–æ›´å¿«ã€‚ æˆå‘˜åˆ—è¡¨åˆå§‹åŒ–æ–¹å¼ï¼š 12345678910111213class classC&#123;public: classC(const classA&amp; a) : mA(a) &#123;&#125; // å¯¹mAè¿›è¡Œæˆå‘˜åˆ—è¡¨åˆå§‹åŒ–private: classA mA;&#125;;int main()&#123; classA class_a; classC c(class_a);&#125; è¾“å‡ºï¼š 1234classA()copy classA()~classA()~classA() ä»£ç 11ã€12è¡Œå¤„ç­‰ä»·äºï¼š 12classA class_a; // è¾“å‡ºï¼šclassA()ï¼Œæ‰§è¡Œæ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–å¯¹è±¡class_aclassA mA = a; // è¾“å‡ºï¼šcopy classA()ï¼Œä¹Ÿæ˜¯è°ƒç”¨å¤åˆ¶æ„é€ å‡½æ•°æ–¹å¼ å¯ä»¥çœ‹åˆ°ï¼Œç±»å®ä¾‹åŒ–ç»™å¯¹è±¡åˆ†é…å†…å­˜æ—¶ï¼ˆæ¯”å¦‚mAï¼‰ï¼š åŒæ—¶æ‰§è¡Œæˆå‘˜åˆ—è¡¨åˆå§‹åŒ–å¯¹mAJè¿›è¡Œåˆå§‹åŒ–ï¼Œå³classA mA = a ï¼› å†æ‰§è¡Œæ„é€ å‡½æ•°ä½“ã€‚ æ„é€ å‡½æ•°ä½“åˆå§‹åŒ– 12345678910111213141516class classC&#123;public: classC(const classA&amp; a) &#123; mA = a; // å‡½æ•°ä½“å†…åˆå§‹åŒ– &#125;private: classA mA;&#125;;int main()&#123; classA class_a; classC c(class_a);&#125; è¾“å‡ºï¼š 12345classA()classA()operator= in classA~classA()~classA() ä¸Šè¿°ä»£ç 14ã€15è¡Œå¤„ç­‰ä»·äºï¼š 123classA class_a; // è¾“å‡ºï¼šclassA()ï¼Œæ‰§è¡Œæ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–å¯¹è±¡class_aclassA mA; // è¾“å‡ºï¼šclassA()ï¼Œæ‰§è¡Œæ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–å¯¹è±¡mAmA = a; // è¾“å‡ºï¼šoperator= in classAï¼Œä¸€ä¸ªå·²å­˜åœ¨çš„å¯¹è±¡åˆå§‹åŒ–å¦å¤–ä¸€ä¸ªå·²å­˜åœ¨çš„å¯¹è±¡ï¼Œä½¿ç”¨èµ‹å€¼åˆå§‹åŒ– å¯ä»¥çœ‹åˆ°ï¼š ç”±äºç±»æˆå‘˜åˆ†é…å†…å­˜æ—©äºæ„é€ å‡½æ•°ä½“æ‰§è¡Œï¼Œå…ˆæ‰§è¡ŒclassA mAï¼Œè°ƒç”¨é»˜è®¤æ„é€ å‡½æ•°å¯¹mAè¿›è¡Œé»˜è®¤åˆå§‹åŒ– ï¼› å†æ‰§è¡Œæ„é€ å‡½æ•°ä½“ ï¼Œä¹Ÿå°±æ˜¯mA = aï¼Œè¿™ä¸ªæ—¶å€™æ˜¯ç”¨èµ‹å€¼=å‡½æ•°è¿›è¡Œé‡æ–°èµ‹å€¼ï¼› è€Œæˆå‘˜åˆ—è¡¨åˆå§‹åŒ–æ–¹å¼ï¼Œåœ¨ç±»æˆå‘˜åˆ†é…å†…å­˜æ—¶æ—¶åŒæ—¶ä½¿ç”¨å¤åˆ¶æ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ã€‚ æ‰€ä»¥ç›¸æ¯”ä¹‹ä¸‹ï¼Œæˆå‘˜åˆ—è¡¨åˆå§‹åŒ–å°‘è°ƒç”¨äº†ä¸€æ¬¡æ„é€ å‡½æ•°å¯¹ç±»å¯¹è±¡æˆå‘˜ï¼ˆmAï¼‰è¿›è¡Œåˆå§‹åŒ–ï¼Œæˆå‘˜åˆ—è¡¨åˆå§‹åŒ–æ•ˆç‡æ›´é«˜ã€‚ æœ€ä½³å®è·µï¼šåˆå§‹åŒ–é€‰æ‹© è¿„ä»Šä¸ºæ­¢æˆ‘ä»¬æ¥è§¦äº†å¥½å‡ ç§åˆå§‹åŒ–æ–¹å¼ï¼š ç±»å®ä¾‹æ–¹å¼ï¼š åˆ—è¡¨åˆå§‹åŒ– ç›´æ¥åˆå§‹åŒ– å¤åˆ¶åˆå§‹åŒ– std::move ç±»å£°æ˜åˆå§‹åŒ–ä½ç½®ï¼š æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨åˆå§‹åŒ– æ™®é€šæ„é€ å‡½æ•°ä½“å†…åˆå§‹åŒ– æ€ä¹ˆè¿›è¡Œé€‰æ‹©ï¼Ÿ ç±»å£°æ˜åˆå§‹åŒ–ä½ç½®ï¼š ç±»ç±»å‹æˆå‘˜ã€å¸¸é‡æˆå‘˜ã€å¼•ç”¨æˆå‘˜ä¼˜å…ˆè€ƒè™‘æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ã€‚å› ä¸ºæˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ä¸åœ¨å‡½æ•°ä½“å†…ï¼Œæ•ˆç‡æ›´é«˜ï¼› ï¼ˆè¡¥å……å…¶å®ƒæƒ…å†µï¼šå½“è°ƒç”¨ä¸€ä¸ªåŸºç±»çš„æ„é€ å‡½æ•°ï¼Œè€Œæ„é€ å‡½æ•°æ‹¥æœ‰ä¸€ç»„å‚æ•°æ—¶ï¼›å½“è°ƒç”¨ä¸€ä¸ªæˆå‘˜ç±»çš„æ„é€ å‡½æ•°ï¼Œè€Œå®ƒæ‹¥æœ‰ä¸€ç»„å‚æ•°ã€‚ï¼‰ å¦‚æœç±»æˆå‘˜è¿˜éœ€è¦åœ¨è°ƒç”¨æ„é€ å‡½æ•°å‰å°±æä¾›é»˜è®¤å€¼ï¼Œæˆå‘˜å£°æ˜æ—¶ä½¿ç”¨&#123;&#125;ã€‚ 1int m_year&#123; 1900 &#125;; æœ€åè€ƒè™‘æ™®é€šæ„é€ å‡½æ•°ã€‚ ç±»å®ä¾‹æ–¹å¼ï¼š ä¼˜å…ˆè€ƒè™‘åˆ—è¡¨åˆå§‹åŒ–ã€‚å› ä¸ºåˆ—è¡¨åˆå§‹åŒ–è¿˜å¯èƒ½ä¼šè¿›è¡Œé›¶å€¼åˆå§‹åŒ–ï¼Œæ›´å®‰å…¨ï¼Œä½†æ•ˆç‡ç›¸æ¯”ç›´æ¥åˆå§‹åŒ–æ›´ä½ç‚¹ã€‚ å¦‚æœæ˜¯ä¸´æ—¶å¯¹è±¡åˆå§‹åŒ–åœºæ™¯ï¼Œä½¿ç”¨std::moveç§»åŠ¨æ„é€ å‡½æ•°åˆå§‹åŒ–ã€‚ æ…é‡ä½¿ç”¨å¤åˆ¶åˆå§‹åŒ–ã€‚å› ä¸ºè¿™ç§æ–¹å¼è¿˜ä¼šåˆ›å»ºä¸´æ—¶å¯¹è±¡ï¼Œæ•ˆç‡æ¯”è¾ƒä½ï¼Œè€Œä¸”ä¸å®‰å…¨ï¼ˆæµ…æ‹·è´ï¼‰â€”â€”ä¸€èˆ¬æ˜¯éœ€è¦æ˜¾å¼å£°æ˜å¤åˆ¶æ„é€ å‡½æ•°å®ç°å¯¹è±¡å¤åˆ¶æ—¶ï¼ˆæ·±æ‹·è´ï¼‰æ‰ä½¿ç”¨ã€‚ 5.2.4 ç§»åŠ¨æ„é€ å‡½æ•° ä»€ä¹ˆæ˜¯ç§»åŠ¨æ„é€ å‡½æ•°ï¼Ÿ C++11ä¹‹å‰ï¼Œå¯¹è±¡çš„æ‹·è´æ§åˆ¶ç”±ä¸‰ä¸ªå‡½æ•°å†³å®šï¼šæ‹·è´æ„é€ å‡½æ•°ï¼ˆCopy Constructorï¼‰ã€æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ï¼ˆCopy Assignment operatorï¼‰å’Œææ„å‡½æ•°ï¼ˆDestructorï¼‰ã€‚ C++11æ–°å¢åŠ äº†ä¸¤ä¸ªå‡½æ•°ï¼šç§»åŠ¨æ„é€ å‡½æ•°ï¼ˆMove Constructorï¼‰å’Œç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ï¼ˆMove Assignment operatorï¼‰ã€‚ åœ¨å‰é¢æˆ‘ä»¬ä»‹ç»äº†ä¸¤ç§æ–¹æ³•æ¥é¿å…æŒ‡é’ˆæµ…æ‹·è´é€ æˆdouble freeçš„é—®é¢˜ã€‚ åœ¨è¿™é‡Œæˆ‘ä»¬ä»‹ç»ç¬¬ä¸‰ç§æ–¹æ³•ï¼šè¢«å¤åˆ¶çš„å¯¹è±¡çš„æŒ‡é’ˆæˆå‘˜ç½®ä¸ºNULLï¼š æŒ‡é’ˆçš„æµ…æ‹·è´ä¹‹æ‰€ä»¥å±é™©ï¼Œç©¶å…¶æœ¬è´¨æ˜¯å› ä¸ºè¢«ææ„å‡½æ•°é‡Šæ”¾äº†ä¸¤æ¬¡ã€‚ä¾‹å¦‚ä¸Šè¿°æŒ‡é’ˆp çš„ç©ºé—´å°±è¢«é‡Šæ”¾äº†ä¸¤æ¬¡ï¼Œå¯¼è‡´double freeã€‚ å¦‚æœè¢«å¤åˆ¶çš„å¯¹è±¡ä¸å†è¢«ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¤åˆ¶æ„é€ å‡½æ•°è¿›è¡Œæµ…æ‹·è´åå°†æŒ‡é’ˆæˆå‘˜ç½®ä¸ºNULLï¼Œææ„æ—¶åˆ¤æ–­æŒ‡é’ˆè¢«ç½®ä¸ºNULLå°±ä¸è¢«é‡Šæ”¾ã€‚è¿™æ ·å°±å¯ä»¥é¿å…double freeã€‚ 1234567891011121314151617181920212223242526class Test&#123; int *p &#123;nullptr&#125;; public: Test()&#123; p = new int(4); &#125; Test(Test&amp; other) &#123; if(p) delete p; p = other.p; // æµ…æ‹·è´ other.p = nullptr; // æµ…æ‹·è´åå°†æ‹·è´å¯¹è±¡æŒ‡é’ˆæˆå‘˜ç½®ä¸ºNULL &#125; ~Test() &#123; if(p) // pä¸ç©ºï¼Œææ„å‡½æ•°è¿›è¡Œåˆ¤æ–­ &#123; delete p; &#125; &#125;&#125;;int main()&#123; Test ob1; Test ob2 = ob1; // ok&#125; å¦ä¸€æ–¹é¢ï¼Œè¿™é‡Œob2 ç›´æ¥ä½¿ç”¨äº†ob1 çš„ç©ºé—´ï¼ˆob2.pæŒ‡å‘çš„æ˜¯ob1.påŸæ¥çš„ç©ºé—´ï¼‰ï¼Œä¸å°±å¤§å¤§åœ°é™ä½å†…å­˜åˆ†é…æˆæœ¬å—ï¼Ÿ è¿™ä¹Ÿå°±æ˜¯ç§»åŠ¨æ„é€ å‡½æ•°çš„åˆè¡·ï¼š å¯¹äºç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„ä¸´æ—¶å¯¹è±¡ï¼Œå¾€å¾€åªç”¨äºä¼ é€’æ•°æ®ï¼ˆæ²¡æœ‰å…¶å®ƒçš„ç”¨å¤„ï¼‰ï¼Œå¹¶ä¸”ä¼šå¾ˆå¿«ä¼šè¢«é”€æ¯ã€‚å› æ­¤åœ¨ä½¿ç”¨ä¸´æ—¶å¯¹è±¡åˆå§‹åŒ–æ–°å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶åŒ…å«çš„æŒ‡é’ˆæˆå‘˜æŒ‡å‘çš„å†…å­˜èµ„æºç›´æ¥ç§»ç»™æ–°å¯¹è±¡æ‰€æœ‰ï¼Œæ— éœ€å†æ–°æ‹·è´ä¸€ä»½ï¼Œè¿™å¤§å¤§æé«˜äº†åˆå§‹åŒ–çš„æ‰§è¡Œæ•ˆç‡ã€‚ ä¸Šé¢çš„æ‹·è´æ„é€ å‡½æ•°å·²ç»å¯ä»¥ç§°ä¸ºæ˜¯ç§»åŠ¨æ„é€ å‡½æ•°ã€‚ ä½†è¿™ç§æ–¹å¼ä¹Ÿæœ‰å±€é™æ€§ï¼š ä»…é™äºä¸€ä¸ªå¯¹è±¡è¢«å¤åˆ¶åä¸å†è¢«ä½¿ç”¨çš„åœºæ™¯ï¼Œæ¯”å¦‚è¿™é‡Œob1ï¼Œå› ä¸ºob1.pæŒ‡å‘å†…å­˜å·²ç»è¢«ç½®ä¸ºNULLï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¸Œæœ›æ¥å—çš„å¼•ç”¨å¯¹è±¡æ˜¯ä¸€ä¸ªå³å€¼ï¼ˆå³å€¼åœ¨è¡¨è¾¾å¼ä¸­äº§ç”Ÿï¼Œè¿ç®—ç»“æŸåç«‹å³æ¶ˆå¤±ï¼Œæœ‰ç€â€œé˜…åå³ç„šâ€çš„ç‰¹æ€§ï¼‰ã€‚ ä½†æ„é€ å‡½æ•°å‚æ•°æ— æ³•å£°æ˜ä¸ºconst Test&amp; other ï¼Œè™½ç„¶å¯ä»¥æ¥å—å³å€¼å¼•ç”¨äº†ï¼ˆéconstå¼•ç”¨å¿…é¡»ç”¨å·¦å€¼åˆå§‹åŒ–ï¼‰ï¼Œä½†other.p = nullptr ä¿®æ”¹ä¼šç¼–è¯‘å‡ºé”™ã€‚ æœ‰æ²¡æœ‰åŠæ³•ï¼Œè®©ç§»åŠ¨æ„é€ å‡½æ•°å‚æ•°èƒ½æ¥å—å³å€¼å¼•ç”¨ï¼Œåˆèƒ½è¿›è¡Œä¿®æ”¹ï¼Œæœ€å¥½æ˜¯åªæ¥å—å³å€¼å¼•ç”¨ï¼Ÿ è¿™ä¸ªæ—¶å€™å³å€¼å¼•ç”¨å’Œstd::move ä¾¿æ´¾ä¸Šäº†ç”¨å¤„ã€‚ å³å€¼å¼•ç”¨å’Œstd::move è¯·çœ‹ä¸‹ä¾‹ã€‚ 12345678910111213141516171819202122232425262728293031323334class Test&#123; int *p&#123;nullptr&#125;; public: Test()&#123;p = new int(4);&#125; Test(Test&amp; other) &#123; cout&lt;&lt; &quot;å¤åˆ¶æ„é€ å‡½æ•°ï¼ˆæµ…æ‹·è´ï¼‰&quot;&lt;&lt;endl; if(p) delete p; p = other.p; // æµ…æ‹·è´ other.p = nullptr; // ç½®ä¸ºnull &#125; Test(Test&amp;&amp; other) // ä½¿ç”¨å³å€¼å¼•ç”¨ &#123; cout&lt;&lt; &quot;ç§»åŠ¨æ„é€ å‡½æ•°&quot;&lt;&lt;endl; if(p) delete p; p = other.p; // æµ…æ‹·è´ other.p = nullptr; // ç½®ä¸ºnull &#125; ~Test() &#123; if(p) // pä¸ç©º &#123; delete p; &#125; &#125;&#125;;int main()&#123; Test ob1; Test ob2 = std::move(ob1); // æ„é€ å‡½æ•°å‚æ•°æ¥å—å³å€¼&#125; è¾“å‡ºï¼š 1ç§»åŠ¨æ„é€ å‡½æ•° å¯ä»¥çœ‹åˆ°ç§»åŠ¨æ„é€ å‡½æ•°å’Œæˆ‘ä»¬ä¹‹å‰å®ç°çš„å¤åˆ¶æ„é€ å‡½æ•°ï¼ˆæµ…æ‹·è´ï¼‰åŸºæœ¬ä¸€è‡´ã€‚é™¤äº†ï¼š å£°æ˜æ—¶ï¼ŒTest(Test&amp;&amp; other) çš„&amp;&amp; ï¼Œ&amp;&amp; è¡¨ç¤ºå³å€¼å¼•ç”¨ï¼Œè¡¨ç¤ºå‚æ•°åªæ¥æ”¶å³å€¼ï¼› åœ¨æœ¬ä¾‹ä¸­ï¼Œå¦‚æœä½ å°è¯•ï¼š 12345int main()&#123; Test ob1; Test ob2 = ob1;&#125; è¾“å‡ºï¼š 1å¤åˆ¶æ„é€ å‡½æ•°ï¼ˆæµ…æ‹·è´ï¼‰ å› ä¸ºob1 æ˜¯å³å€¼ï¼Œä¸ä¼šæ‰§è¡Œç§»åŠ¨æ„é€ å‡½æ•°ã€‚ å…¶å®ƒä¾‹å­ï¼š 123int a = 1;const int&amp;&amp; pb = a; // errorï¼Œåªèƒ½æ¥å—å³å€¼ï¼Œaæ˜¯å·¦å€¼const int&amp;&amp; pc = 2; // ok ä½¿ç”¨æ—¶ï¼ŒTest ob2 = std::move(ob1) çš„std::move ï¼Œstd::moveè¡¨ç¤ºå°†ä¸€ä¸ªå·¦å€¼è½¬æ¢ä¸ºå³å€¼ã€‚ è¿™é‡Œæ˜¯å°†ob1 è½¬æ¢ä¸ºå³å€¼ã€‚ä¸Šä¸ªä¾‹å­ä¸­ä¹Ÿå¯ä»¥è¿›è¡Œè½¬æ¢ï¼š 1int&amp;&amp; pb = std::move(a); // ok std::move å®é™…åªæ˜¯ä¸ªç±»å‹è½¬æ¢å™¨ï¼Œå®ç°å¦‚ä¸‹ï¼š 123456template &lt;typename T&gt;typename remove_reference&lt;T&gt;::type&amp;&amp; move(T&amp;&amp; t)&#123; // æ˜¾ç¤ºç±»å‹è½¬æ¢ï¼Œç±»å‹Tè½¬æ¢ä¸ºtype return static_cast&lt;typename remove_reference&lt;T&gt;::type&amp;&amp;&gt;(t);&#125; ä¹Ÿå°±æ˜¯std::move å¯ä»¥ç†è§£ä¸ºï¼š 12int&amp;&amp; pb = std::move(a);int&amp;&amp; pb = (int&amp;&amp;)a; std::move å•ç‹¬å‡ºç°æ²¡æœ‰æ„ä¹‰ï¼Œå®ƒåªå°†å·¦å€¼å¯¹è±¡è½¬æ¢ä¸ºå³å€¼ï¼Œè¡¨æ˜è¿™ä¸ªåŸæœ¬çš„å·¦å€¼å¯¹è±¡ä¸ä¼šå†è¢«éœ€è¦æˆ–ä½¿ç”¨ã€‚å®ƒæœ¬èº«ä¸ä¼šå¯¹å¯¹è±¡åšä»»ä½•äº‹ï¼Œå…·ä½“çš„ç§»åŠ¨å·¥ä½œç”±å¤–é¢ä»¥å³å€¼ä¸ºå½¢å‚çš„é‡è½½å‡½æ•°è¿›è¡Œã€‚ ä¸€å¥è¯æ€»ç»“ï¼šstd::move åªè¿›è¡Œäº†ç§»åŠ¨å‰çš„å‡†å¤‡å·¥ä½œï¼ˆè¿”å›ä¸€ä¸ªå³å€¼ï¼‰ï¼Œé…åˆé‡è½½äº†å³å€¼ä¸ºå½¢å‚çš„å‡½æ•°å¯¹å¯¹è±¡è¿›è¡Œç§»åŠ¨ã€‚ åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼š 12345int main()&#123; Test ob1; Test ob2 = std::move(ob1); &#125; std::move(ob1) å°†å¯¹è±¡ob1 è½¬æ¢ä¸ºå³å€¼æˆ–è€…è¯´å°†äº¡å€¼ï¼Œä¸ºè½¬ç§»å¯¹è±¡ob1æ‰€æœ‰æƒåšå‡†å¤‡ï¼› ç„¶ååŒ¹é…äº†é‡è½½äº†å³å€¼å¼•ç”¨çš„ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œç”±ç§»åŠ¨æ„é€ å‡½æ•°å®Œæˆâ€œç§»åŠ¨â€è¿™ä¸ªåŠ¨ä½œï¼š 12p = other.p; // æµ…æ‹·è´other.p = nullptr; // ç½®ä¸ºnull æ›´æ·±åˆ»ç†è§£std::move é™¤äº†è¿”å›ä¸€ä¸ªå³å€¼ï¼Œæ²¡æœ‰å¯¹å¯¹è±¡è¿›è¡Œå…¶å®ƒæ“ä½œã€‚ 1234567int main()&#123; int a = 2; int&amp;&amp; p_a = std::move(a); a++; // aç…§å¸¸ä½¿ç”¨ std::cout&lt;&lt;a&lt;&lt;std::endl;&#125; std::moveæ²¡æœ‰ä¿®æ”¹a æœ¬èº«ï¼Œåªæ˜¯æç¤ºè¿™æ˜¯ä¸ªå¯ç§»åŠ¨çš„å¯¹è±¡ï¼Œéœ€è¦è‡ªå·±è°ƒç”¨æœ‰å³å€¼çš„é‡è½½å‡½æ•°ï¼Œæ‰ä¼šè¿›è¡Œç§»åŠ¨ï¼ˆå‡½æ•°å†…éƒ¨å®ç°äº†â€œç§»åŠ¨â€è¿™ä¸ªåŠ¨ä½œï¼‰ã€‚ æ€»çš„æ¥è¯´ç§»åŠ¨æ„é€ å‡½æ•°æœ‰ä»¥ä¸‹å¥½å¤„ï¼š å……åˆ†åˆ©ç”¨ä¸´æ—¶å¯¹è±¡å†…å­˜ï¼Œé¿å…äº†ç©ºé—´æµªè´¹ï¼› ä½†ä¸€åˆ‡éƒ½å»ºç«‹åœ¨ä½¿ç”¨ä¸´æ—¶å¯¹è±¡è¿›è¡Œåˆå§‹åŒ–è¿™ä¸ªåœºæ™¯ä¸‹ã€‚ std::move(ob1)è¿˜å¯ä»¥æ‰©å±•åˆ°å…¶å®ƒä»¥å³å€¼å¼•ç”¨ä¸ºå½¢å‚ç§»åŠ¨è¯­ä¹‰å‡½æ•°ä¸­ï¼Œæœ€å¸¸è§æ˜¯åœ¨STLä¸­ï¼ŒSTLç±»å¤§éƒ½æ”¯æŒç§»åŠ¨è¯­ä¹‰å‡½æ•°ã€‚ ä¾‹å¦‚ï¼Œstd::vectoræ–¹æ³•å®šä¹‰ï¼š 1234void push_back (const value_type&amp; val);void push_back (value_type&amp;&amp; val); void emplace_back (Args&amp;&amp;... args); æ˜¾ç„¶void push_back (value_type&amp;&amp; val); å¯ä»¥æ¥å—ç§»åŠ¨è¯­ä¹‰ï¼š 1234567891011#include&lt;vector&gt;#include&lt;string&gt;int main() &#123; std::string str1 = &quot;royhuang&quot;; std::vector&lt;std::string&gt; vec; vec.push_back(str1); // ä¼ ç»Ÿæ–¹æ³•ï¼Œcopy vec.push_back(std::move(str1)); // è°ƒç”¨ç§»åŠ¨è¯­ä¹‰çš„push_backæ–¹æ³•ï¼Œé¿å…æ‹·è´ï¼Œstr1ä¼šå¤±å»åŸæœ‰å€¼ï¼Œå˜æˆç©ºå­—ç¬¦ä¸²&#125; åŒæ ·ï¼Œè¿™ç§åšæ³•å‡å°‘äº†å¼€è¾Ÿå†…å­˜å¼€é”€ã€‚ emplace_backç±»ä¼¼ï¼š 12vec.emplace_back(std::move(str1)); // emplace_backæ•ˆæœç›¸åŒï¼Œstr1ä¼šå¤±å»åŸæœ‰å€¼vec.emplace_back(&quot;axcsddcas&quot;); // å½“ç„¶å¯ä»¥ç›´æ¥æ¥å³å€¼ å†æ¬¡å¼ºè°ƒï¼Œç§»åŠ¨è¯­ä¹‰å‡½æ•°ä¹Ÿæ˜¯å»ºç«‹åœ¨è¢«æ‹·è´å¯¹è±¡å†æ‹·è´åå°±ä¸å†è¢«éœ€è¦çš„åœºæ™¯ä¸‹ï¼Œæ¯”å¦‚è¿™é‡Œçš„str1è§†ä¸ºâ€œå°†äº¡å€¼â€ã€‚ 5.2.5 å§”æ‰˜æ„é€ å‡½æ•° æ„é€ å‡½æ•°é‡è½½æ—¶ï¼Œå…è®¸ä¸€ä¸ªæ„é€ å‡½æ•°è°ƒç”¨å…¶å®ƒæ„é€ å‡½æ•°ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºå§”æ‰˜æ„é€ å‡½æ•° ã€‚ ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆè®¾è®¡ï¼Ÿ å› ä¸ºC++ä¸­ä¸èƒ½åœ¨æ„é€ å‡½æ•°ä¸­è°ƒç”¨å…¶å®ƒæ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½è¿›è¡Œæ„é€ å‡½æ•°åµŒå¥— ã€‚ ä¸‹é¢ä¾¿æ˜¯ä¸€ä¸ªé”™è¯¯çš„ç¤ºèŒƒï¼ŒçŒœçŒœè¾“å‡ºç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ 1234567891011121314151617181920212223#include &lt;iostream&gt;using namespace std;class Point &#123;public: Point()&#123; Point&#123;0, 0&#125;;&#125;; // è°ƒç”¨å…¶å®ƒæ„é€ å‡½æ•° Point(int _x, int _y): x(_x), y(_y) &#123; &#125;; void show()&#123; cout &lt;&lt; &quot;x = &quot; &lt;&lt; x &lt;&lt; &quot;, y = &quot; &lt;&lt; y &lt;&lt;endl; &#125;; int getX() &#123;return x;&#125; int getY() &#123;return y;&#125;private: int x; int y;&#125;;int main() &#123; Point p1&#123;&#125;; p1.show(); // æ˜¯ x=0ï¼Œy=0å—ï¼Ÿ Point p2&#123;2,3&#125;; // æ˜¯ x=2ï¼Œy=3å—ï¼Ÿ p2.show(); return 0;&#125; ç»“æœå¯èƒ½ä¼šè®©ä½ æœ‰ç‚¹æ„å¤–ï¼š 12x = -1847177920, y = 32765x = 2, y = 3 å¥½å®¶ä¼™x = -1847177920, y = 32765æ˜¯ä»€ä¹ˆé¬¼ï¼ŸPoint{0, 0}æ²¡æœ‰åˆå§‹åŒ–p1å—ï¼Ÿ å›åˆ°æ¡ˆå‘ç°åœºï¼š 1Point p1; æˆ‘ä»¬çŸ¥é“åœ¨C++ä¸­å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼š è¦å…ˆåˆ†é…å†…å­˜ï¼ˆæ­¤æ—¶ï¼Œéé™æ€æˆå‘˜è¿˜æœªåˆå§‹åŒ–ï¼‰ï¼› å†è°ƒç”¨æ„é€ å‡½æ•°ï¼ˆåˆå§‹åŒ–éé™æ€æˆå‘˜ï¼‰ã€‚ å¯¹äºPoint p1 ï¼š ç¼–è¯‘å™¨ç»™å¯¹è±¡p1 åˆ†é…äº†å†…å­˜ï¼› è°ƒç”¨æ„é€ å‡½æ•°Point() åˆå§‹åŒ–ï¼Œè¿›å…¥å‡½æ•°ä½“å¼€å§‹æ‰§è¡Œæ„é€ å‡½æ•°Point(int,int) ï¼› æ‰§è¡Œæ„é€ å‡½æ•°Point(int,int)æ—¶ï¼Œç¼–è¯‘å™¨åˆåˆ›å»ºäº†ä¸´æ—¶åŒ¿åå¯¹è±¡ï¼› æ­¤æ—¶å†è°ƒç”¨Point(int,int) åˆå§‹åŒ–åŒ¿åå¯¹è±¡éé™æ€æˆå‘˜x=0ï¼Œy=0ï¼Œè€Œä¸æ˜¯å¯¹è±¡p1ï¼› æ‰€ä»¥æœ€ç»ˆå¯¹è±¡p1 çš„xã€yæ²¡æœ‰è¢«åˆå§‹åŒ–ä¸º{0,0}ã€‚ ä¹Ÿå°±æ˜¯æ„é€ å‡½æ•°å‘ç”ŸåµŒå¥—æ—¶ï¼Œä¸ä¼šåˆå§‹åŒ–å½“å‰å¯¹è±¡è€Œæ˜¯åˆå§‹åŒ–æ–°ç”Ÿæˆçš„åŒ¿åå¯¹è±¡ã€‚ æ•´ä¸ªè¿‡ç¨‹æ¯”è¾ƒéš¾ç†è§£çš„æ˜¯ç¬¬3ç‚¹ï¼šä¸ºä»€ä¹ˆæ‰§è¡Œæ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨åˆ›å»ºäº†ä¸´æ—¶å¯¹è±¡ï¼Œæ„é€ å‡½æ•°ä¸æ˜¯ä¸ä¼šåˆ›å»ºå¯¹è±¡å—ï¼Ÿ æ„é€ å‡½æ•°è™½ç„¶ä¸åˆ›å»ºå¯¹è±¡ï¼Œä½†æ˜¯åœ¨æ„é€ å‡½æ•°æ‰§è¡Œå‰ï¼Œç¼–è¯‘å™¨ä¼šåˆ†é…ä¸€ä¸ªåŒ¿åå¯¹è±¡ç©ºé—´ï¼Œæ„é€ å‡½æ•°ç¡®å®åªæ˜¯è´Ÿè´£å°†å…¶åˆå§‹åŒ–äº†ã€‚ æ˜¯çš„ï¼ŒC++å°±æ˜¯è¿™ä¹ˆé­”é¬¼ã€‚ ä¸è¿‡ï¼ŒC++å¤§é­”ç‹å¤§æ…ˆå¤§æ‚²å…è®¸ä½ ä½¿ç”¨å§”æ‰˜æ„é€ å‡½æ•°æ–¹å¼è¿›è¡Œæ„é€ å‡½æ•°åµŒå¥—ã€‚ èµ¶ç´§å¸¦ç€æ„Ÿæ©çš„å¿ƒç§ä¸€ä¸‹å§ã€‚ 123456789101112class Point &#123;public: Point(): Point&#123;0, 0&#125;&#123;&#125;; // å§”æ‰˜æ„é€ æ–¹å¼ Point(int _x, int _y): x(_x), y(_y) &#123; &#125;; void show()&#123; cout &lt;&lt; &quot;x = &quot; &lt;&lt; x &lt;&lt; &quot;, y = &quot; &lt;&lt; y &lt;&lt;endl; &#125;; int getX() &#123;return x;&#125; int getY() &#123;return y;&#125;private: int x; int y;&#125;; å·å·å†å‘Šè¯‰ä½ ä¸¤ç§ä¸å¤ªä¼˜é›…çš„æ–¹å¼åšåˆ°ç±»ä¼¼æ„é€ å‡½æ•°åµŒå¥—çš„æ•ˆæœã€‚ æŠŠæ„é€ å‡½æ•°ä¸­çš„å…¬å…±éƒ¨åˆ†æŠ½å–å‡ºæ¥å®šä¹‰ä¸€ä¸ªæˆå‘˜å‡½æ•°(æœ€å¥½ä¿®é¥°ä¸ºprivate)ï¼Œç„¶ååœ¨æ¯ä¸ªéœ€è¦è¿™ä¸ªä»£ç çš„æ„é€ å‡½æ•°ä¸­è°ƒç”¨è¯¥å‡½æ•°å³å¯ã€‚ ä½¿ç”¨placement newã€‚å› ä¸ºplacement newä¸ä¼šé‡æ–°åˆ†é…å†…å­˜ï¼Œå…¶å®šä¹‰ä¹Ÿè¯æ˜äº†è¿™ä¸€ç‚¹ï¼š 1234inline void *__cdecl operator new(size_t, void *_P)&#123; return (_P); // æ²¡æœ‰åˆ†é…æ–°çš„å†…å­˜&#125; è¿™æ ·è°ƒç”¨æ„é€ å‡½æ•°Point(int,int) æ—¶ä¸ä¼šåˆ›å»ºä¸´æ—¶å¯¹è±¡ï¼Œè€Œæ˜¯ä¾æ—§åœ¨å¯¹è±¡p1å†…å­˜ä¸­æ‰§è¡Œåˆå§‹åŒ–æ“ä½œï¼š 1234567Point()&#123; new (this)Point&#123;0,0&#125;;&#125;; Point p1;p1.show(); // x=0ï¼Œy=0 5.3 ææ„å‡½æ•° ä»€ä¹ˆæ˜¯ææ„å‡½æ•°ï¼Ÿ ææ„å‡½æ•°æ˜¯å¦ä¸€ç§ç‰¹æ®Šçš„ç±»æˆå‘˜å‡½æ•°ï¼Œåœ¨è¯¥ç±»çš„å¯¹è±¡è¢«é”€æ¯æ—¶æ‰§è¡Œï¼Œå¸®åŠ©ç±»æ¸…ç†å¯¹è±¡ã€‚ å’Œæ„é€ å‡½æ•°ä¸€æ ·ï¼Œææ„å‡½æ•°æ²¡æœ‰å‚æ•°ã€è¿”å›ç±»å‹ï¼Œä¸ç±»åŒåã€‚ ææ„å‡½æ•°ä»€ä¹ˆæ—¶å€™æ‰§è¡Œï¼Ÿ å½“ä¸€ä¸ªæ ˆä¸Šåˆ†é…çš„å¯¹è±¡æ­£å¸¸è¶…å‡ºèŒƒå›´ï¼Œæ³¨æ„åŒºåˆ†å †ä¸Šåˆ†é…çš„å¯¹è±¡ä¸ä¼šè‡ªåŠ¨é‡Šæ”¾ï¼Œéœ€è¦æ‰‹åŠ¨ï¼› 1234567Class Test&#123; ...&#125;;Tets t1; // æ­¤æ—¶t1åœ¨æ ˆä¸Šï¼Œè¶…å‡ºä½œç”¨èŒƒå›´ä¼šè‡ªåŠ¨é‡Šæ”¾Test* t2 = new Test&#123;&#125;; // æ­¤æ—¶t2æŒ‡å‘çš„å¯¹è±¡åˆ†é…åœ¨å †ä¸Š delete å…³é”®å­—æ˜¾å¼åˆ é™¤åŠ¨æ€åˆ†é…çš„å¯¹è±¡ã€‚ ç±»ä¸€å®šéœ€è¦ææ„å‡½æ•°å—ï¼Ÿ å¦‚æœåªæ˜¯åŒ…å«æ™®é€šæˆå‘˜å˜é‡çš„å€¼ï¼Œä¸éœ€è¦ææ„å‡½æ•°ï¼› å¦‚æœæ˜¯ç±»å¯¹è±¡æŒæœ‰åŠ¨æ€å†…å­˜ã€æ–‡ä»¶æˆ–æ•°æ®åº“å¥æŸ„ï¼Œéœ€è¦ææ„å‡½æ•°ã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢æ•°ç»„æŒ‡é’ˆm_array éœ€è¦æ˜¾ç¤ºå®šä¹‰ææ„å‡½æ•°è¿›è¡Œæ¸…ç†ï¼Œå¦åˆ™ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ã€‚ 12345678910111213141516171819202122232425262728293031323334353637#include &lt;iostream&gt;#include &lt;cassert&gt;#include &lt;cstddef&gt;class IntArray&#123;private: int* m_array&#123;&#125;; // m_arrayæŒæœ‰åŠ¨æ€å†…å­˜ int m_length&#123;&#125;;public: IntArray(int length) &#123; assert(length &gt; 0); m_array = new int[static_cast&lt;std::size_t&gt;(length)]&#123;&#125;; m_length = length; &#125; ~IntArray() // ææ„å‡½æ•° &#123; std::cout &lt;&lt; &quot;~IntArray&quot; &lt;&lt; &#x27;\\n&#x27;; delete[] m_array; // æ¸…ç†m_arrayæŒæœ‰çš„åŠ¨æ€å†…å­˜ &#125; void setValue(int index, int value) &#123; m_array[index] = value; &#125; int getValue(int index) &#123; return m_array[index]; &#125; int getLength() &#123; return m_length; &#125;&#125;;int main()&#123; IntArray arr &#123;10&#125;; // ç›´æ¥åˆå§‹åŒ–ï¼Œarråˆ†é…åœ¨æ ˆä¸Š for (int count&#123; 0 &#125;; count &lt; arr.getLength(); ++count) arr.setValue(count, count+1); std::cout &lt;&lt; &quot;The value of element 5 is: &quot; &lt;&lt; arr.getValue(5) &lt;&lt; &#x27;\\n&#x27;; return 0; // ææ„å‡½æ•°~IntArrayæ‰§è¡Œ&#125; è¾“å‡ºï¼š 12The value of element 5 is: 6~IntArray RAII RAIIï¼ˆèµ„æºè·å–å³åˆå§‹åŒ–ï¼‰æ˜¯ä¸€ç§ç¼–ç¨‹æŠ€æœ¯ï¼Œå…¶ä¸­èµ„æºä½¿ç”¨ä¸å…·æœ‰è‡ªåŠ¨ç”Ÿå‘½å‘¨æœŸçš„å¯¹è±¡ï¼ˆä¾‹å¦‚éåŠ¨æ€åˆ†é…çš„å¯¹è±¡ï¼‰çš„ç”Ÿå‘½å‘¨æœŸç›¸å…³è”ã€‚åœ¨ C++ ä¸­ï¼ŒRAII æ˜¯é€šè¿‡å…·æœ‰æ„é€ å‡½æ•°å’Œææ„å‡½æ•°çš„ç±»æ¥å®ç°çš„ã€‚ RAII çš„ä¸»è¦ä¼˜ç‚¹æ˜¯å®ƒæœ‰åŠ©äºé˜²æ­¢èµ„æºæ³„æ¼ï¼ˆä¾‹å¦‚å†…å­˜æœªè¢«é‡Šæ”¾ï¼‰ï¼Œå› ä¸ºæ‰€æœ‰èµ„æºæŒæœ‰å¯¹è±¡éƒ½ä¼šè‡ªåŠ¨æ¸…ç†ã€‚ èµ„æºï¼ˆå†…å­˜ã€æ–‡ä»¶æˆ–æ•°æ®åº“å¥æŸ„ç­‰ï¼‰åœ¨å¯¹è±¡çš„æ„é€ å‡½æ•°ä¸­è·å–ï¼Œåœ¨å¯¹è±¡å¤„äºæ´»åŠ¨çŠ¶æ€æ—¶ä½¿ç”¨è¯¥èµ„æºã€‚ å½“å¯¹è±¡è¢«é”€æ¯æ—¶ï¼Œèµ„æºåœ¨ææ„å‡½æ•°ä¸­è¢«é‡Šæ”¾ã€‚ å‰ä¾‹ä¸­çš„m_arrayæŒæœ‰çš„åŠ¨æ€å†…å­˜å°±æ˜¯RAIIä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­â€”â€”åœ¨æ„é€ å‡½æ•°ä¸­åˆ†é…ï¼Œåœ¨ææ„å‡½æ•°ä¸­é‡Šæ”¾ã€‚ åœ¨æ ‡å‡†åº“ä¸­ï¼Œstd::string å’Œ std::vectoråŒæ ·éµå¾ªRAIIâ€”â€”åŠ¨æ€å†…å­˜åœ¨åˆå§‹åŒ–æ—¶è·å–ï¼Œå¹¶åœ¨é”€æ¯æ—¶è‡ªåŠ¨æ¸…ç†ã€‚ 5.4 å‹å…ƒå‡½æ•°å’Œå‹å…ƒç±» æˆ‘ä»¬ä¸€ç›´åŠªåŠ›å°½é‡å®£æ‰¬ç±»æ•°æ®ä¿å¯†ï¼ˆprivateï¼‰çš„å¥½å¤„ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæœ‰ç±»Aå’Œç±»Bè”ç³»çš„éå¸¸ç´§å¯†ï¼Œç±»Bå¯¹è±¡ç¡®å®éœ€è¦ç”¨åˆ°ç±»Aå¯¹è±¡çš„ç§æœ‰æˆå‘˜ï¼Œè¿™æ€ä¹ˆåŠï¼Ÿ ï¼ˆè¿™ç§æƒ…å†µé€šå¸¸å‘ç”Ÿäºé‡è½½è¿ç®—ç¬¦æ—¶ï¼Œæ­¤æ—¶ä¸¤ä¸ªç±»é€šå¸¸è”ç³»å¾—å¾ˆç´§å¯†ï¼Œå…¶å®ƒæƒ…å†µç¡®å®ä¸å¸¸è§ã€‚ï¼‰ å°†ç±»Açš„ç§æœ‰æˆå‘˜å…¬å¼€ï¼ˆpublicï¼‰ï¼Ÿæ˜¾ç„¶ä¸è¡Œï¼Œè¿™æ ·åˆ«çš„ç±»å¯¹è±¡ä¹Ÿå¯ä»¥è®¿é—®Açš„ç§æœ‰æˆå‘˜ï¼› åœ¨ç±»Aä¸“é—¨è®¾ç½®æ¥å£å‡½æ•°è·å–ç§æœ‰æˆå‘˜å€¼ï¼Ÿä¹Ÿä¸è¡Œï¼Œé“ç†åŒä¸Šã€‚ å¦‚æœèƒ½æŒ‡å®šåªèƒ½ç±»Bè®¿é—®ç±»Açš„ç§æœ‰æˆå‘˜è¯¥å¤šå¥½å•Šï¼ 5.4.1 å‹å…ƒå‡½æ•° å‹å…ƒå‡½æ•°å°±åšäº†è¿™ä¹ˆä¸€ä»¶äº‹ï¼šæŒ‡å®šæŸä¸ªæ™®é€šå‡½æ•°æˆ–æŸä¸ªç±»çš„æˆå‘˜å‡½æ•°ä¸ºæœ¬ç±»çš„å‹å…ƒå‡½æ•°ï¼Œç”±æ­¤å¯ä»¥ä½¿ç”¨æœ¬ç±»çš„ç§æœ‰æˆå‘˜ã€‚ è™½ç„¶è¿™ç ´åäº†ç±»çš„å°è£…æ€§å’Œæ•°æ®çš„éšè—æ€§ï¼Œå¯¼è‡´ç¨‹åºå¯ç»´æŠ¤æ€§å˜å·®ã€‚ä½†åœ¨æŸäº›åœºæ™¯ä¸‹ç¡®å®å¾ˆæœ‰ç”¨ã€‚ ä¸¾ä¾‹è¯´æ˜æ™®é€šå‡½æ•°/æˆå‘˜å‡½æ•°ä½œä¸ºå‹å…ƒå‡½æ•°ã€‚ æ™®é€šå‡½æ•°ä½œä¸ºå‹å…ƒå‡½æ•° æ³¨æ„ï¼šå‹å…ƒå‡½æ•°è™½ç„¶å£°æ˜åœ¨ç±»ä¸­ï¼Œä½†å¹¶ä¸å±äºå½“å‰ç±»æˆå‘˜ã€‚ ä¸‹é¢è¿™ä¸ªä¾‹å­å±•ç¤ºäº†ï¼Œåœ¨ç±»Accumulator æŠŠå‡½æ•°reset ä½œä¸ºå‹å…ƒå‡½æ•°ã€‚ 123456789101112131415161718192021222324252627class Accumulator&#123;private: int m_value &#123; 0 &#125;;public: // å¤–éƒ¨å‡½æ•°resetä½œä¸ºå‹å…ƒå‡½æ•° // å‹å…ƒå‡½æ•°å£°æ˜åœ¨ç±»å¤–ï¼ŒAccumulatorå¯¹è±¡ä½œä¸ºå‚æ•° friend void reset(Accumulator&amp; accumulator);&#125;;// å‹å…ƒå‡½æ•°resetå®šä¹‰åœ¨ç±»å¤–void reset(Accumulator&amp; accumulator)&#123; // ç°åœ¨resetå¯ä»¥ä½¿ç”¨ç±»Accumulatorå¯¹è±¡çš„ç§æœ‰æˆå‘˜ accumulator.m_value = 0;&#125;int main()&#123; Accumulator acc; reset(acc); // ok return 0;&#125; æ³¨æ„ï¼Œæˆ‘ä»¬å¿…é¡»å°† Accumulator å¯¹è±¡accä¼ é€’ç»™ reset()ã€‚ å› ä¸ºå‹å…ƒå‡½æ•°reset() ä¸æ˜¯ç±»çš„æˆå‘˜ï¼Œæ²¡æœ‰ *this æŒ‡é’ˆï¼Œä¹Ÿæ²¡æœ‰å¯ä¾›ä½¿ç”¨çš„ Accumulator å¯¹è±¡ï¼Œå› æ­¤å¿…é¡»ç»™å®šä¸€ä¸ªã€‚ ä¸€ä¸ªå‡½æ•°è¿˜å¯ä»¥åŒæ—¶æ˜¯å¤šä¸ªç±»çš„å‹å…ƒå‡½æ•°ï¼Œä½†æ˜¯æ¯ä¸ªç±»ä¸­éƒ½è¦å£°æ˜è¿™ä¸ªå‡½æ•°ã€‚ ä¸‹é¢å¤–éƒ¨å‡½æ•°printWeather åŒæ—¶æ˜¯ç±»Humidity å’Œ Temperature çš„å‹å…ƒå‡½æ•°ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243#include &lt;iostream&gt;class Humidity; // å‰å‘å£°æ˜ï¼Œå¦åˆ™ä»£ç 14è¡Œå¤„æ— æ³•æ‰¾åˆ°å®šä¹‰class Temperature&#123;private: int m_temp &#123;&#125;;public: Temperature(int temp=0): m_temp &#123; temp &#125; &#123;&#125; // å£°æ˜1ï¼šæ˜¯ç±»Temperatureçš„å‹å…ƒå‡½æ•° friend void printWeather(const Temperature&amp; temperature, const Humidity&amp; humidity);&#125;;class Humidity&#123;private: int m_humidity &#123;&#125;;public: Humidity(int humidity=0): m_humidity &#123; humidity &#125; &#123;&#125; // å£°æ˜2ï¼šæ˜¯ç±»Humidityçš„å‹å…ƒå‡½æ•° friend void printWeather(const Temperature&amp; temperature, const Humidity&amp; humidity);&#125;;// å®šä¹‰å‹å…ƒå‡½æ•°printWeathervoid printWeather(const Temperature&amp; temperature, const Humidity&amp; humidity)&#123; std::cout &lt;&lt; &quot;The temperature is &quot; &lt;&lt; temperature.m_temp &lt;&lt; &quot; and the humidity is &quot; &lt;&lt; humidity.m_humidity &lt;&lt; &#x27;\\n&#x27;;&#125;int main()&#123; Humidity hum(10); Temperature temp(12); printWeather(temp, hum); return 0;&#125; æˆå‘˜å‡½æ•°ä½œä¸ºå‹å…ƒå‡½æ•° ä¸ä½¿æ™®é€šå‡½æ•°æˆä¸ºæœ‹å‹ç±»ä¼¼ï¼Œä¹Ÿå¯ä»¥è®©ç±»æˆå‘˜å‡½æ•°ä½œä¸ºå‹å…ƒå‡½æ•°ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ã€‚ 123456789101112131415161718192021222324252627282930#include &lt;iostream&gt;class Humidity; // å‰å‘å£°æ˜class Temperature&#123;private: int m_temp &#123;&#125;;public: Temperature(int temp=0): m_temp &#123; temp &#125; &#123;&#125; // è¿™é‡Œä¸éœ€è¦Humidityå®Œæ•´å®šä¹‰ï¼Œå‰é¢å‰å‘å£°æ˜å°±å¯ä»¥ã€‚ void printHumidity(const Humidity&amp; Humidity) &#123; std::cout &lt;&lt; &quot;The Humidity is &quot; &lt;&lt; Humidity.m_humidity; &#125;&#125;;class Humidity&#123;private: int m_humidity &#123;&#125;;public: Humidity(int humidity=0): m_humidity &#123; humidity &#125;&#123;&#125; // Humidityçš„å‹å…ƒå‡½æ•°æ˜¯Temperatureç±»ä¸­çš„printHumidityå‡½æ•° // æ³¨æ„ï¼Œç±»Temperatureä¸€å®šè¦åœ¨å‰ï¼Œå› ä¸ºç¼–è¯‘å™¨éœ€è¦å‹å…ƒå‡½æ•°ç±»Temperatureå®Œæ•´å®šä¹‰ friend void Temperature:: printHumidity (const Humidity&amp; Humidity);&#125;; 5.4.2 å‹å…ƒç±» ä¹Ÿå¯ä»¥è®©æ•´ä¸ªç±»æˆä¸ºå¦ä¸€ä¸ªç±»çš„æœ‹å‹ï¼Œè¿™æ ·å‹å…ƒç±»çš„æ‰€æœ‰æˆå‘˜éƒ½å¯ä»¥è®¿é—®ç±»çš„ç§æœ‰æˆå‘˜ã€‚ ä¸€ä¸ªç®€å•å®ä¾‹ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041#include &lt;iostream&gt;class Storage&#123;private: int m_nValue &#123;&#125;; double m_dValue &#123;&#125;;public: Storage(int nValue, double dValue): m_nValue &#123; nValue &#125;, m_dValue &#123; dValue &#125; &#123;&#125; // Displayæ˜¯æœ¬ç±»ï¼ˆStorageï¼‰çš„å‹å…ƒç±» friend class Display;&#125;;class Display&#123;private: bool m_displayIntFirst;public: Display(bool displayIntFirst): m_displayIntFirst &#123; displayIntFirst &#125; &#123; &#125; void displayItem(const Storage&amp; storage) &#123; // Displayå¯ä»¥ä½¿ç”¨Storageçš„ç§æœ‰æˆå‘˜ if (m_displayIntFirst) std::cout &lt;&lt; storage.m_nValue &lt;&lt; &#x27; &#x27; &lt;&lt; storage.m_dValue &lt;&lt; &#x27;\\n&#x27;; else std::cout &lt;&lt; storage.m_dValue &lt;&lt; &#x27; &#x27; &lt;&lt; storage.m_nValue &lt;&lt; &#x27;\\n&#x27;; &#125;&#125;;int main()&#123; Storage storage(5, 6.7); Display display(false); display.displayItem(storage); // ok return 0;&#125; 5.5 éšè—çš„thisæŒ‡é’ˆ 5.5.1 å¿«é€Ÿå›å¿† åœ¨2.1.4èŠ‚ï¼Œæˆ‘ä»¬è¯´è¿‡ï¼Œæ¯ä¸ªç±»éƒ½æœ‰ä¸ªéšè—çš„thisæŒ‡é’ˆã€‚ å¿«é€Ÿå›å¿†ä¸‹ï¼š ç¼–è¯‘å™¨éšå¼ä¸ºæ¯ä¸ªæ•°æ®æˆå‘˜åŠ ä¸Šthis æŒ‡é’ˆï¼› ç¼–è¯‘å™¨éšå¼ä¸ºæ¯ä¸ªå‡½æ•°æ˜¾ç¤ºåŠ ä¸Šäº†ç¬¬ä¸€ä¸ªå‚æ•°Simple* const this ã€‚ ä¸ºæ–¹ä¾¿ç†è§£ï¼Œä¸‹é¢ä»£ç æ³¨é‡Šæ˜¾ç¤ºæŒ‡ç¤ºäº†thisæŒ‡é’ˆçš„ä½ç½®ã€‚ 123456789101112131415161718192021222324class Simple&#123;private: int m_id;public: Simple(int id): m_id&#123; id &#125; // Simple(Simple* const this,int id): this-&gt;m_id&#123; id &#125; &#123; &#125; void setID(int id) &#123; m_id = id; &#125; // void setID(Simple* const this,int id) &#123; this-&gt;m_id = id; &#125; int getID() &#123; return this-&gt;m_id; &#125;&#125;;int main()&#123; Simple simple&#123;1&#125;; simple.setID(2); // simple.setID(&amp;simple,2); std::cout &lt;&lt; simple.getID() &lt;&lt; &#x27;\\n&#x27;; return 0;&#125; ä»ä»£ç 22è¡Œå¤„ï¼Œä¹Ÿå¯ä»¥çŸ¥é“ï¼šthisæŒ‡é’ˆå°±æ˜¯æŒ‡å‘å½“å‰å¯¹è±¡simple ã€‚ å¤§éƒ¨åˆ†æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥å‡è£…ä¸çŸ¥é“thisæŒ‡é’ˆçš„å­˜åœ¨ï¼Œä½†åœ¨é“¾æ¥æˆå‘˜æ—¶thisæŒ‡é’ˆè¡¨ç°å¾—å¾ˆæœ‰ç”¨ã€‚ 5.5.2 thisæŒ‡é’ˆé“¾æ¥æˆå‘˜å‡½æ•° æ€è€ƒä¸€ä¸‹ï¼šç»å¸¸ä½¿ç”¨çš„std::coutæ˜¯å¦‚ä½•å®ç°è¿ç»­æ‰“å°å¤šä¸ªå­—ç¬¦ä¸²ï¼Ÿ 1std::cout &lt;&lt; &quot;Hello &quot; &lt;&lt; &quot;World&quot;; æ­¤æ—¶ï¼Œstd::cout æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œ operator&lt;&lt; æ˜¯å¯¹è¯¥å¯¹è±¡è¿›è¡Œæ“ä½œçš„æˆå‘˜å‡½æ•°ï¼š operator&lt;&lt; æ‰“å°ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²&quot;Hello &quot;ï¼Œç„¶åè¿”å›å½“å‰å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯*thisï¼› std::cout å¯¹è±¡ *this è°ƒç”¨operator&lt;&lt; æ‰“å°ç¬¬äºŒä¸ªå­—ç¬¦ä¸²&quot;World&quot;ã€‚ ä¸¾ä¸€ä¸ªæ›´å…·ä½“çš„ä¾‹å­ï¼š 123456789101112131415161718192021#include &lt;iostream&gt;class Calc&#123;private: int m_value&#123;&#125;;public: Calc&amp; add(int value) &#123; m_value += value; return *this; &#125; Calc&amp; sub(int value) &#123; m_value -= value; return *this; &#125; Calc&amp; mul(int value) &#123; m_value *= value; return *this; &#125; int getValue() &#123; return m_value; &#125;&#125;;int main()&#123; Calc calc&#123;&#125;; calc.add(5).sub(3).mul(4); // å‡½æ•°é“¾æ¥èµ·æ¥äº† std::cout &lt;&lt; calc.getValue() &lt;&lt; &#x27;\\n&#x27;; return 0;&#125; è¿™ç§åšæ³•åœ¨ç±»é‡è½½è¿ç®—ç¬¦æ—¶æœ€å¸¸ä½¿ç”¨ï¼Œä¸‹ç« ä¸€èµ·æ¥å­¦ä¹ ä¸‹å§ã€‚ æ›´æ–°è®°å½• 2022-02-02ï¼šæ›´æ–°ç¬”è®° ä¿®æ”¹std::moveç›¸å…³æè¿° 2022-01-29ï¼šæ›´æ–°ç¬”è®° ä¿®æ”¹æˆå‘˜åˆ—è¡¨åˆå§‹åŒ–ç›¸å…³æè¿°å¢åŠ ç§»åŠ¨æ„é€ å‡½æ•°ç›¸å…³æè¿° 2022-01-28ï¼šæ›´æ–°ç¬”è®° ä¿®æ”¹å¤åˆ¶åˆå§‹åŒ–ç›¸å…³æè¿° 2022-01-27ï¼šæ›´æ–°ç¬”è®° ç¬¬ä¸€æ¬¡æ›´æ–° å‚è€ƒèµ„æ–™ 1.C++æ„é€ å‡½æ•°çš„ç†è§£ : https://www.cnblogs.com/downey-blog/p/10470782.html â†©2.ç¦æ­¢æ‹·è´æ„é€ ï¼Œç¦æ­¢bugï¼šhttps://zhuanlan.zhihu.com/p/266353611 â†©3.ä¸ºä»€ä¹ˆä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨ä¼šå¿«ä¸€äº›ï¼Ÿhttps://segmentfault.com/a/1190000039294789 â†©4.C++11å³å€¼å¼•ç”¨å’Œç§»åŠ¨æ„é€ å‡½æ•°è¯¦è§£ ï¼šhttps://zhuanlan.zhihu.com/p/365412262 â†©5.C++ä¸­çš„std::moveå‡½æ•°åˆ°åº•æ˜¯åšä»€ä¹ˆçš„ï¼Ÿhttps://www.zhihu.com/question/467449795 â†©","categories":[{"name":"C++","slug":"C","permalink":"https://hwh.zone/categories/C/"},{"name":"ä»é›¶å¼€å§‹","slug":"C/ä»é›¶å¼€å§‹","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"},{"name":"C++é¢å¯¹å¯¹è±¡","slug":"C/ä»é›¶å¼€å§‹/C-é¢å¯¹å¯¹è±¡","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/C-%E9%9D%A2%E5%AF%B9%E5%AF%B9%E8%B1%A1/"}],"tags":[{"name":"C++","slug":"C","permalink":"https://hwh.zone/tags/C/"},{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://hwh.zone/tags/%E6%95%99%E7%A8%8B/"},{"name":"å¿«é€Ÿå…¥é—¨","slug":"å¿«é€Ÿå…¥é—¨","permalink":"https://hwh.zone/tags/%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/"},{"name":"é¢å¯¹å¯¹è±¡","slug":"é¢å¯¹å¯¹è±¡","permalink":"https://hwh.zone/tags/%E9%9D%A2%E5%AF%B9%E5%AF%B9%E8%B1%A1/"}]},{"title":"C++ä»é›¶å¼€å§‹ï¼ˆå…­ï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆä¸‹ï¼‰å¤åˆç±»å‹åŠè½¬æ¢","slug":"C++ä»é›¶å¼€å§‹ï¼ˆäºŒï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆä¸‹ï¼‰ä¹‹å¤åˆç±»å‹åŠè½¬æ¢","date":"2022-01-16T13:04:18.006Z","updated":"2022-02-26T07:45:01.285Z","comments":true,"path":"p/6587/","link":"","permalink":"https://hwh.zone/p/6587/","excerpt":"","text":"ğŸŒŸã€ŠC++ä»é›¶å¼€å§‹ã€‹ ç³»åˆ—ï¼Œå¼€å§‹æ›´æ–°ä¸­â€¦ C++ä»é›¶å¼€å§‹https://hwh.zone/p/62712 å››ã€å¤åˆç±»å‹åŠè½¬æ¢ ä»€ä¹ˆæ˜¯å¤åˆç±»å‹ï¼Ÿè¿™å¬èµ·æ¥å¥½åƒæ˜¯æœ‰ç‚¹æ–°å¥‡çš„æ¦‚å¿µã€‚ ä»åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆæ¯”å¦‚intã€charï¼‰æˆ–å…¶ä»–å¤åˆæ•°æ®ç±»å‹æ„é€ å‡ºæ¥çš„æ•°æ®ç±»å‹ï¼Œå°±ç§°ä¸ºå¤åˆç±»å‹ã€‚ åœ¨å‰é¢æˆ‘ä»¬å·²ç»æ¥è§¦è¿‡æ‰€è°“çš„å¤åˆç±»å‹ï¼š æ•°ç»„ï¼ˆstd::stringã€std::array ç­‰ï¼‰ã€æŒ‡é’ˆç±»å‹ï¼ˆå‡½æ•°æŒ‡é’ˆæˆ–è€…è¯´å‡½æ•°ï¼ŒæŒ‡å‘å¯¹è±¡çš„æŒ‡é’ˆç­‰ï¼‰ã€å¼•ç”¨ç±»å‹ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œä¸‹é¢å‡½æ•°func ç±»å‹æ˜¯void()(int, double) ï¼Œå®ƒç”±åŸºæœ¬ç±»å‹ç»„æˆï¼Œä½¿å…¶æˆä¸ºå¤åˆç±»å‹ï¼š 123void func(int x, double y)&#123;&#125; æœ¬ç« ä¸»è¦ä»‹ç»çš„å¤åˆç±»å‹æ˜¯ç»“æ„ä½“ï¼ˆæ³¨æ„ç»“æ„ä½“å¤§å°è®¡ç®—ï¼‰å’Œæšä¸¾ï¼ˆæ³¨æ„æšä¸¾ä½œç”¨èŒƒå›´é—®é¢˜ï¼‰ï¼Œä»¥åŠå„ç§ç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼š ç”¨æˆ·éšå¼è½¬æ¢åŠå‘ç”Ÿçš„æƒ…å†µï¼› ç”¨æˆ·å››ç§æ˜¾ç¤ºè½¬æ¢ï¼ŒåŒ…å«Cé£æ ¼å’ŒC++é£æ ¼ï¼› tç‰¹åˆ«è¡¥å……ï¼Œstringç±»å‹å’Œå…¶å®ƒç±»å‹ä¹‹é—´çš„è½¬æ¢ã€‚ 4.1 ç»“æ„ä½“ 4.1.1 ä»Cè°ˆèµ· åœ¨Cè¯­è¨€ä¸­å®šä¹‰ä¸€ä¸ªå…¸å‹ç»“æ„ä½“structå¦‚ä¸‹ï¼š 123456789101112131415161718#include &lt;stdio.h&gt;// 1. å®šä¹‰struct People &#123; char name[10]; char gender[5]; int age;&#125;; // *è¿™é‡Œæœ‰ä¸ªåˆ†å·ï¼Œæ˜“é—æ¼int main()&#123; // 2.å£°æ˜&amp;åˆå§‹åŒ–ï¼Œç»“åˆ&#123;&#125; struct People people = &#123;&quot;royhuang&quot;,&quot;male&quot;,25&#125;; // 3.è®¿é—®ï¼ŒC/C++ä¸­ç»“æ„ä½“æˆå‘˜é»˜è®¤éƒ½æ˜¯publicå¯ä»¥ç›´æ¥è®¿é—® printf(&quot;your name: %s \\n&quot;,people.name); // royhuang return 0;&#125; å½“æ—¶è¿˜æ˜¯æ–°æ‰‹Cç©å®¶çš„æˆ‘ï¼Œå¾ˆéš¾è¯´å‡ºstructåˆ°åº•å¸¦æ¥ä»€ä¹ˆå¥½å¤„ã€‚åªèƒ½éšéšçº¦çº¦æ„Ÿè§‰åˆ°ï¼Œstructç»„åˆå¤šä¸ªä¸”æœ‰é€»è¾‘å…³è”çš„æ•°æ®å¢å¼ºäº†ç¨‹åºé€»è¾‘æ€§å’Œå¯è¯»æ€§ã€‚ é‚£ä¹ˆstruct é™¤äº†ç»„ç»‡æœ‰é€»è¾‘å…³è”çš„æ•°æ®æé«˜ä»£ç å¯è¯»æ€§å’Œä¸€è‡´æ€§ï¼Œåœ¨å®é™…ç¼–ç ä¸­è¿˜æœ‰å…¶å®ƒåº”ç”¨å—ï¼Ÿ åœ¨ç¬¬ä¸‰ç« å‡½æ•°ï¼Œæˆ‘ä»¬æåˆ°è¿‡ï¼šç»“æ„ä½“è¿˜å¯ç”¨äºå‡½æ•°ä¼ é€’å¤šä¸ªå‚æ•°æˆ–è€…å‡½æ•°è¿”å›å¤šä¸ªå€¼ã€‚ ä¼ é€’å¤šä¸ªå‚æ•° ä¼ é€’ä¸€ä¸ªç»“æ„ä½“ä½œä¸ºå‚æ•°ï¼š 12345678910111213void printPeople(const struct People&amp; people)&#123; printf(&quot;your name: %s \\n&quot;,people.name); printf(&quot;your gender: %s \\n&quot;,people.gender); printf(&quot;your age: %d \\n&quot;,people.age);&#125;int main()&#123; struct People people = &#123;&quot;royhuang&quot;,&quot;male&quot;,25&#125;; printPeople(people); return 0;&#125; æ˜¾ç„¶è¿™ç›¸æ¯”ä¼ é€’å¤šä¸ªå‚æ•°è¦æ¸…çˆ½å¾ˆå¤šï¼ˆä¸”ä¸æ˜“å‡ºé”™ï¼‰ï¼š 1void printPeople(const char* name, const char* gender, const int age) è¿”å›å¤šä¸ªå€¼ å‡½æ•°åªèƒ½è¿”å›ä¸€ä¸ªå‚æ•°ï¼Œé™¤äº†ä½¿ç”¨å…ƒç»„ï¼Œç»“æ„ä½“æ˜¯ä¸äºŒçš„é€‰æ‹©ï¼š 1234567struct People&amp; cleanPeople(People&amp; people)&#123; people.name=&quot;&quot;; people.gender=&quot;&quot;; people.age=-1; return people;&#125; 4.1.2 C++ä¸­struct C++ä¸­structå…¼å®¹äº†Cï¼Œåœ¨æ­¤åŸºç¡€ä¸Šè¿˜è¿›è¡Œäº†æ‰©å±•ï¼š C C++ æˆå‘˜ åªæœ‰æ•°æ® æ•°æ®ï¼Œå‡½æ•°ç­‰éƒ½å¯ä»¥ è®¿é—®æƒé™ public é»˜è®¤publicï¼Œæœ‰private æ˜¯å¦å¯ä»¥ç»§æ‰¿ å¦ æ˜¯ åœ¨Cä¸­ç»“æ„ä½“å£°æ˜å¿…é¡»å¸¦ä¸Šstruct å…³é”®å­—ï¼Œè€ŒC++ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ 12struct People people1; // CPeople people1; // C++ C++ä¸­ï¼Œstructå¢åŠ äº†privateè®¿é—®æƒé™ï¼Œä¸”å¯ä»¥å’Œç±»ä¸€æ ·æœ‰æˆå‘˜å‡½æ•°ï¼Œæˆå‘˜é»˜è®¤è®¿é—®è¯´æ˜ç¬¦ä¸ºpublicï¼ˆä¸ºäº†å…¼å®¹Cï¼‰ã€‚ 12345678910111213141516171819202122232425262728293031323334#include &lt;iostream&gt;#include &lt;cstring&gt;struct People&#123; char name[10]; char gender[5]; int age; // æ„é€ å‡½æ•° People(const char* peole_name,const char* peole_gender,int peole_age) &#123; strncpy(name,peole_name,10); strncpy(gender,peole_gender,5); age = peole_age; &#125; // æˆå‘˜å‡½æ•° void printPeople(const People&amp; people) &#123; std::cout&lt;&lt;&quot;your name:&quot; &lt;&lt;people.name&lt;&lt;std::endl; std::cout&lt;&lt;&quot;your gender: &quot;&lt;&lt;people.gender&lt;&lt;std::endl; std::cout&lt;&lt;&quot;your age: &quot;&lt;&lt;people.age&lt;&lt;std::endl; &#125; // ç§æœ‰å˜é‡ private: char girl_friend[10];&#125;; // åˆ†å·int main()&#123; People people = &#123;&quot;royhuang&quot;,&quot;male&quot;,25&#125;; people.printPeople(people); return 0;&#125; å¯ä»¥ç»§æ‰¿ï¼Œå®ç°äº†å¤šæ€ã€‚ æ˜¾ç„¶ï¼ŒC++ä¸­structå’ŒclassåŒºåˆ«å·²ç»ä¸å¤§ã€‚ 4.1.3 ç»“æ„ä½“å¤§å°å’Œæ¯”è¾ƒ å‚è€ƒï¼šc++ä¸­çš„sizeof()è¿ç®—ç¬¦ã€C/C++ä¸­ sizeof çš„ç”¨æ³•æ€»ç»“ ä»åŸºæœ¬æ•°æ®ç±»å‹è¯´èµ·ã€‚ å¯¹äºshortã€intã€longç®€å•å†…ç½®æ•°æ®ç±»å‹ï¼Œå¯é‡‡ç”¨sizeof å…³é”®å­—è®¡ç®—å¤§å°ï¼š 12345678int i; sizeof(int); // å€¼ä¸º4 sizeof(i); // å€¼ä¸º4ï¼Œç­‰ä»·äºsizeof(int) sizeof i; // å€¼ä¸º4 sizeof(2); // å€¼ä¸º4ï¼Œç­‰ä»·äºsizeof(int)ï¼Œå› ä¸º2çš„ç±»å‹ä¸ºint sizeof(2 + 3.14); // å€¼ä¸º8ï¼Œç­‰ä»·äºsizeof(double)ï¼Œå› ä¸ºæ­¤è¡¨è¾¾å¼çš„ç»“æœçš„ç±»å‹ä¸ºdouble char ary[sizeof(int) * 10]; // OKï¼Œç¼–è¯‘æ— è¯¯ é¢˜å¤–è¯ï¼šsizeofå’Œstrlençš„åŒºåˆ«ï¼Ÿ è¿ç®—ç¬¦ä¸å‡½æ•°ï¼šsizeofæ˜¯è¿ç®—ç¬¦ï¼Œå¹¶ä¸æ˜¯å‡½æ•°ï¼Œç»“æœåœ¨ç¼–è¯‘æ—¶å¾—åˆ°è€Œéè¿è¡Œä¸­è·å¾—ï¼›strlenæ˜¯å­—ç¬¦å¤„ç†çš„åº“å‡½æ•°ã€‚ å‚æ•°ç±»å‹ï¼šsizeofå‚æ•°å¯ä»¥æ˜¯ä»»ä½•æ•°æ®çš„ç±»å‹æˆ–è€…æ•°æ®ï¼ˆsizeofå‚æ•°ä¸é€€åŒ–ï¼‰ï¼›strlençš„å‚æ•°åªèƒ½æ˜¯å­—ç¬¦æŒ‡é’ˆä¸”ç»“å°¾æ˜¯â€™\\0â€™çš„å­—ç¬¦ä¸²ã€‚ å€¼ç¡®å®šæ—¶æœºï¼šsizeofå€¼åœ¨ç¼–è¯‘æ—¶ç¡®å®šï¼Œæ‰€ä»¥ä¸èƒ½ç”¨æ¥å¾—åˆ°åŠ¨æ€åˆ†é…ï¼ˆè¿è¡Œæ—¶åˆ†é…ï¼‰å­˜å‚¨ç©ºé—´çš„å¤§å°ã€‚ 12345678int main()&#123; const char* str = &quot;name&quot;; sizeof(str); // å–çš„æ˜¯æŒ‡é’ˆstrçš„é•¿åº¦ï¼Œæ˜¯8 strlen(str); // å–çš„æ˜¯è¿™ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œä¸åŒ…å«ç»“å°¾çš„ \\0ã€‚å¤§å°æ˜¯4 return 0; &#125; æ³¨æ„ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹çš„å†…å­˜å¤§å°æ˜¯å’Œç³»ç»Ÿç›¸å…³çš„ï¼Œæ‰€ä»¥åœ¨ä¸åŒçš„ç³»ç»Ÿä¸‹å–å€¼å¯èƒ½ä¸åŒã€‚æ¯”å¦‚ï¼Œ long ç±»å‹ä¸æŒ‡é’ˆç±»å‹åœ¨ 32 ä½æœºå™¨ä¸Šåªå  4 å­—èŠ‚ï¼Œåœ¨ 64 ä½æœºå™¨ä¸Šå  8 å­—èŠ‚ï¼› intåœ¨32ä½/64ä½éƒ½å 4å­—èŠ‚ã€‚ æœ¬èŠ‚å‡å‡è®¾æŒ‰64ä½æœºå™¨è€ƒè™‘ã€‚ sizeof è®¡ç®—ç»“æ„ä½“å¤§å° ç»“æ„ä½“çš„sizeofä¸ºäº†æé«˜å­˜å–æ•ˆç‡ï¼Œæ¶‰åŠåˆ°å­—èŠ‚å¯¹é½é—®é¢˜ã€‚ å…¶å¯¹é½è§„åˆ™å¦‚ä¸‹: é¡ºåºå­˜å‚¨ï¼šåˆ†é…å†…å­˜çš„é¡ºåºæ˜¯æŒ‰ç…§å£°æ˜çš„é¡ºåºè¿›è¡Œé¡ºåºå­˜å‚¨ï¼› åç§»é‡ï¼šæ¯ä¸ªå˜é‡ç›¸å¯¹äºèµ·å§‹ä½ç½®çš„åç§»é‡ï¼Œå¿…é¡»æ˜¯è¯¥å˜é‡ç±»å‹å¤§å°çš„æ•´æ•°å€ï¼Œä¸æ˜¯æ•´æ•°å€ç©ºå‡ºå†…å­˜ï¼Œç›´åˆ°åç§»é‡æ˜¯æ•´æ•°å€ä¸ºæ­¢ï¼› æ•´ä½“å¤§å°ï¼šæœ€åæ•´ä¸ªç»“æ„ä½“çš„å¤§å°å¿…é¡»æ˜¯ï¼Œå˜é‡ç±»å‹æœ€å¤§å€¼çš„æ•´æ•°å€ã€‚ ä»¥ä¸‹å®ä¾‹è¯´æ˜ã€‚ 1234567891011121314#include &lt;iostream&gt;using namespace std;struct A&#123; char a; double b; int c;&#125;;int main()&#123; cout &lt;&lt; sizeof(A) &lt;&lt; endl;&#125; è¾“å‡ºä¸ºï¼š24ï¼Œè€Œä¸æ˜¯1+8+4=13ã€‚è¿™æ˜¯å› ä¸º ï¼š char a çš„åç§»é‡ä¸º 0ï¼Œå ç”¨ 1Byteï¼› double b æŒ‡çš„ä¸‹ä¸€ä¸ªå¯ç”¨çš„åœ°å€çš„åç§»é‡ä¸º 1ï¼Œä¸æ˜¯ sizeof(double)=8 çš„æ•´æ•°å€ï¼Œéœ€è¦è¡¥è¶³ 7Byte æ‰èƒ½æ˜¯åç§»é‡ä¸º 8ï¼› int c æŒ‡çš„ä¸‹ä¸€ä¸ªå¯ç”¨çš„åœ°å€çš„åç§»é‡ä¸º 16ï¼Œæ˜¯ sizeof(int)=4 çš„æ•´æ•°å€ï¼Œæ»¡è¶³ int çš„å¯¹é½æ–¹å¼ï¼› ç»“æ„ä½“å¤§å°å¿…é¡»æ˜¯æœ€å¤§æˆå‘˜å¤§å°çš„æ•´æ•°å€ï¼Œï¼ˆå³ç»“æ„ä¸­å ç”¨æœ€å¤§ç©ºé—´çš„ç±»å‹æ‰€å ç”¨çš„å­—èŠ‚æ•° sizeof(double)=8ï¼‰çš„å€æ•°ï¼Œæ‰€ä»¥æœ€åè¿˜éœ€å¡«å……4byteã€‚ åµŒå¥—ç»“æ„ä½“å’Œunioå…±ç”¨ä½“å¯¹é½è§„åˆ™åˆæœ‰æ‰€ä¸åŒã€‚ åµŒå¥—ç»“æ„ä½“ å¯¹äºåµŒå¥—çš„ç»“æ„ä½“ï¼Œéœ€è¦å°†å…¶å±•å¼€ã€‚å¯¹åµŒå¥—ç»“æ„ä½“æ±‚ sizeof æ—¶ï¼Œä¸Šè¿°åŸåˆ™å˜ä¸ºï¼š å±•å¼€åçš„ç»“æ„ä½“çš„ç¬¬ä¸€ä¸ªæˆå‘˜çš„åç§»é‡åº”å½“æ˜¯è¢«å±•å¼€çš„ç»“æ„ä½“ä¸­æœ€å¤§ï¼ˆéåµŒå¥—ä¸è¦æ±‚æœ€å¤§ï¼‰çš„æˆå‘˜çš„æ•´æ•°å€ã€‚ ç»“æ„ä½“å¤§å°å¿…é¡»æ˜¯æœ€å¤§æˆå‘˜å¤§å°çš„æ•´æ•°å€ï¼Œè¿™é‡Œæ‰€æœ‰æˆå‘˜è®¡ç®—çš„æ˜¯å±•å¼€åçš„æˆå‘˜ï¼Œè€Œä¸æ˜¯å°†åµŒå¥—çš„ç»“æ„ä½“å½“åšä¸€ä¸ªæ•´ä½“ã€‚ 123456789101112131415161718#include &lt;iostream&gt;using namespace std;struct B&#123; char a; struct &#123; char b; int c; &#125; ss; short d;&#125;;int main()&#123; cout &lt;&lt; sizeof(B) &lt;&lt; endl;&#125; è¯¥ä»£ç è¾“å‡ºï¼š16ã€‚åˆ†æè¿‡ç¨‹åŒå‰ï¼Œè¿™é‡Œåªç»™å‡ºå›¾ç¤ºã€‚ Unioå…±ç”¨ä½“ union ä¸­å˜é‡å…±ç”¨å†…å­˜ï¼ŒåŸåˆ™å¦‚ä¸‹ï¼š å†…å­˜å¤§å°åº”ä»¥æœ€é•¿çš„ä¸ºå‡†ï¼› æ»¡è¶³ä¸Šè¿°æ¡ä»¶ä¸‹ï¼Œè¿˜åº”æ˜¯æœ€é•¿æˆå‘˜çš„æ•´æ•°å€å¤§å°ã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢ä¾‹å­è¾“å‡ºå…±ç”¨ä½“å¤§å°ä¸ºï¼š24ã€‚ 123456789101112131415#include &lt;iostream&gt;using namespace std;union C&#123; int a[5]; // æ•°ç»„å¤§å°=æˆå‘˜*é•¿åº¦=5*4=20 char b; double c;&#125;;int main()&#123; // æœ€åè¾“å‡ºè¡¥è¶³4byteï¼Œæ»¡è¶³æ˜¯double(8å­—èŠ‚)æ•´æ•°å€ cout &lt;&lt; sizeof(C) &lt;&lt; endl;&#125; ç‰¹åˆ«çš„ï¼Œè¯·æ€è€ƒï¼š å°†å…±ç”¨ä½“å†…çš„ int a[5] ä¿®æ”¹æˆ int a[6] åï¼Œç»“æœä»ç„¶ä¸å˜ï¼›ä½†å¦‚æœå°† int a[5] ä¿®æ”¹æˆ int a[7]ï¼Œç»“æœå°±å˜æˆ 32ï¼Ÿ ä½ å¯åœ¨è¯„è®ºåŒºå†™ä¸‹ä½ çš„è§è§£ã€‚ æ‰©å±•ï¼šsizeofè®¡ç®—ç±»å¯¹è±¡å¤§å° å…³äºç±»å ç”¨çš„å†…å­˜ç©ºé—´ï¼Œæœ‰ä»¥ä¸‹å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š è™šå‡½æ•°ï¼šç¼–è¯‘å™¨éœ€è¦ä¸ºç±»æ„å»ºè™šå‡½æ•°è¡¨ï¼Œç±»ä¸­éœ€è¦å­˜å‚¨ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘è¿™ä¸ªè™šå‡½æ•°è¡¨çš„é¦–åœ°å€ã€‚ æ³¨æ„ä¸ç®¡æœ‰å‡ ä¸ªè™šå‡½æ•°ï¼Œéƒ½åªå»ºç«‹ä¸€å¼ è¡¨ï¼Œæ‰€æœ‰çš„è™šå‡½æ•°åœ°å€éƒ½å­˜åœ¨è¿™å¼ è¡¨é‡Œï¼Œç±»ä¸­åªéœ€è¦ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘è™šå‡½æ•°è¡¨é¦–åœ°å€å³å¯ã€‚ é™æ€æˆå‘˜ï¼šè¢«ç±»æ‰€æœ‰å®ä¾‹æ‰€å…±äº«çš„ï¼Œå®ƒä¸è®¡å…¥sizeofè®¡ç®—çš„ç©ºé—´ã€‚ æ™®é€šå‡½æ•°æˆ–é™æ€å‡½æ•°ï¼šéƒ½å­˜å‚¨åœ¨æ ˆä¸­ï¼Œä¸è®¡å…¥sizeofè®¡ç®—çš„ç©ºé—´ã€‚ ç±»æˆå‘˜ï¼šé‡‡ç”¨å­—èŠ‚å¯¹é½çš„æ–¹å¼åˆ†é…ç©ºé—´ï¼› ä»¥ä¸‹ä¸ºå®ä¾‹è¯´æ˜ï¼š 12345678910111213141516171819202122232425262728#include &lt;iostream&gt;using namespace std;class D&#123; public: // è™šå‡½æ•°ï¼šéœ€è¦ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘è™šå‡½æ•°è¡¨ // 32ä½ç³»ç»ŸæŒ‡é’ˆå¤§å°ä¸º 4Byteï¼Œ64ä½ç³»ç»ŸæŒ‡é’ˆå¤§å°ä¸º 8Byte virtual void funa(); virtual void funb(); // æ™®é€šå‡½æ•°æˆ–é™æ€å‡½æ•°æˆ–é™æ€æˆå‘˜ï¼šä¸è®¡å…¥ void func(); static void fund(); static int si; private: // charå 1å­—èŠ‚ char c; // inté¦–å…ˆè¦åç§»3å­—èŠ‚ï¼Œæ˜¯sizeof(int)æ•´æ•°å€ // intæœ¬èº«å 4å­—èŠ‚ int i;&#125;;int main()&#123; // æœ€åæ€»å¤§å°ä¸ºï¼šæŒ‡é’ˆå¤§å°+1+3+4 = 12 OR 16 cout &lt;&lt; sizeof(D) &lt;&lt; endl;&#125; ä»¥ä¸Šè¾“å‡ºä¸ºï¼š12ï¼ˆ32ä½ç³»ç»Ÿï¼‰æˆ–è€…16ï¼ˆ64ä½ç³»ç»Ÿï¼‰ã€‚å…·ä½“å ç”¨è¯·æŸ¥çœ‹ä»£ç ä¸­æ³¨é‡Šã€‚ ç±»æˆå‘˜å¯¹é½æ–¹å¼å’Œç»“æ„ä½“æœ‰æ‰€ä¸åŒï¼Œæœªå°½ç»†èŠ‚å°†åœ¨æœªæ¥è¡¥å……ã€‚ ç©ºç±»/ç»“æ„ä½“å¤§å° æ€è€ƒæºè‡ªäºï¼šç©ºç±»çš„å¤§å°ä¸ºä»€ä¹ˆæ˜¯1ï¼Ÿ ç»è¿‡å®è·µï¼Œæ— è®ºæ˜¯ç©ºç±»è¿˜æ˜¯ç©ºç»“æ„ä½“ï¼Œå…¶å¤§å°å‡ä¸º1è€Œä¸æ˜¯0ã€‚ çœ‹äº†ä¸€ä¸‹æ¯”è¾ƒä¿¡æœçš„è§£ç­”æ˜¯ï¼š å¦‚æœé•¿åº¦æ˜¯0ï¼Œé‚£ä¹ˆæŠŠä»–å¡ç»™ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡é’ˆæŒ‡åˆ°å“ªé‡Œå‘¢ï¼Ÿä¸è€ƒè™‘æŒ‡é’ˆï¼Œè¿™ä¸ªç±»è‡ªå·±å­˜åœ¨å“ªé‡Œå‘¢ï¼Ÿå¦‚æœæˆ‘ä¸€ä¸‹å­ç”³æ˜100ä¸‡ä¸ªå®ä¾‹ï¼Œéƒ½ä¸å ç”¨å†…å­˜å—ï¼Ÿ c++ ä¸­è§„å®šä¸åŒçš„å¯¹è±¡å¿…é¡»æ‹¥æœ‰ä¸åŒçš„åœ°å€ï¼Œå¦‚æœä¸º0ä¼šå¯¼è‡´ä¸¤ä¸ªç©ºç±»çš„åœ°å€ä¸€æ ·ã€‚ ä½†æ˜¯ä¸ºå•¥ç©ºç±»ä¸€å®šè¦æœ‰ä¸åŒçš„åœ°å€æ¥å»åŒºåˆ†ä¸åŒçš„å¯¹è±¡ï¼Ÿ ç»“æ„ä½“æ¯”è¾ƒ C++ç»“æ„ä½“ç›´æ¥è¿›è¡Œæ¯”è¾ƒä¼šå‡ºé”™ï¼š 1234567891011121314151617181920#include&lt;iostream&gt;struct A&#123; int a; float b; char* c;&#125;;int main()&#123; A a&#123;1,2,new char[4]&#123;&#x27;h&#x27;,&#x27;w&#x27;,&#x27;h&#x27;&#125;&#125;; A b&#123;1,2,new char[4]&#123;&#x27;h&#x27;,&#x27;w&#x27;,&#x27;h&#x27;&#125;&#125;; if(a==b) std::cout&lt;&lt;&quot;equal&quot;&lt;&lt;std::endl; else std::cout&lt;&lt;&quot;not equal&quot;&lt;&lt;std::endl;&#125; è¾“å‡ºï¼š 1234[root@roy-cpp test]# g++ -std=c++11 test.cpp -o test.outtest.cpp: In function â€˜int main()â€™:test.cpp:21:9: error: no match for â€˜operator==â€™ (operand types are â€˜Aâ€™ and â€˜Aâ€™) if(a==b) æœ‰ä¸¤ç§åŠæ³•è§£å†³è¿™ä¸ªé—®é¢˜ï¼š ç»“æ„ä½“ a å’Œ b æ¯ä¸ªå…ƒç´ é€ä¸ªæ¯”è¾ƒï¼ŒæŒ‡é’ˆæ¯”è¾ƒå®ƒä»¬çš„åœ°å€ã€‚ è‡ªå·±é‡è½½æ“ä½œç¬¦== ã€‚ 123456789101112131415161718192021222324252627282930313233#include&lt;iostream&gt;struct A&#123; int a; float b; char* c; bool operator== (const A&amp; other) const &#123; bool a_is_equal = (a==other.a); bool b_is_equal = (b==other.b); bool c_is_equal = true; for(int i=0 ; i&lt;3 ; i++) &#123; if(c[i] != other.c[i]) &#123; c_is_equal =false; break; &#125; &#125; return a_is_equal &amp;&amp; b_is_equal &amp;&amp; c_is_equal; &#125;&#125;;int main()&#123; A a&#123;1,2,new char[4]&#123;&#x27;h&#x27;,&#x27;w&#x27;,&#x27;h&#x27;&#125;&#125;; A b&#123;1,2,new char[4]&#123;&#x27;h&#x27;,&#x27;w&#x27;,&#x27;h&#x27;&#125;&#125;; if(a==b) std::cout&lt;&lt;&quot;equal&quot;&lt;&lt;std::endl; else std::cout&lt;&lt;&quot;not equal&quot;&lt;&lt;std::endl;&#125; è¾“å‡ºï¼š 12[root@roy-cpp test]# ./test.out equal 4.1.4 æ‰©å±•é˜…è¯»ï¼šä¸ºä»€ä¹ˆC++è¿˜ä¿ç•™structï¼Ÿ åœ¨C++ä¸­ï¼Œé™¤äº†é»˜è®¤è®¿é—®æ§åˆ¶ç¬¦ã€æ¨¡æ¿å‚æ•°ï¼Œstructå’ŒclassåŸºæœ¬å®Œå…¨ä¸€è‡´ï¼Œstructå­˜åœ¨çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Œå…¨ç”¨classä¸å¥½å—ï¼Ÿ struct class ç»§æ‰¿é»˜è®¤æƒé™ structé»˜è®¤æ˜¯public classé»˜è®¤æ˜¯private æ¨¡æ¿å‚æ•° ä¸å¯ä»¥ å¯ä»¥ è¿™é‡Œé¢çš„åŸå› ä¸»è¦æ˜¯ï¼š å†å²åŒ…è¢±ã€‚ç»™ C è¯­è¨€ç¨‹åºå¼€å‘äººå‘˜æœ‰ä¸€ä¸ªå½’å±æ„Ÿï¼› å…¼å®¹ ã€‚è®© C++ ç¼–è¯‘å™¨å…¼å®¹ä»¥å‰ç”¨ C è¯­è¨€å¼€å‘å‡ºæ¥çš„é¡¹ç›®ï¼Œæ¯”å¦‚ç³»ç»Ÿåº“stdlib.h ç­‰ã€‚ 4.2 æšä¸¾ 4.2.1 æšä¸¾åˆè¯† å’Œç»“æ„ä½“ç±»ä¼¼ï¼Œæšä¸¾ä¹Ÿæ˜¯ç»„ç»‡äº†æœ‰é€»è¾‘å…³ç³»çš„æ•°æ®ï¼Œä¸è¿‡æšä¸¾ï¼š æ•°æ®åªèƒ½æ˜¯åŒç±»å‹ï¼ˆæˆ‘ä»¬å®šä¹‰çš„æšä¸¾ç±»å‹ï¼‰ï¼› ç›¸æ¯”struct/classï¼Œæšä¸¾enumæ›´åƒæ˜¯ä¸€ç§å¼±ç»„ç»‡ç±»å‹ï¼Œå¦‚æœä½ æœ‰ä¸€ç»„ç›¸å…³çš„å¸¸é‡æœ€å¥½ä½¿ç”¨æšä¸¾ã€‚ ä¸¾ä¸ªä¾‹å­å§ï¼Œç”¨æšä¸¾ç»„åˆä¸‰å…ƒè‰²ï¼ˆå¸¸é‡ï¼‰ã€‚ 1234567891011121314#include &lt;iostream&gt;enum Color // æœ€ä½³å®è·µï¼šé¦–å­—æ¯å¤§å†™&#123; red, blue, green,&#125;;int main()&#123; Color paint = red; return 0;&#125; ç›¸æ¯”ç”¨0ã€1ã€2åˆ†åˆ«å®šä¹‰ä¸‰å…ƒè‰²ï¼Œä»£ç å¯è¯»æ€§æé«˜äº†å¾ˆå¤šã€‚ æšä¸¾æ˜¯æ•´æ•°ç¬¦å·å¸¸é‡ æšä¸¾åˆ°åº•ä»€ä¹ˆï¼Ÿ å¥½å§ï¼Œæ ‡é¢˜å·²ç»å‡ºå–äº†ç­”æ¡ˆï¼šæšä¸¾å…¶å®å°±æ˜¯æ•´æ•°ç¬¦å·å¸¸é‡ï¼ˆé»˜è®¤æ˜¯intï¼‰ã€‚ å’Œchar æƒ…å†µæœ‰ç‚¹ç±»ä¼¼ï¼š 1char c = &#x27;A&#x27;; char å®é™…ä¸Šå­˜å‚¨çš„æ˜¯ä¸€ä¸ª 1 å­—èŠ‚çš„æ•´æ•°å€¼ï¼Œå³å­—ç¬¦'A'è¢«è½¬æ¢ä¸ºæ•´æ•°å€¼ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º65ï¼‰å¹¶å­˜å‚¨ã€‚ åªä¸è¿‡æ‰“å°coutç±»å¯¹&lt;&lt;è¿›è¡Œäº†é‡è½½ï¼Œç›´æ¥æ‰“å°c å‡ºæ¥çš„æ˜¯'A'ï¼š 1std::cout&lt;&lt;c; // A å›åˆ°æšä¸¾enum ï¼š æšä¸¾ä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªæ•´æ•°å€¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç¬¬ä¸€ä¸ªæšä¸¾å™¨è¢«åˆ†é…æ•´æ•°å€¼0ï¼Œæ¯ä¸ªåç»­æšä¸¾å™¨çš„å€¼éƒ½æ¯”å‰ä¸€ä¸ª+1ï¼› æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå®šä¹‰æšä¸¾å€¼ã€‚ 1234567891011121314151617#include &lt;iostream&gt;enum Animal&#123; cat = -3, dog, // -2 pig, // -1 horse = 5, giraffe, // 6 chicken // 7&#125;;int main()&#123; Animal animal = dog; std::cout &lt;&lt; &quot;ä½ çš„å® ç‰©æ˜¯ï¼š&quot; &lt;&lt; animal; return 0;&#125; è¾“å‡ºï¼š 1ä½ çš„å® ç‰©æ˜¯ï¼š-2 å¥½å§ä½ çš„å® ç‰©æ˜¯-2ï¼Œç¼–è¯‘å™¨éšå¼å°†æšä¸¾è½¬æ¢ä¸ºäº†æ•´æ•°ï¼ˆå¹¶æ²¡æœ‰åƒcharä¸€æ ·æ‰“å°å­—ç¬¦ï¼Œstd::coutæ²¡æœ‰å¯¹æšä¸¾ç±»å‹Animalè¿›è¡Œé‡è½½ï¼‰ã€‚ ä¸è¿‡ï¼Œç¼–è¯‘å™¨ä¸ä¼šå°†æ•´æ•°éšå¼è½¬æ¢ä¸ºæšä¸¾æ•°ã€‚ 1Animal animal = -2; // error éœ€è¦æ˜¾å¼è½¬æ¢ï¼š 1Animal animal = static_cast&lt;Animal&gt;(-2); ä¸Šé¢æˆ‘ä»¬éªŒè¯äº†enumçš„ä¸»è¦ç”¨æ³•å’Œç‰¹æ€§ï¼Œä½†å¯ä»¥æ›´å®Œç¾ä¸€ç‚¹ä¼˜é›…æ‰“å°æšä¸¾æ•°å—ï¼Œå°±åƒcharä¸€æ ·ï¼Ÿ ä¼˜é›…æ‰“å°æšä¸¾æ•° æ€ä¹ˆä¼˜é›…æ‰“å°æšä¸¾æ•°ï¼Ÿ C++ä¸­å¹¶æ²¡æœ‰æä¾›ç›¸å…³å‡½æ•°ã€‚è¿™åªæœ‰æˆ‘ä»¬è‡ªå·±æ¥å®ç°ï¼Œif-elseæˆ–switch é€ä¸ªåˆ¤æ–­æ˜¯æœ€å®¹æ˜“æƒ³åˆ°çš„ï¼š 1234567891011const std::string printAnimal(Animal animal)&#123; switch (animal) &#123; case cat: return &quot;cat&quot;; case dog: return &quot;dog&quot;; case pig: return &quot;pig&quot;; // çœç•¥å…¶å®ƒçš„åˆ¤æ–­ default: return &quot;???&quot;; &#125;&#125; ä½†è¿™éœ€è¦æ˜¾å¼è°ƒç”¨printAnimal æ–¹æ³•ï¼Œçœ‹èµ·æ¥æœ‰ç‚¹ç¬¨æ‹™ã€‚ 12Animal animal = dog;std::cout &lt;&lt; &quot;ä½ çš„å® ç‰©æ˜¯ï¼š&quot; &lt;&lt; printAnimal(animal); ç›´æ¥é‡è½½std::cout ç±»è¿ç®—ç¬¦&lt;&lt;æ˜¯æ›´å¥½çš„åšæ³•ã€‚ 1234567891011std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, Animal animal)&#123; switch (animal) &#123; case cat: return &quot;cat&quot;; case dog: return &quot;dog&quot;; case pig: return &quot;pig&quot;; // çœç•¥å…¶å®ƒçš„åˆ¤æ–­ default: return &quot;???&quot;; &#125;&#125; ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å°å­—ç¬¦ä¸²çœ‹èµ·æ¥èªæ˜äº†å¾ˆå¤šï¼š 12Animal animal = dog;std::cout &lt;&lt; &quot;ä½ çš„å® ç‰©æ˜¯ï¼š&quot; &lt;&lt; animal; è¾“å‡ºï¼š 1ä½ çš„å® ç‰©æ˜¯ï¼šdog è®¤è¯†æšä¸¾ä½œç”¨åŸŸ æšä¸¾å†…éƒ¨æ•°æ®å’Œæšä¸¾å…·æœ‰åŒæ ·çš„ä½œç”¨èŒƒå›´ï¼Œä¹Ÿå°±æ˜¯æšä¸¾å¯¹å†…éƒ¨æ•°æ®ä½œç”¨èŒƒå›´æ— é™åˆ¶ã€‚ å›åˆ°æœ€å¼€å§‹çš„ä¾‹å­ï¼š 1234567891011121314enum Color&#123; red, green, blue, &#125;;int main()&#123; // ç›´æ¥å°±ä½¿ç”¨äº†red // ä¹Ÿå¯ä»¥é€šè¿‡å‰ç¼€Color::red Color paint = red; return 0;&#125; å¯ä»¥çœ‹åˆ°ï¼Œred å’Œ enum Color ä½œç”¨åŸŸæ˜¯ä¸€è‡´çš„ï¼Œéƒ½æ˜¯å…¨å±€ç±»å‹ã€‚ è¿™ç§è®¾ç½®ï¼Œè°ƒç”¨èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯åœ¨ä¸¤ä¸ªä¸åŒæšä¸¾ç±»å®šä¹‰ç›¸åŒçš„æ•°æ®ï¼Œä¼šä½¿å¾—å‘½ä»¤ç©ºé—´æ±¡æŸ“ï¼Œå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚ 12345678910111213enum Color&#123; red, green, blue, // blue è¡¨ç¤ºé¢œè‰²&#125;;enum Feeling&#123; happy, tired, blue, // blueè¡¨ç¤ºå¿ƒæƒ…&#125;; å¦‚æœä½ å†å°è¯•è°ƒç”¨ï¼Œç¼–è¯‘æ— æ³•é€šè¿‡ï¼Œä¸¤ä¸ªblue å†²çªï¼š 1Color paint = blue; // error: redeclaration of â€˜blueâ€™ è™½ç„¶å¯ä»¥é€šè¿‡æ˜¾å¼æŒ‡å®šå‰ç¼€é¿å…é”™è¯¯ï¼š 1Color paint = Color::blue; ä½†ç»ˆå½’æ˜¯åŸ‹ä¸‹äº†éšæ‚£ã€‚ æ›´å¥½çš„åšæ³•æ˜¯ä½¿ç”¨å‘½åç©ºé—´namespace é™å®šèŒƒå›´ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥åœ¨ä¸åŒæšä¸¾ç±»å®šä¹‰ç›¸åŒçš„æ•°æ®ã€‚ 1234567891011121314151617181920212223242526272829#include &lt;iostream&gt;namespace color&#123; enum Color &#123; red, green, blue, &#125;;&#125;namespace feeling&#123; enum Feeling &#123; happy, tired, blue, &#125;;&#125;int main()&#123; // ç°åœ¨å¿…é¡»åŠ ä¸Šä½œç”¨åŸŸåŒºåŸŸçš„åç§° color::Color paint = color::blue ; feeling::Feeling me = feeling::blue ; return 0;&#125; æœ€ä½³å®è·µ ä½¿ç”¨æšä¸¾è¯·æ˜¾å¼æŒ‡æ˜æšä¸¾ç±»å‹ï¼Œæ¯”å¦‚color::blue è€Œéç›´æ¥ä½¿ç”¨blueã€‚ 4.2.2 èŒƒå›´æšä¸¾ ä¸ºä»€ä¹ˆéœ€è¦èŒƒå›´æšä¸¾ï¼Ÿ éèŒƒå›´æšä¸¾çœ‹èµ·æ¥å¾ˆå¥½ï¼Œä½†ä¼šå¸¦æ¥ä¸€äº›é—®é¢˜ï¼š éšå¼è½¬æ¢çš„å±å®³ã€‚éèŒƒå›´æšä¸¾ä¼šéšå¼åœ°å°†æšä¸¾ç±»å‹è½¬æ¢ä¸ºæ•´æ•°ç±»å‹ï¼Œè¿™æœ‰æ—¶å€™ä¼šé€ æˆä¸€äº›æ„æ–™ä¹‹å¤–çš„é”™è¯¯ï¼ˆæ¯”å¦‚ä¸åŒæšä¸¾ç±»å‹è¿›è¡Œæ¯”è¾ƒï¼Œä¸‹ä¸¾ä¾‹è¯´æ˜ï¼‰ï¼› éå¼ºåˆ¶è¦æ±‚å‰ç¼€ã€‚è¿™æ˜¾ç„¶å’Œæˆ‘ä»¬åˆšåˆšæåˆ°çš„æšä¸¾æœ€ä½³å®è·µä¸ç¬¦ã€‚ èŒƒå›´æšä¸¾çš„ç‰¹æ€§å¾ˆå¥½åœ°è§£å†³äº†ä¸Šè¿°é—®é¢˜ï¼š èŒƒå›´æšä¸¾æ˜¯å¼ºç±»å‹çš„ï¼ˆä¸ä¼šéšå¼è½¬æ¢ä¸ºæ•´æ•°ï¼‰å’Œå¼ºä½œç”¨åŸŸçš„ï¼ˆå¿…é¡»æŒ‡å®šå‰ç¼€ï¼‰ï¼› å…¶ä½™å’ŒéèŒƒå›´æšä¸¾æ²¡ä»€ä¹ˆåŒºåˆ«ã€‚ èŒƒå›´æšä¸¾åˆè¯† èŒƒå›´æšä¸¾é€šè¿‡enum class å£°æ˜ï¼š 12345678910111213#include &lt;iostream&gt;enum class Color &#123; red, blue,&#125;;enum class Fruit&#123; banana, apple,&#125;; å…ˆè®¤è¯†ä¸‹èŒƒå›´æšä¸¾çš„å¼ºä½œç”¨åŸŸï¼š 1Color c = red; // errorï¼Œidentifier &quot;red&quot; is undefined å¿…é¡»æ˜¾å¼æŒ‡å®šä½œç”¨èŒƒå›´ï¼Œå¥‘åˆäº†æœ€ä½³å®è·µï¼š 1Color c = Color::red; // ok å†æ¥è®¤è¯†èŒƒå›´æšä¸¾çš„å¼ºç±»å‹ï¼ˆä¸ä¼šéšå¼è½¬æ¢ï¼‰ã€‚ æ— æ³•ç›´æ¥æ‰“å° å› ä¸ºèŒƒå›´æšä¸¾ä¸ä¼šéšå¼è½¬æ¢ä¸ºint ï¼Œstd::cout æ— æ³•ç›´æ¥æ‰“å°ã€‚ 1std::cout &lt;&lt; Fruit::banana; é™¤éä½ æ˜¾å¼è¿›è¡Œè½¬æ¢ï¼š 1std::cout &lt;&lt; static_cast&lt;int&gt;(Fruit::banana); ä¸èƒ½ç›´æ¥æ¯”è¾ƒä¸¤ä¸ªä¸åŒæšä¸¾ç±»å‹ ä¸‹é¢ä»£ç ç¼–è¯‘èƒ½é€šè¿‡å—ï¼Ÿ 1234567891011int main()&#123; Color color = Color::red ; Fruit fruit = Fruit::banana ; if (color == fruit) std::cout &lt;&lt; &quot;colorå’Œfruitç›¸ç­‰\\n&quot;; else std::cout &lt;&lt; &quot;colorå’Œfruitä¸ç›¸ç­‰\\n&quot;; return 0;&#125; å¦‚æœæ˜¯æ— èŒƒå›´æšä¸¾ä¸Šè¿°ä»£ç ä¸ä¼šç¼–è¯‘å‡ºé”™ï¼Œç”šè‡³ä¼šæ‰“å°ï¼š 1colorå’Œfruitç›¸ç­‰ å› ä¸ºredå’Œbanana éƒ½è¢«éšå¼è½¬æ¢ä¸ºintç±»å‹ï¼Œå€¼éƒ½ä¸º0 ã€‚ ä½†å¦‚æœæ˜¯èŒƒå›´æšä¸¾ï¼Œä¸Šè¿°ä»£ç ä¼šç›´æ¥æŠ¥é”™ï¼š 1compile error: the compiler doesn&#x27;t know how to compare different types Color and Fruit èŒƒå›´æšä¸¾ä¸ä¼šè½¬æ¢ä»»ä½•å¯ä»¥ä¸å¦ä¸€ç§ç±»å‹è¿›è¡Œæ¯”è¾ƒçš„ç±»å‹ã€‚ ä¸è¿‡ï¼Œæ¯”è¾ƒåŒä¸€ç±»å‹æ˜¯okçš„ã€‚ 1if (Color::red == Color::blue) // ok æœ€ä½³å®è·µ è¯·å°½é‡ä½¿ç”¨èŒƒå›´æšä¸¾ï¼Œå®ƒæ›´å®‰å…¨ã€‚ è™½ç„¶åœ¨å®é™…ç¼–ç æˆ‘ä»¬è¿˜æ˜¯å¯èƒ½ä¼šä½¿ç”¨éèŒƒå›´æšä¸¾ï¼Œå› ä¸ºéèŒƒå›´æšä¸¾éšå¼è½¬æ¢å¯é¿å…å¤§é‡æ‰‹åŠ¨static_casting ã€‚ä½†æ˜¯ï¼Œåªæ˜¯å¶å°”çš„éœ€è¦static_casting ä¾¿ä¸èƒ½æ„æˆæ‹’æ¥èŒƒå›´æšä¸¾çš„ç†ç”±ã€‚ 4.X ç±»å‹è½¬æ¢ğŸŒŸ ä»€ä¹ˆæ˜¯ç±»å‹è½¬æ¢ï¼Ÿ å°†å€¼ä»ä¸€ç§æ•°æ®ç±»å‹è½¬æ¢ä¸ºå¦ä¸€ç§æ•°æ®ç±»å‹çš„è¿‡ç¨‹ï¼Œç§°ä¸ºç±»å‹è½¬æ¢ã€‚ C++çš„ç±»å‹æœ‰å‡ ç§ï¼Ÿ C++çš„ç±»å‹è½¬æ¢åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§ä¸ºéšå¼è½¬æ¢ï¼Œå¦ä¸€ç§ä¸ºæ˜¾å¼è½¬æ¢ï¼š éšå¼è½¬æ¢ï¼šç¼–è¯‘å™¨è‡ªåŠ¨è¿›è¡Œçš„ç±»å‹è½¬æ¢ï¼Œå°±æ˜¯éšå¼è½¬æ¢ï¼› æ˜¾å¼è½¬æ¢ï¼šç¨‹åºå‘˜æ˜¾å¼ä½¿ç”¨_cast ç±»å‹è½¬æ¢ç¬¦è¿›è¡Œç±»å‹è½¬æ¢ï¼Œå°±æ˜¯æ˜¾å¼è½¬æ¢ã€‚ C++ ä¸­çš„ç»å¤§å¤šæ•°ç±»å‹è½¬æ¢éƒ½æ˜¯éšå¼ç±»å‹è½¬æ¢ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬å…ˆæ¥æ¥è§¦éšå¼ç±»å‹è½¬æ¢å§ã€‚ 4.X.1 éšå¼è½¬æ¢ éšå¼è½¬æ¢å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œæ ‡å‡†è½¬æ¢å’Œç”¨æˆ·è‡ªå®šä¹‰è½¬æ¢ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å®ƒä»¬æ˜¯ä»€ä¹ˆã€‚ æ ‡å‡†è½¬æ¢ æ ‡å‡†è½¬æ¢å°±æ˜¯ç¼–è¯‘å™¨é‡Œå†…ç½®çš„ä¸€äº›ç±»å‹è½¬æ¢è§„åˆ™ï¼š æ•°å€¼æå‡ æ•°å€¼è½¬æ¢ ç®—æœ¯è½¬æ¢ æ•°ç»„é€€åŒ–æˆæŒ‡é’ˆã€å‡½æ•°è½¬æ¢æˆå‡½æ•°æŒ‡é’ˆ æ•°æ®ç±»å‹æŒ‡é’ˆåˆ°voidæŒ‡é’ˆçš„è½¬æ¢ã€nullptr_tåˆ°æ•°æ®ç±»å‹æŒ‡é’ˆçš„è½¬æ¢ ç‰¹å®šè¯­å¢ƒä¸‹è¦æ±‚çš„è½¬æ¢ï¼Œæ¯”å¦‚ifé‡Œè¦æ±‚boolç±»å‹çš„å€¼ã€æšä¸¾ç±»å‹è½¬æ¢ä¸ºæ•´å‹ â€¦ å¯ä»¥çœ‹åˆ°ï¼Œè¿™äº›è½¬æ¢åŸºæœ¬é’ˆå¯¹åŸºæœ¬æ•°æ®ç±»å‹ã€æŒ‡é’ˆã€æˆ–æ•°ç»„è¿™ç§å†…ç½®çš„èšåˆç±»å‹çš„ã€‚ å…ˆä»ç¬¬ä¸€ä¸ªæ•°å€¼æå‡è¯´èµ·å§ã€‚ æ•°å€¼æå‡ æ•°å€¼æå‡æ˜¯ä»€ä¹ˆï¼Ÿ é¡¾åæ€ä¹‰ï¼Œæ•°å€¼æå‡å°±æ˜¯å°†æ›´å°çš„æ•°æ®ç±»å‹ï¼ˆæ¯”å¦‚charï¼‰ è½¬æ¢ä¸ºæ›´å¤§çš„æ•°æ®ç±»å‹ï¼ˆé€šå¸¸æ˜¯intæˆ–è€…doubleï¼‰ã€‚æ˜¾ç„¶è¿™ç§æå‡æ˜¯å®‰å…¨çš„ï¼Œå®ƒä¸ä¼šä¸¢å¤±ç²¾åº¦ã€‚ æ•°å€¼æå‡ä¹Ÿåˆ†ä¸ºä¸¤ä¸ªå­ç±»åˆ«ï¼šæµ®ç‚¹æå‡å’Œæ•´æ•°æå‡ã€‚ æµ®ç‚¹æå‡ æµ®ç‚¹æå‡è§„åˆ™å¾ˆç®€å•ï¼Œå°±æ˜¯float å¯ä»¥éšå¼æå‡ä¸ºdouble ã€‚ä¸€ä¸ªä¾‹å­å°±èƒ½æ˜ç™½ï¼š 1234567891011#include &lt;iostream&gt;void printDouble(double d)&#123; std::cout &lt;&lt; d;&#125;int main()&#123; printDouble(4.0f); // 4.0fæ˜¯floatè¢«éšå¼æå‡double return 0;&#125; æ•´å‹æå‡ charã€boolã€short ã€intã€long éƒ½æ˜¯æ•´å‹ã€‚ æ•´å‹æå‡è¯´ç™½äº†ï¼Œå°±æ˜¯æ¯”int å°çš„æ•°æ®ç±»å‹ï¼Œå°½é‡å¾€int æˆ– unsigned intä¸Šé ã€‚å®ƒçš„è§„åˆ™å¤§è‡´æ€»ç»“å¦‚ä¸‹ï¼š æ— ç¬¦å·æˆ–è€…æœ‰ç¬¦å·charã€short ä¼˜å…ˆéšå¼è½¬æ¢ä¸ºintï¼Œå¦‚æœintä¸å¤Ÿå®¹çº³ï¼Œåˆ™è½¬æ¢ä¸º unsigned intï¼› boolä¹Ÿè½¬æ¢ä¸ºintï¼Œfalseå˜æˆ0ï¼Œtrueå˜æˆ1ã€‚ ä¸¾ä¸€ä¸ªå°ä¾‹å­ã€‚ 12345678910111213141516#include &lt;iostream&gt;void printInt(int x)&#123; std::cout &lt;&lt; x;&#125;int main()&#123; short s = 3 ; // short printInt(s); printInt(&#x27;a&#x27;); // char printInt(true); // bool return 0;&#125; æ•°å€¼ä¹‹é—´çš„è½¬æ¢å°±ç»“æŸäº†ï¼Ÿ çœ‹åˆ°è¿™å„¿æˆ–è®¸ä½ ä¼šè¯´ä½œè€…æ˜¯ä¸æ˜¯é—æ¼äº†ï¼Œintâ†’float ä¹‹ç±»çš„æ•´å‹æå‡ä»‹ç»å‘¢ï¼Ÿ å…¶å®ï¼Œintâ†’float ã€è¿˜æœ‰å®½ç±»å‹â†’çª„ç±»å‹çš„è½¬æ¢éƒ½è¢«å½’ç±»ä¸ºæ•°å€¼è½¬æ¢ã€‚å½“ç„¶è¿™åªæ˜¯å­¦æœ¯ä¸Šçš„åŒºåˆ«ï¼Œä½ ä¸å¿…å¤ªè¿‡çº ç»“è¿™ç‚¹ã€‚ æ•°å€¼è½¬æ¢ ä»€ä¹ˆæ˜¯æ•°å€¼è½¬æ¢ï¼Ÿ æ•°å€¼æå‡æœªæåˆ°çš„è½¬æ¢ï¼Œéƒ½æ˜¯æ•°å€¼è½¬æ¢ã€‚ å›ç­”è¿™ä¹ˆæ•·è¡ï¼Ÿå¥½å§ï¼Œæˆ‘å…·ä½“ä¸€ç‚¹ã€‚ æ•°å€¼è½¬æ¢å¯åˆ†ä¸ºä»¥ä¸‹äº”ç§è§„åˆ™ï¼š æ•´å‹å¯è½¬æ¢ä¸ºä»»ä½•å…¶å®ƒæ•´å‹ï¼ˆä¸åŒ…æ‹¬æ•´å‹æå‡ï¼‰ 123short s = 3; long l = 3; char ch = s; æµ®ç‚¹ç±»å‹è½¬æ¢ä¸ºä»»ä½•å…¶ä»–æµ®ç‚¹ç±»å‹ï¼ˆä¸åŒ…æ‹¬æµ®ç‚¹æå‡ï¼‰ 12float f = 3.0; long double ld = 3.0; æ•´æ•°ç±»å‹è½¬æ¢ä¸ºä»»ä½•æµ®ç‚¹ç±»å‹ 1double d = 3; å°†æµ®ç‚¹ç±»å‹è½¬æ¢ä¸ºä»»ä½•æ•´æ•°ç±»å‹ 1int i = 3.5; å°†æ•´æ•°ç±»å‹æˆ–æµ®ç‚¹ç±»å‹è½¬æ¢ä¸º bool 1bool b1 = 3.0; å¯ä»¥çœ‹åˆ°ï¼šæ•°å€¼è½¬æ¢å’Œæ•°å€¼æå‡çš„è§„åˆ™ç»¼åˆèµ·æ¥å°±æ˜¯ä¸€å¥è¯ï¼šC++ä¸­åŸºæœ¬ä»»æ„æ•´å‹ä¹‹é—´éƒ½å¯ä»¥è¿›è¡Œéšå¼è½¬æ¢ã€‚ ä½†æ•°å€¼è½¬æ¢ä¼šå¸¦æ¥ä¸€äº›å±é™©ã€‚ ç”±äºæ•°å€¼è½¬æ¢å¯ä»¥å°†ï¼šå®½ç±»å‹â†’çª„ç±»å‹ã€æµ®ç‚¹ç±»å‹â†’æ•´æ•°ç±»å‹ï¼Œè¿™ä¼šå¯¼è‡´ç²¾åº¦ä¸¢å¤±ã€‚ 1234567// æµ®ç‚¹ç±»å‹â†’æ•´æ•°ç±»å‹ float a = 1.5; int b = a ; // a = 1.0 , å°æ•°éƒ¨åˆ†ä¸¢å¤± // å®½ç±»å‹â†’çª„ç±»å‹ int a = 1000000; char d = a; // d = 64ï¼ˆ&#x27;@&#x27;ï¼‰ , aè¢«æˆªæ–­ å¦ä¸€ç‚¹æ¯”è¾ƒéšè”½ï¼Œéšå¼è½¬æ¢æ€»æ˜¯è½¬æ¢ä¸ºå³å€¼ï¼ˆæ˜¾å¼è½¬æ¢ä¹Ÿæ˜¯ï¼‰ã€‚ å¬èµ·æ¥å¥½åƒæ²¡ä»€ä¹ˆæ¯›ç—…ï¼Œä½†æ˜¯å’Œå¼•ç”¨ç»“åˆèµ·æ¥å°±åäº‹äº†ï¼Œæˆ‘ä»¬çŸ¥é“å¼•ç”¨åªèƒ½ç”¨å·¦å€¼åˆå§‹åŒ–ã€‚ 123int a = 10; long &amp;b = a; // errorï¼Œæ— æ³•ä½¿ç”¨å³å€¼åˆå§‹åŒ–å¼•ç”¨ long &amp;b = static_cast&lt;long&gt;(a); // error,æ˜¾å¼è½¬æ¢ä¹Ÿæ˜¯å³å€¼ è§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼š 12345678// 1.å’Œå¼•ç”¨ç±»å‹ä¿æŒä¸€è‡´ int a = 10; long tmp = a; long &amp;b = tmp; // 2.ä½¿ç”¨constä¿®é¥°ï¼Œè¿™æ ·å¯ä»¥æ¥å—å³å€¼åˆå§‹åŒ– int a = 10; const long &amp;b = a; æ‰©å±•åˆ°å‡½æ•°ä¹Ÿæ˜¯ä¸€æ ·ï¼š 1234void func(const long&amp; value); int a = 10; func(a); è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤šæ•™ç¨‹è¯´å°½é‡ç”¨constä¿®é¥°å¼•ç”¨ï¼šè¿™æ ·å¯ä»¥ä½¿å¾—å‡½æ•°å‚æ•°å¯ä»¥éšæ»¡è¶³å¼è½¬æ¢è§„åˆ™ã€‚ ç®—æœ¯è½¬æ¢ ç®—æœ¯è½¬æ¢å°±æ˜¯å½“æ“ä½œæ•°ä¸æ˜¯åŒä¸€ç±»å‹æ—¶ï¼Œä¼šéšå¼è½¬æ¢ä¸ºåŒä¸€ç±»å‹è¿›è¡Œå†è¿›è¡Œæ“ä½œã€‚ ç®—æœ¯è½¬æ¢ä¼˜å…ˆçº§åˆ—è¡¨ï¼š long double &gt; double &gt; float &gt; unsigned long long &gt; long long &gt; long &gt; unsigned int &gt; int æ³¨æ„åˆ°æœ€ä½ä¼˜å…ˆçº§æ˜¯intã€‚ ç®—æœ¯è½¬æ¢åªæœ‰ä¸¤æ¡è§„åˆ™ï¼š å¦‚æœè‡³å°‘æœ‰ä¸€ä¸ªæ“ä½œæ•°çš„ç±»å‹åœ¨ä¼˜å…ˆçº§åˆ—è¡¨ä¸­ï¼Œåˆ™å°†å…·æœ‰è¾ƒä½ä¼˜å…ˆçº§çš„æ“ä½œæ•°è½¬æ¢ä¸ºå…·æœ‰è¾ƒé«˜ä¼˜å…ˆçº§çš„æ“ä½œæ•°çš„ç±»å‹ï¼› å¦åˆ™ï¼ˆä¸¤ä¸ªæ“ä½œæ•°çš„ç±»å‹éƒ½ä¸åœ¨åˆ—è¡¨ä¸­ï¼‰ï¼Œä¸¤ä¸ªæ“ä½œæ•°éƒ½è¿›è¡Œç±»å‹æå‡ã€‚ ä¸€ä¸ªç®€å•ä¾‹å­ã€‚ 123int i = 2;double d = 3.5;typeid(i + d).name(); // æœ€ç»ˆç±»å‹ä¸ºdï¼Œdoubleä¼˜å…ˆçº§æ›´é«˜ï¼Œæ‰€ä»¥iæå‡ä¸ºdouble æŒ‡é’ˆç›¸å…³è½¬æ¢ è¿™äº›æˆ‘ä»¬ä¹‹å‰å…¶å®éƒ½åŸºæœ¬è§è¿‡ï¼š æ•°ç»„é€€åŒ–æˆæŒ‡é’ˆã€å‡½æ•°è½¬æ¢æˆå‡½æ•°æŒ‡é’ˆ æ•°æ®ç±»å‹æŒ‡é’ˆåˆ°voidæŒ‡é’ˆçš„è½¬æ¢ã€nullptr_tåˆ°æ•°æ®ç±»å‹æŒ‡é’ˆçš„è½¬æ¢ â€¦ ä¸¾ä¸ªå°ä¾‹å­åŠ æ·±ä¸‹å°è±¡å°±å¥½ã€‚ 123456int* i = new int();void* ptr = i; // æ‰€ä»¥ä¹‹å‰è¯´voidç±»å‹æ¥å—ä»»ä½•ç±»å‹çš„æŒ‡é’ˆchar* pc = 0; // int è½¬æ¢ä¸º Null æŒ‡é’ˆå†è½¬æ¢ä¸ºchar*æŒ‡é’ˆchar* pc = nullptr; // nullptrè½¬æ¢ä¸ºchar*æŒ‡é’ˆdog* pd = new yellowdog(); // æŒ‡é’ˆç±»å‹è½¬æ¢ï¼Œå­ç±» yellowdog æŒ‡é’ˆè½¬æ¢ä¸ºçˆ¶ç±» dog æŒ‡é’ˆ ç‰¹æ®Šè¯­å¢ƒä¸‹è½¬æ¢ ä»¥ifä¸ºä¾‹ï¼Œifæ¥å—boolç±»å‹ã€‚ 1234if(3) // 3è½¬æ¢ä¸ºboolç±»å‹ï¼Œè¿™é‡Œæ˜¯true(é0å€¼éƒ½è½¬æ¢ä¸ºtrue)&#123; std::cout&lt;&lt;&quot;fine&quot;&lt;&lt;std::endl; &#125; boolä¹Ÿæ˜¯æ•´å‹ï¼Œå…¶å®ä¹Ÿå°±æ˜¯å‰é¢è¯´åˆ«çš„ï¼ŒC++ä¸­æ•´å‹å‡ ä¹éƒ½å¯ä»¥è¿›è¡Œéšå¼è½¬æ¢ã€‚ åˆ«è¸©å‘ï¼šcharå’Œintçš„è½¬æ¢ï¼Ÿ å‰é¢æˆ‘ä»¬è¯´åˆ°ï¼Œcharå’Œintå¯ä»¥éšå¼è½¬æ¢ã€‚ä½†è¿™å¯èƒ½ä¼šå¸¦æ¥ä¸€äº›æ„å¤–çš„é”™è¯¯ï¼š 12char c = &#x27;1&#x27;;int a = c; // a=49 æ­¤æ—¶æ˜¯å°†c çš„ASCIIç 49ï¼ˆæ•°å­—çš„ASCIIç ä»48å¼€å§‹ï¼Œå³'0'å¼€å§‹ï¼‰ èµ‹å€¼ç»™å˜é‡aã€‚ å¦‚æœéœ€è¦è·å–cå­˜å‚¨å€¼'1'ï¼š 12int a1 = c-48; // æ–¹æ³•1int a2 = c-&#x27;0&#x27;; // æ–¹æ³•2 ç”¨æˆ·è‡ªå®šä¹‰è½¬æ¢ğŸŒŸ è¿™éƒ¨åˆ†å†…å®¹æœ‰ç‚¹è¶…å‰ï¼Œé€‚åˆæœ‰ä¸€å®šé¢å¯¹å¯¹è±¡åŸºç¡€çš„åŒå­¦ã€‚ æ€ä¹ˆè¿›è¡Œç”¨æˆ·å®šä¹‰è½¬æ¢ï¼Ÿ ç”¨æˆ·è‡ªå®šä¹‰çš„éšå¼è½¬æ¢æ˜¯éšå¼è½¬æ¢çš„é‡å¤´æˆï¼Œä¸€èˆ¬æŒ‡ä¸¤æ–¹é¢å†…å®¹: è½¬æ¢æ„é€ å‡½æ•°ï¼Œåˆ©ç”¨æ¥å—å•ä¸ªå‚æ•° æˆ– ç¬¬ä¸€ä¸ªå‚æ•°å…¶ä½™å‚æ•°éƒ½æä¾›äº†é»˜è®¤å€¼ çš„æ„é€ å‡½æ•°ï¼Œå°†å…¶ä»–ç±»å‹å¯¹è±¡â†’è½¬æ¢ä¸ºæœ¬å¯¹è±¡ã€‚ C++ ä¼šå°†ä»»ä½•æ„é€ å‡½æ•°è§†ä¸ºéšå¼è½¬æ¢è¿ç®—ç¬¦ã€‚ ç±»å‹è½¬æ¢é‡è½½ï¼Œ é‡è½½æŒ‡å®šç±»å‹ï¼Œå°†æœ¬ç±»çš„å¯¹è±¡â†’è½¬æ¢ä¸ºæŒ‡å®šç±»å‹å¯¹è±¡ã€‚ ä¸¤è€…åˆèµ·æ¥å¯ä»¥æ„æˆä¸€ä¸ªåŒå‘è½¬æ¢å…³ç³»ï¼Œä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼š 12345678910111213141516171819202122232425262728#include &lt;iostream&gt;using namespace std;class dog &#123; public: // 1.è½¬æ¢æ„é€ å‡½æ•° dog(string name) &#123;m_name = name;&#125; // 2.ç±»å‹è½¬æ¢é‡è½½ operator string()&#123; return m_name;&#125; private: string m_name;&#125;;void s2dog(cosnt dog&amp;)&#123; // nothing;&#125;int main() &#123; string dogname = &quot;dog&quot;; // 1.è½¬æ¢æ„é€ å‡½æ•° dog d = dogname; // ok s2dog(&quot;dog&quot;); // ok // 2.ç±»å‹è½¬æ¢ std::cout &lt;&lt; &quot;my name is &quot; &lt;&lt; string(d) &lt;&lt; &quot;\\n&quot;; return 0;&#125; è¾“å‡ºï¼š 1my name is dog ç¬¬ä¸€ç§éšå¼è½¬æ¢æ–¹å¼çœ‹èµ·æ¥æœ‰ç‚¹è®©äººè´¹è§£ï¼š 1dog d = dogname; å®ƒä¹Ÿæ²¡æœ‰é‡è½½ = ï¼Œæ€ä¹ˆå°±stringâ†’dogè½¬æ¢äº†ï¼Ÿ è¿™æ˜¯å› ä¸ºdog(string name) &#123;m_name = name;&#125; æœ‰ä¸¤å±‚å«ä¹‰ï¼Œé™¤äº†æ„é€ å‡½æ•°å¤–ï¼Œå®ƒè¿˜å¯ä»¥ä½œä¸ºéšå¼è½¬æ¢å‡½æ•°ï¼Œå°† string å¯¹è±¡è½¬æ¢ä¸º dog å¯¹è±¡ã€‚ å…·ä½“è¿‡ç¨‹è¿˜æ¶‰åŠåˆ°å¤åˆ¶åˆå§‹åŒ–ï¼ˆ5.2.2èŠ‚è¯¦è§£ï¼‰ï¼š è¡¨è¾¾å¼ä»å³åˆ°å·¦ï¼Œæ„é€ å‡½æ•°dog(string)ä½œä¸ºè½¬æ¢æ„é€ å‡½æ•° ï¼Œç¼–è¯‘å™¨å…ˆåˆ›å»ºdogä¸´æ—¶åŒ¿åå¯¹è±¡ï¼Œä½¿å¾—=ä¸¤è¾¹æ“ä½œç±»å‹ä¸€è‡´ï¼› ç„¶åæ„é€ å‡½æ•°dog(string) ï¼Œåˆå§‹åŒ–åŒ¿åå¯¹è±¡ï¼› ç¼–è¯‘å™¨åˆ›å»ºå¯¹è±¡d ï¼› è°ƒç”¨å¤åˆ¶æ„é€ å‡½æ•°ï¼ŒåŒ¿åå¯¹è±¡ä½œä¸ºå¤åˆ¶æ„é€ å‡½æ•°å‚æ•°ï¼Œåˆå§‹åŒ–å¯¹è±¡d ã€‚ ç”¨æˆ·è‡ªå®šä¹‰è½¬æ¢æœ‰ä»€ä¹ˆå±é™©ï¼Ÿ éšå¼è½¬æ¢æ€»æ˜¯æˆ–å¤šæˆ–å°‘æœ‰ç‚¹å±é™©ï¼Œç”¨æˆ·è‡ªå®šä¹‰éšå¼è½¬æ¢ä¹Ÿä¸ä¾‹å¤–ã€‚ æ¯”å¦‚ï¼Œæˆ‘ä»¬åªæ˜¯æƒ³å£°æ˜ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œä½†æ˜¯ä¼šè‡ªåŠ¨è¢«è¯†åˆ«ä¸ºè½¬æ¢æ„é€ å‡½æ•°â€”â€”å°†string â†’dogä¹Ÿè®¸å¹¶ä¸æ˜¯æˆ‘ä»¬çš„æœ¬æ„ ã€‚ é€šå¸¸ç¼–ç éœ€é¿å…åŒå‘éšå¼è½¬æ¢ï¼Œæˆ‘ä»¬å¼€å¤´çš„ä¾‹å­æ˜¯ä¸å¥½çš„ç¼–ç¨‹å®è·µã€‚ å¦‚æœä¸æƒ³æ„é€ å‡½æ•°è¿›è¡Œéšå¼è½¬æ¢ï¼Œå¯ä»¥ç”¨ explicit è¿›è¡Œå£°æ˜ï¼š 1explicit dog(string) &#123;m_name = name;&#125; æ­¤æ—¶è¿›è¡Œéšå¼è½¬æ¢ä¼šå‡ºé”™ï¼š 1string dogname = &quot;dog&quot;; // error åªèƒ½è¿›è¡Œæ˜¾ç¤ºè½¬æ¢ï¼š 1string dogname = static_cast&lt;dog&gt;(&quot;dog&quot;); ç”¨æˆ·è‡ªå®šä¹‰è½¬æ¢æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ éšå¼è½¬æ¢å¹¶ä¸æ˜¯ä¸€æ— æ˜¯å¤„ï¼Œå®ƒä»ç„¶æœ‰å­˜åœ¨çš„æ„ä¹‰ã€‚ ä¸‹é¢å£°æ˜ä¸€ä¸ªRational æœ‰ç†æ•°ç±»ï¼Œå¤„ç†æ•°å­—ç±»å‹ã€‚ 123456789101112131415161718192021class Rational &#123;public: int num; int den; // 1.æ„é€ å‡½æ•°éšå¼è½¬æ¢ Rational(int numerator = 0, int denominator = 1) : num(numberator), den(denominator) &#123;&#125; // 2.é‡è½½è¿ç®—ç¬¦* Rational operator*(const Rational&amp; lhs, const Rational&amp; rhs) &#123; return Rational(lhs.num*rhs.num, lhs.den*rhs.den); &#125;&#125;;int main() &#123; Rational r1 = 23; Rational r2 = r1 * 2; Rational r3 = 3 * r1;&#125; ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªæœ‰ç†æ•°ç±» Rationalï¼Œå®ƒçš„æ„é€ å‡½æ•°æ¥å— 2 ä¸ªé»˜è®¤å‚æ•°ï¼Œåˆ†åˆ«ä»£è¡¨åˆ†å­å’Œåˆ†æ¯ï¼Œç»™è¯¥æ„é€ å‡½æ•°ä¼ é€’ä¸€ä¸ªå‚æ•°æ—¶ï¼ŒRational å…·æœ‰éšå¼è½¬æ¢çš„ç‰¹æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥å°†æ•°å­—èµ‹å€¼ç»™ Rational å¯¹è±¡ï¼Œå¦‚ï¼šRational r1 = 23; ã€‚ ä¸ºäº†é¿å…åŒå‘è½¬æ¢ï¼Œè¿™é‡Œå¹¶æ²¡æœ‰å®šä¹‰å°† Rational è½¬æ¢ä¸º int çš„è½¬æ¢å‡½æ•°ï¼Œè€Œå½“æˆ‘ä»¬æƒ³å®ç° Rational å¯¹è±¡å’Œ int ä¹‹é—´è‡ªç”±çš„ç®—æœ¯è¿ç®—æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰å…¨å±€çš„æ“ä½œç¬¦é‡è½½ï¼Œå¦‚ä¸Šé¢çš„ operator* å®šä¹‰äº†æœ‰ç†æ•°çš„ä¹˜æ³•äº‘ç®—ç¬¦ã€‚ æœ€ä½³å®è·µ ç±»å‹è½¬æ¢æ˜¯å±é™©çš„æ“ä½œï¼Œä½¿ç”¨æ›´é•¿çš„æ“ä½œç¬¦ï¼ˆåæ–‡å°†æåˆ°çš„æ˜¾å¼è½¬æ¢ï¼‰æé†’åŒäº‹å’Œå°†æ¥çš„è‡ªå·±æ³¨æ„å®‰å…¨ã€‚ 4.X.2 æ˜¾å¼è½¬æ¢ æ˜¾å¼è½¬æ¢ä¸»è¦æœ‰ä¸¤ä¸ªä½œç”¨ï¼š å®ŒæˆC++éšå¼è½¬æ¢æ— æ³•å®Œæˆçš„å·¥ä½œï¼Œæ¯”å¦‚èŒƒå›´æšä¸¾ä¸­å°†eunm ç±»å‹â†’int ï¼› å°½å¯èƒ½çš„æ›¿ä»£éšå¼è½¬æ¢ï¼Œåœ¨ç¨‹åºæ˜¾å¼çš„å£°æ˜è¿™æ˜¯ä¸ªè½¬æ¢æ“ä½œâ€”â€”è¿™å¾ˆä¸“ä¸šã€‚ C++/Cæ€»æ˜¯éš¾ä»¥åˆ†å¼€çš„ï¼Œå…ˆä»Cä¸­æ˜¾å¼è½¬æ¢è¯´èµ·å§ã€‚ Cé£æ ¼æ˜¾å¼è½¬æ¢ åœ¨æ ‡å‡† C ç¼–ç¨‹ä¸­ï¼Œè½¬æ¢æ˜¯é€šè¿‡ () è¿ç®—ç¬¦å®Œæˆçš„ï¼Œç±»å‹çš„åç§°è¦è½¬æ¢çš„å€¼æ”¾åœ¨æ‹¬å·å†…ã€‚ 12double x = 1.5;int y = (double)x; Cé£æ ¼çš„è½¬æ¢æ ¼å¼çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä½†å…¶å®æœ‰ä¸å°‘ç¼ºç‚¹ï¼š è½¬æ¢å¤ªè¿‡éšæ„ï¼Œå¯ä»¥åœ¨ä»»æ„ç±»å‹ä¹‹é—´è½¬æ¢ã€‚å¯ä»¥æŠŠä¸€ä¸ªæŒ‡å‘constå¯¹è±¡çš„æŒ‡é’ˆè½¬æ¢æˆæŒ‡å‘éconstå¯¹è±¡çš„æŒ‡é’ˆï¼ŒæŠŠä¸€ä¸ªæŒ‡å‘åŸºç±»å¯¹è±¡çš„æŒ‡é’ˆè½¬æ¢æˆä¸€ä¸ªæ´¾ç”Ÿç±»å¯¹è±¡çš„æŒ‡é’ˆã€‚è¿™äº›è½¬æ¢ä¹‹é—´çš„å·®è·æ˜¯éå¸¸å·¨å¤§çš„ï¼Œä½†æ˜¯ä¼ ç»Ÿçš„Cè¯­è¨€é£æ ¼çš„ç±»å‹è½¬æ¢æ²¡æœ‰åŒºåˆ†è¿™äº›ã€‚ Cé£æ ¼çš„è½¬æ¢æ²¡æœ‰ç»Ÿä¸€çš„å…³é”®å­—å’Œæ ‡ç¤ºç¬¦ã€‚å¯¹äºå¤§å‹ç³»ç»Ÿï¼Œåšä»£ç æ’æŸ¥æ—¶å®¹æ˜“é—æ¼å’Œå¿½ç•¥ã€‚ ä¸ºæ­¤ï¼ŒC++ å¼•å…¥äº†_castå¼ºåˆ¶è½¬æ¢è¿ç®—ç¬¦ã€‚ C++æ˜¾å¼è½¬æ¢ C++è½¬æ¢é£æ ¼å®Œç¾çš„è§£å†³äº†Cé£æ ¼ä¸¤ä¸ªé—®é¢˜ï¼š å¯¹ç±»å‹è½¬æ¢åšäº†ç»†åˆ†ï¼Œæä¾›äº†å››ç§ä¸åŒç±»å‹è½¬æ¢ï¼Œä»¥æ”¯æŒä¸åŒéœ€æ±‚çš„è½¬æ¢ï¼› ç±»å‹è½¬æ¢æœ‰äº†ç»Ÿä¸€çš„æ ‡ç¤ºç¬¦ï¼Œåˆ©äºä»£ç æ’æŸ¥å’Œå®¡æŸ¥ã€‚ å››ç§ä¸åŒç±»å‹çš„è½¬æ¢åˆ†åˆ«æ˜¯ï¼š static_castï¼Œå‘½åä¸Šç†è§£æ˜¯é™æ€ç±»å‹è½¬æ¢ï¼Œå¦‚intè½¬æ¢â†’charï¼Œè½¬æ¢å¤±è´¥ä¸è¿”å›NULLã€‚ dynamic_castï¼Œå‘½åä¸Šç†è§£æ˜¯åŠ¨æ€ç±»å‹è½¬æ¢ï¼Œå¦‚å­ç±»å’Œçˆ¶ç±»ä¹‹é—´çš„å¤šæ€ç±»å‹è½¬æ¢ï¼Œè½¬æ¢å¤±è´¥è¿”å›NULLã€‚ âš ï¸ æ‰€ä»¥ä¸Šè¡Œè½¬æ¢ï¼ˆå­ç±»â†’çˆ¶ç±»ï¼‰è¿™ç§å®‰å…¨è½¬æ¢ç”¨static_castæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯ä¸‹è¡Œè½¬æ¢ï¼ˆçˆ¶ç±»â†’å­ç±»ï¼‰è¿™ç§ä¸å®‰å…¨çš„è½¬æ¢ä½¿ç”¨dynamic_castï¼Œå¤±è´¥ä¼šè¿”å›NULLï¼Œä¼šè¿è¡Œæ—¶æ£€æŸ¥ã€‚ const_castï¼Œå»é™¤constå±æ€§ï¼Œå¦‚å¸¸é‡æŒ‡é’ˆ/å¼•ç”¨è½¬æ¢â†’éå¸¸é‡æŒ‡é’ˆ/å¼•ç”¨ã€‚ reinterpret_castï¼Œä»…ä»…é‡æ–°è§£é‡Šç±»å‹ï¼Œæ²¡æœ‰è¿›è¡ŒäºŒè¿›åˆ¶çš„è½¬æ¢ã€‚ static_cast ä»€ä¹ˆæ—¶å€™ä½¿ç”¨static_castï¼Ÿ åŸºæœ¬æ•°æ®ç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼Œå¦‚æŠŠintè½¬æ¢ä¸ºcharï¼Œå¸¦æ¥å®‰å…¨æ€§é—®é¢˜ç”±ç¨‹åºå‘˜æ¥ä¿è¯ï¼› æŠŠç©ºæŒ‡é’ˆè½¬æ¢æˆç›®æ ‡ç±»å‹çš„ç©ºæŒ‡é’ˆï¼› æŠŠä»»ä½•ç±»å‹çš„è¡¨è¾¾å¼è½¬ä¸ºvoidç±»å‹ï¼› ï¼ˆä¸æ¨èï¼‰ç±»å±‚æ¬¡ç»“æ„ä¸­åŸºç±»å’Œæ´¾ç”Ÿç±»ä¹‹é—´æŒ‡é’ˆæˆ–å¼•ç”¨çš„è½¬æ¢ï¼šä¸Šè¡Œè½¬æ¢ï¼ˆå­ç±»â†’çˆ¶ç±»ï¼‰æ˜¯å®‰å…¨çš„ï¼›ä¸‹è¡Œè½¬æ¢ï¼ˆçˆ¶ç±»â†’å­ç±»ï¼‰ç”±äºæ²¡æœ‰åŠ¨æ€ç±»å‹æ£€æŸ¥ï¼Œæ‰€ä»¥æ˜¯ä¸å®‰å…¨çš„ã€‚ éšå¼è½¬æ¢éƒ½å»ºè®®ä½¿ç”¨static_castè¿›è¡Œæ ‡æ˜å’Œæ›¿æ¢ã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢éšå¼è½¬æ¢éƒ½å¯æ›¿æ¢ä¸ºæ˜¾å¼çš„static_castè½¬æ¢ã€‚ 123456int n = 6;double d = static_cast&lt;double&gt;(n); // åŸºæœ¬ç±»å‹è½¬æ¢int *pn = &amp;n;double *d = static_cast&lt;double *&gt;(&amp;n) // æ— å…³ç±»å‹æŒ‡é’ˆè½¬æ¢ï¼Œç¼–è¯‘é”™è¯¯ï¼Œåº”è¯¥ä½¿ç”¨reinterpret_castvoid *p = static_cast&lt;void *&gt;(pn); // ä»»æ„ç±»å‹è½¬æ¢æˆvoidç±»å‹ dynamic_cast ä»€ä¹ˆæ—¶å€™ä½¿ç”¨dynamic_castï¼Ÿ åªæœ‰åœ¨æ´¾ç”Ÿç±»ä¹‹é—´è½¬æ¢æ—¶æ‰ä½¿ç”¨dynamic_castï¼Œtype-idå¿…é¡»æ˜¯ç±»æŒ‡é’ˆï¼Œç±»å¼•ç”¨æˆ–è€…void*ã€‚ ä½¿ç”¨æ—¶åŸºç±»å¿…é¡»è¦æœ‰è™šå‡½æ•°ï¼Œå› ä¸ºdynamic_castæ˜¯è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥ï¼Œéœ€è¦è¿è¡Œæ—¶ç±»å‹ä¿¡æ¯ï¼Œè€Œè¿™ä¸ªä¿¡æ¯æ˜¯å­˜å‚¨åœ¨ç±»çš„è™šå‡½æ•°è¡¨ä¸­ï¼Œåªæœ‰ä¸€ä¸ªç±»å®šä¹‰äº†è™šå‡½æ•°æ‰ä¼šæœ‰è™šå‡½æ•°è¡¨ï¼ˆå¦‚æœä¸€ä¸ªç±»æ²¡æœ‰è™šå‡½æ•°ï¼Œé‚£ä¹ˆä¸€èˆ¬æ„ä¹‰ä¸Šï¼Œè¿™ä¸ªç±»çš„è®¾è®¡è€…ä¹Ÿä¸æƒ³å®ƒæˆä¸ºä¸€ä¸ªåŸºç±»ï¼‰ã€‚ å’Œstatic_castå¯¹æ¯”æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ ä¸‹è¡Œè½¬æ¢ï¼Œdynamic_castæ˜¯å®‰å…¨çš„ï¼ˆå½“ç±»å‹å¤±è´¥æ—¶ï¼Œè½¬æ¢è¿‡æ¥çš„æ˜¯ç©ºæŒ‡é’ˆï¼‰ï¼Œè€Œstatic_castæ˜¯ä¸å®‰å…¨çš„ï¼ˆå½“ç±»å‹ä¸ä¸€è‡´æ—¶ï¼Œè½¬æ¢è¿‡æ¥çš„æ˜¯é”™è¯¯æ„ä¹‰çš„æŒ‡é’ˆï¼Œå¯èƒ½é€ æˆè¸©å†…å­˜ã€éæ³•è®¿é—®ç­‰å„ç§é—®é¢˜ï¼‰ã€‚ dynamic_castè¿˜å¯ä»¥è¿›è¡Œäº¤å‰è½¬æ¢ã€‚ ä¸€ä¸ªç®€å•ç¤ºä¾‹ã€‚ 12345678910111213141516171819202122232425262728293031class BaseClass &#123; public: int m_iNum; // åŸºç±»å¿…é¡»æœ‰è™šå‡½æ•°ï¼Œä¿æŒå¤šæ€æ€§æ‰èƒ½ä½¿ç”¨dynamic_cast virtual void foo()&#123;&#125;;&#125;;class DerivedClass: public BaseClass &#123; public: char *m_szName[100]; void bar()&#123;&#125;;&#125;; int main()&#123; BaseClass* pb = new DerivedClass(); // å­ç±»-&gt;çˆ¶ç±»ï¼Œé™æ€ç±»å‹è½¬æ¢ï¼Œæ­£ç¡®ä½†ä¸æ¨è DerivedClass *pd1 = static_cast&lt;DerivedClass*&gt;(pb); // å­ç±»-&gt;çˆ¶ç±»ï¼ŒåŠ¨æ€ç±»å‹è½¬æ¢ï¼Œæ­£ç¡® DerivedClass *pd2 = dynamic_cast&lt;DerivedClass*&gt;(pb); BaseClass* pb2 = new BaseClass(); // çˆ¶ç±»-&gt;å­ç±»ï¼Œé™æ€ç±»å‹è½¬æ¢ï¼Œå±é™©ï¼è®¿é—®å­ç±»m_szNameæˆå‘˜è¶Šç•Œ DerivedClass *pd21 = static_cast&lt;DerivedClass*&gt;(pb2); // çˆ¶ç±»-&gt;å­ç±»ï¼ŒåŠ¨æ€ç±»å‹è½¬æ¢ï¼Œå®‰å…¨çš„ã€‚ç»“æœæ˜¯NULL DerivedClass *pd22 = dynamic_cast&lt;DerivedClass*&gt;(pb2); return 0;&#125; const_cast cosnt_castæ˜¯å››ç§ç±»å‹è½¬æ¢ç¬¦ä¸­å”¯ä¸€å¯ä»¥å¯¹å¸¸é‡è¿›è¡Œæ“ä½œçš„è½¬æ¢ç¬¦ï¼Œç”¨æ¥å»é™¤å¸¸é‡æ€§ï¼Œç¨‹åºå‘˜å¯¹è¿™ä¸ªæ“ä½œè´Ÿè´£ã€‚ å¸¸é‡æŒ‡é’ˆè½¬æ¢ä¸ºéå¸¸é‡æŒ‡é’ˆï¼Œå¹¶ä¸”ä»ç„¶æŒ‡å‘åŸæ¥çš„å¯¹è±¡ å¸¸é‡å¼•ç”¨è¢«è½¬æ¢ä¸ºéå¸¸é‡å¼•ç”¨ï¼Œå¹¶ä¸”ä»ç„¶æŒ‡å‘åŸæ¥çš„å¯¹è±¡ æ³¨æ„è½¬æ¢ç±»å‹åªèƒ½æ˜¯æŒ‡é’ˆæˆ–å¼•ç”¨ã€‚ 12345678910111213struct SA &#123; int i;&#125;;int main()&#123; const SA ra; ra.i = 10; // errorï¼Œç›´æ¥ä¿®æ”¹constç±»å‹ SA &amp;rb = const_cast&lt;SA&amp;&gt;(ra); rb.i = 10; // okï¼Œå»é™¤äº†å¸¸é‡æ€§ return 0;&#125; reinterpret_cast éå¸¸å±é™©çš„æ“ä½œç¬¦ï¼Œè°¨æ…ä½¿ç”¨ã€‚ reinterpret_castå¯ä»¥åœ¨æŒ‡é’ˆå’Œå¼•ç”¨é‡Œè¿›è¡Œè‚†æ— å¿Œæƒ®çš„è½¬æ¢ï¼› reinterpret_castå¯ä»¥å°†æ•´å‹è½¬æ¢ä¸ºæŒ‡é’ˆï¼Œä¹Ÿå¯ä»¥æŠŠæŒ‡é’ˆè½¬æ¢ä¸ºæ•°ç»„ï¼› reinterpret_castæ˜¯ä»åº•å±‚å¯¹æ•°æ®è¿›è¡Œé‡æ–°è§£é‡Šï¼Œä¾èµ–å…·ä½“çš„å¹³å°ï¼Œå¯ç§»æ¤æ€§å·®ã€‚ ä¸€èˆ¬ç”¨æ¥ä¸åŒç±»å‹çš„æŒ‡é’ˆæˆ–å¼•ç”¨ä¹‹é—´è½¬æ¢ã€‚ 1234int a = 1;int* p_a = &amp;a;bool* p_c = reinterpret_cast&lt;bool*&gt;(p_a);std::cout &lt;&lt; *p_c&lt;&lt; &quot;\\n&quot;; // 1 æœ€ä½³å®è·µ ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ˜¾å¼è½¬æ¢ï¼Ÿ åœ¨æ‰€æœ‰éœ€è¦è½¬æ¢çš„åœ°æ–¹éƒ½åº”è¯¥å°½é‡ä½¿ç”¨æ˜¾å¼è½¬æ¢ã€‚ å››ç§æ˜¾å¼è½¬æ¢è¯¥æ€ä¹ˆé€‰æ‹©ï¼Ÿ âš ï¸ é™¤äº†static_castå¯ç”¨äºéæŒ‡é’ˆã€å¼•ç”¨ç±»å‹ï¼Œå…¶å®ƒè½¬æ¢ç¬¦éƒ½å¿…é¡»æ˜¯æŒ‡é’ˆæˆ–å¼•ç”¨ã€‚ static_castï¼šåŸºæœ¬ç±»å‹è½¬æ¢ã€ç±»ä¸‹è¡Œè½¬æ¢ã€ç©ºæŒ‡é’ˆå’Œå…¶å®ƒæŒ‡é’ˆçš„è½¬æ¢ï¼› reinterpret_castï¼šä¸åŒç±»å‹çš„æŒ‡é’ˆç±»å‹è½¬æ¢ï¼› const_castï¼šå°†å¸¸é‡æŒ‡é’ˆ/å¼•ç”¨è½¬æ¢ä¸ºéå¸¸é‡æŒ‡é’ˆ/å¼•ç”¨ï¼› daynamic_castï¼šå¤šæ€ç±»ä¹‹é—´çš„ç±»å‹è½¬æ¢ã€‚ 4.X.3 ç±»å‹è½¬æ¢è¡¥å……ï¼šstring è¿™é‡Œä¸»è¦æ€»ç»“ä¸‹ä¸Šé¢æ²¡æåˆ°ï¼Œå¹³æ—¶åˆç»å¸¸ç”¨åˆ°çš„è½¬æ¢ï¼š stringå’Œcharç­‰åŸºæœ¬ç±»å‹çš„è½¬æ¢ï¼› stringå’Œchar[]ä¹‹é—´è½¬æ¢ï¼› stringå’Œå…¶å®ƒç±»å‹æ•°ç»„ï¼ˆæ¯”å¦‚int[]ï¼‰ä¹‹é—´çš„è½¬æ¢ã€‚ 1å’Œ2åœ¨1.8.3 &amp; 1.8.4 èŠ‚éƒ½å·²ä»‹ç»è¿‡ï¼Œä¸ºäº†å®Œæ•´æ€§è¿™é‡Œå†æ¬¡è¿›è¡Œç®€å•æ€»ç»“ã€‚ stringâ†”åŸºæœ¬ç±»å‹ stringä¸æ˜¯å†…ç½®ç±»å‹ï¼Œä½¿ç”¨static_castæ˜¯ä¸è¡Œçš„ï¼Œæ¯”å¦‚intâ†”stringã€‚ stringâ†”åŸºæœ¬ç±»å‹æœ‰ä¸¤ç§æ–¹å¼ï¼š ä½¿ç”¨è¾“å…¥ã€è¾“å‡ºæµä½œä¸ºåª’ä»‹å®ç°ï¼› ä½¿ç”¨C++11std::stringå†…ç½®çš„ç›¸å…³å‡½æ•°å®ç°ã€‚ ä¸ºäº†é€šç”¨æ€§ï¼Œæˆ‘ä»¬å…ˆä»‹ç» std::istringstreamå’Œstd::ostringstream ä½œä¸ºåª’ä»‹å¦‚ä½•å®ç°è½¬æ¢ã€‚ std::istringstream ï¼Œå³è¾“å…¥æµï¼šæ„é€ å‡½æ•°æ¥å—æ•°æ®çš„è¾“å…¥ï¼Œç„¶åä½¿ç”¨&gt;&gt; æå–æµä¸­æ•°æ®ï¼› std::ostringstream ï¼Œå³è¾“å‡ºæµï¼šä½¿ç”¨&lt;&lt; æ¥å—æ•°æ®çš„è¾“å…¥ï¼Œä½¿ç”¨æˆå‘˜æ–¹æ³•å¦‚str() æå–æµä¸­æ•°æ®ã€‚ ä¸‹é¢æ˜¯å…·ä½“å®ä¾‹ã€‚ stringâ†’åŸºæœ¬ç±»å‹ åŸºæœ¬æ€è·¯ï¼šç”¨stringå¯¹è±¡åˆå§‹åŒ–è¾“å…¥æµ â†’ è¾“å…¥æµå†™å…¥&gt;&gt;å…¶å®ƒç±»å‹ä¸­ï¼ˆstringæ­¤æ—¶ä¼šè¢«è‡ªåŠ¨è½¬æ¢ï¼‰ã€‚ 123456789101112#include &lt;sstream&gt;#include &lt;string&gt;#include &lt;iostream&gt;int main() &#123; std::string str = &quot;233&quot;; int a; std::istringstream iStream(str); iStream&gt;&gt;a; // è¾“å‡ºæµè‡ªåŠ¨è½¬æ¢ return 0;&#125; stringâ†åŸºæœ¬ç±»å‹ åŸºæœ¬æ€è·¯ï¼šç”¨&lt;&lt;åˆå§‹åŒ–è¾“å‡ºæµ â†’ è¾“å‡ºæµå¯¹è±¡è°ƒç”¨str()æ–¹æ³•ã€‚ 1234int b = 233;std::ostringstream oStream;oStream&lt;&lt;b;oStream.str(); å¥½æ¶ˆæ¯ï¼ŒC++11ç»™å¹¿å¤§ç¨‹åºå‘˜å¸¦æ¥äº†ç¦éŸ³ï¼Œæä¾›äº†å¤§é‡å·²ç»å®šä¹‰å¥½çš„æ–¹æ³•ã€‚ æ›´å¤šä»‹ç»ï¼Œå¯å‚è€ƒï¼šc++ stringå’Œå…¶ä»–ç±»å‹äº’è½¬ ä½†æ³¨æ„ï¼Œcharâ†”stringçš„è½¬æ¢æ–¹æ³•æœªå®ç°ï¼Œæˆ‘ä»¬å¯ä½¿ç”¨ä»¥ä¸‹æ–¹å¼å®ç°è½¬æ¢ï¼š 1234char c = &#x27;a&#x27;;std::string str = c; // char â†’ stringc = str[0]; // string â†’ char ä¸‹é¢å¯¹å¸¸ç”¨çš„è½¬æ¢æ–¹æ³•è¿›è¡Œä»‹ç»ã€‚ stringâ†’åŸºæœ¬ç±»å‹ å¸¸ç”¨æ–¹æ³•åŸå‹ï¼š 123456// stringâ†’intint stoi( const std::string&amp; str, std::size_t* pos = 0, int base = 10 );// stringâ†’longlong stol( const std::string&amp; str, std::size_t* pos = 0, int base = 10 );// stringâ†’floatfloat stof( const std::string&amp; str, std::size_t* pos = 0 ); ä½¿ç”¨å®ä¾‹ï¼š 12345678# include&lt;string&gt;int main()&#123; std::string str = &quot;123&quot;; int a = std::stoi(str); int float = std::stof(str); return 0;&#125; stringâ†åŸºæœ¬ç±»å‹ å¸¸ç”¨æ–¹æ³•åŸå‹ï¼š 12345// å‡½æ•°é‡è½½std::string to_string( int value );std::string to_string( long value );std::string to_string( float value );std::string to_string( double value ); ä½¿ç”¨å®ä¾‹ï¼š 123456789# include&lt;string&gt;int main()&#123; int a = 1; std::string str1 = std::to_string(a); float b = 1.2; std::string str1 = std::to_string(b); return 0;&#125; stringâ†”char[] stringå’Œchar[]æ•°ç»„ä¹‹é—´çš„è½¬æ¢æ¯”è¾ƒç®€å•ï¼Œå› ä¸ºstringå†…ç½®äº†ç›¸å…³æ–¹æ³•ã€‚ char[]â† string å¦‚æœæ˜¯å­—ç¬¦ä¸²å¸¸é‡ï¼ŒC++å¯ä»¥éšå¼è½¬æ¢ï¼š 12char c_arr[] = &quot;royhuang&quot;; // &quot;royhuang&quot;æ˜¯stringç±»å‹çš„å­—ç¬¦ä¸²å¸¸é‡ï¼Œå¯ä»¥éšå¼è½¬æ¢ char* p_c_arr = &quot;royhuang&quot;; // è¿™é‡Œæ²¡å‘ç”Ÿéšå¼è½¬æ¢ï¼Œä½†p_c_arræŒ‡å‘äº†å­—ç¬¦ä¸²å¸¸é‡ å¯¹äºéå­—ç¬¦ä¸²å¸¸é‡ï¼Œstd::stringåŒæ ·æä¾›äº†c_str() å’Œ data() ç­‰æ–¹æ³•ï¼Œä¸è¿‡è¦æ³¨æ„ï¼š è¿”å›ç±»å‹åªèƒ½æ˜¯const char* ï¼Œä¹Ÿå°±æ˜¯å¿…é¡»ä¸ºå¸¸é‡ï¼Œä¸”æ˜¯æŒ‡é’ˆ 12345std::string str = &quot;royhuang&quot;; const char* c_arr1 = str.c_str();const char* c_arr2 = str.data();// const char c_arr3[] = str.data(); // éæ³• char[] â†’ string stringæ„é€ å‡½æ•°æ¥å—å­—ç¬¦ä¸²æ•°ç»„ï¼šstring::string(const char* szCString) ã€‚ 123char c_arr[] = &quot;royhuang&quot;; std::string str&#123; c_arr &#125;; // æ„é€ å‡½æ•° ä½†æ˜¯å¦‚æœæ¶‰åŠåˆ°å­—ç¬¦ä¸²åˆ†éš”ç¬¦ï¼Œå°±æ¯”è¾ƒéº»çƒ¦ç‚¹ï¼Œå‚è€ƒä¸‹æ–‡å¤„ç†ã€‚ stringâ†’å…¶å®ƒç±»å‹æ•°ç»„ å¦‚æœæ˜¯åˆ†å‰²æ¯ä¸€ä¸ªå­—ç¬¦ä¸ºæ•°ç»„å…ƒç´ ï¼Œå¯ä»¥è½¬æ¢ä¸ºï¼šstringâ†’char[]â†’å…¶å®ƒç±»å‹æ•°ç»„ã€‚ ä¸‹é¢å±•ç¤ºäº†ï¼šstringâ†’int[] ï¼Œè¿™é‡Œä½¿ç”¨äº†å®¹å™¨vectorã€‚ 123456789101112131415161718# include&lt;string&gt;int main()&#123; std::string str = &quot;123456&quot;; std::vector&lt;int&gt; i_arr; i_arr.reserve(10); // tipsï¼šé¢„å…ˆåˆ†é…ä¸€äº›ç©ºé—´ // 1.å…ˆè½¬æ¢ä¸ºcharæ•°ç»„ const char* c_arr = str3.c_str(); // 2.charæ•°ç»„å†è½¬æ¢ä¸ºå…¶å®ƒç±»å‹æ•°ç»„ for(char c:str3) &#123; // æ³¨æ„æ˜¯c-&#x27;0&#x27;ï¼Œä¸æ˜¯static_cast&lt;int&gt;(c) // c-&#x27;0&#x27;ç®—æœ¯ç±»å‹æå‡ä¸ºint i_arr.push_back(c-&#x27;0&#x27;); &#125; return 0;&#125; stringâ†å…¶å®ƒç±»å‹æ•°ç»„ï¼Œæ²¡å•¥æ„ä¹‰ä¸€èˆ¬å¾ˆå°‘éœ€è¦ã€‚ æ¯”å¦‚ï¼š 1int a[] = &#123;45,45,67,144&#125;; è½¬æ¢ä¸º454567144 æœ‰å•¥ç”¨å‘¢ï¼Ÿä¸€èˆ¬ä¸éœ€è¦è¿™ä¹ˆåšã€‚æ›´å¤šçš„åè€Œæ˜¯æ€ä¹ˆå°†ä¸€ä¸ªintç±»å‹è½¬æ¢stringã€‚ 12int i = 2;string str = std::to_string(i); å…¶å®ä¸Šé¢ä»‹ç»éƒ½æ˜¯å¾ˆç‰¹æ®Šçš„stringâ†’æ•°ç»„æƒ…å†µï¼šåˆ†å‰²æ¯ä¸€ä¸ªå­—ç¬¦ä¸ºæ•°ç»„å…ƒç´ ã€‚ä½†å¾€å¾€æˆ‘ä»¬éœ€è¦å¤„ç†çš„æ˜¯å¦‚ä½•æŒ‰æŒ‡å®šè§„åˆ™åˆ†å‰²å­ä¸²ä¸ºæ•°ç»„å…ƒç´ ï¼š æ¯”å¦‚ï¼Œå¦‚ä½•å°†ï¼š 1string str = &quot;12,45,56&quot; ; è½¬æ¢ä¸ºï¼š 1int arr[] = &#123;12,45,56&#125;; æœ€å¸¸è§çš„ä¾¿æ˜¯æŒ‰æŒ‡å®šåˆ†éš”ç¬¦æ¥åˆ†å‰²å­—ç¬¦ä¸²ä¸ºæ–°æ•°ç»„å…ƒç´ ã€‚ stringæŒ‡å®šåˆ†å‰²â†’æ•°ç»„ å¯¹äºæŒ‡å®šåˆ†éš”ç¬¦æ¥åˆ†å‰²å­—ç¬¦ä¸²ï¼Œå†è½¬æ¢ä¸ºæ•°ç»„ã€‚ä¸€èˆ¬è€Œè¨€æœ‰å¦‚ä¸‹æ€è·¯ï¼š é€šè¿‡stringæˆå‘˜å‡½æ•°ï¼šfind+substrå‡½æ•°ï¼› é€šè¿‡Cè¯­è¨€ä¸­åˆ†å‰²å‡½æ•°ï¼šstrtokå‡½æ•°ï¼› é€šè¿‡stringstreamå®ç°ã€‚ è¿™é‡Œä¸»è¦ä»‹ç»ç¬¬1ã€ç¬¬3ä¸¤ç§æ–¹å¼ï¼Œå®Œæ•´çš„ä»‹ç»å¯å‚è€ƒï¼šC++å­—ç¬¦ä¸²åˆ†å‰²æ–¹æ³•æ€»ç»“ ã€‚ findå‡½æ•°åŸå‹ï¼š size_t find (const string&amp; str, size_t pos = 0) const;ï¼› substrå‡½æ•°åŸå‹ï¼š string substr (size_t pos = 0, size_t len = npos) const; ã€‚ ä»¥stringâ†’int[]ä¸ºä¾‹ ã€‚ é€šè¿‡find+substrå‡½æ•° 12345678910111213141516171819202122232425262728#include &lt;string&gt;#include &lt;vector&gt;void strSplit(const std::string src_str, vector&lt;int&gt;&amp; vec, const char pattern)&#123; std::string str = src_str; str += std::string(pattern); // æ–¹ä¾¿å¤„ç†æœ€åä¸€ä¸ªå­—ç¬¦ä¸² size_t pre_pos = 0; size_t pos = str.find(pattern); while (pos != str.npos) // å¦‚æœæ²¡æ‰¾åˆ°åˆ†éš”ç¬¦åˆ™ç»ˆæ­¢ &#123; string temp = str.substr(pre_pos,pos); vec.push_back(std::stoi(temp)); // ä¿ç•™å‰©ä¸‹çš„å­—ç¬¦ä¸²ä½œä¸ºæ–°ä¸² str = str.substr(pos+1,str.length()); // æŸ¥æ‰¾æ–°å­—ç¬¦ä¸²ç¬¬ä¸€ä¸ªåˆ†éš”ç¬¦çš„ä½ç½® pos = str.find(pattern); &#125; &#125;int main() &#123; std::string str = &quot;12,45,56&quot; ; std::vector&lt;int&gt; vec; strSplit(str,vec,&#x27;,&#x27;); return 0;&#125; é€šè¿‡stringstream è¿™ç§æ–¹å¼æ›´ä¸ºç®€å•ã€‚ 12345678910111213141516171819202122#include &lt;iostream&gt;#include &lt;vector&gt;#include &lt;sstream&gt;void strSplit(const std::string src_str, vector&lt;int&gt;&amp; vec, const char pattern)&#123; std::stringstream input_ss(src_str); std::string sub_str&#123;&#125;; // sub_stræ¥å—è¿”å›çš„å­ä¸² while (getline(input_ss, sub_str, pattern)) // getlineåˆ†å‰²å­—ç¬¦ä¸² &#123; vec.push_back(std::stoi(sub_str)); &#125;&#125;int main() &#123; std::string str = &quot;12,45,56&quot; ; std::vector&lt;int&gt; vec; strSplit(str,vec,&#x27;,&#x27;); return 0;&#125; leetcodeå®æˆ˜ ä»¥ç»å…¸é¢˜å‹ä¸ºä¾‹ï¼Œå°†ä¸‹é¢è½¬æ¢ä¸ºå¤šç»´æ•°ç»„ï¼Œç¬¬ä¸€è¡Œè¾“å…¥çš„æ˜¯é•¿åº¦ã€‚ 3 11 12 13 14 15 16 17 18 19 å®Œæ•´å®ç°ä»£ç å¦‚ä¸‹ï¼šå¯è§å…³é”®æ˜¯å¦‚ä½•å®ç°åˆ†å‰²å­—ç¬¦ä¸²çš„å‡½æ•°ï¼ˆé¢è¯•æ—¶è¿™ç§å¸¸ç”¨å‡½æ•°æœ€å¥½ç›´æ¥èƒŒä¸‹ï¼‰ã€‚ 123456789101112131415161718192021222324252627282930313233#include &lt;iostream&gt;#include &lt;vector&gt;#include &lt;sstream&gt;void strSplit(const std::string src_str, vector&lt;int&gt;&amp; vec, const char pattern)&#123; std::stringstream input_ss(src_str); std::string sub_str&#123;&#125;; // sub_stræ¥å—è¿”å›çš„å­ä¸² while (getline(input_ss, sub_str, pattern)) // getlineåˆ†å‰²å­—ç¬¦ä¸² &#123; vec.push_back(std::stoi(sub_str)); &#125;&#125;int main()&#123; int N = 0; // std::getline(std::cin,N); // getlineä¸èƒ½æ¥å—ç±»å‹intçš„å‚æ•°ï¼Œæ‰€ä»¥è¿™é‡Œä¸ä½¿ç”¨ std::cin&gt;&gt;N; std::cin.ignore(); // ä½†æ˜¯cinè¦å¤„ç†æ¢è¡Œç¬¦ï¼Œgetlineä¸éœ€è¦å¤„ç†è¿™ä¸ªé—®é¢˜ std::vector&lt;vector&lt;int&gt;&gt; vec ; // vectoræ¯”å†…ç½®æ•°ç»„å¥½ç”¨ for(int i=0; i&lt;N; i++) &#123; std::string input_str; // è¯»å–ä¸€è¡Œå­—ç¬¦ä¸² std::getline(cin,input_str); vector&lt;int&gt; vec_tmp ; strSplit(input_str,vec_tmp,&#x27;,&#x27;); // åˆ†å‰²è¯¥è¡Œå­—ç¬¦ä¸² vec.push_back(vec_tmp); &#125; return 0;&#125; æœ€ä½³å®è·µ ä¸æ¶‰åŠåˆ°æ•°ç»„ï¼š å¦‚æœæ˜¯åŸºæœ¬ç±»å‹ä¹‹é—´çš„äº’è½¬ï¼Œéšå¼è½¬æ¢è™½ç„¶ä¹Ÿå¯ä»¥å®ç°ï¼Œä½†æœ€å¥½ä½¿ç”¨static_castæ˜¾å¼è½¬æ¢ï¼› ä¸è¿‡éœ€è¦æ³¨æ„charâ†”intä¹‹é—´çš„è½¬æ¢ï¼Œä¹Ÿè®¸ä½ å¹¶ä¸éœ€è¦charç±»å‹çš„ASCIIå€¼ã€‚ å¦‚æœæ˜¯æŒ‡é’ˆã€å¼•ç”¨ã€å¤šæ€ã€å¸¸é‡è½¬éå¸¸é‡ä¹‹é—´çš„è½¬æ¢ï¼Œè¯·ä½¿ç”¨æ˜¾ç¤ºè½¬æ¢ï¼› å¦‚æœstringå’ŒåŸºæœ¬ç±»å‹è½¬æ¢ï¼Œä½¿ç”¨std::string å†…ç½®çš„å‡½æ•°åº“æ•ˆç‡æœ€é«˜ã€‚ æ¶‰åŠåˆ°æ•°ç»„ï¼š å¦‚æœæ˜¯stringâ†”char[]ï¼Œä¸æ¶‰åŠåˆ°åˆ†å‰²å­ä¸²ï¼Œä½¿ç”¨std::string å†…ç½®å‡½æ•°å¯ä»¥å¾ˆæ–¹ä¾¿è¿›è¡Œè½¬æ¢ï¼› å¦‚æœæ˜¯stringâ†’å…¶å®ƒç±»å‹æ•°ç»„ï¼ˆå•å‘ï¼Œåå‘æ²¡å¤šå¤§æ„ä¹‰ï¼‰ï¼Œä¸æ¶‰åŠåˆ°åˆ†å‰²å­ä¸² ï¼ŒæŒ‰stringâ†’char[]â†’å…¶å®ƒç±»å‹æ•°ç»„è½¬æ¢å³å¯ï¼› å¦‚æœæ˜¯stringâ†’å…¶å®ƒç±»å‹æ•°ç»„ï¼ˆå•å‘ï¼‰ï¼Œæ¶‰åŠåˆ°åˆ†å‰²å­ä¸² ï¼š å…ˆå€ŸåŠ©findå’Œsubstrå‡½æ•°åˆ‡å‰²å‡ºå­ä¸²æ•°ç»„ï¼ˆstring[]ï¼‰ï¼› å†å°†æ¯ä¸ªå­ä¸²è½¬æ¢ä¸ºå…¶å®ƒç±»å‹ï¼ˆå†…ç½®å‡½æ•°å®ç°ï¼Œå¦‚stoiï¼‰ã€‚ æœ€åï¼Œè¯·å°½é‡é¿å…ä½¿ç”¨éšå¼è½¬æ¢ã€‚ æ›´æ–°è®°å½• 2022-01-22 ï¼šæ›´æ–°ç¬”è®° ç¬¬ä¸€æ¬¡æ›´æ–° å‚è€ƒèµ„æ–™ 1.C++ä¸­å·²ç»æœ‰é¢å‘å¯¹è±¡çš„æ¦‚å¿µï¼Œé‚£structè¿˜æœ‰å•¥å­˜åœ¨çš„æ„å›¾ï¼šhttps://www.zhihu.com/question/23174488 â†©2.C++ä¸­å››ç§å¼ºåˆ¶ç±»å‹è½¬æ¢åŒºåˆ«è¯¦è§£ï¼šhttps://blog.csdn.net/chen134225/article/details/81305049 â†©3.æ²¡æœ‰å­¦ä¸ä¼šçš„C++ï¼šç”¨æˆ·è‡ªå®šä¹‰çš„éšå¼ç±»å‹è½¬æ¢ ï¼šhttps://juejin.cn/post/6844903798100459533 â†©","categories":[{"name":"C++","slug":"C","permalink":"https://hwh.zone/categories/C/"},{"name":"ä»é›¶å¼€å§‹","slug":"C/ä»é›¶å¼€å§‹","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"},{"name":"C++åŸºç¡€","slug":"C/ä»é›¶å¼€å§‹/C-åŸºç¡€","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/C-%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"C++","slug":"C","permalink":"https://hwh.zone/tags/C/"},{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://hwh.zone/tags/%E6%95%99%E7%A8%8B/"},{"name":"C++åŸºç¡€","slug":"C-åŸºç¡€","permalink":"https://hwh.zone/tags/C-%E5%9F%BA%E7%A1%80/"},{"name":"ç»“æ„ä½“","slug":"ç»“æ„ä½“","permalink":"https://hwh.zone/tags/%E7%BB%93%E6%9E%84%E4%BD%93/"},{"name":"æšä¸¾","slug":"æšä¸¾","permalink":"https://hwh.zone/tags/%E6%9E%9A%E4%B8%BE/"},{"name":"ç±»å‹è½¬æ¢","slug":"ç±»å‹è½¬æ¢","permalink":"https://hwh.zone/tags/%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/"}]},{"title":"C++ä»é›¶å¼€å§‹ï¼ˆä¸‰ï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆä¸Šï¼‰å¿«é€Ÿå…¥é—¨","slug":"C++ä»é›¶å¼€å§‹ï¼ˆäºŒï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆä¸Šï¼‰ä¹‹å¿«é€Ÿå…¥é—¨","date":"2022-01-16T12:56:08.897Z","updated":"2022-06-16T07:32:33.557Z","comments":true,"path":"p/26224/","link":"","permalink":"https://hwh.zone/p/26224/","excerpt":"","text":"ğŸŒŸã€ŠC++ä»é›¶å¼€å§‹ã€‹ ç³»åˆ—ï¼Œå¼€å§‹æ›´æ–°ä¸­â€¦ C++ä»é›¶å¼€å§‹https://hwh.zone/p/62712 ä¸€ã€å¿«é€Ÿå¼€å§‹ 1.1 è®¤è¯†C++ 1.1.1 ä¸ºä»€ä¹ˆéœ€è¦C++ å‰æœ‰Javaåæœ‰Pythonã€Goã€Rustï¼ŒC++ä½œä¸ºä¸€ä¸ªâ€œè€å¤è‘£â€ä¼¼ä¹æœ‰ç‚¹æ ¼æ ¼ä¸å…¥äº†ï¼Ÿ å…¶å®ä¸ç„¶ï¼ŒC å’Œ C++ çš„åº•å±‚è®¾è®¡ç†å¿µå¯ä»¥æ¦‚æ‹¬ä¸ºâ€œä¿¡ä»»ç¨‹åºå‘˜â€â€”â€”è¿™æ—¢ç¾å¦™åˆå±é™©ã€‚ä½†ä¹Ÿæ­£æ˜¯C++ å…è®¸ç¨‹åºå‘˜é«˜åº¦è‡ªç”±åœ°åšä»–ä»¬æƒ³åšçš„äº‹ï¼Œå› æ­¤ï¼Œåœ¨éœ€è¦é«˜æ€§èƒ½å’Œç²¾ç¡®æ§åˆ¶å†…å­˜å’Œå…¶ä»–èµ„æºçš„æƒ…å†µä¸‹è¡¨ç°å‡ºè‰² ã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯C++æ“…é•¿çš„ä¸€äº›é¢†åŸŸï¼Œå®ƒä»¬å¯¹æ€§èƒ½è¦æ±‚é€šå¸¸æå…¶è‹›åˆ»ï¼š è§†é¢‘æ¸¸æˆ å®æ—¶ç³»ç»Ÿï¼ˆä¾‹å¦‚ç”¨äºè¿è¾“ã€åˆ¶é€ ç­‰â€¦â€¦ï¼‰ é«˜æ€§èƒ½é‡‘èåº”ç”¨ï¼ˆä¾‹å¦‚é«˜é¢‘äº¤æ˜“ï¼‰ å›¾å½¢åº”ç”¨å’Œæ¨¡æ‹Ÿ ç”Ÿäº§åŠ›/åŠå…¬åº”ç”¨ åµŒå…¥å¼è½¯ä»¶ éŸ³è§†é¢‘å¤„ç† äººå·¥æ™ºèƒ½å’Œç¥ç»ç½‘ç»œ å¦‚æœä½ æƒ³æ›´äº†è§£è®¡ç®—æœºçš„æœ¬è´¨ï¼Œä¹Ÿå¯¹è¿™äº›é¢†åŸŸæ„Ÿå…´è¶£ï¼ŒC/C++åº”è¯¥æ˜¯ä½ ä¸äºŒçš„é€‰æ‹©ã€‚ 1.1.2 C++ç»„æˆ æ ‡å‡†çš„C++ç”±ä¸¤ä¸ªé‡è¦éƒ¨åˆ†ç»„æˆï¼š æ ¸å¿ƒè¯­è¨€ï¼Œæä¾›äº†æ‰€æœ‰æ„ä»¶å—ï¼ŒåŒ…æ‹¬å˜é‡ã€æ•°æ®ç±»å‹å’Œå¸¸é‡ç­‰ç­‰ã€‚ C++ æ ‡å‡†åº“ï¼Œæä¾›äº†å¤§é‡çš„å‡½æ•°ï¼Œç”¨äºæ“ä½œæ–‡ä»¶ã€å­—ç¬¦ä¸²ç­‰ï¼ŒåŒ…å«æ ‡å‡†æ¨¡æ¿åº“ï¼ˆSTLï¼‰ï¼Œæä¾›äº†å¤§é‡çš„æ–¹æ³•ï¼Œç”¨äºæ“ä½œæ•°æ®ç»“æ„ç­‰ã€‚ C++ æ ‡å‡†åº“ç®€å•æ¥è¯´å°±æ˜¯æä¾›ä¸€äº›é¢„å®šçš„åº“åŠå‡½æ•°ï¼Œæ–¹ä¾¿æˆ‘ä»¬ç¼–å†™ä»£ç ã€‚æ•´ä½“å¯ä»¥åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š æ ‡å‡†å‡½æ•°åº“ï¼š è¿™ä¸ªåº“æ˜¯ç”±é€šç”¨çš„ã€ç‹¬ç«‹çš„ã€ä¸å±äºä»»ä½•ç±»çš„å‡½æ•°ç»„æˆçš„ï¼Œå‡½æ•°åº“ç»§æ‰¿è‡ª C è¯­è¨€ã€‚ è¾“å…¥/è¾“å‡º I/Oã€å­—ç¬¦ä¸²å’Œå­—ç¬¦å¤„ç†ã€æ•°å­¦ã€æ—¶é—´ã€æ—¥æœŸå’Œæœ¬åœ°åŒ–ã€åŠ¨æ€åˆ†é…ã€å…¶ä»–ã€å®½å­—ç¬¦å‡½æ•° é¢å‘å¯¹è±¡ç±»åº“ï¼š è¿™ä¸ªåº“æ˜¯ç±»åŠå…¶ç›¸å…³å‡½æ•°çš„é›†åˆã€‚ æ ‡å‡†çš„ C++ I/O ç±»ã€String ç±»ã€æ•°å€¼ç±»ã€STL å®¹å™¨ç±»ã€STL ç®—æ³•ã€STL å‡½æ•°å¯¹è±¡ã€STL è¿­ä»£å™¨ã€STL åˆ†é…å™¨ã€æœ¬åœ°åŒ–åº“ã€å¼‚å¸¸å¤„ç†ç±»ã€æ‚é¡¹æ”¯æŒåº“ åŒæ—¶ï¼Œä¸ºäº†ç¼–å†™çš„ä»£ç åœ¨ Macã€UNIXã€Windowsã€Alpha è®¡ç®—æœºä¸Šéƒ½èƒ½é€šè¿‡ç¼–è¯‘ï¼Œ C++ é‡‡ç”¨ISOæ ‡å‡†ã€‚ ISOæ ‡å‡†å‘å±•å†å²ä¸€è§ˆå¦‚ä¸‹ï¼š 1.1.3 ç¬¬ä¸€ä¸ªC++ç¨‹åº ğŸ–± ä»æ¢¦å¼€å§‹çš„åœ°æ–¹ï¼Œå†™ä¸€ä¸ªç»å…¸hello.cpp ã€‚ 12345678910#include &lt;iostream&gt;using namespace std; /* main() æ˜¯ç¨‹åºå¼€å§‹æ‰§è¡Œçš„åœ°æ–¹ */ int main()&#123; cout &lt;&lt; &quot;Hello World&quot;&lt;&lt;endl; // è¾“å‡º Hello World return 0;&#125; ç¡®ä¿g++ç¨‹åºå¯è¢«è¯†åˆ«ï¼ˆåŠ å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰ï¼Œåœ¨åŒ…å«æºæ–‡ä»¶ hello.cpp çš„ç›®å½•ä¸­ï¼Œç¼–è¯‘å¹¶æ‰§è¡Œï¼š 123$ g++ hello.cpp$ ./a.outHello World g++ç¼–è¯‘ä»£ç çš„æ–¹å¼å°†åœ¨æœ¬æ–‡å¤§é‡ä½¿ç”¨ï¼Œåœ¨å‰æ–‡ï¼šg++/Makefile/CMakeå¿«é€Ÿå…¥é—¨ ï¼Œæˆ‘ä»¬ä¹Ÿä»”ç»†ä»‹ç»è¿‡ã€‚å¦‚æœè¿˜ä¸å¤ªäº†è§£ï¼Œå¯ä»¥ä¸€è¯»ã€‚ åœ¨ä¸Šè¿°ç¨‹åºä¸­è¿˜ä½¿ç”¨äº†C++çš„æ³¨é‡Šï¼š å•è¡Œæ³¨é‡Šï¼š// æ³¨é‡Šå†…å®¹ å¤šè¡Œæ³¨é‡Šï¼š/* æ³¨é‡Šå†…å®¹ */ ç‰¹åˆ«çš„ï¼Œåœ¨ /* */ æ³¨é‡Šå†…éƒ¨ï¼Œ// å­—ç¬¦æ²¡æœ‰ç‰¹æ®Šçš„å«ä¹‰ï¼›åœ¨ // æ³¨é‡Šå†…ï¼Œ/* */ ä¹Ÿæ²¡æœ‰ç‰¹æ®Šçš„å«ä¹‰ã€‚ 1.2 å˜é‡ â€œå˜é‡â€ä¸€è¯æ¥æºäºæ•°å­¦ï¼Œæ˜¯è®¡ç®—æœºè¡¨ç¤ºèƒ½å‚¨å­˜è®¡ç®—ç»“æœæˆ–èƒ½è¡¨ç¤ºå€¼çš„æŠ½è±¡æ¦‚å¿µï¼Œä½†è¿™ç§è¯´æ³•ä¸å¤Ÿæ·±åˆ»ã€‚ åº”è¯¥ä»CPUè§’åº¦ç†è§£ï¼Œå˜é‡å°±æ˜¯æŸå—å†…å­˜åŒºåŸŸåœ°å€åˆ«åï¼Œè¿™å—å†…å­˜åŒºåŸŸä¿å­˜å˜é‡çš„å€¼ã€‚ä¸‹é¢ä¸¾ä¸€ä¸ªå®ä¾‹ï¼š 12int x = 0;x = 1; å¯¹åº”æ±‡ç¼–ä»£ç ï¼š 12movl $0, -12(%rbp)movl $1, -12(%rbp) å½“CPUæ‰§è¡Œint x = 0ï¼Œä¼šåœ¨å†…å­˜ï¼ˆè¿™é‡Œæ˜¯æ ˆï¼‰è…¾å‡ºä¸€å—åŒºåŸŸï¼ˆ-12(%rbp)ï¼‰ç”¨æ¥å­˜å‚¨å˜é‡xï¼›ç„¶åxæ‰€ä»£è¡¨çš„å†…å­˜åŒºåŸŸï¼ˆ-12(%rbp)ï¼‰è¢«å­˜å…¥0ã€‚ ç»§ç»­æ‰§è¡Œx=1ï¼Œ1è¢«å­˜å…¥å˜é‡xæ‰€ä»£è¡¨çš„å†…å­˜åŒºåŸŸã€‚ å¯ä»¥çœ‹åˆ°ï¼Œå˜é‡çš„å­˜åœ¨ä½¿å¾—æˆ‘ä»¬ï¼šä¸ç”¨è®°ä½ä¸ºåˆ†é…xçš„å†…å­˜åœ°å€æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬é€šè¿‡å˜é‡åxå°±å¯ä»¥ä½¿ç”¨åˆ†é…çš„å†…å­˜åŒºåŸŸã€‚å› ä¸ºä½¿ç”¨xæ—¶ï¼Œç¼–è¯‘å™¨ä¼šå°†å˜é‡xéšå¼è‡ªåŠ¨ç¿»è¯‘æˆå¯¹åº”çš„å†…å­˜åœ°å€ï¼ŒåŒæ—¶è¿›è¡Œé—´æ¥å¯»å€ï¼ˆå¯ä»¥ç†è§£ä¸ºä½¿ç”¨xç­‰ä»·äº*xï¼‰ã€‚ 12int x = 0; // ç¼–è¯‘å™¨çœ¼é‡Œï¼šint* x = -12(%rbp); *x = 0;x = 1; // ç¼–è¯‘å™¨çœ¼é‡Œï¼š *x = 1; è¯´å®Œæ·±å±‚æ¬¡çš„æ¦‚å¿µï¼Œæˆ‘ä»¬æ¥äº†è§£å˜é‡åŸºæœ¬çš„ä¸€äº›å®šä¹‰&amp;ä½¿ç”¨ã€‚ 123456789101112/* a simple example*/#include &lt;iostream&gt;using namespace std;extern char c, ch; // charç±»å‹å˜é‡c,chint months; // intç±»å‹å˜é‡months/* main() æ˜¯ç¨‹åºå¼€å§‹æ‰§è¡Œçš„åœ°æ–¹ */int main()&#123; int empoly_salary = 20000; // intç±»å‹å˜é‡empoly_salary return 0;&#125; å¯ä»¥çœ‹åˆ°ç»„æˆå˜é‡çš„åŸºæœ¬ä¸‰è¦ç´ ï¼šåç§°ã€ç±»å‹åŠå€¼ã€‚ åç§°ï¼šå˜é‡çš„åç§°å¯ä»¥ç”±å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿å­—ç¬¦ç»„æˆã€‚ ç±»å‹ï¼šç”¨äºæŒ‡å®šå˜é‡å­˜å‚¨çš„å¤§å°å’Œå¸ƒå±€ã€‚åœ¨C++ä¸­æœ‰åŸºæœ¬ç±»å‹å’Œå…¶å®ƒçš„å¦‚æšä¸¾ç­‰ç±»å‹ã€‚ åŸºæœ¬ç±»å‹ï¼šC++ ä¸ƒç§åŸºæœ¬æ•°æ®ç±»å‹å¦‚ä¸‹ã€‚ ç±»å‹ å…³é”®å­— å¸ƒå°”å‹ bool å­—ç¬¦å‹ char æ•´å‹ int æµ®ç‚¹å‹ float åŒæµ®ç‚¹å‹ double æ— ç±»å‹ void å®½å­—ç¬¦å‹ wchar_t å…¶å®ƒç±»å‹ C++ ä¹Ÿå…è®¸å®šä¹‰å„ç§å…¶ä»–ç±»å‹çš„å˜é‡ï¼Œæ¯”å¦‚æšä¸¾ã€æŒ‡é’ˆã€æ•°ç»„ã€å¼•ç”¨ã€æ•°æ®ç»“æ„ã€ç±»ç­‰ã€‚è¿™æ˜¯æˆ‘ä»¬åç»­ç¬”è®°ä¼šç»§ç»­æåˆ°çš„çŸ¥è¯†ç‚¹ã€‚ åœ¨ä¸Šé¢æˆ‘ä»¬æåˆ°äº†å˜é‡ä¸‰è¦ç´ ï¼šåç§°ã€å€¼å’Œç±»å‹ã€‚ç”±æ­¤å¯ä»¥å¼•å‘å‡ ä¸ªå°é—®é¢˜ï¼š C++å˜é‡åç§°æœ‰ä»€ä¹ˆå‘½ä»¤è§„åˆ™æˆ–è§„å¾‹å—ï¼Ÿ C++ä¸åŒçš„ä½ç½®ï¼ˆå¦‚ï¼Œmainå‡½æ•°ä½“å†…ã€å¤–ï¼‰å®šä¹‰çš„å˜é‡æœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿ C++çš„å˜é‡å­˜å‚¨æœ‰ä¸Šé™å—ï¼Ÿæ¯”å¦‚intç±»å‹çš„å˜é‡æœ€å¤šå¯ä»¥å­˜å‚¨å¤šå¤§çš„æ•°æ®ï¼Ÿ å®é™…å†™ä»£ç ä¸­ï¼Œå˜é‡ä¸ä¸€å®šç«‹é©¬ç»™å®ƒèµ‹å€¼ï¼ˆåˆå§‹åŒ–ï¼‰ï¼Œå˜é‡çš„åˆå§‹åŒ–å€¼ä¼šæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¸ºä»€ä¹ˆå¸¸è¯´å˜é‡ä¸åˆå§‹åŒ–æ˜¯ä¸€ä¸ªä¸å¥½çš„è¡Œä¸ºï¼Ÿ 1.2.1 æ ‡è¯†ç¬¦å’Œå‘½ä»¤è§„åˆ™ C++ æ ‡è¯†ç¬¦æ˜¯ç”¨æ¥æ ‡è¯†å˜é‡ã€å‡½æ•°ã€ç±»ã€æ¨¡å—ï¼Œæˆ–ä»»ä½•å…¶ä»–ç”¨æˆ·è‡ªå®šä¹‰é¡¹ç›®çš„åç§°ã€‚ä¸€ä¸ªæ ‡è¯†ç¬¦ä»¥å­—æ¯ A-Z æˆ– a-z æˆ–ä¸‹åˆ’çº¿ _ å¼€å§‹ï¼Œåè·Ÿé›¶ä¸ªæˆ–å¤šä¸ªå­—æ¯ã€ä¸‹åˆ’çº¿å’Œæ•°å­—ï¼ˆ0-9ï¼‰ã€‚ C++ æ ‡è¯†ç¬¦å†…ä¸å…è®¸å‡ºç°æ ‡ç‚¹å­—ç¬¦ï¼Œæ¯”å¦‚ @ã€&amp; å’Œ %ã€‚C++ æ˜¯åŒºåˆ†å¤§å°å†™çš„ç¼–ç¨‹è¯­è¨€ã€‚å› æ­¤ï¼Œåœ¨ C++ ä¸­ï¼ŒManpower å’Œ manpower æ˜¯ä¸¤ä¸ªä¸åŒçš„æ ‡è¯†ç¬¦ã€‚ ä¸‹é¢åˆ—å‡ºå‡ ä¸ªæœ‰æ•ˆçš„æ ‡è¯†ç¬¦ï¼š 12mohd zara abc move_name a_123myname50 _temp j a23b9 retVal 1.2.2 å±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡ ä¸€èˆ¬æ¥è¯´æœ‰ä¸‰ä¸ªåœ°æ–¹å¯ä»¥å£°æ˜å˜é‡ï¼š å‡½æ•°æˆ–ä¸€ä¸ªä»£ç å—å†…éƒ¨ï¼Œç§°ä¸ºå±€éƒ¨å˜é‡ï¼› å‡½æ•°å‚æ•°ä¸­ï¼Œç§°ä¸ºå½¢å¼å‚æ•°ï¼› æ‰€æœ‰å‡½æ•°å¤–éƒ¨ï¼Œç§°ä¸ºå…¨å±€å˜é‡ã€‚ åœ¨ä¹‹å‰çš„ä¾‹å­ä¸­ï¼š 12345678910111213/* a simple example*/#include &lt;iostream&gt;using namespace std;// mainå‡½æ•°ä½“å¤–ï¼Œå…¨å±€å˜é‡extern char c, ch; int months; int main()&#123; int empoly_salary = 20000; // mainå‡½æ•°ä½“å†…ï¼Œå±€éƒ¨å˜é‡ return 0;&#125; ã€æ‰©å±•æ€è€ƒã€‘ç‰¹åˆ«çš„ï¼Œå¦‚æœå±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡çš„åç§°ç›¸åŒï¼Œè°ƒç”¨æ—¶ä»¥è°çš„å€¼ä¸ºå‡†ï¼Ÿ ç­”æ¡ˆï¼šä»¥å±€éƒ¨å˜é‡å€¼ä¸ºå‡†ï¼Œè¯·çœ‹ä¸‹ä¾‹ã€‚ 1234567891011121314#include &lt;iostream&gt;using namespace std;// mainå‡½æ•°ä½“å¤–ï¼Œå…¨å±€å˜é‡extern char c, ch; int months; int empoly_salary = 24000; int main()&#123; int empoly_salary = 20000; // mainå‡½æ•°ä½“å†…ï¼Œå±€éƒ¨å˜é‡ cout&lt;&lt; empoly_salary&lt;&lt;endl; return 0;&#125; ä»£ç è¾“å‡ºå€¼ï¼š20000ã€‚å±€éƒ¨å˜é‡çš„å€¼ä¼šè¦†ç›–å…¨å±€å˜é‡çš„å€¼ã€‚ ã€æ·±å…¥æ€»ç»“ã€‘å…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡çš„åŒºåˆ«å’Œæ€»ç»“ å£°æ˜ä½ç½®ä¸åŒï¼šå±€éƒ¨å˜é‡å£°æ˜åœ¨å‡½æ•°æˆ–ä»£ç å—å†…éƒ¨ï¼›å…¨å±€å˜é‡å£°æ˜åœ¨æ‰€æœ‰å‡½æ•°çš„å¤–éƒ¨ã€‚ ç”Ÿå‘½å‘¨æœŸä¸åŒï¼šå…¨å±€å˜é‡éšä¸»ç¨‹åºåˆ›å»ºå’Œåˆ›å»ºï¼Œéšä¸»ç¨‹åºé”€æ¯è€Œé”€æ¯ï¼›å±€éƒ¨å˜é‡åœ¨å±€éƒ¨å‡½æ•°å†…éƒ¨ï¼Œç”šè‡³å±€éƒ¨å¾ªç¯ä½“ç­‰å†…éƒ¨å­˜åœ¨ï¼Œé€€å‡ºå°±ä¸å­˜åœ¨ï¼› ä½¿ç”¨æ–¹å¼ä¸åŒï¼šé€šè¿‡å£°æ˜åå…¨å±€å˜é‡åœ¨ç¨‹åºçš„å„ä¸ªéƒ¨åˆ†éƒ½å¯ä»¥ç”¨åˆ°ï¼Œåˆ†é…åœ¨å…¨å±€æ•°æ®æ®µå¹¶ä¸”åœ¨ç¨‹åºå¼€å§‹è¿è¡Œçš„æ—¶å€™è¢«åŠ è½½ï¼›å±€éƒ¨å˜é‡åˆ†é…åœ¨å †æ ˆåŒºï¼Œåªèƒ½åœ¨å±€éƒ¨ä½¿ç”¨ã€‚ 1.2.3 å˜é‡ç±»å‹ ä¸ƒç§åŸºæœ¬ç±»å‹ åœ¨å‰é¢æˆ‘ä»¬æåˆ°ï¼š å˜é‡å…¶å®åªä¸è¿‡æ˜¯ç¨‹åºå¯æ“ä½œçš„å­˜å‚¨åŒºçš„åç§°ï¼Œç±»å‹å†³å®šäº†å˜é‡å­˜å‚¨çš„å¤§å°å’Œå¸ƒå±€ã€‚ C++æœ‰ä¸ƒç§åŸºæœ¬ç±»å‹ ç±»å‹ å…³é”®å­— å¸ƒå°”å‹ bool å­—ç¬¦å‹ char æ•´å‹ int æµ®ç‚¹å‹ float åŒæµ®ç‚¹å‹ double æ— ç±»å‹ void å®½å­—ç¬¦å‹ wchar_t è¿™äº›åŸºæœ¬ç±»å‹å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªç±»å‹ä¿®é¥°ç¬¦è¿›è¡Œä¿®é¥°ï¼š signedã€unsignedã€shortã€long ä¾‹å¦‚ï¼Œ wchar_t æ˜¯è¿™æ ·æ¥çš„ï¼š 1typedef short int wchar_t; æ‰€ä»¥ wchar_t å®é™…ä¸Šå’Œ short int ä¸€æ ·ã€‚ æ¯ç§ç±»å‹éœ€å ç”¨ä¸åŒçš„å­—èŠ‚æ•°ï¼Œå­˜å‚¨ä¸Šä¸‹é™å¦‚ä¸‹æ‰€ç¤ºï¼š ç±»å‹ æè¿° å–å€¼èŒƒå›´ å­—èŠ‚æ•° int æ•´å‹ï¼Œè¡¨ç¤ºæ•´æ•° -2^-31^ ~ 2^31^-1 4 unsigned int æ— ç¬¦å·æ•´å‹ï¼Œè¡¨ç¤ºæ•´æ•° 0 ~ 2^32^-1 4 bool å¸ƒå°”ç±»å‹ trueæˆ–false 1 char å­—ç¬¦ç±»å‹ï¼Œæ˜¯æ•´å‹ -128~127 1 unsigned char æ— ç¬¦å·å­—ç¬¦ç±»å‹ï¼Œæ˜¯æ•´å‹ 0~255 1 float å•ç²¾åº¦æµ®ç‚¹å€¼ï¼Œè¡¨ç¤ºå®æ•° 3.4Ã—10^-38^ ~ 3.4Ã—10^38^ 4 double åŒç²¾åº¦æµ®ç‚¹å€¼ï¼Œè¡¨ç¤ºå®æ•° 1.7Ã—10^-308^ ~ 1.7Ã—10^308^ 8 long é•¿æ•´å‹ -2^-31^ ~ 2Ã—10^31^-1 4 unsigned long æ— ç¬¦å·é•¿æ•´å‹ 0 ~ 2^32^-1 4 unsigned long long æ— ç¬¦å·é•¿æ•´å‹ï¼Œ64ä½ 0 ~ 2Ã—10^64^-1 8 short çŸ­æ•´å‹ -2^-15^ ~ 2^15^-1 2 unsigned short æ— ç¬¦å·çŸ­æ•´å‹ 0 ~ 2^16^-1 2 å¦‚ä½•æ¯”è¾ƒæµ®ç‚¹å˜é‡ï¼Ÿ è¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„å°é—®é¢˜ï¼Œå®ƒæ¶‰åŠåˆ°è®¡ç®—æœºä¸€äº›åº•å±‚è¡¨ç¤ºã€‚ æ°¸è¿œä¸è¦ä½¿ç”¨== æ¯”è¾ƒä¸¤ä¸ªæµ®ç‚¹å˜é‡ï¼Œå› ä¸ºè®¡ç®—æœºä¸èƒ½ç²¾ç¡®è¡¨ç¤ºé2çš„æŒ‡æ•°å¹‚å°æ•°ã€‚ ä½ æˆ–è®¸è¡¨ç¤ºç–‘é—®ï¼šç›´æ¥==æ¯”è¾ƒä¸å¯ä»¥å—ï¼Ÿ 12345678910float a = 2.33;float b = 2.33;if( a == b)&#123; std::cout&lt;&lt;&quot;ä¸ç›¸ç­‰&quot;&lt;&lt;std::endl;&#125;else&#123; std::cout&lt;&lt;&quot;ç›¸ç­‰&quot;&lt;&lt;std::endl;&#125; è¾“å‡ºï¼š 1ç›¸ç­‰ â€” è¿™æ²¡æ¯›ç—…å•Šè€é“ï¼Ÿ ä¸ï¼Œè€é“é—®é¢˜å¤§çš„å¾ˆå‹’ï¼ ä¸‹é¢æ¯”è¾ƒä¾¿å‡ºç°äº†æ„æ–™ä¹‹å¤–çš„ç»“æœã€‚ 1234567891011float a = 2.33;float b = 2.34;if((b-a) == 0.01)&#123; std::cout&lt;&lt;&quot;ç›¸ç­‰&quot;&lt;&lt;std::endl;&#125;else&#123; std::cout&lt;&lt;&quot;ä¸ç›¸ç­‰&quot;&lt;&lt;std::endl;&#125; è¾“å‡ºï¼š 1ä¸ç›¸ç­‰ è¿™æ˜¯å› ä¸ºb ã€a åœ¨åº•å±‚äºŒè¿›åˆ¶ä¸­ä¸èƒ½ç²¾ç¡®è¡¨ç¤ºï¼Œåªèƒ½æ— é™è¶‹è¿‘ã€‚å®é™…å­˜å‚¨ä¸­ï¼Œè®¡ç®—æœºåªä¼šæˆªæ–­ä¿ç•™ä¸€å®šé•¿åº¦çš„äºŒè¿›åˆ¶æ•°ï¼Œå¹¶ä¸èƒ½ç²¾ç¡®è¡¨ç¤ºæµ®ç‚¹æ•° ã€‚ ä»¥IEEE 754æ ‡å‡†ä¸ºä¾‹ï¼Œå•ç²¾åº¦ï¼ˆæ€»32ä½ï¼‰å°¾æ•°ä¿ç•™23ä½ï¼Œå…¶ä½™æŒ‡æ•°8ä½ï¼Œç¬¦å·ä½1ä½ï¼ˆåœ¨çº¿è½¬æ¢åœ°å€ï¼‰ã€‚ åœ¨æµ®ç‚¹è¿ç®—ä¸­ï¼Œè®¡ç®—æœºä¹Ÿæ˜¯ä½¿ç”¨äºŒè¿›åˆ¶è¿›è¡Œè®¡ç®—ï¼š æœ€å¼€å§‹a=b=2.33 ï¼Œåˆ¤æ–­a=b æ˜¯å¦ç›¸ç­‰ï¼šè®¡ç®—æœºé€šè¿‡å¯¹æ¯”æ¯ä¸€ä¸ªbit ï¼Œå› ä¸ºb å’Œa åº•å±‚äºŒè¿›åˆ¶è¡¨ç¤ºç›¸ç­‰ï¼Œæ‰€ä»¥ç›´æ¥æ¯”è¾ƒä¸¤ä¸ªç›¸ç­‰æµ®ç‚¹æ•°ä¸ä¼šå‡ºé”™ï¼› ä½†æ˜¯å¦‚æœæ˜¯a-b ï¼Œæµ®ç‚¹æ•°å‚ä¸äº†è¿ç®—ï¼šå› æ­¤æ“ä½œæ•°b å’Œa æœ¬æ¥å°±æ˜¯ä¸ç²¾ç¡®çš„äºŒè¿›åˆ¶è¡¨ç¤ºï¼Œè®¡ç®—å‡ºæ¥çš„äºŒè¿›åˆ¶ç»“æœè‡ªç„¶æ— æ³•ç²¾ç¡®è¡¨ç¤ºçš„0.01ã€‚ 100111100001000111101011100001010 # 32ä½ï¼Œ0.01å¯¹åº”äºŒè¿›åˆ¶è¡¨ç¤º æ‰€ä»¥å‚ä¸äº†è¿ç®—çš„æµ®ç‚¹æ•°b-a å†å’Œ0.01 æ¯”è¾ƒå‡ºé”™ã€‚ ä½†ä¹Ÿå¹¶ä¸æ˜¯æ‰€æœ‰çš„æµ®ç‚¹æ•°éƒ½ä¸èƒ½ç²¾ç¡®è¡¨ç¤ºï¼Œ2çš„æ•´æ•°å†¥çš„æµ®ç‚¹æ•°ä¾¿å¯ä»¥ç²¾ç¡®è¡¨ç¤ºã€‚ IEEE 754å­˜å‚¨æ ‡å‡†å¦‚ä¸‹ã€‚ æ ¹æ®æ ‡å‡†ï¼Œ0.5=1.0âˆ—2âˆ’10.5=1.0*2^{-1}0.5=1.0âˆ—2âˆ’1 ï¼Œæ˜¾ç„¶0.5 å¯ä»¥è¢«ç²¾ç¡®è¡¨ç¤ºã€‚ 1.2.4 å˜é‡åˆå§‹åŒ–ğŸŒŸ åˆå§‹åŒ–æ˜¯æŒ‡å£°æ˜å˜é‡ä½†æ²¡æœ‰å®šä¹‰å®ƒï¼ˆæ²¡æœ‰æŒ‡å®šåˆå€¼ï¼‰æ—¶ï¼Œç¼–è¯‘å™¨è¿›è¡Œçš„é»˜è®¤åˆå§‹åŒ–ï¼ˆèµ‹å€¼ï¼‰æ“ä½œã€‚ å…ˆè®²è®²ä¸Šè¿°æ¦‚å¿µä¸­å‡ºç°çš„æ–°åè¯ï¼Œâ€œå£°æ˜â€å’Œâ€œå®šä¹‰â€ã€‚ å£°æ˜å’Œå®šä¹‰çš„åŒºåˆ«ï¼Ÿ è¯´æ¸…æ¥šè¿™ä¸ªé—®é¢˜ï¼Œè¦åˆ†å˜é‡å’Œå‡½æ•°ä¸¤ä¸ªæ–¹é¢è®¨è®ºã€‚ å£°æ˜å¯ä»¥å¤šæ¬¡ï¼Œå®šä¹‰åªèƒ½æœ‰ä¸€æ¬¡ã€‚ å¦‚æœæ˜¯å˜é‡ã€‚ å£°æ˜ï¼ˆä¸€èˆ¬åœ¨.hæ–‡ä»¶ä¸­ï¼‰ï¼šä»…ä»…æ˜¯æŠŠå˜é‡çš„å£°æ˜çš„ä½ç½®åŠç±»å‹æä¾›ç»™ç¼–è¯‘å™¨ï¼Œå¹¶ä¸åˆ†é…å†…å­˜ç©ºé—´ï¼› 12extern int a ; // ä»…å£°æ˜ï¼Œåˆ«å¤„å®šä¹‰extern int b = 10; // å£°æ˜ï¼ŒåŒæ—¶è¿›è¡Œå®šä¹‰ï¼Œä¸ºå˜é‡båˆ†é…äº†ç©ºé—´ä¸”å­˜å‚¨äº†å€¼10 âš ï¸ æ³¨æ„å¦‚æœä¸æ˜¯externå…³é”®å­—ä¿®é¥°çš„å˜é‡ï¼ŒC++ä¸­çš„å˜é‡å£°æ˜æ—¶ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å®šä¹‰ï¼ˆé»˜è®¤åˆå§‹åŒ–ï¼‰ã€‚ ä¸‹é¢è¿›è¡Œä¸¾ä¾‹è¯´æ˜ã€‚ 12 /*other.h*/int a; // å£°æ˜+å®šä¹‰ï¼ˆå­˜å‚¨å€¼0ï¼‰ å¦‚æœæœ‰å¤šä¸ª.cpp æ–‡ä»¶include â€œother.hâ€ ï¼Œä¼šé‡å¤å®šä¹‰å¤šæ¬¡aï¼ˆå®šä¹‰åªèƒ½æœ‰ä¸€æ¬¡ï¼‰ã€‚ main.cpp 1234567 #include &lt;iostream&gt; #include &quot;other.h&quot; // å¼•å…¥å¤´æ–‡ä»¶other.hï¼Œå˜é‡aè¢«å®šä¹‰ä¸€æ¬¡, using namespace std; int main() &#123;&#125; other.cpp 1#include &quot;other.h&quot; // å¼•å…¥å¤´æ–‡ä»¶other.hï¼Œå˜é‡aè¢«å®šä¹‰ä¸€æ¬¡ å°è¯•ç¼–è¯‘å‡ºé”™ï¼š 123[root@roy-cpp test]# g++ -std=c++11 main.cpp other.cpp -o main.out /tmp/cc2DsgGi.o:(.data+0x0): multiple definition of `a&#x27;/tmp/ccDlbvUg.o:(.data+0x0): first defined here æ›´ç³Ÿç³•çš„æ˜¯ï¼Œæ­¤æ—¶é‡‡ç”¨ifndefé˜²æ­¢é¢„ç¼–è¯‘é‡å¤å®šä¹‰æ²¡æœ‰ç”¨ï¼Œæ›´å¤šifndef è§£é‡Šå‚è€ƒï¼šC++é˜²æ­¢å¤´æ–‡ä»¶è¢«é‡å¤å¼•å…¥çš„3ç§æ–¹æ³• ã€‚ 1 /other.h/ #ifndef OTHER_H #define OTHER_H int a; #endif 12å› ä¸ºæ­¤æ—¶`main.cpp` ã€`other.cpp` æ˜¯åˆ†åˆ«ç¼–è¯‘çš„ï¼Œ`main.cpp` ä¸­çš„`define OTHER_H` å¯¹`other.cpp` ä¸èµ·ä½œç”¨ã€‚ ä¸ºäº†é¿å…è¿™ç§é—®é¢˜ï¼Œä¸ºäº†é¿å…è¿™ç§é—®é¢˜æˆ‘ä»¬åªæœ‰å°†å¤´æ–‡ä»¶ä¸­å˜é‡å£°æ˜ä¸ºexternï¼š 1extern int a; å†æ¬¡ç¼–è¯‘æ­£å¸¸ï¼š 1[root@roy-cpp test]# g++ -std=c++11 main.cpp other.cpp -o main.out main.cpp å’Œ other.cpp éƒ½æ˜¯æ‹¥æœ‰açš„å£°æ˜ï¼Œå£°æ˜å¯ä»¥å¤šæ¬¡ã€‚ å®šä¹‰ï¼ˆä¸€èˆ¬åœ¨.cppæ–‡ä»¶ä¸­ï¼‰ï¼šè¦åœ¨å®šä¹‰çš„åœ°æ–¹ä¸ºå…¶åˆ†é…å­˜å‚¨ç©ºé—´ï¼Œç›¸åŒå˜é‡å¯ä»¥åœ¨å¤šå¤„å£°æ˜ï¼ˆå¤–éƒ¨å˜é‡externï¼‰ï¼Œä½†åªèƒ½åœ¨ä¸€å¤„å®šä¹‰ã€‚ 1int a; // å£°æ˜ä¹Ÿæ˜¯å®šä¹‰ï¼Œç¼–è¯‘å™¨é»˜è®¤åˆå§‹åŒ– å¦‚æœæ˜¯å‡½æ•°ã€‚ å£°æ˜ï¼ˆä¸€èˆ¬åœ¨.hæ–‡ä»¶ä¸­ï¼‰ï¼šæŠŠå‡½æ•°çš„ä½ç½®ã€å‚æ•°å’Œè¿”å›ç±»å‹ç­‰ä¿¡æ¯å‘Šè¯‰ç¼–è¯‘å™¨ï¼› 1int Max(int x, int y); å‡½æ•°å®šä¹‰ä¸ä¼šè¢«é»˜è®¤åˆå§‹åŒ–ï¼Œæ•…æ— éœ€externã€‚ å®šä¹‰ï¼ˆä¸€èˆ¬åœ¨.cppæ–‡ä»¶ä¸­ï¼‰ï¼šåœ¨æºæ–‡ä»¶ä¸­å®ç°å…·ä½“å‡½æ•°ï¼Œå¹¶ä¸ºå…¶åˆ†é…å†…å­˜ã€‚ 1234int Max(int x, int y) &#123; return x &gt; y ? x : y;&#125; æœ€ä½³å®è·µï¼šå¤´æ–‡ä»¶é‡Œåº”è¯¥æ”¾ä»€ä¹ˆï¼Ÿ å‚è€ƒï¼šmuduo ä¸­åšæ³•ã€‚ åœ¨å¤´æ–‡ä»¶test.hä¸­ï¼š å…¨å±€å˜é‡ï¼šæ³¨æ„ç”¨externå…³é”®å­—ä¿®é¥°ï¼Œåªå£°æ˜ã€‚ 1extern int a; å‡½æ•°ï¼šåªå£°æ˜ 1int Max(int x, int y); å¦‚æœæ˜¯å†…è”å‡½æ•°å¯ç›´æ¥å®šä¹‰ã€‚ 1234inline void func()&#123; // do something&#125; å†…è”å‡½æ•°ä¼šè¢«ç›´æ¥æ›¿æ¢ï¼Œä¸ç”¨æ‹…å¿ƒé‡å¤å®šä¹‰çš„é—®é¢˜ã€‚ ç»“æ„ä½“ï¼šå£°æ˜+å®šä¹‰ã€‚ 1234struct S&#123; bool isOK;&#125;; ç”±äºç»“æ„ä½“å·²ç»è¢«å®šä¹‰ï¼Œå¦‚æœæœ‰å¤šä¸ª.cpp æ–‡ä»¶ includeäº†test.h å®¹æ˜“å‡ºç°é‡å¤å®šä¹‰ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¼€æºæ–‡ä»¶ä¸­å¾€å¾€åœ¨.h æ–‡ä»¶ä¸­ä½¿ç”¨#ifndef é¿å…å¤´æ–‡ä»¶è¢«é‡å¤å¼•å…¥ã€‚ 1234567#ifndef XXX_H#define XXX_Hstruct S&#123; bool isOK;&#125;;#endif ç±»ï¼šç±»å£°æ˜+å®šä¹‰ï¼Œå†…éƒ¨æˆå‘˜åªå£°æ˜ã€‚ åŒä¸Šï¼Œéœ€æ³¨æ„ä½¿ç”¨#ifndef ã€‚ 123456789class MyClass&#123; public: int get_value(); private: int value;&#125;; æ™®é€šæˆå‘˜å‡½æ•°ï¼ˆæ™®é€šæ„é€ å‡½æ•°æˆ–ææ„å‡½æ•°ã€è®¿é—®å‡½æ•°ç­‰ï¼‰å»ºè®®åœ¨ç±»ä¸­ï¼ˆå¤´æ–‡ä»¶ï¼‰å®šä¹‰ï¼›é‡è¦çš„æˆå‘˜å‡½æ•°åº”åœ¨ä¸ç±»åŒåçš„ .cpp æ–‡ä»¶ä¸­å®šä¹‰ã€‚ å…¶å®ƒï¼šdefineå®å®šä¹‰ã€‚ åœ¨æºæ–‡ä»¶test.cppä¸­ï¼š å®ç°test.hç›¸å…³å®šä¹‰ã€‚ 12345678910111213141516# include &quot;test.h&quot;int a = 1; // å®šä¹‰å˜é‡int Max(int x, int y) // å®šä¹‰å‡½æ•°&#123; return x &gt; y ? x : y;&#125;// å®šä¹‰ç»“æ„ä½“æˆå‘˜// ä¸ç”¨ï¼Œç›´æ¥ä½¿ç”¨å³å¯// å®šä¹‰ç±»æˆå‘˜ï¼ˆå¾€å¾€æ˜¯é‡è¦çš„ç±»æˆå‘˜å‡½æ•°ï¼‰int MyClass::get_value()&#123; return value;&#125; é»˜è®¤åˆå§‹åŒ– å˜é‡å€¼å£°æ˜æ—¶çš„åˆå§‹åŒ–å€¼ä¸ä»…å’Œå˜é‡çš„ç±»å‹æœ‰å…³ç³»ï¼Œä¹Ÿå’Œå˜é‡å£°æ˜çš„ä½ç½®æœ‰å…³ç³»ï¼š å¯¹äºå†…ç½®ç±»å‹å˜é‡ï¼ˆå¦‚ int ï¼Œdoubleï¼Œboolç­‰ï¼‰ å‡½æ•°ä½“ä¹‹å¤–çš„å˜é‡ï¼šä¼šè¿›è¡Œ&quot;é›¶å€¼åˆå§‹åŒ–&quot; ï¼› å‡½æ•°ä½“ä¹‹å†…çš„å˜é‡ï¼šæ­¤æ—¶è¯¥å˜é‡æ˜¯æœªå®šä¹‰å€¼ï¼Œåœ¨ä¸€äº›IDEä¸­å¦‚VS2017ä½¿ç”¨ä¼šæŠ¥é”™ï¼›åœ¨ä¸€äº›ç¼–è¯‘å™¨ä¸­å¦‚VSCode2020å¯ä»¥è¢«ä½¿ç”¨ï¼Œéƒ¨åˆ†ä¼šè¢«åˆå§‹åŒ–ï¼Œéƒ¨åˆ†æŒ‡å‘å†…å­˜ä¸­â€œé‡å€¼â€ï¼› é™æ€å˜é‡ï¼ˆåŒ…æ‹¬å±€éƒ¨é™æ€å˜é‡ï¼‰ï¼šè¿›è¡Œ&quot;é›¶å€¼åˆå§‹åŒ–&quot;ã€‚ å¯¹äºç±»æˆå‘˜å˜é‡ï¼ˆClassï¼‰ï¼š åŸç”Ÿç±»å‹ï¼šintç±»å‹æˆ–è€…æŒ‡é’ˆç±»å‹ç­‰ï¼Œä»–ä»¬ä¸ä¼šè¢«åˆå§‹åŒ–ã€‚ä½†æ˜¯ï¼Œä»–ä»¬ä¼šä½¿ç”¨ç±»å®ä¾‹å†…å­˜åœ°å€ä¸­ä»»ä½•å·²ç»å­˜åœ¨çš„é‡å€¼ä½œä¸ºè‡ªå·±çš„å€¼ï¼› å¯¹è±¡ç±»å‹ï¼šå¦‚stringç±»å‹ï¼Œé»˜è®¤æ„é€ å™¨ä¼šè¢«è°ƒç”¨åˆå§‹åŒ–ä¸ºç©ºä¸²&quot;&quot;ï¼› å¼•ç”¨ç±»å‹ï¼šæ— æ³•é€šè¿‡ç¼–è¯‘ã€‚ å¯¹äºä»¥ä¸Šæè¿°æˆ‘ä»¬è¿›è¡Œå®ä¾‹éªŒè¯ã€‚ ã€å®ä¾‹ã€‘ä¸åŒæƒ…å†µåˆå§‹åŒ–éªŒè¯ã€‚ æˆ‘ä»¬å…ˆç»™å‡ºå„ç§æƒ…å†µä¸‹æ€»ç»“ï¼Œå…·æœ‰éªŒè¯è¯·æŸ¥çœ‹ä¸‹æ–¹ä»£ç ã€‚ int/float/double bool string/char æŒ‡é’ˆ å¼•ç”¨ å±€éƒ¨å˜é‡ é‡å€¼ 0 &quot;&quot;ï¼Œ'' é‡å€¼ å‡ºé”™ å…¨å±€å˜é‡/é™æ€å˜é‡ 0 0 &quot;&quot;ï¼Œ'' 0 å‡ºé”™ ç±»æˆå‘˜ é‡å€¼ é‡å€¼ &quot;&quot;ï¼Œé‡å€¼ &quot;&quot;/é‡å€¼ å‡ºé”™ ä»¥ä¸‹æ˜¯å®é™…ä»£ç éªŒè¯ã€‚ å‡½æ•°ä½“å¤–å˜é‡å‡½æ•°ä½“å†…å˜é‡é™æ€å˜é‡ç±»æˆå‘˜å˜é‡ å‡½æ•°ä½“å¤–å˜é‡ å¯ä»¥çœ‹åˆ°ï¼Œå‡½æ•°ä½“å¤–çš„æ‰€æœ‰å˜é‡ï¼ˆå…¨å±€å˜é‡ï¼‰éƒ½å·²ç»è¢«é›¶å€¼åˆå§‹åŒ–ï¼šæ•´æ•°/æµ®ç‚¹ç±»å‹/æŒ‡é’ˆåˆå§‹åŒ–ä¸º0ï¼›å­—ç¬¦ä¸²ç±»å‹è¢«åˆå§‹åŒ–ç©ºä¸²ã€‚ 1234567891011121314151617181920212223242526272829#include &lt;iostream&gt;using namespace std;// 1.æ•°å€¼ç±»å‹int num; // 0 float f; // 0double d; // 0// 2.bool ç±»å‹bool b; // 0// 3.å­—ç¬¦ä¸²ç±»å‹string str; // &quot;&quot; char c; // &#x27;&#x27;// 4.æŒ‡é’ˆ: é›¶å€¼// æ—§ç‰ˆæœ¬C++, 0 æˆä¸ºæŒ‡ç¤ºæ— æ•ˆå†…å­˜ä½ç½®å€¼string *str_ptr; // 0int *ptr; // 0// 5.å¼•ç”¨ï¼šå‡ºé”™string &amp;str_ref; // error: not initializedint &amp;int_ref; // error: not initializedint main()&#123; // æ‰“å°æµ‹è¯•ä»£ç ç•¥ return 0;&#125; å‡½æ•°ä½“å†…å˜é‡ VSCodeï¼ˆg++ 4.6+ï¼‰ä¸­ç»™éƒ¨åˆ†å±€éƒ¨å˜é‡è¿›è¡Œäº†â€œåˆå§‹åŒ–â€ï¼Œç›´æ¥ä½¿ç”¨å¹¶æœªæŠ¥é”™ã€‚ä½†æ˜¯ï¼Œæµ®ç‚¹ç±»å‹å’ŒæŒ‡é’ˆçš„å€¼éƒ½æŒ‡å‘äº†é‡å€¼ã€‚ å‡½æ•°ä½“å†…å˜é‡å˜é‡ä¸åˆå§‹åŒ–ï¼Œæ˜¯ä¸ªå±é™©ä¸”é”™è¯¯çš„ç¼–ç¨‹è¡Œä¸ºï¼Œä½¿å¾—ä»£ç å¾ˆéš¾è°ƒè¯•ã€‚ 123456789101112131415161718192021222324252627282930313233#include &lt;iostream&gt;using namespace std;int func()&#123; // 1.æ•°å€¼ç±»å‹ int num; // é‡å€¼ï¼š9.88131e-324 float f; // é‡å€¼ï¼š5.88128e-39 double d; // é‡å€¼ï¼š2.07385e-317 // 2.bool ç±»å‹ bool b; // 0 // 3.å­—ç¬¦ä¸²ç±»å‹ string str; // &quot;&quot; char c; // &#x27;&#x27; // 4.æŒ‡é’ˆ: é›¶å€¼ // æŒ‡é’ˆæŒ‡å‘å†…å­˜ä¸­éšæœºåœ°å€å€¼ï¼Œè¿™éå¸¸å±é™© string *str_ptr; // 0x400a10 int *ptr; // 0x400be0 // 5.å¼•ç”¨ï¼šå‡ºé”™ string &amp;str_ref; // error: not initialized int &amp;int_ref; // error: not initialized&#125;int main()&#123; // æ‰“å°æµ‹è¯•ä»£ç ç•¥ return 0;&#125; é™æ€å˜é‡ ç‰¹åˆ«çš„ï¼Œé™æ€å˜é‡ä¸è®ºæ˜¯å±€éƒ¨é™æ€å˜é‡è¿˜æ˜¯å…¨å±€é™æ€å˜é‡éƒ½ä¼šè¿›è¡Œé›¶å€¼åˆå§‹åŒ–ã€‚åˆå§‹åŒ–è§„åˆ™åŒå…¨å±€å˜é‡ã€‚ â“ å±€éƒ¨é™æ€å˜é‡ï¼Œæ¯æ¬¡è¿›å…¥å‡½æ•°éƒ½ä¼šè¢«åˆå§‹åŒ–å—ï¼Ÿ é™æ€å±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡ä¸€æ ·ï¼Œæ•°æ®éƒ½å­˜æ”¾åœ¨å…¨å±€åŒºåŸŸï¼Œæ‰€ä»¥åœ¨ä¸»ç¨‹åºmainæ‰§è¡Œä¹‹å‰ï¼Œç¼–è¯‘å™¨å·²ç»ä¸ºå…¶åˆ†é…å¥½äº†å†…å­˜ï¼Œå³åªä¼šè¢«åˆå§‹åŒ–ä¸€æ¬¡ã€‚ 1234567891011121314151617181920#include &lt;iostream&gt;using namespace std;int count_calls() &#123; // ä¸»ç¨‹åºæ‰§è¡Œå°±å·²è¢«åˆå§‹åŒ– // åç»­è¿›å…¥å‡½æ•°ä¸ä¼šå†æ‰§è¡Œåˆå§‹åŒ–å˜ä¸º0 static int ctr; // é»˜è®¤åˆå§‹åŒ–ä¸º 0 return ++ctr;&#125;// è¿™æ®µç¨‹åºå°†è¾“å‡ºä» 1 åˆ° 10 çš„æ•°å­—ã€‚int main() &#123; for(int i=0; i != 10; ++i) &#123; cout &lt;&lt; count_calls() &lt;&lt; endl; &#125; return 0;&#125; ç±»æˆå‘˜å˜é‡ å¯ä»¥çœ‹åˆ°ï¼Œç±»æˆå‘˜å˜é‡å€¼å¦‚æœä¸ç»™å®šåˆå§‹åŒ–ï¼šåŸºæœ¬ç±»å‹å˜é‡æŒ‡å‘é‡å€¼ï¼›å¼•ç”¨ç±»å‹ä¼šéæ³•è­¦å‘Šã€‚ ä½†æ˜¯ï¼Œå¯¹è±¡ç±»å‹stringä¼šè¢«â€œé›¶å€¼åˆå§‹åŒ–â€ï¼ˆç©ºä¸²ï¼‰ã€‚è¿™æ˜¯å› ä¸ºstringç±»å‹çš„é»˜è®¤æ„é€ å‡½æ•°è¢«è°ƒç”¨ï¼Œè€Œstringçš„é»˜è®¤æ„é€ ä¼šå°†stringç±»å‹å€¼åˆå§‹åŒ–ä¸ºç©ºä¸²ã€‚ æ˜¾ç„¶ï¼Œç±»æˆå‘˜å˜é‡æœ€å¥½åœ¨ä½¿ç”¨å‰è¿›è¡Œåˆå§‹åŒ–ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738#include &lt;iostream&gt;using namespace std;class test&#123; public: // 1.æ•°å€¼ç±»å‹ int num; // é‡å€¼ï¼š1760379232 float f; // é‡å€¼ï¼š4.59149e-41 double d; // é‡å€¼ï¼š4.59149e-41 // 2.bool ç±»å‹ bool b ; // é‡å€¼ï¼š2 // 3.å­—ç¬¦ä¸²ç±»å‹ string str; // &quot;&quot; ç©º,å¯¹è±¡ç±»å‹ï¼Œä¼šè°ƒç”¨stringæ„é€ å‡½æ•°åˆå§‹åŒ–ï¼Œæ‰€ä»¥æ˜¯&quot;&quot; char c; // é‡å€¼ // 4.æŒ‡é’ˆ // æŒ‡é’ˆæŒ‡å‘å†…å­˜ä¸­éšæœºåœ°å€å€¼ï¼Œè¿™éå¸¸å±é™© string *str_ptr; // 0 int *ptr; // 0x400d00 // 5.å¼•ç”¨ï¼šå‡ºé”™ string &amp;str_ref; // not initialized int &amp;int_ref; // not initialized public: // é»˜è®¤æ„é€ å‡½æ•°ï¼šä¸åšä»»ä½•æ“ä½œ test() &#123;&#125;;&#125;;int main()&#123; test t; // æ‰“å°æµ‹è¯•ä»£ç ç•¥ return 0;&#125; 1.3 å…³é”®å­— åœ¨å‰é¢çš„ä¾‹å­ï¼Œå¤šæ¬¡è§åˆ°çš„externå…³é”®å­—æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ 1extern char c, ch; åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç®€å•ä»‹ç»ä¸€ä¸‹ä»€ä¹ˆæ˜¯å…³é”®å­—ï¼Œæœ‰ä¸ªæ•´ä½“çš„æ¦‚å¿µå’Œäº†è§£ã€‚ å…³é”®å­—æ˜¯é¢„å®šä¹‰çš„å•è¯ï¼Œå¯¹ç¼–è¯‘å™¨å…·æœ‰ç‰¹æ®Šçš„å«ä¹‰ã€‚ä¾‹å¦‚ï¼Œå‰é¢æˆ‘ä»¬çœ‹åˆ°çš„intã€floatç­‰åŸºæœ¬å˜é‡ç±»å‹ä¹Ÿæ˜¯å…³é”®å­—çš„ä¸€éƒ¨åˆ†ã€‚ ä¸‹è¡¨åˆ—å‡ºäº† C++ ä¸­çš„å…³é”®å­—ã€‚è¿™äº›å…³é”®å­—ä¸èƒ½ä½œä¸ºå¸¸é‡åã€å˜é‡åæˆ–å…¶ä»–æ ‡è¯†ç¬¦åç§°ã€‚ æœ¬èŠ‚ä¸»è¦ä»‹ç»å­˜å‚¨ç±»ç›¸å…³å…³é”®å­—ã€‚ å­˜å‚¨ç±»å®šä¹‰ C++ ç¨‹åºä¸­å˜é‡/å‡½æ•°çš„èŒƒå›´ï¼ˆå¯è§æ€§ï¼‰å’Œç”Ÿå‘½å‘¨æœŸï¼Œè¿™äº›è¯´æ˜ç¬¦æ”¾ç½®åœ¨å®ƒä»¬æ‰€ä¿®é¥°çš„ç±»å‹ä¹‹å‰ã€‚ä¸‹é¢åˆ—å‡º C++ ç¨‹åºä¸­å¯ç”¨çš„å­˜å‚¨ç±»ï¼š extern static mutable thread_local (C++11) ç‰¹åˆ«çš„ï¼Œä» C++ 11 å¼€å§‹ï¼Œauto å…³é”®å­—ä¸å†æ˜¯ å­˜å‚¨ç±»è¯´æ˜ç¬¦ï¼Œä½†autoæ˜¯c++11ä¸­éå¸¸ä¼˜é›…çš„å…³é”®å­—ã€‚ä¸ºäº†æ›´å¥½çš„è¯´æ˜å®ƒçš„ä½œç”¨ï¼Œåœ¨3.XèŠ‚ä¸­ä¼šæ­£å¼æåˆ°å®ƒã€‚ 1.3.1 externå…³é”®å­— externé¡¾åæ€ä¹‰ï¼Œå¤–é¢çš„ã€å¤–æ¥çš„ã€‚ extern å¯ä»¥ç½®äºå˜é‡æˆ–è€…å‡½æ•°å‰ï¼Œæ‰©å±•å˜é‡/å‡½æ•°çš„å®šä¹‰åŸŸï¼š ç¬¬ä¸€ç§æƒ…å†µï¼Œé¦–å…ˆå°†å£°æ˜çš„å˜é‡/å‡½æ•°ä½œç”¨åŸŸï¼Œä»å£°æ˜æ‰©å±•åˆ°æœ¬æ–‡ä»¶ç»“æŸï¼›å¦‚æœä¾æ—§æœªæ‰¾åˆ°å®šä¹‰è½¬æƒ…å†µäºŒã€‚ ç¬¬äºŒç§æƒ…å†µï¼Œå£°æ˜å˜é‡/å‡½æ•°å®šä¹‰åœ¨å…¶å®ƒæ–‡ä»¶ä¸­ï¼Œåœ¨é“¾æ¥æ—¶ä¼šåœ¨å…¶å®ƒæ–‡ä»¶å¯»æ‰¾å…¶å®šä¹‰ï¼ˆè¿™æ ·åœ¨ç¼–è¯‘æ—¶ï¼Œæœ¬æ–‡ä»¶æœªæ‰¾å®šä¹‰ä¹Ÿä¸æŠ¥é”™ï¼‰ã€‚ åˆ†åˆ«ä¸¾ä¸¤ä¸ªä¾‹å­è¯´æ˜ä¸¤ç§æƒ…å†µã€‚ ç¬¬ä¸€ç§æƒ…å†µï¼Œå˜é‡åœ¨æœ¬æ–‡ä»¶å®šä¹‰ ã€ä¾‹1ã€‘å˜é‡å£°æ˜åä¸æƒ³ç«‹å³åˆå§‹åŒ–ï¼Œåœ¨è°ƒç”¨åæ‰ä¼šè¿›è¡Œåˆå§‹åŒ–ã€‚å¦‚ä½•åœ¨è°ƒç”¨æ—¶å°±è·å–æ­£ç¡®çš„å€¼ï¼Ÿ ä½¿ç”¨ extern å…³é”®å­—å¯¹å˜é‡c, ch ä½œâ€œå¤–éƒ¨å˜é‡å£°æ˜â€ï¼Œä½¿ä½œç”¨åŸŸæ‰©å±•åˆ°ä»å£°æ˜å¼€å§‹åˆ°æœ¬æ–‡ä»¶ç»“æŸ ï¼Œè¿™æ ·ç¼–è¯‘å™¨å°±ä¼šåœ¨æœ¬æ–‡ä»¶å…¶å®ƒåŒºåŸŸå¯»æ‰¾å…¶å®šä¹‰ã€‚ 1234567891011121314#include &lt;iostream&gt;using namespace std;int main()&#123; // ä½œç”¨åŸŸæ‰©å±•åˆ°æ–‡ä»¶ç»“å°¾ extern char c, ch; cout&lt;&lt;c&lt;&lt;endl; cout&lt;&lt;ch&lt;&lt;endl; return 0;&#125;// çœŸæ­£å®šä¹‰çš„åœ°æ–¹char c=&#x27;h&#x27;, ch=&#x27;H&#x27;; è¾“å‡ºï¼š 1234[root@roy-cpp test]# g++ -std=c++11 main.cpp other.cpp -o main.out[root@roy-cpp test]# ./main.out hH è€Œå¦‚æœæ²¡æœ‰ä½¿ç”¨externå…³é”®å­—ï¼Œè¾“å‡ºä¸ºç©ºï¼ˆé»˜è®¤åˆå§‹åŒ–çš„å€¼ï¼‰ï¼š 1 å¦‚æœæœ¬æ–‡ä»¶æ²¡æ‰¾åˆ°å®šä¹‰ï¼Œexternè¿˜ä¼šå»å…¶å®ƒæ–‡ä»¶ä¸­å¯»æ‰¾å®šä¹‰ã€‚ ç¬¬äºŒç§æƒ…å†µï¼Œå˜é‡åœ¨å…¶å®ƒæ–‡ä»¶å®šä¹‰ c, chæ˜¯åœ¨åˆ«çš„æ–‡ä»¶ä¸­å£°æ˜ ã€ä¾‹2ã€‘å˜é‡c, ch æ˜¯åœ¨åˆ«çš„.cppæ–‡ä»¶ä¸­å£°æ˜çš„ï¼Œä½†åˆéœ€è¦åœ¨ main å‡½æ•°ä¸­è°ƒç”¨å®ƒä»¬ï¼ˆå¼•å…¥å¤´æ–‡ä»¶ä¸­ä¹Ÿæ²¡æœ‰å®ƒä»¬çš„å®šä¹‰ï¼‰ã€‚ ä½¿ç”¨externå…³é”®å­—å£°æ˜å³å¯è§£å†³ï¼Œè¿™æ ·ç¼–è¯‘é˜¶æ®µä¸ä¼šå‡ºé”™ï¼Œé“¾æ¥æ—¶ä¼šå»å¯»æ‰¾å®ƒä»¬çš„å®šä¹‰ï¼ˆå¦‚æœexternä¿®é¥°å‡½æ•°/ç±»ç­‰æ•ˆæœç­‰åŒå‰å‘å£°æ˜ï¼Œ3.1.1èŠ‚ï¼‰ã€‚ main.cpp 123456789101112#include &lt;iostream&gt;using namespace std;// å£°æ˜å¤–éƒ¨å˜é‡ï¼Œå¤´æ–‡ä»¶ä¸­ä¹Ÿæ²¡æœ‰c,chçš„å®šä¹‰extern char c, ch; int main()&#123; cout&lt;&lt;c&lt;&lt;endl; cout&lt;&lt;ch&lt;&lt;endl; return 0;&#125; other.cpp 1char c=&#x27;h&#x27;, ch=&#x27;H&#x27;; æ²¡ä½¿ç”¨externå…³é”®å­—å£°æ˜ç¼–è¯‘ä¼šå‡ºé”™ï¼Œä½¿ç”¨åç¼–è¯‘æ­£å¸¸ï¼š 12g++ -std=c++11 main.cpp other.cpp -o main.out./main.out è¾“å‡ºï¼š 12hH ä¸è¿‡è¿™ä¸ªåšæ³•æœ‰ç‚¹åˆ»æ„ï¼Œæ ¹æ®æˆ‘ä»¬ä¹‹å‰çš„æœ€ä½³å®è·µï¼Œå£°æ˜å’Œå®šä¹‰æœ€å¥½åˆ†å¼€ã€‚å˜é‡c, ch åº”è¯¥å£°æ˜åœ¨.hæ–‡ä»¶ä¸­ã€‚ æ­¤æ—¶externå…³é”®å­—çš„ä½œç”¨æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œ other.h å˜é‡aå®šä¹‰åœ¨åˆ«å¤„/æ–‡ä»¶ä¸­ã€‚ main.cpp 12345678910#include &lt;iostream&gt;#include &quot;other.h&quot; // å¼•å…¥å¤´æ–‡ä»¶using namespace std; int main()&#123; cout&lt;&lt;c&lt;&lt;endl; cout&lt;&lt;ch&lt;&lt;endl; return 0;&#125; other.h 1extern char c, ch; // åªå£°æ˜ other.cpp 1char c=&#x27;h&#x27;, ch=&#x27;H&#x27;; // å®é™…å®šä¹‰ ç¼–è¯‘æ­£å¸¸ï¼š 123[root@roy-cpp test]# g++ -std=c++11 main.cpp other.cpp -o main.out h H æœ€ä½³å®è·µï¼šä»€ä¹ˆæ—¶å€™ä½¿ç”¨externå’Œå¤´æ–‡ä»¶ å¼•å…¥å¤´æ–‡ä»¶å°±å¯ä»¥ä½¿ç”¨åœ¨å…¶å®ƒæ–‡ä»¶çš„å˜é‡/å‡½æ•°/ç±»ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦externï¼Ÿ externå°†å£°æ˜ã€å®šä¹‰åˆ†ç¦»ã€‚externå¯ä»¥ç”¨äºå¤´æ–‡ä»¶æŠŠå…¨å±€å˜é‡çš„å£°æ˜å’Œå®šä¹‰åˆ†ç¦»ï¼Œé¿å…é‡å¤å®šä¹‰ï¼› åªéœ€è¦ä½¿ç”¨ä¸ªåˆ«å…¶å®ƒæ–‡ä»¶çš„å˜é‡/å‡½æ•°ç­‰ã€‚æœ‰æ—¶å€™æˆ‘ä»¬åªæƒ³ä½¿ç”¨å¤´æ–‡ä»¶å®šä¹‰çš„ä¸ªåˆ«å˜é‡/å‡½æ•°ï¼Œä½†æ˜¯è¿™æ ·ä¸å¾—ä¸å¼•å…¥å¤´æ–‡ä»¶æ‰€æœ‰çš„ç›¸å…³å˜é‡/å‡½æ•°ç­‰å£°æ˜ã€‚åœ¨å¤§é¡¹ç›®ç¼–è¯‘ä¸­ï¼Œè¿‡åº¦ä½¿ç”¨å¤´æ–‡ä»¶ä¼šè®©ç¼–è¯‘é€Ÿåº¦æ˜¾è‘—å˜æ…¢ã€‚ è¿™é‡Œæˆ‘ä»¬æ²¡æœ‰include â€œother.hâ€ , å› ä¸ºæˆ‘ä»¬åªéœ€è¦å®ƒçš„Max å‡½æ•°ï¼Œä½¿ç”¨externå…³é”®å­—å³å¯ã€‚ C++å’ŒCä»£ç æ··ç¼–æ—¶ã€‚ ä¸‹èŠ‚è¯´æ˜ã€‚ extern â€œCâ€ externå…³é”®å­—è¿˜å¯ç”¨äºextern â€œCâ€ï¼Œä½¿å¾—Cå’ŒC++æ··ç¼–ä¸ä¼šå‡ºé”™ï¼Œå®ƒæœ‰ä¸¤å±‚å«ä¹‰ï¼š å£°æ˜çš„å˜é‡æ˜¯externçš„ï¼Œå®ƒåªæ˜¯åœ¨è¿™é‡Œå£°æ˜ï¼Œå®šä¹‰åœ¨åˆ«çš„åœ°æ–¹ï¼› å£°æ˜çš„å˜é‡æŒ‰Cæ–¹å¼è¿›è¡Œç¼–è¯‘ã€‚ ç¬¬2ç‚¹æ˜¯æœ¬èŠ‚çš„æ ¸å¿ƒå†…å®¹ã€‚ âš ï¸ ä»¥ä¸‹æƒ…å†µä»…åœ¨ç”¨gccç¼–è¯‘ä»£ç æ—¶å‡ºç°ï¼Œg++ç¼–è¯‘ä¸ä¼šå‡ºé”™ï¼ˆèŠ‚æœ«è§£é‡Šï¼‰ã€‚ å‡†å¤‡ä¸‰ä¸ªæ–‡ä»¶ï¼ša.cã€a.hã€main.cpp ï¼Œåœ¨main.cppä¸­è°ƒç”¨a.cä¸­çš„å‡½æ•°printHello ã€‚ å°è¯•gccç¼–è¯‘ï¼š å¾ˆä¸å¹¸æŠ¥é”™äº†ï¼š 1main.cpp:(.text+0x5): undefined reference to `printHello()&#x27; é“¾æ¥è¿‡ç¨‹ä¸­æ‰¾ä¸åˆ°ç¬¦å· printHello ï¼Œä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ è¿™æ˜¯å› ä¸ºgcc å¯¹ cppå’Œcä»£ç å˜é‡çš„ç¬¦å·å¤„ç†ä¸åŒå¯¼è‡´çš„ã€‚ æˆ‘ä»¬çŸ¥é“ä»ä»£ç åˆ°å¯æ‰§è¡Œç¨‹åºéœ€è¦ç»è¿‡ï¼Œé¢„ç¼–è¯‘â†’ç¼–è¯‘â†’æ±‡ç¼–â†’é“¾æ¥ï¼Œå…¶ä¸­ç¼–è¯‘å’Œé“¾æ¥å¤§è‡´å¦‚ä¸‹ï¼š ç¼–è¯‘ï¼šä»£ç å±•å¼€ã€è¯­æ³•æ£€æŸ¥ï¼Œè¿˜åŒ…æ‹¬å°†å˜é‡è½¬æˆç¬¦å·ï¼› é“¾æ¥ï¼šå°†æœªå®šä¹‰çš„ç¬¦å·ï¼Œè§£æé‡å®šä½åˆ°å…¶å®šä¹‰å®ç°çš„åœ°æ–¹ã€‚ æŸ¥çœ‹a.oé“¾æ¥å‰çš„ç¬¦å·è¡¨ï¼š 1234[root@roy-cpp test1]# gcc -c a.c -o a.o[root@roy-cpp test1]# nm a.o0000000000000000 T printHello U puts a.c ç¼–è¯‘åçš„ç¬¦å·åï¼ˆprintHelloï¼‰å’Œä»£ç ä¸­çš„å®šä¹‰ä¸€æ ·ã€‚ å†æŸ¥çœ‹main.oé“¾æ¥å‰çš„ç¬¦å·è¡¨ï¼š 123[root@roy-cpp test1]# nm main.o0000000000000000 T main U _Z10printHellov main.cpp ç¼–è¯‘åprintHelloç¬¦å·åå˜ä¸º_Z10printHellov ï¼Œè¿™æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿ å¯¹äºC++ä»£ç ï¼šå¦‚æœæ˜¯æ•°æ®å˜é‡å¹¶ä¸”æ²¡æœ‰åµŒå¥—ï¼Œç¬¦å·åä¹Ÿæ˜¯æœ¬èº«ï¼›å¦‚æœå˜é‡åæœ‰åµŒå¥—ï¼ˆåœ¨åç§°ç©ºé—´æˆ–ç±»é‡Œï¼‰æˆ–è€…æ˜¯å‡½æ•°åï¼Œç¬¦å·åå°±ä¼šæŒ‰å¦‚ä¸‹è§„åˆ™æ¥å¤„ç†ã€‚ ç¬¦å·ä»¥_Zå¼€å§‹ï¼› å¦‚æœæœ‰åµŒå¥—ï¼Œåé¢ç´§è·ŸNï¼Œç„¶åæ˜¯åç§°ç©ºé—´ã€ç±»ã€å‡½æ•°çš„åå­—ï¼Œåå­—å‰çš„æ•°å­—æ˜¯é•¿åº¦ï¼Œä»¥Eç»“å°¾ï¼› å¦‚æœæ²¡åµŒå¥—ï¼Œåˆ™ç›´æ¥æ˜¯åå­—é•¿åº¦åé¢è·Ÿç€åå­—ï¼› æœ€åæ˜¯å‚æ•°åˆ—è¡¨ï¼Œv è¡¨ç¤ºvoidã€‚ å› ä¸ºmain.cpp çš„ç¬¦å·_Z10printHellov æ˜¯æœªå®šä¹‰çš„ï¼Œå®ƒéœ€è¦è§£æé‡å®šä½åˆ°å®šä¹‰çš„åœ°æ–¹ï¼Œä¹Ÿæ˜¯a.o ä¸­ã€‚ä½†æ˜¾ç„¶ç¬¦å·_Z10printHellov å’Œ printHello ä¸åŒï¼Œå› æ­¤é“¾æ¥æ—¶åœ¨a.oæ‰¾ä¸åˆ°ç›¸å…³ç¬¦å·å¯¼è‡´æŠ¥é”™ï¼Œæ— æ³•æ­£ç¡®é‡å®šä¹‰ï¼š 1main.cpp:(.text+0x5): undefined reference to `printHello()&#x27; è¿™ä¸ªæ—¶å€™extern â€œCâ€ å°±æ´¾ä¸Šç”¨åœºäº†ï¼šåœ¨C++æ–‡ä»¶æŒ‡å®šä»£ç /å¤´æ–‡ä»¶æŒ‰Cçš„æ–¹å¼è¿›è¡Œç¼–è¯‘ã€‚ å°†a.h ä¿®æ”¹å¦‚ä¸‹ï¼š 12345678#ifdef __cplusplus extern &quot;C&quot;&#123; #endifvoid printHello();#ifdef __cplusplus&#125;#endif å†æ¬¡æŸ¥çœ‹main.o ç¬¦å·è¡¨ï¼š 1234[root@roy-cpp test1]# gcc -c main.cpp -o main.o[root@roy-cpp test1]# nm main.o0000000000000000 T main U printHello ä¸€åˆ‡æ­£å¸¸ã€‚æ•´ä¸ªè¿‡ç¨‹è¯¦ç»†å˜åŒ–å¦‚ä¸‹ï¼š gcc æ ¹æ®main.cpp æ–‡ä»¶ååç¼€è¯†åˆ«ä¸ºcppæ–‡ä»¶ï¼› é¢„ç¼–è¯‘ï¼šå°†main.cpp ä¸­ \\#include &quot;a.h&quot; å±•å¼€ï¼Œå› ä¸ºcppæ–‡ä»¶éƒ½ä¼šå­˜åœ¨å®å®šä¹‰__cplusplusï¼Œæ‰€ä»¥#ifdef __cplusplus æˆç«‹ã€‚æœ€ç»ˆå±•å¼€ä¸ºï¼š 123extern &quot;C&quot;&#123; void printHello();&#125; ç¼–è¯‘ï¼šç¼–è¯‘åˆ° extern â€œCâ€{â€¦} ä¸­çš„å˜é‡printHello æŒ‰Cæ–¹å¼ç¼–è¯‘æˆç¬¦å·printHello ã€‚ å†æ¬¡å°è¯•ç¼–è¯‘ä¹Ÿç¡®å®æ­£å¸¸è¾“å‡ºäº†ï¼š 123[root@roy-cpp test1]# gcc main.cpp a.c -o main.out[root@roy-cpp test1]# ./main.out hello C ! ä½†æ˜¯g++ç¼–è¯‘ä¸ä½¿ç”¨extern â€œCâ€æ±‡ç¼–Cå’ŒC++ä»£ç ä¹Ÿä¸ä¼šå‡ºé”™ ï¼Œå› ä¸ºg++å°†cæˆ–cppä»£ç éƒ½æŒ‰cppæ–¹å¼ç¼–è¯‘ã€‚ ä¸‹é¢æ˜¯æµ‹è¯•ã€‚ æŸ¥çœ‹æ­¤æ—¶a.cç¼–è¯‘åçš„a.o ç¬¦å·è¡¨ï¼ˆcppé£æ ¼ï¼‰ï¼š 1234[root@roy-cpp test1]# g++ -c a.c -o a.o[root@roy-cpp test1]# nm a.o U puts0000000000000000 T _Z10printHellov 1.3.2 staticå…³é”®å­— staticå…³é”®å­—å¸¸äºå„ç§é¢è¯•é¢˜ã€ä¹¦ç±ä¸­ï¼Œä¸ºä»€ä¹ˆéœ€è¦staticå…³é”®å­—ï¼Ÿä¸ºä»€ä¹ˆå®ƒå¦‚æ­¤é‡è¦ï¼Ÿ æˆ‘ä»¬ä»é¢å‘è¿‡ç¨‹å’Œé¢å‘è§’åº¦ä¸¤ä¸ªè§’åº¦åˆ†æã€‚ é¢å‘è¿‡ç¨‹è§’åº¦ ä¸€ã€ä½œç”¨åŸŸéšè—ã€‚å½“ä¸€ä¸ªå·¥ç¨‹æœ‰å¤šä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œç”¨staticä¿®é¥°çš„å‡½æ•°æˆ–å˜é‡åªèƒ½å¤Ÿåœ¨æœ¬æ–‡ä»¶ä¸­å¯è§ï¼Œæ–‡ä»¶å¤–ä¸å¯è§ã€‚ å¯¹æ¯”å…¨å±€å˜é‡/å‡½æ•°ï¼šå…¨å±€å˜é‡/å‡½æ•°è®¿é—®å…·æœ‰å…¨å±€æ€§ï¼Œå…¶å®ƒæ–‡ä»¶é€šè¿‡externå…³é”®å­—æˆ–å¼•ç”¨å¤´æ–‡ä»¶ï¼Œæ˜¯å¯ä»¥ä½¿ç”¨æœ¬æ–‡ä»¶ä¸­å®šä¹‰çš„å…¨å±€å˜é‡/å‡½æ•°ã€‚ ä½†æœ‰æ—¶æˆ‘ä»¬å¹¶ä¸å¸Œæœ›è¿™æ ·ï¼Œå› ä¸ºè¿™æš´éœ²äº†æˆ‘ä»¬ä¸æƒ³æš´éœ²çš„å˜é‡/å‡½æ•°ï¼Œè¿™ä¸ªæ—¶å€™staticå¯ä»¥æ›´å¥½çš„é™å®šä½œç”¨èŒƒå›´ã€‚ ç”±æ­¤è¿˜å¼•ç”³å¦å¤–ä¸€ä¸ªå¥½å¤„ï¼šä¸åŒçš„äººç¼–å†™ä¸åŒçš„å‡½æ•°æ—¶ï¼Œä¸ç”¨æ‹…å¿ƒæ˜¯å¦ä¼šä¸å…¶å®ƒæ–‡ä»¶ä¸­çš„å‡½æ•°åŒåï¼Œå› ä¸ºåŒåä¹Ÿæ²¡æœ‰å…³ç³»ï¼ˆé™å®šä½œç”¨èŒƒå›´åœ¨æœ¬æ–‡ä»¶å†…ï¼‰ã€‚ ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸¤ä¸ªå°ä¾‹å­æ¥ç†è§£ã€‚ ä¾‹å­1ï¼šé™æ€å˜é‡ å¯ä»¥çœ‹åˆ°ï¼Œé™æ€staticå˜é‡å³ä½¿è¢«externå…³é”®å­—ä¿®é¥°ï¼Œä¾æ—§ä¸èƒ½è¢«å…¶å®ƒæ–‡ä»¶å¼•ç”¨ã€‚ 12345678910111213141516171819/*other.cpp*/int global_var = 1;static int static_var = 1;/*main.cpp*/#include &lt;iostream&gt;using namespace std;extern int global_var;extern int staic_var;int main()&#123; // ç¼–è¯‘æ­£ç¡®ï¼Œother.cppä¸­çš„global_varè¢«æ­£ç¡®æ‰“å°è¾“å‡º cout&lt;&lt;global_var&lt;&lt;endl; // ç¼–è¯‘é”™è¯¯ï¼Œundefined reference to `staic_var&#x27; cout&lt;&lt;staic_var&lt;&lt;endl; &#125; ä¾‹å­2ï¼šé™æ€å‡½æ•° å°†é™æ€å‡½æ•°static_func å®šä¹‰åœ¨other.h ï¼ˆå®ç°åœ¨other.cppï¼‰ï¼Œæ— æ³•é€šè¿‡ç¼–è¯‘ï¼šundefined reference to static_func()ã€‚ 1234567891011121314151617181920212223242526272829/*other.h*/static int static_func();int global_func();/*other.cpp*/#include &lt;iostream&gt;using namespace std; static int static_func() &#123; cout&lt;&lt;&quot;i am static_func in other.cpp&quot;&lt;&lt;endl; &#125; int global_func() &#123; cout&lt;&lt;&quot;i am global_func in other.cpp&quot;&lt;&lt;endl; &#125;/*main.cpp*/#include &lt;iostream&gt;#include &quot;other.h&quot; using namespace std;int main()&#123; // å‡ºé”™ï¼šundefined reference to &#x27;static_func()&#x27; global_func(); static_func();&#125; å°è¯•ç¼–è¯‘å‡ºé”™ï¼š 1g++ -std=c++11 main.cpp other.cpp -o main.out ä½†å¦‚æœæˆ‘ä»¬ä¸ä½¿ç”¨å¤´æ–‡ä»¶ï¼Œstatic_funcå¯ä»¥è¢«æˆåŠŸä½¿ç”¨ï¼Ÿ 123456789101112131415161718192021222324/*other.cpp*/#include &lt;iostream&gt;using namespace std;static int static_func() &#123; cout&lt;&lt;&quot;i am static_func in other.cpp&quot;&lt;&lt;endl; &#125;int global_func() &#123; cout&lt;&lt;&quot;i am global_func in other.cpp&quot;&lt;&lt;endl; &#125;/*main.cpp*/#include &lt;iostream&gt;#include &quot;other.cpp&quot;using namespace std;int main()&#123; // å‡è¢«æ­£ç¡®æ‰§è¡Œäº† global_func(); static_func(); &#125; è¿™æ˜¯å› ä¸ºæ­¤æ—¶static_func å·²ç»è¢«è§†ä¸ºåœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚ æ³¨æ„åˆ°ï¼š å¤´æ–‡ä»¶ #include &quot;other.cpp&quot; ï¼Œé¢„ç¼–è¯‘æ—¶ç›´æ¥æ›¿æ¢ä¸º other.cpp ä¸­å†…å®¹ï¼Œ ç›¸å½“ç›´æ¥åœ¨main.cpp å®šä¹‰äº†static_func ã€‚åŒä¸€ä¸ªæ–‡ä»¶ä¸­è°ƒç”¨é™æ€å‡½æ•°static_funcè‡ªç„¶æ˜¯å¯ä»¥çš„ã€‚ é¢„ç¼–è¯‘åçš„æ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºã€‚ è€Œä¹‹å‰ç”Ÿæˆçš„é¢„ç¼–è¯‘æ–‡ä»¶æ˜¯ä¸ä¼šåŒ…å«é™æ€å‡½æ•°çš„å®šä¹‰ï¼ˆåªæœ‰å¤´æ–‡ä»¶other.hä¸­çš„é™æ€å‡½æ•°å£°æ˜ï¼‰ï¼Œæ‰€ä»¥å®é™…å®šä¹‰è¿˜æ˜¯åœ¨åˆ«çš„æ–‡ä»¶ï¼ˆother.cppï¼‰ä¸­ï¼Œå› æ­¤è°ƒç”¨æ—¶ä¼šå‡ºé”™ã€‚ æ‰€ä»¥æˆ‘ä»¬åœ¨g++ç¼–è¯‘æ—¶éƒ½ä¸ç”¨æŠŠother.cppä½œä¸ºæºæ–‡ä»¶ï¼ˆé¢„ç¼–è¯‘æ—¶å·²ç»æ›¿æ¢äº†ï¼‰ã€‚ äºŒã€å…¨å±€ç”Ÿå‘½å‘¨æœŸã€‚ç”¨staticä¿®é¥°çš„å˜é‡æˆ–å‡½æ•°ç”Ÿå‘½å‘¨æœŸæ˜¯å…¨å±€çš„ï¼ˆå³ä½¿æ˜¯å±€éƒ¨é™æ€å˜é‡ï¼‰ï¼Œå­˜å‚¨åœ¨é™æ€æ•°æ®åŒºï¼ˆå…¨å±€æ•°æ®åŒºï¼‰ã€‚ å³åœ¨mainå‡½æ•°æ‰§è¡Œå‰å°±ä¼šè¢«åˆå§‹åŒ–ã€‚ æˆ‘ä»¬ä¸¾ä¸¤ä¸ªå®ä¾‹ï¼Œæ¥æ›´å¥½çš„ç†è§£â€œå…¨å±€ç”Ÿå‘½å‘¨æœŸâ€è¿™ä¸ªæ¦‚å¿µã€‚ ä¾‹1ï¼Œåœ¨normal_addå‡½æ•°ä¸­å®šä¹‰äº†å±€éƒ¨å˜é‡count ï¼Œæ¯æ¬¡å‡½æ•°é€€å‡ºï¼Œcountä¹Ÿéšä¹‹é”€æ¯ã€‚æ‰€ä»¥æ¯æ¬¡æ‰“å°çš„éƒ½æ˜¯è¿›å…¥å‡½æ•°åˆå§‹åŒ–åçš„å€¼+1ã€‚ 1234567891011121314151617#include &lt;iostream&gt; using namespace std; static int i ; // å…¨å±€è®¿é—®æ€§ï¼Œå…¨å±€ç”Ÿå‘½å‘¨æœŸ int normal_add() &#123; int count = 0; // å±€éƒ¨è®¿é—®æ€§ï¼Œå±€éƒ¨è®¿é—®å‘¨æœŸ return ++count; &#125; int main() &#123; for(int j = 0 ; j &lt; 3 ; j++) cout&lt;&lt; normal_add()&lt;&lt;endl; return 0; &#125; ä¾‹2ï¼Œåœ¨static_add ä¸­å®šä¹‰äº†å±€éƒ¨é™æ€å˜é‡count ã€‚å®ƒåªä¼šè¢«åˆå§‹åŒ–ä¸€æ¬¡ï¼ˆå†…å­˜åªè¢«åˆ†é…ä¸€æ¬¡ï¼Œè§ä¸‹ä¾‹è§£é‡Šï¼‰ï¼Œéšç€å‡½æ•°é€€å‡ºä¹Ÿä¸é”€æ¯ï¼Œä¿æŒæœ€æ–°çš„å€¼ã€‚ 123456789101112131415161718#include &lt;iostream&gt; using namespace std; static int i ; // å…¨å±€è®¿é—®æ€§ï¼Œå…¨å±€ç”Ÿå‘½å‘¨æœŸ int static_add() &#123; static int count = 0; // å±€éƒ¨è®¿é—®æ€§ï¼Œå±€éƒ¨è®¿é—®å‘¨æœŸ return ++count; &#125; int main() &#123; // è™½ç„¶å¤šæ¬¡ï¼ˆ3æ¬¡ï¼‰è¿›å…¥äº†å‡½æ•°static_add // ä½†countåªåœ¨ç¬¬ä¸€æ¬¡è¿›å…¥å‡½æ•°è¢«åˆå§‹åŒ–äº†ä¸€æ¬¡ for(int j = 0 ; j &lt; 3 ; j++) cout&lt;&lt; static_add()&lt;&lt;endl; &#125; ä¸‰ã€åˆå§‹åŒ–é›¶å€¼ã€‚ staticä¿®é¥°çš„ï¼ˆå±€éƒ¨/å…¨å±€ï¼‰å˜é‡å’Œå…¨å±€å˜é‡ä¸€æ ·ï¼Œä¸æ˜¾ç¤ºå®šä¹‰æ—¶ä¼šè¿›è¡Œé›¶å€¼åˆå§‹åŒ–ã€‚ é¢å‘å¯¹è±¡è§’åº¦ ä¸€ã€ç±»åªæ‹·è´ä¸€ä»½ã€‚ç±»ä¸­staticä¿®é¥°çš„é™æ€æ•°æ®æˆå‘˜æˆ–é™æ€æˆå‘˜å‡½æ•°æ˜¯å±äºç±»çš„ï¼Œæ‰€æœ‰å¯¹è±¡åªæœ‰ä¸€ä»½æ‹·è´ï¼Œå› æ­¤å®ƒçš„å€¼å¯ä»¥è¢«æ‰€æœ‰å¯¹è±¡æ›´æ–°ï¼Œåœ¨ç±»æœªå®ä¾‹åŒ–å°±å¯ä»¥ä½¿ç”¨ã€‚ ç‰¹åˆ«çš„ï¼Œ staticç±»å¯¹è±¡å¿…é¡»è¦åœ¨ç±»å¤–è¿›è¡Œåˆå§‹åŒ–ï¼Œå› ä¸ºstaticä¿®é¥°çš„å˜é‡å…ˆäºå¯¹è±¡å­˜åœ¨ã€‚ 12345678910111213141516171819202122232425262728#include &lt;iostream&gt;using namespace std;class test&#123;private: static int i;public: static int j;&#125;;int test::i = 0;int test::j = 0;int main()&#123; // 1.ç±»æœªå®ä¾‹åŒ–å°±å¯ä»¥è¢«ä½¿ç”¨ // 2.static åƒæ™®é€šç±»æˆå‘˜å¯ä»¥è¢«ä¿®é¥°ä¸ºprivate // test::i = 1; // è®¿é—®é”™è¯¯ï¼Œç§æœ‰é™æ€å˜é‡ test::j = 1; // è®¿é—®æ­£ç¡®ï¼Œå…¬æœ‰é™æ€å˜é‡ // 3.æ‰€æœ‰å¯¹è±¡åªæœ‰ä¸€ä»½æ‹·è´ï¼Œæ›´æ–°çš„åŒä¸€å—å­˜å‚¨åŒºåŸŸ // ä½†å¦‚æœæ˜¯æ™®é€šç±»æ•°æ®æˆå‘˜ï¼Œä¸‹é¢è¾“å‡ºéƒ½æ˜¯1ã€‚ test a, b ,c ; cout&lt;&lt;++a.j&lt;&lt;endl ; // 2 cout&lt;&lt;++b.j&lt;&lt;endl ; // 3 cout&lt;&lt;++c.j&lt;&lt;endl ; // 4&#125; è¿™ç§ç‰¹æ€§å¯ä»¥å¾ˆå¥½çš„å®ç°ç±»å¤šä¸ªå¯¹è±¡çš„å˜é‡å…±äº«ã€‚ åœ¨åé¢é¢å¯¹å¯¹è±¡ç¬”è®°ä¸­ï¼Œæœ‰æœºä¼šæˆ‘ä»¬è¿˜ä¼šæ›´æ·±å…¥æ¢è®¨ä¸‹staticçš„ç”¨æ³•ï¼Œæ¯”å¦‚ä¸è™šå‡½æ•°çš„å…³ç³»ã€‚ æœ€åï¼Œæ€»ç»“ä¸‹å…¨å±€å˜é‡å’Œé™æ€å˜é‡ã€‚ å…¨å±€å˜é‡/å‡½æ•°å’Œstaticå˜é‡/å‡½æ•°çš„åŒºåˆ«ï¼Ÿ å­˜å‚¨æ–¹å¼ã€‚å…¨å±€å˜é‡/å‡½æ•°å’Œstaticå˜é‡/å‡½æ•°éƒ½æ˜¯é™æ€å­˜å‚¨æ–¹å¼ï¼Œå­˜å‚¨åœ¨å…¨å±€æ•°æ®åŒºã€‚ ä½œç”¨åŸŸã€‚å…¨å±€å˜é‡/å‡½æ•°æ˜¯å¯è§æ€§å…¨å±€æ€§ï¼Œå…¶å®ƒæ–‡ä»¶ä¸­å¯é€šè¿‡externå…³é”®å­—/å¼•ç”¨å¤´æ–‡ä»¶ï¼Œæ¥è¿›è¡Œä½¿ç”¨ï¼Œä½†é™æ€å˜é‡/å‡½æ•°åªèƒ½åœ¨æœ¬ç±»ä½¿ç”¨ã€‚ åˆå§‹åŒ–ã€‚staicå˜é‡/å‡½æ•°åªè¢«åˆå§‹åŒ–ä¸€æ¬¡ï¼Œä½†å…¨å±€å˜é‡åˆ™ä¸ç„¶å¯ä»¥è¢«åˆå§‹åŒ–å¤šæ¬¡ã€‚ é¢å¯¹å¯¹è±¡ã€‚ç±»é™æ€æˆå‘˜ã€å‡½æ•°åªè¢«æ‹·è´ä¸€ä»½ï¼Œä¸ºå…¨å¯¹è±¡å…±äº«ã€‚ 1.4 å¸¸é‡ åœ¨å‰é¢æˆ‘ä»¬è®¤è¯†çš„â€œå˜é‡â€ï¼Œå³æ„ä¸ºâ€œå˜åŒ–å¯è¢«ä¿®æ”¹çš„å€¼â€ï¼Œçµæ´»æ€§å¼ºã€‚ åœ¨C++ä¸­è¿˜å­˜åœ¨â€œå¸¸é‡â€ï¼Œå³â€œä¸å¸Œæœ›è¢«ä¿®æ”¹çš„å€¼â€ï¼Œå®šä¹‰ä»¥åæ— æ³•è¢«ä¿®æ”¹ã€‚ å¦‚ä½•å®šä¹‰ä¸€ä¸ªå¸¸é‡ï¼Ÿ 1.4.1 å®šä¹‰å¸¸é‡ ğŸ–‹ æŠŠå¸¸é‡å®šä¹‰ä¸ºå¤§å†™å­—æ¯å½¢å¼ï¼Œæ˜¯éå¸¸å¥½çš„ç¼–ç¨‹å®è·µã€‚ åœ¨ C++ ä¸­ï¼Œæœ‰ä¸¤ç§ç®€å•çš„å®šä¹‰å¸¸é‡çš„æ–¹å¼ï¼š ä½¿ç”¨ #define é¢„å¤„ç†å™¨ã€‚ 1#define NAME value ä½¿ç”¨ const å…³é”®å­—ã€‚ 1const type NAME = value; ä»¥ä¸‹æ˜¯æ›´å¤šçš„å®ä¾‹ï¼ˆä»¥constå…³é”®å­—å®šä¹‰ä¸ºä¾‹ï¼‰ã€‚è¯·æ³¨æ„ä¸åŒæ•°æ®ç±»å‹å¸¸é‡å®šä¹‰çš„åŒºåˆ«ã€‚ 1.4.2 å¸¸é‡ç±»å‹ æ•´æ•°å¸¸é‡ æ•´æ•°å¸¸é‡å¯ä»¥æ˜¯åè¿›åˆ¶ã€å…«è¿›åˆ¶æˆ–åå…­è¿›åˆ¶çš„å¸¸é‡ã€‚å‰ç¼€æŒ‡å®šåŸºæ•°ï¼š0x æˆ– 0X è¡¨ç¤ºåå…­è¿›åˆ¶ï¼Œ0 è¡¨ç¤ºå…«è¿›åˆ¶ï¼Œä¸å¸¦å‰ç¼€åˆ™é»˜è®¤è¡¨ç¤ºåè¿›åˆ¶ã€‚ æ•´æ•°å¸¸é‡ä¹Ÿå¯ä»¥å¸¦ä¸€ä¸ªåç¼€ï¼Œåç¼€æ˜¯ U å’Œ L çš„ç»„åˆï¼ŒU è¡¨ç¤ºæ— ç¬¦å·æ•´æ•°ï¼ˆunsignedï¼‰ï¼ŒL è¡¨ç¤ºé•¿æ•´æ•°ï¼ˆlongï¼‰ã€‚ 12345678910111213#include &lt;iostream&gt;using namespace std;int main()&#123; const int VALUE = 123; const int VALUE = 123L; // è‡ªåŠ¨è½¬æ¢ä¸ºlongç±»å‹ const int VALUE = 123u; // è‡ªåŠ¨è½¬æ¢ä¸ºunsiged intç±»å‹ const int VALUE = 0x123; // 16è¿›åˆ¶ const int VALUE = 0123; // 8è¿›åˆ¶ return 0;&#125; æµ®ç‚¹å¸¸é‡ æµ®ç‚¹å¸¸é‡ç”±æ•´æ•°éƒ¨åˆ†ã€å°æ•°ç‚¹ã€å°æ•°éƒ¨åˆ†å’ŒæŒ‡æ•°éƒ¨åˆ†ç»„æˆã€‚ ä»¥ä¸‹ä»…ç»™å‡ºå…³é”®ä»£ç ã€‚ 12const float VALUE = 3.14159;const float VALUE = 314159e-5; // ä½¿ç”¨ç§‘å­¦è®¡æ•°æ³• å¸ƒå°”å¸¸é‡ å¸ƒå°”å¸¸é‡å…±æœ‰ä¸¤ä¸ªï¼Œå³trueå’Œfalseã€‚ ä»¥ä¸‹ä»…ç»™å‡ºå…³é”®ä»£ç ã€‚ 12const bool VALUE = true; const bool VALUE = false; æˆ‘ä»¬ä¸åº”æŠŠ true çš„å€¼çœ‹æˆ 1ï¼ŒæŠŠ false çš„å€¼çœ‹æˆ 0ã€‚å³å¦‚ä¸‹å®šä¹‰é€šå¸¸ä¸å»ºè®®è¿›è¡Œï¼š 123// ä¸å»ºè®®çš„åšæ³•const bool VALUE = 1; const bool VALUE = 0; å­—ç¬¦å¸¸é‡ å­—ç¬¦å¸¸é‡æ˜¯æ‹¬åœ¨å•å¼•å·ä¸­ã€‚ å­—ç¬¦å¸¸é‡å¯ä»¥æ˜¯ä¸€ä¸ªæ™®é€šçš„å­—ç¬¦ï¼ˆä¾‹å¦‚ â€˜xâ€™ï¼‰ã€ä¸€ä¸ªè½¬ä¹‰åºåˆ—ï¼ˆä¾‹å¦‚ â€˜\\tâ€™ï¼‰ï¼Œæˆ–ä¸€ä¸ªé€šç”¨çš„å­—ç¬¦ï¼ˆä¾‹å¦‚ â€˜\\u02C0â€™ï¼‰ã€‚ ä»¥ä¸‹ç»™å‡ºå…³é”®ä»£ç è¿›è¡Œç¤ºä¾‹ã€‚ 123const char VALUE = &#x27;X&#x27;; // æ™®é€šå­—ç¬¦const char VALUE = &#x27;\\n&#x27;; // è½¬ä¹‰å­—ç¬¦ï¼Œå³æ¢è¡Œç¬¦const char VALUE = &#x27;\\u02C0&#x27;; // é€šç”¨å­—ç¬¦ï¼Œæ‰“å°è¾“å‡º å­—ç¬¦ä¸²å¸¸é‡ å­—ç¬¦ä¸²å­—é¢å€¼æˆ–å¸¸é‡æ˜¯æ‹¬åœ¨åŒå¼•å· â€œâ€ ä¸­çš„ã€‚ä¸€ä¸ªå­—ç¬¦ä¸²åŒ…å«ç±»ä¼¼äºå­—ç¬¦å¸¸é‡çš„å­—ç¬¦ï¼šæ™®é€šçš„å­—ç¬¦ã€è½¬ä¹‰åºåˆ—å’Œé€šç”¨çš„å­—ç¬¦ã€‚ 123const string VALUE = &quot;\\n&quot;; // è½¬ä¹‰å­—ç¬¦ï¼Œå³æ¢è¡Œç¬¦const string VALUE = &quot;\\u02C0&quot;; // é€šç”¨å­—ç¬¦ï¼Œæ‰“å°è¾“å‡ºconst string VALUE = &quot;hello world&quot;; 1.4.3 const å’Œconstexpr C++11 å¼•å…¥äº†ä¸€ä¸ªå…³é”®å­—å¸¸é‡è¡¨è¾¾å¼constexprï¼Œå®ƒç¡®ä¿å˜é‡å¿…é¡»åœ¨ç¼–è¯‘æ—¶è¢«åˆå§‹åŒ–ï¼Œè€Œconstä¿®é¥°çš„å˜é‡å¯ä»¥åœ¨ç¼–è¯‘æ—¶æˆ–è¿è¡Œæ—¶è¢«åˆå§‹åŒ–ã€‚ æ¢å¥è¯è¯´ï¼Œconstexpr è¯­ä¹‰æ‰æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„å¸¸é‡ï¼Œè¿è¡Œæ—¶ä¸èƒ½åˆå§‹åŒ–ã€‚ 12345678910#include &lt;iostream&gt;using std::cin;int main()&#123; int i = 0; const int j = i + 1; // okï¼Œconstä¿®é¥°çš„å€¼åœ¨è¿è¡Œæ—¶è¢«åˆå§‹åŒ– constexpr int j = i + 1; // errorï¼Œè¿è¡Œæ—¶æ— æ³•åˆå§‹åŒ– return 0;&#125; ä¸Šè¿°ä»£ç ç¼–è¯‘å‡ºé”™ï¼š 1234[root@roy-cpp test]# g++ -std=c++11 test.cpp -o test.outtest.cpp: In function â€˜int main()â€™:test.cpp:1817:25: error: the value of â€˜iâ€™ is not usable in a constant expression constexpr int j = i+1; constexpræœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ constexpr å¯ä»¥æ˜¾ç¤ºåœ°å‘Šè¯‰ç¼–è¯‘å™¨è¡¨ç¤ºå¼æ˜¯ç¡®å®šå€¼ä¸”å¯ä»¥è¢«ä¼˜åŒ–ï¼Œconst ä¿®é¥°çš„ç¼–è¯‘å™¨åªèƒ½éšå¼è·Ÿè¸ªæ˜¯è¿è¡Œæ—¶å¸¸é‡è¿˜æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚ æ¯”å¦‚ä¸Šè¿°ä»£ç ï¼š 123const int i = 0; // ä¿®æ”¹ä¸ºå¸¸é‡const int j = i + 1; // okï¼Œconstä¿®é¥°çš„å€¼åœ¨è¿è¡Œæ—¶è¢«åˆå§‹åŒ–constexpr int j = i + 1; // okï¼Œåœ¨ç¼–è¯‘æ—¶è¿™è¡Œä»£ç è¢«ä¼˜åŒ– ç”±äºiä¹Ÿæ˜¯å¸¸é‡ï¼Œè¡¨è¾¾å¼int j = i + 1æ˜¾ç„¶ä¹Ÿä¸€å®šä¼šæ˜¯å¸¸é‡ã€‚æˆ‘ä»¬ç”±æ­¤å¯ä»¥æ˜¾ç¤ºå£°æ˜ä¸ºconstexprï¼Œè¿™æ ·è¡¨è¾¾å¼ä¼šè¢«ç¼–è¯‘å™¨å¤§èƒ†åœ°åœ¨ç¼–è¯‘æœŸè¿›è¡Œä¼˜åŒ–ï¼Œæé«˜ç¼–è¯‘é€Ÿåº¦ã€‚ åœ¨å¯¹æ€§èƒ½è¦æ±‚è‹›åˆ»çš„é«˜å¹¶å‘åœºæ™¯ï¼Œconstexpræ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ 1.4.4 define &amp; const &amp; å‡½æ•° ğŸŒŸ defineå®å®šä¹‰å’Œconstçš„åŒºåˆ«ï¼Ÿ æ–‡æœ¬æ›¿æ¢ï¼šdefineæ˜¯åœ¨ç¼–è¯‘çš„é¢„å¤„ç†é˜¶æ®µèµ·ä½œç”¨ï¼Œå±äºæ–‡æœ¬æ’å…¥æ›¿æ¢ï¼›è€Œconstæ˜¯åœ¨ç¼–è¯‘ã€è¿è¡Œçš„æ—¶å€™èµ·ä½œç”¨ï¼› ç±»å‹æ£€æŸ¥ï¼šdefineåªåšæ›¿æ¢ï¼Œä¸åšç±»å‹æ£€æŸ¥å’Œè®¡ç®—ï¼Œä¹Ÿä¸æ±‚è§£ï¼Œå®¹æ˜“äº§ç”Ÿé”™è¯¯ï¼›constå¸¸é‡æœ‰æ•°æ®ç±»å‹ï¼Œç¼–è¯‘å™¨å¯ä»¥å¯¹å…¶è¿›è¡Œç±»å‹å®‰å…¨æ£€æŸ¥ï¼› å†…å­˜å ç”¨ï¼šdefineåªæ˜¯å°†å®åç§°è¿›è¡Œæ›¿æ¢ï¼Œåœ¨å†…å­˜ä¸­ä¼šäº§ç”Ÿå¤šåˆ†ç›¸åŒçš„å¤‡ä»½ã€‚conståœ¨ç¨‹åºè¿è¡Œä¸­åªæœ‰ä¸€ä»½å¤‡ä»½ï¼Œä¸”å¯ä»¥æ‰§è¡Œå¸¸é‡æŠ˜å ï¼Œèƒ½å°†å¤æ‚çš„çš„è¡¨è¾¾å¼è®¡ç®—å‡ºç»“æœæ”¾å…¥å¸¸é‡è¡¨ï¼› ç©ºé—´åˆ†é…ï¼šå®å®šä¹‰çš„æ•°æ®æ²¡æœ‰åˆ†é…å†…å­˜ç©ºé—´ï¼Œåªæ˜¯æ’å…¥æ›¿æ¢æ‰ï¼›constå®šä¹‰çš„å˜é‡åªæ˜¯å€¼ä¸èƒ½æ”¹å˜ï¼Œä½†è¦åˆ†é…å†…å­˜ç©ºé—´ã€‚ defineå®å®šä¹‰å’Œå‡½æ•°çš„åŒºåˆ«ï¼Ÿ æ–‡æœ¬æ›¿æ¢ï¼šdefineæ˜¯åœ¨ç¼–è¯‘çš„é¢„å¤„ç†é˜¶æ®µèµ·ä½œç”¨ï¼Œå±äºæ–‡æœ¬æ’å…¥æ›¿æ¢ï¼›å‡½æ•°è°ƒç”¨åœ¨è¿è¡Œæ—¶éœ€è¦è·³è½¬åˆ°å…·ä½“è°ƒç”¨å‡½æ•°ï¼› ç±»å‹æ£€æŸ¥ï¼šdefineåªåšæ›¿æ¢ï¼Œä¸åšç±»å‹æ£€æŸ¥å’Œè®¡ç®—ï¼Œä¹Ÿä¸æ±‚è§£ï¼Œå®¹æ˜“äº§ç”Ÿé”™è¯¯ï¼›å‡½æ•°å‚æ•°å…·æœ‰ç±»å‹ï¼Œéœ€è¦æ£€æŸ¥ç±»å‹ï¼› å…¶å®ƒï¼šå‡½æ•°æœ‰è¿”å›å€¼ï¼Œåœ¨æœ€åä¸ç”¨åŠ åˆ†å·ã€‚ 1.5 è¿ç®—ç¬¦ è¿ç®—ç¬¦æ˜¯ä¸€ç§å‘Šè¯‰ç¼–è¯‘å™¨æ‰§è¡Œç‰¹å®šçš„æ•°å­¦æˆ–é€»è¾‘æ“ä½œçš„ç¬¦å·ã€‚ é™¤äº†å¸¸è§çš„ï¼šç®—æœ¯è¿ç®—ç¬¦ã€å…³ç³»è¿ç®—ç¬¦ã€é€»è¾‘è¿ç®—ç¬¦ã€ä½è¿ç®—ç¬¦ã€èµ‹å€¼è¿ç®—ç¬¦å¤–ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å…¶å®ƒçš„ä¸€äº›é‡è¦è¿ç®—ç¬¦ã€‚ è¿ç®—ç¬¦ æè¿° å¤‡æ³¨ sizeof sizeof è¿ç®—ç¬¦ä¸€ä¸ªå¯¹è±¡æˆ–ç±»å‹æ‰€å çš„å†…å­˜å­—èŠ‚æ•°ã€‚ é‡è¦ï¼Œ4.1.3èŠ‚ç»™å‡ºå…·ä½“ç¤ºä¾‹ Condition ? X : Y æ¡ä»¶è¿ç®—ç¬¦ã€‚å¦‚æœ Condition ä¸ºçœŸ ? åˆ™å€¼ä¸º X : å¦åˆ™å€¼ä¸º Yã€‚ .ã€ -&gt; æˆå‘˜è¿ç®—ç¬¦ç”¨äºå¼•ç”¨ç±»ã€ç»“æ„å’Œå…±ç”¨ä½“çš„æˆå‘˜ã€‚ Cast å¼ºåˆ¶è½¬æ¢è¿ç®—ç¬¦æŠŠä¸€ç§æ•°æ®ç±»å‹è½¬æ¢ä¸ºå¦ä¸€ç§æ•°æ®ç±»å‹ã€‚ 4.XèŠ‚è¯¦è¿° &amp; å–åœ°å€è¿ç®—ç¬¦ &amp; ï¼Œå¯è·å–å˜é‡çš„åœ°å€ã€‚ä¾‹å¦‚ ï¼Œint var =3; int *ptr=&amp;varï¼Œè·å–å˜é‡varçš„åœ°å€ã€‚ * é—´æ¥å¯»å€è¿ç®—ç¬¦ *ï¼Œ è·å–æŒ‡å®šåœ°å€çš„å˜é‡çš„å€¼ã€‚ä¾‹å¦‚ï¼Œint val = *ptr ,æ­¤æ—¶var=3ã€‚ 1.5.1 è¿ç®—ç¬¦æ±‡æ€» è¯¥å°èŠ‚è¯¦ç»†åˆ—å‡ºå„ç±»è¿ç®—ç¬¦ï¼Œä»…ä¸ºæŸ¥è¡¨ç”¨ã€‚è¯»è€…å¯ç•¥è¿‡ã€‚ éç‰¹åˆ«è¯´æ˜ï¼Œä¸‹ä¾‹ä¸­å‡è®¾å˜é‡ A çš„å€¼ä¸º 10ï¼Œå˜é‡ B çš„å€¼ä¸º 20ã€‚ ç®—æœ¯è¿ç®—ç¬¦å…³ç³»è¿ç®—ç¬¦é€»è¾‘è¿ç®—ç¬¦ä½è¿ç®—ç¬¦èµ‹å€¼è¿ç®—ç¬¦ ç®—æœ¯è¿ç®—ç¬¦ è¿ç®—ç¬¦ æè¿° å®ä¾‹ æŠŠä¸¤ä¸ªæ“ä½œæ•°ç›¸åŠ  A + B å°†å¾—åˆ° 30 - ä»ç¬¬ä¸€ä¸ªæ“ä½œæ•°ä¸­å‡å»ç¬¬äºŒä¸ªæ“ä½œæ•° A - B å°†å¾—åˆ° -10 * æŠŠä¸¤ä¸ªæ“ä½œæ•°ç›¸ä¹˜ A * B å°†å¾—åˆ° 200 / åˆ†å­é™¤ä»¥åˆ†æ¯ B / A å°†å¾—åˆ° 2 % å–æ¨¡è¿ç®—ç¬¦ï¼Œæ•´é™¤åçš„ä½™æ•° B % A å°†å¾—åˆ° 0 ++ è‡ªå¢è¿ç®—ç¬¦ï¼Œæ•´æ•°å€¼å¢åŠ  1 A++ å°†å¾—åˆ° 11 â€“ è‡ªå‡è¿ç®—ç¬¦ï¼Œæ•´æ•°å€¼å‡å°‘ 1 A-- å°†å¾—åˆ° 9 å…³ç³»è¿ç®—ç¬¦ è¿ç®—ç¬¦ æè¿° å®ä¾‹ == æ£€æŸ¥ä¸¤ä¸ªæ“ä½œæ•°çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰åˆ™æ¡ä»¶ä¸ºçœŸã€‚ (A == B) ä¸ä¸ºçœŸã€‚ != æ£€æŸ¥ä¸¤ä¸ªæ“ä½œæ•°çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœä¸ç›¸ç­‰åˆ™æ¡ä»¶ä¸ºçœŸã€‚ (A != B) ä¸ºçœŸã€‚ &gt; æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å¤§äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚ (A &gt; B) ä¸ä¸ºçœŸã€‚ &lt; æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å°äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚ (A &lt; B) ä¸ºçœŸã€‚ &gt;= æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å¤§äºæˆ–ç­‰äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚ (A &gt;= B) ä¸ä¸ºçœŸã€‚ &lt;= æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å°äºæˆ–ç­‰äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚ (A &lt;= B) ä¸ºçœŸã€‚ é€»è¾‘è¿ç®—ç¬¦ å‡è®¾å˜é‡ A çš„å€¼ä¸º 1ï¼Œå˜é‡ B çš„å€¼ä¸º 0ã€‚ è¿ç®—ç¬¦ æè¿° å®ä¾‹ &amp;&amp; ç§°ä¸ºé€»è¾‘ä¸è¿ç®—ç¬¦ã€‚å¦‚æœä¸¤ä¸ªæ“ä½œæ•°éƒ½éé›¶ï¼Œåˆ™æ¡ä»¶ä¸ºçœŸã€‚ (A &amp;&amp; B) ä¸ºå‡ã€‚ || ç§°ä¸ºé€»è¾‘æˆ–è¿ç®—ç¬¦ã€‚å¦‚æœä¸¤ä¸ªæ“ä½œæ•°ä¸­æœ‰ä»»æ„ä¸€ä¸ªéé›¶ï¼Œåˆ™æ¡ä»¶ä¸ºçœŸã€‚ (A || B) ä¸ºçœŸã€‚ ! ç§°ä¸ºé€»è¾‘éè¿ç®—ç¬¦ã€‚ç”¨æ¥é€†è½¬æ“ä½œæ•°çš„é€»è¾‘çŠ¶æ€ã€‚å¦‚æœæ¡ä»¶ä¸ºçœŸåˆ™é€»è¾‘éè¿ç®—ç¬¦å°†ä½¿å…¶ä¸ºå‡ã€‚ !(A &amp;&amp; B) ä¸ºçœŸã€‚ ä½è¿ç®—ç¬¦ p q p &amp; q p | q p ^ q 0 0 0 0 0 0 1 0 1 1 1 1 1 1 0 1 0 0 1 1 èµ‹å€¼è¿ç®—ç¬¦ è¿ç®—ç¬¦ æè¿° å®ä¾‹ = ç®€å•çš„èµ‹å€¼è¿ç®—ç¬¦ï¼ŒæŠŠå³è¾¹æ“ä½œæ•°çš„å€¼èµ‹ç»™å·¦è¾¹æ“ä½œæ•° C = A + B å°†æŠŠ A + B çš„å€¼èµ‹ç»™ C += åŠ ä¸”èµ‹å€¼è¿ç®—ç¬¦ï¼ŒæŠŠå³è¾¹æ“ä½œæ•°åŠ ä¸Šå·¦è¾¹æ“ä½œæ•°çš„ç»“æœèµ‹å€¼ç»™å·¦è¾¹æ“ä½œæ•° C += A ç›¸å½“äº C = C + A -= å‡ä¸”èµ‹å€¼è¿ç®—ç¬¦ï¼ŒæŠŠå·¦è¾¹æ“ä½œæ•°å‡å»å³è¾¹æ“ä½œæ•°çš„ç»“æœèµ‹å€¼ç»™å·¦è¾¹æ“ä½œæ•° C -= A ç›¸å½“äº C = C - A *= ä¹˜ä¸”èµ‹å€¼è¿ç®—ç¬¦ï¼ŒæŠŠå³è¾¹æ“ä½œæ•°ä¹˜ä»¥å·¦è¾¹æ“ä½œæ•°çš„ç»“æœèµ‹å€¼ç»™å·¦è¾¹æ“ä½œæ•° C *= A ç›¸å½“äº C = C * A /= é™¤ä¸”èµ‹å€¼è¿ç®—ç¬¦ï¼ŒæŠŠå·¦è¾¹æ“ä½œæ•°é™¤ä»¥å³è¾¹æ“ä½œæ•°çš„ç»“æœèµ‹å€¼ç»™å·¦è¾¹æ“ä½œæ•° C /= A ç›¸å½“äº C = C / A %= æ±‚æ¨¡ä¸”èµ‹å€¼è¿ç®—ç¬¦ï¼Œæ±‚ä¸¤ä¸ªæ“ä½œæ•°çš„æ¨¡èµ‹å€¼ç»™å·¦è¾¹æ“ä½œæ•° C %= A ç›¸å½“äº C = C % A &lt;&lt;= å·¦ç§»ä¸”èµ‹å€¼è¿ç®—ç¬¦ C &lt;&lt;= 2 ç­‰åŒäº C = C &lt;&lt; 2 &gt;&gt;= å³ç§»ä¸”èµ‹å€¼è¿ç®—ç¬¦ C &gt;&gt;= 2 ç­‰åŒäº C = C &gt;&gt; 2 &amp;= æŒ‰ä½ä¸ä¸”èµ‹å€¼è¿ç®—ç¬¦ C &amp;= 2 ç­‰åŒäº C = C &amp; 2 ^= æŒ‰ä½å¼‚æˆ–ä¸”èµ‹å€¼è¿ç®—ç¬¦ C ^= 2 ç­‰åŒäº C = C ^ 2 |= æŒ‰ä½æˆ–ä¸”èµ‹å€¼è¿ç®—ç¬¦ C |= 2 ç­‰åŒäº C = C | 2 1.5.2 è¿ç®—ç¬¦ä¼˜å…ˆçº§ ä¸åŒè¿ç®—ç¬¦åœ¨ç¼–è¯‘æ—¶ä¼˜å…ˆçº§æ˜¯ä¸åŒçš„ã€‚ ä¾‹å¦‚ x = 7 + 3 * 2ï¼Œåœ¨è¿™é‡Œï¼Œx è¢«èµ‹å€¼ä¸º 13ï¼Œè€Œä¸æ˜¯ 20ï¼Œå› ä¸ºè¿ç®—ç¬¦ * å…·æœ‰æ¯” + æ›´é«˜çš„ä¼˜å…ˆçº§ï¼Œæ‰€ä»¥é¦–å…ˆè®¡ç®—ä¹˜æ³• 3*2ï¼Œç„¶åå†åŠ ä¸Š 7ã€‚ åˆ—å‡ºæ‰€æœ‰ä¼˜å…ˆçº§æ¯”è¾ƒï¼Œä¾›éœ€è¦æ—¶æŸ¥è¡¨æ‰€ç”¨ã€‚è¯»è€…ä¸åº”è¿‡åˆ†å…³æ³¨ä¸‹é¢ç»†èŠ‚ã€‚ ç±»åˆ« è¿ç®—ç¬¦ ç»“åˆæ€§ åç¼€ () [] -&gt; . ++ - - ä»å·¦åˆ°å³ ä¸€å…ƒ + - ! ~ ++ - - (type)* &amp; sizeof ä»å³åˆ°å·¦ ä¹˜é™¤ * / % ä»å·¦åˆ°å³ åŠ å‡ + - ä»å·¦åˆ°å³ ç§»ä½ &lt;&lt; &gt;&gt; ä»å·¦åˆ°å³ å…³ç³» &lt; &lt;= &gt; &gt;= ä»å·¦åˆ°å³ ç›¸ç­‰ == != ä»å·¦åˆ°å³ ä½ä¸ AND &amp; ä»å·¦åˆ°å³ ä½å¼‚æˆ– XOR ^ ä»å·¦åˆ°å³ ä½æˆ– OR | ä»å·¦åˆ°å³ é€»è¾‘ä¸ AND &amp;&amp; ä»å·¦åˆ°å³ é€»è¾‘æˆ– OR || ä»å·¦åˆ°å³ æ¡ä»¶ ?: ä»å³åˆ°å·¦ èµ‹å€¼ = += -= *= /= %=&gt;&gt;= &lt;&lt;= &amp;= ^= |= ä»å³åˆ°å·¦ é€—å· , ä»å·¦åˆ°å³ 1.6 å¾ªç¯ å¾ªç¯è¯­å¥å…è®¸æˆ‘ä»¬å¤šæ¬¡æ‰§è¡Œä¸€ä¸ªè¯­å¥æˆ–è¯­å¥ç»„ï¼Œä¸‹é¢æ˜¯å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä¸­å¾ªç¯è¯­å¥çš„ä¸€èˆ¬å½¢å¼ï¼š 1.6.1 å¿«é€Ÿå…¥é—¨ C++ ç¼–ç¨‹è¯­è¨€æä¾›äº†ä»¥ä¸‹å‡ ç§å¾ªç¯ç±»å‹ã€‚ç‚¹å‡»é“¾æ¥æŸ¥çœ‹æ¯ä¸ªç±»å‹çš„ç»†èŠ‚ã€‚ å¾ªç¯ç±»å‹ æè¿° while å¾ªç¯ å½“ç»™å®šæ¡ä»¶ä¸ºçœŸæ—¶ï¼Œé‡å¤è¯­å¥æˆ–è¯­å¥ç»„ã€‚å®ƒä¼šåœ¨æ‰§è¡Œå¾ªç¯ä¸»ä½“ä¹‹å‰æµ‹è¯•æ¡ä»¶ã€‚ for å¾ªç¯ å¤šæ¬¡æ‰§è¡Œä¸€ä¸ªè¯­å¥åºåˆ—ï¼Œç®€åŒ–ç®¡ç†å¾ªç¯å˜é‡çš„ä»£ç ã€‚ doâ€¦while å¾ªç¯ é™¤äº†å®ƒæ˜¯åœ¨å¾ªç¯ä¸»ä½“ç»“å°¾æµ‹è¯•æ¡ä»¶å¤–ï¼Œå…¶ä»–ä¸ while è¯­å¥ç±»ä¼¼ã€‚ åµŒå¥—å¾ªç¯ å¯ä»¥åœ¨ whileã€for æˆ– doâ€¦while å¾ªç¯å†…ä½¿ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªå¾ªç¯ã€‚ å¾ªç¯æ§åˆ¶è¯­å¥æ›´æ”¹æ‰§è¡Œçš„æ­£å¸¸åºåˆ—ã€‚ æ§åˆ¶è¯­å¥ æè¿° break è¯­å¥ ç»ˆæ­¢ loop æˆ– switch è¯­å¥ï¼Œç¨‹åºæµå°†ç»§ç»­æ‰§è¡Œç´§æ¥ç€ loop æˆ– switch çš„ä¸‹ä¸€æ¡è¯­å¥ã€‚ continue è¯­å¥ å¼•èµ·å¾ªç¯è·³è¿‡ä¸»ä½“çš„å‰©ä½™éƒ¨åˆ†ï¼Œç«‹å³é‡æ–°å¼€å§‹æµ‹è¯•æ¡ä»¶ã€‚ goto è¯­å¥ å°†æ§åˆ¶è½¬ç§»åˆ°è¢«æ ‡è®°çš„è¯­å¥ã€‚ä½†æ˜¯ä¸å»ºè®®åœ¨ç¨‹åºä¸­ä½¿ç”¨ goto è¯­å¥ã€‚ 1.6.2 å¾ªç¯åˆ¤æ–­ C++ ç¼–ç¨‹è¯­è¨€æä¾›äº†ä»¥ä¸‹ç±»å‹çš„åˆ¤æ–­è¯­å¥ã€‚ è¯­å¥ æè¿° if è¯­å¥ ä¸€ä¸ª if è¯­å¥ ç”±ä¸€ä¸ªå¸ƒå°”è¡¨è¾¾å¼åè·Ÿä¸€ä¸ªæˆ–å¤šä¸ªè¯­å¥ç»„æˆã€‚ ifâ€¦else è¯­å¥ ä¸€ä¸ª if è¯­å¥ åå¯è·Ÿä¸€ä¸ªå¯é€‰çš„ else è¯­å¥ï¼Œelse è¯­å¥åœ¨å¸ƒå°”è¡¨è¾¾å¼ä¸ºå‡æ—¶æ‰§è¡Œã€‚ åµŒå¥— if è¯­å¥ æ‚¨å¯ä»¥åœ¨ä¸€ä¸ª if æˆ– else if è¯­å¥å†…ä½¿ç”¨å¦ä¸€ä¸ª if æˆ– else if è¯­å¥ã€‚ switch è¯­å¥ ä¸€ä¸ª switch è¯­å¥å…è®¸æµ‹è¯•ä¸€ä¸ªå˜é‡ç­‰äºå¤šä¸ªå€¼æ—¶çš„æƒ…å†µã€‚ åµŒå¥— switch è¯­å¥ æ‚¨å¯ä»¥åœ¨ä¸€ä¸ª switch è¯­å¥å†…ä½¿ç”¨å¦ä¸€ä¸ª switch è¯­å¥ã€‚ 1.6.3 ?: è¿ç®—ç¬¦ æ¡ä»¶è¿ç®—ç¬¦åœ¨å®é™…ç¼–ç ä¸­ï¼Œç”¨æ¥æ›¿ä»£ ifâ€¦else è¯­å¥ã€‚å› ä¸ºå¾ˆå¤šæ—¶å€™å¯ä»¥ç®€åŒ–ä»£ç ï¼Œç”¨çš„æ¯”è¾ƒå¤šã€‚ 1Exp1 ? Exp2 : Exp3; 1.6.4 æ— é™å¾ªç¯ å¦‚æœæ¡ä»¶æ°¸è¿œä¸ä¸ºå‡æˆ–ä¸å­˜åœ¨æ—¶ï¼Œåˆ™å¾ªç¯å°†å˜æˆæ— é™å¾ªç¯ã€‚ 1234567891011#include &lt;iostream&gt;using namespace std; int main ()&#123; for( ; ; ) &#123; printf(&quot;This loop will run forever.\\n&quot;); &#125; return 0;&#125; æŒ‰ Ctrl + C é”®å¯ä»¥ç»ˆæ­¢ä¸€ä¸ªæ— é™å¾ªç¯ã€‚ 1.7 æ•°ç»„ å­˜å‚¨ä¸€ä¸ªç”±ç›¸åŒç±»å‹å…ƒç´ æ„æˆçš„é¡ºåºé›†åˆï¼Œç§°ä¹‹ä¸ºæ•°ç»„ã€‚ 1.7.1 é™æ€æ•°ç»„ é™æ€æ•°ç»„å£°æ˜ä¸”æœªåˆå§‹åŒ–æ—¶å¿…é¡»ç¡®å®šæ•°ç»„å¤§å°ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ åˆå§‹åŒ–ï¼šå¯ä»¥ä½¿ç”¨åˆ—è¡¨&#123;...&#125; å¿«é€Ÿèµ‹å€¼ï¼Œä¸å¯ä½¿ç”¨new int[]&#123;...&#125;èµ‹å€¼ï¼ˆè¿™æ˜¯æŒ‡é’ˆåˆ†é…ç©ºé—´çš„æ–¹å¼ï¼‰ 123456789101112131415161718192021222324#include&lt;iostream&gt;using namespace std;#define LEN 3int main()&#123; // é™æ€æ•°ç»„ // ä¸€ç»´ // ã€å£°æ˜ã€‘ int array1[LEN] ; // æœªåˆå§‹åŒ–ï¼ŒæŒ‡å®šå¤§å°=3 // ã€èµ‹å€¼ã€‘ int array2[] = &#123;1,2,3&#125;; // å·²åˆå§‹åŒ–ï¼Œç¼–è¯‘å™¨å¯æ¨æ–­å¤§å°=3 // int array2[] = new int[]&#123;1,2,3&#125;; // å‡ºé”™ï¼Œè¿™æ˜¯åŠ¨æ€æ•°ç»„èµ‹å€¼çš„æ–¹å¼ int array3[LEN]&#123;1,2,3&#125;; // C++11æ”¯æŒä¸ç”¨=å·è¿›è¡Œèµ‹å€¼ // äºŒç»´ // ã€å£°æ˜ã€‘ int array4[LEN][LEN]; // ã€èµ‹å€¼ã€‘ array4[LEN][LEN] = &#123;&#123;1,2,3&#125;, &#123;4,5,6&#125;, &#123;7,8,9&#125;&#125;; return 0;&#125; 1.7.2 åŠ¨æ€æ•°ç»„ å£°æ˜é™æ€æ•°ç»„å¾ˆç®€å•ï¼Œä½†å¾ˆå¤šæ—¶å€™æˆ‘ä»¬æ›´å¸Œæœ›ç”³è¯·ä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼ˆæ¯”å¦‚å£°æ˜æ—¶å¹¶ä¸ç¡®å®šæ•°ç»„çš„å†…å®¹ï¼‰ã€‚ åŠ¨æ€æ•°ç»„å¯ä»¥å£°æ˜æ—¶ä¸æŒ‡å®šå¤§å° ï¼Œä½†æ˜¯ä½¿ç”¨å‰ä¸€å®šè¦åˆ†é…ç©ºé—´ï¼ˆå¯ä¸åˆå§‹åŒ–ï¼Œä¼šé»˜è®¤åˆå§‹åŒ–ï¼‰ã€‚ åˆå§‹åŒ–ï¼šå¯ä½¿ç”¨new int[]&#123;...&#125;èµ‹å€¼ï¼Œä¸å¯ä»¥ä½¿ç”¨åˆ—è¡¨&#123;...&#125; å¿«é€Ÿèµ‹å€¼ åˆ é™¤ï¼šæ³¨æ„æ˜¯ä½¿ç”¨delete[] ï¼Œä¸æ˜¯delete 1234567891011121314151617181920212223242526272829303132333435363738394041424344int main()&#123; // 1.ä¸€ç»´ // ã€å£°æ˜ã€‘ int* array1; // åŠ¨æ€æ•°ç»„å¯ä¸å£°æ˜å¤§å° // array1[1] = 2; // ç¼–è¯‘å‡ºé”™ï¼Œåˆ†é…ç©ºé—´å‰å°±ä½¿ç”¨ int* array2 = new int[LEN]; // ã€èµ‹å€¼ã€‘ // C++11æ”¯æŒå¿«é€Ÿä¸ºåŠ¨æ€æ•°ç»„èµ‹å€¼ // è€Œä¸æ˜¯Cé£æ ¼é‚£æ ·å‚»ä¹ä¹forå¾ªç¯æŒ¨ä¸ªèµ‹å€¼ int* array3 = new int[LEN]&#123;1,2,3&#125;; // ä½†ä¸‹åˆ—è¿™ç§é™æ€æ•°ç»„èµ‹å€¼æ–¹å¼æ˜¯é”™è¯¯çš„ // int* array3 = &#123;1,2,3&#125;; // ç¼–è¯‘å‡ºé”™ï¼Œrequires one element in initialize // ã€é‡Šæ”¾ã€‘ delete[] array3; // 2.äºŒç»´ // ã€å£°æ˜ã€‘ int** array4; // ã€èµ‹å€¼ã€‘ /* // ä¸èƒ½ç”¨ä¸‹é¢åˆå§‹åŒ–æ–¹æ³• int** array5 = new int[LEN] &#123;&#123;1,2,3&#125;, &#123;4,5,6&#125;, &#123;7,8,9&#125;&#125;; ; */ int** array5 = new int*[LEN] &#123; new int[LEN]&#123;1,2,3&#125;, new int[LEN]&#123;3,4,5&#125;, new int[LEN]&#123;4,5,6&#125; &#125;; // æˆ–è€… int** array5 = new int*[LEN]; for(int i = 0; i &lt; LEN; i++) array5[i] = new int[LEN]&#123;(i+1)*1,(i+2)*1,(i+3)*1&#125;; // ã€é‡Šæ”¾ã€‘ for(int i = 0; i &lt; LEN; i++) delete[] array5[i]; return 0;&#125; 1.7.3 æ•°ç»„é»˜è®¤åˆå§‹åŒ– åœ¨å‰é¢ï¼Œæˆ‘ä»¬äº†è§£åˆ°äº†å±€éƒ¨å˜é‡/å…¨å±€å˜é‡/é™æ€å˜é‡/ç±»æˆå‘˜çš„é»˜è®¤åˆå§‹åŒ–å€¼ã€‚æ•°ç»„çš„é»˜è®¤åˆå§‹åŒ–å€¼ä¼šä»€ä¹ˆå‘¢ï¼Ÿ ç»è¿‡å®éªŒï¼Œæ•°ç»„é»˜è®¤åˆå§‹åŒ–è§„åˆ™ï¼ŒåŸºæœ¬ç­‰åŒå±€éƒ¨å˜é‡/å…¨å±€å˜é‡/é™æ€å˜é‡/ç±»æˆå‘˜çš„è§„åˆ™ã€‚åªä¸è¿‡æ•°ç»„æ˜¯ä»¥é›†åˆå½¢å¼å‡ºç°çš„ã€‚ int/float/double bool string/char æŒ‡é’ˆ å¼•ç”¨ å±€éƒ¨å˜é‡ é‡å€¼ 0 &quot;&quot;ï¼Œ'' é‡å€¼ å‡ºé”™ å…¨å±€å˜é‡/é™æ€å˜é‡ 0 0 &quot;&quot;ï¼Œ'' 0 å‡ºé”™ ç±»æˆå‘˜ é‡å€¼ é‡å€¼ &quot;&quot;ï¼Œé‡å€¼ &quot;&quot;/é‡å€¼ å‡ºé”™ å±€éƒ¨æ•°ç»„ï¼ˆå…¶å®ƒåŒï¼‰ é‡å€¼ é‡å€¼ &quot;&quot;ï¼Œ'' é‡å€¼ å‡ºé”™ ä½†æ˜¯å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¸Œæœ›ç»™ï¼ˆå±€éƒ¨ï¼‰æ•°ç»„è¿›è¡Œåˆå§‹åŒ–ï¼ˆæ¯”å¦‚0å€¼ï¼‰ã€‚å¦‚æœæ•°ç»„å¾ˆé•¿ï¼Œä½ è‚¯å®šä¸å¸Œæœ›é€ä¸ªè¿›è¡Œåˆå§‹åŒ–åŒ–ï¼Œè™½ç„¶å¯ä»¥ç”¨å¾ªç¯ä½†çœ‹èµ·æ¥ä¹Ÿä¸é‚£ä¹ˆèªæ˜çš„æ ·å­ã€‚ è®©æˆ‘ä»¬çœ‹çœ‹åˆå§‹åŒ–æ•°ç»„çš„æŠ€å·§ã€‚ 1234567891011121314151617181920#include&lt;iostream&gt;using namespace std;#define LEN 3int main()&#123; // å¿«é€Ÿ0å€¼åˆå§‹åŒ–ï¼Œå…¶å®ƒç±»å‹åŒç†ï¼Œå¦‚flaot/double/bool // 1.é™æ€æ•°ç»„ï¼š&#123;0&#125; int array1[LEN] = &#123;0&#125;; // 0,0,0 int array2[LEN] = &#123;1&#125;; // 1,0,0ï¼Œå¦‚æœç¬¬ä¸€ä¸ªæ•°å­—ä¸æ˜¯0ï¼Œåˆ™åªæœ‰å…¶å®ƒæ˜¯0 // 2.åŠ¨æ€æ•°ç»„ int* array3 = new int[LEN](); // 0,0,0,è®°å¾—æŒ‡å®šé•¿åº¦ // 3.æ›´é€šç”¨çš„åšæ³•: std::fill() // åˆ†åˆ«æŒ‡å®šï¼šæ•°ç»„èµ·å§‹åœ°å€ï¼Œåœ°å€ç»ˆåœ°å€ï¼Œè¦å¡«å……çš„å€¼ fill(array1,array1+LEN,0); return 0;&#125; 1.7.4 æ•°ç»„ä¸æ˜¯æŒ‡é’ˆ åœ¨å‰é¢æ•°ç»„å’ŒåŠ¨æ€æ•°ç»„ï¼ˆæŒ‡é’ˆæ–¹å¼ï¼‰ä¸åŒåˆå§‹åŒ–æ–¹å¼ï¼ˆæŒ‡é’ˆéœ€è¦newåˆ†é…ï¼‰ï¼Œä½ ä¹Ÿåº”è¯¥éšéšçº¦çº¦æ„Ÿå—åˆ°æŒ‡é’ˆå’Œæ•°ç»„æ˜¯ä¸¤ä¸ªä¸åŒçš„ä¸œè¥¿ã€‚è™½ç„¶å¾ˆå¤šæ—¶å€™æ•°ç»„ä¼šé€€åŒ–ä¸ºæŒ‡é’ˆä½¿ç”¨ï¼Œä½†å°†æ•°ç»„è§†ä¸ºæŒ‡é’ˆè¿™æ˜¯ä¸å¯¹çš„ã€‚ æ¯”å¦‚ï¼Œé™æ€æ•°ç»„ä¸€æ—¦åˆå§‹åŒ–æ˜¯ä¸èƒ½é‡æ–°èµ‹å€¼çš„ï¼Œä½†æ˜¯åŠ¨æ€æ•°ç»„å¯ä»¥ã€‚ 123456int arr1[3] = &#123;1,2,3&#125;;int arr3[3] = &#123;4,5,6&#125;;arr1 = arr3; // errorint* arr2 = new int[3]&#123;1,2,3&#125;; arr2 = new int[4]&#123;1,2,3,4&#125;; // ok é‚£ä¹ˆï¼Œæ•°ç»„å’ŒæŒ‡é’ˆç©¶ç«Ÿæœ‰å“ªäº›ä¸åŒï¼Ÿå®ƒä»€ä¹ˆæ—¶å€™é€€åŒ–ä¸ºæŒ‡é’ˆï¼Ÿæ€ä¹ˆå»æ›´æ·±å±‚æ¬¡çš„ç†è§£ï¼Ÿ è¿™äº›ä¸œè¥¿ä¸é€‚åˆæ”¾åœ¨è¿™é‡Œè¯¦ç»†è®²è§£ï¼Œå› ä¸ºä½ è¿˜ä¸å…·å¤‡å¾ˆå¤šç›¸å…³çŸ¥è¯†ã€‚è¯·å‚è€ƒï¼š2.1.3#æŒ‡é’ˆå’Œæ•°ç»„ã€‚ 1.7.5 æ•°ç»„å°ç»“ğŸŒŸ ä¸‹é¢æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹æ•°ç»„å¸¸ç”¨å£°æ˜ã€åˆå§‹åŒ–æ–¹å¼ã€‚ ã€æ³¨1ã€‘ä»…ä»¥ä¸€ç»´æ•°ç»„ä¸ºä¾‹ã€‚ ã€æ³¨2ã€‘åŠ¨æ€æ•°ç»„è®°å¾—ä½¿ç”¨delete[]é‡Šæ”¾ç©ºé—´ã€‚ å£°æ˜ æ˜¾ç¤ºåˆå§‹åŒ– å¿«é€Ÿåˆå§‹åŒ– é™æ€æ•°ç»„ int arr[LEN]; int arr[LEN]={â€¦};int arr[]={â€¦};int arr[]{â€¦}; int arr[LEN]={0};fill(arr,arr+LEN,0); åŠ¨æ€æ•°ç»„ int* arr;int* arr = new int[LEN]; int arr = new int[LEN]{â€¦}* int* arr = new int[LEN]();fill(arr,arr+LEN,0); 1.8 å­—ç¬¦ä¸² 1.8.1 Cé£æ ¼å­—ç¬¦ä¸² åœ¨Cä¸­æˆ‘ä»¬ä½¿ç”¨å­—ç¬¦ä¸²å…¶å®æ˜¯å­—ç¬¦æ•°ç»„ã€‚ ç”¨å­—ç¬¦æ•°ç»„å­˜æ”¾ ç”¨å­—ç¬¦æŒ‡é’ˆç®¡ç†ä¸² char str1[ ]=â€œroyhuangâ€; char *str2=â€œhwhâ€; charå­—ç¬¦æ•°ç»„ å®šä¹‰ä¸€ä¸ªC é£æ ¼çš„å­—ç¬¦ä¸²ï¼š 1char my_name[] = &quot;royhuang&quot; ; çŒœçŒœmy_nameçš„é•¿åº¦ï¼Ÿ8ï¼Ÿä¸ï¼Œæ˜¯9ã€‚å› ä¸ºCé£æ ¼çš„å­—ç¬¦ä¸²è¿˜ä¼šè‡ªåŠ¨åœ¨æœ«å°¾æ·»åŠ ä¸€ä¸ªç»ˆæ­¢ç¬¦ï¼Œå³ï¼šroyhuang\\0 ã€‚ 1sizeof(my_name)/sizeof(my_name[0]); // 9 strlen å¯ä»¥å¿½ç•¥ç©ºå­—ç¬¦ï¼š 1strlen(my_name); // 8 Cé£æ ¼å­—ç¬¦æ•°ç»„ï¼Œæ— æ³•äºŒæ¬¡é‡æ–°èµ‹å€¼ï¼Œä½†æ•°ç»„å­˜å‚¨çš„å†…å®¹å¯ä»¥è¢«ä¿®æ”¹ã€‚ ä¸‹é¢ä¸¾ä¾‹è¯´æ˜ã€‚ æ•°ç»„ä¸èƒ½é‡æ–°èµ‹å€¼ï¼š 1my_name = &quot;hwh&quot;; // errorï¼Œæ— æ³•è¢«ä¿®æ”¹ æ•°ç»„å­˜å‚¨çš„å†…å®¹å¯ä»¥è¢«ä¿®æ”¹ï¼š 12my_name[0]=&#x27;z&#x27;cout&lt;&lt;my_name; // zoyhuang æŒ‡é’ˆæ•°ç»„ å®šä¹‰ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼š 1char* my_name = &quot;royhuang&quot; ; å¦‚æœä½ å¯¹æŒ‡é’ˆæœ‰æ‰€äº†è§£ï¼Œä¸€å®šä¼šçº³é—·ï¼šæŒ‡é’ˆéƒ½æ²¡ç»™å®ƒåˆ†é…æŒ‡å‘çš„ç©ºé—´ï¼Œæ€ä¹ˆå°±å¯ä»¥å­˜å…¥charæ•°ç»„ï¼Ÿ ä¸‹é¢æ‰ç¬¦åˆæˆ‘ä»¬ä¹‹å‰å¯¹åŠ¨æ€æ•°ç»„çš„è®¤çŸ¥ï¼š 1234567891011121314// Cé£æ ¼åŠ¨æ€æ•°ç»„// mallocåˆ†é…ç©ºé—´char* my_name = (char*)malloc(10*sizeof(char));// forèµ‹å€¼for(int i=0 ; i&lt;10 ; i++) // forå¾ªç¯èµ‹å€¼&#123; my_name[i]=&#x27;&#x27;; &#125;/*// C++é£æ ¼// newåˆ†é…ç©ºé—´ï¼Œè¿˜å¯ä»¥åŒæ—¶åˆå§‹åŒ–char* my_name = new char[10]&#123;&quot;royhuang&quot;&#125;;*/ è¿™ä¸€åˆ‡éƒ½è¦æ„Ÿè°¢ç¼–è¯‘å™¨çš„â€œå¹•åå·¥ä½œâ€ï¼š 1char* my_name = &quot;royhuang&quot; ; // å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ ç­‰ä»·äºï¼š ç¼–è¯‘å™¨é¦–å…ˆåœ¨å¸¸é‡åŒºåˆ†é…ä¸€ä¸ªå­—ç¬¦æ•°ç»„ï¼ˆå¯ä»¥çœ‹åšæ˜¯åŒ¿åæ•°ç»„ï¼‰ï¼Œè¿™é‡Œå‡è®¾ä¸ºtmp_my_name ï¼› 1char* tmp_my_name[] = &quot;royhuang\\0&quot;; é¢˜å¤–è¯ï¼Œæ­£å› ä¸º&quot;royhuang\\0&quot;ä¿å­˜åœ¨å¸¸é‡åŒºï¼ˆåªè¯»ï¼‰ï¼Œæ‰€ä»¥ä¸Šè¿°æ–¹å¼åˆ†é…çš„åŠ¨æ€æ•°ç»„æ— æ³•ä¿®æ”¹ï¼š 1my_name[0] = &#x27;z&#x27;; // é”™è¯¯ï¼Œå°è¯•ä¿®æ”¹å¸¸é‡åŒºçš„å€¼ ç„¶åå°†tmp_my_name æ‹·è´ç»™my_nameï¼š 123// my_name å¹¶æ²¡æœ‰åˆ†é…ç©ºé—´// åªæ˜¯ä¿å­˜äº†æ•°ç»„ï¼ˆé¦–å…ƒç´ ï¼‰åœ°å€my_name = tmp_my_name; é¢˜å¤–è¯ï¼Œæ­£å› ä¸ºmy_name åªæ˜¯ä¿å­˜äº†æ•°ç»„åœ°å€ï¼ˆæœ¬è´¨æ˜¯æŒ‡é’ˆï¼Œè€Œä¸æ˜¯æ•°ç»„ï¼‰ï¼Œæ‰€ä»¥åŠ¨æ€æ•°ç»„å¯ä»¥é‡æ–°æ”¹å˜æŒ‡å‘ã€‚ 1my_name = &quot;hwh&quot;; // ok å¸¸ç”¨æ–¹æ³• C++æä¾›äº†cstring.h ä¾›æˆ‘ä»¬æ“ä½œCå­—ç¬¦ä¸²ï¼ˆä¸é€‚ç”¨std::stringï¼ï¼‰ï¼Œè¿™é‡Œç»™å‡ºä¸€äº›å¸¸ç”¨æ–¹æ³•ï¼š 123456#include &lt;cstring&gt;#include &lt;iostream&gt;using namespace std;char source[]=&quot;royhuang&quot;;char dest[5]; å¤åˆ¶å­—ç¬¦ä¸² ä¸‹é¢è¿™ç§æ–¹å¼å®¹æ˜“é€ æˆæº¢å‡ºï¼š 1strcpy(dest, source); // æº¢å‡º &gt; 5 cä¸­å»ºè®®ä½¿ç”¨strncpyï¼ŒC++11åˆ™é¦–é€‰strcpy_sï¼š 1234567// ç¡®ä¿ç¼–è¯‘å™¨æ”¯æŒæ­¤å‡½æ•°ï¼Œéœ€è¦å…ˆdefine#define __STDC_WANT_LIB_EXT1__ 1// linuxä¸‹strcpy_sæ— æ³•ä½¿ç”¨ï¼Œä½¿ç”¨strncpy// strncpy(dest, source, 5);strcpy_s(dest, 5, source); cout&lt;&lt;dest&lt;&lt;endl; è¾“å‡ºï¼š 1royhu é•¿åº¦å’Œå®¹é‡ 123char name[10] = &quot;royhuang&quot;;strlen(name) ; // 7ï¼Œä¸åŒ…å«ç»ˆæ­¢ç¬¦size(name); // 10 å…¶å®ƒæœ‰ç”¨çš„æ–¹æ³• strcmp() ï¼šæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ï¼ˆå¦‚æœç›¸ç­‰åˆ™è¿”å› 0 ï¼‰ï¼› strncmp() ï¼š æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²åˆ°ç‰¹å®šæ•°é‡çš„å­—ç¬¦ï¼ˆå¦‚æœç›¸ç­‰åˆ™è¿”å› 0ï¼‰ï¼› strcat() ï¼š å°†ä¸€ä¸ªå­—ç¬¦ä¸²é™„åŠ åˆ°å¦ä¸€ä¸ªï¼ˆå±é™©ï¼‰ï¼› strncat() ï¼šå°†ä¸€ä¸ªå­—ç¬¦ä¸²é™„åŠ åˆ°å¦ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆå¸¦ç¼“å†²åŒºé•¿åº¦æ£€æŸ¥ï¼‰ã€‚ æœ€ä½³å®è·µ Cé£æ ¼çš„å­—ç¬¦ä¸²é€šå¸¸ä½¿ç”¨éº»çƒ¦ï¼šåˆå¹¶å­—ç¬¦ä¸²ä¸æ–¹ä¾¿ã€char*éœ€ç®¡ç†å†…å­˜åˆ†é…ã€ä¸è‡ªåŠ¨å¢é•¿éœ€è€ƒè™‘è¶Šç•Œçš„é—®é¢˜ç­‰ã€‚ å› æ­¤åœ¨C++ä¸­æœ€ä½³å­—ç¬¦ä¸²å®è·µï¼š ä¸å»ºè®®ä½¿ç”¨Cé£æ ¼çš„å­—ç¬¦ä¸²ï¼Œè¯·å°½é‡ä½¿ç”¨std::stringï¼› å¦‚æœä¸€å®šè¦ä½¿ç”¨ï¼Œè¯·ä½¿ç”¨æœ‰å›ºå®šç¼“å†²åŒºå¤§å°çš„ C æ ·å¼å­—ç¬¦ä¸²ã€‚ è®¤è¯†ä¸‹std::string ç©¶ç«Ÿæœ‰ä½•èˆ¬é­”åŠ›å§ã€‚ 1.8.2 stringåˆè¯† std::string æ˜¯ä»€ä¹ˆï¼Ÿ C++ æ”¯æŒä¸¤ç§ä¸åŒç±»å‹çš„å­—ç¬¦ä¸²ï¼šstd::stringï¼ˆä½œä¸ºæ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†ï¼‰å’Œ C é£æ ¼çš„å­—ç¬¦ä¸²ï¼ˆä» C è¯­è¨€ç»§æ‰¿è€Œæ¥ï¼‰ã€‚ std::string æ˜¯ä½¿ç”¨ C é£æ ¼çš„å­—ç¬¦ä¸²å®ç°çš„ï¼Œå‚è€ƒï¼šC++ string æºç å®ç°å¯¹æ¯” ã€‚ å¯ä»¥çœ‹åˆ° string å…¶å®å°±æ˜¯ basic_string&lt;char&gt;ï¼Œé€šè¿‡ basic_string å¯ä»¥æ„é€ å‡ºä¸åŒå­—ç¬¦ç±»å‹çš„å­—ç¬¦ä¸²ç±»å‹ã€‚æ¯”å¦‚ wstring å°±æ˜¯ basic_string&lt;wchar_t&gt;ã€‚ 1234typedef basic_string&lt;char&gt; string;typedef basic_string&lt;char, char_traits&lt;char&gt;, allocator&lt;char&gt; &gt; string; typedef basic_string&lt;wchar_t, char_traits&lt;wchar_t&gt; allocator&lt;wchar_t&gt; &gt; wstring; ä¹Ÿå°±æ˜¯è¯´std::stringæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¸æ˜¯æ•°ç»„ã€‚ åœ¨c++ä¸­å¯ä»¥é€šè¿‡ #include &lt;string&gt; å¼•å…¥å­—ç¬¦ä¸²std::string ã€‚ 12345678910#include&lt;iostream&gt;#include&lt;string&gt;using namespace std;int main()&#123; // string my_name &#123;&#125;; // ç©ºä¸² string my_name = &quot;royhuang&quot;; cout&lt;&lt;my_name&lt;&lt;endl;&#125; std::string å¥½åœ¨å“ªé‡Œï¼Ÿ å›å¿†æˆ‘ä»¬æåˆ°çš„Cé£æ ¼å­—ç¬¦ä¸²ç¼ºç‚¹ï¼š Cé£æ ¼çš„å­—ç¬¦ä¸²é€šå¸¸ä½¿ç”¨éº»çƒ¦ï¼šåˆå¹¶å­—ç¬¦ä¸²ä¸æ–¹ä¾¿ã€char*éœ€ç®¡ç†å†…å­˜åˆ†é…ã€ä¸è‡ªåŠ¨å¢é•¿éœ€è€ƒè™‘è¶Šç•Œçš„é—®é¢˜ç­‰ã€‚ std::string åˆ™ä¸å­˜åœ¨è¿™äº›é—®é¢˜ï¼š åˆå¹¶å­—ç¬¦ä¸²æ–¹ä¾¿ï¼šstringå†…ç½®appendæ–¹æ³•å’Œé‡è½½äº†+æ“ä½œç¬¦ã€‚ 123string s1 = &quot;royhuang&quot;;s1.append(&quot;cqu&quot;); // royhuangcqus1 = s1+&quot;1996&quot;; // royhuangcqu1996 æ— éœ€ç®¡ç†å†…å­˜ ã€‚ä½¿ç”¨char* éœ€è¦æ˜¾ç¤ºä½¿ç”¨delete[] åˆ é™¤å†…å­˜ï¼Œstringä¼šè‡ªåŠ¨ç®¡ç†ã€‚ è‡ªåŠ¨åŠ¨æ€å¢é•¿ã€‚åŒä¸Šï¼š 1s1.append(&quot;cqu&quot;); // å­—ç¬¦ä¸²é•¿åº¦è‡ªåŠ¨å¢é•¿ 1.8.3 stringè½¬æ¢ä¸ºCé£æ ¼ å®é™…ç¼–ç ä¸­ï¼Œæ€»æœ‰æˆ–å¤šæˆ–å°‘çš„åŸå› ï¼Œæˆ‘ä»¬è¦å°†stringè½¬æ¢ä¸ºCé£æ ¼å­—ç¬¦ä¸²ï¼ˆCé£æ ¼å­—ç¬¦ä¸²å¦‚ä½•è½¬æ¢ä¸ºstringåœ¨ä¸‹ä¸€èŠ‚ï¼šstringå¸¸ç”¨æ–¹æ³•ä»‹ç»ï¼‰ã€‚ äº†è§£ä¸€ä¸‹å§ã€‚ c_str() æ–¹æ³• åŸå‹ï¼šconst char* string::c_str () const ã€‚ 12string sSource&#123; &quot;abcdefg&quot; &#125;;sSource.c_str(); data() æ–¹æ³• åŸå‹ï¼šconst char* string::data () constã€‚ 12string sSource&#123; &quot;abcdefg&quot; &#125;;sSource.data(); copy() æ–¹æ³• åŸå‹ï¼šsize_type string::copy(char *szBuf, size_type nLength, size_type nIndex = 0) constã€‚ 123string sSource&#123; &quot;sphinx of black quartz, judge my vow&quot; &#125;;char szBuf[20];sSource.copy(szBuf, 5, 10); è¾“å‡ºï¼š 1black ç»§ç»­çœ‹çœ‹stringæ›´å¤šçš„ç”¨æ³•å§ã€‚ 1.8.4 stringå¸¸ç”¨æ–¹æ³• å­—ç¬¦ä¸²æ˜¯ç¼–ç¨‹ä¸­ç»å¸¸è¦å¤„ç†çš„ï¼Œè¿™é‡Œåˆ—å‡ºå¸¸ç”¨çš„æ–¹æ³•ä¾›ç†Ÿæ‚‰å’ŒæŸ¥é˜…ã€‚ ä¸ºäº†å°½é‡ç®€æ´ï¼Œä¸‹é¢ä»…ç»™å‡ºå…³é”®æ€§ä»£ç ã€‚ æ„é€ åˆå§‹åŒ–è®¿é—®å®¹é‡å¤§å°åŸºæœ¬ä¿®æ”¹æ³¨æ„åˆå§‹åŒ–stringçš„åªèƒ½æ˜¯å¸¸é‡ï¼ˆconstï¼‰ç±»å‹ã€‚ å½“ç„¶ä½ å¯èƒ½è§è¿‡æœ€ç®€å•çš„æ–¹æ³•ï¼Œä½¿ç”¨æ“ä½œç¬¦= æ¥åˆå§‹åŒ–å­—ç¬¦ä¸²ã€‚ 1string str = string(&quot;royhuang&quot;); å½“ç„¶ï¼Œä½ è¿˜å¯ä»¥ç”¨Cé£æ ¼çš„å­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ˜¯Cé£æ ¼å­—ç¬¦ä¸²å¦‚ä½•è½¬æ¢ä¸ºstringã€‚ 12string str = &quot;royhuang&quot;; // å­—ç¬¦ä¸²string str = &#x27;5&#x27;; // å­—ç¬¦ è¿™é‡Œ= æ˜¯é‡è½½è¿‡åçš„è¿ç®—ç¬¦ã€‚ç°åœ¨æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹ï¼šå¦‚ä½•é€šè¿‡æ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ã€‚ string() æ–¹æ³• åŸå‹ï¼šstring::string()ã€‚åˆ›å»ºä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚ 12// ç©ºä¸²ï¼Œé»˜è®¤åˆå§‹åŒ–string sSource; string::string(const string&amp; strString) æ­¤æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°å­—ç¬¦ä¸²ä½œä¸º strString çš„å‰¯æœ¬ã€‚ 1234567// æŒ‡å®šå­—ç¬¦ä¸²å€¼åˆå§‹åŒ–string sSource&#123; &quot;my string&quot; &#125;; string sNewSource&#123; sSource &#125;;// ç‰¹åˆ«çš„ï¼Œè¿˜æ¥å—char* szCString ç±»å‹ä½œä¸ºå‚æ•°const char *szSource&#123; &quot;my string&quot; &#125;;string sNewSource&#123; szSource &#125;; string::string(const char szCString)* ä½¿ç”¨å¸¸é‡Cé£æ ¼å­—ç¬¦ä¸²åˆå§‹åŒ–ã€‚ 12const char *szSource&#123; &quot;my string&quot; &#125;;string sOutput&#123; szSource &#125;; string::string(const string&amp; strString, size_type unIndex, size_type unLength) åˆ›å»ºä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œæœ€å¤šåŒ…å« strString ä¸­çš„ unLength å­—ç¬¦ï¼Œä»ç´¢å¼• unIndex å¼€å§‹ã€‚å¦‚æœé‡åˆ° NULLï¼Œå³ä½¿æœªè¾¾åˆ° unLengthï¼Œå­—ç¬¦ä¸²å¤åˆ¶ä¹Ÿä¼šç»“æŸã€‚ 12345678// æˆªå–æŒ‡å®šé•¿åº¦åˆå§‹åŒ–string sSource&#123; &quot;my string&quot; &#125;;string sOutput&#123; sSource, 3 &#125;;std::cout &lt;&lt; sOutput&lt;&lt; &#x27;\\n&#x27;; // stringstd::string sOutput2(sSource, 3, 4);std::cout &lt;&lt; sOutput2 &lt;&lt; &#x27;\\n&#x27;; // stri æƒ³ç”¨éå­—ç¬¦ä¸²ç±»å‹åˆå§‹åŒ–ï¼Ÿ å¦‚æœä½ å°è¯•ç”¨éå­—ç¬¦ç±»å‹ä¸²åˆå§‹åŒ–ï¼Œæ¯”å¦‚æ•°å­—ï¼š 1string sFour&#123; 4 &#125;; ä¼šæŠ¥é”™ï¼šæ— æ³•å°†å‚æ•° 1 ä»â€œintâ€è½¬æ¢ä¸ºâ€œstd::basic_stringâ€ ã€‚ä¹Ÿå°±æ˜¯è¯´è¯•å›¾å°†intè½¬æ¢ä¸ºstringå¤±è´¥äº†ã€‚ æœ‰ä»€ä¹ˆå¥½åŠæ³•å—ï¼Ÿå¥½åŠæ³•å°±æ˜¯æˆ‘ä»¬å…ˆå°†éstringç±»å‹ï¼Œæ¯”å¦‚ä¸Šæ–‡intç±»å‹ï¼Œè½¬æ¢ä¸ºstringã€‚ å¥½å§ï¼Œæœç„¶æ˜¯ç»å…¸åºŸè¯å¤§å¸ˆã€‚å…·ä½“æ¥è¯´æˆ‘ä»¬æ˜¯ä½¿ç”¨std::ostringstream ç±»æ¥è½¬æ¢ä¸ºstringç±»å‹ã€‚ 123456789101112131415161718192021222324#include &lt;iostream&gt;#include &lt;sstream&gt;#include &lt;string&gt;using namespace std;template &lt;typename T&gt;inline std::string ToString(T tX)&#123; // åˆå§‹åŒ–--&gt;è¯»å…¥--&gt;è°ƒç”¨stræ–¹æ³• ostringstream oStream; oStream &lt;&lt; tX; // tXåŠ å…¥åˆ°æµä¸­ return oStream.str();&#125;int main()&#123; string sFour&#123; ToString(4) &#125;; string sSixPointSeven&#123; ToString(6.7) &#125;; string sA&#123; ToString(&#x27;A&#x27;) &#125;; cout &lt;&lt; sFour &lt;&lt; &#x27;\\n&#x27;; // 4 cout &lt;&lt; sSixPointSeven &lt;&lt; &#x27;\\n&#x27;; // 6.7 cout &lt;&lt; sA &lt;&lt; &#x27;\\n&#x27;; // A&#125; å¥½äº†ï¼ŒçŸ¥é“ä½ ä¸€å®šæ±‚çŸ¥è‹¥æ¸´ï¼šé‚£stringç±»å‹æ€ä¹ˆè½¬æ¢ä¸ºå…¶å®ƒç±»å‹å‘¢ï¼Ÿç±»ä¼¼çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨std::istringstreamã€‚ 1234567891011121314151617181920#include &lt;iostream&gt;#include &lt;sstream&gt;#include &lt;string&gt;using namespace std;template &lt;typename T&gt;inline bool FromString(const std::string&amp; sString, T &amp;tX)&#123; // åˆå§‹åŒ–--&gt;å†™å…¥--&gt;è°ƒç”¨stræ–¹æ³• istringstream iStream(sString); // å°†æµä¸­æ•°æ®å†™å…¥åˆ°tXä¸­ return !(iStream &gt;&gt; tX).fail(); // extract value into tX, return success or not&#125;int main()&#123; double dX; FromString(&quot;3.4&quot;, dX) FromString(&quot;ABC&quot;, dX)&#125; é‡è½½ç¬¦å·[] 12string sSource&#123; &quot;abc&quot; &#125;;sSource[2] = &#x27;D&#x27;; // abD at() æ–¹æ³• ç›¸æ¯”æ€§èƒ½è¾ƒæ…¢ï¼Œå› ä¸ºå®ƒä¼šå¯¹ä¼ å…¥çš„å‚æ•°indexè¿›è¡Œå¼‚å¸¸æ£€æŸ¥ã€‚ä½†æ˜¯ç›¸å¯¹çš„ï¼Œå¦‚æœä½ ä¸ç¡®å®šä¼ å…¥çš„indexæ˜¯å¦æœ‰æ•ˆï¼š just use it. 12string sSource&#123; &quot;abc&quot; &#125;;sSource.at(2) = &#x27;D&#x27;; // abD size_type string::length() const å’Œ size_type string::size() const ä¸¤ä¸ªå‡½æ•°éƒ½å¯ä»¥è¿”å›å­—ç¬¦ä¸²ä¸­çš„å½“å‰å­—ç¬¦æ•°ï¼Œä¸åŒ…æ‹¬ç©ºç»ˆæ­¢ç¬¦ã€‚ 123string source&#123; &quot;012345678&quot; &#125;;source.length() // 9 source.size() // 9 bool string::empty() const å¦‚æœå­—ç¬¦ä¸²æ²¡æœ‰å­—ç¬¦åˆ™è¿”å›çœŸï¼Œå¦åˆ™è¿”å›å‡ã€‚ 1source.empty() // false size_type string::capacity() const æ³¨æ„ï¼Œlength()æ–¹æ³•è¿”å›çš„æ˜¯å®é™…å­˜å‚¨çš„å­—ç¬¦æ•°é‡ï¼Œä½†æ˜¯capacity()æ–¹æ³•è¿”å›çš„ç¼–è¯‘å™¨ç»™stringç±»å‹åˆå§‹åŒ–åˆ†é…çš„å®¹é‡å¤§å°ã€‚ ç¼–è¯‘å™¨ä¸€èˆ¬ä¼šä¸ºç”¨æˆ·æä¾›äº†ä¸€äº›ç¼“å†²ç©ºé—´ï¼Œæ‰€ä»¥ä¸€èˆ¬capacity()&gt;length()capacity()&gt;length()capacity()&gt;length()ã€‚ 123string s &#123; &quot;012345678&quot; &#125;;s.length() ; // 9s.capacity() ; // 16 ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿ è€ƒè™‘è¿™ä¹ˆä¸€ç§æƒ…å†µï¼Œä½ åˆå§‹åŒ–äº†ä¸€ä¸ªå­—ç¬¦ä¸²strï¼Œlength()=8ã€‚å¦‚æœä½ åœ¨åé¢è¿˜ç»§ç»­ä¸²è”æ„é€ æ›´å¤§å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªæ—¶å€™æ¯ä¸²è”ä¸€æ¬¡ç¼–è¯‘å™¨å°±è¦é‡æ–°åˆ†é…strå¤§å°ã€‚ 1234567891011121314#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;cstdlib&gt; // for rand() and srand()#include &lt;ctime&gt; // for time()int main()&#123; string str&#123;&#125;; // length 0 for (int count&#123; 0 &#125;; count &lt; 16; ++count) str += &#x27;a&#x27;; cout &lt;&lt; str;&#125; å½“ä¸²è”çš„æ¬¡æ•°è¿‡å¤šæ—¶ï¼Œæ˜¾ç„¶è¿™ä¼šå¯¹æ€§èƒ½é€ æˆè¾ƒå¤§çš„å½±å“ã€‚æ‰€ä»¥æ›´æ›´èªæ˜çš„åšæ³•ï¼Œé™¤äº†ç³»ç»Ÿé»˜è®¤åˆ†é…æ›´å¤§çš„å®¹é‡ï¼Œè¿˜å¯ä»¥è‡ªå®šä¹‰æå‰reserveåˆ†é…æ›´å¤§çš„å®¹é‡ã€‚ void string::reserve(size_type unSize) æå‰åˆ†é…æ›´å¤§çš„å®¹é‡ã€‚ 1str.reserve(16); å®šä¹‰å…¬å…±ä»£ç å¦‚ä¸‹ã€‚ 12string sStr1(&quot;red&quot;);string sStr2(&quot;blue&quot;); äº¤æ¢ä¸¤ä¸ªå­—ç¬¦ä¸² void swap (string &amp;str1, string &amp;str2)ã€‚ 1swap(sStr1, sStr2); è¿½åŠ å­—ç¬¦ä¸² string&amp; string::operator+= (const string&amp; str)ã€‚ 1sStr1 += sStr2 ; // æ–°å­—ç¬¦ä¸²ï¼šredblue æˆ–è€…ä½¿ç”¨append()æ–¹æ³•ï¼Œæ•ˆæœä¸€æ ·ã€‚ 1sStr1.append(sStr2) ç‰¹åˆ«å¯¹äºCé£æ ¼å­—ç¬¦ä¸²ï¼Œå¦‚ä¸‹ã€‚ +=/append æ–¹å¼ è¦æ±‚éƒ½æ˜¯å¸¸é‡ï¼ 1234string sString(&quot;one&quot;);// &quot; two&quot;ã€&quot; three&quot;éƒ½æ˜¯Cé£æ ¼å­—ç¬¦ä¸²sString += &quot; two&quot;;sString.append(&quot; three&quot;); push_back ï¼Œä»…é™å­—ç¬¦ ä¸è¦æ±‚æ˜¯å¸¸é‡ï¼Œå¦‚ä¸‹ï¼š 12345string sString(&quot;one&quot;);sString += &#x27; &#x27;;sString.push_back(&#x27;2&#x27;);cout &lt;&lt; sString &lt;&lt; endl; è¾“å‡ºï¼š 1one 2 æ’å…¥å­—ç¬¦ä¸² string&amp; string::insert (size_type index, const string&amp; str)ã€‚ 1sStr1.insert(2,sStr2); // reblued å½“ç„¶ä¹Ÿå¯ä»¥æ’å…¥Cé£æ ¼å­—ç¬¦ä¸²ï¼Œä½†æ˜¯åªèƒ½æ˜¯å¸¸é‡å­—ç¬¦ä¸²ã€‚ 1sStr1.insert(2,&quot;hwh&quot;); æ¯”è¾ƒ å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ã€‚ æ–¹æ³• ä½œç”¨ ==, != æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰/ä¸ç›¸ç­‰ï¼ˆè¿”å› boolï¼‰ &lt;, &lt;=, &gt; &gt;= æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦å°äº/å¤§äºå½¼æ­¤ï¼ˆè¿”å› boolï¼‰ compare() æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰/ä¸ç›¸ç­‰ï¼ˆè¿”å› -1ã€0 æˆ– 1ï¼‰ å­ä¸² è§ä¸‹ã€‚ æ–¹æ³• ä½œç”¨ + å­ä¸²ç›¸åŠ  substr() è·å–å­ä¸² æœç´¢ å¤§è‡´å¦‚ä¸‹ã€‚ æ–¹æ³• ä½œç”¨ find() æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå­—ç¬¦/å­ä¸² find_first_of() æŸ¥æ‰¾æŒ‡å®šæœç´¢å­—ç¬¦çš„ç¬¬ä¸€æ¬¡å‡ºç°ä½ç½®çš„ç´¢å¼• find_last_of() æŸ¥æ‰¾æŒ‡å®šæœç´¢å­—ç¬¦çš„æœ€åä¸€æ¬¡å‡ºç°ä½ç½®çš„ç´¢å¼• 1.8.5 è¾“å…¥è¾“å‡ºæµ åœ¨æœ¬ç¬”è®°ä¸­ï¼Œâ€œæµï¼ˆstreamï¼‰â€ä¸€è¯ä¼šè¢«å¤§é‡æåˆ°ã€‚ä¸å¯é¿å…çš„ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸‹å…¶åŸºæœ¬æ¦‚å¿µã€‚ ä»€ä¹ˆæ˜¯æµï¼Ÿ æŠ½è±¡åœ°è¯´ï¼Œæµåªæ˜¯ä¸€ä¸ªå¯ä»¥é¡ºåºè®¿é—®çš„å­—èŠ‚åºåˆ—ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæµå¯èƒ½ä¼šäº§ç”Ÿæˆ–æ¶ˆè€—æ— é™é‡çš„æ•°æ®ã€‚ ä»¥æˆ‘ä»¬é€šå¸¸å¤„ç†çš„è¾“å…¥æµå’Œè¾“å‡ºæµä¸ºä¾‹ã€‚ è¾“å…¥æµï¼šä¿å­˜æ¥è‡ªæ•°æ®ç”Ÿæˆå™¨ï¼ˆä¾‹å¦‚é”®ç›˜ã€æ–‡ä»¶æˆ–ç½‘ç»œï¼‰çš„è¾“å…¥ã€‚ä¾‹å¦‚ï¼Œä¿å­˜ç”¨æˆ·å½“å‰é”®ç›˜çš„è¾“å…¥ã€‚ è¾“å‡ºæµï¼šç”¨äºä¿å­˜ç‰¹å®šæ•°æ®ä½¿ç”¨è€…çš„è¾“å‡ºï¼Œä¾‹å¦‚ç›‘è§†å™¨ã€æ–‡ä»¶æˆ–æ‰“å°æœºã€‚å°†æ•°æ®å†™å…¥è¾“å‡ºè®¾å¤‡æ—¶ï¼Œè¯¥è®¾å¤‡å¯èƒ½å°šæœªå‡†å¤‡å¥½æ¥å—è¯¥æ•°æ®â€”â€”ä¾‹å¦‚ï¼Œå½“ç¨‹åºå°†æ•°æ®å†™å…¥å…¶è¾“å‡ºæµæ—¶ï¼Œæ‰“å°æœºå¯èƒ½ä»åœ¨é¢„çƒ­ã€‚æ•°æ®å°†ä½äºè¾“å‡ºæµä¸­ï¼Œç›´åˆ°æ‰“å°æœºå¼€å§‹ä½¿ç”¨å®ƒã€‚ C++ä¸­çš„è¾“å…¥ã€è¾“å‡ºæµ istreamç±»æ˜¯ä¸è¾“å…¥æµå¤„ç†æ—¶çš„ä¸»ç±»ã€‚å¯¹äºè¾“å…¥æµï¼Œ**æå–è¿ç®—ç¬¦ (&gt;&gt;)**ç”¨äºä»æµä¸­åˆ é™¤å€¼ã€‚ ostreamç±»æ˜¯ä¸è¾“å‡ºæµå¤„ç†æ—¶çš„ä¸»ç±»ã€‚å¯¹äºè¾“å‡ºæµï¼Œ**æ’å…¥è¿ç®—ç¬¦ (&lt;&lt;)**ç”¨äºå°†å€¼åŠ å…¥æµä¸­ã€‚ å½“ç„¶ï¼ŒC++å·²ç»é¢„å®šä¹‰å¥½å››ä¸ªæ ‡å‡†æµå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒä»¬ï¼š cin ï¼šæ ‡å‡†è¾“å…¥æµå¯¹è±¡ï¼ˆé€šå¸¸æ˜¯é”®ç›˜ï¼‰ï¼› cout ï¼šæ ‡å‡†è¾“å‡ºæµå¯¹è±¡ï¼ˆé€šå¸¸æ˜¯ç›‘è§†å™¨ï¼‰ï¼› cerr ï¼šæ ‡å‡†é”™è¯¯è¾“å‡ºæµå¯¹è±¡ï¼ˆé€šå¸¸æ˜¯ç›‘è§†å™¨ï¼‰ï¼Œæä¾›æ— ç¼“å†²è¾“å‡ºï¼› clog ï¼šæ ‡å‡†é”™è¯¯è¾“å‡ºæµå¯¹è±¡ï¼ˆé€šå¸¸æ˜¯ç›‘è§†å™¨ï¼‰ï¼Œæä¾›ç¼“å†²è¾“å‡ºã€‚ æ— ç¼“å†²è¾“å‡ºé€šå¸¸è¢«ç«‹å³å¤„ç†ï¼Œè€Œç¼“å†²è¾“å‡ºé€šå¸¸ä½œä¸ºå—å­˜å‚¨å’Œå†™å‡ºã€‚å› ä¸º clog ä¸ç»å¸¸ä½¿ç”¨ï¼Œæ‰€ä»¥ç»å¸¸ä»æ ‡å‡†æµåˆ—è¡¨ä¸­çœç•¥å®ƒã€‚ istreamostream istreamæœ€ä½³å®è·µ ï¼ˆCé£æ ¼ï¼‰ä½¿ç”¨setwé¿å…ç¼“å­˜åŒºæº¢å‡º ä½¿ç”¨æå–è¿ç®—ç¬¦&gt;&gt;ä»è¾“å…¥æµä¸­è¯»å–ä¿¡æ¯ï¼Œç¬¬ä¸€ä¸ªå¸¸è§é—®é¢˜ä¾¿æ˜¯è¦é¿å…ç¼“å†²åŒºæº¢å‡ºã€‚å°¤å…¶æ˜¯åœ¨Cé£æ ¼çš„å­—ç¬¦ä¸²ä¸­ï¼Œè¿™åº”è¯¥æˆä¸ºä½ çš„è‚Œè‚‰ååº”ã€‚ 12char buf[10]; cin&gt;&gt;buf; // è¾“å…¥ï¼š12345678910 æµç¨‹ï¼šä¸Šä¾‹ä¸­ï¼Œè¾“å…¥æµä¸­å­˜åœ¨ï¼š12345678910ï¼Œcinæ¯æ¬¡è¯»å–ä¸€ä¸ªå­—ç¬¦ä¸²æ”¾å…¥bufä¸­ï¼Œé‡åˆ°ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦æ‰ä¼šç»ˆæ­¢ã€‚ ä½†ç”±äºä½ çš„å°è°ƒçš®ï¼Œè¾“å…¥äº†è¶…è¿‡10ä¸ªå­—ç¬¦ã€‚å› ä¸ºè¿™è¶…è¿‡äº†ç¼“å­˜é¢„å®šå¤§å°ï¼ˆ10ï¼‰ï¼Œå¾ˆä¸å¹¸å‘ç”Ÿäº†Segmentation faultã€‚ æ­£ç¡®çš„åšæ³•åº”è¯¥æ˜¯ï¼Œæˆ‘ä»¬è¦é™åˆ¶ä»æµä¸­è¯»å–çš„æœ€å¤§å­—ç¬¦æ•°ï¼ˆå°äº10ï¼‰ï¼Œç„¶åå†æ”¾å…¥bufä¸­ã€‚ 12345#include &lt;iomanip&gt;char buf[10];cin&gt;&gt;setw(10)&gt;&gt;buf;cout&lt;&lt;buf; ç°åœ¨ç¨‹åºåªè¯»å–æµä¸­çš„å‰ 9 ä¸ªå­—ç¬¦ï¼ˆä¸ºç»ˆæ­¢ç¬¦ç•™å‡ºç©ºé—´ï¼‰ã€‚ä»»ä½•å‰©ä½™çš„å­—ç¬¦éƒ½å°†ç•™åœ¨æµä¸­ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡æå–ã€‚ 1123456789 ï¼ˆCé£æ ¼ï¼‰ä½¿ç”¨getlineè¯»å–æ•´è¡Œ å¦‚å‰æåˆ°ï¼Œcinå¦‚æœé‡åˆ°ï¼šç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦ï¼Œå°±ä¼šè‡ªåŠ¨åœæ­¢æå–ã€‚æ¯”å¦‚ï¼š 12345#include &lt;iomanip&gt;char buf[20];cin&gt;&gt;setw(20)&gt;&gt;buf; // è¾“å…¥ï¼ši am royhuangcout&lt;&lt;buf; è¾“å‡ºç»“æœå´ä¸å¦‚æ„ï¼š 1i å½“ç„¶ï¼Œèªæ˜çš„ä½ æƒ³åˆ°ç›´æ¥ç”¨å¾ªç¯è¯»å–å­—ç¬¦ï¼šé‡åˆ°ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ç­‰å¼€å§‹ä¸‹ä¸€ä¸ªå¾ªç¯ï¼Œç›´è‡³é‡åˆ°\\n æ‰ç»“æŸå¾ªç¯ã€‚ 123char buf[20];int i=0;while (cin&gt;&gt;buf[i++]); è¾“å‡ºç»“æœï¼š 1i am royhuang ä½†ä¸Šé¢çš„æ–¹å¼å­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼š1ï¼‰å¾ªç¯ä¸å¤Ÿä¼˜é›…ï¼›2ï¼‰æ²¡æœ‰é™åˆ¶è¾“å…¥å­—ç¬¦æœ€å¤§é•¿åº¦ã€‚ ä¸ºæ­¤ï¼Œä½ è¯´å¯ä»¥ä½¿ç”¨getæ–¹æ³•ã€‚ 12char buf[20];cin.get(buf,20); çœ‹ä¸Šå»ä¸€åˆ‡éƒ½å¾ˆç¾å¥½ã€‚ä½†æ˜¯è¿™é‡Œå¿½ç•¥äº†ä¸€ä¸ªé—®é¢˜ï¼Œæ¢è¡Œç¬¦\\nè¿˜åœ¨æµä¸­ã€‚ è¯·çœ‹ä¸‹ä¾‹ã€‚ 1234567 char buf[20]; cin.get(buf,20); cout&lt;&lt;buf&lt;&lt;endl; char company[10]; cin.get(company,10);cout&lt;&lt;company&lt;&lt;endl; companyè¿˜æœªæ¥å¾—åŠè¾“å…¥ï¼Œä¾¿ç»“æŸï¼š ä½¿ç”¨getlineå¯è¯»å…¥æ¢è¡Œç¬¦ï¼š 1234567 char buf[20]; cin.getline(buf,20); // \\n ä¹Ÿå¹¶è¯»å…¥ cout&lt;&lt;buf&lt;&lt;endl; char company[10]; cin.get(company,10);cout&lt;&lt;company&lt;&lt;endl; ä¸€åˆ‡æ­£å¸¸äº†ã€‚ ï¼ˆstringï¼‰std::string+cin å’Œå‰é¢Cé£æ ¼å­—ç¬¦ä¸²è¯»å–å¤§åŒå°å¼‚ï¼Œä¸è¿‡C++ä¸­ä½¿ç”¨çš„æ˜¯æ ‡å‡†åº“ä¸­std::getå’Œstd::getline å‡½æ•°ã€‚ 12345678910111213141516#include&lt;iostream&gt;using namespace std;int main()&#123; // è™½ç„¶uniåˆå§‹åŒ–ä¸ºç©ºä¸²ï¼Œä½†æ˜¯èµ‹å€¼åè¶…è¿‡é•¿åº¦ï¼ˆlengthï¼‰ä¼šè‡ªåŠ¨å¢é•¿å®¹é‡ï¼ˆcapacityï¼‰ string name&#123;&#125;; cout&lt;&lt; &quot;input your name: &quot;; cin&gt;&gt;name; string uni&#123;&#125;; cout&lt;&lt; &quot;input your university: &quot;; getline(cin,uni); cout&lt;&lt; &quot;your university is: &quot;&lt;&lt;uni&lt;&lt;endl; return 0;&#125; å‡ºç°å‰è¿°ç±»ä¼¼è¯»å…¥\\né—®é¢˜ï¼š æˆ‘ä»¬è¾“å…¥royhuangå¹¶æŒ‰ä¸‹å›è½¦æ—¶ï¼Œç­‰äºè¾“å…¥äº†royhuang\\n ï¼šroyhuang è¢«æ­£ç¡®èµ‹å€¼ç»™name ï¼Œä½†æ˜¯\\n ç•™åœ¨äº†ç¼“å†²åŒºç­‰å¾…ä¸‹ä¸€æ¬¡cinè¯»å–ã€‚ä¸‹ä¸€æ¬¡çš„cinè¿˜æ²¡ç­‰æˆ‘ä»¬å†æ¬¡è¾“å…¥ï¼Œä¾¿å‘ç°äº†ç¼“å†²åŒº\\nå°±å®Œæˆæ­¤æ¬¡è¯»å–äº†ã€‚ æˆ‘ä»¬æœ‰ä¸¤ä¸ªåŠæ³•è§£å†³è¿™ä¸ªé—®é¢˜ï¼š æå‰è¯»å…¥\\nï¼šç¬¬6è¡Œcin&gt;&gt;name; æ›¿æ¢â€”&gt;getline(cin,name); ï¼› å¿½ç•¥\\nï¼šç¬¬13è¡Œ getline(cin,uni);â€”&gt;getline(cin&gt;&gt;ws,uni);ï¼Œws è¡¨ç¤ºå¿½ç•¥å‰é¢çš„ç©ºç™½å­—ç¬¦ã€‚ å¥½äº†ï¼Œä¸–ç•Œåˆå¥½èµ·æ¥äº†ã€‚ å…¶å®ƒæœ‰ç”¨çš„istreamå‡½æ•° ignore()ä¸¢å¼ƒæµä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚ ignore(int nCount)ä¸¢å¼ƒå‰ nCount ä¸ªå­—ç¬¦ã€‚ peek()å…è®¸æ‚¨ä»æµä¸­è¯»å–å­—ç¬¦ï¼Œè€Œæ— éœ€å°†å…¶ä»æµä¸­åˆ é™¤ã€‚ unget()å°†è¯»å›çš„æœ€åä¸€ä¸ªå­—ç¬¦è¿”å›åˆ°æµä¸­ï¼Œä»¥ä¾¿ä¸‹æ¬¡è°ƒç”¨æ—¶å¯ä»¥å†æ¬¡è¯»å–ã€‚ putback(char ch)å…è®¸æ‚¨å°†æ‚¨é€‰æ‹©çš„å­—ç¬¦æ”¾å›æµä¸­ä»¥ä¾›ä¸‹ä¸€æ¬¡è°ƒç”¨è¯»å–ã€‚ è¿™ä¸ªå°èŠ‚ä¸»è¦å¦‚ä½• iostream è¾“å‡ºç±» (ostream) æ ¼å¼åŒ–è¾“å‡ºå†…å®¹ã€‚ å‰ç¼€æ­£æ•°+ std::ios::showposï¼šå¦‚æœè®¾ç½®ï¼Œåˆ™ç”¨ + å‰ç¼€æ­£æ•°ã€‚ 1cout &lt;&lt; showpos &lt;&lt; 5 &lt;&lt; &#x27;\\n&#x27;; è¾“å‡ºï¼š boolæ ‡è¯† std::ios::boolalphaï¼šå¦‚æœè®¾ç½®ï¼Œå¸ƒå°”å€¼æ‰“å°â€œçœŸâ€æˆ–â€œå‡â€ã€‚å¦‚æœæœªè®¾ç½®ï¼Œå¸ƒå°”å€¼æ‰“å° 0 æˆ– 1ã€‚ 1cout &lt;&lt; boolalpha &lt;&lt; true &lt;&lt; &quot; &quot; &lt;&lt; false &lt;&lt; &#x27;\\n&#x27;; è¾“å‡ºï¼š ç§‘å­¦è®¡æ•°æ³• 1cout &lt;&lt; uppercase &lt;&lt; 12345678.9 &lt;&lt; &#x27;\\n&#x27;; è¾“å‡ºï¼š 10/2/8/è¿›åˆ¶ 123cout &lt;&lt; hex &lt;&lt; 11 &lt;&lt; &#x27;\\n&#x27;;cout &lt;&lt; dec &lt;&lt; 11 &lt;&lt; &#x27;\\n&#x27;;cout &lt;&lt; oct &lt;&lt; 11 &lt;&lt; &#x27;\\n&#x27;; è¾“å‡ºï¼š è®¾ç½®å®½åº¦ã€å¡«å……å­—ç¬¦ã€å¯¹é½æ–¹å¼ 12345cout &lt;&lt; -12345 &lt;&lt; &#x27;\\n&#x27;; cout &lt;&lt; setw(10) &lt;&lt; -12345 &lt;&lt; &#x27;\\n&#x27;;cout &lt;&lt; setw(10) &lt;&lt; left &lt;&lt; -12345 &lt;&lt; &#x27;\\n&#x27;; cout &lt;&lt; setw(10) &lt;&lt; right &lt;&lt; -12345 &lt;&lt; &#x27;\\n&#x27;; cout &lt;&lt; setw(10) &lt;&lt; internal &lt;&lt; -12345 &lt;&lt; &#x27;\\n&#x27;; è¾“å‡ºï¼š 12345-12345 -12345 -12345 -12345 - 12345 æ›´æ–°è®°å½• 2021-12-25 ï¼šæ›´æ–°ç¬”è®° ç¬¬ä¸€æ¬¡æ›´æ–° å‚è€ƒèµ„æ–™ 1.c++ä¸­çš„å˜é‡åˆå§‹åŒ–ï¼šhttps://www.dyxmq.cn/program/code/c-cpp/cpp-variable-default-init.html â†©2.cppç±»åˆå§‹åŒ–ï¼šhttps://aiden-dong.gitee.io/2020/01/08/cpp%E7%B1%BB%E5%88%9D%E5%A7%8B%E5%8C%96/ â†©3.C++ æ•™ç¨‹ï¼šhttps://cloud.tencent.com/edu/learning/course-1844-21266 â†©4.Cè¯­è¨€externå…³é”®è¯ï¼šhttp://c.biancheng.net/cpp/html/448.html â†©5.C++ ä¸­çš„staticå…³é”®å­—ä½¿ç”¨åœºæ™¯ï¼šhttps://cloud.tencent.com/developer/article/1695037 â†©6.C++ å¾ªç¯ï¼šhttps://www.w3cschool.cn/cpp/cpp-loops.html â†©","categories":[{"name":"C++","slug":"C","permalink":"https://hwh.zone/categories/C/"},{"name":"ä»é›¶å¼€å§‹","slug":"C/ä»é›¶å¼€å§‹","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"},{"name":"C++åŸºç¡€","slug":"C/ä»é›¶å¼€å§‹/C-åŸºç¡€","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/C-%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"C++","slug":"C","permalink":"https://hwh.zone/tags/C/"},{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://hwh.zone/tags/%E6%95%99%E7%A8%8B/"},{"name":"C++åŸºç¡€","slug":"C-åŸºç¡€","permalink":"https://hwh.zone/tags/C-%E5%9F%BA%E7%A1%80/"},{"name":"å¿«é€Ÿå…¥é—¨","slug":"å¿«é€Ÿå…¥é—¨","permalink":"https://hwh.zone/tags/%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/"}]},{"title":"C++ä»é›¶å¼€å§‹ï¼ˆå››ï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆä¸­ï¼‰æŒ‡é’ˆå’Œå¼•ç”¨","slug":"C++ä»é›¶å¼€å§‹ï¼ˆäºŒï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆä¸­ï¼‰ä¹‹æŒ‡é’ˆ","date":"2022-01-14T08:35:15.067Z","updated":"2022-03-01T11:38:26.315Z","comments":true,"path":"p/24237/","link":"","permalink":"https://hwh.zone/p/24237/","excerpt":"","text":"ğŸŒŸã€ŠC++ä»é›¶å¼€å§‹ã€‹ ç³»åˆ—ï¼Œå¼€å§‹æ›´æ–°ä¸­â€¦ C++ä»é›¶å¼€å§‹https://hwh.zone/p/62712 äºŒã€æŒ‡é’ˆ&amp;å¼•ç”¨ ç¬¬ä¸€æ¬¡å­¦C++ï¼ŒæŒ‡é’ˆå’Œå¼•ç”¨ä»¤å½“æ—¶è¿˜æ˜¯åˆå­¦è€…çš„æˆ‘æ„Ÿåˆ°éå¸¸çš„å›°æƒ‘ï¼š æ™®é€šå˜é‡å°±å¯ä»¥ä»£è¡¨ä¸€å—å†…å­˜åŒºåŸŸï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨åŸå§‹å˜é‡ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦æŒ‡é’ˆï¼Ÿ æŒ‡é’ˆè§£å†³äº†æ™®é€šå˜é‡çš„ä¸è¶³ï¼Œä¸ºä»€ä¹ˆåˆå¼•å…¥å¼•ç”¨çš„æ¦‚å¿µï¼Ÿ å¼•ç”¨æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆæ“ä½œå¼•ç”¨ç­‰ä»·æ“ä½œå˜é‡æœ¬ä½“ï¼Ÿ å¸Œæœ›æ›¾ç»çš„æˆ‘ï¼Œç°åœ¨çš„ä½ å¯ä»¥åœ¨æœ¬ç« æ‰¾åˆ°ç­”æ¡ˆã€‚ 2.1 æŒ‡é’ˆ 2.1.1 ä¸ºä»€ä¹ˆéœ€è¦æŒ‡é’ˆ é‡æ–°å®¡è§†å˜é‡ å˜é‡å¯ä»¥ç†è§£ä¸ºæŸå—å†…å­˜åŒºåŸŸåœ°å€åˆ«åï¼Œè¿™å—å†…å­˜åŒºåŸŸä¿å­˜å˜é‡çš„å€¼ã€‚ ä¸‹é¢ä¸¾ä¸€ä¸ªå®ä¾‹ï¼š 12int x = 0;x = 1; å¯¹åº”æ±‡ç¼–ä»£ç ï¼š 12movl $0, -12(%rbp)movl $1, -12(%rbp) å½“CPUæ‰§è¡Œint x = 0ï¼Œä¼šåœ¨å†…å­˜ï¼ˆè¿™é‡Œæ˜¯æ ˆï¼‰è…¾å‡ºä¸€å—åŒºåŸŸï¼ˆ-12(%rbp)ï¼‰ç”¨æ¥å­˜å‚¨å˜é‡xï¼›ç„¶åxæ‰€ä»£è¡¨çš„å†…å­˜åŒºåŸŸï¼ˆ-12(%rbp)ï¼‰è¢«å­˜å…¥0ã€‚ ç»§ç»­æ‰§è¡Œx=1ï¼Œ1è¢«å­˜å…¥å˜é‡xæ‰€ä»£è¡¨çš„å†…å­˜åŒºåŸŸã€‚ å¯ä»¥çœ‹åˆ°ï¼Œå˜é‡çš„å­˜åœ¨ä½¿å¾—æˆ‘ä»¬ï¼šä¸ç”¨è®°ä½ä¸ºåˆ†é…xçš„å†…å­˜åœ°å€æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬é€šè¿‡å˜é‡åxå°±å¯ä»¥ä½¿ç”¨åˆ†é…çš„å†…å­˜åŒºåŸŸã€‚å› ä¸ºä½¿ç”¨xæ—¶ï¼Œç¼–è¯‘å™¨ä¼šå°†å˜é‡xéšå¼è‡ªåŠ¨ç¿»è¯‘æˆå¯¹åº”çš„å†…å­˜åœ°å€ï¼ŒåŒæ—¶è¿›è¡Œé—´æ¥å¯»å€ï¼ˆå¯ä»¥ç†è§£ä¸ºä½¿ç”¨xç­‰ä»·äº*xï¼‰ã€‚ 12int x = 0; // ç¼–è¯‘å™¨çœ¼é‡Œï¼šint* x = -12(%rbp); *x = 0;x = 1; // ç¼–è¯‘å™¨çœ¼é‡Œï¼š *x = 1; æ—¢ç„¶æœ‰å¥½ç”¨åˆå¥½è®°çš„å˜é‡xå°±å¯ä»¥ï¼Œä¸ºä»€ä¹ˆè¿˜è¦ç”»è›‡æ·»è¶³èˆ¬åœ°æ˜¾ç¤ºä½¿ç”¨æŒ‡é’ˆå˜é‡ï¼Œå»å­˜å‚¨å†…å­˜åœ°å€ï¼Œå†æ¥æ“ä½œå˜é‡xï¼š 1234// å£°æ˜ä¸€ä¸ªæŒ‡é’ˆå˜é‡ï¼Œå®ƒå­˜å…¥xçš„åœ°å€int* p_x = &amp;x;// ä½¿ç”¨é—´æ¥æ“ä½œç¬¦*ï¼Œè®¿é—®p_xå­˜å‚¨çš„å†…å­˜åŒºåŸŸ*p_x = 10; å¯¹åº”çš„æ±‡ç¼–ä»£ç ä¹Ÿå˜å¾—è‡ƒè‚¿èµ·æ¥ï¼Œå› ä¸ºè¿˜å¤šäº†ç©ºé—´å»å­˜å‚¨æŒ‡é’ˆp_xï¼ˆå³ä½¿æ²¡æœ‰æ±‡ç¼–ç›¸å…³åŸºç¡€ä¹Ÿå»ºè®®é˜…è¯»ä¸€éï¼‰ï¼š 123456789# -12(%rbp)åœ°å€èµ‹å€¼ç»™å¯„å­˜å™¨raxï¼Œä¹Ÿå°±æ˜¯å˜é‡xçš„åœ°å€leaq -12(%rbp), %rax # cpuè…¾å‡ºä¸€å—å†…å­˜åŒºåŸŸï¼ˆå¯¹åº”åœ°å€-8(%rbp)ï¼‰ç»™æŒ‡é’ˆp_xï¼Œ# å¹¶æŠŠå˜é‡xçš„åœ°å€èµ‹å€¼ç»™p_xmovq %rax, -8(%rbp)# p_xçš„å€¼å­˜å‚¨åˆ°å¯„å­˜å™¨raxä¸­movq -8(%rbp), %rax# å°†ç«‹å³æ•°10å­˜å‚¨åˆ°å˜é‡xä»£è¡¨çš„å†…å­˜åŒºåŸŸä¸­movl $10, (%rax) ç°åœ¨æˆ‘ä»¬æ¥è¯´è¯´C++ä¸­æŒ‡é’ˆçš„å¥½å¤„ã€‚ æŒ‡é’ˆçš„å¥½å¤„ äº‹å®è¯æ˜ï¼ŒæŒ‡é’ˆåœ¨è®¸å¤šæƒ…å†µä¸‹éƒ½å¾ˆæœ‰ç”¨ï¼ˆä¸Šé¢çš„ä¾‹å­å½“ç„¶æ˜¯ä½¿ç”¨å˜é‡æ›´å¥½ï¼‰ï¼š éå†æ•°ç»„ã€‚æŒ‡é’ˆå¯ä»¥å¾ˆæ–¹ä¾¿çš„éå†æ•°ç»„ï¼Œå› ä¸ºæ•°ç»„æ˜¯ä½¿ç”¨æŒ‡é’ˆå®ç°çš„ï¼› åŠ¨æ€åˆ†é…å†…å­˜ã€‚åœ¨C++ä¸­åªèƒ½ä½¿ç”¨æŒ‡é’ˆæ¥åŠ¨æ€åˆ†é…å†…å­˜ï¼› å‡½æ•°ä½œä¸ºå‚æ•°æ—¶ã€‚å¯ä»¥ç”¨æ¥å°†ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œå³å‡½æ•°æŒ‡é’ˆï¼› å®ç°å¤šæ€æ€§ã€‚å®ƒä»¬å¯ç”¨äºå®ç°å¤šæ€æ€§ï¼Œåœ¨é¢å¯¹å¯¹è±¡ä¸­ä¼šè¯¦ç»†ä»‹ç»ï¼› æŒ‡å‘å¦ä¸€ä¸ªç»“æ„/ç±»ã€‚åœ¨ä¸€äº›æ›´é«˜çº§çš„æ•°æ®ç»“æ„ä¸­å¾ˆæœ‰ç”¨ï¼Œä¾‹å¦‚é“¾è¡¨å’Œæ ‘ã€‚ ä½†å¦ä¸€ä¸ªäº‹å®æ˜¯ï¼Œé™¤äº†åœ¨C++ä¸­ï¼ŒæŒ‡é’ˆçš„ä½¿ç”¨å¹¶éé‚£ä¹ˆå¿…è¦ã€‚å…¶å®ƒçš„é«˜çº§è¯­è¨€ä¸­ï¼Œå¾ˆå¤šå·²ç»æ‘’å¼ƒäº†æŒ‡é’ˆï¼ˆå¦‚.NETæˆ–Javaï¼‰ï¼š éå†æ•°ç»„ï¼šä¼ ç»Ÿçš„forå¾ªç¯ã€è¿­ä»£å™¨éƒ½å¯ä»¥æ›¿ä»£ï¼› åŠ¨æ€åˆ†é…å†…å­˜ï¼šå¾ˆå¤šé«˜çº§è¯­è¨€å¦‚Javaä¸ç”¨æŒ‡é’ˆå³å¯åŠ¨æ€åˆ†é…å†…å­˜ï¼ˆnewæ–¹å¼ï¼‰ï¼› å‡½æ•°ä½œä¸ºå‚æ•°ï¼šåœ¨javaä¸­å¯ä»¥é€šè¿‡ä½¿ç”¨æ¥å£å®ä¾‹ç­‰æ–¹å¼é—´æ¥å®ç°ï¼› å®ç°å¤šæ€æ€§ï¼šjavaæ— éœ€æŒ‡é’ˆå³å¯å®ç°ï¼› æŒ‡å‘å¦å¤–ä¸€ä¸ªç»“æ„ç±» ï¼šjavaç­‰ç›´æ¥ä½¿ç”¨å¼•ç”¨å³å¯ã€‚ æœ€ä½³å®è·µ æ ¹æ®å¤šä½C++å¤§å¸ˆçš„å»ºè®®ï¼Œå®é™…ç¼–ç å°½é‡ä¸è¦ä½¿ç”¨æŒ‡é’ˆï¼Œæ›¿ä»£ä½¿ç”¨å¼•ç”¨æˆ–è€…æ ‡å‡†åº“æ˜¯ç§æ›´å¥½çš„æ–¹å¼ã€‚ ä½†ç§ç§åŸå› ï¼Œä½œä¸ºä¸€ä¸ªC++ç¨‹åºå‘˜ï¼Œå¾ˆå¤šæƒ…å†µè¿˜æ˜¯é¿å…ä¸äº†å»æ¥è§¦å’Œä½¿ç”¨ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¾ˆæœ‰å¿…è¦æ·±å±‚æ¬¡äº†è§£æŒ‡é’ˆçš„ç”¨æ³•å’ŒåŸç†ã€‚ 2.1.2 æŒ‡é’ˆç®€ä»‹ æŒ‡é’ˆåˆè¯† å£°æ˜æŒ‡é’ˆä½¿ç”¨*ï¼Œè¿™ä¸ªæ—¶å€™*ä¸æ˜¯é—´æ¥æ“ä½œç¬¦ï¼Œå®ƒåªæ˜¯æŒ‡é’ˆè¯­æ³•çš„ä¸€éƒ¨åˆ†ï¼š 12int a = 10;int* p_a; // p_aä¹Ÿæ˜¯å˜é‡ï¼Œä¸è¿‡æ˜¯æŒ‡é’ˆå˜é‡ï¼Œå­˜å‚¨çš„æ˜¯ä¸€ä¸ªåœ°å€ï¼ˆaçš„ï¼‰ï¼Œä¸‹é¢ç®€ç§°ä¸ºæŒ‡é’ˆ è¿™é‡Œæœ‰ä¸¤ä¸ªæ³¨æ„äº‹é¡¹ï¼š æŒ‡é’ˆå˜é‡åœ¨å£°æ˜æ—¶å¦‚æœæ²¡è¢«åˆå§‹åŒ–ï¼Œé»˜è®¤åˆå§‹åŒ–è§„åˆ™å’Œæ™®é€šå˜é‡ä¸€æ ·ï¼Œå¯èƒ½åŒ…å«åƒåœ¾å€¼ï¼ˆæ¯”å¦‚å±€éƒ¨æŒ‡é’ˆå˜é‡ï¼‰ï¼› p_aè¢«ç§°ä¸ºâ€œæ•´æ•°æŒ‡é’ˆâ€ï¼Œå®é™…å«ä¹‰åº”è¯¥æ˜¯â€œæŒ‡å‘æ•´æ•°çš„æŒ‡é’ˆâ€ã€‚ ğŸ‘€ çœ¼ä¿å¥æ“ç¯èŠ‚ã€‚ åŒºåˆ†ä»¥ä¸‹æŒ‡é’ˆç±»å‹ï¼Ÿ 123int *p[10]int (*p)[10]int *p(int) æŒ‡é’ˆå’Œæ•°ç»„[] ç»“åˆä¸€èˆ¬æ‰è¦æ³¨æ„åŒºåˆ†ï¼Œå…¶ä½™æƒ…å†µå¤§å¤šæ˜¯è¡¨ç¤ºæŒ‡é’ˆã€‚ int *p[10] ï¼Œå¼ºè°ƒæ•°ç»„æ¦‚å¿µï¼Œæ­¤æ—¶pè¡¨ç¤ºæ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯int* ç±»å‹ï¼› int (*p)[10] ï¼Œç”¨() åœˆä½*p ï¼Œå¼ºè°ƒæŒ‡é’ˆæ¦‚å¿µï¼Œæ­¤æ—¶æŒ‡é’ˆp æŒ‡å‘ä¸€ä¸ªint ç±»å‹æ•°ç»„ï¼Œç­‰ä»·äº int *p = new int(10*sizeof(int)); ï¼› int *p(int) ï¼Œè¿™æ˜¯å‡½æ•°å£°æ˜æœ¬è´¨è¿˜æ˜¯æŒ‡é’ˆï¼ŒæŒ‡é’ˆp å­˜å‚¨çš„å‡½æ•°çš„åœ°å€ï¼Œåé¢çš„(int) è¡¨ç¤ºæ˜¯ä¸ªå‡½æ•°ã€‚ ç‰¹åˆ«çš„è¿˜æœ‰ï¼š 1int (*p)(int) åŒå‰ï¼Œç”¨() åœˆä½*p ï¼Œæ›´å¼ºè°ƒæŒ‡é’ˆæ¦‚å¿µï¼Œåé¢çš„(int) è¡¨ç¤ºæ˜¯ä¸ªå‡½æ•°ã€‚ èµ‹å€¼æ˜¯ä½¿ç”¨åœ°å€è¿ç®—ç¬¦&amp;ï¼š ä»ä¸‹ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼ŒæŒ‡é’ˆå’Œæ™®é€šå˜é‡åœ¨cpuçœ¼ä¸­æ— å¤šå¤§åŒºåˆ«ï¼Œåªä¸è¿‡æŒ‡é’ˆç”¨æ¥å­˜å‚¨åœ°å€ã€‚ 1p_a = &amp;a; // &amp;aè·å–äº†å˜é‡açš„åœ°å€ã€‚ &amp;p_aå¯è·å–æŒ‡é’ˆp_açš„åœ°å€ã€‚ 12cout&lt;&lt;p_a&lt;&lt;endl; // açš„åœ°å€ï¼Œ0x7ffc4f78721ccout&lt;&lt;&amp;p_a&lt;&lt;endl; // æŒ‡é’ˆp_açš„åœ°å€ï¼Œ0x7ffe903aae20 åœ°å€è¿ç®—ç¬¦éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š åœ°å€è¿ç®—ç¬¦ (&amp;) è¿”å›ä¸æ˜¯å˜é‡çš„åœ°å€ï¼Œè€Œæ˜¯ä¸€ä¸ªåŒ…å«å˜é‡åœ°å€çš„æŒ‡é’ˆ ï¼š 1std::cout &lt;&lt; typeid(&amp;a).name() &lt;&lt; &#x27;\\n&#x27;; è¾“å‡ºï¼š 1int * æŒ‡é’ˆåªèƒ½ä½¿ç”¨å·¦å€¼è¿›è¡Œèµ‹å€¼ ä»€ä¹ˆæ˜¯å·¦ï¼ˆlï¼‰å€¼å’Œå³ï¼ˆrï¼‰å€¼ï¼Ÿå¯å‚è€ƒä¸‹ä¸€å°èŠ‚ï¼šlå€¼å’Œrå€¼ã€‚ 12345int a = 0;int* b = a; // åˆæ³•ï¼Œå˜é‡bæ˜¯å·¦å€¼int* b = 1; // éæ³•ï¼Œæ–‡å­—1æ˜¯å³å€¼int* b = a+1; // éæ³•ï¼Œè¡¨è¾¾å¼a+1ä¹Ÿæ˜¯å³å€¼ å˜é‡å¯ä»¥ä¿®æ”¹å­˜å‚¨å…¶å®ƒçš„å€¼ï¼ŒæŒ‡é’ˆä¹Ÿå¯ä»¥æŒ‡å‘å…¶ä»–çš„å†…å­˜åŒºåŸŸï¼ˆå­˜å–å®ƒçš„åœ°å€ï¼‰ï¼š 12int b = 11; p_a = &amp;b; ä½¿ç”¨æŒ‡é’ˆæ˜¯é€šè¿‡é—´æ¥æ“ä½œç¬¦* ï¼š 12cout&lt;&lt; *p_a &lt;&lt;endl ; // 10, è¯»å–å€¼*p_a = 11; // ä¿®æ”¹ æŒ‡é’ˆå¤§å°å–å†³äºç¼–è¯‘å¯æ‰§è¡Œæ–‡ä»¶çš„ä½“ç³»ç»“æ„â€”â€”32 ä½å¯æ‰§è¡Œæ–‡ä»¶ä½¿ç”¨ 32 ä½å†…å­˜åœ°å€â€”â€”å› æ­¤ï¼Œ32 ä½æœºå™¨ä¸Šçš„æŒ‡é’ˆæ˜¯ 32 ä½ï¼ˆ4 å­—èŠ‚ï¼‰ã€‚å¯¹äº 64 ä½å¯æ‰§è¡Œæ–‡ä»¶ï¼ŒæŒ‡é’ˆå°†æ˜¯ 64 ä½ï¼ˆ8 å­—èŠ‚ï¼‰ã€‚ å®ƒå’ŒæŒ‡å‘çš„å¯¹è±¡å¤§å°æ— å…³ã€‚ 12345678int a = 10;int* p_a = &amp;a;char b = &#x27;1&#x27;;char* p_b = &amp;b;cout&lt;&lt;sizeof(p_a)&lt;&lt;endl;cout&lt;&lt;sizeof(p_b)&lt;&lt;endl; åœ¨ä½œè€…64ä½æœºå™¨ä¸Šè¾“å‡ºï¼š 1288 lå€¼å’Œrå€¼ ä»€ä¹ˆæ˜¯å·¦å€¼ï¼ˆlå€¼ï¼‰ï¼Ÿ å·¦å€¼æ˜¯å…·æœ‰åœ°å€ï¼ˆåœ¨å†…å­˜ä¸­ï¼‰çš„å€¼ã€‚ä¾‹å¦‚ï¼š å˜é‡æ˜¯ä¸€ç§å·¦å€¼ï¼ˆè¯»ä½œ ell-valueï¼‰ï¼Œå› ä¸ºæ‰€æœ‰å˜é‡éƒ½æœ‰åœ°å€ï¼› å½“æˆ‘ä»¬è¿›è¡Œèµ‹å€¼æ—¶ï¼Œèµ‹å€¼è¿ç®—ç¬¦=çš„å·¦ä¾§å¿…é¡»æ˜¯å·¦å€¼ï¼Œä½†=å³ä¾§å¯ä»¥æ˜¯å·¦å€¼ä¹Ÿå¯ä»¥æ˜¯å³å€¼ã€‚ ä¾‹å¦‚ï¼š 12345int a = 1; // æ­£ç¡®ï¼Œå˜é‡aå¯ä½œä¸ºå·¦å€¼int b = a; // æ­£ç¡®ï¼Œå˜é‡bä¹Ÿå¯ä½œä¸ºå³å€¼5 = 6; // å‡ºé”™ï¼Œ5ä¸æ˜¯å·¦å€¼ï¼Œæ²¡æœ‰åœ°å€a+1 = 3; // é”™è¯¯ï¼Œa+1æ˜¯å³å€¼ ä½ å¯èƒ½ä¼šç–‘æƒ‘ä¸ºä»€ä¹ˆè¡¨è¾¾å¼a æ˜¯å·¦å€¼ï¼Œa+1 æ˜¯å·¦å€¼ï¼Ÿ å› ä¸ºa+1æ²¡æœ‰è‡ªå·±çš„åœ°å€ï¼ˆä¸´æ—¶è®¡ç®—çš„ç»“æœå­˜å…¥å¯„å­˜å™¨ä¸­ï¼‰ï¼Œä»æ ¹æœ¬å¦å®šäº†å®ƒæ˜¯å·¦å€¼ã€‚ é‚£ä»€ä¹ˆåˆæ˜¯å³å€¼ï¼Ÿ ä¸å·¦å€¼ç›¸åçš„ä¾¿æ˜¯å³å€¼ï¼ˆrå€¼ï¼Œå³æ²¡æœ‰å†…å­˜åœ°å€ï¼‰ï¼Œå³å€¼å¯ä»¥æ–‡å­—ã€è¡¨è¾¾å¼ç­‰ï¼š 12int a = 1; // æ­£ç¡®ï¼Œ1æ˜¯å³å€¼a = a+1; // æ­£ç¡®ï¼Œa+1æ˜¯å³å€¼ ç‰¹åˆ«çš„ï¼Œåœ¨èµ‹å€¼è¿ç®—æ—¶ï¼Œæ‰€æœ‰å·¦å€¼ä¼šéšå¼è½¬æ¢ä¸ºå³å€¼ã€‚ 1int b = a; // aè¢«éšå¼è½¬æ¢ä¸ºå³å€¼ ç©ºæŒ‡é’ˆ ç©ºæŒ‡é’ˆæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æŒ‡é’ˆï¼Œå¯ä»¥é€šè¿‡â€œ0â€æ¥ä¸ºæŒ‡é’ˆåˆ†é…ç©ºå€¼ï¼Œè¡¨ç¤ºæ²¡æœ‰æŒ‡å‘ä»»ä½•ä¸œè¥¿ã€‚ 1int *p = 0; è¿™ä¼¼ä¹å¬èµ·æ¥æ²¡ä»€ä¹ˆç”¨ï¼Ÿ æ ¹æ®å˜é‡çš„æœ€ä½³å®è·µï¼Œå£°æ˜æ—¶æœ€å¥½è¿›è¡Œåˆå§‹åŒ–ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥å°†æŒ‡é’ˆè®¾ä¸ºç©ºå€¼å®Œæˆæœ€ä½³å®è·µã€‚ å¦‚ä¸‹ï¼Œæ­¤æ—¶æŒ‡é’ˆpæœªè¢«åˆå§‹åŒ–ï¼ˆä¹Ÿç§°é‡æŒ‡é’ˆï¼‰ï¼Œå°±è¢«ä½¿ç”¨äº†ã€‚ 1234567int main() &#123; int* p; // æœªåˆå§‹åŒ– std::cout&lt;&lt; *p &lt;&lt; std::endl; // æœªåˆå§‹åŒ–å°±è¢«ä½¿ç”¨ return 0;&#125; æ ¹æ®æœ€ä½³å®è·µå£°æ˜åŒæ—¶è¿›è¡Œåˆå§‹åŒ–ï¼Œint* p = 0 ï¼Œç„¶åå†ä½¿ç”¨ã€‚ ä½†ä½¿ç”¨0å€¼è¡¨ç¤ºç©ºæŒ‡é’ˆä¸å®‰å…¨ï¼Œè¯·ä½¿ç”¨nullptrå…³é”®å­—ã€‚ å› ä¸ºæ–‡å­—0ä¸æ˜¯ä»»ä½•ç±»å‹ï¼Œåœ¨å°‘æ•°æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨æ— æ³•åˆ¤æ–­æˆ‘ä»¬æ˜¯ä½¿ç”¨ç©ºæŒ‡é’ˆè¿˜æ˜¯æ•´æ•°0ã€‚ 123456789101112131415161718#include&lt;iostream&gt;using namespace std;void print(int* p)&#123; cout&lt;&lt;&quot;int* &quot;&lt;&lt;endl;&#125;void print(int p)&#123; cout&lt;&lt;&quot;int &quot;&lt;&lt;endl;&#125;int main()&#123; print(0); // è™½ç„¶æˆ‘ä»¬å¸Œæœ›ä¼ å…¥ç©ºæŒ‡é’ˆï¼Œä½†æ˜¯ç¼–è¯‘å™¨è§£é‡Šä¸ºint return 0;&#125; è¾“å‡ºï¼š 1int ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼ŒC++11 å¼•å…¥äº†ä¸€ä¸ªæ–°çš„å…³é”®å­—nullptr ï¼Œç§°ä¸º ç©ºæŒ‡é’ˆã€‚ C++ ä¼šéšå¼åœ°å°† nullptr è½¬æ¢ä¸ºä»»ä½•æŒ‡é’ˆç±»å‹ã€‚ 1int *p = nullptr ; åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œnullptrè¢«éšå¼è½¬æ¢ä¸ºæ•´æ•°æŒ‡é’ˆï¼Œç„¶åå°†nullptrçš„å€¼èµ‹ç»™ptrã€‚è¿™å…·æœ‰ä½¿æ•´æ•°æŒ‡é’ˆ ptr æˆä¸ºç©ºæŒ‡é’ˆçš„æ•ˆæœã€‚ voidæŒ‡é’ˆ voidæŒ‡é’ˆï¼Œä¹Ÿç§°ä¸ºæ³›å‹æŒ‡é’ˆï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„æŒ‡é’ˆï¼Œå¯ä»¥æŒ‡å‘ä»»ä½•æ•°æ®ç±»å‹çš„å¯¹è±¡ã€‚ 123456int nValue;float fValue;void* ptr;ptr = &amp;nValue;ptr = &amp;fValue; ä½†ä¹Ÿæœ‰ç”±äºè¿™ç§ä¸ç¡®å®šçš„åŒ…å®¹ç‰¹æ€§ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä½¿ç”¨voidæŒ‡é’ˆæ—¶è½¬æ¢ä¸ºå…·ä½“çš„æŒ‡é’ˆï¼š 1*static_cast&lt;int*&gt;(voidPtr) = 1; voidæŒ‡é’ˆæœ‰ä»€ä¹ˆç”¨ï¼Ÿ è¿™ç§ç‰¹æ€§ä½¿å¾—voidæŒ‡é’ˆå¯ä»¥åœ¨ä¸€ä¸ªå‡½æ•°å¤„ç†å¤šç§ç±»å‹çš„æ•°æ®ã€‚ ä»¥ä¸‹å‡½æ•°å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨â€œæ³›å‹æŒ‡é’ˆâ€ä½œä¸ºå‡½æ•°å‚æ•°ï¼ˆC++20å‰æ˜¯ä¸å…è®¸ä½¿ç”¨autoç±»å‹çš„å‚æ•°ï¼‰ï¼Œå»å¤„ç†å¤šç§ç±»å‹çš„å®å‚ã€‚ 1234567891011121314151617181920212223242526272829303132333435#include &lt;iostream&gt;#include &lt;cassert&gt;enum class Type&#123; tInt, tFloat,&#125;;void printValue(void* ptr, Type type)&#123; switch (type) &#123; case Type::tInt: std::cout &lt;&lt; *static_cast&lt;int*&gt;(ptr) &lt;&lt; &#x27;\\n&#x27;; break; case Type::tFloat: std::cout &lt;&lt; *static_cast&lt;float*&gt;(ptr) &lt;&lt; &#x27;\\n&#x27;; break; break; default: assert(false &amp;&amp; &quot;type not found&quot;); break; &#125;&#125;int main()&#123; int nValue&#123; 5 &#125;; float fValue&#123; 7.5f &#125;; printValue(&amp;nValue, Type::tInt); printValue(&amp;fValue, Type::tFloat); return 0;&#125; ä½†ä¸€æ–¹é¢å®ƒçœ‹èµ·æ¥ä¹Ÿå¾ˆå‚»ï¼š å› ä¸ºæˆ‘ä»¬å¾€å¾€æœ‰æ›´å¥½çš„åŠæ³•æ›¿ä»£voidæŒ‡é’ˆï¼Œæ¯”å¦‚æ¨¡æ¿ã€‚ ç›¸æ¯”å‰é¢ä»£ç æ›´åŠ æ¸…æ™°ï¼Œç®€æ´ã€‚ 12345template &lt;typename T&gt;void printValue(T ptr)&#123; std::cout &lt;&lt; ptr &lt;&lt; &#x27;\\n&#x27;; &#125; voidæŒ‡é’ˆä¹Ÿå¹¶ä¸å®‰å…¨ï¼Œå®ƒæ²¡æœ‰ç±»å‹æ£€æŸ¥ æ²¡æœ‰ç¼–è¯‘å™¨è‡ªåŠ¨çš„ç±»å‹æ£€æŸ¥ï¼Œä½ åˆç²—å¿ƒå†™ä½œäº†ä¼ å…¥çš„å‚æ•°ç±»å‹ï¼Œè¿™æ˜¾ç„¶å¾ˆç³Ÿç³•ã€‚ 12float fValue2&#123; 5.4 &#125;;printValue(&amp;fValue2, Type::tInt); æœ€ä½³å®è·µï¼šå°½é‡å‡å°‘ä½¿ç”¨voidæŒ‡é’ˆï¼Œé™¤éçœŸçš„æ‰¾ä¸åˆ°ç¬¬äºŒä¸ªæ›´å¥½çš„åŠæ³•æ¥è¿›è¡Œæ›¿ä»£ã€‚ ç®­å¤´è¿ç®—ç¬¦å†æ€è€ƒ å¯¹äºæ™®é€šç±»/ç»“æ„ä½“çš„å¯¹è±¡ï¼Œæˆ‘ä»¬ä½¿ç”¨æˆå‘˜é€‰æ‹©è¿ç®—ç¬¦.é€‰æ‹©æˆå‘˜ã€‚ 12345678struct Person&#123; int age; double weight;&#125;;Person person;person.age = 5; ä½†æˆ‘ä»¬ä¹Ÿè¢«å‘ŠçŸ¥ï¼Œå¦‚æœæ˜¯ä¸ªæŒ‡é’ˆå¯¹è±¡ï¼Œè¯·ä½¿ç”¨ç®­å¤´-&gt;è¿ç®—ç¬¦ï¼š 12Person* p_person = &amp;person ;p_person-&gt;age = 6; ä½†è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ä¸ç¦æƒ³èµ·ä»¥å‰å¦‚ä½•ä½¿ç”¨ä¸€ä¸ªæŒ‡é’ˆï¼š 12int a = 10;int* p_a = &amp;a; ä½¿ç”¨é—´æ¥æ“ä½œç¬¦* è®©æˆ‘ä»¬è·å–äº†æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ï¼Œç„¶åè¿›è¡Œæ“ä½œï¼š 1*p_a = 11; é‚£ä¹ˆæˆ‘ä»¬ç”¨* è·å–p_person æŒ‡å‘çš„ç»“æ„ä½“å¯¹è±¡ï¼Œä¸å°±å¯ä»¥åƒæ™®é€šç»“æ„ä½“å¯¹è±¡ä¸€æ ·ä½¿ç”¨æˆå‘˜è¿ç®—ç¬¦.å—ï¼Ÿ 1(*p_person).age = 6; // ç­‰ä»·äºï¼šperson.age = 6; æ›´å¤šçš„ä¾‹å­ï¼š 12Person* p_person2 = new Person();(*p_person2).age = 7; 2.1.3 æŒ‡é’ˆå’Œæ•°ç»„ æŒ‡é’ˆå’Œæ•°ç»„å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æœ‰æ—¶å¾ˆå…·æœ‰è¿·æƒ‘æ€§ï¼Œç‰¹åˆ«æ˜¯å¾ˆå¤šæ—¶å€™ç¼–è¯‘å™¨ä¼šå°†æ•°ç»„é€€åŒ–æˆæŒ‡é’ˆä½¿ç”¨ã€‚ä»¥è‡³äºæœ‰äº›äººé”™è¯¯åœ°å°†æ•°ç»„ç­‰ä»·äºæŒ‡é’ˆã€‚ ç°åœ¨æˆ‘ä»¬æ¥è¿›è¡Œä»”ç»†çš„åŒºåˆ†å’Œæ€»ç»“ã€‚ æŒ‡é’ˆåŠ å‡æ³• ä¸è¿‡åœ¨æ­¤ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸‹æŒ‡é’ˆåŠ å‡æ³•æœ‰åˆ©äºæ›´å¥½åœ°ç»§ç»­å¾€ä¸‹åˆ†æã€‚ C++ è¯­è¨€å…è®¸å¯¹æŒ‡é’ˆæ‰§è¡Œæ•´æ•°åŠ å‡è¿ç®—ï¼š å¦‚æœptræŒ‡å‘ä¸€ä¸ªæ•´æ•°ï¼Œptr + 1åˆ™ä¸º ptr ä¹‹åå†…å­˜ä¸­ä¸‹ä¸€ä¸ªæ•´æ•°çš„åœ°å€ï¼›ptr - 1æ˜¯å‰ä¸€ä¸ªæ•´æ•°çš„åœ°å€ptrã€‚ æ¢å¥è¯è¯´ï¼Œåœ¨è®¡ç®—æŒ‡é’ˆç®—æœ¯è¡¨è¾¾å¼çš„ç»“æœæ—¶ï¼Œç¼–è¯‘å™¨æ€»æ˜¯å°†æ•´æ•°æ“ä½œæ•°ä¹˜ä»¥æ‰€æŒ‡å‘å¯¹è±¡çš„å¤§å°ã€‚ 1234567891011121314#include &lt;iostream&gt;int main()&#123; int value&#123; 7 &#125;; int* ptr&#123; &amp;value &#125;; std::cout &lt;&lt; ptr &lt;&lt; &#x27;\\n&#x27;; std::cout &lt;&lt; ptr+1 &lt;&lt; &#x27;\\n&#x27;; std::cout &lt;&lt; ptr+2 &lt;&lt; &#x27;\\n&#x27;; std::cout &lt;&lt; ptr+3 &lt;&lt; &#x27;\\n&#x27;; return 0;&#125; è¾“å‡ºï¼š 12340x7ffd05328dfc0x7ffd05328e000x7ffd05328e040x7ffd05328e08 å¯ä»¥çœ‹åˆ°æ¯ä¸ªåœ°å€ç›¸å·®4å­—èŠ‚ï¼ˆä¸€ä¸ªintå¤§å°ï¼‰ï¼Œæ¯”å¦‚ï¼š0x7ffd05328e00-0x7ffd05328dfc=4ã€‚è¿™é‡Œçš„åœ°å€æ˜¯è™šæ‹Ÿåœ°å€ï¼Œ4å°±è¡¨ç¤º4ä¸ªå­—èŠ‚ã€‚ æŒ‡é’ˆå’Œæ•°ç»„çš„åŒºåˆ«ğŸŒŸ â€œä¸‡ç‰©çš†ä¸ºæŒ‡é’ˆï¼Œæ•°ç»„é¦–å½“å…¶å†²â€ã€‚ å£°æ˜ä¸€ä¸ªï¼ˆé™æ€ï¼‰æ•°ç»„å¾ˆç®€å•ï¼š 123int arr1[3] = &#123;1,2,3&#125;;int new_arr[3] = &#123;4,5,6&#125;;arr1 = new_arr; // errorï¼Œæ•°ç»„æ— æ³•é‡æ–°åˆ†é…æŒ‡å‘æ–°ï¼Œå¯ä»¥ç†è§£ä¸ºæ­¤æ—¶æ•°ç»„æ˜¯å¸¸é‡æŒ‡é’ˆï¼ˆåŒºåˆ†æŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆï¼‰ ä½†å¾ˆå¤šæ—¶å€™æˆ‘ä»¬æ›´å¸Œæœ›ç”³è¯·ä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼ˆæ¯”å¦‚å£°æ˜æ—¶å¹¶ä¸ç¡®å®šæ•°ç»„çš„å†…å®¹ï¼‰ï¼š 12int* arr2 = new int[3]&#123;1,2,3&#125;;arr2 = new int[2]&#123;1,2&#125;; // okï¼ŒæŒ‡é’ˆå¯ä»¥åˆ†é…æ–°å†…å­˜åŒºåŸŸ new int[3]&#123;1,2,3&#125; è¿”å›äº†ä¸€ä¸ªint* æŒ‡é’ˆï¼Œå­˜å‚¨åˆ†é…çš„æ•°ç»„ç©ºé—´é¦–åœ°å€ï¼Œç„¶åèµ‹å€¼ç»™arr2 ã€‚ ä½“ä¼šä¸€ä¸‹ä¸‹é¢åœºæ™¯ä¸‹çš„arr2 å’Œ arr1 è¡¨ç°ä½•å…¶åƒï¼š ä½œä¸ºè¡¨è¾¾å¼ä½¿ç”¨æ—¶ æ­¤æ—¶æ•°ç»„è¡¨ç°çš„å°±æ˜¯æŒ‡é’ˆï¼Œå­˜å‚¨äº†æ•°ç»„å…ƒç´ é¦–åœ°å€ã€‚ 1234567891011121314int arr1[3] = &#123;1,2,3&#125;;int* arr2 = new int[3]&#123;1,2,3&#125;;// 1.æ‰“å°æ•°ç»„/æŒ‡é’ˆcout&lt;&lt;arr1&lt;&lt;endl; // 0x7fff61b6b7d0ï¼Œæ•°ç»„é¦–å…ƒç´ åœ°å€cout&lt;&lt;arr2&lt;&lt;endl; // 0x97b010ï¼Œæ•°ç»„é¦–å…ƒç´ åœ°å€ï¼Œå› ä¸ºåŠ¨æ€æ•°ç»„åˆ†é…åœ¨å †ä¸Šä¸åœ¨æ ˆä¸Šï¼Œåœ°å€ç©ºé—´ä½æ•°æ˜¾å¾—æœ‰äº›ä¸åŒ// 2.æ‰“å°æ•°ç»„/æŒ‡é’ˆé¦–å…ƒç´ cout&lt;&lt;*arr1&lt;&lt;endl; // 1cout&lt;&lt;*arr2&lt;&lt;endl; // 1// 3.æ‰“å°ç¬¬äºŒä¸ªå…ƒç´ cout&lt;&lt;*(arr1+1)&lt;&lt;endl; // 2cout&lt;&lt;*(arr2+1)&lt;&lt;endl; // 2 è¿™æ˜¯å› ä¸ºC++ä¸­å¦‚æœæŠŠæ•°ç»„ä½œä¸ºè¡¨è¾¾å¼ä½¿ç”¨ï¼Œä¼šè¡°å‡ä¸ºä¸€ä¸ªæŒ‡é’ˆã€‚ æ•°ç»„ä½œä¸ºå‚æ•°æ—¶ å°†æ•°ç»„ä½œä¸ºå‚æ•°ä¼ é€’æ—¶ï¼Œæ•°ç»„åœ¨å‡½æ•°å†…éƒ¨è¡¨ç°å¾—å·²ç»æ˜¯ä¸€ä¸ªæŒ‡é’ˆã€‚ 123456789101112131415#include &lt;iostream&gt;using namespace std;void printSize(int arr[])&#123; cout &lt;&lt; &quot;in printArray: &quot; &lt;&lt; sizeof(arr) &lt;&lt; endl; &#125;int main()&#123; int array[] = &#123;1,2,3,4,5&#125;; cout &lt;&lt;&quot;in main: &quot; &lt;&lt; sizeof(array) &lt;&lt; endl; printSize(array); return 0;&#125; è¾“å‡ºï¼š 12in main: 20in printArray: 8 è¿™ç§æƒ…å†µæ˜¯å› ä¸ºï¼Œåœ¨C++ä¸­å¤åˆ¶æ•°ç»„ä»£ä»·å¯èƒ½ä¼šæ˜‚è´µã€‚å› æ­¤å°†æ•°ç»„ä¼ é€’ç»™å‡½æ•°æ—¶ï¼Œä¸ä¼šå¤åˆ¶æ•°ç»„ï¼Œè€Œæ˜¯å›ºå®šæ•°ç»„è¡°å‡ä¸ºæŒ‡é’ˆï¼Œç„¶åå°†æŒ‡é’ˆä¼ é€’ç»™å‡½æ•°ã€‚ ä¸Šè¿°è¿°ä»£ç ä¸­ï¼Œæ•°ç»„arrayç±»å‹æ˜¯int[5] ï¼Œä½œä¸ºå®å‚æ—¶ï¼Œé€€åŒ–ä¸ºæŒ‡é’ˆint * ï¼Œä¿å­˜çš„æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€å³&amp;array[0]ï¼Œç„¶åå¤åˆ¶ä¸€ä»½ç»™å½¢å‚arrã€‚ é¢˜å¤–è¯ï¼Œå½“æ•´ä¸ªç»“æ„æˆ–ç±»ä¼ é€’ç»™å‡½æ•°æ—¶ä¸ä¼šè¡°å‡ã€‚ ä¹Ÿæ­£æ˜¯å› ä¸ºC++ ä½¿ç”¨æ•°ç»„è¯­æ³• [] ä¼šå°†æ•°ç»„è¡°å‡ä¸ºæŒ‡é’ˆã€‚è¿™æ„å‘³ç€ä»¥ä¸‹ä¸¤ä¸ªå‡½æ•°å£°æ˜æ˜¯ç›¸åŒçš„ï¼š 12void printSize(int array[]); void printSize(int* array); // æœ€ä½³å®è·µï¼šæŒ‡é’ˆè¯­æ³• (*) ä¼˜äºæ•°ç»„è¯­æ³• ([])ï¼Œå®ƒæ›´è¡¨æ˜å®é™…æ¥å—çš„å‚æ•°ç±»å‹ï¼ŒC++ä¹Ÿä¸ç”¨éšå¼è½¬æ¢ æ‰€ä»¥è¯´ï¼Œæ•°ç»„â‰ æŒ‡é’ˆï¼Œåªæ˜¯åœ¨æŸäº›åœºæ™¯ä¸‹é€€åŒ–æˆäº†æŒ‡é’ˆè€Œå·²ï¼Œæ¯”å¦‚ä½œä¸ºè¡¨è¾¾å¼æˆ–è€…å‡½æ•°å‚æ•°æ—¶ã€‚ æ›´å‡†ç¡®æ¥è¯´æ˜¯é€€åŒ–æˆäº†å¸¸é‡æŒ‡é’ˆï¼å› ä¸ºæ•°ç»„æœ¬èº«é»˜è®¤æ˜¯å¸¸é‡æ•°ç»„ï¼Œæ— æ³•ä½œä¸ºå·¦å€¼ã€‚ 123456void print(int arr[])&#123; arr = 0x778555622; // errorï¼Œä½œä¸ºå·¦å€¼ new_arr = new int[]&#123;1,2,3&#125;; arr = new_arr; v // errorï¼Œä½œä¸ºå·¦å€¼&#125; é¢˜å¤–è¯ï¼Œæ­£ç”±äºè¿™ç§ç‰¹æ€§ï¼Œæˆ‘ä»¬å¾€å¾€ä¸å¾—ä¸ä¼ é€’æ•°ç»„å‚æ•°æ—¶è¿˜ä¼ é€’æ•°ç»„é•¿åº¦ã€‚å› ä¸ºä½ æ— æ³•æ ¹æ®æŒ‡é’ˆè·å–åˆ°å…¶é•¿åº¦ã€‚ 123456789101112131415#include &lt;iostream&gt;using namespace std;void printArray(int arr[],int len)&#123; for(int i=0; i&lt;len; i++) cout&lt;&lt;arr[i]&lt;&lt;endl;&#125;int main()&#123; int len = sizeof (arr) / sizeof (arr[0]); printArray(array,len); return 0;&#125; è¿™é‡Œæˆ‘ä»¬è¿›è¡Œæ›´è¯¦ç»†çš„æ€»ç»“ï¼Œæ•°ç»„å’ŒæŒ‡é’ˆçš„åŒºåˆ«ã€‚ æ•°ç»„å’ŒæŒ‡é’ˆå…³é”®åŒºåˆ«åœ¨äºï¼šç±»å‹ã€æ˜¯ç¬¦å·ä¸æ˜¯å˜é‡ã€sizeofç­‰ã€‚ sizeof ï¼šsizeof(æ•°ç»„) æ‰“å°çš„æ˜¯æ•°ç»„çš„é•¿åº¦ï¼ˆå®¹é‡*å­˜å‚¨ç±»å‹æ‰€å å­—èŠ‚æ•°ï¼‰ï¼Œä½†æ˜¯sizeof(æŒ‡é’ˆ) æ‰“å°çš„æ˜¯æŒ‡é’ˆé•¿åº¦ï¼Œä¸€èˆ¬æ˜¯4å­—èŠ‚æˆ–8å­—èŠ‚ï¼› ç±»å‹ï¼šæ•°ç»„ç±»å‹æ˜¯ type[LEN] ï¼ŒæŒ‡é’ˆç±»å‹æ˜¯ type* ï¼› å®šä¹‰ï¼šæ•°ç»„æ˜¯ä¸€ä¸ªç¬¦å·ï¼Œæ²¡æœ‰è‡ªå·±çš„å­˜å‚¨ç©ºé—´ï¼›æŒ‡é’ˆæ˜¯ä¸€ä¸ªå˜é‡ï¼Œæœ‰è‡ªå·±çš„å†…å­˜ç©ºé—´ï¼Œå­˜å‚¨å…¶å®ƒå˜é‡çš„åœ°å€ã€‚ å¯ä»¥ä¿®æ”¹ä¸€ä¸ªæŒ‡é’ˆï¼š 12int* array = new int[5]&#123;1,2,3,4,5&#125;;array = NULL; // æ­£ç¡®ï¼Œarrayæ˜¯æŒ‡é’ˆï¼Œå­˜å‚¨æ˜¯æ•°ç»„é¦–åœ°å€ ä½†ä½ å°è¯•ä¿®æ”¹æ•°ç»„å†…å®¹æ˜¯ä¼šå‡ºé”™çš„ï¼š 12int array[] = &#123;1,2,3,4,5&#125;;array = NULL; // ç¼–è¯‘é”™è¯¯ï¼Œarrayæ˜¯ç¬¦å·ï¼Œä¸æ˜¯å¯ä»¥è¢«ä¿®æ”¹çš„å·¦å€¼ å¦å¤–ï¼Œå¦‚æœä½ å°è¯•æ‰“å°arrayçš„åœ°å€ï¼Œä¹Ÿä¼šå‘ç°å®ƒå¹¶æ²¡æœ‰å±äºè‡ªå·±çš„åœ°å€ï¼š 123int array[] = &#123;1,2,3,4,5&#125;;cout&lt;&lt;array; // 0x7ffffabf61f0ï¼Œarray[0]çš„åœ°å€cout&lt;&lt;&amp;array; // 0x7ffffabf61f0ï¼Œæ²¡æœ‰æ•°ç»„è‡ªå·±çš„åœ°å€ï¼Œè€Œæ˜¯array[0]çš„åœ°å€ &amp;array è¿”å›ä¸€ä¸ªæŒ‡å‘æ•´ä¸ªæ•°ç»„çš„æŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆä¹ŸæŒ‡å‘æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œåªæ˜¯ç±»å‹ä¿¡æ¯ä¸åŒï¼ˆç±»å‹&amp;array æ˜¯ int(*)[5]ï¼‰ã€‚ ä½†æ˜¯æ¯ä¸ªæŒ‡é’ˆéƒ½æœ‰è‡ªå·±çš„åœ°å€ï¼š 123int* array = new int[5]&#123;1,2,3,4,5&#125;;cout&lt;&lt;array; // 0x7f3010ï¼Œarray[0]çš„åœ°å€cout&lt;&lt;&amp;array; // 0x7ffcff233b48ï¼ŒæŒ‡é’ˆæœ¬èº«çš„åœ°å€ ä¿®æ”¹ã€‚æ•°ç»„æ— æ³•è¢«é‡æ–°åˆå§‹åŒ–/åˆ†é…ï¼ŒæŒ‡é’ˆï¼ˆåŠ¨æ€æ•°ç»„ï¼‰å¯ä»¥ã€‚ []å†ç†è§£ å‰é¢æˆ‘ä»¬æåˆ°ï¼ŒC++ ä½¿ç”¨æ•°ç»„è¯­æ³• [] ä¼šå°†æ•°ç»„è¡°å‡ä¸ºæŒ‡é’ˆ* ï¼Œè®©æˆ‘ä»¬æ›´å¥½åœ°è®¿é—®æ•°ç»„å…ƒç´ ï¼š 123int arr1[3] = &#123;1,2,3&#125;;arr[1]; // ç­‰ä»·äº *(arr+1) ä¸Šè¿°äº‹å®è¯æ˜ï¼Œå½“ç¼–è¯‘å™¨çœ‹åˆ°ä¸‹æ ‡è¿ç®—ç¬¦ï¼ˆ[]ï¼‰æ—¶ï¼Œå®ƒå®é™…ä¸Šå°†å…¶è½¬æ¢ä¸ºæŒ‡é’ˆåŠ æ³•å’Œé—´æ¥å¯»å€ã€‚ ä¸ºäº†æ›´å¥½è¯´æ˜è¿™ä¸€ç‚¹ï¼Œè¯·çœ‹ä¸‹é¢ä»£ç ï¼šè¾“å‡ºä¼šæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ 12345678910#include &lt;iostream&gt;int main()&#123; int arr[]&#123; 1, 2, 3 &#125;; std::cout &lt;&lt; 2[arr] &lt;&lt; &#x27;\\n&#x27;; return 0;&#125; è¾“å‡ºï¼š 12 ä¸‹æ ‡è¿ç®—ç¬¦ ( []) ç­‰åŒäºåŠ æ³•å’Œé—´æ¥æ³•ï¼Œæ“ä½œæ•°å¯ä»¥äº¤æ¢ï¼Œå› æ­¤å®ƒç­‰ä»·äºï¼š 1*(2+arr) cout å’Œæ•°ç»„ ä¸çŸ¥é“è¯»è€…æœ‰æ²¡æœ‰æ³¨æ„åˆ°ä¸€ä¸ªæœ‰è¶£çš„äº‹æƒ…ï¼Œcoutä¼šè‡ªåŠ¨éå†charæ•°ç»„æ‰“å°æ‰€æœ‰å­—ç¬¦ã€‚ 12char c_arr[] = &quot;hello&quot;;cout&lt;&lt;c_arr&lt;&lt;endl; è¾“å‡ºï¼š 1hello ç†è®ºä¸Šï¼Œæ­¤æ—¶è¾“å‡ºåº”è¯¥æ˜¯æ•°ç»„é¦–é€‰ç»„hçš„é¦–åœ°å€ã€‚å°±åƒä¸‹é¢çš„intæ•°ç»„ï¼š 12int i_arr[] = &#123;1,2,3&#125;;cout&lt;&lt;i_arr&lt;&lt;endl; è¾“å‡ºï¼š 10x7fff74ecdc70 è¿™æ˜¯å› ä¸ºstd::coutä¸Šçš„&lt;&lt;è¿ç®—ç¬¦å·²é‡è½½ï¼Œ å®é™…ä¸Šæ˜¯å‡ ä¸ªä¸åŒçš„å‡½æ•°ï¼Œéƒ½å‘½åä¸ºoperator&lt;&lt;ã€‚å®ƒçš„è¡Œä¸ºå–å†³äºæ“ä½œæ•°ç±»å‹ï¼Œç¼–è¯‘å™¨ç”±æ­¤å†³å®šè¦è°ƒç”¨å“ªä¸ªå‡½æ•°ã€‚ å¦‚æœç»™å®ƒä¸€ä¸ªchar*æˆ–const char*ï¼Œå®ƒä¼šæŠŠæ“ä½œæ•°å½“ä½œä¸€ä¸ªæŒ‡å‘Cæ ·å¼å­—ç¬¦ä¸²(ç¬¬ä¸€ä¸ªå­—ç¬¦)çš„æŒ‡é’ˆï¼Œå¹¶é¡ºåºç§»åŠ¨è¾“å‡ºå‰©ä¸‹çš„å­—ç¬¦ä¸²ã€‚ ä¸Šé¢99% çš„æƒ…å†µä¸‹éƒ½å¾ˆæ£’ï¼Œä½†å®ƒä¾æ—§å¯èƒ½ä¼šå¯¼è‡´æ„æƒ³ä¸åˆ°çš„ç»“æœã€‚ ä¸‹é¢ä»£ç å°è¯•æ‰“å°ä¸€ä¸ªcharç±»å‹å­—ç¬¦çš„åœ°å€ã€‚ 123456789#include &lt;iostream&gt;int main()&#123; char c&#123; &#x27;Q&#x27; &#125;; std::cout &lt;&lt; &amp;c; return 0;&#125; è¾“å‡ºï¼š 1Qâ• â• â• â• â•œâ•¡4;Â¿â– A å¥½å§ï¼Œè¿™ç§æƒ…å†µä¸ä¸€å®šä¼šå‘ç”Ÿï¼Œç¼–è¯‘å™¨å¯èƒ½å·²ç»ç»™æˆ‘ä»¬åšäº†ä¼˜åŒ–ã€‚ä½†æ˜¯å¦‚æœå‘ç”Ÿäº†ï¼Œä½ éœ€è¦çŸ¥é“ä¸ºä»€ä¹ˆï¼š &amp;c å…·æœ‰ char* ç±»å‹ï¼Œå› æ­¤ std::cout å°è¯•å°†å…¶æ‰“å°ä¸ºå­—ç¬¦ä¸²ï¼Œç›´åˆ°é‡åˆ°\\0; ä½†å¾ˆä¸å¹¸åœ°ä¸‹ä¸€ä¸ªåœ°å€æ˜¯åƒåœ¾å€¼ï¼Œç›´åˆ°å®ƒç»ˆæ­¢å‰æ‰“å°äº†ä¸€å †åƒåœ¾å­—ç¬¦ä¸²ã€‚ è¿™ä¸ªä¾‹å­åœ¨ç°å®æƒ…å†µä¸å¤ªå¯èƒ½å‘ç”Ÿï¼Œä½†å¯¹æˆ‘ä»¬ç†è§£std::cout å¦‚ä½•å·¥ä½œå¾ˆæœ‰å¸®åŠ©ã€‚ 2.1.4 æŒ‡é’ˆå’Œconst æŒ‡é’ˆå’Œconstçš„ç»„åˆé€šå¸¸è®©äººæ„Ÿè§‰å¾ˆè¿·æƒ‘ï¼Œå›½å†…çš„ç›¸å…³è€ƒè¯•ä¹Ÿæ²¡å°‘æŠ˜ç£¨è¿‡ä½œè€…ã€‚æœ¬èŠ‚ï¼Œä½œè€…å°†å°½é‡å°è¯•ç”¨æ¸…æ™°ã€ç®€æ´çš„è¯­è¨€è¯´æ˜ã€‚ æŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆ ä¸€ä¸ªæŒ‡å‘å¸¸é‡å€¼çš„æŒ‡é’ˆæ˜¯æŒ‡å‘å¸¸é‡å€¼çš„ï¼ˆéå¸¸é‡ï¼‰æŒ‡é’ˆï¼Œå®ƒé€šå¸¸è¢«å¦‚æ­¤å£°æ˜ï¼ˆconstä½äº*å·¦ä¾§å³å¯ï¼‰ï¼š 123456int value = 5;// ä¸‹é¢ä¸¤ç§å£°æ˜æ–¹å¼ç­‰åŒ// åªèƒ½ä½¿ç”¨å³å€¼è¿›è¡Œåˆå§‹åŒ–/èµ‹å€¼// å¯ä»¥æŒ‡å‘éå¸¸é‡å˜é‡ï¼Œä½†é€šè¿‡æŒ‡é’ˆè®¿é—®æ—¶è¯¥å˜é‡è¢«è§†ä¸ºå¸¸é‡const int* p_value = &amp;value;int const * p_value = &amp;value; â€œæŒ‡å‘å¸¸é‡å€¼çš„æŒ‡é’ˆâ€ï¼Œè¿™é‡Œå¼ºè°ƒäº†ä¸¤ä¸ªè¦ç´ ï¼š æŒ‡é’ˆæ˜¯éconstçš„ï¼Œæ‰€ä»¥å®ƒæœ¬èº«å¯ä»¥è¢«ä¿®æ”¹ï¼ˆå­˜å‚¨çš„åœ°å€ï¼‰ï¼› æŒ‡é’ˆæŒ‡å‘çš„å˜é‡æ˜¯constçš„ï¼Œå®ƒä¸èƒ½é€šè¿‡æŒ‡é’ˆè¢«ä¿®æ”¹ï¼ˆå­˜å‚¨çš„åœ°å€å¯¹åº”çš„å†…å­˜åŒºåŸŸï¼Œå³å˜é‡ï¼‰ã€‚ å¬èµ·æ¥æœ‰ç‚¹ç»•ï¼Œä¸¾ä¸ªä¾‹å­è¯´æ˜ï¼š æŒ‡é’ˆæŒ‡å‘çš„å˜é‡æ— æ³•è¢«ä¿®æ”¹ 1234int value = 5;const int* p_value = &amp;value; // æŒ‡å‘â€œconst intâ€// å°è¯•ä¿®æ”¹å˜é‡valueçš„å€¼*p_value = 6; // éæ³• æ›´æ·±åˆ»åœ°ç†è§£ï¼šæŒ‡é’ˆæŒ‡å‘æ•´ä¸ªå†…å­˜åŒºåŸŸéƒ½ä¸èƒ½è¢«ä¿®æ”¹ã€‚ 12const int* p_array = new int&#123;1,2,3&#125;;cout&lt;&lt;*(p_array+1)&lt;&lt;endl; // ok p_arrayæŒ‡å‘çš„å¥½åƒåªæ˜¯æ˜¯é¦–å…ƒç´ ï¼ˆä¿å­˜çš„æ˜¯é¦–å…ƒç´ åœ°å€ï¼‰ï¼Œä½†å…¶å®åº”è¯¥ç†è§£ä¸ºï¼ŒæŒ‡å‘çš„æ˜¯åˆ†é…ç»™æ•°ç»„çš„æ•´ä¸ªè¿ç»­å†…å­˜åŒºåŸŸã€‚ å¦‚ä¸‹ï¼Œp_arrayæ‰€æŒ‡å‘çš„å†…å­˜åŒºåŸŸä»»æ„æ•°ç»„å…ƒç´ éƒ½ä¸èƒ½è¢«ä¿®æ”¹ï¼š 1*(p_array+1) = 0; // ç­‰ä»·äºï¼šp_array[1] = 0; å‡ºé”™ï¼š 1error: assignment of read-only location â€˜*(p_array + 4u)â€™ è¿™ç§åšæ³•ä¹Ÿä½¿å¾—æˆ‘ä»¬å¯ä»¥æ”¾å¿ƒåœ°å®šä¹‰æŒ‡å‘å¸¸é‡çš„æ•°ç»„ã€‚ æŒ‡é’ˆæœ¬èº«å¯ä»¥è¢«ä¿®æ”¹ 123456int value = 5;const int* p_value = &amp;value; // æŒ‡å‘â€œconst intâ€// å°è¯•ä¿®æ”¹æŒ‡é’ˆçš„å€¼int value1 = 6;p_value = &amp;value1; // åˆæ³• é‚£æ€ä¹ˆè®©æŒ‡é’ˆæœ¬èº«å¯ä»¥æ— æ³•è¢«ä¿®æ”¹ï¼Ÿ å¸¸é‡æŒ‡é’ˆ å¸¸é‡æŒ‡é’ˆï¼Œå¯ä»¥ä½¿å¾—æŒ‡é’ˆæœ¬èº«æ— æ³•è¢«ä¿®æ”¹ï¼Œå³æŒ‡é’ˆå¯¹åº”å†…å­˜åŒºåŸŸå­˜å‚¨çš„å€¼ï¼ˆé€šå¸¸æ˜¯å­˜å‚¨ä¸€ä¸ªåœ°å€ï¼‰ã€‚ å®ƒé€šå¸¸è¢«å¦‚æ­¤å£°æ˜ï¼ˆconstä½äº*å³ä¾§ï¼‰ï¼š 1234int value = 5;// å£°æ˜å¸¸é‡æŒ‡é’ˆ// åªèƒ½ä½¿ç”¨å³å€¼è¿›è¡Œåˆå§‹åŒ–/èµ‹å€¼int* const p_value = &amp;value; â€œå¸¸é‡æŒ‡é’ˆâ€ï¼ŒåŒæ ·åŒ…å«äº†ä¸¤ä¸ªè¦ç´ ï¼š æŒ‡é’ˆæ˜¯constçš„ï¼Œæ‰€ä»¥å®ƒæœ¬èº«ä¸å¯ä»¥è¢«ä¿®æ”¹ï¼ˆå­˜å‚¨çš„åœ°å€ï¼‰ï¼› æŒ‡é’ˆæŒ‡å‘çš„å˜é‡æ˜¯éconstçš„ï¼Œå®ƒèƒ½é€šè¿‡æŒ‡é’ˆè¢«ä¿®æ”¹ã€‚ ä¾æ—§æ˜¯ä¸¾ä¸ªä¾‹å­è¯´æ˜ï¼š 123456789int value1 = 5;const int* p_value1 = &amp;value1; // æŒ‡å‘â€œintâ€// å°è¯•ä¿®æ”¹æŒ‡å‘çš„å˜é‡*p_value1 = 7; // åˆæ³•// å°è¯•ä¿®æ”¹æŒ‡é’ˆçš„å€¼int value2 = 6;p_value1 = &amp;value2; // éæ³• å¥½å§ï¼Œæˆ–è®¸æœ‰äº›å˜æ€èˆ¬çš„éœ€æ±‚ï¼ŒæŒ‡é’ˆæŒ‡å‘çš„å€¼å’ŒæŒ‡é’ˆéƒ½ä¸å¯ä»¥è¢«ä¿®æ”¹ã€‚è¯·çœ‹ä¸‹ä¸ªå°èŠ‚ã€‚ æŒ‡å‘å¸¸é‡çš„å¸¸é‡æŒ‡é’ˆ æœ€åï¼Œå¯ä»¥é€šè¿‡åœ¨ç±»å‹ä¹‹å‰å’Œå˜é‡åä¹‹å‰ä½¿ç”¨constå…³é”®å­—ï¼Œæ¥å£°æ˜æŒ‡å‘const å€¼çš„ const æŒ‡é’ˆï¼š 12int value = 5 ;const int* const ptr = &amp;value ; æ­£å¦‚ä½ æ‰€éœ€è¦çš„ï¼ŒæŒ‡é’ˆå’Œå…¶æŒ‡å‘çš„å˜é‡éƒ½æ— æ³•è¢«ä¿®æ”¹ã€‚ æœ€ä½³å®è·µ æˆ–è®¸ä½ æœ‰äº›ç–‘é—®ï¼šconstå¯ä»¥è®©æŒ‡é’ˆæˆ–å˜é‡ä¸è¢«ä¿®æ”¹ï¼Œå¾ˆå¤šæ—¶å€™å¯ä»¥ä¿æŒç¨‹åºçš„ä¸¥è°¨ã€å¥å£®æ€§ã€‚è¿™çœ‹èµ·æ¥ç¡®å®æœ‰äº›ä¼˜ç‚¹ï¼Œä½†å®ƒçœŸçš„é‚£ä¹ˆé‡è¦å—ï¼Ÿ äº‹å®ä¸Šï¼Œconstéå¸¸é‡è¦&amp;æœ‰ç”¨ï¼ å¤šä½å¤§å¸ˆï¼Œæ¯”å¦‚å€™æ·å°±æ›¾è¯´è¿‡ï¼šâ€œç¨‹åºå†™å¾—æ˜¯å¦å¤§æ°”ä¸¥è°¨ï¼Œå¤§èƒ†ä½¿ç”¨constå°±æ˜¯ç›´è§‚çš„è¯„ä»·æŒ‡æ ‡â€ã€‚ æ‰€ä»¥ï¼Œå¤§èƒ†çš„åœ¨ä½ çš„ä»£ç ä¸­ä½¿ç”¨constå§ã€‚ æ‰©å±•ï¼šå‡½æ•°ä¸const é€‰æ‹©æ€§é˜…è¯»ï¼šæœ¬èŠ‚é¢å¤–æ¶‰åŠåˆ°ï¼Œ3.4 å‡½æ•°å‚æ•° &amp; é¢å¯¹å¯¹è±¡åŸºæœ¬çŸ¥è¯†ã€‚ constæ˜¯è¡¡é‡ä¸€ä¸ªç¨‹åºå‘˜æ˜¯å¦è€é“çš„ä¸€ä¸ªæ ‡å‡†ï¼Œé™¤äº†ä¿®é¥°å˜é‡ä¹‹å¤–ï¼Œä¸»è¦ä¾¿ç”¨äºä¿®é¥°å‡½æ•°ã€‚ 123const int&amp; fun(int&amp; a); // ä¿®é¥°è¿”å›å€¼int&amp; fun(const int&amp; a); // ä¿®é¥°å½¢å‚int&amp; fun(int&amp; a) const&#123;&#125; // constæˆå‘˜å‡½æ•° constä¿®é¥°è¿”å›å€¼ constå¸¸ç”¨äºè¿”å›å€¼æ˜¯å¼•ç”¨ç±»å‹çš„æ—¶å€™ã€‚ ç”±äºé€šå¸¸ä¸ä¼šæ˜¯å±€éƒ¨å˜é‡çš„å¼•ç”¨ï¼ˆè¿”å›å±€éƒ¨å¼•ç”¨æ˜¯å±é™©çš„ï¼Œ3.5.3èŠ‚ï¼‰ï¼Œé‚£ä¹ˆé€šå¸¸æ˜¯è¿”å›æ˜¯ï¼Œå‡½æ•°å‚æ•°/æˆå‘˜å˜é‡/å…¨å±€å˜é‡ç­‰ã€‚å¦‚æœæˆ‘ä»¬å¹¶ä¸å¸Œæœ›å®ƒä»¬è¢«ä¿®æ”¹ï¼Œä½¿ç”¨constä¿®é¥°ä¾¿å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚ ä¸¾ä¸ªä¾‹å­ã€‚ ä¸‹é¢æ¼”ç¤ºäº†æ²¡æœ‰constä¿®é¥°å‡½æ•°è¿”å›å€¼æ—¶ï¼Œå‡ºç°äº†æˆ‘ä»¬å¹¶ä¸æœŸæœ›çš„æƒ…å†µã€‚ 1234567891011121314151617181920212223242526272829#include &lt;iostream&gt;using namespace std;class Salary&#123;private: int base; // baseæ˜¯ä¸æœŸæœ›è¢«ä¿®æ”¹çš„ï¼Œä½†æ— æ³•åœ¨è¿™é‡Œè¢«å£°æ˜ä¸ºconstpublic: Salary() &#123; base = 20000; &#125; ~Salary()&#123;&#125;; int&amp; get_base() &#123; return base; &#125;&#125;;int main()&#123; Salary s; // ä¿®æ”¹base s.get_base() = 22000; // ä¿®æ”¹æˆåŠŸ cout&lt;&lt;s.get_base()&lt;&lt;endl; return 0;&#125; è¾“å‡ºï¼š 122000 ä½†æ˜¯ï¼Œæˆ‘ä»¬å¦‚æœç”¨constä¿®é¥°å‡½æ•°è¿”å›å€¼ï¼Œç§æœ‰æˆå‘˜base ä¾¿æ— æ³•è¢«ä¿®æ”¹ï¼ˆæ— æ³•ä½œä¸ºå·¦å€¼ï¼‰ã€‚ 1234const int&amp; get_base() &#123; return base;&#125; å†æ¬¡å°è¯•ä¿®æ”¹ä¼šæŠ¥é”™ï¼šerror: assignment of read-only location â€˜s.Salary::get_base()â€™ 12// å†æ¬¡å°è¯•ä¿®æ”¹baseï¼Œéæ³•s.get_base() = 22000; constä¿®é¥°å½¢å‚ å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½ä¼šé€‰æ‹© pass by referenceï¼ˆæŒ‰å¼•ç”¨ä¼ é€’å‚æ•°ï¼‰ã€‚å¦‚æœæˆ‘ä»¬ä¸å¸Œæœ›ä¿®æ”¹å®å‚çš„è¯ï¼Œä¼ é€’çš„å¼•ç”¨å‚æ•°è¯·åŠ¡å¿…ä¼˜å…ˆè€ƒè™‘åŠ ä¸Šconstå…³é”®å­—ã€‚ è¿™ä¸ªå¾ˆå¥½ç†è§£ã€‚ 123456789101112131415#include &lt;iostream&gt;using namespace std;void onlyPrint(const int&amp; b)&#123; b = 1; // errorï¼Œbæ— æ³•ä½œä¸ºå·¦å€¼ cout&lt;&lt;b&lt;&lt;endl;&#125;int main()&#123; int a = 0; onlyPrint(a); return 0;&#125; ç‰¹åˆ«çš„ï¼Œå€¼ä¼ é€’ä¼ é€’ç”¨constä¿®é¥°æ²¡æœ‰æ„ä¹‰ï¼Œå› ä¸ºå½¢å‚æœ¬æ¥å°±æ˜¯æ‹·è´äº†å®å‚ä¸€ä»½ï¼Œå’Œå®å‚æ— å…³ã€‚ 1234void onlyPrint(const int b) // æ— æ„ä¹‰ï¼Œå½¢å‚bå’Œå®å‚aå®Œå…¨ç‹¬ç«‹&#123; ...&#125; constæˆå‘˜å‡½æ•° è¿™ç§æƒ…å†µå¤šæ•°æƒ…å½¢ä¸‹å¾ˆå®¹æ˜“è¢«å¿½è§†ï¼Œå…¶å®è¿™ä¸ªæ˜¯éå¸¸é‡è¦çš„ä¸€ä¸ªå†…å®¹ã€‚ åœ¨å‰é¢constè¿”å›å€¼é¿å…äº†ç§æœ‰æˆå‘˜baseè¢«ä¿®æ”¹ï¼Œä½†æ˜¯ä¾æ—§å¯èƒ½åœ¨å‡½æ•°è¿”å›å‰å°±ä¸å°å¿ƒæŠŠbase ä¿®æ”¹äº†ï¼š 1234567891011121314151617181920212223242526#include &lt;iostream&gt;using namespace std;class Salary&#123;private: int base; // baseæ˜¯ä¸æœŸæœ›è¢«ä¿®æ”¹çš„public: Salary() &#123; base = 20000; &#125; ~Salary()&#123;&#125;; const int&amp; get_base() &#123; base = 22000; // ä¸å°å¿ƒåœ¨returnå‰å°±ä¿®æ”¹äº†base return base; &#125;&#125;;int main()&#123; Salary s; cout&lt;&lt;s.get_base()&lt;&lt;endl; // 22000 return 0;&#125; è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ç”¨constä¿®é¥°æ•´ä¸ªæˆå‘˜å‡½æ•°ï¼Œå»é¿å…æˆå‘˜å‡½æ•°ä¿®æ”¹å¯¹è±¡æˆå‘˜å˜é‡ ã€‚ 12345const int&amp; get_base() const&#123; base = 22000; // errorï¼Œæ— æ³•ä¿®æ”¹base return base;&#125; ä¸è¿‡æˆ‘ä»¬ä¾ç„¶æœ‰ç–‘é—®ï¼Œconstæˆå‘˜å‡½æ•°ä¿®é¥°äº†ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ ä¸ºä»€ä¹ˆè¦å‘å‡ºè¿™ç§ç–‘é—®ï¼Œä½œè€…æ˜¯ä¸æ˜¯ç¥ç»è´¨äº†ï¼Ÿè¯·çœ‹ä¸‹ä¾‹ã€‚ å‡è®¾æ­¤æ—¶çš„get_data() è¿˜æ²¡æœ‰è¢«constä¿®é¥°ï¼Œä¹Ÿæ²¡åšä»€ä¹ˆä¿®æ”¹å¯¹è±¡æˆå‘˜çš„äº‹ï¼ˆå¾ˆä¹–ï¼‰ï¼š 1234const int&amp; get_base() &#123; return base;&#125; ä½ å°è¯•è°ƒç”¨get_dataæ–¹æ³•å‡ºé”™äº†ï¼š 12const Salary s;s.get_base(); æŠ¥é”™ï¼š 1error: passing â€˜const Salaryâ€™ as â€˜thisâ€™ argument of â€˜const int&amp; Salary::get_base()â€™ å¥½å§ï¼Œä¸è¦å’Œæˆ‘è¯´å¸¸é‡å¯¹è±¡ä¸èƒ½è°ƒç”¨éå¸¸é‡å‡½æ•°ä¹‹ç±»çš„ï¼Œæˆ‘æ›´æƒ³çŸ¥é“ä¸Šé¢çš„æŠ¥é”™æ˜¯ä»€ä¹ˆæ„æ€ï¼Œæ·±å±‚æ¬¡çš„åŸå› æ˜¯ä»€ä¹ˆâ€¦ æŠ¥é”™å¤§æ„æ˜¯è¯´ï¼Œget_base() å‡½æ•°æœ‰ä¸€ä¸ªå‚æ•°å«åšthisï¼Œå°è¯•å°†å®å‚ const Salary ä¼ é€’ç»™this æ—¶å‡ºé”™ã€‚è¿™ç”±æ­¤éœ€è¦è§£é‡Šä¸¤ä¸ªé—®é¢˜ï¼š get_base() å“ªæ¥çš„å«åšthiså‚æ•°ï¼Ÿ this æŒ‡é’ˆæ˜¯ä»€ä¹ˆï¼Ÿ å…¶å®åœ¨C++ä¸­ä»»ä½•æˆå‘˜å‡½æ•°çš„å‚æ•°éƒ½éšå«this æŒ‡é’ˆï¼Œä¸è¿‡ä¸éœ€è¦ä½ æ˜¾ç¤ºå†™å‡ºæ¥ï¼ˆç†Ÿæ‚‰pythonçš„åŒå­¦æ˜¯ä¸æ˜¯ç«‹é©¬æƒ³åˆ°selfï¼Ÿï¼‰ã€‚ æ¯”å¦‚ï¼Œæˆ‘ä»¬çš„get_base åœ¨ç¼–è¯‘å™¨çœ¼ä¸­åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š 1234const int&amp; get_base(Salary* this) &#123; return base;&#125; this æŒ‡é’ˆæŒ‡å‘æ­£åœ¨æ“ä½œæˆå‘˜å‡½æ•°çš„å¯¹è±¡ï¼ˆåœ¨è¿™é‡Œæ˜¯s ï¼‰,æ­¤æ—¶å¯¹è±¡çš„ç±»å‹æ˜¯const Salary ã€‚ è°ƒç”¨s.get_base() åœ¨ç¼–è¯‘å™¨çœ¼é‡Œç­‰ä»·äºï¼š 12const Salary s;s.get_base(&amp;s); è€Œæˆ‘ä»¬çš„get_baseå‡½æ•°å‚æ•°ç±»å‹æ˜¯Salary* ï¼Œä¼ é€’çš„å½¢å‚&amp;sç±»å‹æ˜¯const Salary* ã€‚å®ƒä»¬æ˜¯ä¸åŒ¹é…çš„ï¼Œæ•…æŠ¥é”™ã€‚ è¿™ä¹Ÿè¯´æ˜äº†ï¼Œconst æˆå‘˜å‡½æ•°å…¶å®å°±æ˜¯ä¿®é¥°äº†æˆå‘˜å‡½æ•°ä¸­thiså‚æ•°ï¼Œä¹Ÿå°±æ˜¯å½“å‰å¯¹è±¡ã€‚ 12345 const int&amp; get_base() const &#123; base = 22000; // ä¸å°å¿ƒåœ¨returnå‰å°±ä¿®æ”¹äº†base return base;&#125; ç­‰ä»·äºï¼š 12345const int&amp; get_base(const Salary* this) &#123; this-&gt;base = 22000; // ä¿®æ”¹å¸¸é‡å¯¹è±¡thisï¼Œæ•…å‡ºé”™ return base;&#125; æ‰©å±•ï¼šç±»å¯¹è±¡å’Œconst constä¿®é¥°çš„å¯¹è±¡ï¼Œä¸èƒ½è¿›è¡Œä¿®æ”¹å¯¹è±¡æˆå‘˜å˜é‡çš„å°è¯•ã€‚ æœ€æ˜æ˜¾çš„ä¸€ç‚¹å°±æ˜¯ï¼Œconstä¿®é¥°çš„å¯¹è±¡ä¸èƒ½è°ƒç”¨éconstä¿®é¥°çš„å‡½æ•°ï¼Œå³ä½¿å‡½æ•°æ²¡æœ‰ä¿®æ”¹ä»»ä½•æ•°æ®æˆå‘˜ã€‚ 1234567891011121314151617181920212223242526#include &lt;iostream&gt;using namespace std;class Salary&#123;private: int base; // baseæ˜¯ä¸æœŸæœ›è¢«ä¿®æ”¹çš„public: Salary() &#123; base = 20000; &#125; ~Salary()&#123;&#125;; int&amp; print_base() &#123; cout&lt;&lt;base&lt;&lt;endl; return base; &#125;&#125;;int main()&#123; const Salary s; // constä¿®é¥°å¯¹è±¡ s.print_base; // errorï¼Œä¸èƒ½è°ƒç”¨éconstçš„å‡½æ•° return 0;&#125; é€šè¿‡ç¼–è¯‘ä¹Ÿå¾ˆç®€å•ï¼Œconstä¿®é¥°å‡½æ•°å³å¯ï¼š 12345int&amp; print_base() const&#123; cout&lt;&lt;base&lt;&lt;endl; return base;&#125; 2.1.X æ™ºèƒ½æŒ‡é’ˆğŸŒŸ ä»å†…å­˜æ³„æ¼è¯´èµ· å’Œå†…å­˜ç¢ç‰‡æ¦‚å¿µåŒºåˆ†ã€‚ ä¸€èˆ¬æˆ‘ä»¬å¸¸è¯´çš„å†…å­˜æ³„æ¼æ˜¯æŒ‡å †å†…å­˜çš„æ³„æ¼ã€‚ ä½¿ç”¨malloc,ã€reallocã€ newç­‰å‡½æ•°ä»å †ä¸­åˆ†é…åˆ°å—å†…å­˜åï¼Œæ²¡æœ‰ç›¸åº”çš„è°ƒç”¨freeæˆ–deleteé‡Šæ”¾è¯¥å†…å­˜å—ï¼Œå¯¼è‡´è¿™å—å†…å­˜å°±ä¸èƒ½è¢«å†æ¬¡ä½¿ç”¨ã€‚è¿™å°±æ˜¯å†…å­˜æ³„æ¼ã€‚ ä¾‹1ï¼ŒåŒé‡åˆ†é…æ³„æ¼å†…å­˜ã€‚ 12int* ptr = new int();ptr = new int(); // ptræŒ‡å‘äº†æ–°ä¸€å—å†…å­˜ï¼ŒåŸæ¥å­˜å‚¨çš„å†…å­˜åœ°å€ä¸¢å¤± ä¾‹2ï¼Œç±»ä¼¼æŒ‡é’ˆä¸é‡Šæ”¾åŸå…ˆæŒ‡å‘çš„å†…å­˜åŒºåŸŸã€‚ 123int value = 5;int* ptr = new int(); // å †ä¸Šåˆ†é…å†…å­˜ï¼Œè¿”å›åˆ†é…çš„å†…å­˜é¦–åœ°å€ptr = &amp;value; // å †ä¸Šå†…å­˜æ²¡æœ‰é‡Šæ”¾ï¼Œå…¶pträ¿å­˜çš„åœ°å€ä¸¢å¤± ä¸Šé¢æ„Ÿå—å¯èƒ½ä¸å¤Ÿç›´è§‚ï¼Œæˆ‘ä»¬æ¥ä¸¾ä¸ªå…·ä½“ä¾‹å­ã€‚ ä¸‹é¢ä¸€ä¸ªå¾ˆç®€å•intå †å†…å­˜ï¼ˆ4å­—èŠ‚ï¼‰å¿˜è®°ä½¿ç”¨deleteé‡Šæ”¾ï¼Œæ‰§è¡Œäº†ç™¾ä¸‡æ¬¡ï¼ˆæ¯”å¦‚çº¿ä¸Šä»£ç çš„é«˜é¢‘åŸºç¡€å‡½æ•°ï¼‰ï¼Œä¾¿æŸå¤±äº†40Må†…å­˜ã€‚ 123456789101112131415161718#include &lt;iostream&gt;#include &lt;cstdlib&gt;using namespace std;int main()&#123; system(&quot;free -m&quot;); // å†…å­˜æ³„æ¼*100Wæ¬¡ for(int i=0; i&lt;1000000; i++) &#123; int* s = new int(); s = new int(); // delete s; &#125; system(&quot;free -m&quot;); return 0;&#125; è¾“å‡ºï¼ˆæ ˆå ç”¨äº†1Må†…å­˜ï¼‰ï¼š è¯•æƒ³ï¼šå¦‚æœä¸æ˜¯ç®€å•intï¼Œè€Œæ˜¯å¤æ‚çš„å¤§å¯¹è±¡ï¼Œå¾ˆå¿«å°±èƒ½æŠŠæœåŠ¡å™¨æ‰€æœ‰å†…å­˜å¹²å®Œã€‚ é¿å…å†…å­˜æ³„æ¼çš„å‡ ç§æ–¹å¼ åœ¨C++11å‰ï¼Œæˆ‘ä»¬é€šå¸¸é€šè¿‡ä»¥ä¸‹æ–¹æ³•å°½é‡ä¿è¯å†…å­˜ä¸è¢«æ³„æ¼ã€‚ åˆ©ç”¨&quot;æŸ¥æ‰¾&quot;åŠŸèƒ½ï¼ŒæŸ¥è¯¢newä¸deleteï¼Œçœ‹çœ‹å†…å­˜çš„ç”³è¯·ä¸é‡Šæ”¾æ˜¯ä¸æ˜¯æˆå¯¹é‡Šæ”¾çš„ï¼Œè¿™ä½¿ä½ è¿…é€Ÿå‘ç°ä¸€äº›é€»è¾‘è¾ƒä¸ºç®€å•çš„å†…å­˜æ³„æ¼æƒ…å†µã€‚ è®¡æ•°æ³•ï¼šä½¿ç”¨newæˆ–è€…mallocæ—¶ï¼Œè®©è¯¥æ•°+1ï¼Œdeleteæˆ–freeæ—¶ï¼Œè¯¥æ•°-1ï¼Œç¨‹åºæ‰§è¡Œå®Œæ‰“å°è¿™ä¸ªè®¡æ•°ï¼Œå¦‚æœä¸ä¸º0åˆ™è¡¨ç¤ºå­˜åœ¨å†…å­˜æ³„æ¼ï¼› å°†åŸºç±»çš„ææ„å‡½æ•°å£°æ˜ä¸ºè™šå‡½æ•°ï¼Œè®©å­ç±»å»è°ƒç”¨çˆ¶ç±»çš„ææ„å‡½æ•°ï¼Œé¿å…çˆ¶ç±»æ²¡æœ‰ç”³è¯·çš„ç©ºé—´æ²¡æœ‰è¢«é‡Šæ”¾ã€‚ å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ä¸€äº›æ£€æµ‹å·¥å…·ï¼š Linuxä¸‹å¯ä»¥ä½¿ç”¨Valgrindå·¥å…· Windowsä¸‹å¯ä»¥ä½¿ç”¨CRTåº“ ä½†æ— è®ºå¦‚ä½•ï¼Œåœ¨ä¼ ç»Ÿ C++ ä¸­ï¼Œã€è®°å¾—ã€æ‰‹åŠ¨é‡Šæ”¾èµ„æºï¼Œæ€»ä¸æ˜¯æœ€ä½³å®è·µã€‚ äººè¿œæ²¡æœ‰æœºå™¨å¯é ï¼Œæˆ‘ä»¬æ€»å¯èƒ½åœ¨ä»€ä¹ˆæ—¶å€™å°±å¿˜è®°å»æ˜¯å¦å†…å­˜èµ„æºã€‚å¹¸è¿çš„æ˜¯ï¼Œåœ¨C++11æ™ºèƒ½æŒ‡é’ˆçš„æ¦‚å¿µä¸­ï¼Œå¯¹å¯¹è±¡ä½¿ç”¨äº†å¼•ç”¨è®¡æ•°ï¼Œè®©ç¨‹åºå‘˜ä¸å†éœ€è¦å…³å¿ƒå†…å­˜é‡Šæ”¾é—®é¢˜ã€‚ æ™ºèƒ½æŒ‡é’ˆç®€ä»‹ ä¸ºäº†å‡å°‘å‡ºç°å†…å­˜æ³„æ¼çš„æƒ…å†µï¼Œåœ¨C++ 11 ä¸­ï¼Œç§»åŠ¨è¯­ä¹‰çš„å¼•å…¥ï¼Œç»“åˆ RAII ï¼Œé‡‡ç”¨ä»£ç†æ¨¡å¼çš„æ€æƒ³ï¼Œç®¡ç†åŠ¨æ€åˆ†é…å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚ C++11æä¾›å››ç§æ™ºèƒ½æŒ‡é’ˆä¾›ä½¿ç”¨: æŒ‡é’ˆç±»åˆ« æ”¯æŒ å¤‡æ³¨ unique_ptr C++ 11 æ‹¥æœ‰ç‹¬æœ‰å¯¹è±¡æ‰€æœ‰æƒè¯­ä¹‰çš„æ™ºèƒ½æŒ‡é’ˆ shared_ptr C++ 11 æ‹¥æœ‰å…±äº«å¯¹è±¡æ‰€æœ‰æƒè¯­ä¹‰çš„æ™ºèƒ½æŒ‡é’ˆ weak_ptr C++ 11 std::shared_ptr æ‰€ç®¡ç†å¯¹è±¡çš„å¼±å¼•ç”¨ auto_ptr C++ 17ä¸­ç§»é™¤ æ‹¥æœ‰ä¸¥æ ¼å¯¹è±¡æ‰€æœ‰æƒè¯­ä¹‰çš„æ™ºèƒ½æŒ‡é’ˆ æœ¬æ–‡ä¸»è¦å…³æ³¨ï¼Œ std::shared_ptrã€std::unique_ptrã€std::weak_ptrï¼Œä½¿ç”¨å®ƒä»¬éœ€è¦åŒ…å«å¤´æ–‡ä»¶ &lt;memory&gt;ã€‚ std::shared_ptr std::shared_ptr æ˜¯ä¸€ç§æ™ºèƒ½æŒ‡é’ˆï¼Œä¸€ä¸ªåŠ¨æ€åˆ†é…çš„å¯¹è±¡å¯ä»¥åœ¨å¤šä¸ª std::shared_ptr ä¹‹é—´å…±äº«ã€‚ å¯¹è±¡æ¯å¤šä¸€ä¸ªshared_ptr æŒ‡é’ˆè®¡æ•°å°±+1ï¼Œåä¹‹-1ï¼› ä¸ºä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œå¼•ç”¨è®¡æ•°çš„å¢å‡å¿…é¡»æ˜¯åŸå­æ“ä½œã€‚ åŠ¨æ€åˆ†é…çš„æ§åˆ¶å—åŒ…æ‹¬äº†å¼•ç”¨è®¡æ•°ï¼Œå¼±å¼•ç”¨è®¡æ•°ï¼Œè‡ªå®šä¹‰çš„ææ„å™¨ç­‰ç­‰æ•°æ®ã€‚ é…å¥—ä½¿ç”¨çš„è¿˜æœ‰std::make_sharedæ–¹æ³• ï¼š æ¶ˆé™¤æ˜¾å¼çš„ä½¿ç”¨ newï¼Œåˆ†é…åˆ›å»ºä¼ å…¥å‚æ•°ä¸­çš„å¯¹è±¡ï¼Œ å¹¶è¿”å›è¿™ä¸ªå¯¹è±¡ç±»å‹çš„std::shared_ptræŒ‡é’ˆã€‚ è¿™æ ·ä¸€æ¥ï¼Œstd::shared_ptr èƒ½å¤Ÿé€šè¿‡è®¿é—®å¼•ç”¨è®¡æ•°æ¥ç¡®å®šè‡ªèº«æ˜¯å¦æ˜¯æœ€åä¸€ä¸ªæŒ‡å‘è¯¥å¯¹è±¡çš„ï¼šå¦‚æœæ˜¯ï¼Œåˆ™ææ„è¯¥å¯¹è±¡ï¼›å¦åˆ™å°†å¼•ç”¨è®¡æ•°å‡ä¸€ã€‚ ä¸€ä¸ªç®€å•ä½¿ç”¨å®ä¾‹ã€‚ 123456789101112131415161718#include &lt;iostream&gt;#include &lt;memory&gt;void foo(std::shared_ptr&lt;int&gt; i) &#123; (*i)++;&#125;int main() &#123; // åŸå…ˆåˆ›å»ºå¯¹è±¡éœ€æ˜¾ç¤ºnewå£°æ˜ï¼šint* pointer = new int&#123;10&#125;; // shared_ptræ¶ˆé™¤äº†newæ˜¾ç¤ºå£°æ˜ std::shared_ptr&lt;int&gt; pointer = std::make_shared&lt;int&gt;(10); foo(pointer); std::cout &lt;&lt; *pointer &lt;&lt; std::endl; // 11 // pointerç¦»å¼€ä½œç”¨åŸŸï¼Œæ­¤æ—¶å¼•ç”¨è®¡æ•°ä¸º1ï¼Œåˆ¤æ–­å‡ºè‡ªå·±æ˜¯æœ€åä¸€ä¸ªæŒ‡å‘å¯¹è±¡ // è‡ªåŠ¨è°ƒç”¨deleteææ„è¯¥å¯¹è±¡ return 0;&#125; std::shared_ptr è¿˜æœ‰å…¶å®ƒçš„ä¸€äº›æœ‰ç”¨æ–¹æ³•ï¼š get() æ–¹æ³•æ¥è·å–åŸå§‹æŒ‡é’ˆï¼› reset() æ¥å‡å°‘ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨è®¡æ•°ï¼› use_count()æ¥æŸ¥çœ‹ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨è®¡æ•°ã€‚ ä½¿ç”¨auto å…³é”®å­—æ›¿ä»£std::shared_ptr&lt;int&gt; å£°æ˜ã€‚ *æ³¨é‡Šçš„æ•°å­—è¡¨ç¤ºä¸€å¼€å§‹å£°æ˜çš„å¯¹è±¡ï¼Œè¢«å¤šå°‘shared_ptræ‰€æŒ‡å‘ã€‚ 12345678910auto pointer = std::make_shared&lt;int&gt;(10); // 1auto pointer2 = pointer; // 2auto pointer3 = pointer; // 3int *p = pointer.get(); // ä¸ä¼šå¢åŠ å¼•ç”¨è®¡æ•°pointer.use_count(); // 3pointer2.reset();pointer3.reset();pointer.use_count(); // 1 std::shared_ptr çœ‹ç€å¾ˆç¾å¥½ï¼Œä½†å®ƒå­˜åœ¨å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚ è¯·çœ‹ä¸‹ä¾‹ã€‚ 123456789101112131415161718192021222324252627282930313233#include &lt;iostream&gt;#include &lt;memory&gt;struct A;struct B;struct A &#123; std::shared_ptr&lt;B&gt; pointer; ~A() &#123; std::cout &lt;&lt; &quot;A è¢«é”€æ¯&quot; &lt;&lt; std::endl; &#125;&#125;;struct B &#123; std::shared_ptr&lt;A&gt; pointer; ~B() &#123; std::cout &lt;&lt; &quot;B è¢«é”€æ¯&quot; &lt;&lt; std::endl; &#125;&#125;;int main() &#123; auto a = std::make_shared&lt;A&gt;(); // æ­¤æ—¶æŒ‡é’ˆaæŒ‡å‘çš„å¯¹è±¡è®°ä¸ºAå¯¹è±¡ auto b = std::make_shared&lt;B&gt;(); // æ­¤æ—¶æŒ‡é’ˆbæŒ‡å‘çš„å¯¹è±¡è®°ä¸ºBå¯¹è±¡ cout&lt;&lt;a.use_count()&lt;&lt;endl; // Aå¯¹è±¡è®¡æ•°ï¼š1 cout&lt;&lt;b.use_count()&lt;&lt;endl; // Bå¯¹è±¡è®¡æ•°ï¼š1 a-&gt;pointer = b; b-&gt;pointer = a; cout&lt;&lt;a.use_count()&lt;&lt;endl; // Aå¯¹è±¡è®¡æ•°ï¼š2ï¼Œå†…éƒ¨å¼•ç”¨Bå¯¹è±¡ cout&lt;&lt;b.use_count()&lt;&lt;endl; // Bå¯¹è±¡è®¡æ•°ï¼š2ï¼Œå†…éƒ¨å¼•ç”¨Aå¯¹è±¡ï¼Œå‘ç”Ÿå¾ªç¯å¼•ç”¨ return 0;&#125; æ­¤æ—¶è¿è¡Œå¯¹è±¡Aã€Bå‡ä¸ä¼šè¢«é”€æ¯ï¼ˆå¼•ç”¨è®¡æ•°ä¸ä¸ºï¼‰ã€‚ 12341122 main å‡½æ•°é€€å‡ºå‰ï¼ŒB å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¸º2ï¼ŒA å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¸º 2ï¼› main å‡½æ•°é€€å‡ºåï¼šb æŒ‡é’ˆé”€æ¯ï¼ŒB å¯¹è±¡çš„å¼•ç”¨è®¡æ•°å˜ä¸º 1ï¼›a æŒ‡é’ˆé”€æ¯ï¼ŒA å¯¹è±¡çš„å¼•ç”¨è®¡æ•°å˜ä¸º1ï¼› è¿™æ ·å°±å¯¼è‡´äº† å¯¹è±¡Aã€Bçš„å†…å­˜åŒºåŸŸå¼•ç”¨è®¡æ•°ä¸ä¸ºé›¶ï¼Œè€Œå¤–éƒ¨å·²ç»æ²¡æœ‰åŠæ³•æ‰¾åˆ°è¿™å—åŒºåŸŸäº†ï¼Œä¹Ÿå°±é€ æˆäº†å†…å­˜æ³„æ¼ã€‚ std::weak_ptr çš„å­˜åœ¨ä¾¿å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ std::weak_ptr std::weak_ptræ˜¯ä¸€ç§å¼±å¼•ç”¨ï¼ˆç›¸æ¯”è¾ƒè€Œè¨€ std::shared_ptr å°±æ˜¯ä¸€ç§å¼ºå¼•ç”¨ï¼‰ã€‚ std::weak_ptr æ˜¯é’ˆå¯¹ std::shared_ptr åŠŸèƒ½çš„æ‰©å±•ï¼Œ ä¸èƒ½è§£å¼•ç”¨ï¼Œä¹Ÿä¸èƒ½æ£€æŸ¥æ˜¯å¦ä¸ºç©ºï¼Œä¸»è¦ä½œç”¨æ˜¯ç”¨äºè§‚å¯Ÿ std::shared_ptr çš„å†…éƒ¨çŠ¶æ€ï¼ŒæŸ¥çœ‹å…¶å¼•ç”¨è®¡æ•°ï¼ŒæŸ¥çœ‹æŒ‡é’ˆæ˜¯å¦ç©ºæ‚¬ï¼Œæ˜¯ä¸€ç§å…·æœ‰ä¸´æ—¶æ‰€æœ‰æƒè¯­ä¹‰çš„æ™ºèƒ½æŒ‡é’ˆã€‚ ä¸ºä»€ä¹ˆéœ€è¦std::weak_ptrï¼Ÿ ä¸€ç§å¸¸ç”¨çš„ç”¨æ³•å°±æ˜¯å‰é¢æ‰€è¯´ï¼Œæ‰“æ–­ std::shared_ptr æ‰€ç®¡ç†çš„å¯¹è±¡ç»„æˆçš„ç¯çŠ¶å¼•ç”¨ã€‚ ä¸Šä»£ç è§£é‡Šã€‚ å’Œå‰é¢å”¯ä¸€çš„åŒºåˆ«æ˜¯åªåœ¨ç»“æ„ä½“Bå†…éƒ¨æ›¿æ¢äº†std::shared_ptr --&gt; std::weak_ptrã€‚ 12345678910111213141516struct A &#123; std::shared_ptr&lt;B&gt; pointer; // å¼ºå¼•ç”¨ ~A() &#123; std::cout &lt;&lt; &quot;A è¢«é”€æ¯&quot; &lt;&lt; std::endl; &#125;&#125;;struct B &#123; std::weak_ptr&lt;A&gt; pointer; // æ›¿æ¢ä¸ºå¼±å¼•ç”¨ ~B() &#123; std::cout &lt;&lt; &quot;B è¢«é”€æ¯&quot; &lt;&lt; std::endl; &#125;&#125;; ä¸»å‡½æ•°ä¸­ï¼š 1234567891011int main() &#123; auto a = std::make_shared&lt;A&gt;(); // æ­¤æ—¶æŒ‡é’ˆaæŒ‡å‘çš„å¯¹è±¡è®°ä¸ºAå¯¹è±¡ auto b = std::make_shared&lt;B&gt;(); // æ­¤æ—¶æŒ‡é’ˆbæŒ‡å‘çš„å¯¹è±¡è®°ä¸ºBå¯¹è±¡ cout&lt;&lt;a.use_count()&lt;&lt;endl; // Aå¯¹è±¡è®¡æ•°ï¼š1 cout&lt;&lt;b.use_count()&lt;&lt;endl; // Bå¯¹è±¡è®¡æ•°ï¼š1 a-&gt;pointer = b; b-&gt;pointer = a; cout&lt;&lt;a.use_count()&lt;&lt;endl; // Aå¯¹è±¡è®¡æ•°ï¼š1ï¼Œå†…éƒ¨å¼±å¼•ç”¨Bå¯¹è±¡ï¼Œå¼•ç”¨è®¡æ•°æ²¡æœ‰å¢åŠ  cout&lt;&lt;b.use_count()&lt;&lt;endl; // Bå¯¹è±¡è®¡æ•°ï¼š2ï¼Œå†…éƒ¨å¼•ç”¨Aå¯¹è±¡ï¼Œå‘ç”Ÿå¾ªç¯å¼•ç”¨&#125; æ‰§è¡Œç»“æœï¼Œä¸€åˆ‡å²æœˆé™å¥½ï¼ˆææ„å‡½æ•°è¢«æ‰§è¡Œï¼‰ï¼š 1234561112A è¢«é”€æ¯B è¢«é”€æ¯ å¯è§å¼±å¼•ç”¨ä¸ä¼šå¼•èµ·å¼•ç”¨è®¡æ•°å¢åŠ ï¼ˆAå¯¹è±¡çš„å¼•ç”¨è®¡æ•°å§‹ç»ˆæ˜¯1ï¼‰ï¼Œå½“æ¢ç”¨å¼±å¼•ç”¨æ—¶å€™ï¼Œæœ€ç»ˆçš„é‡Šæ”¾æµç¨‹å¦‚å›¾æ‰€ç¤ºï¼ˆè™šçº¿è¡¨ç¤ºå¼±å¼•ç”¨ï¼‰ï¼š main å‡½æ•°é€€å‡ºå‰ï¼ŒB å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¸º2ï¼ŒA å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¸º 1ï¼› b æŒ‡é’ˆé”€æ¯ï¼ŒB å¯¹è±¡çš„å¼•ç”¨è®¡æ•°å˜ä¸º 1ï¼› a æŒ‡é’ˆé”€æ¯ï¼ŒA å¯¹è±¡çš„å¼•ç”¨è®¡æ•°å˜ä¸º0ï¼ŒA å¯¹è±¡ç«‹åˆ»ææ„ï¼ŒA å¯¹è±¡ææ„çš„è¿‡ç¨‹ä¸­ä¼šå¯¼è‡´å…¶åŒ…å«çš„ b æŒ‡é’ˆè¢«é”€æ¯ï¼Œä»è€Œå¯¼è‡´ B å¯¹è±¡çš„å¼•ç”¨è®¡æ•°å˜ä¸º0ï¼Œä½¿å¾— B å¯¹è±¡ä¹Ÿè¢«æ­£å¸¸ææ„ã€‚ std::unique_ptr åœ¨å‰é¢std::shared_ptrï¼Œå¯ä»¥ä½¿å¾—å¤šä¸ªæ™ºèƒ½æŒ‡é’ˆå…±æœ‰ä¸€ä¸ªå¯¹è±¡ï¼š 123auto pointer = std::make_shared&lt;int&gt;(10); // å¼•ç”¨è®¡æ•°ï¼š1auto pointer2 = pointer; // å¼•ç”¨è®¡æ•°ï¼š2auto pointer3 = pointer; // å¼•ç”¨è®¡æ•°ï¼š3 ç„¶è€Œstd::unique_ptr æ˜¯ä¸€ç§ç‹¬å çš„æ™ºèƒ½æŒ‡é’ˆï¼Œ æ˜¯å…·æœ‰ä¸“å±æ‰€æœ‰æƒè¯­ä¹‰ï¼ˆexclusive ownership semanticsï¼‰çš„æ™ºèƒ½æŒ‡é’ˆï¼Œå®ƒç¦æ­¢å…¶ä»–æ™ºèƒ½æŒ‡é’ˆä¸å…¶å…±äº«åŒä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œä¿è¯ä»£ç çš„å®‰å…¨ã€‚ ä¸ºä»€ä¹ˆéœ€è¦std::unique_ptrï¼Ÿ é¿å…å†…å­˜æ³„æ¼ï¼Œè¿™æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼› é¿å…æ›´å¤§å¼€é”€ï¼Œç›¸æ¯”äºshared_ptrï¼Œå®ƒçš„å¼€é”€æ›´å°ï¼Œç”šè‡³å¯ä»¥è¯´å’Œè£¸æŒ‡é’ˆç›¸å½“ï¼Œå®ƒä¸éœ€è¦ç»´æŠ¤å¼•ç”¨è®¡æ•°çš„åŸå­æ“ä½œç­‰ç­‰ã€‚ å›åˆ°å‰é¢ï¼Œæ—¢ç„¶std::unique_ptræ˜¯ç‹¬å ï¼Œä¹Ÿå°±æ˜¯ä¸å¯å¤åˆ¶ã€‚ 12auto pointer = std::make_unique&lt;int&gt;(10); // å¼•ç”¨è®¡æ•°ï¼š1auto pointer2 = pointer; // æŠ¥é”™ï¼Œæ­¤æ—¶pointer2æ— æ³•ä½œä¸ºå·¦å€¼ï¼Œå³æ— æ³•å°†pointerå¤åˆ¶ç»™pointer2 std::make_unique åœ¨C++14æ‰è¢«æ”¯æŒï¼ˆC++11å§”å‘˜ä¸»å¸­åŸè¯è¯´ä»–å¿˜äº†ï¼‰éœ€è¦æˆ‘ä»¬è‡ªå·±å®ç°ï¼š 12345template&lt;typename T, typename ...Args&gt;std::unique_ptr&lt;T&gt; make_unique( Args&amp;&amp; ...args )&#123; return std::unique_ptr&lt;T&gt;( new T( std::forward&lt;Args&gt;(args)... ) );&#125; è™½ç„¶unique_pträ¸èƒ½å¤åˆ¶ï¼Œä½†æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ std::move å°†å¯¹è±¡æ‰€æœ‰æƒè½¬ç§»ç»™å…¶å®ƒçš„ unique_ptrï¼Œä¾‹å¦‚ï¼š 1234567891011121314151617181920#include &lt;iostream&gt;#include &lt;memory&gt;struct Foo &#123; Foo() &#123; std::cout &lt;&lt; &quot;æ‰§è¡ŒFooæ„é€ å‡½æ•°&quot; &lt;&lt; std::endl; &#125; ~Foo() &#123; std::cout &lt;&lt; &quot;æ‰§è¡ŒFooææ„å‡½æ•°&quot; &lt;&lt; std::endl; &#125; void foo() &#123; std::cout &lt;&lt; &quot;æ‰§è¡ŒFooå‡½æ•°foo&quot; &lt;&lt; std::endl; &#125;&#125;;int main() &#123; std::unique_ptr&lt;Foo&gt; p1 = make_unique&lt;Foo&gt;(); p1-&gt;foo(); // std::moveè½¬ç§»p1æŒ‡å‘çš„Fooå¯¹è±¡æ‰€æœ‰æƒç»™p2 std::unique_ptr&lt;Foo&gt; p2 = std::move(p1); p2-&gt;foo(); // å‡½æ•°é€€å‡ºå‰ï¼ˆå‡†ç¡®æ¥è¯´ï¼Œæ˜¯ç¦»å¼€ä½œç”¨åŸŸå‰ï¼‰ï¼ŒFooå¯¹è±¡è¢«é”€æ¯ return 0;&#125; è¾“å‡ºï¼š 1234æ‰§è¡ŒFooæ„é€ å‡½æ•°æ‰§è¡ŒFooå‡½æ•°fooæ‰§è¡ŒFooå‡½æ•°fooæ‰§è¡ŒFooææ„å‡½æ•° åˆ›å»ºå¯¹è±¡ï¼Œæ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–å¹¶ç”±æ™ºèƒ½æŒ‡é’ˆp1 ç®¡ç†ï¼Œè¾“å‡ºâ€œæ‰§è¡ŒFooæ„é€ å‡½æ•°â€ï¼› æ‰§è¡Œfooå‡½æ•°ï¼Œè¾“å‡ºâ€œæ‰§è¡ŒFooå‡½æ•°fooâ€ï¼› std::moveè½¬ç§»åŸå…ˆp1 æ‰€æŒ‡å‘çš„Fooå¯¹è±¡ï¼ˆå†…å­˜åŒºåŸŸï¼‰æ‰€æœ‰æƒè½¬ç§»ç»™äº†p2 ï¼Œå› æ­¤å¹¶æ²¡æœ‰åˆ›å»ºæ–°å¯¹è±¡ï¼Œæ•…ä»£ç 16è¡Œå¤„ä¸ä¼šäº§ç”Ÿè¾“å‡ºï¼› æ‰§è¡Œfooå‡½æ•°ï¼Œâ€œæ‰§è¡ŒFooå‡½æ•°fooâ€ï¼› p2 ç®¡ç†çš„å¯¹è±¡ç¦»å¼€ä½œç”¨èŒƒå›´ï¼Œææ„å‡½æ•°è‡ªåŠ¨æ‰§è¡Œï¼Œâ€œæ‰§è¡ŒFooææ„å‡½æ•°â€ã€‚ 2.2 å¼•ç”¨ åœ¨æœ¬ç« å¼€ç¯‡æˆ‘ä»¬ä¾¿å·²æåˆ°ï¼Œå°½é‡é¿å…ä½¿ç”¨æŒ‡é’ˆã€‚æœ€é‡è¦çš„åŸå› ä¾¿æ˜¯æŒ‡é’ˆå®ƒçš„ä¸å®‰å…¨æ€§ä¸ä¸ç¡®å®šæ€§ï¼Œä¸€ä¸ªcrazyçš„é‡æŒ‡é’ˆå¯èƒ½ä¼šè®©ä½ æ›´åŠ crazyã€‚ æ¡ä»¶å…è®¸çš„è¯ï¼Œè¯·å¤šå¤šä½¿ç”¨å¼•ç”¨ï¼š æ›´å®‰å…¨ã€‚å¼•ç”¨ä½¿ç”¨å‰å¿…é¡»åˆå§‹åŒ–ï¼Œä¸”ä¸èƒ½ä¸ºç©ºï¼›æŒ‡é’ˆå¯ä»¥éšæ„æ”¹å˜ä»–çš„æŒ‡å‘çš„å¯¹è±¡ï¼ˆé‡æŒ‡é’ˆçš„ä¸€å¤§æ¸©åºŠï¼‰ï¼Œä½†å¼•ç”¨ä¸å¯ä»¥ã€‚ æ•ˆç‡æ›´é«˜ã€‚æŒ‡é’ˆæœ€åææ„æ—¶ï¼Œè¦å¤„ç†å†…å­˜é‡Šæ”¾é—®é¢˜ã€‚ æ•°ç»„ä¸ä¼šé€€åŒ–ä¸ºæŒ‡é’ˆã€‚å°†æ•°ç»„å¼•ç”¨ä½œä¸ºå‚æ•°æ—¶ï¼Œä¸ä¼šåƒæŒ‡é’ˆä¼ é€’ä¸€æ ·é€€åŒ–ä¸ºæŒ‡é’ˆã€‚ ç°åœ¨æˆ‘ä»¬æ¥è¿›è¡Œæ›´è¯¦ç»†çš„ä»‹ç»ã€‚ 2.2.1 å¼•ç”¨ç®€ä»‹ å¼•ç”¨åˆè¯† å£°æ˜ä¸€ä¸ªå¼•ç”¨å¾ˆç®€å•ï¼Œç±»å‹+&amp; å³å¯ï¼š 12int a = 0;int&amp; b = a; // å¼•ç”¨å£°æ˜å¿…é¡»åˆå§‹åŒ– å¼•ç”¨å°±æ˜¯å˜é‡çš„åˆ«åï¼Œå¯¹å¼•ç”¨çš„ä»»ä½•æ“ä½œç­‰ä»·äºæ“ä½œäºæœ¬ä½“ã€‚ 12b = 1;cout&lt;&lt;a&lt;&lt;endl; // 1 å˜é‡aã€bè¢«è§†ä¸ºåŒä¹‰è¯ã€‚åœ¨bä¸Šè¿”å›åœ°å€ï¼Œä¼šæ‰“å°açš„åœ°å€ï¼š 12std::cout &lt;&lt; &amp;a &lt;&lt; &#x27;\\n&#x27;; // 0x7fff16db208cstd::cout &lt;&lt; &amp;b &lt;&lt; &#x27;\\n&#x27;; // 0x7fff16db208c ç‰¹åˆ«çš„å¼•ç”¨è¿˜æœ‰ä¸¤ä¸ªé‡è¦ç‰¹æ€§ï¼š æ— æ³•ä¿®æ”¹å¼•ç”¨æŒ‡å‘ï¼Œå¯ä»¥ç†è§£ä¸ºå¼•ç”¨é»˜è®¤å°±æ˜¯å¸¸é‡å¼•ç”¨ã€‚ 12int c = 2;b = c; // ç­‰ä»·äºï¼šb=2ï¼Œæ— æ³•é‡æ–°æŒ‡å‘c å°±åƒæŒ‡é’ˆä¸€æ ·ï¼Œå¼•ç”¨åªèƒ½ç”¨å·¦å€¼ï¼ˆlå€¼ï¼‰è¿›è¡Œèµ‹å€¼ ï¼ˆç»“åˆä¸‹èŠ‚ç†è§£ï¼‰å› ä¸ºåªæœ‰å·¦å€¼æ‰æœ‰å±äºè‡ªå·±å†…å­˜åœ°å€ï¼Œæ‰èƒ½å¼•ç”¨æ—¶é—´æ¥å¯»å€æ‰¾åˆ°æœ¬ä½“å˜é‡ã€‚ 12345int a = 0;int&amp; b = a; // åˆæ³•ï¼Œå˜é‡bæ˜¯å·¦å€¼int&amp; b = 1; // éæ³•ï¼Œæ–‡å­—1æ˜¯å³å€¼int&amp; b = a+1; // éæ³•ï¼Œè¡¨è¾¾å¼a+1ä¹Ÿæ˜¯å³å€¼ ä»æ±‡ç¼–è§’åº¦çœ‹å¼•ç”¨ å¼•ç”¨åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿå˜é‡çš„åˆ«åï¼Ÿæ˜¯æŒ‡é’ˆï¼Ÿåˆå­¦è€…éš¾å…éƒ½è¦è¢«ç»•æ™•ã€‚ è¿™é‡Œå…ˆç»™å‡ºç»“è®ºï¼šå¼•ç”¨çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå¸¸é‡æŒ‡é’ˆï¼ŒæŒ‡é’ˆåœ¨CPUçœ¼ä¸­ä¹Ÿå’Œä¸€ä¸ªæ™®é€šå˜é‡æ²¡ä»€ä¹ˆåŒºåˆ«ã€‚ é“è¯å¦‚ä¸‹ï¼Œå ‚ä¸‹å¼•ç”¨è¿˜ä¸éœ²å‡ºåŸå‹ï¼Ÿ 123456789101112int main()&#123; int a = 0; // ä½¿ç”¨å¼•ç”¨ int&amp; b = a; b = 1; // ä½¿ç”¨æŒ‡é’ˆ int* c = &amp;a; *c = 2;&#125; å¯¹åº”æ±‡ç¼–ä»£ç ï¼š å¯ä»¥çœ‹åˆ°ä½¿ç”¨æŒ‡é’ˆï¼ˆâ‘¡å¤„ï¼‰å’Œä½¿ç”¨å¼•ç”¨ï¼ˆâ‘ å¤„ï¼‰æ±‡ç¼–ä»£ç åŸºæœ¬ä¸€è‡´ã€‚ä»¥æŒ‡é’ˆæ±‡ç¼–ä»£ç ä¸ºä¾‹ï¼š 12345678# å°†å˜é‡açš„åœ°å€ï¼ˆ-20(%rbp)ï¼‰å­˜å…¥å¯„å­˜å™¨raxleaq -20(%rbp), %rax# ä¸ºæŒ‡é’ˆcåˆ†é…å†…å­˜ï¼ˆ-16(%rbp)ï¼‰ï¼ŒåŒæ—¶å°†å˜é‡açš„åœ°å€å­˜å…¥movq %rax, -16(%rbp)# æŒ‡é’ˆçš„å€¼ï¼ˆå˜é‡açš„åœ°å€ï¼‰å­˜å…¥å¯„å­˜å™¨raxmovq -16(%rbp), %rax# å°†ç«‹å³æ•°é€šè¿‡é—´æ¥å¯»å€(),èµ‹å€¼ç»™å˜é‡amovl $2, (%rax) è¿™è¯´æ˜ï¼Œå¼•ç”¨åœ¨ç¼–è¯‘å™¨çœ¼é‡Œå°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œå­˜å‚¨äº†å˜é‡åœ°å€ï¼Œä½¿ç”¨å¼•ç”¨æ—¶ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åŠ ä¸Šé—´æ¥æ“ä½œç¬¦*ï¼Œæœ¬è´¨è¿˜æ˜¯ä¸€æ ·çš„ ã€‚ ä¸è¿‡è¿™ä¸ªâ€œæŒ‡é’ˆâ€è¿˜æ˜¯â€œå¸¸é‡æŒ‡é’ˆâ€ï¼Œæ‰€ä»¥å¼•ç”¨æœ¬èº«æ— æ³•è¢«ä¿®æ”¹ä¸”å¿…é¡»åˆå§‹åŒ–ï¼ˆconstä¿®é¥°çš„ç‰¹æ€§ï¼‰ã€‚ 12int&amp; b = a; // ç¼–è¯‘å™¨çœ¼é‡Œç­‰ä»·äºï¼šint* const b = &amp;a;b = 1; // ç¼–è¯‘å™¨çœ¼é‡Œç­‰ä»·äºï¼š*b=1 å¸Œæœ›çœ‹åˆ°è¿™å„¿çš„ä½ æœ‰ç§è±ç„¶å¼€æœ—çš„æ„Ÿè§‰ã€‚ 2.2.2 å¼•ç”¨å’Œconst å‰é¢æˆ‘ä»¬è¯´åˆ°ï¼Œå¼•ç”¨æœ¬èº«å°±ä¸èƒ½æ”¹å˜ï¼Œå› æ­¤â€œå¼•ç”¨â€æœ¬æ¥å°±å…·å¤‡â€œå¸¸é‡å¼•ç”¨â€ç‰¹æ€§ï¼ˆæ— æ³•ä¿®æ”¹ï¼‰ã€‚ åœ¨C++ä¸­ä¹Ÿä¸å­˜åœ¨â€œå¸¸é‡å¼•ç”¨â€è¿™ä¸ªæ¦‚å¿µï¼š 12int a = 1;int&amp; const b = a; // error: â€˜constâ€™ qualifiers cannot be applied to â€˜int&amp;â€™ ä½†å­˜åœ¨æŒ‡å‘æŒ‡å‘å¸¸é‡çš„å¼•ç”¨ã€‚ æŒ‡å‘å¸¸é‡çš„å¼•ç”¨ å°±åƒâ€œæŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆâ€ï¼ŒæŒ‡å‘å¸¸é‡çš„å¼•ç”¨å¯ä»¥ç”¨å¸¸é‡æˆ–éå¸¸é‡çš„å·¦å€¼è¿›è¡Œåˆå§‹åŒ–ï¼š 12345678int a = 0;const int b = 1;const int&amp; c = a; // okï¼Œaæ˜¯å·¦å€¼const int&amp; d = b; // okï¼Œbæ˜¯å·¦å€¼a = 2 ; // okc = 3 ; // errorï¼ŒæŒ‡å‘å¸¸é‡çš„å¼•ç”¨å°†å˜é‡å½“åšå¸¸é‡ï¼Œå³ä½¿å˜é‡æœ¬èº«ä¸æ˜¯å£°æ˜ä¸ºå¸¸é‡ ä½†æŒ‡å‘å¸¸é‡çš„å¼•ç”¨ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æ–‡å­—å³å€¼åˆå§‹åŒ–ï¼ˆè¿™å’Œæ™®é€šå¼•ç”¨/æŒ‡é’ˆä¸åŒï¼‰ï¼š 1const int&amp; e = 5; // ok å¼•ç”¨ä½œä¸ºå‡½æ•°å‚æ•° å¼•ç”¨ä½œä¸ºå‡½æ•°å‚æ•°ç›¸æ¯”æŒ‡é’ˆä½œä¸ºå‚æ•°æ›´åŠ æ¨èï¼ŒåŸå› å°±æ˜¯æœ¬èŠ‚å¼€å¤´æ‰€è¯´ï¼šå®‰å…¨ã€æ•ˆç‡é«˜ã€é¿å…äº†æ•°ç»„é€€åŒ–é—®é¢˜ã€‚ æ¡ä»¶å…è®¸çš„è¯ï¼Œæˆ‘ä»¬è¿˜å»ºè®®ä½ å°½é‡ä½¿ç”¨constä¿®é¥°å¼•ç”¨ï¼Œè¿™å¯ä»¥é¿å…ä¼ é€’çš„å‚æ•°è¢«ä¿®æ”¹ã€‚ 12345void printIt(const int&amp; x)&#123; // x = 1 ; // ä¸åˆæ³• std::cout &lt;&lt; x;&#125; 2.2.3 æŒ‡é’ˆå’Œå¼•ç”¨å°ç»“ å‰é¢æ ¸å¿ƒå†…å®¹æ€»ç»“ï¼š æœ¬è´¨ï¼šå¼•ç”¨æœ¬è´¨å°±æ˜¯å¸¸é‡æŒ‡é’ˆï¼ŒæŒ‡é’ˆæœ¬è´¨å°±æ˜¯å­˜å‚¨äº†å…¶å®ƒå˜é‡åœ°å€çš„å˜é‡ã€‚ å£°æ˜/èµ‹å€¼ï¼šå¼•ç”¨å’ŒæŒ‡é’ˆéƒ½åªèƒ½ç”¨å·¦å€¼è¿›è¡Œåˆå§‹åŒ–/èµ‹å€¼ï¼ˆä½†æŒ‡å‘å¸¸é‡çš„å¼•ç”¨å¯ä»¥ç”¨å³å€¼åˆå§‹åŒ–ï¼‰ï¼Œå¼•ç”¨è¿˜å¿…é¡»å£°æ˜æ—¶å°±åˆå§‹åŒ–ã€‚ const+æŒ‡é’ˆ/å¼•ç”¨ï¼šconstä½äº&amp; / * å‰åå…·æœ‰ä¸åŒè¯­ä¹‰ï¼›constè®©ä¿®é¥°çš„å˜é‡æ— æ³•è¢«ä¿®æ”¹ã€‚ æ™ºèƒ½æŒ‡é’ˆï¼šå–„äºä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆå¸®æˆ‘ä»¬è‡ªåŠ¨ç®¡ç†å†…å­˜é‡Šæ”¾ï¼Œå¾ªç¯å¼•ç”¨ä½¿ç”¨std::weak_ptrè¿›è¡Œè§£å†³ã€‚ æŒ‡é’ˆå’Œå¼•ç”¨çš„åŒºåˆ«ï¼š æœ¬è´¨ï¼šæŒ‡é’ˆæœ¬è´¨æ˜¯å˜é‡ï¼Œå¼•ç”¨æœ¬è´¨æ˜¯æŒ‡é’ˆä¹Ÿæ˜¯å˜é‡ï¼› åˆå§‹åŒ–ï¼šå¼•ç”¨å¿…é¡»åˆå§‹åŒ–ï¼ˆä¸”ä¸èƒ½ä¸ºNULLï¼‰ï¼ŒæŒ‡é’ˆä¸å¿…è¦åˆå§‹åŒ–ï¼ˆä½†ä¸åˆå§‹åŒ–å°±ä½¿ç”¨æ˜¯ä½¿ç”¨é‡æŒ‡é’ˆï¼‰ï¼› èµ‹å€¼ï¼šå¼•ç”¨å’ŒæŒ‡é’ˆéƒ½åªèƒ½ç”¨å·¦å€¼è¿›è¡Œåˆå§‹åŒ–/èµ‹å€¼ï¼ˆä½†æŒ‡å‘å¸¸é‡çš„å¼•ç”¨å¯ä»¥ç”¨å³å€¼åˆå§‹åŒ–ï¼‰ï¼› ä¿®æ”¹ï¼šå¼•ç”¨ä¸€æ—¦åˆå§‹åŒ–ä¹‹åå°±ä¸å¯ä»¥å†æ”¹å˜ï¼ŒæŒ‡é’ˆå˜é‡å¯ä»¥é‡æ–°æŒ‡å‘åˆ«çš„å˜é‡ï¼› â€¦ 2.3 åŠŸåŠ›æå‡ 2.3.1 å¾ªç¯ä½ çœŸçš„ä¼šäº†å—ï¼šfor_each&amp;è¿­ä»£å™¨ å°‘å¹´ï¼Œæƒ³æ›´ä¼˜é›…çš„éå†å‡è£…é«˜æ‰‹å—ï¼Ÿ æ¥ä½¿ç”¨æ›´ç®€å•ã€æ›´å®‰å…¨çš„å¾ªç¯ç§°ä¸ºfor-eachå¾ªç¯ã€è¿­ä»£å™¨æ›¿æ¢æ™®é€šçš„forå¾ªç¯å§ã€‚ for_each for å¾ªç¯éå†å…ƒç´ æ—¶æ›´åŠ çš„çµæ´»ï¼ˆæ¯”å¦‚æŒ‡å®šé•¿åº¦çš„æ•°ç»„å…ƒç´ ï¼‰ï¼Œä½†ä¹Ÿå¾ˆå®¹æ˜“å‡ºé”™ã€‚æ¯”å¦‚ä½ ä¸å°å¿ƒå†™é”™äº†æ•°ç»„é•¿åº¦ï¼š 123int arr[] = &#123;1,2,3&#125;;for(int i=1 ; i&lt;4 ; i++) std::cout&lt;&lt;arr[i]&lt;&lt;std::endl; // å‡ºé”™ï¼Œè®¿é—®arr[3]è¶Šç•Œ for-each æä¾›äº†æ›´ç®€å•ã€å®‰å…¨çš„æ–¹å¼ï¼Œç‰¹åˆ«ä½ éœ€è¦è·å–æ‰€æœ‰å…ƒç´ çš„æƒ…å†µã€‚ for-each è¿˜é€‚åˆstd::arrayã€std::vectorç­‰å®¹å™¨ï¼› for-each ä¸é€‚åˆæŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆï¼ˆåŠ¨æ€æ•°ç»„ï¼‰ï¼Œå› ä¸ºæŒ‡é’ˆä¸æ˜¯æ•°ç»„ï¼Œæ— æ³•éå†ï¼ˆæ ¹æœ¬åŸå› æ˜¯æ— æ³•æ ¹æ®æŒ‡é’ˆçŸ¥é“æ•°ç»„çš„é•¿åº¦ï¼‰ã€‚ for-eachè¯­å¥çš„è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š 12for (element_declaration : array) statement; è¯•ä¸€è¯•ï¼š 12345int arr[] = &#123;1,2,3&#125;;for(int num:arr)&#123; std::cout&lt;&lt;num&lt;&lt;std::endl;&#125; å¥½èµ·æ¥äº†ã€‚ æˆ‘ä»¬è¿˜å¯ä»¥ä¼˜åŒ–ä¸Šé¢çš„ç¨‹å¼ï¼Œè®©ä¸–ç•Œæ›´ç¾å¥½ï¼š ä½¿ç”¨å¼•ç”¨ã€‚for-each ç”¨å€¼å¤åˆ¶æ–¹å¼æŠŠæ•°ç»„æ¯ä¸ªå…ƒç´ å¤åˆ¶ç»™num ï¼Œè¿™æ˜¾ç„¶æœ‰ç‚¹ç³Ÿç³•ï¼Œä½¿ç”¨å¼•ç”¨æ›´å¥½ã€‚ constä¿®é¥°ã€‚ä¸€ä¸ªå¤§æ°”çš„ç¨‹åºå‘˜è¦å–„äºä½¿ç”¨constï¼Œè¿™é‡Œæ˜¾ç„¶ä¸éœ€è¦æ”¹åŠ¨ è¿™é‡Œè¿˜æ˜¯ä½¿ç”¨autoå…³é”®å­—è‡ªåŠ¨æ¨æ–­ç±»å‹ï¼ˆæ‡’è›‹ç‹‚å–œï¼‰ã€‚ 1234567int arr[] = &#123;1,2,3&#125;;// autoå…³é”®å­—ä¼šæ¶ˆé™¤&amp;å’Œconstè¯­ä¹‰ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¾ç¤ºå£°æ˜// è¯·å‚è€ƒï¼Œ3.XèŠ‚ï¼šå†è°ˆautofor(const auto&amp; num:arr)&#123; std::cout&lt;&lt;num&lt;&lt;std::endl;&#125; ç¾å¥½çš„ä¸–ç•Œå€¼å¾—åŸè¯—ä¸€é¦–ã€‚ æ·±åœ³å¤å¤©çš„é˜³å…‰åˆºå¾—çœ¼ç›çœ¯æˆä¸€æ¡ç¼ è…¾è®¯å¤§å¦å¤–å¤©ç©ºè“å¾—å¯ä»¥çœ‹è§ç™½äº‘ æ„Ÿè§‰ä¸€åˆ‡æš–æ´‹æ´‹ã€è½¯ç»µç»µ æˆ‘ä¹Ÿæ…¢æ‚ æ‚ ã€æ™ƒè¡è¡ å¥½åƒå°±è¦é£˜å»å¤–å¤ªç©º â€” by royhuang è¿­ä»£å™¨ è¿­ä»£å™¨ æ—¨åœ¨ç”¨æ¥éå†å®¹å™¨çš„å¯¹è±¡ï¼ˆä¾‹å¦‚ï¼Œæ•°ç»„ä¸­çš„å€¼ï¼Œæˆ–å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ï¼‰ï¼Œæä¾›å¯¹æ¯ä¸ªå…ƒç´ çš„è®¿é—®ã€‚ è¿­ä»£å™¨å¹¶æ²¡æœ‰é‚£ä¹ˆç¥ç§˜ï¼Œæˆ‘ä»¬ç†Ÿæ‚‰çš„æŒ‡é’ˆï¼ˆåº”è¯¥å·²ç»ç†Ÿæ‚‰äº†å§ï¼Ÿï¼‰å°±å¯ä»¥å½“åšè¿­ä»£å™¨ã€‚ ä¾æ—§æ˜¯æ”¹å†™ä¹‹å‰çš„ä¾‹å­ï¼š 12345678const int* begin = arr; // æ³¨æ„ï¼Œæ­¤æ—¶endæŒ‡å‘çš„æ•°ç»„å°¾å…ƒç´ ä¸‹ä¸€ä¸ªä½ç½®ï¼Œä¸æ˜¯å°¾å…ƒç´ const int* end = begin+sizeof(arr)/sizeof(arr[0]);// æ­¤æ—¶ptrå°±æ˜¯è¿­ä»£å™¨for(const int* ptr = begin ; ptr != end ; ptr++)&#123; std::cout&lt;&lt;*ptr&lt;&lt;std::endl;&#125; å¯¹äºæ ‡å‡†åº“å®¹å™¨ è¿˜é€šå¸¸ä¼šç›´æ¥æä¾›å¯¹è¿­ä»£çš„æ”¯æŒï¼Œæ— éœ€è‡ªå·±å†™ã€‚ ä»¥std::array ä¸ºä¾‹ï¼š 1234567891011121314151617#include &lt;array&gt;#include &lt;iostream&gt;int main()&#123; std::array array = &#123;1, 2, 3&#125;; auto begin = array.begin(); auto end = array.end() ; // æ•°ç»„å°¾å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´  // è¿­ä»£å™¨åŸºäºforå¾ªç¯ for (auto p=begin ; p != end; ++p) &#123; std::cout &lt;&lt; *p &lt;&lt; &#x27; &#x27;; &#125; std::cout &lt;&lt; &#x27;\\n&#x27;; return 0;&#125; è¾“å‡ºï¼š 11 2 3 å½“ç„¶ä½ ä½¿ç”¨for æˆ–è€… for_each å¾ªç¯éå†åº“å®¹å™¨ä¹Ÿæ˜¯okçš„ã€‚ å°ç»“ éå†æ•°ç»„ã€åº“å®¹å™¨ç­‰å¯ä»¥ä½¿ç”¨forå¾ªç¯ã€for_eachå¾ªç¯ä»¥åŠè¿­ä»£å™¨ï¼ˆåŸºäºforå¾ªç¯ï¼‰ã€‚ åº“å®¹å™¨éƒ½æ”¯æŒè¿­ä»£å™¨ï¼Œå› æ­¤å¯¹äºåº“å®¹å™¨ï¼Œä½¿ç”¨forå¾ªç¯+è¿­ä»£å™¨æ›´å¥½ï¼ˆå¤æ‚çš„å¾ªç¯æœ€å¥½çš„åšæ³•æ˜¯ç»“åˆåº“å‡½æ•°ä½¿ç”¨ï¼Œæ¯”å¦‚std::sort ï¼Œ2.3.3èŠ‚ä»‹ç»ï¼‰ã€‚ 2.3.2 ä½¿ç”¨æ›´å¥½çš„æ•°ç»„ï¼šarray&amp;vector åœ¨å‰é¢æˆ‘ä»¬è¯¦ç»†è®¨è®ºäº†å›ºå®šæ•°ç»„å’ŒåŠ¨æ€æ•°ç»„ï¼Œå°½ç®¡ä¸¤è€…éƒ½å†…ç½®äº C++ è¯­è¨€ä¸­ï¼Œä½†å®ƒä»¬éƒ½æœ‰ç¼ºç‚¹ï¼š å›ºå®šæ•°ç»„è¡°å‡ä¸ºæŒ‡é’ˆï¼Œè¿™æ ·åšæ—¶ä¼šä¸¢å¤±æ•°ç»„é•¿åº¦ä¿¡æ¯ï¼› åŠ¨æ€æ•°ç»„å­˜åœ¨æ··ä¹±çš„é‡Šæ”¾é—®é¢˜ï¼Œå¹¶ä¸”éš¾ä»¥æ— è¯¯åœ°è°ƒæ•´å¤§å°ã€‚ å› æ­¤æˆ‘ä»¬è¯´ä½¿ç”¨array&amp;vectoræ›¿ä»£C++å†…ç½®æ•°ç»„ï¼Œæ˜¯æ›´å¥½çš„ç¼–ç¨‹å®è·µã€‚ std::arrayï¼šæ›¿ä»£é™æ€æ•°ç»„ std::array æä¾›å›ºå®šçš„æ•°ç»„åŠŸèƒ½ï¼Œå½“ä¼ é€’ç»™å‡½æ•°æ—¶ä¸ä¼šè¡°å‡ï¼Œè€Œä¸”è¶…å‡ºèŒƒå›´æ—¶ä¼šè‡ªè¡Œæ¸…ç†ã€‚ å£°æ˜å’Œä½¿ç”¨ä¸€ä¸ªstd::arrayå˜é‡å¾ˆç®€å•ï¼š 12345#include &lt;array&gt;// C++17å‰ä¸å…è®¸çœç•¥é•¿åº¦std::array&lt;int, 3&gt; my_array = &#123;1,2,3&#125;;my_array[1]; // å’Œæ™®é€šæ•°ç»„ä¸€æ ·ä½¿ç”¨ æ³¨æ„åˆ°std::array å’Œæ™®é€šæ•°ç»„å·®åˆ«å¾ˆå¤§ï¼ˆå¯ä»¥é‡æ–°èµ‹å€¼ï¼‰ï¼š 1my_array = &#123;3,4,5&#125;; // é‡æ–°èµ‹å€¼ï¼Œå†…ç½®çš„æ•°ç»„æ›´åƒæ˜¯ä¸ªå¸¸é‡æŒ‡é’ˆï¼Œä¸€æ—¦åˆå§‹åŒ–ä¸èƒ½é‡æ–°èµ‹å€¼ éªŒè¯ä¸€ä¸‹std::array ä½œä¸ºå‡½æ•°å‚æ•°ä¸ä¼šé€€åŒ–ä¸ºæŒ‡é’ˆã€‚ 1234567891011121314151617#include&lt;iostream&gt;#include&lt;array&gt;void printArray(const std::array&lt;float, 5&gt;&amp; my_array)&#123; for (const auto&amp; elem : my_array) // ä¸ä¼šè¡°å‡ä¸ºæŒ‡é’ˆï¼Œå¯ä»¥ä½¿ç”¨for_eachå¾ªç¯ std::cout &lt;&lt; elem &lt;&lt; &#x27; &#x27;; std::cout &lt;&lt; &#x27;\\n&#x27;;&#125;int main()&#123; std::array&lt;float, 5&gt; my_array = &#123; 9.0, 7.2, 5.4, 3.6, 1.8 &#125;; printArray(my_array); return 0; // my_arrayè¢«è‡ªåŠ¨é‡Šæ”¾&#125; è¾“å‡ºï¼š 19 7.2 5.4 3.6 1.8 ä¼˜åŒ–ï¼šä½¿ç”¨æ¨¡æ¿è®©å‡½æ•°æ”¯æŒä»»æ„ç±»å‹çš„å‚æ•°ã€é•¿åº¦çš„æ•°ç»„ã€‚ 1234567template &lt;typename T, std::size_t size&gt; void printArray(const std::array&lt;T, size&gt;&amp; my_array)&#123; for (const auto&amp; elem : my_array) std::cout &lt;&lt; elem &lt;&lt; &#x27; &#x27;; std::cout &lt;&lt; &#x27;\\n&#x27;;&#125; è¿™æ¶‰åŠåˆ°æ¨¡æ¿ç›¸å…³çŸ¥è¯†ï¼Œæš‚ä¸ç»†è¡¨ã€‚ å½“ç„¶ï¼Œstd::arrayä¸é™äºæ•°å­—ä½œä¸ºå…ƒç´ ï¼Œå¯ä»¥åœ¨å¸¸è§„æ•°ç»„ä¸­ä½¿ç”¨çš„æ¯ç§ç±»å‹éƒ½å¯ä»¥åœ¨std::arrayä¸­ä½¿ç”¨ã€‚ è¯·çœ‹ä¸‹é¢çš„ç»“æ„æ•°ç»„ã€‚ æ³¨æ„ç›¸æ¯”æ™®é€šç»“æ„ä½“æ•°ç»„ï¼Œarrayç»“æ„ä½“æ•°ç»„åˆå§‹åŒ–è¿˜è¦å¤šä¸€å¯¹å¤§æ‹¬å·ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738#include &lt;array&gt;#include &lt;iostream&gt;struct House&#123; int number&#123;&#125;; int stories&#123;&#125;; int roomsPerStory&#123;&#125;;&#125;;int main()&#123; /* House houses[] = &#123; &#123; 13, 4, 30 &#125;, &#123; 14, 3, 10 &#125;, &#123; 15, 3, 40 &#125; &#125;; */ std::array&lt;House, 3&gt; houses = &#123; &#123; // å¤–ä¾§å¤šäº†ä¸€å¯¹å¤§æ‹¬å·ï¼Œå¦åˆ™åˆå§‹åŒ–ä¼šå‡ºé”™ &#123;13, 4, 30 &#125;, &#123;14, 3, 10 &#125;, &#123;15, 3, 40 &#125; &#125;, &#125;; for (const auto&amp; house : houses) &#123; std::cout &lt;&lt; &quot;House number &quot; &lt;&lt; house.number &lt;&lt; &quot; has &quot; &lt;&lt; (house.stories * house.roomsPerStory) &lt;&lt; &quot; rooms\\n&quot;; &#125; return 0;&#125; è¾“å‡ºï¼š 123House number 13 has 120 roomsHouse number 14 has 30 roomsHouse number 15 has 120 rooms std::array æœ‰ç”¨çš„æ–¹æ³•ã€‚ å…¬å…±ä»£ç ï¼š 1234#include&lt;iostream&gt;#include&lt;array&gt;std::array&lt;int, 5&gt; my_array = &#123; 1,2,3,4,5 &#125;; è·å–å¤§å° 1myArray.size(); // 5 æ’åº 2.3.3èŠ‚æœ‰è¯¦ç»†çš„ä»‹ç»ã€‚ 123#include &lt;algorithm&gt; // for std::sortstd::sort(myArray.begin(), myArray.end()); å°ç»“ï¼šstd::array å£°æ˜æ—¶å¿…é¡»è¦æŒ‡å®šé•¿åº¦æœ‰ç‚¹ç¬¨æ‹™ï¼Œä½†å®ƒæœ‰å¾ˆå¤šä¼˜ç‚¹----æ¯”å¦‚ä¸ä¼šé€€åŒ–ä¸ºæŒ‡é’ˆã€ä¸ç”¨æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ï¼Œæ ‡å‡†åº“ä¼—å¤šå‡½æ•°æ”¯æŒã€‚æ‰€ä»¥å°½å¯èƒ½åœ°å»ä½¿ç”¨å®ƒæ›¿ä»£æ™®é€šé™æ€æ•°ç»„å§ã€‚ std::vectorï¼šæ›¿ä»£åŠ¨æ€æ•°ç»„ ç›¸æ¯”std::array æä¾›å›ºå®šçš„æ•°ç»„ ï¼Œstd::vector åŒæ ·ä¼šè‡ªåŠ¨ç®¡ç†æ•°ç»„å†…å­˜ï¼Œä¸è¡°å‡ä¸ºæŒ‡é’ˆã€‚ è€Œä¸” std::vector è¿˜æ”¯æŒå¯å˜çš„æ•°ç»„ï¼Œä¹Ÿå°±æ˜¯åŠ¨æ€æ•°ç»„ã€‚ ä¸€ä¸ªç®€å•ä¾‹å­ï¼Œæ³¨æ„åˆ° std::vectorå£°æ˜æ—¶ä¸å¿…æŒ‡æ˜é•¿åº¦ï¼ˆåŠ¨æ€æ•°ç»„ç‰¹æ€§ï¼‰ï¼š 1234567#include &lt;vector&gt;std::vector&lt;int&gt; array; // åŠ¨æ€æ•°ç»„ï¼Œå¯ç¨ååˆå§‹åŒ–ï¼Œä¸å¿…æŒ‡é’ˆé•¿åº¦std::vector&lt;int&gt; array2 = &#123; 9, 7, 5, 3, 1 &#125;;array2 = &#123;1,2,3&#125;; // å¯ä»¥é‡æ–°åˆ†é…array[1]; // ä½¿ç”¨å’Œæ™®é€šæ•°ç»„ä¸€æ · ç±»ä¼¼çš„ï¼Œstd::vector ä½œä¸ºå‡½æ•°å‚æ•°ä¸ä¼šé€€åŒ–ä¸ºæŒ‡é’ˆï¼Œè¿™é‡Œä¸å†é‡å¤éªŒè¯ã€‚ std::vector æœ‰ç”¨çš„æ–¹æ³•ã€‚ å…¬å…±ä»£ç ï¼š 1234#include&lt;iostream&gt;#include&lt;vector&gt;std::vector&lt;int&gt; my_array = &#123; 1,2,3,4,5 &#125;; è·å–å¤§å° 1my_array.size(); // 5 è°ƒæ•´å¤§å° è°ƒå¤§åå¤šä½™ç©ºé—´é»˜è®¤ç”¨0å¡«å……ã€‚ 1234my_array.resize(8); for (int i : my_array) std::cout &lt;&lt; i &lt;&lt; &#x27; &#x27;; // 1 2 3 4 5 0 0 0 å‘ä¸‹è°ƒæ•´ï¼Œåªæ‰“å°resizeåé•¿åº¦åŒ…å«çš„å…ƒç´ ã€‚ 1234my_array.resize(3); for (int i : my_array) std::cout &lt;&lt; i &lt;&lt; &#x27; &#x27;; // 1 2 3 å°ç»†èŠ‚ï¼šstd::vector ä¸­å®¹é‡å’Œé•¿åº¦å¹¶ä¸ç›¸ç­‰ã€‚ é•¿åº¦æ˜¯æ•°ç»„ä¸­ä½¿ç”¨äº†å¤šå°‘å…ƒç´ ï¼Œè€Œå®¹é‡æ˜¯åœ¨å†…å­˜ä¸­åˆ†é…äº†å¤šå°‘å…ƒç´ ã€‚ ä¸ºäº†é¿å…é¢‘ç¹çš„resizeåˆ†é…ç©ºé—´ï¼ˆè°ƒæ•´æ•°ç»„å¤§å°é€šå¸¸ä»£ä»·æ¯”è¾ƒæ˜‚è´µï¼‰ï¼Œstd::vector ä¸­é•¿åº¦å’Œå®¹é‡ä¸ä¸€å®šç›¸ç­‰ã€‚ ä¸‹é¢ä»£ç çœ‹èµ·æ¥å¥½åƒä¸€åˆ‡æ­£å¸¸ã€‚ 1234std::vector&lt;int&gt; array2 = &#123; 9, 7, 5, 3, 1 &#125;;std::cout &lt;&lt; array2.size() &lt;&lt;std::endl;std::cout &lt;&lt; array2.capacity() &lt;&lt;std::endl; è¾“å‡ºï¼š 1255 ä½†æ˜¯æˆ‘ä»¬å¦‚æœè¿›è¡Œresizeåå†çœ‹ ï¼š 123array2.resize(3);std::cout &lt;&lt; array2.size() &lt;&lt;std::endl; // []åŸºäºé•¿åº¦ï¼Œarray[4]éæ³•std::cout &lt;&lt; array2.capacity() &lt;&lt;std::endl; è¾“å‡ºï¼š 1235 å®¹é‡ä¾æ—§æ˜¯5 å¹¶æ²¡æœ‰éšä¹‹æ”¹å˜ï¼Œå³é¢„ç•™äº†ä¸€äº›ç©ºé—´ï¼Œè¿™æ ·å¦‚æœå†æ¬¡å‘ç”Ÿresize&lt;=5å¯ä»¥ä¸ç”¨é‡æ–°åˆ†é…ç©ºé—´ã€‚ 123array2.resize(4);std::cout &lt;&lt; array2.size() &lt;&lt;std::endl;std::cout &lt;&lt; array2.capacity() &lt;&lt;std::endl; è¾“å‡ºï¼š 1245 # æ•°ç»„å®é™…ä¸Šæ²¡æœ‰è¿›è¡Œresizeï¼Œè¿˜æ˜¯ä¹‹å‰çš„å®¹é‡4 leetcodeç¥å™¨ï¼šstd::vector è¿˜æœ‰ä¸€å¤§ç”¨é€”æ˜¯ä½œä¸ºå †æ ˆä½¿ç”¨ã€‚ ä¸€ä¸ªç®€å•çš„å°ä¾‹å­ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738#include &lt;iostream&gt;#include &lt;vector&gt;void printStack(const std::vector&lt;int&gt;&amp; stack)&#123; for (auto element : stack) std::cout &lt;&lt; element &lt;&lt; &#x27; &#x27;; std::cout &lt;&lt; &quot;(cap &quot; &lt;&lt; stack.capacity() &lt;&lt; &quot; length &quot; &lt;&lt; stack.size() &lt;&lt; &quot;)\\n&quot;;&#125;int main()&#123; std::vector&lt;int&gt; stack&#123;&#125;; printStack(stack); // (cap 0 length 0) // 3--&gt;2--&gt;1 ä¾æ¬¡å‹å…¥ stack.push_back(3); printStack(stack); // 3 (cap 1 length 1) stack.push_back(2); printStack(stack); // 3 2 (cap 2 length 2) stack.push_back(1); printStack(stack); // 3 2 1 (cap 4 length 3) // 1--&gt;2--&gt;3 ä¾æ¬¡å¼¹å‡º stack.pop_back(); printStack(stack); // 3 2 (cap 4 length 2) stack.pop_back(); printStack(stack); // 3 (cap 4 length 1) stack.pop_back(); printStack(stack); // (cap 4 length 0) return 0;&#125; æœ‰ä¸¤ä¸ªç»†èŠ‚éœ€æ³¨æ„ï¼š å®¹é‡ç»è¿‡ï¼š0â€“&gt;1â€“&gt;2â€“&gt;4ï¼Œå››æ¬¡è°ƒæ•´å®¹é‡ï¼Œæ¯”è¾ƒå½±å“æ€§èƒ½ï¼› å½“vectorè¢«è°ƒæ•´å¤§å°æ—¶ï¼Œå¯èƒ½ä¼šåˆ†é…æ¯”éœ€è¦çš„æ›´å¤šçš„å®¹é‡ï¼ˆç¬¬ä¸‰æ¬¡pushè¿›1åï¼Œå®¹é‡ä»2â€“&gt;4ï¼Œè€Œä¸æ˜¯2â€“&gt;3ï¼‰ã€‚ ä¸ºäº†é¿å…å®¹é‡è¢«é¢‘ç¹è°ƒæ•´ï¼Œæˆ‘ä»¬å¯ä»¥æå‰åˆ†é…ä¸€å®šå®¹é‡ï¼ˆleetcodeé¿å…è¶…æ—¶ï¼‰ã€‚ 12// æ·»åŠ åˆ°ä»£ç 14è¡Œå¤„stack.reserve(5); // é¢„åˆ†é…å®¹é‡5 å†æ¬¡æ‰“å°å‡ºå®¹é‡å˜åŒ–ï¼š 1234567(cap 5 length 0)3 (cap 5 length 1)3 2 (cap 5 length 2)3 2 1 (cap 5 length 3)3 2 (cap 5 length 2)3 (cap 5 length 1)(cap 5 length 0) perfect~æ•´ä¸ªè¿‡ç¨‹é™¤äº†ç¬¬ä¸€æ¬¡è°ƒæ•´è¿‡å®¹é‡ï¼Œä¾¿æ²¡æœ‰å†æ¬¡è°ƒæ•´è¿‡äº†ã€‚ 2.3.3 å¤šä½¿ç”¨æ ‡å‡†åº“ç®—æ³• å‰é¢æˆ‘ä»¬è¯´åˆ°ï¼Œåº“å®¹å™¨std::arrayã€std::vectorä¸€å¤§å¥½å¤„å°±æ˜¯è¢«æ ‡å‡†åº“æ”¯æŒå¾ˆå¤šç›¸å…³ç®—æ³•ã€‚ å¯¹äºæ–°æ‰‹ç¨‹åºå‘˜ç©å®¶æ¥è¯´ï¼Œè‡ªå·±å†™å¾ªç¯éå†æ•°ç»„æ˜¯ç»å¸¸éœ€è¦åšçš„äº‹ã€‚ç®€å•çš„å¯èƒ½åªæ˜¯ä¸ºäº†æ‰“å°ä¸‹æ•°ç»„ï¼Œå¤æ‚ç‚¹å¯èƒ½è¿˜è¦å»å¤„ç†æ•°ç»„æ’åºã€æŸ¥æ‰¾ã€è®¡æ•°ç­‰ã€‚ ä½†å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„åº“å®¹å™¨ï¼Œå°±å¯ä»¥å¾ˆå¥½é…åˆC++æ ‡å‡†åº“å‡½æ•°ï¼Œè½»æ¾åœ°å®Œæˆå¤æ‚çš„å¾ªç¯å¤„ç†æ“ä½œï¼ˆå¤§ä½¬é¢„å…ˆå¸®ä½ å†™å¥½æ¥å£ä¸èˆ’æœå˜›ï¼Ÿï¼‰ã€‚ C++æ ‡å‡†åº“æä¾›çš„å‡½æ•°åŠŸèƒ½åˆ†ä¸ºä¸‰ç±»ï¼š Inspectors ï¼šæ£€æŸ¥å™¨ï¼Œä»…åªè¯»å®¹å™¨ä¸­çš„æ•°æ®ï¼Œæ¯”å¦‚æœç´¢å’Œè®¡æ•°ï¼› Mutators ï¼šä¿®æ”¹å™¨ï¼Œä¿®æ”¹å®¹å™¨ä¸­æ•°æ®ï¼Œæ¯”å¦‚æ’åºæˆ–åˆ†å‘ï¼› Facilitatorsï¼šä¿ƒè¿›å™¨ï¼Œæ ¹æ®æ•°æ®æˆå‘˜çš„å€¼ç”Ÿæˆç»“æœã€‚ æœ¬èŠ‚å°†ä»‹ç»å¸¸ç”¨çš„ä¸€äº›ç®—æ³•ï¼Œè™½ç„¶åªæ˜¯ä¸€å°éƒ¨åˆ†ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†ç®—æ³•å·¥ä½œæ–¹å¼ç›¸ä¼¼ã€‚å…³é”®åœ¨äºäº†è§£å…¶å·¥ä½œåŸç†ï¼Œå°±å¯ä»¥è½»æ¾ä½¿ç”¨å…¶å®ƒç®—æ³•ã€‚ éå†ï¼šstd::for_each std::for_eachç®€ä»‹ï¼š è¾“å…¥ï¼šåˆ—è¡¨ï¼Œæ¯ä¸ªåˆ—è¡¨å…ƒç´ çš„æ“ä½œè§„åˆ™ï¼› è¾“å‡ºï¼šæŒ‡å®šæ“ä½œåçš„åˆ—è¡¨ï¼› åº”ç”¨ï¼šå½“æˆ‘ä»¬å¸Œæœ›å¯¹åˆ—è¡¨æ‰§è¡Œç›¸åŒæ“ä½œæ—¶ã€‚ ä¸¾ä¾‹è¯´æ˜ï¼šå¯¹åˆ—è¡¨æ¯ä¸ªå…ƒç´ è¶…çº§åŠ å€ã€‚ 1234567891011121314151617181920212223#include &lt;algorithm&gt;#include &lt;array&gt;#include &lt;iostream&gt;void doubleNumber(int&amp; i) // è¶…çº§åŠ å€&#123; i *= 2;&#125;int main()&#123; std::array&lt;int,6&gt; arr = &#123; 1, 2, 3, 4 &#125;; // å¯¹è¿­ä»£å™¨è·å–çš„æ¯ä¸ªå…ƒç´ è¿›è¡ŒæŒ‡å®šæ“ä½œï¼ˆdoubleNumberï¼‰ std::for_each(arr.begin(), arr.end(), doubleNumber); for (int i : arr) &#123; std::cout &lt;&lt; i &lt;&lt; &#x27; &#x27;; &#125; std::cout &lt;&lt; &#x27;\\n&#x27;; return 0;&#125; è¾“å‡ºï¼š 12 4 6 8 ç›¸æ¯”ä¹‹ä¸‹ä¼¼ä¹å†…ç½®çš„for_each å¾ªç¯è¿˜èƒ½å®ç°å¾—æ›´ç®€å•ï¼Ÿè¿™ä¸ªä¾‹å­æ²¡çœ‹åˆ°ç›¸æ¯”for å¾ªç¯æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ ç›¸æ¯”for å¾ªç¯ï¼Œfor_each èƒ½æ›´æ¸…æ™°è¡¨è¾¾æˆ‘ä»¬çš„æ„å›¾ä¹Ÿæ›´ä¸å®¹æ˜“å‡ºé”™ï¼ˆä¸ç”¨å®šä¹‰é¢å¤–çš„ç´¢å¼•å˜é‡iï¼‰ï¼› std::for_eachæ”¯æŒå¹¶è¡ŒåŒ–ï¼Œæ›´é€‚åˆå¤§é¡¹ç›®/å¤§æ•°æ®ã€‚ æ’åºï¼šstd::sort std::sortç®€ä»‹ï¼š è¾“å…¥ï¼šåˆ—è¡¨ï¼Œä¸¤ä¸ªå…ƒç´ æ¯”è¾ƒè§„åˆ™ï¼› è¾“å‡ºï¼šæ’åºåçš„åˆ—è¡¨ï¼› åº”ç”¨ï¼šå½“æˆ‘ä»¬å¸Œæœ›å¯¹åˆ—è¡¨è¿›è¡Œæ’åºæ—¶ã€‚ std::sort æ’åºå®ä¾‹ã€‚ 123456789101112131415161718192021222324#include &lt;algorithm&gt;#include &lt;array&gt;#include &lt;iostream&gt;bool greater(int a, int b)&#123; // Order @a before @b if @a is greater than @b. return (a &gt; b);&#125;int main()&#123; std::array&lt;int,6&gt; arr = &#123; 13, 90, 99, 5, 40, 80 &#125;; // greaterå®šä¹‰åˆ—è¡¨ä¸¤ä¸ªå…ƒç´ æ¯”è¾ƒè§„åˆ™ std::sort(arr.begin(), arr.end(), greater); for (int i : arr) &#123; std::cout &lt;&lt; i &lt;&lt; &#x27; &#x27;; &#125; std::cout &lt;&lt; &#x27;\\n&#x27;; return 0;&#125; è¾“å‡ºï¼š 199 90 80 40 13 5 å¥½æ¶ˆæ¯ï¼Œå› ä¸ºé™åºæ’åºå¾ˆæ™®éï¼ŒC++å¤§å¼€æ–¹ä¾¿ä¹‹é—¨æä¾›äº†è‡ªå®šä¹‰ç±»å‹std::greater ï¼Œè€Œä¸ç”¨æˆ‘ä»¬è‡ªå·±å†™ä¸€ä¸ªæ¯”è¾ƒå‡½æ•°ã€‚ 1std::sort(arr.begin(), arr.end(), std::greater&lt;int&gt;()); æ³¨æ„åˆ°ï¼Œstd::greater è°ƒç”¨æœ‰ç‚¹å¥‡æ€ªï¼Œå› ä¸ºå®ƒæ˜¯ä¸ªæ¨¡æ¿ç±»ï¼ˆå‚æ•°ç±»å‹è¦æ±‚æ˜¯å‡½æ•°æŒ‡é’ˆï¼‰ï¼š1ï¼‰&lt;int&gt; ä¼ å…¥æ¨¡æ¿å‚æ•°ï¼Œ2ï¼‰ç±»ä¸­é‡è½½äº†æ“ä½œç¬¦() ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°å¯¹è±¡ã€‚ æŸ¥æ‰¾ï¼šstd::find &amp; std::find_if std::findç®€ä»‹ï¼š è¾“å…¥ï¼šåˆ—è¡¨ï¼Œè¢«æŸ¥æ‰¾çš„å…ƒç´ ï¼› è¾“å‡ºï¼šï¼ˆæ‰¾åˆ°æ—¶ï¼‰å…ƒç´ çš„æŒ‡é’ˆï¼Œï¼ˆæœªæ‰¾åˆ°æ—¶ï¼‰å°¾å…ƒç´ çš„æŒ‡é’ˆï¼› åº”ç”¨ï¼šå½“æˆ‘ä»¬å¸Œæœ›æŸ¥æ‰¾æŸä¸ªå…ƒç´ æ—¶æ—¶ã€‚ ä¸‹é¢ä»£ç å±•ç¤ºï¼šæ‰¾åˆ°å®¹å™¨æŒ‡å®šçš„æŸä¸ªå…ƒç´ ï¼Œå¹¶è¿›è¡Œä¿®æ”¹æ›¿æ¢ã€‚ 12345678910111213141516171819202122232425262728293031#include &lt;algorithm&gt;#include &lt;array&gt;#include &lt;iostream&gt;int main()&#123; std::array&lt;int,6&gt; arr = &#123; 13, 90, 99, 5, 40, 80 &#125;; std::cout &lt;&lt; &quot;è¾“å…¥è¦æŸ¥æ‰¾çš„å…ƒç´ ï¼Œå’Œæ¬²æ›¿æ¢çš„å€¼: &quot;; int search=-1; int replace=-1; std::cin &gt;&gt; search &gt;&gt; replace; // æŸ¥æ‰¾å…ƒç´  auto found = std::find(arr.begin(), arr.end(), search); // å¦‚æœæ²¡æ‰¾åˆ° if (found == arr.end()) &#123; std::cout &lt;&lt; &quot;æœªæ‰¾åˆ°æŒ‡å®šå…ƒç´ ï¼š &quot; &lt;&lt; search &lt;&lt; &#x27;\\n&#x27;; &#125; else &#123; // å¦‚æœæ‰¾åˆ°ï¼Œè¿˜è¿›è¡Œæ›¿æ¢ *found = replace; &#125; std::cout &lt;&lt;&quot;found: &quot; &lt;&lt; *found &lt;&lt; &#x27;\\n&#x27;; return 0;&#125; è¾“å‡ºï¼š 1234567[root@roy-cpp test]# ./test.out è¾“å…¥è¦æŸ¥æ‰¾çš„å…ƒç´ ï¼Œå’Œæ¬²æ›¿æ¢çš„å€¼ 99 -1found: -1[root@roy-cpp test]# ./test.out è¾“å…¥è¦æŸ¥æ‰¾çš„å…ƒç´ ï¼Œå’Œæ¬²æ›¿æ¢çš„å€¼ 12 -1æœªæ‰¾åˆ°æŒ‡å®šå…ƒç´ ï¼š 12found: 1767305032 å¦‚æœè¿˜å¸Œæœ›æ›´çµæ´»å»è‡ªå®šä¹‰æŸ¥æ‰¾è§„åˆ™ï¼Œè¯·ä½¿ç”¨std::find_if ã€‚ std::find_ifç®€ä»‹ï¼š è¾“å…¥ï¼šåˆ—è¡¨ï¼Œåˆ—è¡¨æ¯ä¸ªå…ƒç´ çš„æŸ¥æ‰¾è§„åˆ™ï¼› è¾“å‡ºï¼šï¼ˆæ‰¾åˆ°æ—¶ï¼‰å…ƒç´ çš„æŒ‡é’ˆï¼Œï¼ˆæœªæ‰¾åˆ°æ—¶ï¼‰å°¾å…ƒç´ çš„æŒ‡é’ˆï¼› åº”ç”¨ï¼šå½“æˆ‘ä»¬å¸Œæœ›è‡ªå®šä¹‰æŸ¥æ‰¾æŸä¸ªå…ƒç´ æ—¶æ—¶ã€‚ ä¸€ä¸ªç¤ºä¾‹ï¼Œstd::find_ifæŸ¥æ‰¾å­å­—ç¬¦ä¸²â€œnutâ€ï¼š 123456789101112131415161718192021222324252627282930#include &lt;algorithm&gt;#include &lt;array&gt;#include &lt;iostream&gt;#include &lt;string_view&gt;bool containsNut(std::string_view str)&#123; // str.findå¯ç”¨æ¥æŸ¥æ‰¾æŒ‡å®šå­ä¸² // æ‰¾åˆ°è¿”å›trueï¼Œå¦åˆ™false return (str.find(&quot;nut&quot;) != std::string_view::npos);&#125;int main()&#123; // &quot;walnut&quot;åŒ…å«è¦æŸ¥æ‰¾çš„å­ä¸²&quot;nut&quot; std::array&lt;std::string_view, 4&gt; arr = &#123; &quot;apple&quot;, &quot;banana&quot;, &quot;walnut&quot;, &quot;lemon&quot; &#125;; auto found = &#123; std::find_if(arr.begin(), arr.end(), containsNut) &#125;; if (found == arr.end()) &#123; std::cout &lt;&lt; &quot;æ²¡æ‰¾åˆ°â€œnutsâ€\\n&quot;; &#125; else &#123; std::cout &lt;&lt; &quot;æ‰¾åˆ°äº†ï¼š &quot; &lt;&lt; *found &lt;&lt; &#x27;\\n&#x27;; &#125; return 0;&#125; è¾“å‡ºï¼š 1æ‰¾åˆ°äº†ï¼š walnut æœ¬æ¥è‡³å°‘éœ€è¦ä¸‰ä¸ªå¾ªç¯ï¼Œä½¿ç”¨æ ‡å‡†åº“å‡½æ•°åªç”¨å‡ è¡Œä»£ç å°±å®Œæˆäº†ã€‚ ç»Ÿè®¡ï¼šstd::count &amp; std::count_if std::countå’Œstd::count_ifç»Ÿè®¡æŒ‡å®šå…ƒç´ æˆ–æ»¡è¶³è‡ªå®šä¹‰çš„æŸ¥æ‰¾è§„åˆ™çš„å…ƒç´ å‡ºç°æ¬¡æ•°ã€‚ åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†è®¡ç®—æœ‰å¤šå°‘å…ƒç´ åŒ…å«å­å­—ç¬¦ä¸²â€œnutâ€ï¼š 12345678910111213141516171819#include &lt;algorithm&gt;#include &lt;array&gt;#include &lt;iostream&gt;#include &lt;string_view&gt;bool containsNut(std::string_view str)&#123; return (str.find(&quot;nut&quot;) != std::string_view::npos);&#125;int main()&#123; std::array&lt;std::string_view, 5&gt; arr = &#123; &quot;apple&quot;, &quot;banana&quot;, &quot;walnut&quot;, &quot;lemon&quot;, &quot;peanut&quot; &#125;; auto nuts = &#123; std::count_if(arr.begin(), arr.end(), containsNut) &#125;; std::cout &lt;&lt; &quot;å…±è®¡ï¼š&quot; &lt;&lt; nuts &lt;&lt; &quot; nut(s)\\n&quot;; return 0;&#125; è¾“å‡ºï¼š 1å…±è®¡ï¼š2 nut(s) 2.3.X æœ€ä½³å®è·µ å–„äºä½¿ç”¨å®¹å™¨+ç®—æ³•åº“ä¸­çš„å‡½æ•°ï¼Œè€Œä¸æ˜¯ç¼–å†™è‡ªå·±çš„å‡½æ•°æ¥åšåŒæ ·çš„äº‹æƒ…ï¼Œè¿™å¯ä»¥ä½¿æˆ‘ä»¬çš„ä»£ç æ›´ç®€å•ã€æ›´å¥å£®ã€‚ å…·ä½“æ¥è¯´ï¼Œæ•°ç»„ç«‹é©¬æƒ³åˆ°std::arrayã€std::vector ï¼›ç®€å•å¾ªç¯ç«‹é©¬æƒ³åˆ°for_each æˆ–è€… std::for_each ï¼›å¾ªç¯è¿˜éœ€è¦ç»“åˆå¤æ‚çš„æ“ä½œï¼Œè¯·å°½é‡ä½¿ç”¨std::sort ç­‰æ ‡å‡†åº“ç®—æ³•ã€‚ æ›´æ–°è®°å½• 2021-01-30 ï¼šæ›´æ–°ç¬”è®° ä¿®æ”¹æ™ºèƒ½æŒ‡é’ˆç›¸å…³æè¿° 2021-01-07 ï¼šæ›´æ–°ç¬”è®° ç¬¬ä¸€æ¬¡æ›´æ–° å‚è€ƒèµ„æ–™ 1.æ¢³ç†c++ const ä¿®é¥°å‡½æ•°ï¼šhttps://zhuanlan.zhihu.com/p/110159656 â†©2.ç¬¬ 5 ç«  æ™ºèƒ½æŒ‡é’ˆä¸å†…å­˜ç®¡ç†ï¼šhttps://changkun.de/modern-cpp/zh-cn/05-pointers/#5-1-RAII-%E4%B8%8E%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0 â†©3.ç†è§£ C++ æ™ºèƒ½æŒ‡é’ˆï¼šhttps://supwills.com/post/understanding-cpp-smart-pointer/ â†©","categories":[{"name":"C++","slug":"C","permalink":"https://hwh.zone/categories/C/"},{"name":"ä»é›¶å¼€å§‹","slug":"C/ä»é›¶å¼€å§‹","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"},{"name":"C++åŸºç¡€","slug":"C/ä»é›¶å¼€å§‹/C-åŸºç¡€","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/C-%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"C++","slug":"C","permalink":"https://hwh.zone/tags/C/"},{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://hwh.zone/tags/%E6%95%99%E7%A8%8B/"},{"name":"C++åŸºç¡€","slug":"C-åŸºç¡€","permalink":"https://hwh.zone/tags/C-%E5%9F%BA%E7%A1%80/"},{"name":"æŒ‡é’ˆ","slug":"æŒ‡é’ˆ","permalink":"https://hwh.zone/tags/%E6%8C%87%E9%92%88/"}]},{"title":"C++ä»é›¶å¼€å§‹ï¼ˆäº”ï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆä¸‹ï¼‰å‡½æ•°","slug":"C++ä»é›¶å¼€å§‹ï¼ˆäºŒï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆä¸‹ï¼‰ä¹‹å‡½æ•°","date":"2021-12-09T05:31:37.851Z","updated":"2022-02-19T09:59:54.082Z","comments":true,"path":"p/51595/","link":"","permalink":"https://hwh.zone/p/51595/","excerpt":"","text":"ğŸŒŸã€ŠC++ä»é›¶å¼€å§‹ã€‹ ç³»åˆ—ï¼Œå¼€å§‹æ›´æ–°ä¸­â€¦ C++ä»é›¶å¼€å§‹https://hwh.zone/p/62712 ä¸‰ã€å‡½æ•° 3.1 åŸºæœ¬æ¦‚å¿µ æ€ä¹ˆå®šä¹‰å‡½æ•°ï¼Ÿ ä»¥å‰ï¼Œæˆ‘æ¯”è¾ƒå€¾å‘å°†å‡½æ•°å®šä¹‰ä¸ºé¡ºåºæ‰§è¡Œçš„è¯­å¥é›†åˆã€‚ç°åœ¨æˆ‘è®¤ä¸ºæ›´æ°å½“çš„è¯´æ³•åº”è¯¥æ˜¯ï¼šå‡½æ•°æ˜¯ä¸€ä¸ªå¯é‡ç”¨çš„è¯­å¥åºåˆ—ï¼Œæ—¨åœ¨å®Œæˆç‰¹å®šçš„å·¥ä½œã€‚ C++ ä¸­å‡½æ•°ä¸€èˆ¬å½¢å¼å¦‚ä¸‹ï¼š 1234return_type function_name( parameter_list )&#123; // body of the function&#125; ä¸Šé¢åŒ…å«ä¸€ä¸ªå‡½æ•°çš„æ‰€æœ‰ç»„æˆéƒ¨åˆ†ï¼š è¿”å›ç±»å‹(return_type)ï¼šä¸€ä¸ªå‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ªå€¼ï¼Œreturn_type æ˜¯å‡½æ•°è¿”å›çš„å€¼çš„æ•°æ®ç±»å‹ã€‚ä¸éœ€è¦è¿”å›å€¼ï¼Œreturn_type æ˜¯å…³é”®å­— voidã€‚ å‡½æ•°åç§°(function_name)ï¼šå‡½æ•°çš„å®é™…åç§°ï¼Œå‡½æ•°åå’Œå‚æ•°åˆ—è¡¨ä¸€èµ·æ„æˆäº†å‡½æ•°ç­¾åã€‚ æ‰€è°“â€ç­¾åâ€œåˆ™æ„å‘³ç€è¿™å¯ä»¥å”¯ä¸€æ ‡è¯†ä¸€ä¸ªå‡½æ•°ã€‚ å‚æ•°åˆ—è¡¨(parameter_list)ï¼šå‚æ•°å°±åƒæ˜¯å ä½ç¬¦ã€‚å½“å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå¯å‘å‚æ•°ä¼ é€’ä¸€ä¸ªå€¼ï¼Œè¿™ä¸ªå€¼è¢«ç§°ä¸ºå®é™…å‚æ•°ï¼Œå‚æ•°åˆ—è¡¨åŒ…æ‹¬å‡½æ•°å‚æ•°çš„ç±»å‹ã€é¡ºåºã€æ•°é‡ã€‚ å‚æ•°åˆ—è¡¨çš„é¡ºåºã€ç±»å‹ã€æ•°é‡ä¸å®Œå…¨ä¸€è‡´çš„è¯ï¼Œå½¢æˆä¸åŒå‡½æ•°ç­¾åï¼Œå³æ˜¯ä¸åŒå‡½æ•°ã€‚ å‡½æ•°ä¸»ä½“(boby)ï¼šå‡½æ•°ä¸»ä½“åŒ…å«ä¸€ç»„å®šä¹‰å‡½æ•°æ‰§è¡Œä»»åŠ¡çš„è¯­å¥ã€‚ ç‰¹åˆ«çš„ï¼ŒC++æ˜¯ä¸æ”¯æŒåµŒå¥—å‡½æ•°çš„ã€‚ 1234567891011#include&lt;iostream&gt;using namespace std;int main&#123; // ç¼–è¯‘å‡ºé”™ int max1(int num1=0, int num2) &#123; return num1&gt;num2?num1:num2; &#125;&#125; 3.1.1 å‰å‘å£°æ˜ğŸŒŸ å‰å‘å£°æ˜åˆè¯† åœ¨å¾ˆå¤šIDEä¸­ï¼Œå¦‚æœä½ å°è¯•åœ¨mainå‡½æ•°ä½¿ç”¨æœªåœ¨ä¹‹å‰å®šä¹‰çš„å‡½æ•°ï¼Œä¼šå‡ºç°ç¼–è¯‘é”™è¯¯ï¼š 1234567891011121314#include&lt;iostream&gt;using namespace std;int main&#123; max(1,2); // ç¼–è¯‘é”™è¯¯ return 0;&#125;// å‡½æ•°è¿”å›ä¸¤ä¸ªæ•°ä¸­è¾ƒå¤§çš„é‚£ä¸ªæ•°int max(int num1, int num2) &#123; return num1&gt;num2?num1:num2;&#125; è¿™æ˜¯å› ä¸ºmaxå‡½æ•°å®šä¹‰åœ¨mainå‡½æ•°ä¹‹åï¼Œé¡ºåºç¼–è¯‘åˆ°ä»£ç ç¬¬6è¡Œmax(1,2)æ—¶æ‰¾ä¸åˆ°maxçš„å®šä¹‰ï¼Œæ‰€ä»¥mainä¸çŸ¥é“maxæ˜¯ä»€ä¹ˆï¼ˆæ˜¯çš„æ€ä¹ˆè¿™ä¹ˆç¬¨ï¼Ÿï¼‰ã€‚ è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ï¼š å°†maxå‡½æ•°æ•´ä½“å®šä¹‰åœ¨mainå‡½æ•°å‰ï¼› å‰å‘å£°æ˜ã€‚ å‰å‘å£°æ˜å‘Šè¯‰ç¼–è¯‘å™¨æ ‡è¯†ç¬¦åœ¨å®é™…å®šä¹‰ä¹‹å‰å°±å·²ç»å­˜åœ¨ï¼Œè¿™æ ·ç¼–è¯‘å™¨ä¼šåœ¨é“¾æ¥æ—¶è¿›è¡Œç¬¦å·é“¾æ¥å¯»æ‰¾æ ‡è¯†ç¬¦çš„å®šä¹‰ã€‚ æ„Ÿè§‰å’Œexternå…³é”®å­—å¾ˆåƒï¼Ÿè¯·è§ä¸‹èŠ‚å¯¹æ¯”ã€‚ 123456789101112131415#include&lt;iostream&gt;using namespace std;int max(int num1, int num2) ; // å‰å‘å£°æ˜int main()&#123; max(1,2); // ç¼–è¯‘æ­£ç¡® return 0;&#125;// å‡½æ•°è¿”å›ä¸¤ä¸ªæ•°ä¸­è¾ƒå¤§çš„é‚£ä¸ªæ•°int max(int num1, int num2) &#123; return num1&gt;num2?num1:num2;&#125; å¦‚æœmaxå®šä¹‰åœ¨å…¶å®ƒæ–‡ä»¶ï¼ˆmax.cppï¼‰ä¸­ï¼š 12345/*max.cpp*/int max(int num1, int num2) &#123; return num1&gt;num2?num1:num2;&#125; ä½ åœ¨mainä¸­ï¼ˆå®šä¹‰åœ¨main.cppï¼‰ä¸­ï¼Œå¯ä»¥ä¸é€šè¿‡include â€œmain.cppâ€è€Œä½¿ç”¨å‰ç½®å£°æ˜ï¼š 12345678910/*main.cpp*/#include&lt;iostream&gt;using namespace std;int max(int num1, int num2) ; // å‰å‘å£°æ˜,ä¼šåœ¨é“¾æ¥çš„æ—¶å€™å¯»æ‰¾maxçš„å®šä¹‰ï¼Œç¼–è¯‘å™¨æ—¶ä¸æŠ¥é”™int main()&#123; max(1,2); // ç¼–è¯‘æ­£ç¡® return 0;&#125; ç¼–è¯‘ï¼ˆä¸€åˆ‡æ­£å¸¸ï¼‰ï¼š 12g++ main.cpp max.cpp -o main.out./main.out ä½†ç»è¿‡æˆ‘çš„å®è·µï¼Œåœ¨å¾ˆå¤šç¼–è¯‘å™¨ä¸­è¿›è¡Œäº†ä¼˜åŒ–ã€‚åŒä¸€ä¸ªæ–‡ä»¶çš„å‡½æ•°å³ä½¿ä¸è¿›è¡Œå‰å‘å£°æ˜ï¼Œä¸Šé¢çš„ä»£ç ä¹Ÿä¸ä¼šæŠ¥é”™ã€‚ è€Œä¸”ï¼Œåœ¨Google code style ä¹Ÿæ˜ç¡®æŒ‡å‡ºå°½é‡ä¸è¦ä½¿ç”¨å‰ç½®å£°æ˜ï¼š å°½å¯èƒ½åœ°é¿å…ä½¿ç”¨å‰ç½®å£°æ˜ã€‚ä½¿ç”¨ #include åŒ…å«éœ€è¦çš„å¤´æ–‡ä»¶å³å¯ã€‚ é‚£ä¹ˆï¼Œå‰å‘å£°æ˜è¿˜å­˜åœ¨çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ å‡å°‘ç¼–è¯‘æ—¶é—´ã€‚ä½¿ç”¨includeä¹Ÿå¯ä»¥ä½¿ç”¨åˆ«çš„çš„æ–‡ä»¶ä¸­å®šä¹‰çš„å˜é‡ï¼Œä½†æ˜¯ä¹Ÿä¼šæŠŠå¤´æ–‡ä»¶å…¶å®ƒä¸éœ€è¦çš„å˜é‡å¼•å…¥ã€‚å¦‚æœåªæ˜¯éœ€è¦ä½¿ç”¨å¾ˆå°‘çš„å¤–éƒ¨å˜é‡ï¼Œä½¿ç”¨å‰å‘å£°æ˜èƒ½å‡å°‘ç¼–è¯‘çš„å¤´æ–‡ä»¶å±•å¼€ã€‚ æ‰“ç ´å¾ªç¯å¼•ç”¨ã€‚ å¾ªç¯å¼•ç”¨ å‰ç½®å£°æ˜ç°åœ¨ç”¨æ¥è§£å†³å¤šæ–‡ä»¶ä¸­å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚ ä»¥ç±»å¾ªç¯å¼•ç”¨ä¸ºä¾‹ã€‚ æƒ³è±¡è¿™ä¹ˆä¸€ä¸ªæƒ…å†µï¼šA.hå®šä¹‰äº†Class Aï¼Œå®ƒéœ€è¦å¼•ç”¨B.hå®šä¹‰çš„Class Bï¼Œä¹Ÿå°±æ˜¯è¦å†™å…¥#include â€œB.hâ€ ï¼›ç±»ä¼¼çš„æƒ…å†µï¼ŒB.hä¹Ÿéœ€è¦å†™å…¥#include â€œA.hâ€ã€‚ è¿™å°±é€ æˆäº†ä¸¤ä¸ªç±»äº’ç›¸å¼•ç”¨ï¼Œä½†ç”±äºC++è›‹ç–¼é¡ºåºç¼–è¯‘çš„è§„åˆ™ã€‚å¦‚æœæ˜¯å…ˆç¼–è¯‘A.hï¼Œå¼•ç”¨çš„ç±»Båˆ™æ‰¾ä¸åˆ°å®ç°çš„å®šä¹‰ï¼›å¦‚æœæ˜¯å…ˆç¼–è¯‘B.hï¼Œåˆ™æ‰¾ä¸åˆ°ç±»Açš„å®šä¹‰ã€‚å½¢æˆâ€œå…ˆæœ‰é¸¡è¿˜æœ‰å…ˆæœ‰è›‹â€çš„ä¸–çºªéš¾é¢˜ã€‚ æˆ‘ä»¬ä¸¾ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ã€‚ 123456789101112131415161718192021222324252627282930313233/* A.h */#ifndef A_H#define A_H#include &quot;B.h&quot;class A&#123; private: B *b;&#125;;#endif/* B.h */#ifndef B_H#define B_H#include &quot;A.h&quot;class B&#123; private: A *a;&#125;;#endif/*test.cpp*/#include &quot;A.h&quot;#include &quot;B.h&quot;int main()&#123; A a; B b; return 0;&#125; å°è¯•ç¼–è¯‘ä¸€ä¸‹ï¼š 1g++ test.cpp -o test.out æ˜¾ç¤ºåœ¨B.hä¸­æ‰¾ä¸åˆ°Açš„å®šä¹‰ï¼š ç°åœ¨æˆ‘ä»¬ä»åº•å±‚ç¼–è¯‘è¿‡ç¨‹æ¢è®¨ä¸‹è¿™ä¸ªå¾ªç¯å¼•ç”¨å‡ºç°çš„åŸå› å’Œè§£å†³æ–¹æ¡ˆã€‚ æˆ‘ä»¬çŸ¥é“ç¼–è¯‘å››å¤§æµç¨‹ä¸ºï¼šé¢„ç¼–è¯‘â†’ç¼–è¯‘â†’æ±‡ç¼–â†’é“¾æ¥ï¼Œå…ˆçœ‹çœ‹é¢„ç¼–è¯‘æºæ–‡ä»¶test.cppäº§ç”Ÿçš„test.iã€‚ 1g++ -E test.cpp -o test.i é¢„ç¼–è¯‘åå†…å®¹å¦‚ä¸‹ï¼š ä¸‹é¢æ˜¯test.iä¸­å…·ä½“å†…å®¹ã€‚ 123456789101112131415161718192021class B&#123; private: A *a; // å‰é¢æ²¡æœ‰Açš„å®šä¹‰&#125;;# 4 &quot;A.h&quot; 2class A&#123; private: B *b;&#125;;# 10 &quot;test.cpp&quot; 2int main()&#123; A a; B b; return 0;&#125; å¯ä»¥çœ‹åˆ°ï¼Œtest.iä¸­ç¬¬6è¡Œä»£ç A* aï¼Œåœ¨ç±»Bä¸­å¼•ç”¨äº†A ï¼Œä½†æ˜¯å‰é¢æ²¡æœ‰å…³äºA çš„å®šä¹‰ã€‚è¿™ä¸ºåé¢ç¼–è¯‘å‡ºé”™åŸ‹ä¸‹äº†ä¼ç¬”ã€‚ é¢„ç¼–è¯‘åå®Œæˆåï¼Œæˆ‘ä»¬è¿›è¡Œç¬¬2ä¸ªé˜¶æ®µï¼šç¼–è¯‘ã€‚ 1g++ -S test.cpp -o test.s Errorï¼å‡ºç°äº†æœ€å¼€å§‹çš„â€œæœªå®šä¹‰â€é”™è¯¯ï¼š ä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªé”™è¯¯åœ¨ç¼–è¯‘é˜¶æ®µå°±äº§ç”Ÿäº†ï¼šå½“C++æŒ‰é¡ºåºç¼–è¯‘åˆ° A *a è¿™è¡Œæ—¶ï¼Œç¼–è¯‘å™¨è¿›è¡Œè¯­æ³•æ£€æŸ¥ï¼Œå‘ç°åœ¨å‰é¢æ‰¾ä¸åˆ°Aç›¸å…³çš„å®šä¹‰ï¼Œäºæ˜¯æŠ¥é”™ã€‚ æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ æˆ‘ä»¬å¯ä»¥åœ¨B.h ä¸­è¿›è¡Œå‰å‘å£°æ˜ï¼Œè§£å†³è¿™ä¸ªé”™è¯¯ã€‚ ç±»ä¼¼äºå…¨å±€å˜é‡ï¼Œè¿™æ ·Aä½œç”¨èŒƒå›´å°±åˆ°æœ¬æ–‡ä»¶ç»“å°¾ï¼šå³ç¼–è¯‘å™¨è¿˜ä¼šåœ¨test.i ä¸­å…¶å®ƒä½ç½®å¯»æ‰¾Açš„å®šä¹‰ï¼› ä¸ä»…å¦‚æ­¤ï¼Œå³ä½¿test.iä¸­ä¸å­˜åœ¨ï¼Œç¼–è¯‘å™¨è¿˜ä¼šåœ¨é“¾æ¥æ—¶ç¬¦å·è§£ææ—¶å¯»æ‰¾Açš„å®šä¹‰ï¼Œè€Œä¸æ˜¯åœ¨ç¼–è¯‘æ—¶å°±æŠ¥é”™ã€‚ è¿™æ ·ç¼–è¯‘å™¨å°±ä¸ä¼šåœ¨ç¼–è¯‘é˜¶æ®µæŠ¥é”™äº†ã€‚ 123456789101112#ifndef B_H#define B_H#include &quot;A.h&quot;class A; // å‰å‘å£°æ˜ï¼Œclass B&#123; private: A *a;&#125;;#endif æ–°çš„é¢„ç¼–è¯‘æ–‡ä»¶test.iæ–‡ä»¶ä¹Ÿåœ¨ç›¸åº”ä½ç½®å¤šäº†ä¸€è¡ŒClass A;ï¼ˆå…¶ä½™æ— å˜åŒ–ï¼‰: 123456class A;class B&#123; ...&#125;... å¦‚æœä¸ä½¿ç”¨#ifndef ã€#define å’Œ#endifï¼Ÿ #ifndef ã€#define å’Œ#endifï¼Œå³æ¡ä»¶ç¼–è¯‘ï¼šåªæœ‰æ»¡è¶³è¦æ±‚ä»£ç æ‰å‚ä¸ç¼–è¯‘ï¼Œå¦åˆ™ä¸å‚ä¸ç¼–è¯‘ã€‚åŸºæœ¬ç”¨æ³•ä¸ºï¼š 12345#ifndef æ ‡è¯†ç¬¦ ç¨‹åºæ®µ1 #else ç¨‹åºæ®µ2 #endif åœ¨æœ¬èŠ‚ä¸­ï¼Œå¯¹B.hå’ŒA.héƒ½ä½¿ç”¨äº†æ¡ä»¶ç¼–è¯‘ï¼šé˜²æ­¢å¤´æ–‡ä»¶è¢«é‡å¤å®šä¹‰ï¼Œåœ¨é“¾æ¥æ—¶å‡ºç°å¤§é‡é‡å®šä¹‰é”™è¯¯ã€‚ 1234#ifndef A_H // æˆ–B_H#define A_H // æˆ–B_H// A_Hæˆ–B_Hä¸­çš„ä»£ç  #endif ä»¥A.hä¸ºä¾‹ï¼š å¦‚æœA.hè¢«ç¬¬ä¸€ä¸ªæ–‡ä»¶å¼•å…¥æ—¶ï¼Œä¼šå®šä¹‰æ ‡è¯†ç¬¦A_H ï¼Œè¿™ä¸ªæ—¶å€™A.hå…¶åçš„ä»£ç ä¼šè¢«é¢„ç¼–è¯‘æ’å…¥åˆ°æ–‡ä»¶ä¸­ï¼› å¦‚æœå…¶å®ƒæ–‡ä»¶å­˜åœ¨ä»£ç #include â€œA.hâ€ ï¼Œå°è¯•é¢„ç¼–è¯‘æ›¿æ¢ä¸ºA.hä¸­å†…å®¹ï¼› å› ä¸ºA_H å·²è¢«å®šä¹‰ï¼Œç›´æ¥è·³è½¬åˆ°#endifç»“æŸï¼Œé¿å…äº†å¤´æ–‡ä»¶é‡å¤å¼•å…¥ã€‚ åœ¨æœ¬èŠ‚ä¸­ï¼Œå¦‚æœå¯¹B.hå’ŒA.héƒ½ä¸ä½¿ç”¨æ¡ä»¶ç¼–è¯‘ï¼Œé¢„ç¼–è¯‘æ—¶ä¸ä½†ä¼šå‡ºç°é‡å®šä¹‰é”™è¯¯è¿˜ä¼šå‡ºç°æ— é™åµŒå¥—ï¼š main.cppä¸­ï¼š#include â€œA.hâ€ è¢«æ›¿æ¢ä¸ºA.hä¸­å…·ä½“å†…å®¹ï¼› A.hä¸­ï¼š ç”±äºåœ¨å¤´æ–‡ä»¶å¼•å…¥äº† #include â€œB.hâ€ ï¼Œæ‰€ä»¥ #include â€œB.hâ€ä¹Ÿä¼šè¢«æ›¿æ¢ä¸ºB.hä¸­å…·ä½“å†…å®¹ï¼› B.hä¸­ï¼š é‡å¤å¼•å…¥äº† #include â€œA.hâ€ï¼Œé‡å¤æ›¿æ¢å¤´æ–‡ä»¶A.hï¼Œè·³è½¬åˆ°æ­¥éª¤2å‘ç”Ÿæ— é™åµŒå¥—ã€‚ externå’Œå‰å‘å£°æ˜ externå’Œå‰å‘å£°æ˜ä½œç”¨éå¸¸ç›¸ä¼¼ï¼šéƒ½å¯ä»¥ç”¨æ¥å£°æ˜å‡½æ•°/ç»“æ„ä½“/ç±»ç­‰æ˜¯åœ¨å¤–éƒ¨å®šä¹‰çš„ï¼Œè¿™æ ·åœ¨ç¼–è¯‘æ—¶ä¸å‡ºé”™ï¼Œåœ¨é“¾æ¥æ—¶ä¼šåœ¨å…¶å®ƒ.oå¯»æ‰¾ç›¸å…³å®šä¹‰ã€‚ ä½†æ˜¯externå…³é”®å­—å’Œå‰å‘å£°æ˜ä¹Ÿæœ‰äº›ä¸åŒï¼š externå¯ä»¥ä½œç”¨äºå˜é‡ï¼Œå‰å‘å£°æ˜æ— æ³•å£°æ˜å˜é‡ï¼ˆå˜é‡ä¼šé»˜è®¤åˆå§‹åŒ–ï¼‰ï¼Œåªèƒ½å£°æ˜å‡½æ•°/ç»“æ„ä½“/ç±»ç­‰ï¼› externè¿˜æœ‰extern â€œCâ€ç›¸å…³ç”¨æ³•ï¼› externæ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œå‰å‘å£°æ˜æ˜¯ç§å£°æ˜æ–¹å¼ï¼ˆä½¿ç”¨å‰å£°æ˜ï¼‰ã€‚ æœ€ä½³å®è·µï¼šextern/å‰å‘å£°æ˜/include å¦‚æœåªæ˜¯å°‘é‡åœ°è¦ä½¿ç”¨åˆ«çš„æ–‡ä»¶ä¸­å®šä¹‰çš„å˜é‡/å‡½æ•°/ç»“æ„ä½“/ç±»ç­‰ï¼šè¯·ä½¿ç”¨externå…³é”®å­—ï¼Œå®ƒå¯ä»¥å‡å°‘ç¼–è¯‘æ—¶é—´ï¼› è™½ç„¶å‡½æ•°/ç»“æ„ä½“/ç±»ç­‰ä½¿ç”¨å‰å‘å£°æ˜ä¹Ÿå¯ä»¥ä½†ä¸æ¨èï¼Œä½¿ç”¨externæ›´å¥½ã€‚ æ‰“ç ´å¾ªç¯å¼•ç”¨ã€‚å‰å‘å£°æ˜ã€‚ å…¶ä½™æƒ…å†µä½¿ç”¨includeæ›´å¥½ï¼Œä»£ç é€»è¾‘æ›´æ¸…æ™°ã€‚ 3.1.2 æœ€ä½³å®è·µï¼šä»€ä¹ˆæ—¶å€™ä½¿ç”¨å‡½æ•° ä½œä¸ºæ›¾ç»ç¨šå«©çš„ï¼ˆç°åœ¨ä¸é‚£ä¹ˆç¨šå«©çš„ï¼‰ç¨‹åºå‘˜ï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨å‡½æ•°æ˜¯ä¸€ä¸ªæŒºçº ç»“çš„é—®é¢˜ã€‚å‚è€ƒlearncpp ä¸­å»ºè®®ï¼š å¤šæ¬¡å‡ºç°çš„è¯­å¥åº”è¯¥ç»„æˆä¸€ä¸ªå‡½æ•°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬ä»¥ç›¸åŒçš„æ–¹å¼å¤šæ¬¡è¯»å–ç”¨æˆ·çš„è¾“å…¥ï¼Œé‚£ä¹ˆè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å‡½æ•°å€™é€‰ã€‚ å…·æœ‰æ˜ç¡®å®šä¹‰çš„è¾“å…¥å’Œè¾“å‡ºç›®æ ‡çš„ä»£ç ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªè¦æ’åºçš„é¡¹ç›®åˆ—è¡¨ï¼Œé‚£ä¹ˆè¿›è¡Œæ’åºçš„ä»£ç å°†æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åŠŸèƒ½ï¼Œå³ä½¿å®ƒåªå®Œæˆäº†ä¸€æ¬¡ã€‚è¾“å…¥æ˜¯æœªæ’åºçš„åˆ—è¡¨ï¼Œè¾“å‡ºæ˜¯æ’åºçš„åˆ—è¡¨ã€‚ ä¸€ä¸ªå‡½æ•°åº”è¯¥æ‰§è¡Œæœ‰ä¸”åªæœ‰ä¸€é¡¹ä»»åŠ¡ã€‚ å½“ä¸€ä¸ªå‡½æ•°å˜å¾—å¤ªé•¿ã€å¤ªå¤æ‚æˆ–éš¾ä»¥ç†è§£æ—¶ã€‚å¯ä»¥å°†å…¶æ‹†åˆ†ä¸ºå¤šä¸ªå­å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯é‡æ„ã€‚ 3.2 å‡½æ•°é‡è½½ åœ¨å‰é¢æˆ‘ä»¬æåˆ°ï¼šå‡½æ•°é€šè¿‡å‡½æ•°ç­¾åæ¥å”¯ä¸€ç¡®å®šä¸€ä¸ªå‡½æ•°ï¼Œè€Œå‡½æ•°ç­¾åç”± å‡½æ•°å&amp;å‚æ•°åˆ—è¡¨ ç»„æˆã€‚ æ¯”å¦‚ï¼Œä¸¤ä¸ªå‡½æ•°å‡½æ•°åç›¸åŒè€Œå‚æ•°åˆ—è¡¨ä¸åŒï¼Œè¿™ä¸ªæ—¶å€™æ˜¯åŒä¸€å‡½æ•°å—ï¼Ÿ æ˜¾ç„¶ä¸æ˜¯ï¼Œå› ä¸ºå‡½æ•°ç­¾åä¸­çš„å‚æ•°åˆ—è¡¨ä¸åŒï¼Œå› æ­¤æ˜¯ä¸¤ä¸ªå‡½æ•°ï¼Œè¿™ä¹Ÿå°±æ˜¯å‡½æ•°é‡è½½ã€‚ 3.2.1 ä¸ºä»€ä¹ˆéœ€è¦å‡½æ•°é‡è½½ï¼Ÿ é‡è½½å‡½æ•°é€šå¸¸ç”¨æ¥å‘½åä¸€ç»„åŠŸèƒ½ç›¸ä¼¼çš„å‡½æ•°ã€‚è¿™æ ·åšçš„å¥½å¤„ï¼š å‡å°‘äº†å‡½æ•°åçš„æ•°é‡ï¼› é¿å…äº†åå­—ç©ºé—´çš„æ±¡æŸ“ï¼Œå¯¹äºç¨‹åºçš„å¯è¯»æ€§æœ‰å¾ˆå¤§çš„å¥½å¤„ã€‚ è¯·çœ‹ä¸‹ä¾‹ã€‚ æˆ‘ä»¬æœ‰ä¸¤ä¸ªå‡½æ•°ï¼šä¸€ä¸ªè¿”å›ä¸¤ä¸ªæ•´æ•°ç›¸åŠ çš„å€¼ï¼Œä¸€ä¸ªè¿”å›ä¸¤ä¸ªæµ®ç‚¹æ•°ç›¸åŠ çš„å€¼ã€‚æˆ‘ä»¬å®šä¹‰äº†å¤šä¸ªåç§°ä½†æå…¶ç›¸ä¼¼ï¼ˆåŠŸèƒ½ã€åå­—etc.ï¼‰çš„å‡½æ•°ã€‚å®ƒä»¬æ ¸å¿ƒåŠŸèƒ½è™½ç„¶éƒ½æ˜¯addï¼Œä½†å´å¯¹åº”å¤šä¸ªä¸åŒçš„å‡½æ•°åï¼Œå¢åŠ äº†è®°å¿†è´Ÿæ‹…ã€‚ 123456789int addInteger(int x, int y)&#123; return x + y;&#125;double addDouble(double x, double y)&#123; return x + y;&#125; ä¼˜é›…çš„åšæ³•åº”è¯¥æ˜¯ï¼šæ¯ä¸ªå‡½æ•°åŒåï¼Œç¼–è¯‘å™¨é å‚æ•°ç±»å‹ã€æ•°é‡ã€é¡ºåºæ¥è‡ªåŠ¨åŒ¹é…è°ƒç”¨ã€‚ 123456789101112131415161718192021int add(int x, int y)&#123; return x + y;&#125;int add(int x, int y,int z)&#123; return x + y;&#125;double add(double x, int y)&#123; return x + y;&#125;int main()&#123; add(1,2); // åŒ¹é…ç¬¬ä¸€ä¸ªadd add(1,2,3); // åŒ¹é…ç¬¬äºŒä¸ªadd add(3.4,5); // åŒ¹é…ç¬¬ä¸‰ä¸ªadd return 0;&#125; 3.2.2 äºŒä¹‰æ€§åŒ¹é… å‰é¢ä»‹ç»çš„éƒ½æ˜¯ä¼ é€’çš„å‚æ•°å’Œå®šä¹‰å‡½æ•°å‚æ•°å®Œå…¨åŒ¹é…çš„ç®€å•æƒ…å†µã€‚ä½†å®é™…ä¸Šï¼Œè¿˜ä¼šå‡ºç°å‡½æ•°è°ƒç”¨ä¸­çš„å‚æ•°ç±»å‹ä¸ä»»ä½•é‡è½½å‡½æ•°ä¸­çš„å‚æ•°ç±»å‹ä¸å®Œå…¨åŒ¹é… ã€‚ è¿™ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ 1234567891011121314151617#include &lt;iostream&gt;using namespace std;void print(int x)&#123; cout &lt;&lt; &quot;print int : &quot;&lt;&lt; x &lt;&lt;endl;&#125;void print(double d)&#123; cout &lt;&lt; &quot;print double : &quot;&lt;&lt; d &lt;&lt;endl;&#125;int main()&#123; print(&#x27;a&#x27;);&#125; è¾“å‡ºï¼š 1print int : 97 å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿprint('a') åŒ¹é…äº† print(int)? 97åˆæ˜¯ä»€ä¹ˆï¼Ÿ è¿™æ˜¯å› ä¸ºç¼–è¯‘å™¨å¦‚æœæ‰¾ä¸åˆ°å®Œå…¨åŒ¹é…çš„å‡½æ•°ï¼Œä¼šè‡ªåŠ¨è¿›è¡Œéšå¼è½¬æ¢å°†æŸäº›çª„æ•´æ•°å’Œæµ®ç‚¹ç±»å‹è‡ªåŠ¨æå‡ä¸ºæ›´å®½ç±»å‹ã€‚æ‰€æœ‰è¿™é‡Œçš„char('a') è‡ªåŠ¨æå‡ä¸ºint ï¼ŒåŒ¹é…åˆ°äº†print(int) , 97æ˜¯a çš„ASCIIç¼–ç ã€‚ ç‰¹åˆ«çš„ï¼Œç”±äºåŒ¹é…åˆ°äº†print(int) ï¼Œä¾¿ä¸ä¼šè‡ªåŠ¨ç»§ç»­æå‡ç±»å‹å»åŒ¹é…print(double)ã€‚ å…³äºç±»å‹è½¬æ¢ ä¼šåœ¨ç¬¬åç« ç»Ÿä¸€æ€»ç»“ï¼Œè¿™é‡Œå…ˆç®€å•äº†è§£ä¸‹å³å¯ã€‚ ç‰¹åˆ«çš„ï¼Œå¦‚æœä¸Šè¿°è¿‡ç¨‹ï¼ˆæ•°å­—è½¬æ¢æ‰¾ä¸åˆ°ï¼‰æœªæ‰¾åˆ°åŒ¹é…é¡¹ï¼Œç¼–è¯‘å™¨å°†å°è¯•é€šè¿‡ä»»ä½•ç”¨æˆ·å®šä¹‰çš„è½¬æ¢æ‰¾åˆ°åŒ¹é…é¡¹ã€‚ è¿™æ¶‰åŠåˆ°ç±»å‹é‡è½½ï¼Œä¼šåœ¨ä¸‹ç¯‡æ–‡ç« é¢å¯¹å¯¹è±¡ è¿›è¡Œè®²è§£ã€‚è¿™é‡Œåªè¦äº†è§£è¿™ä¸ªä¾‹å­å³å¯ã€‚ 123456789101112131415161718192021class X &#123;public: operator int() &#123; return 0; &#125; // ç”¨æˆ·è‡ªå®šä¹‰ä»Xè½¬æ¢int&#125;;void print(int)&#123;&#125;void print(double)&#123;&#125;int main()&#123; X x; print(x); // åŒ¹é…print(int) return 0;&#125; åœ¨è¿™é‡Œä¾‹å­ä¸­ï¼ˆä¹Ÿæ˜¯ä¸€èˆ¬å‡½æ•°å‚æ•°åŒ¹é…æµç¨‹æ€»ç»“ï¼‰ï¼š ç¼–è¯‘å™¨å¯»æ‰¾æ˜¯å¦å­˜åœ¨print(X) ï¼Œä¸å­˜åœ¨è½¬è‡³ç¬¬2æ­¥ï¼› ç¼–è¯‘å™¨æ£€æŸ¥xæ˜¯å¦å¯ä»¥ç±»å‹æå‡ï¼Œä¸èƒ½è¿›è¡Œç¬¬3æ­¥ï¼› ç¼–è¯‘å™¨å°†æŸ¥æ‰¾ä»»ä½•ç”¨æˆ·å®šä¹‰çš„è½¬æ¢ï¼Œå­˜åœ¨ï¼Œè¿›è¡Œè½¬æ¢ã€‚ 3.3 å‡½æ•°æ¨¡æ¿ åœ¨å‰é¢å‡½æ•°é‡è½½ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å°†ä¸¤ä¸ªåŠŸèƒ½ç›¸ä¼¼ä»…å‚æ•°åˆ—è¡¨ä¸åŒçš„å‡½æ•°ï¼Œæ”¹ä¸ºåŒåå‡½æ•°è®©ç¼–è¯‘å™¨é€šè¿‡å‡½æ•°ç­¾åæ¥åŒºåˆ†ï¼Œå‡å°‘äº†æ€ç»´è´Ÿæ‹…ã€‚ ä½†æ˜¯è€ƒè™‘ä¸€ç§æ›´ç‰¹æ®Šçš„æƒ…å†µï¼Œä¸¤ä¸ªå‡½æ•°ä¸ä»…åŠŸèƒ½æå…¶ç›¸ä¼¼ï¼Œè¿å‚æ•°åˆ—è¡¨çš„ä¸ªæ•°éƒ½ç›¸åŒã€‚ 123456789101112131415161718#include &lt;iostream&gt;using namespace std;void print(int x, int y)&#123; cout &lt;&lt; &quot;print result : &quot;&lt;&lt; x+y &lt;&lt;endl;&#125;void print(double x, double y)&#123; cout &lt;&lt; &quot;print result : &quot;&lt;&lt; x+y &lt;&lt;endl;&#125;int main()&#123; print(1,2); print(3.0,4.0);&#125; æ€»æ„Ÿè§‰å“ªé‡Œä¸å¯¹ï¼Œä¼¼ä¹é€ æˆäº†å¾ˆå¤šä»£ç é‡å¤ï¼Ÿå®ƒä»¬åªæ˜¯å‚æ•°ç±»å‹ä¸åŒå•Šï¼Œå‡½æ•°ä½“ã€åå­—ä»€ä¹ˆéƒ½ä¸€æ ·ï¼Ÿ åœ¨C++ä¸­æä¾›äº†å‡½æ•°æ¨¡æ¿ï¼Œç”¨æ¥ä¼˜é›…åœ°åº”å¯¹è¿™ç§æƒ…å†µã€‚ 1234567891011121314#include &lt;iostream&gt;using namespace std;template &lt;typename T&gt; // templateå’Œtypenameæ˜¯å…³é”®å­—ï¼ŒTæ˜¯ç±»å‹åvoid print(T x, T y)&#123; cout &lt;&lt; &quot;print result : &quot;&lt;&lt; x+y &lt;&lt;endl;&#125;int main()&#123; print(1,2); print(3.0,4.0);&#125; ä¸é”™ï¼Œä¸€åˆ‡é¡ºçœ¼äº†å¾ˆå¤šã€‚ 3.3.1 æ¨¡æ¿å‡½æ•°æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ åœ¨å‰æ–‡æˆ‘ä»¬ä»‹ç»äº†å‡½æ•°æ¨¡æ¿ï¼Œå¦‚ä¸‹ï¼š 12345template &lt;typename T&gt; void print(T x, T y)&#123; cout &lt;&lt; &quot;print result : &quot;&lt;&lt; x+y &lt;&lt;endl;&#125; ä½†å‡½æ•°æ¨¡æ¿å®é™…ä¸Šå¹¶ä¸æ˜¯å‡½æ•°â€”â€”å®ƒä»¬çš„ä»£ç ä¸æ˜¯ç›´æ¥ç¼–è¯‘æˆ–æ‰§è¡Œçš„ã€‚å‡½æ•°æ¨¡æ¿åªæœ‰ä¸€ä¸ªåŠŸèƒ½ï¼šä¸ºæ¯ä¸ªå…·æœ‰ä¸€ç»„å”¯ä¸€å‚æ•°ç±»å‹çš„å‡½æ•°ï¼Œè°ƒç”¨åˆ›å»ºï¼ˆå¹¶ç¼–è¯‘ï¼‰ä¸€ä¸ªå‡½æ•°ã€‚ è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå±•ç¤ºäº†ä¸€ä¸ªä¸åŒä»¥å¾€çš„æ¨¡æ¿å‡½æ•°è°ƒç”¨æ–¹å¼funName&lt;actual_type&gt;(arg1, arg2)ï¼š 123456789101112131415#include &lt;iostream&gt;using namespace std;template &lt;typename T&gt;void print(T x, T y)&#123; cout &lt;&lt; &quot;print result : &quot;&lt;&lt; x+y &lt;&lt;endl;&#125;int main()&#123; print&lt;int&gt;(1,2); // print(1,2); return 0;&#125; ä½†ç›¸æ¯”funName(arg1, arg2) è¿™ç§æ–¹å¼ï¼Œä¸Šé¢çš„æ‰æ˜¯æ›´æ¥è¿‘æœ¬è´¨çš„è°ƒç”¨æ–¹å¼ã€‚ å› ä¸ºprint(1,2)ï¼Œæœ¬è´¨å°±æ˜¯ç¼–è¯‘å™¨å…‹éš†äº†å‡½æ•°æ¨¡æ¿void print(T x, T y)ï¼Œå°†æ¨¡æ¿ç±»å‹Tæ›¿æ¢ä¸ºæˆ‘ä»¬æŒ‡å®šçš„å®é™…ç±»å‹&lt;int&gt;ï¼Œæœ€ç»ˆç”ŸæˆæŒ‡å®šç±»å‹çš„å‡½æ•°void print&lt;int&gt;(int x, int y) ã€‚ äº²çœ¼çœ‹ä¸€çœ‹ï¼šå®ä¾‹åŒ–å®Œæˆåç¼–è¯‘çš„å†…å®¹ã€‚ ç”±äºç›´æ¥ä½¿ç”¨ g++ -S ç”Ÿæˆçš„æ˜¯æ±‡ç¼–ä»£ç ï¼Œä¸å¤ªç›´è§‚ï¼Œæˆ‘ä»¬å€ŸåŠ©https://cppinsights.io/ è§‚å¯Ÿæ¨¡æ¿å®ä¾‹åŒ–åçš„ä»£ç ã€‚ 12print&lt;int&gt;(1,2);print&lt;double&gt;(1,2); å®ä¾‹åŒ–åï¼Œç¼–è¯‘å™¨ç¡®å®ç”Ÿæˆäº†ä¸¤ä¸ªå‡½æ•°ï¼švoid print&lt;int&gt;(int x, int y)ã€void print&lt;double&gt;(double x, double y)ä¾›æˆ‘ä»¬è°ƒç”¨ã€‚ ä¸Šè¿°ä»å‡½æ•°æ¨¡æ¿åˆ›å»ºæŒ‡å®šç±»å‹çš„å‡½æ•°çš„è¿‡ç¨‹ï¼Œç§°ä¸ºå‡½æ•°æ¨¡æ¿å®ä¾‹åŒ–ã€‚å¦‚æœè¿™ä¸ªè¿‡ç¨‹æ˜¯å› ä¸ºå‡½æ•°è°ƒç”¨è€Œäº§ç”Ÿçš„ï¼Œåˆ™ç§°ä¸ºéšå¼å®ä¾‹åŒ–ã€‚ å®ä¾‹åŒ–å‡½æ•°æ¯æ¬¡è°ƒç”¨éƒ½ä¼šå‘ç”Ÿå—ï¼Ÿä»…åœ¨ç¬¬ä¸€æ¬¡å‡½æ•°è°ƒç”¨æ—¶å®ä¾‹åŒ–ï¼Œå¯¹è¯¥å‡½æ•°çš„è¿›ä¸€æ­¥è°ƒç”¨å°†è·¯ç”±ï¼ˆæŒ‡å‘ï¼‰åˆ°å·²å®ä¾‹åŒ–çš„å‡½æ•°ã€‚ æœ€ä½³å®è·µï¼šä¼˜å…ˆä½¿ç”¨æ™®é€šå‡½æ•°è°ƒç”¨æ–¹å¼ï¼Œå³print(1,2) ã€‚ 3.3.2 å¤šä¸ªå‡½æ•°æ¨¡æ¿ç±»å‹ å¤šä¸ªå‡½æ•°æ¨¡æ¿ç±»å‹é€‚ç”¨äºå‡½æ•°æ‹¥æœ‰å¤šä¸ªä¸åŒç±»å‹å‚æ•°çš„æƒ…å†µã€‚ è¯·çœ‹ä¸‹ä¾‹ï¼š 1234567891011121314#include &lt;iostream&gt;using namespace std;template &lt;typename T&gt;T max(T x, T y)&#123; return (x &gt; y) ? x : y;&#125;int main()&#123; cout &lt;&lt; max(2, 3.5) &lt;&lt; &#x27;\\n&#x27;; // compile error return 0;&#125; ç»§ç»­å¾€ä¸‹é˜…è¯»å‰ï¼Œè¯·æ€è€ƒï¼šä¸ºä»€ä¹ˆç¼–è¯‘ä¼šå‡ºé”™ï¼Ÿæœ‰ä»€ä¹ˆå¥½çš„è§£å†³åŠæ³•å—ï¼Ÿ ä¸ºä»€ä¹ˆç¼–è¯‘å‡ºé”™ï¼Ÿ æ ¹æ®è°ƒç”¨çš„å‡½æ•°max(2, 3.5) ï¼Œç¼–è¯‘å™¨ä¼šå°è¯•å¯»æ‰¾åŒ¹é…çš„å‡½æ•°ï¼Œæ²¡æ‰¾åˆ°è½¬ä¸‹ä¸€æ­¥ï¼› ç¼–è¯‘å™¨å°è¯•æ ¹æ®å‡½æ•°æ¨¡æ¿max(T,T)ï¼Œç”Ÿæˆå‡½æ•°max(int,double) ã€‚æ˜¾ç„¶è¿™æ˜¯ä¸å¯èƒ½ç”Ÿæˆä¸åŒç±»å‹çš„å‚æ•°ã€‚ å‡½æ•°è°ƒç”¨è§£æå‡ºé”™ã€‚ å½“ç„¶ä½ å¯èƒ½è¿˜ä¼šé—®ï¼šä¸ºä»€ä¹ˆç¼–è¯‘å™¨ä¸ä¼šç”Ÿæˆå‡½æ•°max(double,double)ï¼Œè¿™è°ƒç”¨æ—¶max(int,double) ä¸­intå¯ä»¥éšå¼è½¬æ¢ä¸ºdoubleå‘¢? å› æ­¤ï¼Œç±»å‹è½¬æ¢ä»…åœ¨è§£æå‡½æ•°é‡è½½æ—¶è¿›è¡Œï¼Œè€Œä¸æ˜¯åœ¨æ‰§è¡Œæ¨¡æ¿å‚æ•°æ¨å¯¼æ—¶è¿›è¡Œã€‚ æœ‰ä»€ä¹ˆå¥½çš„è§£å†³åŠæ³•å—ï¼Ÿ å½“ç„¶ï¼Œæœ€ç®€å•åŠæ³•æ˜¯ä¼ å‚æ—¶ä¾¿è¿›è¡Œç±»å‹è½¬æ¢ï¼š 1cout &lt;&lt; max(static_cast&lt;double&gt;(2), 3.5) &lt;&lt; &#x27;\\n&#x27;; è¿™æ ·å‡½æ•°æ¨¡æ¿å°±å¯ä»¥ç”Ÿæˆå‡½æ•°max(double,double)ï¼Œä»è€Œæ­£ç¡®è¢«è°ƒç”¨äº†ã€‚ä½†è¿™å¾ˆä¸coolã€‚ æˆ–è€…ä½ åˆæƒ³åˆ°äº†ï¼Œæˆ‘ä»¬ä¸æ˜¯æ–°å­¦ä¼šä¸€ç§è°ƒç”¨å‡½æ•°æ¨¡æ¿çš„æ–¹æ³•å—ï¼Œå®ƒå¯ä»¥æ˜¾ç¤ºæŒ‡å®šè½¬æ¢ç±»å‹ï¼Œç¼–è¯‘å™¨å°±ä¸ç”¨è‡ªå·±å»æ¨å¯¼äº†ï¼š 1cout &lt;&lt; max&lt;double&gt;(2, 3.5) &lt;&lt; &#x27;\\n&#x27;; è¿™ä¹Ÿæ˜¯okçš„ã€‚ ä½†æœ€ä½³çš„è§£å†³åŠæ³•ï¼Œè¿˜æ˜¯ä»æ ¹æºè§£å†³ï¼šæ—¢ç„¶æ˜¯è°ƒç”¨å‚æ•°ç±»å‹æœ‰å¤šä¸ªï¼Œè€Œæ¨¡æ¿å‡½æ•°å‚æ•°ç±»å‹åªæœ‰ä¸€ä¸ªå¯¼è‡´å‡ºç°ä¸Šé¢çš„é—®é¢˜ã€‚ é‚£ä¸ºä»€ä¹ˆä¸ç›´æ¥å®šä¹‰æ¨¡æ¿å‡½æ•°æ—¶ä¹Ÿå®šä¹‰ä¸ºå¤šä¸ªç±»å‹å‘¢ï¼Ÿ å¤šä¸ªæ¨¡æ¿ç±»å‹å‚æ•° 1234567891011121314#include &lt;iostream&gt;using namespace std;template &lt;typename T,typename U&gt;T max(T x, U y)&#123; return (x &gt; y) ? x : y;&#125;int main()&#123; cout &lt;&lt; max(2, 3.5) &lt;&lt; &#x27;\\n&#x27;; // compile error return 0;&#125; å¥½äº†ï¼Œä¸€åˆ‡çœ‹èµ·æ¥æŒºä¸é”™ï¼Œè®©æˆ‘ä»¬è¾“å‡ºä¸€ä¸‹ï¼š 13 å•Šï¼Ÿå¤§æƒŠå¤±è‰²ã€‚ä¸ºä»€ä¹ˆè¾“å‡ºç»“æœæ˜¯3è€Œä¸æ˜¯3.5ï¼Ÿ å› ä¸ºå‡½æ•°å†…éƒ¨ç»“æœ3.5ä¸ºdouble ç±»å‹ï¼Œè¿”å›çš„æ˜¯Tç±»å‹ï¼Œå·²ç»è¢«ç¼–è¯‘å™¨è‡ªåŠ¨æ¨æ–­ï¼ˆæ ¹æ®ä¼ çš„å‚æ•°2ï¼‰æ›¿æ¢ä¸ºint ç±»å‹ã€‚å› æ­¤å°†3.5å¼ºåˆ¶è½¬æ¢ä¸º3ã€‚ é‚£æˆ‘ä»¬ç›´æ¥æŒ‡å®šè¿”å›ç±»å‹T å˜ä¸ºU ä¸å°±è¡Œäº†å—ï¼Ÿå¾ˆå¯æƒœï¼Œä¸è¡Œã€‚å› ä¸ºTã€Uçš„å®é™…ç±»å‹éƒ½æ˜¯æ ¹æ®è°ƒç”¨æ—¶ä¼ çš„å‚æ•°è¿›è¡Œæ¨æ–­çš„ï¼Œè€Œè°ƒç”¨æ—¶ä¼ é€’å‚æ•°çš„ä½ç½®å¯ä»¥éšæ„æ¢åŠ¨ã€‚ 12// cout &lt;&lt; max(2, 3.5) &lt;&lt; &#x27;\\n&#x27;; cout &lt;&lt; max(3.5, 2) &lt;&lt; &#x27;\\n&#x27;; æ­¤æ—¶Uè¢«æ¨æ–­ä¸ºint ç±»å‹ã€‚æ›´å¥½çš„åšæ³•æ˜¯ä½¿ç”¨autoå…³é”®å­—ï¼Œè‡ªåŠ¨æ¨å¯¼å‡½æ•°çš„è¿”å›ç±»å‹ã€‚ 12345template &lt;typename T,typename U&gt;auto max(T x, U y)&#123; return (x &gt; y) ? x : y;&#125; è¾“å‡ºï¼š 13.5 å¥½äº†ï¼Œä¸€åˆ‡éƒ½å¥½èµ·æ¥äº†ã€‚å…³äºautoå…³é”®å­—è¿˜ä¼šåœ¨åé¢åšæ›´è¯¦ç»†çš„æ€»ç»“ï¼Œå¸Œæœ›ä½ æœ‰äº†ä¸ªåˆæ­¥çš„è®¤è¯†ã€‚ 3.4 å‡½æ•°å‚æ•°ğŸŒŸ âš ï¸ æœ¬èŠ‚çŸ¥è¯†è®¾è®¡åˆ°è¾ƒå¤šæŒ‡é’ˆå’Œå¼•ç”¨ç›¸å…³å†…å®¹ï¼Œæ­¤å‰æ— åŸºç¡€å»ºè®®å…ˆé˜…è¯»ï¼šç¬¬äºŒç« ï¼šæŒ‡é’ˆå’Œå¼•ç”¨ã€‚ åœ¨æ­£å¼æ¢è®¨å‡½æ•°å‚æ•°å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸‹å‡½æ•°ä¸­çš„ä¸¤ç§å‚æ•°ï¼š å½¢å¼å‚æ•°ï¼šå‡½æ•°å£°æ˜æ—¶è¡¨ç¤ºçš„å˜é‡ï¼Œå‡½æ•°è°ƒç”¨æ—¶æ‰åˆ†é…å†…å­˜ã€‚ å®é™…å‚æ•°ï¼šè°ƒç”¨å‡½æ•°æ•°å®é™…ä¼ é€’çš„å‚æ•°å€¼ï¼Œå¿…é¡»æ˜¯ç¡®å®šçš„å€¼ã€‚ 12345void foo(int x, int y) // x,y æ˜¯å½¢å‚&#123;&#125;foo(6, 7); // 6,7 æ˜¯å®å‚ï¼Œè¢«èµ‹å€¼ç»™å½¢å‚x,y å®ƒä»¬æ›´å¤šçš„åŒºåˆ«ä¼šåœ¨3.4.6èŠ‚ä¸­è¿›è¡Œå¯¹æ¯”ã€‚ æœ¬èŠ‚æ ¸å¿ƒï¼šæŒ‰å€¼ä¼ é€’ã€æŒ‰å¼•ç”¨ä¼ é€’å’ŒæŒ‰æŒ‡é’ˆä¼ é€’ï¼Œè¿™ 3 ç§å‘å‡½æ•°ä¼ é€’å‚æ•°çš„ä¸»è¦æ–¹å¼ã€‚æˆ‘ä»¬ä¸€èµ·äº†è§£ä¸‹å§ã€‚ 3.4.1 æŒ‰å€¼ä¼ é€’ ä»€ä¹ˆæ˜¯æŒ‰å€¼ä¼ é€’ï¼Ÿ ä¸€èˆ¬æ¥è¯´ï¼ŒC++ ä¸­çš„éæŒ‡é’ˆå‚æ•°éƒ½æ˜¯æŒ‰å€¼ä¼ é€’ï¼šå®å‚çš„å€¼è¢«å¤åˆ¶åˆ°ç›¸åº”å‡½æ•°å½¢å‚ä¸­ã€‚ æŒ‰å€¼ä¼ é€’æ—¢ç„¶æ˜¯å¤åˆ¶ï¼Œå³åªæ˜¯å°†å®å‚çš„å‰¯æœ¬ä¼ é€’ç»™å‡½æ•°ï¼Œé‚£ä¹ˆå‡½æ•°ä¿®æ”¹å‰¯æœ¬ï¼ˆå½¢å‚ï¼‰çš„å€¼æ˜¯ä¸èƒ½å½±å“åˆ°å®å‚å€¼ã€‚è¯·çœ‹ä¸‹ä¾‹ï¼š 123456789101112131415#include &lt;iostream&gt;void foo(int y)&#123; y = 6;&#125;int main()&#123; int x&#123; 5 &#125;; cout &lt;&lt; &quot;x = &quot; &lt;&lt; x &lt;&lt; &#x27;\\n&#x27;; foo(x); // å®å‚xå¤åˆ¶ä¸€ä»½ç»™y cout &lt;&lt; &quot;x = &quot; &lt;&lt; x &lt;&lt; &#x27;\\n&#x27;; return 0;&#125; è¾“å‡ºï¼š 12x = 5x = 5 xçš„å€¼å¹¶æ²¡æœ‰è¢«æ”¹å˜ï¼Œè™½ç„¶foo å‡½æ•°å†…å®¹ä¿®æ”¹äº†ä¼ é€’è¿‡æ¥çš„å€¼ï¼Œä½†é‚£åªæ˜¯xçš„å‰¯æœ¬ã€‚ ä¸Šå›¾å¯¹è¿™ä¸€è¿‡ç¨‹è¿›è¡Œå½¢è±¡è¯´æ˜ï¼Œæ³¨æ„åˆ°å®å‚xã€å½¢å‚yå¯¹åº”çš„æ˜¯ä¸åŒå†…å­˜åŒºåŸŸï¼ˆåœ°å€éƒ½ä¸ä¸€æ ·ï¼‰ã€‚ ä»€ä¹ˆæ—¶å€™ç”¨å€¼ä¼ é€’ï¼Ÿ æŒ‰å€¼ä¼ é€’é€šå¸¸ç”¨äºéœ€è¦ä¼ é€’çš„å‚æ•°ä¸å¸Œæœ›è¢«ä¿®æ”¹çš„æ—¶å€™ï¼Œå®å‚å¯ä»¥æ˜¯ï¼šå˜é‡ï¼ˆä¾‹å¦‚ xï¼‰ã€æ•°å­—ï¼ˆä¾‹å¦‚ 6ï¼‰ã€è¡¨è¾¾å¼ï¼ˆä¾‹å¦‚ x+1ï¼‰ã€ç»“æ„å’Œç±»ä»¥åŠæšä¸¾æ•°ã€‚ ä½†æ˜¯æŒ‰å€¼ä¼ é€’ä¹Ÿæœ‰æ˜æ˜¾çš„ç¼ºç‚¹ï¼Œåº”è¯¥é¿å…ä»¥ä¸‹å‡ ç§æƒ…å†µä½¿ç”¨ï¼š å¤åˆ¶ç»“æ„å’Œç±»ã€‚å¤åˆ¶ç»“æ„å’Œç±»å¼€é”€è¿‡å¤§ï¼Œå¯¼è‡´æ˜æ˜¾æ€§èƒ½æŸå¤±ï¼› å¸Œæœ›å‚æ•°è¢«æ”¹å˜ï¼› è¿”å›å¤šä¸ªå€¼ã€‚ å…¶å®ƒæƒ…å†µä¼˜å…ˆè€ƒè™‘å€¼ä¼ é€’ã€‚ 3.4.2 æŒ‰å¼•ç”¨ä¼ é€’ ä¸ºä»€ä¹ˆéœ€è¦å¼•ç”¨ä¼ é€’ï¼Ÿ åœ¨å‰é¢æˆ‘ä»¬è¯´åˆ°å€¼ä¼ é€’çš„å‡ ä¸ªç¼ºç‚¹ï¼šå¤åˆ¶ç»“æ„å’Œç±»å¼€é”€å¤§ã€æ— æ³•æ”¹å˜å‚æ•°ã€åªèƒ½è¿”å›ä¸€ä¸ªå€¼ã€‚ å¯¹åº”ï¼Œå¦‚æœä½ ä¸å¸Œæœ›ä»¥ä¸Šå‘ç”Ÿï¼Œè¯·ä½¿ç”¨å¼•ç”¨ä¼ é€’ã€‚ å¼•ç”¨å°±ç›¸å½“äºå˜é‡åˆ«åï¼Œæ“ä½œå¼•ç”¨ç­‰ä»·äºç›´æ¥æ“ä½œæœ¬ä½“å˜é‡ã€‚è¯·çœ‹ä¸‹ä¾‹ï¼š 1234567891011121314151617181920#include &lt;iostream&gt;using namespace std;void getAdd(int x_add_1, int&amp; y_add_2,int&amp; z_add_3)&#123; x_add_1 += 1; y_add_2 += 2; z_add_3 += 3;&#125;int main()&#123; // print(1.2,2); int x = 0 ,y = 0 , z =0; getAdd(x,y,z); cout &lt;&lt; x &lt;&lt; endl; cout &lt;&lt; y &lt;&lt; endl; cout &lt;&lt; z &lt;&lt; endl; return 0;&#125; è¾“å‡ºï¼š 123023 ä¸Šè¿°è¿‡ç¨‹ç®€ç•¥åˆ†æã€‚ å¼•ç”¨ä¼ é€’å˜é‡ y ã€z å‡è¢«ä¿®æ”¹ï¼ˆxå€¼ä¼ é€’æœªè¢«ä¿®æ”¹ï¼‰ã€‚ ç±»ä¼¼å€¼ä¼ é€’ã€‚ä¾‹å¦‚ï¼Œå¼•ç”¨ä¼ é€’ä¸­çš„y_add_2 ä¹Ÿæ˜¯è¢«è°ƒå‡½æ•°æ ˆä¸Šçš„ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œå®ƒä¿å­˜äº†yçš„åœ°å€ã€‚å¯¹äºå¼•ç”¨å‚æ•°çš„ä»»ä½•å¤„ç†éƒ½ä¼šé€šè¿‡é—´æ¥å¯»å€ï¼Œç­‰ä»·ç›´æ¥æ“ä½œå®å‚yæœ¬ä½“ã€‚ ç‰¹åˆ«çš„ï¼Œå¼•ç”¨è¿˜æœ‰å‡ ä¸ªç‰¹ç‚¹ï¼ˆ2.2èŠ‚ï¼‰ï¼š å¼•ç”¨å¿…é¡»ä½¿ç”¨å³å€¼è¿›è¡Œåˆå§‹åŒ–ï¼Œé™¤éæ˜¯æ‰§è¡Œå¸¸é‡çš„å¼•ç”¨ï¼› å¼•ç”¨ä¼ é€’å€¼å¿…é¡»è¢«åˆå§‹åŒ–ï¼Œæ‰€ä»¥ä¸å¿…æ‹…å¿ƒç©ºå€¼ã€‚ è¿™ä¹ˆæ£’äº†ä½ åé¢è¿˜è®²æŒ‡é’ˆä¼ é€’å¹²å˜›ï¼Ÿ ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬ç¡®å®æ¨èå°½é‡ä½¿ç”¨å¼•ç”¨ä¼ é€’å‚æ•°ï¼Œä½†æ˜¯åœ°å€ä¼ é€’å‚æ•°è¿˜æ˜¯æœ‰å®ƒçš„ç”¨æ­¦ä¹‹åœ°ã€‚ æ¯”å¦‚ï¼Œå¼•ç”¨ä¼ é€’å€¼å¯ä»¥ä½¿å¾—å‡½æ•°â€œè¿”å›â€å¤šä¸ªå€¼ï¼š 1void getAdd(int x_add_1, int&amp; y_add_2,int&amp; z_add_3); ä½†æ˜¯è§‚å¯Ÿè¿™ä¸ªè¡¨è¾¾å¼ï¼Œè¾“å…¥å‚æ•°x_add_1 ï¼Œå’Œè¾“å‡ºå‚æ•°ï¼ˆè¿”å›å€¼ï¼‰y_add_2ã€z_add_3 æ”¾åœ¨ä¸€å—ï¼Œæ— æ³•å¾ˆå¥½çš„åŒºåˆ†å“ªäº›æ˜¯è¦è¢«ä¿®æ”¹çš„ï¼ˆè¾“å‡ºå‚æ•°ï¼‰ã€‚æ¯•ç«Ÿï¼Œå®ƒä»¬è¿è°ƒç”¨éƒ½æ˜¯è¿™ä¹ˆç›¸ä¼¼ï¼š 12 int x = 0 ,y = 0 , z =0;getAdd(x,y,z); ä½ èƒ½åŒºåˆ†å“ªäº›æ˜¯xã€yã€zå“ªäº›è¾“å‡ºå‚æ•°å—ï¼Ÿ 3.4.3 æŒ‰æŒ‡é’ˆä¼ é€’ ä¸ºä»€ä¹ˆè¦éœ€è¦æŒ‡é’ˆä¼ é€’å€¼? å‰é¢è¯´åˆ°ï¼Œå¼•ç”¨ä¼ å€¼ç”¨æ¥â€œè¿”å›â€å¤šä¸ªå‚æ•°æ—¶ï¼Œå¾ˆéš¾åŒºåˆ†å“ªäº›å‚æ•°æ˜¯è¾“å‡ºå‚æ•°ï¼Œè¿è°ƒç”¨æ—¶éƒ½è¿‡åˆ†ç›¸ä¼¼ï¼ˆå¤šèƒèƒæäººå¿ƒæ€æ˜¯å§ï¼Ÿï¼‰ã€‚ ä¸Šé¢ä»£ç ä¿®æ”¹ä¸ºæŒ‡é’ˆä¼ å€¼åï¼Œå‡½æ•°å½¢å‚ç”±&amp;å˜ä¸º*ï¼š 123456void getAdd(int x_add_1, int* y_add_2,int* z_add_3)&#123; x_add_1 += 1; *y_add_2 += 2; // y_add_2å­˜çš„æ˜¯yçš„åœ°å€ï¼Œä½¿ç”¨*æ“ä½œç¬¦å–å€¼ *z_add_3 += 3;&#125; è°ƒç”¨æ—¶ï¼ˆyã€zå¯ä»¥å¾ˆå¥½çš„è®¤å‡ºæ˜¯è¾“å‡ºå‚æ•°ï¼‰ï¼š 12int x = 0 ,y = 0 , z =0;getAdd(x,&amp;y,&amp;z); // &amp;--å–åœ°å€è¿ç®—ç¬¦ è¾“å‡ºï¼š 123023 ä¸Šé¢ï¼Œy_add_2 è·å–äº†å½¢å‚&amp;yä¿å­˜çš„å€¼ï¼Œå³å˜é‡yçš„å†…å­˜åœ°å€ã€‚é€šè¿‡å–å€¼è¿ç®—ç¬¦*y_add_2 ï¼Œå¯ä»¥è·å–å˜é‡yçš„å†…å­˜åŒºåŸŸæ“ä½œæƒï¼Œå³å¯ä»¥ä¿®æ”¹yçš„å€¼äº†ï¼ˆ+2ï¼‰ã€‚å› æ­¤å˜é‡yçš„å€¼è¢«ä¿®ï¼ŒzåŒç†ã€‚ æƒŠè®¶ï¼æŒ‡é’ˆå…¶å®å€¼ä¼ é€’ï¼Ÿ è¿™å°±æ˜¯è¯´æˆ‘ä»¬åƒå€¼ä¼ é€’ä¸€æ ·å°†å®å‚çš„å€¼ï¼ˆä¸€èˆ¬æ˜¯æŸä¸ªå˜é‡çš„åœ°å€ï¼‰å¤åˆ¶äº†ä¸€ä»½ç»™å½¢å‚ï¼Œå½¢å‚ä¹Ÿä½œä¸ºå±€éƒ¨å˜é‡åœ¨æ ˆä¸­å¼€è¾Ÿäº†å†…å­˜ç©ºé—´ã€‚ æ¢å¥è¯è¯´ï¼ŒæŒ‡é’ˆæ˜¯æŒ‰å€¼ä¼ é€’çš„ï¼å½“ç„¶ï¼Œè¿™å…¶å®æ²¡å¤šå¤§æƒŠè®¶ï¼ˆé™¤éä½ å’Œä½œè€…ä¸€æ ·æ˜¯ä¸ªæƒŠè®¶æ€ªï¼‰ï¼Œå› ä¸ºæˆ‘ä»¬æ—©åœ¨2.1èŠ‚åˆ†æè¿‡ï¼ŒæŒ‡é’ˆæœ¬è´¨å°±æ˜¯ä¸€ä¸ªå˜é‡ï¼Œå®ƒæœ‰è‡ªå·±çš„å€¼ï¼ˆå…¶å®ƒå˜é‡çš„åœ°å€ï¼‰å’Œè‡ªå·±çš„åœ°å€ã€‚ è¯·çœ‹ä¸‹ä¾‹ï¼Œè¯•åˆ†æï¼šä¸ºä»€ä¹ˆpfiveå€¼æ²¡æœ‰è¢«ä¿®æ”¹æˆåŠŸï¼Ÿ 12345678910111213141516171819#include &lt;iostream&gt;using namespace std;// å˜é‡ pträ¿å­˜äº†p_fiveçš„å€¼ï¼ˆfiveçš„åœ°å€ï¼‰void setNull(int* ptr)&#123; ptr = NULL; &#125;int main()&#123; int five = 5; cout&lt;&lt;&amp;five&lt;&lt;endl; int* pfive = &amp;five; // p_five = &amp;five = 0x7ffdb136b8e4 cout&lt;&lt;&amp;pfive&lt;&lt;endl; setNull(pfive); // å°†p_fiveæŒ‡å‘null cout&lt;&lt;pfive&lt;&lt;endl; // è¾“å‡ºæ­¤æ—¶p_fiveå†…å­˜åœ°å€ return 0;&#125; è¾“å‡ºï¼š 12340x7ffd037a0ecc0x7ffd037a0ec00x7ffd037a0ea80x7ffd037a0ecc æ˜¾ç„¶pfiveæ²¡æœ‰ä¿®æ”¹æˆåŠŸï¼ˆNULLï¼‰ã€‚æ•´ä¸ªè¿‡ç¨‹å¦‚å›¾æ‰€ç¤ºï¼š å±€éƒ¨å˜é‡pfive ä¿å­˜äº†&amp;fiveçš„å€¼ï¼Œå³five çš„åœ°å€ï¼› éšåpfiveä½œä¸ºå®å‚ï¼Œå…¶å€¼ï¼ˆfiveåœ°å€ï¼‰å¤åˆ¶ç»™å½¢å‚ptrï¼Œç¼–è¯‘å™¨ç»™å½¢å‚ptrå¼€è¾Ÿäº†ç©ºé—´ä¸“é—¨ä¿å­˜fiveåœ°å€ï¼› éšåptr=NULLï¼Œä½†æ˜¯å½±å“ä¸åˆ°pfiveï¼ŒäºŒè€…æ˜¯ä¸åŒçš„å˜é‡æ‹¥æœ‰å„è‡ªç‹¬ç«‹çš„ç©ºé—´ã€‚ è¿™éªŒè¯äº†æˆ‘ä»¬ä¹‹å‰çš„ç»“è®ºï¼šæŒ‡é’ˆä¼ å€¼åªæ˜¯å¤åˆ¶äº†å®å‚å€¼ç»™å½¢å‚ï¼Œåªä¸è¿‡è¿™ä¸ªå®å‚å€¼ä¸€èˆ¬æ˜¯æŸä¸ªå˜é‡çš„åœ°å€ã€‚ é‚£å¦‚æœæˆ‘ä»¬æƒ³åœ¨æŒ‡é’ˆä¼ å€¼æ—¶ä¿®æ”¹å½¢å‚å°±å¯ä»¥å½±å“å®å‚ï¼Ÿ æ˜¾ç„¶è¿™å°±æ˜¯å¼•ç”¨çš„åšæ³•ï¼Œå¯¹å½¢å‚çš„ä»»ä½•ä¿®æ”¹ç›´æ¥ç­‰ä»·æ“ä½œå®å‚æœ¬ä½“ã€‚ä¸è¿‡ä¸ºäº†æ›´å¥½çš„è®²è§£ï¼Œæˆ‘ä»¬å…ˆæ€»ç»“ä¸€ä¸‹å‰é¢å¼•ç”¨ã€æŒ‡é’ˆä¼ å€¼çš„ç”¨æ³•ã€‚ æˆ‘ä»¬çŸ¥é“å¼•ç”¨ç›¸å½“äºå˜é‡çš„åˆ«åï¼Œä½¿ç”¨å¼•ç”¨æ—¶å¯ä»¥è®¤ä¸ºå°±æ˜¯åœ¨ä½¿ç”¨å˜é‡æœ¬èº«ã€‚ 1int&amp; a_ref = a; // ä½¿ç”¨a_refå’Œä½¿ç”¨aæ²¡ä»€ä¹ˆåŒºåˆ« åˆå¦‚ä¹‹å‰çš„å¼•ç”¨ä¼ å€¼ï¼š 1234567891011void func(int&amp; var)&#123; // var = ...;&#125;int main()&#123; int tmp = 0; func(tmp); return 0;&#125; æ­¤æ—¶å½¢å‚æ˜¯int&amp; var ï¼Œå®å‚tmp ï¼Œå®å‚å€¼åˆå§‹åŒ–å½¢å‚varï¼Œå°±ç›¸å½“äºï¼š 1int&amp; var = tmp; ä¹Ÿå¯ä»¥æ¨å¹¿åˆ°å‡½æ•°å…¶ä½™å‚æ•°ä¼ é€’æƒ…å†µï¼š å€¼ä¼ é€’ 1234567891011void func(int var)&#123; // var = ...;&#125;int main()&#123; int tmp = 0; func(tmp); return 0;&#125; å®å‚å€¼åˆå§‹åŒ–å½¢å‚varç­‰ä»·äºï¼š 1int var = tmp; æŒ‡é’ˆä¼ é€’ 1234567891011void func(int* var)&#123; // *var = ...;&#125;int main()&#123; int tmp = 0; func(&amp;tmp); return 0;&#125; å®å‚å€¼åˆå§‹åŒ–å½¢å‚varç­‰ä»·äºï¼š 1int* var = &amp;tmp; å¥½äº†ï¼Œæ¥å—äº†ä¸Šé¢çš„æ¦‚å¿µï¼Œæˆ‘ä»¬å†æ¥è¯´è¯´æ€ä¹ˆä¿®æ”¹å½¢å‚ptr ç­‰ä»·äºä¿®æ”¹å®å‚pfiveï¼Ÿ 1234567891011121314151617#include &lt;iostream&gt;using namespace std;// å˜é‡ pträ¿å­˜äº†p_fiveçš„å€¼ï¼ˆfiveçš„åœ°å€ï¼‰void setNull(int* ptr)&#123; ptr = NULL; &#125;int main()&#123; int five = 5; int* pfive = &amp;five; setNull(pfive); // å°†p_fiveæŒ‡å‘null cout&lt;&lt;p_five&lt;&lt;endl; // è¾“å‡ºæ­¤æ—¶p_fiveå†…å­˜åœ°å€ return 0;&#125; æ˜¾ç„¶ï¼Œå¼•ç”¨å¯ä»¥åšåˆ°è¿™ç‚¹ï¼šå°†ptr è§†ä¸ºpfiveçš„åˆ«åï¼š 1int*&amp; ptr = pfive; åªéœ€å°†ç¬¬5è¡Œä¿®æ”¹ä¸ºï¼š 1void setNull(int*&amp; ptr) æˆ‘ä»¬å†å°è¯•è¾“å‡ºï¼š 10 // è¡¨ç¤ºæŒ‡é’ˆæŒ‡å‘NULL 3.4.4 æœ€ä½³å®è·µ ä¼ å¼•ç”¨å¿«è¿˜æ˜¯ä¼ æŒ‡é’ˆå¿«ï¼Ÿ è™½ç„¶å‰é¢çš„åˆ†æï¼Œä½ å¯¹å¼•ç”¨å’ŒæŒ‡é’ˆä¼ é€’æœ‰ä¸€å®šçš„äº†è§£ã€åŒºåˆ†ã€‚ ä½†å¦‚æœè¦ä½ å›ç­”è¿™ä¹ˆä¸€ä¸ªé—®é¢˜ï¼šæ˜¯ä¼ å¼•ç”¨å¿«è¿˜æ˜¯ä¼ æŒ‡é’ˆå¿«ï¼Ÿ å…ˆä¸Šç»“è®ºï¼šä¸€æ ·å¿«ã€‚ å› ä¸ºå¼•ç”¨å°±æ˜¯ç‰¹æ®Šçš„æŒ‡é’ˆï¼Œå®ƒåº•å±‚å®ç°å’ŒæŒ‡é’ˆæ˜¯ä¸€è‡´çš„ã€‚ å‡†å¤‡ä¸€æ®µåœ°å€ä¼ å‚ä»£ç ï¼š 1234567891011void func(int* y)&#123; *y = 2;&#125;int main()&#123; int x = 0 ; func(&amp;x); return 0;&#125; mainå¯¹åº”æ±‡ç¼–ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415main: # ä¿å­˜mainæ ˆå¸§ä¿¡æ¯ pushq %rbp movq %rsp, %rbp subq $16, %rsp # ç”¨0åˆå§‹åŒ–xï¼ˆå¯¹åº”åœ°å€ä¸º-4(%rbp)ï¼Œå¹¶å°†xå‹æ ˆ movl $0, -4(%rbp) # å°†xåœ°å€ä¿å­˜åˆ°å¯„å­˜å™¨raxä¸­ï¼Œç„¶åä¿å­˜åœ¨rdiä¸­ leaq -4(%rbp), %rax movq %rax, %rdi # è°ƒç”¨å‡½æ•°func call _Z4funcPi movl $0, %eax leave ret å¯ä»¥çœ‹åˆ°mainä¸­æœ€ç»ˆå°†å®å‚&amp;xï¼ˆå˜é‡xçš„åœ°å€ï¼‰ä¿å­˜åœ¨å¯„å­˜å™¨rdiä¸­ ã€‚ æ¥ç€æˆ‘ä»¬å¼€å§‹é‡å¤´æˆfuncå‡½æ•°ï¼šæŒ‡é’ˆé€šè¿‡ä¿å­˜å˜é‡åœ°å€åˆ°å¯„å­˜å™¨ä¸­ï¼Œå®ç°å¯¹å˜é‡æ‰€åœ¨å†…å­˜åŒºåŸŸè¿›è¡Œä¿®æ”¹ï¼Œå› æ­¤ä¿®æ”¹æŒ‡é’ˆå°±æ˜¯ç›´æ¥å½±å“å˜é‡ã€‚ 12345678910111213_Z4funcPi: # ä¿å­˜funcæ ˆå¸§ç›¸å…³ä¿¡æ¯ pushq %rbp movq %rsp, %rbp # è¿›è¡Œåœ°å€å¤åˆ¶ï¼šå°†å¯„å­˜å™¨rdiçš„å€¼ï¼ˆå®å‚&amp;xï¼‰å¤åˆ¶ç»™å½¢å‚yï¼ˆå¯¹åº”åœ°å€-8(%rbp)ï¼‰ï¼Œå¹¶å°†yå‹æ ˆ movq %rdi, -8(%rbp) # è¿›è¡Œèµ‹å€¼è¿ç®—ï¼šå…ˆç”¨å¯„å­˜å™¨raxä¿å­˜å½¢å‚yçš„çš„å€¼ï¼ˆxçš„åœ°å€ï¼‰ï¼Œç„¶åå°†2å¤åˆ¶ç»™x movq -8(%rbp), %rax movl $2, (%rax) nop popq %rbp # è¿”å›main ret ç°åœ¨æˆ‘ä»¬å°†ä¸Šè¿°ä»£ç ä»åœ°å€ä¼ é€’æ”¹ä¸ºå¼•ç”¨ä¼ é€’ï¼š 1234567891011void func(int&amp; y)&#123; y = 2;&#125;int main()&#123; int x = 0 ; func(x); return 0;&#125; æŸ¥çœ‹å…¶æ±‡ç¼–ä»£ç ï¼šä¸èƒ½è¯´æ¯«ä¸ç›¸å¹²ï¼Œåªèƒ½è¯´å’Œä¹‹å‰æŒ‡é’ˆä¼ å€¼çš„æ±‡ç¼–ä»£ç å®Œå…¨ä¸€æ¨¡ä¸€æ ·ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå¼•ç”¨æœ¬è´¨å’ŒæŒ‡é’ˆä¸€æ ·ï¼Œéƒ½æ˜¯é€šè¿‡ä¿å­˜å˜é‡å¯¹åº”å†…å­˜åŒºåŸŸåœ°å€ï¼Œæ¥å®ç°æ“ä½œå˜é‡ã€‚å¯¹å¼•ç”¨çš„ä»»ä½•æ“ä½œï¼Œéƒ½ä¼šé€šè¿‡é—´æ¥å¯»å€ç›´æ¥æ“ä½œå˜é‡æœ¬èº«ï¼Œåªä¸è¿‡ç›¸æ¯”æŒ‡é’ˆéšè—äº†ä¸€äº›ç»†èŠ‚ï¼ˆç¼–è¯‘å™¨å¯¹ä½¿ç”¨å¼•ç”¨ä¼šè‡ªåŠ¨åŠ ä¸Š*ï¼Œ2.2.1èŠ‚ï¼‰ã€‚ å‚æ•°ä¼ é€’é€‰æ‹©è§„åˆ™ æœ‰å¼•é€‰å¼•ã€‚ ä¼˜å…ˆé€‰ç”¨å¼•ç”¨ä¼ é€’ï¼ˆå¼•ç”¨ï¼šæ‹œæ‰˜äº†ï¼‰ï¼Œé™¤éï¼š å¸Œæœ›å‚æ•°ä¸è¢«ä¿®æ”¹ï¼Œé€‰æ‹©æŒ‰å€¼ä¼ é€’ï¼Œå¦åˆ™è½¬ä¸‹ä¸€æ­¥ï¼› éœ€è¦è¿”å›ç©ºæŒ‡é’ˆã€orè¿”å›å±€éƒ¨å˜é‡å†…å­˜ã€ORæ•°ç»„ï¼Œé€‰æ‹©æŒ‰æŒ‡é’ˆä¼ é€’ï¼Œå¦åˆ™è½¬ä¸‹ä¸€æ­¥ã€‚ æ•°ç»„æ€ä¹ˆä½¿ç”¨å¼•ç”¨ä¼ å‚ï¼Ÿ è¿™æ˜¯ä¸ªå¾ˆæœ‰æ„æ€çš„é—®é¢˜ã€‚ å…ˆçœ‹çœ‹æ•°ç»„çš„å¼•ç”¨ï¼š 12int array[] = &#123;1,2,3,4,5&#125;;int (&amp;arr)[5] = array; æ­¤æ—¶æ•°ç»„çš„ç±»å‹å¯ä»¥è®¤ä¸ºæ˜¯int [5] ï¼Œ&amp;arr ä¾¿æ˜¯å£°æ˜ä¸€ä¸ªarrayçš„åˆ«åã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å¦‚æ­¤ä½¿ç”¨æ•°ç»„çš„å¼•ç”¨ä½œä¸ºå‚æ•°ï¼š 123456789101112131415#include &lt;iostream&gt;using namespace std;void modify_array(int (&amp;arr)[5])&#123; arr[0] = 0;&#125;int main()&#123; int array[] = &#123;1,2,3,4,5&#125;; modify_array(array); cout&lt;&lt;array[0]&lt;&lt;endl; return 0;&#125; è¾“å‡ºï¼š 10 å¯ä»¥çœ‹åˆ°ï¼Œç¡®å®è¢«æˆåŠŸä¿®æ”¹äº†ã€‚ä½†int (&amp;arr)[5] ç¼–è¯‘å™¨è¦æ£€æŸ¥æ•°ç»„å®å‚å’Œå½¢å‚çš„å¤§å°ï¼Œæ‰©å±•æ€§å¤ªå·®ï¼ ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨æ¨¡æ¿è¿›è¡Œæ”¹è¿›ï¼ˆå…¶ä½™ä¸å˜ï¼‰ï¼š 12345678910111213template&lt;typename T,int N&gt;void modify_array(T (&amp;arr)[N])&#123; arr[0] = 0;&#125;int main()&#123; int array[] = &#123;1,2,3,4,5&#125;; modify_array(array); cout&lt;&lt;array[0]&lt;&lt;endl; return 0;&#125; å®Œç¾ï¼ 3.4.5 å‚æ•°ä¼ é€’æ€»ç»“ ä¸€äº›é¢è¯•å¸¸è€ƒé¢˜å¯¹å‰é¢æ‰€å­¦è¿›è¡Œæ€»ç»“å’ŒéªŒè¯ã€‚ å½¢å‚å’Œå®å‚çš„åŒºåˆ«ï¼Ÿ ä½•æ—¶åˆ†é…å†…å­˜ï¼šå½¢å‚å˜é‡åªæœ‰åœ¨è¢«è°ƒç”¨æ—¶æ‰åˆ†é…å†…å­˜å•å…ƒï¼Œåœ¨è°ƒç”¨ç»“æŸæ—¶ï¼Œ å³åˆ»é‡Šæ”¾æ‰€åˆ†é…çš„å†…å­˜å•å…ƒï¼ˆè¿™ä¸€éƒ¨åˆ†å†…å®¹è¿˜ä¼šåœ¨8.6å‡½æ•°è¿”å›å€¼ è¯¦ç»†ä¸¾ä¾‹ï¼‰ï¼›å®å‚åœ¨è°ƒç”¨å‰å°±å·²ç»åˆ†é…äº†å†…å­˜ã€‚ å‚æ•°ç±»å‹ï¼š å®å‚å¯ä»¥æ˜¯å¸¸é‡ã€å˜é‡ã€è¡¨è¾¾å¼ã€å‡½æ•°ç­‰ï¼Œåœ¨è¿›è¡Œå‡½æ•°è°ƒç”¨æ—¶ï¼Œå®ƒä»¬éƒ½å¿…é¡»å…·æœ‰ç¡®å®šçš„å€¼ï¼›å®å‚å’Œå½¢å‚åœ¨æ•°é‡ä¸Šï¼Œç±»å‹ä¸Šï¼Œé¡ºåºä¸Šåº”ä¸¥æ ¼ä¸€è‡´ï¼Œ å¦åˆ™ä¼šå‘ç”Ÿâ€œç±»å‹ä¸åŒ¹é…â€çš„é”™è¯¯ã€‚ å•å‘ä¼ é€’ã€‚åªèƒ½æŠŠå®å‚çš„å€¼ä¼ é€ç»™å½¢å‚ï¼Œè€Œä¸èƒ½æŠŠå½¢å‚çš„å€¼åå‘åœ°ä¼ é€ç»™å®å‚ã€‚ å€¼ä¼ é€’ã€æŒ‡é’ˆä¼ é€’ã€å¼•ç”¨ä¼ é€’çš„åŒºåˆ«ï¼Ÿ è¯·çœ‹ä¸‹è¡¨ã€‚ å€¼ä¼ é€’ å¼•ç”¨ä¼ é€’ æŒ‡é’ˆï¼ˆåœ°å€ï¼‰ä¼ é€’ æ‹·è´å†…å®¹ å®å‚çš„å‰¯æœ¬ï¼ˆæ•°ç»„ä¾‹å¤–ï¼Œä¼šé€€åŒ–ä¸ºæŒ‡é’ˆï¼‰ ç»™å®å‚èµ·ä¸ªåˆ«å æŒ‡é’ˆï¼ˆ4å­—èŠ‚æˆ–8å­—èŠ‚ï¼‰ æ•ˆç‡ ä½ï¼Œç‰¹åˆ«æ˜¯æ‹·è´ç»“æ„ä½“æˆ–ç±»å¯¹è±¡æ—¶ é«˜ï¼ˆæ¨èï¼‰ï¼Œèµ·ä¸ªåˆ«åå³å¯ é«˜ï¼Œæ‹·è´æŒ‡é’ˆå³å¯ æ˜¯å¦ä¿®æ”¹ æ˜¯ æ˜¯ ä¸èƒ½ä¿®æ”¹ä¸ºå…¶å®ƒå¯¹è±¡çš„å¼•ç”¨ åˆå§‹åŒ– ä¸å¿…è¦ ä¸€å®šè¦ ä¸å¿…è¦ ä½•æ—¶ä½¿ç”¨ å‚æ•°ä¸å¸Œæœ›è¢«ä¿®æ”¹æ—¶ ä¼˜å…ˆé€‰ç”¨å¼•ç”¨ã€ä¼ é€’ç»“æ„æˆ–ç±»å¯¹è±¡ã€å¸Œæœ›å‚æ•°è¢«ä¿®æ”¹ è¿”å›å¤šä¸ªå€¼ã€éœ€ä¼ é€’ç©ºæŒ‡é’ˆï¼ˆå¼•ä¼ é€’ç”¨ä¸å…è®¸ç©ºå€¼ï¼‰ã€è¿”å›å±€éƒ¨å˜é‡å†…å­˜ï¼ˆ3.5ä¸­è¯¦è¿°ï¼‰ æŒ‡é’ˆä¼ é€’ã€å¼•ç”¨ä¼ é€’åº•å±‚åŒºåˆ«ï¼Ÿ æŒ‡é’ˆä¼ é€’æœ¬è´¨æ˜¯å€¼ä¼ é€’ã€‚å€¼ä¼ é€’è¿‡ç¨‹ä¸­ï¼Œè¢«è°ƒå‡½æ•°çš„å½¢å¼å‚æ•°ä½œä¸ºè¢«è°ƒå‡½æ•°çš„å±€éƒ¨å˜é‡å¤„ç†ï¼Œä¼šåœ¨æ ˆä¸­å¼€è¾Ÿå†…å­˜ç©ºé—´ä»¥å­˜æ”¾ç”±ä¸»è°ƒå‡½æ•°ä¼ é€’è¿›æ¥çš„å®å‚å€¼ï¼Œä»è€Œå½¢æˆäº†å®å‚çš„ä¸€ä¸ªå‰¯æœ¬ï¼ˆæ›¿èº«ï¼‰ã€‚ æ‰€ä»¥å½¢å‚æŒ‡é’ˆï¼ˆå†…å®¹ï¼‰å˜äº†ï¼ˆä¿å­˜äº†å…¶å®ƒå˜é‡åœ°å€ï¼‰ï¼Œå®å‚æŒ‡é’ˆä¸ä¼šå˜ã€‚ å¼•å‡ºä¼ é€’æœ¬è´¨æ˜¯é—´æ¥å¯»å€ã€‚å¼•ç”¨å‚æ•°ä¼ é€’è¿‡ç¨‹ä¸­ï¼Œè¢«è°ƒå‡½æ•°çš„å½¢å¼å‚æ•°ä¹Ÿä½œä¸ºå±€éƒ¨å˜é‡åœ¨æ ˆä¸­å¼€è¾Ÿäº†å†…å­˜ç©ºé—´ï¼Œä½†æ˜¯è¿™æ—¶å­˜æ”¾çš„æ˜¯ç”±ä¸»è°ƒå‡½æ•°æ”¾è¿›æ¥çš„å®å‚çš„åœ°å€ã€‚è¢«è°ƒå‡½æ•°å¯¹å½¢å‚ï¼ˆæœ¬ä½“ï¼‰çš„ä»»ä½•æ“ä½œéƒ½è¢«å¤„ç†æˆé—´æ¥å¯»å€ï¼Œé€šè¿‡æ ˆä¸­å­˜æ”¾çš„åœ°å€è®¿é—®ä¸»è°ƒå‡½æ•°ä¸­çš„å®å‚å˜é‡ã€‚ ç¬¦å·è¡¨ä¸åŒã€‚ç¨‹åºåœ¨ç¼–è¯‘æ—¶åˆ†åˆ«å°†æŒ‡é’ˆå’Œå¼•ç”¨æ·»åŠ åˆ°ç¬¦å·è¡¨ä¸Šï¼Œç¬¦å·è¡¨ä¸­è®°å½•çš„æ˜¯å˜é‡ååŠå˜é‡æ‰€å¯¹åº”åœ°å€ã€‚æŒ‡é’ˆå˜é‡åœ¨ç¬¦å·è¡¨ä¸Šå¯¹åº”çš„åœ°å€å€¼ä¸ºæŒ‡é’ˆå˜é‡çš„åœ°å€å€¼ï¼Œè€Œå¼•ç”¨åœ¨ç¬¦å·è¡¨ä¸Šå¯¹åº”çš„åœ°å€å€¼ä¸ºå¼•ç”¨å¯¹è±¡çš„åœ°å€å€¼ï¼ˆä¸å®å‚åå­—ä¸åŒï¼Œåœ°å€ç›¸åŒï¼Œç¼–è¯‘å™¨ç›´æ¥å¤„ç†ä¸ºæ“ä½œå¼•ç”¨å¯¹è±¡ï¼‰ã€‚ 3.4.6 ç‰¹æ®Šå‚æ•° åœ¨è¿™ä¸€å°èŠ‚å°†æ¥è®¤è¯†ä¸‹æ¯”è¾ƒç‰¹æ®Šçš„ä¸¤ç±»å‚æ•°ã€‚ å‘½ä»¤è¡Œå‚æ•° å¦‚æœä½ è¿è¡Œè¿‡ä¸€äº›å¼€æºä»£ç /åº“ï¼Œç»å¸¸ä¼šè¦æ±‚ä½ è¾“å…¥æŒ‡å®šå‚æ•°ï¼š 1$ program arg1 arg2 è¿™ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå¯ä»¥å‘å…¶ä»–å‡½æ•°è¾“å…¥å‚æ•°çš„æ–¹æ³•ï¼Œç‰¹åˆ«æ˜¯ä½ æ— æ³•ä¿®æ”¹æºç æˆ–ç¨‹åºéœ€è¦ç”¨æˆ·æä¾›å‚æ•°æ—¶ã€‚å½“ç„¶ï¼Œè¿˜å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶å®ç°ï¼Œè¿™é‡Œæš‚ä¸è¡¨ã€‚ ä¸‹é¢å½¢å¼çš„mainå‡½æ•°å¯ä»¥æ¥å—å‘½ä»¤è¡Œå‚æ•°ï¼š 12int main(int argc, char* argv[])int main(int argc, char** argv) å…¶ä¸­ï¼š argcï¼šä¼ é€’çš„å‚æ•°é‡ä¸ªæ•°ï¼Œè‡³å°‘ä¸º1ï¼Œå› ä¸ºè‡³å°‘å­˜åœ¨argv[0] æŒ‡å‘å‡½æ•°æœ¬èº«åç§°ï¼› argvï¼š Cé£æ ¼äºŒç»´æ•°ç»„ï¼Œå­˜å‚¨å‚æ•°ã€‚ä¾‹å¦‚ï¼Œargv[0][0]æŒ‡å‘ç¬¬ä¸€ä¸ªæ•°ç»„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œargv[0]æ˜¯ç¬¬ä¸€ä¸ªæ•°ç»„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„åœ°å€ã€‚ ä¸€ä¸ªç®€å•çš„ç¨‹åºï¼Œæ‰“å°ç”¨æˆ·è¾“å…¥çš„å§“åå’Œå¹´é¾„ï¼š 12345678910#include &lt;iostream&gt;using namespace std;int main(int argc , char* argv[])&#123; cout&lt;&lt;&quot;the count of paramters: &quot;&lt;&lt; argc&lt;&lt;endl; cout&lt;&lt;&quot;the name of program: &quot;&lt;&lt; argv[0] &lt;&lt;endl; cout&lt;&lt;&quot;your name: &quot;&lt;&lt; argv[1]&lt;&lt;endl; cout&lt;&lt;&quot;your age: &quot;&lt;&lt; argv[2]&lt;&lt;endl;&#125; ç‰¹åˆ«çš„ï¼Œæ“ä½œç³»ç»Ÿå¯¹å¦‚ä½•å¤„ç†ç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚åŒå¼•å·å’Œåæ–œæ ï¼‰æœ‰ç‰¹æ®Šçš„è§„åˆ™ã€‚ åŒå¼•å·ï¼šä»¥åŒå¼•å·ä¼ é€’çš„å­—ç¬¦ä¸²è¢«è®¤ä¸ºæ˜¯åŒä¸€å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†ï¼ˆå³ä½¿å®ƒä»¬ä¹‹é—´å­˜åœ¨ç©ºæ ¼ï¼‰ï¼› 1./test.out &quot;royhuang cqu&quot; 25 æ–œæ ï¼šå¦‚æœè¦åŒ…å«æ–‡å­—åŒå¼•å·ï¼Œåˆ™å¿…é¡»åæ–œæ åŒå¼•å·ã€‚ 1./test.out \\&quot;royhuang\\&quot; 25 çœç•¥å·ï¼ˆå¯å˜å‚æ•°ï¼‰ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œåœ¨æˆ‘ä»¬çœ‹åˆ°çš„æ‰€æœ‰å‡½æ•°ä¸­ï¼Œå‡½æ•°å°†é‡‡ç”¨çš„å‚æ•°æ•°é‡å¿…é¡»äº‹å…ˆçŸ¥é“ã€‚ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿå°†å¯å˜æ•°é‡çš„å‚æ•°ä¼ é€’ç»™å‡½æ•°ä¼šå¾ˆæœ‰ç”¨ã€‚ 1return_type function_name(argument_list, ...); ä¾‹å¦‚ï¼šæˆ‘ä»¬è¦ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—ä¸€ç»„æ•´æ•°çš„å¹³å‡å€¼ã€‚ 1234567891011121314151617181920212223242526272829303132#include &lt;iostream&gt;#include &lt;cstdarg&gt; // needed to use ellipsisusing namespace std;double findAverage(int count, ...)&#123; double sum&#123; 0 &#125;; // é€šè¿‡é¢„å®šä¹‰å®va_listè·å–å‚æ•°åˆ—è¡¨ va_list list; // é€šè¿‡å®va_startå¯¹va_liståˆå§‹åŒ– va_start(list, count); // æ±‚å’Œ for (int arg&#123; 0 &#125;; arg &lt; count; ++arg) &#123; // é€šè¿‡å®va_argè·å–å…·ä½“å‚æ•° sum += va_arg(list, int); &#125; // ä½¿ç”¨å®Œåé€šè¿‡å®va_endæ¸…ç†va_list va_end(list); return sum / count;&#125;int main()&#123; cout &lt;&lt; findAverage(5, 1, 2, 3, 4, 5) &lt;&lt; &#x27;\\n&#x27;; cout &lt;&lt; findAverage(6, 1, 2, 3, 4, 5, 6) &lt;&lt; &#x27;\\n&#x27;;&#125; ä¸Šè¿°ç»“æœè¾“å‡ºï¼š 1233.5 çœ‹èµ·æ¥è¿™å¾ˆæ£’ã€‚ä½†æ˜¯æˆ‘ä»¬å¹¶ä¸æ¨èä½¿ç”¨çœç•¥å·ï¼š çœç•¥å·å¾ˆå±é™©ï¼šæ— æ³•åˆ¤æ–­ä¼ é€’çš„å‚æ•°ä¸ªæ•°æ˜¯æ­£ç¡® å‡è®¾ä½ åªä¼ é€’äº†5ä¸ªå‚æ•°ï¼Œè€Œå®é™…è¦æ±‚æ˜¯6ä¸ªï¼š 1findAverage(6, 1, 2, 3, 4, 5) åœ¨ä½œè€…çš„æœºå™¨ä¸Šï¼Œè¿™äº§ç”Ÿäº†å¥‡æ€ªçš„ç»“æœï¼š 1699773 va_arg(list, int) è¿”å›çš„å‰5ä¸ªå€¼æ˜¯æˆ‘ä»¬ä¼ å…¥çš„å€¼ã€‚å®ƒè¿”å›çš„ç¬¬ 6 ä¸ªå€¼ï¼ˆæ²¡æœ‰æŠ¥é”™ï¼‰æ˜¯ä¸€ä¸ªåƒåœ¾å€¼å †æ ˆã€‚ç»“æœï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªåƒåœ¾ç­”æ¡ˆã€‚ çœç•¥å·å¾ˆå±é™©ï¼šç±»å‹æ£€æŸ¥è¢«æš‚åœ å¦‚æœä½ å°è¯•ä¼ é€’ä¸€ä¸ªæµ®ç‚¹æ•°ï¼ˆ1.0ï¼‰ä½œä¸ºå‚æ•°ï¼š 1findAverage(6, 1.0, 2, 3, 4, 5, 6) ç»“æœä¸€å®šè®©ä½ å¤§åƒä¸€æƒŠï¼ˆè¿™æ˜¯ä»€ä¹ˆï¼Ÿè¿™ä¹ˆå¤§çš„æ•°å­—ï¼Ÿï¼‰ 11.78782e+008 è¿™æ˜¯å› ä¸ºva_arg(list, int) æŒ‡å®šé¢„æœŸç±»å‹æ˜¯int ï¼Œä½†æ˜¯æˆ‘ä»¬åˆä¼ é€’doubleç±»å‹å‚æ•°ã€‚è¿™å¯¼è‡´ï¼š va_arg çš„ç¬¬ä¸€æ¬¡è°ƒç”¨å°†åªè¯»å– double çš„å‰ 4 ä¸ªå­—èŠ‚ï¼ˆäº§ç”Ÿåƒåœ¾ç»“æœï¼‰ï¼› va_arg çš„ç¬¬äºŒæ¬¡è°ƒç”¨å°†è¯»å– double çš„å 4 ä¸ªå­—èŠ‚ï¼ˆäº§ç”Ÿå¦ä¸€ä¸ªåƒåœ¾ç»“æœï¼‰ï¼› å› æ­¤ï¼Œæˆ‘ä»¬çš„æ€»ä½“ç»“æœæ˜¯åƒåœ¾ã€‚ é™å®šçœç•¥å·ï¼šå‚æ•°æ•°é‡å’Œç±»å‹ å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥äººä¸ºçš„ä¼ é€’ä¸€ä¸ªâ€œè§£ç å™¨å­—ç¬¦ä¸²â€ï¼Œå®ƒå‘Šè¯‰ç¨‹åºå¦‚ä½•è§£é‡Šå‚æ•°ï¼ˆé™å®šäº†æ•°é‡å’Œç±»å‹ï¼‰ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;cstdarg&gt; // needed to use ellipsisusing namespace std;double findAverage(std::string decoder, ...)&#123; double sum&#123; 0 &#125;; va_list list; va_start(list, decoder); int count = 0; while (true) &#123; char codetype&#123; decoder[count] &#125;; switch (codetype) &#123; default: case &#x27;\\0&#x27;: va_end(list); return sum / count; case &#x27;i&#x27;: sum += va_arg(list, int); ++count; break; case &#x27;d&#x27;: sum += va_arg(list, double); ++count; break; &#125; &#125;&#125;int main()&#123; cout &lt;&lt; findAverage(&quot;iiiii&quot;, 1, 2, 3, 4, 5) &lt;&lt; &#x27;\\n&#x27;; cout &lt;&lt; findAverage(&quot;iiiiii&quot;, 1, 2, 3, 4, 5, 6) &lt;&lt; &#x27;\\n&#x27;; cout &lt;&lt; findAverage(&quot;iiddi&quot;, 1, 2, 3.5, 4.5, 5) &lt;&lt; &#x27;\\n&#x27;;&#125; çœ‹èµ·æ¥å¾ˆå¥½ï¼Œä½†æ˜¯ä¸€èˆ¬æƒ…å†µæˆ‘ä»¬å®Œå…¨æœ‰å…¶å®ƒåˆç†çš„è§£å†³æ–¹æ¡ˆã€‚æ¯”å¦‚ï¼šä¸ºä»€ä¹ˆä¸å°†... æ¢æˆä¸€ä¸ªæ•°ç»„ï¼Ÿ æ¢æˆå…¶å®ƒæ–¹æ¡ˆï¼šåŠ¨æ€æ•°ç»„ ä¸€èˆ¬æƒ…å†µï¼Œæˆ‘ä»¬éƒ½è¦é¿å…ä½¿ç”¨çœç•¥å·ï¼Œé€‰æ‹©å…¶å®ƒçš„æ–¹æ¡ˆã€‚æ¯”å¦‚è¿™é‡Œæˆ‘ä»¬å®Œå…¨å¯ä»¥ä¼ é€’ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ã€‚ 1double findAverage(int len, int* nums); 3.5 å‡½æ•°è¿”å›å€¼ åœ¨å‰é¢æˆ‘ä»¬å­¦ä¹ äº†æŒ‰å€¼ã€å¼•ç”¨å’Œåœ°å€å‘å‡½æ•°ä¼ é€’å‚æ•°ï¼Œå¦‚æœä½œä¸ºå‡½æ•°è¿”å›å€¼ä¼šæœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ æŒ‰å€¼è¿”å›çš„æ˜¯valueçš„å‰¯æœ¬ï¼Ÿ æŒ‰æŒ‡é’ˆè¿”å›çš„æ˜¯valueçš„åœ°å€ï¼Ÿå±€éƒ¨å˜é‡åœ¨é€€å‡ºå‡½æ•°è¢«é”€æ¯æ—¶ï¼Œå®ƒçš„åœ°å€ä¸æ˜¯æ²¡æœ‰äº†å—ï¼Ÿ æŒ‰å¼•ç”¨è¿”å›çš„æ˜¯valueçš„åˆ«åï¼Ÿå±€éƒ¨å˜é‡åœ¨é€€å‡ºå‡½æ•°è¢«é”€æ¯æ—¶ï¼Œåˆ«åè¿˜æœ‰ç”¨å—ï¼Ÿ è¯·çœ‹ä¸‹æ–‡åˆ†è§£ã€‚ 3.5.1 æŒ‰å€¼è¿”å› å’ŒæŒ‰å€¼ä¼ å‚ä¸€æ ·ï¼ŒæŒ‰å€¼è¿”å›å¾ˆå®‰å…¨ï¼Œå› ä¸ºå®ƒåªè¿”å›valueçš„å‰¯æœ¬ï¼Œä¸ç”¨æ‹…å¿ƒè¿”å›ä¹‹åvalueå‘ç”Ÿä»€ä¹ˆå˜åŒ–ã€‚ 1234567891011int doubleValue(int x)&#123; int value&#123; x * 2 &#125;; return value; &#125; int main()&#123; int res = doubleValue(1); return 0;&#125; å½“ç„¶ï¼Œå®ƒçš„ç¼ºç‚¹ä¹Ÿå’ŒæŒ‰å€¼ä¼ å‚ä¸€è‡´ï¼Œè¿”å›å¤§å‹ç»“æ„æˆ–ç±»æ—¶å¾ˆæ…¢ã€‚ä¸€èˆ¬å¸Œæœ›å€¼ä¸è¢«ä¿®æ”¹æˆ–è€…è¿”å›å±€éƒ¨å˜é‡æ—¶ä½¿ç”¨å€¼ä¼ é€’ã€‚ è¿”å›å±€éƒ¨å˜é‡ï¼Ÿå‡½æ•°è°ƒç”¨ç»“æŸæ—¶å±€éƒ¨å˜é‡ä¸å°±è¢«é”€æ¯äº†ï¼Œä¸ºä»€ä¹ˆè¿˜èƒ½è¿”å›ï¼Ÿ åœ¨å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­æ˜¯å±€éƒ¨å˜é‡è¢«å‹åˆ°æ ˆä¸­ï¼Œå½“å‡½æ•°é€€å‡ºæ—¶ï¼Œä¸´æ—¶å˜é‡å‡ºæ ˆï¼Œç¡®å®å·²ç»è¢«é”€æ¯ã€‚ ä½†å±€éƒ¨å˜é‡ä½œä¸ºè¿”å›å€¼æ—¶åœ¨å‡½æ•°è°ƒç”¨æ—¶ï¼Œæœ‰äº›ç‰¹åˆ«çš„å˜åŒ–ã€‚ Cè¯­è¨€é‡Œè§„å®šï¼š16bitç¨‹åºä¸­ï¼Œè¿”å›å€¼ä¿å­˜åœ¨axå¯„å­˜å™¨ä¸­ï¼Œ32bitç¨‹åºä¸­ï¼Œè¿”å›å€¼ä¿æŒåœ¨eaxå¯„å­˜å™¨ä¸­ï¼Œå¦‚æœæ˜¯64bitè¿”å›å€¼ï¼Œedxå¯„å­˜å™¨ä¿å­˜é«˜32bitï¼Œeaxå¯„å­˜å™¨ä¿å­˜ä½32bitã€‚ ç”±æ­¤å¯è§ï¼Œå‡½æ•°è°ƒç”¨ç»“æŸåï¼Œè¿”å›å€¼è¢«ä¸´æ—¶å­˜å‚¨åˆ°å¯„å­˜å™¨ä¸­ï¼Œå¹¶æ²¡æœ‰æ”¾åˆ°å †æˆ–æ ˆä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸å†…å­˜æ²¡æœ‰å…³ç³»äº†ã€‚ ä¸‹å›¾çš„æ±‡ç¼–ä»£ç ä¹Ÿè¡¨æ˜äº†è¿™ä¸€ç‚¹ï¼š è¿™ä¹Ÿå°±æ˜¯ä¸ºå•¥ï¼šä¸Šè¿°ä»£ç valueè™½ç„¶ä½œä¸ºè¿”å›å€¼ä½†ä¹Ÿæ˜¯å±€éƒ¨å˜é‡ï¼Œå‡½æ•°è°ƒç”¨ç»“æŸæ—¶ï¼Œä¾æ—§æ­£ç¡®è¿”å›äº†å…¶å€¼ã€‚ ç°åœ¨è®©æˆ‘ä»¬æ¥ç‰¹åˆ«å…³æ³¨ä¸€ä¸‹æŒ‰åœ°å€/å¼•ç”¨è¿”å›å±€éƒ¨å˜é‡çš„æƒ…å†µã€‚ 3.5.2 æŒ‰æŒ‡é’ˆè¿”å› å’ŒæŒ‰æŒ‡é’ˆä¼ é€’å‚æ•°ç±»ä¼¼ï¼ŒæŒ‰æŒ‡é’ˆè¿”å›çš„åªæ˜¯å°†value çš„åœ°å€å¤åˆ¶ä¸€ä»½è¿”å›ï¼Œæ‰€ä»¥é€Ÿåº¦å¾ˆå¿«ã€‚ å±é™©ï¼šè¿”å›å±€éƒ¨å˜é‡åœ°å€ å±€éƒ¨å˜é‡åœ¨å‡½æ•°é€€å‡ºæ—¶å°±ä¼šè¢«é”€æ¯ï¼Œå¦‚æœå°è¯•è¿”å›å±€éƒ¨å˜é‡çš„åœ°å€ï¼Œè¿™ç§è¡Œä¸ºéå¸¸çš„å±é™©ï¼ˆåœ°å€å¯¹åº”çš„å†…å­˜å¯èƒ½å·²è¢«é‡Šæ”¾ï¼‰ï¼š 12345678910111213141516#include &lt;iostream&gt;using namespace std;int* doubleValue(int i)&#123; int d_value = i*2; return &amp;d_value; // è¿”å›å±€éƒ¨å˜é‡åœ°å€&#125;int main()&#123; int value = 3; int* p = doubleValue(value); cout&lt;&lt;*p&lt;&lt;endl; return 0;&#125; è¾“å‡ºï¼š ç¼–è¯‘å™¨ï¼ˆVSCodeï¼‰ç»™å‡ºäº†è­¦å‘Šï¼Œè™½ç„¶è¾“å‡ºå€¼å¾ˆå¹¸è¿æ˜¯æ­£ç¡®çš„ã€‚ä½†è¿™æ˜¯å› ä¸ºå±€éƒ¨å˜é‡d_valueå¯¹åº”æ ˆç©ºé—´è¿˜å­˜åœ¨æ²¡æœ‰è¢«é‡æ–°åˆ†é…ä½¿ç”¨ï¼Œé€šè¿‡åœ°å€è·å–åˆ°äº†æ­£ç¡®çš„å€¼ã€‚ å¾ˆæ˜¾ç„¶è¿™ç§åšæ³•å¾ˆå±é™©ï¼Œä½ å¹¶ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™å°±è¿”å›çš„æ˜¯ä¸€ä¸ªåƒåœ¾å€¼ï¼Œå› æ­¤ä¸å»ºè®®ä½ å»å°è¯•ã€‚ é‚£æŒ‰æŒ‡é’ˆè¿”å›è¿˜æœ‰ä»€ä¹ˆç”¨é€”å—ï¼Ÿ æŒ‰æŒ‡é’ˆè¿”å›å¸¸ç”¨äºå°†åŠ¨æ€å†…å­˜è¿”å›ç»™è°ƒç”¨è€…ï¼Œå› ä¸ºåŠ¨æ€åˆ†é…çš„å†…å­˜ä¸ä¼šåœ¨å‡½æ•°é€€å‡ºæ—¶è¢«é”€æ¯ã€‚ 1234567891011int* allocateArray(int size)&#123; return new int[size]; // åŠ¨æ€åˆ†é…ç©ºé—´&#125;int main()&#123; int* array&#123; allocateArray(25) &#125;; delete[] array; return 0;&#125; ä¸è¿‡ï¼Œåˆ†é…ç©ºé—´ï¼ˆnew[]ï¼‰å’Œåˆ é™¤ç©ºé—´ï¼ˆdelete[]ï¼‰åœ¨ä»£ç ä¸åŒçš„å‡½æ•°ä¸­ï¼Œä½¿å¾—è°è´Ÿè´£åˆ é™¤èµ„æºå’Œæ˜¯å¦éœ€è¦åˆ é™¤èµ„æºå˜å¾—æœ‰ç‚¹éš¾ä»¥ç†è§£ã€‚ è¿™é‡Œæ›´å¥½çš„åšæ³•æ˜¯ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼Œç¬¬äºŒç« æœ‰ç›¸å…³ä»‹ç»ã€‚ å¦å¤–ä¸€ä¸ªç”¨é€”å°±æ˜¯è¿”å›æŒ‰åœ°å€ä¼ é€’çš„å‚æ•°ã€‚ 12345678910111213int* doubleValue(int* p_i)&#123; *p_i = (*p_i)*2; return p_i; // è¿”å›æŒ‡é’ˆå‚æ•°p_i&#125;int main()&#123; int value = 3; int* p = doubleValue(&amp;value); cout&lt;&lt;p&lt;&lt;endl; return 0;&#125; ä¸è¯´è¯´è¿”å›åœ°å€å…¶å®ƒç”¨é€”å—ï¼Ÿ æ—¢ç„¶æåˆ°è¿”å›åœ°å€å¾ˆå¿«ï¼Œé‚£ç”¨æ¥è¿”å›ç»“æ„ä½“ã€ç±»ä¸åº”è¯¥å¾ˆå¥½å—ï¼Ÿç„¶è€Œå¹¶ä¸æ˜¯ã€‚é“ç†åŒå‚æ•°ä¼ é€’ä¸­å°½é‡å»ºè®®ä½¿ç”¨å¼•ç”¨ä¸€æ ·ï¼š å¼•ç”¨æ›´å®‰å…¨ã€‚å¼•ç”¨ä¸€å®šä¼šè¢«åˆå§‹åŒ–ï¼Œä¸èƒ½ä¸ºç©ºã€‚ å¼•ç”¨æ•ˆç‡æ›´å¥½ã€‚æ¯”å¦‚å®ƒä¸ç”¨ç®¡ç†æŒ‡é’ˆææ„é‡Šæ”¾ä¹‹ç±»çš„é—®é¢˜ã€‚ 3.5.3 æŒ‰å¼•ç”¨è¿”å› ä¸æŒ‰æŒ‡é’ˆè¿”å›ç±»ä¼¼ï¼ŒæŒ‰å¼•ç”¨è¿”å›çš„å€¼ä¸èƒ½æ˜¯å±€éƒ¨å˜é‡ã€‚ å±é™©ï¼šä¸è¦è¿”å›å±€éƒ¨å¼•ç”¨ 1234567891011121314151617#include &lt;iostream&gt;using namespace std;int&amp; doubleValue(int i)&#123; int d_value = i*2; return d_value; // è¿”å›å±€éƒ¨å¼•ç”¨&#125;int main()&#123; int value = 3; int&amp; ref = doubleValue(value); cout&lt;&lt;ref&lt;&lt;endl; return 0;&#125; é“ç†åŒä¸ŠæŒ‰æŒ‡é’ˆè¿”å›ï¼Œé™¤éä½ æƒ³å“ªå¤©æ”¶åˆ°ä¸€ä¸ªå¯¹åƒåœ¾çš„å¼•ç”¨ã€‚ ä»€ä¹ˆæ—¶å€™æŒ‰å¼•ç”¨è¿”å› é™¤äº†ä¸Šè¿°è¯´çš„æŒ‰å€¼è¿”å›ã€æŒ‰æŒ‡é’ˆè¿”å›çš„æƒ…å†µï¼Œå…¶å®ƒæ—¶å€™ä¸€èˆ¬éƒ½å»ºè®®æŒ‰å¼•ç”¨è¿”å›ã€‚ æ¯”å¦‚è¿”å›å¤§å‹æ•°æ®ç»“æ„ã€ç±»ç­‰ï¼Œä»¥åŠè¿”å›æŒ‰å¼•ç”¨ä¼ é€’å‚æ•°æ—¶ã€‚ 1234567891011121314151617#include &lt;iostream&gt;using namespace std;int&amp; doubleValue(int&amp; i)&#123; i = i*2; return i; // è¿”å›æŒ‰å¼•ç”¨ä¼ é€’çš„å‚æ•°i&#125;int main()&#123; int value = 3; int&amp; ref = doubleValue(value); cout&lt;&lt;ref&lt;&lt;endl; return 0;&#125; 3.5.4 å°ç»“ ç¼–ç æ—¶é€‰æ‹©ä½•ç§æ–¹å¼è¿”å›å‚æ•°ï¼Ÿ å’Œé€‰æ‹©ä½•ç§æ–¹å¼ä¼ é€’å‚æ•°å¾ˆåƒï¼š ä¸æƒ³ä¿®æ”¹valueå°±æ˜¯æƒ³è¿”å›valueä¸€ä¸ªå‰¯æœ¬ï¼Œorè¿”å›å±€éƒ¨å˜é‡ï¼ˆè§ä¸‹èŠ‚è¿°ï¼‰ç”¨å€¼ä¼ é€’ï¼Œå¦åˆ™è½¬ä¸‹ä¸€æ­¥ï¼› éœ€è¦åŠ¨æ€å†…å­˜åˆ†é…æ—¶ã€è¿”å›æŒ‰åœ°å€ä¼ é€’çš„å‚æ•°ï¼Œé€‰æ‹©åœ°å€ä¼ é€’ï¼Œå¦åˆ™è½¬ä¸‹ä¸€æ­¥ï¼› å…¶å®ƒæƒ…å†µï¼Œä¸€èˆ¬é€‰ç”¨å¼•ç”¨ä¼ é€’ï¼ˆè¿”å¤§å‹ç»“æ„ä½“ã€ç±»ã€æŒ‰å¼•ç”¨ä¼ é€’çš„å‚æ•°ï¼‰ã€‚ 3.5.5 è¿”å›å¤šä¸ªå€¼ åœ¨3.4.3 ä»‹ç»äº†ä½¿ç”¨åœ°å€ä¼ é€’å‚æ•°ï¼Œè¾¾åˆ°ç±»ä¼¼è¿”å›å¤šä¸ªå‚æ•°çš„æ•ˆæœã€‚ä½†æ˜¯è¿™ç§åšæ³•æ¯”è¾ƒåˆ«æ‰­ï¼Œä¹Ÿä¸å¤Ÿä¼˜é›…ã€‚C++æœ‰ä¸¤ç§æ¯”è¾ƒå¥½çš„æ–¹å¼ï¼š ä½¿ç”¨ç»“æ„ä½“ å°†è¦è¿”å›çš„å¤šä¸ªå‚æ•°å®šä¹‰ä¸ºä¸€ä¸ªç»“æ„ä½“ï¼Œæœ€åç›´æ¥è¿”å›ç»“æ„ä½“ã€‚ 1234567891011121314151617181920212223#include &lt;iostream&gt;using namespace std;struct S&#123; int m_x; double m_y;&#125;;S add()&#123; S s; s.m_x++; s.m_y++; return s; // å€¼ä¼ é€’ï¼Œå¤åˆ¶ä¸€ä¸ªsçš„å‰¯æœ¬è¿”å›&#125;int main()&#123; S s = add(); cout &lt;&lt; s.m_x &lt;&lt; &#x27; &#x27; &lt;&lt; s.m_y &lt;&lt; &#x27;\\n&#x27;; return 0;&#125; ç›¸æ¯”è¿”å›æ•°ç»„ï¼Œç»“æ„ä½“å…è®¸å®šä¹‰æ›´å¤šç±»å‹çš„å€¼ï¼Œæ˜¾ç„¶æ›´çµæ´»ã€‚å…ƒç»„ std::tuple ä¹Ÿå¯ä»¥å®šä¹‰ä¸åŒç±»å‹å…ƒç´ åºåˆ—ã€‚ ä½¿ç”¨å…ƒç»„ è§ä¸‹ä¾‹ï¼Œä½¿ç”¨å…ƒç»„è¿”å›å¤šä¸ªä¸åŒç±»å‹çš„å€¼ã€‚ 12345678910111213141516#include &lt;tuple&gt;#include &lt;iostream&gt;using namespace std;tuple&lt;int, double&gt; returnTuple() &#123; return &#123; 5, 6.7 &#125;;&#125;int main()&#123; tuple s&#123; returnTuple() &#125;; cout &lt;&lt; get&lt;0&gt;(s) &lt;&lt; &#x27; &#x27; &lt;&lt; get&lt;1&gt;(s) &lt;&lt; &#x27;\\n&#x27;; return 0;&#125; 3.6 å†…è”å‡½æ•° å‡½æ•°ç»™æˆ‘ä»¬æä¾›äº†éå¸¸å¤šæœ‰ç”¨çš„åŠŸèƒ½ï¼š ä»£ç å¯ä»¥é‡å¤ä½¿ç”¨ï¼› æä¾›ç±»å‹æ£€æŸ¥ï¼Œç¡®ä¿å‚æ•°ç±»å‹åŒ¹é…ï¼ˆç±»ä¼¼å‡½æ•°çš„å®ä¸ä¼šï¼‰ï¼› ä¾¿äºé˜…è¯»ã€è°ƒè¯•ï¼› â€¦ 3.6.1 é‚£å‡½æ•°æœ‰ä»€ä¹ˆç¼ºç‚¹å—ï¼Ÿ å‡½æ•°çš„ä¸€ä¸ªä¸»è¦ç¼ºç‚¹æ˜¯æ¯æ¬¡è°ƒç”¨å‡½æ•°æ—¶ï¼Œéƒ½ä¼šå‘ç”Ÿä¸€å®šé‡çš„æ€§èƒ½å¼€é”€ï¼ˆä¸­æ–­ç­‰ï¼‰ï¼Œæ¯”å¦‚ï¼š CPU å¿…é¡»å­˜å‚¨å®ƒæ­£åœ¨æ‰§è¡Œçš„å½“å‰æŒ‡ä»¤çš„åœ°å€ï¼ˆå› æ­¤å®ƒçŸ¥é“ç¨åè¿”å›åˆ°å“ªé‡Œï¼‰ä»¥åŠå…¶ä»–å¯„å­˜å™¨ï¼› å¿…é¡»åˆ›å»ºæ‰€æœ‰å‡½æ•°å‚æ•°å¹¶èµ‹å€¼ï¼Œå¹¶ä¸”ç¨‹åºå¿…é¡»è·³è½¬åˆ°æ–°ä½ç½®ï¼› â€¦ å½“ç„¶ï¼Œå¯¹äºå¤§å‹å¤æ‚çš„å‡½æ•°ï¼Œå‡½æ•°è°ƒç”¨æ—¶é—´ç›¸æ¯”å‡½æ•°è¿è¡Œæ—¶é—´å¾®ä¸è¶³é“ã€‚ä½†æ˜¯å¯¹äºæ¯”è¾ƒè½»å·§çš„å‡½æ•°ï¼Œè‹¥æ˜¯é¢‘ç¹è°ƒç”¨ï¼Œå‡½æ•°è°ƒç”¨çš„æ—¶é—´ä¾¿å¾ˆå¯è§‚äº†ã€‚ æ­¤æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›è¿™äº›è½»å·§åˆè¢«ç»å¸¸è°ƒç”¨çš„å‡½æ•°ï¼Œæœ€å¥½ä¸å¥½è¿›è¡Œè¿™äº›å¤æ‚è°ƒç”¨ã€è¿”å›æ“ä½œã€‚ å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹ï¼Ÿç±»ä¼¼äºé¢„ç¼–è¯‘å¤´æ–‡ä»¶çš„æ›¿æ¢ï¼Œç›´æ¥æŠŠå‡½æ•°ä½“åµŒå…¥åˆ°æ¯ä¸€ä¸ªè°ƒç”¨äº†å®ƒçš„åœ°æ–¹ï¼Œé‡å¤åœ°åµŒå…¥ã€‚ è¯·çœ‹ä¸‹ä¾‹ï¼š 1234567891011inline int min(int x, int y)&#123; return x &gt; y ? y : x;&#125;int main()&#123; min(5, 6) ; min(3, 2) ; return 0;&#125; min(int,int) è¢«å£°æ˜ä¸ºå†…è”å‡½æ•°ã€‚åœ¨ç¼–è¯‘æ—¶ï¼Œç›¸å½“ç›´æ¥åœ¨ç›¸åº”è°ƒç”¨ä½ç½®æ›¿æ¢ä¸ºå®é™…min(int,int)å‡½æ•°ä½“ï¼š 123456int main()&#123; return 5 &gt; 6 ? 6 : 5 ; return 3 &gt; 2 ? 2 : 3 ; return 0;&#125; å°é—®é¢˜ï¼šå†…è”å‡½æ•°è¿™ä¹ˆæ£’ï¼Œé‚£æŠŠæ‰€æœ‰çš„å‡½æ•°å†™æˆå†…è”å‡½æ•°? å†…è”å‡½æ•°ä»¥ä»£ç å¤æ‚ä¸ºä»£ä»·ï¼Œå®ƒä»¥çœå»å‡½æ•°è°ƒç”¨çš„å¼€é”€æ¥æé«˜æ‰§è¡Œæ•ˆç‡ã€‚ åªé€‚åˆæ¯”è¾ƒç®€å•çš„å‡½æ•°ã€‚æ‰€ä»¥ä¸€æ–¹é¢å¦‚æœå†…è”å‡½æ•°ä½“å†…ä»£ç æ‰§è¡Œæ—¶é—´ç›¸æ¯”å‡½æ•°è°ƒç”¨å¼€é”€è¾ƒå¤§ï¼Œåˆ™æ²¡æœ‰å¤ªå¤§çš„æ„ä¹‰ï¼› å ç”¨å†…å­˜ç©ºé—´å¤šã€‚å¦ä¸€æ–¹é¢æ¯ä¸€å¤„å†…è”å‡½æ•°çš„è°ƒç”¨éƒ½è¦å¤åˆ¶ä»£ç ï¼Œæ¶ˆè€—æ›´å¤šçš„å†…å­˜ç©ºé—´ã€‚ å…¸å‹çš„ç©ºé—´æ¢æ—¶é—´ç­–ç•¥ã€‚ 3.6.2 å†…è”å‡½æ•°ä»€ä¹ˆæ—¶å€™è¢«æ›¿æ¢ï¼Ÿ åœ¨å‰é¢æˆ‘ä»¬çŸ¥é“ï¼Œå®ä¼šç”±é¢„å¤„ç†å™¨å¯¹å®è¿›è¡Œæ›¿ä»£ï¼ˆé¢„ç¼–è¯‘é˜¶æ®µï¼‰ã€‚è€Œå†…è”å‡½æ•°ä¹Ÿä¼šé€šè¿‡ç¼–è¯‘å™¨æ¥å®ç°å±•å¼€æ›¿æ¢ï¼ˆç¼–è¯‘é˜¶æ®µï¼‰ã€‚ ä¸ºäº†æ›´å¥½åœ°éªŒè¯æ‰€å­¦ï¼Œæˆ‘ä»¬é€šè¿‡åæ±‡ç¼–æ¥å¯¹æ¯”åŠ ä¸Šinlineå‰åä»£ç çš„ä¸åŒä¹‹å¤„å¯¹æ¯”ã€‚ å‡†å¤‡ä¸€ä¸ªæ›´ç®€å•çš„ä»£ç ï¼š 1234567891011inline int add(int y)&#123; y++;&#125;int main()&#123; int x = 0; add(x); return 0;&#125; ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶åè¿›è¡Œåæ±‡ç¼–ï¼š 12g++ -save-temps -fverbose-asm -g test.cpp -o test.outobjdump -S --disassemble test.out å…³é”®æ€§ä»£ç æˆªå›¾å¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°main å‡½æ•°ä½“å†…è¢«ç›´æ¥æ’å…¥äº†addå‡½æ•°çš„ä»£ç ï¼ˆç»¿è‰²æ¡†ï¼‰ã€‚ ä½†æ˜¯å¦‚æœaddå‡½æ•°æ˜¯éå†…è”å‡½æ•°ï¼š 12// é˜²æ­¢ç¼–è¯‘å™¨è‡ªå·±ä¼˜åŒ–ï¼Œå¼ºåˆ¶å£°æ˜ä¸ºéå†…è”å‡½æ•°int __attribute__ ((noinline)) add(int y) åæ±‡ç¼–ç»“æœå¦‚å›¾æ‰€ç¤ºï¼Œaddå‡½æ•°ä»£ç å¹¶æ²¡æœ‰æ’å…¥åˆ°mainå‡½æ•°ä½“å†…ã€‚ 3.6.3 å†…è”å‡½æ•°å’Œå®å¯¹æ¯” ä¸€ä¸ªå¸¸è€ƒçš„é¢è¯•é¢˜ï¼ŒåŠ æ·±ä¸‹å°è±¡ã€‚ æ›¿æ¢æ—¶æœºã€‚å®åœ¨é¢„ç¼–è¯‘æ—¶è¢«æ›¿æ¢ï¼Œå†…è”å‡½æ•°æ˜¯åœ¨è¿è¡Œæ—¶ï¼ˆè‡³å°‘ä¸æ˜¯é¢„ç¼–è¯‘æ—¶ï¼‰ï¼› è°ƒè¯•ã€‚å†…è”å‡½æ•°åœ¨è¿è¡Œæ—¶å¯è°ƒè¯•ï¼Œè€Œå®å®šä¹‰ä¸å¯ä»¥; å®‰å…¨ã€‚ç¼–è¯‘å™¨ä¼šå¯¹å†…è”å‡½æ•°çš„å‚æ•°ç±»å‹åšå®‰å…¨æ£€æŸ¥æˆ–è‡ªåŠ¨ç±»å‹è½¬æ¢ï¼ˆåŒæ™®é€šå‡½æ•°ï¼‰ï¼Œè€Œå®å®šä¹‰åˆ™ä¸ä¼šï¼› è®¿é—®ã€‚å†…è”å‡½æ•°å¯ä»¥è®¿é—®ç±»çš„æˆå‘˜å˜é‡ï¼Œå®å®šä¹‰åˆ™ä¸èƒ½ã€‚ 3.7 å‡½æ•°æŒ‡é’ˆ 3.7.1 å‡½æ•°å’ŒæŒ‡é’ˆ åœ¨å‰ä¸€èŠ‚ï¼Œé€šè¿‡åæ±‡ç¼–ï¼Œä½ ä¹Ÿçœ‹åˆ°äº†ï¼ˆåœ¨mainå‡½æ•°ä¸­ï¼‰è°ƒç”¨ï¼ˆaddï¼‰å‡½æ•°æ˜¯é€šè¿‡ä¸€ä¸ªåœ°å€ï¼Œä¾‹å¦‚ï¼š 1callq 40052d&lt;_Z3addi&gt; å…¶ä¸­ 40052d ä¾¿æ˜¯å‡½æ•°add çš„åœ°å€ã€‚è®©æˆ‘ä»¬å°è¯•æ‰“å°ä¸€ä¸‹å‡½æ•°åœ°å€ï¼š 123456789101112131415#include&lt;iostream&gt;using namespace std;int func(int a)&#123; cout&lt;&lt;a&lt;&lt;endl;&#125;int main()&#123; // å¦‚æœä½ çš„ç¼–è¯‘å™¨æ‰“å°å‡ºæ¥çš„åœ°å€æ˜¯1 // éœ€è¦è½¬æ¢ä¸ºç©ºæŒ‡é’ˆï¼Œå¼ºåˆ¶ç¼–è¯‘å™¨æ‰“å°å‡ºåœ°å€ï¼š(void*)func cout&lt;&lt;func&lt;&lt;endl; return 0;&#125; è¾“å‡ºï¼š 10x4007ad å¯ä»¥çœ‹åˆ°ï¼Œå°±åƒæŒ‡é’ˆä¸€æ ·ï¼Œfunc ä¿å­˜çš„ä¹Ÿæ˜¯ä¸€ä¸ªåœ°å€ï¼Œåªä¸è¿‡å®ƒä¿å­˜çš„æ˜¯å‡½æ•°åœ°å€ã€‚æœ‰å‡½æ•°åœ°å€å°±å¯ä»¥è°ƒç”¨å‡½æ•°ï¼Œæ­¤æ—¶å¯å°†å‡½æ•°å‹å…¥æ ˆï¼ˆ3.8èŠ‚è¯¦è¿°ï¼‰ã€‚ åƒæŒ‡é’ˆä¸€æ ·ï¼Ÿé‚£ä¹ˆå¯ä»¥åƒä¸‹é¢è¿™æ ·ï¼Œä½¿ç”¨int*æŒ‡é’ˆä¿å­˜å‡½æ•°æŒ‡é’ˆå—ï¼Ÿ 12int* p_func = func;p_func(3); å¾ˆä¸å¹¸æŠ¥é”™äº†ï¼š ä¸»è¦åŸå› æ˜¯å› ä¸ºï¼šè™½ç„¶func å’Œp_funcéƒ½æ˜¯æŒ‡é’ˆï¼Œä½†å®ƒä»¬ç±»å‹æ˜¯ä¸ä¸€æ ·çš„ã€‚å‡½æ•°func ç±»å‹æ˜¯int(*)() ,è€Œæˆ‘ä»¬ç»™å‡ºçš„æŒ‡é’ˆp_funcç±»å‹æ˜¯int* ï¼Œæ— æ³•èµ‹å€¼ã€‚å°±åƒä½ ä¸èƒ½å°†string* ç±»å‹æŒ‡é’ˆèµ‹å€¼ç»™int* ç±»å‹æŒ‡é’ˆã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬è‡³å°‘è¿˜å¾—è®©ä»–ä»¬å‚æ•°ç±»å‹ä¸€è‡´ï¼š 12int (*p_func)() = func;p_func(3); ä¾æ—§æŠ¥é”™äº†ï¼š è¿™æ˜¯å› ä¸ºå‡½æ•°æŒ‡é’ˆp_funcçš„ç±»å‹å‚æ•°å’Œå‡½æ•°funcä¸ä¸€è‡´ï¼Œç¼–è¯‘å™¨ç±»å‹æ£€æŸ¥æ—¶å‡ºé”™ã€‚ é¢˜å¤–è¯ï¼šä¸ºä»€ä¹ˆæ˜¯åœ¨è¿è¡Œæ—¶æŠ¥é”™ï¼Œè€Œä¸åœ¨ç¼–è¯‘ä»£ç æ—¶æŠ¥é”™ï¼Ÿ å› ä¸ºå‡½æ•°æŒ‡é’ˆæ˜¯åœ¨è¿è¡Œæ—¶æ‰ä¼šè¿›è¡Œè§£æã€‚ æˆ‘ä»¬è¿˜åº”è¯¥æŒ‡å®šå…¶å‚æ•°ç±»å‹ï¼š 12int (*p_func)(int) = func;p_func(3); ä¸€åˆ‡åˆ°æ­¤å°±å¥½èµ·æ¥äº†ã€‚p_funcæ­¤æ—¶è·å¾—äº†å‡½æ•°çš„åœ°å€ï¼Œå°±å¯ä»¥åƒfuncä¸€æ ·ä½¿ç”¨äº†ã€‚ ç‰¹åˆ«çš„ä¸‹é¢è¿™ç§æ–¹å¼ä¹Ÿæ˜¯æ­£ç¡®çš„ï¼š 12int (*p_func)(int) = &amp;func; // å‡½æ•°åå¤šäº†ä¸ª&amp;ï¼Œfuncå’Œ&amp;funcæ‰“å°å‡ºæ¥å…¶å®æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯å‡½æ•°åœ°å€p_func(3); 3.7.2 ä¸ºä»€ä¹ˆéœ€è¦å‡½æ•°æŒ‡é’ˆï¼šå›è°ƒå‡½æ•° è™½ç„¶ï¼Œå‰é¢æˆ‘ä»¬äº†è§£äº†æ€ä¹ˆå®šä¹‰å’Œä½¿ç”¨å‡½æ•°æŒ‡é’ˆã€‚ä½†ä¸ç¦è¿˜æ˜¯æœ‰ç–‘æƒ‘ï¼šä½¿ç”¨å‡½æ•°æŒ‡é’ˆp_func è°ƒç”¨å‡½æ•°funcä¸æ˜¯å¤šæ­¤ä¸€ä¸¾ï¼Ÿç›´æ¥ä½¿ç”¨funcä¸å°±å¥½äº†ï¼Ÿ æƒ³è±¡è¿™ä¹ˆä¸€ç§æƒ…å†µï¼š ä½ æœ‰ä¸€ä¸ªå‡½æ•°å‡å®šä¸ºfuncA , ä½†ä½ çš„åŠŸèƒ½éœ€è¦å¤–éƒ¨è‡ªå®šä¹‰ä¸€äº›è§„åˆ™ï¼Œè¿™äº›è§„åˆ™ç”¨æˆ·è‡ªå®šä¹‰çš„ï¼› æ‰€ä»¥ä½ éœ€è¦ä¸€ä¸ªâ€œå‚æ•°â€æ¥ä¿å­˜è¿™äº›ç‰¹å®šçš„è§„åˆ™ï¼Œè€Œè¿™ä¸ªè§„åˆ™æ˜¾ç„¶æ˜¯ä¸€ä¸ªé€»è¾‘é›†åˆâ€”â€”æ¢å¥è¯ï¼Œå®ƒåº”è¯¥æ˜¯ä¸ªå‡½æ•°ã€‚ é‚£ä¹ˆè¿™ä¸ªâ€œå‚æ•°â€æ˜¯ä¸æ˜¯åº”è¯¥æ˜¯å‡½æ•°ç±»å‹ï¼ŸæŸä¸ªå‡½æ•°å¦‚æœä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œå°±æ˜¯å›è°ƒå‡½æ•°ã€‚ æˆ‘ä»¬ä¸¾ä¸€ä¸ªæ›´å…·ä½“çš„ä¾‹å­ï¼š æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ’åºå‡½æ•°ï¼Œå°†æ•°å­—è¿›è¡Œæ’åºï¼šä½†æ’åºçš„è§„åˆ™ç”±ç”¨æˆ·è‡ªå®šä¹‰ï¼Œå®ƒå¯èƒ½æ˜¯ä»å¤§åˆ°å°æ’åˆ—ï¼Œä¹Ÿå¯èƒ½æ˜¯ä»å°åˆ°å¤§æˆ–è€…å…¶å®ƒâ€”â€”æ€»ä¹‹å®ƒå–å†³äºç”¨æˆ·æ€ä¹ˆå®šä¹‰â€œè§„åˆ™â€ã€‚ æˆ‘ä»¬ç»™å®šä¸€ä¸ªæ’åºå‡½æ•°å¦‚ä¸‹ï¼Œå®ƒæœ‰ä¸€ä¸ªå‚æ•°bool (*comparisonFcn)(int, int)ç”¨æ¥å®šä¹‰æ’åºè§„åˆ™ï¼š 123456789101112131415161718192021222324252627282930313233343536373839#include&lt;iostream&gt;#include &lt;functional&gt;using namespace std;// äº¤æ¢æ•°ç»„å€¼void swap(int* arr,int idx_i,int idx_j)&#123; int tmp = arr[idx_i]; arr[idx_i] = arr[idx_j]; arr[idx_j] = tmp;&#125;// è‡ªå®šä¹‰æ’åºè§„åˆ™bool myCompare(int a, int b)&#123; return a &gt; b? false: true;&#125;// å†’æ³¡æ’åºvoid bubbleSort(int* arr, int len, bool (*compare)(int,int))&#123; for(int i = 0; i &lt; len; i++) // å¤–è½®=n-1 // * j=0,æ¯æ¬¡éƒ½æ˜¯ä»å¤´å¼€å§‹æ¯”è¾ƒ for (int j=0; j&lt; len-i-1; j++ ) // å†…è½®=ä½™ä¸‹ä¹±åºæ•°-1 &#123; if (compare(arr[j],arr[j+1])) swap(arr,j,j+1); &#125;&#125;int main()&#123; int array[] = &#123;5,4,1,3,2&#125;; int len = sizeof(array)/sizeof(array[0]); bubbleSort(array,len,myCompare); for(int i=0; i&lt;len ;i++) cout&lt;&lt;array[i]&lt;&lt;endl; return 0;&#125; è¾“å‡ºï¼š 1234554321 æ˜¾ç„¶è¿™ç§æ–¹å¼ï¼Œä¼˜é›…ä¸”çµæ´»ï¼Œé™¤äº†å®šä¹‰çš„å‡½æ•°æŒ‡é’ˆå®åœ¨è¿‡äºä¸‘é™‹ã€‚å½“ç„¶åœ¨ä¸Šè¿°myCompare å‡½æ•°ä¸­ï¼Œä½ ç”šè‡³å¯ä»¥å®šä¹‰ä¸€äº›å¥‡æ€ªçš„è§„åˆ™ï¼š 1234567bool myCompare2(int a, int b)&#123; if ((a % 2 == 0) &amp;&amp; !(b % 2 == 0)) return false; else return true;&#125; ä½ å¯ä»¥å°è¯•è¾“å‡ºè¯•ä¸€è¯•ã€‚ 3.7.3 æ›´ä¼˜é›…åœ°ä½¿ç”¨å‡½æ•°æŒ‡é’ˆ å‰é¢æˆ‘ä»¬æåˆ°ï¼Œå‡½æ•°æŒ‡é’ˆçš„å£°æ˜å®åœ¨è¿‡äºä¸‘é™‹ï¼š 12bool (*compare)(int,int);bool (*)(int,int) compare; å¥½æ¶ˆæ¯ä½ ç°åœ¨æœ‰ä¸¤ç§æ–¹å¼è®©å®ƒçœ‹èµ·æ¥é¡ºçœ¼å¾ˆå¤šï¼š 1. ç±»å‹åˆ«å 12345678// ç±»å‹åˆ«åusing bool_compare = bool(*)(int,int);// å‡½æ•°ä¸­ä½¿ç”¨ï¼šå°±è¡Œä½¿ç”¨æ™®é€šçš„ç±»å‹ä¸€æ ·void bubbleSort(int* arr, int len, bool_compare compare)&#123; // ...&#125; 2. function std::functionæ˜¯æ ‡å‡†åº“ &lt;functional&gt; å¤´æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ã€‚ 1#include &lt;functional&gt; æˆ‘ä»¬å°†ä¹‹å‰çš„æ’åºå‡½æ•°ï¼Œé‡æ–°å®šä¹‰ä¸ºï¼š 1void bubbleSort(int* arr, int len, std::function&lt;bool(int,int)&gt;) åœ¨ä¸»å‡½æ•°ä¸­ï¼Œå¦‚æ­¤è°ƒç”¨ï¼š 123456789101112// å…¶ä½™å‡½æ•°ä»£ç åŒå‰ï¼Œç•¥int main()&#123; int array[] = &#123;5,4,0,1,3,2&#125;; int len = sizeof(array)/sizeof(array[0]); std::function&lt;bool(int,int)&gt; compare = myCompare; bubbleSort(array,len,compare); for(int i=0; i&lt;len ;i++) cout&lt;&lt;array[i]&lt;&lt;endl; return 0;&#125; è¾“å‡ºï¼š 123456543210 3. functionæ˜¯ä»€ä¹ˆï¼Ÿ æœ‰ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„äº‹æƒ…ï¼Œå‡½æ•°å®šä¹‰å¿…é¡»è¦å’Œä¸»å‡½æ•°ä¸­ä¼ é€’çš„å‚æ•°ç±»å‹ä¸€è‡´ï¼ˆéƒ½æ˜¯std::functionï¼‰ï¼Œä¸èƒ½å®šä¹‰ä¸ºæŒ‡é’ˆï¼š 1void bubbleSort(int* arr, int len, bool(*)(int,int) compare) å¦‚æœä½ è¿™ä¸ªæ—¶å€™è¿™æ ·è°ƒç”¨å‡½æ•°ï¼š 123// åœ¨mainä¸­std::function&lt;bool(int,int)&gt; compare = myCompare;bubbleSort(array,len,compare); ä¼šæŠ¥é”™ï¼šerror: cannot convert â€˜std::function&lt;bool(int, int)&gt;â€™ to â€˜bool (*)(int, int)â€™ã€‚ å› ä¸ºstd::functionæœ¬è´¨æ˜¯ä¸€ç§ç±»æ¨¡æ¿ï¼Œä¸æ˜¯å‡½æ•°ï¼Œæ˜¯å¯¹é€šç”¨ã€å¤šæ€çš„å‡½æ•°å°è£…ã€‚ é€šè¿‡std::functionå¯¹C++ä¸­å„ç§å¯è°ƒç”¨å®ä½“ï¼ˆæ™®é€šå‡½æ•°ã€Lambdaè¡¨è¾¾å¼ã€å‡½æ•°æŒ‡é’ˆã€ä»¥åŠå…¶å®ƒå‡½æ•°å¯¹è±¡ç­‰ï¼‰çš„å°è£…ï¼Œå½¢æˆä¸€ä¸ªstd::functionå¯¹è±¡ã€‚è®©æˆ‘ä»¬ä¸å†çº ç»“é‚£ä¹ˆå¤šçš„å¯è°ƒç”¨å®ä½“ï¼Œä¸€åˆ‡å˜çš„ç®€å•ç²—æš´ã€‚ æ¢å¥è¯è¯´ï¼Œstd::functionå°±æ˜¯å‡½æ•°çš„å®¹å™¨ï¼Œå®ƒè‡ªå·±æ˜¯ä¸ªç±»å¯¹è±¡ã€‚å½“æˆ‘ä»¬æœ‰äº†å‡½æ•°çš„å®¹å™¨ä¹‹åä¾¿èƒ½å¤Ÿæ›´åŠ æ–¹ä¾¿çš„å°†å‡½æ•°ã€å‡½æ•°æŒ‡é’ˆä½œä¸ºå¯¹è±¡è¿›è¡Œå¤„ç†ã€‚ æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒçš„åŸå‹ï¼š 12template&lt; class R, class... Args &gt;class function&lt;R(Args...)&gt; ç±»ä¸ºfunctionï¼ŒRæ˜¯è¿”å›å€¼ç±»å‹ï¼ŒArgsæ˜¯å‡½æ•°çš„å‚æ•°ç±»å‹ã€‚å†å›æƒ³æˆ‘ä»¬ä¹‹å‰çš„è°ƒç”¨ï¼š 1std::function&lt;bool(int,int)&gt; compare = myCompare; å¾ˆæ˜¾ç„¶ï¼Œæ­¤æ—¶compare æœ¬è´¨æ˜¯ä¸€ä¸ªfunctionç±»å¯¹è±¡ï¼Œåªä¸è¿‡é‡è½½äº†å…¶å‡½æ•°è°ƒç”¨æ“ä½œç¬¦()ï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ—¶å€™å¯ä»¥ç›´æ¥åƒå‡½æ•°ä¸€æ ·è°ƒç”¨ã€‚ ç‰¹åˆ«çš„ï¼Œfunctionç±»è¿˜é‡è½½äº†èµ‹å€¼æ“ä½œç¬¦=ï¼Œè¿™æ ·å¯ä»¥å°†å¯è°ƒç”¨çš„å‡½æ•°å®ä½“èµ‹å€¼ç»™å®ƒã€‚å…¶å‡½æ•°è°ƒç”¨æ“ä½œç¬¦é‡è½½å‡½æ•°é‡Œé—´æ¥çš„è°ƒç”¨èµ‹å€¼æ—¶ä¼ è¿›æ¥çš„è°ƒç”¨å®ä½“ã€‚ 4. ä½¿ç”¨auto ä½¿ç”¨autoå…³é”®å­—è‡ªåŠ¨æ¨æ–­ç±»å‹ï¼Œå¯æ›´ç®€ä¾¿åœ°ä½¿ç”¨å‡½æ•°æŒ‡é’ˆï¼š 1auto compare = myCompare; ä½†æ˜¯è¿™ä¸ªæ—¶å€™compareéšè—äº†ç±»å‹å…·ä½“å®šä¹‰ï¼Œå¦‚æœå¸Œæœ›è¯»è€…æ›´äº†è§£è¿™æ®µä»£ç æ„ä¹‰ï¼Œä½¿ç”¨typedef åº”è¯¥æ˜¯ä¸ªæ›´å¥½çš„åšæ³•ã€‚ 3.7.4 CPUçœ¼ä¸­çš„å‡½æ•°æŒ‡é’ˆï¼šå˜é‡ å»ç¹å½’çœŸï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹CPUçœ¼ä¸­çš„å‡½æ•°æŒ‡é’ˆæ˜¯ä»€ä¹ˆï¼Ÿ ç­”æ¡ˆå¯èƒ½ä¼šè®©ä½ æƒŠå¥‡ï¼šå®ƒåœ¨CPUçœ¼ä¸­ä¸è¿‡æ˜¯ä¸€ä¸ªè¿‡åº¦åŒ…è£…çš„å˜é‡è€Œå·²ï¼Œå°±åƒæŒ‡é’ˆä¸€æ ·ä¹Ÿåªæ˜¯å˜é‡ã€‚ å‚è€ƒï¼šCPUçœ¼é‡Œçš„â€œå‡½æ•°æŒ‡é’ˆâ€ï¼šè¿‡åº¦åŒ…è£…çš„â€œå˜é‡â€ - é˜¿å¸ƒçš„è§†é¢‘ - çŸ¥ä¹ 3.7.5 å°ç»“ ä»€ä¹ˆæ˜¯å‡½æ•°æŒ‡é’ˆï¼Ÿ å‡½æ•°æŒ‡é’ˆæ˜¯æŒ‡å‘ç‰¹æ®Šçš„æ•°æ®ç±»å‹ï¼ˆå³å‡½æ•°ï¼‰çš„æŒ‡é’ˆå˜é‡ã€‚ å‡½æ•°çš„åå­—ä¹Ÿå¯è§†ä¸ºæ˜¯å‡½æ•°çš„æŒ‡é’ˆï¼› ä½¿ç”¨é‡è½½åçš„() å³å‡½æ•°å() ä¾¿æ˜¯è°ƒç”¨ä¸€ä¸ªå‡½æ•°ã€‚ å®ƒåœ¨CPUçœ¼ä¸­ä¸è¿‡æ˜¯è¿‡åº¦åŒ…è£…çš„â€œå˜é‡â€ã€‚ å‡½æ•°æŒ‡é’ˆçš„å£°æ˜&amp;èµ‹å€¼æ–¹å¼ï¼Ÿ ä»¥ä¸‹ä¸ºä¾‹ã€‚ 12int (*p_func)(int) = func int (*p_func)(int) = &amp;func å‡½æ•°æŒ‡é’ˆçš„ç”¨é€”ï¼Ÿ å‡½æ•°æŒ‡é’ˆè¿˜å…è®¸å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å…¶ä»–å‡½æ•°ï¼Œå³å›è°ƒå‡½æ•°ã€‚ 3.8 æ ˆå’Œå †ğŸŒŸ åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬æ¥äº†è§£ç¨‹åºè¿è¡Œæ—¶ï¼Œå‡½æ•°è°ƒç”¨æ›´åº•å±‚çš„è¿‡ç¨‹ã€‚ä¸è¿‡åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸‹å†…å­˜å¸ƒå±€ã€‚ 3.8.1 å†…å­˜å¸ƒå±€ å†…å­˜å¸ƒå±€åˆè¯† 323232ä½ç³»ç»Ÿ4GBï¼ˆ232=4GB2^{32}=4GB232=4GBï¼‰ã€‚ ä¸‹å›¾å±•ç¤ºäº†ä¸€ä¸ªè™šæ‹Ÿè¿›ç¨‹ï¼ˆç¨‹åºï¼‰å†…å­˜ç©ºé—´è¿è¡Œæ—¶åˆ†å¸ƒå¸ƒå±€ï¼Œæ³¨æ„åˆ°æ­¤æ—¶è¿˜å¤šäº†å †&amp;æ ˆç”¨æ¥ç»™ç¨‹åºè¿è¡Œæ—¶è¿›è¡Œç©ºé—´åˆ†é…ã€‚ ä¸€ä¸ªç¨‹åºï¼ˆæ¯”å¦‚hello.outï¼‰æœ¬è´¨æ˜¯ç”±æ•°æ®æ®µã€ä»£ç æ®µã€.bssæ®µï¼ˆå›¾ä¸­å’Œæ•°æ®æ®µåˆå¹¶äº†ï¼‰ä¸‰ä¸ªç»„æˆçš„ã€‚ å¦å¤–ï¼Œé«˜åœ°å€çš„1GBï¼ˆWindowsé»˜è®¤2GBï¼‰ç©ºé—´åˆ†é…ç»™å†…æ ¸ï¼Œä¹Ÿç§°ä¸ºå†…æ ¸ç©ºé—´ï¼›å‰©ä¸‹çš„3GBåˆ†ç»™ç”¨æˆ·ï¼Œä¹Ÿç§°ç”¨æˆ·ç©ºé—´ï¼ˆç¨‹åºä½¿ç”¨çš„ï¼‰ã€‚ ä½œä¸ºç¨‹åºå‘˜ï¼Œæˆ‘ä»¬æ›´å…³æ³¨çš„æ˜¯ç”¨æˆ·ç©ºé—´ä¸­çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯ï¼š æ ˆï¼ˆStackï¼‰ï¼šå­˜å‚¨ä»£ç ä¸­è°ƒç”¨å‡½æ•°ã€å®šä¹‰å±€éƒ¨å˜é‡(ä½†ä¸åŒ…å«staticä¿®é¥°çš„å˜é‡)ã€ä¿å­˜çš„ä¸Šä¸‹æ–‡ç­‰ï¼› ç‰¹ç‚¹ï¼šå­˜æ”¾çš„æ•°æ®ä»æ ˆé¡¶ï¼ˆä½åœ°å€ï¼‰å‹å…¥ï¼Œä¹Ÿæ˜¯ä»æ ˆé¡¶ï¼ˆä½åœ°å€ï¼‰å¼¹å‡ºï¼Œæ‰€ä»¥æœ‰äººè¯´æ ˆæ˜¯å‘ä¸‹ç”Ÿé•¿çš„ã€‚å‡½æ•°é€€å‡ºæ—¶ï¼Œæ‰€æœ‰æ•°æ®ä¼šè‡ªåŠ¨é‡Šæ”¾å†…å­˜ï¼ˆå‡ºæ ˆï¼‰ã€‚ æ–‡ä»¶æ˜ å°„åŒºåŸŸ ï¼š æ ˆå’Œå †ä¸­é—´é‚£ä¸ªç©ºç™½åŒºåŸŸã€‚åŠ¨æ€åº“ã€å…±äº«å†…å­˜ç­‰æ˜ å°„ç‰©ç†ç©ºé—´çš„å†…å­˜ï¼Œä¸€èˆ¬æ˜¯ mmap å‡½æ•°æ‰€åˆ†é…çš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚ å †ï¼ˆHeapï¼‰ï¼šå­˜å‚¨é‚£äº›ç”Ÿå­˜æœŸä¸å‡½æ•°è°ƒç”¨æ— å…³çš„æ•°æ®ï¼Œå¦‚åŠ¨æ€åˆ†é…çš„å†…å­˜ã€‚å †ï¼ˆåŠ¨æ€ï¼‰åˆ†é…çš„æ¥å£é€šå¸¸æœ‰malloc()ã€calloc()ã€realloc()ã€newç­‰ã€‚ ç‰¹ç‚¹ï¼šç›¸å¯¹äºæ ˆï¼Œå †æ˜¯å‘ä¸Šç”Ÿé•¿çš„ï¼›å †ç©ºé—´éœ€è¦ä¸»åŠ¨é‡Šæ”¾ï¼Œå¦åˆ™ä¼šä¾ç„¶å­˜åœ¨ã€‚ .bssæ®µï¼šå…¨ç§°Block Started by Symbolï¼Œä¹Ÿå°±æ˜¯æœªè¢«åˆå§‹åŒ–çš„å…¨å±€å˜é‡ã€é™æ€å˜é‡çš„å†…å®¹çš„ä¸€å—å†…å­˜åŒºåŸŸã€‚æ¯”å¦‚ï¼š 12345static int a; // aä¿å­˜.bssæ®µint b; // bä¿å­˜åœ¨.bssæ®µint main()&#123;&#125; æ•°æ®æ®µï¼ˆ.dataï¼‰ï¼šä¿å­˜å…¨å±€å˜é‡ã€å¸¸é‡ã€é™æ€å˜é‡çš„å†…å®¹çš„ä¸€å—å†…å­˜åŒºåŸŸï¼ŒåŒºåˆ«.bssæ®µåœ¨äºå˜é‡å·²ç»è¢«åˆå§‹åŒ–ã€‚æ¯”å¦‚ï¼š 1234567static int a = 1; // aä¿å­˜åœ¨.dataæ®µä¸­é™æ€åŒºï¼Œ1æ˜¯æ–‡å­—å¸¸é‡åœ¨ä»£ç åŒºint b = 2; // bä¿å­˜åœ¨.dataæ®µä¸­å…¨å±€åŒºï¼Œ2æ˜¯æ–‡å­—å¸¸é‡åœ¨ä»£ç åŒºchar* str = &quot;royhuang&quot;; // strä¿å­˜åœ¨æ ˆä¸Šï¼Œ&quot;royhuang&quot;æ˜¯å­—ç¬¦å¸¸é‡ï¼Œä¿å­˜åœ¨å¸¸é‡åŒºconst int c = 3; // cä¿å­˜åœ¨.dataæ®µä¸­å¸¸é‡åŒºï¼Œ3æ˜¯æ–‡å­—å¸¸é‡åœ¨ä»£ç åŒºint main()&#123;&#125; ä»£ç æ®µï¼ˆ.text &amp; .initï¼‰ï¼š .text ç”¨äºå­˜æ”¾æ•´ä¸ªç¨‹åºä¸­çš„ä»£ç ï¼Œ .init ç”¨äºå­˜æ”¾ç³»ç»Ÿä¸­ç”¨æ¥åˆå§‹åŒ–å¯åŠ¨ä½ çš„ç¨‹åºçš„ä¸€æ®µä»£ç  ã€‚ ä¸€ä¸ªç¨‹åºæœ¬è´¨å…¶å®éƒ½æ˜¯ç”±.bssæ®µã€æ•°æ®æ®µã€ä»£ç æ®µä¸‰ä¸ªç»„æˆçš„ã€‚ é™æ€å­˜å‚¨åŒºæ¢è®¨ å‰é¢æˆ‘ä»¬è®¤è¯†åˆ°C++å†…å­˜å¸ƒå±€åˆ†ä¸ºï¼š å †ï¼šå­˜æ”¾åŠ¨æ€åˆ†é…çš„å†…å­˜ï¼› æ ˆï¼šå­˜æ”¾ä¸´æ—¶åˆ†é…å±€éƒ¨å˜é‡ï¼› ä»£ç æ®µï¼šå­˜å‚¨ç¨‹åºæŒ‡ä»¤ï¼Œä¹Ÿå¯èƒ½åŒ…å«åªè¯»çš„å¸¸é‡ï¼ˆå¦‚æ–‡å­—å¸¸é‡ï¼‰ï¼› .bssæ®µå’Œæ•°æ®æ®µï¼šåˆ†åˆ«å­˜å‚¨åˆå§‹åŒ–å’Œæœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ï¼Œæ•°æ®æ®µè¿˜å¯ä»¥å­˜å‚¨å¸¸é‡ã€‚ .bssæ®µå’Œæ•°æ®æ®µä¸»è¦åŒºåˆ«åœ¨äºæ˜¯å¦åˆå§‹åŒ–ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸åšåŒºåˆ†ï¼Œç»Ÿç§°ä¸ºé™æ€å­˜å‚¨åŒºã€‚ æ ¹æ®.bssæ®µå’Œæ•°æ®æ®µå­˜å‚¨çš„æ•°æ®ç±»å‹ï¼Œé™æ€å­˜å‚¨åŒºåˆå¯åˆ†ä¸ºï¼š é™æ€å˜é‡åŒºï¼Œå­˜å‚¨é™æ€å˜é‡ å…¨å±€å˜é‡åŒºï¼Œå­˜å–å…¨å±€å˜é‡ å¸¸é‡åŒºï¼Œå­˜å‚¨å­—ç¬¦ä¸²å¸¸é‡å’Œå…¨å±€å¸¸é‡ï¼ˆå±€éƒ¨å¸¸é‡å­˜å‚¨åœ¨æ ˆä¸­ï¼‰ï¼Œåªè¯» ç¤ºä¾‹ä»£ç ï¼š 1234567891011121314151617// aä¿å­˜åœ¨é™æ€å˜é‡åŒºï¼Œ1æ˜¯æ–‡å­—å¸¸é‡åœ¨ä»£ç åŒºï¼Œæ­¤æ—¶aå€¼ä¸º1static int a = 1; // bä¿å­˜åœ¨å…¨å±€å˜é‡åŒºï¼ˆæ­¤æ—¶å€¼ä¸º2ï¼‰ï¼Œ2æ˜¯æ–‡å­—å¸¸é‡åœ¨ä»£ç åŒºï¼Œæ­¤æ—¶bå€¼ä¸º2int b = 2; // cä¿å­˜åœ¨å¸¸é‡åŒºï¼Œ3æ˜¯æ–‡å­—å¸¸é‡åœ¨ä»£ç åŒºï¼Œæ­¤æ—¶cçš„å€¼ä¸º3const int c = 3; // strä¿å­˜åœ¨å…¨å±€åŒºï¼Œ&quot;royhuang&quot;æ˜¯å­—ç¬¦å¸¸é‡ï¼Œä¿å­˜åœ¨å¸¸é‡åŒºï¼Œæ­¤æ—¶stråªæ˜¯ä¿å­˜&quot;royhuang&quot;åœ°å€char* str1 = &quot;royhuang&quot;; // stræ˜¯æ•°ç»„ï¼Œä¿å­˜åœ¨å…¨å±€åŒºï¼Œæ­¤æ—¶strå¤åˆ¶äº†å­—ç¬¦ä¸²å¸¸é‡&quot;hwh&quot;ï¼Œæ‰€ä»¥å€¼ä¸º&quot;hwh&quot;char str2[] = &quot;hwh&quot;;int main()&#123; int d = 4; // dåœ¨æ ˆä¸Šï¼Œ4æ˜¯æ–‡å­—å¸¸é‡åœ¨ä»£ç åŒºï¼Œdçš„å€¼åœ¨ã€è¿è¡Œæ—¶ã€‘è¢«èµ‹å€¼ä¸º4 const int f = 5; // åŒºåˆ†cï¼Œæ­¤æ—¶fæ˜¯å±€éƒ¨å˜é‡ä¿å­˜åœ¨æ ˆä¸Šï¼Œfåœ¨ã€è¿è¡Œæ—¶ã€‘è¢«èµ‹å€¼ä¸º5 static int g = 6; // åŒa char* str3 = &quot;roy&quot;; // åŒstr1ï¼Œä¸è¿‡æ­¤æ—¶str3ä¿å­˜åœ¨æ ˆä¸Š,&quot;roy&quot;åœ¨å¸¸é‡åŒº&#125; å¯¹åº”æ±‡ç¼–ä»£ç ä¹ŸéªŒè¯äº†è¿™ä¸€ç‚¹ï¼ˆé™æ€å˜é‡åŒºå†…å®¹æ±‡ç¼–ä»£ç æœªå±•ç¤ºï¼‰ï¼š è¿˜åº”æ³¨æ„åˆ°ï¼š å­˜å‚¨åœ¨é™æ€å­˜å‚¨åŒºçš„å˜é‡çš„å€¼ï¼Œåœ¨ç¼–è¯‘æœŸé—´å°±ç¡®å®šäº†ï¼› è€Œå †ã€æ ˆä¸Šå˜é‡çš„å€¼æ˜¯è¿è¡Œæ—¶åŠ¨æ€åˆ†é…çš„ã€‚ ç»§ç»­åˆ†æä¸‹é¢è¿™ä¸ªé—®é¢˜ï¼š 1234567int main()&#123; char str[] = &quot;royhuang&quot;; str[0] = &#x27;h&#x27;; // ok char* pstr = &quot;royhuang&quot;; pstr[0] = &#x27;h&#x27;; // errorï¼Œä¸ºä»€ä¹ˆï¼Ÿ&#125; char str[] = &quot;royhuang&quot; ï¼Œstr ä¿å­˜åœ¨æ ˆä¸Šï¼Œè¿è¡Œæ—¶å°†å¸¸é‡åŒºçš„å­—ç¬¦ä¸²å¸¸é‡â€œroyhuangâ€ï¼Œèµ‹å€¼ç»™äº†æ•°ç»„str ï¼Œä¿®æ”¹stræ•°ç»„æˆå‘˜æ˜¯åˆæ³•çš„ï¼› char* pstr = &quot;royhuang&quot; ï¼Œpstr ä¿å­˜åœ¨æ ˆä¸Šï¼Œä½†è¿è¡Œæ—¶åªæ˜¯å°†å­—ç¬¦ä¸²å¸¸é‡â€œroyhuangâ€çš„åœ°å€ï¼Œèµ‹å€¼ç»™äº†æŒ‡é’ˆpstr ï¼Œå°è¯•ä¿®æ”¹å¸¸é‡åŒºçš„æˆå‘˜æ˜¯éæ³•çš„ï¼ 3.8.2 å‡½æ•°è°ƒç”¨è¿‡ç¨‹ åœ¨è¿™ä¸€å°èŠ‚æˆ‘ä»¬æ¥æ·±å…¥æ¢è®¨ä¸‹å‡½æ•°è°ƒç”¨æ—¶çš„åŸç†å’Œè¿‡ç¨‹ã€‚ æ ˆå¸§ å‰é¢æˆ‘ä»¬è¯´åˆ°ï¼Œæ ˆæ˜¯ä½äºè¿›ç¨‹çš„é«˜åœ°å€ä½ç½®ï¼Œä¸”æ ˆé¡¶æ˜¯å‘ä¸‹å¢é•¿çš„ã€‚åœ¨å‡½æ•°è°ƒç”¨æ—¶ï¼Œæ ˆä¼šä¸“é—¨ä½¿ç”¨ä¸€ä¸ªç‹¬ç«‹çš„æ ˆå¸§ä¿å­˜å‡½æ•°è°ƒç”¨éœ€è¦çš„æ‰€æœ‰ä¿¡æ¯ã€‚è¿™å¯¹åé¢ç†è§£å‡½æ•°æ‰§è¡Œè¿‡ç¨‹å¾ˆå…³é”®ã€‚ ä¸€ä¸ªå…¸å‹çš„æ ˆå¸§å¦‚ä¸‹ï¼š æ ˆå¸§ä¿å­˜çš„å†…å®¹ï¼šæ¯ä¸€æ¬¡å‡½æ•°è°ƒç”¨éœ€è¦çš„å‡½æ•°è¿”å›åœ°å€ã€å‚æ•°ã€ä¸´æ—¶å˜é‡ã€ä¿å­˜çš„ä¸Šä¸‹æ–‡ç­‰ï¼› espå’Œebp ï¼šéå¸¸é‡è¦çš„ä¸¤ä¸ªå¯„å­˜å™¨ï¼Œè®°å½•äº†å½“å‰æ ˆå¸§çš„æ ˆé¡¶ä½ç½®å’Œæ ˆåº•ä½ç½®ï¼ˆå¯¹äºX86-64å¹³å°ä¸Šæ¥è¯´ï¼Œå¯¹åº”çš„å¯„å­˜å™¨åˆ™ä¸ºrspåŠrbpï¼‰ ã€‚ å¯ä»¥çœ‹åˆ°åœ¨ä¸Šå›¾å‹æ ˆï¼ˆpushï¼‰ä¼šä½¿å¾—espå‘ä¸‹ç§»åŠ¨ï¼ˆåœ°å€å˜å°ï¼‰ã€‚ æ±‡ç¼–åˆ†æ æˆ‘ä»¬å‡†å¤‡çš„éªŒè¯ä»£ç ï¼š 1234567891011121314#include &lt;iostream&gt;using namespace std;int foo(int sp1, int sp2) &#123; int res = sp1 + sp2; return res;&#125;int main() &#123; int res = foo(1, 2); return 0;&#125; åæ±‡ç¼–çš„ä»£ç åŠåˆ†æå¦‚ä¸‹ã€‚ mainå‡½æ•°æ±‡ç¼–ä»£ç  1234567891011main: pushq %rbp # å¯„å­˜å™¨rbpä¿å­˜ä¸Šä¸€ä¸ªæ ˆå¸§æ ˆåº•ä½ç½® movq %rsp, %rbp # å¯„å­˜å™¨rspæŒ‡å‘æ ˆé¡¶ä½ç½®ï¼Œç”¨rspå†…å®¹åˆå§‹åŒ–å¯„å­˜å™¨rbq subq $16, %rsp movl $2, %esi # ç«‹å³æ•°å¯»å€ï¼Œå°†fooç¬¬äºŒä¸ªå‚æ•°å­˜å…¥å¯„å­˜å™¨esiä¸­ movl $1, %edi # å°†fooçš„ç¬¬ä¸€ä¸ªå‚æ•°å­˜å…¥å¯„å­˜å™¨ediä¸­ call _Z3fooii # è°ƒç”¨fooï¼Œè½¬åˆ°åˆ†æfooå‡½æ•°æ±‡ç¼–ä»£ç ï¼Œæ­¤æ—¶callè¿˜å°†ä¸‹ä¸€æ¡æŒ‡ä»¤å½“åšè¿”å›åœ°å€å‹å…¥åˆ°æ ˆä¸­ movl %eax, -4(%rbp) # è¿”å›å‡½æ•°ç»“æœç»™resï¼Œå®ƒçš„åœ°å€æ˜¯-4(%rbp) movl $0, %eax # eaxè¢«ç½®ä¸º0ï¼Œä¸»å‡½æ•°é€€å‡º leave ret fooå‡½æ•°æ±‡ç¼–ä»£ç  123456789101112_Z3fooii: pushq %rbp # ä¿å­˜mainçš„æ ˆåº•åœ°å€rbpï¼Œç”¨äºè¿”å› movq %rsp, %rbp # é‡ç½®fooå‡½æ•°çš„æ ˆå¸§ movl %edi, -20(%rbp) # å‚æ•°1å…¥æ ˆ movl %esi, -24(%rbp) # å‚æ•°2å…¥æ ˆ movl -20(%rbp), %edx # å‚æ•°1å­˜å…¥edx movl -24(%rbp), %eax # å‚æ•°2å­˜å…¥eax addl %edx, %eax # åŠ æ³•è¿ç®—ï¼Œç»“æœä¿å­˜åœ¨eaxä¸­ movl %eax, -4(%rbp) # å°†è¿ç®—ç»“æœèµ‹å€¼ç»™result,å®ƒçš„ä½ç½®ä¸ºrbp-4 movl -4(%rbp), %eax # å°†resultèµ‹å€¼ç»™eaxï¼Œeaxä¸ºå‡½æ•°è¿”å›å€¼ popq %rbp # è·³è½¬åˆ°mainå‡½æ•°ï¼ˆæ ˆåº•ï¼‰ï¼Œç„¶åè¿˜éœ€è¦è·³åˆ°è¿”å›åœ°å€ ret æ ˆå‹å…¥é¡ºåºï¼šå½“å‰æ ˆå¸§çŠ¶æ€ä¿¡æ¯ï¼ˆå¦‚rbpï¼‰â€”&gt; å½“å‰å‡½æ•°çš„å‚æ•°ï¼ˆé€†åºï¼‰â€”&gt;å½“å‰å‡½æ•°çš„å±€éƒ¨å˜é‡ç­‰â€”&gt;â€¦â€”&gt;é€€å‡ºã€‚ åœ¨è°ƒç”¨å‡½æ•°ï¼ˆmainï¼‰å‡½æ•°ä¸­ ä¿å­˜ä¸Šä¸€ä¸ªæ ˆå¸§çš„rbpï¼Œé‡ç½®mainæ ˆå¸§çš„rbpï¼› æŒ‰ç…§ä¸è¢«è°ƒå‡½æ•°fooçš„å½¢å‚é¡ºåºç›¸åçš„é¡ºåºå‹å…¥æ ˆä¸­ï¼ˆåœ¨æœ¬ä¾‹æ˜¯ç›´æ¥å­˜å…¥å¯„å­˜å™¨ä¸­ï¼Œå› ä¸ºç›´æ¥ä¼ å…¥å¸¸é‡foo(1,2)ï¼‰ï¼› callæŒ‡ä»¤è°ƒç”¨ï¼š è°ƒç”¨è€…å‡½æ•°ï¼ˆmainï¼‰ä½¿ç”¨callæŒ‡ä»¤è°ƒç”¨è¢«è°ƒå‡½æ•°ï¼ˆfooï¼‰ï¼Œä¸ºfooå‡½æ•°åˆ†é…æ ˆå¸§ç©ºé—´ï¼Œå¹¶æŠŠcallæŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€å½“æˆè¿”å›åœ°å€å‹å…¥æ ˆä¸­ï¼ˆè¿™ä¸ªå‹æ ˆæ“ä½œæ˜¯éšå«çš„ï¼‰ åœ¨è¢«è°ƒç”¨å‡½æ•°ï¼ˆfooï¼‰å‡½æ•°ä¸­ ä¿å­˜mainæ ˆå¸§çš„rbpï¼Œé‡ç½®fooæ ˆå¸§çš„rbpï¼› è¢«è°ƒå‚æ•°sp1ã€sp2å‹å…¥æ ˆä¸­ï¼› æ‰§è¡Œfooå‡½æ•°ä½“ä¸­ä»£ç ï¼Œè¿”å›å€¼reså…¥æ ˆï¼Œç„¶åä¿å­˜åœ¨å¯„å­˜å™¨eaxä¸­ ï¼› æ‰§è¡Œå®Œæ¯•ï¼Œæ ˆå¸§æ‰€æœ‰æ•°æ®å‡ºæ ˆï¼› popq %rbp å’Œ ret è·³è½¬mainä¸­callæŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€ç»§ç»­æ‰§è¡Œã€‚ å›åˆ°è°ƒç”¨å‡½æ•°ï¼ˆmainï¼‰å‡½æ•°ä¸­ è¿”å›å€¼resï¼ˆå¯„å­˜å™¨eaxä¸­å†…å®¹ï¼‰å‹å…¥æ ˆï¼› ç»§ç»­mainå‡½æ•°ä¸­åç»­ä»£ç æ‰§è¡Œï¼› mainå‡½æ•°é€€å‡ºã€‚ 3.8.3 malloc/free åŸç† ä»é™æ€åˆ†é…è¯´èµ· æˆ‘ä»¬ä¹‹å‰æ¥è§¦æ•°æ®é€šå¸¸ä¿å­˜åœ¨ï¼š æ ˆï¼Œæ¯”å¦‚å‡½æ•°å†…éƒ¨å±€éƒ¨å˜é‡ï¼› æ•°æ®æ®µï¼Œé™æ€åŒºã€å…¨å±€åŒºã€å¸¸é‡åŒºï¼› .bssæ®µï¼Œæœªåˆå§‹åŒ–çš„æ•°æ®ã€‚ ä¸Šé¢çš„æ•°æ®æœ‰ä¸¤ä¸ªå…±åŒç‚¹ï¼š å˜é‡/æ•°ç»„çš„å¤§å°å¿…é¡»åœ¨ç¼–è¯‘æ—¶çŸ¥é“ã€‚ å†…å­˜åˆ†é…å’Œé‡Šæ”¾è‡ªåŠ¨å‘ç”Ÿï¼ˆå½“å˜é‡è¢«å®ä¾‹åŒ–/é”€æ¯æ—¶ï¼‰ã€‚ å¤§å¤šæ•°æ—¶å€™ï¼Œè¿™å¾ˆå¥½ã€‚é‚£ä»€ä¹ˆæ—¶å€™åœ¨å †ä¸Šåˆ†é…å†…å­˜ï¼Ÿ å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å †ä¸ŠåŠ¨æ€ç”³è¯·/é‡Šæ”¾å†…å­˜ã€‚ ä¸çŸ¥é“åˆ†é…å¯¹è±¡çš„å¤§å°ã€‚æ¯”å¦‚æˆ‘ä»¬æƒ³åˆ›å»ºå£°æ˜ä¸€ä¸ªæ•°ç»„ï¼Œä½†æ˜¯äº‹å…ˆå¹¶ä¸çŸ¥é“æ•°ç»„çš„å¤§å°ï¼ˆç¨åæ‰èƒ½çŸ¥é“ï¼‰ã€‚è¿™ä¸ªæ—¶å€™æ— æ³•ä½¿ç”¨é™æ€æ•°ç»„åˆ†é…ï¼Œå› ä¸ºå®ƒå¿…é¡»æŒ‡å®šæ•°ç»„çš„å¤§å°ï¼› åˆ†é…çš„å¯¹è±¡å¤ªå¤§ã€‚æ ˆç­‰ç©ºé—´ä¸å¤Ÿã€‚ åœ¨Cä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸ä½¿ç”¨malloc/freeåœ¨å †ä¸Šåˆ†é…å’Œé‡Šæ”¾å†…å­˜ï¼š 12345// åˆ†é…ï¼šå¤§å°ä¸º4çš„intæ•°ç»„int* array ;array = (int*)malloc(4*sizeof(int));// é‡Šæ”¾free(array); mallocå’Œfreeå‡½æ•°åº•å±‚æ˜¯å¦‚ä½•å»å®ç°çš„ï¼Œå¦‚ä½•åœ¨å †ä¸Šåˆ†é…å†…å­˜çš„ï¼Ÿ ä»å †å—è¯´èµ· ä¸»è¦å‚è€ƒï¼šmalloc çš„å®ç°åŸç† å†…å­˜æ±  mmap sbrk é“¾è¡¨ ä»€ä¹ˆæ˜¯å †ï¼Ÿ C++ä½¿ç”¨åŠ¨æ€å†…å­˜åˆ†é…å™¨ï¼ˆä¸‹ç®€ç§°åˆ†é…å™¨ï¼‰è¿›è¡ŒåŠ¨æ€å†…å­˜åˆ†é…ï¼Œå®ƒç»´æŠ¤ä¸€ä¸ªè¿›ç¨‹çš„è™šæ‹Ÿå†…å­˜åŒºåŸŸï¼Œä¹Ÿå°±æ˜¯å †ã€‚ åˆ†é…å™¨çœ¼é‡Œçš„å †æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•è¿›è¡Œç®¡ç†ï¼Ÿ åˆ†é…å™¨å°†å †è§†ä¸ºä¸€ç»„ä¸åŒå¤§å°çš„å—ï¼ˆblockï¼‰çš„é›†åˆæ¥ç»´æŠ¤ã€‚æ¯ä¸ªå—å°±æ˜¯ä¸€ä¸ªè¿ç»­çš„è™šæ‹Ÿå†…å­˜ç‰‡ï¼ˆchunkï¼‰,è¦ä¹ˆæ˜¯å·²åˆ†é…çš„ï¼Œè¦ä¹ˆæ˜¯ç©ºé—²çš„ã€‚ chunkç»“æ„å›¾ï¼š æ­£åœ¨ä½¿ç”¨çš„chunkæ ‡è¯†æ„ä¹‰ prev_sizeï¼š è¡¨ç¤ºå‰ä¸€ä¸ª chunk çš„ size,ç¨‹åºå¯ä»¥ä½¿ç”¨è¿™ä¸ªå€¼æ¥æ‰¾åˆ°å‰ä¸€ä¸ª chunk çš„å¼€å§‹åœ°å€ï¼ˆP=0æ‰æœ‰æ•ˆï¼‰ï¼› sizeï¼š è¡¨ç¤ºå½“å‰chunkçš„sizeå¤§å°ï¼› Aï¼šä¸º1è¡¨ç¤ºå±äºä¸»åˆ†é…åŒºï¼ˆå·²åˆ†é…ï¼‰ï¼Œå¦åˆ™å±äºéä¸»åˆ†é…åŒºï¼ˆæœªåˆ†é…ï¼‰ï¼› Mï¼šä¸º 1 è¡¨ç¤ºè¯¥ chunk æ˜¯ä» mmap æ˜ å°„åŒºåŸŸåˆ†é…çš„ï¼Œå¦åˆ™æ˜¯ä» heap åŒºåŸŸåˆ†é…çš„ï¼› Pï¼šä¸º1è¡¨ç¤ºå‰ä¸€ä¸ªchunkåœ¨ä½¿ç”¨ä¸­ï¼Œä¸º0è¡¨ç¤ºç©ºé—²ã€‚ ç©ºé—²chunkæ ‡è¯†æ„ä¹‰ fdã€bk ï¼šåˆ†åˆ«æŒ‡å‘å‰ã€åçš„ç©ºé—²chunkï¼Œé€šè¿‡è¿™ç§æ–¹å¼å°†å°†å¤§å°ç›¸è¿‘çš„chunkè¿æˆä¸€ä¸ªåŒå‘é“¾è¡¨ï¼› å…·ä½“æ¥è¯´ï¼Œåˆ†é…å™¨é€šè¿‡bins+ç©ºé—²é“¾è¡¨ï¼ˆéå¸¸ç±»ä¼¼å“ˆå¸Œè¡¨ï¼‰ï¼Œå¯¹å †å—è¿›è¡Œç®¡ç†ã€‚ ä¸€ä¸ªå…¸å‹çš„å †æ•´ä½“ç»“æ„ï¼š å¯ä»¥çœ‹åˆ°ï¼Œå†…å­˜åˆ†æˆäº†å¤§å°ä¸åŒçš„chunkï¼Œç„¶åé€šè¿‡binsæ¥ç»„ç»‡èµ·æ¥ï¼›ç›¸ä¼¼å¤§å°çš„chunkç”¨åŒå‘é“¾è¡¨é“¾æ¥èµ·æ¥ï¼Œä¸€ä¸ªé“¾è¡¨è¢«ç§°ä¸ºbinã€‚ unsorted binï¼šå³bin[1]ï¼ˆbin[0]æ²¡æœ‰è¢«ä½¿ç”¨ï¼‰ï¼Œç”¨äºç»´æŠ¤freeé‡Šæ”¾çš„chunkï¼› small_binsï¼šå³bins[2,63)ï¼Œç”¨äºç»´æŠ¤ï¼œ512å­—èŠ‚çš„å†…å­˜å—ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ å¯¹åº”çš„é“¾è¡¨ä¸­çš„chunkå¤§å°ç›¸åŒï¼Œå‡ä¸ºindex*8ï¼› large_binsï¼šå³bins[64,127)ï¼Œç”¨äºç»´æŠ¤&gt;512å­—èŠ‚çš„å†…å­˜å—ï¼Œæ¯ä¸ªå…ƒç´ å¯¹åº”çš„é“¾è¡¨ä¸­çš„chunkå¤§å°ä¸åŒï¼Œindexè¶Šå¤§ï¼Œé“¾è¡¨ä¸­chunkçš„å†…å­˜å¤§å°ç›¸å·®è¶Šå¤§ï¼› åœ¨å †ä¸­ï¼Œè¿˜æœ‰ä¸€ä¸ªå¾ˆç‰¹æ®Šçš„top chunkã€‚ äº§ç”Ÿæ—¶æœºï¼šç¨‹åºç¬¬ä¸€æ¬¡è¿›è¡Œ malloc çš„æ—¶å€™ï¼Œheap ä¼šè¢«åˆ†ä¸ºä¸¤å—ï¼Œä¸€å—ç»™ç”¨æˆ·ï¼Œå‰©ä¸‹çš„é‚£å—å°±æ˜¯ top chunkï¼Œæ‰€ä»¥å®ƒä¸å±äºä»»ä½•ä¸€ä¸ª binï¼› ä½œç”¨ï¼šåœ¨äºå½“æ‰€æœ‰çš„ bin éƒ½æ— æ³•æ»¡è¶³ç”¨æˆ·è¯·æ±‚çš„å¤§å°æ—¶ï¼Œå°±ä½¿ç”¨top chunkè¿›è¡Œåˆ†é…ï¼Œå¹¶å°†å‰©ä¸‹çš„éƒ¨åˆ†ä½œä¸ºæ–°çš„ top chunkã€‚å †é¡¶æŒ‡é’ˆbrkä½äºtop chunkçš„é¡¶éƒ¨ï¼Œç§»åŠ¨brkæŒ‡é’ˆï¼Œå³å¯æ‰©å……top chunkçš„å¤§å°ã€‚ ç°åœ¨æˆ‘ä»¬å†æ¥æ¢è®¨mallocåˆ†é…çš„è¿‡ç¨‹ã€‚ mallocåŸç† glibcåœ¨å†…å­˜æ± ä¸­æŸ¥æ‰¾åˆé€‚çš„chunkæ—¶ï¼Œé‡‡ç”¨äº†æœ€ä½³é€‚åº”çš„ä¼™ä¼´ç®—æ³•ã€‚ ç¬¬ä¸€æ¬¡åˆ†é…å†…å­˜æ—¶ä¼šè¿›è¡Œå †åˆå§‹åŒ–ï¼š ä¸€å¼€å§‹æ—¶ï¼Œbrkå’Œstart_brkæ˜¯ç›¸ç­‰çš„ï¼Œè¿™æ—¶å®é™…heapå¤§å°ä¸º0ï¼› å¦‚æœç¬¬ä¸€æ¬¡ç”¨æˆ·è¯·æ±‚çš„å†…å­˜å¤§å°&lt; mmapåˆ†é…é˜ˆå€¼ï¼Œåˆ™ï¼ˆé€šè¿‡ç§»åŠ¨brkæŒ‡é’ˆæ‰©å±•å †å¤§å°ï¼‰mallocä¼šç”³è¯·(chunk_size+128kb) align 4kbå¤§å°çš„ç©ºé—´ä½œä¸ºåˆå§‹çš„heapã€‚ å¾€åä¼šæŒ‰ç…§é¡ºåºï¼šbinsæŸ¥æ‰¾åˆ†é…â€“&gt;brkæ‰©å±•å †åˆ†é…â€”&gt;mmapåˆ†é…ï¼š å¦‚æœåˆ†é…å†…å­˜&lt;max_fast=é»˜è®¤64Bï¼Œåœ¨fast bins ä¸­æŸ¥æ‰¾ç›¸åº”çš„ç©ºé—²å—ï¼› å¦‚æœåˆ†é…å†…å­˜&lt;512å­—èŠ‚ï¼Œåˆ™é€šè¿‡å†…å­˜å¤§å°å®šä½åˆ°smallbinså¯¹åº”çš„indexä¸Šï¼š å¦‚æœsmallbins[index]ä¸ºç©ºï¼Œè¿›å…¥æ­¥éª¤3ï¼› å¦‚æœsmallbins[index]éç©ºï¼Œç›´æ¥è¿”å›ç¬¬ä¸€ä¸ªchunkã€‚ å¦‚æœåˆ†é…å†…å­˜&gt;512å­—èŠ‚ï¼Œå®šä½åˆ°largebinså¯¹åº”çš„indexä¸Šï¼š å¦‚æœlargebins[index]ä¸ºç©ºï¼Œè¿›å…¥æ­¥éª¤3ï¼› å¦‚æœlargebins[index]éç©ºï¼Œæ‰«æé“¾è¡¨ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§å°æœ€åˆé€‚çš„chunkï¼Œå¦‚size=12.5Kï¼Œåˆ™ä½¿ç”¨chunk Bï¼Œå‰©ä¸‹çš„0.5ké‡Šæ”¾å¹¶æ”¾å…¥unsorted_listä¸­ã€‚ éå†unsorted_listï¼š æŸ¥æ‰¾åˆé€‚sizeçš„chunkï¼Œå¦‚æœæ‰¾åˆ°åˆ™è¿”å›ï¼› å¦åˆ™ï¼Œå°†è¿™äº›chunkéƒ½å½’ç±»æ”¾åˆ°smallbinså’Œlargebinsé‡Œé¢ã€‚ åœ¨binæ›´å¤§çš„é“¾è¡¨å¯»æ‰¾ï¼šä»index++æ›´å¤§çš„é“¾è¡¨ç»§ç»­å¯»æ‰¾ï¼š æŸ¥æ‰¾åˆé€‚sizeçš„chunkï¼Œå¦‚æœæ‰¾åˆ°åˆ™è¿”å›ï¼ŒåŒæ—¶è¿˜ä¼šå°†chunkæ‹†åˆ†ï¼Œå¹¶å°†å‰©ä½™çš„åŠ å…¥åˆ°unsorted_listä¸­ã€‚ æ‰¾ä¸åˆ°åˆ™é€šè¿‡top chunkã€‚ é€šè¿‡top chunkåˆ†é…ï¼šé»˜è®¤top chunkåˆ†é…çš„æœ€å¤§å¤§å°ä¸º128Kï¼ˆä¹Ÿæ˜¯mmapåˆ†é…çš„é˜ˆå€¼ï¼‰ï¼š top chunkå¤§å°&gt;åˆ†é…çš„å†…å­˜ï¼Œåˆ™è¿”å›åˆé€‚å¤§å°chunkï¼Œå‰©ä½™çš„ä½œä¸ºæ–°çš„ top chunkï¼› top chunkå¤§å°&lt;åˆ†é…çš„å†…å­˜&lt;128Kï¼Œç§»åŠ¨brkæŒ‡é’ˆæ‰©å±•top chunkå¤§å°ï¼Œæ»¡è¶³åˆ†é…ï¼› åˆ†é…çš„å†…å­˜&gt;128Kï¼Œé€šè¿‡mmapåˆ†é…å†…å­˜ã€‚ é€šè¿‡mmapåˆ†é…ã€‚åœ¨è¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­ï¼ˆå †å’Œæ ˆä¸­é—´çš„æ–‡ä»¶æ˜ å°„åŒºåŸŸï¼‰æ‰¾ä¸€å—ç©ºé—²çš„è™šæ‹Ÿå†…å­˜è¿”å›åœ°å€ã€‚ æ€»ç»“ä»¥ä¸Šï¼Œå†…å­˜åˆ†é…ï¼ˆmallocï¼‰ä¸»è¦ç”±ä¸¤ç§ç³»ç»Ÿè°ƒç”¨å®Œæˆï¼šbrkå’Œmmapï¼ˆä¸è€ƒè™‘å…±äº«å†…å­˜ï¼‰ã€‚ brkï¼šåˆ†é…å†…å­˜ &lt; DEFAULT_MMAP_THRESHOLDï¼Œèµ°__brkï¼Œå°†æ•°æ®æ®µ(.data)çš„æœ€é«˜åœ°å€æŒ‡é’ˆ_edataï¼Œå¾€é«˜åœ°å€æ¨ï¼› mmapï¼šåˆ†é…å†…å­˜ &gt; DEFAULT_MMAP_THRESHOLDï¼Œèµ°__mmapï¼Œç›´æ¥è°ƒç”¨mmapç³»ç»Ÿè°ƒç”¨ã€‚åœ¨è¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­ï¼ˆå †å’Œæ ˆä¸­é—´çš„æ–‡ä»¶æ˜ å°„åŒºåŸŸï¼‰æ‰¾ä¸€å—ç©ºé—²çš„è™šæ‹Ÿå†…å­˜ã€‚ å…¶ä¸­ï¼ŒDEFAULT_MMAP_THRESHOLDæ˜¯mmapåˆ†é…é˜ˆå€¼ï¼Œé»˜è®¤ä¸º128Kã€‚ å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸¤ç§æ–¹å¼åˆ†é…çš„éƒ½æ˜¯è™šæ‹Ÿå†…å­˜ï¼Œæ²¡æœ‰åˆ†é…ç‰©ç†å†…å­˜ã€‚åªæœ‰å®é™…è°ƒç”¨å‘ç”Ÿç¼ºé¡µä¸­æ–­æ—¶ï¼Œæ‰ä¼šå»ºç«‹è™šæ‹Ÿå†…å­˜å’Œç‰©ç†å†…å­˜ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚ ä¸è¿‡è¿™é‡Œæœ‰ä¸ªå°é—®é¢˜ï¼Œæ—¢ç„¶brkã€mmapæä¾›äº†å†…å­˜åˆ†é…çš„åŠŸèƒ½ï¼Œç›´æ¥ä½¿ç”¨brkã€mmapè¿›è¡Œå†…å­˜ç®¡ç†ä¸æ˜¯æ›´ç®€å•å—ï¼Œä¸ºä»€ä¹ˆéœ€è¦glibcå‘¢ï¼Ÿ å› ä¸ºç³»ç»Ÿè°ƒç”¨æœ¬èº«ä¼šäº§ç”Ÿè½¯ä¸­æ–­ï¼Œå¯¼è‡´ç¨‹åºä»ç”¨æˆ·æ€é™·å…¥å†…æ ¸æ€ï¼Œæ¯”è¾ƒæ¶ˆè€—èµ„æºã€‚è¯•æƒ³ï¼Œå¦‚æœé¢‘ç¹åˆ†é…å›æ”¶å°å—å†…å­˜åŒºï¼Œé‚£ä¹ˆå°†æœ‰å¾ˆå¤§çš„æ€§èƒ½è€—è´¹åœ¨ç³»ç»Ÿè°ƒç”¨ä¸­ã€‚ å› æ­¤ï¼Œä¸ºäº†å‡å°‘ç³»ç»Ÿè°ƒç”¨å¸¦æ¥çš„æ€§èƒ½æŸè€—ï¼Œglibcé‡‡ç”¨äº†å†…å­˜æ± çš„è®¾è®¡ï¼Œå¢åŠ äº†ä¸€ä¸ªä»£ç†å±‚ï¼Œæ¯æ¬¡å†…å­˜åˆ†é…ï¼Œéƒ½ä¼˜å…ˆä»å†…å­˜æ± ä¸­å¯»æ‰¾ï¼Œå¦‚æœå†…å­˜æ± ä¸­æ— æ³•æä¾›ï¼Œå†å‘æ“ä½œç³»ç»Ÿç”³è¯·ã€‚ freeåŸç† å‰é¢æˆ‘ä»¬è¯´åˆ°ï¼ŒC++å°†å¯¹è§†ä¸ºå †è§†ä¸ºä¸€ä¸ªä¸ªchunkï¼ˆblockï¼‰çš„é›†åˆï¼Œæ¯ä¸ªchunkçš„ç»“æ„å¦‚ä¸‹ï¼š mallocåˆ†é…å¥½å†…å­˜ï¼Œè¿”å›çš„æ˜¯User dataçš„èµ·å§‹åœ°å€ï¼Œheaderåˆ™ä¿å­˜äº†å½“å‰chunkçš„ä¸€äº›ä¿¡æ¯ã€‚ ä½†freeå¹¶éçœŸçš„ç›´æ¥å°†ç›¸åº”å†…å­˜åŒºåŸŸè¿”å›æ“ä½œç³»ç»Ÿï¼š å¦‚æœfree é‡Šæ”¾mmap åˆ†é…å†…å­˜ï¼Œfreeå¯ä»¥å¾ˆé¡ºåˆ©å°±é‡Šæ”¾æ‰å…¶ç›¸å…³çš„è™šæ‹Ÿå’Œç‰©ç†å†…å­˜ï¼Œè¿”å›æ“ä½œç³»ç»Ÿï¼› å¦‚æœfree é‡Šæ”¾ brkåˆ†é…çš„å†…å­˜ï¼Œfreeåªæ˜¯æ ‡è®°chunkå¯è¢«é‡æ–°åˆ†é…å¹¶åŠ å…¥ç©ºé—²é“¾è¡¨ï¼ˆA=0ï¼‰ï¼Œä½†æ²¡æœ‰çœŸçš„åˆ é™¤ä»»ä½•æ•°æ®ï¼ 123456int* a = new int(1);cout&lt;&lt;&quot;a = &quot;&lt;&lt;*a&lt;&lt;endl; // 1free(a);cout&lt;&lt;&quot;a = &quot;&lt;&lt;*a&lt;&lt;endl; // 0ï¼Œæ•°æ®è¢«æ¸…é™¤ï¼Œä½†æ²¡è¢«æ“ä½œç³»ç»Ÿå›æ”¶*a=2;cout&lt;&lt;&quot;a = &quot;&lt;&lt;*a&lt;&lt;endl; // 2ï¼Œä¾æ®å¯ä»¥è¢«ä½¿ç”¨ï¼Œè™½ç„¶è¿™å¾ˆå±é™© å…·ä½“åŠ å…¥åˆ°ç©ºé—²é“¾è¡¨ä½•å¤„ï¼Œä¹Ÿåˆ†ä¸‰ç§æƒ…å†µè€ƒè™‘ï¼š å¦‚æœè¯¥chunkå’Œtop chunkç›¸é‚»ï¼Œåˆ™å°†å…¶å’Œtop chunkåˆå¹¶ï¼› ç‰¹åˆ«çš„ï¼Œå¦‚æœtop chunk&gt;128Kï¼Œä¼šæ‰§è¡Œå†…å­˜ç´§ç¼©ï¼ˆtrimï¼‰æ“ä½œç§»åŠ¨brkæŒ‡é’ˆã€‚ å¦‚æœfreeçš„chunkçš„å¤§å°åœ¨0x20~0x80ä¹‹é—´ï¼ˆfastbinçš„èŒƒå›´ï¼‰ï¼Œé‚£ä¹ˆè¯¥chunkç›´æ¥æ”¾åˆ°fast binä¸Šï¼› å¦‚æœfreeçš„chunkçš„å¤§å°å¤§äº0x80ï¼ˆå¤§äºfast binçš„èŒƒå›´ï¼‰ï¼Œæ­¤æ—¶ä¸ä¼šç›´æ¥æ”¾åˆ°small binæˆ–è€…large binä¸Šé¢ï¼Œè€Œæ˜¯æ”¾åˆ°unsorted binä¸Šé¢ï¼› æœ€ä½³å®è·µï¼šåˆ é™¤ä¸€ä¸ªæŒ‡é’ˆæ—¶ï¼Œè¯·å°†æŒ‡é’ˆè®¾ç½®ä¸º nullptrã€‚ å¦åˆ™çš„è¯ï¼Œä½¿ç”¨ä¸€ä¸ªæŒ‡å‘çš„å†…å­˜å·²ç»è¢«é‡Šæ”¾çš„ä¸€ç§æŒ‡é’ˆï¼Œæ˜¯ä½¿ç”¨æ‚¬ç©ºæŒ‡é’ˆã€‚ ï¼ˆåŒºåˆ†é‡æŒ‡é’ˆæ˜¯æŒ‡ä½¿ç”¨æ—¶è¿˜æ²¡è¢«åˆå§‹åŒ–ï¼‰ 123cout&lt;&lt;*a&lt;&lt;endl; // å±ï¼Œæ­¤æ—¶aæ˜¯æ‚¬ç©ºæŒ‡é’ˆï¼Œå·²ç»è¢«free(a)a = nullptr; // æœ€ä½³å®è·µï¼šå°†å·²ç»é‡Šæ”¾çš„æŒ‡é’ˆç½®ç©ºcout&lt;&lt;*a&lt;&lt;endl; // æ­¤æ—¶ç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼Œok å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœfreeçš„chunkæ²¡æœ‰å’Œtop chunkç›¸é‚»è¢«åˆå¹¶ï¼Œå…¶åˆå¤ªå°çš„è¯ï¼Œå¯èƒ½æ°¸è¿œä¸ä¼šè¢«ä½¿ç”¨â€”â€”è¿™å°±äº§ç”Ÿäº†å†…å­˜ç¢ç‰‡ã€‚ å¦‚ä¸‹å›¾ï¼š free(A)åï¼Œç”±äºchunk Aæ— æ³•å’Œtop chunkåˆå¹¶ï¼Œåœ¨å †ä¸­ä¾¿äº§ç”Ÿäº†å†…å­˜ç©ºæ´ï¼Œä¹Ÿå°±æ˜¯å†…å­˜ç¢ç‰‡ã€‚å¹¸è¿çš„æ˜¯ï¼Œå®ƒè¿˜è¶³å¤Ÿå¤§ï¼ˆ40Kï¼‰ï¼Œæœ‰å¾ˆå¤§æ¦‚ç‡å…¶ç©ºé—´æ˜¯èƒ½å¤Ÿè¢«åˆ©ç”¨çš„ã€‚ å°ç»†èŠ‚ï¼šfreeå¦‚ä½•çŸ¥é“é‡Šæ”¾å¤šå¤§ç©ºé—´ï¼Ÿ åœ¨å‰é¢åœ°å€ä¼ é€’æˆ‘ä»¬çŸ¥é“ï¼šå‘ä¸€ä¸ªå‡½æ•°ä¼ é€’æŒ‡é’ˆçš„æ—¶å€™ï¼Œå®ƒçš„é•¿åº¦ä¿¡æ¯å¾€å¾€ä¼šè¢«æˆªæ–­ï¼ˆå¦‚æœæ˜¯æ•°ç»„åï¼‰ï¼Œæ— æ³•æ ‡ç¤ºæ•°ç»„çš„é•¿åº¦ã€‚å› æ­¤ï¼Œåœ¨å‡½æ•°ä¸­æˆ‘ä»¬ä¹Ÿæ— æ³•è·å–å®ƒçš„é•¿åº¦ä¿¡æ¯ï¼Œé™¤éæ˜¾ç¤ºä¼ é€’ä¸€ä¸ªé•¿åº¦å‚æ•°ã€‚ é‚£freeå¦‚ä½•çŸ¥é“é‡Šæ”¾å¤šå¤§çš„ç©ºé—´ï¼Ÿ åŸå› å¾ˆç®€å•ï¼Œfreeæ ¹æœ¬ä¸ç”¨å…³ç³»chunkå¤§å°ï¼Œmallocåˆ†é…çš„æ—¶å€™å°±æ˜¯åˆ†é…ä¸€ä¸ªåˆé€‚å¤§å°chunkã€‚chunkåŒ…å«headerå’Œuser dataã€‚freeåªæ˜¯å°†headerä¸­çš„ç›¸å…³æ ‡è®°ä¸ºå¯ç”¨ï¼ŒåŠ å…¥ç©ºé—²é“¾è¡¨ä¸­å³å¯ã€‚ 3.8.4 new /delete åŸç† åœ¨3.8.3èŠ‚ä»‹ç»äº†Cè¯­è¨€ä¸­çš„åŠ¨æ€å†…å­˜åˆ†é…æ–¹å¼ï¼šmallocï¼Œmallocå‡½æ•°åˆ†é…å¤±è´¥è¿”å›æŒ‡é’ˆç©ºå€¼ï¼ŒæˆåŠŸè¿”å›é¦–åœ°å€ã€‚ ç°åœ¨æˆ‘ä»¬æ¥è®¤è¯†ä¸€ä¸‹C++ä¸­çš„åŠ¨æ€å†…å­˜ç®¡ç†æ–¹å¼ï¼šnewå’Œdeleteã€‚ å‡†å¤‡å¥½ä¸€ä¸ªå…¬å…±ç±»Stuï¼š 12345678910111213141516171819202122#include &lt;iostream&gt; #include &lt;stdlib.h&gt;using namespace std;class Stu &#123; public: Stu() &#123; cout &lt;&lt; &quot;é»˜è®¤æ„é€ å‡½æ•°åˆå§‹åŒ–&quot; &lt;&lt; endl; &#125;; Stu(int num, string name):_num(num), _name(name) &#123; cout &lt;&lt; &quot;è‡ªå®šä¹‰æ„é€ å‡½æ•°åˆå§‹åŒ–&quot; &lt;&lt; endl; &#125; ~Stu() &#123; cout &lt;&lt; &quot;ææ„é”€æ¯&quot; &lt;&lt; endl; &#125; private: int _num; string _name;&#125;; newåŸç† æ— è®ºæ˜¯newè¿˜æ˜¯deleteï¼Œå®ƒä»¬åœ¨å†…ç½®ç±»å‹/è‡ªå®šä¹‰ç±»å‹ä¸Šä½¿ç”¨æœ‰äº›ä¸åŒã€‚ newåº•å±‚å®ç°ï¼ˆå†…ç½®ç±»å‹ï¼‰ å¯¹äºå†…ç½®ç±»å‹æ¥è¯´ï¼Œnewå’ŒmallocåŠŸèƒ½åŸºæœ¬ä¸€è‡´ï¼š åˆ†é…å†…å­˜ç©ºé—´ï¼› è¿”å›å†…å­˜ç©ºé—´åœ°å€ã€‚ ä¸è¿‡newè¿˜å¯ä»¥è¿›è¡Œåˆå§‹åŒ–ã€‚ 1234// åˆå§‹åŒ–å•ä¸ªï¼šç­‰åŒäºint* a = (int*)malloc(sizeof(int));int* a = new int;// åˆå§‹åŒ–å•ä¸ªï¼šåŒæ—¶è¿›è¡Œåˆå§‹åŒ–int* c = new int(10); newåœ¨C++ä¸­è¢«å®šä¹‰ä¸ºä¸€ä¸ªè¿ç®—ç¬¦ï¼Œå®ƒä¼šåœ¨åº•å±‚è°ƒç”¨å…¨å±€å‡½æ•°operator newã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥çœ‹int* array = new int; å¯¹åº”æ±‡ç¼–æºç éªŒè¯ï¼š 123456# é¦–å…ˆåœ¨å¯„å­˜å™¨ediä¸­å­˜å…¥æ•°ç»„å¤§å°ï¼ˆ4ï¼Œä¸€ä¸ªintå¤§å°ï¼‰movl $4, %edi# è°ƒç”¨operator newåˆ†é…ç©ºé—´call operator new(unsigned long)# å¯„å­˜å™¨raxä¿å­˜newè¿”å›çš„é¦–åœ°å€ç»™aï¼ˆå¯¹åº”åœ°å€ -16(%rbp)ï¼‰movq %rax, -16(%rbp) operator newåªæ˜¯mallocçš„ä¸€å±‚å°è£…ï¼š 12345678910111213141516171819202122232425void* __CRTDECL operator new(size_t const size)&#123; for (;;) &#123; // malloc if (void* const block = malloc(size)) &#123; return block; &#125; if (_callnewh(size) == 0) &#123; if (size == SIZE_MAX) &#123; __scrt_throw_std_bad_array_new_length(); &#125; else &#123; __scrt_throw_std_bad_alloc(); &#125; &#125; // The new handler was successful; try to allocate again... &#125;&#125; æ‰§è¡Œæµç¨‹ï¼š å½“mallocç”³è¯·ç©ºé—´æˆåŠŸæ—¶ç›´æ¥è¿”å›return (p)ï¼› ç”³è¯·ç©ºé—´å¤±è´¥ï¼Œå°è¯•æ‰§è¡Œç©ºé—´ä¸è¶³åº”å¯¹æªæ–½ï¼ˆmallocä¸­å¤±è´¥ç›´æ¥è¿”å›ç©ºæŒ‡é’ˆï¼‰ï¼› å¦‚æœæ”¹åº”å¯¹æªæ–½ç”¨æˆ·è®¾ç½®äº†ï¼Œåˆ™ç»§ç»­ç”³è¯·ï¼Œå¦åˆ™æŠ›å¼‚å¸¸ã€‚ ä»æºç ä¸­èƒ½çœ‹å‡ºçš„æ˜¯operator newåœ¨åº•å±‚æ˜¯åˆ©ç”¨mallocåˆ†é…å†…å­˜ï¼Œå› æ­¤å¯ä»¥è¯´newåªæ˜¯mallocä¸€å±‚å°è£…ã€‚ newåº•å±‚å®ç°ï¼ˆè‡ªå®šä¹‰ç±»å‹ï¼‰ ä½†å¯¹äºè‡ªå®šä¹‰ç±»å‹ï¼Œnewè¿˜ä¼šè°ƒç”¨æ„é€ å‡½æ•°åˆå§‹åŒ–ï¼š è°ƒç”¨operator newä¸ºå¯¹è±¡åˆ†é…å†…å­˜ï¼› è°ƒç”¨å¯¹è±¡çš„æ„é€ å‡½æ•°å¯¹å¯¹è±¡è¿›è¡Œåˆå§‹åŒ–ï¼› è¿”å›åˆ†é…çš„å†…å­˜ç©ºé—´åœ°å€ã€‚ åˆ†æä¸‹ä¾‹ï¼š 123456789int main() &#123; // mallocåˆ†é…å¯¹è±¡ cout &lt;&lt; &quot;malloc:&quot; &lt;&lt; endl; Stu* a = (Stu*)malloc(sizeof(Stu)); // newåˆ†é…å¯¹è±¡ cout &lt;&lt; &quot;new:&quot; &lt;&lt; endl; Stu* b = new Stu(1, &quot;å¼ ä¸‰&quot;); &#125; è¾“å‡ºï¼š 123malloc:new:è‡ªå®šä¹‰æ„é€ å‡½æ•°åˆå§‹åŒ– å¯ä»¥çœ‹åˆ°mallocåˆ†é…çš„æ–¹å¼ä¸ä¼šè°ƒç”¨æ„é€ å‡½æ•°ï¼Œä½†æ˜¯newè¿˜ä¼šè°ƒç”¨æ„é€ å‡½æ•°ã€‚ å› æ­¤ä¹Ÿå¯ä»¥ç†è§£ä¸ºmallocåˆ†é…å‡ºæ¥çš„åªä¸è¿‡æ˜¯ä¸€ä¸ªå’Œç±»ä¸€æ ·å¤§å°çš„ç©ºé—´ï¼ˆåœ¨å‰é¢æˆ‘ä»¬ç§°ä¸ºchunkï¼‰ï¼Œå¹¶ä¸èƒ½ç§°ä½œæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œnewå’Œdeleteåˆ†é…å‡ºæ¥çš„æ‰èƒ½è¢«æˆä¸ºå¯¹è±¡ã€‚ newä¸new[] new[]å’Œnewæœ‰äº›ç»†å¾®åŒºåˆ«ï¼š new[]æ˜¯è°ƒç”¨operator new[]å¯¹å¤šä¸ªå¯¹è±¡è¿›è¡Œåˆ†é…ï¼Œoperator new[]æœ¬è´¨è¿˜æ˜¯å¤šæ¬¡è°ƒç”¨operator newï¼› ä½†operator new[]è¿˜ä¼šå¤šç”³è¯·4ä¸ªå­—èŠ‚çš„ç©ºé—´ä¿å­˜æ­¤æ¬¡å¯¹è±¡ä¸ªæ•°ã€‚ ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿ ä½¿ç”¨delete[] é‡Šæ”¾ç©ºé—´æ—¶å¯ä»¥çŸ¥é“è¢«é‡Šæ”¾çš„å¯¹è±¡ä¸ªæ•°ã€‚ å½“ç„¶ï¼Œå¯¹äºè‡ªå®šä¹‰ç±»å‹ï¼Œç±»ä¼¼newï¼Œè¿˜ä¼šè°ƒç”¨Næ¬¡æ„é€ å‡½æ•°å¯¹Nä¸ªå¯¹è±¡è¿›è¡Œåˆå§‹åŒ–ã€‚ ä¸¾ä¾‹è¯´æ˜ã€‚ 123456// mallocåˆ†é…å¯¹è±¡ cout &lt;&lt; &quot;malloc:&quot; &lt;&lt; endl;Stu* a = (Stu*)malloc(3*sizeof(Stu));// newåˆ†é…å¯¹è±¡cout &lt;&lt; &quot;new:&quot; &lt;&lt; endl;Stu* b = new Stu[3]; è¾“å‡ºï¼š 12345malloc:new:é»˜è®¤æ„é€ å‡½æ•°åˆå§‹åŒ–é»˜è®¤æ„é€ å‡½æ•°åˆå§‹åŒ–é»˜è®¤æ„é€ å‡½æ•°åˆå§‹åŒ– deleteåŸç† deleteä¹Ÿåˆ†ä¸¤ç§æƒ…å†µè®¨è®ºï¼š å¯¹äºå†…ç½®ç±»å‹ï¼šåº•å±‚è°ƒç”¨freeå®ç°ï¼Œå’Œfreeæ— å¤šå¤§åŒºåˆ«ï¼ˆä¹Ÿæ²¡æœ‰å¼‚å¸¸å¤„ç†ï¼‰ï¼› å¯¹äºè‡ªå®šä¹‰ç±»å‹ï¼šé™¤äº†è°ƒç”¨freeé‡Šæ”¾å¯¹è±¡ç©ºé—´ï¼Œåœ¨æ­¤ä¹‹å‰è¿˜ä¼šè°ƒç”¨å¯¹è±¡çš„ææ„å‡½æ•°ã€‚ é€šè¿‡å…·ä½“ä¾‹å­æ¥çœ‹çœ‹ã€‚ deleteåº•å±‚å®ç°ï¼ˆå†…ç½®ç±»å‹ï¼‰ å…ˆçœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š 12int* a = new int;delete a; æŸ¥çœ‹å¯¹åº”çš„æ±‡ç¼–æºç ï¼Œæ ¸å¿ƒæ˜¯è°ƒç”¨operator deleteï¼š 1234567891011121314151617/*int* a = new int;*/# é¦–å…ˆåœ¨å¯„å­˜å™¨ediä¸­å­˜å…¥æ•°ç»„å¤§å°ï¼ˆ4ï¼Œä¸€ä¸ªintå¤§å°ï¼‰movl $4, %edi# è°ƒç”¨operator newåˆ†é…ç©ºé—´call operator new(unsigned long)# å¯„å­˜å™¨raxä¿å­˜newè¿”å›çš„é¦–åœ°å€ç»™aï¼ˆå¯¹åº”åœ°å€ -16(%rbp)ï¼‰movq %rax, -16(%rbp)/*delete a*/movq -16(%rbp), %raxtestq %rax, %raxje .L2movl $4, %esimovq %rax, %rdi# æ ¸å¿ƒæ˜¯è°ƒç”¨operator delete# å‰é¢åœ¨å¹²ä»€ä¹ˆï¼Ÿæš‚ä¸æ¸…æ¥šã€‚call operator delete(void*, unsigned long) operator deleteä¹Ÿåªæ˜¯freeçš„ä¸€å±‚å°è£…ï¼ˆæ²¡æœ‰å¼‚å¸¸å¤„ç†ï¼‰ï¼š 12345678void __CRTDECL operator delete(void* const block) noexcept&#123; #ifdef _DEBUG _free_dbg(block, _UNKNOWN_BLOCK); #else free(block); #endif&#125; deleteåº•å±‚å®ç°ï¼ˆè‡ªå®šä¹‰ç±»å‹ï¼‰ ä½†å¯¹äºè‡ªå®šä¹‰ç±»å‹ï¼Œdeleteè¿˜ä¼šè°ƒç”¨ææ„å‡½æ•°ï¼š è°ƒç”¨å¯¹è±¡çš„ææ„å‡½æ•°æ¸…ç†å¯¹è±¡ï¼› è°ƒç”¨operator deleteæ¸…ç†å†…å­˜ï¼› ä¸€ä¸ªå°ä¾‹å­ï¼š 1234567891011121314int main() &#123; // mallocåˆ†é…å¯¹è±¡ cout &lt;&lt; &quot;malloc:&quot; &lt;&lt; endl; Stu* a = (Stu*)malloc(sizeof(Stu)); cout &lt;&lt; &quot;free:&quot; &lt;&lt; endl; free(a); // newåˆ†é…å¯¹è±¡ cout &lt;&lt; &quot;new:&quot; &lt;&lt; endl; Stu* b = new Stu; cout &lt;&lt; &quot;delete:&quot; &lt;&lt; endl; delete b; return 0; &#125; è¾“å‡ºï¼š 123456malloc:free:new:é»˜è®¤æ„é€ å‡½æ•°åˆå§‹åŒ–delete:ææ„é”€æ¯ å¯è§freeä¸ä¼šè°ƒç”¨ææ„å‡½æ•°ï¼Œä½†deleteä¼šã€‚ deleteä¸delte[] delete[]ç”¨æ¥åˆ é™¤å¤šä¸ªå¯¹è±¡ï¼ˆå’Œnew[]æˆå¯¹å‡ºç°ï¼‰ï¼Œæœ¬è´¨æ˜¯å¯¹æ¯ä¸ªå¯¹è±¡è°ƒç”¨deleteæ¸…ç†ã€‚ å¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š é¦–å…ˆæ ¹æ®å¯¹è±¡æ•°ç»„å‰4ä¸ªå­—èŠ‚ï¼Œè·å–å¯¹è±¡ä¸ªæ•°Nï¼› å¯¹åç»­æ¯ä¸ªå¯¹è±¡ä½¿ç”¨deleteåˆ é™¤ã€‚ åŒæ ·çš„ï¼Œå¯¹äºè‡ªå®šä¹‰ç±»å‹è¿˜ä¼šè°ƒç”¨å¯¹è±¡çš„ææ„å‡½æ•°ï¼š 12345678910111213141516int main() &#123; // mallocåˆ†é…å¤šä¸ªå¯¹è±¡ cout &lt;&lt; &quot;malloc:&quot; &lt;&lt; endl; Stu* a = (Stu*)malloc(3*sizeof(Stu)); cout &lt;&lt; &quot;free:&quot; &lt;&lt; endl; // freeé‡Šæ”¾å†…å­˜ free(a); // new[]åˆ†é…å¯¹è±¡ cout &lt;&lt; &quot;new:&quot; &lt;&lt; endl; Stu* b = new Stu[3]; cout &lt;&lt; &quot;delete:&quot; &lt;&lt; endl; // delete[] é‡Šæ”¾å†…å­˜ delete[] b; return 0; &#125; è¾“å‡ºï¼š 12345678910malloc:free:new:é»˜è®¤æ„é€ å‡½æ•°åˆå§‹åŒ–é»˜è®¤æ„é€ å‡½æ•°åˆå§‹åŒ–é»˜è®¤æ„é€ å‡½æ•°åˆå§‹åŒ–delete:ææ„é”€æ¯ææ„é”€æ¯ææ„é”€æ¯ è¿™é‡Œæœ‰ä¸¤ä¸ªæœ‰æ„æ€çš„å°ç»†èŠ‚ï¼š mallocå‡ºçš„å¯¹è±¡ä¸ä¼šè°ƒç”¨ææ„å‡½æ•°ï¼› æˆ‘ä»¬åªç”¨äº†ä¸€æ¬¡free(a) é‡Šæ”¾äº†åˆ†é…å¯¹è±¡æ•°ç»„a ï¼Œè€Œå¯¹è±¡æ•°ç»„bå®é™…é€šè¿‡delete[] è°ƒç”¨äº†å¤šæ¬¡deleteã€‚ è¿™ä¸ªç»†èŠ‚ä¹ŸéªŒè¯äº†æˆ‘ä»¬ä¹‹å‰ç»“è®ºï¼š mallocåˆ†é…å‡ºæ¥çš„åªä¸è¿‡æ˜¯ä¸€ä¸ªæˆ‘ä»¬éœ€è¦çš„å¤§å°ï¼ˆè¿™é‡Œæ˜¯3ä¸ªstuï¼‰çš„å†…å­˜ç©ºé—´ï¼Œå®ƒå¹¶æ²¡æœ‰çœŸçš„åˆ†é…äº†3ä¸ªstuå¯¹è±¡ï¼Œæ‰€ä»¥freeä¸€æ¬¡å°±å¯ä»¥é‡Šæ”¾è¿™å—å†…å­˜ã€‚ ä½†new[]æ˜¯çœŸæ­£åˆ†é…äº†3ä¸ªstuå¯¹è±¡å†…å­˜ç©ºé—´ï¼Œæ‰€ä»¥è¦deleteå¤šæ¬¡ä¸”ä¼šæ‰§è¡Œææ„å‡½æ•°ã€‚ plain/nothrow/placement new åœ¨C++ä¸­ï¼Œnewæœ‰ä¸‰ç§å…¸å‹çš„ä½¿ç”¨æ–¹æ³•ï¼šplain newï¼Œnothrow newå’Œplacement newã€‚ plain new è¨€ä¸‹ä¹‹æ„å°±æ˜¯æ™®é€šçš„newï¼Œå°±æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„newï¼Œåœ¨C++ä¸­å®šä¹‰å¦‚ä¸‹ï¼š 1234// plain newåŸå‹void* operator new(std::size_t) throw(std::bad_alloc);// plain newå¯¹åº”deletevoid operator delete(void *) throw(); å¯è§plain newåœ¨ç©ºé—´åˆ†é…å¤±è´¥çš„æƒ…å†µä¸‹ï¼ŒæŠ›å‡ºå¼‚å¸¸std::bad_allocè€Œä¸æ˜¯è¿”å›NULLã€‚ å› æ­¤é€šè¿‡åˆ¤æ–­è¿”å›å€¼æ˜¯å¦ä¸ºNULLæ˜¯å¾’åŠ³çš„ï¼Œè¯·ä½¿ç”¨try-catchæ•è·å¼‚å¸¸ï¼š 12345678910111213141516#include &lt;iostream&gt;#include &lt;string&gt;using namespace std;int main()&#123; try &#123; char *p = new char[10e11]; delete p; &#125; catch (const std::bad_alloc &amp;ex) &#123; cout &lt;&lt; ex.what() &lt;&lt; endl; &#125; return 0;&#125; è¾“å‡ºï¼š 1bad allocation nothrow new nothrow newåœ¨ç©ºé—´åˆ†é…å¤±è´¥çš„æƒ…å†µä¸‹ä¸æŠ›å‡ºå¼‚å¸¸ï¼Œè€Œæ˜¯è¿”å›NULLï¼Œå®šä¹‰å¦‚ä¸‹ï¼š 1234// nothrow newåŸå‹void * operator new(std::size_t,const std::nothrow_t&amp;) throw();// å¯¹åº”deleteåŸå‹void operator delete(void*) throw(); ä¸¾ä¸ªä¾‹å­ï¼š 1234567891011121314#include &lt;iostream&gt;#include &lt;string&gt;using namespace std;int main()&#123; char *p = new(nothrow) char[10e11]; if (p == NULL) &#123; cout &lt;&lt; &quot;alloc failed&quot; &lt;&lt; endl; &#125; delete p; return 0;&#125; è¾“å‡ºï¼š 1alloc failed placement new placement newå…è®¸åœ¨ä¸€å—å·²ç»åˆ†é…æˆåŠŸçš„å†…å­˜ä¸Šé‡æ–°æ„é€ å¯¹è±¡æˆ–å¯¹è±¡æ•°ç»„ã€‚ placement newä¸ç”¨æ‹…å¿ƒå†…å­˜åˆ†é…å¤±è´¥ï¼Œå› ä¸ºå®ƒæ ¹æœ¬ä¸åˆ†é…å†…å­˜ï¼Œå®ƒåšçš„å”¯ä¸€ä¸€ä»¶äº‹æƒ…å°±æ˜¯è°ƒç”¨å¯¹è±¡çš„æ„é€ å‡½æ•°ã€‚å®šä¹‰å¦‚ä¸‹ï¼š 1234// placement newåŸå‹void* operator new(size_t,void*);// å¯¹åº”deletevoid operator delete(void*,void*); ä¸»è¦ç”¨é€”ï¼šåå¤ä½¿ç”¨ä¸€å—è¾ƒå¤§çš„åŠ¨æ€åˆ†é…çš„å†…å­˜ï¼Œæ¥æ„é€ ä¸åŒç±»å‹çš„å¯¹è±¡æˆ–è€…ä»–ä»¬çš„æ•°ç»„ï¼› ä½¿ç”¨ææ„å‡½æ•°åˆ é™¤è€Œä¸æ˜¯deleteï¼šplacement newæ„é€ èµ·æ¥çš„å¯¹è±¡æ•°ç»„ï¼Œè¦æ˜¾å¼çš„è°ƒç”¨ä»–ä»¬çš„ææ„å‡½æ•°æ¥é”€æ¯ï¼ˆææ„å‡½æ•°å¹¶ä¸é‡Šæ”¾å¯¹è±¡çš„å†…å­˜ï¼‰ã€‚è¿™æ˜¯å› ä¸ºplacement newæ„é€ èµ·æ¥çš„å¯¹è±¡æˆ–æ•°ç»„å¤§å°å¹¶ä¸ä¸€å®šç­‰äºåŸæ¥åˆ†é…çš„å†…å­˜å¤§å°ï¼Œä½¿ç”¨deleteä¼šé€ æˆå†…å­˜æ³„æ¼æˆ–è€…ä¹‹åé‡Šæ”¾å†…å­˜æ—¶å‡ºç°è¿è¡Œæ—¶é”™è¯¯ã€‚ ä¸¾ä¸ªä¾‹å­ï¼š 1234567891011121314151617181920212223242526272829303132333435363738#include &lt;iostream&gt;#include &lt;string&gt;using namespace std;class ADT&#123; int i; int j;public: ADT() &#123; i = 10; j = 100; cout &lt;&lt; &quot;ADT construct i=&quot; &lt;&lt; i &lt;&lt; &quot;,j=&quot;&lt;&lt;j &lt;&lt;endl; &#125; ~ADT() &#123; cout &lt;&lt; &quot;ADT destruct&quot; &lt;&lt; endl; &#125;&#125;;int main()&#123; char *p = new(nothrow) char[sizeof ADT + 1]; if (p == NULL) &#123; cout &lt;&lt; &quot;alloc failed&quot; &lt;&lt; endl; &#125; // ä½¿ç”¨æŒ‡é’ˆpç”³è¯·çš„å†…å­˜æ¥æ„å»ºç±»ADTå¯¹è±¡adt // placement newï¼šä¸å¿…æ‹…å¿ƒå¤±è´¥ï¼Œåªè¦pæ‰€æŒ‡å¯¹è±¡çš„çš„ç©ºé—´è¶³å¤ŸADTåˆ›å»ºå³å¯ ADT *adt = new(p) ADT; /* delete adt; // errorï¼Œä¸èƒ½åœ¨æ­¤å¤„è°ƒç”¨delete */ // è°ƒç”¨ææ„å‡½æ•°åˆ é™¤adt adt-&gt;ADT::~ADT(); // deleteåˆ é™¤p delete[] p; return 0;&#125; è¾“å‡ºï¼š 12ADT construct i=10,j=100ADT destruct å°ç»“ newå’Œdeleteåˆ†åˆ«æ˜¯mallocå’Œfreeçš„ä¸€å±‚å°è£…ï¼Œå¯¹äºè‡ªå®šä¹‰ç±»å‹è¿˜ä¼šåˆ†åˆ«è°ƒç”¨æ„é€ å‡½æ•°åˆå§‹åŒ–/ææ„å‡½æ•°æ¸…ç†å†…å­˜ã€‚ä¸è¿‡newç›¸æ¯”mallocè¿˜ä¼šæœ‰ä¸€å±‚ç”³è¯·ç©ºé—´å¤±è´¥åº”å¯¹æªæ–½ï¼Œä»¥åŠå¯ä»¥åˆå§‹åŒ–ã€‚ new[]/delete[]ï¼Œæ˜¯åˆ†åˆ«ç”¨æ¥åˆ†é…å¯¹è±¡æ•°ç»„/æ¸…ç†å¯¹è±¡æ•°ç»„çš„ï¼Œæœ¬è´¨æ˜¯å¤šæ¬¡è°ƒç”¨äº†new/freeã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œnew[]åˆ†é…çš„å¯¹è±¡æ•°ç»„ï¼Œè¿˜ä¼šå¤šåˆ†é…4ä¸ªå­—èŠ‚æ ‡è¯†å¯¹è±¡çš„ä¸ªæ•°ã€‚ åœ¨C++ä¸­æœ‰plain newï¼Œnothrow newå’Œplacement newã€‚plain newå°±æ˜¯æœ€æ™®é€šçš„newï¼Œåˆ†é…é”™è¯¯è¿”å›bad allocå¼‚å¸¸ï¼›nothrow newåˆ†é…å¤±è´¥è¿”å›NULLå¼‚å¸¸ï¼›placement newä¸åˆ†é…å†…å­˜ï¼Œè¯·åªè°ƒç”¨ææ„å‡½æ•°è¿›è¡Œé‡Šæ”¾ï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´double freeã€‚ 3.8.5 é—®ç­”æµ‹éªŒ æœ¬èŠ‚æ˜¯å…«è‚¡é‡ç¾åŒºï¼Œå› ä¸ºç‰¹åœ°å‡†å¤‡ä¸€äº›å¸¸è§é¢è¯•é—®é¢˜æ¥å·©å›ºæ‰€å­¦ã€‚ å †æ ˆçš„åŒºåˆ«ï¼Ÿ ä¸»è¦çš„åŒºåˆ«å¦‚ä¸‹ï¼š ç”³è¯·æ–¹å¼ï¼šæ ˆç”±ç³»ç»Ÿè‡ªåŠ¨åˆ†é…ï¼Œæ¯”å¦‚å‡½æ•°ä¸­çš„å±€éƒ¨å˜é‡int a ï¼Œè°ƒç”¨å‡½æ•°æ—¶ä¼šè‡ªåŠ¨ä¸ºaå¼€è¾Ÿç©ºé—´ï¼›å †æ˜¯ç¨‹åºå‘˜ç”³è¯·å¹¶è´Ÿè´£é‡Šæ”¾ï¼Œå¹¶æŒ‡æ˜å¤§å°ï¼Œä¾‹å¦‚ int* array= new int[LEN]&#123;1,2,3&#125;; ï¼Œä½†æŒ‡é’ˆarrayæœ¬èº«æ˜¯å­˜äºæ ˆä¸­ã€‚ å­˜å‚¨å†…å®¹ï¼šæ ˆå­˜æ”¾å’Œå‡½æ•°ç›¸å…³çš„æ•°æ®ï¼Œå¦‚å®šä¹‰å±€éƒ¨å˜é‡(ä½†ä¸åŒ…å«staticä¿®é¥°çš„å˜é‡)ã€ä¿å­˜çš„ä¸Šä¸‹æ–‡ç­‰ï¼›å †å­˜æ”¾å‡½æ•°æ— å…³çš„æ•°æ®ï¼Œå¦‚åŠ¨æ€åˆ†é…çš„å†…å­˜ã€‚ å¤§å°é™åˆ¶ï¼šæ ˆç©ºé—´é»˜è®¤æ˜¯4Mï¼Œè¿ç»­çš„ ï¼›å †æ˜¯ä¸è¿ç»­çš„å†…å­˜åŒºåŸŸï¼Œä¸€èˆ¬æ˜¯ 1G - 4Gï¼Œå¤§å°å—é™äºè®¡ç®—æœºç³»ç»Ÿä¸­æœ‰æ•ˆçš„è™šæ‹Ÿå†…å­˜ã€‚ ç”³è¯·æ•ˆç‡ï¼šæ ˆç”±ç³»ç»Ÿè‡ªåŠ¨åˆ†é…ï¼Œè®¡ç®—æœºåœ¨åº•å±‚å¯¹æ ˆæä¾›æ”¯æŒï¼Œé€Ÿåº¦å¿«ï¼›å †æ˜¯ç”±ç¨‹åºå‘˜newåˆ†é…çš„å†…å­˜ï¼Œä¸€èˆ¬é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œä½†æ›´çµæ´»ã€‚ å­˜å‚¨æ•ˆç‡ï¼šæ ˆçš„å­˜å–æ•ˆç‡æ›´é«˜ã€‚è¯·çœ‹ä¸‹ä¾‹ï¼š 123456789int main()&#123; int arr1[] = &#123;1,2,3&#125;; int* arr2 = new int[3]&#123;1,2,3&#125;; int a = arr1[0]; int b = arr2[0]; return 0;&#125; è½¬æˆæ±‡ç¼–è¯­è¨€åˆ†æï¼š new / malloc çš„å¼‚åŒï¼Ÿ éƒ½å¯ç”¨äºå†…å­˜çš„åŠ¨æ€ç”³è¯·ï¼Œè¿”å›ç”¨æˆ·åˆ†é…ä½¿ç”¨ç©ºé—´çš„é¦–åœ°å€ã€‚ æœ¬è´¨ï¼šnewæ˜¯å…³é”®å­—ï¼Œmallocæ˜¯å‡½æ•°ï¼Œæ‰€ä»¥mallocè¿˜éœ€è¦å¼•å…¥åº“æ–‡ä»¶ï¼Œnewä¸ç”¨ï¼› è¿”å›å€¼ç±»å‹ï¼šmallocè¿”å›çš„æ˜¯voidç±»å‹æŒ‡é’ˆï¼ˆå¿…é¡»è¿›è¡Œç±»å‹è½¬æ¢ï¼‰ï¼Œnewè¿”å›çš„æ˜¯å…·ä½“ç±»å‹æŒ‡é’ˆï¼› ç©ºé—´è®¡ç®—ï¼šnewä¼šè‡ªåŠ¨åˆ†é…ç©ºé—´å¤§å°ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®ç±»å‹ä¿¡æ¯è‡ªè¡Œè®¡ç®—ï¼Œmallocéœ€è¦æ‰‹å·¥è®¡ç®—ï¼› ç±»å‹å®‰å…¨ï¼šnewæ˜¯ç±»å‹å®‰å…¨çš„ï¼Œmallocä¸æ˜¯ï¼› 12int *p = new float[2]; // ç¼–è¯‘é”™è¯¯int *p = (int*)malloc(2 * sizeof(double));// ç¼–è¯‘æ— é”™è¯¯ æ„é€ å‡½æ•°ï¼š newè°ƒç”¨åä¸ºoperator newçš„æ ‡å‡†åº“å‡½æ•°åˆ†é…è¶³å¤Ÿç©ºé—´ï¼Œå¦‚æœæ˜¯è‡ªå®šä¹‰ç±»å‹è¿˜ä¼šè°ƒç”¨ç›¸å…³å¯¹è±¡çš„æ„é€ å‡½æ•°ï¼Œmallocåˆ™ä¸ä¼šï¼› åˆ†é…å¤±è´¥æªæ–½ï¼šnewæ˜¯mallocçš„ä¸€å±‚å°è£…ï¼Œå¦‚æœåˆ†é…å¤±è´¥è¿˜ä¼šæœ‰ç›¸åº”æªæ–½æ‰§è¡Œï¼ŒæŠ›å‡ºbac_allocå¼‚å¸¸ï¼›mallocè¿”å›nullã€‚ free / delete çš„å¼‚åŒï¼Ÿ éƒ½å¯ç”¨äºå†…å­˜çš„åŠ¨æ€é‡Šæ”¾ã€‚ æœ¬è´¨ï¼šdelete æ˜¯å…³é”®å­—ï¼Œfree æ˜¯å‡½æ•°ï¼Œæ‰€ä»¥free è¿˜éœ€è¦å¼•å…¥åº“æ–‡ä»¶ï¼Œdelete ä¸ç”¨ï¼› è¿”å›å€¼ç±»å‹ï¼šfreeè¿”å›çš„æ˜¯voidç±»å‹æŒ‡é’ˆï¼ˆå¿…é¡»è¿›è¡Œç±»å‹è½¬æ¢ï¼‰ï¼Œdelete è¿”å›çš„æ˜¯å…·ä½“ç±»å‹æŒ‡é’ˆï¼› ææ„å‡½æ•°ï¼š delete è°ƒç”¨åä¸ºoperator deleteçš„æ ‡å‡†åº“å‡½æ•°åˆ†é…è¶³å¤Ÿç©ºé—´ï¼Œå¦‚æœæ˜¯è‡ªå®šä¹‰ç±»å‹è¿˜ä¼šè°ƒç”¨ç›¸å…³å¯¹è±¡çš„ææ„å‡½æ•°ï¼Œfree åˆ™ä¸ä¼šã€‚ newå®ç°åŸç†ï¼Ÿdeleteå®ç°åŸç†ï¼Ÿ newåŸç†ï¼šoperator newåˆ†é…å†…å­˜ ï¼ˆåº•å±‚æ˜¯mallocå®ç°ï¼‰â€”&gt; ï¼ˆè‡ªå®šä¹‰ç±»å‹ï¼‰åˆ†é…çš„å†…å­˜ä¸Šè°ƒç”¨æ„é€ å‡½æ•°åˆå§‹åŒ–â€”&gt;è¿”å›æŒ‡å‘è¯¥å¯¹è±¡çš„æŒ‡é’ˆï¼› deleteåŸç†ï¼šoperator deleteæ¸…ç†å†…å­˜ ï¼ˆåº•å±‚æ˜¯freeå®ç°ï¼‰â€”&gt; ï¼ˆè‡ªå®šä¹‰ç±»å‹ï¼‰åˆ é™¤å†…å­˜å‰è¿˜ä¼šè°ƒç”¨ææ„å‡½æ•°ï¼› malloc/freeåº•å±‚åŸç†ï¼Ÿ å‚è€ƒå‰æ–‡ã€‚è¿™é‡Œåªç®€ç•¥è¯´æ˜ï¼š mallocï¼šbrkåˆå§‹åŒ–åˆ†é…â€“&gt;åç»­åˆ†é…é€šè¿‡å†…å­˜æ± ï¼šbins+åŒå‘é“¾è¡¨å®ç°â€”&gt;å¤ªå¤§åˆ™top chunk å’Œmmapåˆ†é…ï¼› freeï¼šå°†chunkæ ‡è®°å¯ä½¿ç”¨ï¼Œå¹¶åŠ å…¥ç©ºé—²é“¾è¡¨ã€‚åœ¨ä¸Šä¸€ä¸ªæ­¥éª¤freeçš„æ—¶å€™ï¼Œå‘ç°æœ€é«˜åœ°å€ç©ºé—²å†…å­˜è¶…è¿‡128Kï¼Œè¿˜ä¼šå†…å­˜ç´§ç¼©ã€‚ è¢«freeå›æ”¶çš„å†…å­˜æ˜¯ç«‹å³è¿”è¿˜ç»™æ“ä½œç³»ç»Ÿå—ï¼Ÿ å¦‚å‰ï¼Œfreeå›æ”¶åªæ˜¯æ ‡è¯†è¿™å—å†…å­˜ç©ºé—²ï¼ŒåŒæ—¶ä¼šåŠ å…¥ç©ºé—²é“¾è¡¨ä¸­ç­‰å¾…ä¸‹ä¸€æ¬¡åˆ†é…ã€‚ deleteå’Œfreeå¯ä»¥æ··ç”¨å—? æˆ‘ä»¬çŸ¥é“deleteä¹Ÿåªæ˜¯freeä¸€ç§å°è£…ï¼Œåªæœ‰è‡ªå®šä¹‰ç±»å‹æ—¶deleteä¼šè°ƒç”¨ææ„å‡½æ•°ã€‚newå’ŒmallocåŒç†ã€‚ æ‰€ä»¥åœ¨ä»¥ä¸‹æƒ…å†µæ˜¯å¯ä»¥free/deleteæ··ç”¨ï¼š å¯¹è±¡æ˜¯åŸºæœ¬ç±»å‹æ—¶ã€‚ freeæ‰newç”³è¯·çš„å†…å­˜ã€‚ 123int* a = new int(1);// delete a;free(a); deleteæ‰mallocç”³è¯·çš„å†…å­˜ã€‚ 12 int* a = (int*)malloc(sizeof(int));delete a; ä¸Šé¢ä¹Ÿé€‚ç”¨äºnew/mallocæ··ç”¨ã€‚ è‡ªå®šä¹‰çš„ç±»å‹ï¼Œä½†æ²¡æœ‰æ˜¾ç¤ºå®šä¹‰ææ„å‡½æ•°ã€‚ deleteå’Œfreeæ··ç”¨ã€‚ 12345678910111213141516171819#include &lt;stdlib.h&gt; class test&#123; private: int a; public: test()&#123;a = 0;&#125;;&#125;;int main() &#123; test* t1 = (test*)malloc(sizeof(test)); delete(t1); test* t2 = new test(); free(t2); &#125; å¦‚æœæ˜¯è‡ªå®šä¹‰ç±»å‹ï¼Œmallocæ··ç”¨newéœ€è¦æ˜¾ç¤ºè°ƒç”¨æ„é€ å‡½æ•°çš„é€»è¾‘å®ç°ï¼ˆæˆ–è€…è¯¥ç±»ä¸ä¼šæœ‰æ„é€ å‡½æ•°ä½œç”¨ï¼‰ã€‚ mallocã€reallocã€callocçš„åŒºåˆ«ï¼Ÿ malloc mallocç”³è¯·20ä¸ªintç±»å‹çš„ç©ºé—´ã€‚ 12// void* malloc(unsigned int num_size);int *p = malloc(20*sizeof(int)); realloc mallocç”³è¯·çš„ç©ºé—´çš„å€¼æ˜¯éšæœºåˆå§‹åŒ–çš„ï¼Œcallocç”³è¯·çš„ç©ºé—´çš„å€¼æ˜¯åˆå§‹åŒ–ä¸º0çš„ï¼› 12// void* calloc(size_t n,size_t size);int *p = calloc(20, sizeof(int)); realloc ç»™åŠ¨æ€åˆ†é…çš„ç©ºé—´åˆ†é…é¢å¤–çš„ç©ºé—´ï¼Œç”¨äºæ‰©å……å®¹é‡ã€‚ 1// void realloc(void *p, size_t new_size); ä¸ºä»€ä¹ˆC++æ²¡æœ‰åƒåœ¾å›æ”¶æœºåˆ¶ï¼Ÿè¿™ç‚¹è·ŸJavaä¸å¤ªä¸€æ ·ã€‚ èµ„æºæ¶ˆè€—ã€‚å®ç°ä¸€ä¸ªåƒåœ¾å›æ”¶å™¨ä¼šå¸¦æ¥é¢å¤–çš„ç©ºé—´å’Œæ—¶é—´å¼€é”€ï¼› ä½ éœ€è¦å¼€è¾Ÿä¸€å®šçš„ç©ºé—´ä¿å­˜æŒ‡é’ˆçš„å¼•ç”¨è®¡æ•°å’Œå¯¹ä»–ä»¬è¿›è¡Œæ ‡è®°markï¼› ç„¶åéœ€è¦å•ç‹¬å¼€è¾Ÿä¸€ä¸ªçº¿ç¨‹åœ¨ç©ºé—²çš„æ—¶å€™è¿›è¡Œfreeæ“ä½œã€‚ C++æœ¬èº«åŸå› ã€‚åƒåœ¾å›æ”¶ä¼šä½¿å¾—C++ä¸é€‚åˆè¿›è¡Œå¾ˆå¤šåº•å±‚çš„æ“ä½œã€‚ 3.9 Lambdaè¡¨è¾¾å¼ å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¸¸å¸¸éœ€è¦å®šä¹‰ä¸€ä¸ªç®€å•ã€ç”šè‡³åªè¢«ä½¿ç”¨ä¸€æ¬¡çš„å‡½æ•°ï¼Œé¢å¤–åœ°å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°è°ƒç”¨æ—¢æµªè´¹äº†ç©ºé—´ï¼Œç”šè‡³æœªå¿…æœ‰ç®€åŒ–æˆä¸€è¡Œä»£ç å¥½ç†è§£ã€‚ å¦å¤–ï¼Œå‰é¢çš„å­¦ä¹ æˆ‘ä»¬äº†è§£åˆ°C++æ˜¯ä¸å…è®¸å‡½æ•°åµŒå¥—çš„ï¼Œä½†lambdaå¯ä»¥è¢«å‡½æ•°åµŒå¥—ï¼ˆlambdaå¹¶ä¸æ˜¯å‡½æ•°ï¼Œä¸‹æ–‡ç»†è¯´ï¼‰ã€‚ lambdaè¡¨è¾¾å¼å°±ä¸ºæˆ‘ä»¬åšäº†è¿™ä¹ˆä¸€ä»¶äº‹ï¼šå°†ä¸€ä¸ªç®€å•å‡½æ•°ç®€åŒ–ä¸ºä¸€è¡Œï¼Œè¿˜å…è®¸æˆ‘ä»¬åœ¨ä¸€ä¸ªå‡½æ•°è¿›è¡ŒåµŒå¥—lambdaã€‚ 3.9.1 lambdaåˆè¯† ç¬¬ä¸€ä¸ªlambda C++ä¸­lambdaè¡¨è¾¾å¼æ ¼å¼å¦‚ä¸‹ï¼š 1234[ captureClause ] ( parameters ) -&gt; returnType&#123; Statement;&#125; captureClauseï¼šå…è®¸æˆ‘ä»¬ä½¿ç”¨lambdaå¤–éƒ¨çš„å˜é‡ï¼Œè¿™ä¸€ç‚¹åœ¨3.9.5ä¸­è¯¦è¿°ï¼Œè¿™é‡Œå…ˆç•¥è¿‡ï¼› parametersï¼šä¼ é€’çš„å‚æ•°ï¼Œå¯ç©ºï¼› returnTypeï¼šè¿”å›ç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ¨æ–­ï¼Œå¯ç©ºï¼› Statementï¼šä»£ç ä½“ï¼Œä¸€èˆ¬å°±ä¸€è¡Œï¼Œå½“ç„¶å¤šè¡Œä¹Ÿè¡Œã€‚ ä¸€ä¸ªæœ€ç®€å•çš„lambdaè¡¨è¾¾å¼å¯å®šä¹‰ä¸ºï¼š 1[]()&#123;&#125; ç°åœ¨ä¸¾ä¾‹è¯´æ˜ç”¨æ³•ã€‚ æˆ‘ä»¬ä¹‹å‰å†™è¿‡ä¸€ä¸ªå†’æ³¡å‡½æ•°bubbleSortï¼šå®ƒæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå…è®¸æˆ‘ä»¬ä¼ é€’å®šä¹‰æ’åºè§„åˆ™ï¼Œå³myCompareå‡½æ•°æ¥å®ç°æ’åºã€‚ 1234567891011121314151617181920212223242526272829303132333435363738#include&lt;iostream&gt;using namespace std;// äº¤æ¢æ•°ç»„å€¼void swap(int* arr,int idx_i,int idx_j)&#123; int tmp = arr[idx_i]; arr[idx_i] = arr[idx_j]; arr[idx_j] = tmp;&#125;// è‡ªå®šä¹‰æ’åºè§„åˆ™bool myCompare(int a, int b)&#123; return a &gt; b? false: true;&#125;// å†’æ³¡æ’åºvoid bubbleSort(int* arr, int len, bool (*compare)(int,int))&#123; for(int i = 0; i &lt; len; i++) // å¤–è½®=n-1 // * j=0,æ¯æ¬¡éƒ½æ˜¯ä»å¤´å¼€å§‹æ¯”è¾ƒ for (int j=0; j&lt; len-i-1; j++ ) // å†…è½®=ä½™ä¸‹ä¹±åºæ•°-1 &#123; if (compare(arr[j],arr[j+1])) swap(arr,j,j+1); &#125;&#125;int main()&#123; int array[] = &#123;5,4,1,3,2&#125;; int len = sizeof(array)/sizeof(array[0]); bubbleSort(array,len,myCompare); for(int i=0; i&lt;len ;i++) cout&lt;&lt;array[i]&lt;&lt;endl; return 0;&#125; æˆ‘ä»¬å°†è¿™ä¸ªmyCompareå‡½æ•°æ”¹ä¸ºæ›´ç®€æ´lambdaè¡¨è¾¾å¼ï¼š 1234bool myCompare(int a, int b)&#123; return a &gt; b? false: true;&#125; æ”¹ä¸ºï¼š 1[](int a, int b)&#123;return a &gt; b? false: true;&#125; è¿™æ ·æˆ‘ä»¬å¦‚æ­¤è°ƒç”¨bubbleSortå‡½æ•°ï¼šä»£ç æ›´åŠ çš„ç´§å‡‘ï¼Œä¸Šä¸‹æ–‡æ›´æ¸…æ™°ï¼Œä¸€çœ¼æ˜ç™½æˆ‘ä»¬æ’åºçš„è§„åˆ™ã€‚ 12// bubbleSort(array,len,myCompare);bubbleSort(array,len,[](int a, int b)&#123;return a &gt; b? false: true;&#125;); è¾“å‡ºï¼š 1234512345 lambdaæœ¬è´¨æ¢è®¨ğŸŒŸ è™½ç„¶3.9.2èŠ‚ï¼ˆä¸‹èŠ‚ï¼‰çš„åå­—å«åšâ€œlambdaä¸å‡½æ•°æŒ‡é’ˆâ€ï¼Œä½†å€¼å¾—æå‰å£°æ˜çš„ä¸€ç‚¹æ˜¯ï¼šlambdaå¹¶ä¸æ˜¯å‡½æ•°ï¼Œå®ƒæ˜¯ä¸€ç§ç‰¹æ®Šçš„å¯¹è±¡ï¼Œç§°ä¸ºå‡½æ•°å¯¹è±¡ï¼ˆä¹Ÿç§°ä¸ºå‡½æ•°å­ï¼‰ã€‚å‡½æ•°ä¸èƒ½åµŒå¥—ï¼Œä½†lambdaå¯ä»¥ã€‚ æ€ä¹ˆç†è§£å‡½æ•°å¯¹è±¡ï¼Ÿ C++å‡½æ•°å¯¹è±¡å®è´¨ä¸Šæ˜¯å®ç°äº†å¯¹()æ“ä½œç¬¦çš„é‡è½½ã€‚C++å‡½æ•°å¯¹è±¡ä¸æ˜¯å‡½æ•°æŒ‡é’ˆï¼Œä½†å®ƒçš„è°ƒç”¨æ–¹å¼ä¸å‡½æ•°æŒ‡é’ˆä¸€æ ·ï¼Œåé¢åŠ ä¸ªæ‹¬å·å°±å¯ä»¥äº†ã€‚ 12345678910111213141516171819class Add&#123;public: const int operator()(const int a,const int b) &#123; return a+b; &#125;&#125;;int main()&#123; // addFunctionçš„Addç±»å¯¹è±¡ï¼Œæ­¤ä¹Ÿæ˜¯å‡½æ•°å¯¹è±¡ Add addFunction; // åƒå‡½æ•°ï¼ˆæŒ‡é’ˆï¼‰ä¸€æ ·è°ƒç”¨ cout&lt;&lt;addFunction(2,3)&lt;&lt;endl; // 5 cout&lt;&lt;addFunction.operator()(2,3)&lt;&lt;endl; // 5 cout&lt;&lt;Add()(2,3)&lt;&lt;endl; // 5 return 0;&#125; å‡½æ•°å¯¹è±¡ç›¸æ¯”æ™®é€šå‡½æ•°æœ‰ä»€ä¹ˆå¥½å¤„å—ï¼Ÿ å‡½æ•°å¯¹è±¡å¸¦æœ‰çŠ¶æ€ï¼šå‡½æ•°å¯¹è±¡ç›¸å¯¹äºæ™®é€šå‡½æ•°æ˜¯â€œæ™ºèƒ½å‡½æ•°â€ï¼Œè¿™å°±å¦‚åŒæ™ºèƒ½æŒ‡é’ˆç›¸è¾ƒäºä¼ ç»ŸæŒ‡é’ˆã€‚å› ä¸ºå‡½æ•°å¯¹è±¡é™¤äº†æä¾›å‡½æ•°è°ƒç”¨ç¬¦æ–¹æ³•ï¼Œè¿˜å¯ä»¥æ‹¥æœ‰å…¶ä»–æ–¹æ³•å’Œæ•°æ®æˆå‘˜ã€‚æ‰€ä»¥å‡½æ•°å¯¹è±¡æœ‰çŠ¶æ€ã€‚å³ä½¿åŒä¸€ä¸ªç±»å®ä¾‹åŒ–çš„ä¸åŒçš„å‡½æ•°å¯¹è±¡å…¶çŠ¶æ€ä¹Ÿä¸ç›¸åŒï¼Œè¿™æ˜¯æ™®é€šå‡½æ•°æ‰€æ— æ³•åšåˆ°çš„ã€‚è€Œä¸”å‡½æ•°å¯¹è±¡æ˜¯å¯ä»¥åœ¨è¿è¡Œæ—¶åˆ›å»ºã€‚ æ¯ä¸ªå‡½æ•°å¯¹è±¡æœ‰è‡ªå·±çš„ç±»å‹ï¼šå¯¹äºæ™®é€šå‡½æ•°æ¥è¯´ï¼Œåªè¦ç­¾åä¸€è‡´ï¼Œå…¶ç±»å‹å°±æ˜¯ç›¸åŒçš„ã€‚ä½†æ˜¯è¿™å¹¶ä¸é€‚ç”¨äºå‡½æ•°å¯¹è±¡ï¼Œå› ä¸ºå‡½æ•°å¯¹è±¡çš„ç±»å‹æ˜¯å…¶ç±»çš„ç±»å‹ã€‚è¿™æ ·ï¼Œå‡½æ•°å¯¹è±¡æœ‰è‡ªå·±çš„ç±»å‹ï¼Œè¿™æ„å‘³ç€å‡½æ•°å¯¹è±¡å¯ä»¥ç”¨äºæ¨¡æ¿å‚æ•°ï¼Œè¿™å¯¹æ³›å‹ç¼–ç¨‹æœ‰å¾ˆå¤§æå‡ã€‚ å‡½æ•°å¯¹è±¡ä¸€èˆ¬å¿«äºæ™®é€šå‡½æ•°ï¼šå› ä¸ºå‡½æ•°å¯¹è±¡ä¸€èˆ¬ç”¨äºæ¨¡æ¿å‚æ•°ï¼Œæ¨¡æ¿ä¸€èˆ¬ä¼šåœ¨ç¼–è¯‘æ—¶ä¼šåšä¸€äº›ä¼˜åŒ–ã€‚ å›åˆ°lambdaè¡¨è¾¾å¼ã€‚ æˆ‘ä»¬çœ‹çœ‹ä¸€ä¸ªlambdaè¡¨è¾¾å¼æ˜¯å¦‚ä½•è¢«è½¬æ¢æˆå‡½æ•°å¯¹è±¡ã€‚ å‡†å¤‡ä»£ç ï¼š 12345int main()&#123; auto add = [](auto x, auto y) &#123; return x + y; &#125;; int x = add(2, 3); // 5&#125; ä¾æ—§æ˜¯https://cppinsights.io/ï¼Œè§‚å¯Ÿç¼–è¯‘è¿‡ç¨‹å˜åŒ–ï¼š ç¼–è¯‘å™¨å¦‚ä½•å°†æˆ‘ä»¬å†™çš„lambdaè¡¨è¾¾å¼è½¬æ¢ä¸ºå‡½æ•°å¯¹è±¡ä¾¿ä¸€ç›®äº†ç„¶ï¼š é¦–å…ˆä¸ºæˆ‘ä»¬ç”Ÿæˆç±»__lambda_3_16 ï¼ˆâ‘ å¤„ï¼‰ï¼Œå®ƒæœ‰ä¸€ä¸ªå†…è”å‡½æ•°ï¼ˆâ‘¡å¤„ï¼‰ï¼Œé‡è½½äº†ç¬¦å·()ï¼› ä»£ç 30è¡Œå¤„ï¼Œä¸ºæˆ‘ä»¬ç”Ÿæˆäº†lambdaå‡½æ•°å¯¹è±¡addï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å®šä¹‰çš„lambdaè¡¨è¾¾å¼åï¼› éšåè°ƒç”¨äº†å‡½æ•°å¯¹è±¡add ï¼ˆâ‘¢å¤„ï¼‰ï¼Œå®Œæˆæ•´ä¸ªè½¬æ¢è¿‡ç¨‹ã€‚ å­˜å‚¨lambda è™½ç„¶ä¸€èˆ¬æ¥è¯´æˆ‘ä»¬ä¸éœ€è¦åƒå‡½æ•°ä¸€æ ·ç»™lambdaè¡¨è¾¾å¼ä¸€ä¸ªåå­—ï¼Œä½†æ˜¯æœ‰æ—¶å€™ä¹Ÿéœ€è¦èƒ½å°†lambdaè¡¨è¾¾å¼ï¼ˆä½œä¸ºå³å€¼ï¼‰å­˜å‚¨èµ·æ¥ï¼Œä¾›ä»¥åä½¿ç”¨ã€‚ åœ¨C++ä¸­æä¾›ä¸‰ç§æ–¹å¼ï¼š ä½¿ç”¨å‡½æ•°æŒ‡é’ˆæ–¹å¼å­˜å‚¨ï¼šåªæœ‰åœ¨capture clauseä¸ºç©ºæ—¶ï¼› ä½¿ç”¨functionæ–¹å¼å­˜å‚¨ï¼šcapture clauseä¸ä¸ºç©ºæ—¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ï¼› å…ˆæ¥çœ‹çœ‹å‡½æ•°æŒ‡é’ˆæ–¹å¼ã€‚ å‡½æ•°æŒ‡é’ˆæŒ‡å‘ä¸ä»…é™äºå‡½æ•°ï¼Œåªè¦æ˜¯å‡½æ•°å¯¹è±¡éƒ½å¯ä»¥æŒ‡å‘ã€‚lambdaä½œä¸ºå‡½æ•°å¯¹è±¡ï¼Œè‡ªç„¶æ˜¯å¯ä»¥è¢«å…¶å­˜å‚¨çš„ã€‚ 1bool (*myCompare)(int, int) = [](int a, int b) &#123;return a &gt; b? false: true;&#125;; ç”¨ auto å…³é”®å­—å¯ç®€åŒ–å‡½æ•°æŒ‡é’ˆç±»å‹ä¹¦å†™ï¼š 1auto myCompare = [](int a, int b) &#123;return a &gt; b? false: true;&#125;; å†æ¥å…³æ³¨ä¸‹std::functionæ–¹å¼ã€‚ å‰é¢æˆ‘ä»¬æåˆ°è¿‡ï¼šstd::functionæœ¬è´¨å°±æ˜¯ç±»æ¨¡æ¿ï¼Œä¹Ÿå°±æ˜¯å‡½æ•°å®¹å™¨ï¼Œå¯ä»¥å°†å‡½æ•°æŒ‡é’ˆ/å‡½æ•°è½¬æ¢æˆï¼ˆå‡½æ•°ï¼‰å¯¹è±¡è¿›è¡Œå¤„ç†ã€‚ 1function&lt;bool(int,int)&gt; myCompare = [](int a, int b) &#123;return a &gt; b? false: true;&#125;; lambdaå‚æ•° Lambdaè¡¨è¾¾å¼çš„å‚æ•°å’Œæ™®é€šå‡½æ•°çš„å‚æ•°ç›¸æ¯”æœ‰äº›é™åˆ¶ï¼ˆC++11ï¼‰ï¼š å‚æ•°åˆ—è¡¨ä¸­ä¸èƒ½æœ‰é»˜è®¤å‚æ•°ï¼› ä¸æ”¯æŒå¯å˜å‚æ•°ï¼ˆæ¯”å¦‚ä½¿ç”¨autoå…³é”®å­—ï¼‰ï¼› 12// C++11:ç¼–è¯‘å‡ºé”™ï¼Œå‚æ•°ç±»å‹æ— æ³•ä½¿ç”¨autoauto myCompare = [](auto a, auto b) &#123;return a &gt; b? false: true;&#125;; æ‰€æœ‰å‚æ•°å¿…é¡»æœ‰å‚æ•°åã€‚ å…³äºç¬¬2ç‚¹ï¼Œä»C++14å¼€å§‹ï¼Œlambdaè¡¨è¾¾å¼æ”¯æŒæ³›å‹ï¼šå…¶å‚æ•°å¯ä»¥ä½¿ç”¨è‡ªåŠ¨æ¨æ–­ç±»å‹çš„åŠŸèƒ½ï¼Œè€Œä¸éœ€è¦æ˜¾ç¤ºåœ°å£°æ˜å…·ä½“ç±»å‹ã€‚ å…·ä½“ä»‹ç»å‚è€ƒ3.9.2èŠ‚ã€‚ 3.9.2 æ³›å‹lambdaï¼ˆC++14ï¼‰ ä»€ä¹ˆæ˜¯æ³›å‹lambdaï¼Ÿ ä» C++14 å¼€å§‹ï¼Œæˆ‘ä»¬è¢«å…è®¸autoç”¨äºå‚æ•°ã€‚å½“ lambda å…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªautoå‚æ•°æ—¶ï¼Œç¼–è¯‘å™¨å°†ä»å¯¹ lambda çš„è°ƒç”¨ä¸­æ¨æ–­å‡ºéœ€è¦å“ªäº›å‚æ•°ç±»å‹ã€‚ è¿™ä½¿å¾—å…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªautoå‚æ•°çš„lambdaå¯é€‚ç”¨äºå¤šç§ç±»å‹ï¼Œå®ƒä»¬ä¹Ÿè¢«ç§°ä¸ºæ³›å‹ lambdaã€‚ çœ‹ä¸€ä¸ªå°ä¾‹å­ï¼š 123456int main()&#123; auto add = [](auto x, auto y) &#123; return x + y; &#125;; int x = add(2, 3); // 5 double y = add(2.5, 3.4); // 5.9&#125; æ˜¯ä¸æ˜¯éå¸¸åƒæ¨¡æ¿å‡½æ•°ï¼Ÿ 1234567891011template &lt;typename T&gt;auto add(T x, T y)&#123; return x + y;&#125;int main()&#123; int x = add(2, 3); // 5 double y = add(2.5, 3.4); // 5.9&#125; add(2, 3) ã€add(2.5, 3.4) åˆ†åˆ«è®©å‡½æ•°æ¨¡æ¿ç”Ÿæˆäº†å‡½æ•°å®ä¾‹ add(int, int)ã€ add(double, double)ã€‚ autoå…³é”®å­—è‡ªåŠ¨æ¨æ–­lambdaå‚æ•°ç±»å‹ï¼Œè®©lambdaè¡¨è¾¾å¼èµ·åˆ°äº†å’Œæ¨¡æ¿å‡½æ•°ç›¸åŒçš„æ•ˆæœã€‚å‰é¢æˆ‘ä»¬è¯´åˆ°ï¼Œæ¨¡æ¿å‡½æ•°ä¼šä¸ºæ¯ç§ä¸åŒç±»å‹ç”Ÿæˆå®ä¾‹å‡½æ•°ï¼šé‚£æ³›å‹lambdaä¹Ÿä¼šä¸ºä¸åŒç±»å‹ç”Ÿæˆä¸€ä¸ªlambdaè¡¨è¾¾å¼å—ï¼Ÿ ç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚ å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243int main()&#123; class __lambda_3_16 &#123; public: template&lt;class type_parameter_0_0, class type_parameter_0_1&gt; inline /*constexpr */ auto operator()(type_parameter_0_0 x, type_parameter_0_1 y) const &#123; return x + y; &#125; #ifdef INSIGHTS_USE_TEMPLATE template&lt;&gt; inline /*constexpr */ int operator()(int x, int y) const &#123; return x + y; &#125; #endif #ifdef INSIGHTS_USE_TEMPLATE template&lt;&gt; inline /*constexpr */ double operator()(double x, double y) const &#123; return x + y; &#125; #endif private: template&lt;class type_parameter_0_0, class type_parameter_0_1&gt; static inline auto __invoke(type_parameter_0_0 x, type_parameter_0_1 y) &#123; return x + y; &#125; &#125;; __lambda_3_16 add = __lambda_3_16&#123;&#125;; int x = add.operator()(2, 3); double y = add.operator()(2.5, 3.3999999999999999);&#125; åœ¨ä¸Šé¢ä»£ç ä¸­ï¼š ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆäº†lambdaç±»__lambda_3_16 ç±»__lambda_3_16 ï¼Œæ ¹æ®40ã€41è¡Œå‡½æ•°è°ƒç”¨çš„ä¸åŒå‚æ•°ç±»å‹ï¼Œåˆ†åˆ«ç”Ÿæˆäº†ä¸¤ä¸ªæˆå‘˜å‡½æ•°ã€‚ 12345template&lt;&gt; inline /*constexpr */ int operator()(int x, int y) const template&lt;&gt; inline /*constexpr */ double operator()(double x, double y) const æ³¨æ„åˆ°ï¼Œä¸¤ä¸ªå‡½æ•°éƒ½é‡è½½äº†æ“ä½œç¬¦() ã€‚ ä»£ç 39è¡Œï¼Œç”Ÿæˆäº†ç±»__lambda_3_16 å¯¹è±¡addï¼Œaddå°±æ˜¯æˆ‘ä»¬å®šä¹‰çš„æ³›å‹lambdaåï¼Œæ˜¾ç„¶æ­¤æ—¶addä¹Ÿæ˜¯å‡½æ•°å¯¹è±¡ï¼Œå¯ä»¥ç”¨åå­—()æ–¹å¼è°ƒç”¨ã€‚ 1__lambda_3_16 add = __lambda_3_16&#123;&#125;; ä»£ç 40ã€41è¡Œè°ƒç”¨äº†ä¸åŒçš„ç±»__lambda_3_16 ä¸åŒé‡è½½å‡½æ•°ã€‚ 12int x = add.operator()(2, 3);double y = add.operator()(2.5, 3.3999999999999999); æ›´å¥½åœ°ç†è§£æ³›å‹é—­åŒ…è¡Œä¸ºğŸŒŸ å‰é¢å·²ç»è¯´åˆ°ï¼Œæ³›å‹lambdaä¼šä¸ºæ¯ç§ä¸åŒç±»å‹ç”Ÿæˆæˆå‘˜å‡½æ•° ã€‚ åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿäº†è§£å±€éƒ¨é™æ€å˜é‡åŒæ ·å…·æœ‰å…¨å±€çš„ç”Ÿå‘½å‘¨æœŸï¼Œä¸‹é¢è¿™ä¸ªä¾‹å­å±•ç¤ºäº†è¿™ç§ç‰¹æ€§ï¼š 1234567891011121314151617#include&lt;iostream&gt;#include &lt;typeinfo&gt;using namespace std;auto myCount(int value)&#123; cout&lt;&lt;&quot;the type of your input:&quot;&lt;&lt;typeid(value).name()&lt;&lt;endl; static int count = 1; return count++; &#125;int main()&#123; cout&lt;&lt;myCount(0)&lt;&lt;endl; cout&lt;&lt;myCount(0)&lt;&lt;endl; return 0;&#125; è¾“å‡ºï¼š 1234the type of your input:i1the type of your input:d2 count è™½ç„¶æ˜¯å±€éƒ¨å˜é‡ï¼Œä½†æ˜¯ç”±äºæ˜¯é™æ€å˜é‡å‡½æ•°å­˜å‚¨åœ¨å…¨å±€æ•°æ®æ®µï¼Œå’Œå †æ ˆæ— å…³ï¼Œé€€å‡ºä¹Ÿä¸ä¼šé”€æ¯ã€‚æ‰€ä»¥è¢«myCountå‡½æ•°å…±äº«ï¼Œå¯è¿›è¡Œè®¡æ•°ã€‚ ä½†æ˜¯å¦‚æœæˆ‘ä»¬myCountæ›¿æ¢æˆæ³›å‹å‡½æ•°ï¼Œå³å…è®¸å‚æ•°ç±»å‹ä¸ºautoï¼Œä¸€åˆ‡å¼€å§‹å˜å¾—ä¸ä¸€æ ·äº†ã€‚ 123456789101112131415161718#include&lt;iostream&gt;#include &lt;typeinfo&gt;using namespace std;// C++20æ”¯æŒå‚æ•°ç±»å‹ä¸ºautoauto myCount(auto value)&#123; cout&lt;&lt;&quot;the type of your input:&quot;&lt;&lt;typeid(value).name()&lt;&lt;endl; static int count = 1; return count++; &#125;int main()&#123; cout&lt;&lt;myCount(1)&lt;&lt;endl; cout&lt;&lt;myCount(1.2)&lt;&lt;endl; return 0;&#125; è¾“å‡ºï¼š 1234the type of your input:i1the type of your input:d1 æ­¤æ—¶é™æ€å˜é‡countæ²¡æœ‰è¢«myCountå‡½æ•°å…±äº«ï¼Ÿè¿™æ˜¯å› ä¸ºæ­¤æ—¶myCountå‡½æ•°å·²ç»æ˜¯æ³›å‹å‡½æ•°ã€‚ æ‰§è¡Œä»£ç ç¬¬13è¡Œï¼Œæ¨æ–­å‡ºvalueä¸ºintç±»å‹ï¼Œç¼–è¯‘å™¨ç”Ÿæˆå‡½æ•°int myCount&lt;int&gt;(int value)ï¼Œå®ƒæ‹¥æœ‰è‡ªå·±ä½œç”¨èŒƒå›´çš„é™æ€å˜é‡countï¼› æ‰§è¡Œä»£ç ç¬¬14è¡Œï¼Œç±»ä¼¼çš„ï¼Œæ— æ³•åŒ¹é…ä¸Šä¸€æ¬¡ç”Ÿæˆå‡½æ•°int myCount&lt;int&gt;(int value)ã€‚æ‰€ä»¥ç¼–è¯‘å™¨è¿˜éœ€ç”Ÿæˆå‡½æ•°int myCount&lt;double&gt;(double value)ï¼Œå®ƒä¹Ÿæ‹¥æœ‰è‡ªå·±ä½œç”¨èŒƒå›´çš„é™æ€å˜é‡countã€‚ ä¸¤ä¸ªmyCount æ˜¯é‡è½½å‡½æ•°ï¼Œä½†å®ƒä»¬å¹¶ä¸ä¸€æ ·ï¼Œè‡ªç„¶æ— æ³•å…±äº«å„è‡ªçš„å±€éƒ¨é™æ€å˜é‡countã€‚ ç±»ä¼¼çš„ç»“æœä¹Ÿå‡ºç°åœ¨æ³›å‹lambdaã€å‡½æ•°æ¨¡æ¿ä¸­ã€‚ ä¸‹é¢ä»¥æ³›å‹lambdaä¸ºä¾‹è¿›è¡Œå±•ç¤ºï¼š 12345678910111213141516171819#include &lt;typeinfo&gt;using namespace std;auto myCount&#123; [](auto value) &#123; cout&lt;&lt;&quot;the type of your input:&quot;&lt;&lt;typeid(value).name()&lt;&lt;endl; static int count = 1; return count++; &#125;&#125;;int main()&#123; cout&lt;&lt;myCount(1)&lt;&lt;endl; cout&lt;&lt;myCount(1.2)&lt;&lt;endl; return 0;&#125; è¾“å‡ºï¼š 1234the type of your input:i1the type of your input:d1 æŸ¥çœ‹ç¼–è¯‘è½¬æ¢åçš„ä»£ç éªŒè¯ï¼š 3.9.3 ä½¿ç”¨æ ‡å‡†åº“å‡½æ•° å’Œarrayé…åˆæ—¶ï¼Œlambdaè¡¨è¾¾å¼ä¼šæ¥å—æ•°ç»„ä¸¤ä¸ªå…ƒç´ ï¼Œå®šä¹‰å®ƒä»¬çš„æ¯”è¾ƒè§„åˆ™ lambdaè¡¨è¾¾å¼å¸¸é…åˆæ ‡å‡†åº“å‡½æ•°ä½¿ç”¨ï¼Œç®€æ´ä¼˜é›…ã€‚ ä¸‹é¢å±•ç¤ºäº†å‡ ä¸ªæ’åºç”¨ä¾‹ã€‚ ä¾‹1ï¼šstd::sortå’Œlambdaé…åˆç”¨åœ¨std::arrayä¸Š 1234567891011121314151617181920#include &lt;algorithm&gt;#include &lt;array&gt;#include &lt;iostream&gt;#include &lt;functional&gt; // for std::greaterint main()&#123; std::array&lt;int,6&gt; arr = &#123; 13, 90, 99, 5, 40, 80 &#125;; // æ­¤æ—¶lambdaå‚æ•°æ¥å—æ•°ç»„ä¸¤ä¸ªå…ƒç´ ï¼Œè¿”å›å®ƒä»¬çš„æ¯”è¾ƒè§„åˆ™ï¼ˆboolç±»å‹ï¼‰ // å¯ä»¥ç»“åˆä¹‹å‰æˆ‘ä»¬å†™çš„å†’æ³¡æ’åºè‡ªå®šä¹‰è§„åˆ™ç†è§£ï¼Œæ­¤æ—¶æ˜¯åœ¨åŒé‡forå¾ªç¯ä¸­æ¥å—æ•°ç»„ç›¸é‚»ä¸¤ä¸ªå…ƒç´ è¿›è¡Œæ¯”è¾ƒ std::sort(arr.begin(), arr.end(), [](int a,int b )&#123;return a&gt;b;&#125;); for (int i : arr) &#123; std::cout &lt;&lt; i &lt;&lt; &#x27; &#x27;; &#125; std::cout &lt;&lt; &#x27;\\n&#x27;; return 0;&#125; è¾“å‡ºï¼š 199 90 80 40 13 5 å¯¹äºå¸¸è§çš„æ“ä½œï¼ˆä¾‹å¦‚åŠ æ³•ã€æ±‚åæˆ–æ¯”è¾ƒï¼‰ï¼Œæ ‡å‡†åº“é™„å¸¦äº†è®¸å¤šå¯ç›´æ¥ä½¿ç”¨çš„å‡½æ•°å¯¹è±¡ã€‚ æ¯”å¦‚è¿™ä¸ªä¾‹å­å¯ç”¨std::greateræ›¿ä»£æˆ‘ä»¬å†™çš„lambdaè¡¨è¾¾å¼ã€‚ 1std::sort(arr.begin(), arr.end(), std::greater); ä¾‹2ï¼šæ’åºå¯¹è±¡æ˜¯ç»“æ„æ•°ç»„ã€ç±»æ•°ç»„ã€RDDç­‰ struct Studentç”¨æ¥å­˜å‚¨å­¦ç”Ÿå§“åå’Œåˆ†æ•°çš„ï¼Œå°†ä¸‹é¢Studentæ•°ç»„æŒ‰æˆç»©è¿›è¡Œæ’åºã€‚ 12345678910111213141516171819202122232425262728293031#include &lt;algorithm&gt;#include &lt;array&gt;#include &lt;iostream&gt;#include &lt;string&gt;struct Student&#123; std::string name&#123;&#125;; int points&#123;&#125;; // éœ€è¦åˆå§‹åŒ–å‡½æ•° Student(const char my_name[],const int my_points) &#123; name = std::string(my_name); points = my_points; &#125;&#125;;std::array&lt;Student, 8&gt; arr&#123; &#123; &#123; &quot;Albert&quot;, 3 &#125;, &#123; &quot;Ben&quot;, 5 &#125;, &#123; &quot;Christine&quot;, 2 &#125;, &#123; &quot;Dan&quot;, 8 &#125;, &#123; &quot;Enchilada&quot;, 4 &#125;, &#123; &quot;Francis&quot;, 1 &#125;, &#123; &quot;Greg&quot;, 3 &#125;, &#123; &quot;Hagrid&quot;, 5 &#125; &#125;&#125;; å®ç°æµç¨‹å¦‚ä¸‹ï¼š æ˜ç¡®lambdaæ¥å—çš„å‚æ•°æ˜¯æ•°ç»„ä¸¤ä¸ªå…ƒç´ ï¼Œè¿™é‡Œå…ƒç´ æ˜¯ç»“æ„ä½“Studentå¯¹è±¡ï¼› å‡è®¾ä¸¤ä¸ªStudentå¯¹è±¡åˆ†åˆ«æ˜¯stu1ã€stu2ï¼Œå®ƒä»¬æ¯”è¾ƒçš„è§„åˆ™åº”è¯¥æ˜¯ï¼šstu1.points&gt;stu2.pointsstu1.points&gt;stu2.pointsstu1.points&gt;stu2.points ã€‚ 12345678int main()&#123; // æ’åº std::sort(arr.begin(),arr.end(),[](Student s1,Student s2)&#123;return s1.points&gt;s2.points;&#125;); // è¾“å‡º std::for_each(arr.begin(),arr.end(),[](Student s)&#123;std::cout&lt;&lt;s.name&lt;&lt;std::endl;&#125;); return 0;&#125; 3.9.4 æ•è· ä¸ºä»€ä¹ˆéœ€è¦æ•è· å‰é¢æˆ‘ä»¬è¯´è¿‡lambdaè¡¨è¾¾å¼åŸç†ï¼š æ¯å®šä¸€ä¸ªlambdaè¡¨è¾¾å¼ï¼Œä¼šç”Ÿæˆä¸€ä¸ªåŒ¿åç±»ï¼Œè¿™ä¸ªç±»é‡è½½äº†()è¿ç®—ç¬¦ï¼› ä½¿ç”¨lambdaè¡¨è¾¾å¼ï¼Œå…¶å®å°±æ˜¯è¿”å›ä¸€ä¸ªé—­åŒ…ç±»å®ä¾‹ã€‚ æ—¢ç„¶æ˜¯é—­åŒ…ï¼Œå½“ç„¶æ— æ³•ä½¿ç”¨å¤–éƒ¨çš„å˜é‡ï¼Œè¯·çœ‹ä¸‹ä¾‹ï¼š 123456789101112#include&lt;iostream&gt;using namespace std;int main()&#123; int a = 1; []() &#123; cout&lt;&lt;a&lt;&lt;endl; // æ— æ³•ä½¿ç”¨å¤–éƒ¨å˜é‡a &#125;; return 0;&#125; é€šè¿‡æ•è·å¯ä»¥è®©æˆ‘ä»¬ä½¿ç”¨å¤–éƒ¨å˜é‡aã€‚ æŒ‰å€¼æ•è· ä¸‹é¢å±•ç¤ºäº†æŒ‰å€¼æ•è·æ–¹å¼ã€‚ 123456789101112#include&lt;iostream&gt;using namespace std;int main()&#123; int a = 1; [a]() &#123; cout&lt;&lt;a&lt;&lt;endl; &#125;; return 0;&#125; æŒ‰å€¼æ•è·åªæ˜¯å°†å˜é‡a å¤åˆ¶ä¸€ä»½ï¼Œè€Œä¸”ç”±äºlambdaåŒ¿åç”Ÿæˆäº†é‡è½½å‡½æ•°() è¢«constä¿®é¥°ï¼Œæ‰€ä»¥ä¸èƒ½åœ¨lambdaè¡¨è¾¾å¼å†…éƒ¨ä¿®æ”¹æ•°æ®æˆå‘˜açš„å€¼ã€‚ è¦æƒ³ä¿®æ”¹açš„å€¼ï¼Œéœ€è¦å£°æ˜ä¸ºmutableï¼š 1234[a]()mutable&#123; cout&lt;&lt;a++&lt;&lt;endl; &#125;; æ­¤æ—¶é‡è½½å‡½æ•°çš„constå…³é”®å­—ä¸ä¼šè¢«å£°æ˜ã€‚ ä½†mutableè¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬ä¾æ—§æ— æ³•ä¿®æ”¹lambdaå¤–éƒ¨å˜é‡açš„å€¼ï¼Œæ¯•ç«Ÿlambdaå†…éƒ¨å˜é‡aåªæ˜¯å€¼å¤åˆ¶äº†ä¸€ä»½ã€‚ 123456789101112131415#include&lt;iostream&gt;using namespace std;int main()&#123; int a = 1; auto print = [a]() mutable &#123; cout&lt;&lt;a++&lt;&lt;endl; &#125;; print(); cout&lt;&lt;a&lt;&lt;endl; return 0;&#125; è¾“å‡ºï¼š 1211 è¦æƒ³èƒ½ä¿®æ”¹lambdaå¤–éƒ¨çš„å˜é‡ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š å£°æ˜å¤–éƒ¨å˜é‡ä¸ºaä¸ºstaticï¼š 123456789101112131415#include&lt;iostream&gt;using namespace std;int main()&#123; static int a = 1; auto print = []() &#123; cout&lt;&lt;a++&lt;&lt;endl; &#125;; print(); // 1 cout&lt;&lt;a&lt;&lt;endl; // 2 return 0;&#125; æ³¨æ„åˆ°æ­¤æ—¶ï¼Œä¸ç”¨mutableä¹Ÿå¯ä»¥æ•è·å¤–éƒ¨é™æ€å˜é‡aï¼Œå› ä¸ºæ­¤æ—¶aå…·æœ‰å…¨å±€ç”Ÿå‘½å‘¨æœŸï¼Œå¯è¢«éšå¼æ•è·ï¼ˆä¸‹ä¸ªå°èŠ‚è¯¦ç»†åˆ—å‡ºï¼‰ã€‚ ç”¨å¼•ç”¨æ•è·çš„æ–¹å¼ã€‚ æŒ‰å¼•ç”¨æ•è· å¼•ç”¨æ•è·æ–¹å¼ï¼š 123456789101112131415#include&lt;iostream&gt;using namespace std;int main()&#123; int a = 1; auto print = [&amp;a]() // å¼•ç”¨æ•è· &#123; cout&lt;&lt;a++&lt;&lt;endl; &#125;; print(); cout&lt;&lt;a&lt;&lt;endl; return 0;&#125; è¾“å‡ºï¼š 1212 åŸå› å¾ˆç®€å•ï¼Œä¿®æ”¹å¼•ç”¨æ—¶ä¼šé€šè¿‡é—´æ¥å¯»å€åˆ°æœ¬ä½“å¤–éƒ¨çš„å˜é‡aï¼Œç„¶åè¿›è¡Œä¿®æ”¹çš„ã€‚ æ··åˆæ•è· ä¸Šé¢çš„ä¾‹å­ï¼Œè¦ä¹ˆæ˜¯å€¼æ•è·ï¼Œè¦ä¹ˆæ˜¯å¼•ç”¨æ•è·ï¼ŒLambdaè¡¨è¾¾å¼è¿˜æ”¯æŒæ··åˆçš„æ–¹å¼æ•è·å¤–éƒ¨å˜é‡ï¼Œè¿™ç§æ–¹å¼ä¸»è¦æ˜¯ä»¥ä¸Šå‡ ç§æ•è·æ–¹å¼çš„ç»„åˆä½¿ç”¨ã€‚ æ•è·å½¢å¼ è¯´æ˜ [] ä¸æ•è·ä»»ä½•å¤–éƒ¨å˜é‡ [å˜é‡å, â€¦] é»˜è®¤ä»¥å€¼å¾—å½¢å¼æ•è·æŒ‡å®šçš„å¤šä¸ªå¤–éƒ¨å˜é‡ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰ï¼Œå¦‚æœå¼•ç”¨æ•è·ï¼Œéœ€è¦æ˜¾ç¤ºå£°æ˜ï¼ˆä½¿ç”¨&amp;è¯´æ˜ç¬¦ï¼‰ [this] ä»¥å€¼çš„å½¢å¼æ•è·thisæŒ‡é’ˆ [=] ä»¥å€¼çš„å½¢å¼æ•è·æ‰€æœ‰å¤–éƒ¨å˜é‡ [&amp;] ä»¥å¼•ç”¨å½¢å¼æ•è·æ‰€æœ‰å¤–éƒ¨å˜é‡ [=, &amp;x] å˜é‡xä»¥å¼•ç”¨å½¢å¼æ•è·ï¼Œå…¶ä½™å˜é‡ä»¥ä¼ å€¼å½¢å¼æ•è· [&amp;, x] å˜é‡xä»¥å€¼çš„å½¢å¼æ•è·ï¼Œå…¶ä½™å˜é‡ä»¥å¼•ç”¨å½¢å¼æ•è· éšå¼æ•è· å‰é¢ä»‹ç»çš„éƒ½æ˜¯æ˜¾ç¤ºæ•è·ï¼Œåœ¨C++ä¸­ï¼Œå¦‚æœå˜é‡è¢«å£°æ˜ä¸ºstaticæˆ–è€…constï¼Œå…¶å®æ˜¯å¯ä»¥éšå¼æ•è·ä½¿ç”¨çš„ã€‚ è¯·å›ç­”ï¼šä¸‹é¢å˜é‡å“ªäº›å¯ä»¥åœ¨mainä¸æ˜¾å¼æ•è·å®ƒä»¬çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Ÿ 1234567891011121314151617181920212223242526272829303132333435int i&#123;&#125;;static int j&#123;&#125;;int getValue()&#123; return 0;&#125;int main()&#123; int a&#123;&#125;; constexpr int b&#123;&#125;; static int c&#123;&#125;; static constexpr int d&#123;&#125;; const int e&#123;&#125;; const int f&#123; getValue() &#125;; static const int g&#123;&#125;; static const int h&#123; getValue() &#125;; []() &#123; a; b; c; d; e; f; g; h; i; j; &#125;(); return 0;&#125; é™¤äº†aã€fï¼Œå…¶ä½™éƒ½æ˜¯è¢«staticæˆ–è€…constä¿®é¥°ï¼Œå¯ä»¥éšå¼è¢«lambdaæ•è·ã€‚ 3.X å†è°ˆ auto å‰é¢æˆ‘ä»¬æˆ–å¤šæˆ–å°‘äº†ä½¿ç”¨äº†autoå…³é”®å­—ï¼Œå®ƒçš„ä½œç”¨ä¹Ÿå¾ˆæ˜æ˜¾ï¼šè‡ªåŠ¨ç±»å‹æ¨æ–­ã€‚ 12auto a = 10;typeid(a).name() // i ä½†åƒè¿™ç§ç®€å•ç±»å‹å˜é‡å£°æ˜ä¸å»ºè®®ä½¿ç”¨autoå…³é”®å­—ï¼Œç›´æ¥å†™å‡ºå˜é‡çš„ç±»å‹æ›´åŠ æ¸…æ™°æ˜“æ‡‚ã€‚ ç°åœ¨è¿›è¡Œå¸¸è§åœºæ™¯ä¸‹autoæ€»ç»“&amp;ä½¿ç”¨ã€‚ autoç”¨æ³•æ€»ç»“ ä»£æ›¿å†—é•¿å¤æ‚ã€å˜é‡ä½¿ç”¨èŒƒå›´ä¸“ä¸€çš„å˜é‡å£°æ˜ æ¯”å¦‚ï¼šå­˜å‚¨å‡½æ•°æŒ‡é’ˆæˆ–lambdaè¡¨è¾¾å¼ã€æ¨¡æ¿å¯¹è±¡å£°æ˜ç­‰ã€‚ STLæ ‡å‡†åº“å°†åœ¨åç»­è¿›è¡Œæ€»ç»“ã€‚ æƒ³è±¡ä¸€ä¸‹åœ¨æ²¡æœ‰autoçš„æ—¶å€™ï¼Œæˆ‘ä»¬æ“ä½œæ ‡å‡†åº“æ—¶ç»å¸¸éœ€è¦è¿™æ ·ï¼ˆéš¾å—å•Šå…„å¼Ÿï¼‰ï¼š 12345678910#include&lt;string&gt;#include&lt;vector&gt;int main()&#123; std::vector&lt;std::string&gt; vs; for (std::vector&lt;std::string&gt;::iterator i = vs.begin(); i != vs.end(); i++) &#123; //... &#125;&#125; ä½¿ç”¨autoèƒ½ç®€åŒ–ä»£ç ï¼ˆèˆ’æœäº†ï¼‰ï¼š 12345678910#include&lt;string&gt;#include&lt;vector&gt;int main()&#123; std::vector&lt;std::string&gt; vs; for (auto i = vs.begin(); i != vs.end(); i++) &#123; //.. &#125;&#125; åˆå¦‚å‡½æ•°æŒ‡é’ˆå£°æ˜æ¯”è¾ƒå¤æ‚ï¼Œå­˜å‚¨æ—¶ä¸å¥½ä¹¦å†™ï¼š 12345678910111213#include&lt;iostream&gt;using namespace std;int func(int a)&#123; cout&lt;&lt;a&lt;&lt;endl;&#125;int main()&#123; int (*p_func)(int,int) = func; return 0;&#125; å¦‚æœæœ‰lambdaè¡¨è¾¾å¼ï¼Œç±»ä¼¼ï¼š 1bool (*myCompare)(int, int) = [](int a, int b) &#123;return a &gt; b? false: true;&#125;; autoä¼˜åŒ–åï¼š 1auto (*myCompare)(int, int) = [](int a, int b) &#123;return a &gt; b? false: true;&#125;; åœ¨å®šä¹‰æ¨¡æ¿å‡½æ•°æ—¶ï¼Œç”¨äºå£°æ˜ä¾èµ–æ¨¡æ¿å‚æ•°çš„å˜é‡ç±»å‹ è‹¥ä¸ä½¿ç”¨autoå˜é‡æ¥å£°æ˜vï¼Œåˆ™æ— æ³•è¿›è¡Œå®šä¹‰ï¼Œå› ä¸ºå…¶ç±»å‹æ— æ³•ç¡®å®šã€‚ 123456template &lt;typename _Tx,typename _Ty&gt;void Multiply(_Tx x, _Ty y)&#123; auto v = x*y; std::cout &lt;&lt; v;&#125; åœ¨C++11ä¸­å¦‚æœvä½œä¸ºè¿”å›å€¼ï¼Œè¿˜éœ€è¦åœ¨å°¾éƒ¨æŒ‡å®šè¿”å›ç±»å‹ï¼ˆå¦åˆ™ä¼šå‘å‡ºè­¦å‘Šï¼‰ï¼š 12345template &lt;typename _Tx, typename _Ty&gt;auto multiply(_Tx x, _Ty y)-&gt;decltype(x*y)&#123; return x*y;&#125; decltypeç”¨äºè®¡ç®—å‡ºè¡¨è¾¾å¼x*yçš„ç±»å‹ã€‚ æ³¨æ„äº‹é¡¹ autoå…³é”®å­—å¿…é¡»åˆå§‹åŒ– éœ€è¦åœ¨å£°æ˜æ—¶autoå°±å¯ä»¥æ¨æ–­å‡ºå˜é‡ç±»å‹ã€‚ 12auto a = 10; // okauto b; // error autoä¼šè‡ªåŠ¨å»é™¤å³å€¼çš„å¼•ç”¨ã€constè¯­ä¹‰ï¼Œéœ€è¦æ˜¾ç¤ºå£°æ˜ å³å€¼å¼•ç”¨è¯­ä¹‰è¢«å»é™¤ã€‚ 1234int a = 10;int&amp; b = a;auto c = b; // æ­¤æ—¶cçš„ç±»å‹æ˜¯intä¸æ˜¯int&amp; éœ€è¦æ˜¾ç¤ºå£°æ˜ä¸ºå¼•ç”¨ï¼š 1auto&amp; c = b; // æ­¤æ—¶cçš„ç±»å‹æ‰æ˜¯int&amp; autoè¿˜ä¼šå»é™¤constè¯­ä¹‰ã€‚ 1234const int a = 10;auto b = a; // æ­¤æ—¶bä¸ºintç±»å‹ï¼Œè€Œä¸æ˜¯const intb = 100; // bå¯ä»¥è¢«ä¿®æ”¹ éœ€è¦æ˜¾ç¤ºå£°æ˜ä¸ºconstå¸¸é‡ï¼š 12const auto b = a;b = 100; // éæ³•ï¼Œæ— æ³•è¢«ä¿®æ”¹ æœ‰ä¸ªæœ‰æ„æ€çš„é—®é¢˜ï¼šå¦‚æœauto&amp; è¿˜ä¼šå»é™¤constè¯­ä¹‰å—ï¼Ÿç†è®ºä¸Šæ¥è¯´ï¼Œæ­¤æ—¶å¼•ç”¨æ˜¯æŸç§æ„ä¹‰ä¸Šç­‰ä»·æœ¬ä½“çš„ï¼Œè‡ªç„¶ç±»å‹ä¹Ÿåº”è¯¥æ˜¯ä¸€è‡´çš„ã€‚ ç­”æ¡ˆæ˜¯ä¸ä¼šçš„ã€‚ 1234const int a = 10;auto&amp; b = a; // æ­¤æ—¶bä¸ºconst intï¼Œconstè¯­ä¹‰æœªè¢«å»é™¤b = 100; // éæ³• autoå…³é”®å­—ä¸å»é™¤æŒ‡é’ˆçš„è¯­ä¹‰ è¯·çœ‹ä¸‹ä¾‹ï¼Œautoæ­£ç¡®æ¨å¯¼é™¤äº†å˜é‡çš„ç±»å‹ä¸ºæŒ‡é’ˆï¼š 123456789int main()&#123; int a = 10; auto b = &amp;a; // bæ˜¯int*ç±»å‹ cout&lt;&lt;*b&lt;&lt;endl; // 10 return 0;&#125; autoä¸èƒ½ä½œä¸ºå‡½æ•°å½¢å‚ è¿™æ ·åšçš„è¯ï¼Œå£°æ˜çš„å‡½æ•°å®é™…ä¸Šå°±æ˜¯ä¸ªå‡½æ•°æ¨¡æ¿äº†ã€‚ 1234auto func(auto a)&#123; ...&#125; ä½†è¿™ç§åšæ³•åœ¨C++20ä¸­å·²è¢«æ”¯æŒã€‚ æ›´æ–°è®°å½• 2021-02-8ï¼šæ›´æ–°ç¬”è®° 3.8.1èŠ‚å¢åŠ äº†é™æ€å­˜å‚¨åŒºç›¸å…³æè¿° 2021-01-16 ï¼šæ›´æ–°ç¬”è®° ç¬¬ä¸€æ¬¡æ›´æ–° å‚è€ƒèµ„æ–™ 1.C++ä¸­å¼•ç”¨ä¼ é€’ä¸æŒ‡é’ˆä¼ é€’çš„åŒºåˆ«ï¼šhttps://blog.csdn.net/u013130743/article/details/80806179 â†©2.C/C++ ç¨‹åºçš„å†…å­˜å¸ƒå±€ï¼šhttps://blog.csdn.net/m0_45047300/article/details/118389444 â†©3.å†…å­˜åˆ†é…çš„åŸç†--molloc/brk/mmapï¼šhttp://abcdxyzk.github.io/blog/2015/08/05/kernel-mm-malloc/ â†©4.C++ lambdaè¡¨è¾¾å¼ä¸å‡½æ•°å¯¹è±¡ï¼šhttps://www.jianshu.com/p/d686ad9de817 â†©5.C++ auto å…³é”®å­—çš„ä½¿ç”¨ï¼šhttps://cloud.tencent.com/developer/article/1660750 â†©","categories":[{"name":"C++","slug":"C","permalink":"https://hwh.zone/categories/C/"},{"name":"ä»é›¶å¼€å§‹","slug":"C/ä»é›¶å¼€å§‹","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"},{"name":"C++åŸºç¡€","slug":"C/ä»é›¶å¼€å§‹/C-åŸºç¡€","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/C-%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"C++","slug":"C","permalink":"https://hwh.zone/tags/C/"},{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://hwh.zone/tags/%E6%95%99%E7%A8%8B/"},{"name":"C++åŸºç¡€","slug":"C-åŸºç¡€","permalink":"https://hwh.zone/tags/C-%E5%9F%BA%E7%A1%80/"},{"name":"å‡½æ•°","slug":"å‡½æ•°","permalink":"https://hwh.zone/tags/%E5%87%BD%E6%95%B0/"}]},{"title":"C++ä»é›¶å¼€å§‹ï¼ˆä¸€ï¼‰ï¼šç¯å¢ƒæ­å»ºï¼ˆä¸Šï¼‰VSCodeè¿œç¨‹å¼€å‘","slug":"C++ä»é›¶å¼€å§‹ï¼ˆä¸€ï¼‰ï¼šç¯å¢ƒæ­å»ºï¼ˆä¸Šï¼‰ä¹‹VSCodeè¿œç¨‹å¼€å‘","date":"2021-12-05T08:28:39.054Z","updated":"2022-02-19T09:58:13.301Z","comments":true,"path":"p/18652/","link":"","permalink":"https://hwh.zone/p/18652/","excerpt":"","text":"ğŸŒŸã€ŠC++ä»é›¶å¼€å§‹ã€‹ ç³»åˆ—ï¼Œå¼€å§‹æ›´æ–°ä¸­â€¦ C++ä»é›¶å¼€å§‹https://hwh.zone/p/62712 å®ä¹ çš„æ—¶å€™ï¼Œå…¬å¸ä¼šç»™æ¯ä¸ªäººé…ç½®ä¸€å°è¿œç¨‹æœåŠ¡å™¨ï¼Œç”¨äºæ—¥å¸¸å¼€å‘ã€‚ä½“éªŒä¸‹æ¥æ„Ÿè§‰å¾ˆä¸é”™çš„ï¼š æ‰€æœ‰çš„å¼€å‘ä»£ç ã€ç¯å¢ƒå‡è¿è¡Œåœ¨äº‘ç«¯ï¼Œä»»ä½•ä¸€å°æœºå™¨å¯ç›´è¿å¿«é€Ÿå¼€å‘ï¼Œæœ¬åœ°æ— éœ€ä»»ä½•éƒ¨ç½²ç¯å¢ƒæˆ–è€…ä»£ç ç­‰ï¼› å®é™…C/C++å¼€å‘å¤§éƒ¨åˆ†ä¹Ÿæ˜¯åœ¨Linuxç¯å¢ƒä¸Šå®Œæˆçš„ï¼Œæ‹¥æœ‰ä¸€å°è‡ªå·±çš„ï¼ˆäº‘ï¼‰Linuxå¼€å‘æœºè¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼ˆçœå»äº†Winä¸Šå¼€å‘å„ç§æ€ªé—®é¢˜ï¼‰ã€‚ å› æ­¤ï¼Œåœ¨è¿™ä¸ªC++ç³»åˆ—ä¸­ï¼Œæ‰€æœ‰çš„ä»£ç ä¹Ÿå°†ä»¥ï¼šæœ¬åœ°ï¼ˆWinï¼‰+è¿œç¨‹ï¼ˆLinuxï¼‰å½¢å¼è¿›è¡Œå¼€å‘ã€‚ å¥½äº†ï¼Œè®©æˆ‘ä»¬å¿«é€Ÿå¼€å§‹å§ã€‚ å¿«é€Ÿå¼€å§‹ æœ¬æ–‡å¼€å‘ç¯å¢ƒå¦‚ä¸‹ï¼š æœ¬åœ°ï¼šWin10 + VSCode è¿œç¨‹ï¼šCentOS 7 ï¼ˆè…¾è®¯äº‘ï¼‰ äº‘ä¸Šå¼€å‘ è…¾è®¯äº‘/é˜¿é‡Œäº‘æœåŠ¡å™¨éƒ½æœ‰å­¦ç”Ÿä¼˜æƒ â‰ˆ10å…ƒ/æœˆï¼Œä»¥ä¸‹æ˜¯æ’¸ç¾Šæ¯›è¯¦ç»†è¿‡ç¨‹ã€‚ è¿›å…¥å­¦ç”Ÿä¼˜æƒ è´­ä¹°ç•Œé¢ï¼Œä»¥è…¾è®¯äº‘ä¸ºä¾‹ï¼šè…¾è®¯äº‘å­¦ç”Ÿä¼˜æƒ  åœ°åŒºå¯é€‰ ä¸Šæµ·ä¸‰åŒº &amp; å¹¿å·å››åŒºç­‰ï¼Œå¹¿å·ç¦»é‡åº†æ›´è¿‘ä¸€ç‚¹æ‰€ä»¥é€‰æ‹© å¹¿å·å››åŒº ã€‚ é€‰æ‹©æ“ä½œç³»ç»Ÿä¸ºï¼šCentOS 7.6.64 ä»˜è´¹&amp;è®¾ç½®å¯†ç  ç‚¹å‡»ç«‹å³è´­ä¹°åï¼Œè®°å¾—è®¾ç½®å¥½ç›¸åº”rootå¯†ç ã€‚ ç°åœ¨ä½ å¯ä»¥å³ä¸Šè§’ç‚¹å‡»ï¼šæ§åˆ¶å°â€“&gt;äº‘æœåŠ¡å™¨ï¼ŒæŸ¥çœ‹ä½ è´­ä¹°çš„äº‘æœåŠ¡å™¨ï¼š ä½ åº”è¯¥çœ‹åˆ°ä¸Šå›¾ç±»ä¼¼ç•Œé¢ã€‚çº¢æ¡†éƒ¨åˆ†æ˜¯å¯¹åº” å†…ç½‘&amp;å…¬ç½‘IPï¼Œè®°å½•ä¸‹æ¥åé¢å¤šæ¬¡è¦ç”¨åˆ°ã€‚ æœ¬åœ°é…ç½® é…ç½®SSH Win10é»˜è®¤è‡ªå¸¦å®‰è£…OpenSSHï¼Œä¸‹é¢æˆ‘ä»¬ç›´æ¥è¿›å…¥åˆ°ç¯å¢ƒå˜é‡é…ç½®ç¯èŠ‚ã€‚ ç”¨everythingè¿›è¡Œæœç´¢ssh.exe ï¼Œå¹¶è®°å½•OpenSSHæ–‡ä»¶å¤¹è·¯å¾„ï¼š win10æœç´¢ç¯å¢ƒå˜é‡â€”&gt;ç¼–è¾‘ç³»ç»Ÿç¯å¢ƒå˜é‡â€”&gt;ç¯å¢ƒå˜é‡ï¼Œæ‰¾åˆ°ç³»ç»Ÿå˜é‡(S)â€”&gt;é€‰æ‹©Pathâ€”&gt;ç¼–è¾‘ï¼š é€‰æ‹©ï¼šæ–°å»ºâ€“&gt;è¾“å…¥OpenSSHè·¯å¾„ ä¿å­˜åé€€å‡ºã€‚ æµ‹è¯•ï¼šæ‰“å¼€CMDï¼Œè¾“å…¥ssh ï¼Œå‡ºç°å¦‚ä¸‹åˆ™ç¯å¢ƒå˜é‡é…ç½®æˆåŠŸï¼ˆè¢«ç³»ç»ŸæˆåŠŸè¯†åˆ«ï¼‰ï¼š å®‰è£…ç›¸å…³æ’ä»¶ å®‰è£…Remote-SSHï¼šå·¦ä¾§Extensionå›¾æ ‡ â€”&gt; è¾“å…¥ Remote-SSH â€”&gt;å®‰è£…å³å¯ã€‚æ³¨æ„ï¼Œéœ€è¦è¿œç¨‹å’Œæœ¬åœ°éƒ½è¿›è¡Œå®‰è£…ã€‚ å®‰è£…C/C++æ’ä»¶ï¼šåŒä¸Šå®‰è£…ä¸å†èµ˜è¿°ã€‚ é…ç½®Remote-SSH å¦‚å›¾æ‰€ç¤ºé€‰æ‹©.ssh/config æ–‡ä»¶è¿›è¡Œé…ç½®ï¼š æ‰“å¼€æ–‡ä»¶åï¼Œéœ€è¦è®¾ç½®ä»¥ä¸‹å­—æ®µï¼š Hostï¼šè‡ªå®šä¹‰å³å¯ HostNameï¼šäº‘ä¸»æœºå…¬ç½‘IP Userï¼šç™»é™†çš„ç”¨æˆ· ä»¥ä¸‹ä¸ºç¤ºä¾‹ï¼š ç™»é™†æµ‹è¯• ç‚¹å‡»ä¸‹å›¾æŒ‰é’®è¿›è¡Œç™»é™†ï¼š è¾“å…¥å¯†ç åï¼Œä¾¿å¯ä»¥çœ‹åˆ°è¿œç¨‹æœåŠ¡å™¨å·²ç»æˆåŠŸè¿æ¥ã€‚ hello cpp! ç°åœ¨æˆ‘ä»¬æ¥ç¼–å†™ä¸€ä¸ªç®€å•çš„cppæ–‡ä»¶ï¼Œä½“éªŒè¿œç¨‹ç¼–ç çš„å¿«æ„Ÿã€‚ æ‰“å¼€è¿œç¨‹æœåŠ¡å™¨æ–‡ä»¶å¤¹ Fileâ€”&gt;Open Folderâ€”&gt;æŒ‡å®šæ–‡ä»¶å¤¹è·¯å¾„ã€‚ hello.cppæ–‡ä»¶ç¼–å†™ æ–°å»ºæ–‡ä»¶hello.cppâ€“&gt;ç¼–å†™å¦‚ä¸‹ä»£ç ï¼š 123456#include&lt;iostream&gt;int main()&#123; std::cout&lt;&lt;&quot;Hello Cpp!&quot;&lt;&lt;std::endl;&#125; ç¼–è¯‘è¾“å‡º 1g++ -g hello.cpp -o hello.out æ‰§è¡Œæˆ‘ä»¬åˆšåˆšç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼šhello.out è‡³æ­¤ï¼Œé¡ºåˆ©å®Œæˆäº†åˆæ­¥çš„è¿œç¨‹å¼€å‘ç¯å¢ƒé…ç½®ã€‚ æˆ–è®¸èªæ˜çš„ä½ å·²ç»æƒ³åˆ°ï¼šè¿œç¨‹å¼€å‘æ€ä¹ˆåœ¨æœ¬åœ°è¿›è¡Œdebugå‘¢ï¼Ÿ è¿œç¨‹Debug VSCodeä¸­è¿›è¡Œè¿œç¨‹è°ƒè¯•ï¼Œé€šå¸¸éœ€é…ç½®ä»¥ä¸‹æ–‡ä»¶[1]ï¼š launch.jsonï¼šæœ€é‡è¦çš„æ–‡ä»¶ï¼Œé…ç½®è°ƒè¯•å™¨ä¸éœ€è¦è°ƒè¯•çš„å¯æ‰§è¡Œæ–‡ä»¶è¿›è¡Œè°ƒè¯•ï¼› c_cpp_properties.jsonï¼š cä¸cppé€‰é¡¹ï¼Œå®é™…å¼€å‘ä¸»è¦ä½œç”¨æ˜¯ï¼Œè§£å†³ç³»ç»Ÿç¯å¢ƒçš„å¤´æ–‡ä»¶æ‰¾ä¸åˆ°çš„æƒ…å†µï¼› setting.json ï¼šå¯ä»¥å¯¹VS Codeè¿›è¡Œé¡µé¢é£æ ¼ã€ä»£ç æ ¼å¼ã€å­—ä½“é¢œè‰²å¤§å°ç­‰çš„ç¼–è¾‘è®¾ç½®ï¼Œè¿™é‡Œåªç”¨æ¥å°†å…¶å®ƒè¯­è¨€è¯†åˆ«ä¸ºcppï¼› æ›´å¤šä½œç”¨å¯å‚è€ƒï¼šsettings.jsonæ˜¯ä»€ä¹ˆ?å¯¹VS Codeæœ‰ä»€ä¹ˆç”¨ï¼Ÿ tasks.jsonï¼šé€šå¸¸ç”¨æ¥æ‰§è¡Œæ¯”è¾ƒç®€å•çš„ç¼–è¯‘æŒ‡ä»¤ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸ç”¨ï¼Œä¸è¿›è¡Œè¿‡å¤šä»‹ç»ã€‚ ä¸‹é¢æ­£å¼è¿›è¡Œç›¸å…³é…ç½®ä»‹ç»[2]ã€‚ âš ï¸ ä»¥ä¸‹è¿‡ç¨‹æ‰§è¡Œå‰æï¼š ä½ å·²ç»æ ¹æ®å‰é¢æ­¥éª¤ï¼ŒæˆåŠŸç¼–è¯‘ç”Ÿæˆäº†ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¦‚ï¼šhello.out ï¼› ç¼–è¯‘ç”Ÿæˆçš„æ‰§è¡Œæ–‡ä»¶å¯ä»¥è¢«Debugï¼Œe.g.ï¼Œg++å¸¦ä¸Š-gå‚æ•°ã€‚ launch.json èœå•æ ä¾æ¬¡é€‰æ‹©ï¼šRunâ€”&gt; Add Configurationâ€”&gt; é€‰æ‹©C++ (GDB/LLDB) â€”&gt; é€‰æ‹©g++ build and debug active fileã€‚ å¦‚æœä»¥ä¸Šåˆ›å»ºè¿‡ç¨‹æŠ¥é”™ï¼šVScodeæ‰¾ä¸åˆ°ä»»åŠ¡c/c++ï¼šg++.exeç”Ÿæˆæ´»åŠ¨æ–‡ä»¶ ã€‚ éœ€è¦ä½ å…ˆæ‰“å¼€ä¸€ä¸ªcppæ–‡ä»¶ï¼Œå†æ‰§è¡Œä¸Šé¢æ­¥éª¤ã€‚ VSCodeä¼šæ ¹æ®ä½ çš„æœºå™¨ç¯å¢ƒï¼Œè‡ªåŠ¨åˆ›å»ºlaunch.json ã€‚æ­£å¦‚å‰æ‰€è¨€è¯¥æ–‡ä»¶çš„ä½œç”¨ï¼Œæˆ‘ä»¬éœ€è¿›è¡Œä»¥ä¸‹é…ç½®ï¼š é…ç½®è°ƒè¯•å™¨ä¿¡æ¯ï¼šåˆ›å»ºæ–‡ä»¶æ—¶ç³»ç»Ÿè‡ªåŠ¨é…ç½®å¥½äº†ï¼Œæ‰€ä»¥ä¸ç”¨ç®¡ï¼› é…ç½®å¯æ‰§è¡Œæ–‡ä»¶ï¼šä¹Ÿå°±æ˜¯æˆ‘ä»¬ç¼–è¯‘ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ å½“ç„¶æˆ‘ä»¬è¿˜å¯ä»¥ä¸ºå¯æ‰§è¡Œæ–‡ä»¶è®¾ç½®å‚æ•°ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š æ³¨é‡Šå¤šä½™å‚æ•°ï¼špreLaunchTaskï¼ˆè°ƒè¯•ä¼šè¯å¼€å§‹å‰æ‰§è¡Œçš„ä»»åŠ¡ï¼‰ï¼Œä¸éœ€è¦ã€‚ æœ€ç»ˆå®Œæ•´çš„é…ç½®ç¤ºä¾‹æ–‡ä»¶å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627&#123; &quot;version&quot;: &quot;0.2.0&quot;, &quot;configurations&quot;: [ &#123; &quot;name&quot;: &quot;(gdb) Launch&quot;, &quot;type&quot;: &quot;cppdbg&quot;, &quot;request&quot;: &quot;launch&quot;, // å°†è¦è¿›è¡Œè°ƒè¯•çš„å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„ &quot;program&quot;: &quot;$&#123;workspaceFolder&#125;/bin/hello.out&quot;, // è°ƒè¯•çš„å¯æ‰§è¡Œæ–‡ä»¶å‚æ•° &quot;args&quot;: [], &quot;stopAtEntry&quot;: false, &quot;cwd&quot;: &quot;$&#123;fileDirname&#125;&quot;, &quot;environment&quot;: [], &quot;externalConsole&quot;: false, &quot;MIMode&quot;: &quot;gdb&quot;, &quot;setupCommands&quot;: [ &#123; &quot;description&quot;: &quot;Enable pretty-printing for gdb&quot;, &quot;text&quot;: &quot;-enable-pretty-printing&quot;, &quot;ignoreFailures&quot;: true &#125; ], // &quot;miDebuggerPath&quot;: &quot;/usr/bin/gdb&quot; &#125; ]&#125; c_cpp_properties.json VSCodeå¼€å‘è¿‡ç¨‹ä¸­ï¼Œç»å¸¸å®¹æ˜“å‡ºç°ï¼šæ˜æ˜è·¯å¾„æ­£ç¡®å¼•ç”¨å…¶å®ƒå¤´æ–‡ä»¶ï¼Œä½†VSCodeå°±æ˜¯ä¸€ç›´æç¤ºæ— æ³•æ‰¾åˆ°ã€‚æ‰€ä»¥åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œæä¾›äº†includePathå‚æ•°ï¼Œè®©ç¼–è¯‘å™¨é¡ºåˆ©æ‰¾åˆ°å…¶å®ƒè·¯å¾„çš„æ–‡ä»¶ã€‚ åœ¨èœå•æ ä¸­ï¼šF1â€”&gt;é€‰æ‹©C/Cpp: Edit configurationsï¼Œè®©VSCodeæ ¹æ®å®é™…ç¯å¢ƒè‡ªåŠ¨ç”Ÿæˆc_cpp_properties.jsonã€‚ ä»¥ä¸‹ç»™å‡ºç¤ºä¾‹é…ç½®ï¼š 12345678910111213141516&#123; &quot;configurations&quot;: [ &#123; &quot;name&quot;: &quot;Linux&quot;, &quot;includePath&quot;: [ &quot;$&#123;workspaceFolder&#125;/**&quot; ], &quot;defines&quot;: [], &quot;compilerPath&quot;: &quot;/usr/bin/gcc&quot;, &quot;cStandard&quot;: &quot;gnu11&quot;, &quot;cppStandard&quot;: &quot;gnu++11&quot;, &quot;intelliSenseMode&quot;: &quot;linux-gcc-x64&quot; &#125; ], &quot;version&quot;: 4&#125; setting.json è¿™é‡Œåªç”¨æ¥ï¼Œå°†å…¶å®ƒè¯­è¨€è¯†åˆ«ä¸ºCPPï¼Œä¸å¤ªé‡è¦ã€‚æŒ‰ä»¥ä¸‹é…ç½®å¥½äº†å°±è¡Œã€‚ åœ¨èœå•æ ä¸­ï¼šF1â€”&gt;è¾“å…¥ â€œOpen Settingsâ€â€”&gt; é€‰æ‹© â€œPreferences: Open Settings (JSON)â€ ï¼Œè‡ªåŠ¨ç”Ÿæˆè¯¥æ–‡ä»¶ã€‚ ç¼–è¾‘ä»¥ä¸‹å†…å®¹ï¼š 12345678910111213141516171819202122232425&#123; &quot;files.associations&quot;: &#123; &quot;*.tcc&quot;: &quot;cpp&quot;, &quot;cctype&quot;: &quot;cpp&quot;, &quot;clocale&quot;: &quot;cpp&quot;, &quot;cstdarg&quot;: &quot;cpp&quot;, &quot;cstdint&quot;: &quot;cpp&quot;, &quot;cstdio&quot;: &quot;cpp&quot;, &quot;cstdlib&quot;: &quot;cpp&quot;, &quot;cwchar&quot;: &quot;cpp&quot;, &quot;cwctype&quot;: &quot;cpp&quot;, &quot;exception&quot;: &quot;cpp&quot;, &quot;initializer_list&quot;: &quot;cpp&quot;, &quot;iosfwd&quot;: &quot;cpp&quot;, &quot;iostream&quot;: &quot;cpp&quot;, &quot;istream&quot;: &quot;cpp&quot;, &quot;limits&quot;: &quot;cpp&quot;, &quot;new&quot;: &quot;cpp&quot;, &quot;ostream&quot;: &quot;cpp&quot;, &quot;streambuf&quot;: &quot;cpp&quot;, &quot;type_traits&quot;: &quot;cpp&quot;, &quot;typeinfo&quot;: &quot;cpp&quot; &#125;, &quot;C_Cpp.errorSquiggles&quot;: &quot;Enabled&quot;&#125; æµ‹è¯• ç°åœ¨è®©æˆ‘ä»¬æ³¢æ¾œä¸æƒŠçš„åœ¨hello.cpp ï¼Œæ‰“ä¸Šæ–­ç‚¹ï¼ŒæŒ‰ä¸ŠF5 è¿›è¡Œè°ƒè¯•ã€‚ å‘ç°å¯ä»¥é¡ºåˆ©è¿›è¡Œè¿œç¨‹è°ƒè¯•ï¼Œè·¨è¶Šäº†ä½ ç¦»æŠ€æœ¯ä¸“å®¶çš„ä¸€å°æ­¥ ğŸ˜ƒ ã€‚ ä½“éªŒä¼˜åŒ– å…å¯†ç™»é™† æ¯æ¬¡è¿æ¥åˆ°è¿œç¨‹æœåŠ¡å™¨è¦è¾“å…¥å¯†ç ï¼Œå®åœ¨è®©æš´èºå¼€å‘çš„æˆ‘éš¾ä»¥å¿å—ã€‚ç°åœ¨è®©æˆ‘ä»¬æ¥é…ç½®å…å¯†ç™»é™†ï¼Œå‡å°‘æœåŠ¡å™¨è¢«æˆ‘å†æ¬¡remakeçš„é£é™©ã€‚ æœ¬åœ°ç”Ÿæˆå¯†é’¥å¯¹ æ‰“å¼€cmd â€”&gt; è¾“å…¥ ssh-keygen -t rsa ç”Ÿæˆå¯†é’¥å¯¹ã€‚ åœ¨è¯¥è¿‡ç¨‹ä¼šæœ‰ä¸‰ä¸ªç³»ç»Ÿæç¤ºï¼Œä¸€ç›´å›è½¦å³å¯ï¼› è¯¥è¿‡ç¨‹ä¼šæ˜¾ç¤ºå¯†é’¥ä¿å­˜è·¯å¾„ï¼Œè®°å½•ä¸‹æ¥ã€‚ æ‰“å¼€å¯†é’¥ä¿å­˜è·¯å¾„â€”&gt;æ‰“å¼€id_rsa.pub æ–‡ä»¶ï¼Œå¹¶å¤åˆ¶å…¶å…¨éƒ¨å†…å®¹ã€‚ è¿œç¨‹å¯†é’¥é…ç½® åœ¨VSCodeæ‰“å¼€è¿œç¨‹æœåŠ¡å™¨ç»ˆç«¯ï¼Œè¾“å…¥ï¼š 1vim ~/.ssh/authorized_keys æŒ‰ä¸‹ i è¿›å…¥æ’å…¥æ¨¡å¼ â€”&gt; ç²˜è´´åˆšåˆšå¤åˆ¶çš„å¯†é’¥â€”&gt;æŒ‰ä¸‹:ï¼Œè¾“å…¥wq! è¿›è¡Œä¿å­˜ã€‚ ç™»é™†æµ‹è¯• ç°åœ¨ä½ å¯ä»¥é‡æ–°ç™»é™†è¿œç¨‹æœåŠ¡å™¨ï¼Œå‘ç°å¯ä»¥æ„‰å¿«çš„å…å¯†ç™»é™†äº†ã€‚ å¦‚æœä¾æ—§ä¸è¡Œï¼Œå»ºè®®åœ¨ç¬¬ä¸€æ­¥ç”Ÿæˆå¯†é’¥å¯¹æ—¶ï¼Œé€‰æ‹©è¦†ç›–ä¹‹å‰å¯†é’¥ã€‚ æ–‡ä»¶åŒæ­¥ å·¥ä½œä¸­ç»å¸¸éœ€è¦åŒæ­¥æœ¬åœ°å’ŒæœåŠ¡å™¨ä¹‹é—´çš„æ–‡ä»¶ï¼Œé€šå¸¸æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š FileZillaè½¯ä»¶åŒæ­¥ ï¼› VSCode ä¸­STFPæ’ä»¶åŒæ­¥ï¼› å‘½ä»¤è¡ŒSCPå‘½ä»¤åŒæ­¥ã€‚ åœ¨è¿™é‡Œæˆ‘ä»¬ä¸»è¦ä»‹ç»1ã€2ä¸¤ç§æ–¹å¼ã€‚ STFPæ’ä»¶FileZillaå› ä¸ºæœ¬æ–‡ä¸»è¦æ˜¯åŸºäºVSCodeå¼€å‘ï¼Œæ‰€ä»¥ä»‹ç»ä¸€ä¸‹ä½¿ç”¨VSCodeç›¸å…³æ’ä»¶è¿›è¡ŒåŒæ­¥[3]ã€‚ å®‰è£…SFTPæ’ä»¶ å·¦ä¾§Extensionå›¾æ ‡ â€”&gt; è¾“å…¥ STFP â€”&gt;å®‰è£…å³å¯ã€‚æ³¨æ„ï¼Œéœ€è¦è¿œç¨‹å’Œæœ¬åœ°éƒ½è¿›è¡Œå®‰è£…ã€‚ å·¥ä½œåŒºï¼šå‡†å¤‡ åœ¨æœ¬åœ°è·¯å¾„ä¸‹ï¼šåˆ›å»ºæ–°æ–‡ä»¶å¤¹â€”&gt;ä½¿ç”¨VSCodeæ‰“å¼€ï¼Œæ–‡ä»¶å¤¹è¢«è‡ªåŠ¨åŠ å…¥åˆ°å·¥ä½œåŒºä¸­ã€‚ é…ç½®sftp.json åœ¨ï¼šF1â€”&gt; è¾“å…¥SFTP â€”&gt;é€‰æ‹© SFTP: config ï¼Œè¿›è¡Œæ–‡ä»¶é…ç½®ï¼š 123456789&#123; &quot;name&quot;: &quot;roy-cpp&quot;, // éšæ„ &quot;host&quot;: &quot;119.111.111.111&quot;, // ä½ çš„äº‘ä¸»æœºå…¬ç½‘IP &quot;protocol&quot;: &quot;sftp&quot;, &quot;port&quot;: 22, &quot;username&quot;: &quot;root&quot;, // ç™»é™†ç”¨æˆ·å &quot;remotePath&quot;: &quot;/home/royhuang/syn&quot;, // éšæ„ï¼Œä¸å­˜åœ¨ä¼šè‡ªåŠ¨åˆ›å»º &quot;uploadOnSave&quot;: true&#125; æŒ‡å®šæœ¬åœ°åŒæ­¥æ–‡ä»¶å¤¹ åœ¨ï¼šF1â€”&gt;è¾“å…¥SFTP â€”&gt;é€‰æ‹©SFTP: Sync Local -&gt; Remote ï¼Œå°†ä¼šæ˜¾ç¤ºæœ¬åœ°å·¥ä½œåŒºçš„æ–‡ä»¶å¤¹ã€‚ é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä½œä¸ºæˆ‘ä»¬åŒæ­¥åˆ°è¿œç«¯çš„æœ¬åœ°è·¯å¾„ï¼ˆè¾“å…¥ç™»é™†ç”¨æˆ·å¯†ç åç¡®å®šï¼‰ã€‚ åŒæ­¥è®¾ç½®å®Œæˆåï¼Œåœ¨VSCodeåº•éƒ¨ä¼šæ˜¾ç¤ºSFTPæ ‡è¯†ï¼š ï¼ˆå¯é€‰ï¼‰BUGè§£å†³ï¼šNo Such File è¿™æ˜¯SFTPçš„ä¸€ä¸ªBugï¼Œå‚è€ƒstackoverflowè¿›è¡Œè§£å†³ã€‚ æ‰¾åˆ°sftp.jsï¼ˆWinä¸‹å¯ç”¨everythingè¿›è¡Œæœç´¢ï¼‰ï¼Œé€šå¸¸æ˜¯åœ¨ä»¥ä¸‹è·¯å¾„ï¼šC:\\Users\\account_name\\.vscode\\extensions\\liximomo.sftp-1.12.9\\node_modules\\ssh2-streams\\lib\\sftp.js ä¿®æ”¹ç¬¬388è¡Œï¼Œå°† ï¼š 1if ( code === STATUS_CODE . OK ) &#123; æ›¿æ¢ä¸ºï¼š 1if (code === STATUS_CODE.OK || code === STATUS_CODE.NO_SUCH_FILE) &#123; ä¿å­˜æ–‡ä»¶åï¼Œé‡å¯VSCodeä¸€èˆ¬å¯è§£å†³ã€‚ æµ‹è¯• æœ¬åœ° å‡†å¤‡æµ‹è¯•æ–‡ä»¶ï¼Œæ”¾å…¥ä¹‹å‰è®¾ç½®çš„æœ¬åœ°åŒæ­¥æ–‡ä»¶å¤¹ä¸­ ç”¨VSCodeæ‰“å¼€è¯¥åŒæ­¥æ–‡ä»¶å¤¹ï¼šé€‰æ‹©æµ‹è¯•æ–‡ä»¶â€“&gt;å³å‡»â€“&gt;é€‰æ‹©åº•éƒ¨Upload ä¸Šä¼  è¿œç¨‹æœåŠ¡å™¨ VSCodeæ‰“å¼€è¿œç¨‹æœåŠ¡å™¨åŒæ­¥æ–‡ä»¶å¤¹ ï¼Œå‘ç°æ–‡ä»¶å·²ç»è¢«é¡ºåˆ©ä¸Šä¼  å½“ç„¶è¿œç¨‹æ–‡ä»¶ä¹Ÿå¯åŒæ­¥åˆ°æœ¬åœ°ï¼šé€‰æ‹©æµ‹è¯•æ–‡ä»¶â€“&gt;å³å‡»â€“&gt;é€‰æ‹©åº•éƒ¨DownLoadä¸‹è½½å³å¯ã€‚ å°½æƒ…æ„‰å¿«ç©è€å§ï¼ è¿™é‡Œå¼•ç”¨ä¹‹é—´å†™çš„æ•™ç¨‹ ï¼Œæ–‡ä»¶è·¯å¾„å¯èƒ½æœ‰ç‚¹å¥‡æ€ªï¼Œä½†ä¸å½±å“é˜…è¯»ã€‚ è¯¥å°èŠ‚å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨FTPè½¯ä»¶å°†æœ¬åœ°ï¼ˆWindowsï¼‰æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨(Linux)ã€‚ ä¸‹è½½è½¯ä»¶ FTPå·¥å…·æˆ‘ä»¬é€‰æ‹©Filezilla ï¼Œä¸‹è½½åœ°å€ï¼šFilezillaä¸‹è½½ ç‚¹å‡»è¿›è¡Œä¸‹è½½å®‰è£…ï¼Œå®‰è£…è¿‡ç¨‹è¾ƒä¸ºç®€å•ä¸å†èµ˜è¿°ã€‚ è¿æ¥æœåŠ¡å™¨ ä¾æ¬¡ç‚¹å‡»ï¼šæ–‡ä»¶ --&gt; ç«™ç‚¹ç®¡ç†å™¨ --&gt; æ–°ç«™ç‚¹ ä¸Šä¼ æ–‡ä»¶ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå·¦ä¾§ä¸ºæœ¬åœ°æ–‡ä»¶ï¼Œå³ä¾§ä¸ºæœåŠ¡å™¨æ–‡ä»¶ç›®å½•ï¼ˆé»˜è®¤ä¸º /home/hadoopï¼‰ ä¸Šä¼ å®Œæ¯•åï¼Œå¯åœ¨æœåŠ¡å™¨ä¸ŠæŸ¥çœ‹æ–‡ä»¶ï¼š å†™åœ¨æœ€å çœ‹åˆ°è¿™é‡Œï¼Œç›¸ä¿¡èªæ˜çš„ä½ å·²ç»å°†è¿œç¨‹å¼€å‘ç¯å¢ƒé¡ºåˆ©æ­å»ºèµ·æ¥ã€‚åŒæ—¶ï¼Œä½¿ç”¨g++ç¼–è¯‘äº†ä¸ªå°demoï¼Œè¿˜é¡ºæ‰‹è¿›è¡Œäº†ä¸€æ¬¡ä¸é”™çš„è°ƒè¯•ä½“éªŒã€‚ ä½†åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯¹äºå¦‚ä½•ä¼˜é›…å»ç¼–è¯‘æˆ‘ä»¬çš„é¡¹ç›®ï¼Œæ˜¯ä¸ªä¸å°çš„é—®é¢˜ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å­¦ä¹ ä¸‹ï¼š g++/Makefile/CMake åŸç†åŠåŸºç¡€å‘½ä»¤ï¼› é¡¹ç›®æ„å»ºé€»è¾‘åŠç¼–è¯‘ã€‚ åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ï¼šç¯å¢ƒæ­å»ºï¼ˆä¸‹ï¼‰g++/Makefile/CMakeå¿«é€Ÿå…¥é—¨ ï¼Œå’Œæˆ‘ä¸€èµ·å­¦ä¹ ä¸‹å§ã€‚ æ›´æ–°è®°å½• 2021-12-06 ï¼šç¬¬ä¸€æ¬¡æ›´æ–° åˆç¨¿å®Œæˆå¹¶å‘å¸ƒ å‚è€ƒèµ„æ–™ 1.vscodeä¸­c++çš„ä¸‰ä¸ªé…ç½®æ–‡ä»¶çš„ä½œç”¨ï¼šhttps://blog.csdn.net/zhxue_11/article/details/89457545 â†©2.vscode C++è¿œç¨‹è°ƒè¯•è¿è¡Œï¼šhttps://zhuanlan.zhihu.com/p/104131448 â†©3.vscodeä½¿ç”¨sftpå¿«é€ŸåŒæ­¥æœåŠ¡å™¨æ–‡ä»¶ï¼šhttps://blog.csdn.net/qq_24798295/article/details/90228795 â†©","categories":[{"name":"C++","slug":"C","permalink":"https://hwh.zone/categories/C/"},{"name":"ä»é›¶å¼€å§‹","slug":"C/ä»é›¶å¼€å§‹","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"},{"name":"C++ç¯å¢ƒæ­å»º","slug":"C/ä»é›¶å¼€å§‹/C-ç¯å¢ƒæ­å»º","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/C-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"}],"tags":[{"name":"C++","slug":"C","permalink":"https://hwh.zone/tags/C/"},{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://hwh.zone/tags/%E6%95%99%E7%A8%8B/"},{"name":"è¿œç¨‹å¼€å‘","slug":"è¿œç¨‹å¼€å‘","permalink":"https://hwh.zone/tags/%E8%BF%9C%E7%A8%8B%E5%BC%80%E5%8F%91/"},{"name":"C++ç¯å¢ƒæ­å»º","slug":"C-ç¯å¢ƒæ­å»º","permalink":"https://hwh.zone/tags/C-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"}]},{"title":"C++ä»é›¶å¼€å§‹ï¼ˆäºŒï¼‰ï¼šç¯å¢ƒæ­å»ºï¼ˆä¸‹ï¼‰g++/Makefile/CMakeå¿«é€Ÿå…¥é—¨","slug":"C++ä»é›¶å¼€å§‹ï¼ˆä¸€ï¼‰ï¼šç¯å¢ƒæ­å»ºï¼ˆä¸‹ï¼‰ä¹‹CMakeå¿«é€Ÿå…¥é—¨","date":"2021-12-05T08:24:40.924Z","updated":"2022-02-19T09:58:33.518Z","comments":true,"path":"p/2834/","link":"","permalink":"https://hwh.zone/p/2834/","excerpt":"","text":"ğŸŒŸã€ŠC++ä»é›¶å¼€å§‹ã€‹ ç³»åˆ—ï¼Œå¼€å§‹æ›´æ–°ä¸­â€¦ C++ä»é›¶å¼€å§‹https://hwh.zone/p/62712 ä½œä¸ºä¸€åC/C++ç¨‹åºå‘˜ï¼Œg++/Makefile/CMakeç­‰ç›¸å…³å·¥å…·æ˜¯å¿…å¤‡çš„åŸºç¡€ã€‚ä½†ä¹‹å‰ä½¿ç”¨ä¸­ä¸€ç›´å­˜åœ¨ä¸€äº›å›°æƒ‘ï¼Œå› æ­¤å‚è€ƒäº†ä¸€äº›èµ„æ–™[1][2][3]ï¼ŒåŠ¨ç¬”å†™äº†è¿™ç¯‡æ–‡ç« ï¼Œå¸Œæœ›å¯ä»¥å¸®åŠ©è‡ªå·±æˆ–å¤§å®¶ï¼š å¯¹ç¼–è¯‘å¤„ç†è¿‡ç¨‹æœ‰ä¸ªåŸºæœ¬è®¤çŸ¥ï¼› èƒ½åˆæ­¥ä½¿ç”¨ç¼–è¯‘å·¥å…·g++/Makefile/CMakeï¼› èƒ½åˆæ­¥ä½¿ç”¨CMakeç¼–è¯‘å¤§å‹é¡¹ç›®ã€‚ æ‰ç–å­¦æµ…ï¼Œè‹¥æœ‰é”™è¯¯ä¸åæŒ‡æ­£ã€‚ g++ åœ¨ä¸‹æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†å¤šæ¬¡åˆ©ç”¨äº†g++ç¼–è¯‘ä»£ç ã€‚ä¸ºäº†æ–¹ä¾¿åç»­å­¦ä¹ Makefileå’ŒCMakeï¼Œæˆ‘ä»¬å…ˆè¿›è¡Œç®€å•æ€»ç»“ã€‚ ä»¥hello.cppä¸ºä¾‹ã€‚ 12345678#include &lt;iostream&gt;using namespace std;int main() &#123; cout &lt;&lt; &quot;Hello, World!&quot; &lt;&lt;endl; return 0;&#125; å¿«é€Ÿå…¥é—¨ ç¨‹åº g++ æ˜¯å°† gcc é»˜è®¤è¯­è¨€è®¾ä¸º C++ çš„ä¸€ä¸ªç‰¹æ®Šçš„ç‰ˆæœ¬ï¼Œé“¾æ¥æ—¶å®ƒè‡ªåŠ¨ä½¿ç”¨ C++ æ ‡å‡†åº“è€Œä¸ç”¨ C æ ‡å‡†åº“ã€‚ å½“ç„¶ï¼Œç”¨ gcc æ¥ç¼–è¯‘é“¾æ¥ C++ ç¨‹åºæ˜¯å¯è¡Œçš„ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š 1$ gcc hello.cpp -lstdc++ -o hello.out ä¸è¿‡æˆ‘ä»¬è¿˜æ˜¯ä¸»è¦ç†Ÿæ‚‰g++åŸºæœ¬ç”¨æ³•æ¥ç¼–è¯‘C++ä»£ç ã€‚ g++æœ€ç®€å•çš„ç¼–è¯‘æ–¹å¼ 1$ g++ hello.cpp ç”±äºå‘½ä»¤è¡Œä¸­æœªæŒ‡å®šå¯æ‰§è¡Œç¨‹åºçš„æ–‡ä»¶åï¼Œç¼–è¯‘å™¨é‡‡ç”¨é»˜è®¤çš„ a.outã€‚ç¨‹åºå¯ä»¥è¿™æ ·æ¥è¿è¡Œï¼š 12$ ./a.outHello, world! æŒ‡å®šå¯æ‰§è¡Œç¨‹åºæ–‡ä»¶å æˆ‘ä»¬ä½¿ç”¨ -o é€‰é¡¹æŒ‡å®šå¯æ‰§è¡Œç¨‹åºçš„æ–‡ä»¶åï¼Œä»¥ä¸‹å®ä¾‹ç”Ÿæˆä¸€ä¸ª åä¸ºhello.out çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼š 1$ g++ hello.cpp -o hello.out æ‰§è¡Œ hello.out: 12$ ./hello.outHello, world! å¤šä¸ª C++ ä»£ç æ–‡ä»¶ å¦‚ a.cppã€b.cppï¼Œç¼–è¯‘å‘½ä»¤å¦‚ä¸‹ï¼š 1$ g++ a.cpp cppã€b.cpp -o test.out ç”Ÿæˆä¸€ä¸ª test.outå¯æ‰§è¡Œæ–‡ä»¶ã€‚ g++ æœ‰äº›ç³»ç»Ÿé»˜è®¤æ˜¯ä½¿ç”¨ C++98ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šä½¿ç”¨ C++11 æ¥ç¼–è¯‘ hello.cpp æ–‡ä»¶ï¼š 1g++ -g -Wall -std=c++11 hello.cpp -o hello.out g++ å¸¸ç”¨å‘½ä»¤é€‰é¡¹ é€‰é¡¹ è§£é‡Š -ansi åªæ”¯æŒ ANSI æ ‡å‡†çš„ C è¯­æ³•ã€‚è¿™ä¸€é€‰é¡¹å°†ç¦æ­¢ GNU C çš„æŸäº›ç‰¹è‰²ï¼Œ ä¾‹å¦‚ asm æˆ– typeof å…³é”®è¯ã€‚ -c åªç¼–è¯‘å¹¶ç”Ÿæˆç›®æ ‡æ–‡ä»¶ã€‚ -DMACRO ä»¥å­—ç¬¦ä¸²&quot;1&quot;å®šä¹‰ MACRO å®ã€‚ -DMACRO=DEFN ä»¥å­—ç¬¦ä¸²&quot;DEFN&quot;å®šä¹‰ MACRO å®ã€‚ -E åªè¿è¡Œ C é¢„ç¼–è¯‘å™¨ã€‚ -g ç”Ÿæˆè°ƒè¯•ä¿¡æ¯ã€‚GNU è°ƒè¯•å™¨å¯åˆ©ç”¨è¯¥ä¿¡æ¯ã€‚ -IDIRECTORY æŒ‡å®šé¢å¤–çš„å¤´æ–‡ä»¶æœç´¢è·¯å¾„DIRECTORYã€‚ -LDIRECTORY æŒ‡å®šé¢å¤–çš„å‡½æ•°åº“æœç´¢è·¯å¾„DIRECTORYã€‚ -lLIBRARY è¿æ¥æ—¶æœç´¢æŒ‡å®šçš„å‡½æ•°åº“LIBRARYã€‚ -m486 é’ˆå¯¹ 486 è¿›è¡Œä»£ç ä¼˜åŒ–ã€‚ -o FILE ç”ŸæˆæŒ‡å®šçš„è¾“å‡ºæ–‡ä»¶ã€‚ç”¨åœ¨ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶æ—¶ã€‚ -O0 ä¸è¿›è¡Œä¼˜åŒ–å¤„ç†ã€‚ -O æˆ– -O1 ä¼˜åŒ–ç”Ÿæˆä»£ç ã€‚ -O2 è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚ -O3 æ¯” -O2 æ›´è¿›ä¸€æ­¥ä¼˜åŒ–ï¼ŒåŒ…æ‹¬ inline å‡½æ•°ã€‚ -shared ç”Ÿæˆå…±äº«ç›®æ ‡æ–‡ä»¶ã€‚é€šå¸¸ç”¨åœ¨å»ºç«‹å…±äº«åº“æ—¶ã€‚ -static ç¦æ­¢ä½¿ç”¨å…±äº«è¿æ¥ã€‚ -UMACRO å–æ¶ˆå¯¹ MACRO å®çš„å®šä¹‰ã€‚ -w ä¸ç”Ÿæˆä»»ä½•è­¦å‘Šä¿¡æ¯ã€‚ -Wall ç”Ÿæˆæ‰€æœ‰è­¦å‘Šä¿¡æ¯ã€‚ ç¼–è¯‘è¿‡ç¨‹åˆæ¢ ç°åœ¨è®©æˆ‘ä»¬ä»ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œæ¥ä¸€æ­¥æ­¥æ¢è®¨ä¸‹ç¼–è¯‘è¿‡ç¨‹ã€‚ å‡†å¤‡çš„hello.cppç¨‹åºå¦‚ä¸‹ï¼š 12345678#include &lt;iostream&gt;using namespace std;int main() &#123; cout &lt;&lt; &quot;Hello, World!&quot; &lt;&lt;endl; return 0;&#125; æˆ‘ä»¬å¯¹å®ƒè¿›è¡Œç®€å•çš„ç¼–è¯‘&amp;è¾“å‡ºï¼š 1g++ hello.cpp -o hello.out # æ–‡ä»¶åå¯åŒ…å«æŒ‡å®šè·¯å¾„ å¯ä»¥çœ‹åˆ°ï¼Œå½“å‰è·¯å¾„ç”Ÿæˆäº†hello.outæ–‡ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ hello.outæœ¬è´¨æ˜¯ä»€ä¹ˆ ? ä¸€ä¸ªç¨‹åºï¼ˆæ¯”å¦‚hello.outï¼‰æœ¬è´¨æ˜¯ç”±æ•°æ®æ®µã€ä»£ç æ®µã€.bssæ®µç»„æˆã€‚ ä¸‹å›¾å±•ç¤ºäº†ä¸€ä¸ªè™šæ‹Ÿè¿›ç¨‹ï¼ˆç¨‹åºï¼‰å†…å­˜ç©ºé—´è¿è¡Œæ—¶åˆ†å¸ƒå¸ƒå±€ï¼ˆä¸‹å›¾.bssæ®µå’Œæ•°æ®æ®µåˆå¹¶äº†ï¼‰ï¼š æ³¨æ„åˆ°æ­¤æ—¶è¿˜å¤šäº†å †&amp;æ ˆç”¨æ¥ç»™ç¨‹åºè¿è¡Œæ—¶è¿›è¡Œç©ºé—´åˆ†é…ï¼› é«˜åœ°å€çš„1GBï¼ˆLinuxä¸‹å¦‚æ­¤ï¼ŒWindowsé»˜è®¤2GBï¼‰ç©ºé—´åˆ†é…ç»™å†…æ ¸ï¼Œä¹Ÿç§°ä¸ºå†…æ ¸ç©ºé—´ï¼›å‰©ä¸‹çš„3GBåˆ†ç»™ç”¨æˆ·ï¼Œä¹Ÿç§°ç”¨æˆ·ç©ºé—´ã€‚ æ ˆï¼ˆStackï¼‰ï¼šå­˜å‚¨ä»£ç ä¸­è°ƒç”¨å‡½æ•°ã€å®šä¹‰å±€éƒ¨å˜é‡(ä½†ä¸åŒ…å«staticä¿®é¥°çš„å˜é‡)ã€ä¿å­˜çš„ä¸Šä¸‹æ–‡ç­‰ï¼› æ–‡ä»¶æ˜ å°„åŒºåŸŸ ï¼š æ ˆå’Œå †ä¸­é—´é‚£ä¸ªç©ºç™½åŒºåŸŸã€‚åŠ¨æ€åº“ã€å…±äº«å†…å­˜ç­‰æ˜ å°„ç‰©ç†ç©ºé—´çš„å†…å­˜ï¼Œä¸€èˆ¬æ˜¯ mmap å‡½æ•°æ‰€åˆ†é…çš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚ å †ï¼ˆHeapï¼‰ï¼šå­˜å‚¨é‚£äº›ç”Ÿå­˜æœŸä¸å‡½æ•°è°ƒç”¨æ— å…³çš„æ•°æ®ï¼Œå¦‚åŠ¨æ€åˆ†é…çš„å†…å­˜ã€‚ .bssæ®µï¼šå…¨ç§°Block Started by Symbolï¼Œä¹Ÿå°±æ˜¯æœªè¢«åˆå§‹åŒ–çš„å…¨å±€å˜é‡ã€é™æ€å˜é‡çš„å†…å®¹çš„ä¸€å—å†…å­˜åŒºåŸŸã€‚ æ•°æ®æ®µï¼ˆ.dataï¼‰ï¼šä¿å­˜å…¨å±€å˜é‡ã€å¸¸é‡ã€é™æ€å˜é‡çš„å†…å®¹çš„ä¸€å—å†…å­˜åŒºåŸŸï¼ŒåŒºåˆ«.bssæ®µåœ¨äºå˜é‡å·²ç»è¢«åˆå§‹åŒ–ã€‚æ¯”å¦‚ï¼š ä»£ç æ®µï¼ˆ.text &amp; .initï¼‰ï¼š .text ç”¨äºå­˜æ”¾æ•´ä¸ªç¨‹åºä¸­çš„ä»£ç ï¼› .init ç”¨äºå­˜æ”¾ç³»ç»Ÿä¸­ç”¨æ¥åˆå§‹åŒ–å¯åŠ¨ä½ çš„ç¨‹åºçš„ä¸€æ®µä»£ç  ã€‚ å›æ¥ç¥æ¥ï¼Œè®©æˆ‘ä»¬ç»§ç»­æ‰§è¡Œä¸€ä¸‹è¯•è¯•ï¼š æˆ‘ä»¬çš„ä»£ç è¢«æ­£ç¡®æ‰§è¡Œäº†ã€‚ä½†è¿™æ•´ä¸ªè¿‡ç¨‹çš„ç»†èŠ‚è¢«éšè—äº†ï¼Œå¦‚æœä¸äº†è§£æ¸…æ¥šå¯¹æˆ‘ä»¬ä»¥åçš„å­¦ä¹ å·¥ä½œé˜»ç¢å¾ˆå¤§ã€‚ æ­£å¼å¼€å§‹æ¥è§¦ç»†èŠ‚å‰ï¼Œæˆ‘ä»¬å…ˆå¤§è‡´äº†è§£ä¸‹ä¸Šè¿°ç¼–è¯‘è¿‡ç¨‹ï¼ˆå››æ­¥ï¼‰ï¼š é¢„å¤„ç†ï¼šèµ„æºè¿›è¡Œç­‰ä»·æ›¿æ¢ï¼Œç”Ÿæˆé¢„ç¼–è¯‘æ–‡ä»¶ï¼ˆ.iæ–‡ä»¶ï¼‰ï¼› ç¼–è¯‘ ï¼šç”Ÿæˆæ±‡ç¼–ä»£ç ï¼ˆ.sæ–‡ä»¶ï¼‰ï¼› æ±‡ç¼– ï¼šå°†æ±‡ç¼–ä»£ç æœ€ç»ˆç”Ÿæˆæœºå™¨ä»£ç ï¼ˆ.oæ–‡ä»¶ï¼‰ï¼› é“¾æ¥ï¼šåŠ¨æ€æˆ–é™æ€é“¾æ¥å¤–éƒ¨å‡½æ•°/åº“(lib)/å˜é‡ï¼Œç”Ÿæˆå¯æ‰§è¡Œçš„äºŒè¿›åˆ¶(hex)æ–‡ä»¶/é™æ€åº“(.a)æ–‡ä»¶/åŠ¨æ€åº“(.so)æ–‡ä»¶ã€‚ ç°åœ¨è®©æˆ‘ä»¬æ¥é€æ­¥åˆ†æã€‚ é¢„å¤„ç† é¢„å¤„ç†çš„ä¸»è¦ä½œç”¨ï¼šé€šè¿‡å†…å»ºåŠŸèƒ½å¯¹é¢„å¤„ç†æŒ‡ä»¤è¿›è¡Œç­‰ä»·æ–‡æœ¬æ›¿æ¢ã€‚ ä¸€èˆ¬åœ°ï¼ŒC/C++ ç¨‹åºçš„æºä»£ç ä¸­åŒ…å«ä»¥ # å¼€å¤´çš„å„ç§ç¼–è¯‘æŒ‡ä»¤ï¼Œè¢«ç§°ä¸ºé¢„å¤„ç†æŒ‡ä»¤ã€‚æ ¹æ®ANSI C å®šä¹‰ï¼Œä¸»è¦åŒ…æ‹¬ï¼šæ–‡ä»¶åŒ…å«ã€å®å®šä¹‰ã€æ¡ä»¶ç¼–è¯‘å’Œç‰¹æ®Šæ§åˆ¶ç­‰4å¤§ç±»[7]ã€‚ æ–‡ä»¶åŒ…å«ï¼šä¾‹å¦‚å¸¸ç”¨çš„é¢„å¤„ç†æŒ‡ä»¤ #include &lt;iostream&gt; ï¼Œé¢„ç¼–è¯‘é˜¶æ®µä¼šä½¿ç”¨ç³»ç»Ÿç›®å½•ä¸‹iostreamæ–‡ä»¶ä¸­çš„å…¨éƒ¨å†…å®¹ï¼Œæ›¿æ¢ #include &lt;iostream&gt; ã€‚ #include &quot;xxx.h&quot; ï¼Œè¡¨ç¤ºä½¿ç”¨å½“å‰ç›®å½•ä¸‹xxx.hæ–‡ä»¶ï¼Œ&lt;&gt; æ˜¯åœ¨ç³»ç»Ÿç›®å½•ä¸‹æŸ¥æ‰¾ã€‚ å®å®šä¹‰å±•å¼€åŠå¤„ç†ï¼š é¢„å¤„ç†é˜¶æ®µä¼šå°†å®šä¹‰çš„å¸¸é‡ç¬¦å·è¿›è¡Œç­‰ä»·æ›¿æ¢ï¼Œe.g. #define A 100 , æ‰€æœ‰çš„å®å®šä¹‰ç¬¦å·Aéƒ½ä¼šè¢«æ›¿æ¢æˆ100ã€‚è¿˜ä¼šå°†ä¸€äº›å†…ç½®çš„å®å±•å¼€ï¼Œæ¯”å¦‚ç”¨äºæ˜¾ç¤ºæ–‡ä»¶å…¨è·¯å¾„çš„__FILE__ã€‚ æ¡ä»¶ç¼–è¯‘å¤„ç†: å¦‚ #ifdefï¼Œ#ifndefï¼Œ#elseï¼Œ#elifï¼Œ#endifç­‰ï¼Œè¿™äº›æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤çš„å¼•å…¥ï¼Œä½¿å¾—ç¨‹åºå‘˜å¯ä»¥é€šè¿‡å®šä¹‰ä¸åŒçš„å®æ¥å†³å®šç¼–è¯‘ç¨‹åºå¯¹å“ªäº›ä»£ç è¿›è¡Œå¤„ç†ã€‚é¢„å¤„ç†æ—¶ä¼šå°†é‚£äº›ä¸å¿…è¦çš„ä»£ç è¿‡æ»¤æ‰ï¼Œé˜²æ­¢æ–‡ä»¶é‡å¤åŒ…å«ç­‰ã€‚ å…¶å®ƒï¼šç‰¹æ®Šæ§åˆ¶å¤„ç†â€¦ ç‰¹åˆ«çš„ï¼Œé¢„å¤„ç†è¿‡ç¨‹è¿˜ä¼šå‘ç”Ÿï¼š æ·»åŠ è¡Œå·å’Œæ–‡ä»¶åæ ‡è¯†ï¼š æ¯”å¦‚åœ¨æ–‡ä»¶hello.iä¸­å°±æœ‰ç±»ä¼¼ # 2 &quot;main.c&quot; 2 çš„å†…å®¹ï¼Œä»¥ä¾¿äºç¼–è¯‘æ—¶ç¼–è¯‘å™¨äº§ç”Ÿè°ƒè¯•ç”¨çš„è¡Œå·ä¿¡æ¯ï¼Œç¼–è¯‘æ—¶äº§ç”Ÿç¼–è¯‘é”™è¯¯æˆ–è­¦å‘Šæ—¶èƒ½å¤Ÿæ˜¾ç¤ºè¡Œå·ï¼› æ¸…ç†æ³¨é‡Šå†…å®¹ç­‰ã€‚ åœ¨è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬äº²çœ¼ç§ç§é¢„å¤„ç†çš„ç­‰ä»·æ–‡æœ¬æ›¿æ¢ç©¶ç«Ÿåšäº†ä»€ä¹ˆï¼š 1g++ -E hello.cpp &gt; hello.i # è¾“å‡ºæ–‡ä»¶é‡å®šå‘åˆ°hello.iä¸­ å¯ä»¥çœ‹åˆ°ï¼š æ–‡ä»¶åŒ…å«ï¼šæˆ‘ä»¬ä¹‹å‰å¼•å…¥çš„å¤´æ–‡ä»¶ #include &lt;iostream&gt; ï¼Œé¢„å¤„ç†åä¼šå°†#include &lt;iostream&gt; ä»£ç æ›¿æ¢ä¸ºiostreamæ–‡ä»¶çš„å†…å®¹ï¼Œæ’å…¥åˆ°hello.iä¸­ã€‚ æ–‡ä»¶è¿‡é•¿ï¼Œä»¥ä¸‹æ˜¯éƒ¨åˆ†æˆªå›¾ï¼š ç‰¹åˆ«çš„ï¼Œiostreamæ–‡ä»¶æœ¬èº«ä¹Ÿ#includeäº†å¤´æ–‡ä»¶ï¼ŒåŒæ ·ä¼šè¢«æ›¿æ¢ï¼Œä¹Ÿå°±æ˜¯è¿›è¡Œå¤§æ‚çƒ©åµŒå¥—æ‹¼æ¥ã€‚ å…¶å®ƒï¼Œæ¡ä»¶ç¼–è¯‘å¤„ç†ã€æ·»åŠ è¡Œå·å’Œæ ‡è¯†ç­‰ä¹Ÿä¸€å¹¶å¯ä»¥ï¼ˆå·¦å›¾ï¼‰è§‚å¯Ÿåˆ°ã€‚ ç¼–è¯‘ ç¼–è¯‘è¿‡ç¨‹æ˜¯æ•´ä¸ªç¨‹åºæ„å»ºçš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œä¹Ÿæ˜¯æœ€å¤æ‚çš„éƒ¨åˆ†ä¹‹ä¸€ï¼Œå…¶å·¥ä½œå°±æ˜¯æŠŠé¢„å¤„ç†å®Œç”Ÿæˆçš„ .i æ–‡ä»¶è¿›è¡Œä¸€ç³»åˆ—çš„è¯æ³•åˆ†æã€è¯­æ³•åˆ†æã€è¯­ä¹‰åˆ†æä»¥åŠä»£ç ä¼˜åŒ–ï¼Œæœ€ç»ˆäº§ç”Ÿç›¸åº”çš„æ±‡ç¼–ä»£ç æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯ .s æ–‡ä»¶ã€‚ 1g++ -S hello.cpp -o hello.s # è¯¥å‘½ä»¤åŒ…å«ç­‰ä»·æ›¿æ¢è¿‡ç¨‹ æ‰“å¼€å½“å‰ç›®å½•ä¸‹hello.s ï¼Œå…¥ç›®å³æ˜¯ç†Ÿæ‚‰çš„æ±‡ç¼–å¤©ä¹¦ï¼š æ±‡ç¼– ç›¸å¯¹æ¥è¯´æ¯”è¾ƒç®€å•ï¼Œæ¯ä¸ªæ±‡ç¼–è¯­å¥éƒ½æœ‰ç›¸å¯¹åº”çš„æœºå™¨æŒ‡ä»¤ï¼Œåªéœ€æ ¹æ®æ±‡ç¼–ä»£ç è¯­æ³•å’Œæœºå™¨æŒ‡ä»¤çš„å¯¹ç…§è¡¨ç¿»è¯‘è¿‡æ¥å°±å¯ä»¥äº†ã€‚ æœ‰äº†ä¸Šè¿°æ±‡ç¼–ä»£ç åï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥å°†å…¶è½¬æ¢ä¸ºæœºå™¨ç ï¼ˆ.oæ–‡ä»¶ï¼Œå³object fileï¼‰ã€‚ 1g++ -c hello.cpp -o hello.o # -c è¡¨ç¤ºä¸è¿›è¡Œé“¾æ¥ï¼Œåªç”Ÿæˆç›®æ ‡æ–‡ä»¶ ä½†æ˜¯åœ¨è¿™ä¸€æ­¥è¿˜ä¸èƒ½ç›´æ¥æ‰§è¡Œï¼Œä¼šæŠ¥é”™ï¼š è¿™æ˜¯å› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰é“¾æ¥å…¶å®ƒç›¸åº”çš„æ–‡ä»¶ï¼Œå› æ­¤ä¼šæŠ¥é”™ã€‚æˆ‘ä»¬æ¥è¯•è¯•é“¾æ¥å†ç”Ÿæˆå¯æ‰§è¡Œä»£ç ï¼š 1g++ hello.o -o hello.out ç„¶åæ‰§è¡Œï¼š./hello.out å‡è£…æƒŠå–œçš„å‘ç°ï¼ˆæ˜¯çš„å°±æ˜¯è¿™ä¹ˆæˆç²¾ï¼‰ï¼Œæ–‡ä»¶ç¡®å®å·²ç»è¢«æˆåŠŸæ‰§è¡Œäº†ã€‚ é‚£ä¹ˆï¼Œé“¾æ¥è¿‡ç¨‹ä¸­ç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆä¸€å®šè¦é“¾æ¥åæ‰èƒ½æ‰§è¡Œï¼Ÿ é“¾æ¥ é“¾æ¥è¿‡ç¨‹ç©¶ç«Ÿåšäº†ä»€ä¹ˆï¼Ÿ é“¾æ¥å°±æ˜¯è¿›è¡Œç¬¦å·è§£æå’Œé‡å®šä½çš„è¿‡ç¨‹[4]ã€‚ ç¬¦å·è§£æï¼šæ¯ä¸ªç¬¦å·å¯¹åº”äºä¸€ä¸ªå‡½æ•°ã€ä¸€ä¸ªå…¨å±€å˜é‡æˆ–ä¸€ä¸ªé™æ€å˜é‡ï¼Œç¬¦å·è§£æçš„ç›®çš„æ˜¯å°†æ¯ä¸ªç¬¦å·å¼•ç”¨ä¸ä¸€ä¸ªç¬¦å·å®šä¹‰å…³è”èµ·æ¥ã€‚ é‡å®šä½ï¼šé“¾æ¥å™¨é€šè¿‡æŠŠæ¯ä¸ªç¬¦å·å®šä¹‰ä¸ä¸€ä¸ªå†…å­˜ä½ç½®å…³è”èµ·æ¥ï¼Œç„¶åä¿®æ”¹æ‰€æœ‰å¯¹è¿™äº›ç¬¦å·çš„å¼•ç”¨ï¼Œä½¿å¾—å®ƒä»¬æŒ‡å‘è¿™ä¸ªå†…å­˜ä½ç½®ã€‚ ä¸ºä»€ä¹ˆä¸€å®šè¦è¿›è¡Œç¬¦å·è§£æå’Œé‡å®šä½ï¼Ÿ æ¯”å¦‚æˆ‘ä»¬ä¸Šä¸€æ­¥ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶hello.o æ‰§è¡Œå‡ºé”™ï¼Œå°±æ˜¯å› ä¸ºç¬¦å·std::coutæ²¡æœ‰è¿›è¡Œè§£æå’Œé‡å®šä½ã€‚ åœ¨å‰é¢é¢„å¤„ç†é˜¶æ®µï¼Œæˆ‘ä»¬çŸ¥é“ #include&lt;iostream&gt; ä¼šè¢«æ›¿æ¢ä¸ºå¤´æ–‡ä»¶iostreamä¸­çš„å†…å®¹ã€‚ ä½†å¤´æ–‡ä»¶iostreamä¸­çš„ç¬¦å·ï¼Œå¦‚coutåªæ˜¯è¢«å®šä¹‰ï¼Œå¹¶æ²¡æœ‰å®ç°ï¼š 1extern ostream cout; /// Linked to standard output å…·ä½“æ˜¯åœ¨libstdc++.so.6ä¸­è¢«å®ç°çš„ã€‚æˆ‘ä»¬å¿…é¡»è¦è®©ç¼–è¯‘å™¨æ‰¾åˆ°libstdc++.soï¼Œä¹Ÿå°±æ˜¯é€šè¿‡é“¾æ¥ï¼Œç„¶åå°†coutç¬¦å·è§£æé‡å®šå‘libstdc++.soä¸­ã€‚è¿™æ ·ï¼Œcoutæ‰å¯ä»¥è¢«æ­£å¸¸æ‰§è¡Œã€‚ å‡†å¤‡ä»£ç ç‰‡æ®µ ä¸ºäº†æ›´æ¸…æ¥šçš„è¯´æ˜æ•´ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬ä¸å¦¨æ¢ä¸€ä¸ªä¾‹å­ï¼Œä¸ä½¿ç”¨ç³»ç»Ÿåº“æ–‡ä»¶ï¼ˆé¢„å¤„ç†åçš„æ–‡ä»¶å¤ªå¤æ‚ï¼‰ã€‚ Main.cpp 12345678extern int shared;extern void swap(int*,int*);int main() &#123; int a = 100; swap(&amp;a, &amp;shared);&#125; Libtest.cpp 123456int shared = 1;void swap(int *a, int *b)&#123; *a ^= *b ^= *a ^= *b;&#125; å¯ä»¥çœ‹åˆ°ï¼šLibtest.cppä¸å¼•ç”¨ä»»ä½•å¤–éƒ¨å˜é‡ç¬¦å·ï¼Œä½†Main.cppæ–‡ä»¶ä¼šå¼•ç”¨Libtest.cppä¸­çš„sharedå˜é‡ å’Œ swapå‡½æ•°ã€‚ é‚£ä¹ˆï¼ŒMain.cppä¸­å¤–éƒ¨ç¬¦å·å³sharedå’Œswapï¼Œæ€ä¹ˆæ ·æ‰èƒ½è¢«æ­£ç¡®è§£æåˆ°Libtest.cppä¸­ï¼Ÿ é“¾æ¥å‰ç½®çŸ¥è¯† ä¸‹é¢æœ‰ä¸ç†è§£çš„åœ°æ–¹ï¼Œå»ºè®®é˜…è¯»ï¼šELFå­¦ä¹ â€“é‡å®šä½æ–‡ä»¶ ç»§ç»­è®²è§£å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¡¥å……å‡ ä¸ªåŸºæœ¬æ¦‚å¿µ[5]ï¼š ç¬¦å·å’Œå¤–éƒ¨ç¬¦å· åœ¨é“¾æ¥ä¸­ï¼Œæˆ‘ä»¬å°†å‡½æ•°å’Œå˜é‡ç»Ÿç§°ä¸ºç¬¦å·ï¼ˆSymbolï¼‰ï¼› åœ¨æœ¬ç›®æ ‡æ–‡ä»¶ä¸­ä½¿ç”¨ï¼Œè€Œåˆæ²¡æœ‰åœ¨æœ¬ç›®æ ‡æ–‡ä»¶ä¸­å®šä¹‰çš„å…¨å±€ç¬¦å·ï¼Œç§°ä¸ºå¤–éƒ¨ç¬¦å·ï¼ˆExternal Symbolï¼‰ã€‚ é‡å®šä½è¡¨ ç”±äºå¤–éƒ¨ç¬¦å·åœ¨ç¼–è¯‘åå¹¶ä¸èƒ½ç¡®å®šå…¶ä½ç½®åœ°å€ï¼ˆé“¾æ¥é‡å®šä½åæ‰èƒ½ç¡®å®šï¼‰ã€‚æ‰€ä»¥éœ€è¦è¿™ä¹ˆä¸€ä¸ªæ–‡ä»¶ï¼šå°†éœ€è¦é‡å®šä½çš„å¤–éƒ¨ç¬¦å·è¿›è¡Œæ ‡è®°ã€‚ æ¯”å¦‚ï¼Œç¼–è¯‘åMain.o æ–‡ä»¶ç¬¦å·è¡¨ï¼š 12g++ -c Main.cpp -o Main.o # -cå‚æ•°è¡¨ç¤ºä¸è¿›è¡Œé“¾æ¥objdump -r Main.o å¯è§ï¼Œsharedå’Œswap()ä¸ºå¤–éƒ¨ç¬¦å·è¢«æ ‡è®°è®°å½•ï¼Œæ˜¾ç„¶ï¼Œè¿™äº›ç¬¦å·æ˜¯éœ€è¦è¢«è§£æé‡å®šå‘çš„ã€‚ ä½†æ˜¯Libtest.oä¸­æ²¡æœ‰å¤–éƒ¨ç¬¦å·ï¼Œå› æ­¤å…¶é‡å®šä½è¡¨ä¸ºç©ºã€‚ 12g++ -c Libtest.cpp -o Libtest.oobjdump -r Libtest.o é‡å®šä½è¡¨ä¸ºç©ºã€‚ ç¬¦å·è¡¨ ç›®æ ‡æ–‡ä»¶ä½¿ç”¨ç¬¦å·è¡¨ï¼ˆSymbol Tableï¼‰æ¥è®°å½•æœ¬ç›®æ ‡æ–‡ä»¶ä¸­çš„å…¨å±€ç¬¦å·çš„ä¿¡æ¯ã€‚ e.g. è‡ªå®šä¹‰çš„å…¨å±€ç¬¦å·åœ°å€ï¼Œè¿™æ ·åˆ«çš„æ–‡ä»¶ä¸­å¼•ç”¨äº†è¯¥è‡ªå®šä¹‰çš„å…¨å±€ç¬¦å·ï¼Œå°±å¯ä»¥æŸ¥æ‰¾å…¶çœŸå®åœ°å€ã€‚ Main.oç¬¦å·è¡¨ 1readelf -s Main.o Main.oå®šä¹‰äº†å…¨å±€ç¬¦å·mainï¼Œä½¿ç”¨åˆ°äº†å¤–éƒ¨ç¬¦å·sharedå’Œswapã€‚ UND å³è¡¨ç¤ºæœªå®šä¹‰éœ€è¦é‡å®šä¹‰ã€‚ Libtest.oçš„ç¬¦å·è¡¨ 1readelf -s Libtest.o Libtest.oå®šä¹‰äº†ç¬¦å·sharedå’Œswapï¼Œæ²¡æœ‰ä½¿ç”¨åˆ°å¤–éƒ¨ç¬¦å· é™æ€é“¾æ¥è¿‡ç¨‹ é™æ€é“¾æ¥çš„ä¸»è¦ç›®çš„ï¼š1ï¼‰å°†å¤šä¸ªç›®æ ‡æ–‡ä»¶åˆå¹¶ï¼Œ2ï¼‰å¹¶å¤„ç†å„ç›®æ ‡æ–‡ä»¶ç”¨åˆ°çš„å¤–éƒ¨ç¬¦å·ï¼ˆe.g. main.cpp ä¸­çš„ swapå’Œsharedï¼‰ï¼Œå¯¹å¤–éƒ¨ç¬¦å·é‡å®šä½ï¼ˆ è°ƒæ•´åœ°å€åˆ°çœŸæ­£å®šä¹‰å®ç°çš„åœ°æ–¹ï¼Œe.g.ï¼Œswapâ†’Libtest.oï¼‰ï¼Œæœ€åç”Ÿæˆå¯ç‹¬ç«‹è¿è¡Œçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚ ç°åœ¨æˆ‘ä»¬è¿›è¡Œé™æ€é“¾æ¥ï¼š 123456g++ -static Main.cpp Libtest.cpp -o main.out# ç­‰ä»·äºg++ -c Main.cpp -o Main.og++ -c Libtest.cpp -o Libtest.og++ -static Main.o Libtest.o -o main.out # ç›®æ ‡æ–‡ä»¶ï¼ˆå¯æ‰§è¡Œæ–‡ä»¶ï¼‰é™æ€é“¾æ¥ é™æ€é“¾æ¥ä¸€èˆ¬é‡‡ç”¨ä¸¤æ­¥é“¾æ¥ï¼ˆTwo-pass Linkingï¼‰çš„æ–¹æ³•ï¼Œä¸‹é¢ä»¥é“¾æ¥ Main.cpp å’Œ Libtest.cppä¸ºä¾‹å…·ä½“è¯´æ˜ã€‚ ç¬¬ä¸€æ­¥ï¼Œç©ºé—´ä¸åœ°å€åˆ†é…ã€‚ æ‰«ææ‰€æœ‰çš„ç¼–è¯‘ç”Ÿæˆçš„å¯é‡å®šå‘æ–‡ä»¶ï¼ˆMain.oå’ŒLibtest.oï¼‰å¹¶åˆå¹¶ï¼ŒåŒæ—¶è·å¾—å…¶ä»¥ä¸‹ä¿¡æ¯ï¼š å…¨å±€ç¬¦å·è¡¨ï¼šåŒ…å«æ‰€æœ‰çš„ç¬¦å·å®šä¹‰å’Œç¬¦å·å¼•ç”¨ï¼› ç¬¦å·å çŠ¶æ€ æ‰€åœ¨ç›®æ ‡æ–‡ä»¶ â€¦ main å®šä¹‰ Main shared å¼•ç”¨ Main swap å¼•ç”¨ Mian shared å®šä¹‰ Lib swap å®šä¹‰ Lib æ®µä¿¡æ¯ï¼šå„ä¸ªæ®µçš„é•¿åº¦ã€å±æ€§å’Œä½ç½®ã€‚ ç¬¬äºŒæ­¥ï¼Œç¬¦å·è§£æä¸é‡å®šä½ã€‚ æŸ¥çœ‹å…¨å±€ç¬¦å·è¡¨ï¼Œå‘ç°sharedéœ€è¦é‡å®šä½ï¼› åœ¨å…¨å±€ç¬¦å·è¡¨å‘ç°Libtest.oå®šä¹‰äº†sharedï¼› æŸ¥çœ‹Libtest.oçš„ç¬¦å·è¡¨ä»¥åŠç¬¬ä¸€æ­¥çš„æ®µä¿¡æ¯ï¼Œç¡®å®šsharedçš„åœ°å€ï¼› å†æŸ¥çœ‹Main.oçš„é‡å®šä½è¡¨ï¼Œæ‰¾åˆ°æ‰€æœ‰sharedéœ€è¦é‡å®šä½çš„åœ°å€ï¼Œä¿®æ”¹ä¸ºsharedçš„çœŸå®åœ°å€ï¼› Main.oå’ŒLibtest.oè¢«åˆå¹¶ï¼Œå¿…é¡»è¦æŸ¥çœ‹é‡å®šä½è¡¨ï¼ŒçŸ¥é“å“ªäº›æ˜¯å±äºMainçš„shareï¼Œè¿›è¡Œé‡å®šä½ã€‚ ç»§ç»­æŸ¥çœ‹å…¨å±€ç¬¦å·è¡¨ï¼Œå‘ç°swap éœ€è¦é‡å®šä½ï¼Œè¿‡ç¨‹åŒä¸Šï¼› ç›´è‡³æ‰€æœ‰çš„ç¬¦å·å¼•ç”¨éƒ½è¢«ä¿®æ”¹ä¸ºçœŸå®åœ°å€ï¼Œç»“æŸã€‚ æˆ‘ä»¬å¯ä»¥åç¼–è¯‘ä¸€ä¸‹æœ€åçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œçœ‹çœ‹æ˜¯å¦å¦‚ä¸Šæ‰€ç¤ºå·²ç»å…¨éƒ¨é‡å®šä¹‰å®Œæˆï¼š 1objdump -d main.out &gt; tmp.txt ä¾‹å¦‚ï¼Œä¸»å‡½æ•°ä¸­è°ƒç”¨çš„swapå‡½æ•°çš„åœ°å€è¢«ä¿®æ­£ä¸º40050dã€‚ å…¶å®ƒä¿¡æ¯åˆå¹¶ åœ¨é™æ€é“¾æ¥ä¸‹ï¼Œé“¾æ¥å™¨è¿˜ä¼šå°†å„ä¸ªç›®æ ‡æ–‡ä»¶çš„ä»£ç æ®µå’Œæ•°æ®æ®µã€åˆå¹¶æ‹·è´ã€‘åˆ°å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå› æ­¤é™æ€é“¾æ¥ä¸‹å¯æ‰§è¡Œæ–‡ä»¶å½“ä¸­åŒ…å«äº†æ‰€ä¾èµ–çš„æ‰€æœ‰ä»£ç å’Œæ•°æ®ã€‚ åœ¨æœ¬ä¾‹ä¸­ï¼ŒMain.oå’ŒLibtest.oä¸­çš„ä»£ç æ®µå’Œæ•°æ®æ®µè¢«åˆå¹¶æ‹·è´åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œç„¶åè¿›è¡Œè§£æé‡å®šä½ã€‚ ä¸‹å›¾è¿›è¡Œäº†å›¾è§£å±•ç¤ºåˆå¹¶è¿‡ç¨‹ã€‚ çœ‹åˆ°è¿™é‡Œï¼Œç›¸ä¿¡ä½ å·²ç»æ˜ç™½ï¼Œåœ¨é™æ€é“¾æ¥ä¸­å¤–éƒ¨ç¬¦å·ï¼š ä¸ºä»€ä¹ˆè¦è¢«è§£æé‡å®šä½ï¼šå¤–éƒ¨ç¬¦å·èƒ½è¢«å®šä½åˆ°çœŸæ­£å®ç°çš„åœ°æ–¹ï¼› å¦‚ä½•è¢«è§£æé‡å®šä½ï¼šé€šè¿‡ç¬¦å·è¡¨å®ç°ã€‚ åŒæ—¶ï¼Œé™æ€é“¾æ¥è¿˜ä¼šå°†éœ€è¦çš„ç›®æ ‡æ–‡ä»¶è¿›è¡Œåˆå¹¶ï¼Œå› æ­¤ä½“ç§¯æ¯”è¾ƒå¤§ã€‚ åŠ¨æ€é“¾æ¥è¿‡ç¨‹ ä¸ºä»€ä¹ˆéœ€è¦åŠ¨æ€é“¾æ¥ï¼Ÿ è¯•è¯•æƒ³æƒ³ä»¥ä¸‹ä¸¤ç§ç³Ÿç³•çš„æƒ…å†µï¼š ç©ºé—´æµªè´¹ï¼š å‡è®¾ä½ æ˜¯ä¸ªè…¾è®¯æŠ€æœ¯ä¸“å®¶ï¼Œä½ å†™çš„ä»£ç Libtest.cppæ€§èƒ½æŒºå¥½ï¼Œäºæ˜¯å¼€æºå‡ºæ¥ç”Ÿæˆä¸€ä¸ªé™æ€åº“ç»™å…¶å®ƒäººä¹Ÿç”¨ç”¨ã€‚ 12gcc -c Libtest.cpp -o libtest.oar cqs libtest.a libtest.o githubååº”ä¸é”™ï¼Œä½ çš„å¤§ä½œå¾ˆå—æ¬¢è¿ï¼ŒåŸºæœ¬æœºå™¨ä¸Šæ¯ä¸ªç¨‹åºéƒ½è°ƒç”¨äº†ä½ çš„åº“ã€‚ä½†æ˜¯ç”±äºæ¯ä¸ªç¨‹åºéƒ½é™æ€é“¾æ¥ä½ çš„é™æ€åº“libtest.aï¼Œå¯¼è‡´æ¯ä¸ªç¨‹åºéƒ½ä¼šã€æ‹·è´ã€‘Libtest.aä¸­çš„ä»£ç ï¼Œé€ æˆäº†å¾ˆå¤§çš„ç©ºé—´æµªè´¹ã€‚ æ›´æ–°å›°éš¾ï¼š ä¸å¹¸çš„æ˜¯ï¼Œä½ ä¸ä½†æŠ€æœ¯ç²¾æ¹›å¤´å‘ç¨€å°‘åŒæ—¶ç²¾åŠ›æ—ºç››ï¼Œç»å¸¸å¯¹ä½ çš„å¤§ä½œlibtest.aè¿›è¡Œæ›´æ–°ã€‚è¿™æ ·ä½ æ¯æ›´æ–°ä¸€æ¬¡ï¼Œä¸ºäº†è·Ÿä¸Šä½ æŠ€æœ¯ä¸“å®¶çš„æ­¥ä¼ï¼Œæ‰€æœ‰çš„ç¨‹åºéƒ½è¦é‡æ–°ç¼–è¯‘ä¸€æ¬¡ï¼Œæ¥é™æ€é“¾æ¥æ‹·è´ä½ çš„æœ€æ–°ä»£ç ã€‚æƒ…å†µä¸¥é‡çš„è¯ï¼Œè¿™å¯èƒ½æ”¶åˆ°ä¸€äº›ç¤¼è²Œçš„é—®å€™ã€‚ èªæ˜çš„ä½ ï¼Œè‡ªç„¶æƒ³åˆ°å·å¬å¤§å®¶ä½¿ç”¨åŠ¨æ€é“¾æ¥ï¼š å¯¹é‚£äº›ç»„æˆç¨‹åºçš„ç›®æ ‡æ–‡ä»¶ï¼Œæ¯”å¦‚ä½ çš„libtestï¼Œä¸è¿›è¡Œç›´æ¥é“¾æ¥ï¼Œè€Œåªæ˜¯å°†å¿…è¦ä¿¡æ¯å†™å…¥äº†å¯æ‰§è¡Œæ–‡ä»¶ï¼Œç­‰åˆ°ç¨‹åºè¦è¿è¡Œæ—¶æ‰è¿›è¡Œé“¾æ¥ã€‚è¿™æ ·ä»–ä»¬åªç”¨ä¸‹è½½ä½ å¤§ä½œlibtest.soæœ€æ–°çš„ç‰ˆæœ¬ï¼Œå¯æ‰§è¡Œæ–‡ä»¶è¿è¡Œæ—¶å°±ä¼šè‡ªåŠ¨ï¼ˆåŠ¨æ€ï¼‰é“¾æ¥æ–°ç‰ˆæœ¬ï¼Œä»è€Œä¸ç”¨é‡æ–°ç¼–è¯‘äº†ã€‚ äºæ˜¯ä½ å¼€å¿ƒåœ°å¼€å§‹å°è¯•ä¸‹åŠ¨æ€é“¾æ¥ï¼š 1234567# ç”ŸæˆåŠ¨æ€åº“# ç”Ÿæˆçš„åŠ¨æ€åº“çš„åå­—å¿…é¡»æ˜¯lib+åå­—.sog++ -shared -o libtest.so Libtest.cpp# ä¿å­˜åœ¨/usr/lib64/ä¸‹mv libtest.so /usr/lib64/# åŠ¨æ€é“¾æ¥ä½ çš„å¤§ä½œlibtest.soï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨-ltestæ¥å¼•ç”¨g++ Main.cpp -L/usr/lib64/ -ltest -o main.out å¾—åˆ°å¯æ‰§è¡Œæ–‡ä»¶main.outã€‚ ä½†æ˜¯main.outä»…åŒ…å«äº†libtest.so çš„ç›¸å…³ç¬¦å·ä¿¡æ¯ï¼Œå¹¶æ²¡æœ‰å°† libtest.soå’Œ main.outåˆå¹¶ã€‚åªæœ‰å½“æˆ‘ä»¬æ‰§è¡Œ ./main.out ï¼Œæ­¤æ—¶æ‰ä¼šåŠ¨æ€åŠ è½½Libtest.so ã€‚ å‰é¢æåˆ°çš„hello.outä¸­çš„std::cout ä¹Ÿæ˜¯åŠ¨æ€é“¾æ¥çš„ï¼š ç¼–è¯‘ç”Ÿæˆäº†å¯æ‰§è¡Œæ–‡ä»¶hello.out ï¼Œä½†æ­¤æ—¶hello.outåªåŒ…å«äº†coutç¬¦å·ä¿¡æ¯ï¼› æ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶hello.outæ—¶ ï¼Œæ ¹æ®coutç¬¦å·ä¿¡æ¯åŠ è½½libstdc++.so.6 åŠ¨æ€åº“ã€‚ ä»ä¸Šä¹Ÿå›ç­”æœ¬èŠ‚å¼€å¤´çš„é—®é¢˜ï¼šåŠ¨æ€é“¾æ¥ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä½“ç§¯å°ï¼Œé¿å…äº†ç©ºé—´æµªè´¹ï¼ŒåŒæ—¶çµæ´»æ€§å¼ºã€‚è¿™ä¹Ÿå°±æ˜¯ä½¿ç”¨åŠ¨æ€é“¾æ¥çš„ä¸»è¦åŸå› ã€‚ é‚£ä¹ˆï¼ŒåŠ¨æ€é“¾æ¥çš„éœ€è¦çš„åŠ¨æ€åº“ï¼Œå’Œé™æ€é“¾æ¥éœ€è¦çš„é™æ€åº“åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ é™æ€åº“å’ŒåŠ¨æ€åº“ Windowsä¸‹çš„é™æ€åº“å’ŒåŠ¨æ€åº“åˆ†åˆ«ä¸º.libå’Œ.dll ç»“å°¾çš„æ–‡ä»¶ï¼Œæœ¬èŠ‚ä¸­ä»…ä»¥åœ¨Linuxç³»ç»Ÿä¸­è¯´æ˜ç›¸å…³æ¦‚å¿µã€‚ Linux ä¸‹çš„åº“æœ‰ä¸¤ç§[8]ï¼šé™æ€åº“(.a)å’Œå…±äº«åº“ï¼ˆåŠ¨æ€åº“ï¼Œ.soï¼‰ ï¼Œéƒ½é‡‡ç”¨ä»¥ä¸‹æ–¹å¼è¿›è¡Œé“¾æ¥ï¼š 1234# ã€ä¾‹ã€‘Main.cppåŠ¨æ€é“¾æ¥libtest.soï¼Œé™æ€é“¾æ¥éœ€åŠ ä¸Š-staticå‚æ•°# -Lï¼šæŒ‡å®šæœç´ è·¯å¾„ï¼Œ:å¯åˆ†éš”å¤šä¸ªè·¯å¾„# -lï¼šæŒ‡å®šåº“åï¼Œå‰ç¼€&quot;lib&quot;å’Œåç¼€&quot;.a&quot; æˆ–&quot;.so&quot;çœç•¥g++ Main.cpp -L/usr/lib64/ -ltest -o main.out é™æ€åº“ ç‰¹ç‚¹ï¼šç¼–è¯‘è¿‡ç¨‹ä¸­å·²ç»è¢«è½½å…¥å¯æ‰§è¡Œç¨‹åºï¼Œå› æ­¤ä½“ç§¯è¾ƒå¤§ï¼› å‘½åï¼š.aä¸ºåç¼€ï¼Œlibä¸ºå‰ç¼€ï¼Œ ä¾‹å¦‚ libtest.a ï¼› ç”Ÿæˆï¼šå…ˆç”Ÿæˆ.o æ–‡ä»¶ï¼Œå†ç”¨arå·¥å…·å¯ç”Ÿæˆï¼› 12g++ -c Libtest.cpp -o libtest.oar cqs libtest.a libtest.o é“¾æ¥è·¯å¾„ï¼š å‚æ•°-Lï¼šldä¼šå»æ‰¾gcc/g++å‘½ä»¤ä¸­çš„å‚æ•°-LæŒ‡å®šçš„è·¯å¾„ï¼› ç¯å¢ƒå˜é‡ï¼šgccçš„ç¯å¢ƒå˜é‡LIBRARY_PATHï¼Œå®ƒæŒ‡å®šç¨‹åºé™æ€é“¾æ¥åº“æ–‡ä»¶æœç´¢è·¯å¾„ï¼› é»˜è®¤åº“ï¼šå†æ‰¾é»˜è®¤åº“ç›®å½• /libã€ /usr/libã€ /usr/local/libã€‚ åŠ¨æ€åº“ ç‰¹ç‚¹ï¼šå¯æ‰§è¡Œç¨‹åºè¿è¡Œæ—¶æ‰è½½å…¥å†…å­˜çš„ï¼Œåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ä»…ç®€å•çš„å¼•ç”¨ï¼Œå› æ­¤ä»£ç ä½“ç§¯è¾ƒå°ï¼› å‘½åï¼š.soä¸ºåç¼€ï¼Œlibä¸ºå‰ç¼€ï¼Œé€šå¸¸è¿˜ä¼šåŠ ä¸Šç‰ˆæœ¬å·ï¼Œ ä¾‹å¦‚ libtest.a.0.1 ; ç”Ÿæˆï¼šg++å·¥å…·å¯ç”Ÿæˆï¼› 12g++ -c Libtest.cpp -o libtest.og++ -shared libtest.o -o libtest.so.1.0 é“¾æ¥è·¯å¾„ï¼š å‚æ•°-Lï¼šldä¼šå»æ‰¾gcc/g++å‘½ä»¤ä¸­çš„å‚æ•°-LæŒ‡å®šçš„è·¯å¾„ï¼› ç¯å¢ƒå˜é‡ï¼šgccçš„ç¯å¢ƒå˜é‡LD_LIBRARY_PATHï¼Œå®ƒæŒ‡å®šç¨‹åºåŠ¨æ€é“¾æ¥åº“æ–‡ä»¶æœç´¢è·¯å¾„ï¼› é…ç½®æ–‡ä»¶ï¼šé…ç½®æ–‡ä»¶ /etc/ld.so.conf ä¸­æŒ‡å®šåŠ¨æ€åº“è·¯å¾„ï¼› é»˜è®¤åº“ï¼šå†æ‰¾é»˜è®¤åº“ç›®å½• /libã€ /usr/libã€‚ å…¨è¿‡ç¨‹æ€»ç»“ æºç åˆ°æ‰§è¡Œå…¨è¿‡ç¨‹åˆ†æã€‚ åœ¨linuxä¸­ç¨‹åºçš„åŠ è½½ï¼ˆä¸æ˜¯é“¾æ¥ï¼‰ï¼Œæ¶‰åŠåˆ°linkerå’Œloaderä¸¤ä¸ªå·¥å…·ã€‚linkerä¸»è¦æ¶‰åŠåŠ¨æ€é“¾æ¥åº“çš„ä½¿ç”¨ï¼Œloaderä¸»è¦æ¶‰åŠè½¯ä»¶çš„åŠ è½½ã€‚ ä¸Šå›¾æ˜¯ä¸€ä¸ªå…¸å‹çš„ç¼–è¯‘å°†æºæ–‡ä»¶main.cpp ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶myProc.out å¹¶æ‰§è¡Œçš„è¿‡ç¨‹ ï¼š 12g++ main.cpp -L/usr/lib -laaa -lbbb -o myProc.out ./myProc.out é“¾æ¥å‰ï¼šä¾æ¬¡æŒ‰é¢„å¤„ç†â†’ç¼–è¯‘â†’æ±‡ç¼–ï¼Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶main.o ï¼› é“¾æ¥ï¼šåˆ†é™æ€é“¾æ¥å’ŒåŠ¨æ€é“¾æ¥ã€‚ é™æ€é“¾æ¥ï¼šå¯¹main.o ä¸­æœªå®šä¹‰çš„ç¬¦å·è¿›è¡Œè§£æé‡å®šä½åˆ°é™æ€åº“aaa.o ä¸­ï¼Œç„¶åæŠŠéœ€è¦çš„ç›®æ ‡æ–‡ä»¶lib1.o ã€lib2.o å’Œmain.o çš„.textæ®µã€.dataæ®µã€.bssæ®µè¿›è¡Œåˆå¹¶ç”Ÿæˆåˆæ­¥çš„å¯æ‰§è¡Œæ–‡ä»¶myProc.out ï¼› åŠ¨æ€é“¾æ¥ï¼šæ­¤æ—¶main.o ä¸­ä¾æ—§æœ‰éƒ¨åˆ†ç¬¦å·æ²¡æœ‰è¢«è§£æï¼Œå®ƒä»¬çš„å®ç°å­˜äºåŠ¨æ€åº“bbb.soä¸­ ï¼Œä½†åŠ¨æ€é“¾æ¥ä»…å°†bbb.so ç›¸å…³ç¬¦å·ä¿¡æ¯ä¿å­˜åœ¨myProc.outä¸­ã€‚ ç°åœ¨æˆ‘ä»¬è·å–æœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶myProc.outã€‚ æ‰§è¡Œï¼šæ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶ã€‚ myProc.out ç”±ä»£ç æ®µï¼ˆ.textï¼Œåªè¯»å¯æ‰§è¡Œï¼‰ï¼Œæ•°æ®æ®µï¼ˆ.dataï¼Œåªè¯»ï¼‰ï¼Œ.bssæ®µç»„æˆï¼Œç°åœ¨çœ‹çœ‹å¦‚ä½•è¢«åŠ è½½åˆ°å†…å­˜ä¸­ã€‚ 1./myProc.out # å¼€å§‹æ‰§è¡Œç¨‹åºï¼Œé€šè¿‡loaderåŠ è½½å™¨åŠ è½½ç¨‹åº å†…å­˜æ˜ å°„ã€‚loaderå¯åŠ¨é€šè¿‡mmapç³»ç»Ÿè°ƒç”¨ï¼Œå°†ä»£ç æ®µå’Œæ•°æ®æ®µæ˜ å°„åˆ°è™šæ‹Ÿå†…å­˜ä¸­ ï¼Œä¸å ç‰©ç†å†…å­˜ï¼› åŠ¨æ€åº“åŠ è½½ã€‚åŠ¨æ€é“¾æ¥å™¨å°†ç¼–è¯‘æ—¶æŒ‡æ˜ä¾èµ–çš„åŠ¨æ€é“¾æ¥åº“ï¼Œæ˜ å°„åˆ°è™šæ‹Ÿå†…å­˜ä¸­ï¼› æ‰§è¡Œ.text ä¸­æŒ‡ä»¤ã€‚ç¨‹åºå¼€å§‹è¿è¡Œï¼Œé€šå¸¸ä¼´éšç€æ ˆã€å †ç©ºé—´åˆ†é…ç­‰ã€‚ ç¼–è¯‘å·¥å…·ç®€ä»‹ åœ¨å‰é¢æˆ‘ä»¬ç®€å•ä½¿ç”¨g++è¿›è¡Œæ–‡ä»¶ç¼–è¯‘ã€æ‰§è¡Œã€‚å½“ç„¶ï¼Œä¸»è¦è¿˜æ˜¯åâ€œåŠ¡è™šâ€æ¢è®¨äº†ä¸‹ç¼–è¯‘çš„è¿‡ç¨‹åŠåŸç†ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åâ€åŠ¡å®â€œçš„ä»‹ç»ä¸€ä¸‹åŸºæœ¬ä¸‰å¤§ç¼–è¯‘å·¥å…·çš„ä½¿ç”¨ ï¼šg++/Makefile/CMakeã€‚ ä¸‰è€…å…³ç³»å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚ gcc/g++ï¼šLinuxç¼–è¯‘å™¨æœ‰gcc/g++ï¼Œéšç€æºæ–‡ä»¶çš„å¢åŠ ï¼Œç›´æ¥ç”¨gcc/g++å‘½ä»¤çš„æ–¹å¼æ•ˆç‡è¾ƒä½ï¼Œäºæ˜¯å‘æ˜äº†Makefileæ¥è¿›è¡Œç¼–è¯‘ï¼› Makefileï¼š Makefileæè¿°äº†æ•´ä¸ªå·¥ç¨‹çš„ç¼–è¯‘ã€é“¾æ¥ç­‰è§„åˆ™ï¼Œå¯ä»¥æœ‰æ•ˆçš„å‡å°‘å¤§å·¥ç¨‹ä¸­éœ€è¦ç¼–è¯‘å’Œé“¾æ¥çš„æ–‡ä»¶ï¼Œåªç¼–è¯‘å’Œé“¾æ¥é‚£äº›éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶ã€‚ç„¶è€Œéšç€å·¥ç¨‹ä½“é‡çš„å¢å¤§ï¼ŒMakefileä¹Ÿä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œäºæ˜¯ä¾¿å‡ºç°äº†Cmakeå·¥å…·ï¼› CMakeï¼šCMakeæ˜¯ä¸€ä¸ªè·¨å¹³å°çš„ç¼–è¯‘(Build)å·¥å…·ï¼Œå¯ä»¥ç”¨ç®€å•çš„è¯­å¥æ¥æè¿°æ‰€æœ‰å¹³å°çš„ç¼–è¯‘è¿‡ç¨‹ã€‚æ—©æœŸçš„makeéœ€è¦ç¨‹åºå‘˜å†™Makefileæ–‡ä»¶è¿›è¡Œç¼–è¯‘ï¼Œè€Œç°åœ¨CMakeèƒ½å¤Ÿé€šè¿‡å¯¹CMakeLists.txtçš„ç¼–è¾‘ï¼Œè½»æ¾å®ç°å¯¹å¤æ‚å·¥ç¨‹çš„ç»„ç»‡ã€‚ å…·ä½“å®æ“ç»ƒä¹ æŒæ¡ã€‚ Makefile å¿«é€Ÿå…¥é—¨ MakefileåŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š 12&lt;target&gt; : &lt;prerequisites&gt; [tab] &lt;commands&gt; targetï¼ˆç›®æ ‡ï¼‰ ï¼š ç›®æ ‡æ–‡ä»¶, å¯ä»¥æ˜¯ Object File, ä¹Ÿå¯ä»¥æ˜¯å¯æ‰§è¡Œæ–‡ä»¶ï¼› prerequisitesï¼ˆå‰ç½®æ¡ä»¶ï¼‰ ï¼š ç”Ÿæˆtargetæ‰€éœ€è¦çš„æ–‡ä»¶æˆ–è€…ç›®æ ‡ï¼› commandï¼ˆå‘½ä»¤ï¼‰ï¼š makeéœ€è¦æ‰§è¡Œçš„å‘½ä»¤(ä»»æ„çš„shellå‘½ä»¤)ï¼ŒMakefileä¸­çš„å‘½ä»¤å¿…é¡»ä»¥ [tab],å³å››ä¸ªç©ºæ ¼ å¼€å¤´ã€‚ åŸºæœ¬è¯­æ³• å…ˆç†Ÿæ‚‰ä»¥ä¸‹åç†è®ºæ€»ç»“ä¸Šçš„ä¸œè¥¿ï¼Œå®è·µæ—¶äº’ç›¸éªŒè¯æ•ˆæœæ›´å¥½~ MakefileåŒ…å«äº†äº”ä¸ªé‡è¦çš„ä¸œè¥¿ï¼šæ˜¾ç¤ºè§„åˆ™ã€éšæ™¦è§„åˆ™ã€å˜é‡å®šä¹‰ã€æ–‡ä»¶æŒ‡ç¤ºå’Œæ³¨é‡Šã€‚ æ˜¾ç¤ºè§„åˆ™ï¼š å³éœ€è¦æŒ‡æ˜targetå’Œprerequisiteæ–‡ä»¶ã€‚ ä¸€æ¡è§„åˆ™å¯ä»¥åŒ…å«å¤šä¸ªtargetï¼Œè¿™æ„å‘³ç€å…¶ä¸­æ¯ä¸ªtargetçš„prerequisiteéƒ½æ˜¯ç›¸åŒçš„ï¼› å½“å…¶ä¸­çš„ä¸€ä¸ªtargetè¢«ä¿®æ”¹åï¼Œæ•´ä¸ªè§„åˆ™ä¸­çš„å…¶ä»–targetæ–‡ä»¶éƒ½ä¼šè¢«é‡æ–°ç¼–è¯‘æˆ–æ‰§è¡Œã€‚ éšæ™¦è§„åˆ™ï¼šmakeè‡ªåŠ¨æ¨å¯¼åŠŸèƒ½æ‰€æ‰§è¡Œçš„è§„åˆ™ã€‚ å˜é‡å’Œå®šä¹‰ï¼šMakefileä¸­å®šä¹‰çš„å˜é‡ï¼Œä¸€èˆ¬æ˜¯å­—ç¬¦ä¸²ã€‚ æ–‡ä»¶æŒ‡ç¤ºï¼šé€šå¸¸æŒ‡ä»¥ä¸‹ Makefileä¸­å¼•ç”¨å…¶ä»–Makefileï¼› æŒ‡å®šMakefileä¸­æœ‰æ•ˆéƒ¨åˆ†ï¼› å®šä¹‰ä¸€ä¸ªå¤šè¡Œå‘½ä»¤ã€‚ æ³¨é‡Šï¼šåªæœ‰è¡Œæ³¨é‡Š# ã€‚ ä¸€èµ·è¯•è¯• æˆ‘ä»¬å‡†äº†ä¸€æ®µä»£ç DisplayImage.cppï¼šä½¿ç”¨c++å’Œopencvå¯¹å›¾ç‰‡è¿›è¡Œè¯»å–å’Œæ˜¾ç¤ºã€‚ ä¸ºäº†æ–¹ä¾¿é˜…è¯»ï¼Œä»£ç å·²ç»å°½é‡ç²¾ç®€ã€‚ 12345678910111213#include &lt;stdio.h&gt;#include &lt;opencv2/opencv.hpp&gt;int main(int argc, char** argv )&#123; // è¯»å– Mat image = cv.imread( argv[1], 1 ); // æ˜¾ç¤º cv.namedWindow(&quot;Display Image&quot;, WINDOW_AUTOSIZE ); cv.imshow(&quot;Display Image&quot;, image); cv.waitKey(0); return 0;&#125; è¿™é‡Œå…ˆç»™å‡ºå·²å®Œæˆçš„Makefileæ–‡ä»¶ï¼š 12345678910export PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/home/royhuang/lib/pkgconfigCXXFLAGS:=$(shell pkg-config --cflgs --libs opencv)DispalyImage:DispalyImage.o g++ DispalyImage.o -o DispalyImageDispalyImage.o:DispalyImage.cpp g++ -c DispalyImage.cpp -o DispalyImage.oclean: rm *o test ç°åœ¨å»ºè®®æˆ‘ä»¬ä»ä¸‹å¾€ä¸Šåˆ†æï¼š ç¼–å†™clean ï¼šåˆ é™¤æ‰€æœ‰çš„.oæ–‡ä»¶å’Œå¯æ‰§è¡Œæ–‡ä»¶ï¼Œé¿å…è¿‡å¤šçš„ä¸­é—´æ–‡ä»¶äº§ç”Ÿï¼› ç¼–å†™ DispalyImage.o:DispalyImage.cpp ï¼šæ ¹æ®ä¹‹å‰çš„æ ¼å¼ï¼Œtarget : prerequisites ï¼Œè¿™ä¸ªæ—¶å€™ target ä¸º DispalyImage.o ï¼Œprerequisites ä¸ºDispalyImage.cpp ã€‚ ä¸‹ä¸€è¡Œçš„g++å‘½ä»¤ï¼Œå°†cppæ–‡ä»¶è¿›è¡Œç¼–è¯‘ä¸ºobject fileï¼ˆ.o æ–‡ä»¶ï¼‰ã€‚ 12DispalyImage.o:DispalyImage.cpp g++ -c DispalyImage.cpp -o DispalyImage.o ç¼–å†™ DispalyImage:DispalyImage.o ï¼šåœ¨ä¸Šä¸€æ­¥æˆ‘ä»¬å¾—åˆ°äº†ç¼–è¯‘åçš„ç›®æ ‡æ–‡ä»¶ DispalyImage.o ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥buildç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶DispalyImageã€‚ 12DispalyImage:DispalyImage.o g++ DispalyImage.o -o DispalyImage åº”ç”¨OpenCVåº“å’Œå¤´æ–‡ä»¶ ã€‚ 123export PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/home/royhuang/lib/pkgconfigCXXFLAGS:=$(shell pkg-config --cflgs --libs opencv) PKG_CONFIG_PATH ï¼šæ·»åŠ æŒ‡å®šè·¯å¾„åˆ°ç¯å¢ƒå˜é‡ã€‚å¦‚ä¸Šä¾‹ï¼Œæ·»åŠ äº†è·¯å¾„/home/royhuang/lib/pkgconfigåˆ°ç¯å¢ƒå˜é‡ ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨pkg-configå‘½ä»¤ ã€‚ CXXFLAGS ï¼šæŒ‡å®šæ–‡ä»¶ï¼ˆ.hæ–‡ä»¶æˆ–libæ–‡ä»¶ï¼‰çš„è·¯å¾„ï¼Œä½¿å¾—ç¼–è¯‘æ—¶å¯ä»¥æ‰¾åˆ°ç›¸åº”å¤´æ–‡ä»¶å’Œåº“æ–‡ä»¶ã€‚ åœ¨æœ¬ä¾‹ä¸­ï¼Œpkg-configå‘½ä»¤å¯æŸ¥çœ‹opencvçš„includeå¤´æ–‡ä»¶çš„è·¯å¾„ï¼š 12# --libs å‚æ•°å¯æŸ¥çœ‹åº“æ–‡ä»¶shell pkg-config --cflgs opencv åŒæ—¶å¼•å…¥å¤´æ–‡ä»¶å’Œåº“æ–‡ä»¶ï¼š 1pkg-config opencv --cflgs --libs opencv æœ‰äº†makefileæ–‡ä»¶åï¼Œæˆ‘ä»¬å°±å¯ä»¥makeç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶DisplayImageäº†ï¼š 1234# è‡ªåŠ¨æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹å«â€œMakefileâ€æˆ–â€œmakefileâ€çš„æ–‡ä»¶make # æ˜¾ç¤ºå›¾åƒ./DisplayImage ../01.jpg ä»ä¸Šä¹Ÿå¯æ€»ç»“å‡ºï¼šMakefile åŒ…å«äº†æ‰€æœ‰çš„è§„åˆ™å’Œç›®æ ‡ï¼Œè€Œ make åˆ™æ˜¯ä¸ºäº†å®Œæˆç›®æ ‡è€Œå»è§£é‡Š Makefile è§„åˆ™çš„å·¥å…·ã€‚ æ€»çš„æ¥è¯´ï¼ŒMakefileçš„åŸºæœ¬å¥—è·¯å°±æ˜¯ä»¥ä¸Šï¼Œç†Ÿç»ƒä½¿ç”¨éœ€è¦å®é™…é¡¹ç›®å¤šç»ƒä¹ ä¸‹ã€‚ è¿›é˜¶å­¦ä¹  è¿™é‡Œå‡†å¤‡ä¸¾ä¸€äº›è¾ƒå¤æ‚çš„é¡¹ç›®ï¼Œæ€ä¹ˆæ¥ç¼–å†™Makefileæ–‡ä»¶ã€‚ ä½†æ˜¯ä¸€èˆ¬è¾ƒå¤æ‚çš„é¡¹ç›®æˆ‘ç°åœ¨ä¸€èˆ¬ç”¨CMakeï¼Œä¹Ÿæ˜¯åæ–‡éœ€è¦ä»‹ç»çš„ã€‚å› æ­¤è¿™é‡Œå¤æ‚é¡¹ç›®Makefileç¼–å†™æ¡ˆä¾‹ï¼Œæš‚æ—¶ç•™ç™½ï¼Œåç»­è¡¥ä¸Šã€‚ å½“ç„¶ï¼Œä½ å¯ä»¥å…ˆçœ‹çœ‹ï¼šMake å‘½ä»¤æ•™ç¨‹ - é˜®ä¸€å³° ã€‚ CMake æ—©æœŸçš„makeéœ€è¦ç¨‹åºå‘˜å†™Makefileæ–‡ä»¶ï¼Œè¿›è¡Œç¼–è¯‘ã€‚è€Œç°åœ¨CMakeèƒ½å¤Ÿé€šè¿‡å¯¹CmakeLists.txtçš„ç¼–è¾‘ï¼Œè½»æ¾å®ç°å¯¹å¤æ‚å·¥ç¨‹çš„ç»„ç»‡ã€‚ å¿«é€Ÿå…¥é—¨ é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨Linuxç³»ç»Ÿï¼ˆCentOSï¼‰ä¸‹å®‰è£…ä¸‹CMakeï¼š 1sudo yum install cmake ä¸€èˆ¬ä½¿ç”¨CMakeç”ŸæˆMakefileå¹¶ç¼–è¯‘çš„æµç¨‹å¦‚ä¸‹ï¼š ç¼–å†™CMakeLists.txtï¼Œå‡å®šå…¶è·¯å¾„ä¸ºPATHï¼› æ‰§è¡Œå‘½ä»¤cmake PATHç”ŸæˆMakefileï¼› æœ€åä½¿ç”¨makeè¿›è¡Œç¼–è¯‘ã€‚ ä¸€èµ·è¯•è¯• æˆ‘ä»¬å‡†å¤‡ä¸€ä¸ªhello.cpp æ–‡ä»¶ï¼Œå®ƒæ‰€åœ¨çš„ç›®å½•å¦‚ä¸‹æ‰€ç¤ºã€‚ 123|-- build # cmakeç”Ÿæˆçš„ä¸­é—´æ–‡ä»¶éƒ½æ”¾è¿™|-- hello.cpp|-- CMakeLists.txt # æ¯ä¸ªå­ç›®å½•ä¸‹éƒ½è¦æœ‰CMakeLists.txtæ–‡ä»¶ æ–‡ä»¶å†…å®¹å¾ˆç®€å•ï¼š 1234567/* hello.cpp */ #include&lt;iostream&gt;using namespace std;int main()&#123; cout&lt;&lt;&quot;Hello Cpp!&quot;&lt;&lt;endl;&#125; æˆ‘ä»¬ç¼–å†™çš„CMakeLists.txtï¼Œæ¯ä¸€è¡Œä»£ç è§£é‡Šå¦‚ä¸‹ï¼š 12345678910111213141516# å‘½ä»¤æ ¼å¼ï¼š&lt;å‘½ä»¤å&gt;(å‚æ•° å‚æ•°å€¼) ï¼Œä¸­é—´å‚æ•°ç©ºæ ¼éš”å¼€# è®¾ç½®é¡¹ç›®åproject(helloDemo)# é™å®šCMAKEæœ€ä½ç‰ˆæœ¬CMAKE_MINIMUM_REQUIRED(VERSION 2.6)# æœç´¢å½“å‰ç›®å½•æ‰€æœ‰æºä»£ç æ–‡ä»¶ï¼Œå¹¶èµ‹å€¼ç»™PROJECT_ROOT_SRCSaux_source_directory(. PROJECT_ROOT_SRCS)# å¢åŠ C++11ç‰¹æ€§add_definitions(-std=c++11)# add_executable ä»ä¸€ç»„æºæ–‡ä»¶ç¼–è¯‘å‡ºä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ # è¿™é‡Œå°†$&#123;PROJECT_ROOT_SRCS&#125;ä¸­æ–‡ä»¶ç¼–è¯‘ï¼Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶hello.outadd_executable(hello.out $&#123;PROJECT_ROOT_SRCS&#125;) å¼€å§‹ç¼–è¯‘ï¼š 12345# ç”Ÿæˆmakefileç­‰ä¸­é—´æ–‡ä»¶# ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ ã€å¦‚æœè¦å¯ä»¥è¢«è°ƒè¯•ã€‘ï¼Œè¿˜è¦å¸¦ä¸Šå‚æ•°ï¼šcmake -DCMAKE_BUILD_TYPE:STRING=Debugcd ./build &amp;&amp; cmake ..# ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶make æœ€åæ‰§è¡Œåˆšåˆšç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼š 1./hello.out çœ‹åˆ°è¿™é‡Œï¼Œç›¸ä¿¡ä½ å¯¹CMakeæœ‰äº†ä¸ªåŸºæœ¬çš„è®¤çŸ¥ã€‚åœ¨å‰é¢æˆ‘ä»¬ä¹ŸçŸ¥é“ï¼ŒCMakeé€šå¸¸æ˜¯ç”¨æ¥ç¼–è¯‘å¤§å‹é¡¹ç›®çš„ã€‚ é‚£ä¹ˆï¼Œå¤§å‹é¡¹ç›®ç»“æ„æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿåˆå¦‚ä½•è¿›è¡Œç¼–è¯‘å‘¢ï¼Ÿ å¤§å‹é¡¹ç›®ç»“æ„ ä¸»è¦å‚è€ƒï¼šcpp-project-structureã€‚ è¿™é‡Œå‡å®šé¡¹ç›®åä¸º my_poject ï¼Œä¸€ä¸ªå®Œæ•´çš„å¤§é¡¹ç›®ç»“æ„é€šå¸¸å¦‚ä¸‹ã€‚ 1234567891011121314151617181920212223242526272829303132333435my_poject â”œâ”€â”€ deploy # å­˜æ”¾éƒ¨ç½²ã€äº¤ä»˜çš„æ–‡ä»¶ â”‚ â””â”€â”€ bin # é¡¹ç›®ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶â”‚ â””â”€â”€ lib # é¡¹ç›®ç”Ÿæˆçš„åº“æ–‡ä»¶â”‚ â””â”€â”€ include # é¡¹ç›®å¯¹å¤–æä¾›çš„å¤´æ–‡ä»¶â”œâ”€â”€ build # å­˜æ”¾cmakeäº§ç”Ÿçš„ä¸­é—´æ–‡ä»¶â”‚ â””â”€â”€ releaseâ”‚ â””â”€â”€ debug â”œâ”€â”€ doc # å­˜æ”¾é¡¹ç›®æ–‡æ¡£â”œâ”€â”€ src # å­˜æ”¾èµ„æºæ–‡ä»¶â”‚ â””â”€â”€ pic â”œâ”€â”€ 3rdparty # å­˜æ”¾ç¬¬ä¸‰æ–¹åº“â”‚ â””â”€â”€ lib # åº“æ–‡ä»¶ â”‚ â””â”€â”€ include # å¤´æ–‡ä»¶â”œâ”€â”€ my_poject # é¡¹ç›®ã€ä»£ç æºæ–‡ä»¶ã€‘| â””â”€â”€ module_1â”‚ â”œâ”€â”€ 1.cppâ”‚ â”œâ”€â”€ 1.hâ”‚ â”œâ”€â”€ CMakeLists.txt| â””â”€â”€ module_2â”‚ â”œâ”€â”€ 2.cppâ”‚ â”œâ”€â”€ 2.hâ”‚ â”œâ”€â”€ CMakeLists.txtâ”œâ”€â”€ tools # é¡¹ç›®æ„å»ºæ”¯æŒå·¥å…·ï¼Œå¦‚ç¼–è¯‘å™¨â”œâ”€â”€ scripts # è„šæœ¬æ–‡ä»¶ï¼Œå¦‚é¢„å¤„ç†è„šæœ¬â”œâ”€â”€ config # é…ç½®æ–‡ä»¶â”‚ â””â”€â”€ xxx.yml â”‚ â””â”€â”€ yyy.yml â”œâ”€â”€ test # æµ‹è¯•ä»£ç â”œâ”€â”€ LICENSE # ç‰ˆæƒä¿¡æ¯â”œâ”€â”€ CMakeLists.txtâ”œâ”€â”€ build.sh # æ„å»ºé¡¹ç›®çš„è„šæœ¬â”œâ”€â”€ .gitignoreâ”œâ”€â”€ README.md # é¡¹ç›®è¯´æ˜æ–‡ä»¶â””â”€â”€ sample # ç¤ºä¾‹ä»£ç  ç¼–è¯‘å¤æ‚é¡¹ç›® ç°åœ¨æˆ‘ä»¬ä¸¾ä¸€ä¸ªå¤æ‚ç‚¹çš„ï¼Œå¤šå±‚çº§é¡¹ç›®å¦‚ä½•ç”¨CMakeè¿›è¡Œç¼–è¯‘ã€‚ æ•´ä¸ªç›®å½•ç»“æ„å¦‚ä¸‹ï¼ˆä¸ºæ–¹ä¾¿ï¼Œè¿›è¡Œäº†ç²¾ç®€ï¼‰ï¼š 1234567891011121314151617181920212223|-- 3rdparty | |-- include| `-- lib|-- deploy | |-- bin| `-- lib|-- build|-- hello # æ•´ä¸ªé¡¹ç›®æºç | |-- module1| | |-- people.cpp| | |-- people.h| | `-- CMakeLists.txt| |-- module2| | |-- bird.cpp| | |-- bird.h| | `-- CMakeLists.txt| |-- hello.cpp| |-- CMakeLists.txt|-- LICENSE|-- README.md|-- src| `-- video| `-- 1577414323962.mp4 å…¶ä¸­helloç›®å½•ä¸‹å„æºæ–‡ä»¶å¦‚ä¸‹ï¼š moule1/people ç›¸å…³æºç  123456789101112/*people.cpp*/#include &quot;people.h&quot;void people_hello()&#123; std::cout&lt;&lt;&quot;people say : Hello Cpp!&quot;&lt;&lt;std::endl;&#125;/*people.h*/#include&lt;iostream&gt;void people_hello(); moule2/bird ç›¸å…³æºç  123456789101112/*bird.cpp*/#include &quot;bird.h&quot;void bird_hello()&#123; std::cout&lt;&lt;&quot;bird say : Hello Cpp!&quot;&lt;&lt;std::endl;&#125;/*bird.h*/#include&lt;iostream&gt;void bird_hello(); hello/hello.cpp æºç  12345678#include &quot;./module1/people.h&quot;#include &quot;./module2/bird.h&quot;int main()&#123; people_hello(); bird_hello();&#125; æœ€åç»™å‡ºå„ä¸ªç›®å½•ä¸‹çš„CMakeLists.txtæ–‡ä»¶ã€‚ module1module2hello module1 ç¼–è¯‘ç”ŸæˆåŠ¨æ€åº“libmodule1.so ã€‚ 12345678# æŸ¥æ‰¾å½“å‰ç›®å½•ï¼ˆmodule1ï¼‰ä¸‹çš„ç›¸å…³æ–‡ä»¶,å¹¶èµ‹å€¼ç»™MODULE1_SRCaux_source_directory(. MODULE1_SRC)# å°†æŒ‡å®šçš„æºæ–‡ä»¶ï¼ˆMODULE1_SRCï¼‰ç”Ÿæˆåº“æ–‡ä»¶libmodule1.so# ã€æ³¨1ã€‘ä¸éœ€è¦å†™å…¨libmodule1.soï¼Œåªéœ€å†™moduleå³å¯ï¼Œcmakeä¼šè‡ªåŠ¨è¡¥å…¨ã€‚# ã€æ³¨2ã€‘SHAREDå‚æ•°æŒ‡å®šç”ŸæˆåŠ¨æ€åº“ï¼ˆ.soæ–‡ä»¶ï¼‰ï¼Œä¸åŠ å‚æ•°é»˜è®¤ç”Ÿæˆé™æ€åº“ï¼ˆ.aï¼‰æ–‡ä»¶add_library(module1 SHARED $&#123;MODULE1_SRC&#125;) module2 ç¼–è¯‘ç”ŸæˆåŠ¨æ€åº“libmodule2.so ï¼ŒåŸºæœ¬åŒå‰ã€‚ 123456# æŸ¥æ‰¾å½“å‰ç›®å½•ï¼ˆmodule2ï¼‰ä¸‹çš„ç›¸å…³æ–‡ä»¶,å¹¶èµ‹å€¼ç»™MODULE2_SRCaux_source_directory(. MODULE2_SRC)# å°†æŒ‡å®šçš„æºæ–‡ä»¶ï¼ˆMODULE1_SRCï¼‰ç”Ÿæˆåº“æ–‡ä»¶libmodule1.soadd_library(module2 SHARED $&#123;MODULE2_SRC&#125;) hello ç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶hello.out ï¼Œç„¶åé“¾æ¥libmodule1.soå’Œ libmodule2.soã€‚ 12345678910111213141516171819202122232425262728293031323334353637# å‘½ä»¤æ ¼å¼ï¼š&lt;å‘½ä»¤å&gt;(å‚æ•° å‚æ•°å€¼) ï¼Œä¸­é—´å‚æ•°ç©ºæ ¼éš”å¼€# è®¾ç½®é¡¹ç›®åproject(helloDemo)# è®¾ç½®å¯æ‰§è¡Œæ–‡ä»¶ä¿å­˜è·¯å¾„set(EXECUTABLE_OUTPUT_PATH $&#123;PROJECT_SOURCE_DIR&#125;/../deploy/bin)# é™å®šCMAKEæœ€ä½ç‰ˆæœ¬CMAKE_MINIMUM_REQUIRED(VERSION 2.6)# å°†module1å’Œmodule2æ–‡ä»¶å¤¹åŠ å…¥å­ç›®å½•,è¿™æ ·cmakeå°±å¯ä»¥å»å…¶ä¸­æŸ¥æ‰¾ç¼–è¯‘# ã€æ³¨1ã€‘æ²¡æœ‰è¿™ä¸ªä¼šæŠ¥é”™ï¼Œld:æ‰¾ä¸åˆ° -lmoudle1 å’Œ -lmoudle2# ã€æ³¨2ã€‘è¿™é‡Œåªèƒ½ç”¨ç›¸å¯¹è·¯å¾„ï¼Œä¸æ˜¯helloé¡¹ç›®ä¸‹çš„è·¯å¾„ï¼Œæ˜¯æŒ‡# buildä¸‹çš„ç›¸å¯¹è·¯å¾„ã€‚# å› ä¸ºæœ€åmakeæ˜¯åœ¨buildè·¯å¾„ä¸‹ï¼Œlibmoudule1.soå’Œ# libmoudule2.soæ˜¯åˆ†åˆ«ä¿å­˜åœ¨build/moudle1 å’Œbuild/module2ä¸‹ADD_SUBDIRECTORY(./module1) ADD_SUBDIRECTORY(./module2)# æœç´¢å½“å‰ç›®å½•æ‰€æœ‰æºä»£ç æ–‡ä»¶ï¼Œå¹¶èµ‹å€¼ç»™PROJECT_ROOT_SRCSaux_source_directory(. PROJECT_ROOT_SRCS)# å¢åŠ C++11ç‰¹æ€§add_definitions(-std=c++11)# ã€ç¼–è¯‘ã€‘# add_executable ä»ä¸€ç»„æºæ–‡ä»¶ç¼–è¯‘å‡ºä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ # è¿™é‡Œå°†$&#123;PROJECT_ROOT_SRCS&#125;ä¸­æ–‡ä»¶ç¼–è¯‘ï¼Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶hello.outadd_executable(hello.out $&#123;PROJECT_ROOT_SRCS&#125;)# ã€é“¾æ¥ã€‘# å°†ç›®æ ‡æ–‡ä»¶ä¸åº“æ–‡ä»¶è¿›è¡Œé“¾æ¥ï¼Œä¸æ˜¾ç¤ºæŒ‡ç¤ºæ–‡ä»¶åç¼€ï¼ˆå¦‚ module1.soï¼‰ï¼Œä¼˜å…ˆé“¾æ¥åŠ¨æ€åº“TARGET_LINK_LIBRARIES( hello.out module2 module1) ç‰¹åˆ«çš„ï¼Œå¦‚æœä½ è¿˜å¼•ç”¨äº†ç¬¬ä¸‰æ–¹åº“ï¼Œè¿˜åº”è¯¥åšå¦‚ä¸‹ä¿®æ”¹ã€‚ å‡è®¾ä½ å¼•ç”¨çš„ç¬¬ä¸‰æ–¹åº“ä¸ºffmpeg ï¼Œç›¸å…³å¤´æ–‡ä»¶å’Œåº“æ–‡ä»¶éƒ½æ”¾åœ¨3rdpartyç›®å½•ä¸‹ã€‚ å¢åŠ ffmpegåº“æ–‡ä»¶å’Œå¤´æ–‡ä»¶æœç´¢è·¯å¾„ 1234# å¤´æ–‡ä»¶æœç´¢è·¯å¾„include_directories($&#123;PROJECT_SOURCE_DIR&#125;../3rdparty/inclue)# åº“æ–‡ä»¶æœç´¢è·¯å¾„link_directories($&#123;PROJECT_SOURCE_DIR&#125;../3rdparty/lib) é“¾æ¥ffmepegç›¸åº”åº“ 123456789101112131415# é“¾æ¥ffmpegåº“# å°†ç›®æ ‡æ–‡ä»¶ä¸åº“æ–‡ä»¶è¿›è¡Œé“¾æ¥TARGET_LINK_LIBRARIES( hello.out module2 module1 libavcodec.so # æ˜¾ç¤ºæŒ‡å®šåŠ¨æ€åº“ libavdevice.so libavfilter.so libavformat.so libavutil.so libpostproc.so libswresample.so libswscale.so) å‡†å¤‡å¥½æ‰€æœ‰çš„æ–‡ä»¶åï¼Œæˆ‘ä»¬å¼€å§‹è¿›è¡Œcmakeæ„å»ºï¼š 12cd ./buildcmake ../hello &amp;&amp; make åœ¨bin ä¸‹æ‰§è¡Œï¼š 1../deploy/bin/hello.out ğŸ‘¨â€ğŸ’» CMakeç›¸å…³ä»‹ç»åˆ°æ­¤å®Œç»“ã€‚ å†™åœ¨æœ€å è¿™ç¯‡åšå®¢ä¸»è¦ä»‹ç»äº†ç¼–è¯‘çš„åŸºæœ¬è¿‡ç¨‹å’ŒåŸç†ï¼Œä»¥åŠå¸¸ç”¨çš„ç¼–è¯‘å·¥å…·ï¼ˆg++/Makefile/CMakeï¼‰ä½¿ç”¨ã€‚ ä»æ„æ€å¤§çº²åˆ°æœ€ååˆæ­¥å®Œå·¥å¤§æ¦‚ç”¨äº†äº”å¤©ï¼Œæ¯”æœ€åˆé¢„ä¼°çš„è¿›åº¦å¤šèŠ±äº†ä¸€å€æ—¶é—´ã€‚æœ€ä¸»è¦çš„åŸå› å°±æ˜¯ä¸­é—´æˆ‘ä¸€ç›´åœ¨åˆ åˆ æ”¹æ”¹ï¼Œç‰¹åˆ«æ˜¯å†™ç¼–è¯‘è¿‡ç¨‹åˆæ¢è¿™ä¸€èŠ‚ï¼šæ¯å†™å®Œä¸€ä¸ªç‰ˆæœ¬ï¼Œæˆ‘å°±è‡ªå·±å…ˆçœ‹ä¸€éå†é—®è‡ªå·±ï¼šä½ çœŸçš„èƒ½çœ‹æ˜ç™½å—ï¼Ÿè¿˜æ˜¯æœ‰äº›ä¸ç†è§£çš„åœ°æ–¹ï¼Œå°±ç»§ç»­Googleäº›èµ„æ–™çœ‹ï¼Œç›´åˆ°æŠŠè‡ªå·±è¯´æœ----è‡³å°‘æ–‡ç« é€»è¾‘ä¸Šè‡ªæ°äº†ã€‚åŒæ—¶ä¹Ÿæ›´æ·±åˆ»åœ°ä½“ä¼šåˆ°äº†ï¼šè‡ªå·±è§‰å¾—æ‡‚äº†å¯èƒ½ä¸æ˜¯çœŸçš„æ‡‚äº†ï¼Œèƒ½æŠŠåˆ«äººè®²æ˜ç™½æ‰å¯èƒ½ç®—æ˜¯æ‡‚äº†ã€‚ C++ç¯å¢ƒç›¸å…³ä»‹ç»å°±å…ˆå‘Šä¸€æ®µè½äº†ï¼Œæ¥ä¸‹æ¥å‡†å¤‡æ•´ç†ä¸€ä¸‹C++åŸºç¡€ç›¸å…³çŸ¥è¯†ï¼ˆæœ‰äº‹æƒ…åšçš„æ„Ÿè§‰è¿˜ä¸é”™ğŸ˜€ ï¼‰ï¼Œå›å¤å®Œè®ºæ–‡è¯„å®¡æ„è§åå°½å¿«å¼€å§‹æ›´æ–°ã€‚ æ›´æ–°è®°å½• 2022-01-24 ï¼šæ›´æ–°ç¬”è®° å¢åŠ å¯æ‰§è¡Œæ–‡ä»¶æ‰§è¡Œè¿‡ç¨‹åˆ†æ 2021-12-20 ï¼šæ›´æ–°ç¬”è®° å¢åŠ g++ç›¸å…³ä»‹ç» 2021-12-10 ï¼šä¸Šä¼ åˆç¨¿ ç¬¬ä¸€æ¬¡æ›´æ–°ï¼Œå‘å¸ƒåˆç¨¿ å‚è€ƒèµ„æ–™ 1.g++ï¼ŒCMakeå’ŒMakefileäº†è§£ä¸€ä¸‹ ï¼š https://zhuanlan.zhihu.com/p/55027085 â†©2.Linuxä¸‹ä½¿ç”¨CMakeç¼–è¯‘C++ï¼šhttps://zhuanlan.zhihu.com/p/373256365 â†©3.é˜®ä¸€å³°--ç¼–è¯‘å™¨çš„å·¥ä½œè¿‡ç¨‹ï¼šhttp://www.ruanyifeng.com/blog/2014/11/compiler.html â†©4.ç¬¦å·è§£æï¼šhttps://www.jianshu.com/p/2786533a34c9 â†©5.è®¡ç®—æœºåŸç†ç³»åˆ—ä¹‹ä¸ƒ-é“¾æ¥è¿‡ç¨‹åˆ†æï¼šhttps://luomuxiaoxiao.com/?p=572 â†©6.é™æ€é“¾æ¥ä¸åŠ¨æ€é“¾æ¥åœ¨é“¾æ¥è¿‡ç¨‹å’Œæ–‡ä»¶ç»“æ„ä¸Šçš„åŒºåˆ«ï¼šhttps://www.polarxiong.com/ â†©7.gccç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†ä»€ä¹ˆï¼šhttps://blog.csdn.net/albertsh/article/details/89309107 â†©8.C/C++ä¸­å…³äºé™æ€é“¾æ¥åº“(.a)ã€åŠ¨æ€é“¾æ¥åº“ï¼ˆ.soï¼‰çš„ç¼–è¯‘ä¸ä½¿ç”¨ï¼šhttps://blog.csdn.net/qq_27825451/article/details/105700361 â†©9.cpp_new_featuresï¼šhttps://github.com/0voice/cpp_new_features/blob/main/ â†©","categories":[{"name":"C++","slug":"C","permalink":"https://hwh.zone/categories/C/"},{"name":"ä»é›¶å¼€å§‹","slug":"C/ä»é›¶å¼€å§‹","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"},{"name":"C++ç¯å¢ƒæ­å»º","slug":"C/ä»é›¶å¼€å§‹/C-ç¯å¢ƒæ­å»º","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/C-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"}],"tags":[{"name":"C++","slug":"C","permalink":"https://hwh.zone/tags/C/"},{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://hwh.zone/tags/%E6%95%99%E7%A8%8B/"},{"name":"CMake","slug":"CMake","permalink":"https://hwh.zone/tags/CMake/"},{"name":"Makefile","slug":"Makefile","permalink":"https://hwh.zone/tags/Makefile/"},{"name":"g++","slug":"g","permalink":"https://hwh.zone/tags/g/"},{"name":"C++ç¯å¢ƒæ­å»º","slug":"C-ç¯å¢ƒæ­å»º","permalink":"https://hwh.zone/tags/C-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"}]},{"title":"C++ä»é›¶å¼€å§‹ï¼ˆé›¶ï¼‰","slug":"C++ä»é›¶å¼€å§‹ï¼ˆé›¶ï¼‰ï¼šå†™åœ¨å‰é¢","date":"2021-12-05T08:22:28.029Z","updated":"2022-02-19T10:13:23.895Z","comments":true,"path":"p/62712/","link":"","permalink":"https://hwh.zone/p/62712/","excerpt":"","text":"ğŸ–‹ ã€ŠC++ä»é›¶å¼€å§‹ã€‹ç³»åˆ—ï¼ŒæŒç»­æ›´æ–°ä¸­â€¦ å†™åœ¨å‰é¢ ä¸ºä»€ä¹ˆå†™è¿™ä»½ç¬”è®° è¿™ä¸ªç³»åˆ—è™½ç„¶åä¸ºï¼šã€ŠC++ä»é›¶å¼€å§‹ã€‹ï¼Œä½†ç»†ç»†ç®—æ¥ï¼Œæˆ‘å·²ç»ä¸æ­¢ç³»ç»Ÿæ€§åœ°å­¦è¿‡C++ä¸€æ¬¡äº†ã€‚è¯´æ¥æƒ­æ„§ï¼Œæ¯æ¬¡ç›®çš„ä¹Ÿéƒ½æ˜¯ä¸ºäº†å¯¹ä»˜è€ƒè¯•ï¼Œå–ä¸ªä¸é”™çš„æˆç»©è€Œä¸‹ç‚¹è‹¦å·¥ç½¢äº†ã€‚ é˜´å·®é˜³é”™ï¼Œæˆ‘æ˜å¹´å³å°†å…¥èŒè…¾è®¯ï¼Œå¹¶ä»¥C++å¼€å§‹è‡ªå·±èŒä¸šç”Ÿæ¶¯çš„ç¬¬ä¸€ç«™ï¼Œæ­£å¥½åœ¨æ ¡è¿˜æœ‰æ®µè¾ƒæ¸…é—²çš„æ—¶å…‰ï¼Œäºæ˜¯ä¸‹ç¬”å†™äº†è¿™ä¸ªC++ç³»åˆ—ç¬”è®°ã€‚ä¸€æ˜¯åˆ†äº«è®°å½•ã€ä»¥è®²ä»£å­¦ï¼Œå¸Œæœ›èƒ½å¯¹åŒæ ·å­¦ä¹ C++çš„è¯»è€…æœ‰ç‚¹å¸®åŠ©ï¼›äºŒæ˜¯å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ï¼ŒåŒæ—¶å¸®åŠ©è‡ªå·±æ—¶æ—¶è®°å¿†å’Œæ¸©ä¹ ï¼›ä¸‰æ˜¯å¼€æºåˆ†äº«ã€è´¡çŒ®ä¸€ç‚¹åŠ›é‡ï¼Œä¸­æ–‡ï¼ˆæ–‡å­—ç‰ˆï¼‰å¼€æºæ•™ç¨‹/ç¬”è®°å¤ªå°‘ï¼Œå¸Œæœ›èƒ½è‡ªå·±æ•´ç†ä¸€ä»½ç²¾ç‚¼ä¹Ÿè¶³å¤Ÿæ¸…æ™°çš„C++æ€»ç»“è®°å½•ã€‚ åŠ¨ç¬”å‰ï¼Œæˆ‘ä»”ç»†æ„æ€äº†ä¸‹è¯¥ç³»åˆ—ç¬”è®°çš„æ•´ä½“ç»“æ„ï¼Œä¸‹èŠ‚ä¼šå¼€å§‹ä»‹ç»å…·ä½“ä»‹ç»ã€‚ ç‰¹åˆ«çš„ï¼Œè¿™ä¸ªç³»åˆ—å¤„äºåˆå»ºçŠ¶æ€ï¼Œæ–‡ç« å¯èƒ½ä¼šç”±äºæ›´æ–°ç­‰åŸå› å’Œä¹‹å‰ç‰ˆæœ¬æœ‰æ‰€ä¸åŒï¼› æ‰€æœ‰çš„æ–‡ç« æ›´æ–°è®°å½•å˜åŒ–ï¼Œå¯ä»¥åœ¨ç¬¬ä¸‰å¤§èŠ‚ï¼šæ›´æ–°è®°å½•ä¸­æŸ¥çœ‹ã€‚ è°é€‚åˆé˜…è¯»æœ¬æ–‡ è¿™ä¸ªç³»åˆ—è™½ç„¶å«åšâ€œä»é›¶å¼€å§‹â€ï¼Œä½†å¦‚æœä½ çœŸçš„é›¶åŸºç¡€ï¼Œé˜…è¯»äº†å‰é¢ã€Šç¯å¢ƒæ­å»ºã€‹ä¸¤ç¯‡æ–‡ç« ä¾¿å¯èƒ½è¦å¼€å§‹æ€€ç–‘è‡ªå·±æ˜¯ä¸æ˜¯é€‚åˆåšç¨‹åºå‘˜äº†ã€‚ å½“ç„¶ä½œè€…å¹¶éæœ‰æ„è®©ä½ æ„Ÿåˆ°è¿™ç§æ²®ä¸§çš„æƒ…ç»ªï¼Œä¸€æ˜¯å¸Œæœ›ä»¥è®²ä»£å­¦ çš„æ–¹å¼å¸®åŠ©è‡ªå·±å’Œè¯»è€…æé«˜C++æ°´å¹³ï¼ŒäºŒæ˜¯å› ä¸ºå¸Œæœ›è¿™ä¸ªç³»åˆ—çš„é˜…è¯»äººç¾¤ï¼š å…·æœ‰ä¸€å®šç¼–ç¨‹è¯­è¨€åŸºç¡€ï¼Œæ¯”å¦‚Cã€Pythonã€Javaï¼Œæœ‰C++æœ€å¥½ï¼› å¸Œæœ›è¿›ä¸€æ­¥æé«˜ã€å·©å›ºC++åŸºç¡€ï¼Œçœ‹å®Œæœ¬ç³»åˆ—èƒ½è¾¾åˆ°æ ¡æ‹›å¤§å‚C++è‡³å°‘â€œåŠæ ¼çº¿â€æ°´å¹³ï¼ˆå› æ­¤æœ¬ç³»åˆ—ä¹Ÿæ’å…¥äº†å¾ˆå¤šâ€œå…«è‚¡æ–‡â€ç›¸äº’éªŒè¯ï¼‰ã€‚ å¦‚æœä½ çœŸçš„éœ€è¦æ›´åŸºç¡€çš„æ•™ç¨‹ï¼Œä½†å› ä¸ºä½œè€…è¿˜æ²¡æœ‰åœ¨ä¸­æ–‡äº’è”ç½‘æ‰¾åˆ°æ¯”è¾ƒå¥½çš„å¼€æºæ–‡å­—æ•™ç¨‹ï¼Œè‹±æ–‡æ•™ç¨‹å€’æ˜¯æ‰¾åˆ°ä¸å°‘ï¼ˆä¸ç¦å†æ¬¡æ„Ÿæ…¨è‹±æ–‡çš„é‡è¦æ€§ï¼‰ï¼Œå› æ­¤å¯¹äºé›¶åŸºç¡€çš„åŒå­¦ï¼Œåˆ†åˆ«æ¨èè‹±ã€ä¸­ï¼ˆæ–‡å­—ï¼‰æ•™ç¨‹ä¸€ä»½ï¼š è‹±æ–‡ï¼šå¼ºçƒˆæ¨èâ€”learncppï¼Œè‹±æ–‡å¦‚æœé˜…è¯»åƒåŠ›å»ºè®®å®‰è£…è°·æ­Œç¿»è¯‘æ’ä»¶ï¼› ä¸­æ–‡ï¼šè…¾è®¯äº‘C++æ•™ç¨‹ï¼ŒååŸºç¡€ï¼Œé€‚åˆè‹±æ–‡é˜…è¯»è¿‡äºå›°éš¾åˆæ— åŸºç¡€çš„åŒå­¦ã€‚ æ€»ç›®å½• â° æœ€åæ›´æ–°æ—¶é—´ï¼š2022/02/11 17:00 ã€‚ ä»é›¶å¼€å§‹ç³»åˆ—æš‚åˆ†ä¸ºä¸‰éƒ¨æ›²ï¼šã€ŠC++ç¯‡ã€‹ã€ã€ŠLinux/C++ç³»ç»Ÿç¼–ç¨‹ç¯‡ã€‹ã€ã€Šç½‘ç»œç¼–ç¨‹ç¯‡ã€‹ï¼Œä»¥åŠå¯èƒ½è¡¥å……çš„ã€ŠC++å¼€æºåˆ†æã€‹éƒ¨åˆ†ã€‚ æ–‡ç«  å¤‡æ³¨ C++ç¯‡ C++ä»é›¶å¼€å§‹ï¼ˆä¸€ï¼‰ï¼šç¯å¢ƒæ­å»ºï¼ˆä¸Šï¼‰VSCodeè¿œç¨‹å¼€å‘ âœ”ï¸æ›´æ–°å®Œæˆ C++ä»é›¶å¼€å§‹ï¼ˆäºŒï¼‰ï¼šç¯å¢ƒæ­å»ºï¼ˆä¸‹ï¼‰g++/Makefile/CMakeå¿«é€Ÿå…¥é—¨ âœ”ï¸æ›´æ–°å®Œæˆ C++ä»é›¶å¼€å§‹ï¼ˆä¸‰ï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆä¸Šï¼‰å¿«é€Ÿå…¥é—¨ âœ”ï¸æ›´æ–°å®Œæˆ C++ä»é›¶å¼€å§‹ï¼ˆå››ï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆä¸­ï¼‰æŒ‡é’ˆå’Œå¼•ç”¨ âœ”ï¸æ›´æ–°å®Œæˆ C++ä»é›¶å¼€å§‹ï¼ˆäº”ï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆä¸‹ï¼‰ä¹‹å‡½æ•° âœ”ï¸æ›´æ–°å®Œæˆ C++ä»é›¶å¼€å§‹ï¼ˆå…­ï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆä¸‹ï¼‰å¤åˆç±»å‹åŠè½¬æ¢ âœ”ï¸æ›´æ–°å®Œæˆ C++ä»é›¶å¼€å§‹ï¼ˆä¸ƒï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸Šï¼‰å¿«é€Ÿå…¥é—¨ âœ”ï¸æ›´æ–°å®Œæˆ C++ä»é›¶å¼€å§‹ï¼ˆå…«ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸­ï¼‰è¿ç®—ç¬¦é‡è½½ âœ”ï¸æ›´æ–°å®Œæˆ C++ä»é›¶å¼€å§‹ï¼ˆä¹ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸‹ï¼‰ç»§æ‰¿ä¸è™šå‡½æ•° âœ”ï¸æ›´æ–°å®Œæˆ C++ä»é›¶å¼€å§‹ï¼ˆåï¼‰ï¼šC++è¿›é˜¶ï¼ˆä¸Šï¼‰æ¨¡æ¿ âœ”ï¸æ›´æ–°å®Œæˆ C++ä»é›¶å¼€å§‹ï¼ˆåä¸€ï¼‰ï¼šC++è¿›é˜¶ï¼ˆä¸‹ï¼‰STL âœ”ï¸æ›´æ–°å®Œæˆ Linux/C++ç¯‡ C++ä»é›¶å¼€å§‹ï¼ˆåäºŒï¼‰ï¼šLinux/C++ä¹‹ ğŸ”¨ æ›´æ–°ing C++ä»é›¶å¼€å§‹ï¼ˆï¼‰ï¼šLinux/C++ä¹‹ C++ä»é›¶å¼€å§‹ï¼ˆï¼‰ï¼šLinux/C++ä¹‹ C++ä»é›¶å¼€å§‹ï¼ˆï¼‰ï¼šLinux/C++ä¹‹ C++ä»é›¶å¼€å§‹ï¼ˆï¼‰ï¼šLinux/C++ä¹‹ ç½‘ç»œç¼–ç¨‹ç¯‡ æœªå®š C++å¼€æº C++ä»é›¶å¼€å§‹ï¼ˆï¼‰ï¼šC++å¼€æºä¹‹Zaveræºç åˆ†æ C++ä»é›¶å¼€å§‹ï¼ˆï¼‰ï¼šC++å¼€æºä¹‹å®ç°è‡ªå·±çš„ffmpegè½¬ç å™¨ C++ä»é›¶å¼€å§‹ï¼ˆï¼‰ï¼šC++å¼€æºä¹‹SRSæºç åˆ†æ å†™åœ¨æœ€å â² æ›´æ–°æ—¶é—´ï¼š2021/12/05 17:00 ã€‚ ä»ç©åˆ°æ— èŠå¼€å§‹å­¦ä¹ åˆ°åäºŒæœˆåˆç»™è‡ªå·±æŒ–äº†ä¸ªå¤§å‘ï¼Œplay hard study hard å±…ç„¶ä¸çŸ¥ä¸è§‰æˆäº†æˆ‘çš„è¡Œä¸ºä¹ æƒ¯ã€‚å½“ç„¶ï¼Œç©åˆ°èƒ–äº†åå¤šæ–¤å¹¶ä¸æ˜¯æˆ‘æœ¬æ„â€¦ å€Ÿæ­¤æœºä¼šï¼Œæå‰è®¸ä¸‹å‡ ä¸ªæ–°å¹´æ„¿æœ›ï¼ˆæ˜¯çš„ï¼Œå°±æ˜¯è¿™ä¹ˆçªç„¶ï¼‰ï¼š ä¸‰ä¸ªæœˆå†…é¡ºåˆ©æ›´æ–°å®Œè¿™ä¸ªç³»åˆ—å¤§éƒ¨åˆ†æ–‡æ¡£ï¼› å¤šèŠ±ç‚¹æ—¶é—´å­¦ä¹ ï¼Œä¸èƒ½è¿‡åˆ†ç©ä¹ï¼› å°‘ç†¬å¤œï¼Œå¤šå–èŒ¶ï¼› å¦‚æ„è€ƒè¯•é¡ºåˆ©ã€‚ æ•¬è¯·æœŸå¾…~ ğŸ˜‹ ï¼ˆé¡ºä¾¿åˆ†äº«ä¸€ä¸‹æˆ‘çš„æ–°æ’ä»¶ä¸€é¦–åº”æ™¯çš„å°è¯—ï¼‰ [é£é¸Ÿé›†][æ³°æˆˆå°”]é—²æš‡åœ¨åŠ¨ä½œæ—¶ ä¾¿æ˜¯å·¥ä½œã€‚ é™æ­¢çš„æµ·æ°´è¡åŠ¨æ—¶ ä¾¿æˆæ³¢æ¶›ã€‚ æ›´æ–°è®°å½• 2022-02-19ï¼šæ–‡ç« æ›´æ–° C++ä»é›¶å¼€å§‹ï¼ˆåä¸€ï¼‰ï¼šC++è¿›é˜¶ï¼ˆä¸‹ï¼‰STLæ›´æ–°å®Œæˆ 2022-02-11ï¼šæ–‡ç« æ›´æ–° C++ä»é›¶å¼€å§‹ï¼ˆåï¼‰ï¼šC++è¿›é˜¶ï¼ˆä¸Šï¼‰æ¨¡æ¿æ›´æ–°å®Œæˆ 2022-02-08ï¼šæ–‡ç« æ›´æ–° C++ä»é›¶å¼€å§‹ï¼ˆä¹ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸‹ï¼‰ç»§æ‰¿ä¸è™šå‡½æ•° æ›´æ–°å®Œæˆ 2022-01-31ï¼šæ–‡ç« æ›´æ–° C++ä»é›¶å¼€å§‹ï¼ˆå…«ï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸­ï¼‰è¿ç®—ç¬¦é‡è½½ æ›´æ–°å®ŒæˆğŸ™‚ æ–°å¹´å¿«ä¹ï¼ 2022-01-27 ï¼šæ–‡ç« æ›´æ–° C++ä»é›¶å¼€å§‹ï¼ˆä¸ƒï¼‰ï¼šé¢å¯¹å¯¹è±¡ï¼ˆä¸Šï¼‰å¿«é€Ÿå…¥é—¨æ›´æ–°å®Œæ¯• 2022-01-22 ï¼šæ–‡ç« æ›´æ–° C++ä»é›¶å¼€å§‹ï¼ˆå…­ï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆä¸‹ï¼‰å¤åˆç±»å‹åŠè½¬æ¢æ›´æ–°å®Œæ¯• 2022-01-18 ï¼šæ–‡ç« æ›´æ–° C++ä»é›¶å¼€å§‹ï¼ˆä¸‰ï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆä¸Šï¼‰ä¹‹å¿«é€Ÿå…¥é—¨æ›´æ–°å®Œæ¯•C++ä»é›¶å¼€å§‹ï¼ˆå››ï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆä¸­ï¼‰ä¹‹æŒ‡é’ˆå’Œå¼•ç”¨ æ›´æ–°å®Œæ¯•C++ä»é›¶å¼€å§‹ï¼ˆäº”ï¼‰ï¼šåŠ¡å®åŸºç¡€ï¼ˆä¸‹ï¼‰ä¹‹å‡½æ•° æ›´æ–°å®Œæ¯• 2021-12-10 ï¼šæ–‡ç« æ›´æ–° C++ä»é›¶å¼€å§‹ï¼ˆäºŒï¼‰ï¼šç¯å¢ƒæ­å»ºï¼ˆä¸‹ï¼‰g++/Makefile/CMakeå¿«é€Ÿå…¥é—¨æ›´æ–°å®Œæ¯• 2021-12-06 ï¼šæ–‡ç« æ›´æ–° C++ä»é›¶å¼€å§‹ï¼ˆä¸€ï¼‰ï¼šç¯å¢ƒæ­å»ºï¼ˆä¸Šï¼‰ä¹‹VSCodeè¿œç¨‹å¼€å‘ æ›´æ–°å®Œæ¯• 2021-12-05 ï¼šç¬¬ä¸€æ¬¡æ›´æ–° åˆæ­¥ç¡®å®šã€ŠC++ä»é›¶å¼€å§‹ç³»åˆ—ã€‹å¤§çº²å³å°†æ›´æ–°ï¼šC++åŸºç¡€ç³»åˆ— å‚è€ƒèµ„æ–™ 1.é˜¿ç§€çš„æ±‚èŒç¬”è®°ï¼šhttps://interviewguide.cn/ â†©2.zavarå¼€æºåœ°å€: https://github.com/zyearn/zaver â†©3.ffmpeg-trancodeå¼€æºåœ°å€: https://github.com/leichn/exercises/tree/master/source/ffmpeg/ffmpeg_transcode â†©4.SRSå¼€æºåœ°å€ï¼šhttps://github.com/ossrs/srs â†©5.è…¾è®¯äº‘C++æ•™ç¨‹ï¼šhttps://cloud.tencent.com/edu/learning/course-1844-21296 â†©","categories":[{"name":"C++","slug":"C","permalink":"https://hwh.zone/categories/C/"},{"name":"ä»é›¶å¼€å§‹","slug":"C/ä»é›¶å¼€å§‹","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"}],"tags":[{"name":"C++","slug":"C","permalink":"https://hwh.zone/tags/C/"},{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://hwh.zone/tags/%E6%95%99%E7%A8%8B/"}]},{"title":"Hexo+Github Pageså¿«é€Ÿæ‰“é€ å±äºè‡ªå·±çš„ç½‘ç«™","slug":"Hexoå¿«é€Ÿæ‰“é€ å±äºè‡ªå·±ç½‘ç«™","date":"2021-11-29T12:10:54.202Z","updated":"2022-02-08T16:55:32.080Z","comments":true,"path":"p/56326/","link":"","permalink":"https://hwh.zone/p/56326/","excerpt":"","text":"âš ï¸ é˜…è¯»æœ¬æ–‡å‰ï¼Œä½ éœ€è¦å…·å¤‡ï¼š ä¼šæ‰“å­— ç†Ÿç»ƒæŒæ¡Ctrl+C/Ctrl+V æˆ–è®¸æœ‰ä¸€ç‚¹çš„ç½‘ç»œçŸ¥è¯† å¦‚æœæ“ä½œé‡åˆ°å›°éš¾ï¼Œå¯åœ¨æ–‡ç« ä¸‹æ–¹è¿›è¡Œç•™è¨€ğŸ˜ƒã€‚ å‰è¨€ è¿«ä¸åŠå¾…ï¼Ÿå»ºç«™æ•ˆæœå®æ—¶é¢„è§ˆï¼šroyhuangâ€˜s blog ã€‚ royhuang's bloghttps://www.hwh.zone ç¬¬ä¸€æ¬¡å»ºç«™æ—¶è¿˜æ˜¯ä¸‰å¹´å‰ç”¨WordPressæ­å»ºï¼Œç½‘ç«™æ”¾åœ¨è…¾è®¯äº‘VPSä¸Šè¿è¡Œã€‚å› ä¸ºæœºå™¨é…ç½®è¾ƒä½æ¯”è¾ƒå¡ï¼Œæœ‰æ¬¡æš´èºdebugæŠŠæ•´ä¸ªæœåŠ¡å™¨remakeäº†ï¼Œä¸äº†äº†ä¹‹ã€‚å†åé¢åˆå› ä¸ºå¯¹Java Webå¼€å‘æ¯”è¾ƒæ„Ÿå…´è¶£ï¼ŒæŠ˜è…¾äº†SpringBoot Webå¼€å‘å’Œå‰åç«¯ç›¸å…³çŸ¥è¯†ï¼Œæ‰“ç®—è‡ªå·±å®Œå…¨å‰åç«¯è‡ªä¸»å¼€å‘ä¸€ä¸ªåšå®¢ã€‚å› ä¸ºä¸»å®¢è§‚å„ç§åŸå› ï¼Œåšäº†ä¸€ä¸ªæ®‹æ¬¡å“ï¼Œé˜´å·®é˜³é”™æœ€åè¦ä»¥C++å¼€å§‹è‡ªå·±èŒä¸šç”Ÿæ¶¯ç¬¬ä¸€ç«™ï¼Œä¹Ÿæ²¡æœ‰æœ€ç»ˆå®Œå–„ã€‚ è¶ç€è¿™æ®µæ—¶é—´ï¼Œä½¿ç”¨Hexo+Github Pages ä½œä¸ºæœ€ç»ˆå»ºç«™æ–¹æ¡ˆæŠ˜è…¾äº†å‡ å¤©ï¼Œæ€»ä½“æ¥è¯´æ•ˆæœè¿˜æ¯”è¾ƒæ»¡æ„ã€‚ä¸ºäº†åæ¥äººå°‘è¸©ç‚¹å‘ï¼ŒåŒæ—¶ä¸ºè‡ªå·±ç³Ÿç³•çš„è®°å¿†ç•™ç‚¹å›å¿†ï¼Œç‰¹æ­¤è®°å½•ã€‚ ä¸»æµå»ºç«™æ–¹å¼æ¯”è¾ƒ åœ¨æ­£å¼å¼€å§‹å‰ï¼Œæˆ‘ä»¬ä¸å¦¨å…ˆæ¥åˆ†æä¸‹ä¸»æµå»ºç«™æ–¹å¼ï¼Œåšåˆ°å¿ƒä¸­æœ‰æ•°ã€‚è‡ªç„¶ï¼Œæ­¤èŠ‚ä¹Ÿå¯ä»¥ç•¥è¿‡ã€‚ å»ºç«™éš¾åº¦ æ‰€éœ€çŸ¥è¯† å®šåˆ¶åŒ–ç¨‹åº¦ é€‚åˆäººç¾¤ å¤‡æ³¨ WordPress â­ï¸â­ï¸ Linuxã€GitåŸºæœ¬çŸ¥è¯† ä¸€èˆ¬ Webå¼€å‘å°ç™½äººç¾¤ ä¹‹å‰å†™çš„æ•™ç¨‹ï¼šæ•™ç»ƒ,æˆ‘æƒ³å»ºç½‘ç«™ï¼ Java Web â­ï¸â­ï¸â­ï¸â­ï¸ Webå‰åç«¯å¼€å‘çŸ¥è¯†ï¼Œå¤šä¸”æ‚ éå¸¸é«˜ï¼Œå‰åç«¯ä»£ç å…¨æ ˆå¼€å‘ Java Webå¼€å‘äººå‘˜ Hexo + Github Pages â­ï¸â­ï¸ Linuxã€GitåŸºæœ¬çŸ¥è¯† è¾ƒé«˜ï¼ŒåŸºäºé…ç½®æ–‡ä»¶ä¿®æ”¹è¾ƒæ–¹ä¾¿ Webå¼€å‘å°ç™½äººç¾¤ ä¸éœ€è¦å¤‡æ¡ˆåŸŸå Hexo + è…¾è®¯äº‘ â­ï¸â­ï¸ åŒä¸Š åŒä¸Š åŒä¸Š åŸŸåéœ€è¦å¤‡æ¡ˆï¼Œä½†ç½‘ç«™è®¿é—®é€Ÿåº¦ä¼šå˜å¿«å¾ˆå¤š æ ¹æ®ä»¥ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸åŒæƒ…å†µè¿›è¡Œé€‰æ‹©ï¼š Java Webå…¨æ ˆæ­å»ºï¼Ÿ é€‚åˆJava Webä¸ºæŠ€æœ¯æ ˆçš„ä¸“ä¸šäººå‘˜ï¼Œå¯ä»¥ä½œä¸ºä¸ªå°é¡¹ç›®ï¼› ä½†å¦‚æœä½ å¹¶éä¸“ä¸šçš„Java Webå¼€å‘äººå‘˜ï¼Œä¸æƒ³å­¦ä¹ å¤æ‚çš„Java Webä½“ç³»ï¼Œä½†æ˜¯åˆå…·å¤‡å¼€å‘åŸºç¡€çŸ¥è¯†ï¼Œæƒ³æ­å»ºä¸€ä¸ªæ¼‚äº®çš„åšå®¢ï¼šWordPress å’Œ Hexoæ˜¯ä½ ä¸äºŒçš„é€‰æ‹©ã€‚ WordPressè¿˜æ˜¯Hexo[3] ï¼Ÿ ä½œä¸ºéƒ½ä½“éªŒè¿‡çš„äººï¼Œæˆ‘è¯´è¯´ä¸€ä¸‹è‡ªå·±æ¯”è¾ƒä¸»è§‚çš„å¯¹æ¯”ï¼š WordPressä¼˜ç‚¹ï¼šå¾ˆç®€å•ï¼Œé€‚åˆç‰¹åˆ«å°ç™½çš„åŒå­¦ï¼› WordPressç¼ºç‚¹ï¼šå ç”¨èµ„æºå¤šï¼Œå“åº”æ…¢ï¼›ä¸æ”¯æŒåŸç”Ÿmarkdownï¼ˆæ¯æ¬¡è¦å¯¼å‡º.htmlå¤ªç—›è‹¦äº†ï¼‰ï¼›ä¸»é¢˜ä¹Ÿä¸å¤Ÿåˆå¿ƒæ„ï¼ˆä¸ç¾è§‚ï¼‰ã€‚ æ‰€ä»¥æˆ‘è‡ªå·±ï¼ˆæœ‰å¼€å‘åŸºç¡€ï¼‰è¿˜æ˜¯æ¨èä½¿ç”¨Hexoã€‚ Hexo + Github Pages è¿˜æ˜¯ Hexo + è…¾è®¯äº‘? Github Pages æ‰˜ç®¡ç½‘ç«™ï¼šå› ä¸ºæœåŠ¡å™¨åœ¨å›½å¤–ï¼ˆGithubï¼‰ï¼ŒåŸŸåæ— éœ€å¤‡æ¡ˆï¼Œä½†è®¿é—®é€Ÿåº¦ä¼šæ¯”è¾ƒæ…¢ï¼Œä¹Ÿæ— éœ€è´­ä¹°äº‘æœåŠ¡å™¨ï¼› è…¾è®¯äº‘æ‰˜ç®¡ç½‘ç«™ï¼šéœ€è¦è´­ä¹°äº‘æœåŠ¡å™¨ï¼ˆæˆ–COSï¼‰ï¼Œä¸”åŸŸåéœ€è¦å¤‡æ¡ˆï¼Œä½†è®¿é—®é€Ÿåº¦ä¼šå¾ˆå¿«ã€‚ å› ä¸ºæœ¬æ–‡è€ƒè™‘æ›´ä½æˆæœ¬ï¼Œæˆ‘ä¹Ÿæ¯”è¾ƒæ‡’ä¸æƒ³å¤‡æ¡ˆï¼Œè®¿é—®é€Ÿåº¦è™½ç„¶æ…¢ç‚¹ä½†è¿˜èƒ½æ¥å—ï¼Œæ‰€ä»¥é‡‡ç”¨Hexo + Github Pagesä½œä¸ºæœ€ç»ˆçš„å»ºç«™æ–¹æ¡ˆã€‚ å¥½äº†ï¼Œç°åœ¨è®©æˆ‘ä»¬å¼€å§‹æ¿€åŠ¨äººå¿ƒçš„ç¯èŠ‚å§ï¼ŒåŠ¨æ‰‹æ­å»ºè‡ªå·±çš„ç½‘ç»œå¿«ä¹å°çªã€‚ Hexo + Github Pages Hexoæ˜¯ä¸€æ¬¾åŸºäºNode.jsçš„é™æ€åšå®¢æ¡†æ¶ï¼Œä¾èµ–å°‘æ˜“äºå®‰è£…ä½¿ç”¨ï¼Œå¯ä»¥æ–¹ä¾¿çš„ç”Ÿæˆé™æ€ç½‘é¡µæ‰˜ç®¡åœ¨GitHub Pagesä¸Šï¼ˆæ— éœ€äº‘æœåŠ¡å™¨ï¼‰ï¼Œæ˜¯æ­å»ºåšå®¢çš„é¦–é€‰æ¡†æ¶[2]ã€‚ ç”¨å¤§ç™½è¯æ¥è¯´å°±æ˜¯ï¼š Hexoï¼šç”¨æ¥å°†æˆ‘ä»¬å†™çš„æ–‡ç« ï¼Œæ¸²æŸ“ç”Ÿæˆæœ¬åœ°ç”Ÿæˆé™æ€ç½‘é¡µ ï¼Œä½†åªæœ‰ä½ è‡ªå·±èƒ½çœ‹åˆ°ï¼› Github Pages : å°†Hexoç”Ÿæˆçš„é™æ€ç½‘é¡µï¼Œéƒ¨ç½²æ‰˜ç®¡åˆ°äº‘æœåŠ¡å™¨ï¼ˆGithub Pagesï¼ŒVPSï¼ŒCOSå‡å¯ï¼‰ä¸Šï¼Œè¿™æ ·åˆ«äººä¹Ÿå¯ä»¥è®¿é—®ã€‚ å¿«é€Ÿå¼€å§‹ ä»¥ä¸‹ä¸»è¦æ“ä½œå‡å·²åœ¨è™šæ‹Ÿæœºä¸­ç»è¿‡äºŒæ¬¡éªŒè¯ã€‚ å‡†å¤‡å·¥ä½œï¼šGithub &amp; Git åˆ›å»ºGithubä¸ªäººä»“åº“ âš ï¸ æ³¨æ„å‘½ä»¤æ–¹å¼å¿…é¡»ä¸ºï¼šä½ çš„Githubç”¨æˆ·å.github.io ï¼Œè¿™ç§å½¢å¼ã€‚ ç™»é™†ç”¨æˆ·åå’Œæ˜µç§°åˆ†ä¸æ¸…?ä½ çš„ä¸ªäººä¸»é¡µï¼Œä¸‹é¢çº¢æ¡†æ‰€ç¤ºæ‰æ˜¯ä½ çš„ç”¨æˆ·åã€‚ æˆ‘å·²åˆ›å»ºè¿‡è¯¥é¡¹ç›®ï¼Œæ•…æ˜¾ç¤ºé‡å¤ å®‰è£…Git Gitä¸‹è½½åœ°å€ , å®‰è£…å®Œæˆåï¼Œåœ¨å¼€å§‹èœå•é‡Œæ‰¾åˆ°â€œGitâ€-&gt;â€œGit Bashâ€ï¼Œåˆ™Gitå®‰è£…æˆåŠŸã€‚ åŒæ—¶è¿˜éœ€é…ç½®åŸºæœ¬Githubç›¸å…³ä¿¡æ¯ï¼Œä¸»è¦æ˜¯ç”¨æˆ·åå’Œé‚®ç®±ï¼š 12$ git config --global user.name &quot;Wanghui-Huang&quot; $ git config --global user.email &quot;380141202@qq.com&quot; æœ¬æ–‡é»˜è®¤ä½ å…·å¤‡åŸºæœ¬Gitç›¸å…³çŸ¥è¯†ï¼Œæ•…ä¸å†èµ˜è¿°ï¼Œå¦‚æœä¸å…·å¤‡å¯ä»¥å­¦ä¹ ï¼šGitåŸºç¡€ç¬”è®° ã€‚ å®‰è£…Node.js HexoåŸºäºNode.jsï¼Œè‡ªç„¶éœ€è¦å®‰è£…ç›¸å…³ç»„ä»¶ã€‚ ä¸‹è½½ Node.js , ä¸€ç›´é»˜è®¤å®‰è£…å³å¯ï¼ˆä¸è¦éšæ„å‹¾é€‰ï¼‰ã€‚ å®‰è£…æˆåŠŸåï¼Œåˆ†åˆ«è¾“å…¥ node -v &amp; npm -vï¼Œå‡ºç°ä»¥ä¸‹ç‰ˆæœ¬ä¿¡æ¯åˆ™å®‰è£…æˆåŠŸï¼š æ­å»ºHexo æ–°å»ºæ–‡ä»¶å¤¹ æˆ‘ä»¬åœ¨åˆé€‚çš„è·¯å¾„æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå‘½åéšæ„ï¼Œæˆ‘å‘½åä¸ºï¼šwww.hwh.zoneã€‚ å®‰è£…Hexo 1npm install -g hexo-cli åˆå§‹åŒ–åšå®¢ 12cd ./www.hwh.zone/hexo init blog æœ¬åœ°æµ‹è¯•éªŒè¯ âš ï¸ æ³¨æ„ä»¥ä¸‹å‘½ä»¤å…¨éƒ¨éƒ½åœ¨ï¼š./www.hwh.zone/blog è·¯å¾„ä¸‹æ‰§è¡Œã€‚ 1234cd ./blog/hexo new test_my_site # ç”Ÿæˆä¸€ç¯‡æ–°æ–‡ç« hexo g # ç”Ÿæˆé™æ€æ–‡ä»¶ï¼ˆç½‘é¡µï¼‰hexo s # æœ¬åœ°ç”Ÿæˆé™æ€ç½‘ç«™é¢„è§ˆ æ‰§è¡Œå®Œæ¯•åï¼Œè¾“å…¥ï¼šhttp://localhost:4000 ï¼Œå‡ºç°ä»¥ä¸‹é¡µé¢åˆ™ç”ŸæˆæˆåŠŸï¼š å¦‚æœhexo s æ‰§è¡ŒæˆåŠŸï¼Œæµè§ˆå™¨å´æ‰“ä¸å¼€ï¼Œé€šå¸¸æ˜¯ç«¯å£ï¼ˆ4000ï¼‰è¢«å ç”¨ã€‚å¯ä»¥è®¾ç½®hexoä½¿ç”¨åˆ«çš„ç«¯å£ï¼š 1hexo server -p 4001 ç„¶åè¾“å…¥ï¼šhttp://localhost:4001 ï¼Œé‡æ–°æ‰“å¼€å³å¯ã€‚ ç°åœ¨ä½ å·²ç»åˆæ­¥æ­å»ºå¥½äº†è‡ªå·±çš„ç½‘ç«™ï¼Œç°åœ¨è®©æˆ‘ä»¬å¼€å§‹å‘å¸ƒè‡ªå·±çš„ç½‘ç«™ï¼Œè®©æ›´å¤šäººçœ‹åˆ°~ é…ç½®è¿œç¨‹æ¨é€ä¿¡æ¯ åœ¨ ./www.hwh.zone/blog è·¯å¾„ä¸‹ï¼Œæ‰¾åˆ°ä¸»é…ç½®æ–‡ä»¶ï¼š__config.yml ï¼š [æ³¨1]ï¼šå› ä¸ºè¿™ä¸ªæ–‡ä»¶å¾ˆé‡è¦ï¼Œç‰¹é™„å›¾ç¤ºä¾‹ ã€‚ [æ³¨2]ï¼šè¯¥é…ç½®æ–‡ä»¶å¯¹ç¼©è¿›ç­‰éƒ½ä¸¥æ ¼è¦æ±‚ï¼Œå»ºè®®ç”¨IDEæ‰“å¼€ç¼–è¾‘ï¼ˆæ¯”å¦‚VScodeï¼‰ï¼Œä¸æ˜“å‡ºé”™ã€‚ åœ¨æ–‡ä»¶æœ€ä¸‹æ–¹é…ç½®ç›¸å…³ä¿¡æ¯ï¼š âš ï¸ æ³¨æ„ï¼š : åé¢éœ€è¦ç•™ä¸€ä¸ªç©ºæ ¼ ï¼Œrepoåœ°å€æœ€åéœ€è¦å¸¦ä¸Š .git ! å®‰è£…Gitæ’ä»¶ 1npm install hexo-deployer-git --save å†™ä¸€ç¯‡è‡ªå·±çš„æ–‡ç«  _posts è·¯å¾„ä¸‹çš„ md æ–‡ä»¶ï¼Œä¼šè¢«Hexoè‡ªåŠ¨è§£æã€æ¸²æŸ“ç”Ÿæˆç½‘é¡µã€‚æˆ‘ä»¬æ‰€æœ‰çš„åšå®¢éƒ½æ˜¯æ”¾åœ¨è¿™ä¸ªç›®å½•çš„ã€‚ æˆ‘ä»¬åœ¨ï¼šwww.hwh.zone\\blog\\source\\_posts è·¯å¾„ä¸‹ï¼Œå†™ä¸€ç¯‡å±äºè‡ªå·±çš„æ–‡ç« ï¼š å¼€å§‹å‘å¸ƒç½‘ç«™ ä»¥ä¸Šå‘½ä»¤å¦‚æœä¸å‡ºé”™ï¼Œä¾æ¬¡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 123456# æ¸…é™¤ç¼“å­˜ç½‘é¡µhexo clean # ç”Ÿæˆé™æ€ç½‘é¡µhexo g# æ¨é€å‘å¸ƒç½‘ç«™ï¼Œè¦è¾“å…¥Githubè´¦å·å’Œtokenï¼ˆæ³¨æ„ä¸æ˜¯å¯†ç ï¼Œgithubä»ä¸Šæœˆå¼€å§‹å·²ç»ä½¿ç”¨tokenéªŒè¯èº«ä»½ï¼Œç”Ÿæˆtokenå¯å‚è€ƒï¼šhttps://zhuanlan.zhihu.com/p/38800965ï¼‰hexo d ğŸ› è§£å†³BUGï¼šOpenSSL SSL_readï¼šConnection was resetï¼Œerron 10054ã€‚ ç¬¬ä¸€ç§æƒ…å†µï¼šæœªè§£é™¤SSLéªŒè¯ æ‰“å¼€gitï¼Œåˆ‡æ¢åˆ°www.hwh.zone/blog ç›®å½•ä¸‹ å–æ¶ˆSSLéªŒè¯ 1git config --global http.sslVerify &quot;false&quot; ç¬¬äºŒç§æƒ…å†µï¼šå¼€äº†å°é£æœºï¼Œè®©å°é£æœºé‡æ–°æ¢ä¸ªæœåŠ¡å™¨é‡æ–°è¿æ¥ã€‚ æ¬£èµä½ è‡ªå·±çš„ç½‘ç«™~ï¼ ç°åœ¨æˆ‘ä»¬åœ¨æµè§ˆå™¨è¾“å…¥ï¼šWanghui-Huang.github.io , å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ç¬¬ä¸€ç¯‡åšå®¢å·²ç»æ­£å¼å‘å¸ƒäº†ï¼ğŸ¤™ æ„‰å¿«çš„å¤šæ¬£èµä¸€ä¸‹å§~ TIPS ğŸ’¡ ä¸€èˆ¬æˆ‘ä»¬å‘å¸ƒæ–‡ç« ï¼ˆæˆ–ä¿®æ”¹ä¸»é¢˜CSSæ ·å¼ç­‰ï¼‰, æµç¨‹å¦‚ä¸‹ï¼š hexo clean &amp;&amp; hexo g &amp;&amp; hexo s ï¼Œæ‰“å¼€ localhost:4000æœ¬åœ°é¢„è§ˆï¼› æœ¬åœ°è¿›è¡Œä¿®æ”¹ï¼Œe.g. æ–‡ç« å¢æ”¹ã€CSSæ ·å¼ä¿®æ”¹ï¼› F5åˆ·æ–°ä¸‹ç½‘é¡µå³å¯çœ‹åˆ°ä¿®æ”¹åçš„æ–‡ç« æˆ–æ ·å¼ï¼Œä¸€èˆ¬ä¸éœ€è¦é‡æ–°æ‰§è¡Œhexo clean &amp;&amp; hexo g &amp;&amp; hexo d ï¼› ä½†æ˜¯å¦‚æœå‡ºç°åˆ·æ–°æ— æ•ˆï¼Œæ­¤æ—¶æœ€å¥½é‡æ–°æ‰§è¡Œä¸‹ä»¥ä¸Šä¸‰ä¸ªå‘½ä»¤ï¼› æœ€åå†æ‰§è¡Œhexo d , å‘å¸ƒæ–‡ç« ã€‚ ä¸»é¢˜&amp;ç¾åŒ–ï¼šä»¥Butterflyä¸ºä¾‹ hexoçš„ä¼—å¤šå¼€å‘è€…ï¼Œæ— ç§æä¾›äº†éå¸¸å¤šä¸»é¢˜ä¾›æˆ‘ä»¬è¿›è¡Œä¸»é¢˜ç¾åŒ–ã€‚å»Hexoå®˜ç½‘æˆ–åœ¨Github-hexo theme ï¼Œæœç´¢ä¸€ä¸ªä½ å–œæ¬¢çš„ä¸»é¢˜ï¼š åœ¨è¿™é‡Œï¼Œæˆ‘ä½¿ç”¨ä¸»é¢˜ Github-Butterfly ï¼Œä½œä¸ºæœ€ç»ˆçš„é€‰æ‹©ã€‚ å¿«é€Ÿå¼€å§‹ ä¸‹è½½ä¸»é¢˜ 1git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly âš ï¸ ä¸‹è½½å®Œæ¯•åï¼Œæ–‡ä»¶é‡å‘½åä¸º butterfly ï¼Œ æ”¾åœ¨ www.hwh.zone\\blog\\themes ç›®å½•ä¸‹ã€‚ åº”ç”¨ä¸»é¢˜ åœ¨Hexoæ ¹ç›®å½•ä¸‹ä¸»é…ç½®æ–‡ä»¶ _config.yml , è¿›è¡Œé…ç½®ï¼š 1theme: butterfly å®‰è£…å¿…è¦æ’ä»¶ 1npm install hexo-renderer-pug hexo-renderer-stylus --save æµ‹è¯•æŸ¥çœ‹ é‡æ–°ç”Ÿæˆé™æ€ç½‘é¡µï¼š 123hexo cleanhexo ghexo d æ‰“å¼€ ï¼šhttp://localhost:4000 , å¯çœ‹åˆ°ä¸»é¢˜å·²ç»è¢«æˆåŠŸæ›¿æ¢ã€‚ åŸºæœ¬é…ç½® å¦‚æœä½ æƒ³å‚è€ƒæˆ‘çš„é…ç½®ä¿¡æ¯ï¼Œå¯åœ¨è¿›è¡Œé™„å½•ä¸­æŸ¥çœ‹ã€‚ åœ¨è¿™ä¸€èŠ‚æˆ‘ä»¬å°†è¿›è¡Œä¸»é¢˜çš„åŸºæœ¬ä¿¡æ¯è®¾ç½®ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š ç½‘ç«™åŸºæœ¬ä¿¡æ¯è®¾ç½® èƒŒæ™¯å›¾ç‰‡è®¾ç½® ç›®å½•ç›¸å…³è®¾ç½® â€¦ ä½†æ˜¯åœ¨æœ¬æ–‡å¹¶ä¸å‡†å¤‡å°†ä»¥ä¸Šè®¾ç½®è¿‡ç¨‹è¯¦ç»†åˆ—å‡ºï¼Œå› ä¸ºå®˜ç½‘å¯¹è¿™äº›çš„æè¿°å·²ç»éå¸¸æ¸…æ™°å’Œç®€æ´ã€‚å› æ­¤ï¼Œå¼ºçƒˆå»ºè®®ä½ å‚è€ƒå®˜ç½‘æ–‡æ¡£ï¼šbutterflyä¸»é¢˜é…ç½®å®˜æ–¹æ–‡æ¡£ ï¼Œæ ¹æ®ä¸ªäººå–œæ¬¢è¿›è¡Œè¿™äº›åŸºæœ¬è®¾ç½®ã€‚ åœ¨è¿™é‡Œå°†ä¸»è¦è®°å½•ï¼šå®˜ç½‘æ–‡æ¡£æœªæåŠçš„ä¼˜åŒ–ï¼Œä»¥åŠæ ¹æ®å®˜ç½‘æ–‡æ¡£é…ç½®æ—¶é‡åˆ°çš„é—®é¢˜è§£å†³åŠæ³•ã€‚ Markdowmæ¸²æŸ“ä¼˜åŒ– æœ¬èŠ‚æ¶‰åŠï¼šæ•°å­¦å…¬å¼ã€è„šæ³¨ã€è¡¨æƒ…ã€æ ‡é¢˜å¤§å°ç­‰è®¾ç½®ã€‚ æ•°å­¦å…¬å¼è¡¨æƒ…è„šæ³¨æ ‡é¢˜å¤§å°æ ‡ç­¾å¤–æŒ‚æŒ‰ç…§ å®˜æ–¹æ–‡æ¡£ , è¿›è¡Œé…ç½®ï¼š ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼ŒåŠ è½½katex.min.css âš ï¸ per_page å±æ€§ä¸èƒ½è®¾ç½®trueï¼Œå¦åˆ™ä¼šå‡ºç°bugï¼šå…¬å¼è¢«æ¸²æŸ“ä¸¤æ¬¡ã€‚ 123456katex: enable: true # true è¡¨ç¤ºæ¯ä¸€é éƒ½åŠ è¼‰katex.js # false éœ€è¦æ™‚åŠ è¼‰ï¼Œé ˆåœ¨ä½¿ç”¨çš„Markdown Front-matter åŠ ä¸Š katex: true per_page: false # ä¸è¦é€‰æ‹©ä¸ºtrueï¼ï¼ hide_scrollbar: true ç„¶ååœ¨éœ€è¦æ‰“å¼€æ•°å­¦å…¬å¼æ¸²æŸ“çš„æ–‡ç« ï¼Œå¼€å¤´è®¾ç½®ï¼škatex: true å®‰è£ hexo-renderer-markdown-it 12345npm un hexo-renderer-marked --save # å¦‚æœæœ‰å®‰è£é€™å€‹çš„è©±ï¼Œå¸è¼‰npm un hexo-renderer-kramed --save # å¦‚æœæœ‰å®‰è£é€™å€‹çš„è©±ï¼Œå¸è¼‰npm i hexo-renderer-markdown-it --save # éœ€è¦å®‰è£é€™å€‹æ¸²æŸ“æ’ä»¶npm install @neilsustc/markdown-it-katex --save #éœ€è¦å®‰è£é€™å€‹katexæ’ä»¶ ä¿®æ”¹Hexoæ ¹ç›®å½•é…ç½®æ–‡ä»¶ 123456markdown: plugins: - plugin: name: &#x27;@neilsustc/markdown-it-katex&#x27; options: strict: false è¡¨æƒ…æ’ä»¶é…ç½®è¿‡ç¨‹å¦‚ä¸‹ï¼š å®‰è£…æ’ä»¶ 1npm install markdown-it-emoji --save æ ¹ç›®å½•é…ç½®æ–‡ä»¶æ·»åŠ æ’ä»¶ è„šæ³¨ç›´æ¥å®‰è£…æ’ä»¶å³å¯ï¼š 1npm install hexo-reference --save å¦‚æœå®‰è£…åï¼Œæœ¬åœ°ï¼ˆtyporaï¼‰å¯ä»¥æ­£ç¡®æ¸²æŸ“ï¼Œhexoæ— æ³•æ­£ç¡®æ¸²æŸ“ï¼šå¤šåŠæ˜¯è„šæ³¨ä½¿ç”¨å‡ºç°è¯­æ³•é”™è¯¯ã€‚ åœ¨æ­£æ–‡ä¸­ï¼šä¸¥æ ¼æŒ‰ç…§[^1] å†™å…¥è„šæ³¨ï¼Œä¸è¦ç”¨ä»»ä½•ç©ºæ ¼ï¼ åœ¨é“¾æ¥ä¸­ï¼šä¸¥æ ¼æŒ‰ç…§[^1]: å†™å…¥å¼•ç”¨é“¾æ¥ï¼Œä¸è¦ç”¨ä»»ä½•ç©ºæ ¼ï¼ butterflyä¸»é¢˜æ ‡é¢˜å¤§å°é»˜è®¤çš„è¿‡å°ï¼Œä¸æ˜“äºå’Œæ­£æ–‡è¿›è¡ŒåŒºåˆ†ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦ï¼š æ‰¾åˆ°\\www.hwh.zone\\blog\\themes\\butterfly\\source\\css\\_third-party è·¯å¾„ä¸‹çš„normalize.min.css æ–‡ä»¶ æ‰‹åŠ¨è®¾ç½® h1~h5æ ‡é¢˜å¤§å° æ ‡ç­¾å¤–æŒ‚æ’ä»¶ Tag Plugins Plus ï¼Œæä¾›äº†ä¸°å¯Œçš„markdownæ–‡ä»¶ç¼–å†™ç¾åŒ–ï¼š æ—¶é—´è½´ å„ç§å¡ç‰‡ éŸ³é¢‘ã€è§†é¢‘æ’å…¥ â€¦ å¯ä»¥è®©ä½ çš„æ–‡ç« çœ‹èµ·æ¥ç¾è§‚è®¸å¤šï¼Œå…·ä½“é…ç½®è¯·å‚è€ƒï¼šTag Plugins Pluså®˜ç½‘ ã€‚ æ–‡æ¡£æ¸…æ™°ç®€æ´ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚ æ”¯æŒè¯„è®ºåŠŸèƒ½ å®˜ç½‘æ–‡æ¡£è™½ç„¶ç»™äº†å¾ˆå¤šç§è®¾ç½®çš„è¯„è®ºæ–¹å¼ï¼Œä½†å°±æˆ‘è‡ªå·±å°è¯•è€Œè¨€ï¼ŒUtteranceså’ŒTwikooå±äºæ¯”è¾ƒæ–¹ä¾¿çš„æ–¹å¼ã€‚ Utterancesä¸»è¦ä¼˜ç‚¹ï¼š å’ŒGitalkç±»ä¼¼ï¼Œä½†ä¸éœ€è¦è¿‡å¤šçš„æƒé™è®¾ç½®ï¼› ç›¸æ¯”Facebook Comments ç­‰æ— éœ€ç¿»å¢™ï¼› ç›¸æ¯”Disqusç­‰UIæ›´ç®€æ´ç¾è§‚ã€‚ å”¯ä¸€ç¾ä¸­ä¸è¶³çš„ä¾¿æ˜¯ä¸èƒ½åŒ¿åè¯„è®ºï¼Œç•™è¨€å¿…é¡»è¦ç”¨Githubè´¦å·å…ˆç™»å½•ã€‚Twikooåœ¨ä¸‹æ–‡è¿›è¡Œä»‹ç»ã€‚ Utterancesï¼ˆå…è´¹ï¼‰Twikooï¼ˆä»˜è´¹ï¼‰ä»¥ä¸‹æ˜¯Utterancesè®¾ç½®è¿‡ç¨‹ï¼š åœ¨Githubåˆ›å»ºä¸€ä¸ªpublicçš„é¡¹ç›® ä¸å†èµ˜è¿°è¿‡ç¨‹ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ï¼šhttps://github.com/Wanghui-Huang/gittalk ï¼Œè¿™ä¸ªé¡¹ç›®ã€‚ å®‰è£… utterances ç‚¹å‡»ï¼šhttps://github.com/apps/utterances ï¼Œå®‰è£…appï¼ˆå³ä¸Šæ–¹å¤„InstallæŒ‰é’®ï¼‰ã€‚ å®‰è£…æˆåŠŸåï¼Œä¼šå‡ºç°ä¸‹é¢ConfigureæŒ‰é’®ï¼š è®¾ç½®ç›¸å…³ä¿¡æ¯ ç‚¹å‡»ConfigureæŒ‰é’®ï¼Œè¿›å…¥è®¾ç½®ç•Œé¢ï¼Œæ³¨æ„çº¢æ¡†å¤„ç›¸å…³ä¿¡æ¯è®¾ç½®ï¼š è®¾ç½®å®Œæ¯•åä¿å­˜ã€‚ ä¸»é¢˜æ–‡ä»¶é…ç½® ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼šrepoä¿®æ”¹ä¸ºä½ åˆšåˆšåˆ›å»ºçš„repoï¼Œå½¢å¼ä¸º ä½ çš„ç”¨æˆ·å.é¡¹ç›®å ç»§ç»­ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ŒæŒ‡å®šè¯„ä»·æ’ä»¶åï¼š æµ‹è¯• &amp; bugè§£å†³ é€‰æ‹©ä»»æ„ä¸€ç¯‡æ–‡ç« ï¼Œå¯ä»¥çœ‹åˆ°è¯„è®ºæ¡†å·²ç»é¡ºåˆ©å‡ºç°ï¼š ç»è¿‡å®é™…æµ‹è¯•ï¼Œä¾æ—§ä¼šå‡ºç°è¯„è®ºæ¡†æ— æ³•æ˜¾ç¤ºçš„é—®é¢˜ï¼š æˆ‘çš„é—®é¢˜æ˜¯å› ä¸ºä½¿ç”¨äº†è‡ªå·±çš„åŸŸåï¼Œhttpsä¸å®‰å…¨ä¾¿ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼› å¦‚ä½•ä½¿ç”¨è‡ªå·±çš„åŸŸåï¼Œåç»­å°èŠ‚æœ‰è¯¦ç»†æ•™ç¨‹ &amp; è¸©å‘è®°å½•ã€‚ å¯ä»¥åœ¨ Githubé¡¹ç›®ï¼šWanghui-Huang.github.io â†’ Settingâ†’Pages ï¼Œå‹¾é€‰Enforce HTTPS ï¼š ä¸‰è¿é‡æ–°ç”Ÿæˆé™æ€ç½‘é¡µï¼š 123hexo cleanhexo ghexo s ä¾¿å¯ä»¥çœ‹åˆ°è¯„è®ºæ¡†å·²ç»æ­£ç¡®æ˜¾ç¤ºäº†ã€‚ è™½ç„¶Utteranceså·²ç»è¶³å¤Ÿç®€æ´ä¼˜ç§€ä¸”å…è´¹ï¼Œä½†æ˜¯TwikooåŸºäºè…¾è®¯äº‘å¼€å‘ï¼Œåœ¨å›½å†…é€Ÿåº¦å¾ˆå¿«&amp;æ”¯æŒåŒ¿åï¼Œä»·æ ¼ä¹Ÿè¶³å¤Ÿå®æƒ ï¼ˆåŒ…å¹´å¤§çº¦6å…ƒ/æœˆï¼‰ã€‚å¦ä¸€æ–¹é¢ï¼Œæ”¯æŒä¸‹ä¸œå®¶ä¸šåŠ¡æœ€åé€‰æ‹©äº†è¿™ä¸ªæ–¹æ¡ˆã€‚ è…¾è®¯äº‘å‡½æ•°é…ç½® è¿™ä¸€éƒ¨åˆ†çœ‹å®˜ç½‘æ–‡æ¡£å³å¯ï¼Œå¾ˆè¯¦ç»†ä¸å†èµ˜è¿°ã€‚ Butterflyä¸»é¢˜é…ç½® ä¿®æ”¹ ä¸»é¡Œé…ç½®æ–‡ä»¶ ï¼š 12345twikoo: envId: blog-comments-5g2cfs******* # è…¾è®¯äº‘å‡½æ•°é…ç½®å®Œåçš„id region: ap-shanghai # é»˜è®¤ä¸Šæµ· visitor: true # æ˜¾ç¤ºæ–‡ç« æµè§ˆæ•° option: æµ‹è¯• é™æ€ç½‘é¡µç”Ÿæˆä¸‰è¿ï¼Œä¾¿å¯ä»¥çœ‹åˆ°å·²ç»ç”ŸæˆæˆåŠŸäº†ï¼š å…¶å®ƒè¡¥å…… é“¾æ¥å¤ªé•¿ä¸å¥½åˆ†äº«ï¼Ÿ æƒ³è¦ä¸€ä¸ªå±äºè‡ªå·±çš„æ¼‚æ¼‚åŸŸåï¼Ÿ ç½‘ç«™å‘å¸ƒåæœ¬åœ°å›¾ç‰‡å…¨æŒ‚ï¼Ÿ â€¦ åœ¨è¿™é‡Œæˆ‘ä»¬ä¾æ¬¡è¿›è¡Œè§£å†³å„ç§é—®é¢˜ï¼Œè®©ä½ çš„ç½‘ç»œå°çªçœ‹èµ·æ¥æ›´åŠ çš„ä¸“ä¸šã€‚ ä½¿ç”¨çŸ­è¿æ¥ hexo é»˜è®¤ç”Ÿæˆæ–‡ç« é•¿é“¾æ¥å…·æœ‰ä»¥ä¸‹å‡ ä¸ªç¼ºç‚¹ï¼š å¦‚æœæ–‡ç« ååŒ…å«ä¸­æ–‡ï¼Œå°†ä¼šè¢«è½¬ç ï¼Œé“¾æ¥ä¸é›…è§‚ä¸”é•¿ï¼› é•¿é“¾æ¥ä¸åˆ©äºæœç´¢å¼•æ“æ”¶å½•ï¼› é•¿é“¾æ¥ä¸æ–¹ä¾¿åˆ†äº«ç»™ä»–äººã€‚ å› æ­¤ï¼Œå‚è€ƒ[4]ï¼Œæˆ‘ä»¬åˆ©ç”¨Hexo-abbrlinkæ’ä»¶ï¼Œç”Ÿæˆå”¯ä¸€æ–‡ç« çŸ­é“¾æ¥ã€‚ å®‰è£…æ’ä»¶ 1npm install hexo-abbrlink --save ä¿®æ”¹æ ¹ç›®å½•é…ç½®æ–‡ä»¶ urlï¼šä½ çš„åŸŸå ï¼Œå¦‚æœæ˜¯Github Pageså‘½ä»¤æ–¹å¼ä¸º https://ä½ çš„ç”¨æˆ·å.github.io permalinkï¼šæŒ‰ä¸‹å›¾ä¿®æ”¹ permalink_defaultsï¼šæ³¨é‡Šæ‰ ä¸‰è¿é‡æ–°ç”Ÿæˆ 123hexo cleanhexo ghexo s æµ‹è¯• ç”Ÿæˆå®Œæ¯•åï¼Œå¯ä»¥çœ‹åˆ°ï¼Œåœ¨æ¯ä¸€ç¯‡æ–‡ç« å¼€å¤´ï¼Œè‡ªåŠ¨å¤šå‡ºäº†ä»¥ä¸‹å±æ€§ï¼š 1abbrlink: 56326 # è¿™ä¸ªidæ¯ç¯‡æ–‡ç« éƒ½ä¸ä¸€æ · æ–‡ç« é“¾æ¥ä¹Ÿå˜æˆäº†çŸ­é“¾æ¥çš„å½¢å¼ï¼š ä½¿ç”¨å›¾åºŠ ä½¿ç”¨markdownæœ€å¤´ç–¼çš„åœ°æ–¹ï¼Œä¼°è®¡å°±æ˜¯å›¾ç‰‡é—®é¢˜äº†ï¼šæ–‡ç« å›¾ç‰‡é€šå¸¸ä¿å­˜åœ¨æœ¬åœ°ï¼Œå‘å¸ƒç½‘ç«™è¿˜æ˜¯åˆ†äº«ç»™ä»–äººé€šå¸¸è¿˜éœ€è¦å•ç‹¬ä¿å­˜å›¾ç‰‡ã€‚æ˜¾ç„¶ï¼Œè¿™ä¸€ç‚¹ä¹Ÿä¸coolã€‚ å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å›¾åºŠï¼Œå°†å›¾ç‰‡é€šé€šä¿å­˜åœ¨äº‘ç«¯ï¼Œæœ¬åœ°åªéœ€åƒå¦‚ä¸‹å¼•ç”¨ä¸ªé“¾æ¥å³å¯ï¼š 1![image-20211203121301172](https://blog-imgs-1256686095.cos.ap-guangzhou.myqcloud.com/image-20211203121301172.png) ç‰¹åˆ«çš„ï¼Œé…åˆTyporaï¼Œæ‰€æœ‰æœ¬åœ°å›¾ç‰‡å¯ä»¥è‡ªåŠ¨ä¸Šä¼ åˆ°äº‘ç«¯ï¼Œå¯ä»¥è¯´æ˜¯å¾ˆæ–¹ä¾¿äº†ã€‚ å› æ­¤ï¼Œæœ¬æ–‡å‚è€ƒ[5]ï¼Œä½¿ç”¨Typoraé…åˆè…¾è®¯äº‘COSå­˜å‚¨æ­å»ºå›¾åºŠã€‚ ä¸ºä»€ä¹ˆé€‰æ‹©è¦ä»˜è´¹çš„è…¾è®¯äº‘COSï¼Ÿ åœ¨è¿™ä¹‹å‰æˆ‘ä¹Ÿé€‰æ‹©äº†å…¶å®ƒçš„å…è´¹å›¾åºŠï¼Œä½¿ç”¨ä½“éªŒä¸å¤ªä½³ï¼š é€Ÿåº¦å¾ˆæ…¢ï¼Œè€Œä¸”é™åˆ¶ä¸€å¤©ä¸Šä¼ çš„æ•°é‡å’Œé¢‘ç‡ï¼Œæœ‰æ—¶å€™éœ€è¦é›†ä¸­ä¸Šä¼ æœ¬åœ°æ–‡ä»¶çš„å¤§é‡å›¾ç‰‡ä¾¿å¾ˆä¸å‹å¥½äº†ï¼› è…¾è®¯äº‘COSè™½ç„¶ä»˜è´¹ï¼Œä½†æ˜¯ä»·æ ¼å¾ˆä¾¿å®œï¼Œ10å…ƒå¯ä»¥ç§Ÿ10G/å¹´ã€‚ å› æ­¤ï¼Œæœ€ç»ˆæˆ‘è¿˜æ˜¯é€‰æ‹©äº†è…¾è®¯äº‘COSå­˜å‚¨ä½œä¸ºå›¾åºŠã€‚ ä¸‹è½½Typora ä¸‹è½½åœ°å€ï¼šè…¾è®¯äº‘é«˜é€Ÿä¸‹è½½ ï¼Œé»˜è®¤å®‰è£…å³å¯ã€‚ ä¸‹è½½PicGo ä¸‹è½½åœ°å€ï¼šå®˜ç½‘ä¸‹è½½ ï¼Œé»˜è®¤å®‰è£…å³å¯ã€‚ è…¾è®¯äº‘åˆ›å»ºCOSå­˜å‚¨ è¿›å…¥è…¾è®¯äº‘å¯¹è±¡å­˜å‚¨ï¼Œåœ¨å­˜å‚¨æ¡¶åˆ—è¡¨ä¸­ç‚¹å‡»åˆ›å»ºå­˜å‚¨æ¡¶ï¼š è®¾ç½®å­˜å‚¨ä¿¡æ¯å¦‚ä¸‹ï¼š å¯†é’¥ç®¡ç† å¯†é’¥éœ€è¦ç­‰ä¼šå„¿åœ¨é…ç½®æ–‡ä»¶ä¸­ç”¨åˆ°ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æå‰è®¾ç½®å¥½ã€‚ å¦‚æœæ²¡æœ‰å¯†é’¥ï¼Œåˆ™æ–°å»ºå¯†é’¥ï¼š è®°å½•ä»¥ä¸‹ï¼šSecretID å’Œ SecretKeyï¼Œç­‰ä¸‹è¦ç”¨åˆ°ã€‚ é…ç½®PicGo æ‰“å¼€PicGoåï¼Œå›¾ç‰‡ä¸Šä¼ é€‰æ‹©è…¾è®¯äº‘COSï¼Œç„¶åè¿›è¡Œä»¥ä¸‹è®¾ç½®ï¼š æµ‹è¯•PicGO åœ¨å·¦ä¸Šã€ä¸Šä¼ åŒºã€‘ï¼Œä»»æ„æ‹–æ‹½ä¸€å¼ å›¾ç‰‡ï¼Œå¦‚æœä¸Šä¼ æˆåŠŸåˆ™è¯´æ˜é…ç½®æˆåŠŸã€‚ é…ç½®Typora æ‰“å¼€Typoraï¼šæ–‡ä»¶â†’åå¥½è®¾ç½®â†’å›¾åƒï¼š æµ‹è¯•Typoraé…ç½® åœ¨å³ä¾§æ ä¸­å·¦ä¸‹è§’ï¼Œæ‰¾åˆ°ã€éªŒè¯å›¾ç‰‡ä¸Šä¼ é€‰é¡¹ã€‘ï¼Œæµ‹è¯•æ˜¯å¦æˆåŠŸï¼› æ‰“å¼€typoraï¼Œä»»æ„åœ¨æ–‡ç« ä¸­ç²˜è´´ä¸€å¼ æœ¬åœ°å›¾ç‰‡ï¼Œçœ‹æ˜¯å¦ä¼šè‡ªåŠ¨ä¸Šä¼ ã€‚ ä»¥ä¸ŠæˆåŠŸï¼Œä¾¿å¯ä»¥æ„‰å¿«çš„å¼€å§‹ç¼–å†™æ–‡ç« äº†ï¼Œå¼€å§‹ä½ çš„å¤§æ–‡è±ªç”Ÿæ´»äº†ã€‚ ä½¿ç”¨è‡ªå·±çš„åŸŸå xxxxx.github.io çœ‹èµ·æ¥ä¸‘ä¸‘çš„ï¼Œæ€ä¹ˆæ‹¥æœ‰ä¸€ä¸ªè‡ªå·±çš„æ¼‚æ¼‚åŸŸåå‘¢ï¼Ÿ ä¹°ä¸€ä¸ªå±äºè‡ªå·±çš„åŸŸå ç‚¹å‡»ï¼šè…¾è®¯äº‘åŸŸåæ³¨å†Œ ï¼Œæ³¨å†Œä¸€ä¸ªè‡ªå·±çš„åŸŸåã€‚ å®åè®¤è¯ å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šåŸŸåå®åè®¤è¯ , ä¸è¿›è¡Œå®åè®¤è¯å¯èƒ½æ— æ³•è¿›è¡Œæ­£å¸¸åŸŸåè§£æã€‚ åŸŸåè§£æè®¾ç½® è¿›å…¥è…¾è®¯äº‘è§£æè®¾ç½®ï¼š åˆ†åˆ«æ·»åŠ ä»¥ä¸‹è§£æè®°å½•ï¼š é…ç½®CNAMEï¼šæˆ‘çš„åŸŸå www.hwh.zone å¯ä»¥è§£æåˆ°åŸæœ¬åŸŸåWanghui-Huang.github.io ï¼Œè¿™ä¸ªæ—¶å€™ www.hwh.zoneç›¸å½“æ˜¯ä¸ªåˆ«åï¼Œä¹Ÿå°±æ˜¯æš´éœ²ç»™åˆ«äººçœ‹åˆ°çš„åå­—ã€‚ é…ç½®Aè®°å½•ï¼šå¯ä»¥æŠŠåŸŸåwww.hwh.zone ç›´æ¥è§£æåˆ° Github IPåœ°å€ ï¼ˆäºŒæ¬¡ä¿éšœèƒ½è§£æåˆ°Github IPåœ°å€ï¼‰ã€‚ ä¸ç†è§£CNAMEä½œç”¨ï¼Ÿæœ‰äº†Aè®°å½•è§£æä¸ºä»€ä¹ˆè¿˜è¦CNAMEï¼Ÿå¯å‚è€ƒï¼šcnameè®°å½•æ˜¯ä»€ä¹ˆï¼Ÿä»–å­˜åœ¨çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ ç”³è¯·å…è´¹SSLè¯ä¹¦ å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šåŸŸåå‹ï¼ˆDVï¼‰å…è´¹ SSL è¯ä¹¦ç”³è¯·æµç¨‹ Github Pageè®¾ç½® åœ¨ Githubé¡¹ç›®ï¼šWanghui-Huang.github.io â†’ Settingâ†’Pages ï¼Œè®¾ç½®ä½ è‡ªå·±çš„åŸŸå ï¼š åˆ›å»ºCNAMEæ–‡ä»¶ è¿›å…¥æœ¬åœ°åšå®¢æ–‡ä»¶å¤¹ç›®å½•ï¼Œä¾‹å¦‚æˆ‘çš„ï¼šwww.hwh.zone\\blog\\source ï¼š æ–°å»ºæ–‡ä»¶CNAMEâ†’è¾“å…¥ä½ çš„åŸŸå âš ï¸ æ³¨æ„ï¼šåŸŸåä¸è¦å¸¦www. ä¿å­˜æ–‡ä»¶ âš ï¸ ä¿å­˜æ–‡ä»¶ç±»å‹ä¸ºæ‰€æœ‰æ–‡ä»¶ï¼Œä¸æ˜¯TXTæ–‡ä»¶ï¼ æµ‹è¯• ç½‘ç«™ä¸‰è¿å‘å¸ƒåï¼Œæµè§ˆå™¨è¾“å…¥ï¼šä½ çš„åŸŸå ï¼Œä¾¿å¯ä»¥æ­£å¸¸å¼€å§‹è§£æäº†ã€‚ å¦‚æœé‡åˆ°é”™è¯¯ï¼Œå¯ä»¥åœ¨ä¸‹æ–¹è¯„è®ºç•™è¨€ã€‚ ç½‘ç«™å¤‡æ¡ˆ ç½‘ç«™å¤‡æ¡ˆåé€šå¸¸æœ‰ä¸å°‘å¥½å¤„[6]ï¼Œå¯¹äºä¸ªäººåšå®¢æ¥è¯´æœ€é‡è¦çš„ä¸‰ä¸ªä¾¿æ˜¯ï¼š åŠ å¿«ç½‘ç«™çš„è®¿é—®é€Ÿåº¦ï¼› åˆ©äºæœç´¢å¼•æ“æ”¶å½•ï¼› Github Pagesè®¿é—®è¾ƒæ…¢ï¼Œå¤‡æ¡ˆåå¯ä»¥å°†æœåŠ¡å™¨éƒ¨ç½²åˆ°ï¼ˆå›½å†…æœåŠ¡å™¨ï¼‰è…¾è®¯äº‘COSæˆ–è€…è…¾è®¯äº‘VPSä¸Šï¼Œè®¿é—®é€Ÿåº¦æå¤§åŠ å¿«ã€‚ ä½†è¿™ä¸å½±å“ç½‘ç«™åŸŸåçš„æ­£å¸¸è§£æï¼ˆé™¤äº†æ…¢ç‚¹ï¼‰ï¼Œå› ä¸ºæ¯•ç«Ÿç½‘ç«™éƒ¨ç½²åœ¨å›½å¤–æœåŠ¡å™¨ï¼ˆGithubï¼‰ä¸Šã€‚ å¦å¤–ï¼Œç½‘ç«™å¤‡æ¡ˆç»è¿‡æˆ‘çš„å°è¯•ç›¸æ¯”ä¹‹å‰ç®€ä¾¿å¾ˆå¤šï¼Œåªéœ€è¦åœ¨è…¾è®¯äº‘å…¨ç¨‹çº¿ä¸Šå¤‡æ¡ˆç™»è®°æ³¨å†Œå°±å¥½ã€‚ä½†å› ä¸ºæˆ‘èº«ä»½è¯å½’å±çœä»½ï¼ˆæ±Ÿè¥¿ï¼‰ï¼Œæ ¹æ®å½“åœ°æ”¿ç­–å¤‡æ¡ˆéœ€è¦å…³é—­ç½‘ç«™ï¼Œæ‰€ä»¥æ”¾å¼ƒæŠ˜è…¾äº†ã€‚åç»­æœ‰æ—¶é—´è¡¥ä¸Šã€‚ å†™åœ¨æœ€å æ–­æ–­ç»­ç»­å†™äº†å¤§æ¦‚ä¸€å¤©ï¼Œç»ˆäºè®°å½•å®Œäº†Hexoå»ºç«™çš„åŸºæœ¬æ‰€æœ‰çš„è¿‡ç¨‹ã€‚å› ä¸ºæ²¡æ€ä¹ˆè¿åŠ¨ï¼Œè‚©è†€ä¸€ç›´éšéšé…¸ç—›è¿˜æ˜¯åšæŒå†™å®Œäº†ï¼Œå¯ä»¥è¯´æ˜¯èº«æ®‹å¿—åšäº†ã€‚ åç»­çš„è¯å¯èƒ½ä¼šç»§ç»­æ›´æ–°è¿™ç¯‡æ–‡ç« ï¼Œæ›´å¥½çš„æ‰“é€ è‡ªå·±çš„å°çªï¼Œä½†ä¸»è¦è¿˜æ˜¯æ›´æ–°ä¸€äº›C++å’ŒéŸ³è§†é¢‘ç›¸å…³åšæ–‡ï¼š C++ä»é›¶å¼€å§‹ç³»åˆ—ï¼šC++åŸºç¡€ã€C++11ç‰¹æ€§å­¦ä¹ ã€C++å…«è‚¡æ€»ç»“ã€C++å¼€æºæºç åˆ†æï¼› éŸ³è§†é¢‘ç³»åˆ—ï¼šå¾…å®šï¼› å…¶å®ƒï¼šå¤‡æ¡ˆå®Œæˆåï¼Œæ›´æ–°éƒ¨ç½²åˆ°è…¾è®¯äº‘COSä¸Šæ•™ç¨‹ã€‚ æ¬¢è¿ç»§ç»­å…³æ³¨ï¼Œä¸€èµ·å­¦ä¹ ã€‚ æ›´æ–°è®°å½• 2021-12-06 ï¼šæ›´æ–°æ–‡æ¡£ ä¿®æ”¹å¤‡æ¡ˆç›¸å…³æè¿°ï¼›æ–°å¢è…¾è®¯äº‘COSç›¸å…³æè¿°ã€‚ 2021-12-05 ï¼šæ›´æ–°æ–‡æ¡£ æ”¯æŒæ ‡ç­¾å¤–æŒ‚ï¼Œå¹¶æ–°å¢å®‰è£…æ•™ç¨‹ä¼˜åŒ–æ–‡ç« ç‰ˆå¼ï¼šåˆ†æ ä¹¦å†™æ›´æ–°é…ç½®æ–‡ä»¶ 2021-12-01 ï¼šç¬¬ä¸€æ¬¡æ›´æ–° ä¸Šä¼ åˆç¨¿å¹¶å‘å¸ƒ é™„å½• ä»¥ä¸‹é…ç½®æ–‡ä»¶æœ€ç»ˆæ›´æ–°æ—¶é—´ï¼š2021/12/05 00:00 ã€‚ royhuangâ€™s ä¸»é…ç½®æ–‡ä»¶ ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹ï¼š_config.yml royhuangâ€™s Butterflyé…ç½®æ–‡ä»¶ ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹ï¼š_config.butterfly.yml 1.Butterfly å®˜æ–¹æ•™ç¨‹ï¼šhttps://butterfly.js.org/posts/21cfbf15/ â†©2.Hexo çŸ¥ä¹æ•™ç¨‹ï¼šhttps://zhuanlan.zhihu.com/p/26625249 â†©3.ä»wordpressåˆ°hexoï¼šhttps://www.wenjinyu.me/zh/from-wordpress-to-hexo-my-blog-should-have-been-like-this/ â†©4.Hexo-abbrlinkæ’ä»¶ç”Ÿæˆå”¯ä¸€æ–‡ç« é“¾æ¥ï¼šhttps://zhuanlan.zhihu.com/p/112318081 â†©5.Typora+PicGo+è…¾è®¯äº‘COSå®ç°å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½ï¼šhttps://www.daimajiaoliu.com/daima/56a7c8410d4cc09 â†©6.ç½‘ç«™åŸŸåå¤‡æ¡ˆçš„å¥½å¤„æœ‰å“ªäº›ï¼Ÿhttps://www.ggcx.com/news/2105/251639.html â†©","categories":[{"name":"å»ºç«™","slug":"å»ºç«™","permalink":"https://hwh.zone/categories/%E5%BB%BA%E7%AB%99/"}],"tags":[{"name":"ç½‘ç«™å»ºè®¾","slug":"ç½‘ç«™å»ºè®¾","permalink":"https://hwh.zone/tags/%E7%BD%91%E7%AB%99%E5%BB%BA%E8%AE%BE/"},{"name":"hexo","slug":"hexo","permalink":"https://hwh.zone/tags/hexo/"},{"name":"github pages","slug":"github-pages","permalink":"https://hwh.zone/tags/github-pages/"}]},{"title":"æ ¡æ‹›ç¬”è®°ï¼ˆå…«ï¼‰_è®¡ç®—æœºåŸºç¡€_åœºæ™¯&æ™ºåŠ›é¢˜","slug":"æ ¡æ‹›ç¬”è®°ï¼ˆå…«ï¼‰_è®¡ç®—æœºåŸºç¡€_åœºæ™¯å’Œæ™ºåŠ›é¢˜","date":"2021-11-26T13:37:19.761Z","updated":"2021-12-25T16:15:05.950Z","comments":true,"path":"p/31667/","link":"","permalink":"https://hwh.zone/p/31667/","excerpt":"","text":"æˆ‘çš„æ ¡æ‹›è®°å½•ï¼šæ ¡æ‹›ç¬”è®°ï¼ˆé›¶ï¼‰_å†™åœ¨å‰é¢ ï¼Œä»¥ä¸‹æ˜¯æ ¡æ‹›ç¬”è®°æ€»ç›®å½•ã€‚ å¤‡æ³¨ ç®—æ³•èƒ½åŠ›ï¼ˆâ€œåˆ·é¢˜â€ï¼‰ è¿™éƒ¨åˆ†å°±æ˜¯è€—æ—¶é—´å¤šç»ƒä¹ ï¼ŒLeetcode-Top100 æ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚ è¡¥å……ç»ƒä¹ ï¼šcodeTop è®¡ç®—æœºåŸºç¡€(ä¸Š)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_Javaå…¥é—¨ C++åç«¯åç»­æ›´æ–° æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é¢å¯¹å¯¹è±¡ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é›†åˆ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_å¤šçº¿ç¨‹ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é” æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_JVM è®¡ç®—æœºåŸºç¡€(ä¸‹)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆäºŒï¼‰__è®¡ç®—æœºåŸºç¡€_Linux&amp;Git æ ¡æ‹›ç¬”è®°ï¼ˆä¸‰ï¼‰__è®¡ç®—æœºåŸºç¡€_è®¡ç®—æœºç½‘ç»œ æ ¡æ‹›ç¬”è®°ï¼ˆå››ï¼‰__è®¡ç®—æœºåŸºç¡€_æ“ä½œç³»ç»Ÿ æ ¡æ‹›ç¬”è®°ï¼ˆäº”ï¼‰__è®¡ç®—æœºåŸºç¡€_MySQL æ ¡æ‹›ç¬”è®°ï¼ˆå…­ï¼‰__è®¡ç®—æœºåŸºç¡€_Redis æ ¡æ‹›ç¬”è®°ï¼ˆä¸ƒï¼‰__è®¡ç®—æœºåŸºç¡€_æ•°æ®ç»“æ„ æ ¡æ‹›ç¬”è®°ï¼ˆå…«ï¼‰__è®¡ç®—æœºåŸºç¡€_åœºæ™¯&amp;æ™ºåŠ›é¢˜ æ ¡æ‹›ç¬”è®°ï¼ˆä¹ï¼‰__è®¡ç®—æœºåŸºç¡€_ç›¸å…³è¡¥å…… é¡¹ç›®&amp;å®ä¹  ä¸»è¦æ˜¯æ€ä¹ˆå‡†å¤‡é¡¹ç›®ï¼Œåç»­æ›´æ–° å…«ã€åœºæ™¯é¢˜&amp;æ™ºåŠ›é¢˜ 8.1 åœºæ™¯é¢˜ 1. è®¾è®¡ä¸€ä¸ªå¾®ä¿¡è¿åŠ¨æ’è¡Œæ¦œï¼Ÿï¼ˆRedisï¼‰ è¢«CSIGä¼¤è¿‡çš„çš„å¿ƒè¿˜å¯ä»¥çˆ±è°ï¼ˆç¬¬ä¸€æ¬¡å›ç­”ï¼‰ â€œå¯ä»¥ä½¿ç”¨mysql, å°†ç”¨æˆ·çš„å¥½å‹åˆ—è¡¨å…³è”çš„è¿åŠ¨è®°å½•æŸ¥è¯¢å‡ºæ¥ï¼Œç„¶åé€šè¿‡order by æ¥è¿›è¡Œæ’åºï¼Œå°±å¯ä»¥å®ç°äº†ã€‚â€ ä¸€æ—¦æ•°æ®é‡å¤§è¾¾åˆ°åƒä¸‡çº§åˆ«çš„æ—¶å€™ï¼Œä¸å¯é¿å…åœ°ä¼šå‡ºç°æ…¢æŸ¥è¯¢ï¼Œæ•ˆç‡å°±ä¼šé™ä½ã€‚æ‰€ä»¥è¿™ä¸æ˜¯é¢è¯•å®˜æƒ³å¬åˆ°çš„å›ç­”ï¼ Redisâ€“é«˜æ•ˆ ä½¿ç”¨Redisçš„æœ‰åºé›†åˆ zsetï¼ˆæœ‰åºä¸”ä¸é‡å¤ï¼‰ ã€‚å› ä¸º zset æ’åºçš„ä¸‹æ ‡ä»0 å¼€å§‹ï¼Œè‡ªå¸¦ä¸€ä¸ªscore å€¼ï¼Œè¯¥å€¼å¯ä»¥å½“ä½œæ’è¡Œçš„æ ‡å‡† ã€‚ æ·»åŠ ç”¨æˆ·å’Œæ­¥æ•°ï¼š zadd key score member æŸ¥è¯¢æŒ‡å®šæ’åèŒƒå›´å†…ç”¨æˆ·ï¼š ï¼ˆä»å°åˆ°å¤§ï¼‰zrange key start stop withscores or ï¼ˆä»å¤§åˆ°å°ï¼‰zrevrange key start stop withscores æ ¹æ®ä¸Šé¢ï¼Œæ‰€ä»¥ç”¨æˆ·æŒ‰scoreä»å°åˆ°å¤§æ’åºå®Œæ¯•äº†ï¼Œå¦‚æœè¿˜è¦è·å–æ’åä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤ï¼š æŸ¥è¯¢æŒ‡å®šç”¨æˆ·æ’å ï¼š zrank key member or zrevrank key member ä¸€ä¸ªç®€å•çš„æ’è¡Œæ¦œå°±è®¾è®¡å®Œæˆäº†ã€‚ å¦‚æœé¢è¯•å®˜è¿›ä¸€æ­¥é—®ï¼šä¸€å‘¨æ’è¡Œæ¦œæ€ä¹ˆè®¾è®¡ï¼Ÿ ä¸€å‘¨çš„æ•°æ®å…¶å®å°±æ˜¯7å¤©æ•°æ®çš„ç´¯åŠ ï¼Œç´¯åŠ å®Œåå†æ’åºï¼Œä¸€ä¸ªæœˆçš„æ•°æ®åŸç†ä¹Ÿæ˜¯ä¸€æ ·ã€‚å¯ä»¥ä½¿ç”¨ ï¼š ZINTERSTORE ï¼š è®¡ç®—ç»™å®šä¸€ä¸ªæˆ–å¤šä¸ªæœ‰åºé›†çš„äº¤é›†å¹¶å°†ç»“æœæ”¾åˆ°ä¸€ä¸ªæ–°çš„æœ‰åºé›†åˆdestinationä¸­ã€‚ 1ZINTERSTORE destination numkeys key [key ...] [WEIGHTS weight [weight ...]] [AGGREGATE SUM|MIN|MAX] é»˜è®¤æƒ…å†µä½¿ç”¨çš„å‡½æ•°æ˜¯æ±‚å’Œã€‚ æ‰€ä»¥å¯ä»¥ä½¿ç”¨ï¼š 1zunionstore last_seven_days 7 20210315 20210316 20210317 20210318 20210319 20210320 20210321 2. æµ·é‡æ•°æ®é—®é¢˜ å‚è€ƒï¼šhttps://blog.csdn.net/v_JULY_v/article/details/6279498 åœ¨æµ·é‡æ•°æ®ä¸­ï¼Œé’ˆå¯¹top Kç±»é—®é¢˜ï¼Œé€šå¸¸æ¯”è¾ƒå¥½çš„æ–¹æ¡ˆæ˜¯ï¼š Topæ•°é—®é¢˜ï¼šå°æ ¹å † æœ‰1äº¿ä¸ªæµ®ç‚¹æ•°ï¼Œå¦‚ä½•æ‰¾å‡ºå…¶æœ€å¤§çš„10000ä¸ªï¼Ÿ ç›´æ¥è¿›è¡Œæ’åºï¼Œå¤§çº¦éœ€è¦10^8*4å­—èŠ‚ = 400M ï¼Œå¦‚æœå†…å­˜å¤Ÿå¯ä»¥ç›´æ¥è¿›è¡Œæ’åºï¼›å¦‚æœå†…å­˜ä¸å¤Ÿé‡‡ç”¨ï¼š æœ€å°å †æ³• ï¼šï¼ˆ1ï¼‰å…ˆè¯»å…¥10000ä¸ªæ•°æ¥åˆ›å»ºå¤§å°ä¸º10000çš„æœ€å°å †ï¼ˆå‡è®¾è¿™10000ä¸ªæ•°æ˜¯æœ€å¤§çš„10000ä¸ªï¼Œç„¶åæ¯æ¬¡å’Œè¿™10000ä¸­æœ€å°çš„æ¯”è¾ƒï¼‰ï¼ˆ2ï¼‰éå†åç»­æ•°å­—ï¼Œå’Œå †é¡¶æœ€å°æ•°å­—æ¯”è¾ƒï¼šå¦‚æœå°äºå †é¡¶æ•°å­—ï¼Œç»§ç»­ï¼›å¦‚æœå¤§äºå †é¡¶æ•°å­—ï¼Œåˆ™æ›¿æ¢å †é¡¶å¹¶é‡æ–°è°ƒæ•´ä¸ºæœ€å°å †ï¼ˆ3ï¼‰æ•´ä¸ªè¿‡ç¨‹ç›´è‡³1äº¿ä¸ªæ•°å…¨éƒ¨éå†å®Œä¸ºæ­¢ åˆ†æ²»æ³•ã€‚ ï¼ˆ1ï¼‰1äº¿åˆ†ä¸º100ä»½ï¼Œæ¯ä»½100ä¸‡ä¸ªæ•°æ®ï¼Œæ‰¾åˆ°æ¯ä»½çš„æœ€å¤§çš„1ä¸‡ä¸ª ï¼ˆ2ï¼‰åœ¨å‰©ä¸‹çš„100*1ä¸‡ä¸ªæ•°æ®æ‰¾åˆ°æœ€å¤§çš„1ä¸‡ä¸ª å“ˆå¸Œæ³•ã€‚ å¦‚æœè¿™1äº¿ä¸ªä¹¦é‡Œé¢æœ‰å¾ˆå¤šé‡å¤çš„æ•°ï¼Œå…ˆé€šè¿‡Hashæ³•ï¼ŒæŠŠè¿™1äº¿ä¸ªæ•°å­—å»é‡å¤ã€‚ ç„¶åå†é‡‡ç”¨æ–¹æ³• 1 æˆ– 2 ã€‚ æœ€å¤šé‡å¤ï¼ˆé¢‘ç‡æœ€é«˜ï¼‰ï¼šHashæ˜ å°„+HashMapé¢‘ç‡è®¡ç®— ã€æœ€å¤šé‡å¤ã€‘æµ·é‡æ—¥å¿—æ•°æ®ï¼Œæå–å‡ºæŸæ—¥è®¿é—®ç™¾åº¦æ¬¡æ•°æœ€å¤šçš„é‚£ä¸ªIPã€‚ åˆ†æ²»æ³•ï¼ˆåŸºäºHashï¼‰ã€‚ ï¼ˆ1ï¼‰æŒ‰ç…§IPåœ°å€çš„Hash(IP)%1024å€¼ï¼ŒæŠŠæµ·é‡IPæ—¥å¿—åˆ†åˆ«å­˜å‚¨åˆ°1024ä¸ªå°æ–‡ä»¶ä¸­ ï¼ˆ2ï¼‰å¯¹äºæ¯ä¸€ä¸ªå°æ–‡ä»¶ï¼Œå¯ä»¥æ„å»ºä¸€ä¸ªIPä¸ºkeyï¼Œå‡ºç°æ¬¡æ•°ä¸ºvalueçš„Hash map ï¼ˆ3ï¼‰å¯ä»¥å¾—åˆ°1024ä¸ªå°æ–‡ä»¶ä¸­çš„å‡ºç°æ¬¡æ•°æœ€å¤šçš„IP ï¼Œå†æ ¹æ®å¸¸è§„æ’åºå¾—åˆ°ã€‚ âš ï¸ ä½¿ç”¨Hashåˆ†æ•£ipå¯ä»¥ä¿è¯ç›¸åŒipéƒ½åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¦‚æœåªæ˜¯ç®€å•å‡åˆ†æ˜¯ä¸è¡Œçš„ã€‚ ã€æœ€å¤šé‡å¤ã€‘æœ‰ä¸€ä¸ª1Gå¤§å°çš„ä¸€ä¸ªæ–‡ä»¶ï¼Œé‡Œé¢æ¯ä¸€è¡Œæ˜¯ä¸€ä¸ªè¯ï¼Œè¯çš„å¤§å°ä¸è¶…è¿‡16å­—èŠ‚ï¼Œå†…å­˜é™åˆ¶å¤§å°æ˜¯1Mã€‚è¿”å›é¢‘æ•°æœ€é«˜çš„100ä¸ªè¯ã€‚ åŒä¸Šï¼Œåˆ†æ²»æ³•ï¼ˆåŸºäºHashï¼‰ã€‚ é¦–å…ˆè®¡ç®—ä¸‹ï¼š1G / 1M = 1000ä¸ªå°æ–‡ä»¶ï¼Œä¸ºä¿é™©åˆ†ä¸º2000ä¸ªï¼ˆ1ï¼‰Hash(è¯)%2000 æ˜ å°„åˆ°2000ä¸ªæ–‡ä»¶ä¸­ï¼ˆ2ï¼‰åˆ†åˆ«è®¡ç®—2000ä¸ªæ–‡ä»¶é¢‘ç‡æœ€é«˜çš„é‚£ä¸ªå•è¯ï¼Œç„¶åå¸¸è§„æ’åºå³å¯ï¼ˆ2000ä¸ªå•è¯å ï¼š2k*16B=32KB&lt;&lt;1Mï¼‰ ã€æœ€å¤šé‡å¤ã€‘æœ‰10ä¸ªæ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶1Gï¼Œæ¯ä¸ªæ–‡ä»¶çš„æ¯ä¸€è¡Œå­˜æ”¾çš„éƒ½æ˜¯ç”¨æˆ·çš„queryï¼Œæ¯ä¸ªæ–‡ä»¶çš„queryéƒ½å¯èƒ½é‡å¤ã€‚è¦æ±‚ä½ æŒ‰ç…§queryçš„é¢‘åº¦æ’åºã€‚ åŒä¸Šï¼Œåˆ†æ²»æ³•ï¼ˆåŸºäºHashï¼‰ã€‚ é¡ºåºè¯»å–10ä¸ªæ–‡ä»¶ï¼Œç„¶åå°†queryé‡æ–°æ˜ å°„åˆ°è‹¥å¹²ä¸ªæ–‡ä»¶ä¸­ï¼Œä¿è¯ç›¸åŒqueryéƒ½åœ¨åŒä¸€ä¸ªæ–‡ä»¶ã€‚å…¶ä½™åŒä¸Šã€‚ ä¸é‡å¤æ•°ï¼šä½å›¾ ã€ä¸é‡å¤ã€‘ åœ¨2.5äº¿ä¸ªæ•´æ•°ä¸­æ‰¾å‡ºä¸é‡å¤çš„æ•´æ•°ã€‚æ³¨ï¼Œå†…å­˜ä¸è¶³ä»¥å®¹çº³è¿™2.5äº¿ä¸ªæ•´æ•°ã€‚ é‡‡ç”¨2ä½å›¾ï¼ˆBitMapï¼‰ã€‚00è¡¨ç¤ºä¸å­˜åœ¨ï¼Œ01è¡¨ç¤ºå‡ºç°ä¸€æ¬¡ï¼Œ10è¡¨ç¤ºå¤šæ¬¡ï¼Œ11æ— æ„ä¹‰ï¼Œéœ€è¦2.5âˆ—108b=2.5âˆ—0.1Gb=0.25Gb=25MB2.5*10^8b = 2.5*0.1Gb=0.25Gb=25MB2.5âˆ—108b=2.5âˆ—0.1Gb=0.25Gb=25MBã€‚ä½†æ˜¯æˆ‘ä»¬éœ€è¦æŠŠæ‰€æœ‰çš„æ•´æ•°éƒ½è¡¨ç¤ºå‡ºæ¥2âˆ—232bit=1GB2*2^{32}bit=1GB2âˆ—232bit=1GBï¼ˆ1ï¼‰æ‰«æè¿™2.5äº¿ä¸ªæ•´æ•°ï¼ŒæŸ¥çœ‹Bitmapä¸­ç›¸å¯¹åº”ä½ï¼Œå¦‚æœæ˜¯00å˜01ï¼Œ01å˜10ï¼Œ10ä¿æŒä¸å˜ï¼ˆ2ï¼‰æŸ¥çœ‹bitmapï¼ŒæŠŠå¯¹åº”ä½æ˜¯01 çš„æ•´æ•°è¾“å‡ºå³å¯ã€‚ æ³¨ï¼Œintç±»å‹å 32ä¸ªå­—èŠ‚ï¼Œ2322^{32}232 è¡¨ç¤ºå…¶èƒ½è¡¨ç¤ºçš„æ•´æ•°ä¸ªæ•°ã€‚ ã€ä¸é‡å¤Â·è…¾è®¯ã€‘ç»™40äº¿ä¸ªä¸é‡å¤çš„unsigned intçš„æ•´æ•°ï¼Œæ²¡æ’è¿‡åºçš„ï¼Œç„¶åå†ç»™ä¸€ä¸ªæ•°ï¼Œå¦‚ä½•å¿«é€Ÿåˆ¤æ–­è¿™ä¸ªæ•°æ˜¯å¦åœ¨é‚£40äº¿ä¸ªæ•°å½“ä¸­ï¼Ÿ é‡‡ç”¨2ä½å›¾ï¼ˆBitMapï¼‰ã€‚ éœ€è¦40äº¿bitï¼Œå¤§çº¦500Mï¼Œä½†å®é™…æ˜¯è¦è¡¨ç¤ºæ‰€æœ‰æ•´æ•°ï¼Œæ•…è¿˜æ˜¯1GBã€‚å…¶ä½™åŒä¸Šã€‚ å…±åŒæ•° ã€ç›¸åŒæ•°ã€‘ ç»™å®šaã€bä¸¤ä¸ªæ–‡ä»¶ï¼Œå„å­˜æ”¾50äº¿ä¸ªurlï¼Œæ¯ä¸ªurlå„å 64å­—èŠ‚ï¼Œå†…å­˜é™åˆ¶æ˜¯4Gï¼Œè®©ä½ æ‰¾å‡ºaã€bæ–‡ä»¶å…±åŒçš„urlï¼Ÿ åˆ†æ²»æ³•ï¼ˆåŸºäºHashï¼‰ã€‚ ï¼ˆ1ï¼‰åˆ†åˆ«å°†aï¼Œbä¸¤ä¸ªå¤§æ–‡ä»¶å„è‡ªæ˜ å°„ä¸º10000ä¸ªå°æ–‡ä»¶ï¼Œè¿™æ ·ç›¸åŒurlä¼šæ˜ å°„åˆ°a,bç›¸åŒå“ˆå¸Œå€¼å°æ–‡ä»¶ä¸­ã€‚ï¼ˆ2ï¼‰åœ¨a,bæ¯ä¸€å¯¹å°æ–‡ä»¶æ‰¾åˆ°ç›¸åŒçš„urlã€‚ 3. åˆ†å¸ƒå¼ç›¸å…³ è°ˆä¸€è°ˆï¼Œåˆ†å¸ƒå¼é›†ç¾¤ä¸­å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Ÿ å¯¹äºå•ä¸€æœåŠ¡æ¥è¯´ï¼Œåªè¦ä¿è¯ä¸€å°æœºå™¨ä¸Šçš„å¯¹äºå…±äº«èµ„æºçš„è®¿é—®æ˜¯åŒæ­¥è¿›è¡Œçš„å°±èƒ½ä¿è¯çº¿ç¨‹å®‰å…¨äº†ï¼›ä½†æ˜¯å¯¹äºåˆ†å¸ƒå¼ç³»ç»Ÿè€Œå·²ï¼Œä¿è¯ä¸€å°æœåŠ¡å™¨çš„åŒæ­¥ï¼Œå¹¶ä¸èƒ½ä¿è¯è®¿é—®å…±äº«èµ„æºæ˜¯åŒæ­¥çš„ï¼› æ‰€ä»¥å¯ä»¥è€ƒè™‘ä½¿ç”¨åˆ†å¸ƒå¼é”çš„æ–¹å¼æ¥ä¿è¯åˆ†å¸ƒå¼ä¸­çš„çº¿ç¨‹çš„å®‰å…¨çº¿ï¼Œè¿™æ ·ä¸åŒçš„æœåŠ¡ä¸åŒçš„çº¿ç¨‹é€šè¿‡ç«äº‰åˆ†å¸ƒå¼é”æ¥è·å–å…±äº«èµ„æºçš„æ“ä½œæƒé™ï¼› ä¾‹å¦‚redisçš„åˆ†å¸ƒå¼é”ã€zookeeperé”ï¼Œéƒ½å¯ä»¥ä½œä¸ºåˆ†å¸ƒå¼çº¿ç¨‹å®‰å…¨çš„æ‰‹æ®µã€‚ åœ¨æ·˜å®è´­ç‰©ï¼Œè¿™ä¸ªåœºæ™¯ä¸‹ï¼Œä½ ä¼šæ€æ ·æ¥è®¾è®¡æ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿ ä»€ä¹ˆæ˜¯æ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿ æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰å¯ä»¥ç®€å•ç†è§£ä¸ºï¼šæŠŠè¦ä¼ è¾“çš„æ•°æ®æ”¾åœ¨é˜Ÿåˆ—ä¸­ï¼Œä¸€ç§å…ˆè¿›å…ˆå‡ºçš„ç»“æ„ã€‚ æ€ä¹ˆå»è®¾è®¡æ·˜å®æ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿ å¾…è¡¥å……ã€‚ 4. å¾®ä¿¡æŠ¢çº¢åŒ… ä¾‹å¦‚ä¸€ä¸ªäººåœ¨ç¾¤é‡Œå‘äº†100å—é’±çš„çº¢åŒ…ï¼Œç¾¤é‡Œæœ‰10ä¸ªäººä¸€èµ·æ¥æŠ¢çº¢åŒ…ï¼Œæ¯äººæŠ¢åˆ°çš„é‡‘é¢éšæœºåˆ†é…ã€‚ æ‰€æœ‰äººæŠ¢åˆ°çš„é‡‘é¢ä¹‹å’Œè¦ç­‰äºçº¢åŒ…é‡‘é¢ï¼Œä¸èƒ½å¤šä¹Ÿä¸èƒ½å°‘ã€‚ æ¯ä¸ªäººè‡³å°‘æŠ¢åˆ°1åˆ†é’±ã€‚ è¦ä¿è¯çº¢åŒ…æ‹†åˆ†çš„é‡‘é¢å°½å¯èƒ½åˆ†å¸ƒå‡è¡¡ï¼Œä¸è¦å‡ºç°ä¸¤æåˆ†åŒ–å¤ªä¸¥é‡çš„æƒ…å†µã€‚ äºŒå€å‡å€¼æ³•ï¼šå‡è®¾å‰©ä½™çº¢åŒ…é‡‘é¢ä¸ºmå…ƒï¼Œå‰©ä½™äººæ•°ä¸ºnï¼Œé‚£ä¹ˆæœ‰å¦‚ä¸‹å…¬å¼ï¼š æ¯æ¬¡æŠ¢åˆ°çš„é‡‘é¢ = [0.01ï¼Œm /n Ã— 2 - 0.01] è¿™ä¸ªå…¬å¼ï¼Œä¿è¯äº†æ¯æ¬¡éšæœºé‡‘é¢çš„å¹³å‡å€¼æ˜¯ç›¸ç­‰çš„ï¼Œä¸ä¼šå› ä¸ºæŠ¢çº¢åŒ…çš„å…ˆåé¡ºåºè€Œé€ æˆä¸å…¬å¹³ã€‚ ä¸¾ä¾‹è¯´æ˜ï¼š å‡è®¾æœ‰5ä¸ªäººï¼Œçº¢åŒ…æ€»é¢100å…ƒã€‚100Ã·5Ã—2 = 40ï¼Œæ‰€ä»¥ç¬¬1ä¸ªäººæŠ¢åˆ°çš„é‡‘é¢éšæœºèŒƒå›´æ˜¯[0.01ï¼Œ39.99]å…ƒï¼Œåœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œå¹³å‡å¯ä»¥æŠ¢åˆ°20å…ƒã€‚å‡è®¾ç¬¬1ä¸ªäººéšæœºæŠ¢åˆ°äº†20å…ƒï¼Œé‚£ä¹ˆå‰©ä½™é‡‘é¢æ˜¯80å…ƒã€‚80Ã·4Ã—2 = 40ï¼Œæ‰€ä»¥ç¬¬2ä¸ªäººæŠ¢åˆ°çš„é‡‘é¢çš„éšæœºèŒƒå›´åŒæ ·æ˜¯[0.01ï¼Œ39.99]å…ƒï¼Œåœ¨æ­£å¸¸çš„æƒ…å†µä¸‹ï¼Œè¿˜æ˜¯å¹³å‡å¯ä»¥æŠ¢åˆ°20å…ƒã€‚å‡è®¾ç¬¬2ä¸ªäººéšæœºæŠ¢åˆ°äº†20å…ƒï¼Œé‚£ä¹ˆå‰©ä½™é‡‘é¢æ˜¯60å…ƒã€‚60Ã·3Ã—2 = 40ï¼Œæ‰€ä»¥ç¬¬3ä¸ªäººæŠ¢åˆ°çš„é‡‘é¢çš„éšæœºèŒƒå›´åŒæ ·æ˜¯[0.01ï¼Œ39.99]å…ƒï¼Œå¹³å‡å¯ä»¥æŠ¢åˆ°20å…ƒã€‚ä»¥æ­¤ç±»æ¨ï¼Œæ¯ä¸€æ¬¡æŠ¢åˆ°é‡‘é¢éšæœºèŒƒå›´çš„å‡å€¼æ˜¯ç›¸ç­‰çš„ã€‚ 8.2 æ™ºåŠ›é¢˜ 1. å‰å®³äº†æˆ‘çš„æ¯ æœ‰ä¸€ç§ç»ç’ƒæ¯è´¨é‡ç¡®å®šä½†æœªçŸ¥ï¼Œéœ€è¦æ£€æµ‹ã€‚ æœ‰ä¸€æ ‹100å±‚çš„å¤§æ¥¼ï¼Œè¯¥ç§ç»ç’ƒæ¯ä»æŸä¸€å±‚æ¥¼æ‰”ä¸‹ï¼Œåˆšå¥½ä¼šç¢ã€‚ ç°ç»™ä½ ä¸¤ä¸ªæ¯å­ï¼Œé—®æ€æ ·æ£€æµ‹å‡ºè¿™ä¸ªæ¯å­çš„è´¨é‡ï¼Œå³æ‰¾åˆ°åœ¨å“ªä¸€å±‚æ¥¼åˆšå¥½ä¼šç¢ï¼Ÿ å‚è€ƒï¼šhttps://cloud.tencent.com/developer/article/1497944 2. èµ›é©¬é—®é¢˜ 64åŒ¹é©¬ï¼Œ8ä¸ªè·‘é“ï¼Œé—®æœ€å°‘æ¯”èµ›å¤šå°‘åœºï¼Œå¯ä»¥é€‰å‡ºè·‘å¾—æœ€å¿«çš„4åŒ¹é©¬ã€‚ Assumptionsï¼šæ¯åœºæ¯”èµ›æ¯ä¸ªè·‘é“åªå…è®¸ä¸€åŒ¹é©¬ï¼Œä¸”ä¸å­˜åœ¨å¹¶åˆ—æƒ…å½¢ã€‚ 3. ä¸‰äººä¸‰é¬¼è¿‡æ¡¥ æœ‰ä¸‰ä¸ªäººè·Ÿä¸‰ä¸ªé¬¼è¦è¿‡æ²³,æ²³ä¸Šæ²¡æ¡¥åªæœ‰æ¡å°èˆ¹,ç„¶åèˆ¹ä¸€æ¬¡åªèƒ½æ¸¡ä¸€ä¸ªäººå’Œä¸€ä¸ªé¬¼,æˆ–è€…ä¸¤ä¸ªé¬¼æˆ–è€…ä¸¤ä¸ªäºº,æ— è®ºåœ¨å“ªè¾¹å²¸ä¸Š,åªæœ‰æ˜¯äººæ¯”é¬¼å°‘çš„æƒ…å†µä¸‹(å¦‚ä¸¤é¬¼ä¸€äºº,ä¸‰é¬¼ä¸¤äºº,ä¸‰é¬¼ä¸€äºº)äººä¼šè¢«é¬¼åƒ,ç„¶è€Œèˆ¹åˆä¸€å®šéœ€è¦äººæˆ–é¬¼æ“ä½œæ‰èƒ½èˆªè¡Œ(è¦æœ‰äººæˆ–é¬¼åˆ’èˆ¹),é—®,å¦‚ä½•å®‰å…¨çš„æŠŠä¸‰äººä¸‰é¬¼æ¸¡è¿‡æ²³å¯¹å²¸? å‚è€ƒå›ç­” å…ˆä¸¤é¬¼è¿‡å»ã€‚åœ¨ä¸€é¬¼å›æ¥ã€‚å¯¹é¢æœ‰ä¸€é¬¼ã€‚è¿™è¾¹æœ‰ä¸‰äººä¸¤é¬¼ã€‚ å†ä¸¤é¬¼è¿‡å»ã€‚åœ¨ä¸€é¬¼å›æ¥ã€‚å¯¹é¢æœ‰ä¸¤é¬¼ã€‚è¿™è¾¹æœ‰ä¸‰äººä¸€é¬¼ã€‚ å†ä¸¤äººè¿‡å»ã€‚ä¸€äººä¸€é¬¼å›æ¥ã€‚å¯¹é¢ä¸€äººä¸€é¬¼ã€‚è¿™è¾¹ä¸¤äººä¸¤é¬¼ã€‚ æœ€åä¸¤äººè¿‡å»ã€‚ä¸€é¬¼å›æ¥ã€‚å¯¹é¢ä¸‰äººã€‚è¿™è¾¹ä¸‰é¬¼ã€‚ å‰©ä¸‹çš„å°±ä¸‰ä¸ªé¬¼äºŒä¸ªè¿‡å»ä¸€ä¸ªå›æ¥åœ¨æ¥å¦å¤–ä¸ªå°±OKäº†ã€‚ 3. ç»™å®šéšæœºå‡½æ•°ï¼Œç”Ÿæˆåˆ«çš„éšæœºæ•° ç»™å®šç”Ÿæˆ1åˆ°5çš„éšæœºæ•°Rand5()ï¼Œå¦‚ä½•å¾—åˆ°ç”Ÿæˆ1åˆ°7çš„éšæœºæ•°å‡½æ•°Rand7()ï¼Ÿ ç”±å¤§çš„ç”Ÿæˆå°çš„å®¹æ˜“ï¼Œæ¯”å¦‚ç”±Rand7()ç”ŸæˆRand5()ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆæ„é€ ä¸€ä¸ªå¤§äº7çš„éšæœºæ•°ç”Ÿæˆå‡½æ•°ã€‚ è®°ä½ä¸‹é¢è¿™ä¸ªå¼å­ï¼š 1234// ç”Ÿæˆ1åˆ°N^2ä¹‹é—´çš„éšæœºæ•°,å¯ä»¥çœ‹ä½œæ˜¯åœ¨æ•°è½´ä¸Šæ’’è±†å­ã€‚Næ˜¯è·¨åº¦/æ­¥é•¿ï¼Œæ˜¯RandN()ç”Ÿæˆçš„æ•°çš„èŒƒå›´é•¿åº¦// RandN()-1çš„ç›®çš„æ˜¯ç”Ÿæˆ0åˆ°N-1çš„æ•°ï¼Œæ˜¯è·³æ•°ã€‚åé¢+RandN()çš„ç›®çš„æ˜¯å¡«æ»¡ä¸­é—´çš„ç©ºéš™Copy to clipboardErrorCopiedRandNN= N( RandN()-1 ) + RandN() ; æ¯”å¦‚Rand25= 5( Rand5()-1 ) + Rand5()å¯ä»¥ç”Ÿæˆ1åˆ°25ä¹‹é—´çš„éšæœºæ•°ã€‚æˆ‘ä»¬å¯ä»¥åªè¦1åˆ°21ï¼ˆ3*7ï¼‰ä¹‹é—´çš„æ•°å­—ï¼Œæ‰€ä»¥å¯ä»¥è¿™ä¹ˆå†™ 1234567int rand7()&#123; int x=INT_MAX; while(x&gt;21)&#123; x=5*(rand5()-1)+rand5(); &#125; return x%7+1;&#125;Copy to clipboardErrorCopied 4. ç ç ç§°è½»é‡ï¼Œæ‰¾å‡ºæœ€è½»çš„ å…¶å®è¿™éƒ½æ˜¯ä¸€ç±»é¢˜ï¼Œè¿™é‡Œåˆ—ä¸¾å‡ ä¸ªç»å…¸çš„ï¼š 1ã€æœ‰ä¸€ä¸ªå¤©å¹³ï¼Œä¹ä¸ªç ç ï¼Œå…¶ä¸­ä¸€ä¸ªç ç æ¯”å¦å…«ä¸ªè¦è½»ä¸€äº›ï¼Œé—®è‡³å°‘è¦ç”¨å¤©å¹³ç§°å‡ æ¬¡æ‰èƒ½å°†è½»çš„é‚£ä¸ªæ‰¾å‡ºæ¥ï¼Ÿ å‚è€ƒå›ç­”ï¼šè‡³å°‘2æ¬¡ã€‚ç¬¬ä¸€æ¬¡ï¼Œä¸€è¾¹3ä¸ªï¼Œå“ªè¾¹è½»å°±åœ¨å“ªè¾¹ï¼Œä¸€æ ·é‡å°±æ˜¯å‰©ä½™çš„3ä¸ªï¼› ç¬¬äºŒæ¬¡ï¼Œä¸€è¾¹1ä¸ªï¼Œå“ªè¾¹è½»å°±æ˜¯å“ªä¸ªï¼Œä¸€æ ·é‡å°±æ˜¯å‰©ä½™çš„é‚£ä¸ªï¼›è‡³å°‘ç§°2æ¬¡ï¼ 2ã€åç»„ç ç æ¯ç»„åä¸ªï¼Œæ¯ä¸ªç ç éƒ½æ˜¯10gé‡ï¼Œä½†æ˜¯ç°åœ¨å…¶ä¸­æœ‰ä¸€ç»„ç ç æ¯ä¸ªéƒ½åªæœ‰9gé‡ï¼Œç°æœ‰ä¸€ä¸ªèƒ½æ˜¾ç¤ºå…‹æ•°çš„ç§¤ï¼Œæœ€å°‘ç§°å‡ æ¬¡èƒ½æ‰¾åˆ°è½»çš„é‚£ç»„ï¼Ÿ å‚è€ƒå›ç­”ï¼šè‡³å°‘1æ¬¡ã€‚ å°†ç ç åˆ†ç»„1~10ï¼Œç¬¬ä¸€ç»„æ‹¿ä¸€ä¸ªï¼Œç¬¬äºŒç»„æ‹¿ä¸¤ä¸ªä»¥æ­¤ç±»æ¨ã€‚ã€‚ç¬¬åç»„æ‹¿åä¸ªæ”¾åˆ°ç§¤ä¸Šç§°å‡ºå…‹æ•°xï¼Œåˆ™y = 550 - xï¼Œç¬¬yç»„å°±æ˜¯è½»çš„é‚£ç»„ã€‚ 5. åˆ©ç”¨ç©ºç“¶æ¢é¥®æ–™ï¼Œæœ€å¤šå–å‡ ç“¶ 1000ç“¶é¥®æ–™ï¼Œ3ä¸ªç©ºç“¶å­èƒ½å¤Ÿæ¢1ç“¶é¥®æ–™ï¼Œé—®æœ€å¤šèƒ½å–å‡ ç“¶ï¼Ÿ ç¬¬ä¸€ç§æ€è·¯ æ‹¿èµ°3ç“¶ï¼Œæ¢å›1ç“¶ï¼Œç›¸å½“äºå‡å°‘2ç“¶ã€‚ ä½†æ˜¯æœ€åå‰©ä¸‹4ç“¶çš„æ—¶å€™ä¾‹å¤–ï¼Œè¿™æ—¶åªèƒ½æ¢1ç“¶ã€‚æ‰€ä»¥æˆ‘ä»¬è®¡ç®—1000å‡2èƒ½å‡å¤šå°‘æ¬¡ï¼Œç›´åˆ°å‰©ä¸‹4.ï¼ˆ1000-4=996ï¼Œ996/2=498ï¼‰æ‰€ä»¥1000å‡2èƒ½å‡498æ¬¡ç›´åˆ°å‰©ä¸‹4ç“¶ï¼Œæœ€åå‰©ä¸‹çš„4ç“¶è¿˜å¯ä»¥æ¢ä¸€ç“¶ï¼Œæ‰€ä»¥æ€»å…±æ˜¯1000+498+1=1499ç“¶ã€‚ ç¬¬äºŒç§æ€è·¯ 1000ç“¶é¥®æ–™ï¼Œ3ä¸ªç©ºç“¶å­èƒ½æ¢1ç“¶é¥®æ–™ï¼Œæœ€å¤šå¯ä»¥å–å‡ ç“¶ï¼Ÿ ç¬¬ä¸€ç§æ€ç»´ï¼šå¯ä»¥è€ƒè™‘æˆdpæ€è·¯ åˆå§‹æƒ…å†µï¼Œ3ä¸ªç“¶å­æ—¶å°†å‘ç”Ÿä¸€æ¬¡äº¤æ¢ï¼Œå› æ­¤è§†ä¸ºç‰¹æ®Šæƒ…å†µ ä¹‹åæ¯å¢åŠ ä¸¤ä¸ªç“¶å­åˆå¯ä»¥å†æ¢ä¸€ç“¶ å³dp[i] = dp[i - 2] + (i - (i - 2)) + 1 ç”±dp[i - 2]å¯æ±‚å¾—dp[i] (i - (i - 2))ï¼Œå³ä¸ºå½“å‰å¢åŠ çš„2ç“¶é¥®æ–™ï¼ˆå†™æˆè¿™æ ·ä¾¿äºç†è§£ï¼‰ 1å³ä¸ºå¢åŠ äº†2ä¸ªç©ºç“¶ï¼Œä¹‹ååˆå¯ä»¥æ¢ä¸€ç“¶é¥®æ–™ ç®€åŒ–ä¸ºdp[i] = dp[i - 2] + 2 + 1 12345678910111213public int method(int n) &#123; // nä¸º0/1/2çš„ç‰¹æ®Šæƒ…å†µçœç•¥äº† // å®šä¹‰dpæ•°ç»„ int[] dp = new int[n + 1]; // åˆå§‹çŠ¶æ€ dp[0] = 0; dp[1] = 1; dp[2] = 2; for (int i = 3; i &lt;= n; i++) &#123; dp[i] = dp[i - 2] + 2 + 1; &#125; return dp[n]; &#125;Copy to clipboardErrorCopied å›å½’æ­£é¢˜ ç‰¹æ®Šæƒ…å†µï¼šä»ä¸Šé¢çš„åˆ†æä¸­ï¼Œç•™ä¸‹2ä¸ªç“¶å­ å‰©ä¸‹998ä¸ªç“¶å­ç›¸å½“äºæ¯æ¶ˆè€—2ä¸ªç“¶å­å³å¯è·å¾—ä¸€ç“¶ï¼Œå³ä¸º499ç“¶ æœ€åå‰©ä¸‹çš„2ä¸ªç“¶å­æ— æ³•å†è¿›è¡Œå…‘æ¢ï¼Œå› æ­¤æ€»å…±ä¸º1000 + 499 = 1499 ç¬¬äºŒç§æ€ç»´ å› ä¸ºå…‘æ¢ä¸€ç“¶é¥®æ–™éœ€è¦ä¸‰ä¸ªç©ºç“¶ï¼Œè¿™ç“¶é¥®æ–™å¦‚æœæ˜¯æ‰¾è€æ¿å€Ÿæ¥çš„ï¼Œé‚£ä¹ˆå–å®Œåè¿™ä¸ªç©ºç“¶å°†ä¼šè¿˜ç»™ä»–ï¼ŒåŒæ—¶éœ€è¦é™„èµ ç»™ä»–å¦å¤–ä¸¤ä¸ªç©ºç“¶ï¼Œå³æ¯æ¶ˆè€—æ‰‹é‡Œä¸¤ä¸ªç©ºç“¶å°±è·å¾—ä¸€ç“¶é¥®æ–™ ä½†æ˜¯å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢åªæ˜¯ä¸€ç§å‡è®¾ï¼Œå®é™…æƒ…å†µè€æ¿æ˜¯ä¸ä¼šå€Ÿç»™ä½ çš„ï¼Œå› æ­¤æˆ‘ä»¬è‡³å°‘éœ€è¦ä¿ç•™2ä¸ªç©ºç“¶ï¼Œè¿™æ ·å¯ä»¥åœ¨998ä¸ªç“¶å­å‰©ä¸‹ä¸€ä¸ªç“¶å­æ—¶ï¼Œå¯¹å…¶è¿›è¡Œè¡¥è¶³ä¸º3ä¸ªç©ºç“¶ï¼Œä»è€Œå…‘æ¢ä¸€ç“¶æ–°é¥®æ–™ æ­¤æ—¶ä½¿ç”¨998ä¸ªç“¶å­è¿›è¡Œä¸Šè¿°çš„å…‘æ¢ï¼Œå°†è·å¾—499ç“¶é¥®æ–™ ä¹‹å‰ç•™ä¸‹çš„ä¸¤ä¸ªç“¶å­æ­£å¥½æ— æ³•å…‘æ¢ï¼Œæœ€ç»ˆè·å¾—é¥®æ–™ä¸º1000 + 499 = 1499ç“¶ 6. æ¯’è¯æ¯’ç™½é¼ ï¼Œæ‰¾å‡ºå“ªä¸ªç“¶å­ä¸­æ˜¯æ¯’è¯ æœ‰1000ä¸ªä¸€æ¨¡ä¸€æ ·çš„ç“¶å­ï¼Œå…¶ä¸­æœ‰999ç“¶æ˜¯æ™®é€šçš„æ°´ï¼Œæœ‰1ç“¶æ˜¯æ¯’è¯ã€‚ä»»ä½•å–ä¸‹æ¯’è¯çš„ç”Ÿå‘½éƒ½ä¼šåœ¨ä¸€æ˜ŸæœŸä¹‹åæ­»äº¡ã€‚ç°åœ¨ä½ åªæœ‰10åªå°ç™½é¼ å’Œ1ä¸ªæ˜ŸæœŸçš„æ—¶é—´ï¼Œå¦‚ä½•æ£€éªŒå‡ºå“ªä¸ªç“¶å­æœ‰æ¯’è¯ï¼Ÿ å‚è€ƒå›ç­” å°†10åªè€é¼ å‰æˆé¦…å„¿ï¼Œåˆ†åˆ°1000ä¸ªç“¶ç›–ä¸­ï¼Œæ¯ä¸ªç“¶ç›–å€’å…¥é€‚é‡ç›¸åº”ç“¶å­çš„æ¶²ä½“ï¼Œç½®äºæˆ·å¤–ï¼Œå¹¶æ¯å¤©è¡¥å……é€‚é‡ç›¸åº”çš„æ¶²ä½“ï¼Œè§‚å¯Ÿä¸€å‘¨ï¼Œçœ‹å“ªä¸ªç“¶ç›–ä¸­çš„è‚‰é¦…æ²¡æœ‰è…çƒ‚æˆ–ç”Ÿè›†ã€‚ï¼ˆä½ è¦æ˜¯èƒ†å­å¤Ÿå¤§å°±å¯ä»¥è¿™ä¹ˆå›ç­”ï¼Œæ˜¯ä¸ªç‹¼äººï¼‰ é¦–å…ˆä¸€å…±æœ‰1000ç“¶ï¼Œ2çš„10æ¬¡æ–¹æ˜¯1024ï¼Œåˆšå¥½å¤§äº1000ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ1000ç“¶è¯å“å¯ä»¥ä½¿ç”¨10ä½äºŒè¿›åˆ¶æ•°å°±å¯ä»¥è¡¨ç¤ºã€‚ä»ç¬¬ä¸€ä¸ªå¼€å§‹ï¼š ç¬¬ä¸€ç“¶ ï¼š 00 0000 0001 ç¬¬äºŒç“¶ï¼š 00 0000 0010 ç¬¬ä¸‰ç“¶ï¼š 00 0000 0011 â€¦â€¦ ç¬¬999ç“¶ï¼š 11 1111 0010 ç¬¬1000ç“¶ï¼š 11 1111 0011 éœ€è¦ååªè€é¼ ï¼Œå¦‚æœæŒ‰é¡ºåºç¼–å·ï¼ŒABCDEFGHIJåˆ†åˆ«ä»£è¡¨ä»ä½ä½åˆ°é«˜ä½æ¯ä¸€ä¸ªä½ã€‚ æ¯åªè€é¼ å¯¹åº”ä¸€ä¸ªäºŒè¿›åˆ¶ä½ï¼Œå¦‚æœè¯¥ä½ä¸Šçš„æ•°å­—ä¸º1ï¼Œåˆ™ç»™è€é¼ å–ç“¶é‡Œçš„è¯ã€‚ è§‚å¯Ÿï¼Œè‹¥æ­»äº¡çš„è€é¼ ç¼–å·ä¸ºï¼šACFGJï¼Œä¸€å…±æ­»å»äº”åªè€é¼ ï¼Œåˆ™å¯¹åº”çš„ç¼–å·ä¸º 10 0110 0101ï¼Œåˆ™æœ‰æ¯’çš„è¯å“ä¸ºè¯¥ç¼–å·çš„è¯å“ï¼Œè½¬ä¸ºåè¿›åˆ¶æ•°ä¸ºï¼š613å·ã€‚ï¼ˆè¿™æ‰æ˜¯æ­£è§£ï¼Œå½“ç„¶å‰ææ˜¯è€é¼ è¿˜æ²¡è¢«æ’‘æ­»ï¼‰ ç±»ä¼¼é—®é¢˜ï¼š8ç“¶é…’ä¸€ç“¶æœ‰æ¯’ï¼Œç”¨å°è€é¼ æµ‹è¯•ã€‚æ¯æ¬¡æµ‹è¯•ç»“æœ8å°æ—¶åæ‰ä¼šå¾—å‡ºï¼Œè€Œä½ åªæœ‰8ä¸ªå°æ—¶çš„æ—¶é—´ã€‚æœ€å°‘éœ€è¦ï¼ˆ ï¼‰è€é¼ æµ‹è¯•ï¼Ÿ A ã€2 Bã€3 Cã€4 Dã€6 è§£æï¼šç”¨3ä½2è¿›åˆ¶ä»£è¡¨8ç“¶é…’ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤º ç“¶åºå· äºŒè¿›åˆ¶ ä¸­æ¯’æƒ…å†µ ç¬¬ä¸€ç“¶ 000 å…¨æ²¡ä¸­æ¯’ ç¬¬äºŒç“¶ 001 åªæœ‰ç¬¬ä¸€ä¸ªè€é¼ ä¸­æ¯’ ç¬¬ä¸‰ç“¶ 010 åªæœ‰ç¬¬äºŒä¸ªè€é¼ ä¸­æ¯’ ç¬¬å››ç“¶ 011 ç¬¬ä¸€ä¸ªè€é¼ ã€ç¬¬ä¸‰ä¸ªè€é¼ åŒæ—¶ä¸­æ¯’ ç¬¬äº”ç“¶ 100 åªæœ‰ç¬¬ä¸‰ä¸ªè€é¼ ä¸­æ¯’ ç¬¬å…­ç“¶ 101 ç¬¬ä¸€ä¸ªè€é¼ ã€ç¬¬ä¸‰ä¸ªè€é¼ åŒæ—¶ä¸­æ¯’ ç¬¬ä¸ƒç“¶ 110 ç¬¬äºŒä¸ªè€é¼ ã€ç¬¬ä¸‰ä¸ªè€é¼ åŒæ—¶ä¸­æ¯’ ç¬¬å…«ç“¶ 111 ä¸‰ä¸ªè€é¼ åŒæ—¶ä¸­æ¯’ å…¶ä¸­ï¼Œç¬¬ä¸€ä¸ªè€é¼ å–ä¸‹æœ€ä½ä½ä¸º1å¯¹åº”çš„é…’ï¼Œç¬¬äºŒä¸ªè€é¼ å–ä¸‹ä¸­é—´ä½ä¸º1å¯¹åº”çš„é…’ï¼Œç¬¬ä¸‰ä¸ªè€é¼ å–ä¸‹æœ€é«˜ä½ä¸º1å¯¹åº”çš„é…’ã€‚ æœ€åå°†æ‰€æœ‰ä¸­æ¯’çš„è€é¼ ï¼Œå¯¹åº”çš„ä½æ¬¡è¿›è¡Œä¸æ“ä½œå³å¯ä»¥çŸ¥é“é‚£ç“¶æ¯’è¯æœ‰æ¯’äº†ã€‚ 7. åˆ©ç”¨çƒ§ç»³å­è®¡ç®—æ—¶é—´ ç°æœ‰è‹¥å¹²ä¸å‡åŒ€çš„ç»³å­ï¼Œçƒ§å®Œè¿™æ ¹ç»³å­éœ€è¦ä¸€ä¸ªå°æ—¶ï¼Œé—®å¦‚ä½•å‡†ç¡®è®¡æ—¶15åˆ†é’Ÿï¼Œ30åˆ†é’Ÿï¼Œ45åˆ†é’Ÿï¼Œ75åˆ†é’Ÿã€‚ã€‚ã€‚ è®¡ç®—15åˆ†é’Ÿï¼šå¯¹æŠ˜ä¹‹åä¸¤å¤´çƒ§(è¦æ±‚å¯¹æŠ˜ä¹‹åç»‘çš„å¤Ÿç´§ï¼Œå¦åˆ™çœ‹45åˆ†é’Ÿè§£æ³•) è®¡ç®—30åˆ†é’Ÿï¼šä¸¤å¤´çƒ§ è®¡ç®—45åˆ†é’Ÿï¼šä¸¤æ ¹ï¼Œä¸€æ ¹ä¸¤å¤´çƒ§ä¸€æ ¹ä¸€å¤´çƒ§ï¼Œä¸¤å¤´çƒ§å®Œè¿‡äº†30åˆ†é’Ÿï¼Œç«‹å³å°†ç¬¬äºŒæ ¹å¦ä¸€å¤´ç‚¹ç‡ƒï¼Œåˆ°çƒ§å®Œåˆè¿‡15åˆ†é’Ÿï¼ŒåŠ èµ·æ¥45åˆ†é’Ÿ è®¡ç®—75åˆ†é’Ÿï¼šå°†30å’Œ45åˆ†é’Ÿçš„æ–¹å¼åŠ èµ·æ¥å°±å¯ä»¥äº† å…¶ä½™ç±»ä¼¼ 8. åœ¨24å°æ—¶é‡Œé¢æ—¶é’ˆåˆ†é’ˆç§’é’ˆå¯ä»¥é‡åˆå‡ æ¬¡ 24å°æ—¶ä¸­æ—¶é’ˆèµ°2åœˆï¼Œè€Œåˆ†é’ˆèµ°24åœˆï¼Œæ—¶é’ˆå’Œåˆ†é’ˆé‡åˆ24-2=22æ¬¡ï¼Œè€Œåªè¦æ—¶é’ˆå’Œåˆ†é’ˆé‡åˆï¼Œç§’é’ˆä¸€å®šæœ‰æœºä¼šé‡åˆï¼Œæ‰€ä»¥æ€»å…±é‡åˆ22æ¬¡ã€‚ 9. 100ä¸ªå¥´éš¶çŒœå¸½å­é¢œè‰² ä¸€ç™¾ä¸ªå¥´éš¶ç«™æˆä¸€çºµåˆ—ï¼Œæ¯äººå¤´ä¸Šéšæœºå¸¦ä¸Šé»‘è‰²æˆ–ç™½è‰²çš„å¸½å­ï¼Œå„äººä¸çŸ¥é“è‡ªå·±å¸½å­çš„é¢œè‰²ï¼Œä½†æ˜¯èƒ½çœ‹è§è‡ªå·±å‰é¢æ‰€æœ‰äººå¸½å­çš„é¢œè‰²ï¼ ç„¶åä»æœ€åä¸€ä¸ªå¥´éš¶å¼€å§‹ï¼Œæ¯äººåªèƒ½ç”¨åŒä¸€ç§å£°è°ƒå’ŒéŸ³é‡è¯´ä¸€ä¸ªå­—ï¼šâ€é»‘â€æˆ–â€ç™½â€ï¼Œ å¦‚æœè¯´ä¸­äº†è‡ªå·±å¸½å­çš„é¢œè‰²ï¼Œå°±å­˜æ´»ï¼Œè¯´é”™äº†å°±æ‹‰å‡ºå»æ–©äº†ï¼Œè¯´çš„å‚è€ƒå›ç­”æ‰€æœ‰å¥´éš¶éƒ½èƒ½å¬è§ã€‚ æ˜¯å¦è¯´å¯¹ï¼Œå…¶ä»–å¥´éš¶ä¸çŸ¥é“ã€‚ åœ¨è¿™ä¹‹å‰ï¼Œæ‰€æœ‰å¥´éš¶å¯ä»¥èšåœ¨ä¸€èµ·å•†é‡ç­–ç•¥ï¼Œé—®å¦‚æœå¥´éš¶éƒ½è¶³å¤Ÿèªæ˜è€Œä¸”ååº”è¶³å¤Ÿå¿«ï¼Œ100ä¸ªäººæœ€å¤§å­˜æ´»ç‡æ˜¯å¤šå°‘ï¼Ÿ å‚è€ƒå›ç­”ï¼šè¿™æ˜¯ä¸€é“ç»å…¸æ¨ç†é¢˜ æœ€åä¸€ä¸ªäººå¦‚æœçœ‹åˆ°å¥‡æ•°é¡¶é»‘å¸½å­æŠ¥â€œé»‘â€å¦åˆ™æŠ¥â€œç™½â€ï¼Œä»–å¯èƒ½æ­» å…¶ä»–äººè®°ä½è¿™ä¸ªå€¼ï¼ˆå®é™…æ˜¯é»‘å¸½å¥‡å¶æ•°ï¼‰ï¼Œåœ¨æ­¤ä¹‹åå½“å†å¬åˆ°é»‘æ—¶ï¼Œé»‘å¸½æ•°é‡å‡ä¸€ ä»å€’æ•°ç¬¬äºŒäººå¼€å§‹ï¼Œå°±æœ‰ä¸¤ä¸ªä¿¡æ¯ï¼šè®°ä½çš„å€¼ä¸çœ‹åˆ°çš„å€¼ï¼Œç›¸åŒæŠ¥â€œç™½â€ï¼Œä¸åŒæŠ¥â€œé»‘â€ 99äººèƒ½100%å­˜æ´»ï¼Œ1äºº50%èƒ½æ´» å˜ç§ï¼šæ¯ä¸ªå¥´éš¶åªèƒ½çœ‹è§å‰é¢ä¸€ä¸ªäººå¸½å­é¢œè‰²åˆèƒ½æœ€å¤šå­˜æ´»å¤šå°‘äººï¼Ÿ å¢åŠ é™åˆ¶æ¡ä»¶åï¼Œä¸Šé¢çš„æ–¹æ³•å°±å¤±æ•ˆäº†ï¼Œæ­¤æ—¶åªèƒ½çº¦å®šå¶æ•°ä½å¥´éš¶è¯´ä»–å‰ä¸€ä¸ªäººçš„å¸½å­é¢œè‰²ï¼Œå¥‡æ•°å¥´éš¶è·å–ä¿¡æ¯100%å­˜æ´»ï¼Œå¶æ•°å¥´éš¶50å‡ ç‡å­˜æ´»ã€‚ 10. å°çŒ´å­æ¬é¦™è•‰ ä¸€ä¸ªå°çŒ´å­è¾¹ä¸Šæœ‰100æ ¹é¦™è•‰ï¼Œå®ƒè¦èµ°è¿‡50ç±³æ‰èƒ½åˆ°å®¶ï¼Œæ¯æ¬¡å®ƒæœ€å¤šæ¬50æ ¹é¦™è•‰ï¼Œï¼ˆå¤šäº†å°±è¢«å‹æ­»äº†ï¼‰ï¼Œå®ƒæ¯èµ° 1ç±³å°±è¦åƒæ‰ä¸€æ ¹ï¼Œè¯·é—®å®ƒæœ€å¤šèƒ½æŠŠå¤šå°‘æ ¹é¦™è•‰æ¬åˆ°å®¶é‡Œï¼Ÿ ï¼ˆæç¤ºï¼šä»–å¯ä»¥æŠŠé¦™è•‰æ”¾ä¸‹å¾€è¿”çš„èµ°ï¼Œä½†æ˜¯å¿…é¡»ä¿è¯å®ƒæ¯èµ°ä¸€ç±³éƒ½èƒ½æœ‰é¦™è•‰åƒã€‚ä¹Ÿå¯ä»¥èµ°åˆ°nç±³æ—¶ï¼Œæ”¾ä¸‹ä¸€äº›é¦™è•‰ï¼Œæ‹¿ç€næ ¹é¦™è•‰èµ°å›å»é‡æ–°æ¬50æ ¹ã€‚ï¼‰ è¿™ç§è¯•é¢˜é€šå¸¸æœ‰ä¸€ä¸ªè¿·æƒ‘ç‚¹ï¼Œè®©äººçœ‹ä¸æ‡‚é¢˜ç›®çš„æ„å›¾ã€‚æ­¤é¢˜è¿·æƒ‘ç‚¹åœ¨äºï¼šèµ°ä¸€ç±³åƒä¸€æ ¹é¦™è•‰ï¼Œä¸€å…±èµ°50ç±³ï¼Œé‚£ä¸æ˜¯æŠŠ50æ ¹é¦™è•‰åƒå®Œäº†å—ï¼Ÿå¦‚æœè¦å›å»æ¬å¦å¤–50æ ¹é¦™è•‰ï¼Œåˆ™å¾€å›èµ°çš„æ—¶å€™ä¹Ÿè¦åƒé¦™è•‰ï¼Œè¿™æ ·æ¯èµ°ä¸€ç±³éœ€è¦åƒæ‰ä¸‰æ ¹é¦™è•‰ï¼Œèµ°50ç±³å²‚ä¸æ˜¯éœ€è¦150æ ¹é¦™è•‰ï¼Ÿ å…¶å®ä¸ç„¶ï¼Œæœ¬é¢˜å…³é”®ç‚¹åœ¨äºï¼šçŒ´å­æ¬ç®±å­çš„è¿‡ç¨‹å…¶å®åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œç¬¬ä¸€é˜¶æ®µï¼šæ¥å›æ¬ï¼Œå½“é¦™è•‰æ•°ç›®å¤§äº50æ ¹æ—¶ï¼ŒçŒ´å­æ¯æ¬ä¸€ç±³éœ€è¦åƒæ‰ä¸‰æ ¹é¦™è•‰ã€‚ç¬¬äºŒé˜¶æ®µï¼šé¦™è•‰æ•°&lt;=50ï¼Œç›´æ¥æ¬å›å»ã€‚æ¯èµ°ä¸€ç±³åƒæ‰1æ ¹ã€‚ ç¬¬ä¸€é˜¶æ®µï¼šå‡å¦‚æŠŠ100æ ¹é¦™è•‰åˆ†ä¸ºä¸¤ç®±ï¼Œä¸€ç®±50æ ¹ ç¬¬ä¸€æ­¥ï¼ŒæŠŠAç®±æ¬ä¸€ç±³ï¼Œåƒä¸€æ ¹ã€‚ ç¬¬äºŒæ­¥ï¼Œå¾€å›èµ°ä¸€ç±³ï¼Œåƒä¸€æ ¹ã€‚ ç¬¬ä¸‰æ­¥ï¼ŒæŠŠBç®±æ¬ä¸€ç±³ï¼Œåƒä¸€æ ¹ã€‚ è¿™æ ·ï¼ŒæŠŠæ‰€æœ‰é¦™è•‰æ¬èµ°ä¸€ç±³éœ€è¦åƒæ‰ä¸‰æ ¹é¦™è•‰ã€‚è¿™æ ·èµ°åˆ°ç¬¬å‡ ç±³çš„æ—¶å€™ï¼Œé¦™è•‰æ•°åˆšå¥½å°äº50å‘¢ï¼Ÿ 100âˆ’(nâˆ—3)&lt;50&amp;&amp;100âˆ’(nâˆ’1âˆ—3)&gt;50100-(n*3)&lt;50 \\&amp;\\&amp; 100-(n-1*3)&gt;50 100âˆ’(nâˆ—3)&lt;50&amp;&amp;100âˆ’(nâˆ’1âˆ—3)&gt;50 èµ°åˆ°16ç±³çš„æ—¶å€™ï¼Œåƒæ‰48æ ¹é¦™è•‰ï¼Œå‰©52æ ¹é¦™è•‰ã€‚è¿™æ­¥å¾ˆæœ‰æ„æ€ï¼Œå®ƒå¯ä»¥ç›´æ¥æ¬50å¾€å‰èµ°ï¼Œä¹Ÿå¯ä»¥å†æ¥å›æ¬ä¸€æ¬¡ï¼Œä½†ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ã€‚ åˆ°17ç±³çš„æ—¶å€™ï¼ŒçŒ´å­è¿˜æœ‰49æ ¹é¦™è•‰ã€‚è¿™æ—¶çŒ´å­å°±è½»æ¾å•¦ï¼Œç›´æ¥èƒŒç€èµ°å°±è¡Œã€‚ ç¬¬äºŒé˜¶æ®µï¼šèµ°ä¸€ç±³åƒä¸€æ ¹ æŠŠå‰©ä¸‹çš„50-17=33ç±³èµ°å®Œã€‚è¿˜å‰©49-33=16æ ¹é¦™è•‰ã€‚ 11. Nåªèš‚èšèµ°æ ‘æï¼Œé—®æ€»è·ç¦»æˆ–è€…æ€»æ—¶é—´ é—®é¢˜ï¼šæ”¾Nåªèš‚èšåœ¨ä¸€æ¡é•¿åº¦ä¸ºMæ ‘æä¸Šï¼Œèš‚èšä¸èš‚èšä¹‹é—´ç¢°åˆ°å°±å„è‡ªå¾€åæ–¹å‘èµ°ï¼Œé—®æ€»è·ç¦»æˆ–è€…æ—¶é—´ä¸ºå¤šå°‘ï¼Ÿ è¿™ä¸ªå…¶å®å°±ä¸€ä¸ªè¯€çªï¼šèš‚èšç›¸ç¢°å°±å¾€åæ–¹å‘èµ°ï¼Œå¯ä»¥ç›´æ¥çœ‹åšæ²¡æœ‰å‘ç”Ÿä»»ä½•äº‹ï¼šå¤§å®¶éƒ½ç›¸å½“äºç‹¬ç«‹çš„ Aèš‚èšä¸Bèš‚èšç›¸ç¢°åä½ å¯ä»¥çœ‹åšæ²¡æœ‰å‘ç”Ÿè¿™æ¬¡ç¢°æ’ï¼Œè¿™æ ·æ— è®ºæ˜¯æ±‚æ—¶é—´è¿˜æ˜¯è·ç¦»éƒ½å¾ˆç®€å•äº†ã€‚ 12. Nä¸ªå¼ºç›—åˆ†é…Mä¸ªé‡‘å¸ï¼Œæ±‚æ–¹æ¡ˆä½¿å¾—è‡ªå·±åˆ†é…æœ€å¤š 5ä¸ªæµ·ç›—æŠ¢åˆ°äº†100æšé‡‘å¸ï¼Œæ¯ä¸€é¢—éƒ½ä¸€æ ·çš„å¤§å°å’Œä»·å€¼ã€‚ ä»–ä»¬å†³å®šè¿™ä¹ˆåˆ†ï¼š æŠ½ç­¾å†³å®šè‡ªå·±çš„å·ç ï¼ˆ1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ï¼‰ é¦–å…ˆï¼Œç”±1å·æå‡ºåˆ†é…æ–¹æ¡ˆï¼Œç„¶åå¤§å®¶5äººè¿›è¡Œè¡¨å†³ï¼Œå½“ åŠæ•°ä»¥ä¸Šçš„äººåŒæ„æ—¶ï¼ˆ ä¸åŒ…æ‹¬åŠæ•°ï¼Œè¿™æ˜¯é‡ç‚¹ï¼‰ï¼ŒæŒ‰ç…§ä»–çš„ææ¡ˆè¿›è¡Œåˆ†é…ï¼Œå¦åˆ™å°†è¢«æ‰”å…¥å¤§æµ·å–‚é²¨é±¼ã€‚ å¦‚æœ1å·æ­»åï¼Œå†ç”±2å·æå‡ºåˆ†é…æ–¹æ¡ˆï¼Œç„¶åå¤§å®¶4äººè¿›è¡Œè¡¨å†³ï¼Œå½“ä¸”ä»…å½“åŠè¶…è¿‡åŠæ•°çš„äººåŒæ„æ—¶ï¼ŒæŒ‰ç…§ä»–çš„ææ¡ˆè¿›è¡Œåˆ†é…ï¼Œå¦åˆ™å°†è¢«æ‰”å…¥å¤§æµ·å–‚é²¨é±¼ã€‚ ä¾æ¬¡ç±»æ¨â€¦ å‡è®¾æ¯ä¸€ä½æµ·ç›—éƒ½è¶³å¤Ÿèªæ˜ï¼Œå¹¶ä¸”åˆ©ç›Šè‡³ä¸Šï¼Œèƒ½å¤šåˆ†ä¸€æšé‡‘å¸ç»ä¸å°‘åˆ†ï¼Œé‚£ä¹ˆ1å·æµ·ç›—è¯¥æ€ä¹ˆåˆ†é‡‘å¸æ‰èƒ½ä½¿è‡ªå·±åˆ†åˆ°æœ€å¤šçš„é‡‘å¸å‘¢ï¼Ÿ ä»åå‘å‰æ¨ï¼Œå¦‚æœ1è‡³3å·å¼ºç›—éƒ½å–‚äº†é²¨é±¼ï¼Œåªå‰©4å·å’Œ5å·çš„è¯ï¼Œ5å·ä¸€å®šæŠ•åå¯¹ç¥¨è®©4å·å–‚é²¨é±¼ï¼Œä»¥ç‹¬åå…¨éƒ¨é‡‘å¸ã€‚æ‰€ä»¥ï¼Œ4å·æƒŸæœ‰æ”¯æŒ3å·æ‰èƒ½ä¿å‘½ã€‚ 3å·çŸ¥é“è¿™ä¸€ç‚¹ï¼Œå°±ä¼šæå‡ºâ€œ100ï¼Œ0ï¼Œ0â€çš„åˆ†é…æ–¹æ¡ˆï¼Œå¯¹4å·ã€5å·ä¸€æ¯›ä¸æ‹”è€Œå°†å…¨éƒ¨é‡‘å¸å½’ä¸ºå·²æœ‰ï¼Œå› ä¸ºä»–çŸ¥é“4å·ä¸€æ— æ‰€è·ä½†è¿˜æ˜¯ä¼šæŠ•èµæˆç¥¨ï¼Œå†åŠ ä¸Šè‡ªå·±ä¸€ç¥¨ï¼Œä»–çš„æ–¹æ¡ˆå³å¯é€šè¿‡ã€‚ ä¸è¿‡ï¼Œ2å·æ¨çŸ¥3å·çš„æ–¹æ¡ˆï¼Œå°±ä¼šæå‡ºâ€œ98ï¼Œ0ï¼Œ1ï¼Œ1â€çš„æ–¹æ¡ˆï¼Œå³æ”¾å¼ƒ3å·ï¼Œè€Œç»™äºˆ4å·å’Œ5å·å„ä¸€æšé‡‘å¸ã€‚ç”±äºè¯¥æ–¹æ¡ˆå¯¹äº4å·å’Œ5å·æ¥è¯´æ¯”åœ¨3å·åˆ†é…æ—¶æ›´ä¸ºæœ‰åˆ©ï¼Œä»–ä»¬å°†æ”¯æŒä»–è€Œä¸å¸Œæœ›ä»–å‡ºå±€è€Œç”±3å·æ¥åˆ†é…ã€‚è¿™æ ·ï¼Œ2å·å°†æ‹¿èµ°98æšé‡‘å¸ã€‚ åŒæ ·ï¼Œ2å·çš„æ–¹æ¡ˆä¹Ÿä¼šè¢«1å·æ‰€æ´æ‚‰ï¼Œ1å·å¹¶å°†æå‡ºï¼ˆ97ï¼Œ0ï¼Œ1ï¼Œ2ï¼Œ0ï¼‰æˆ–ï¼ˆ97ï¼Œ0ï¼Œ1ï¼Œ0ï¼Œ2ï¼‰çš„æ–¹æ¡ˆï¼Œå³æ”¾å¼ƒ2å·ï¼Œè€Œç»™3å·ä¸€æšé‡‘å¸ï¼ŒåŒæ—¶ç»™4å·ï¼ˆæˆ–5å·ï¼‰2æšé‡‘å¸ã€‚ç”±äº1å·çš„è¿™ä¸€æ–¹æ¡ˆå¯¹äº3å·å’Œ4å·ï¼ˆæˆ–5å·ï¼‰æ¥è¯´ï¼Œç›¸æ¯”2å·åˆ†é…æ—¶æ›´ä¼˜ï¼Œä»–ä»¬å°†æŠ•1å·çš„èµæˆç¥¨ï¼Œå†åŠ ä¸Š1å·è‡ªå·±çš„ç¥¨ï¼Œ1å·çš„æ–¹æ¡ˆå¯è·é€šè¿‡ï¼Œ97æšé‡‘å¸å¯è½»æ¾è½å…¥å›Šä¸­ã€‚è¿™æ— ç–‘æ˜¯1å·èƒ½å¤Ÿè·å–æœ€å¤§æ”¶ç›Šçš„æ–¹æ¡ˆäº†ï¼ 1å·å¼ºç›—åˆ†ç»™3å·1æšé‡‘å¸ï¼Œåˆ†ç»™4å·æˆ–5å·å¼ºç›—2æšï¼Œè‡ªå·±ç‹¬å¾—97æšã€‚åˆ†é…æ–¹æ¡ˆå¯å†™æˆï¼ˆ97ï¼Œ0ï¼Œ1ï¼Œ2ï¼Œ0ï¼‰æˆ–ï¼ˆ97ï¼Œ0ï¼Œ1ï¼Œ0ï¼Œ2ï¼‰ã€‚ å˜ç§ï¼šå°±æ˜¯åªéœ€è¦ä¸€åŠäººåŒæ„å³å¯ï¼Œä¸éœ€è¦ä¸€åŠäººä»¥ä¸ŠåŒæ„æ–¹æ¡ˆå°±å¯ä»¥é€šè¿‡ï¼Œåœ¨å…¶ä»–æ¡ä»¶ä¸å˜çš„æƒ…å†µä¸‹ï¼Œ1å·è¯¥æ€ä¹ˆåˆ†é…æ‰èƒ½è·å¾—æœ€å¤šçš„é‡‘å¸ï¼Ÿ 4å·ï¼š4å·æå‡ºçš„æ–¹æ¡ˆçš„æ—¶å€™è‚¯å®šæ˜¯æœ€ç»ˆæ–¹æ¡ˆï¼Œå› ä¸ºä¸ç®¡5å·åŒæ„ä¸åŒæ„éƒ½èƒ½é€šè¿‡ï¼Œæ‰€ä»¥4å·5å·ä¸å¿…æ‹…å¿ƒè‡ªå·±è¢«æŠ•å…¥å¤§æµ·ã€‚é‚£æ­¤æ—¶5å·è·å¾—çš„é‡‘å¸ä¸º0ï¼Œ4å·è·å¾—çš„é‡‘å¸ä¸º100ã€‚ 5å·ï¼šå› ä¸º4å·ææ–¹æ¡ˆçš„æ—¶å€™ ï¼Œè‡ªå·±è·å–çš„é‡‘å¸ä¸º0 ã€‚æ‰€ä»¥åªè¦4å·ä¹‹å‰çš„äººåˆ†é…ç»™è‡ªå·±çš„é‡‘å¸å¤§äº0å°±åŒæ„è¯¥æ–¹æ¡ˆã€‚ 4å·ï¼šå¦‚æœ3å·æçš„æ–¹æ¡ˆä¸€å®šèƒ½è·å¾—é€šè¿‡ï¼ˆåŸå› ï¼š3å·ç»™5å·çš„é‡‘å¸å¤§äº0ï¼Œ 5å·å°±åŒæ„ å› æ­¤å°±èƒ½é€šè¿‡ï¼‰ï¼Œé‚£è‡ªå·±è·å¾—çš„é‡‘å¸å°±ä¸º0ï¼Œæ‰€ä»¥åªè¦2å·è®©è‡ªå·±è·å¾—çš„é‡‘å¸å¤§äº0å°±ä¼šåŒæ„ã€‚ 3å·ï¼šå› ä¸ºåˆ°äº†è‡ªå·±ææ–¹æ¡ˆçš„æ—¶å€™å¯ä»¥ç»™5å·ä¸€é‡‘å¸ï¼Œè‡ªå·±çš„æ–¹æ¡ˆå°±èƒ½é€šè¿‡ï¼Œä½†è€ƒè™‘åˆ°2å·ææ–¹æ¡ˆçš„æ—¶å€™ç»™4å·ä¸€ä¸ªé‡‘å¸ï¼Œ2å·çš„æ–¹æ¡ˆå°±ä¼šé€šè¿‡ï¼Œé‚£è‡ªå·±è·å¾—çš„é‡‘å¸å°±ä¸º0ã€‚æ‰€ä»¥åªè¦1å·è®©è‡ªå·±è·å¾—çš„é‡‘å¸å¤§äº0å°±ä¼šåŒæ„ã€‚ 2å·ï¼šå› ä¸ºåˆ°äº†è‡ªå·±ææ–¹æ¡ˆçš„æ—¶å€™åªè¦ç»™4å·ä¸€é‡‘å¸ï¼Œå°±èƒ½è·å¾—é€šè¿‡ï¼Œæ ¹æœ¬å°±ä¸ç”¨é¡¾åŠ3 å· 5å·åŒæ„ä¸åŒæ„ï¼Œæ‰€ä»¥ä¸ç®¡1å·æ€ä¹ˆæéƒ½ä¸ä¼šåŒæ„ã€‚ 1å·ï¼š2å·è‚¯å®šä¸ä¼šåŒæ„ã€‚ä½†åªè¦ç»™3å·ä¸€å—é‡‘å¸ï¼Œ5å·ä¸€å—é‡‘å¸ï¼ˆå› ä¸º5å·å¦‚æœä¸åŒæ„ï¼Œé‚£ä¹ˆ4å·åˆ†é…çš„æ—¶å€™ï¼Œä»–ä»€ä¹ˆéƒ½æ‹¿ä¸åˆ°ï¼‰å°±èƒ½è·å¾—é€šè¿‡ã€‚ æ‰€ä»¥å‚è€ƒå›ç­”æ˜¯ï¼š 98ï¼Œ0ï¼Œ1ï¼Œ0ï¼Œ1ã€‚ 14. ç«æªæ‰‹å†³æ–—ï¼Œè°æ´»ä¸‹æ¥çš„æ¦‚ç‡å¤§ï¼Ÿ é—®é¢˜ï¼šå½¼æ­¤ç—›æ¨çš„ç”²ã€ä¹™ã€ä¸™ä¸‰ä¸ªæªæ‰‹å‡†å¤‡å†³æ–—ã€‚ç”²æªæ³•æœ€å¥½ï¼Œåå‘å…«ä¸­ï¼›ä¹™æªæ³•æ¬¡ä¹‹ï¼Œåå‘å…­ä¸­ï¼›ä¸™æªæ³•æœ€å·®ï¼Œåå‘å››ä¸­ã€‚å¦‚æœä¸‰äººåŒæ—¶å¼€æªï¼Œå¹¶ä¸”æ¯äººæ¯è½®åªå‘ä¸€æªï¼›é‚£ä¹ˆæªæˆ˜åï¼Œè°æ´»ä¸‹æ¥çš„æœºä¼šå¤§ä¸€äº›ï¼Ÿ ä¸€èˆ¬äººè®¤ä¸ºç”²çš„æªæ³•å¥½ï¼Œæ´»ä¸‹æ¥çš„å¯èƒ½æ€§å¤§ä¸€äº›ã€‚ä½†åˆä¹æ¨ç†çš„ç»“è®ºæ˜¯ï¼Œæªæ³•æœ€ç³Ÿç³•çš„ä¸™æ´»ä¸‹æ¥çš„å‡ ç‡æœ€å¤§ã€‚ é‚£ä¹ˆæˆ‘ä»¬å…ˆæ¥åˆ†æä¸€ä¸‹å„ä¸ªæªæ‰‹çš„ç­–ç•¥ã€‚ å¦‚åŒç”°å¿Œèµ›é©¬ä¸€èˆ¬ï¼Œæªæ‰‹ç”²ä¸€å®šè¦å¯¹æªæ‰‹ä¹™å…ˆã€‚å› ä¸ºä¹™å¯¹ç”²çš„å¨èƒè¦æ¯”ä¸™å¯¹ç”²çš„å¨èƒæ›´å¤§ï¼Œç”²åº”è¯¥é¦–å…ˆå¹²æ‰ä¹™ï¼Œè¿™æ˜¯ç”²çš„æœ€ä½³ç­–ç•¥ã€‚ åŒæ ·çš„é“ç†ï¼Œæªæ‰‹ä¹™çš„æœ€ä½³ç­–ç•¥æ˜¯ç¬¬ä¸€æªç„å‡†ç”²ã€‚ä¹™ä¸€æ—¦å°†ç”²å¹²æ‰ï¼Œä¹™å’Œä¸™è¿›è¡Œå¯¹å†³ï¼Œä¹™èƒœç®—çš„æ¦‚ç‡è‡ªç„¶å¤§å¾ˆå¤šã€‚ æªæ‰‹ä¸™çš„æœ€ä½³ç­–ç•¥ä¹Ÿæ˜¯å…ˆå¯¹ç”²ã€‚ä¹™çš„æªæ³•æ¯•ç«Ÿæ¯”ç”²å·®ä¸€äº›ï¼Œä¸™å…ˆæŠŠç”²å¹²æ‰å†ä¸ä¹™è¿›è¡Œå¯¹å†³ï¼Œä¸™çš„å­˜æ´»æ¦‚ç‡è¿˜æ˜¯è¦é«˜ä¸€äº›ã€‚ æˆ‘ä»¬æ ¹æ®åˆ†ææ¥è®¡ç®—ä¸€ä¸‹ä¸‰ä¸ªæªæ‰‹åœ¨ä¸Šè¿°æƒ…å†µä¸‹çš„å­˜æ´»å‡ ç‡ï¼š ç¬¬ä¸€è½®ï¼šç”²å°„ä¹™ï¼Œä¹™å°„ç”²ï¼Œä¸™å°„ç”²ã€‚ ç”²çš„æ´»ç‡ä¸º24%ï¼ˆ40% X 60%ï¼‰ ä¹™çš„æ´»ç‡ä¸º20%(100% - 80%) ä¸™çš„æ´»ç‡ä¸º100%ï¼ˆæ— äººå°„ä¸™ï¼‰ ç”±äºä¸™100ï¼…å­˜æ´»ç‡ï¼Œå› æ­¤æ ¹æ®ä¸Šè½®ç”²ä¹™å­˜æ´»çš„æƒ…å†µæ¥è®¡ç®—ä¸‰äººç¬¬äºŒè½®çš„å­˜æ´»å‡ ç‡ï¼š æƒ…å†µ1ï¼šç”²æ´»ä¹™æ­»ï¼ˆ24% X 80% = 19.2%ï¼‰ ç”²å°„ä¸™ï¼Œä¸™å°„ç”²ï¼šç”²çš„æ´»ç‡ä¸º60%ï¼Œä¸™çš„æ´»ç‡ä¸º20%ã€‚ æƒ…å†µ2ï¼šä¹™æ´»ç”²æ­»ï¼ˆ20% X 76% = 15.2%ï¼‰ ä¹™å°„ä¸™ï¼Œä¸™å°„ä¹™ï¼šä¹™çš„æ´»ç‡ä¸º60%ï¼Œä¸™çš„æ´»ç‡ä¸º40%ã€‚ æƒ…å†µ3ï¼šç”²ä¹™åŒæ´»ï¼ˆ24% X 20% = 4.8%ï¼‰ é‡å¤ç¬¬ä¸€è½®ã€‚ æƒ…å†µ4ï¼šç”²ä¹™åŒæ­»ï¼ˆ76% X 80% = 60.8%ï¼‰ æªæˆ˜ç»“æŸã€‚ æ®æ­¤æ¥è®¡ç®—ä¸‰äººæ´»ç‡ï¼š ç”²çš„æ´»ç‡ä¸º(19.2% X 60%) + (4.8% X 24%) = 12.672% ä¹™çš„æ´»ç‡ä¸º(15.2% X 60%) + (4.8% X 20%) = 10.08% ä¸™çš„æ´»ç‡ä¸º(19.2% X 20%) + (15.2% X 40%) + (4.8% X 100%) + (60.8% X 100%) = 75.52% é€šè¿‡å¯¹ä¸¤è½®æªæˆ˜çš„è¯¦ç»†æ¦‚ç‡è®¡ç®—ï¼Œæˆ‘ä»¬å‘ç°æªæ³•æœ€å·®çš„ä¸™å­˜æ´»çš„å‡ ç‡æœ€å¤§ï¼Œæªæ³•è¾ƒå¥½çš„ç”²å’Œä¹™çš„å­˜æ´»å‡ ç‡å´è¿œä½äºä¸™çš„å­˜æ´»å‡ ç‡ã€‚ 15. å…ˆæ‰‹å¿…èƒœçš„é—®é¢˜ 100æœ¬ä¹¦ï¼Œæ¯æ¬¡èƒ½å¤Ÿæ‹¿1-5æœ¬ï¼Œæ€ä¹ˆæ‹¿èƒ½ä¿è¯æœ€åä¸€æ¬¡æ˜¯ä½ æ‹¿ï¼Ÿ å¯»æ‰¾æ¯ä¸ªå›åˆå›ºå®šçš„æ‹¿å–æ¨¡å¼ï¼Œæœ€åä¸€æ¬¡æ˜¯æˆ‘æ‹¿ï¼Œé‚£ä¹ˆä¸Šä¸ªå›åˆæœ€å°‘å‰©ä¸‹6æœ¬ã€‚é‚£ä¹ˆåªè¦ä¿æŒæ¯ä¸ªå›åˆç»“æŸåéƒ½å‰©ä¸‹6çš„å€æ•°ï¼Œå¹¶ä¸”åœ¨è¿™ä¸ªå›åˆä¸­æˆ‘æ‹¿çš„å’Œå¯¹æ–¹æ‹¿çš„åŠ èµ·æ¥ä¸º6ï¼ˆè¿™æ ·è¿™ä¸ªå›åˆç»“æŸåå‰©ä¸‹çš„è¿˜æ˜¯6çš„å€æ•°ï¼‰ï¼Œå°±å¿…èƒœã€‚ å…³é”®æ˜¯ç¬¬ä¸€æ¬¡æˆ‘å¿…é¡»å…ˆæ‰‹æ‹¿ï¼ˆ100%6=4ï¼‰æœ¬ï¼ˆè¿™ä¸ç®—åœ¨ç¬¬ä¸€å›åˆé‡Œé¢ï¼‰ã€‚ 16. æ°å·§å…‹åŠ›é—®é¢˜æˆ–è€…å‚åŠ è¾©è®ºèµ› 1ã€æ°å·§å…‹åŠ›é—®é¢˜ NMå—å·§å…‹åŠ›ï¼Œæ¯æ¬¡æ°ä¸€å—çš„ä¸€è¡Œæˆ–ä¸€åˆ—ï¼Œæ°æˆ11çš„å·§å…‹åŠ›éœ€è¦å¤šå°‘æ¬¡ï¼Ÿ 2ã€1000ä¸ªäººå‚åŠ è¾©è®ºèµ›ï¼Œ1V1ï¼Œè¾“äº†å°±é€€å‡ºï¼Œéœ€è¦å®‰æ’å¤šå°‘åœºæ¯”èµ›ï¼Ÿ æ¯æ¬¡æ‹¿èµ·ä¸€å—å·§å…‹åŠ›ï¼Œæ°ä¸€ä¸‹ï¼ˆæ— è®ºæ¨ªç€è¿˜æ˜¯ç«–ç€ï¼‰éƒ½ä¼šå˜æˆä¸¤å—ï¼Œå› ä¸ºæ‰€æœ‰çš„å·§å…‹åŠ›å…±æœ‰NMå—ï¼Œæ‰€ä»¥è¦æ°NM-1æ¬¡ï¼Œ-1æ˜¯å› ä¸ºæœ€å¼€å§‹çš„ä¸€å—æ˜¯ä¸ç”¨ç®—è¿›å»çš„ã€‚ æ¯ä¸€åœºè¾©è®ºèµ›å‚åŠ ä¸¤ä¸ªäººï¼Œæ¶ˆå¤±ä¸€ä¸ªäººï¼Œæ‰€ä»¥å¯ä»¥çœ‹ä½œæ˜¯æ¯ä¸€åœºè¾©è®ºèµ›å‡å°‘ä¸€ä¸ªäººï¼Œç›´åˆ°æœ€åå‰©ä¸‹1ä¸ªäººï¼Œæ‰€ä»¥æ˜¯1000-1=999åœºã€‚","categories":[{"name":"æ ¡æ‹›ç¬”è®°","slug":"æ ¡æ‹›ç¬”è®°","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/"},{"name":"è®¡ç®—æœºåŸºç¡€","slug":"æ ¡æ‹›ç¬”è®°/è®¡ç®—æœºåŸºç¡€","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"æ ¡æ‹›","slug":"æ ¡æ‹›","permalink":"https://hwh.zone/tags/%E6%A0%A1%E6%8B%9B/"},{"name":"è®¡ç®—æœºåŸºç¡€","slug":"è®¡ç®—æœºåŸºç¡€","permalink":"https://hwh.zone/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"},{"name":"åœºæ™¯é¢˜","slug":"åœºæ™¯é¢˜","permalink":"https://hwh.zone/tags/%E5%9C%BA%E6%99%AF%E9%A2%98/"},{"name":"æ™ºåŠ›é¢˜","slug":"æ™ºåŠ›é¢˜","permalink":"https://hwh.zone/tags/%E6%99%BA%E5%8A%9B%E9%A2%98/"}]},{"title":"æ ¡æ‹›ç¬”è®°ï¼ˆä¸ƒï¼‰_è®¡ç®—æœºåŸºç¡€_æ•°æ®ç»“æ„","slug":"æ ¡æ‹›ç¬”è®°ï¼ˆä¸ƒï¼‰_è®¡ç®—æœºåŸºç¡€_æ•°æ®ç»“æ„","date":"2021-11-26T13:20:04.945Z","updated":"2021-12-03T03:55:43.335Z","comments":true,"path":"p/61434/","link":"","permalink":"https://hwh.zone/p/61434/","excerpt":"","text":"æˆ‘çš„æ ¡æ‹›è®°å½•ï¼šæ ¡æ‹›ç¬”è®°ï¼ˆé›¶ï¼‰_å†™åœ¨å‰é¢ ï¼Œä»¥ä¸‹æ˜¯æ ¡æ‹›ç¬”è®°æ€»ç›®å½•ã€‚ å¤‡æ³¨ ç®—æ³•èƒ½åŠ›ï¼ˆâ€œåˆ·é¢˜â€ï¼‰ è¿™éƒ¨åˆ†å°±æ˜¯è€—æ—¶é—´å¤šç»ƒä¹ ï¼ŒLeetcode-Top100 æ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚ è¡¥å……ç»ƒä¹ ï¼šcodeTop è®¡ç®—æœºåŸºç¡€(ä¸Š)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_Javaå…¥é—¨ C++åç«¯åç»­æ›´æ–° æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é¢å¯¹å¯¹è±¡ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é›†åˆ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_å¤šçº¿ç¨‹ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é” æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_JVM è®¡ç®—æœºåŸºç¡€(ä¸‹)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆäºŒï¼‰__è®¡ç®—æœºåŸºç¡€_Linux&amp;Git æ ¡æ‹›ç¬”è®°ï¼ˆä¸‰ï¼‰__è®¡ç®—æœºåŸºç¡€_è®¡ç®—æœºç½‘ç»œ æ ¡æ‹›ç¬”è®°ï¼ˆå››ï¼‰__è®¡ç®—æœºåŸºç¡€_æ“ä½œç³»ç»Ÿ æ ¡æ‹›ç¬”è®°ï¼ˆäº”ï¼‰__è®¡ç®—æœºåŸºç¡€_MySQL æ ¡æ‹›ç¬”è®°ï¼ˆå…­ï¼‰__è®¡ç®—æœºåŸºç¡€_Redis æ ¡æ‹›ç¬”è®°ï¼ˆä¸ƒï¼‰__è®¡ç®—æœºåŸºç¡€_æ•°æ®ç»“æ„ æ ¡æ‹›ç¬”è®°ï¼ˆå…«ï¼‰__è®¡ç®—æœºåŸºç¡€_åœºæ™¯&amp;æ™ºåŠ›é¢˜ æ ¡æ‹›ç¬”è®°ï¼ˆä¹ï¼‰__è®¡ç®—æœºåŸºç¡€_ç›¸å…³è¡¥å…… é¡¹ç›®&amp;å®ä¹  ä¸»è¦æ˜¯æ€ä¹ˆå‡†å¤‡é¡¹ç›®ï¼Œåç»­æ›´æ–° ä¸ƒã€æ•°æ®ç»“æ„å’Œç®—æ³• 1. å¦‚ä½•å¯¹å¿«æ’è¿›è¡Œä¼˜åŒ–ï¼Ÿ ä¸‰æ•°å–ä¸­æ³•å’Œéšæœºäº¤æ¢æ³• å¿«æ’å°†é€‰å–çš„åŸºå‡†ç‚¹ç»è¿‡è°ƒæ•´æ”¾åˆ°åˆé€‚çš„ä½ç½®ï¼Œä¹‹åå°†è¿™ä¸ªåŸºå‡†ç‚¹å·¦å³ä¸¤è¾¹çš„åŒºé—´åˆ†åˆ«é€’å½’çš„è¿›è¡Œå¿«æ’ã€‚ å¦‚æœåŸºå‡†ç‚¹çš„æ•°æ®æ¯”è¾ƒå°ï¼Œå°†ä¼šå¯¼è‡´è°ƒæ•´ååŸºå‡†ç‚¹å¤„äºé è¿‘ä¸¤ä¾§çš„ä½ç½®ï¼Œé‚£ä¹ˆä¸¤è¾¹çš„åŒºé—´é•¿åº¦å°†ä¼šä¸¥é‡å¤±å»å¹³è¡¡. ä¸‰æ•°å–ä¸­æ³•ï¼šæŒ‡çš„æ˜¯é€‰å–åŸºå‡†ç‚¹ä¹‹å‰æˆ‘ä»¬å¯ä»¥æ‹¿å‡ºæ•°åˆ—ä¸­é—´ä½ç½®å…ƒç´ çš„å€¼ï¼Œå°†å®ƒå’Œé¦–å°¾çš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œä¹‹åå°†è¿™ä¸‰ä¸ªæ•°ä¸­çš„ä¸­é—´æ•°äº¤æ¢åˆ°æ•°åˆ—é¦–ä½çš„ä½ç½®ï¼Œä¹‹åå°†è¿™ä¸ªæ•°ä½œä¸ºåŸºå‡†ç‚¹ï¼Œå°½é‡å‡å°ä¹‹åçš„åˆ†åŒºåå·¦å³ä¸¤è¾¹çš„åŒºé—´é•¿åº¦ä¹‹å·®ã€‚ ä¸‰è·¯åˆ†å‰²æ³• ä¸‰è·¯æ³•åŒæ ·æ˜¯é’ˆå¯¹å«æœ‰å¤§é‡ã€é‡å¤æ•°åˆ—ã€‘çš„ä¼˜åŒ–ã€‚ 3è·¯æ³•çš„æ€æƒ³æ˜¯å°†æ•°åˆ—åˆ†æˆ3ä¸ªåŒºé—´ï¼Œåˆ†åˆ«æ˜¯å°äºã€ç­‰äºå’Œå¤§äºåŸºå‡†ç‚¹çš„åŒºé—´ã€‚é‚£ä¹ˆåˆ†åŒºä¹‹åï¼Œå¯¹äºç­‰äºåŸºå‡†ç‚¹çš„åŒºé—´å†…çš„å…ƒç´ ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦å¯¹å…¶åšä»»ä½•å¤„ç†äº†ï¼Œåªéœ€è¦é€’å½’çš„å¤„ç†å°äºå’Œå¤§äºåŸºå‡†ç‚¹çš„å…ƒç´ å³å¯ã€‚ ç»“åˆæ’å…¥æ’åº å½“å¾…æ’åºåºåˆ—çš„é•¿åº¦åˆ†å‰²åˆ°ä¸€å®šå¤§å°åï¼Œä½¿ç”¨æ’å…¥æ’åºã€‚ å¯¹äºå¾ˆå°å’Œéƒ¨åˆ†æœ‰åºçš„æ•°ç»„ï¼Œå¿«æ’ä¸å¦‚æ’æ’å¥½ã€‚å½“å¾…æ’åºåºåˆ—çš„é•¿åº¦åˆ†å‰²åˆ°ä¸€å®šå¤§å°åï¼Œç»§ç»­åˆ†å‰²çš„æ•ˆç‡æ¯”æ’å…¥æ’åºè¦å·®ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨æ’æ’è€Œä¸æ˜¯å¿«æ’ã€‚ 2.å¿«æ’å’Œå †æ’çš„åŒºåˆ«ï¼Ÿä»€ä¹ˆæ—¶å€™ä½¿ç”¨å¿«æ’å’Œå †æ’ï¼Ÿ å¿«æ’å’Œå †æ’åŒºåˆ«ï¼Ÿ ç»¼åˆæ€§èƒ½ï¼šå®é™…åº”ç”¨ä¸­ï¼Œè™½ç„¶å †æ’åºçš„æ—¶é—´å¤æ‚åº¦è¦æ¯”å¿«é€Ÿæ’åºç¨³å®šï¼ˆå¿«æ’æœ€å·®é€€åŒ–æˆO(N^2)ï¼‰ ï¼Œä½†æ˜¯ç»Ÿè®¡æ„ä¹‰ä¸Šè¿™ç§æƒ…å†µè¾ƒå°‘ï¼Œæ‰€ä»¥ç»¼åˆæ€§èƒ½è¿˜æ˜¯å¿«æ’æ›´ä¼˜ï¼› äº¤æ¢æ¬¡æ•°ï¼š å¯¹äºåŒæ ·çš„æ•°æ®ï¼Œåœ¨æ’åºè¿‡ç¨‹ä¸­ï¼Œå †æ’åºç®—æ³•çš„æ•°æ®äº¤æ¢æ¬¡æ•°è¦å¤šäºå¿«é€Ÿæ’åºï¼› è®¿é—®å‹å¥½ï¼š å †æ’åºæ•°æ®è®¿é—®çš„æ–¹å¼æ²¡æœ‰å¿«é€Ÿæ’åºå‹å¥½ã€‚ å¯¹äºå¿«é€Ÿæ’åºæ¥è¯´ï¼Œæ•°æ®æ˜¯é¡ºåºè®¿é—®çš„ï¼›è€Œå †æ’åºæ¥è¯´ï¼Œæ•°æ®æ˜¯è·³ç€è®¿é—®çš„ã€‚æ¯”å¦‚ï¼Œå †æ’åºä¸­ï¼Œæœ€é‡è¦çš„ä¸€ä¸ªæ“ä½œå°±æ˜¯æ•°æ®çš„å †åŒ–ã€‚å¯¹å †é¡¶èŠ‚ç‚¹è¿›è¡Œå †åŒ–ï¼Œä¼šä¸€æ¬¡è®¿é—®æ•°ç»„ä¸‹æ ‡1ï¼Œ2ï¼Œ4ï¼Œ8çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯åƒå¿«æ’é‚£æ ·ï¼Œå±€éƒ¨é¡ºåºè®¿é—®ï¼Œæ‰€ä»¥å¯¹CPUç¼“å­˜æ˜¯ä¸å‹å¥½çš„ã€‚ å¿«æ’å’Œå †æ’ä½¿ç”¨åœºæ™¯ï¼Ÿ å¿«æ’ï¼š ç»å¤§å¤šæ•°åœºåˆã€‚ å †æ’ï¼š topKé—®é¢˜ã€ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆéœ€è¦åœ¨ä¸€ç»„ä¸åœæ›´æ–°çš„æ•°æ®ä¸­ä¸åœåœ°æ‰¾æœ€å¤§/å°å…ƒç´ ï¼‰ åœ¨Nä¸ªå…ƒç´ ä¸­æ‰¾åˆ°top Kï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯O(N log K)ï¼Œç©ºé—´å¤æ‚çš„æ˜¯O(K)ï¼Œè€Œå¿«é€Ÿæ’åºçš„ç©ºé—´å¤æ‚åº¦æ˜¯O(N)ã€‚ 3. ã€é¢è¯•é‡ç‚¹ã€‘æœ‰å“ªäº›æ’åºç®—æ³•ï¼Œå„ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ ? å“ªäº›æ˜¯ç¨³å®šçš„ï¼Ÿä¸ºä»€ä¹ˆæ˜¯ç¨³å®šçš„ï¼Ÿ 3.1 å¦‚æœæ•°æ®å¤§è‡´æœ‰åºçš„ï¼Œç”¨ä»€ä¹ˆæ’åºæ¯”è¾ƒå¥½ï¼Ÿ å¦‚æœæ˜¯å¤§è‡´æœ‰åºï¼Œç”¨ æ’å…¥æ’åº æ¯”è¾ƒå¥½ï¼š ç›´æ¥æ’å…¥æ’åºæ˜¯å°†ç¬¬iä¸ªå…ƒç´ æ’å…¥åˆ°å·²ç»æ’åºå¥½çš„å‰i-1ä¸ªå…ƒç´ ä¸­ ï¼Œå½“å…ƒç´ åŸºæœ¬æœ‰åºæ—¶ã€‚å’Œå‰i-1ä¸ªå…ƒç´ æœ«å°¾æ¯”è¾ƒä¸€æ¬¡å°±å¯ä»¥ç›´æ¥æ’å…¥ã€‚ åœ¨ç›¸æ¯”ä½¿ç”¨å…¶å®ƒæ’åºï¼š å½’å¹¶æ’åºï¼š å½’å¹¶æ’åºå’Œæ•°ç»„æ˜¯å¦æœ‰åºæ— å…³ï¼Œéƒ½æ˜¯O(nlgn)ã€‚ å½’å¹¶æ’åºæ˜¯æŠŠä¸€ä¸ªæœ‰nä¸ªè®°å½•çš„æ— åºæ–‡ä»¶çœ‹æˆç”±nä¸ªé•¿åº¦ä¸º1çš„æœ‰åºå­æ–‡ä»¶ç»„æˆçš„æ–‡ä»¶ï¼Œç„¶åè¿›è¡Œä¸¤ä¸¤å½’å¹¶ï¼Œå¾—åˆ°[n/2]ä¸ªé•¿åº¦ä¸º2æˆ–1çš„æœ‰åºæ–‡ä»¶ï¼Œå†ä¸¤ä¸¤å½’å¹¶ ã€‚ å¿«é€Ÿæ’åºï¼š æ•°ç»„åŸºæœ¬æœ‰åºæ—¶ï¼Œæ­¤æ—¶å¦‚æœä½¿ç”¨åŸºç‚¹æ˜¯æœ€åä¸€ä¸ªå…ƒç´ ï¼Œåˆ’åˆ†çš„ä¸¤ä¸ªå­æ•°ç»„æä¸ºä¸å¹³è¡¡ï¼Œæ¯æ¬¡åˆ’åˆ†æ¯”è¾ƒæ¬¡æ•°éƒ½å¾ˆå¤šã€‚æ‰€ä»¥ä¸æ¨èã€‚ 4. äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œçº¢é»‘æ ‘å’Œå¹³è¡¡äºŒå‰æ ‘çš„åŒºåˆ«ï¼Ÿï¼ˆæœ‰äº†äºŒå‰æŸ¥æ‰¾æ ‘ã€å¹³è¡¡æ ‘ï¼ˆAVLï¼‰ä¸ºå•¥è¿˜éœ€è¦çº¢é»‘æ ‘ï¼Ÿï¼‰ æ€»ç»“æ¥è¯´ï¼šå¹³è¡¡æ ‘æ˜¯ä¸ºäº†è§£å†³äºŒå‰æŸ¥æ‰¾æ ‘é€€åŒ–ä¸ºé“¾è¡¨çš„æƒ…å†µï¼›è€Œçº¢é»‘æ ‘æ˜¯ä¸ºäº†è§£å†³å¹³è¡¡æ ‘åœ¨æ’å…¥ã€åˆ é™¤ç­‰æ“ä½œéœ€è¦é¢‘ç¹è°ƒæ•´çš„æƒ…å†µã€‚ äºŒå‰æŸ¥æ‰¾æ ‘é€€åŒ–æˆå•é“¾è¡¨ æ­£å¸¸ä½¿ç”¨äºŒå‰æŸ¥æ‰¾æ ‘æ˜¯ç±»ä¼¼äºäºŒåˆ†æŸ¥æ‰¾ Oï¼ˆlognï¼‰ï¼Œä½†æ˜¯æç«¯æƒ…å†µï¼š æ„å»ºçš„äºŒå‰æ ‘æ‰€æœ‰èŠ‚ç‚¹éƒ½åªæœ‰å³å­æ ‘æˆ–å·¦å­æ ‘ï¼Œæ­¤æ—¶æ—¶é—´å¤æ‚åº¦é€€åŒ–æˆO(N) å¹³è¡¡äºŒå‰æ ‘é¢‘ç¹å·¦å³æ—‹ å¹³è¡¡äºŒå‰æ ‘å°±æ˜¯ä¸ºäº†è§£å†³äºŒå‰æŸ¥æ‰¾æ ‘é€€åŒ–æˆä¸€é¢—é“¾è¡¨è€Œè¯ç”Ÿäº†ï¼Œå¹³è¡¡æ ‘å…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š å…·æœ‰äºŒå‰æŸ¥æ‰¾æ ‘çš„å…¨éƒ¨ç‰¹æ€§ï¼› æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å­æ ‘å’Œå³å­æ ‘çš„é«˜åº¦å·®è‡³å¤šç­‰äº1ã€‚ é¿å…äº†äºŒå‰æŸ¥æ‰¾æ ‘æç«¯æƒ…å†µäº§ç”Ÿï¼Œä½†æ˜¯ï¼š æ¯æ¬¡è¿›è¡Œæ’å…¥/åˆ é™¤èŠ‚ç‚¹çš„æ—¶å€™ï¼Œå‡ ä¹éƒ½ä¼šç ´åå¹³è¡¡æ ‘çš„ç¬¬äºŒä¸ªè§„åˆ™ï¼Œè¿›è€Œæˆ‘ä»¬éƒ½éœ€è¦é€šè¿‡å·¦æ—‹å’Œå³æ—‹æ¥è¿›è¡Œè°ƒæ•´ï¼Œä½¿ä¹‹å†æ¬¡æˆä¸ºä¸€é¢—ç¬¦åˆè¦æ±‚çš„å¹³è¡¡æ ‘ã€‚ å¹³è¡¡æ ‘æ€§èƒ½å¤§æ‰“æŠ˜æ‰£ã€‚ çº¢é»‘æ ‘è§„ä¸éœ€è¦é¢‘ç¹ç€è°ƒæ•´ çº¢é»‘æ ‘å…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š æœ€åæƒ…å†µä¸‹ï¼Œä¹Ÿèƒ½åœ¨ O(logn) çš„æ—¶é—´å¤æ‚åº¦æŸ¥æ‰¾åˆ°æŸä¸ªèŠ‚ç‚¹ã€‚ ä¸å¹³è¡¡æ ‘ä¸åŒçš„æ˜¯ï¼Œçº¢é»‘æ ‘åœ¨æ’å…¥ã€åˆ é™¤ç­‰æ“ä½œï¼Œï¼ˆğŸš©*1ï¼‰ä¸ä¼šåƒå¹³è¡¡æ ‘é‚£æ ·ï¼Œé¢‘ç¹ç€ç ´åçº¢é»‘æ ‘çš„è§„åˆ™ï¼Œæ‰€ä»¥ä¸éœ€è¦é¢‘ç¹ç€è°ƒæ•´ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬ä¸ºä»€ä¹ˆå¤§å¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨çº¢é»‘æ ‘çš„åŸå› ï¼› ä½†æ˜¯ï¼Œå•å•åœ¨æŸ¥æ‰¾æ–¹é¢çš„æ•ˆç‡çš„è¯ï¼Œå¹³è¡¡æ ‘æ¯”çº¢é»‘æ ‘å¿«ã€‚ å…·æœ‰äºŒå‰æŸ¥æ‰¾æ ‘çš„ç‰¹ç‚¹ï¼› æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²çš„ï¼› æ¯ä¸ªå¶å­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²çš„ç©ºèŠ‚ç‚¹ï¼ˆNILï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¶å­èŠ‚ç‚¹ä¸å­˜æ•°æ®ï¼› ä»»ä½•ç›¸é‚»çš„èŠ‚ç‚¹éƒ½ä¸èƒ½åŒæ—¶ä¸ºçº¢è‰²ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œçº¢è‰²èŠ‚ç‚¹æ˜¯è¢«é»‘è‰²èŠ‚ç‚¹éš”å¼€çš„ï¼› æ¯ä¸ªèŠ‚ç‚¹ï¼Œä»è¯¥èŠ‚ç‚¹åˆ°è¾¾å…¶å¯è¾¾çš„å¶å­èŠ‚ç‚¹æ˜¯æ‰€æœ‰è·¯å¾„ï¼Œéƒ½åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹ã€‚ 4.1 ä¸ºä»€ä¹ˆçº¢é»‘æ ‘ä¸éœ€è¦é¢‘ç¹è°ƒæ•´ï¼Ÿ è¯¦ç»†ç†è§£çº¢é»‘æ ‘ä¸€ç¯‡ä¸é”™çš„æ–‡ç« ï¼šç™¾å›¾è¯¦è§£çº¢é»‘æ ‘ï¼Œæƒ³ä¸ç†è§£éƒ½éš¾ å¹³è¡¡äºŒå‰æ ‘è¿™ç§é«˜åº¦å·®ä¸º 1 çš„è¦æ±‚å¤ªä¸¥æ ¼äº†ï¼Œå°¤å…¶æ˜¯å¯¹äºé¢‘ç¹åˆ é™¤ã€æ’å…¥çš„åœºæ™¯éå¸¸æµªè´¹æ—¶é—´ã€‚ ä½†æ˜¯ç”±äºçº¢é»‘æ ‘ï¼š å…·æœ‰äºŒå‰æ ‘æ‰€æœ‰ç‰¹ç‚¹ã€‚ æ¯ä¸ªèŠ‚ç‚¹åªèƒ½æ˜¯çº¢è‰²æˆ–è€…æ˜¯é»‘è‰²ã€‚ æ ¹èŠ‚ç‚¹åªèƒ½æ˜¯é»‘è‰²ï¼Œä¸”é»‘è‰²æ ¹èŠ‚ç‚¹ä¸å­˜å‚¨æ•°æ®ã€‚ ä»»ä½•ç›¸é‚»çš„èŠ‚ç‚¹éƒ½ä¸èƒ½åŒæ—¶ä¸ºçº¢è‰²ã€‚ çº¢è‰²çš„èŠ‚ç‚¹ï¼Œå®ƒçš„å­èŠ‚ç‚¹åªèƒ½æ˜¯é»‘è‰²ã€‚ ä»ä»»ä¸€èŠ‚ç‚¹åˆ°å…¶æ¯ä¸ªå¶å­çš„æ‰€æœ‰è·¯å¾„éƒ½åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹ã€‚ ä¸è¿½æ±‚æ’å…¥ã€åˆ é™¤ç­‰æ“ä½œç»å¯¹å¹³è¡¡ï¼Œåªéœ€æ»¡è¶³ä¸Šè¿°æ¡ä»¶å³å¯ã€‚å®ƒçš„æ—‹è½¬æ¬¡æ•°å°‘ï¼Œæ’å…¥æœ€å¤šä¸¤æ¬¡æ—‹è½¬ï¼Œåˆ é™¤æœ€å¤šä¸‰æ¬¡æ—‹è½¬ã€‚ æ‰€ä»¥åœ¨æœç´¢ã€æ’å…¥ã€åˆ é™¤æ“ä½œè¾ƒå¤šçš„æƒ…å†µä¸‹ï¼Œçº¢é»‘æ ‘çš„æ•ˆç‡æ˜¯ä¼˜äºå¹³è¡¡äºŒå‰æ ‘çš„ã€‚ 5.å¿«é€Ÿæ’åºçš„è¿‡ç¨‹ ï¼Ÿ æ‰‹æ’•ä¸€ä¸ªäºŒåˆ†æŸ¥æ‰¾ å’Œå¿«æ’ï¼Ÿ äºŒåˆ†æŸ¥æ‰¾ 12345678910111213141516171819202122232425// binary search public int binarySearch(int[] arr, int value) &#123; int left = 0,right = arr.length-1; int mid ; while (left&lt;=right) //*&lt;= è€Œä¸æ˜¯&lt; &#123; mid = (left+right)/2; if(value == arr[mid]) &#123; return mid; // å¦‚æœæ•°ç»„å­˜åœ¨å¾…æŸ¥æ‰¾å…ƒç´ ï¼ŒæŒ‰ç…§é€»è¾‘ä¸€å®šä¼šæ˜¯mid &#125; else if(value &lt; arr[mid]) &#123; right = mid-1; &#125; else // value &gt; arr[mid] &#123; left = mid+1; &#125; &#125; return -1; &#125; å¿«é€Ÿæ’åº 123456789101112131415161718192021222324252627public int[] quick_sort(int[] arr,int left,int right) &#123; if(right&lt;=left)&#123;return null;&#125; // é€‰æ‹©åŸºå‡†ï¼šæ•°ç»„æœ€å³æ•°å­— // *å¦‚æœé€‰æ‹©æœ€å·¦ï¼Œæ€è€ƒäº¤æ¢è¿‡ç¨‹ // *partition å·¦ä¾§å§‹ç»ˆæ˜¯æ¯”pivotå°çš„æ•° int pivot = arr[right]; int partition = left; // éå†åˆ†åŒºå…ƒç´  // å°äºåŸºå‡†çš„æ”¾åŸºå‡†å·¦è¾¹ï¼Œå¤§äºçš„æ”¾åŸºå‡†å³è¾¹ // * ç»ˆæ­¢æ¡ä»¶ï¼ši &lt; right è€Œé right-1ï¼ for(int i=left; i&lt; right;i++) &#123; if(arr[i]&lt;pivot) // å®é™…åªäº¤æ¢å°äºåˆ°å·¦è¾¹å³å¯ &#123; swap(arr,i,partition); partition++; &#125; &#125; // *åŸºå‡†æ’å…¥ä½ç½®partitionä½ç½® swap(arr,partition,right); //é€’å½’çš„æ’åº quick_sort(arr,left,partition-1); quick_sort(arr,partition+1,right); return arr; &#125; 6. å¸ƒéš†è¿‡æ»¤å™¨åŸç†ï¼Ÿä¸ºä»€ä¹ˆä½¿ç”¨å¤šä¸ªå“ˆå¸Œå‡½æ•°ï¼Ÿå…¶å®ƒç›¸å…³åº”ç”¨ï¼Ÿ å‚è€ƒï¼šè¯¦è§£å¸ƒéš†è¿‡æ»¤å™¨çš„åŸç†ï¼Œä½¿ç”¨åœºæ™¯å’Œæ³¨æ„äº‹é¡¹ â€œå¸ƒéš†è¯´ï¼šä¸å­˜åœ¨çš„é‚£ä¹ˆä¸€å®šä¸å­˜åœ¨â€ â€œå¸ƒéš†è¯´ï¼šå­˜åœ¨çš„é‚£ä¹ˆåªæ˜¯å¯èƒ½å­˜åœ¨â€ 7.1 ä»HashMapè¯´èµ·â€”å½“ä½ åˆ¤æ–­æŸä¸ªå…ƒç´ æ—¶å€™ä½ åœ¨æƒ³ä»€ä¹ˆï¼Ÿ é€šå¸¸æˆ‘ä»¬æ€ä¹ˆåˆ¤æ–­ä¸€ä¸ªæ•°ç»„ï¼Œæ˜¯å¦å­˜åœ¨æŸä¸ªå…ƒç´ å‘¢ï¼Ÿ èªæ˜çš„ä½ ä¸€å®šæƒ³åˆ°HashMapï¼šï¼ˆ1ï¼‰HashMapå°†æ•°ç»„æ‰€æœ‰å…ƒç´ ä½¿ç”¨å“ˆå¸Œå‡½æ•°ï¼Œæ˜ å°„åˆ°HashMapä¸Šï¼ˆHashMapæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªæ•°ç»„ï¼‰ï¼ˆ2ï¼‰ç„¶åå°±å¯ä»¥åœ¨O(1)çº§åˆ«åˆ¤æ–­æŸä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨ã€‚ ä½†æ˜¯è¿™ç§åšæ³•é€šå¸¸ä¼šå¯¼è‡´ä»¥ä¸‹é—®é¢˜ï¼š ä¸€æ—¦æ•°ç»„å¾ˆå¤§ï¼Œæ¯”å¦‚ä¸Šäº¿ï¼ŒHashMapå°†ä¼šå æ®éå¸¸å¤§çš„å†…å­˜ï¼› æ•°ç»„å¾ˆå¤§ï¼Œä¸å¤§å¯èƒ½ä¸€æ¬¡æ€§èƒ½åœ¨å†…å­˜æ„å»ºHashMapï¼› è€Œä¸”HashMapï¼Œé€šå¸¸å­˜åœ¨è´Ÿè½½å› å­ï¼Œæ˜¯ä¸èƒ½å……åˆ†åˆ©ç”¨å†…å­˜çš„ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä»¥ä¸‹æ–¹å‘ä¼˜åŒ–ï¼š åªå­˜å‚¨keyã€‚ä½†æ˜¯ï¼Œå› ä¸ºæˆ‘ä»¬åªè¦åˆ¤æ–­æŸä¸ªå…ƒç´ ï¼ˆkeyï¼‰æ˜¯å¦å­˜åœ¨ï¼Œ ä¸éœ€è¦å–å‡ºå¯¹åº”keyçš„valueâ€”ä¹Ÿå°±æ˜¯ä¸éœ€è¦å­˜å‚¨valueã€‚ keyæ˜ å°„ä¸ºbitæ•°ç»„ç´¢å¼•ã€‚keyæ˜ å°„ä¸ºbitæ•°ç»„ç´¢å¼•ï¼Œå³ä½å›¾å¯¹åº”ç´¢å¼•ï¼Œ ç´¢å¼•å¯¹åº”æ•°å€¼ç”¨ 0/1 å°±å¯ä»¥æ ‡è¯†ä¸ºæ˜¯å¦å­˜åœ¨è¯¥keyã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ã€ç¬¬ä¸€é˜¶æ®µä¼˜åŒ–ã€‘å¦‚ä¸‹ï¼š çœ‹æ ·å­ä¼¼ä¹æ˜¯æ»¡è¶³æˆ‘ä»¬è¦æ±‚äº†ï¼Œä½†æ˜¯ä¾æ—§å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š åªä½¿ç”¨ä¸€ä¸ªhashå‡½æ•°ï¼Œç©ºé—´åˆ©ç”¨ç‡ä½ã€‚ ä¸€ä¸ªhashå‡½æ•°åªèƒ½å°†keyæ•£åˆ—åˆ°ä¸€ä¸ªä½ç½® ï¼Œè™½ç„¶hashå°½é‡ä¼˜è‰¯æ˜ å°„å‡åŒ€ï¼Œä½†æ˜¯ç©ºé—´åˆ©ç”¨ç‡ä¾ç„¶ä¸ç®—é«˜ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¤šä¸ªå‡½æ•°ï¼Œå°†keyåŒæ—¶æ˜ å°„åˆ°å¤šä¸ªä½ç½®ï¼Œå³ä½¿å‘ç”Ÿå“ˆå¸Œå†²çªï¼ŒæŸä¸ªä½ç½®è¢«è¦†ç›–ï¼Œå…¶å®ƒä¾æ—§å­˜åœ¨ï¼Œå˜ç›¸çš„é™ä½äº†å“ˆå¸Œå†²çªã€‚ 7.2 æ•°æ®ç»“æ„åŠåŸç† å¸ƒéš†è¿‡æ»¤å™¨ï¼Œæœ€ç»ˆç»“æ„å¦‚ä¸‹ï¼šä¸€ä¸ªbitæ•°ç»„ï¼Œé‡‡ç”¨å¤šä¸ªhashå‡½æ•°è¿›è¡Œæ˜ å°„ã€‚ 7.3 å¸ƒéš†å‡½æ•°ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ å­˜å‚¨/æ’å…¥/æŸ¥è¯¢æ—¶é—´å¤æ‚åº¦ï¼Œéƒ½æ˜¯å¸¸æ•°çº§åˆ«O(1) ä¿å¯†æ€§å¥½ï¼Œå› ä¸ºä¸éœ€è¦å­˜å‚¨æ•°æ®æœ¬èº« å­˜å‚¨æ•°æ®å¤§ï¼Œå¯ä»¥å­˜å‚¨éå¸¸å¤§çš„æ•°æ®æœ¬èº« ç¼ºç‚¹ éšç€å…ƒç´ æ•°é‡å¢åŠ ï¼Œè¯¯ç®—ç‡ä¼šå¢åŠ  ä¸èƒ½åˆ é™¤å…ƒç´ ï¼Œå› ä¸ºåˆ é™¤æŸä¸ªå…ƒç´ ï¼Œè¦æŠŠå…¶å¯¹åº”æ‰€æœ‰hashå‡½æ•°æ•£åˆ—çš„ä½ç½®å¦‚A,Bï¼Œç½®ä¸º0 ã€‚å…¶å®ƒå…ƒç´ çš„å¯èƒ½æ•£åˆ—åˆ°ä½ç½®Aï¼Œå†å»åˆ¤æ–­è¿™ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨å°±ä¼šå‡ºç°è¯¯åˆ¤ã€‚ 7.4 åº”ç”¨åœºæ™¯ è§£å†³ç¼“å­˜ç©¿é€ï¼Œé˜²æ­¢ä¸å­˜åœ¨çš„å…ƒç´ å»æŸ¥è¯¢æ•°æ®åº“ é˜²æ­¢é‡å¤è¢«æ”»å‡»ï¼Œç”¨æˆ·ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼Œå°†è¯·æ±‚å‚æ•°æ”¾å…¥å¸ƒéš†è¿‡æ»¤å™¨ä¸­ï¼Œå½“ç¬¬äºŒæ¬¡è¯·æ±‚æ—¶ï¼Œå…ˆåˆ¤æ–­è¯·æ±‚å‚æ•°æ˜¯å¦è¢«å¸ƒéš†è¿‡æ»¤å™¨å‘½ä¸­ã€‚å¯ä»¥æé«˜ç¼“å­˜å‘½ä¸­ç‡ åˆ¤æ–­ç”¨æˆ·æ˜¯å¦é˜…è¯»è¿‡æŸè§†é¢‘æˆ–æ–‡ç« ï¼Œ æ¯”å¦‚æŠ–éŸ³æˆ–å¤´æ¡ï¼Œå½“ç„¶ä¼šå¯¼è‡´ä¸€å®šçš„è¯¯åˆ¤ï¼Œä½†ä¸ä¼šè®©ç”¨æˆ·çœ‹åˆ°é‡å¤çš„å†…å®¹ã€‚","categories":[{"name":"æ ¡æ‹›ç¬”è®°","slug":"æ ¡æ‹›ç¬”è®°","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/"},{"name":"è®¡ç®—æœºåŸºç¡€","slug":"æ ¡æ‹›ç¬”è®°/è®¡ç®—æœºåŸºç¡€","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"æ ¡æ‹›","slug":"æ ¡æ‹›","permalink":"https://hwh.zone/tags/%E6%A0%A1%E6%8B%9B/"},{"name":"è®¡ç®—æœºåŸºç¡€","slug":"è®¡ç®—æœºåŸºç¡€","permalink":"https://hwh.zone/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://hwh.zone/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}]},{"title":"æ ¡æ‹›ç¬”è®°ï¼ˆå…­ï¼‰_è®¡ç®—æœºåŸºç¡€_Redis","slug":"æ ¡æ‹›ç¬”è®°ï¼ˆå…­ï¼‰_è®¡ç®—æœºåŸºç¡€_Redis","date":"2021-11-26T13:16:21.848Z","updated":"2021-12-03T03:55:32.600Z","comments":true,"path":"p/31215/","link":"","permalink":"https://hwh.zone/p/31215/","excerpt":"","text":"æˆ‘çš„æ ¡æ‹›è®°å½•ï¼šæ ¡æ‹›ç¬”è®°ï¼ˆé›¶ï¼‰_å†™åœ¨å‰é¢ ï¼Œä»¥ä¸‹æ˜¯æ ¡æ‹›ç¬”è®°æ€»ç›®å½•ã€‚ å¤‡æ³¨ ç®—æ³•èƒ½åŠ›ï¼ˆâ€œåˆ·é¢˜â€ï¼‰ è¿™éƒ¨åˆ†å°±æ˜¯è€—æ—¶é—´å¤šç»ƒä¹ ï¼ŒLeetcode-Top100 æ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚ è¡¥å……ç»ƒä¹ ï¼šcodeTop è®¡ç®—æœºåŸºç¡€(ä¸Š)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_Javaå…¥é—¨ C++åç«¯åç»­æ›´æ–° æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é¢å¯¹å¯¹è±¡ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é›†åˆ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_å¤šçº¿ç¨‹ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é” æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_JVM è®¡ç®—æœºåŸºç¡€(ä¸‹)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆäºŒï¼‰__è®¡ç®—æœºåŸºç¡€_Linux&amp;Git æ ¡æ‹›ç¬”è®°ï¼ˆä¸‰ï¼‰__è®¡ç®—æœºåŸºç¡€_è®¡ç®—æœºç½‘ç»œ æ ¡æ‹›ç¬”è®°ï¼ˆå››ï¼‰__è®¡ç®—æœºåŸºç¡€_æ“ä½œç³»ç»Ÿ æ ¡æ‹›ç¬”è®°ï¼ˆäº”ï¼‰__è®¡ç®—æœºåŸºç¡€_MySQL æ ¡æ‹›ç¬”è®°ï¼ˆå…­ï¼‰__è®¡ç®—æœºåŸºç¡€_Redis æ ¡æ‹›ç¬”è®°ï¼ˆä¸ƒï¼‰__è®¡ç®—æœºåŸºç¡€_æ•°æ®ç»“æ„ æ ¡æ‹›ç¬”è®°ï¼ˆå…«ï¼‰__è®¡ç®—æœºåŸºç¡€_åœºæ™¯&amp;æ™ºåŠ›é¢˜ æ ¡æ‹›ç¬”è®°ï¼ˆä¹ï¼‰__è®¡ç®—æœºåŸºç¡€_ç›¸å…³è¡¥å…… é¡¹ç›®&amp;å®ä¹  ä¸»è¦æ˜¯æ€ä¹ˆå‡†å¤‡é¡¹ç›®ï¼Œåç»­æ›´æ–° å…­ã€Redis 6.1 RedisåŸºæœ¬ 1.ä»€ä¹ˆæ˜¯ Redisï¼Ÿ Redis æ˜¯ä¸€ä¸ªå¼€æºï¼ˆBSD è®¸å¯ï¼‰ã€åŸºäºå†…å­˜ï¼ˆè¯»å†™å¿«ï¼‰ã€æ”¯æŒå¤šç§æ•°æ®ç»“æ„çš„å­˜å‚¨ç³»ç»Ÿï¼Œå¯ä»¥ä½œä¸ºæ•°æ®åº“ã€ç¼“å­˜å’Œæ¶ˆæ¯ä¸­é—´ä»¶ã€‚ æ”¯æŒçš„æ•°æ®ç»“æ„æœ‰5ç§ï¼šå­—ç¬¦ä¸²ï¼ˆStringï¼‰ã€å“ˆå¸Œï¼ˆhashï¼‰ã€åˆ—è¡¨ï¼ˆlistï¼‰ã€é›†åˆï¼ˆsetï¼‰ã€æœ‰åºé›†åˆï¼ˆsorted setï¼‰ã€‚ 1.1 æœ‰MySQLä¸å°±å¤Ÿç”¨äº†å—ï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨Redisè¿™ç§æ–°çš„æ•°æ®åº“ï¼Ÿ ä¸»è¦æ˜¯å› ä¸º Redis å…·å¤‡é«˜æ€§èƒ½å’Œé«˜å¹¶å‘ä¸¤ç§ç‰¹æ€§ã€‚ é«˜æ€§èƒ½ï¼šé™¤äº†ç¬¬ä¸€æ¬¡è¯»å–ç¡¬ç›˜æ¯”è¾ƒæ…¢ï¼Œåé¢åŠ è½½åˆ°ç¼“å­˜ï¼Œè¯»å–é€Ÿåº¦éƒ½ç›¸å…³å¿«ï¼Œæ€§èƒ½é«˜ï¼› é«˜å¹¶å‘ï¼šç›´æ¥æ“ä½œç¼“å­˜èƒ½å¤Ÿæ‰¿å—çš„å¹¶å‘è¯·æ±‚æ˜¯è¿œè¿œå¤§äºç›´æ¥è®¿é—®æ•°æ®åº“çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è€ƒè™‘æŠŠæ•°æ®åº“ä¸­çš„éƒ¨åˆ†çƒ­ç‚¹æ•°æ®è½¬ç§»åˆ°ç¼“å­˜ä¸­å»ï¼Œè¿™æ ·ç”¨æˆ·çš„ä¸€éƒ¨åˆ†è¯·æ±‚ä¼šç›´æ¥åˆ°ç¼“å­˜è¿™é‡Œè€Œä¸ç”¨ç»è¿‡æ•°æ®åº“ã€‚ 1.2 C++ / JAVA ä¸­çš„Mapä¹Ÿæ˜¯ä¸€ç§ç¼“å­˜å‹æ•°æ®ç»“æ„ï¼Œä¸ºä»€ä¹ˆä¸ç”¨Mapï¼Œè€Œé€‰æ‹©Redisåšç¼“å­˜ï¼Ÿ ç¼“å­˜åˆ†ä¸ºæœ¬åœ°ç¼“å­˜å’Œåˆ†å¸ƒå¼ç¼“å­˜ ã€‚ æœ¬åœ°ç¼“å­˜ä¸å…·ä¸€è‡´æ€§ã€‚ä»¥Javaä¸ºä¾‹ ï¼Œä½¿ç”¨è‡ªå¸¦çš„mapæˆ–è€…guavaå®ç°çš„æ˜¯æœ¬åœ°ç¼“å­˜ï¼Œæœ€ä¸»è¦çš„ç‰¹ç‚¹æ˜¯è½»é‡ä»¥åŠå¿«é€Ÿï¼Œç”Ÿå‘½å‘¨æœŸéšç€jvmçš„é”€æ¯è€Œç»“æŸï¼Œå¹¶ä¸”åœ¨å¤šå®ä¾‹çš„æƒ…å†µä¸‹ï¼Œæ¯ä¸ªå®ä¾‹éƒ½éœ€è¦å„è‡ªä¿å­˜ä¸€ä»½ç¼“å­˜ï¼Œç¼“å­˜ä¸å…·æœ‰ä¸€è‡´æ€§ï¼› Redisåˆ†å¸ƒå¼ç¼“å­˜å…·æœ‰ä¸€è‡´æ€§ã€‚ ä½¿ç”¨redisæˆ–memcachedä¹‹ç±»çš„ç§°ä¸ºåˆ†å¸ƒå¼ç¼“å­˜ï¼Œåœ¨å¤šå®ä¾‹çš„æƒ…å†µä¸‹ï¼Œå„å®ä¾‹å…±ç”¨ä¸€ä»½ç¼“å­˜æ•°æ®ï¼Œç¼“å­˜å…·æœ‰ä¸€è‡´æ€§ï¼› Rediså¯ä»¥ä½¿ç”¨æ›´å¤§å†…å­˜ä½œä¸ºç¼“å­˜ã€‚ Rediså¯ä»¥ä½¿ç”¨å‡ åGå†…å­˜ä½œä¸ºç¼“å­˜ï¼ŒMapä¸è¡Œï¼Œæ¯”å¦‚JVMæœ€å¤šä½¿ç”¨å‡ ä¸ªG ï¼› Rediså¯ä»¥æŒä¹…åŒ–ã€‚ Rediså¯ä»¥å®ç°æŒä¹…åŒ–ï¼Œè€ŒMapæ˜¯å†…å­˜å¯¹è±¡ï¼Œç¨‹åºé‡å¯å°±æ²¡äº†ï¼› Rediså¯ä»¥å¤„ç†ç™¾ä¸‡çº§åˆ«å¹¶å‘ï¼› Redisæœ‰ä¸°å¯Œçš„API &amp; ç¼“å­˜è¿‡æœŸç­‰æœºåˆ¶ã€‚ 2. ã€é‡ç‚¹ã€‘redisçš„æ•°æ®ç±»å‹ï¼Œä»¥åŠæ¯ç§æ•°æ®ç±»å‹çš„ä½¿ç”¨åœºæ™¯ï¼Ÿ æ•°æ®ç±»å‹ ä½¿ç”¨åœºæ™¯ String å­˜å‚¨key-valueé”®å€¼å¯¹ï¼Œæ³¨æ„redisä¸­Stringå¯ä¿®æ”¹ã€‚ç»Ÿè®¡åœ¨çº¿äººæ•°ï¼›ä¹Ÿå¯ä»¥å­˜å‚¨è§†é¢‘ã€å›¾ç‰‡ç­‰ hash è´­ç‰©è½¦ï¼šhset [key] [field] [value] å‘½ä»¤ï¼Œ å­˜æ”¾é”®å€¼å¯¹ï¼Œä¸€èˆ¬å¯ä»¥ç”¨æ¥å­˜æŸä¸ªå¯¹è±¡çš„åŸºæœ¬å±æ€§ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼Œç”¨æˆ·ä¿¡æ¯ï¼Œå•†å“ä¿¡æ¯ç­‰ set å…¨å±€å»é‡ï¼ŒJVMè‡ªå¸¦çš„setä¸é€‚åˆåˆ†å¸ƒå¼é›†ç¾¤æƒ…å†µ zset æ’è¡Œæ¦œï¼Œæ¯”å¦‚å¾®ä¿¡è¿åŠ¨æ’è¡Œæ¦œ list åˆ†é¡µåŠŸèƒ½ï¼ŒlrangeåšåŸºäºredisçš„åˆ†é¡µåŠŸèƒ½ï¼Œæ€§èƒ½å¾ˆå¥½ï¼›æ¨¡ä»¿ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ— 3.è¯´ä¸€ä¸‹ Redisæœ‰ä»€ä¹ˆä¼˜ç‚¹å’Œç¼ºç‚¹ ï¼Ÿ ä¼˜ç‚¹ ç¼ºç‚¹ é€Ÿåº¦å¿«ï¼šå› ä¸ºåœ¨å†…å­˜ä¸­ å­˜å‚¨æœ‰é™ï¼šå› ä¸ºRedisæ˜¯å†…å­˜æ•°æ®åº“ï¼Œå¤§å°å’Œæœºå™¨æœ¬èº«å†…å­˜æœ‰å…³ æ”¯æŒå¤šç§æ•°æ®ç»“æ„ï¼š Stringï¼ŒListï¼ŒSetï¼ŒHashï¼ŒSorted Setç­‰ å®Œæˆé‡åŒæ­¥è€—è´¹CPUèµ„æºå’Œå¸¦å®½ æŒä¹…åŒ–å­˜å‚¨ï¼šRDBå’ŒAOF å½“Redisé‡å¯åé€šè¿‡æŠŠç¡¬ç›˜æ–‡ä»¶é‡æ–°åŠ è½½åˆ°å†…å­˜ï¼Œé€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œè¿™ä¸ªæ—¶å€™redisåšä¸äº†å…¶å®ƒäº‹ã€‚ é«˜å¯ç”¨ï¼šå†…ç½® Redis Sentinel ï¼ˆå“¨å…µï¼‰ï¼Œå®ç°ä¸»ä»æ•…éšœè‡ªåŠ¨è½¬ç§»ã€‚ å†…ç½® Redis Cluster ï¼Œæä¾›é›†ç¾¤æ–¹æ¡ˆã€‚ ä¸°å¯Œç‰¹æ€§ï¼šKeyè¿‡æœŸã€è®¡æ•°ã€åˆ†å¸ƒå¼é” 4. Redisçš„æ•°æ®ç»“æ„ï¼Ÿkeyæ˜¯æ€ä¹ˆå­˜å‚¨çš„ï¼Ÿ å‚è€ƒï¼šã€å¤§è¯¾å ‚ã€‘Redisåº•å±‚æ•°æ®å­˜å‚¨åŸç† æ¦‚è¿° Redisåº•å±‚é‡‡ç”¨æ•°ç»„ï¼Œ keyå°±æ˜¯å¯¹åº”æ•°ç»„çš„ç´¢å¼• ï¼Œé‡‡ç”¨Hash(key)æ˜ å°„åˆ°æ•°ç»„ä¸Šã€‚è§£å†³å†²çªé‡‡ç”¨é“¾åœ°å€æ³•ã€‚ å…·ä½“å¯çœ‹å‚è€ƒä¸‹æ–‡ã€‚ åº•å±‚å­˜å‚¨åŸç† redis ä¸­ä»¥redisDbä½œä¸ºæ•´ä¸ªç¼“å­˜å­˜å‚¨çš„æ ¸å¿ƒï¼Œä¿å­˜ç€æˆ‘ä»¬å®¢æˆ·ç«¯éœ€è¦çš„ç¼“å­˜æ•°æ®ã€‚ å…¶ç»“æ„å¦‚ä¸‹ï¼š 123456789typedef struct redisDb &#123; dict *dict; // æœ€é‡è¦--å­—å…¸ç±»å‹ï¼Œä¿å­˜æ•°æ®åº“çš„é”®å€¼å¯¹ dict *expires; // é‡è¦--å­—å…¸ç±»å‹ï¼Œä¿å­˜è¿‡æœŸçš„æ—¶é—´ dict *blocking_keys; // å’Œready_key å®ç°BLPOPç­‰é˜»å¡å‘½ä»¤ dict *ready_keys; // åŒä¸Š dict *watched_keys; // å®ç°watchå‘½ä»¤ï¼Œè®°å½•æ­£åœ¨è¢«watchçš„key int id; // æ•°æ®åº“idï¼Œé»˜è®¤16ä¸ªï¼Œæ”¯æŒå•ä¸ª long long avg_ttl; /* Average TTL, just for stats */ &#125; redisDb; ç°åœ¨æˆ‘ä»¬æ¥æŸ¥çœ‹ï¼Œdict çš„ç»“æ„ã€‚ dictçš„ç»“æ„ 12345678910/* å­—å…¸ : æ¯ä¸ªå­—å…¸ä½¿ç”¨ä¸¤ä¸ªå“ˆå¸Œè¡¨ï¼Œç”¨äºå®ç°æ¸è¿›å¼ rehash */typedef struct dict &#123; // typeå­˜å‚¨äº†hashå‡½æ•°ï¼Œkeyå’Œvalueçš„å¤åˆ¶å‡½æ•°ç­‰ï¼Œæ¯”è¾ƒä»¥åŠé”€æ¯å‡½æ•° dictType *type; // privdataä¿å­˜ä¸€äº›ç§æœ‰æ•°æ®ï¼Œå†³å®šäº†*typeä¿å­˜çš„å‡½æ•°ï¼Œå®ç°äº†ã€å¤šæ€ã€‘ void *privdata; dictht ht[2]; // å“ˆå¸Œè¡¨ï¼ˆ2 ä¸ªï¼‰, æ­£å¸¸ä½¿ç”¨ht[0],rehashå°±ä¼šæ‰©å®¹ä½¿ç”¨ht[1] int rehashidx; // è®°å½• rehash è¿›åº¦çš„æ ‡å¿—ï¼Œå€¼ä¸º -1 è¡¨ç¤º rehash æœªè¿› int iterators; // å½“å‰æ­£åœ¨è¿ä½œçš„å®‰å…¨è¿­ä»£å™¨æ•°é‡&#125; dict; ä¸Šè¿°dicthtå°±æ˜¯ä¸ªhashè¡¨ï¼ŒåŒ…å«ï¼š 12345678910typedef struct dictht &#123; // å“ˆå¸Œè¡¨èŠ‚ç‚¹æŒ‡é’ˆæ•°ç»„ï¼ˆä¿—ç§°æ¡¶ï¼Œbucketï¼‰ dictEntry **table; // æŒ‡é’ˆæ•°ç»„çš„å¤§å° unsigned long size; // æŒ‡é’ˆæ•°ç»„çš„é•¿åº¦æ©ç ï¼Œç”¨äºè®¡ç®—ç´¢å¼•å€¼ï¼Œå…¶å®æ°¸è¿œéƒ½æ˜¯size-1 unsigned long sizemask; // å“ˆå¸Œè¡¨ç°æœ‰çš„èŠ‚ç‚¹æ•°é‡ unsigned long used;&#125; dictht; dictEntry æŒ‡é’ˆæ•°ç»„ï¼ˆtableï¼‰ã€‚key çš„å“ˆå¸Œå€¼æœ€ç»ˆæ˜ å°„åˆ°è¿™ä¸ªæ•°ç»„çš„æŸä¸ªä½ç½®ä¸Šï¼ˆå¯¹åº”ä¸€ä¸ª bucketï¼‰ã€‚å¦‚æœå¤šä¸ª key æ˜ å°„åˆ°åŒä¸€ä¸ªä½ç½®ï¼Œå°±å‘ç”Ÿäº†å†²çªï¼Œé‚£ä¹ˆå°±æ‹‰å‡ºä¸€ä¸ª dictEntry é“¾è¡¨ã€‚ 12345678910// å“ˆå¸Œè¡¨èŠ‚ç‚¹dictEntrytypedef struct dictEntry &#123; void *key; // redisçš„é”® union &#123; void *val; // å­˜å‚¨äº†å¯¹åº”string/set/list/hash/zsetçš„æ•°æ® uint64_t u64; int64_t s64; &#125; v; struct dictEntry *next; //é“¾è¡¨åç»­èŠ‚ç‚¹&#125;dictEntry; sizeï¼šæ ‡è¯† dictEntry æŒ‡é’ˆæ•°ç»„çš„é•¿åº¦ã€‚å®ƒæ€»æ˜¯ 2 çš„æŒ‡æ•°æ¬¡å¹‚ã€‚ ä¸Šé¢dictEntry çš„value æœ€ç»ˆæŒ‡å‘äº†redisObjectå¯¹è±¡ï¼Œæˆ‘ä»¬æ¥è§‚å¯Ÿä¸‹å…¶ç»“æ„ã€‚ Redis Object 1234567typedef struct redisObject &#123; unsigned type:4; // ç±»å‹ ï¼Œæ¯”å¦‚stringï¼Œsetç­‰ï¼Œæ‰èƒ½ç¡®å®šæ˜¯å“ªç§æ•°æ®ç»“æ„ä½¿ç”¨ä»€ä¹ˆAPIæ“ä½œ unsigned encoding:4; // encoding è¡¨ç¤º ptr æŒ‡å‘çš„å…·ä½“æ•°æ®ç»“æ„,è¿™ä¸ªå¯¹è±¡ä½¿ç”¨ä»€ä¹ˆæ•°æ®ç»“æ„å®ç° unsigned lru:REDIS_LRU_BITS; // å¯¹è±¡æœ€åä¸€æ¬¡è¢«è®¿é—®çš„æ—¶ int refcount; // å¼•ç”¨è®¡æ•° void *ptr; // æŒ‡å‘åº•å±‚æ•°æ®ç»“æ„çš„æŒ‡é’ˆ robj; 4.1 Stringã€listã€hashã€setã€zsetçš„åº•å±‚ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ å‚è€ƒï¼šå›¾è§£redisäº”ç§æ•°æ®ç»“æ„åº•å±‚å®ç°(åŠ¨å›¾å“¦) ç‰ˆæœ¬ï¼šredis 3.0.6ä¸­ç‰ˆæœ¬å„ç§æ•°æ®ç»“æ„çš„å®ç° String embstrå’Œrawéƒ½æ˜¯ç”±SDSåŠ¨æ€å­—ç¬¦ä¸²æ„æˆçš„ ï¼Œåº•å±‚ç»“æ„åº”è¯¥éƒ½æ˜¯charæ•°ç»„å§ ï¼› int ï¼Œå°±æ˜¯æŒ‡intç±»å‹ã€‚ list hash set intsetæ˜¯é›†åˆé”®çš„åº•å±‚å®ç°æ–¹å¼ä¹‹ä¸€ï¼Œæ˜¯intç±»å‹æ•°ç»„ã€‚ zest 4.2 è®²è®²redisçš„hashè¡¨æ‰©å®¹æ–¹å¼ï¼Ÿ å‚è€ƒï¼š[rediså­¦ä¹ ç¬”è®°]redisæ¸è¿›å¼rehashæœºåˆ¶ æ‰©å®¹æ¡ä»¶ æœåŠ¡å™¨ç›®å‰æ²¡æœ‰åœ¨æ‰§è¡Œ BGSAVE å‘½ä»¤æˆ–è€… BGREWRITEAOF å‘½ä»¤ï¼Œ å¹¶ä¸”å“ˆå¸Œè¡¨çš„è´Ÿè½½å› å­å¤§äºç­‰äº 1 ï¼ˆä¿å­˜çš„keyè¶…è¿‡å“ˆå¸Œè¡¨å¤§å°ï¼‰ï¼› æœåŠ¡å™¨ç›®å‰æ­£åœ¨æ‰§è¡Œ BGSAVE å‘½ä»¤æˆ–è€… BGREWRITEAOF å‘½ä»¤ï¼Œ å¹¶ä¸”å“ˆå¸Œè¡¨çš„è´Ÿè½½å› å­å¤§äºç­‰äº 5 ï¼› æ¸è¿›å¼rehash æ–°å»ºä¸€ä¸ªå“ˆå¸Œè¡¨å¤§å°ï¼Œä¸º2^N æ¬¡æ–¹ï¼Œå¹¶åˆ†é…å†…å­˜ï¼Œæ­¤æ—¶å­—å…¸åŒæ—¶æŒæœ‰ï¼šht[0] å’Œ ht[1] ä¸¤ä¸ªå“ˆå¸Œè¡¨ åŒhashmapï¼šå“ˆå¸Œè¡¨æ©ç sizemaskä¸ºsize-1ï¼Œå½“sizeæ»¡è¶³2çš„næ¬¡æ–¹æ—¶ï¼Œè®¡ç®—æ¯ä¸ªkeyçš„ç´¢å¼•å€¼æ—¶åªéœ€è¦ç”¨keyçš„hashå€¼ä¸æ©ç sizemaskè¿›è¡Œä½ä¸æ“ä½œï¼Œæ›¿ä»£æ±‚ä½™æ“ä½œï¼Œè®¡ç®—æ›´å¿«ã€‚ å“ˆå¸Œè¡¨èµ‹å€¼ç»™å­—å…¸çš„ht[1]ï¼Œç„¶åå°†rehashidxèµ‹å€¼ä¸º0ï¼Œè¡¨ç¤ºrehashå·¥ä½œå¼€å§‹ rehashidxä¹Ÿæ ‡è¯†äº†ï¼Œå½“å‰rehashè¿›è¡Œåˆ°äº†å“ªä¸ªæ§½ åœ¨ rehash è¿›è¡ŒæœŸé—´ï¼Œï¼šæ¯æ¬¡å¯¹å­—å…¸æ‰§è¡Œæ·»åŠ ã€åˆ é™¤ã€æŸ¥æ‰¾æˆ–è€…æ›´æ–°æ“ä½œæ—¶ï¼Œ ç¨‹åºé™¤äº†æ‰§è¡ŒæŒ‡å®šçš„æ“ä½œä»¥å¤–ï¼Œ è¿˜ä¼šé¡ºå¸¦å°† ht[0] å“ˆå¸Œè¡¨åœ¨ rehashidx ç´¢å¼•ä¸Šçš„æ‰€æœ‰é”®å€¼å¯¹ rehash åˆ° ht[1] ã€‚ å½“ rehash å·¥ä½œå®Œæˆä¹‹åï¼Œ ç¨‹åºå°† rehashidx å±æ€§çš„å€¼**+1** éšç€å­—å…¸æ“ä½œçš„ä¸æ–­æ‰§è¡Œï¼Œ æœ€ç»ˆåœ¨æŸä¸ªæ—¶é—´ç‚¹ä¸Šï¼Œ ht[0] çš„æ‰€æœ‰é”®å€¼å¯¹éƒ½ä¼šè¢« rehash è‡³ ht[1] ã€‚æ­¤æ—¶rehashidx=-1ï¼Œè¡¨ç¤ºrehashå®Œæˆã€‚ é‡‡å–åˆ†è€Œæ²»ä¹‹çš„æ–¹å¼ï¼Œ å°† rehash é”®å€¼å¯¹æ‰€éœ€çš„è®¡ç®—å·¥ä½œå‡æ‘Šåˆ°å¯¹å­—å…¸çš„æ¯ä¸ªæ·»åŠ ã€åˆ é™¤ã€æŸ¥æ‰¾å’Œæ›´æ–°æ“ä½œä¸Šï¼Œ ä»è€Œé¿å…äº†é›†ä¸­å¼ rehash è€Œå¸¦æ¥çš„åºå¤§è®¡ç®—é‡ã€‚ æ¸è¿›å¼rehasä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼šé¿å…redisé˜»å¡ ç¼ºç‚¹ï¼šrehashéœ€è¦åˆ†é…ä¸€ä¸ªæ–°çš„hashè¡¨ï¼Œä¼šä½¿å¾—å†…å­˜çˆ†å¢ï¼Œä½¿å¾—å¤§é‡keyè¢«é©±é€ 4.3 rehashè¿‡ç¨‹ä¸­å¢åˆ æŸ¥æ”¹æ€ä¹ˆæ“ä½œå‘¢ï¼Ÿ å¢åŠ ï¼š æ–°æ·»åŠ åˆ°å­—å…¸çš„é”®å€¼å¯¹ä¸€å¾‹ä¼šè¢«ä¿å­˜åˆ° ht[1] é‡Œé¢ï¼Œ è€Œ ht[0] åˆ™ä¸å†è¿›è¡Œä»»ä½•æ·»åŠ æ“ä½œ åˆ é™¤ï¼ˆdeleteï¼‰ã€æŸ¥æ‰¾ï¼ˆfindï¼‰ã€æ›´æ–°ï¼ˆupdateï¼‰ç­‰ï¼š åŒæ—¶åœ¨ht[0] &amp; ht[1]ä¸¤ä¸ªè¡¨è¿›è¡Œã€‚ æ¯”å¦‚ï¼šè¦åœ¨å­—å…¸é‡Œé¢æŸ¥æ‰¾ä¸€ä¸ªé”®çš„è¯ï¼Œ ç¨‹åºä¼šå…ˆåœ¨ ht[0] é‡Œé¢è¿›è¡ŒæŸ¥æ‰¾ï¼Œ å¦‚æœæ²¡æ‰¾åˆ°çš„è¯ï¼Œ å°±ä¼šç»§ç»­åˆ° ht[1] é‡Œé¢è¿›è¡ŒæŸ¥æ‰¾ã€‚ 5. è¯´è¯´Redisæœ‰åºé›†åˆzsetçš„åº•å±‚ç»“æ„ï¼Ÿ zsetåº•å±‚çš„å­˜å‚¨ç»“æ„åŒ…æ‹¬ziplistæˆ– skiplist &amp; dic ï¼Œå½“æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶çš„æ—¶å€™ä½¿ç”¨ziplistï¼š æœ‰åºé›†åˆä¿å­˜çš„å…ƒç´ æ•°é‡å°äº128ä¸ª æœ‰åºé›†åˆä¿å­˜çš„æ‰€æœ‰å…ƒç´ çš„é•¿åº¦å°äº64å­—èŠ‚ å…¶ä½™æƒ…å†µç”¨skiplistã€‚ ä»€ä¹ˆæ˜¯ziplistï¼Ÿ ziplistæ˜¯ä¸€ä¸ªç»è¿‡ç‰¹æ®Šç¼–ç çš„åŒå‘é“¾è¡¨ï¼Œä»¥O(1)çš„æ—¶é—´å¤æ‚åº¦åœ¨è¡¨çš„ä¸¤ç«¯æä¾›pushå’Œpopæ“ä½œã€‚ ziplistå°†è¡¨ä¸­æ¯ä¸€é¡¹å­˜æ”¾åœ¨å‰åè¿ç»­çš„åœ°å€ç©ºé—´å†…ï¼Œä¸€ä¸ªziplistæ•´ä½“å ç”¨ä¸€å¤§å—å†…å­˜ã€‚ ä½¿ç”¨åŸå› ï¼šä¸€ä¸ªæ™®é€šçš„åŒå‘é“¾è¡¨ï¼Œé“¾è¡¨ä¸­æ¯ä¸€é¡¹éƒ½å ç”¨ç‹¬ç«‹çš„ä¸€å—å†…å­˜ï¼Œå„é¡¹ä¹‹é—´ç”¨åœ°å€æŒ‡é’ˆï¼ˆæˆ–å¼•ç”¨ï¼‰è¿æ¥èµ·æ¥ï¼›è¿™ç§æ–¹å¼ä¼šå¸¦æ¥å¤§é‡çš„å†…å­˜ç¢ç‰‡ï¼Œè€Œä¸”åœ°å€æŒ‡é’ˆä¹Ÿä¼šå ç”¨é¢å¤–çš„å†…å­˜ã€‚ å…·ä½“ç»“æ„ entryï¼šè¡¨ç¤ºçœŸæ­£å­˜æ”¾æ•°æ®çš„æ•°æ®é¡¹ï¼Œé•¿åº¦ä¸å®šã€‚ä¸€ä¸ªæ•°æ®é¡¹ï¼ˆentryï¼‰ä¹Ÿæœ‰å®ƒè‡ªå·±çš„å†…éƒ¨ç»“æ„ã€‚ ä»€ä¹ˆæ˜¯skiplist ? è·³è¡¨æ˜¯åœ¨å•é“¾è¡¨ä¸Šå®ç°å¤šçº§ç´¢å¼•ï¼Œå¯ä»¥å®ç° äºŒåˆ†æŸ¥æ‰¾ çš„æœ‰åºé“¾è¡¨ã€‚ è·³è¡¨æ’å…¥ã€åˆ é™¤ã€æŸ¥æ‰¾å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦è·Ÿçº¢é»‘æ ‘éƒ½æ˜¯ä¸€æ ·é‡çº§çš„ï¼Œæ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(logn)ã€‚ ä¸»è¦å½¢å¼ åœ¨å•é“¾è¡¨ä¸Šè¿›è¡Œå¤šçº§ç´¢å¼•ã€‚ æ„å»ºè¿‡ç¨‹ ä¸Šé¢é“¾è¡¨æ˜¯å¦‚ä½•æ„å»ºçš„å‘¢ï¼Œè¯·è§ä¸‹å›¾ã€‚ âš ï¸ skiplistä¸ºäº†é¿å…ä¸Šä¸‹ä¸¤å±‚å‡ºç°ä¸¥æ ¼1:2æ•°é‡å¯¹åº”å…³ç³»åï¼Œæ–°æ’å…¥èŠ‚ç‚¹ä¼šæ‰“ä¹±è¿™ç§å…³ç³»ï¼Œè€Œéœ€è¦æŠŠæ–°æ’å…¥èŠ‚ç‚¹åæ‰€ä»¥èŠ‚ç‚¹éƒ½è¿›è¡Œè°ƒæ•´ã€‚ å®ƒä¸è¦æ±‚ä¸Šä¸‹ç›¸é‚»ä¸¤å±‚é“¾è¡¨ä¹‹é—´çš„èŠ‚ç‚¹ä¸ªæ•°æœ‰ä¸¥æ ¼çš„å¯¹åº”å…³ç³»ï¼Œè€Œæ˜¯ä¸ºæ¯ä¸ªèŠ‚ç‚¹éšæœºå‡ºä¸€ä¸ªå±‚æ•°(level)ã€‚ æŸ¥æ‰¾è¿‡ç¨‹ zset : &lt;key&gt; &lt;score&gt; &lt;member&gt; åœ¨ä¸Šå›¾ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰åŒºåˆ†memberå’Œscoreï¼Œä½†æ˜¯å®é™…ä¸Šé“¾è¡¨æ˜¯æŒ‰scoreè¿›è¡Œæ’åºï¼ŒæŸ¥æ‰¾ä¹Ÿæ˜¯åœ¨æ¯”è¾ƒscoreã€‚ ä»¥æŸ¥æ‰¾ å’Œ æ’å…¥23ä¸ºä¾‹ã€‚ ä»æœ€é«˜å±‚ï¼ˆç¬¬4ï¼‰å±‚å¼€å§‹æŸ¥æ‰¾ï¼Œå› ä¸º7&lt;23 ,æœ¬åº”è¯¥ç»§ç»­å¾€åæŸ¥æ‰¾ï¼Œä½†æ˜¯åç»§èŠ‚ç‚¹ä¸ºnullï¼Œæ‰€ä»¥å¾€ä¸‹ä¸€å±‚è¿›è¡ŒæŸ¥æ‰¾ æ­¤æ—¶ç¬¬3å±‚ï¼Œæ»¡è¶³7&lt;23&lt;37 ï¼Œç»§ç»­å¾€ä¸‹ä¸€å±‚ç»§ç»­æŸ¥æ‰¾ æ­¤æ—¶ç¬¬2å±‚ï¼Œ7&lt;23 &amp; 19&lt;23 ï¼Œå¾€ä¸‹ç¬¬äºŒå±‚çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆ19ï¼‰æŸ¥æ‰¾ï¼›æ­¤æ—¶æ»¡è¶³19&lt;23&lt;37 ï¼Œç»§ç»­å¾€ä¸‹ä¸€å±‚ æ­¤æ—¶ç¬¬1å±‚ï¼Œä¸€ç›´å¾€åéå†åˆ°22ï¼Œå‘ç°22&lt;23&lt;26 ï¼š å¦‚æœæ­¤æ—¶æ˜¯æŸ¥è¯¢23ï¼šè¿”å›nullï¼Œä¸å­˜åœ¨ æ­¤æ—¶æ˜¯æ’å…¥23ï¼šç”Ÿæˆæ–°èŠ‚ç‚¹ &amp; éšæœºç”Ÿæˆå±‚æ•°ï¼Œï¼ˆ1ï¼‰å°†æ–°èŠ‚ç‚¹å„å±‚æŒ‡é’ˆæŒ‡å‘å¯¹åº”å±‚çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆä¸å­˜åœ¨åˆ™æŒ‡å‘nullï¼‰ï¼ˆ2ï¼‰å°†æ–°èŠ‚ç‚¹èŠ‚ç‚¹å„å±‚å‰ä¸€ä¸ªèŠ‚ç‚¹å¯¹åº”å±‚æ•°çš„æŒ‡é’ˆæŒ‡å‘æ–°èŠ‚ç‚¹ 5.1 Redisä¸ºä»€ä¹ˆä¸ç”¨çº¢é»‘æ ‘ å‚è€ƒ ï¼š çŸ¥ä¹å›ç­” è™½ç„¶è·³è¡¨æ“ä½œæ—¶é—´å¤æ‚åº¦å’Œçº¢é»‘æ ‘ç›¸åŒ ï¼Œä½†æ˜¯ï¼š å®ç°ç®€å•ï¼šè·³è¡¨ä»£ç å®ç°æ›´æ˜“è¯» åŒºé—´æŸ¥æ‰¾ï¼šè·³è¡¨åŒºé—´æŸ¥æ‰¾æ•ˆç‡æ›´é«˜ 6. RedisæŒä¹…åŒ–æ–¹å¼æœ‰å“ªäº›ï¼Ÿä»¥åŠæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ Redis æä¾›ä¸¤ç§æŒä¹…åŒ–æœºåˆ¶ RDB å’Œ AOF æœºåˆ¶ã€‚ å„è‡ªä¼˜ç‚¹ RDB AOF ã€æ–¹ä¾¿ã€‘åªæœ‰ä¸€ä¸ªæ–‡ä»¶ dump.rdb ï¼Œæ–¹ä¾¿æŒä¹…åŒ– ã€æ•°æ®å®‰å…¨ã€‘ AOF æŒä¹…åŒ–æœ‰ alwaysï¼Œæ¯è¿›è¡Œä¸€æ¬¡å‘½ä»¤æ“ä½œå°±è®°å½•åˆ° AOF æ–‡ä»¶ä¸­ä¸€æ¬¡ã€‚ ã€å®¹ç¾æ€§å¥½ã€‘ä¸€ä¸ªæ–‡ä»¶å¯ä»¥ä¿å­˜åˆ°å®‰å…¨çš„ç£ç›˜ ã€æ€§èƒ½ã€‘æœ€å¤§åŒ–ï¼Œfork å­è¿›ç¨‹æ¥å®Œæˆå†™æ“ä½œï¼Œè®©ä¸»è¿›ç¨‹ç»§ç»­å¤„ç†å‘½ä»¤ï¼Œæ‰€ä»¥æ˜¯ IO æœ€å¤§åŒ– ã€å¯åŠ¨æ•ˆç‡é«˜ã€‘ç›¸å¯¹äºæ•°æ®é›†å¤§æ—¶ï¼Œæ¯” AOF çš„å¯åŠ¨æ•ˆç‡æ›´é«˜ å„è‡ªç¼ºç‚¹ RDB AOF ã€å®‰å…¨æ€§ä½ã€‘ RDB æ˜¯é—´éš”ä¸€æ®µæ—¶é—´è¿›è¡ŒæŒä¹…åŒ– ã€å¯åŠ¨æ•ˆç‡ä½ã€‘æ•°æ®é›†å¤§çš„æ—¶å€™ï¼Œæ¯” RDB å¯åŠ¨æ•ˆç‡ä½ã€‚ ã€æ¢å¤æ…¢ã€‘AOF æ–‡ä»¶æ¯” RDB æ–‡ä»¶å¤§ï¼Œä¸”æ¢å¤é€Ÿåº¦æ…¢ã€‚ 6.1 AOF é‡å†™äº†è§£å—ï¼Ÿ AOFé‡å†™å¯ä»¥äº§ç”Ÿä¸€ä¸ªæ–°çš„AOFæ–‡ä»¶ï¼Œè¿™ä¸ªæ–°çš„AOFæ–‡ä»¶å’ŒåŸæœ‰çš„AOFæ–‡ä»¶æ‰€ä¿å­˜çš„æ•°æ®åº“çŠ¶æ€ä¸€æ ·ï¼Œä½†ä½“ç§¯æ›´å°ã€‚ AOFé‡å†™æ˜¯ä¸€ä¸ªæœ‰æ­§ä¹‰çš„åå­—ï¼Œè¯¥åŠŸèƒ½æ˜¯é€šè¿‡è¯»å–æ•°æ®åº“ä¸­çš„é”®å€¼å¯¹æ¥å®ç°çš„ï¼Œç¨‹åºæ— é¡»å¯¹ç°æœ‰AOFæ–‡ä»¶è¿›è¡Œä»»ä¼ºè¯»å…¥ã€åˆ†ææˆ–è€…å†™å…¥æ“ä½œã€‚ å…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š åœ¨æ‰§è¡Œ BGREWRITEAOF å‘½ä»¤ï¼Œå¼€å§‹é‡å†™ï¼› Redis æœåŠ¡å™¨ä¼šç»´æŠ¤ä¸€ä¸ª AOF é‡å†™ç¼“å†²åŒºï¼Œè¯¥ç¼“å†²åŒºä¼šåœ¨å­è¿›ç¨‹åˆ›å»ºæ–°AOFæ–‡ä»¶æœŸé—´ï¼Œè®°å½•æœåŠ¡å™¨æ‰§è¡Œçš„æ‰€æœ‰å†™å‘½ä»¤ï¼› å½“å­è¿›ç¨‹å®Œæˆåˆ›å»ºæ–°AOFæ–‡ä»¶çš„å·¥ä½œä¹‹åï¼ŒæœåŠ¡å™¨ä¼šå°†é‡å†™ç¼“å†²åŒºä¸­çš„æ‰€æœ‰å†…å®¹è¿½åŠ åˆ°æ–°AOFæ–‡ä»¶çš„æœ«å°¾ ï¼› æœ€åï¼ŒæœåŠ¡å™¨ç”¨æ–°çš„AOFæ–‡ä»¶æ›¿æ¢æ—§çš„ AOFæ–‡ä»¶ï¼Œä»¥æ­¤æ¥å®ŒæˆAOFæ–‡ä»¶é‡å†™æ“ä½œã€‚ 7. RedisæŒä¹…åŒ–æœ‰ä¸¤ç§ï¼Œé‚£åº”è¯¥æ€ä¹ˆé€‰æ‹©å‘¢ï¼Ÿ å‚è€ƒï¼šhttps://zhuanlan.zhihu.com/p/39412293 å¦‚æœRedisä¸­çš„æ•°æ®å®Œå…¨ä¸¢å¼ƒä¹Ÿæ²¡æœ‰å…³ç³»ï¼ˆå¦‚Rediså®Œå…¨ç”¨ä½œDBå±‚æ•°æ®çš„cacheï¼‰ï¼Œé‚£ä¹ˆæ— è®ºæ˜¯å•æœºï¼Œè¿˜æ˜¯ä¸»ä»æ¶æ„ï¼Œéƒ½å¯ä»¥ä¸è¿›è¡Œä»»ä½•æŒä¹…åŒ–ï¼› å•æœºç¯å¢ƒï¼š å¦‚æœå¯ä»¥æ¥å—åå‡ åˆ†é’Ÿæˆ–æ›´å¤šçš„æ•°æ®ä¸¢å¤±ï¼Œé€‰æ‹©RDBå¯¹Redisçš„æ€§èƒ½æ›´åŠ æœ‰åˆ©ï¼›å¦‚æœåªèƒ½æ¥å—ç§’çº§åˆ«çš„æ•°æ®ä¸¢å¤±ï¼Œåº”è¯¥é€‰æ‹©AOFï¼› ä¸»ä»æ¶æ„ï¼š masterï¼šå®Œå…¨å…³é—­æŒä¹…åŒ–ï¼ˆåŒ…æ‹¬RDBå’ŒAOFï¼‰ï¼Œè¿™æ ·å¯ä»¥è®©masterçš„æ€§èƒ½è¾¾åˆ°æœ€å¥½ï¼› slaveï¼šå…³é—­RDBï¼Œå¼€å¯AOFï¼ˆå¦‚æœå¯¹æ•°æ®å®‰å…¨è¦æ±‚ä¸é«˜ï¼Œå¼€å¯RDBå…³é—­AOFä¹Ÿå¯ä»¥ï¼‰ï¼Œå¹¶å®šæ—¶å¯¹æŒä¹…åŒ–æ–‡ä»¶è¿›è¡Œå¤‡ä»½ï¼ˆå¦‚å¤‡ä»½åˆ°å…¶ä»–æ–‡ä»¶å¤¹ï¼Œå¹¶æ ‡è®°å¥½å¤‡ä»½çš„æ—¶é—´ï¼‰ï¼›ç„¶åå…³é—­AOFçš„è‡ªåŠ¨é‡å†™ï¼Œç„¶åæ·»åŠ å®šæ—¶ä»»åŠ¡ï¼Œåœ¨æ¯å¤©Redisé—²æ—¶ï¼ˆå¦‚å‡Œæ™¨12ç‚¹ï¼‰è°ƒbgrewriteaofã€‚ 8. ï¼ˆä¸å¤ªç†è§£ï¼‰pipelineæœ‰ä»€ä¹ˆå¥½å¤„ï¼Œä¸ºä»€ä¹ˆè¦ç”¨ pipelineï¼Ÿ ä½¿ç”¨ pipelineï¼ˆç®¡é“ï¼‰çš„å¥½å¤„åœ¨äºå¯ä»¥å°†å¤šæ¬¡ I/O å¾€è¿”çš„æ—¶é—´ç¼©çŸ­ä¸ºä¸€æ¬¡ï¼Œä½†æ˜¯è¦æ±‚ç®¡é“ä¸­æ‰§è¡Œçš„æŒ‡ä»¤é—´æ²¡æœ‰å› æœå…³ç³»ï¼› ç”¨ pipeline çš„åŸå› åœ¨äºå¯ä»¥å®ç°è¯·æ±‚/å“åº”æœåŠ¡å™¨çš„åŠŸèƒ½ï¼Œå½“å®¢æˆ·ç«¯å°šæœªè¯»å–æ—§å“åº”æ—¶ï¼Œå®ƒä¹Ÿå¯ä»¥å¤„ç†æ–°çš„è¯·æ±‚ã€‚å¦‚æœå®¢æˆ·ç«¯å­˜åœ¨å¤šä¸ªå‘½ä»¤å‘é€åˆ°æœåŠ¡å™¨æ—¶ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯æ— éœ€ç­‰å¾…æœåŠ¡ç«¯çš„æ¯æ¬¡å“åº”æ‰èƒ½æ‰§è¡Œä¸‹ä¸ªå‘½ä»¤ï¼Œåªéœ€æœ€åä¸€æ­¥ä»æœåŠ¡ç«¯è¯»å–å›å¤å³å¯ã€‚ 9.æ€ä¹ˆä½¿ç”¨ Rediså®ç°æ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿ å¦‚ä½•å®ç°å»¶æ—¶é˜Ÿåˆ—ï¼Ÿ æ¶ˆæ¯é˜Ÿåˆ—ï¼šä¸€èˆ¬ä½¿ç”¨ list ç»“æ„ä½œä¸ºé˜Ÿåˆ—ï¼Œ rpush ç”Ÿäº§æ¶ˆæ¯ï¼Œ lpop æ¶ˆè´¹æ¶ˆæ¯ã€‚å½“ lpop æ²¡æœ‰æ¶ˆæ¯çš„æ—¶å€™ï¼Œè¦é€‚å½“sleep ä¸€ä¼šå†é‡è¯•ï¼› å»¶æ—¶é˜Ÿåˆ—ï¼š ï¼šä½¿ç”¨sortedset ï¼Œæ‹¿æ—¶é—´æˆ³ä½œä¸º score ï¼Œæ¶ˆæ¯å†…å®¹ä½œä¸º key è°ƒç”¨ zadd æ¥ç”Ÿäº§æ¶ˆæ¯ï¼Œæ¶ˆè´¹è€…ç”¨zrangebyscore æŒ‡ä»¤è·å–ç¬¦åˆæ¡ä»¶çš„æ•°æ®è½®è¯¢è¿›è¡Œå¤„ç†ã€‚ ä»€ä¹ˆæ˜¯å»¶æ—¶é˜Ÿåˆ—ï¼Ÿ å½“ç”¨æˆ·å‘é€ä¸€ä¸ªæ¶ˆæ¯è¯·æ±‚ç»™æœåŠ¡å™¨åå°çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨ä¼šæ£€æµ‹è¿™æ¡æ¶ˆæ¯æ˜¯å¦éœ€è¦è¿›è¡Œå»¶æ—¶å¤„ç†ï¼š å¦‚æœéœ€è¦å°±æ”¾å…¥åˆ°å»¶æ—¶é˜Ÿåˆ—ä¸­ï¼Œç”±å»¶æ—¶ä»»åŠ¡æ£€æµ‹å™¨è¿›è¡Œæ£€æµ‹å’Œå¤„ç†ï¼› å¦‚æœä¸éœ€è¦è¿›è¡Œå»¶æ—¶å¤„ç†çš„ä»»åŠ¡ï¼ŒæœåŠ¡å™¨ä¼šç«‹é©¬å¯¹æ¶ˆæ¯è¿›è¡Œå¤„ç†ï¼Œå¹¶æŠŠå¤„ç†åçš„ç»“æœè¿”ä¼šç»™ç”¨æˆ·ã€‚ ã€ä¸¾ä¸ªä¾‹å­ã€‘ ç‚¹å¤–å–æ—¶ï¼Œä¸‹å•åä¸ä¼šç«‹å³å®‰æ’é…é€ï¼Œè€Œæ˜¯ç­‰å¾…ä¸€æ®µæ—¶é—´è®©å•†æˆ·æ¥å•æ‰æ­£å¼å®‰æ’é…é€ï¼Œå¦åˆ™è¶…æ—¶å–æ¶ˆ 6.2 Rediså•çº¿ç¨‹æ¨¡å‹ 1.ä¸ºä»€ä¹ˆ Redis ä½¿ç”¨å•çº¿ç¨‹æ¨¡å‹ï¼Ÿå•çº¿ç¨‹æ¨¡å‹æ•ˆç‡ä¹Ÿèƒ½é‚£ä¹ˆé«˜ï¼Ÿ é‡‡ç”¨å•çº¿ç¨‹ï¼Œé¿å…äº†ä¸è¦çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œç«äº‰æ¡ä»¶ï¼› å…¶æ¬¡ CPU ä¸æ˜¯ Redis çš„ç“¶é¢ˆï¼ŒRedis çš„ç“¶é¢ˆæœ€æœ‰å¯èƒ½æ˜¯æœºå™¨å†…å­˜æˆ–è€…ç½‘ç»œå¸¦å®½ã€‚ ã€æ•ˆç‡é«˜çš„åŸå› ã€‘ . 1. Cè¯­è¨€å®ç°ï¼Œæ•ˆç‡é«˜ çº¯å†…å­˜æ“ä½œ åŸºäºéé˜»å¡çš„IOå¤ç”¨æ¨¡å‹æœºåˆ¶ï¼ˆå¯èƒ½ä¼šè·Ÿè‡ªå·±æŒ–å‘ï¼‰ å•çº¿ç¨‹çš„è¯å°±èƒ½é¿å…å¤šçº¿ç¨‹çš„é¢‘ç¹ä¸Šä¸‹æ–‡åˆ‡æ¢é—®é¢˜ï¼ˆä¸ºä»€ä¹ˆå•çº¿ç¨‹æ•ˆç‡é«˜ï¼‰ ä¸°å¯Œçš„æ•°æ®ç»“æ„ï¼ˆå…¨ç¨‹é‡‡ç”¨hashç»“æ„ï¼Œè¯»å–é€Ÿåº¦éå¸¸å¿«ï¼Œå¯¹æ•°æ®å­˜å‚¨è¿›è¡Œäº†ä¸€äº›ä¼˜åŒ–ï¼Œæ¯”å¦‚zsetå‹ç¼©è¡¨ï¼Œè·³è¡¨ç­‰ï¼‰ 2.ï¼ˆæ–°ï¼Œæ˜“å¿˜ï¼‰è¯´è¯´ Redis çš„å•çº¿ç¨‹æ¨¡å‹ ï¼Ÿ è¿™é—®é¢˜æ˜¯å› ä¸ºå‰é¢å›ç­”é—®é¢˜çš„æ—¶å€™æåˆ°äº† Redis æ˜¯åŸºäºéé˜»å¡çš„IOå¤ç”¨æ¨¡å‹ã€‚å¦‚æœè¿™ä¸ªé—®é¢˜å›ç­”ä¸ä¸Šæ¥ï¼Œå°±ç›¸å½“äºå‰é¢çš„å›ç­”æ˜¯ç»™è‡ªå·±æŒ–å‘äº†ã€‚ redis å†…éƒ¨ä½¿â½¤â½‚ä»¶äº‹ä»¶å¤„ç†å™¨ file event handler ï¼Œè¿™ä¸ªâ½‚ä»¶äº‹ä»¶å¤„ç†å™¨æ˜¯å•çº¿ç¨‹çš„ï¼Œæ‰€ä»¥redis æ‰å«åšå•çº¿ç¨‹çš„æ¨¡å‹ã€‚å®ƒé‡‡â½¤ IO å¤šè·¯å¤â½¤æœºåˆ¶ä¸€ä¸ªçº¿ç¨‹åŒæ—¶ç›‘å¬å¤šä¸ª socketï¼Œæ ¹æ® socket ä¸Šçš„äº‹ä»¶æ¥é€‰æ‹©å¯¹åº”çš„äº‹ä»¶å¤„ç†å™¨è¿›â¾å¤„ç†ã€‚ â½‚ä»¶äº‹ä»¶å¤„ç†å™¨çš„ç»“æ„åŒ…å« 4 ä¸ªéƒ¨åˆ†ï¼š å¤šä¸ª socket IO å¤šè·¯å¤â½¤ç¨‹åº â½‚ä»¶äº‹ä»¶åˆ†æ´¾å™¨ äº‹ä»¶å¤„ç†å™¨ï¼ˆè¿æ¥åº”ç­”å¤„ç†å™¨ã€å‘½ä»¤è¯·æ±‚å¤„ç†å™¨ã€å‘½ä»¤å›å¤å¤„ç†å™¨ï¼‰ ï¼ˆ1ï¼‰ IO å¤šè·¯å¤â½¤ç¨‹åºä¼šç›‘å¬å¤šä¸ª socketï¼Œï¼ˆ2ï¼‰ä¼šå°† socket äº§â½£çš„äº‹ä»¶æ”¾â¼Šé˜Ÿåˆ—ä¸­æ’é˜Ÿï¼Œï¼ˆ3ï¼‰äº‹ä»¶åˆ†æ´¾å™¨æ¯æ¬¡ä»é˜Ÿåˆ—ä¸­å–å‡ºâ¼€ä¸ªäº‹ä»¶ï¼Œï¼ˆ4ï¼‰æŠŠè¯¥äº‹ä»¶äº¤ç»™å¯¹åº”çš„äº‹ä»¶å¤„ç†å™¨è¿›â¾å¤„ç†ã€‚ 3. ä½ è¯´Redisæ˜¯å•çº¿ç¨‹çš„ï¼Œé‚£å¦‚ä½•å¤„ç†é«˜å¹¶å‘ï¼Ÿæ¯”å¦‚1000ä¸ªå¹¶å‘è¯·æ±‚åŒæ—¶å‘ç”Ÿï¼Ÿ Redisé‡‡ç”¨äº†IOå¤šè·¯å¤ç”¨æœºåˆ¶ï¼Œä½¿å…¶åœ¨ç½‘ç»œIOæ“ä½œä¸­èƒ½å¹¶å‘å¤„ç†å¤§é‡çš„å®¢æˆ·ç«¯è¯·æ±‚ã€‚ è¯¦è§ä¸Šä¸€ä¸ªé—®é¢˜ã€‚ Rediså¯ä»¥é‡‡ç”¨ä¸»ä»æ¶æ„ï¼Œmasterè´Ÿè´£å†™ï¼Œslaveè´Ÿè´£è¯»ã€‚ 4.è¯´è¯´ä½ å¯¹Redisäº‹åŠ¡çš„ç†è§£ ï¼Ÿ Redis ä¸­çš„äº‹åŠ¡æ˜¯ä¸€ç»„å‘½ä»¤çš„é›†åˆï¼Œæ˜¯ Redis çš„æœ€å°æ‰§è¡Œå•ä½ã€‚ Redisäº‹åŠ¡åŠŸèƒ½æ˜¯é€šè¿‡MULTIã€EXECã€DISCARDå’ŒWATCH å››ä¸ªåŸè¯­å®ç°çš„ Redisä¼šå°†ä¸€ä¸ªäº‹åŠ¡ä¸­çš„æ‰€æœ‰å‘½ä»¤åºåˆ—åŒ–ï¼Œç„¶åæŒ‰é¡ºåºæ‰§è¡Œã€‚ éœ€è¦æ³¨æ„çš„åœ°æ–¹ Redis äº‹åŠ¡ä¸æ”¯æŒå›æ»šï¼šä¸åƒ MySQL çš„äº‹åŠ¡ä¸€æ ·ï¼Œè¦ä¹ˆéƒ½æ‰§è¡Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œï¼› å› ä¸ºå›æ»šéœ€è¦å¢åŠ å¾ˆå¤šå·¥ä½œï¼Œè€Œä¸æ”¯æŒå›æ»šåˆ™å¯ä»¥ä¿æŒç®€å•ã€å¿«é€Ÿçš„ç‰¹æ€§ã€‚ Redis æœåŠ¡ç«¯åœ¨æ‰§è¡Œäº‹åŠ¡çš„è¿‡ç¨‹ä¸­ï¼Œä¸ä¼šè¢«å…¶ä»–å®¢æˆ·ç«¯å‘é€æ¥çš„å‘½ä»¤è¯·æ±‚æ‰“æ–­ï¼Œç›´åˆ°äº‹åŠ¡å‘½ä»¤å…¨éƒ¨æ‰§è¡Œå®Œæ¯•æ‰ä¼šæ‰§è¡Œå…¶ä»–å®¢æˆ·ç«¯çš„å‘½ä»¤ã€‚ 5.ä¸ºä»€ä¹ˆRedisçš„æ“ä½œæ˜¯åŸå­æ€§çš„ï¼Œæ€ä¹ˆä¿è¯åŸå­æ€§çš„ï¼Ÿ åŸå­æ€§ã€‚ å› ä¸ºRedisæ˜¯å•çº¿ç¨‹çš„ï¼Œ Redisæœ¬èº«æä¾›çš„æ‰€æœ‰APIéƒ½æ˜¯åŸå­æ“ä½œï¼ŒRedisä¸­çš„äº‹åŠ¡å…¶å®æ˜¯è¦ä¿è¯æ‰¹é‡æ“ä½œçš„åŸå­æ€§ã€‚ äº‹åŠ¡æ€§ã€‚ Redisä¸­çš„äº‹åŠ¡å…¶å®æ˜¯è¦ä¿è¯æ‰¹é‡æ“ä½œçš„åŸå­æ€§ã€‚ 6.3 Redisç¼“å­˜ 1.ä¸ºä»€ä¹ˆè¦ç”¨ç¼“å­˜ ï¼Ÿæ€ä¹ˆæé«˜ç¼“å­˜å‘½ä¸­ç‡ï¼Ÿ ä¸ºä»€ä¹ˆç”¨ç¼“å­˜ï¼Ÿ æŠŠçƒ­ç‚¹æ•°æ®å­˜å…¥å†…å­˜ä¸­ï¼Œæé«˜è¯»å†™æ€§èƒ½ã€‚ æé«˜å‘½ä¸­ç‡ï¼Ÿ å¢åŠ ç¼“å­˜ç©ºé—´ æå‡ç¼“å­˜æ›´æ–°é¢‘ç‡ æå‰åŠ è½½æ•°æ®åˆ°ç¼“å­˜ä¸­ 2.ç¼“å­˜é›ªå´©ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»é€ã€ç¼“å­˜é¢„çƒ­ã€ç¼“å­˜æ›´æ–°ã€ç¼“å­˜é™çº§ç­‰ï¼Ÿ å‚è€ƒï¼šhttps://juejin.cn/post/6844904173725548557 ç¼“å­˜é›ªå´© ç®€è€Œè¨€ä¹‹ï¼šRedis æŒ‚æ‰äº†ï¼Œè¯·æ±‚å…¨éƒ¨èµ°æ•°æ®åº“ ã€‚ ä¾‹å¦‚ï¼š å¯¹ç¼“å­˜æ•°æ®è®¾ç½®ç›¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œå¯¼è‡´æŸæ®µæ—¶é—´å†…ç¼“å­˜å¤±æ•ˆï¼Œè¯·æ±‚å…¨éƒ¨èµ°æ•°æ®åº“ï¼› keyè¿‡æœŸè§£å†³ï¼š åœ¨ç¼“å­˜çš„æ—¶å€™ç»™è¿‡æœŸæ—¶é—´åŠ ä¸Šä¸€ä¸ªéšæœºå€¼ï¼Œè¿™æ ·å°±ä¼šå¤§å¹…åº¦çš„å‡å°‘ç¼“å­˜åœ¨åŒä¸€æ—¶é—´è¿‡æœŸã€‚ æ›´é€šç”¨æƒ…å†µçš„åšæ³•ï¼š äº‹å‘å‰ï¼šå®ç° Redis çš„é«˜å¯ç”¨ (ä¸»ä»æ¶æ„ + Redis Cluster)ï¼Œå°½é‡é¿å… Redis æŒ‚æ‰è¿™ç§æƒ…å†µå‘ç”Ÿï¼› äº‹å‘ä¸­ï¼šä¸‡ä¸€ Redis çœŸçš„æŒ‚äº†ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®æœ¬åœ°ç¼“å­˜ (ehcache)+ é™æµ (hystrix)ï¼Œå°½é‡é¿å…æˆ‘ä»¬çš„æ•°æ®åº“è¢«å¹²æ‰ï¼› äº‹å‘åï¼šredis æŒä¹…åŒ–ï¼Œé‡å¯åè‡ªåŠ¨ä»ç£ç›˜ä¸ŠåŠ è½½æ•°æ®ï¼Œå¿«é€Ÿæ¢å¤ç¼“å­˜æ•°æ®ã€‚ ç¼“å­˜ç©¿é€ æŸ¥è¯¢ä¸€ä¸ªä¸€å®šä¸å­˜åœ¨çš„æ•°æ® ï¼Œå¯¼è‡´æ¯æ¬¡è¯·æ±‚éƒ½è¦åˆ°æ•°æ®åº“å»æŸ¥è¯¢ï¼Œå¤±å»äº†ç¼“å­˜çš„æ„ä¹‰ ã€‚ è§£å†³1ï¼š ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ (BloomFilter) æå‰æ‹¦æˆªï¼Œä¸åˆæ³•å°±ä¸è®©è¿™ä¸ªè¯·æ±‚åˆ°æ•°æ®åº“å±‚ï¼› è§£å†³2ï¼šå½“æˆ‘ä»¬ä»æ•°æ®åº“æ‰¾ä¸åˆ°çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿå°†è¿™ä¸ªç©ºå¯¹è±¡è®¾ç½®åˆ°ç¼“å­˜é‡Œè¾¹å»ï¼Œä¸‹æ¬¡å†è¯·æ±‚çš„æ—¶å€™ï¼Œå°±å¯ä»¥ä»ç¼“å­˜é‡Œè¾¹è·å–äº†ã€‚ ç¼“å­˜å‡»ç©¿ åœ¨å¹³å¸¸é«˜å¹¶å‘çš„ç³»ç»Ÿä¸­ï¼Œå¤§é‡çš„è¯·æ±‚åŒæ—¶æŸ¥è¯¢ä¸€ä¸ªkeyæ—¶ï¼Œæ­¤æ—¶è¿™ä¸ªé«˜çƒ­keyæ­£å¥½å¤±æ•ˆäº†ï¼Œå°±ä¼šå¯¼è‡´å¤§é‡çš„è¯·æ±‚éƒ½æ‰“åˆ°æ•°æ®åº“ä¸Šé¢å»ã€‚è¿™ç§ç°è±¡æˆ‘ä»¬ç§°ä¸ºç¼“å­˜å‡»ç©¿ã€‚ è§£å†³1ï¼šä½¿ç”¨äº’æ–¥é”(mutex key)ã€‚ æ˜¯åªè®©ä¸€ä¸ªçº¿ç¨‹æ„å»ºç¼“å­˜ï¼Œå…¶ä»–çº¿ç¨‹ç­‰å¾…æ„å»ºç¼“å­˜çš„çº¿ç¨‹æ‰§è¡Œå®Œï¼Œé‡æ–°ä»ç¼“å­˜è·å–æ•°æ®å°±è¡Œã€‚ å¦‚æœæ˜¯å•æœºï¼Œå¯ä»¥ç”¨synchronizedæˆ–è€…lockæ¥å¤„ç†ï¼Œå¦‚æœæ˜¯ã€æ·˜ç‰¹ã€‘åˆ†å¸ƒå¼ç¯å¢ƒå¯ä»¥ç”¨åˆ†å¸ƒå¼é”å°±å¯ä»¥äº†ã€‚ è§£å†³2ï¼š keyæ°¸ä¸è¿‡æœŸã€‚ æŠŠè¿‡æœŸæ—¶é—´å­˜åœ¨keyå¯¹åº”çš„valueé‡Œï¼Œå¦‚æœå‘ç°è¦è¿‡æœŸäº†ï¼Œé€šè¿‡ä¸€ä¸ªåå°çš„å¼‚æ­¥çº¿ç¨‹è¿›è¡Œç¼“å­˜çš„æ„å»ºã€‚ ç¼“å­˜é¢„çƒ­ ç³»ç»Ÿä¸Šçº¿åï¼Œå°†ç›¸å…³çš„ç¼“å­˜æ•°æ®ç›´æ¥åŠ è½½åˆ°ç¼“å­˜ç³»ç»Ÿã€‚ è¿™æ ·å°±å¯ä»¥é¿å…åœ¨ç”¨æˆ·è¯·æ±‚çš„æ—¶å€™ï¼Œå…ˆæŸ¥è¯¢æ•°æ®åº“ï¼Œç„¶åå†å°†æ•°æ®ç¼“å­˜çš„é—®é¢˜ã€‚ ç¼“å­˜æ›´æ–° LRU(è®¿é—®æ—¶é—´æœ€æ—§æ·˜æ±°)/LFU(æŠŠé¢‘æ¬¡ä½çš„æ·˜æ±°æ‰) è¶…æ—¶å‰”é™¤ï¼šè®¾ç½®keyè¿‡æœŸæ—¶é—´ ä¸»åŠ¨æ›´æ–°ï¼šå¼€å‘è®¾ç½®ç”Ÿå‘½å‘¨æœŸ ç¼“å­˜é™çº§ é™çº§çš„æƒ…å†µï¼Œå°±æ˜¯ç¼“å­˜å¤±æ•ˆæˆ–è€…ç¼“å­˜æœåŠ¡æŒ‚æ‰çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¹Ÿä¸å»è®¿é—®æ•°æ®åº“ã€‚æˆ‘ä»¬ç›´æ¥è®¿é—®å†…å­˜éƒ¨åˆ†æ•°æ®ç¼“å­˜æˆ–è€…ç›´æ¥è¿”å›é»˜è®¤æ•°æ®ã€‚ å¯¹äºåº”ç”¨çš„é¦–é¡µï¼Œä¸€èˆ¬æ˜¯è®¿é—®é‡éå¸¸å¤§çš„åœ°æ–¹ï¼Œé¦–é¡µé‡Œé¢å¾€å¾€åŒ…å«äº†éƒ¨åˆ†æ¨èå•†å“çš„å±•ç¤ºä¿¡æ¯ã€‚è¿™äº›æ¨èå•†å“éƒ½ä¼šæ”¾åˆ°ç¼“å­˜ä¸­è¿›è¡Œå­˜å‚¨ï¼ŒåŒæ—¶æˆ‘ä»¬ä¸ºäº†é¿å…ç¼“å­˜çš„å¼‚å¸¸æƒ…å†µï¼Œå¯¹çƒ­ç‚¹å•†å“æ•°æ®ä¹Ÿå­˜å‚¨åˆ°äº†å†…å­˜ä¸­ã€‚åŒæ—¶å†…å­˜ä¸­è¿˜ä¿ç•™äº†ä¸€äº›é»˜è®¤çš„å•†å“ä¿¡æ¯ã€‚ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 3. Redis è®¾ç½®keyè¿‡æœŸåå¦‚ä½•å¤„ç†ï¼ŸRedisç¼“å­˜åˆ·æ–°ç­–ç•¥ï¼ˆå†…å­˜æ·˜æ±°æœºåˆ¶ï¼‰æœ‰å“ªäº›ï¼Ÿ Redis è®¾ç½®è¿‡æœŸæ—¶é—´ Redisä¸­æœ‰ä¸ªè®¾ç½®æ—¶é—´è¿‡æœŸçš„åŠŸèƒ½ï¼Œå³å¯¹å­˜å‚¨åœ¨ redis æ•°æ®åº“ä¸­çš„å€¼å¯ä»¥è®¾ç½®â¼€ä¸ªè¿‡æœŸæ—¶é—´ã€‚ å¦‚æˆ‘ä»¬â¼€èˆ¬é¡¹â½¬ä¸­çš„ token æˆ–è€…â¼€äº›ç™»å½•ä¿¡æ¯ï¼Œå°¤å…¶æ˜¯çŸ­ä¿¡éªŒè¯ç éƒ½æ˜¯æœ‰æ—¶é—´é™åˆ¶çš„ï¼Œè¿‡æœŸååŸºæœ¬ä¸ä¼šä½¿ç”¨ è¿‡æœŸåé‡‡ç”¨ä»€ä¹ˆç­–ç•¥è¿›è¡Œåˆ é™¤ï¼Ÿ å®šæœŸåˆ é™¤ï¼šredisé»˜è®¤æ˜¯æ¯éš” 100ms å°±éšæœºæŠ½å–â¼€äº›è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyï¼Œæ£€æŸ¥å…¶æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœè¿‡æœŸå°±åˆ é™¤ã€‚æ³¨æ„è¿™â¾¥æ˜¯éšæœºæŠ½å–çš„ã€‚ä¸ºä»€ä¹ˆè¦éšæœºå‘¢ï¼Ÿä½ æƒ³â¼€æƒ³å‡å¦‚ redis å­˜äº†â¼â¼—ä¸‡ä¸ª key ï¼Œæ¯éš”100mså°±éå†æ‰€æœ‰çš„è®¾ç½®è¿‡æœŸæ—¶é—´çš„ key çš„è¯ï¼Œå°±ä¼šç»™ CPU å¸¦æ¥å¾ˆå¤§çš„è´Ÿè½½ï¼ æƒ°æ€§åˆ é™¤ï¼šå®šæœŸåˆ é™¤å¯èƒ½ä¼šå¯¼è‡´å¾ˆå¤šè¿‡æœŸ key åˆ°äº†æ—¶é—´å¹¶æ²¡æœ‰è¢«åˆ é™¤æ‰ï¼Œæ‰€ä»¥å°±æœ‰äº†æƒ°æ€§åˆ é™¤ã€‚å‡å¦‚ä½ çš„è¿‡æœŸ keyï¼Œé å®šæœŸåˆ é™¤æ²¡æœ‰è¢«åˆ é™¤æ‰ï¼Œè¿˜åœç•™åœ¨å†…å­˜â¾¥ï¼Œé™¤â¾®ä½ çš„ç³»ç»Ÿå»æŸ¥â¼€ä¸‹é‚£ä¸ª keyï¼Œæ‰ä¼šè¢«redisç»™åˆ é™¤æ‰ã€‚ å†…å­˜æ·˜æ±°ç­–ç•¥ ï¼šå¦‚æœå®šæœŸåˆ é™¤æ¼æ‰äº†å¾ˆå¤šè¿‡æœŸ keyï¼Œç„¶åä½ ä¹Ÿæ²¡åŠæ—¶å»æŸ¥ï¼Œä¹Ÿå°±æ²¡â¾›æƒ°æ€§åˆ é™¤ï¼Œæ­¤æ—¶ä¼šæ€ä¹ˆæ ·ï¼Ÿå¦‚æœå¤§é‡è¿‡æœŸkeyå †ç§¯åœ¨å†…å­˜â¾¥ï¼Œå¯¼è‡´rediså†…å­˜å—è€—å°½äº†ã€‚æ‰€ä»¥æœ‰å†…å­˜æ·˜æ±°ç­–ç•¥ã€‚ volatile-lruï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®ä¸­æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿â½¤çš„æ•°æ®æ·˜æ±° volatile-ttlï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ä¸­æŒ‘é€‰å°†è¦è¿‡æœŸçš„æ•°æ®æ·˜æ±° volatile-randomï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±° allkeys-lruï¼šå½“å†…å­˜ä¸â¾œä»¥å®¹çº³æ–°å†™â¼Šæ•°æ®æ—¶ï¼Œåœ¨é”®ç©ºé—´ä¸­ï¼Œç§»é™¤æœ€è¿‘æœ€å°‘ä½¿â½¤çš„keyï¼ˆè¿™ä¸ªæ˜¯æœ€å¸¸â½¤çš„ï¼‰ allkeys-randomï¼šä»æ•°æ®é›†ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±° no-evictionï¼šç¦â½Œé©±é€æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´å½“å†…å­˜ä¸â¾œä»¥å®¹çº³æ–°å†™â¼Šæ•°æ®æ—¶ï¼Œæ–°å†™â¼Šæ“ä½œä¼šæŠ¥é”™ã€‚è¿™ä¸ªåº”è¯¥æ²¡â¼ˆä½¿â½¤å§ï¼ 4. RedisæŠ¥å†…å­˜ä¸è¶³æ€ä¹ˆå¤„ç†ï¼Ÿ å¢åŠ  Redis å¯ç”¨å†…å­˜ï¼š ä¿®æ”¹ä»¶ redis.conf çš„ maxmemory å‚æ•°ï¼› ä½¿ç”¨åˆ†å¸ƒå¼é›†ç¾¤ï¼Œæé«˜å­˜å‚¨é‡ï¼› è®¾ç½®ç¼“å­˜æ·˜æ±°ç­–ç•¥ï¼šæé«˜å†…å­˜çš„ä½¿ç”¨æ•ˆç‡ï¼› 5. ã€é‡ç‚¹ã€‘ç¼“å­˜å’Œæ•°æ®åº“è°å…ˆæ›´æ–°å‘¢ï¼Ÿ ï¼ˆä¿æŒç¼“å­˜å’Œæ•°æ®åº“ä¸€è‡´æ€§ï¼‰ å‚è€ƒï¼šhttps://learnku.com/articles/22363 å¯¹äºè¯»ï¼ˆæŸ¥è¯¢ï¼‰æ“ä½œ ä¸€èˆ¬æˆ‘ä»¬å¯¹è¯»æ“ä½œçš„æ—¶å€™æœ‰è¿™ä¹ˆä¸€ä¸ªå›ºå®šçš„å¥—è·¯ï¼š å¦‚æœæˆ‘ä»¬çš„æ•°æ®åœ¨ç¼“å­˜é‡Œè¾¹æœ‰ï¼Œé‚£ä¹ˆå°±ç›´æ¥å–ç¼“å­˜çš„ï¼› å¦‚æœç¼“å­˜é‡Œæ²¡æœ‰æˆ‘ä»¬æƒ³è¦çš„æ•°æ®ï¼Œæˆ‘ä»¬ä¼šå…ˆå»æŸ¥è¯¢æ•°æ®åº“ï¼Œç„¶åå°†æ•°æ®åº“æŸ¥å‡ºæ¥çš„æ•°æ®å†™åˆ°ç¼“å­˜ä¸­ï¼› æœ€åå°†æ•°æ®è¿”å›ç»™è¯·æ±‚ã€‚ ä¸ç”¨æ›´æ–°ï¼ˆå†™ï¼‰æ•°æ®åº“ï¼Œåªç”¨æ›´æ–°ï¼ˆå†™ï¼‰ç¼“å­˜ã€‚ å¯¹äºå†™æ“ä½œå¯¼è‡´åŒå†™é—®é¢˜ å¦‚ä½•ä¿è¯ç¼“å­˜(redis)ä¸æ•°æ®åº“(MySQL)çš„ä¸€è‡´æ€§ å†™æ“ä½œä¼šæ›´æ–°æ•°æ®åº“ï¼Œé‚£ä¹ˆç¼“å­˜ä¹Ÿè¦è¿›è¡Œæ›´æ–°ï¼Œæ­¤æ—¶ä¼šå‘ç”Ÿæ•°æ®åº“å’Œç¼“å­˜ä¸ä¸€è‡´çš„é—®é¢˜ã€‚ é”®çš„è¿‡æœŸæ—¶é—´ï¼šèƒ½ä¿è¯ç¼“å­˜å’Œæ•°æ®åº“çš„æ•°æ®æœ€ç»ˆæ˜¯ä¸€è‡´çš„ã€‚ å› ä¸ºåªè¦ç¼“å­˜æ•°æ®è¿‡æœŸäº†ï¼Œå°±ä¼šè¢«åˆ é™¤ã€‚éšåè¯»çš„æ—¶å€™ï¼Œå› ä¸ºç¼“å­˜é‡Œæ²¡æœ‰ï¼Œå°±å¯ä»¥æŸ¥æ•°æ®åº“çš„æ•°æ®ï¼Œç„¶åå°†æ•°æ®åº“æŸ¥å‡ºæ¥çš„æ•°æ®é‡æ–°å†™å…¥åˆ°ç¼“å­˜ä¸­ã€‚ é™¤äº†è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åšæ›´å¤šçš„æªæ–½æ¥å°½é‡é¿å…æ•°æ®åº“ä¸ç¼“å­˜å¤„äºä¸ä¸€è‡´çš„æƒ…å†µå‘ç”Ÿã€‚ ç›´æ¥çœ‹ç»“è®ºï¼š ä¸è€ƒè™‘æ›´æ–°ç¼“å­˜è€Œæ˜¯ç›´æ¥åˆ é™¤ç¼“å­˜ï¼Œå› ä¸ºæ›´æ–°é€»è¾‘è¾ƒä¸ºå¤æ‚æ¶‰åŠåˆ°å…¶å®ƒæ•°æ®ï¼Œæ›´æ–°cacheæ¶ˆè€—ä¼šæ¯”è¾ƒå¤§ã€‚ å…ˆåˆ é™¤ç¼“å­˜ï¼Œå†æ›´æ–°æ•°æ®åº“ åœ¨é«˜å¹¶å‘ä¸‹å¯èƒ½ä¼šå¯¼è‡´æ•°æ®é•¿æ—¶é—´ä¸ä¸€è‡´ é‡‡ç”¨å¼‚æ­¥æ›´æ–°ç¼“å­˜çš„ç­–ç•¥ï¼Œä¸ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ï¼Œä½†åœ¨æ•°æ®åº“æ›´æ–°å®Œæˆä¹‹å‰ï¼Œéƒ½éœ€è¦åˆ°æ•°æ®åº“å±‚é¢å»è¯»å–æ•°æ®ï¼Œè¯»çš„æ•ˆç‡ä¸å¤ªå¥½â€”â€”ä¿è¯äº†æ•°æ®çš„ä¸€è‡´æ€§ï¼Œé€‚ç”¨äºå¯¹ä¸€è‡´æ€§è¦æ±‚é«˜çš„ä¸šåŠ¡ å…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜ (Cache Aside Pattern è®¾è®¡æ¨¡å¼) åœ¨é«˜å¹¶å‘ä¸‹ä¸ä¼šå¯¼è‡´æ•°æ®é•¿æ—¶é—´ä¸ä¸€è‡´ åœ¨æ›´æ–°æ•°æ®åº“æœŸé—´ï¼Œcacheä¸­çš„æ—§æ•°æ®ä¼šè¢«è¯»å–ï¼Œå¯èƒ½ä¼šæœ‰ä¸€æ®µæ—¶é—´çš„æ•°æ®ä¸ä¸€è‡´ï¼Œä½†è¯»çš„æ•ˆç‡å¾ˆå¥½ã€‚â€”â€”ä¿è¯äº†æ•°æ®è¯»å–çš„æ•ˆç‡ï¼Œå¦‚æœä¸šåŠ¡å¯¹ä¸€è‡´æ€§è¦æ±‚ä¸æ˜¯å¾ˆé«˜ï¼Œè¿™ç§æ–¹æ¡ˆæœ€åˆé€‚ å…ˆåˆ é™¤ç¼“å­˜ï¼Œå†æ›´æ–°æ•°æ®åº“ âš ï¸ åªæœ‰è¯»æ‰ä¼šæ›´æ–°ç¼“å­˜ï¼ï¼ æ­£å¸¸æƒ…å†µ Açº¿ç¨‹è¿›è¡Œå†™æ“ä½œï¼Œå…ˆæ·˜æ±°ç¼“å­˜ï¼Œå†æ›´æ–°æ•°æ®åº“ Bçº¿ç¨‹è¿›è¡Œè¯»æ“ä½œï¼Œå‘ç°ç¼“å­˜ä¸­æ²¡æœ‰æƒ³è¦çš„æ•°æ®ï¼Œä»æ•°æ®åº“ä¸­è¯»å–æ›´æ–°åçš„æ–°æ•°æ® ï¼Œå¹¶æ›´æ–°ç¼“å­˜ é«˜å¹¶å‘å¼‚å¸¸ Açº¿ç¨‹è¿›è¡Œå†™æ“ä½œï¼Œå…ˆæ·˜æ±°ç¼“å­˜ï¼Œä½†ç”±äºç½‘ç»œåŸå› ç­‰æœªåŠæ—¶æ›´æ–°æ•°æ®åº“ Bçº¿ç¨‹è¯»å–ç¼“å­˜å¤±è´¥ï¼Œå»è¯»å–æ•°æ®åº“çš„æ˜¯æ—§å€¼ ï¼Œå¹¶å°†æ—§æ•°æ®æ”¾å…¥ç¼“å­˜ Açº¿ç¨‹å†æ›´æ–°æ•°æ®åº“æˆåŠŸï¼ˆåŒæ­¥æƒ…å†µä¸‹å†™æ“ä½œä¸æ›´æ–°redisè€Œè¯»æ“ä½œæ›´æ–°redisï¼‰ï¼Œæ­¤æ—¶ç¼“å­˜ï¼ˆæ—§ï¼‰å’Œæ•°æ®åº“ï¼ˆæ–°ï¼‰ä¸ä¸€è‡´ è€Œä¸”æ²¡æœ‰è®¾ç½®é”®è¿‡æœŸï¼Œä¼šä¿æŒå¾ˆé•¿æ—¶é—´çš„æ•°æ®ä¸ä¸€è‡´ã€‚ è§£å†³æ–¹æ¡ˆ å¼‚æ­¥æ›´æ–°ç¼“å­˜ ï¼šBçº¿ç¨‹è¯»æ“ä½œä¸æ›´æ–°ç¼“å­˜ï¼Œè€Œæ˜¯ç”±Açº¿ç¨‹å†™æ“ä½œæ›´æ–°æ•°æ®åº“æˆåŠŸåï¼Œé€šè¿‡binlogå¼‚æ­¥æ›´æ–°ç¼“å­˜ å»¶æ—¶åŒåˆ ï¼š Açº¿ç¨‹ä¼‘çœ Mç§’ï¼ˆç¡®ä¿äº‹åŠ¡éƒ½å·²æäº¤ï¼‰ï¼Œå†æ›´æ–°æ•°æ®åº“æˆåŠŸåï¼Œå†æ¬¡åˆ é™¤ç¼“å­˜ã€‚å…¶å®ƒçº¿ç¨‹è¿›è¡Œè¯»æ“ä½œæ—¶ï¼Œç¼“å­˜ä¸­æ— æ•°æ®ï¼Œä»æ•°æ®åº“ä¸­è¯»å–çš„æ˜¯æ›´æ–°åçš„æ–°æ•°æ®ï¼Œåˆå†æ¬¡ä¸€è‡´äº†ã€‚ å…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜ æ­£å¸¸æƒ…å†µ Açº¿ç¨‹è¿›è¡Œå†™æ“ä½œï¼Œå…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜ Bçº¿ç¨‹è¿›è¡Œè¯»æ“ä½œï¼Œå‘ç°ç¼“å­˜ä¸­æ²¡æœ‰æƒ³è¦çš„æ•°æ®ï¼Œä»æ•°æ®åº“ä¸­è¯»å–æ›´æ–°åçš„æ–°æ•°æ® ï¼Œå¹¶æ›´æ–°ç¼“å­˜ é«˜å¹¶å‘å¼‚å¸¸ Açº¿ç¨‹è¿›è¡Œå†™æ“ä½œï¼Œå…ˆæ›´æ–°æ•°æ®åº“ï¼Œä½†æœªæ¥å¾—åŠåˆ é™¤ç¼“å­˜ Bçº¿ç¨‹è¿›è¡Œè¯»æ“ä½œï¼Œè¯»å–ç¼“å­˜çš„æ—§æ•°æ®ï¼ˆèƒŒé”™ä¸€æ¬¡ï¼‰ï¼Œæ­¤æ—¶æ•°æ®ä¸ä¸€è‡´ Açº¿ç¨‹å†åˆ ç¼“å­˜ ä½†å…¶å®ƒçº¿ç¨‹è¿›è¡Œè¯»æ•°æ®çš„æ—¶å€™æ›´æ–°ç¼“å­˜ï¼Œæ›´æ–°ç¼“å­˜åˆä¸€è‡´äº†ï¼Œä¸ä¸€è‡´çš„æ—¶é—´å¾ˆçŸ­ã€‚ ä½†æ˜¯è¿˜å¯èƒ½ä¼šè€ƒè™‘ï¼š3. Açº¿ç¨‹åˆ é™¤ç¼“å­˜å¤±è´¥ ï¼Œæ­¤åè¯»å–çš„ä¸€ç›´éƒ½æ˜¯æ—§æ•°æ®äº†ã€‚ è§£å†³æ–¹æ¡ˆ æ¶ˆæ¯é˜Ÿåˆ—è¿›è¡Œåˆ é™¤è¡¥å¿ã€‚å¦‚æœRedisåˆ é™¤å‘ç°æŠ¥é”™ï¼Œå°†Redisçš„keyä½œä¸ºæ¶ˆæ¯å‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œç³»ç»Ÿæ”¶åˆ°æ¶ˆæ¯é˜Ÿåˆ—å†æ¬¡å¯¹Redisè¿›è¡Œåˆ é™¤æ“ä½œã€‚ 6.4 é›†ç¾¤ç›¸å…³ 1. Redisçš„åŒæ­¥æœºåˆ¶äº†è§£æ˜¯ä»€ä¹ˆï¼Ÿ Redisä¸»ä»å¤åˆ¶å¯ä»¥æ ¹æ®æ˜¯å¦æ˜¯å…¨é‡åˆ†ä¸ºï¼šå…¨é‡åŒæ­¥å’Œå¢é‡åŒæ­¥ã€‚ ä¸»ä»åˆšåˆšè¿æ¥çš„æ—¶å€™ï¼Œè¿›è¡Œå…¨é‡åŒæ­¥ï¼›å…¨åŒæ­¥ç»“æŸåï¼Œè¿›è¡Œå¢é‡åŒæ­¥ã€‚å½“ç„¶ï¼Œå¦‚æœæœ‰éœ€è¦ï¼Œslave åœ¨ä»»ä½•æ—¶å€™éƒ½å¯ä»¥å‘èµ·å…¨é‡åŒæ­¥ã€‚ å…¨é‡åŒæ­¥ Rediså…¨é‡å¤åˆ¶ä¸€èˆ¬å‘ç”Ÿåœ¨Slaveåˆå§‹åŒ–é˜¶æ®µï¼Œè¿™æ—¶Slaveéœ€è¦å°†Masterä¸Šçš„æ‰€æœ‰æ•°æ®éƒ½å¤åˆ¶ä¸€ä»½ï¼š â€‹ 1ï¼‰ä»æœåŠ¡å™¨è¿æ¥ä¸»æœåŠ¡å™¨ï¼Œå‘é€SYNCå‘½ä»¤ï¼› 2ï¼‰ä¸»æœåŠ¡å™¨æ¥æ”¶åˆ°SYNCå‘½ååï¼Œå¼€å§‹æ‰§è¡ŒBGSAVEå‘½ä»¤ï¼ˆ1ï¼‰ç”ŸæˆRDBæ–‡ä»¶ ï¼ˆ2ï¼‰å¹¶ä½¿ç”¨ç¼“å†²åŒºè®°å½•æ­¤åæ‰§è¡Œçš„æ‰€æœ‰å†™å‘½ä»¤ï¼› 3ï¼‰ä¸»æœåŠ¡å™¨BGSAVEæ‰§è¡Œå®Œåï¼Œå‘æ‰€æœ‰ä»æœåŠ¡å™¨å‘é€RDBå¿«ç…§æ–‡ä»¶ï¼Œå¹¶åœ¨å‘é€æœŸé—´ç»§ç»­è®°å½•è¢«æ‰§è¡Œçš„å†™å‘½ä»¤ï¼› 4ï¼‰ä»æœåŠ¡å™¨æ”¶åˆ°å¿«ç…§æ–‡ä»¶åä¸¢å¼ƒæ‰€æœ‰æ—§æ•°æ®ï¼Œè½½å…¥æ”¶åˆ°çš„å¿«ç…§ï¼› 5ï¼‰ä¸»æœåŠ¡å™¨å¿«ç…§å‘é€å®Œæ¯•åå¼€å§‹å‘ä»æœåŠ¡å™¨å‘é€ç¼“å†²åŒºä¸­çš„å†™å‘½ä»¤ï¼›ä»æœåŠ¡å™¨å®Œæˆå¯¹å¿«ç…§çš„è½½å…¥ï¼Œå¼€å§‹æ¥æ”¶å‘½ä»¤è¯·æ±‚ï¼Œå¹¶æ‰§è¡Œæ¥è‡ªä¸»æœåŠ¡å™¨ç¼“å†²åŒºçš„å†™å‘½ä»¤ï¼› å¢é‡åŒæ­¥ Slaveåˆå§‹åŒ–åå¼€å§‹æ­£å¸¸å·¥ä½œæ—¶ï¼šä¸»æœåŠ¡å™¨å‘ç”Ÿçš„å†™æ“ä½œåŒæ­¥åˆ°ä»æœåŠ¡å™¨çš„è¿‡ç¨‹ã€‚ ä¸»æœåŠ¡å™¨æ¯æ‰§è¡Œä¸€ä¸ªå†™å‘½ä»¤å°±ä¼šå‘ä»æœåŠ¡å™¨å‘é€ç›¸åŒçš„å†™å‘½ä»¤ï¼› ä»æœåŠ¡å™¨æ¥æ”¶å¹¶æ‰§è¡Œæ”¶åˆ°çš„å†™å‘½ä»¤ã€‚ 2.ã€æ–°è¡¥å……ã€‘ Redisé›†ç¾¤æ¶æ„æ¨¡å¼æœ‰å“ªå‡ ç§ï¼Ÿé›†ç¾¤çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ å¾…è¡¥å……ï¼šRedis æ¶æ„æ¨¡å¼è¯¦è§£ï¼ˆå•æœºã€ä¸»ä»ã€å“¨å…µã€é›†ç¾¤æ¨¡å¼ï¼‰ 1. å•æœºæ¨¡å¼ QPSï¼ˆæ¯ç§’æŸ¥è¯¢é€Ÿåº¦ï¼‰å¤§çº¦åœ¨å‡ ä¸‡å·¦å³ã€‚ å®‰è£…ä¸€ä¸ª Redisï¼Œå¯åŠ¨èµ·æ¥ï¼Œä¸šåŠ¡è°ƒç”¨å³å¯ã€‚ ä¼˜ç‚¹ï¼š éƒ¨ç½²ç®€å•ï¼›æˆæœ¬ä½ï¼›é«˜æ€§èƒ½ ç¼ºç‚¹ï¼š å•èŠ‚ç‚¹å®•æœºé£é™© ; å•æœºé«˜æ€§èƒ½å—é™äº CPU çš„å¤„ç†èƒ½åŠ› 2. ä¸»ä»å¤åˆ¶ Redis çš„å¤åˆ¶ï¼ˆReplicationï¼‰åŠŸèƒ½å…è®¸ç”¨æˆ·æ ¹æ®ä¸€ä¸ª Redis æœåŠ¡å™¨æ¥åˆ›å»ºä»»æ„å¤šä¸ªè¯¥æœåŠ¡å™¨çš„å¤åˆ¶å“ã€‚ è¢«å¤åˆ¶çš„æœåŠ¡å™¨ä¸ºä¸»æœåŠ¡å™¨ï¼ˆMasterï¼‰ï¼Œè€Œé€šè¿‡å¤åˆ¶åˆ›å»ºå‡ºæ¥çš„å¤åˆ¶å“åˆ™ä¸ºä»æœåŠ¡å™¨ï¼ˆSlaveï¼‰ã€‚ ä¸»è¦ä¼˜ç¼ºç‚¹ï¼š ä¼˜ç‚¹ï¼š Master/Slave è§’è‰²æ–¹ä¾¿æ°´å¹³æ‰©å±•ï¼Œé™ä½ Master è¯»å‹åŠ›ï¼Œè½¬äº¤ç»™ Slave èŠ‚ç‚¹ï¼› ç¼ºç‚¹ï¼š å¯é æ€§ä¿è¯ä¸æ˜¯å¾ˆå¥½ï¼Œä¸»èŠ‚ç‚¹æ•…éšœä¾¿æ— æ³•æä¾›å†™å…¥æœåŠ¡ï¼›æ²¡æœ‰è§£å†³ä¸»èŠ‚ç‚¹å†™çš„å‹åŠ› ï¼›ä¸»èŠ‚ç‚¹å®•æœºï¼Œéœ€è¦äººä¸ºå¹²é¢„ã€‚ 3. å“¨å…µæ¨¡å¼ Redis 2.8ç‰ˆæœ¬åå¼•å…¥äº†å“¨å…µçš„æ¦‚å¿µã€‚ ä¸»ä»æ¨¡å¼ä¸­ï¼Œå½“ä¸»èŠ‚ç‚¹å®•æœºä¹‹åï¼Œä»èŠ‚ç‚¹æ˜¯å¯ä»¥ä½œä¸ºä¸»èŠ‚ç‚¹é¡¶ä¸Šæ¥ç»§ç»­æä¾›æœåŠ¡ï¼Œä½†æ˜¯éœ€è¦ä¿®æ”¹åº”ç”¨æ–¹çš„ä¸»èŠ‚ç‚¹åœ°å€ï¼Œè¿˜éœ€è¦å‘½ä»¤æ‰€æœ‰ä»èŠ‚ç‚¹å»å¤åˆ¶æ–°çš„ä¸»èŠ‚ç‚¹æ•°æ®ï¼Œæ•´ä¸ªè¿‡ç¨‹éœ€è¦äººå·¥å¹²é¢„ã€‚ ä¸ºæ­¤ï¼Œå¼•å…¥äº†å“¨å…µï¼ˆSentinelï¼‰è¿™ä¸ªæ¦‚å¿µï¼Œåœ¨ä¸»ä»å¤åˆ¶çš„åŸºç¡€ä¸Šï¼Œå“¨å…µå®ç°äº†è‡ªåŠ¨åŒ–æ•…éšœæ¢å¤ã€‚å“¨å…µæ¨¡å¼ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œå“¨å…µèŠ‚ç‚¹å’Œæ•°æ®èŠ‚ç‚¹ï¼š å“¨å…µèŠ‚ç‚¹ï¼šå“¨å…µèŠ‚ç‚¹æ˜¯ç‰¹æ®Šçš„ Redis èŠ‚ç‚¹ï¼Œä¸å­˜å‚¨æ•°æ®ï¼› æ•°æ®èŠ‚ç‚¹ï¼šä¸»èŠ‚ç‚¹å’Œä»èŠ‚ç‚¹éƒ½æ˜¯æ•°æ®èŠ‚ç‚¹ã€‚ å“¨å…µå·¥ä½œåŸç†ï¼š æ¯ä¸ª Sentinel ä»¥æ¯ç§’ä¸€æ¬¡çš„é¢‘ç‡å‘å®ƒæ‰€çŸ¥çš„ Masterï¼ŒSlave ä»¥åŠå…¶ä»– Sentinel èŠ‚ç‚¹å‘é€ä¸€ä¸ª PING å‘½ä»¤ï¼› å¦‚æœä¸€ä¸ªå®ä¾‹ï¼ˆinstanceï¼‰è·ç¦»æœ€åä¸€æ¬¡æœ‰æ•ˆå›å¤ PING å‘½ä»¤çš„æ—¶é—´è¶…è¿‡é…ç½®æ–‡ä»¶ own-after-milliseconds é€‰é¡¹æ‰€æŒ‡å®šçš„å€¼ï¼Œåˆ™è¿™ä¸ªå®ä¾‹ä¼šè¢« Sentinel æ ‡è®°ä¸ºä¸»è§‚ä¸‹çº¿ï¼› å¦‚æœä¸€ä¸ª Master è¢«æ ‡è®°ä¸ºä¸»è§‚ä¸‹çº¿ï¼Œé‚£ä¹ˆæ­£åœ¨ç›‘è§†è¿™ä¸ª Master çš„æ‰€æœ‰ Sentinel è¦ä»¥æ¯ç§’ä¸€æ¬¡çš„é¢‘ç‡ç¡®è®¤ Master æ˜¯å¦çœŸçš„è¿›å…¥ä¸»è§‚ä¸‹çº¿çŠ¶æ€ï¼› å½“æœ‰è¶³å¤Ÿæ•°é‡çš„ Sentinelï¼ˆå¤§äºç­‰äºé…ç½®æ–‡ä»¶æŒ‡å®šçš„å€¼ï¼‰åœ¨æŒ‡å®šçš„æ—¶é—´èŒƒå›´å†…ç¡®è®¤ Master çš„ç¡®è¿›å…¥äº†ä¸»è§‚ä¸‹çº¿çŠ¶æ€ï¼Œåˆ™ Master ä¼šè¢«æ ‡è®°ä¸ºå®¢è§‚ä¸‹çº¿ï¼› å¦‚æœ Master å¤„äº ODOWN çŠ¶æ€ï¼Œåˆ™æŠ•ç¥¨è‡ªåŠ¨é€‰å‡ºæ–°çš„ä¸»èŠ‚ç‚¹;å°†å‰©ä½™çš„ä»èŠ‚ç‚¹æŒ‡å‘æ–°çš„ä¸»èŠ‚ç‚¹ç»§ç»­è¿›è¡Œæ•°æ®å¤åˆ¶ï¼› è‹¥æ²¡æœ‰è¶³å¤Ÿæ•°é‡çš„ Sentinel åŒæ„ Master å·²ç»ä¸‹çº¿ï¼ŒMaster çš„å®¢è§‚ä¸‹çº¿çŠ¶æ€å°±ä¼šè¢«ç§»é™¤ã€‚è‹¥ Master é‡æ–°å‘ Sentinel çš„ PING å‘½ä»¤è¿”å›æœ‰æ•ˆå›å¤ï¼ŒMaster çš„ä¸»è§‚ä¸‹çº¿çŠ¶æ€å°±ä¼šè¢«ç§»é™¤ã€‚ å“¨å…µæ¨¡å¼ä¼˜ç¼ºç‚¹ï¼š ä¼˜ç‚¹ï¼šï¼ˆ1ï¼‰ä¸»ä»è‡ªåŠ¨åˆ‡æ¢ï¼Œæ›´åŠ å¥å£® ç¼ºç‚¹ï¼š ï¼ˆ1ï¼‰ä¸»ä»åˆ‡æ¢éœ€è¦æ—¶é—´è¿˜æ˜¯ä¼šä¸¢å¤±æ•°æ®ï¼›ï¼ˆ2ï¼‰æ²¡æœ‰è§£å†³ä¸»èŠ‚ç‚¹å†™å‹åŠ› ï¼ˆ3ï¼‰åŠ¨æ€æ‰©å®¹å¤æ‚ 4. é›†ç¾¤æ¨¡å¼ Redis 3.0 ç‰ˆæœ¬å¼•å…¥äº†Redis Clusteré›†ç¾¤æ¨¡å¼ã€‚ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼šè¯¥é›†ç¾¤ä¸­åŒ…å« 6 ä¸ª Redis èŠ‚ç‚¹ï¼Œ3 ä¸» 3 ä»ï¼Œåˆ†åˆ«ä¸º M1ï¼ŒM2ï¼ŒM3ï¼ŒS1ï¼ŒS2ï¼ŒS3ã€‚é™¤äº†ä¸»ä» Redis èŠ‚ç‚¹ä¹‹é—´è¿›è¡Œæ•°æ®å¤åˆ¶å¤–ï¼Œæ‰€æœ‰ Redis èŠ‚ç‚¹ä¹‹é—´é‡‡ç”¨ Gossip åè®®è¿›è¡Œé€šä¿¡ï¼Œäº¤æ¢ç»´æŠ¤èŠ‚ç‚¹å…ƒæ•°æ®ä¿¡æ¯ Redis Cluster é‡‡ç”¨æ— ä¸­å¿ƒç»“æ„ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥ä¿å­˜æ•°æ®å’Œæ•´ä¸ªé›†ç¾¤çŠ¶æ€ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å’Œå…¶ä»–æ‰€æœ‰èŠ‚ç‚¹è¿æ¥ã€‚ Cluster ä¸€èˆ¬ç”±å¤šä¸ªèŠ‚ç‚¹ç»„æˆï¼ŒèŠ‚ç‚¹æ•°é‡è‡³å°‘ä¸º 6 ä¸ªæ‰èƒ½ä¿è¯ç»„æˆå®Œæ•´é«˜å¯ç”¨çš„é›†ç¾¤ï¼Œå…¶ä¸­3ä¸ªä¸ºä¸»èŠ‚ç‚¹ï¼Œ3ä¸ªä¸ºä»èŠ‚ç‚¹ï¼› 4.1 Redis é›†ç¾¤åˆ†ç‰‡æ¦‚å¿µ å•æœºã€ä¸»ä»ã€å“¨å…µçš„æ¨¡å¼æ•°æ®éƒ½æ˜¯å­˜å‚¨åœ¨ä¸€ä¸ªmasterèŠ‚ç‚¹ä¸Šï¼Œå…¶ä»–èŠ‚ç‚¹è¿›è¡Œæ•°æ®çš„å¤åˆ¶ã€‚ é›†ç¾¤æ¨¡å¼å°±æ˜¯æŠŠæ•°æ®è¿›è¡Œåˆ†ç‰‡å­˜å‚¨ï¼Œå½“ä¸€ä¸ªåˆ†ç‰‡æ•°æ®è¾¾åˆ°ä¸Šé™çš„æ—¶å€™ï¼Œè¿˜å¯ä»¥åˆ†æˆå¤šä¸ªåˆ†ç‰‡ã€‚ Redis Cluster é‡‡ç”¨è™šæ‹Ÿå“ˆå¸Œæ§½åˆ†åŒºï¼Œæ‰€æœ‰çš„é”®æ ¹æ®å“ˆå¸Œå‡½æ•°æ˜ å°„åˆ° 0 ~ 16383 æ•´æ•°æ§½å†…ï¼Œè®¡ç®—å…¬å¼ï¼š HASH_SLOT = CRC16(key) % 16384 æ¯ä¸€ä¸ªä¸»èŠ‚ç‚¹è´Ÿè´£ç»´æŠ¤ä¸€éƒ¨åˆ†æ§½ä»¥åŠæ§½æ‰€æ˜ å°„çš„é”®å€¼æ•°æ®ã€‚ ä¸¾ä¾‹è¯´æ˜ï¼š æœ‰ 3 ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤ç¯å¢ƒå¦‚ä¸‹ èŠ‚ç‚¹ A å“ˆå¸Œæ§½èŒƒå›´ä¸º 0 ~ 5500ï¼› èŠ‚ç‚¹ B å“ˆå¸Œæ§½èŒƒå›´ä¸º 5501 ~ 11000ï¼› èŠ‚ç‚¹ C å“ˆå¸Œæ§½èŒƒå›´ä¸º 11001 ~ 16383ã€‚ å¢åŠ æ•°æ®ï¼š ï¼ˆ1ï¼‰æ ¹æ®ä¸Šè¿°å…¬å¼è®¡ç®—æ–°å¢çš„keyå­˜å‚¨ ï¼Œæ˜ å°„åˆ°ç›¸åº”èŠ‚ç‚¹ï¼ˆå‡è®¾ä¸ºBï¼‰ å¢åŠ èŠ‚ç‚¹ï¼š ï¼ˆ1ï¼‰ä»å„ä¸ªèŠ‚ç‚¹æ‹¿å‡ºä¸€éƒ¨åˆ†å“ˆå¸Œæ§½åˆ†é…åˆ°æ–°å¢çš„DèŠ‚ç‚¹ä¸Šå³å¯ åˆ é™¤èŠ‚ç‚¹ï¼š ï¼ˆ1ï¼‰åˆ é™¤AèŠ‚ç‚¹ï¼Œåªéœ€å°†AèŠ‚ç‚¹çš„å“ˆå¸Œæ§½ç§»åŠ¨åˆ°å…¶å®ƒèŠ‚ç‚¹æ¥å£ 4.2 Reidsé›†ç¾¤çš„ä¸»ä»æ¨¡å¼ Redis Cluster ä¸ºäº†ä¿è¯æ•°æ®çš„é«˜å¯ç”¨æ€§ï¼ŒåŠ å…¥äº†ä¸»ä»æ¨¡å¼ï¼Œä¸€ä¸ªä¸»èŠ‚ç‚¹å¯¹åº”ä¸€ä¸ªæˆ–å¤šä¸ªä»èŠ‚ç‚¹ï¼Œä¸»èŠ‚ç‚¹æä¾›æ•°æ®å­˜å–ï¼Œä»èŠ‚ç‚¹å¤åˆ¶ä¸»èŠ‚ç‚¹æ•°æ®å¤‡ä»½ï¼Œå½“è¿™ä¸ªä¸»èŠ‚ç‚¹æŒ‚æ‰åï¼Œå°±ä¼šé€šè¿‡è¿™ä¸ªä¸»èŠ‚ç‚¹çš„ä»èŠ‚ç‚¹é€‰å–ä¸€ä¸ªæ¥å……å½“ä¸»èŠ‚ç‚¹ï¼Œä»è€Œä¿è¯é›†ç¾¤çš„é«˜å¯ç”¨ã€‚ 4.3 ä¼˜ç¼ºç‚¹æ€»ç»“ ä¼˜ç‚¹ï¼š ï¼ˆ1ï¼‰æ— ä¸­å¿ƒç»“æ„ ï¼Œå¤šèŠ‚ç‚¹å­˜å‚¨æ•°æ®ï¼›ï¼ˆ2ï¼‰èŠ‚ç‚¹åŠ¨æ€åˆ é™¤ã€ç§»åŠ¨æ•°æ®åˆ†å¸ƒæ–¹ä¾¿ï¼›ï¼ˆ3ï¼‰éƒ¨åˆ†èŠ‚ç‚¹ä¸å¯ç”¨ï¼Œé›†ç¾¤ä¾æ—§å¯ç”¨ï¼ˆå“ˆå¸Œæ§½ + ä»èŠ‚ç‚¹å¤‡ä»½å¹¶æ•…éšœæ™‹å‡ä¸»èŠ‚ç‚¹ï¼‰ï¼› ç¼ºç‚¹ï¼š ï¼ˆ1ï¼‰å¼‚æ­¥å¤åˆ¶ï¼Œæ— æ³•ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼ˆ2ï¼‰é›†ç¾¤æ­å»ºå¤æ‚ï¼ˆ3ï¼‰mget,pipelineç­‰å‘½ä»¤ã€‚å®ƒä»¬éœ€è¦æŠŠè¯·æ±‚åˆ†æ•£åˆ°å¤šä¸ªèŠ‚ç‚¹æ‰§è¡Œã€å†èšåˆã€‚èŠ‚ç‚¹è¶Šå¤šï¼Œæ€§èƒ½è¶Šä½ 3.è¯´è¯´ Rediså“ˆå¸Œæ§½çš„æ¦‚å¿µï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹ä¼šå¯¼è‡´æ•´ä¸ªé›†ç¾¤ä¸å¯ç”¨ï¼Ÿ Redis æ²¡æœ‰ä½¿ç”¨å“ˆå¸Œä¸€è‡´æ€§ç®—æ³•ï¼Œè€Œæ˜¯ä½¿ç”¨å“ˆå¸Œæ§½ã€‚Redis ä¸­çš„å“ˆå¸Œæ§½ä¸€å…±æœ‰ 16384 ä¸ªï¼Œè®¡ç®—ç»™å®šå¯†é’¥çš„å“ˆå¸Œæ§½ï¼Œæˆ‘ä»¬åªéœ€è¦å¯¹å¯†é’¥çš„ CRC16 å–æ‘¸ 16384ã€‚ å‡è®¾é›†ç¾¤ä¸­æœ‰ Aã€Bã€C ä¸‰ä¸ªé›†ç¾¤èŠ‚ç‚¹ï¼Œä¸å­˜åœ¨å¤åˆ¶æ¨¡å¼ä¸‹ï¼Œæ¯ä¸ªé›†ç¾¤çš„èŠ‚ç‚¹åŒ…å«çš„å“ˆå¸Œæ§½å¦‚ä¸‹ï¼š èŠ‚ç‚¹ A åŒ…å«ä» 0 åˆ° 5500 çš„å“ˆå¸Œæ§½ï¼› èŠ‚ç‚¹ B åŒ…å«ä» 5501 åˆ° 11000 çš„å“ˆå¸Œæ§½ï¼› èŠ‚ç‚¹ C åŒ…å«ä» 11001 åˆ° 16383 çš„å“ˆå¸Œæ§½ï¼› è¿™æ—¶ï¼Œå¦‚æœèŠ‚ç‚¹ B å‡ºç°æ•…éšœï¼Œæ•´ä¸ªé›†ç¾¤å°±ä¼šå‡ºç°ç¼ºå°‘ 5501 åˆ° 11000 çš„å“ˆå¸Œæ§½èŒƒå›´è€Œä¸å¯ç”¨ã€‚ 4. Redis å¸¸è§æ€§èƒ½é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆæœ‰å“ªäº›ï¼Ÿ Redis å¸¸è§æ€§èƒ½é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š Masterä¸åšæŒä¹…åŒ–ï¼Œ Slave åš AOFï¼šMaster æœ€å¥½ä¸è¦åšä»»ä½•æŒä¹…åŒ–å·¥ä½œï¼Œå¦‚ RDB å†…å­˜å¿«ç…§å’Œ AOF æ—¥å¿—æ–‡ä»¶ï¼›å¦‚æœæ•°æ®æ¯”è¾ƒé‡è¦ï¼ŒæŸä¸ª Slave å¼€å¯ AOF å¤‡ä»½æ•°æ®ï¼Œç­–ç•¥è®¾ç½®ä¸ºæ¯ç§’åŒæ­¥ä¸€æ¬¡ï¼› åŒå±€åŸŸç½‘ï¼šä¸ºäº†ä¸»ä»å¤åˆ¶çš„é€Ÿåº¦å’Œè¿æ¥çš„ç¨³å®šæ€§ï¼ŒMaster å’Œ Slave æœ€å¥½åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†…ï¼› å°½é‡é¿å…åœ¨å‹åŠ›å¾ˆå¤§çš„ä¸»åº“ä¸Šå¢åŠ ä»åº“ï¼› ä¸»ä»å¤åˆ¶ä¸è¦ç”¨å›¾çŠ¶ç»“æ„ï¼Œç”¨å•å‘é“¾è¡¨ç»“æ„æ›´ä¸ºç¨³å®šï¼Œå³ï¼šMaster &lt;- Slave1 &lt;- Slave2 &lt;-Slave3â€¦.ï¼›è¿™æ ·çš„ç»“æ„æ–¹ä¾¿è§£å†³å•ç‚¹æ•…éšœé—®é¢˜ï¼Œå®ç° Slave å¯¹ Master çš„æ›¿æ¢ã€‚å¦‚æœ Master æŒ‚äº†ï¼Œå¯ä»¥ç«‹åˆ»å¯ç”¨ Slave1 åš Masterï¼Œå…¶ä»–ä¸å˜ 6.5 Redis Keyç›¸å…³ 1.å‡å¦‚ Redis é‡Œé¢æœ‰ 1 äº¿ä¸ª keyï¼Œå…¶ä¸­æœ‰ 10w ä¸ª key æ˜¯ä»¥æŸä¸ªå›ºå®šçš„å·²çŸ¥çš„å‰ç¼€å¼€å¤´çš„ï¼Œå¦‚æœå°†å®ƒä»¬å…¨éƒ¨æ‰¾å‡ºæ¥ï¼Ÿ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ keys å‘½ä»¤å’Œ scan å‘½ä»¤ï¼Œä½†æ˜¯ä¼šå‘ç°ä½¿ç”¨ scan æ›´å¥½ã€‚ keyså‘½ä»¤ è™½ç„¶å¯ä»¥æŸ¥è¯¢ä½†ä¸å¤ªæ¨èï¼š æ—¶é—´é•¿ä¸”ä¼šå¯¼è‡´çº¿ç¨‹é˜»å¡ï¼š æ—¶é—´é•¿æ˜¯å› ä¸ºO(N)éå† ï¼› é˜»å¡æ˜¯å› ä¸ºRediså•çº¿ç¨‹ï¼Œè¦ç­‰éå†å®Œï¼Œè¿™ä½¿å¾—Redisè¦ç­‰keysæ‰§è¡Œå®Œæ¯•æ‰èƒ½æ¢å¤ç”Ÿäº§ï¼ˆåœ¨ç”Ÿæˆç¯å¢ƒä¸­è¿™æ˜¯ä¸è¢«å…è®¸çš„ï¼‰ã€‚ æ²¡æœ‰åˆ†é¡µåŠŸèƒ½ï¼š ä¸€æ¬¡æŸ¥æ‰¾æ‰€æœ‰çš„ç»“æœ scanå‘½ä»¤ æ¨èï¼š ä¸ä¼šé˜»å¡ï¼Œä½†æŸ¥æ‰¾å‡ºçš„å…ƒç´ å¯èƒ½é‡å¤ï¼Œéœ€è¦å®¢æˆ·ç«¯å»é‡ä¸‹ ä¸ºä»€ä¹ˆä¸ä¼šé˜»å¡ï¼Ÿ å› ä¸º scan æ˜¯é€šè¿‡æ¸¸æ ‡æ–¹å¼æŸ¥è¯¢çš„ ï¼ŒæŸ¥è¯¢è¿‡ç¨‹ä¸­ä¼šæŠŠæ¸¸æ ‡è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå•æ¬¡è¿”å›ç©ºå€¼ä¸”æ¸¸æ ‡ä¸ä¸º 0ï¼Œåˆ™è¯´æ˜éå†è¿˜æ²¡ç»“æŸï¼Œå®¢æˆ·ç«¯ç»§ç»­éå†æŸ¥è¯¢ã€‚ 2.å¦‚æœæœ‰å¤§é‡çš„ key éœ€è¦è®¾ç½®åŒä¸€æ—¶é—´è¿‡æœŸï¼Œä¸€èˆ¬éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ å¦‚æœæœ‰å¤§é‡çš„ key åœ¨åŒä¸€æ—¶é—´è¿‡æœŸï¼Œé‚£ä¹ˆå¯èƒ½åŒä¸€ç§’éƒ½ä»æ•°æ®åº“è·å–æ•°æ®ï¼Œç»™æ•°æ®åº“é€ æˆå¾ˆå¤§çš„å‹åŠ›ï¼Œå¯¼è‡´ç¼“å­˜é›ªå´©ã€‚ è§£å†³æ–¹æ¡ˆï¼š æœ€å¥½ç»™æ•°æ®çš„è¿‡æœŸæ—¶é—´åŠ ä¸€ä¸ªéšæœºå€¼ï¼Œè®©è¿‡æœŸæ—¶é—´æ›´åŠ åˆ†æ•£ 3.ä»€ä¹ˆæ˜¯ bigkeyï¼Ÿä¼šå­˜åœ¨ä»€ä¹ˆå½±å“ï¼Ÿ bigkey æ˜¯æŒ‡é”®å€¼å ç”¨å†…å­˜ç©ºé—´éå¸¸å¤§çš„ keyã€‚ä¾‹å¦‚ä¸€ä¸ªå­—ç¬¦ä¸² a å­˜å‚¨äº† 200M çš„æ•°æ®ã€‚ bigkey çš„ä¸»è¦å½±å“æœ‰ï¼š ç½‘ç»œé˜»å¡ï¼šè·å– bigkey æ—¶ï¼Œä¼ è¾“çš„æ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œä¼šå¢åŠ å¸¦å®½çš„å‹åŠ›ï¼› è¶…æ—¶é˜»å¡ï¼šå› ä¸º bigkey å ç”¨çš„ç©ºé—´æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥æ“ä½œèµ·æ¥æ•ˆç‡ä¼šæ¯”è¾ƒä½ï¼Œå¯¼è‡´å‡ºç°é˜»å¡çš„å¯èƒ½æ€§å¢åŠ ã€‚ 4. Rediså¦‚ä½•è§£å†³ keyå†²çªï¼Ÿ Redis å¦‚æœ key ç›¸åŒï¼Œåä¸€ä¸ª key ä¼šè¦†ç›–å‰ä¸€ä¸ª keyã€‚ å¦‚æœè¦è§£å†³ key å†²çªï¼Œæœ€å¥½ç»™ key å–å¥½ååŒºåˆ†å¼€ï¼Œå¯ä»¥æŒ‰ä¸šåŠ¡åå’Œå‚æ•°åŒºåˆ†å¼€å–åï¼Œé¿å…é‡å¤ key å¯¼è‡´çš„å†²çªã€‚ 5. å¦‚ä½•è§£å†³Redisçš„å¹¶å‘ç«äº‰Keyé—®é¢˜ ï¼Ÿ å¤šä¸ªç³»ç»ŸåŒæ—¶å¯¹ä¸€ä¸ª key è¿›è¡Œæ“ä½œï¼Œä½†æ˜¯æœ€åæ‰§è¡Œçš„é¡ºåºå’Œæˆ‘ä»¬æœŸæœ›çš„é¡ºåºä¸åŒï¼Œè¿™æ ·ä¹Ÿå°±å¯¼è‡´äº†ç»“æœçš„ä¸åŒã€‚ è§£å†³æ–¹æ¡ˆï¼šåˆ†å¸ƒå¼é”ï¼ˆzookeeper å’Œ Redis éƒ½å¯ä»¥å®ç°åˆ†å¸ƒå¼é”ï¼‰ã€‚ zookeeperåˆ†å¸ƒå¼é”ï¼šï¼ˆ1ï¼‰æ¯ä¸ªå®¢æˆ·ç«¯å¯¹æŸä¸ªæ–¹æ³•åŠ é”æ—¶ï¼Œåœ¨zookeeperä¸Šçš„ ä¸è¯¥æ–¹æ³•å¯¹åº”çš„æŒ‡å®šèŠ‚ç‚¹çš„ç›®å½•ä¸‹ï¼Œç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ç¬æ—¶æœ‰åºèŠ‚ç‚¹ï¼›ï¼ˆ2ï¼‰åˆ¤æ–­æ˜¯å¦è·å–é”çš„æ–¹å¼å¾ˆç®€å•ï¼Œåªéœ€è¦åˆ¤æ–­æœ‰ åºèŠ‚ç‚¹ä¸­åºå·æœ€å°çš„ä¸€ä¸ªï¼›ï¼ˆ3ï¼‰å½“é‡Šæ”¾é”çš„æ—¶å€™ï¼Œåªéœ€å°†è¿™ä¸ªç¬æ—¶èŠ‚ç‚¹åˆ é™¤å³å¯ã€‚ åŒæ—¶ï¼Œå…¶å¯ä»¥é¿å…æœåŠ¡å®•æœºå¯¼è‡´çš„é”æ— æ³•é‡Šæ”¾ï¼Œè€Œäº§ç”Ÿçš„æ­»é”é—®é¢˜ã€‚ 6. Redisåˆ é™¤keyçš„åº•å±‚åŸç†å®ç°ï¼Ÿ å‚è€ƒï¼šhttps://www.hoohack.me/2019/06/24/redis-expire-strategy Redisåœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œä¼šæ³¨å†Œä¸¤ç§äº‹ä»¶ï¼š æ—¶é—´äº‹ä»¶ï¼š Rediså¤„ç†åå°æ“ä½œçš„ä¸€ç±»äº‹ä»¶ï¼Œæ¯”å¦‚å®¢æˆ·ç«¯è¶…æ—¶ã€åˆ é™¤è¿‡æœŸkey æ–‡ä»¶äº‹ä»¶ï¼š redisæ³¨å†Œçš„å›è°ƒå‡½æ•°æ˜¯serverCronï¼Œåœ¨å®šæ—¶ä»»åŠ¡ï¼ˆæƒ°æ€§åˆ é™¤ï¼‰å›è°ƒå‡½æ•°ä¸­ï¼Œé€šè¿‡è°ƒç”¨databasesCronæ¸…ç†éƒ¨åˆ†è¿‡æœŸkey å®šæ—¶åˆ é™¤ å¯¹äºæ¯ä¸€ä¸ªè®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyéƒ½ä¼šåˆ›å»ºä¸€ä¸ªå®šæ—¶å™¨ï¼Œä¸€æ—¦åˆ°è¾¾è¿‡æœŸæ—¶é—´å°±ç«‹å³åˆ é™¤ï¼š ç¼ºç‚¹ï¼šå ç”¨äº†å¤§é‡çš„CPUèµ„æºå»å¤„ç†è¿‡æœŸçš„æ•°æ®ï¼Œä¼šå½±å“Redisçš„ååé‡å’Œå“åº”æ—¶é—´ã€‚ æƒ°æ€§åˆ é™¤ æ¯æ¬¡è®¿é—®keyçš„æ—¶å€™ï¼Œéƒ½ä¼šè°ƒç”¨expireIfNeededå‡½æ•°åˆ¤æ–­keyæ˜¯å¦è¿‡æœŸï¼Œå¦‚æœæ˜¯ï¼Œæ¸…ç†keyï¼š ç¼ºç‚¹ï¼šå¤§é‡çš„è¿‡æœŸkeyæ²¡æœ‰è¢«å†æ¬¡è®¿é—®ï¼Œå› æ­¤ä¸ä¼šè¢«æ¸…é™¤ï¼Œå¯¼è‡´å ç”¨äº†å¤§é‡çš„å†…å­˜ã€‚ å®šæœŸåˆ é™¤ æ¯éš”ä¸€æ®µæ—¶é—´ï¼Œæ‰«æRedisä¸­è¿‡æœŸkeyå­—å…¸ï¼Œå¹¶æ¸…é™¤éƒ¨åˆ†è¿‡æœŸçš„keyï¼š ç¼ºç‚¹ï¼šæŠ˜ä¸­æ–¹æ¡ˆ Rediså•çº¿ç¨‹æ¸…ç†keyçš„æ—¶æœº Redisæ˜¯ä»¥å•çº¿ç¨‹è¿è¡Œçš„ï¼Œåœ¨æ¸…ç†keyæ˜¯ä¸èƒ½å ç”¨è¿‡å¤šçš„æ—¶é—´å’ŒCPUï¼Œéœ€è¦åœ¨å°½é‡ä¸å½±å“æ­£å¸¸çš„æœåŠ¡æƒ…å†µä¸‹ï¼Œè¿›è¡Œè¿‡æœŸkeyçš„æ¸…ç†ã€‚ ä»¥éšæœºåˆ é™¤ä¸ºä¾‹ server.hzé…ç½®äº†serverCronä»»åŠ¡çš„æ‰§è¡Œå‘¨æœŸï¼Œé»˜è®¤æ˜¯10ï¼Œå³CPUç©ºé—²æ—¶æ¯ç§’æ‰§è¡Œåæ¬¡ï¼› æ¯æ¬¡æ¸…ç†è¿‡æœŸkeyçš„æ—¶é—´ä¸èƒ½è¶…è¿‡CPUæ—¶é—´çš„25% ï¼› å¦‚æœæ˜¯å¿«é€Ÿæ¸…ç†æ¨¡å¼ï¼ˆåœ¨beforeSleepå‡½æ•°è°ƒç”¨ï¼‰ï¼Œåˆ™ä¸€æ¬¡æ¸…ç†çš„æœ€å¤§æ—¶é—´æ˜¯1msï¼› ä¾æ¬¡éå†æ‰€æœ‰çš„DBï¼› ä»dbçš„è¿‡æœŸåˆ—è¡¨ä¸­éšæœºå–20ä¸ªkeyï¼Œåˆ¤æ–­æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœè¿‡æœŸï¼Œåˆ™æ¸…ç†ï¼› å¦‚æœæœ‰5ä¸ªä»¥ä¸Šçš„keyè¿‡æœŸï¼Œåˆ™é‡å¤æ­¥éª¤5ï¼Œå¦åˆ™ç»§ç»­å¤„ç†ä¸‹ä¸€ä¸ªdb ï¼› åœ¨æ¸…ç†è¿‡ç¨‹ä¸­ï¼Œå¦‚æœè¾¾åˆ°CPUçš„25%æ—¶é—´ï¼Œé€€å‡ºæ¸…ç†è¿‡ç¨‹ã€‚ Redis4.0ä½¿ç”¨BIOå¤„ç† Redis4.0ä»¥å‰ï¼Œåˆ é™¤æŒ‡ä»¤æ˜¯delï¼Œdelä¼šç›´æ¥é‡Šæ”¾å¯¹è±¡çš„å†…å­˜ï¼Œä½†æ˜¯ï¼Œå¦‚æœåˆ é™¤çš„keyæ˜¯ä¸€ä¸ªéå¸¸å¤§çš„å¯¹è±¡ï¼Œé‚£ä¹ˆåˆ é™¤æ“ä½œå°±ä¼šå¯¼è‡´å•çº¿ç¨‹å¡é¡¿ï¼ŒRedisçš„å“åº”å°±æ…¢äº†ã€‚ åœ¨Redis4.0ç‰ˆæœ¬å¼•å…¥äº†unlinkæŒ‡ä»¤ï¼Œèƒ½å¯¹åˆ é™¤æ“ä½œè¿›è¡Œâ€œæ‡’â€å¤„ç†ï¼Œå°†åˆ é™¤æ“ä½œä¸¢ç»™åå°çº¿ç¨‹ï¼Œç”±åå°çº¿ç¨‹BIOæ¥å¼‚æ­¥å›æ”¶å†…å­˜ã€‚ å†…å­˜æ·˜æ±°ç­–ç•¥ Redisçš„å†…å­˜æ·˜æ±°ç­–ç•¥ï¼Œæ˜¯æŒ‡å†…å­˜è¾¾åˆ°maxmemoryæé™æ—¶ï¼Œä½¿ç”¨æŸç§ç®—æ³•æ¥å†³å®šæ¸…ç†æ‰å“ªäº›æ•°æ®ï¼Œä»¥ä¿è¯æ–°æ•°æ®çš„å­˜å…¥ã€‚","categories":[{"name":"æ ¡æ‹›ç¬”è®°","slug":"æ ¡æ‹›ç¬”è®°","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/"},{"name":"è®¡ç®—æœºåŸºç¡€","slug":"æ ¡æ‹›ç¬”è®°/è®¡ç®—æœºåŸºç¡€","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"æ ¡æ‹›","slug":"æ ¡æ‹›","permalink":"https://hwh.zone/tags/%E6%A0%A1%E6%8B%9B/"},{"name":"è®¡ç®—æœºåŸºç¡€","slug":"è®¡ç®—æœºåŸºç¡€","permalink":"https://hwh.zone/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://hwh.zone/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"Redis","slug":"Redis","permalink":"https://hwh.zone/tags/Redis/"}]},{"title":"æ ¡æ‹›ç¬”è®°ï¼ˆäº”ï¼‰_è®¡ç®—æœºåŸºç¡€_MySQL","slug":"æ ¡æ‹›ç¬”è®°ï¼ˆäº”ï¼‰_è®¡ç®—æœºåŸºç¡€_MySQL","date":"2021-11-26T12:57:42.047Z","updated":"2022-03-24T14:30:14.678Z","comments":true,"path":"p/56848/","link":"","permalink":"https://hwh.zone/p/56848/","excerpt":"","text":"æˆ‘çš„æ ¡æ‹›è®°å½•ï¼šæ ¡æ‹›ç¬”è®°ï¼ˆé›¶ï¼‰_å†™åœ¨å‰é¢ ï¼Œä»¥ä¸‹æ˜¯æ ¡æ‹›ç¬”è®°æ€»ç›®å½•ã€‚ å¤‡æ³¨ ç®—æ³•èƒ½åŠ›ï¼ˆâ€œåˆ·é¢˜â€ï¼‰ è¿™éƒ¨åˆ†å°±æ˜¯è€—æ—¶é—´å¤šç»ƒä¹ ï¼ŒLeetcode-Top100 æ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚ è¡¥å……ç»ƒä¹ ï¼šcodeTop è®¡ç®—æœºåŸºç¡€(ä¸Š)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_Javaå…¥é—¨ C++åç«¯åç»­æ›´æ–° æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é¢å¯¹å¯¹è±¡ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é›†åˆ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_å¤šçº¿ç¨‹ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é” æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_JVM è®¡ç®—æœºåŸºç¡€(ä¸‹)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆäºŒï¼‰__è®¡ç®—æœºåŸºç¡€_Linux&amp;Git æ ¡æ‹›ç¬”è®°ï¼ˆä¸‰ï¼‰__è®¡ç®—æœºåŸºç¡€_è®¡ç®—æœºç½‘ç»œ æ ¡æ‹›ç¬”è®°ï¼ˆå››ï¼‰__è®¡ç®—æœºåŸºç¡€_æ“ä½œç³»ç»Ÿ æ ¡æ‹›ç¬”è®°ï¼ˆäº”ï¼‰__è®¡ç®—æœºåŸºç¡€_MySQL æ ¡æ‹›ç¬”è®°ï¼ˆå…­ï¼‰__è®¡ç®—æœºåŸºç¡€_Redis æ ¡æ‹›ç¬”è®°ï¼ˆä¸ƒï¼‰__è®¡ç®—æœºåŸºç¡€_æ•°æ®ç»“æ„ æ ¡æ‹›ç¬”è®°ï¼ˆå…«ï¼‰__è®¡ç®—æœºåŸºç¡€_åœºæ™¯&amp;æ™ºåŠ›é¢˜ æ ¡æ‹›ç¬”è®°ï¼ˆä¹ï¼‰__è®¡ç®—æœºåŸºç¡€_ç›¸å…³è¡¥å…… é¡¹ç›®&amp;å®ä¹  ä¸»è¦æ˜¯æ€ä¹ˆå‡†å¤‡é¡¹ç›®ï¼Œåç»­æ›´æ–° äº”ã€MySQL 5.1 MySQLåŸºæœ¬ 0. å…³ç³»å‹æ•°æ®åº“å’Œéå…³ç³»æ•°æ®åº“çš„åŒºåˆ«ï¼Ÿ å…³ç³»å‹æ•°æ®åº“çš„ä¼˜ç‚¹ å®¹æ˜“ç†è§£ï¼Œå› ä¸ºå®ƒé‡‡ç”¨äº†å…³ç³»æ¨¡å‹æ¥ç»„ç»‡æ•°æ®ï¼› å¯ä»¥ä¿æŒæ•°æ®çš„ä¸€è‡´æ€§ï¼› æ•°æ®æ›´æ–°çš„å¼€é”€æ¯”è¾ƒå°ï¼› æ”¯æŒå¤æ‚æŸ¥è¯¢ï¼ˆå¸¦whereå­å¥çš„æŸ¥è¯¢ï¼‰ã€‚ éå…³ç³»å‹æ•°æ®åº“çš„ä¼˜ç‚¹ ä¸éœ€è¦ç»è¿‡SQLå±‚çš„è§£æï¼Œè¯»å†™æ•ˆç‡é«˜ï¼› åŸºäºé”®å€¼å¯¹ï¼Œæ•°æ®çš„æ‰©å±•æ€§å¾ˆå¥½ï¼› æ”¯æŒå¤šç§ç±»å‹æ•°æ®çš„å­˜å‚¨ï¼Œå¦‚å›¾ç‰‡ï¼Œæ–‡æ¡£ç­‰ç­‰ã€‚ 1.ä»‹ç»ä¸€ä¸‹æ•°æ®åº“ä¸‰èŒƒå¼ï¼Ÿ å‚è€ƒï¼šhttps://www.cnblogs.com/linjiqin/archive/2012/04/01/2428695.html ç¬¬ä¸€èŒƒå¼ï¼š æ•°æ®åº“è¡¨ä¸­çš„æ‰€æœ‰å­—æ®µå€¼éƒ½æ˜¯ä¸å¯åˆ†è§£çš„åŸå­å€¼ ã€‚ æ•°æ®åº“ç³»ç»Ÿä¸­éœ€è¦ç”¨åˆ°â€œåœ°å€â€è¿™ä¸ªå±æ€§ï¼Œæœ¬æ¥ç›´æ¥å°†â€œåœ°å€â€å±æ€§è®¾è®¡æˆä¸€ä¸ªæ•°æ®åº“è¡¨çš„å­—æ®µå°±è¡Œã€‚ä½†æ˜¯å¦‚æœç³»ç»Ÿç»å¸¸ä¼šè®¿é—®â€œåœ°å€â€å±æ€§ä¸­çš„â€œåŸå¸‚â€éƒ¨åˆ†ï¼Œé‚£ä¹ˆå°±éè¦å°†â€œåœ°å€â€è¿™ä¸ªå±æ€§é‡æ–°æ‹†åˆ†ä¸ºçœä»½ã€åŸå¸‚ã€è¯¦ç»†åœ°å€ç­‰å¤šä¸ªéƒ¨åˆ†è¿›è¡Œå­˜å‚¨ã€‚ ç¬¬äºŒèŒƒå¼ï¼š ç¬¬äºŒèŒƒå¼åŸºäºç¬¬ä¸€èŒƒå¼ï¼Œä¸”è¦æ±‚ï¼šæ•°æ®åº“è¡¨ä¸­çš„æ¯ä¸€åˆ—éƒ½å’Œä¸»é”®ç›¸å…³ï¼Œä¸”ä¸èƒ½åªä¸ä¸»é”®çš„æŸä¸€éƒ¨åˆ†ç›¸å…³ï¼ˆä¸»è¦é’ˆå¯¹è”åˆä¸»é”®è€Œè¨€ï¼‰, å³ä¸å­˜åœ¨éƒ¨åˆ†ä¾èµ–ï¼› ä¸‹è¡¨æ˜¯ä»¥ï¼šè®¢å•ç¼–å·&amp;å•†å“ç¼–å·ä½œä¸ºè”åˆä¸»é”®ã€‚è¿™æ ·åœ¨è¯¥è¡¨ä¸­å•†å“åç§°ã€å•ä½ã€å•†å“ä»·æ ¼ç­‰ä¿¡æ¯ä¸ä¸è¯¥è¡¨çš„è®¢å•ç¼–å·ç›¸å…³ï¼Œè€Œä»…ä»…æ˜¯ä¸å•†å“ç¼–å·ç›¸å…³ã€‚ æ‰€ä»¥æ ¹æ®ç¬¬äºŒèŒƒå¼ï¼Œå°†å®ƒè¿›è¡Œæ‹†åˆ†ä¸‰ä¸ªè¡¨ï¼š ç¬¬ä¸‰èŒƒå¼ï¼š åŸºäºç¬¬äºŒèŒƒå¼ï¼Œæ•°æ®è¡¨ä¸­çš„æ¯ä¸€åˆ—æ•°æ®éƒ½å’Œä¸»é”®ç›´æ¥ç›¸å…³ï¼Œå³ä¸å­˜åœ¨ä¼ é€’ä¾èµ–ï¼› æ¯”å¦‚åœ¨è®¾è®¡ä¸€ä¸ªè®¢å•æ•°æ®è¡¨çš„æ—¶å€™ï¼Œå¯ä»¥å°†å®¢æˆ·ç¼–å·ä½œä¸ºä¸€ä¸ªå¤–é”®å’Œè®¢å•è¡¨å»ºç«‹ç›¸åº”çš„å…³ç³»ã€‚è€Œä¸å¯ä»¥åœ¨è®¢å•è¡¨ä¸­æ·»åŠ å…³äºå®¢æˆ·å…¶å®ƒä¿¡æ¯ï¼ˆæ¯”å¦‚å§“åã€æ‰€å±å…¬å¸ç­‰ï¼‰çš„å­—æ®µã€‚ 2. MySQLæ•°æ®åº“å¼•æ“æœ‰å“ªäº›ï¼Ÿ MySQLæŸ¥çœ‹æ‰€æœ‰çš„æ•°æ®å¼•æ“ï¼š 1mysql&gt; show engines; MySQLå¸¸ç”¨å¼•æ“åŒ…æ‹¬ï¼šMYISAMã€Innodbã€Memoryã€MERGEï¼Œ MYISAM ï¼ˆè¯»ï¼šmy+i+sonï¼‰ ä»¥selectã€insertä¸ºä¸»çš„åº”ç”¨åŸºæœ¬ä¸Šå¯ä»¥ä½¿ç”¨è¿™å¼•æ“ã€‚ ä¼˜ç‚¹ï¼šå…¨è¡¨é”ï¼Œæ‹¥æœ‰è¾ƒé«˜çš„æ‰§è¡Œé€Ÿåº¦ï¼Œå ç”¨ç©ºé—´å°ï¼› ç¼ºç‚¹ ï¼šä¸æ”¯æŒäº‹åŠ¡ï¼Œä¸æ”¯æŒå¤–é”®ï¼Œå¹¶å‘æ€§èƒ½å·®ã€‚ Innodb Innodbå¼•æ“æä¾›äº†å¯¹æ•°æ®åº“ACIDäº‹åŠ¡çš„æ”¯æŒï¼Œå¹¶ä¸”å®ç°äº†SQLæ ‡å‡†çš„å››ç§éš”ç¦»çº§åˆ«ï¼Œå®ƒçš„è®¾è®¡ç›®æ ‡æ˜¯å¤„ç†å¤§å®¹é‡æ•°æ®åº“ç³»ç»Ÿã€‚ ä¼˜ç‚¹ï¼šè¡Œçº§é”ï¼Œæ”¯æŒäº‹åŠ¡ï¼Œæ”¯æŒè‡ªåŠ¨å¢é•¿åˆ—ï¼Œæ”¯æŒå¤–é”®çº¦æŸï¼Œå¹¶å‘èƒ½åŠ›å¼º ç¼ºç‚¹ï¼š å ç”¨ç©ºé—´æ˜¯MYISAMçš„2å€ï¼Œå¤„ç†æ•ˆç‡ç›¸å¯¹ä¹Ÿæ›´ä½ Memory ä¸»è¦ç”¨äºå†…å®¹å˜åŒ–ä¸é¢‘ç¹çš„ä»£ç è¡¨ã€‚ ä¼˜ç‚¹ï¼šå…¨è¡¨é”ï¼Œå­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œé»˜è®¤ä½¿ç”¨Hashï¼Œæ£€ç´¢æ•ˆç‡éå¸¸é«˜ ç¼ºç‚¹ï¼š ä¼šå ç”¨å’Œæ•°æ®é‡æˆæ­£æ¯”çš„å†…å­˜ç©ºé—´ä¸”ï¼Œmysqlé‡å¯æ—¶ä¼šä¸¢å¤±ï¼Œä¸é€‚åˆç²¾ç¡®æŸ¥æ‰¾ MERGE æ˜¯ä¸€ç»„MYISAMè¡¨çš„ç»„åˆã€‚ 2.1 InnoDBã€MyISAMã€Memory ã€ç´¢å¼•ã€‘ï¼ˆæŒ‰æ•°æ®ç»“æ„åˆ†ï¼‰ å‚è€ƒï¼šhttps://segmentfault.com/a/1190000037683781 2.2 ä¸ºä»€ä¹ˆInnodbä½¿ç”¨è‡ªå¢idä½œä¸ºä¸»é”®ï¼Ÿ å¦‚æœä¸ä½¿ç”¨è‡ªå¢ä¸»é”®ï¼Œ å¦‚èº«ä»½è¯å·ã€å­¦å·ï¼Œæ¯æ¬¡æ’å…¥ä¸»é”®çš„å€¼è¿‘ä¼¼äºéšæœºï¼Œå› æ­¤æ¯æ¬¡æ–°çºªå½•éƒ½è¦è¢«æ’åˆ°ç°æœ‰ç´¢å¼•é¡µå¾—ä¸­é—´æŸä¸ªä½ç½®ï¼ˆæ¶‰åŠåˆ°B+æ ‘åˆ†è£‚ç­‰ï¼‰ï¼Œ é¢‘ç¹çš„ç§»åŠ¨ã€åˆ†é¡µæ“ä½œé€ æˆäº†å¤§é‡çš„ç¢ç‰‡ï¼› å¦‚æœä½¿ç”¨è‡ªå¢ä¸»é”®ï¼Œ é‚£ä¹ˆæ¯æ¬¡æ’å…¥æ–°çš„è®°å½•ï¼Œè®°å½•å°±ä¼šé¡ºåºæ·»åŠ åˆ°å½“å‰ç´¢å¼•èŠ‚ç‚¹çš„åç»­ä½ç½®ï¼Œå½“ä¸€é¡µå†™æ»¡ï¼Œå°±ä¼šè‡ªåŠ¨å¼€è¾Ÿä¸€ä¸ªæ–°çš„é¡µã€‚ 3.è¯´è¯´InnoDBä¸MyISAMçš„åŒºåˆ«ï¼Ÿ è§å‰ã€‚ 3.1 è¯´è¯´InnoDBä¸MyISAMåœ¨B+æ•°ç´¢å¼•æ–¹å¼åŒºåˆ«ï¼Ÿ MyISAm , B+Treeå¶èŠ‚ç‚¹çš„dataåŸŸå­˜æ”¾çš„æ˜¯æ•°æ®è®°å½•çš„åœ°å€ï¼Œåœ¨ç´¢å¼•æ£€ç´¢çš„æ—¶å€™ï¼Œå¦‚æœæŒ‡å®šçš„keyå­˜åœ¨ï¼Œåˆ™å–å‡ºå…¶dataåŸŸçš„å€¼ï¼Œç„¶åä»¥dataåŸŸçš„å€¼ä¸ºåœ°å€è¯»å–ç›¸åº”çš„æ•°æ®è®°å½•ï¼Œè¿™è¢«ç§°ä¸ºâ€œéèšç°‡ç´¢å¼•â€ ï¼› InnoDBï¼Œ æ ‘çš„èŠ‚ç‚¹dataåŸŸä¿å­˜äº†å®Œæ•´çš„æ•°æ®è®°å½•ï¼Œè¿™ä¸ªç´¢å¼•çš„keyæ˜¯æ•°æ®è¡¨çš„ä¸»é”®ï¼ˆè‡ªå¢idï¼‰ ï¼›è€Œå…¶å®ƒç´¢å¼•éƒ½å«åšè¾…åŠ©ç´¢å¼•ï¼Œ åŠ©ç´¢å¼•çš„dataåŸŸå­˜å‚¨ç›¸åº”è®°å½•ä¸»é”®çš„å€¼è€Œä¸æ˜¯è®°å½•åœ°å€ã€‚ åœ¨æ ¹æ®ä¸»ç´¢å¼•æœç´¢æ—¶ï¼Œç›´æ¥æ‰¾åˆ°keyæ‰€åœ¨çš„èŠ‚ç‚¹å³å¯å–å‡ºæ•°æ®ï¼› åœ¨æ ¹æ®è¾…åŠ©ç´¢å¼•æŸ¥æ‰¾æ—¶ï¼Œåˆ™éœ€è¦å…ˆå–å‡ºä¸»é”®çš„å€¼ï¼Œå†èµ°ä¸€éä¸»ç´¢å¼•ã€‚ 3.2 ã€ç™¾åº¦ã€‘è¯´è¯´InnoDBä¸MyISAMåœ¨é€‚ç”¨åœºæ™¯ä¸Šçš„åŒºåˆ«ï¼Ÿ MyISAM ï¼Œæ²¡æœ‰äº‹åŠ¡ï¼Œ é€‚åˆæ’å…¥ä¸é¢‘ç¹ï¼ŒæŸ¥è¯¢éå¸¸é¢‘ç¹ï¼› Innodbï¼š æœ‰äº‹åŠ¡ï¼Œé€‚åˆå¯é æ€§è¦æ±‚æ¯”è¾ƒé«˜ï¼Œæˆ–è€…æ›´æ–°å’ŒæŸ¥è¯¢æ¯”è¾ƒé¢‘ç¹ã€‚ 4. ä¸ºä»€ä¹ˆ SELECT COUNT(*) FROM table åœ¨ InnoDB æ¯”MyISAM æ…¢ï¼Ÿ å¯¹äº SELECT COUNT(*) FROM table è¯­å¥ï¼Œåœ¨æ²¡æœ‰ WHERE æ¡ä»¶çš„æƒ…å†µä¸‹ï¼ŒInnoDB æ¯” MyISAM å¯èƒ½ä¼šæ…¢å¾ˆå¤šï¼Œå°¤å…¶åœ¨å¤§è¡¨çš„æƒ…å†µä¸‹ã€‚ InnoDB æ˜¯å»å®æ—¶ç»Ÿè®¡ç»“æœï¼Œä¼šå…¨è¡¨æ‰«æï¼› è€Œ MyISAMå†…éƒ¨ç»´æŒäº†ä¸€ä¸ªè®¡æ•°å™¨ï¼Œé¢„å­˜äº†ç»“æœï¼Œæ‰€ä»¥ç›´æ¥è¿”å›å³å¯ã€‚ 5.ç®€å•è¯´ä¸€è¯´dropã€deleteä¸truncateçš„åŒºåˆ«ï¼Ÿ SQLä¸­çš„dropã€deleteã€truncateéƒ½è¡¨ç¤ºåˆ é™¤ï¼Œä½†æ˜¯ä¸‰è€…æœ‰ä¸€äº›å·®åˆ«ï¼š åˆ é™¤ç±»å‹ï¼š dropåˆ é™¤è¡¨ç»“æ„ï¼›deleteã€truncateåˆ é™¤è¡¨å†…å®¹ã€‚ åˆ é™¤é€Ÿåº¦ï¼š drop&gt; truncate &gt;delete ç”Ÿæ•ˆé€Ÿåº¦ï¼š dropå’Œtruncate ï¼Œæ“ä½œç«‹å³ç”Ÿæ•ˆï¼Œä¸èƒ½å›æ»šä¹Ÿä¸è§¦å‘è§¦å‘å™¨ï¼›deleteäº‹åŠ¡æäº¤åæ‰ç”Ÿæ•ˆï¼Œä¼šè§¦å‘ç›¸åº”è§¦å‘å™¨ã€‚ 6.ä»€ä¹ˆæ˜¯è§†å›¾ï¼Ÿ æ¸¸æ ‡ï¼Ÿ è§†å›¾æ˜¯ä¸€ç§è™šæ‹Ÿçš„è¡¨ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªè¡¨æˆ–è€…å¤šä¸ªè¡¨çš„è¡Œæˆ–åˆ—çš„å­é›†ï¼Œå…·æœ‰å’Œç‰©ç†è¡¨ç›¸åŒçš„åŠŸèƒ½ã€‚ å¯ä»¥å¯¹è§†å›¾è¿›è¡Œå¢ï¼Œæ”¹ï¼ŒæŸ¥ï¼Œæ“ä½œï¼Œä½†å¯¹è§†å›¾çš„ä¿®æ”¹ä¸å½±å“åŸºæœ¬è¡¨ï¼› ç›¸æ¯”å¤šè¡¨æŸ¥è¯¢ï¼Œè·å–æ•°æ®é€Ÿåº¦æ›´å®¹æ˜“ã€‚ æ¸¸æ ‡ï¼Œæ˜¯å¯¹æŸ¥è¯¢å‡ºæ¥çš„ç»“æœé›†ä½œä¸ºä¸€ä¸ªå•å…ƒæ¥æœ‰æ•ˆçš„å¤„ç†ã€‚ ä¸€èˆ¬ä¸ä½¿ç”¨æ¸¸æ ‡ï¼Œä½†æ˜¯éœ€è¦é€æ¡å¤„ç†æ•°æ®çš„æ—¶å€™ï¼Œæ¸¸æ ‡æ˜¾å¾—ååˆ†é‡è¦ã€‚ 7.ä»€ä¹ˆæ˜¯å†…è”æ¥ã€å·¦å¤–è”æ¥ã€å³å¤–è”æ¥ï¼Ÿ å†…è”æ¥ï¼ˆInner Joinï¼‰ï¼šä¸¤ä¸ªè¡¨ï¼ˆæˆ–è¿æ¥ï¼‰ä¸­æŸä¸€æ•°æ®é¡¹ç›¸ç­‰çš„è¿æ¥ç§°ä¸ºå†…è¿æ¥ã€‚ è¿æ¥çš„ç»“æœæ˜¯å½¢æˆä¸€ä¸ªæ–°çš„æ•°æ®è¡¨ã€‚ å†…è¿æ¥ä¸­å‚ä¸è¿æ¥çš„è¡¨ï¼ˆæˆ–è¿æ¥ï¼‰çš„åœ°ä½æ˜¯ç›¸ç­‰çš„ï¼› å·¦å¤–è”æ¥ï¼ˆLeft Outer Joinï¼‰ï¼šé™¤äº†åŒ¹é…2å¼ è¡¨ä¸­ç›¸å…³è”çš„è®°å½•å¤–ï¼Œè¿˜ä¼šåŒ¹é…å·¦è¡¨ä¸­å‰©ä½™çš„è®°å½•ï¼Œå³è¡¨ä¸­æœªåŒ¹é…åˆ°çš„å­—æ®µç”¨NULLè¡¨ç¤ºï¼› å³å¤–è”æ¥ï¼ˆRight Outer Joinï¼‰ï¼šé™¤äº†åŒ¹é…2å¼ è¡¨ä¸­ç›¸å…³è”çš„è®°å½•å¤–ï¼Œè¿˜ä¼šåŒ¹é…å³è¡¨ä¸­å‰©ä½™çš„è®°å½•ï¼Œå·¦è¡¨ä¸­æœªåŒ¹é…åˆ°çš„å­—æ®µç”¨NULLè¡¨ç¤ºã€‚ 8.è¯´è¯´åœ¨ MySQL ä¸­ä¸€æ¡æŸ¥è¯¢ SQL æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ ä¾‹å¦‚ï¼šselect name from t_user where id=1 å–å¾—é“¾æ¥ï¼Œä½¿ç”¨ä½¿ç”¨åˆ° MySQL ä¸­çš„è¿æ¥å™¨ï¼› æŸ¥è¯¢ç¼“å­˜ï¼Œkey ä¸º SQL è¯­å¥ï¼Œvalue ä¸ºæŸ¥è¯¢ç»“æœï¼Œå¦‚æœæŸ¥åˆ°å°±ç›´æ¥è¿”å›ï¼› åœ¨ MySQL 8.0 ç‰ˆæœ¬å·²ç»å°†æŸ¥è¯¢ç¼“å­˜åˆ é™¤ï¼Œä¹Ÿå°±æ˜¯è¯´ MySQL 8.0 ç‰ˆæœ¬åä¸å­˜åœ¨æ­¤åŠŸèƒ½ã€‚ åˆ†æå™¨ï¼Œåˆ†ä¸ºè¯æ³•åˆ†æå’Œè¯­æ³•åˆ†æã€‚æ­¤é˜¶æ®µåªæ˜¯åšä¸€äº› SQL è§£æï¼Œè¯­æ³•æ ¡éªŒã€‚æ‰€ä»¥ä¸€èˆ¬è¯­æ³•é”™è¯¯åœ¨æ­¤é˜¶æ®µï¼› ä¼˜åŒ–å™¨ï¼Œæ˜¯åœ¨è¡¨é‡Œæœ‰å¤šä¸ªç´¢å¼•çš„æ—¶å€™ï¼Œå†³å®šä½¿ç”¨å“ªä¸ªç´¢å¼•ï¼›æˆ–è€…ä¸€ä¸ªè¯­å¥ä¸­å­˜åœ¨å¤šè¡¨å…³è”çš„æ—¶å€™ï¼ˆjoinï¼‰ï¼Œå†³å®šå„ä¸ªè¡¨çš„è¿æ¥é¡ºåºï¼› æ‰§è¡Œå™¨ï¼Œå¼€å§‹æ‰§è¡Œè¯­å¥ã€‚æ‰§è¡Œè¯­å¥çš„æ—¶å€™è¿˜è¦åˆ¤æ–­æ˜¯å¦å…·å¤‡æ­¤æƒé™ï¼Œå¦‚æœæœ‰æƒé™ï¼šï¼ˆ1ï¼‰æ ¹æ®è¡¨çš„å¼•æ“å®šä¹‰ï¼Œä½¿ç”¨å¼•æ“æä¾›çš„æ¥å£ï¼Œè·å–è¡¨çš„ç¬¬ä¸€è¡Œï¼Œåˆ¤æ–­idæ˜¯å¦ç­‰äº1 ï¼›ï¼ˆ2ï¼‰å¦‚æœä¸æ˜¯åˆ™ç»§ç»­è°ƒç”¨å¼•æ“æ¥å£å»è·å–ä¸‹ä¸€è¡Œï¼Œç»§ç»­åˆ¤æ–­ï¼›ï¼ˆ3ï¼‰ç›´è‡³å–åˆ°è¿™ä¸ªè¡¨çš„æœ€åä¸€è¡Œ 9. MySQL ä¸­ varchar ä¸ char çš„åŒºåˆ«ï¼Ÿ int(3) å‘¢ï¼Ÿ char æ˜¯ä¸€ç§å›ºå®šé•¿åº¦çš„ç±»å‹ï¼Œvarchar åˆ™æ˜¯ä¸€ç§å¯å˜é•¿åº¦çš„ç±»å‹ã€‚ float(3,2) å’Œ int(3) float(3,2) : &quot;æµ®ç‚¹å‹&quot;çš„é•¿åº¦æ˜¯ç”¨æ¥é™åˆ¶æ•°å­—å­˜å‚¨èŒƒå›´çš„ã€‚æ¯”å¦‚ float(3,2) åªèƒ½å¤Ÿå†™å…¥ 0.00~999.99ã€‚ int(3) ï¼š&quot;æ•´å‹&quot;çš„é•¿åº¦å¹¶ä¸ä¼šé™åˆ¶å­˜å‚¨çš„æ•°å­—èŒƒå›´ï¼Œéƒ½æ˜¯-2147483648 ~ 2147483647 ã€‚åªé™åˆ¶æ˜¾ç¤ºé•¿åº¦ã€‚ 10.è¶…é”®ã€ä¸»é”®ã€å€™é€‰é”®å’Œå¤–é”®æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ è¶…é”®(super key)ï¼šåœ¨å…³ç³»ä¸­èƒ½å”¯ä¸€æ ‡è¯†å…ƒç»„çš„å±æ€§é›†ç§°ä¸ºå…³ç³»æ¨¡å¼çš„è¶…é”®ï¼› å€™é€‰é”®(candidate key)ï¼šä¸å«æœ‰å¤šä½™å±æ€§çš„è¶…é”®ç§°ä¸ºå€™é€‰é”®ï¼Œæ˜¯è¶…é”®çš„å­é›†ï¼› ä¸»é”®(primary key)ï¼šç”¨æˆ·é€‰ä½œå…ƒç»„æ ‡è¯†çš„ä¸€ä¸ªå€™é€‰é”®ç¨‹åºä¸»é”®ï¼Œæ˜¯å€™é€‰é”®çš„å­é›† ï¼› å¤–é”®ï¼šå¦‚æœå…³ç³»æ¨¡å¼Rä¸­å±æ€§Kæ˜¯å…¶å®ƒæ¨¡å¼çš„ä¸»é”®ï¼Œé‚£ä¹ˆkåœ¨æ¨¡å¼Rä¸­ç§°ä¸ºå¤–é”®ã€‚ ä¸‹é¢ä¸¾ä¾‹è¯´æ˜ï¼ˆå‡è®¾å§“åä¸é‡å¤å”¯ä¸€ï¼‰ï¼š èº«ä»½è¯ å§“å æ€§åˆ« å¹´é¾„ è¶…é”®ï¼š èº«ä»½è¯ã€å§“åã€ï¼ˆå§“åã€æ€§åˆ«ï¼‰ã€ï¼ˆå§“åã€æ€§åˆ«ã€å¹´é¾„ï¼‰éƒ½å¯ä»¥ä½œä¸ºè¶…é”®ï¼› å€™é€‰é”® ï¼šèº«ä»½è¯ã€å§“å éƒ½å”¯ä¸€ï¼Œéƒ½å¯ä»¥ä½œä¸ºå€™é€‰é”®ï¼› ä¸»é”®ï¼š åœ¨å€™é€‰é”®é€‰ä¸€ä¸ªä½œä¸ºä¸»é”®ï¼Œä¾‹å¦‚ï¼šèº«ä»½è¯ã€‚ 11. è§£é‡Šâ¼€ä¸‹ä»€ä¹ˆæ˜¯æ± åŒ–è®¾è®¡æ€æƒ³ã€‚ä»€ä¹ˆæ˜¯æ•°æ®åº“è¿æ¥æ± ?ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®åº“è¿æ¥æ± ? æ± åŒ–è®¾è®¡æ€æƒ³ æˆ‘ä»¬å¸¸â»…çš„å¦‚javaçº¿ç¨‹æ± ã€jdbcè¿æ¥æ± ã€redisè¿æ¥æ± ç­‰å°±æ˜¯è¿™ç±»è®¾è®¡çš„ä»£è¡¨å®ç°ã€‚è¿™ç§è®¾è®¡ä¼šåˆå§‹é¢„è®¾èµ„æºï¼Œè§£å†³çš„é—®é¢˜å°±æ˜¯æŠµæ¶ˆæ¯æ¬¡è·å–èµ„æºçš„æ¶ˆè€—ï¼Œå¦‚åˆ›å»ºçº¿ç¨‹çš„å¼€é”€ï¼Œè·å–è¿œç¨‹è¿æ¥çš„å¼€é”€ç­‰ã€‚ æ•°æ®åº“è¿æ¥æ±  æ•°æ®åº“è¿æ¥æœ¬è´¨å°±æ˜¯â¼€ä¸ª socket çš„è¿æ¥ã€‚æ•°æ®åº“æœåŠ¡ç«¯è¿˜è¦ç»´æŠ¤â¼€äº›ç¼“å­˜å’Œâ½¤æˆ·æƒé™ä¿¡æ¯ä¹‹ç±»çš„æ‰€ä»¥å â½¤äº†â¼€äº›å†…å­˜ã€‚æˆ‘ä»¬å¯ä»¥æŠŠæ•°æ®åº“è¿æ¥æ± æ˜¯çœ‹åšæ˜¯ç»´æŠ¤çš„æ•°æ®åº“è¿æ¥çš„ç¼“å­˜ï¼Œä»¥ä¾¿å°†æ¥éœ€è¦å¯¹æ•°æ®åº“çš„è¯·æ±‚æ—¶å¯ä»¥é‡â½¤è¿™äº›è¿æ¥ã€‚ ä¸ºä»€ä¹ˆè¦ç”¨æ•°æ®åº“è¿æ¥æ± ï¼Ÿ ä¸ºæ¯ä¸ªâ½¤æˆ·æ‰“å¼€å’Œç»´æŠ¤æ•°æ®åº“è¿æ¥ï¼Œå°¤å…¶æ˜¯å¯¹åŠ¨æ€æ•°æ®åº“é©±åŠ¨çš„ç½‘ç«™åº”â½¤ç¨‹åºçš„è¯·æ±‚ï¼Œæ—¢æ˜‚è´µâ¼œæµªè´¹èµ„æºã€‚åœ¨è¿æ¥æ± ä¸­ï¼Œåˆ›å»ºè¿æ¥åï¼Œå°†å…¶æ”¾ç½®åœ¨æ± ä¸­ï¼Œå¹¶å†æ¬¡ä½¿â½¤å®ƒï¼Œå› æ­¤ä¸å¿…å»ºâ½´æ–°çš„è¿æ¥ã€‚å¦‚æœä½¿â½¤äº†æ‰€æœ‰è¿æ¥ï¼Œåˆ™ä¼šå»ºâ½´â¼€ä¸ªæ–°è¿æ¥å¹¶å°†å…¶æ·»åŠ åˆ°æ± ä¸­ã€‚ 12. å¦‚æœæ•°æ®ä¸å­˜å‚¨åœ¨ç£ç›˜è€Œæ˜¯åœ¨å†…å­˜ï¼Œç”¨ä»€ä¹ˆæ•°æ®ç»“æ„ï¼Ÿä¸ºä»€ä¹ˆMysqlä¸ä½¿ç”¨hashï¼Ÿ å‚è€ƒï¼šä¸ºä»€ä¹ˆhashä½œä¸ºå†…å­˜ä½¿ç”¨çš„ç»å…¸æ•°æ®ç»“æ„? æ•°æ®æ”¾åœ¨ç£ç›˜ï¼Œä½¿ç”¨B+æ ‘ï¼Œæ ¸å¿ƒæ˜¯ä¸ºäº†å‡å°‘ç£ç›˜IOï¼Œå› ä¸ºç£ç›˜IOçš„ä»£ä»·å¾ˆå¤§ï¼ˆæ˜¯å†…å­˜çš„åä¸‡å€ï¼‰ã€‚ æˆ‘ä»¬ä½¿ç”¨hashå¯»æ‰¾æ•°æ®çš„æ—¶å€™ï¼Œæ•°æ®éšæœºåˆ†æ•£åˆ°å„ä¸ªç‰©ç†ä½ç½®ï¼Œä¸æ˜¯æœ‰åºçš„æ•°æ®ã€‚è€Œå†…å­˜è®¾å¤‡ä¹Ÿæ˜¯éšæœºè®¿é—®è®¾å¤‡ï¼Œå†…å­˜å¾ˆé€‚åˆç”¨hashæ–¹å¼æ¥è¯»å–æ•°æ®ã€‚ éšæœºè®¿é—®ï¼šå­˜å‚¨å™¨å•å…ƒçš„å†…å®¹å¯ä»¥æ ¹æ®éœ€è¦è‡ªç”±å–å‡ºæˆ–å­˜å‚¨ï¼Œè€Œä¸”è®¿é—®çš„é€Ÿåº¦ä¸å­˜å‚¨å™¨å•å…ƒçš„ä½ç½®æ— å…³ ã€‚(é€šè¿‡è¡Œï¼Œåˆ—åœ°å€æ€»çº¿å°±å¯ä»¥å¿«é€Ÿå®šä½å­˜å‚¨çš„æ•°æ®) ä½†æ˜¯ç£ç›˜ï¼Œæ¯æ¬¡è®¿é—®æ•°æ®ï¼Œæ˜¯éœ€è¦å…ˆå®šä½ï¼Œç„¶åé¡ºåºç§»åŠ¨ï¼›å¦‚æœä¸‹ä¸ªæ•°æ®ä¸åœ¨ç£å¤´é™„è¿‘ï¼Œåˆè¦é‡æ–°å®šä½ã€‚ å¦‚æœHashç´¢å¼•ç£ç›˜æ•°æ®ï¼Œï¼ˆ1ï¼‰æ¯æ¬¡è®¿é—®éƒ½è¦IOä¸èƒ½èŒƒå›´ï¼ˆ2ï¼‰æ•°æ®å¤ªå¤šï¼ŒHashç´¢å¼•ä¿å­˜ä¸äº†é”®å€¼ï¼Œè€Œé«˜åº¦ä¸º3çš„B+æ•°å°±èƒ½ä¿å­˜åƒä¸‡çº§åˆ«çš„æ•°æ®ï¼ˆ3ï¼‰å½“æ•°æ®é‡å¾ˆå¤§æ—¶ï¼Œhashå†²çªçš„æ¦‚ç‡ä¹Ÿä¼šéå¸¸å¤§ï¼ˆ4ï¼‰ç»„åˆç´¢å¼•å¯ä»¥æ”¯æŒéƒ¨åˆ†ç´¢å¼•æŸ¥è¯¢ï¼Œå¦‚(a,b,c)çš„ç»„åˆç´¢å¼•ï¼ŒæŸ¥è¯¢ä¸­åªç”¨åˆ°äº†é˜¿å’Œbä¹Ÿå¯ä»¥æŸ¥è¯¢çš„ï¼Œå¦‚æœä½¿ç”¨hashè¡¨ï¼Œç»„åˆç´¢å¼•ä¼šå°†å‡ ä¸ªå­—æ®µåˆå¹¶hashï¼Œæ²¡åŠæ³•æ”¯æŒéƒ¨åˆ†ç´¢å¼• ï¼ˆ5ï¼‰å½“éœ€è¦æŒ‰ç…§ç´¢å¼•è¿›è¡Œorder byæ—¶ï¼Œhashå€¼æ²¡åŠæ³•æ”¯æŒæ’åº ã€‚ 13.ã€å­—èŠ‚ã€‘Mysql Joinçš„åŸç†ï¼Ÿ å‚è€ƒï¼šhttps://zhuanlan.zhihu.com/p/54275505 1select * from user tb1 left join level tb2 on tb1.id=tb2.user_id ç®€å•åµŒå¥—å¾ªç¯ åŒå±‚for å¾ªç¯ ï¼Œé€šè¿‡å¾ªç¯å¤–å±‚è¡¨çš„è¡Œæ•°æ®ï¼Œé€ä¸ªä¸å†…å±‚è¡¨çš„æ‰€æœ‰è¡Œæ•°æ®è¿›è¡Œæ¯”è¾ƒæ¥è·å–ç»“æœã€‚ ç´¢å¼•åµŒå¥—å¾ªç¯è¿æ¥ é€šè¿‡å¤–å±‚è¡¨åŒ¹é…æ¡ä»¶ç›´æ¥ä¸å†…å±‚è¡¨ç´¢å¼•è¿›è¡ŒåŒ¹é…ï¼Œé¿å…å’Œå†…å±‚è¡¨çš„æ¯æ¡è®°å½•å»è¿›è¡Œæ¯”è¾ƒï¼Œ è¿™æ ·æå¤§çš„å‡å°‘äº†å¯¹å†…å±‚è¡¨çš„åŒ¹é…æ¬¡æ•°ã€‚ ä»åŸæ¥çš„åŒ¹é…æ¬¡æ•°=å¤–å±‚è¡¨è¡Œæ•° * å†…å±‚è¡¨è¡Œæ•°,å˜æˆäº† å¤–å±‚è¡¨çš„è¡Œæ•° * å†…å±‚è¡¨ç´¢å¼•çš„é«˜åº¦ï¼Œæå¤§çš„æå‡äº† joinçš„æ€§èƒ½ï¼› æ³¨æ„ï¼Œè¦ä¸ºè¡¨user_level å»å»ºç«‹ç´¢å¼• ç¼“å­˜å—åµŒå¥—å¾ªç¯è¿æ¥ å…¶ä¼˜åŒ–æ€è·¯æ˜¯å‡å°‘å†…å±‚è¡¨çš„æ‰«è¡¨æ¬¡æ•°ã€‚ é€šè¿‡ç®€å•çš„åµŒå¥—å¾ªç¯æŸ¥è¯¢çš„å›¾ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå·¦è¡¨çš„æ¯ä¸€æ¡è®°å½•éƒ½ä¼šå¯¹å³è¡¨è¿›è¡Œä¸€æ¬¡æ‰«è¡¨ï¼Œæ‰«è¡¨çš„è¿‡ç¨‹å…¶å®ä¹Ÿå°±æ˜¯ä»å†…å­˜è¯»å–æ•°æ®çš„è¿‡ç¨‹ï¼Œé‚£ä¹ˆè¿™ä¸ªè¿‡ç¨‹å…¶å®æ˜¯æ¯”è¾ƒæ¶ˆè€—æ€§èƒ½çš„ã€‚ æ‰€ä»¥ç¼“å­˜å—åµŒå¥—å¾ªç¯è¿æ¥ç®—æ³•æ„åœ¨é€šè¿‡ä¸€æ¬¡æ€§ç¼“å­˜å¤–å±‚è¡¨çš„å¤šæ¡æ•°æ®ï¼Œä»¥æ­¤æ¥å‡å°‘å†…å±‚è¡¨çš„æ‰«è¡¨æ¬¡æ•°ï¼Œä»è€Œè¾¾åˆ°æå‡æ€§èƒ½çš„ç›®çš„ã€‚å¦‚æœæ— æ³•ä½¿ç”¨Index Nested-Loop Joinçš„æ—¶å€™ï¼Œæ•°æ®åº“æ˜¯é»˜è®¤ä½¿ç”¨çš„æ˜¯Block Nested-Loop Joinç®—æ³•çš„ã€‚ å½“level è¡¨çš„ user_id ä¸ä¸ºç´¢å¼•çš„æ—¶å€™ï¼Œé»˜è®¤ä¼šä½¿ç”¨Block Nested-Loop Joinç®—æ³•ã€‚ 13.1 joinå’Œleft joinåŒºåˆ«? joinç›¸å½“äºæˆ‘ä»¬å¹³æ—¶ç”¨çš„whereï¼Œå°±æ˜¯æŠŠä¸¤å¼ è¡¨ä¸­åŒæ—¶æ»¡è¶³a.id=b.idçš„æ•°æ®æ‰¾å‡ºæ¥ï¼› left joinæ˜¯ä»¥å·¦è¡¨ï¼ˆaï¼‰ä¸ºå‚è€ƒå¯¹è±¡ï¼Œç›¸å½“äºåšä¸€ä¸ªforå¾ªç¯ï¼ŒæŠŠaè¡¨çš„æ•°æ®ä¸€æ¡ä¸€æ¡çš„è¯»å–å‡ºæ¥ï¼Œç„¶åæ ¹æ®a.id=b.idçš„æ¡ä»¶åˆ°bè¡¨ä¸­æŸ¥æ‰¾æ•°æ®ã€‚ 13.2 unioå’Œunio allçš„åŒºåˆ«? å¦‚æœæˆ‘ä»¬éœ€è¦å°†ä¸¤ä¸ªselectè¯­å¥çš„ç»“æœä½œä¸ºä¸€ä¸ªæ•´ä½“æ˜¾ç¤ºå‡ºæ¥ï¼Œæˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°unionæˆ–è€…union allå…³é”®å­—ã€‚ 1select employee_id,job_id from employees union select employee_id,job_id from job_history unionä¼šè‡ªåŠ¨å‹ç¼©å¤šä¸ªç»“æœé›†åˆä¸­çš„é‡å¤ç»“æœï¼Œè€Œunion allåˆ™å°†æ‰€æœ‰çš„ç»“æœå…¨éƒ¨æ˜¾ç¤ºå‡ºæ¥ï¼Œä¸ç®¡æ˜¯ä¸æ˜¯é‡å¤ã€‚ 13.3 unio å’Œ joinçš„åŒºåˆ«? å‚è€ƒï¼šhttps://www.jb51.net/article/30975.htm joinæ˜¯å¯¹ä¸¤ä¸ªè¡¨è¿›è¡Œè”åˆï¼Œç›¸å½“äºwhereï¼Œæ»¡è¶³æ¡ä»¶çš„è¡Œä¼šè¢«é€‰å‡ºï¼Œå…¶ä¸­åˆ—ä¼šè¢«æ‰©å……ï¼ ä½†unioæ˜¯è¿æ¥ç»“æœé›†ï¼Œéœ€è¦æ»¡è¶³åˆ—ä¸ªæ•°ç›¸åŒï¼Œåªä¼šä¿å­˜ç¬¬ä¸€ä¸ªè¡¨åˆ—ä¸ªæ•°ï¼Œåˆ—ä¸ªæ•°ä¸ä¼šè¢«æ‰©å……ï¼ 5.2 åˆ†å¸ƒå¼æ•°æ®åº“ 0. ã€å­—èŠ‚ã€‘åˆ†å¸ƒå¼æ•°æ®åº“é”å¦‚ä½•å®ç°ï¼Ÿ ä»€ä¹ˆæ—¶å€™ç”¨åˆ°åˆ†å¸ƒå¼æ•°æ®åº“ï¼Ÿ æ°´å¹³æ‹†åˆ† ï¼šæ•°æ®é‡å¤§åˆ°å•æœºæ•°æ®åº“å·²å­˜å‚¨ä¸ä¸‹æ—¶ï¼Œ å¯ä»¥å¯¹æ•°æ®è¿›è¡Œæ‹†åˆ†ï¼ŒåŒ–æ•´ä¸ºé›¶ï¼Œå°†æ•°æ®å‡åŒ€åˆ†å¸ƒåˆ°å¤šä¸ªæ•°æ®åº“èŠ‚ç‚¹ä¸­ã€‚ è¯»å†™åˆ†ç¦»ï¼šä¸»è¦ç”¨åœ¨æ•°æ®é‡å¹¶ä¸å¤§ï¼Œå•æœºæ•°æ®åº“èƒ½å¤Ÿholdå¾—ä½ï¼Œä½†è¯»è¯·æ±‚å¾ˆé«˜çš„æƒ…å†µä¸‹ã€‚æ­¤æ—¶ï¼Œå¯ä»¥é…ç½®å¤šä¸ªåªè¯»æ•°æ®åº“èŠ‚ç‚¹ï¼Œæ¥åˆ†æ‹…ä¸»èŠ‚ç‚¹çš„è¯»è¯·æ±‚ã€‚é€šè¿‡æ•°æ®å¤åˆ¶æœºåˆ¶ï¼Œåœ¨ä¸»èŠ‚ç‚¹å’Œåªè¯»èŠ‚ç‚¹ä¹‹é—´è¿›è¡Œæ•°æ®çš„å®æ—¶åŒæ­¥ï¼Œä¿è¯ä¸»ä»èŠ‚ç‚¹çš„æ•°æ®ä¸€è‡´æ€§ã€‚ åˆ†å¸ƒå¼æ•°æ®åº“é”ï¼Ÿ ç›´æ¥é”è¡¨ï¼Œä»£ä»·æ¯”è¾ƒå¤§ åŠ å…¥æ’å®ƒé”ï¼ŒæŸ¥è¯¢è¯­å¥åé¢å¢åŠ for updateï¼ˆè¿™é‡Œæˆ‘ä»¬å¸Œæœ›ä½¿ç”¨è¡Œçº§é”ï¼Œå°±è¦ç»™method_nameæ·»åŠ ç´¢å¼•ï¼‰ Zookeeperå®ç°åˆ†å¸ƒå¼é” 1. è¯·è¯´è¯´MySQLæ•°æ®åº“çš„é”ï¼Ÿ MySQL ä¸­å¸¸è§é”å¦‚ä¸‹ï¼š ã€æŒ‰ä½¿ç”¨æ–¹å¼åˆ’åˆ†ã€‘ å…±äº«é”ï¼šä¸å µå¡ï¼Œå¤šä¸ªç”¨æˆ·å¯ä»¥åŒä¸€æ—¶åˆ»è¯»å–åŒä¸€ä¸ªèµ„æºï¼Œç›¸äº’ä¹‹é—´æ²¡æœ‰å½±å“ï¼› æ’å®ƒé”ï¼ˆå†™é”ï¼‰ï¼šä¸€ä¸ªå†™æ“ä½œé˜»å¡å…¶ä»–çš„è¯»é”å’Œå†™é”ï¼Œåªå…è®¸ä¸€ä¸ªç”¨æˆ·è¿›è¡Œå†™å…¥ï¼Œé˜²æ­¢å…¶ä»–ç”¨æˆ·è¯»å–æ­£åœ¨å†™å…¥çš„èµ„æºã€‚ ã€æŒ‰é”ç²’åº¦åˆ’åˆ†ã€‘ è¡¨é”ï¼šç³»ç»Ÿå¼€é”€æœ€å°ï¼Œä¼šé”å®šæ•´å¼ è¡¨ï¼Œä¸ä¼šå‡ºç°æ­»é”ï¼›ä½†æ˜¯ç”±äºç²’åº¦å¤ªå¤§ï¼Œå› æ­¤é€ æˆé”çš„å†²çªå‡ ç‡å¤§ï¼Œå¹¶å‘æ€§èƒ½ä½ã€‚MyISAM ä½¿ç”¨è¡¨é”ã€‚ è¡Œé”ï¼šå®¹æ˜“å‡ºç°æ­»é”ï¼Œå‘ç”Ÿå†²çªæ¦‚ç‡ä½ï¼Œå¹¶å‘æ€§èƒ½é«˜ã€‚InnoDB æ”¯æŒè¡Œé”ã€‚ å¿…é¡»æœ‰ç´¢å¼•æ‰èƒ½å®ç°ï¼Œå¦åˆ™ä¼šè‡ªåŠ¨é”å…¨è¡¨ï¼Œé‚£ä¹ˆå°±ä¸æ˜¯è¡Œé”ã€‚ ã€æŒ‰æ€æƒ³åˆ’åˆ†ã€‘ ä¹è§‚é” æ‚²è§‚é” 2.è¯´è¯´ä»€ä¹ˆæ˜¯é”å‡çº§ï¼Ÿä»€ä¹ˆæƒ…å†µå‘ç”Ÿé”å‡çº§ï¼Ÿ åŒºåˆ†ä¸€ä¸‹sycronizedé”å‡çº§ã€‚ é”å‡çº§æ˜¯æŒ‡å°†å½“å‰é”çš„ç²’åº¦é™ä½ï¼šè¡Œé”â†’é¡µé”â†’è¡¨é”ã€‚ å‘ç”Ÿé”å‡çº§çš„æƒ…å†µï¼š å½“ä¸€æ¡SQLè¯­å¥å¯¹åŒä¸€ä¸ªå¯¹è±¡ä¸ŠæŒæœ‰çš„é”æ•°é‡è¶…é”äº†é˜ˆå€¼ï¼Œé»˜è®¤è¿™ä¸ªé˜ˆå€¼ä¸º5000ï¼Œä½†æ˜¯å¯¹äºä¸åŒå¯¹è±¡ä¸ä¼šå‘ç”Ÿé”å‡çº§ é”èµ„æºå ç”¨çš„å†…å­˜è¶…è¿‡æ¿€æ´»å†…å­˜çš„ç™¾åˆ†ä¹‹40 å°±ä¼šå‘ç”Ÿé”å‡çº§ 2.1 ä¸ºä»€ä¹ˆè¯´innoDB å¼•æ“ä¸å­˜åœ¨é”å‡çº§çš„é—®é¢˜ ï¼Ÿ å¾…è¡¥å……ã€‚ 2.2 ä»€ä¹ˆæ—¶å€™è§¦å‘è¡Œé”å’Œè¡¨çº§é”ï¼Ÿ mysqlé»˜è®¤å­˜å‚¨å¼•æ“éƒ½æ˜¯innodbï¼Œé»˜è®¤æ˜¯ä½¿ç”¨è¡Œé” ã€‚ è§¦å‘è¡Œçº§é” ï¼Œè¡Œçº§é”é”çš„æ˜¯ç´¢å¼•è®°å½• ï¼Œä½¿ç”¨äº†ç´¢å¼•æ‰€ä»¥å°±ä¼šè§¦å‘è¡Œçº§é”ã€‚ è§¦å‘è¡¨çº§é”ï¼Œæœ‰ä»¥ä¸‹ä¸‰ç§æƒ…å†µ å…¶å®ä¸ç®¡æ˜¯è¯»æ“ä½œ(select)è¿˜æ˜¯å†™æ“ä½œ(update,delete,insert),åªè¦æ¶‰åŠåˆ°å¸¦æœ‰ç­›é€‰æ¡ä»¶çš„è¯­å¥ï¼Œå¦‚æœç­›é€‰æ¡ä»¶ä¸­æ²¡æœ‰ç”¨åˆ°ç´¢å¼•ï¼Œå°±ä¼šè§¦å‘å…¨è¡¨æ‰«æã€‚ å…¨è¡¨æ›´æ–°ï¼šäº‹åŠ¡éœ€è¦æ›´æ–°å¤§éƒ¨åˆ†æ•°æ®æˆ–å…¨éƒ¨æ•°æ®ï¼Œå¦‚æœä½¿ç”¨è¡Œçº§é”ï¼Œä¼šå¯¼è‡´äº‹åŠ¡æ‰§è¡Œæ•ˆç‡ä½ï¼Œä»è€Œå¯¼è‡´å…¶ä»–äº‹åŠ¡é•¿æ—¶é—´ç­‰å¾…é”å’Œæ›´å¤šçš„é”å†²çª å¤šè¡¨çº§è”ï¼šäº‹åŠ¡æ¶‰åŠå¤šå¼ è¡¨ï¼Œæ¯”è¾ƒå¤æ‚çš„å…³è”æŸ¥è¯¢ï¼Œå¾ˆå¯èƒ½é€ æˆæ­»é”ï¼Œè¿™ç§æƒ…å†µè‹¥èƒ½ä¸€æ¬¡æ€§é”ä½äº‹åŠ¡æ¶‰åŠçš„è¡¨ï¼Œä»è€Œé¿å…æ­»é”ï¼Œå‡å°‘æ•°æ®åº“äº‹åŠ¡å›æ»šæ‰€å¸¦æ¥çš„å¼€é”€ ç­›é€‰æ¡ä»¶ä¸­æœªç”¨åˆ°ç´¢å¼•ï¼š å…¨è¡¨æ‰«æ ç”¨åˆ°ç´¢å¼•ï¼Œä½†åŒºåˆ†åº¦ç¨‹åº¦ä¸é«˜ ï¼šinnodbè®¤ä¸ºå…¨è¡¨æ‰«ææ¯”èµ°ç´¢å¼•æ•ˆç‡æ›´é«˜å¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Œè¿™ä¸ªæ—¶å€™å°±è¦é€šè¿‡explainå»æŸ¥çœ‹ä¸‹æŸ¥è¯¢è®¡åˆ’ï¼Œçœ‹ä¸‹æŸ¥è¯¢è¯­å¥æ˜¯å¦çœŸçš„ç”¨åˆ°äº†ç´¢å¼• 2.3 è¡Œé”é€‚åˆçš„åœºæ™¯ï¼Ÿ Aç”¨æˆ·æ¶ˆè´¹ï¼Œserviceå±‚å…ˆæŸ¥è¯¢è¯¥ç”¨æˆ·çš„è´¦æˆ·ä½™é¢ï¼Œè‹¥ä½™é¢è¶³å¤Ÿï¼Œåˆ™è¿›è¡Œåç»­çš„æ‰£æ¬¾æ“ä½œï¼›è¿™ç§æƒ…å†µæŸ¥è¯¢çš„æ—¶å€™åº”è¯¥å¯¹è¯¥è®°å½•è¿›è¡ŒåŠ é”ã€‚ 1for update # æ“ä½œè¯¥è®°å½•æ—¶åŠ ä¸Š å¦åˆ™ï¼ŒBç”¨æˆ·åœ¨Aç”¨æˆ·æŸ¥è¯¢åæ¶ˆè´¹å‰å…ˆä¸€æ­¥å°†Aç”¨æˆ·è´¦å·ä¸Šçš„é’±è½¬èµ°ï¼Œè€Œæ­¤æ—¶Aç”¨æˆ·å·²ç»è¿›è¡Œäº†ç”¨æˆ·ä½™é¢æ˜¯å¦è¶³å¤Ÿçš„åˆ¤æ–­ï¼Œåˆ™å¯èƒ½ä¼šå‡ºç°ä½™é¢å·²ç»ä¸è¶³ä½†å´æ‰£æ¬¾æˆåŠŸçš„æƒ…å†µã€‚ 3.æ€æ ·å°½é‡é¿å…æ­»é”çš„å‡ºç°ï¼Ÿ è®¾ç½®è·å–é”çš„è¶…æ—¶æ—¶é—´ï¼Œè‡³å°‘èƒ½ä¿è¯æœ€å·®æƒ…å†µä¸‹ï¼Œå¯ä»¥é€€å‡ºç¨‹åºï¼Œä¸è‡³äºä¸€ç›´ç­‰å¾…å¯¼è‡´æ­»é”ï¼› è®¾ç½®æŒ‰ç…§åŒä¸€é¡ºåºè®¿é—®èµ„æºï¼Œç±»ä¼¼äºä¸²è¡Œæ‰§è¡Œï¼› é¿å…äº‹åŠ¡ä¸­çš„ç”¨æˆ·äº¤å‰ï¼› ä¿æŒäº‹åŠ¡ç®€çŸ­å¹¶åœ¨ä¸€ä¸ªæ‰¹å¤„ç†ä¸­ï¼› ä½¿ç”¨ä½éš”ç¦»çº§åˆ«ã€‚ 4.è§£é‡Šä¸€ä¸‹æ‚²è§‚é”å’Œä¹è§‚é”ï¼Ÿ æ‚²è§‚é”ï¼š æ‚²è§‚é”æ˜¯åŸºäºä¸€ç§æ‚²è§‚çš„æ€åº¦ç±»æ¥é˜²æ­¢ä¸€åˆ‡æ•°æ®å†²çªã€‚å®ƒæ˜¯ä»¥ä¸€ç§é¢„é˜²çš„å§¿æ€ åœ¨ä¿®æ”¹æ•°æ®ä¹‹å‰æŠŠæ•°æ®é”ä½ï¼Œç„¶åå†å¯¹æ•°æ®è¿›è¡Œè¯»å†™ï¼Œåœ¨å®ƒé‡Šæ”¾é”ä¹‹å‰ä»»ä½•äººéƒ½ä¸èƒ½å¯¹å…¶æ•°æ®è¿›è¡Œæ“ä½œã€‚ä¸€èˆ¬æ•°æ®åº“æœ¬èº«é”çš„æœºåˆ¶éƒ½æ˜¯åŸºäºæ‚²è§‚é”çš„æœºåˆ¶å®ç°çš„ã€‚ ç‰¹ç‚¹ï¼š å®Œå…¨ä¿è¯æ•°æ®çš„ç‹¬å æ€§å’Œæ­£ç¡®æ€§ï¼Œå› ä¸ºæ¯æ¬¡è¯·æ±‚éƒ½ä¼šå…ˆå¯¹æ•°æ®è¿›è¡ŒåŠ é”ï¼›ä½†æ˜¯é€ æˆæ€§èƒ½æ¶ˆè€— å®ç° ï¼š 12345678# åŠ è¯»é”LOCK tables test_db READ # é‡Šæ”¾é”UNLOCK TABLES# åŠ å†™é”LOCK tables test_db WRITE # é‡Šæ”¾é”UNLOCK TABLES ä¹è§‚é”ï¼š å¯¹äºæ•°æ®å†²çªä¿æŒä¸€ç§ä¹è§‚æ€åº¦ï¼Œæ“ä½œæ•°æ®æ—¶ä¸ä¼šå¯¹æ“ä½œçš„æ•°æ®è¿›è¡ŒåŠ é”ï¼Œä½¿å¾—å¤šä¸ªä»»åŠ¡å¯å¹¶è¡Œå¯¹æ•°æ®æ“ä½œã€‚ä½†æ˜¯ä½¿ç”¨ä¸€ç§éªŒè¯æœºåˆ¶æ¥é¿å…æ•°æ®å†²çª ï¼ˆä¸€èˆ¬é€šè¿‡åŠ ç‰ˆæœ¬åå¯¹æ¯”æ¥å®ç°ï¼‰ã€‚ ç‰¹ç‚¹ï¼š å¹¶å‘ç±»å‹çš„é”ï¼Œæœ¬èº«ä¸åŠ é”ä½†é€šè¿‡ä¸šåŠ¡å®ç°é”çš„åŠŸèƒ½ ï¼Œæ²¡æœ‰é”æ“ä½œå› æ­¤æ€§èƒ½æ›´é«˜ã€‚ å®ç°å½¢å¼ï¼š ï¼ˆ1ï¼‰ä¸¤ä¸ªè¯·æ±‚åŒæ—¶æ“ä½œæ“ä½œæ ‡Nameå­—æ®µï¼ŒäºŒè€…æŸ¥è¯¢éœ€æ£€ç´¢çš„æ•°æ®éƒ½æ˜¯ä¸€æ ·çš„ï¼š ï¼ˆ2ï¼‰è¯·æ±‚1ä¿®æ”¹å­—æ®µæ•°æ®â€œzhangsanâ€â†’â€œlisiâ€ ï¼Œå¹¶å°†ç‰ˆæœ¬å·å¢åŠ +1 ï¼ŒéªŒè¯ç‰ˆæœ¬å·ä¸€ç›´åæäº¤ 1update A set Name=lisi,version=version+1 where ID=#&#123;id&#125; and version=#&#123;version&#125; ï¼ˆ3ï¼‰è¯·æ±‚2ä¹Ÿæƒ³ä¿®æ”¹â€œzhangsanâ€â†’â€œlimingâ€ ï¼Œä½†æ˜¯æäº¤æ—¶ç”±äº ç‰ˆæœ¬å·ä¸ä¸€è‡´ï¼Œæ— æ³•æäº¤æˆåŠŸ 4.1 æ•°æ®åº“ä¹è§‚é”å’Œæ‚²è§‚é”ï¼Œå¦‚ä½•å®ç°ï¼Ÿ å®ç°ä¹è§‚é” åˆ©ç”¨ç‰ˆæœ¬å·ï¼Œå¦‚MVCCï¼› æ—¶é—´æˆ³ï¼šåŒæ ·æ˜¯åœ¨éœ€è¦ä¹è§‚é”æ§åˆ¶çš„tableä¸­å¢åŠ ä¸€ä¸ªå­—æ®µï¼Œåç§°æ— æ‰€è°“ï¼Œå­—æ®µç±»å‹ä½¿ç”¨æ—¶é—´æˆ³ï¼ˆtimestampï¼‰, å’Œä¸Šé¢çš„versionç±»ä¼¼ã€‚ ä¹Ÿæ˜¯åœ¨æ›´æ–°æäº¤çš„æ—¶å€™ï¼Œå°†å½“å‰æ•°æ®åº“ä¸­æ•°æ®çš„æ—¶é—´æˆ³å’Œè‡ªå·±æ›´æ–°å‰å–åˆ°çš„æ—¶é—´æˆ³è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœä¸€è‡´åˆ™OKï¼Œå¦åˆ™å°±æ˜¯ç‰ˆæœ¬å†²çªã€‚ å®ç°æ‚²è§‚é” ç›´æ¥åŠ ä¸Šè¯»é”æˆ–è€…å†™é”ï¼ŒSELECT â€¦ FOR UPDATE ã€‚ 5.ä»‹ç»ä¸€ä¸‹åˆ†å¸ƒå¼æ•°æ®åº“å…¨å±€IDå”¯ä¸€ä¸”è‡ªå¢ï¼Œå¦‚ä½•ç”Ÿæˆï¼Ÿ ï¼ˆæˆ–è€…é—®åˆ†åº“åˆ†è¡¨ä¹‹åï¼Œid ä¸»é”®å¦‚ä½•å¤„ç†ï¼Ÿï¼‰ å› ä¸ºè¦æ˜¯åˆ†æˆå¤šä¸ªè¡¨ä¹‹åï¼Œæ¯ä¸ªè¡¨éƒ½æ˜¯ä» 1 å¼€å§‹ç´¯åŠ ï¼Œè¿™æ ·æ˜¯ä¸å¯¹çš„ï¼Œæˆ‘ä»¬éœ€è¦â¼€ä¸ªå…¨å±€å”¯â¼€çš„ idæ¥æ”¯æŒã€‚ UUIDï¼šä¸é€‚åˆä½œä¸ºä¸»é”®ï¼Œå› ä¸ºå¤ªé•¿äº†ï¼Œå¹¶ä¸”æ— åºä¸å¯è¯»ï¼ŒæŸ¥è¯¢æ•ˆç‡ä½ã€‚æ¯”è¾ƒé€‚åˆç”¨äºç”Ÿæˆå”¯ä¸€çš„åå­—çš„æ ‡ç¤ºæ¯”å¦‚æ–‡ä»¶çš„åå­—ã€‚ IDè‡ªå¢é‡ä¸ºåˆ†å¸ƒå¼æ•°æ®åº“ä¸ªæ•°ï¼Œç¼ºç‚¹æ˜¯æ‰©å±•æ€§ä¸å¥½ï¼› snow flakeç®—æ³•ï¼šsnowflakeæ˜¯Twitterå¼€æºçš„åˆ†å¸ƒå¼IDç”Ÿæˆç®—æ³•ï¼Œç»“æœæ˜¯ä¸€ä¸ªlongå‹çš„IDã€‚ æ ¸å¿ƒæ€æƒ³ï¼š ä½¿ç”¨41bitä½œä¸ºæ¯«ç§’æ•°ï¼Œ10bitä½œä¸ºæœºå™¨çš„IDï¼ˆ5ä¸ªbitæ˜¯æ•°æ®ä¸­å¿ƒï¼Œ5ä¸ªbitçš„æœºå™¨IDï¼‰ï¼Œ12bitä½œä¸ºæ¯«ç§’å†…çš„æµæ°´å·ï¼ˆæ„å‘³ç€æ¯ä¸ªèŠ‚ç‚¹åœ¨æ¯æ¯«ç§’å¯ä»¥äº§ç”Ÿ 4096 ä¸ª ä¸åŒIDï¼‰ï¼Œæœ€åè¿˜æœ‰ä¸€ä¸ªç¬¦å·ä½ï¼Œæ°¸è¿œæ˜¯0ã€‚ Leafç®—æ³•ï¼šåˆ†å·æ®µ 8.ä»‹ç»ä¸€ä¸‹å“ˆå¸Œç®—æ³•ï¼Ÿå’Œä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ï¼Ÿ å“ˆå¸Œç®—æ³• ä»‹ç»ï¼š å“ˆå¸Œç®—æ³•å°†ä»»æ„é•¿åº¦çš„äºŒè¿›åˆ¶å€¼æ˜ å°„ä¸ºè¾ƒçŸ­çš„å›ºå®šé•¿åº¦çš„äºŒè¿›åˆ¶å€¼ï¼Œè¿™ä¸ªå°çš„äºŒè¿›åˆ¶å€¼ç§°ä¸ºå“ˆå¸Œå€¼ã€‚å“ˆå¸Œå€¼æ˜¯ä¸€æ®µæ•°æ®å”¯ä¸€ä¸”æå…¶ç´§å‡‘çš„æ•°å€¼è¡¨ç¤ºå½¢å¼ã€‚ åˆ†å¸ƒå¼åº”ç”¨ä¸­ç¼ºç‚¹ï¼š åœ¨åˆ†å¸ƒå¼çš„å­˜å‚¨ç³»ç»Ÿä¸­ï¼Œè¦å°†æ•°æ®å­˜å‚¨åˆ°å…·ä½“çš„èŠ‚ç‚¹ä¸Šã€‚å¦‚æœé‡‡ç”¨å“ˆå¸Œç®—æ³•ï¼škey%Nï¼ˆkeyæ˜¯æ•°æ®çš„keyï¼ŒNæ˜¯æœºå™¨èŠ‚ç‚¹æ•°ï¼‰ ã€‚å‡ºç°æœºå™¨åŠ å…¥æˆ–é€€å‡ºé›†ç¾¤ï¼ˆNå˜äº†ï¼Œæ˜ å°„å€¼ä¸ä¸€æ ·äº†ï¼‰ï¼Œæ‰€æœ‰çš„æ•°æ®æ˜ å°„éƒ½æ— æ•ˆäº†ã€‚ ä¸€è‡´æ€§å“ˆå¸Œç®—æ³• ä»‹ç»ï¼šè§£å†³æ™®é€šå“ˆå¸Œç®—æ³•é€ æˆè´Ÿè½½å‡è¡¡æ—¶ï¼Œåœ¨æœåŠ¡èŠ‚ç‚¹æ•°é‡å˜åŠ¨æ—¶å‡ºç°å“ˆå¸Œå¤±æ•ˆ é—®é¢˜ å®ç°ï¼š æ„å»ºç¯ï¼šæŒ‰ç…§å¸¸ç”¨çš„hashç®—æ³•æ¥å°†å¯¹åº”çš„keyå“ˆå¸Œåˆ°ä¸€ä¸ªå…·æœ‰2^32æ¬¡æ–¹ä¸ªèŠ‚ç‚¹çš„ç©ºé—´ä¸­ï¼ˆå³0 ~ (2^32)-1ï¼‰ã€‚ Note: èŠ‚ç‚¹çš„ä¸ªæ•°å¯ä»¥è‡ªå®šä¹‰, hashç¯æˆ‘ä»¬å¯ä»¥ç”¨TreeMapæ¥å®ç°, å› ä¸ºtreeMapæ˜¯æ’åºçš„ï¼Œæˆ‘ä»¬åˆšå¥½å¯ä»¥åˆ©ç”¨ä¸Šã€‚ æ˜ å°„æœåŠ¡å™¨èŠ‚ç‚¹ï¼š å°†å„ä¸ªæœåŠ¡å™¨ä½¿ç”¨Hashè¿›è¡Œä¸€ä¸ªå“ˆå¸Œï¼Œç¡®å®šæ¯å°æœºå™¨å…¶åœ¨å“ˆå¸Œç¯ä¸Šçš„ä½ç½®ã€‚ ä¸€èˆ¬ç”¨æœåŠ¡å™¨ipæˆ–å”¯ä¸€ä¸»æœºåè¿›è¡Œå“ˆå¸Œã€‚ æ˜ å°„æ•°æ®ã€‚ å¯¹äºè¦å­˜å‚¨çš„æ•°æ®ï¼šojectAã€objectBã€objectCã€objectD ï¼Œé¦–å…ˆé€šè¿‡ç‰¹å®šå“ˆå¸Œå‡½æ•°è®¡ç®—å‡ºhashå€¼ ï¼Œæ•£åˆ—åˆ°ç¯ä¸Šã€‚ç„¶åä»æ•°æ®æ‰€åœ¨ä½ç½®æ²¿ç¯é¡ºæ—¶é’ˆâ€œè¡Œèµ°â€ï¼Œç¬¬ä¸€å°é‡åˆ°çš„æœåŠ¡å™¨å°±æ˜¯å…¶åº”è¯¥å®šä½åˆ°çš„æœåŠ¡å™¨ã€‚ å‡ºç°æœåŠ¡å™¨å˜åŠ¨ã€‚ å¦‚æœæ­¤æ—¶NodeCå®•æœºäº†ï¼Œæ­¤æ—¶Object Aã€Bã€Dä¸ä¼šå—åˆ°å½±å“ï¼Œåªæœ‰Object Cä¼šé‡æ–°åˆ†é…åˆ°Node Dã€‚é¿å…äº†å¤§é‡æ•°æ®è¿ç§»ï¼Œå‡å°äº†æœåŠ¡å™¨çš„çš„å‹åŠ› ã€‚ 9. ï¼ˆå†ç†è§£ï¼‰ä»‹ç»ä¸€ä¸‹MVVCï¼Ÿ MVCCï¼ˆMulti-Version Concurrency Controlï¼‰å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼Œæ˜¯ æ•°æ®åº“æ§åˆ¶å¹¶å‘è®¿é—®çš„ä¸€ç§æ‰‹æ®µã€‚ ç‰¹åˆ«è¦æ³¨æ„MVCCåªåœ¨è¯»å·²æäº¤(RC) å’Œå¯é‡å¤è¯»ï¼ˆRRï¼‰ è¿™ä¸¤ç§äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸‹æ‰æœ‰æ•ˆ æ˜¯æ•°æ®åº“å¼•æ“ï¼ˆInnoDBï¼‰ å±‚é¢å®ç°çš„ï¼Œç”¨æ¥å¤„ç†è¯»å†™å†²çªçš„æ‰‹æ®µï¼ˆä¸ç”¨åŠ é”ï¼‰ï¼Œæé«˜è®¿é—®æ€§èƒ½ MVCCåè®®ä¸­ï¼Œäº‹åŠ¡æäº¤ä¸ä¼šè¦†ç›–åŸæ•°æ®ï¼Œè€Œæ˜¯äº§ç”Ÿæ–°ç‰ˆæœ¬æ•°æ®ï¼Œæ¯ä¸ªæ•°æ®æœ‰å¤šä¸ªå†å²ç‰ˆæœ¬ï¼Œä½†åŒä¸€æ—¶åˆ»åªæœ‰æœ€æ–°çš„ç‰ˆæœ¬æœ‰æ•ˆï¼› MVCCæ˜¯åœ¨å¹¶å‘è®¿é—®æ•°æ®åº“æ—¶ï¼Œé€šè¿‡å¯¹æ•°æ®åšå¤šç‰ˆæœ¬ç®¡ç†ï¼Œé¿å…ã€å› ä¸ºå†™é”çš„é˜»å¡è€Œé€ æˆè¯»æ•°æ®çš„å¹¶å‘é˜»å¡ã€‘é—®é¢˜ã€‚å¯ä»¥è®©è¯»å–æ•°æ®åŒæ—¶ä¿®æ”¹ï¼Œã€ä¿®æ”¹æ•°æ®æ—¶åŒæ—¶å¯è¯»å–ã€‘ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ä¸å¯¹æ•°æ®åº“åŠ ä¸Šè¯»å†™é”ï¼ 9.1 MVCC å¦‚ä½•å®ç° ï¼Ÿ å‚è€ƒï¼šInnodb MVCCå®ç°åŸç† æ€»ç»“æ€§å›ç­” MVCCæ˜¯ä»¥ä¸€ä¸ªå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ç³»ç»Ÿï¼Œå®ƒä¸»è¦é€šè¿‡ä»¥ä¸‹ä¸¤ä¸ªéƒ¨åˆ†å®ç°ï¼š æ¯è¡Œè®°å½•ï¼šè®°å½•æœ€è¿‘æ“ä½œè¯¥è¡Œè®°å½•çš„äº‹åŠ¡IDï¼Œå’Œä¸Šä¸€ç‰ˆæœ¬æ•°æ®çš„æŒ‡é’ˆï¼ˆæŒ‡å‘undo logï¼‰ readviewï¼šæ¯æ¬¡è¯»ï¼ˆå†™ä¸å¯ä»¥ï¼‰ å¯ä»¥è·å–ä¸€ä¸ªreadviewï¼Œè®°å½•å½“å‰æ´»è·ƒçš„äº‹åŠ¡ID ï¼Œå¯ä»¥åœ¨å†™çš„è¿‡ç¨‹è¿›è¡Œè¯» å†™çš„æ—¶å€™å¹¶å‘è¯»ï¼Œé€šè¿‡æ¯”è¾ƒå½“å‰è¡Œè®°å½•çš„äº‹åŠ¡IDå’Œreadviewæ´»è·ƒçš„äº‹åŠ¡IDï¼Œæ¥å†³å®šæ˜¯å¦è¯»å–è¯¥è¡Œè®°å½•è¿˜æ˜¯ä¸Šä¸€ç‰ˆæœ¬çš„æ•°æ®ã€‚ MVCCå®ç°çš„æ ¸å¿ƒéƒ¨åˆ†ä¸ºï¼š äº‹åŠ¡ç‰ˆæœ¬å·ï¼šæ¯æ¬¡äº‹åŠ¡å¼€å¯å‰éƒ½ä¼šä»æ•°æ®åº“è·å¾—ä¸€ä¸ªè‡ªå¢é•¿çš„äº‹åŠ¡IDï¼Œå¯ä»¥ä»äº‹åŠ¡IDåˆ¤æ–­äº‹åŠ¡çš„æ‰§è¡Œå…ˆåé¡ºåºã€‚ è¡¨çš„éšè—åˆ— ï¼šæ¯ä¸€è¡Œ æœ‰å¦‚ä¸‹ä¸‰ä¸ªé‡è¦å­—æ®µå±æ€§ï¼š éšè—åˆ— ä½œç”¨ DB_TRX_ID è®°å½•æ“ä½œè¯¥è¡Œäº‹åŠ¡çš„ID DB_ROLL_PTR æŒ‡å‘ä¸Šä¸€ä¸ªç‰ˆæœ¬çš„æ•°æ®ï¼ˆåœ¨undo logï¼‰çš„æŒ‡é’ˆ DB_ROW_ID éšè—IDï¼Œå½“è¡¨æ²¡æœ‰åˆé€‚çš„ç´¢å¼•ä½œä¸ºèšç°‡ç´¢å¼•æ—¶ï¼Œä¼šç”¨è¯¥IDåˆ›å»ºèšç°‡ç´¢å¼• undo log ï¼šæ¯ä¸€è¡Œè®°å½•è¢«ä¿®æ”¹ä¹‹å‰çš„æ—¥å¿—ã€‚ å½“äº‹åŠ¡è¢«å›æ»šæ—¶ï¼Œå¯ä»¥ç”¨é€šè¿‡undo logæ—¥å¿—å¯¹æ•°æ®è¿›è¡Œè¿˜åŸã€‚ ä¸€ä¸ªå°ä¾‹å­ï¼šä¿®æ”¹æŸè¡Œè®°å½•nameä» â€œå¼ ä¸‰â†’æå››â€ read viewã€‚åœ¨innodb ä¸­æ¯ä¸ªSQLè¯­å¥æ‰§è¡Œå‰éƒ½ä¼šå¾—åˆ°ä¸€ä¸ªread_viewï¼Œä¿å­˜äº†å½“å‰æ•°æ®åº“ç³»ç»Ÿä¸­æ­£å¤„äºæ´»è·ƒï¼ˆæ²¡æœ‰æäº¤ï¼‰çš„äº‹åŠ¡çš„IDå·ã€‚ æ ¹æ®äº‹åŠ¡çš„éš”ç¦»æ€§ï¼Œè¿™äº›äº‹åŠ¡IDåˆ—è¡¨ä¸ä¼šè¢«å…¶å®ƒäº‹åŠ¡çœ‹åˆ°ã€‚ å…¶ç›¸å…³é‡è¦å±æ€§å¦‚ä¸‹ï¼š å±æ€§ ä½œç”¨ trx_ids å½“å‰ç³»ç»Ÿï¼šæ´»è·ƒï¼ˆæœªæäº¤ï¼‰äº‹åŠ¡ç‰ˆæœ¬å·é›†åˆ low_limit_id å½“å‰ç³»ç»Ÿï¼šæœ€å¤§ç‰ˆæœ¬äº‹åŠ¡å·+1 up_limit_id å½“å‰ç³»ç»Ÿï¼šæ´»è·ƒçš„æœ€å°äº‹åŠ¡ç‰ˆæœ¬å· creator_trx_id å½“å‰read viewï¼šäº‹åŠ¡ç‰ˆæœ¬å· å…·ä½“åŸç†å¯ä»¥æè¿°å¦‚ä¸‹ï¼š ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾æœ‰ä¸€ä¸ªuser_infoè¡¨ï¼Œåˆå§‹æ•°æ®å¦‚ä¸‹ï¼š ç°åœ¨æœ‰äº‹åŠ¡Aï¼ŒBåŒæ—¶å¯¹id=1 è¿™è¡Œæ•°æ®è¿›è¡Œæ“ä½œï¼Œå…ˆå¼€å¯äº‹åŠ¡Aï¼ˆæœªæäº¤ï¼‰ï¼Œæ­¤æ—¶æ‰§è¡Œäº‹åŠ¡Bï¼Œæœ€åè¿”å›ä»€ä¹ˆç»“æœå‘¢ï¼Ÿ äº‹åŠ¡Aï¼ˆå†™ï¼‰ï¼Œæ‰§è¡Œ update user_info set name =â€æå››â€ è·å¾—äº‹åŠ¡ç¼–å·ï¼š102 å½“å‰äº‹åŠ¡Açš„è§†å›¾ä¸ºï¼šï¼ˆå†™ï¼‰ä¸ä¼šè·å¾—read viewï¼ äº‹åŠ¡Bï¼ˆè¯»ï¼‰ï¼Œæ‰§è¡Œ select * fom user_info where id=1 è·å¾—äº‹åŠ¡Bç¼–å·ï¼š103 å½“å‰äº‹åŠ¡Bçš„è§†å›¾ä¸ºï¼š trx_ids å½“å‰æ´»è·ƒçš„äº‹åŠ¡ï¼š102,103 low_limit_id å½“å‰æœ€å¤§äº‹åŠ¡id+1:104 up_limit_id å½“å‰æœ€å°äº‹åŠ¡idï¼š102 creator_trx_id å½“å‰äº‹åŠ¡idï¼š103 ä¸åŒéš”ç¦»çº§åˆ«ä¸‹ï¼Œread viewçš„å·¥ä½œæ–¹å¼ï¼š è¯»æœªæäº¤ï¼šä¸ä¼šè·å¾—read viewçš„å‰¯æœ¬ï¼ˆç­‰äºæ²¡æœ‰å¹¶å‘æ§åˆ¶æ‰€ä»¥ä¼šå‡ºç°è„è¯»ï¼‰ è¯»æäº¤ï¼šæ¯ä¸€æ¬¡selectéƒ½ä¼šè·å¾—ä¸€ä¸ªread viewçš„å‰¯æœ¬ï¼Œæ‰€ä»¥ä¼šé€ æˆã€ä¸å¯é‡å¤è¯»ã€‘ å¯é‡å¤è¯»ï¼šåŒä¸€ä¸ªäº‹åŠ¡selectåªä¼šè·å¾—ä¸€æ¬¡read viewå‰¯æœ¬ï¼ˆselectçš„æ—¶å€™ä¸å…è®¸ä¿®æ”¹ï¼‰ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°ä¸å¯é‡å¤è¯»ã€‚ äº‹åŠ¡Aï¼ˆå†™ï¼‰ï¼Œå¼€å§‹æ‰§è¡Œupdateè¯­å¥ï¼šï¼ˆ1ï¼‰æŠŠåŸæ•°æ®æ‹·è´åˆ°undo logï¼Œï¼ˆ2ï¼‰ç„¶åè¿›è¡Œä¿®æ”¹nameå­—æ®µï¼šâ€œå¼ ä¸‰â†’æå››â€ï¼Œï¼ˆ3ï¼‰å¹¶è®¾ç½®DB_TRX_ID éšè—å­—æ®µï¼š99â†’102 ï¼ˆ4ï¼‰è®¾ç½®DB_ROLL_PTRéšè—å­—æ®µï¼šæ‰§è¡Œä¸Šä¸ªäº‹åŠ¡ç‰ˆæœ¬åœ°å€ æ­¤æ—¶ï¼Œäº‹åŠ¡Aè¿˜å¹¶æœªæäº¤ï¼Œä¾æ—§æ˜¯å¤„äºæ´»è·ƒçŠ¶æ€ã€‚ äº‹åŠ¡Bï¼ˆè¯»ï¼‰ï¼Œå¼€å§‹æ‰§è¡Œselectè¯­å¥ï¼ŒæŸ¥è¯¢åˆ°æ˜¯äº‹åŠ¡Aä¿®æ”¹åçš„è¯­å¥ æŠŠæ•°æ®å’Œread view ï¼ˆè§†å›¾ï¼‰åŒ¹é…ï¼š ä¿è¯ï¼ˆ1ï¼‰æ•°æ®å·²æäº¤ï¼Œæ²¡æœ‰å…¶ä»–äº‹ç‰©ä¿®æ”¹ï¼Œå¦åˆ™å»æ‰¾ä¸Šä¸€ç‰ˆæœ¬çš„æ•°æ®ã€‚ å½“å‰æ•°æ®è®°å½•çš„äº‹åŠ¡id &lt; äº‹åŠ¡Bè§†å›¾ä¸­æœ€å°æ´»è·ƒäº‹åŠ¡id : è¯´æ˜æ•°æ®ï¼Œæ˜¯åœ¨äº‹åŠ¡Bçš„read view åˆ›å»ºå‰å°±å­˜åœ¨ï¼Œæ‰€ä»¥å¯ä»¥æ˜¾ç¤ºã€‚ å½“å‰æ•°æ®è®°å½•çš„äº‹åŠ¡id &gt; äº‹åŠ¡Bè§†å›¾ä¸­æœ€å¤§æ´»è·ƒäº‹åŠ¡id ï¼šè¯´æ˜æ•°æ®ï¼Œæ˜¯åœ¨äº‹åŠ¡Bçš„read view åˆ›å»ºåæ‰å­˜åœ¨ï¼Œæ­¤æ—¶ä¸åº”è¯¥æ˜¾ç¤ºã€‚ äº‹åŠ¡Bè§†å›¾ä¸­æœ€å°æ´»è·ƒäº‹åŠ¡id&lt;= å½“å‰æ•°æ®è®°å½•çš„äº‹åŠ¡id &lt;= äº‹åŠ¡Bè§†å›¾ä¸­æœ€å¤§æ´»è·ƒäº‹åŠ¡id ï¼š è¯´æ˜æœ‰å…¶å®ƒäº‹åŠ¡åœ¨ä¿®æ”¹è¿™è¡Œè®°å½•æ•°æ®ï¼Œä½†å¯èƒ½è¿˜æ²¡æœ‰æäº¤ã€‚æŠŠidå’Œäº‹åŠ¡Bçš„read viewçš„æ´»è·ƒäº‹åŠ¡é›†åˆtrx_idsè¿›è¡ŒåŒ¹é…ï¼š å¦‚æœæ•°æ®è®°å½•çš„IDä¸å­˜åœ¨trx_idsï¼Œè¯´æ˜å·²ç»æäº¤äº†äº‹åŠ¡ï¼Œå¯ä»¥æ˜¾ç¤º å¦‚æœå­˜åœ¨trx_idsï¼Œè¯´æ˜æ•°æ®è¿˜æ²¡æäº¤ï¼Œæ­¤æ—¶äº‹åŠ¡BæŸ¥è¯¢åˆ°æ•°æ®ä¸èƒ½æ˜¾ç¤ºï¼ˆé™¤éæ­¤æ—¶æ•°æ®è®°å½•çš„äº‹åŠ¡id == äº‹åŠ¡Bçš„idï¼Œç”±äºæ˜¯è‡ªå·±çš„å½“ç„¶å¯ä»¥æ˜¾ç¤ºï¼‰ äº‹åŠ¡Bï¼ˆè¯»ï¼‰ï¼Œæ ¹æ®ä¸Šè¿°åŒ¹é…è§„åˆ™ï¼Œæ­¤æ—¶ä¸èƒ½è¯»ï¼Œåº”è¯¥å»undo logä¸­æ‰¾åˆ°ä¸Šä¸€ç‰ˆæœ¬æ•°æ®ã€‚ æ­¤æ—¶äº‹åŠ¡Bçš„id=103ï¼Œæ•°æ®è®°å½•çš„äº‹åŠ¡id=102 ï¼šæ»¡è¶³æ¡ä»¶3ï¼Œä¸”æ­¤æ—¶trx_idså­˜åœ¨äº‹åŠ¡id=102ï¼Œè¯´æ˜äº‹åŠ¡Aï¼ˆid=102ï¼‰è¿˜æ²¡æäº¤ï¼Œå› æ­¤ä¸èƒ½æ˜¾ç¤ºã€‚ æ•…ï¼Œæœ€ç»ˆæŸ¥æ‰¾çš„æ•°æ®ä¸ºï¼š å¯ä»¥çœ‹åˆ°ï¼Œæ•´ä¸ªè¿‡ç¨‹MVCCäº‹åŠ¡Aã€å†™ã€‘æ²¡æœ‰åŠ é”ï¼Œåªæ˜¯è¿›è¡Œç‰ˆæœ¬å·æ§åˆ¶ &amp; undo logï¼Œå¯ä»¥è¿›è¡Œå¹¶å‘ã€è¯»ã€‘ã€‚ 9.2 MVCC ç‰ˆæœ¬å·å¦‚ä½•å˜åŒ–çš„ï¼Ÿæ›´æ–°çš„æ•°æ®å¦‚ä½•ç¡®å®šç‰ˆæœ¬çš„ï¼Ÿã€å¹»è¯»ã€‘åˆæ˜¯æ€ä¹ˆè§£å†³çš„å‘¢ï¼Ÿ ç‰ˆæœ¬å·å˜åŒ– æ¯æ¡è®°å½•æœ‰ä¸‰ä¸ªéšè—åˆ—ï¼šï¼ˆ1ï¼‰DB_TRX_ID ï¼ˆ2ï¼‰DB_ROLL_PTR ï¼ˆ3ï¼‰DB_ROW_ID æ¯ä¸€æ¬¡æ–°äº‹åŠ¡ï¼Œupdateæ›´æ–°è¯­å¥ï¼Œéƒ½ä¼šå°†ï¼ˆ1ï¼‰æ‹·è´æ•°æ®åˆ°undo logï¼ˆ2ï¼‰DB_ROLL_PTRæŒ‡å‘ä¸Šä¸ªæ•°æ®çš„ç‰ˆæœ¬undo logï¼ˆ3ï¼‰DB_TRX_IDä¿®æ”¹ä¸ºæ–°äº‹åŠ¡çš„id ã€‚ ä¸ºä»€ä¹ˆMVCCå¯è§£å†³å¹»è¯» åœ¨RRï¼ˆå¯é‡å¤è¯»çº§åˆ«ä¸‹ï¼‰ä¸ä¼šå‡ºç°å¹»è¯»ã€‚ä¾‹å¦‚ï¼š å¼€å¯äº‹åŠ¡1ï¼Œè·å¾—äº‹åŠ¡IDä¸º1ï¼› äº‹åŠ¡1æ‰§è¡ŒæŸ¥è¯¢ï¼Œå¾—åˆ°readviewï¼› å¼€å§‹äº‹åŠ¡2ï¼› æ‰§è¡Œinsertï¼› æäº¤äº‹åŠ¡2ï¼› æ‰§è¡Œäº‹åŠ¡1çš„ç¬¬äºŒæ¬¡æŸ¥è¯¢ (å› ä¸ºè¿™é‡Œæ˜¯RRçº§åˆ«ï¼Œæ‰€ä»¥ä¸ä¼šå†å»è·å¾—readviewï¼Œè¿˜æ˜¯ä½¿ç”¨ç¬¬ä¸€æ¬¡è·å¾—çš„readviewï¼Œæ‰€ä»¥å½“å‰read view äº‹åŠ¡çš„IDä¸ä¼šæ›´æ–°ï¼Œå³ä¸ä¼šåŠ å…¥æ’å…¥äº‹åŠ¡2)ï¼› æœ€åå¾—åˆ°çš„ç»“æœæ˜¯ï¼Œæ’å…¥çš„æ•°æ®ä¸ä¼šæ˜¾ç¤ºï¼Œå› ä¸ºæ’å…¥çš„æ•°æ®äº‹åŠ¡ID &gt; readviewé‡Œçš„æœ€å¤§æ´»è·ƒäº‹åŠ¡IDã€‚ 9.3 mvvc å’Œ for updateçš„åŒºåˆ« æ˜¯å¦åŠ é”ï¼š mvvcä¸åŠ é”ï¼Œåªé€šè¿‡å¤šç‰ˆæœ¬æ¥è¿›è¡Œå¹¶å‘æ§åˆ¶ï¼›for updateä¼šåŠ é”ï¼ˆå³X/å†™é”ï¼‰ã€‚ 9.4 ï¼ˆå¿«æ‰‹ï¼‰MVCCä½œç”¨ï¼Œå¦‚ä½•å®ç°RCï¼ŒRR? å‚è€ƒï¼šhttps://zhuanlan.zhihu.com/p/73078137 ä½œç”¨å¦‚ä¸‹ï¼š æœ€ç®€å•çš„æè¿°ï¼Œè¯»å†™ä¸é˜»å¡ï¼Œè¯»çš„æ—¶å€™å¯ä»¥å†™ æé«˜æ€§èƒ½ å®ç°RCï¼ŒRRä¸¤ä¸ªéš”ç¦»çº§åˆ«ï¼š MVCC è¯»æŸä¸€ä¸ªæ•°æ®æ—¶ï¼Œæ ¹æ®éš”ç¦»çº§åˆ«ï¼Œäº‹åŠ¡é€‰æ‹©è¦è¯»å–å“ªä¸ªç‰ˆæœ¬çš„æ•°æ®ï¼Œè¿‡ç¨‹ä¸­å®Œå…¨ä¸éœ€è¦åŠ é”ã€‚ Read Committed ï¼šä¸€ä¸ªäº‹åŠ¡è¯»å–æ•°æ®æ—¶æ€»æ˜¯è¯»è¿™ä¸ªæ•°æ®æœ€è¿‘ä¸€æ¬¡è¢«commitçš„ç‰ˆæœ¬ ï¼Œæ‰€ä»¥å¯ä»¥é¿å…è„è¯»ï¼ˆå¿«æ‰‹ï¼‰ï¼› Repeatable Read ï¼š ä¸€ä¸ªäº‹åŠ¡è¯»å–æ•°æ®æ—¶æ€»æ˜¯è¯»å–å½“å‰ã€äº‹åŠ¡å¼€å§‹ä¹‹å‰ã€‘æœ€åä¸€æ¬¡è¢«commitçš„ç‰ˆæœ¬ï¼ˆæ‰€ä»¥åº•å±‚å®ç°æ—¶éœ€è¦æ¯”è¾ƒå½“å‰äº‹åŠ¡å’Œæ•°æ®è¢«commitçš„ç‰ˆæœ¬å·ï¼‰ï¼Œæ‰€ä»¥é¿å…äº†å¹»è¯»ï¼ˆå¿«æ‰‹ï¼‰ã€‚ ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼š ä¸€ä¸ªäº‹åŠ¡Aï¼ˆtxnId=100ï¼‰ä¿®æ”¹äº†æ•°æ®Xï¼Œä½¿å¾—X=1ï¼Œå¹¶ä¸”commitäº† å¦å¤–ä¸€ä¸ªäº‹åŠ¡Bï¼ˆtxnId=101ï¼‰å¼€å§‹å°è¯•è¯»å–Xï¼Œä½†æ˜¯è¿˜X=1ã€‚ä½†Bæ²¡æœ‰æäº¤ã€‚ ç¬¬ä¸‰ä¸ªäº‹åŠ¡Cï¼ˆtxnId=102ï¼‰ä¿®æ”¹äº†æ•°æ®Xï¼Œä½¿å¾—X=2ã€‚å¹¶ä¸”æäº¤äº† äº‹åŠ¡Båˆä¸€æ¬¡è¯»å–äº†Xã€‚è¿™æ—¶ å¦‚æœäº‹åŠ¡Bæ˜¯Read Committedã€‚é‚£ä¹ˆå°±è¯»å–Xçš„æœ€æ–°commitçš„ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯X=2 å¦‚æœäº‹åŠ¡Bæ˜¯Repeatable Readã€‚é‚£ä¹ˆè¯»å–çš„å°±æ˜¯å½“å‰äº‹åŠ¡ï¼ˆtxnId=101ï¼‰ä¹‹å‰Xçš„æœ€æ–°ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯Xè¢«txnId=100æäº¤çš„ç‰ˆæœ¬ï¼Œå³X=1ã€‚ æ³¨æ„ï¼Œè¿™é‡ŒBä¸è®ºæ˜¯Read Committedï¼Œè¿˜æ˜¯Repeatable Readï¼Œéƒ½ä¸ä¼šè¢«é”ï¼Œéƒ½èƒ½ç«‹åˆ»æ‹¿åˆ°ç»“æœã€‚è¿™ä¹Ÿå°±æ˜¯MVCCå­˜åœ¨çš„æ„ä¹‰ã€‚ 5.3 ç´¢å¼•ç›¸å…³ ğŸ›° å¼ºçƒˆå»ºè®®å¯¹ç´¢å¼•æ›´æ·±åˆ»ç†è§£ï¼Œå…ˆçœ‹å®Œç¾å›¢è¿™ç¯‡æŠ€æœ¯æ–‡ç« ï¼šMySQLç´¢å¼•åŸç†åŠæ…¢æŸ¥è¯¢ä¼˜åŒ– 0. MySQLç´¢å¼•åŸç†åŠæ…¢æŸ¥è¯¢ä¼˜åŒ– 0.1 ä¸ºä»€ä¹ˆè¦éœ€è¦ç´¢å¼• ç­”åˆ°ï¼šéå†ç£ç›˜å¼€é”€å¤ªå¤§è¿™ä¸ªå…³é”®ã€‚ æ•°æ®åº“å®ç°æ¯”è¾ƒå¤æ‚ï¼Œæ•°æ®ä¿å­˜åœ¨ç£ç›˜ä¸Šï¼Œè€Œä¸ºäº†æé«˜æ€§èƒ½ï¼Œæ¯æ¬¡åˆå¯ä»¥æŠŠéƒ¨åˆ†è¯»å…¥å†…å­˜æ¥è®¡ç®— ã€‚ ç£ç›˜çš„æˆæœ¬å¤§æ¦‚æ˜¯è®¿é—®å†…å­˜çš„åä¸‡å€å·¦å³ ï¼Œ æ¯æ¬¡å»éå†ç£ç›˜æ‰¾åˆ°æ•°æ®å†è¯»å…¥å†…å­˜ï¼Œæ˜¯éš¾ä»¥æ¥å—çš„ã€‚å› æ­¤éœ€è¦ä¸€ç§å¿«é€Ÿæ‰¾åˆ°ç£ç›˜æ•°æ®çš„æ–¹å¼ï¼Œå°±åƒå­—å…¸é€šè¿‡å­—æ¯ç´¢å¼•â†’å¿«é€Ÿå®šä½å•è¯ã€‚å› æ­¤ç´¢å¼•ç”±æ­¤è€Œå‡ºç°ã€‚ 0.2 å±€éƒ¨æ€§åŸç†ï¼ˆç£ç›˜IOä¸€æ¬¡è¯»å–å¤§å°ï¼‰ åœ¨ç»§ç»­å¾€ä¸‹è®²ä¹‹å‰ï¼Œå…ˆæ¥è®²è®²ç£ç›˜è¯»å–å±€éƒ¨æ€§åŸç†ã€‚ å±€éƒ¨é¢„è¯»æ€§åŸç†å‘Šè¯‰æˆ‘ä»¬ï¼Œå½“è®¡ç®—æœºè®¿é—®ä¸€ä¸ªåœ°å€çš„æ•°æ®çš„æ—¶å€™ï¼Œä¸å…¶ç›¸é‚»çš„æ•°æ®ä¹Ÿä¼šå¾ˆå¿«è¢«è®¿é—®åˆ°ã€‚ å› æ­¤ï¼Œå½“ä¸€æ¬¡IOæ—¶ï¼Œä¸å…‰æŠŠå½“å‰ç£ç›˜åœ°å€çš„æ•°æ®ï¼Œè€Œæ˜¯æŠŠç›¸é‚»çš„æ•°æ®ä¹Ÿéƒ½è¯»å–åˆ°å†…å­˜ç¼“å†²åŒºå†…ã€‚ æ¯æ¬¡IOè¯»å–çš„æ•°æ®ï¼Œåˆ†ä¸ºä¸‹é¢æƒ…å†µï¼š Linuxï¼šä¸Šä»¥é¡µä¸ºå•ä½ï¼Œä¸€æ¬¡ä¸€é¡µï¼ˆ4Kï¼‰ æ•°æ®åº“ï¼šmysqlï¼ˆInnoDBå¼•æ“ï¼‰ä¸€é¡µï¼ˆ16Kï¼‰; SQL Server/ Oracleï¼Œé»˜è®¤å—ï¼Œå¤§å°éƒ½æ˜¯8KB 0.3 ç´¢å¼•â†’B+æ ‘ ç›¸æ¯”äºŒå‰æ ‘ï¼Œå¹³è¡¡æ ‘ç­‰ï¼ŒB+æ ‘ ä½œä¸ºé«˜åº¦å¯æ§çš„å¤šè·¯æœç´¢æ ‘ ï¼Œå¯ä»¥å¾ˆå¥½çš„æ»¡è¶³è¦æ±‚ã€‚ï¼ˆè¯¦ç»†é€‰æ‹©åŸå› ï¼Œå¯ä»¥å‚è€ƒï¼š5.3 ç´¢å¼•ç›¸å…³â€“é—®ç­”6ï¼‰ B+æ ‘åŸºæœ¬ç»“æ„ æµ…è“è‰²æ˜¯ä¸€ä¸ªç£ç›˜å—ï¼Œæ•°æ®é¡¹å°±æ˜¯è¢«ç»„ç»‡ç´¢å¼•é‚£åˆ—çš„å­—æ®µå€¼ã€‚ å¦‚æœæ˜¯Innodbå¼•æ“ï¼Œä½¿ç”¨èšç°‡ç´¢å¼•å°±æ˜¯æŒ‰ç…§æ¯å¼ è¡¨çš„ä¸»é”® æ„é€ ç´¢å¼•ï¼Œé‚£ä¹ˆæ­¤æ—¶æ•°æ®é¡¹å°±æ˜¯ä¸»é”®å€¼ã€‚ è“è‰²éƒ¨åˆ†ï¼ˆå¦‚17,35ï¼‰æ˜¯æ•°æ®é¡¹ï¼›é»„è‰²éƒ¨åˆ†ï¼ˆå¦‚P1,P2,P3ï¼‰æ˜¯æŒ‡é’ˆï¼ŒæŒ‡å‘ä¸‹ä¸ªç£ç›˜å—ï¼ˆé¡µåœ°å€ï¼‰ã€‚ 1. ä¸ºä»€ä¹ˆB+æ ‘éå¶å­èŠ‚ç‚¹ä¸å­˜æ”¾æ•°æ®ï¼Ÿ IOæ¬¡æ•°å–å†³äºb+æ•°çš„é«˜åº¦hï¼Œæ¯ä¸ªç£ç›˜å—å¤§å°ä¹Ÿæ˜¯ä¸€å®šï¼ˆä¸€é¡µï¼‰çš„ã€‚å¦‚æœæ•°æ®é¡¹å çš„ç©ºé—´è¶Šå°ï¼Œä¸€ä¸ªç£ç›˜å—æ•°æ®é¡¹çš„æ•°é‡è¶Šå¤šï¼Œæ ‘çš„é«˜åº¦è¶Šä½ï¼ŒB+å¯ä»¥æ›´é«˜é˜¶ï¼ˆæŒ‡é’ˆå ç”¨å…ˆå¿½ç•¥ï¼‰ã€‚ æ‰€ä»¥ç£ç›˜éå¶å­èŠ‚ç‚¹ä¸ä¿å­˜æ•°æ®ï¼Œæ˜¯ä¸ºäº†ä¿å­˜æ›´å¤šçš„æ•°æ®é¡¹å’ŒæŒ‡é’ˆï¼Œè¿™æ ·ä¸€é¢—B+æ ‘å¶å­èŠ‚ç‚¹å°±èƒ½å­˜å‚¨æ›´å¤šçš„æ•°æ®ã€‚ 2. æ•°æ®æŸ¥æ‰¾è¿‡ç¨‹ï¼Ÿ ä»¥æŸ¥æ‰¾æ•°æ®é¡¹=28 ï¼Œè¿‡ç¨‹ä¸ºä¾‹ï¼š ï¼ˆ1ï¼‰ å…ˆ åŠ è½½ï¼ˆä¸€èˆ¬å¸¸é©»å†…å­˜ï¼‰ æ ¹é¡µé¢1ï¼ˆç£ç›˜å—1ï¼‰ï¼Œå› ä¸º17&lt;28&lt;35 æ‰€ä»¥ä½¿ç”¨P2æŒ‡é’ˆ ï¼Œ æ‰¾åˆ°ç£ç›˜å—3ï¼ˆé¡µé¢3ï¼‰åœ°å€ ï¼ˆ2ï¼‰åœ¨ IOåŠ è½½ ç£ç›˜å—3ï¼Œå› ä¸º 26&lt;28&lt;30 ï¼Œå› æ­¤æ ¹æ®æ­¤æ—¶çš„P2 æŒ‡é’ˆï¼Œæ‰¾åˆ°ç£ç›˜å—8æ‰€åœ¨çš„åœ°å€ ï¼ˆ3ï¼‰ IOåŠ è½½ ç£ç›˜å—8ï¼Œå› ä¸ºæ­¤æ—¶æ˜¯å¶å­èŠ‚ç‚¹ï¼Œå¯ä»¥å¾—åˆ°æ•°æ®é¡¹=28å¯¹åº”çš„é‚£è¡Œè®°å½• ã€‚ ä»…ä»…æœ€å¤š3æ¬¡ç£ç›˜IOå°±æ‰¾åˆ°äº†æ•°æ®ï¼Œè¿™æå‡æ˜¯å·¨å¤§çš„ã€‚ 3. é«˜åº¦ä¸º3çš„B+æ•°å¯ä»¥å­˜å‚¨å¤šå°‘æ•°æ®ï¼Ÿ å¶å­èŠ‚ç‚¹ä¸€é¡µå­˜å‚¨çš„è®°å½•æ•° mysqlä¸€é¡µ16Kï¼Œæ‰€ä»¥ä¸€é¡µå­˜å‚¨16K/1K = 16æ¡ è®°å½•ã€‚ï¼ˆå®é™…çœŸå®ä¸šåŠ¡åœºæ™¯ä¸€æ¡è®°å½•ä¸€èˆ¬å°±æ˜¯1Kï¼‰ éå¶å­èŠ‚ç‚¹ä¸€é¡µå­˜å‚¨çš„æŒ‡é’ˆæ•° ç”±äºæ•°æ®é¡¹ä¹Ÿè¦å ç”¨ç©ºé—´ï¼Œå…¶å’ŒæŒ‡é’ˆåªç›¸å·®1ï¼ŒæŒ‰æˆå¯¹ç®—ã€‚ å‡è®¾ä¸»é”®IDï¼ˆæ•°æ®é¡¹ï¼‰ä¸ºbigintç±»å‹ï¼Œé•¿åº¦ä¸º8å­—èŠ‚ï¼Œè€ŒæŒ‡é’ˆå¤§å°åœ¨InnoDBæºç ä¸­è®¾ç½®ä¸º6å­—èŠ‚ ã€‚é‚£ä¹ˆä¸€å…±14å­—èŠ‚ã€‚ æ‰€ä»¥ä¸€é¡µå¯ä»¥å­˜å‚¨ï¼š16K / 14B â‰ˆ 1K ä¸ªæŒ‡å‘é¡µé¢çš„æŒ‡é’ˆã€‚ è®¡ç®—å¯ä»¥å­˜å‚¨å¤šå°‘é¡µ é«˜åº¦ä¸º3çš„B+æ ‘ï¼Œç¬¬3å±‚å¶å­èŠ‚ç‚¹å­˜å‚¨çœŸå®æ•°æ®é¡µï¼Œå‰2å±‚æ˜¯å­˜å‚¨æ•°æ®é¡¹+æŒ‡é’ˆã€‚ç¬¬äºŒå±‚æŒ‡é’ˆ==å¶å­èŠ‚ç‚¹å­˜å‚¨çš„é¡µé¢æ•°ã€‚ ç¬¬ä¸€å±‚ï¼šæ ¹é¡µé¢å¯ä»¥å­˜å‚¨1Kä¸ªæŒ‡é’ˆï¼Œæ¯ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªæ–°çš„é¡µé¢ ç¬¬äºŒå±‚ï¼šå­˜å‚¨ 1K*1K = 1M ï¼Œçº¦ä¸€ç™¾ä¸‡ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ç™¾ä¸‡ä¸ªå¶å­æ•°æ®é¡µé¢ æ‰€ä»¥ä¸€å…±å­˜å‚¨ï¼š1M*16â‰ˆ16M ï¼Œå³åƒä¸‡çº§åˆ«çš„æ•°æ®ã€‚ 0.4 æ…¢æŸ¥è¯¢ä¼˜åŒ– ï¼ˆæš‚ç•¥ï¼‰ 1. MySQç´¢å¼•çš„åŸç†å’Œæ•°æ®ç»“æ„èƒ½ä»‹ç»ä¸€ä¸‹å—ï¼Ÿç´¢å¼•çš„ç¼ºç‚¹ï¼Ÿ ç´¢å¼•åŸç†ï¼š æœ¬è´¨æ˜¯ç”¨æ¥ä¼˜åŒ–æŸ¥è¯¢é€Ÿåº¦ã€‚ç”¨ä¸€ä¸ªæ•°æ®ç»“æ„ç»„ç»‡æŸä¸€åˆ—çš„æ•°æ®ï¼Œç„¶åå¦‚æœä½ è¦æ ¹æ®é‚£ä¸€åˆ—çš„æ•°æ®æŸ¥è¯¢çš„æ—¶å€™ï¼Œå°±å¯ä»¥ä¸ç”¨å…¨è¡¨æ‰«æï¼Œåªè¦æ ¹æ®é‚£ä¸ªç‰¹å®šçš„æ•°æ®ç»“æ„å¿«é€Ÿå»æ‰¾åˆ°é‚£ä¸€åˆ—çš„å€¼ã€‚ æ•°æ®ç»“æ„ï¼š MySQLç´¢å¼•é€šè¿‡B+æ ‘æ¥å®ç°ï¼ˆæŒ‰æ•°æ®ç»“æ„åˆ†ä¹Ÿæœ‰hashç´¢å¼•ã€fulltextç´¢å¼•ï¼‰ã€‚ ç´¢å¼•ç¼ºç‚¹ï¼š ï¼ˆ1ï¼‰å ç”¨ç£ç›˜å­˜å‚¨ç©ºé—´ ï¼ˆ2ï¼‰é™ä½è¡¨æ›´æ–°é€Ÿåº¦ï¼Œè¡¨å‘ç”Ÿå˜åŒ–ï¼Œç´¢å¼•ä¹Ÿè¦å‘ç”Ÿå˜åŒ– 2. MySQL ç´¢å¼•ç±»å‹æœ‰å“ªäº›ï¼Ÿ æŒ‰æ•°æ®ç»“æ„åˆ†ç±»å¯åˆ†ä¸ºï¼šB+treeç´¢å¼•ã€Hashç´¢å¼•ã€Full-textç´¢å¼•ã€‚ æŒ‰ç‰©ç†å­˜å‚¨åˆ†ç±»å¯åˆ†ä¸ºï¼šèšç°‡ç´¢å¼•ã€äºŒçº§ç´¢å¼•ï¼ˆè¾…åŠ©ç´¢å¼•ï¼‰ã€‚ æŒ‰å­—æ®µç‰¹æ€§åˆ†ç±»å¯åˆ†ä¸ºï¼šä¸»é”®ç´¢å¼•ã€æ™®é€šç´¢å¼•ã€å‰ç¼€ç´¢å¼•ã€‚ æŒ‰å­—æ®µä¸ªæ•°åˆ†ç±»å¯åˆ†ä¸ºï¼šå•åˆ—ç´¢å¼•ã€è”åˆç´¢å¼•ï¼ˆå¤åˆç´¢å¼•ã€ç»„åˆç´¢å¼•ï¼‰ã€‚ ä¸»é”®ç´¢å¼•ï¼šç´¢å¼•åˆ—ä¸­çš„å€¼å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œä¸å…è®¸æœ‰ç©ºå€¼ï¼› å”¯ä¸€ç´¢å¼•ï¼šç´¢å¼•åˆ—ä¸­çš„å€¼å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œä½†æ˜¯å…è®¸ä¸ºç©ºå€¼ï¼› æ™®é€šç´¢å¼•ï¼šMySQLä¸­åŸºæœ¬ç´¢å¼•ç±»å‹ï¼Œæ²¡æœ‰ä»€ä¹ˆé™åˆ¶ï¼Œå…è®¸åœ¨å®šä¹‰ç´¢å¼•çš„åˆ—ä¸­æ’å…¥é‡å¤å€¼å’Œç©ºå€¼ï¼› å…¨æ–‡ç´¢å¼•ï¼šåªèƒ½åœ¨æ–‡æœ¬ç±»å‹CHAR,VARCHAR,TEXTç±»å‹å­—æ®µä¸Šåˆ›å»ºå…¨æ–‡ç´¢å¼•ï¼› å­—æ®µé•¿åº¦æ¯”è¾ƒå¤§æ—¶ï¼Œå¦‚æœåˆ›å»ºæ™®é€šç´¢å¼•ï¼Œåœ¨è¿›è¡Œlikeæ¨¡ç³ŠæŸ¥è¯¢æ—¶æ•ˆç‡æ¯”è¾ƒä½ï¼Œè¿™æ—¶å¯ä»¥åˆ›å»ºå…¨æ–‡ç´¢å¼•ï¼› MyISAMå’ŒInnoDBä¸­éƒ½å¯ä»¥ä½¿ç”¨å…¨æ–‡ç´¢å¼•ã€‚ å‰ç¼€ç´¢å¼•ï¼šåœ¨æ–‡æœ¬ç±»å‹å¦‚CHAR,VARCHAR,TEXTç±»åˆ—ä¸Šåˆ›å»ºç´¢å¼•æ—¶ï¼Œå¯ä»¥æŒ‡å®šç´¢å¼•åˆ—çš„é•¿åº¦ï¼Œä½†æ˜¯æ•°å€¼ç±»å‹ä¸èƒ½æŒ‡å®šï¼› ç©ºé—´ç´¢å¼•ï¼š MySQLåœ¨5.7ä¹‹åçš„ç‰ˆæœ¬æ”¯æŒäº†ç©ºé—´ç´¢å¼•ï¼Œè€Œä¸”æ”¯æŒOpenGISå‡ ä½•æ•°æ®æ¨¡å‹ã€‚ MySQLåœ¨ç©ºé—´ç´¢å¼•è¿™æ–¹é¢éµå¾ªOpenGISå‡ ä½•æ•°æ®æ¨¡å‹è§„åˆ™ã€‚ 2.1 ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•ï¼Ÿ æˆ‘ä»¬åœ¨éèšç°‡ç´¢å¼•ä¸€èˆ¬åªè·å¾—äº†ï¼Œè®°å½•çš„keyå€¼ï¼ˆInnodbå¼•æ“ï¼‰ï¼Œè¿˜éœ€è¦å›åˆ°èšç°‡ç´¢å¼•ä¸­å†æ¬¡æŸ¥è¯¢ã€‚ è¦†ç›–ç´¢å¼•ï¼š ä»éä¸»é”®ç´¢å¼•ä¸­å°±èƒ½æŸ¥åˆ°çš„è®°å½•ï¼Œè€Œä¸éœ€è¦æŸ¥è¯¢ä¸»é”®ç´¢å¼•ä¸­çš„è®°å½•ï¼Œé¿å…äº†å›è¡¨çš„äº§ç”Ÿå‡å°‘äº†æ ‘çš„æœç´¢æ¬¡æ•°ï¼Œæ˜¾è‘—æå‡æ€§èƒ½ã€‚ ä¸€ä¸ªå°ä¾‹å­ã€‚ ä»¥nameå’Œageä¸¤ä¸ªå­—æ®µå»ºç«‹è”åˆç´¢å¼•ï¼Œsqlå‘½ä»¤ä¸å»ºç«‹åçš„ç´¢å¼•æ ‘ç»“æ„å¦‚ä¸‹ï¼š 12ALTER TABLE student DROP INDEX I_name;ALTER TABLE student ADD INDEX I_name_age(name, age); æ­¤æ—¶æ‰§è¡Œå¦‚ä¸‹sqlï¼š 1SELECT age FROM student WHERE name = &#x27;å°æ&#x27;ï¼› åœ¨éèšç°‡ç´¢å¼•ä¸­åŒ…å«äº†ageä¿¡æ¯ï¼Œé‚£ä¹ˆç›´æ¥è¿”å›12ï¼Œä¸éœ€è¦å†åˆ°èšç°‡ç´¢å¼•ä¸­æŸ¥è¯¢ã€‚ ã€é‡ç‚¹ã€‘3.ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ç´¢å¼•æ¯”è¾ƒå¥½ï¼Ÿä»€ä¹ˆæ—¶å€™ä¸è¦ä½¿ç”¨ç´¢å¼•ï¼Ÿ 3.1 ä»€ä¹ˆæ—¶å€™ç”¨ç´¢å¼• ç‰¹åˆ«çš„ï¼Œä¸»é”®è‡ªåŠ¨å»ºç«‹å”¯ä¸€ç´¢å¼•ã€‚ é¢‘ç¹ä½œä¸ºæŸ¥è¯¢æ¡ä»¶çš„å­—æ®µåº”è¯¥åˆ›å»ºç´¢å¼• ï¼› æŸ¥è¯¢ä¸­ä¸å…¶ä»–è¡¨å…³è”çš„å­—æ®µï¼Œå¤–é”®å…³ç³»å»ºç«‹ç´¢å¼•ï¼› æŸ¥è¯¢ä¸­æ’åºçš„å­—æ®µï¼Œæ’åºå­—æ®µè‹¥é€šè¿‡ç´¢å¼•å»è®¿é—®å°†å¤§å¤§æé«˜æ’åºé€Ÿåº¦ï¼ˆç´¢å¼•å°±æ˜¯æ’åºåŠ å¿«é€ŸæŸ¥æ‰¾ï¼‰ï¼› æŸ¥è¯¢ä¸­ç»Ÿè®¡æˆ–è€…åˆ†ç»„å­—æ®µã€‚ 3.2 ä»€ä¹ˆæ—¶å€™ä¸ç”¨ç´¢å¼• ç»å¸¸å¢åˆ æ”¹çš„åˆ—ä¸è¦å»ºç«‹ç´¢å¼•ï¼ˆå› ä¸ºæ¯æ¬¡æ›´æ–°ä¸å•å•æ˜¯æ›´æ–°è®°å½•ï¼Œè¿˜ä¼šæ›´æ–°ç´¢å¼•ï¼Œä¿å­˜ç´¢å¼•æ–‡ä»¶ï¼‰ï¼› è¡¨è®°å½•å¤ªå°‘ä¸è¦å»ºç«‹ç´¢å¼•ï¼› ï¼ˆè¢«CSIGé—®è¿‡ï¼‰åŒºåˆ†åº¦ä½ï¼Œæ•°æ®é‡å¤ä¸”åˆ†å¸ƒå¹³å‡çš„å­—æ®µä¸é€‚åˆåšç´¢å¼•ï¼› ä¾‹å¦‚æ€§åˆ«å­—æ®µï¼Œåªæœ‰ç”·å¥³ï¼Œä¸é€‚åˆå»ºç«‹ç´¢å¼•ã€‚ å› ä¸ºä»ç´¢å¼•ä¸­æ‹¿åˆ°çš„åªæ˜¯åœ°å€ï¼Œè¦æƒ³çœŸæ­£è®¿é—®åˆ°æ•°æ®è¿˜æ˜¯è¦å¯¹è¡¨è¿›è¡Œä¸€æ¬¡IOï¼› å‡å¦‚ä½ è¦ä»è¡¨çš„100ä¸‡è¡Œæ•°æ®ä¸­å–å‡ ä¸ªæ•°æ®ï¼Œé‚£ä¹ˆåˆ©ç”¨ç´¢å¼•è¿…é€Ÿå®šä½ï¼Œè®¿é—®ç´¢å¼•çš„è¿™IOå¼€é”€å°±éå¸¸å€¼äº†ï¼› ä½†å¦‚æœä½ æ˜¯ä»100ä¸‡è¡Œæ•°æ®ä¸­å–50ä¸‡è¡Œæ•°æ®ï¼Œå°±æ¯”å¦‚æ€§åˆ«å­—æ®µï¼Œé‚£ä½ ç›¸å¯¹éœ€è¦ è®¿é—®50ä¸‡æ¬¡ç´¢å¼•ï¼Œå†è®¿é—®50ä¸‡æ¬¡è¡¨ï¼ŒåŠ èµ·æ¥çš„å¼€é”€å¹¶ä¸ä¼šæ¯”ç›´æ¥å¯¹è¡¨è¿›è¡Œä¸€æ¬¡å®Œæ•´æ‰«æå°ã€‚ textï¼Œimageç­‰ç±»å‹ä¸åº”è¯¥å»ºç«‹ç´¢å¼•ï¼Œè¿™äº›åˆ—çš„æ•°æ®é‡å¤§ï¼› å¤šä¸ªå•åˆ—ç´¢å¼•å¹¶ä¸æ˜¯æœ€ä½³é€‰æ‹© MySQL åªèƒ½ä½¿ç”¨ä¸€ä¸ªç´¢å¼•ï¼Œä¼šä»å¤šä¸ªç´¢å¼•ä¸­é€‰æ‹©ä¸€ä¸ªé™åˆ¶æœ€ä¸ºä¸¥æ ¼çš„ç´¢å¼• ï¼› å‚åŠ è¿ç®— æˆ– ä½œä¸ºå‡½æ•°å‚å€¼ç­‰å­—æ®µï¼Œä¸è¦å»ºç«‹ç´¢å¼•ï¼Œè¿™ä¼šä½¿å¾—ç´¢å¼•å¤±æ•ˆè€Œå…¨è¡¨æ‰«æ ã€‚ 4.ä¸»é”®ä¸å”¯ä¸€ç´¢å¼•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ ä¸»é”®ä¸€å®šä¼šåˆ›å»ºä¸€ä¸ªå”¯ä¸€ç´¢å¼•ï¼Œä½†æ˜¯æœ‰å”¯ä¸€ç´¢å¼•çš„åˆ—ä¸ä¸€å®šæ˜¯ä¸»é”®ï¼› ä¸»é”®ä¸å…è®¸ä¸ºç©ºå€¼ï¼Œå”¯ä¸€ç´¢å¼•åˆ—å…è®¸ç©ºå€¼ï¼› ä¸€ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®ï¼Œä½†æ˜¯å¯ä»¥æœ‰å¤šä¸ªå”¯ä¸€ç´¢å¼•ï¼› ä¸»é”®å¯ä»¥è¢«å…¶ä»–è¡¨å¼•ç”¨ä¸ºå¤–é”®ï¼Œå”¯ä¸€ç´¢å¼•åˆ—ä¸å¯ä»¥ï¼› ä¸»é”®æ˜¯ä¸€ç§çº¦æŸï¼Œè€Œå”¯ä¸€ç´¢å¼•æ˜¯ä¸€ç§ç´¢å¼•ï¼Œæ˜¯è¡¨çš„å†—ä½™æ•°æ®ç»“æ„ï¼Œä¸¤è€…æœ‰æœ¬è´¨å·®åˆ«ã€‚ 5. b+æ ‘å’Œbæ ‘æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ Bæ ‘ï¼š ç´¢å¼•ä¸æ•°æ®å­˜å‚¨åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸­ï¼ˆå¢åŠ äº†IOæ¬¡æ•°ï¼‰ï¼› æœç´¢è¿‡ç¨‹æœ‰å¯èƒ½åœ¨éå¶å­èŠ‚ç‚¹ç»“æŸï¼ˆæœ€å¥½æƒ…å†µä¸‹O(1)O(1)O(1)ï¼‰ã€‚ B+æ ‘ï¼š æ‰€æœ‰æ•°æ®æŒ‰é¡ºåºå­˜å‚¨åœ¨å¶å­èŠ‚ç‚¹ä¸­ï¼› æ‰€æœ‰å¶å­èŠ‚ç‚¹è¢«åŒå‘é“¾è¿æ¥ï¼› æœç´¢è¿‡ç¨‹å›ºå®šæ—¶é—´å¤æ‚åº¦ï¼ˆO(logâ¡n)O(\\log n)O(logn)ï¼‰ï¼› ï¼ˆä¼˜ç‚¹æ˜“å¿˜ï¼‰é€‚åˆèŒƒå›´æŸ¥æ‰¾ï¼Œé™ä½ç£ç›˜IOæ¬¡æ•°ã€‚ 6.ä¸ºä»€ä¹ˆMySQLä½¿ç”¨B+æ ‘ä½œä¸ºç´¢å¼•ï¼Ÿè€Œä¸æ˜¯å¹³è¡¡äºŒå‰æ ‘ã€çº¢é»‘æ ‘ã€Bæ ‘ã€æˆ–è€…Hashï¼Ÿ ä¸ç”¨å¹³è¡¡äºŒå‰æ ‘æˆ–è€…çº¢é»‘æ ‘ï¼š æ ‘çš„æŸ¥è¯¢æ—¶é—´å’Œæ ‘çš„ç»“æ„æœ‰å…³ï¼ŒB+æ ‘æ˜¯ä¸€é¢—å¤šè·¯æœç´¢æ•°ï¼Œå¯ä»¥é™ä½æ ‘çš„é«˜åº¦æé«˜æŸ¥è¯¢é€Ÿåº¦ã€‚ ä¸ç”¨Bæ ‘ï¼š ï¼ˆ1ï¼‰æ— æ³•èŒƒå›´æŸ¥è¯¢ï¼Œè€ŒB+æ ‘æ‰€æœ‰å¶å­èŠ‚ç‚¹å½¢æˆæœ‰åºé“¾è¡¨ä¾¿äºèŒƒå›´æŸ¥è¯¢ï¼›ï¼ˆ2ï¼‰Né˜¶B+æ•°ï¼ŒBæ ‘ï¼ŒB+æ•°å¯ä»¥å­˜å‚¨nä¸ªå…³é”®å­—ï¼Œè€ŒBæ ‘æ˜¯nä¸ªã€‚ ä¸ç”¨Hashï¼š ï¼ˆ1ï¼‰B+æ ‘å…è®¸åˆ†é…åŠ è½½èŠ‚ç‚¹ï¼Œå¦‚æœå†…å­˜æ•°æ®å¤ªå¤§B+æ ‘æ›´å¥½ï¼ˆ2ï¼‰B+æ ‘æ›´é€‚åˆèŒƒå›´æŸ¥è¯¢ ç”¨Hashéœ€è¦æŠŠæ•°æ®å…¨éƒ¨åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¦‚æœæ•°æ®é‡å¤§ï¼Œæ˜¯ä¸€ä»¶å¾ˆæ¶ˆè€—å†…å­˜çš„äº‹ï¼Œè€Œé‡‡ç”¨B+æ ‘ï¼Œæ˜¯åŸºäºæŒ‰ç…§èŠ‚ç‚¹åˆ†æ®µåŠ è½½ï¼Œç”±æ­¤å‡å°‘å†…å­˜æ¶ˆè€—ã€‚ 6.1 æ— é™å¢åŠ æ ‘çš„è·¯æ•°æ˜¯ä¸æ˜¯å¯ä»¥æœ‰æœ€ä¼˜çš„æŸ¥æ‰¾æ•ˆç‡ï¼Ÿ è¿™æ ·ä¼šå½¢æˆä¸€ä¸ªæœ‰åºæ•°ç»„ï¼Œæ–‡ä»¶ç³»ç»Ÿå’Œæ•°æ®åº“çš„ç´¢å¼•éƒ½æ˜¯å­˜åœ¨ç¡¬ç›˜ä¸Šçš„ï¼Œå¹¶ä¸”å¦‚æœæ•°æ®é‡å¤§çš„è¯ï¼Œä¸ä¸€å®šèƒ½ä¸€æ¬¡æ€§åŠ è½½åˆ°å†…å­˜ä¸­ã€‚ æœ‰åºæ•°ç»„æ²¡æ³•ä¸€æ¬¡æ€§åŠ è½½è¿›å†…å­˜ï¼Œè¿™æ—¶å€™B+æ ‘çš„å¤šè·¯å­˜å‚¨å¨åŠ›å°±å‡ºæ¥äº†ï¼Œå¯ä»¥æ¯æ¬¡åŠ è½½B+æ ‘çš„ä¸€ä¸ªç»“ç‚¹ï¼Œç„¶åä¸€æ­¥æ­¥å¾€ä¸‹æ‰¾ã€‚ 7. B+æ ‘æ€ä¹ˆè¿›è¡Œåˆ†è£‚ã€åˆå¹¶çš„ï¼ŸçŸ¥é“å…·ä½“æ­¥éª¤å—ï¼Ÿ å‚è€ƒï¼šhttps://www.cnblogs.com/nullzx/p/8729425.htm 8. MySQLèšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ ä¸»è¦åŒºåˆ« èšç°‡ç´¢å¼• ï¼š æ‰¾åˆ°ç´¢å¼•å°±æ‰¾åˆ°äº†éœ€è¦çš„æ•°æ®ï¼Œé‚£ä¹ˆè¿™ä¸ªç´¢å¼•å°±æ˜¯èšç°‡ç´¢å¼•; æ‰€ä»¥Innodbä¸»é”®å°±æ˜¯èšç°‡ç´¢å¼•ï¼Œä¿®æ”¹èšç°‡ç´¢å¼•å…¶å®å°±æ˜¯ä¿®æ”¹ä¸»é”®ï¼›ä½†åœ¨Myisamä¸‹ä¸»é”®ç´¢å¼•æ˜¯éèšé›†ç´¢å¼•ã€‚ InnoDB ä¼šéšå¼å®šä¹‰ä¸€ä¸ªä¸»é”®æ¥ä½œä¸ºèšç°‡ç´¢å¼•ï¼ˆä½†æ˜¯è¿™ä¸ªä¸»é”®å¦‚æœæ›´æ”¹ä»£ä»·è¾ƒé«˜ï¼Œæ•…å»ºè¡¨æ—¶è¦è€ƒè™‘è‡ªå¢IDä¸èƒ½é¢‘ç¹updateè¿™ç‚¹ï¼‰ã€‚ éèšç°‡ç´¢å¼•ï¼šç´¢å¼•çš„å­˜å‚¨å’Œæ•°æ®çš„å­˜å‚¨æ˜¯åˆ†ç¦»çš„ , æ‰¾åˆ°äº†ç´¢å¼•ä½†æ²¡æ‰¾åˆ°æ•°æ®ï¼Œéœ€è¦æ ¹æ®ç´¢å¼•ä¸Šçš„å€¼(ä¸»é”®/åœ°å€)å†æ¬¡å›è¡¨æŸ¥è¯¢ï¼Œä¹Ÿå«åšè¾…åŠ©ç´¢å¼•ã€‚ MyISMä½¿ç”¨çš„æ˜¯éèšç°‡ç´¢å¼• ï¼Œä¸‹å›¾å¶èŠ‚ç‚¹çš„dataåŸŸå­˜æ”¾çš„æ˜¯æ•°æ®è®°å½•çš„åœ°å€ ã€‚ èšç°‡ç´¢å¼•æŸ¥æ‰¾è¿‡ç¨‹ é¦–å…ˆæ¾„æ¸…ä¸€ä¸ªæ¦‚å¿µï¼Œèšç°‡ç´¢å¼•å’Œå’Œè¾…åŠ©ç´¢å¼•ã€‚ Innodbå­˜å‚¨å¼•æ“çš„B+æ ‘åˆ†ä¸ºï¼Œèšç°‡ç´¢å¼•ä¿å­˜çš„æ˜¯æ”¾ç€ä¸€æ•´è¡Œçš„æ•°æ®ï¼›è¾…åŠ©ç´¢å¼•éƒ½å¼•ç”¨ä¸»é”®ä½œä¸ºdataåŸŸã€‚ ä¾‹å¦‚ï¼Œä¸‹å›¾ä»¥Col3å»ºç«‹ä¸€ä¸ªInnodbè¾…åŠ©ç´¢å¼• ï¼š å¯¹äºMyISAMï¼Œä¸»ç´¢å¼•å’Œè¾…åŠ©ç´¢å¼•ï¼ˆSecondary keyï¼‰åœ¨ç»“æ„ä¸Šæ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚åªæ˜¯ä¸»ç´¢å¼•è¦æ±‚keyæ˜¯å”¯ä¸€çš„ï¼Œè€Œè¾…åŠ©ç´¢å¼•çš„keyå¯ä»¥é‡å¤ã€‚ ä¾‹å¦‚ï¼Œä¸‹å›¾ä»¥Col2å»ºç«‹ä¸€ä¸ªMyISAMçš„è¾…åŠ©ç´¢å¼•ï¼š 1Select * Where name=â€˜Aliceâ€™ é¦–å…ˆæ ¹æ®è¾…åŠ©ç´¢å¼• ï¼Œåœ¨å¶å­èŠ‚ç‚¹æ‰¾åˆ°0X56å¯¹åº”ä¸»é”®å€¼18 ï¼›ç„¶ååœ¨èšç°‡ç´¢å¼•ï¼Œæ ¹æ®18 æ‰¾åˆ°å¯¹åº”è¡Œæ•°æ®ã€‚ 8.1 çœ‹ä¸Šå»èšç°‡ç´¢å¼•çš„æ•ˆç‡æ˜æ˜¾è¦ä½äºéèšç°‡ç´¢å¼•ï¼Œå› ä¸ºæ¯æ¬¡ä½¿ç”¨è¾…åŠ©ç´¢å¼•æ£€ç´¢éƒ½è¦ç»è¿‡ä¸¤æ¬¡B+æ ‘æŸ¥æ‰¾ï¼Œè¿™ä¸æ˜¯å¤šæ­¤ä¸€ä¸¾å—ï¼Ÿèšç°‡ç´¢å¼•çš„ä¼˜åŠ¿åœ¨å“ªï¼Ÿ é‡å¤è®¿é—®åŒä¸€é¡µæ›´å¿«ï¼šç”±äºè¡Œæ•°æ®å’Œå¶å­èŠ‚ç‚¹å­˜å‚¨åœ¨ä¸€èµ·ï¼ŒåŒä¸€é¡µä¸­ä¼šæœ‰å¤šæ¡è¡Œæ•°æ®ï¼Œè®¿é—®åŒä¸€æ•°æ®é¡µä¸åŒè¡Œè®°å½•æ—¶ï¼Œå·²ç»æŠŠé¡µåŠ è½½åˆ°äº†Bufferä¸­ï¼Œå†æ¬¡è®¿é—®çš„æ—¶å€™ï¼Œä¼šåœ¨å†…å­˜ä¸­å®Œæˆè®¿é—®ï¼Œä¸å¿…è®¿é—®ç£ç›˜ï¼› B+æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹çš„æ•°é‡éƒ½æ˜¯ä¸€ä¸ªmysqlåˆ†åŒºé¡µçš„å¤§å°(é˜¿é‡Œé¢è¯•) ã€‚ è¾…åŠ©ç´¢å¼•ä½¿ç”¨ä¸»é”®å€¼ä½œä¸ºæŒ‡é’ˆï¼š è¾…åŠ©ç´¢å¼•ä½¿ç”¨ä¸»é”®ä½œä¸º&quot;æŒ‡é’ˆ&quot;è€Œä¸æ˜¯ä½¿ç”¨åœ°å€å€¼ä½œä¸ºæŒ‡é’ˆï¼ˆMyISAMï¼‰ ï¼Œå‡å°‘äº†å½“å‡ºç°ã€è¡Œç§»åŠ¨ã€‘æˆ–è€…æ•°æ®é¡µåˆ†è£‚æ—¶ï¼ˆåœ°å€å€¼å˜åŒ–ï¼‰è¾…åŠ©ç´¢å¼•çš„ç»´æŠ¤å·¥ä½œ ã€‚ 8.2 ä¸ºä»€ä¹ˆname,ageè¿™äº›å­—æ®µä¸é€‚åˆåšç´¢å¼•ï¼Ÿ åœ¨InnoDBä¸­æ¯ä¸€ä¸ªè¡¨éƒ½ä¼šæœ‰èšé›†ç´¢å¼•ï¼Œå¦‚æœè¡¨å®šä¹‰äº†ä¸»é”®ï¼Œåˆ™ï¼ˆé»˜è®¤ï¼‰ä¸»é”®å°±æ˜¯èšç°‡ç´¢å¼•ã€‚ ä¸€ä¸ªè¡¨åªæœ‰ä¸€ä¸ªèšé›†ç´¢å¼•ï¼Œå…¶ä½™ä¸ºæ™®é€šç´¢å¼•ã€‚æ‰€ä»¥nameï¼Œageå°±æ˜¯æ™®é€šç´¢å¼•ï¼Œä¹Ÿå°±æ˜¯ä½œä¸ºè¾…åŠ©ç´¢å¼•ã€‚ åœ¨ä½¿ç”¨æ™®é€šç´¢å¼•nameæŸ¥è¯¢æ—¶ï¼Œä¼šå…ˆåŠ è½½æ™®é€šç´¢å¼•ï¼š ï¼ˆ1ï¼‰é€šè¿‡æ™®é€šç´¢å¼•æŸ¥è¯¢åˆ°å®é™…è¡Œçš„ä¸»é”® ï¼ˆ2ï¼‰å†ä½¿ç”¨ä¸»é”®é€šè¿‡èšé›†ç´¢å¼•æŸ¥è¯¢ç›¸åº”çš„è¡Œ ï¼ˆ3ï¼‰ä»¥æ­¤å¾ªç¯æŸ¥è¯¢æ‰€æœ‰çš„è¡Œ è‹¥ç›´æ¥å…¨é‡æœç´¢èšé›†ç´¢å¼•ï¼Œåˆ™ä¸éœ€è¦åœ¨æ™®é€šç´¢å¼•å’Œèšé›†ç´¢å¼•ä¸­æ¥å›åˆ‡æ¢ã€‚ç›¸æ¯”ä¸¤ç§æ“ä½œçš„æ€»å¼€é”€å¯èƒ½æ‰«æå…¨è¡¨æ•ˆç‡æ›´é«˜ã€‚ 9. MySQLè”åˆç´¢å¼•å¦‚ä½•ä½¿ç”¨ï¼Ÿä»€ä¹ˆæ˜¯æœ€å·¦åŒ¹é…åŸåˆ™ï¼Ÿ å‚è€ƒï¼šhttps://blog.csdn.net/Abysscarry/article/details/80792876 å¯¹å¤šä¸ªå­—æ®µåŒæ—¶å»ºç«‹çš„ç´¢å¼•(æœ‰é¡ºåºï¼ŒABCï¼ŒACBæ˜¯å®Œå…¨ä¸åŒçš„ä¸¤ç§è”åˆç´¢å¼•ã€‚ 1234567891011CREATE TABLE `test` ( `id` int(4) NOT NULL AUTO_INCREMENT, `a` varchar(10) NOT NULL, `b` varchar(10) NOT NULL, `c` varchar(10) NOT NULL, `d` varchar(10) NOT NULL, `e` varchar(10) NOT NULL, PRIMARY KEY (`id`), # è”åˆç´¢å¼•(a,b,c) UNIQUE KEY `idx_a_b_c` (`a`,`b`,`c`) USING BTREE ) ENGINE=I ä»¥è”åˆç´¢å¼•(a,b,c)ä¸ºä¾‹ï¼š å»ºç«‹è¿™æ ·çš„ç´¢å¼•ç›¸å½“äºå»ºç«‹äº†ç´¢å¼•aã€abã€abcä¸‰ä¸ªç´¢å¼•ã€‚ä¸€ä¸ªç´¢å¼•é¡¶ä¸‰ä¸ªç´¢å¼•å½“ç„¶æ˜¯å¥½äº‹ï¼Œæ¯•ç«Ÿæ¯å¤šä¸€ä¸ªç´¢å¼•ï¼Œéƒ½ä¼šå¢åŠ å†™æ“ä½œçš„å¼€é”€å’Œç£ç›˜ç©ºé—´çš„å¼€é”€ã€‚ a,cç»„åˆä¹Ÿå¯ä»¥ä½†ä¸æ˜¯ä¸ºä»–å»ºç«‹äº†ç´¢å¼•ï¼Œä½†å®é™…ä¸Šåªç”¨åˆ°äº†açš„ç´¢å¼•ï¼Œcå¹¶æ²¡æœ‰ç”¨åˆ°ï¼ æœ€å·¦åŒ¹é…åŸåˆ™ æœ€å·¦ä¼˜å…ˆï¼Œåœ¨æ£€ç´¢æ•°æ®æ—¶ä»è”åˆç´¢å¼•çš„æœ€å·¦è¾¹å¼€å§‹åŒ¹é…ï¼Œå³æ˜¯whereæ¡ä»¶å¿…é¡»æœ‰è”åˆç´¢å¼•çš„ç¬¬ä¸€ä¸ªå­—æ®µã€‚ ä¸åŒ…å«ç¬¬ä¸€ä¸ªå­—æ®µ ä¸ä¼šèµ°ç´¢å¼• 1select * from test where b = &#x27;333&#x27; and c = &#x27;333&#x27;; whereå’Œç´¢å¼•é¡ºåºä¸ä¸€æ · ä¼šèµ°ç´¢å¼•ï¼Œå’Œé¡ºåºæ— å…³ã€‚ where åé¢åˆ—çš„é¡ºåºæ˜¯è¢«ä¼˜åŒ–å™¨ä¼˜åŒ–äº†çš„ï¼Œæ‰€ä»¥æ‰ä¼šè§‰å¾—æ— å½±å“ï¼Œä½ å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹ä¼˜åŒ–å™¨ä¼˜åŒ–åçš„è¯­å¥ï¼Œä¼šå¸®ä½ è°ƒæ•´ä¸ºæ»¡è¶³æœ€å·¦å‰ç¼€çš„é¡ºåºã€‚ 1select * from test where c = &#x27;333&#x27; and b = &#x27;333&#x27; and a = &#x27;333&#x27;; 9.1 è”åˆç´¢å¼•çš„å¥½å¤„ï¼Ÿ 10. ï¼ˆè¿˜è¦è¡¥å……ï¼‰ä»‹ç»ä¸€ä¸‹ç´¢å¼•å¤±æ•ˆçš„åŸå› ï¼Ÿ å¾ˆä¸é”™çš„ä¸€ç¯‡æ–‡ç« ï¼šç´¢å¼•å¤±æ•ˆåŸç†ï¼Œç»ˆäºæœ‰äººè®²æ˜ç™½äº† ç»“åˆè¿™ç¯‡æ–‡ç« ï¼šhttps://juejin.cn/post/6844904073955639304 å‡è®¾mysql å­˜åœ¨è”åˆç´¢å¼•ï¼ˆa,bï¼‰ï¼Œæ˜¾ç„¶ä¹Ÿæ˜¯ä¸€é¢—B+æ ‘: ä¸ç¬¦åˆæœ€å·¦åŒ¹é…å¤±æ•ˆ æƒ…å†µ1 ï¼šselect * from testTable where b=2 è”åˆç´¢å¼•æ˜¯é€šè¿‡ç¬¬ä¸€ä¸ªç´¢å¼•a æ¥æ„å»ºB+æ ‘ï¼Œè¿›è¡Œå®šä½äºŒåˆ†æŸ¥æ‰¾çš„ï¼Œä¸èƒ½ç›´æ¥é€šè¿‡b æ¥è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ã€‚ æƒ…å†µ2ï¼šlikeæŸ¥è¯¢å¤±æ•ˆ 12345where name like &quot;a%&quot; # ä¼šæœ‰æ•ˆï¼Œå› ä¸ºå¯ä»¥åŒ¹é…åˆ°é¦–å­—æ¯where name like &quot;%a%&quot; # é¦–å­—æ¯æ˜¯ä»»æ„åŒ¹é…çš„ï¼Œæ‰€ä»¥ç´¢å¼•ç”¨ä¸ä¸Šwhere name like &quot;%a&quot; # åŒä¸Šï¼Œä¸èƒ½æ ¹æ®å°¾å­—æ¯æ¥ç´¢å¼• èŒƒå›´æŸ¥è¯¢å¤±æ•ˆ 1select * from testTable where a&gt;1 and b=2 é¦–å…ˆaå­—æ®µåœ¨B+æ ‘ä¸Šæ˜¯æœ‰åºçš„ï¼Œæ‰€ä»¥å¯ä»¥ç”¨äºŒåˆ†æŸ¥æ‰¾æ³•å®šä½åˆ°1ï¼Œç„¶åå°†æ‰€æœ‰å¤§äº1çš„æ•°æ®å–å‡ºæ¥ï¼Œaå¯ä»¥ç”¨åˆ°ç´¢å¼•ã€‚ bæœ‰åºçš„å‰ææ˜¯aæ˜¯ç¡®å®šçš„å€¼ï¼Œé‚£ä¹ˆç°åœ¨açš„å€¼æ˜¯å–å¤§äº1çš„ï¼Œå¯èƒ½æœ‰10ä¸ªå¤§äº1çš„aï¼Œä¹Ÿå¯èƒ½æœ‰ä¸€ç™¾ä¸ªaã€‚ å¤§äº1çš„aé‚£éƒ¨åˆ†çš„B+æ ‘é‡Œï¼Œbå­—æ®µæ˜¯æ— åºçš„ï¼ˆå¼€å±€ä¸€å¼ å›¾ï¼‰ï¼Œæ‰€ä»¥bä¸èƒ½åœ¨æ— åºçš„B+æ ‘é‡Œç”¨äºŒåˆ†æŸ¥æ‰¾æ¥æŸ¥è¯¢ï¼Œbç”¨ä¸åˆ°ç´¢å¼•ã€‚ å¤šä¸ªå•åˆ—ç´¢å¼• æˆ‘ä»¬é¦–å…ˆå»ºç«‹äº†ä¸‰ä¸ªå•åˆ—ç´¢å¼•ï¼šuseridï¼Œmobileï¼ŒbillMonthã€‚ç„¶åä½¿ç”¨ä»¥ä¸‹æŸ¥è¯¢è¯­å¥ï¼š 1EXPLAIN SELECT * FROM `t_mobilesms_11` WHERE userid=&#x27;2222&#x27; AND mobile=&#x27;13281899972&#x27; AND billMonth=&#x27;2018-04&#x27; explain ç»“æœåˆ†æï¼Œæœ€ç»ˆåªæœ‰userid è¿™ä¸€ä¸ªç´¢å¼•æœ‰æ•ˆã€‚ æ­¤å¤„userid ã€mobile ã€billMonthè¿™ä¸‰ä¸ªç´¢å¼•åˆ—éƒ½èƒ½ç”¨ï¼Œåªä¸è¿‡ä¼˜åŒ–å™¨åˆ¤æ–­ä½¿ç”¨useridè¿™ä¸€ä¸ªç´¢å¼•èƒ½æœ€é«˜æ•ˆå®Œæˆæœ¬æ¬¡æŸ¥è¯¢ï¼Œæ•…æœ€ç»ˆexplainå±•ç¤ºçš„keyä¸ºuseridã€‚ ç‰¹åˆ«çš„ï¼Œå¦‚æœæ”¹ä¸º or è¿›è¡Œåˆ¤æ–­ï¼š 1EXPLAIN SELECT * FROM `t_mobilesms_11` WHERE userid=&#x27;2222&#x27; OR mobile=&#x27;13281899972&#x27; æ­¤æ—¶ä¸¤ä¸ªç´¢å¼• userid &amp; mobileéƒ½ç”¨ä¸Šäº†ã€‚ mysql 5.0 ç‰ˆæœ¬ä¹‹å‰ ä½¿ç”¨oråªä¼šç”¨åˆ°ä¸€ä¸ªç´¢å¼•, è‡ªä»5.0ç‰ˆæœ¬å¼€å§‹ ï¼Œå¼•å…¥äº†index_mergeç´¢å¼•åˆå¹¶ä¼˜åŒ–ï¼ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥åˆ©ç”¨ä¸Šå¤šä¸ªç´¢å¼•å»ä¼˜åŒ–oræŸ¥è¯¢äº†ã€‚ æˆ–è€…ç´¢å¼•åŠ ä¸Šäº†è¿ç®— 1select * from t where c - 1 = 1000; è¿™ç§æƒ…å†µä¸ä¼šæœ‰æ•ˆï¼Œåº”è¯¥æ˜¯ï¼š 1select * from t where c = 1000 + 1; åˆæ¯”å¦‚ç”¨äº†å‡½æ•°æ“ä½œï¼š 1select * from t where pow(c,2) = 1000; 11. ã€âš ï¸ æ–°å¢ã€‘ç´¢å¼•å®æˆ˜ç¯‡ å‚è€ƒï¼šhttps://zhuanlan.zhihu.com/p/115778804 where a=xxx and b=xxx order by c ï¼Œå¦‚ä½•å»ºç«‹ç´¢å¼•ï¼Ÿ å»ºç«‹è”åˆç´¢å¼•ï¼ˆa,b,cï¼‰ ï¼Œå› ä¸ºè¿™æ ·çš„è¯æ— éœ€åšä¸€æ¬¡é¢å¤–çš„æ’åºæ“ä½œã€‚ å› ä¸ºå»ºç«‹è”åˆç´¢å¼•æ—¶ï¼Œæ ¹æ®æœ€å·¦åŒ¹é…åŸåˆ™ï¼Œå…ˆæŒ‰aæ’åºï¼Œå†æŒ‰bæ’åºï¼Œæœ€åæŒ‰c æ’åºã€‚æ ¹æ®è”åˆç´¢å¼•æ£€ç´¢åˆ°ï¼Œa=xxx and b=xxxæ¡ä»¶æ—¶ï¼Œå†å»æ£€ç´¢cæœ¬èº«å·²æ’åºçš„ã€‚é‚£ä¹ˆä¸ç”¨ order by c ï¼Œä¸ç”¨è¿›è¡Œæ–‡ä»¶æ’åºã€‚ æ³¨æ„ï¼Œå»ºç«‹è”åˆç´¢å¼• ï¼ˆa,bï¼‰ , åˆ™æ˜¯èµ°ä¸åˆ° sortçš„ï¼ where a=xxx order by b,c ï¼Œå¦‚ä½•å»ºç«‹ç´¢å¼•ï¼Ÿ é“ç†åŒä¸Šï¼Œå»ºç«‹ï¼ˆa,b,cï¼‰ ã€‚ where a &gt; 1 ORDER BY bï¼Œæ€ä¹ˆå»ºç«‹ç´¢å¼•ï¼Ÿ å»ºç«‹ç´¢å¼•ï¼ˆaï¼‰å³å¯ï¼Œå› ä¸ºaæ˜¯èŒƒå›´æŸ¥è¯¢ï¼š å»ºç«‹ï¼ˆa,bï¼‰çš„ è¯bä¹Ÿç”¨ä¸ä¸Šï¼Œå› ä¸ºæ˜¯aæ˜¯èŒƒå›´æŸ¥è¯¢ï¼› å»ºç«‹ï¼ˆb,aï¼‰, bæŒ‰ç´¢å¼•æ’å¥½åºï¼Œa&gt;1å¯ä»¥ç”¨ä¸Šï¼Ÿé”™è¯¯ï¼Œå› ä¸ºå…ˆwhereç­›é€‰æ‰ä¼šorder byï¼ where a=1 and b=2 and c&gt;3 and d=4 ï¼Œå¦‚ä½•å»ºç«‹ç´¢å¼•ï¼Ÿ å»ºç«‹è”åˆç´¢å¼•ï¼Œ(a,b,d,c) å³å¯ã€‚ ä½†æ˜¯å¯¹äºå»ºç«‹(a,b,c,d) ï¼Œa,b,cä¸‰ä¸ªå­—æ®µèƒ½ç”¨åˆ°ç´¢å¼•ï¼Œè€Œdå°±åŒ¹é…ä¸åˆ°ï¼Œå› ä¸ºé‡åˆ°äº†èŒƒå›´æŸ¥è¯¢ï¼Œåœ¨c&gt;3è¿™ä¸ªèŒƒå›´å†…ï¼Œdä¸æ˜¯æœ‰åºçš„ï¼›ä½†æ˜¯c=3ï¼Œè¿™ä¸ªèŒƒå›´å†…ï¼Œdæ˜¯æœ‰åºçš„ï¼ where a &gt; 1 and b = 2 and c &gt; 3ï¼Œå¦‚ä½•å»ºç«‹ç´¢å¼•ï¼Ÿ å»ºç«‹ï¼ˆb,cï¼‰æˆ–è€…ï¼ˆb,aï¼‰å³å¯ï¼Œä½†è‡³å°‘æœ‰ä¸€ä¸ªç´¢å¼•è¦å¤±æ•ˆï¼ˆé‡ä¸ŠèŒƒå›´æŸ¥è¯¢ï¼‰ã€‚ WHERE a IN (1,2,3) and b &gt; 1ï¼Œæ€ä¹ˆå»ºç«‹ç´¢å¼•ï¼Ÿ è¿˜æ˜¯å¯¹(aï¼Œb)å»ºç«‹ç´¢å¼•ï¼Œå› ä¸ºINåœ¨è¿™é‡Œå¯ä»¥è§†ä¸ºç­‰å€¼å¼•ç”¨ï¼Œä¸ä¼šä¸­æ­¢ç´¢å¼•åŒ¹é…ï¼Œæ‰€ä»¥è¿˜æ˜¯(a,b)ï¼ 11.1 æœ‰ä¸ªå­—æ®µå€¼å¯èƒ½æ­£ï¼Œå¯èƒ½è´Ÿï¼ŒæŸ¥è¯¢è¯¥å­—æ®µè¦ç»å¯¹å€¼ï¼Œä½†è®¡ç®—ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Œæ€ä¹ˆä¼˜åŒ–ï¼Ÿ æ‹†æˆä¸¤åˆ—1åˆ—åªå­˜ç»å¯¹å€¼ï¼Œå¦èµ·ä¸€åˆ—tinyintæ¥è¡¨ç¤ºæ­£è´Ÿæˆ–è€…æ–¹å‘ï¼› å…ˆæŸ¥è¯¢åˆ°ç»“æœï¼Œç„¶åå†æŸ¥è¯¢çš„ç»“æœä¸Šè¿›è¡Œæ“ä½œï¼ˆå–ç»å¯¹å€¼ï¼‰ï¼Ÿ 12. order by æ€ä¹ˆè¿›è¡Œæ’åºçš„ï¼Ÿæ€ä¹ˆä¼˜åŒ–ï¼Ÿ å‚è€ƒï¼šhttps://segmentfault.com/a/1190000040357292 å‡è®¾å­˜åœ¨ä»¥ä¸‹æ•°æ®ï¼š æ­¤æ—¶è¿›è¡Œå¦‚ä¸‹æŸ¥è¯¢ï¼š 1select city, order_num, user_code from `order` where city=&#x27;å¹¿å·&#x27; order by order_num limit 1000; å»ºç«‹ç´¢å¼•(city)ï¼šorder byè¿‡ç¨‹ 1ALTER TABLE `order` ADD INDEX city_index ( `city` ); ç”¨ explain çœ‹çœ‹æ‰§è¡Œæƒ…å†µ æ³¨æ„åˆ°æœ€åä¸€ä¸ª extra å­—æ®µçš„ç»“æœæ˜¯ï¼šUsing filesortï¼Œè¡¨ç¤ºéœ€è¦æ’åºã€‚å…¶å® MySQL ä¼šç»™æ¯ä¸ªçº¿ç¨‹åˆ†é…ä¸€å—å†…å­˜ç”¨äºæ’åºï¼Œç§°ä¸º sort_bufferã€‚ å®Œæ•´æ‰§è¡Œè¿‡ç¨‹ åˆå§‹åŒ– sort_bufferï¼Œæ”¾å…¥ cityã€order_numã€user_code è¿™ä¸‰ä¸ªå­—æ®µï¼› ä»ç´¢å¼• city æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³ city=â€™ å¹¿å·â€™æ¡ä»¶çš„ä¸»é”® idï¼Œä¹Ÿå°±æ˜¯å›¾ä¸­çš„ ID_3ï¼› åˆ°ä¸»é”® id ç´¢å¼•å–å‡ºæ•´è¡Œï¼Œå– cityã€order_numã€user_code ä¸‰ä¸ªå­—æ®µçš„å€¼ï¼Œå­˜å…¥ sort_buffer ä¸­ï¼› ä»ç´¢å¼• city å–ä¸‹ä¸€ä¸ªè®°å½•çš„ä¸»é”® idï¼› é‡å¤æ­¥éª¤ 3ã€4 ç›´åˆ° city çš„å€¼ä¸æ»¡è¶³æŸ¥è¯¢æ¡ä»¶ä¸ºæ­¢ï¼Œå¯¹åº”çš„ä¸»é”® id ä¹Ÿå°±æ˜¯å›¾ä¸­çš„ ID_Xï¼› å¯¹ sort_buffer ä¸­çš„æ•°æ®æŒ‰ç…§å­—æ®µ order_num åšå¿«é€Ÿæ’åºï¼› å…¶ä¸­ï¼ŒæŒ‰ order_num æ’åºè¿™ä¸ªæ­¥éª¤ï¼Œå¯èƒ½åœ¨å†…å­˜ä¸­å®Œæˆï¼Œä¹Ÿå¯èƒ½éœ€è¦ä½¿ç”¨å¤–éƒ¨æ’åºï¼Œè¿™å–å†³äºæ’åºæ‰€éœ€çš„å†…å­˜å’Œå‚æ•° sort_buffer_sizeã€‚ æŒ‰ç…§æ’åºç»“æœå–å‰ 1000 è¡Œè¿”å›ç»™å®¢æˆ·ç«¯ã€‚ ä¼˜åŒ–1ï¼šä½¿ç”¨rowid ä¸Šé¢çš„å…¨å­—æ®µæ’åºå…¶å®ä¼šæœ‰å¾ˆå¤§çš„é—®é¢˜ï¼Œä½ å¯èƒ½å‘ç°äº†ã€‚æˆ‘ä»¬éœ€è¦æŸ¥è¯¢çš„å­—æ®µéƒ½è¦æ”¾åˆ° sort_buffer ä¸­ï¼Œå¦‚æœæŸ¥è¯¢çš„å­—æ®µå¤šäº†èµ·æ¥ï¼Œå†…å­˜å ç”¨å‡é«˜ï¼Œå°±ä¼šå¾ˆå®¹æ˜“æ‰“æ»¡ sort_buffer ã€‚ sort_buffer åªå­˜ order_num å’Œ id å­—æ®µã€‚ åˆå§‹åŒ– sort_bufferï¼Œç¡®å®šæ”¾å…¥ä¸¤ä¸ªå­—æ®µï¼Œå³ order_num å’Œ idï¼› ä»ç´¢å¼• city æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³ city=â€™ å¹¿å·â€™æ¡ä»¶çš„ä¸»é”® idï¼Œä¹Ÿå°±æ˜¯å›¾ä¸­çš„ ID_3ï¼› å›è¡¨ï¼Œå– order_numã€id è¿™ä¸¤ä¸ªå­—æ®µï¼Œå­˜å…¥ sort_buffer ä¸­ï¼› ä»ç´¢å¼• city å–ä¸‹ä¸€ä¸ªè®°å½•çš„ä¸»é”® idï¼› é‡å¤æ­¥éª¤ 3ã€4 ç›´åˆ°ä¸æ»¡è¶³ city=â€™ å¹¿å·â€™æ¡ä»¶ä¸ºæ­¢ï¼Œä¹Ÿå°±æ˜¯å›¾ä¸­çš„ ID_Xï¼› å¯¹ sort_buffer ä¸­çš„æ•°æ®æŒ‰ç…§å­—æ®µ order_num è¿›è¡Œæ’åºï¼› éå†æ’åºç»“æœï¼Œå–å‰ 1000 è¡Œï¼Œå†æ¬¡å›è¡¨å–å‡º cityã€order_num å’Œ user_code ä¸‰ä¸ªå­—æ®µè¿”å›ç»™å®¢æˆ·ç«¯ã€‚ ä¼˜åŒ–2ï¼šå»ºç«‹è”åˆç´¢å¼• å‚è§ç´¢å¼•éƒ¨åˆ†è§£é‡Šï¼Œä¸å†èµ˜è¿°ã€‚ ä»ç´¢å¼• (city,order_num) æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³ city=â€™ å¹¿å·â€™æ¡ä»¶çš„ä¸»é”® idï¼› å›è¡¨ï¼Œå– cityã€order_numã€user_code ä¸‰ä¸ªå­—æ®µçš„å€¼ï¼Œä½œä¸ºç»“æœé›†çš„ä¸€éƒ¨åˆ†ç›´æ¥è¿”å›ï¼› ä»ç´¢å¼• (city,order_num) å–ä¸‹ä¸€ä¸ªè®°å½•ä¸»é”® idï¼› é‡å¤æ­¥éª¤ 2ã€3ï¼Œç›´åˆ°æŸ¥åˆ°ç¬¬ 1000 æ¡è®°å½•ï¼Œæˆ–è€…æ˜¯ä¸æ»¡è¶³ city=â€™ å¹¿å·â€™æ¡ä»¶æ—¶å¾ªç¯ç»“æŸã€‚ 5.3 äº‹åŠ¡ç›¸å…³ 1.è¯·ä»‹ç»ä¸€ä¸‹æ•°æ®åº“äº‹åŠ¡ï¼Ÿå’Œäº‹åŠ¡ç‰¹æ€§ï¼ˆACIDï¼‰ï¼Ÿ æ•°æ®åº“äº‹åŠ¡ï¼š æ•°æ®åº“äº‹åŠ¡æŒ‡çš„æ˜¯ä¸€ç»„æ•°æ®æ“ä½œï¼Œäº‹åŠ¡å†…çš„æ“ä½œè¦ä¹ˆå°±æ˜¯å…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå°±æ˜¯å…¨éƒ¨å¤±è´¥ã€‚ e.g. å‡è®¾ä¸€ä¸ªç½‘è´­ä»˜æ¬¾çš„æ“ä½œï¼Œç”¨æˆ·ä»˜æ¬¾åè¦æ¶‰åŠåˆ°è®¢å•çŠ¶æ€æ›´æ–°ã€æ‰£åº“å­˜ä»¥åŠå…¶ä»–ä¸€ç³»åˆ—åŠ¨ä½œï¼Œè¿™å°±æ˜¯ä¸€ä¸ªäº‹åŠ¡ï¼Œå¦‚æœä¸€åˆ‡æ­£å¸¸é‚£å°±ç›¸å®‰æ— äº‹ï¼Œä¸€æ—¦ä¸­é—´æœ‰æŸä¸ªç¯èŠ‚å¼‚å¸¸ï¼Œé‚£æ•´ä¸ªäº‹åŠ¡å°±è¦å›æ»šï¼Œæ€»ä¸èƒ½æ›´æ–°äº†è®¢å•çŠ¶æ€ä½†æ˜¯ä¸æ‰£åº“å­˜å§ã€‚ äº‹åŠ¡ç‰¹æ€§ï¼šï¼ˆ1ï¼‰ åŸå­æ€§ï¼ˆAtomicityï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡å¿…é¡»è§†ä¸ºä¸€ä¸ªä¸å¯åˆ†å‰²çš„æœ€å°å·¥ä½œå•å…ƒï¼Œè¦ä¹ˆéƒ½æˆåŠŸè¦ä¹ˆéƒ½å¤±è´¥ï¼ˆ2ï¼‰ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼šæ•°æ®åº“æ€»èƒ½ä»ä¸€ä¸ªä¸€è‡´æ€§çš„çŠ¶æ€è½¬æ¢åˆ°å¦ä¸€ä¸ªä¸€è‡´æ€§çš„çŠ¶æ€ï¼ˆ3ï¼‰éš”ç¦»æ€§ï¼ˆIsolationï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡æ‰€åšçš„ä¿®æ”¹åœ¨æœ€ç»ˆæäº¤ä»¥å‰ï¼Œå¯¹å…¶ä»–äº‹åŠ¡æ˜¯ä¸å¯è§çš„ï¼ˆ4ï¼‰æŒä¹…æ€§ï¼ˆDurabilityï¼‰ï¼šä¸€æ—¦äº‹åŠ¡æäº¤ï¼Œåˆ™å…¶æ‰€åšçš„ä¿®æ”¹å°±ä¼šæ°¸ä¹…ä¿å­˜åˆ°æ•°æ®åº“ä¸­ 1.1 å››å¤§ç‰¹æ€§å¾—ä¸åˆ°ä¿éšœä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µï¼Ÿ æˆ‘ä»¬ä»¥ä»Aè´¦æˆ·è½¬è´¦50å…ƒåˆ°Bè´¦æˆ·ä¸ºä¾‹è¿›è¡Œè¯´æ˜ä¸€ä¸‹ACIDè¿™å››å¤§ç‰¹æ€§ã€‚ åŸå­æ€§ : åŸå­æ€§æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œå…¶ä¸­çš„æ“ä½œè¦ä¹ˆéƒ½åšï¼Œè¦ä¹ˆéƒ½ä¸åšã€‚å³è¦ä¹ˆè½¬è´¦æˆåŠŸï¼Œè¦ä¹ˆè½¬è´¦å¤±è´¥ï¼Œæ˜¯ä¸å­˜åœ¨ä¸­é—´çš„çŠ¶æ€ã€‚ å¦‚æœæ— æ³•ä¿è¯åŸå­æ€§ä¼šæ€ä¹ˆæ ·ï¼Ÿ ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´çš„æƒ…å½¢ï¼ŒAè´¦æˆ·å‡å»50å…ƒï¼Œè€ŒBè´¦æˆ·å¢åŠ 50å…ƒæ“ä½œå¤±è´¥ã€‚ç³»ç»Ÿå°†æ— æ•…ä¸¢å¤±50å…ƒ~ ä¸€è‡´æ€§ ï¼šä¸€è‡´æ€§æ˜¯æŒ‡äº‹åŠ¡æ‰§è¡Œå‰åï¼Œæ•°æ®å¤„äºä¸€ç§åˆæ³•çš„çŠ¶æ€ï¼Œè¿™ç§çŠ¶æ€æ˜¯è¯­ä¹‰ä¸Šçš„è€Œä¸æ˜¯è¯­æ³•ä¸Šçš„ã€‚ é‚£ä»€ä¹ˆæ˜¯åˆæ³•çš„æ•°æ®çŠ¶æ€å‘¢ï¼Ÿè¿™ä¸ªçŠ¶æ€æ˜¯æ»¡è¶³é¢„å®šçš„çº¦æŸå°±å«åšåˆæ³•çš„çŠ¶æ€ï¼Œå†é€šä¿—ä¸€ç‚¹ï¼Œè¿™çŠ¶æ€æ˜¯ç”±ä½ è‡ªå·±æ¥å®šä¹‰çš„ã€‚æ»¡è¶³è¿™ä¸ªçŠ¶æ€ï¼Œæ•°æ®å°±æ˜¯ä¸€è‡´çš„ï¼Œä¸æ»¡è¶³è¿™ä¸ªçŠ¶æ€ï¼Œæ•°æ®å°±æ˜¯ä¸ä¸€è‡´çš„ã€‚ å¦‚æœæ— æ³•ä¿è¯ä¸€è‡´æ€§ä¼šæ€ä¹ˆæ ·ï¼Ÿ ä¾‹ä¸€: Aè´¦æˆ·æœ‰200å…ƒï¼Œè½¬è´¦300å…ƒå‡ºå»ï¼Œæ­¤æ—¶Aè´¦æˆ·ä½™é¢ä¸º-100å…ƒã€‚ ä½ è‡ªç„¶å°±å‘ç°äº†æ­¤æ—¶æ•°æ®æ˜¯ä¸ä¸€è‡´çš„ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºä½ å®šä¹‰äº†ä¸€ä¸ªçŠ¶æ€ï¼Œä½™é¢è¿™åˆ—å¿…é¡»å¤§äº0ã€‚ ä¾‹äºŒï¼šAè´¦æˆ·200å…ƒï¼Œè½¬è´¦50å…ƒç»™Bè´¦æˆ·ï¼ŒAè´¦æˆ·çš„é’±æ‰£äº†ï¼Œä½†æ˜¯Bè´¦æˆ·å› ä¸ºå„ç§æ„å¤–ï¼Œä½™é¢å¹¶æ²¡æœ‰å¢åŠ ã€‚ ä½ ä¹ŸçŸ¥é“æ­¤æ—¶æ•°æ®æ˜¯ä¸ä¸€è‡´çš„ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºä½ å®šä¹‰äº†ä¸€ä¸ªçŠ¶æ€ï¼Œè¦æ±‚A+Bçš„ä½™é¢å¿…é¡»ä¸å˜ã€‚ éš”ç¦»æ€§ ï¼šéš”ç¦»æ€§æ˜¯æŒ‡å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œçš„æ—¶å€™ï¼Œäº‹åŠ¡å†…éƒ¨çš„æ“ä½œä¸å…¶ä»–äº‹åŠ¡æ˜¯éš”ç¦»çš„ï¼Œå¹¶å‘æ‰§è¡Œçš„å„ä¸ªäº‹åŠ¡ä¹‹é—´ä¸èƒ½äº’ç›¸å¹²æ‰°ã€‚ å¦‚æœæ— æ³•ä¿è¯éš”ç¦»æ€§ä¼šæ€ä¹ˆæ ·ï¼Ÿ å‡è®¾Aè´¦æˆ·æœ‰200å…ƒï¼ŒBè´¦æˆ·0å…ƒã€‚Aè´¦æˆ·å¾€Bè´¦æˆ·è½¬è´¦ä¸¤æ¬¡ï¼Œé‡‘é¢ä¸º50å…ƒï¼Œåˆ†åˆ«åœ¨ä¸¤ä¸ªäº‹åŠ¡ä¸­æ‰§è¡Œã€‚ å¦‚æœæ— æ³•ä¿è¯éš”ç¦»æ€§ï¼ŒAå¯èƒ½å°±ä¼šå‡ºç°æ‰£æ¬¾ä¸¤æ¬¡çš„æƒ…å½¢ï¼Œè€ŒBåªåŠ æ¬¾ä¸€æ¬¡ï¼Œå‡­ç©ºæ¶ˆå¤±äº†50å…ƒï¼Œä¾ç„¶å‡ºç°äº†æ•°æ®ä¸ä¸€è‡´çš„æƒ…å½¢ï¼ æŒä¹…æ€§ : æ ¹æ®å®šä¹‰ï¼ŒæŒä¹…æ€§æ˜¯æŒ‡äº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“çš„æ”¹å˜å°±åº”è¯¥æ˜¯æ°¸ä¹…æ€§çš„ã€‚æ¥ä¸‹æ¥çš„å…¶ä»–æ“ä½œæˆ–æ•…éšœä¸åº”è¯¥å¯¹å…¶æœ‰ä»»ä½•å½±å“ã€‚ å¦‚æœæ— æ³•ä¿è¯æŒä¹…æ€§ä¼šæ€ä¹ˆæ ·ï¼Ÿ åœ¨MySQLä¸­ï¼Œä¸ºäº†è§£å†³CPUå’Œç£ç›˜é€Ÿåº¦ä¸ä¸€è‡´é—®é¢˜ï¼ŒMySQLæ˜¯å°†ç£ç›˜ä¸Šçš„æ•°æ®åŠ è½½åˆ°å†…å­˜ï¼Œå¯¹å†…å­˜è¿›è¡Œæ“ä½œï¼Œç„¶åå†å›å†™ç£ç›˜ã€‚å¥½ï¼Œå‡è®¾æ­¤æ—¶å®•æœºäº†ï¼Œåœ¨å†…å­˜ä¸­ä¿®æ”¹çš„æ•°æ®å…¨éƒ¨ä¸¢å¤±äº†ï¼ŒæŒä¹…æ€§å°±æ— æ³•ä¿è¯ã€‚ è®¾æƒ³ä¸€ä¸‹ï¼Œç³»ç»Ÿæç¤ºä½ è½¬è´¦æˆåŠŸã€‚ä½†æ˜¯ä½ å‘ç°é‡‘é¢æ²¡æœ‰å‘ç”Ÿä»»ä½•æ”¹å˜ï¼Œæ­¤æ—¶æ•°æ®å‡ºç°äº†ä¸åˆæ³•çš„æ•°æ®çŠ¶æ€ï¼Œæˆ‘ä»¬å°†è¿™ç§çŠ¶æ€è®¤ä¸ºæ˜¯æ•°æ®ä¸ä¸€è‡´çš„æƒ…å½¢ã€‚ 1.2 æ•°æ®åº“å¦‚ä½•ä¿è¯å››å¤§ç‰¹æ€§ï¼ˆå¦‚ä½•å®ç°äº‹åŠ¡ï¼‰ï¼Ÿ æ•°æ®åº“äº‹åŠ¡çš„ ACID å››å¤§ç‰¹æ€§æ˜¯äº‹åŠ¡çš„åŸºç¡€ï¼Œäº†è§£äº† ACID æ˜¯å¦‚ä½•å®ç°çš„ï¼Œæˆ‘ä»¬ä¹Ÿå°±æ¸…æ¥šäº†äº‹åŠ¡çš„å®ç°ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†ä¾æ¬¡ä»‹ç»æ•°æ®åº“æ˜¯å¦‚ä½•å®ç°è¿™å››ä¸ªç‰¹æ€§çš„ã€‚ ä¿è¯åŸå­æ€§ ä¸»è¦æ˜¯åˆ©ç”¨Innodbçš„undo logã€‚ undo logåä¸ºå›æ»šæ—¥å¿—ï¼Œæ˜¯å®ç°åŸå­æ€§çš„å…³é”®ï¼Œå½“äº‹åŠ¡å›æ»šæ—¶èƒ½å¤Ÿæ’¤é”€æ‰€æœ‰å·²ç»æˆåŠŸæ‰§è¡Œçš„sqlè¯­å¥ï¼Œä»–éœ€è¦è®°å½•ä½ è¦å›æ»šçš„ç›¸åº”æ—¥å¿—ä¿¡æ¯ã€‚ ä¾‹å¦‚ (1)å½“ä½ deleteä¸€æ¡æ•°æ®çš„æ—¶å€™ï¼Œå°±éœ€è¦è®°å½•è¿™æ¡æ•°æ®çš„ä¿¡æ¯ï¼Œå›æ»šçš„æ—¶å€™ï¼Œinsertè¿™æ¡æ—§æ•°æ® (2)å½“ä½ updateä¸€æ¡æ•°æ®çš„æ—¶å€™ï¼Œå°±éœ€è¦è®°å½•ä¹‹å‰çš„æ—§å€¼ï¼Œå›æ»šçš„æ—¶å€™ï¼Œæ ¹æ®æ—§å€¼æ‰§è¡Œupdateæ“ä½œ (3)å½“å¹´insertä¸€æ¡æ•°æ®çš„æ—¶å€™ï¼Œå°±éœ€è¦è¿™æ¡è®°å½•çš„ä¸»é”®ï¼Œå›æ»šçš„æ—¶å€™ï¼Œæ ¹æ®ä¸»é”®æ‰§è¡Œdeleteæ“ undo logè®°å½•äº†è¿™äº›å›æ»šéœ€è¦çš„ä¿¡æ¯ï¼Œå½“äº‹åŠ¡æ‰§è¡Œå¤±è´¥æˆ–è°ƒç”¨äº†rollbackï¼Œå¯¼è‡´äº‹åŠ¡éœ€è¦å›æ»šï¼Œä¾¿å¯ä»¥åˆ©ç”¨undo logä¸­çš„ä¿¡æ¯å°†æ•°æ®å›æ»šåˆ°ä¿®æ”¹ä¹‹å‰çš„æ ·å­ã€‚ ä¿è¯ä¸€è‡´æ€§ æ•°æ®åº“å¯¹äº ACID ä¸­çš„ä¸€è‡´æ€§çš„å®šä¹‰æ˜¯è¿™æ ·çš„ï¼šå¦‚æœä¸€ä¸ªäº‹åŠ¡åŸå­åœ°åœ¨ä¸€ä¸ªä¸€è‡´åœ°æ•°æ®åº“ä¸­ç‹¬ç«‹è¿è¡Œï¼Œé‚£ä¹ˆåœ¨å®ƒæ‰§è¡Œä¹‹åï¼Œæ•°æ®åº“çš„çŠ¶æ€ä¸€å®šæ˜¯ä¸€è‡´çš„ã€‚ å®ƒçš„ç¬¬ä¸€å±‚æ„æ€å°±æ˜¯å¯¹äºæ•°æ®å®Œæ•´æ€§çš„çº¦æŸï¼ŒåŒ…æ‹¬ä¸»é”®çº¦æŸã€å¼•ç”¨çº¦æŸä»¥åŠä¸€äº›çº¦æŸæ£€æŸ¥ç­‰ç­‰ï¼Œåœ¨äº‹åŠ¡çš„æ‰§è¡Œçš„å‰åä»¥åŠè¿‡ç¨‹ä¸­ä¸ä¼šè¿èƒŒå¯¹æ•°æ®å®Œæ•´æ€§çš„çº¦æŸï¼Œæ‰€æœ‰å¯¹æ•°æ®åº“å†™å…¥çš„æ“ä½œéƒ½åº”è¯¥æ˜¯åˆæ³•çš„ï¼Œå¹¶ä¸èƒ½äº§ç”Ÿä¸åˆæ³•çš„æ•°æ®çŠ¶æ€ã€‚ ç¬¬äºŒå±‚æ„æ€å…¶å®æ˜¯æŒ‡é€»è¾‘ä¸Šçš„å¯¹äºå¼€å‘è€…çš„è¦æ±‚ï¼Œæˆ‘ä»¬è¦åœ¨ä»£ç ä¸­å†™å‡ºæ­£ç¡®çš„äº‹åŠ¡é€»è¾‘ï¼Œæ¯”å¦‚é“¶è¡Œè½¬è´¦ï¼Œäº‹åŠ¡ä¸­çš„é€»è¾‘ä¸å¯èƒ½åªæ‰£é’±æˆ–è€…åªåŠ é’±ï¼Œè¿™æ˜¯åº”ç”¨å±‚é¢ä¸Šå¯¹äºæ•°æ®åº“ä¸€è‡´æ€§çš„è¦æ±‚ã€‚ ä¿è¯éš”ç¦»æ€§ åœ¨ SQL æ ‡å‡†ä¸­å®šä¹‰äº†å››ç§æ•°æ®åº“çš„äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼šREAD UNCOMMITEDã€READ COMMITEDã€REPEATABLE READ å’Œ SERIALIZABLEï¼› æ•°æ®åº“å¯¹äºéš”ç¦»çº§åˆ«çš„å®ç°å°±æ˜¯ä½¿ç”¨å¹¶å‘æ§åˆ¶æœºåˆ¶å¯¹åœ¨åŒä¸€æ—¶é—´æ‰§è¡Œçš„äº‹åŠ¡è¿›è¡Œæ§åˆ¶ï¼š é”ï¼š MySQL å’Œå¸¸è§æ•°æ®åº“ä¸­çš„é”éƒ½åˆ†ä¸ºä¸¤ç§ï¼Œå…±äº«é”ï¼ˆSharedï¼‰å’Œäº’æ–¥é”ï¼ˆExclusiveï¼‰ï¼Œå‰è€…ä¹Ÿå«è¯»é”ï¼Œåè€…å«å†™é”ã€‚ mvccå®ç°ï¼šå®ç°RCå’ŒRRã€‚ ä¿è¯æŒä¹…æ€§ åˆ©ç”¨Innodbçš„redo logï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨redo logï¼Œè¯·çœ‹ä¸‹é¢ï¼š æ­£å¦‚ä¹‹å‰è¯´çš„ï¼ŒMysqlæ˜¯æŠŠç£ç›˜ä¸Šçš„æ•°æ®å…ˆåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œåœ¨å†…å­˜ä¸­å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œå†åˆ·å›ç£ç›˜ä¸Šã€‚å¦‚æœæ­¤æ—¶çªç„¶å®•æœºï¼Œå†…å­˜ä¸­çš„æ•°æ®å°±ä¼šä¸¢å¤±ï¼› å¦‚æœäº‹åŠ¡æäº¤å‰ç›´æ¥æŠŠæ•°æ®å†™å…¥ç£ç›˜ï¼Œåªä¿®æ”¹ä¸€ä¸ªé¡µé¢é‡Œçš„ä¸€ä¸ªå­—èŠ‚ï¼Œå°±è¦å°†æ•´ä¸ªé¡µé¢åˆ·å…¥ç£ç›˜ï¼Œå¤ªæµªè´¹èµ„æºäº†ã€‚ redo logè§£å†³æ–¹æ¡ˆï¼š å½“åšæ•°æ®ä¿®æ”¹çš„æ—¶å€™ï¼Œä¸ä»…åœ¨å†…å­˜ä¸­æ“ä½œï¼Œè¿˜ä¼šåœ¨redo logä¸­è®°å½•è¿™æ¬¡æ“ä½œï¼› å½“äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œä¼šå°†redo logæ—¥å¿—è¿›è¡Œåˆ·ç›˜(redo logä¸€éƒ¨åˆ†åœ¨å†…å­˜ä¸­ï¼Œä¸€éƒ¨åˆ†åœ¨ç£ç›˜ä¸Š)ï¼› å½“æ•°æ®åº“å®•æœºé‡å¯çš„æ—¶å€™ï¼Œä¼šå°†redo logä¸­çš„å†…å®¹æ¢å¤åˆ°æ•°æ®åº“ä¸­ï¼Œå†æ ¹æ®undo logå’Œbinlogå†…å®¹å†³å®šå›æ»šæ•°æ®è¿˜æ˜¯æäº¤æ•°æ®ã€‚ 1.3 binlogæ—¥å¿—æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ å‚è€ƒï¼šhttps://www.cnblogs.com/kevingrace/p/5907254.html MySQLçš„äºŒè¿›åˆ¶æ—¥å¿—binlogå¯ä»¥è¯´æ˜¯MySQLæœ€é‡è¦çš„æ—¥å¿—ï¼Œå®ƒè®°å½•äº†æ‰€æœ‰çš„DDLå’ŒDMLè¯­å¥ï¼ˆé™¤äº†æ•°æ®æŸ¥è¯¢è¯­å¥selectï¼‰ï¼Œä»¥äº‹ä»¶å½¢å¼è®°å½•ï¼Œè¿˜åŒ…å«è¯­å¥æ‰€æ‰§è¡Œçš„æ¶ˆè€—çš„æ—¶é—´ï¼ŒMySQLçš„äºŒè¿›åˆ¶æ—¥å¿—æ˜¯äº‹åŠ¡å®‰å…¨å‹çš„ã€‚ DDL ï¼Œå³ Data Definition Language æ•°æ®åº“å®šä¹‰è¯­è¨€ã€‚ ä¸»è¦çš„å‘½ä»¤æœ‰CREATEã€ALTERã€DROPç­‰ï¼ŒDDLä¸»è¦æ˜¯ç”¨åœ¨å®šä¹‰æˆ–æ”¹å˜è¡¨ï¼ˆTABLEï¼‰çš„ç»“æ„ï¼Œæ•°æ®ç±»å‹ï¼Œè¡¨ä¹‹é—´çš„é“¾æ¥å’Œçº¦æŸç­‰åˆå§‹åŒ–å·¥ä½œä¸Šï¼Œä»–ä»¬å¤§å¤šåœ¨å»ºç«‹è¡¨æ—¶ä½¿ç”¨ã€‚ DMLï¼Œå³Data Manipulation Language æ•°æ®æ“çºµè¯­è¨€ã€‚ ä¸»è¦çš„å‘½ä»¤æ˜¯SELECTã€UPDATEã€INSERTã€DELETEï¼Œå°±è±¡å®ƒçš„åå­—ä¸€æ ·ï¼Œè¿™4æ¡å‘½ä»¤æ˜¯ç”¨æ¥å¯¹æ•°æ®åº“é‡Œçš„æ•°æ®è¿›è¡Œæ“ä½œçš„è¯­è¨€ã€‚ binlogæ—¥å¿—æœ‰ä¸¤ä¸ªæœ€é‡è¦çš„ä½¿ç”¨åœºæ™¯ï¼š MySQLä¸»ä»å¤åˆ¶ï¼šMySQL Replicationåœ¨Masterç«¯å¼€å¯binlogï¼ŒMasteræŠŠå®ƒçš„äºŒè¿›åˆ¶æ—¥å¿—ä¼ é€’ç»™slavesæ¥è¾¾åˆ° master-slaveæ•°æ®ä¸€è‡´çš„ç›®çš„ã€‚ è‡ªç„¶å°±æ˜¯æ•°æ®æ¢å¤äº†ï¼Œé€šè¿‡ä½¿ç”¨mysqlbinlogå·¥å…·æ¥ä½¿æ¢å¤æ•°æ®ã€‚ 2.ä»‹ç»ä¸€ä¸‹ï¼ˆå¹¶å‘ï¼‰äº‹åŠ¡ä¸åŒéš”ç¦»çº§åˆ«ï¼Ÿå¯¹åº”å¯èƒ½å‡ºç°çš„é—®é¢˜ï¼Ÿ å‚è€ƒï¼šhttps://www.cnblogs.com/shan-kylin/p/9543294.html ä¸‹é¢æ’å®ƒé”å’Œå…±äº«é”éƒ½æ˜¯è¡Œé”ï¼Œé”ä½ä¸€è¡Œã€‚ Read uncommittedï¼š é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ä¸€ä¸ªäº‹åŠ¡å¯ä»¥è¯»å–å¦ä¸€ä¸ªæœªæäº¤äº‹åŠ¡çš„æ•°æ®ã€‚ä½†è¿™ç§æƒ…å†µä¼šå‡ºç°è„è¯»ï¼š å› ä¸ºå†™æ•°æ®çš„æ—¶å€™æ·»åŠ ä¸€ä¸ªXé”ï¼ˆæ’ä»–é”ï¼Œæ‹¿åˆ°é”çš„äº‹åŠ¡å¯ä»¥å†™ï¼Œå…¶å®ƒäº‹åŠ¡åªèƒ½ç­‰å¾…é˜»å¡ï¼‰ï¼›ä½†è¯»ä¸å—é™åˆ¶ï¼Œè¯»ä¸åŠ é”ã€‚ ç”±äºè¯»ä¸åŠ é”ï¼Œè¯»çš„æ˜¯å¯èƒ½æ˜¯ä¿®æ”¹å‰ï¼ˆæœªæäº¤ï¼‰çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è„è¯»ã€‚ Read Committed ï¼šå†™æ•°æ®çš„æ—¶å€™åŠ ä¸ŠXé”ï¼ˆæ’ä»–é”ï¼‰ï¼Œè¯»æ•°æ®çš„æ—¶å€™æ·»åŠ Sé”ï¼ˆå…±äº«é”ï¼Œæ‹¿åˆ°é”çš„äº‹åŠ¡å¯ä»¥æŸ¥çœ‹ä½†æ— æ³•ä¿®æ”¹å’Œåˆ é™¤ï¼Œå…¶å®ƒäº‹åŠ¡ã€åªèƒ½åŠ Sé”ã€‘ã€ä¸èƒ½åŠ å…¶å®ƒé”ã€‘å¦‚Xé”ï¼‰ã€‚è§£å†³è„è¯»ï¼Œä½†ä¼šå¯¼è‡´å‡ºç°ä¸å¯é‡å¤è¯»çš„é—®é¢˜ã€‚ åˆå§‹x=100,ï¼› äº‹åŠ¡Aè¯»xï¼ŒåŠ ä¸ŠSé”ï¼Œè¯»åˆ°x=100ï¼Œç«‹å³é‡Šæ”¾Sé”ä¸”æœªæäº¤ï¼› äº‹åŠ¡Bä¿®æ”¹xï¼ŒåŠ ä¸ŠXé”ï¼Œä¿®æ”¹x=50ï¼Œæäº¤ ï¼› äº‹åŠ¡Aå†æ¬¡è¯»å–xï¼ŒåŠ ä¸ŠSé”ï¼Œè¯»å–x=50ï¼Œå‘ç°å’Œç¬¬ä¸€æ¬¡è¯»å–ä¸ä¸€è‡´ï¼Œæäº¤äº‹åŠ¡ã€‚ ä¸Šè¿°è¿‡ç¨‹ï¼Œäº‹åŠ¡Aåœ¨æäº¤å‰è¯»å–ä¸¤æ¬¡ä¸ä¸€æ ·çš„xå€¼ï¼Œä¸ºä¸å¯é‡å¤è¯»ã€‚ Repeatable read ï¼šMySQL é»˜è®¤éš”ç¦»ç•Œåˆ« , å¼€å§‹è¯»å–æ•°æ®ï¼ˆäº‹åŠ¡å¼€å¯ï¼‰æ—¶ï¼Œã€Sã€‘é”ä¸å†ç«‹å³é‡Šæ”¾ï¼Œå…¶å®ƒäº‹åŠ¡å°±ä¸èƒ½åŠ ä¸Šã€Xã€‘é”ä¿®æ”¹æ•°æ®ã€‚è§£å†³äº†è„è¯»ã€ä¸å¯é‡å¤è¯»ï¼Œä½†æ˜¯å¯èƒ½ä¼šå‡ºç°å¹»è¯»ï¼š- Mysqlå®˜æ–¹ç»™å‡ºçš„å¹»è¯»è§£é‡Šæ˜¯ï¼šåªè¦åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œç¬¬äºŒæ¬¡selectï¼ˆè¯»ï¼‰å¤šå‡ºäº†rowå°±ç®—å¹»è¯»ã€‚ ç°åœ¨åšå¦‚ä¸‹ä¿®æ”¹ï¼š å†™ï¼šXé”ä¿æŒä¸å˜ è¯»ï¼šSé”ï¼Œè¯»å®Œä¸å†ç«‹å³é‡Šæ”¾ï¼Œè€Œæ˜¯åœ¨æäº¤çš„æ—¶å€™å†é‡Šæ”¾ã€‚ è¿™æ ·çš„è¯ï¼Œä¿è¯äº‹åŠ¡Aåœ¨æäº¤å‰ï¼Œè¯»å–çš„xæ˜¯ä¸€è‡´çš„ã€‚è§£å†³äº†ä¸å¯é‡å¤è¯»ï¼Œä½†ä¾æ—§å¯èƒ½å‡ºç°å¹»è¯»ã€‚ä¾‹å¦‚ï¼ŒXé”ä¸èƒ½é˜»æ­¢ï¼ˆè¡¨ä¸­å…¶å®ƒè®°å½•ï¼‰æ’å…¥æ“ä½œï¼Œå› ä¸ºåªé”ä½äº†å½“å‰è®°å½•ï¼Œæ˜¯è¡Œçº§é”ã€‚ äº‹åŠ¡AåŠ ä¸ŠXé”ï¼Œæ›´æ–°äº†æ‰€æœ‰ç”¨æˆ·å¹´é¾„ä»20â†’18ï¼› è¿‡ä¸€ä¼šå„¿å†è¯»å‘ç°è¿˜æœ‰ä¸€ä¸ªç”¨æˆ·æ²¡ä¿®æ”¹ï¼Œè¿˜æ˜¯20å²ï¼Ÿå‡ºç°å¹»è§‰äº†å—ï¼Ÿ è¿™æ˜¯å› ä¸ºï¼Œå…¶å®ƒäº‹åŠ¡BåŒæ—¶æ’å…¥äº†ä¸€è¡Œæ–°æ•°æ®ï¼Œå¹´é¾„å°±æ˜¯20å²ã€‚æ‰€ä»¥å†è¯»å‘ç°æ²¡ä¿®æ”¹ã€‚ Serializableï¼š åºåˆ—åŒ–ï¼Œäº‹åŠ¡ä¸²è¡ŒåŒ–é¡ºåºæ‰§è¡Œï¼Œå¯ä»¥é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»ä¸å¹»è¯»ã€‚è€—è´¹æ€§èƒ½ï¼Œä¸€èˆ¬ä¸ç”¨ã€‚ 2.1ã€çŒ¿è¾…å¯¼ã€‘ æ€ä¹ˆè§£å†³å¹»è¯»ï¼Ÿ è§£å†³å¹»è¯»ä½¿ç”¨ä¸¤ç§æ–¹å¼ï¼š é—´éš™é” é—´éš™é”ï¼ˆGap Lockï¼‰ï¼šå½“æˆ‘ä»¬ç”¨ã€èŒƒå›´æ¡ä»¶ã€‘è€Œä¸æ˜¯ç›¸ç­‰æ¡ä»¶æ£€ç´¢æ•°æ®ï¼Œå¹¶è¯·æ±‚å…±äº«æˆ–æ’ä»–é”æ—¶ï¼ŒInnoDBä¼šç»™ç¬¦åˆæ¡ä»¶çš„å·²æœ‰æ•°æ®è®°å½•çš„ç´¢å¼•é¡¹åŠ é”ï¼›å¯¹äºé”®å€¼åœ¨æ¡ä»¶èŒƒå›´å†…ä½†å¹¶ä¸å­˜åœ¨çš„è®°å½•ï¼Œå«åšâ€œé—´éš™ï¼ˆGAP)â€ï¼ŒInnoDBä¹Ÿä¼šå¯¹è¿™ä¸ªâ€œé—´éš™â€åŠ é”ï¼Œè¿™ç§é”æœºåˆ¶å°±æ˜¯æ‰€è°“çš„é—´éš™é”ï¼› ä¸¾ä¾‹ï¼š å‡å¦‚userè¡¨ä¸­åªæœ‰101æ¡è®°å½•ï¼Œå…¶empidçš„å€¼åˆ†åˆ«æ˜¯ 1,2,â€¦,100,101ï¼Œä¸‹é¢çš„SQLï¼š 1select * from user where user_id &gt; 99 for update; æ˜¯ä¸€ä¸ªèŒƒå›´æ¡ä»¶çš„æ£€ç´¢ï¼ŒInnoDBä¸ä»…ä¼šå¯¹ï¼ˆ1ï¼‰ç¬¦åˆæ¡ä»¶çš„user_idå€¼ï¼ˆ100ã€101ï¼‰çš„è®°å½•åŠ é”ï¼Œä¹Ÿä¼šå¯¹ï¼ˆ2ï¼‰user_idå¤§äº101ï¼ˆè¿™äº›è®°å½•å¹¶ä¸å­˜åœ¨ï¼‰çš„â€œé—´éš™â€åŠ é”ã€‚ å¦‚ä½•è§£å†³å¹»è¯»ï¼Ÿ äº§ç”Ÿå¹»è¯»çš„åŸå› æ˜¯ï¼Œè¡Œé”åªèƒ½é”ä½è¡Œï¼Œä½†æ˜¯æ–°æ’å…¥è®°å½•è¿™ä¸ªåŠ¨ä½œï¼Œè¦æ›´æ–°çš„æ˜¯è®°å½•ä¹‹é—´çš„â€œé—´éš™â€ï¼Œå¯¼è‡´ä¸‹æ¬¡è¯»å–äº§ç”Ÿå¹»è¯»ã€‚å¦‚æœé”ä½äº†é—´éš™ï¼Œè‡ªç„¶ä¹Ÿå°±æ²¡é”çš„é—®é¢˜äº†ã€‚ mvvc åœ¨RRï¼ˆå¯é‡å¤è¯»çº§åˆ«ä¸‹ï¼‰ä¸ä¼šå‡ºç°å¹»è¯»ã€‚ä¾‹å¦‚ï¼š å¼€å¯äº‹åŠ¡1ï¼Œè·å¾—äº‹åŠ¡IDä¸º1ã€‚ äº‹åŠ¡1æ‰§è¡ŒæŸ¥è¯¢ï¼Œå¾—åˆ°readviewã€‚ å¼€å§‹äº‹åŠ¡2ã€‚ æ‰§è¡Œinsertã€‚ æäº¤äº‹åŠ¡2ã€‚ æ‰§è¡Œäº‹åŠ¡1çš„ç¬¬äºŒæ¬¡æŸ¥è¯¢ (å› ä¸ºè¿™é‡Œæ˜¯RRçº§åˆ«ï¼Œæ‰€ä»¥ä¸ä¼šå†å»è·å¾—readviewï¼Œè¿˜æ˜¯ä½¿ç”¨ç¬¬ä¸€æ¬¡è·å¾—çš„readviewï¼Œæ‰€ä»¥å½“å‰read view äº‹åŠ¡çš„IDä¸ä¼šæ›´æ–°ï¼Œå³ä¸ä¼šåŠ å…¥æ’å…¥äº‹åŠ¡2) æœ€åå¾—åˆ°çš„ç»“æœæ˜¯ï¼Œæ’å…¥çš„æ•°æ®ä¸ä¼šè¢«è¯»å–æ˜¾ç¤ºï¼Œå› ä¸ºæ’å…¥çš„æ•°æ®äº‹åŠ¡ID &gt; readviewé‡Œçš„æœ€å¤§æ´»è·ƒäº‹åŠ¡IDã€‚ 5.4 MySQä¼˜åŒ– 0. åˆ†é¡µæŸ¥è¯¢æ…¢çš„åŸå› ï¼Ÿå¦‚ä½•ä¼˜åŒ–ï¼Ÿ å‚è€ƒï¼šhttps://juejin.cn/post/6844904141878214664 åœ¨åç§»é‡éå¸¸å¤§çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯ç¿»é¡µåˆ°å¾ˆé åçš„é¡µé¢æ—¶ï¼ŒæŸ¥è¯¢é€Ÿåº¦ä¼šå˜å¾—è¶Šæ¥è¶Šæ…¢ï¼Œä¾‹å¦‚ï¼š 1select * from t_order order by id limit 1000000000, 10; è¿™æ˜¯å› ä¸ºï¼Œéœ€è¦æŸ¥è¯¢ 100000000010 (100000000000 + 10) æ¡è®°å½•ï¼Œç„¶ååªè¿”å›æœ€å 10 æ¡ï¼Œå¹¶å°†å‰é¢çš„ 100000000000 æ¡è®°å½•æŠ›å¼ƒï¼Œè¿™æ ·å½“ç¿»é¡µè¶Šé åæ—¶ï¼Œä»£ä»·å°±å˜å¾—è¶Šæ¥è¶Šé«˜ã€‚ ä¼˜åŒ–æ–¹æ³•ï¼š æœ€å¤§idæ³• ä¸¾ä¾‹ï¼šæŸ¥è¯¢ç¬¬ä¸€é¡µçš„æ—¶å€™æ˜¯limit 400000,10 æŸ¥è¯¢åˆ°çš„æœ€åä¸€æ¡idæ˜¯4000000ï¼Œé‚£ä¹ˆä¸‹ä¸€é¡µçš„æŸ¥è¯¢åªéœ€è¦æŸ¥è¯¢idå¤§äº400000çš„10æ¡æ•°æ®å³å¯ã€‚ è¯­å¥ï¼š 1explain select * from user where id &gt; 4000000 limit 10; BETWEEN â€¦ AND 1select * from user where id BETWEEN 4000000 and 4000010 åˆ†è¡¨æŸ¥è¯¢ mysqlæ¨èä¸€å¼ è¡¨çš„å­˜å‚¨ä¸è¦è¶…è¿‡500wæ•°æ®ï¼ŒæŸ¥è¯¢400wä¸åˆ°1ç§’å¯¹äºä¸€èˆ¬çš„æŸ¥è¯¢æ¥è¯´å·²ç»å¯ä»¥äº†ï¼Œå¦‚æœè¿˜è¦æ›´å¿«çš„è¯ï¼Œæˆ‘å»ºè®®ä½¿ç”¨åˆ†è¡¨å­˜å‚¨ï¼Œåˆ†è¡¨åˆåˆ†ä¸¤ç§æƒ…å†µï¼Œæ°´å¹³åˆ†è¡¨äºå‚ç›´åˆ†è¡¨ã€‚ å»¶è¿Ÿå…³è”ï¼ˆä¸ªäººæ¨èï¼‰ 1select * from table a,(select id from table limit 100000,20) b on a.id=b.id 1. SQLä¼˜åŒ–æ‰‹æ®µæœ‰å“ªäº›ï¼Ÿ æŸ¥è¯¢è¯­å¥ä¸­ä¸è¦ä½¿ç”¨select å°½é‡å‡å°‘å­æŸ¥è¯¢ï¼Œä½¿ç”¨å…³è”æŸ¥è¯¢ï¼ˆleft join,right join,inner joinï¼‰æ›¿ä»£ å‡å°‘ä½¿ç”¨INæˆ–è€…NOT IN ,ä½¿ç”¨existsï¼Œnot existsæˆ–è€…å…³è”æŸ¥è¯¢è¯­å¥æ›¿ä»£(åœ¨ç¡®è®¤æ²¡æœ‰é‡å¤æ•°æ®æˆ–è€…ä¸ç”¨å‰”é™¤é‡å¤æ•°æ®æ—¶ï¼Œunion allä¼šæ›´å¥½) åº”å°½é‡é¿å…åœ¨ where å­å¥ä¸­ä½¿ç”¨!=æˆ–&lt;&gt;æ“ä½œç¬¦ï¼Œå¦åˆ™å°†å¼•æ“æ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æã€‚ åº”å°½é‡é¿å…åœ¨ where å­å¥ä¸­å¯¹å­—æ®µè¿›è¡Œ null å€¼åˆ¤æ–­ï¼Œå¦åˆ™å°†å¯¼è‡´å¼•æ“æ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æï¼Œå¦‚ï¼š select id from t where num is null å¯ä»¥åœ¨numä¸Šè®¾ç½®é»˜è®¤å€¼0ï¼Œç¡®ä¿è¡¨ä¸­numåˆ—æ²¡æœ‰nullå€¼ï¼Œç„¶åè¿™æ ·æŸ¥è¯¢ï¼š select id from t where num=0 2.è¯·é—®å¦‚ä½•é˜²æ­¢SQLè¢«æ³¨å…¥ï¼Ÿ ä»€ä¹ˆæ˜¯SQLæ³¨å…¥ï¼Ÿ æ”»å‡»è€…åœ¨HTTPè¯·æ±‚ä¸­æ³¨å…¥æ¶æ„çš„SQLä»£ç ï¼ŒæœåŠ¡å™¨ä½¿ç”¨å‚æ•°æ„å»ºæ•°æ®åº“SQLå‘½ä»¤æ—¶ï¼Œæ¶æ„SQLè¢«ä¸€èµ·æ„é€ ï¼Œå¹¶åœ¨æ•°æ®åº“ä¸­æ‰§è¡Œã€‚ ä¾‹å¦‚ï¼šç”¨æˆ·ç™»å½•ï¼Œæ”»å‡»è€…è¾“å…¥ï¼šç”¨æˆ·å = liangzoneï¼Œå¯†ç  = â€˜ or â€˜1â€™=â€™1 ï¼Œé‚£ä¹ˆæ‹¼æ¥åçš„è¯­å¥æ˜¯ï¼š 1select * from user where name = â€˜lianggzoneâ€™ and password = â€˜â€™ or â€˜1â€™=â€˜1â€™ æ”»å‡»è€…å°±å¯ä»¥æŸ¥è¯¢å‡ºæ‰€æœ‰çš„ç”¨æˆ·è¡¨ä¿¡æ¯ï¼ å¦‚ä½•é˜²èŒƒSQLæ³¨å…¥ï¼Ÿ Webç«¯ï¼š1ï¼‰æœ‰æ•ˆæ€§æ£€éªŒï¼› 2ï¼‰é™åˆ¶å­—ç¬¦ä¸²è¾“å…¥çš„é•¿åº¦ æœåŠ¡å™¨ç«¯ï¼š1ï¼‰ä¸ç”¨æ‹¼æ¥SQLå­—ç¬¦ä¸²ï¼Œ 2ï¼‰ä½¿ç”¨é¢„ç¼–è¯‘çš„PrepareStatementï¼Œ 3ï¼‰æœ‰æ•ˆæ€§æ£€éªŒï¼Œ4ï¼‰è¿‡æ»¤SQLéœ€è¦çš„å‚æ•°ä¸­çš„ç‰¹æ®Šå­—ç¬¦ï¼Œæ¯”å¦‚å•å¼•å·ã€åŒå¼•å·ã€‚ 3. MySQL å¦‚ä½•åšåˆ°é«˜å¹¶å‘è§£å†³æ–¹æ¡ˆï¼Ÿ åœ¨webæœåŠ¡æ¡†æ¶ä¸­åŠ å…¥ç¼“å­˜ã€‚åœ¨æœåŠ¡å™¨ä¸æ•°æ®åº“å±‚ä¹‹é—´åŠ å…¥ç¼“å­˜å±‚ï¼Œå°†é«˜é¢‘è®¿é—®çš„æ•°æ®å­˜å…¥ç¼“å­˜ä¸­ï¼Œå‡å°‘æ•°æ®åº“çš„è¯»å–è´Ÿæ‹…ã€‚ å¢åŠ æ•°æ®åº“ç´¢å¼•ï¼Œè¿›è€Œæé«˜æŸ¥è¯¢é€Ÿåº¦ã€‚ï¼ˆä¸è¿‡ç´¢å¼•å¤ªå¤šä¼šå¯¼è‡´é€Ÿåº¦å˜æ…¢ï¼Œå¹¶ä¸”æ•°æ®åº“çš„å†™å…¥ä¼šå¯¼è‡´ç´¢å¼•çš„æ›´æ–°ï¼Œä¹Ÿä¼šå¯¼è‡´é€Ÿåº¦å˜æ…¢ï¼‰ ä¸»ä»è¯»å†™åˆ†ç¦»åˆ†åº“ï¼Œè®©ä¸»æœåŠ¡å™¨è´Ÿè´£å†™ï¼Œä»æœåŠ¡å™¨è´Ÿè´£è¯»ã€‚ å°†æ•°æ®åº“è¡¨è¿›è¡Œæ‹†åˆ†è¡¨ï¼Œä½¿å¾—æ•°æ®åº“çš„è¡¨å°½å¯èƒ½å°ï¼Œæé«˜æŸ¥è¯¢çš„é€Ÿåº¦ã€‚ ä½¿ç”¨åˆ†å¸ƒå¼æ¶æ„ï¼Œåˆ†æ•£è®¡ç®—å‹åŠ›ã€‚ 4. å¤§è¡¨å¦‚ä½•è¿›è¡Œä¼˜åŒ–ï¼Ÿ å½“MySQLå•è¡¨è®°å½•æ•°è¿‡å¤§æ—¶ï¼Œæ•°æ®åº“çš„CRUDæ€§èƒ½ä¼šæ˜æ˜¾ä¸‹é™ï¼Œâ¼€äº›å¸¸â»…çš„ä¼˜åŒ–æªæ–½å¦‚ä¸‹ã€‚ é™å®šæ•°æ®çš„èŒƒå›´ï¼šåŠ¡å¿…ç¦â½Œä¸å¸¦ä»»ä½•é™åˆ¶æ•°æ®èŒƒå›´æ¡ä»¶çš„æŸ¥è¯¢è¯­å¥ã€‚â½å¦‚ï¼šæˆ‘ä»¬å½“â½¤æˆ·åœ¨æŸ¥è¯¢è®¢å•å†å²çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶åœ¨â¼€ä¸ªâ½‰çš„èŒƒå›´å†…ï¼› è¯»/å†™åˆ†ç¦»ï¼šç»å…¸çš„æ•°æ®åº“æ‹†åˆ†â½…æ¡ˆï¼Œä¸»åº“è´Ÿè´£å†™ï¼Œä»åº“è´Ÿè´£è¯»ï¼› å‚ç›´åˆ†åŒºï¼šæ ¹æ®æ•°æ®åº“â¾¥â¾¯æ•°æ®è¡¨çš„ç›¸å…³æ€§è¿›è¡Œæ‹†åˆ†ã€‚ ä¾‹å¦‚ï¼Œâ½¤æˆ·è¡¨ä¸­æ—¢æœ‰â½¤æˆ·çš„ç™»å½•ä¿¡æ¯â¼œæœ‰â½¤æˆ·çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¯ä»¥å°†â½¤æˆ·è¡¨æ‹†åˆ†æˆä¸¤ä¸ªå•ç‹¬çš„è¡¨ï¼Œç”šâ¾„æ”¾åˆ°å•ç‹¬çš„åº“åšåˆ†åº“ã€‚ ç®€å•æ¥è¯´å‚ç›´æ‹†åˆ†æ˜¯æŒ‡æ•°æ®è¡¨åˆ—çš„æ‹†åˆ†ï¼ŒæŠŠâ¼€å¼ åˆ—â½è¾ƒå¤šçš„è¡¨æ‹†åˆ†ä¸ºå¤šå¼ è¡¨ã€‚ æ°´å¹³åˆ†åŒº : ä¿æŒæ•°æ®è¡¨ç»“æ„ä¸å˜ï¼Œé€šè¿‡æŸç§ç­–ç•¥å­˜å‚¨æ•°æ®åˆ†â½šã€‚è¿™æ ·æ¯â¼€â½šæ•°æ®åˆ†æ•£åˆ°ä¸åŒçš„è¡¨æˆ–è€…åº“ä¸­ï¼Œè¾¾åˆ°äº†åˆ†å¸ƒå¼çš„â½¬çš„ã€‚ â½”å¹³æ‹†åˆ†å¯ä»¥æ”¯æ’‘â¾®å¸¸å¤§çš„æ•°æ®é‡ã€‚ å…¶å®ƒæ•°æ®åº“ç»“æ„æ–¹é¢ä¼˜åŒ–ï¼š èŒƒå¼ä¼˜åŒ–ï¼š æ¯”å¦‚æ¶ˆé™¤å†—ä½™ï¼ˆèŠ‚çœç©ºé—´ã€‚ã€‚ï¼‰ åèŒƒå¼ä¼˜åŒ–ï¼šæ¯”å¦‚é€‚å½“åŠ å†—ä½™ç­‰ï¼ˆå‡å°‘joinï¼‰ 5. æ•°æ®åº“å¦‚ä½•å»é‡ï¼Ÿ å‚è€ƒï¼šMySQLæ•°æ®åº“è¡Œå»é‡å¤å’Œåˆ—å»é‡å¤ 5.1 è¡Œå»é‡ å­˜åœ¨è¡Œé‡å¤ï¼Œåˆ™æ— æ³•å»ºç«‹ å”¯ä¸€ç´¢å¼• ç­‰ã€‚ ç”¨distinct å¾—åˆ°æˆ‘ä»¬è¦ä¿ç•™çš„æ•°æ®ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ ä¸‹é¢å‡è®¾çš„æ˜¯emailå­—æ®µé‡å¤ã€‚ æŸ¥çœ‹æˆ‘ä»¬çš„åˆ†ç»„å 1select *,count(id) from demo_table group by email having count(id)&gt;1 order by id; æ‰§è¡Œç»“æœï¼š 12345678910+----+------+--------------+-----------+| id | name | email | count(id) |+----+------+--------------+-----------+| 1 | u1 | u1@email.com | 4 || 2 | u2 | u2@email.com | 4 || 3 | u3 | u3@email.com | 3 || 4 | u4 | u4@email.com | 2 || 5 | u5 | u5@email.com | 2 |+----+------+--------------+-----------+5 rows in set (0.00 sec) ä¿ç•™æ¯ä¸ªåˆ†ç»„æœ€å°çš„idï¼Œè¡¨ä¸­å…¶ä½™éƒ½åˆ é™¤ åœ¨è¡¨ä¸­åˆ é™¤ä¸ç¬¦åˆè¦æ±‚çš„æ•°æ®ï¼š 1delete from demo_table where id not in (select min(id) from demo_table group by email); ä½†æ˜¯ä¼¼ä¹æœ‰ä¿æŠ¤æœºåˆ¶ï¼Œæ— æ³•ç›´æ¥åˆ é™¤ï¼š 1ERROR 1093 (HY000): You can&#x27;t specify target table &#x27;demo_table&#x27; for update in FROM clause åˆ›å»ºä¸´æ—¶è¡¨å†åˆ é™¤ 12345678# åˆ›å»ºä¸´æ—¶è¡¨ä¿å­˜æ¯ä¸ªåˆ†ç»„ä¸­æœ€å°çš„é‚£ä¸ªidcreate table tmp_table as select min(id) from demo_table group by email;# åˆ é™¤è¡¨ä¸­æ•°æ®delete from demo_table where id not in (select * from tmp_table);# åˆ é™¤ä¸´æ—¶è¡¨drop table tmp_table; 5.2 åˆ—é‡å¤ å…ˆæ‰¾åˆ°é‡å¤å­—æ®µçš„è¡Œ 1select * from demo_table as a, demo_table as b where a.id=b.id and a.name=b.email; æ‰§è¡Œç»“æœï¼š 12345678910+----+--------------+--------------+----+--------------+--------------+| id | name | email | id | name | email |+----+--------------+--------------+----+--------------+--------------+| 31 | 31@email.com | 31@email.com | 31 | 31@email.com | 31@email.com || 32 | 32@email.com | 32@email.com | 32 | 32@email.com | 32@email.com || 33 | 33@email.com | 33@email.com | 33 | 33@email.com | 33@email.com || 34 | 34@email.com | 34@email.com | 34 | 34@email.com | 34@email.com || 35 | 35@email.com | 35@email.com | 35 | 35@email.com | 35@email.com |+----+--------------+--------------+----+--------------+--------------+5 rows in set (0.00 sec) é‡å¤è®°å½•çš„idéƒ½å·²ç»æ‰¾å‡ºæ¥äº†ï¼Œåˆ é™¤å°±å‚è€ƒä¸Šè¿°æ–¹å¼å¤„ç†äº†ã€‚ 6. selectæ…¢çš„åŸå› ï¼Ÿæ…¢æŸ¥è¯¢çš„ä¼˜åŒ–ç­–ç•¥ï¼Ÿ 6.1 select å¾ˆæ…¢çš„åŸå›  å‚è€ƒï¼šè…¾è®¯é¢è¯•ï¼šä¸€æ¡SQLè¯­å¥æ‰§è¡Œå¾—å¾ˆæ…¢çš„åŸå› æœ‰å“ªäº›? å¦‚æœæ˜¯å¶å°”å¾ˆæ…¢ é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œè¿™æ¡SQLè¯­å¥çš„ä¹¦å†™æœ¬èº«æ˜¯æ²¡ä»€ä¹ˆé—®é¢˜çš„ã€‚å¯èƒ½æ˜¯å…¶å®ƒåŸå› å¯¼è‡´ï¼š è¢«åŠ é”ã€‚ è¦æ‰§è¡Œçš„è¿™æ¡è¯­å¥ï¼Œåˆšå¥½è¿™æ¡è¯­å¥æ¶‰åŠåˆ°çš„è¡¨ï¼Œåˆ«äººåœ¨ç”¨ï¼Œå¹¶ä¸”åŠ é”äº†ï¼Œæˆ‘ä»¬æ‹¿ä¸åˆ°é”ï¼Œåªèƒ½æ…¢æ…¢ç­‰å¾…åˆ«äººé‡Šæ”¾é”äº†ï¼›æˆ–è€…ï¼Œè¡¨æ²¡æœ‰åŠ é”ï¼Œä½†è¦ä½¿ç”¨åˆ°çš„æŸä¸ªä¸€è¡Œè¢«åŠ é”äº† ã€‚ æ•°æ®åº“åœ¨åˆ·æ–°è„é¡µ ï¼Ÿ çœ‹é“¾æ¥ï¼Œä¸å¤ªæ˜ç™½æµç¨‹ã€‚ å¦‚æœæ˜¯ç»å¸¸å¾ˆæ…¢ æ²¡ç”¨åˆ°ç´¢å¼• ç´¢å¼•å¤±æ•ˆäº† ï¼š ï¼ˆ1ï¼‰è”åˆç´¢å¼•ä¸æ»¡è¶³æœ€å·¦åŒ¹é…ï¼ˆä¸åŒ…å«ç¬¬ä¸€ä¸ªç´¢å¼•ï¼‰ï¼› ï¼ˆ2ï¼‰likeè¯­å¥ä¸æ»¡è¶³æœ€å·¦åŒ¹é…ï¼ˆä¸åŒ…å«ç¬¬ä¸€ä¸ªç´¢å¼•ï¼‰ ï¼ˆ3ï¼‰æˆ–è€…ç´¢å¼•åŠ ä¸Šäº†è¿ç®— 1select * from t where c - 1 = 1000; è¿™ç§æƒ…å†µä¸ä¼šæœ‰æ•ˆï¼Œåº”è¯¥æ˜¯ï¼š 1select * from t where c = 1000 + 1; ï¼ˆ4ï¼‰æˆ–è€…å‡½æ•°æ“ä½œç”¨ä¸Šç´¢å¼• 1select * from t where pow(c,2) = 1000; æ•°æ®åº“ä½¿ç”¨éèšç°‡ç´¢å¼• æˆ‘ä»¬åœ¨è¿›è¡ŒæŸ¥è¯¢æ“ä½œçš„æ—¶å€™ï¼Œä¾‹å¦‚ï¼š 1select * from t where 100 &lt; c and c &lt; 100000; æ­¤æ—¶ä½¿ç”¨çš„éèšç°‡ç´¢å¼•ï¼ˆè¾…åŠ©ç´¢å¼•ï¼‰ï¼Œåªæ˜¯å­˜å‚¨äº†ä¸»é”®çš„key ï¼Œè¿˜æ˜¯è¦å†æ¬¡é€šè¿‡èšç°‡ç´¢å¼•å»æŸ¥æ‰¾ã€‚æ•ˆç‡å¯èƒ½ä¸å¿…å…¨è¡¨æ‰«æé«˜ã€‚ 7. selectâ€¦for updateç”¨æ³•ï¼Ÿ æ•°æ®åº“-MySQLä¸­for updateçš„ä½œç”¨å’Œç”¨æ³• for updateæ˜¯ä¸€ç§è¡Œçº§é”ï¼Œåˆå«æ’å®ƒé”ã€‚ ä¸€æ—¦ç”¨æˆ·å¯¹æŸä¸ªè¡Œæ–½åŠ äº†è¡Œçº§åŠ é”ï¼Œåˆ™è¯¥ç”¨æˆ·å¯ä»¥æŸ¥è¯¢ä¹Ÿå¯ä»¥æ›´æ–°è¢«åŠ é”çš„æ•°æ®è¡Œï¼Œå…¶å®ƒç”¨æˆ·åªèƒ½æŸ¥è¯¢ä½†ä¸èƒ½æ›´æ–°è¢«åŠ é”çš„æ•°æ®è¡Œã€‚ 123456-- å¼€å¯äº‹åŠ¡begin;SELECT * FROM user WHERE id=3 FOR UPDATE;SELECT * FROM user WHERE id=3 and name=&#x27;Tom&#x27; FOR UPDATE;-- æäº¤äº‹åŠ¡commit; 8. åœºæ™¯é¢˜ï¼šå‡å¦‚é€‰æ‹©MySQLæ•°æ®åº“ï¼Œä¸€å¤©äº”ä¸‡æ¡å¢é‡ï¼Œè¿ç»´ä¸‰å¹´ï¼Œæœ‰å“ªäº›ä¼˜åŒ–æ‰‹æ®µï¼Ÿ è®¾è®¡è‰¯å¥½çš„æ•°æ®åº“ç»“æ„ï¼Œå…è®¸éƒ¨åˆ†æ•°æ®å†—ä½™ï¼Œå°½é‡é¿å…joinæŸ¥è¯¢ï¼Œæé«˜æ•ˆç‡ï¼› é€‰æ‹©åˆé€‚çš„è¡¨å­—æ®µæ•°æ®ç±»å‹å’Œå­˜å‚¨å¼•æ“ï¼Œé€‚å½“çš„æ·»åŠ ç´¢å¼•ï¼› MySQLåº“ä¸»ä»åˆ†åº“è¯»å†™åˆ†ç¦»ï¼› æ‰¾è§„å¾‹åˆ†è¡¨ï¼Œå‡å°‘å•è¡¨ä¸­çš„æ•°æ®é‡æé«˜æŸ¥è¯¢é€Ÿåº¦ï¼› æ·»åŠ ç¼“å­˜æœºåˆ¶ï¼Œæ¯”å¦‚Memcachedï¼ŒApcç­‰ï¼› ä¹¦å†™é«˜æ•ˆç‡çš„SQLã€‚æ¯”å¦‚ SELECT * FROM TABEL æ”¹ä¸º SELECT field_1, field_2, field_3 FROM TABLEã€‚","categories":[{"name":"æ ¡æ‹›ç¬”è®°","slug":"æ ¡æ‹›ç¬”è®°","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/"},{"name":"è®¡ç®—æœºåŸºç¡€","slug":"æ ¡æ‹›ç¬”è®°/è®¡ç®—æœºåŸºç¡€","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"æ ¡æ‹›","slug":"æ ¡æ‹›","permalink":"https://hwh.zone/tags/%E6%A0%A1%E6%8B%9B/"},{"name":"è®¡ç®—æœºåŸºç¡€","slug":"è®¡ç®—æœºåŸºç¡€","permalink":"https://hwh.zone/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"},{"name":"MySQL","slug":"MySQL","permalink":"https://hwh.zone/tags/MySQL/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://hwh.zone/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"}]},{"title":"æ ¡æ‹›ç¬”è®°ï¼ˆå››ï¼‰_è®¡ç®—æœºåŸºç¡€_æ“ä½œç³»ç»Ÿ","slug":"æ ¡æ‹›ç¬”è®°ï¼ˆå››ï¼‰_è®¡ç®—æœºåŸºç¡€_æ“ä½œç³»ç»Ÿ","date":"2021-11-26T12:55:27.544Z","updated":"2021-12-03T03:56:06.218Z","comments":true,"path":"p/15646/","link":"","permalink":"https://hwh.zone/p/15646/","excerpt":"","text":"æˆ‘çš„æ ¡æ‹›è®°å½•ï¼šæ ¡æ‹›ç¬”è®°ï¼ˆé›¶ï¼‰_å†™åœ¨å‰é¢ ï¼Œä»¥ä¸‹æ˜¯æ ¡æ‹›ç¬”è®°æ€»ç›®å½•ã€‚ å¤‡æ³¨ ç®—æ³•èƒ½åŠ›ï¼ˆâ€œåˆ·é¢˜â€ï¼‰ è¿™éƒ¨åˆ†å°±æ˜¯è€—æ—¶é—´å¤šç»ƒä¹ ï¼ŒLeetcode-Top100 æ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚ è¡¥å……ç»ƒä¹ ï¼šcodeTop è®¡ç®—æœºåŸºç¡€(ä¸Š)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_Javaå…¥é—¨ C++åç«¯åç»­æ›´æ–° æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é¢å¯¹å¯¹è±¡ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é›†åˆ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_å¤šçº¿ç¨‹ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é” æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_JVM è®¡ç®—æœºåŸºç¡€(ä¸‹)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆäºŒï¼‰__è®¡ç®—æœºåŸºç¡€_Linux&amp;Git æ ¡æ‹›ç¬”è®°ï¼ˆä¸‰ï¼‰__è®¡ç®—æœºåŸºç¡€_è®¡ç®—æœºç½‘ç»œ æ ¡æ‹›ç¬”è®°ï¼ˆå››ï¼‰__è®¡ç®—æœºåŸºç¡€_æ“ä½œç³»ç»Ÿ æ ¡æ‹›ç¬”è®°ï¼ˆäº”ï¼‰__è®¡ç®—æœºåŸºç¡€_MySQL æ ¡æ‹›ç¬”è®°ï¼ˆå…­ï¼‰__è®¡ç®—æœºåŸºç¡€_Redis æ ¡æ‹›ç¬”è®°ï¼ˆä¸ƒï¼‰__è®¡ç®—æœºåŸºç¡€_æ•°æ®ç»“æ„ æ ¡æ‹›ç¬”è®°ï¼ˆå…«ï¼‰__è®¡ç®—æœºåŸºç¡€_åœºæ™¯&amp;æ™ºåŠ›é¢˜ æ ¡æ‹›ç¬”è®°ï¼ˆä¹ï¼‰__è®¡ç®—æœºåŸºç¡€_ç›¸å…³è¡¥å…… é¡¹ç›®&amp;å®ä¹  ä¸»è¦æ˜¯æ€ä¹ˆå‡†å¤‡é¡¹ç›®ï¼Œåç»­æ›´æ–° å››ã€æ“åœºç³»ç»Ÿ 4.1 æ“ä½œç³»ç»ŸåŸºç¡€ 0. ï¼ˆç™¾åº¦å®‰å…¨ä¸€é¢ï¼‰ å†¯è¯ºä¾æ›¼ç»“æ„æœ‰å“ªå‡ ä¸ªæ¨¡å—ï¼Ÿåˆ†åˆ«å¯¹åº”ç°ä»£è®¡ç®—æœºçš„å“ªå‡ ä¸ªéƒ¨åˆ†ï¼Ÿ å­˜å‚¨å™¨ï¼šå†…å­˜ æ§åˆ¶å™¨ï¼šå—æ¡¥åŒ—æ¡¥ è¿ç®—å™¨ï¼šCPU è¾“å…¥è®¾å¤‡ï¼šé”®ç›˜ è¾“å‡ºè®¾å¤‡ï¼šæ˜¾ç¤ºå™¨ã€ç½‘å¡ 1. ä»€ä¹ˆæ˜¯æ“ä½œç³»ç»Ÿï¼Ÿ æ“ä½œç³»ç»Ÿï¼ˆOperating Systemï¼Œç®€ç§° OSï¼‰æ˜¯ç®¡ç†è®¡ç®—æœºç¡¬ä»¶ä¸è½¯ä»¶èµ„æºçš„ç¨‹åºï¼Œæ˜¯è®¡ç®—æœºç³»ç»Ÿçš„å†…æ ¸ä¸åŸºâ½¯ï¼› æ“ä½œç³»ç»Ÿæœ¬è´¨ä¸Šæ˜¯è¿è¡Œåœ¨è®¡ç®—æœºä¸Šçš„è½¯ä»¶ç¨‹åº ï¼› æ“ä½œç³»ç»Ÿä¸ºç”¨æˆ·æä¾›â¼€ä¸ªä¸ç³»ç»Ÿäº¤äº’çš„æ“ä½œç•Œé¢ ï¼› æ“ä½œç³»ç»Ÿåˆ†å†…æ ¸ä¸å¤–å£³ï¼ˆæˆ‘ä»¬å¯ä»¥æŠŠå¤–å£³ç†è§£æˆå›´ç»•ç€å†…æ ¸çš„åº”ç”¨ç¨‹åºï¼Œè€Œå†…æ ¸å°±æ˜¯èƒ½æ“ä½œç¡¬ä»¶çš„ç¨‹åºï¼‰ã€‚ 2. ä»€ä¹ˆæ˜¯ç³»ç»Ÿè°ƒç”¨å‘¢ï¼Ÿ èƒ½ä¸èƒ½è¯¦ç»†ä»‹ç»â¼€ä¸‹ï¼Ÿ æ ¹æ®è¿›ç¨‹è®¿é—®èµ„æºçš„ç‰¹ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿›ç¨‹åœ¨ç³»ç»Ÿä¸Šçš„è¿è¡Œåˆ†ä¸ºä¸¤ä¸ªçº§åˆ«ï¼š ç”¨æˆ·æ€(user mode) : ç”¨æˆ·æ€è¿è¡Œçš„è¿›ç¨‹æˆ–å¯ä»¥ç›´æ¥è¯»å–ç”¨æˆ·ç¨‹åºçš„æ•°æ®ã€‚ ç³»ç»Ÿæ€(kernel mode)ï¼šå¯ä»¥ç®€å•çš„ç†è§£ç³»ç»Ÿæ€è¿è¡Œçš„è¿›ç¨‹æˆ–ç¨‹åºâ¼ä¹å¯ä»¥è®¿é—®è®¡ç®—æœºçš„ä»»ä½•èµ„æºï¼Œä¸å—é™åˆ¶ã€‚ æˆ‘ä»¬è¿è¡Œçš„ç¨‹åºåŸºæœ¬éƒ½æ˜¯è¿è¡Œåœ¨ç”¨æˆ·æ€ï¼Œå¦‚æœæˆ‘ä»¬è°ƒç”¨æ“ä½œç³»ç»Ÿæä¾›çš„ç³»ç»Ÿæ€çº§åˆ«çš„å­åŠŸèƒ½å’‹åŠå‘¢ï¼Ÿé‚£å°±éœ€è¦ç³»ç»Ÿè°ƒç”¨äº†ï¼ è¿™äº›ç³»ç»Ÿè°ƒç”¨æŒ‰åŠŸèƒ½å¤§è‡´å¯åˆ†ä¸ºå¦‚ä¸‹â¼ç±»ï¼š è®¾å¤‡ç®¡ç†ã€‚å®Œæˆè®¾å¤‡çš„è¯·æ±‚æˆ–é‡Šæ”¾ï¼Œä»¥åŠè®¾å¤‡å¯åŠ¨ç­‰åŠŸèƒ½ã€‚ â½‚ä»¶ç®¡ç†ã€‚å®Œæˆâ½‚ä»¶çš„è¯»ã€å†™ã€åˆ›å»ºåŠåˆ é™¤ç­‰åŠŸèƒ½ã€‚ è¿›ç¨‹æ§åˆ¶ã€‚å®Œæˆè¿›ç¨‹çš„åˆ›å»ºã€æ’¤é”€ã€é˜»å¡åŠå”¤é†’ç­‰åŠŸèƒ½ã€‚ è¿›ç¨‹é€šä¿¡ã€‚å®Œæˆè¿›ç¨‹ä¹‹é—´çš„æ¶ˆæ¯ä¼ é€’æˆ–ä¿¡å·ä¼ é€’ç­‰åŠŸèƒ½ã€‚ å†…å­˜ç®¡ç†ã€‚å®Œæˆå†…å­˜çš„åˆ†é…ã€å›æ”¶ä»¥åŠè·å–ä½œä¸šå ç”¨å†…å­˜åŒºå¤§å°åŠåœ°å€ç­‰åŠŸèƒ½ã€‚ 3. CentOS å’Œ Linuxçš„å…³ç³»ï¼Ÿ Linuxæ„æ€è¾ƒå¹¿å¹¿ä¹‰çš„èŒƒå›´ï¼Œå¤šæŒ‡æ˜¯Linuxå†…æ ¸ã€‚CentOSæ˜¯RedHatçš„ä¸€ä¸ªåˆ†æ”¯ï¼ŒRedHatæ˜¯Linuxçš„ä¸€ä¸ªå‘è¡Œç‰ˆæœ¬ï¼ŒRedHatä¸CentOSçš„åŒºåˆ«åœ¨äºï¼ŒRedHatæ”¶è´¹ï¼ŒCentOSå…è´¹ã€‚ 4. ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ï¼Œä¼˜ç¼ºç‚¹ï¼Ÿé›†ç¾¤ï¼Ÿ åˆ†å¸ƒå¼ æ ¹æ®ä¸šåŠ¡éœ€æ±‚è¿›è¡Œæ‹†åˆ†æˆNä¸ªå­ç³»ç»Ÿï¼Œå¤šä¸ªå­ç³»ç»Ÿç›¸äº’åä½œæ‰èƒ½å®Œæˆä¸šåŠ¡æµç¨‹å­ç³»ç»Ÿä¹‹é—´é€šè®¯ä½¿ç”¨RPCè¿œç¨‹é€šè®¯æŠ€æœ¯ã€‚ é›†ç¾¤ åŒä¸€ä¸ªå·¥ç¨‹éƒ¨ç½²åœ¨å¤šä¸ªä¸åŒçš„æœåŠ¡å™¨ä¸Šã€‚ åˆ†å¸ƒå¼ä¼˜ç‚¹ 1.æŠŠæ¨¡å—æ‹†åˆ†ï¼Œä½¿ç”¨æ¥å£é€šä¿¡ï¼Œé™ä½æ¨¡å—ä¹‹é—´çš„è€¦åˆåº¦ã€‚ 2.æŠŠé¡¹ç›®æ‹†åˆ†æˆè‹¥å¹²ä¸ªå­é¡¹ç›®ï¼Œä¸åŒçš„å›¢é˜Ÿè´Ÿè´£ä¸åŒçš„å­é¡¹ç›®ã€‚ 3.å¢åŠ åŠŸèƒ½æ—¶åªéœ€è¦å†å¢åŠ ä¸€ä¸ªå­é¡¹ç›®ï¼Œè°ƒç”¨å…¶å®ƒç³»ç»Ÿçš„æ¥å£å°±å¯ä»¥ã€‚ 4.å¯ä»¥çµæ´»çš„è¿›è¡Œåˆ†å¸ƒå¼éƒ¨ç½²ã€‚ åˆ†å¸ƒå¼ç¼ºç‚¹ 1.ç³»ç»Ÿä¹‹é—´äº¤äº’éœ€è¦ä½¿ç”¨è¿œç¨‹é€šä¿¡ï¼Œæ¥å£å¼€å‘å¢åŠ å·¥ä½œé‡ã€‚ 2.å„ä¸ªæ¨¡å—æœ‰ä¸€äº›é€šç”¨çš„ä¸šåŠ¡é€»è¾‘æ— æ³•å…±ç”¨ã€‚ 5. åœ¨Linux/windowsæ ˆç©ºé—´çš„å¤§å°ï¼Ÿ Linuxç¯å¢ƒä¸‹ç”±æ“ä½œç³»ç»Ÿå†³å®šï¼Œä¸€èˆ¬æ˜¯8KB ï¼Œ é€šè¿‡ulimitå‘½ä»¤æŸ¥çœ‹ä»¥åŠä¿®æ”¹ åœ¨Linuxä¸‹é€šè¿‡å¦‚ä¸‹å‘½ä»¤å¯æŸ¥çœ‹å’Œè®¾ç½®æ ˆçš„å¤§å°ï¼š 12$ ulimit -a # æ˜¾ç¤ºå½“å‰æ ˆçš„å¤§å° ï¼ˆulimitä¸ºç³»ç»Ÿå‘½ä»¤ï¼Œéç¼–è¯‘å™¨å‘½ä»¤ï¼‰ $ ulimit -s 32768 # è®¾ç½®å½“å‰æ ˆçš„å¤§å°ä¸º32MCopy to clipboardErrorCopied Windowsç¯å¢ƒä¸‹ç”±ç¼–è¯‘å™¨å†³å®šï¼ŒVC++6.0ä¸€èˆ¬æ˜¯1M \\ Windowså¹³å°ä¸‹æ ˆçš„å¤§å°æ˜¯è¢«è®°å½•åœ¨å¯æ‰§è¡Œæ–‡ä»¶ä¸­çš„ï¼ˆç”±ç¼–è¯‘å™¨æ¥è®¾ç½®)ï¼Œå³ï¼šwindowsä¸‹å¯ä»¥ç”±ç¼–è¯‘å™¨å†³å®šæ ˆå¤§å°ï¼Œè€Œåœ¨Linuxä¸‹æ˜¯ç”±ç³»ç»Ÿç¯å¢ƒå˜é‡æ¥æ§åˆ¶æ ˆçš„å¤§å°çš„ã€‚ 6. ASCIIã€Unicodeå’ŒUTF-8ç¼–ç çš„åŒºåˆ«ï¼Ÿ ASCII : ASCII åªæœ‰127ä¸ªå­—ç¬¦ï¼Œè¡¨ç¤ºè‹±æ–‡å­—æ¯çš„å¤§å°å†™ã€æ•°å­—å’Œä¸€äº›ç¬¦å· ï¼› å¸¸ç”¨ä¸­æ–‡éœ€è¦ä¸¤ä¸ªå­—èŠ‚ï¼Œä¸”ä¸èƒ½å’ŒASCIIå†²çªï¼Œä¸­å›½å®šåˆ¶äº†GB2312ç¼–ç æ ¼å¼ã€‚ Unicodeï¼š Unicodeå°±æ˜¯å°†ä¸åŒè¯­è¨€ç»Ÿä¸€åˆ°ä¸€å¥—ç¼–ç æ ¼å¼ä¸­ï¼Œé€šå¸¸ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œè€ŒASCIIæ˜¯ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ ï¼› å¦‚æœä½ ç¼–è¯‘çš„æ–‡æœ¬æ˜¯å…¨è‹±æ–‡çš„ï¼Œç”¨Unicodeç¼–ç æ¯”ASCIIç¼–ç éœ€è¦å¤šä¸€å€çš„å­˜å‚¨ç©ºé—´ï¼Œåœ¨å­˜å‚¨å’Œä¼ è¾“ä¸Šå°±ååˆ†ä¸åˆ’ç®—ã€‚ UTF-8 : æŠŠUnicodeç¼–ç è½¬åŒ–ä¸º â€œå¯å˜é•¿ç¼–ç â€ UTF-8ç¼–ç ï¼ŒUTF-8ç¼–ç å°†Unicodeå­—ç¬¦æŒ‰æ•°å­—å¤§å°ç¼–ç ä¸º1-6ä¸ªå­—èŠ‚ï¼Œè‹±æ–‡å­—æ¯è¢«ç¼–ç æˆ1ä¸ªå­—èŠ‚ï¼Œå¸¸ç”¨æ±‰å­—è¢«ç¼–ç æˆ2ä¸ªå­—èŠ‚ã€‚ 6.1 ä¸‰è€…åŒºåˆ«å’Œè”ç³» åœ¨è®¡ç®—æœºå†…å­˜ä¸­ï¼Œç»Ÿä¸€ä½¿ç”¨Unicodeç¼–ç  ï¼› å½“éœ€è¦ä¿å­˜åˆ°ç¡¬ç›˜æˆ–è€…éœ€è¦ä¼ è¾“çš„æ—¶å€™ï¼Œå°±è½¬æ¢ä¸ºUTF-8ç¼–ç  ä¸¾ä¾‹è¯´æ˜ï¼š ä¾‹1 ï¼šè®°äº‹æœ¬ç¼–è¾‘ï¼ˆå†…å­˜ï¼‰â†’ä¿å­˜ï¼ˆç£ç›˜ï¼‰ã€‚ ç”¨è®°äº‹æœ¬ç¼–è¾‘çš„æ—¶å€™ï¼Œä»æ–‡ä»¶è¯»å–çš„UTF-8å­—ç¬¦è¢«è½¬æ¢ä¸ºUnicodeå­—ç¬¦åˆ°å†…å­˜é‡Œï¼Œç¼–è¾‘å®Œæˆåï¼Œä¿å­˜çš„æ—¶å€™å†æŠŠUnicodeè½¬æ¢ä¸ºUTF-8ä¿å­˜åˆ°æ–‡ä»¶ã€‚ ä¾‹2ï¼šç½‘ç»œä¼ è¾“æœåŠ¡å™¨â†’æµè§ˆå™¨ã€‚ æµè§ˆç½‘é¡µçš„æ—¶å€™ï¼ŒæœåŠ¡å™¨ä¼šæŠŠåŠ¨æ€ç”Ÿæˆçš„Unicodeå†…å®¹è½¬æ¢ä¸ºUTF-8å†ä¼ è¾“åˆ°æµè§ˆå™¨ã€‚ 7. ä»€ä¹ˆæ˜¯å¹¶å‘å’Œå¹¶è¡Œï¼ŸåŒæ­¥å’Œå¼‚æ­¥ï¼Ÿ å¹¶å‘å’Œå¹¶è¡Œ å¹¶å‘ï¼š æ˜¯æŒ‡å®è§‚ä¸Šåœ¨ä¸€æ®µæ—¶é—´å†…èƒ½åŒæ—¶è¿è¡Œå¤šä¸ªç¨‹åºï¼› å¹¶è¡Œ ï¼šåˆ™æŒ‡åŒä¸€æ—¶åˆ»èƒ½è¿è¡Œå¤šä¸ªæŒ‡ä»¤ã€‚ åŒæ­¥å’Œå¼‚æ­¥ åŒæ­¥ï¼šå¯ä»¥ç†è§£ä¸ºåœ¨æ‰§è¡Œå®Œä¸€ä¸ªå‡½æ•°æˆ–æ–¹æ³•ä¹‹åï¼Œä¸€ç›´ç­‰å¾…ç³»ç»Ÿè¿”å›å€¼æˆ–æ¶ˆæ¯ï¼Œè¿™æ—¶ç¨‹åºæ˜¯å‡ºäºé˜»å¡çš„ï¼Œåªæœ‰æ¥æ”¶åˆ°è¿”å›çš„å€¼æˆ–æ¶ˆæ¯åæ‰å¾€ä¸‹æ‰§è¡Œå…¶ä»–çš„å‘½ä»¤ã€‚ å¼‚æ­¥ï¼šæ‰§è¡Œå®Œå‡½æ•°æˆ–æ–¹æ³•åï¼Œä¸å¿…é˜»å¡æ€§åœ°ç­‰å¾…è¿”å›å€¼æˆ–æ¶ˆæ¯ï¼Œåªéœ€è¦å‘ç³»ç»Ÿå§”æ‰˜ä¸€ä¸ªå¼‚æ­¥è¿‡ç¨‹ï¼Œé‚£ä¹ˆå½“ç³»ç»Ÿæ¥æ”¶åˆ°è¿”å›å€¼æˆ–æ¶ˆæ¯æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è§¦å‘å§”æ‰˜çš„å¼‚æ­¥è¿‡ç¨‹ï¼Œä»è€Œå®Œæˆä¸€ä¸ªå®Œæ•´çš„æµç¨‹ã€‚ 8. ä»€ä¹ˆæ˜¯å…±äº«ï¼Ÿ å…±äº«å®šä¹‰ï¼š ç³»ç»Ÿä¸­çš„èµ„æºå¯ä»¥è¢«å¤šä¸ªå¹¶å‘è¿›ç¨‹å…±åŒä½¿ç”¨ ï¼› å…±äº«æ–¹å¼ï¼šäº’æ–¥å…±äº«å’ŒåŒæ—¶å…±äº«ï¼š äº’æ–¥å…±äº«ï¼š åœ¨åŒä¸€æ—¶åˆ»åªå…è®¸ä¸€ä¸ªè¿›ç¨‹è®¿é—®ï¼Œéœ€è¦ç”¨åŒæ­¥æœºåˆ¶æ¥å®ç°äº’æ–¥è®¿é—® ï¼Œå¦‚ï¼šæ‰“å°æœºã€‚ 4.2 è¿›ç¨‹å’Œçº¿ç¨‹ 1.è¯·é—®64ä½å’Œ32ä½çš„åŒºåˆ«ï¼Ÿ è¿è¡Œèƒ½åŠ›ä¸åŒï¼š64ä½å¯ä»¥ä¸€æ¬¡æ€§å¯ä»¥å¤„ç†8ä¸ªå­—èŠ‚çš„æ•°æ®é‡ï¼Œè€Œ32ä½ä¸€æ¬¡æ€§åªå¯ä»¥å¤„ç†4ä¸ªå­—èŠ‚çš„æ•°æ®é‡ï¼Œå› æ­¤64ä½æ¯”32ä½çš„è¿è¡Œèƒ½åŠ›æé«˜äº†ä¸€å€ã€‚ å†…å­˜å¯»å€ä¸åŒï¼š64ä½æœ€å¤§å¯»å€ç©ºé—´ä¸º2çš„64æ¬¡æ–¹ï¼Œç†è®ºå€¼ç›´æ¥è¾¾åˆ°äº†16TBï¼Œè€Œ32ä½çš„æœ€å¤§å¯»å€ç©ºé—´ä¸º2çš„32æ¬¡æ–¹ï¼Œä¸º4GBï¼Œæ¢è€Œè¨€ä¹‹ï¼Œå°±æ˜¯è¯´32ä½ç³»ç»Ÿçš„å¤„ç†å™¨æœ€å¤§åªæ”¯æŒåˆ°4Gå†…å­˜ï¼Œè€Œ64ä½ç³»ç»Ÿæœ€å¤§æ”¯æŒçš„å†…å­˜é«˜è¾¾äº¿ä½æ•°ã€‚ è¿è¡Œè½¯ä»¶ä¸åŒï¼šç”±äº32ä½å’Œ64ä½CPUçš„æŒ‡ä»¤é›†æ˜¯ä¸åŒçš„ã€‚æ‰€ä»¥éœ€è¦åŒºåˆ†32ä½å’Œ64ä½ç‰ˆæœ¬çš„è½¯ä»¶ã€‚ ä¸ºäº†ä¿è¯å…¼å®¹æ€§ï¼Œ64ä½CPUä¸Šä¹Ÿèƒ½è¿è¡Œè€çš„32ä½æŒ‡ä»¤ï¼Œä½†åè¿‡æ¥32ä½ç³»ç»Ÿä¸å¯ä»¥è¿è¡Œ64ä½çš„è½¯ä»¶ã€‚ 2.ä»‹ç»ä¸€ä¸‹çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«ï¼Ÿ æ ¹æœ¬åŒºåˆ«ï¼šè¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œè€Œçº¿ç¨‹æ˜¯å¤„ç†å™¨ä»»åŠ¡è°ƒåº¦å’Œæ‰§è¡Œçš„åŸºæœ¬å•ä½ èµ„æºå¼€é”€ï¼šæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ç‹¬ç«‹çš„ä»£ç å’Œæ•°æ®ç©ºé—´ï¼ˆç¨‹åºä¸Šä¸‹æ–‡ï¼‰ï¼Œç¨‹åºä¹‹é—´çš„åˆ‡æ¢ä¼šæœ‰è¾ƒå¤§çš„å¼€é”€ï¼›çº¿ç¨‹å¯ä»¥çœ‹åšè½»é‡çº§çš„è¿›ç¨‹ï¼ŒåŒä¸€ç±»çº¿ç¨‹å…±äº«ä»£ç å’Œæ•°æ®ç©ºé—´ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„è¿è¡Œæ ˆå’Œç¨‹åºè®¡æ•°å™¨ï¼ˆPCï¼‰ï¼Œçº¿ç¨‹ä¹‹é—´åˆ‡æ¢çš„å¼€é”€å° åŒ…å«å…³ç³»ï¼šå¦‚æœä¸€ä¸ªè¿›ç¨‹å†…æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œåˆ™æ‰§è¡Œè¿‡ç¨‹ä¸æ˜¯ä¸€æ¡çº¿çš„ï¼Œè€Œæ˜¯å¤šæ¡çº¿ï¼ˆçº¿ç¨‹ï¼‰å…±åŒå®Œæˆçš„ï¼›çº¿ç¨‹æ˜¯è¿›ç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥çº¿ç¨‹ä¹Ÿè¢«ç§°ä¸ºè½»æƒè¿›ç¨‹æˆ–è€…è½»é‡çº§è¿›ç¨‹ å†…å­˜åˆ†é…ï¼šåŒä¸€è¿›ç¨‹çš„çº¿ç¨‹å…±äº«æœ¬è¿›ç¨‹çš„ã€åœ°å€ç©ºé—´å’Œèµ„æºã€‘ï¼Œè€Œè¿›ç¨‹ä¹‹é—´çš„åœ°å€ç©ºé—´å’Œèµ„æºæ˜¯ç›¸äº’ç‹¬ç«‹çš„ å½±å“å…³ç³»ï¼šä¸€ä¸ªè¿›ç¨‹å´©æºƒåï¼Œåœ¨ä¿æŠ¤æ¨¡å¼ä¸‹ä¸ä¼šå¯¹å…¶ä»–è¿›ç¨‹äº§ç”Ÿå½±å“ï¼Œä½†æ˜¯ä¸€ä¸ªçº¿ç¨‹å´©æºƒæ•´ä¸ªè¿›ç¨‹éƒ½æ­»æ‰ï¼Œæ‰€ä»¥å¤šè¿›ç¨‹è¦æ¯”å¤šçº¿ç¨‹å¥å£®ã€‚ çº¿ç¨‹æ²¡æœ‰ç‹¬ç«‹çš„åœ°å€ç©ºé—´ï¼Œå¦‚æœå´©æºƒï¼Œä¼šå‘ä¿¡å·ï¼Œå¦‚æœæ²¡æœ‰é”™è¯¯å¤„ç†çš„handlerï¼ŒOSä¸€èˆ¬ç›´æ¥æ€æ­»è¿›ç¨‹ã€‚ èƒ½å¦ç‹¬ç«‹ï¼šæ¯ä¸ªç‹¬ç«‹çš„è¿›ç¨‹æœ‰ç¨‹åºè¿è¡Œçš„å…¥å£ã€é¡ºåºæ‰§è¡Œåºåˆ—å’Œç¨‹åºå‡ºå£ã€‚ä½†æ˜¯çº¿ç¨‹ä¸èƒ½ç‹¬ç«‹æ‰§è¡Œï¼Œå¿…é¡»ä¾å­˜åœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œç”±åº”ç”¨ç¨‹åºæä¾›å¤šä¸ªçº¿ç¨‹æ‰§è¡Œæ§åˆ¶ï¼Œä¸¤è€…å‡å¯å¹¶å‘æ‰§è¡Œ 2.1 çº¿ç¨‹å’Œåç¨‹ä¹‹é—´çš„åŒºåˆ«ï¼Ÿ è¿›ç¨‹æ˜¯èµ„æºè°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œè¿è¡Œä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºä¼šåˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹ï¼Œè¿›ç¨‹å°±æ˜¯è¿è¡Œèµ·æ¥çš„å¯æ‰§è¡Œç¨‹åº ; çº¿ç¨‹æ˜¯ç¨‹åºæ‰§è¡Œçš„åŸºæœ¬å•ä½ï¼Œæ˜¯è½»é‡çº§çš„è¿›ç¨‹ã€‚æ¯ä¸ªè¿›ç¨‹ä¸­éƒ½æœ‰å”¯ä¸€çš„ä¸»çº¿ç¨‹ï¼Œå’Œå¤šä¸ªçº¿ç¨‹ï¼Œä¸”åªèƒ½æœ‰ä¸€ä¸ªï¼Œä¸»çº¿ç¨‹å’Œè¿›ç¨‹æ˜¯ç›¸äº’ä¾å­˜çš„å…³ç³»ï¼Œä¸»çº¿ç¨‹ç»“æŸè¿›ç¨‹ä¹Ÿä¼šç»“æŸï¼› åç¨‹æ˜¯ç”¨æˆ·æ€çš„è½»é‡çº§çº¿ç¨‹ï¼Œä¹Ÿæ˜¯çº¿ç¨‹å†…éƒ¨è°ƒåº¦çš„åŸºæœ¬å•ä½ ã€‚ åç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«å¦‚ä¸‹ï¼ˆè¡¥å……äº†å’Œè¿›ç¨‹çš„åŒºåˆ«ï¼Œæ–¹ä¾¿å¯¹æ¯”ï¼‰ã€‚ è¿›ç¨‹ çº¿ç¨‹ åç¨‹ å®šä¹‰ èµ„æºåˆ†é…å’Œæ‹¥æœ‰çš„åŸºæœ¬å•ä½ ç¨‹åºæ‰§è¡Œçš„åŸºæœ¬å•ä½ ç”¨æˆ·æ€çš„è½»é‡çº§çº¿ç¨‹ï¼Œçº¿ç¨‹å†…éƒ¨è°ƒåº¦çš„åŸºæœ¬å•ä½ åˆ‡æ¢æƒ…å†µ è¿›ç¨‹CPUç¯å¢ƒ(æ ˆã€å¯„å­˜å™¨ã€é¡µè¡¨å’Œæ–‡ä»¶å¥æŸ„ç­‰)çš„ä¿å­˜ä»¥åŠæ–°è°ƒåº¦çš„è¿›ç¨‹CPUç¯å¢ƒçš„è®¾ç½® ä¿å­˜å’Œè®¾ç½®ç¨‹åºè®¡æ•°å™¨ã€å°‘é‡å¯„å­˜å™¨å’Œæ ˆçš„å†…å®¹ å…ˆå°†å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆä¿å­˜ï¼Œç­‰åˆ‡æ¢å›æ¥çš„æ—¶å€™å†è¿›è¡Œæ¢å¤ åˆ‡æ¢è€… æ“ä½œç³»ç»Ÿ æ“ä½œç³»ç»Ÿ ç”¨æˆ· åˆ‡æ¢è¿‡ç¨‹ ç”¨æˆ·æ€-&gt;å†…æ ¸æ€-&gt;ç”¨æˆ·æ€ ç”¨æˆ·æ€-&gt;å†…æ ¸æ€-&gt;ç”¨æˆ·æ€ ç”¨æˆ·æ€(æ²¡æœ‰é™·å…¥å†…æ ¸) è°ƒç”¨æ ˆ å†…æ ¸æ ˆ å†…æ ¸æ ˆ ç”¨æˆ·æ ˆ æ‹¥æœ‰èµ„æº CPUèµ„æºã€å†…å­˜èµ„æºã€æ–‡ä»¶èµ„æºå’Œå¥æŸ„ç­‰ ç¨‹åºè®¡æ•°å™¨ã€å¯„å­˜å™¨ã€æ ˆå’ŒçŠ¶æ€å­— æ‹¥æœ‰è‡ªå·±çš„å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆ å¹¶å‘æ€§ ä¸åŒè¿›ç¨‹ä¹‹é—´åˆ‡æ¢å®ç°å¹¶å‘ï¼Œå„è‡ªå æœ‰CPUå®ç°å¹¶è¡Œ ä¸€ä¸ªè¿›ç¨‹å†…éƒ¨çš„å¤šä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œ åŒä¸€æ—¶é—´åªèƒ½æ‰§è¡Œä¸€ä¸ªåç¨‹ï¼Œè€Œå…¶ä»–åç¨‹å¤„äºä¼‘çœ çŠ¶æ€ï¼Œé€‚åˆå¯¹ä»»åŠ¡è¿›è¡Œåˆ†æ—¶å¤„ç† ç³»ç»Ÿå¼€é”€ åˆ‡æ¢è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œåˆ‡æ¢å†…æ ¸æ ˆå’Œç¡¬ä»¶ä¸Šä¸‹æ–‡ï¼ŒCPUé«˜é€Ÿç¼“å­˜å¤±æ•ˆã€é¡µè¡¨åˆ‡æ¢ï¼Œå¼€é”€å¾ˆå¤§ åˆ‡æ¢æ—¶åªéœ€ä¿å­˜å’Œè®¾ç½®å°‘é‡å¯„å­˜å™¨å†…å®¹ï¼Œå› æ­¤å¼€é”€å¾ˆå° ç›´æ¥æ“ä½œæ ˆåˆ™åŸºæœ¬æ²¡æœ‰å†…æ ¸åˆ‡æ¢çš„å¼€é”€ï¼Œå¯ä»¥ä¸åŠ é”çš„è®¿é—®å…¨å±€å˜é‡ï¼Œæ‰€ä»¥ä¸Šä¸‹æ–‡çš„åˆ‡æ¢éå¸¸å¿« é€šä¿¡æ–¹é¢ è¿›ç¨‹é—´é€šä¿¡éœ€è¦å€ŸåŠ©æ“ä½œç³»ç»Ÿ çº¿ç¨‹é—´å¯ä»¥ç›´æ¥è¯»å†™è¿›ç¨‹æ•°æ®æ®µ(å¦‚å…¨å±€å˜é‡)æ¥è¿›è¡Œé€šä¿¡ å…±äº«å†…å­˜ã€æ¶ˆæ¯é˜Ÿåˆ— 2.2 ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åˆ›å»ºå¤šå°‘ä¸ªçº¿ç¨‹ï¼Œå’Œä»€ä¹ˆæœ‰å…³ï¼Ÿ ä¸€ä¸ªè¿›ç¨‹å¯ç”¨è™šæ‹Ÿç©ºé—´æ˜¯ï¼ˆC++ï¼‰2Gï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œï¼ˆå‡è®¾ï¼‰çº¿ç¨‹çš„æ ˆçš„å¤§å°æ˜¯1MBï¼ˆLinuxæ˜¯8kbï¼‰ï¼Œåˆ™ç†è®ºä¸Šæœ€å¤šåªèƒ½åˆ›å»º2048ä¸ªçº¿ç¨‹ã€‚å¦‚æœè¦åˆ›å»ºå¤šäº2048çš„è¯ï¼Œå¿…é¡»ä¿®æ”¹ç¼–è¯‘å™¨çš„è®¾ç½®ã€‚ 2.3 è¿›ç¨‹ä¹‹é—´çš„åŒæ­¥æ–¹å¼ï¼Ÿï¼ˆåŒºåˆ†é€šä¿¡æ–¹å¼ï¼‰ ä¸´ç•ŒåŒºã€‚ å¯¹ä¸´ç•Œèµ„æºè¿›è¡Œè®¿é—®çš„é‚£æ®µä»£ç ç§°ä¸ºä¸´ç•ŒåŒºã€‚ ä¸ºäº†äº’æ–¥è®¿é—®ä¸´ç•Œèµ„æºï¼Œæ¯ä¸ªè¿›ç¨‹åœ¨è¿›å…¥ä¸´ç•ŒåŒºä¹‹å‰ï¼Œéœ€è¦å…ˆè¿›è¡Œæ£€æŸ¥ã€‚ åŒæ­¥å’Œäº’æ–¥ã€‚ åŒæ­¥ï¼šå¤šä¸ªè¿›ç¨‹å› ä¸ºåˆä½œäº§ç”Ÿçš„ç›´æ¥åˆ¶çº¦å…³ç³»ï¼Œä½¿å¾—è¿›ç¨‹æœ‰ä¸€å®šçš„å…ˆåæ‰§è¡Œå…³ç³»ã€‚ äº’æ–¥ï¼šå¤šä¸ªè¿›ç¨‹åœ¨åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªè¿›ç¨‹èƒ½è¿›å…¥ä¸´ç•ŒåŒºã€‚ ä¿¡å·é‡ã€‚ å¸¸è§çš„ P å’Œ V æ“ä½œã€‚ ç‰¹åˆ«çš„ï¼Œå¦‚æœä¿¡å·é‡çš„å–å€¼åªèƒ½ä¸º 0 æˆ–è€… 1ï¼Œé‚£ä¹ˆå°±æˆä¸ºäº†äº’æ–¥é‡ï¼ˆMutexï¼‰ ï¼Œ0 è¡¨ç¤ºä¸´ç•ŒåŒºå·²ç»åŠ é”ï¼Œ1 è¡¨ç¤ºä¸´ç•ŒåŒºè§£é”ã€‚ æ¡ä»¶å˜é‡ã€‚ ä½¿ç”¨ä¿¡å·é‡æœºåˆ¶å®ç°çš„ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜éœ€è¦å®¢æˆ·ç«¯ä»£ç åšå¾ˆå¤šæ§åˆ¶ï¼Œè€Œç®¡ç¨‹æŠŠæ§åˆ¶çš„ä»£ç ç‹¬ç«‹å‡ºæ¥ï¼Œä¸ä»…ä¸å®¹æ˜“å‡ºé”™ï¼Œä¹Ÿä½¿å¾—å®¢æˆ·ç«¯ä»£ç è°ƒç”¨æ›´å®¹æ˜“ã€‚ ç®¡ç¨‹å¼•å…¥äº†æ¡ä»¶å˜é‡ ä»¥åŠç›¸å…³çš„æ“ä½œï¼šwait() å’Œ signal() æ¥å®ç°åŒæ­¥æ“ä½œã€‚å¯¹æ¡ä»¶å˜é‡æ‰§è¡Œ wait() æ“ä½œä¼šå¯¼è‡´è°ƒç”¨è¿›ç¨‹é˜»å¡ï¼ŒæŠŠç®¡ç¨‹è®©å‡ºæ¥ç»™å¦ä¸€ä¸ªè¿›ç¨‹æŒæœ‰ã€‚signal() æ“ä½œç”¨äºå”¤é†’è¢«é˜»å¡çš„è¿›ç¨‹ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142// ç®¡ç¨‹ï¼šè§£å†³ç”Ÿäº§è€…ã€æ¶ˆè´¹è€…é—®é¢˜monitor ProducerConsumer condition full, empty; integer count := 0; condition c; procedure insert(item: integer); begin if count = N then wait(full); insert_item(item); count := count + 1; if count = 1 then signal(empty); end; function remove: integer; begin if count = 0 then wait(empty); remove = remove_item; count := count - 1; if count = N -1 then signal(full); end;end monitor;// ç”Ÿäº§è€…å®¢æˆ·ç«¯procedure producerbegin while true do begin item = produce_item; ProducerConsumer.insert(item); endend;// æ¶ˆè´¹è€…å®¢æˆ·ç«¯procedure consumerbegin while true do begin item = ProducerConsumer.remove; consume_item(item); endend; 3.è¯·é—®ã€è¿›ç¨‹ã€‘ä¹‹é—´å¦‚ä½•è¿›è¡Œé€šä¿¡ï¼Ÿ å¯ä»¥åˆ†ä¸ºå¦‚ä¸‹ä¸¤ä¸ªæ–¹é¢ï¼š æœ¬åœ°è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡æ–¹å¼ è¿œç¨‹è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡æ–¹å¼ 1. æœ¬åœ°è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡æ–¹å¼ï¼ˆæ²¡æœ‰åŒæ­¥äº’æ–¥ï¼ï¼ï¼‰ æ— åç®¡é“ ï¼šåŠåŒå·¥é€šä¿¡æ–¹å¼ï¼Œæ•°æ®(æ¶ˆæ¯)å•å‘æµåŠ¨ï¼Œåªèƒ½æ˜¯å­—èŠ‚æµæ ¼å¼çš„æ¶ˆæ¯ã€‚ ä¼˜ç‚¹ï¼šç®€å•æ–¹ä¾¿ ç¼ºç‚¹ï¼šå•å‘é€šä¿¡ã€åªèƒ½ç”¨äºå…·æœ‰äº²ç¼˜å…³ç³»ï¼ˆä¸€èˆ¬æŒ‡çˆ¶å­ï¼‰çš„è¿›ç¨‹ä¹‹é—´ã€ç¼“å†²åŒºæœ‰é™ æœ‰åç®¡é“ï¼šåŠåŒå·¥é€šä¿¡æ–¹å¼ï¼Œæ•°æ®ä¹Ÿç§°ä¸ºå‘½åç®¡é“ï¼šæ˜¯ä¸€ç§æ–‡ä»¶ç±»å‹ï¼Œä»¥ä¸€ç§ç‰¹æ®Šè®¾å¤‡æ–‡ä»¶å½¢å¼å­˜åœ¨äºæ–‡ä»¶ç³»ç»Ÿä¸­ã€‚ ä¼˜ç‚¹ï¼šå¯ä»¥å®ç°ä»»æ„å…³ç³»çš„è¿›ç¨‹é—´çš„é€šä¿¡ï¼ˆæ— æ³•åŒæ­¥ï¼‰ ç¼ºç‚¹ï¼š é•¿æœŸå­˜äºç³»ç»Ÿä¸­ï¼Œä½¿ç”¨ä¸å½“å®¹æ˜“å‡ºé”™ã€ç¼“å†²åŒºæœ‰é™ æ¶ˆæ¯é˜Ÿåˆ—ï¼šæ¶ˆæ¯é˜Ÿåˆ—æ˜¯æ¶ˆæ¯çš„é“¾è¡¨,å­˜æ”¾åœ¨å†…æ ¸ä¸­å¹¶ç”±æ¶ˆæ¯é˜Ÿåˆ—æ ‡è¯†ç¬¦æ ‡è¯†ã€‚æ¶ˆæ¯é˜Ÿåˆ—å…‹æœäº†ä¿¡å·ä¼ é€’ä¿¡æ¯å°‘,ç®¡é“åªèƒ½æ‰¿è½½æ— æ ¼å¼å­—èŠ‚æµä»¥åŠç¼“å†²åŒºå¤§å°å—é™ç­‰ç‰¹ç‚¹ã€‚ ä¼˜ç‚¹ï¼šå¯ä»¥å®ç°ä»»æ„è¿›ç¨‹é—´çš„é€šä¿¡ï¼Œå¹¶é€šè¿‡ç³»ç»Ÿè°ƒç”¨å‡½æ•°æ¥å®ç°æ¶ˆæ¯å‘é€å’Œæ¥æ”¶ä¹‹é—´çš„åŒæ­¥ï¼Œæ— éœ€è€ƒè™‘åŒæ­¥é—®é¢˜ ç¼ºç‚¹ï¼šä¿¡æ¯çš„å¤åˆ¶éœ€è¦é¢å¤–æ¶ˆè€—CPUçš„æ—¶é—´ï¼Œä¸é€‚å®œäºä¿¡æ¯é‡å¤§æˆ–æ“ä½œé¢‘ç¹çš„åœºåˆ å…±äº«å†…å­˜ ç›´æ¥å¯¹å†…å­˜å­˜å–ï¼Œé€šä¿¡å¿«ï¼Œä½†æ˜¯å¤šä¸ªè¿›ç¨‹å¯ä»¥åŒæ—¶æ“ä½œï¼Œéœ€è¦ç”¨ä¿¡å·é‡è¿›è¡ŒåŒæ­¥ã€‚ ä¿¡å·é‡ ä¿¡å·æ˜¯ä¸€ç§æ¯”è¾ƒå¤æ‚çš„é€šä¿¡æ–¹å¼ï¼Œç”¨äºé€šçŸ¥æ¥æ”¶è¿›ç¨‹æŸä¸ªäº‹ä»¶å·²ç»å‘ç”Ÿã€‚ ä¼˜ç‚¹ï¼šå¯ä»¥åŒæ­¥è¿›ç¨‹ï¼› ç¼ºç‚¹ï¼šä¿¡å·é‡æœ‰é™ æ³¨è§£ï¼šPæ“ä½œå°±æ˜¯å¯¹Så‡ä¸€ï¼ŒVæ“ä½œå°±æ˜¯å¯¹SåŠ ä¸€ åŒæ­¥ï¼šS = 0ï¼Œè¿›ç¨‹Aæ‰§è¡Œå®Œè¿›è¡ŒVæ“ä½œï¼Œè¿›ç¨‹Bæ‰§è¡Œå‰æ‰§è¡ŒPæ“ä½œï¼Œè¿™æ ·Bå°±å¯ä»¥ç­‰Aæ‰§è¡Œå®Œå†æ‰§è¡Œï¼› äº’æ–¥ï¼šS = 1ï¼Œè¿›ç¨‹æ‰§è¡Œå‰è¿›è¡ŒPæ“ä½œï¼Œæ‰§è¡Œåè¿›è¡ŒVæ“ä½œã€‚ 2.è¿œç¨‹è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡æ–¹å¼ é¦–è¦è§£å†³çš„é—®é¢˜æ˜¯å¦‚ä½•å”¯ä¸€æ ‡è¯†ä¸€ä¸ªè¿›ç¨‹ï¼Ÿæœ¬åœ°ä¸Šé‡‡ç”¨PIDå³å¯ï¼Œä½†æ˜¯ç½‘ç»œä¸­ TCP/IPäº”å±‚ç½‘ç»œæ¨¡å‹ä¸­ä¼ è¾“å±‚çš„ â€œå¥—æ¥å­—ï¼šIP+ç«¯å£â€ å¥—æ¥å­—äº¤äº’ ä¼˜ç‚¹ï¼š1ï¼‰ä¼ è¾“æ•°æ®ä¸ºå­—èŠ‚çº§ï¼Œä¼ è¾“æ•°æ®å¯è‡ªå®šä¹‰ï¼Œæ•°æ®é‡å°æ•ˆç‡é«˜ï¼›2ï¼‰ä¼ è¾“æ•°æ®æ—¶é—´çŸ­ï¼Œæ€§èƒ½é«˜ï¼›3) é€‚åˆäºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¹‹é—´ä¿¡æ¯å®æ—¶äº¤äº’ï¼›4) å¯ä»¥åŠ å¯†,æ•°æ®å®‰å…¨æ€§å¼º ç¼ºç‚¹ï¼š1) éœ€å¯¹ä¼ è¾“çš„æ•°æ®è¿›è¡Œè§£æï¼Œè½¬åŒ–æˆåº”ç”¨çº§çš„æ•°æ®ã€‚ è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰ 4. è¯·é—®ã€çº¿ç¨‹ã€‘é—´åŒæ­¥æ–¹å¼ï¼ˆé€šä¿¡æ–¹å¼ï¼‰ï¼Ÿ ã€1. Linuxä¸‹çº¿ç¨‹é€šçŸ¥æ–¹å¼ã€‘ äº’æ–¥é‡(Mutex)ï¼šé‡‡ç”¨äº’æ–¥å¯¹è±¡æœºåˆ¶ï¼Œåªæœ‰æ‹¥æœ‰äº’æ–¥å¯¹è±¡çš„çº¿ç¨‹æ‰æœ‰è®¿é—®å…¬å…±èµ„æºçš„æƒé™ã€‚å› ä¸ºäº’æ–¥å¯¹è±¡åªæœ‰â¼€ä¸ªï¼Œæ‰€ä»¥å¯ä»¥ä¿è¯å…¬å…±èµ„æºä¸ä¼šè¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ã€‚ â½å¦‚ Java ä¸­çš„synchronized å…³é”®è¯å’Œå„ç§ Locké” éƒ½æ˜¯è¿™ç§æœºåˆ¶ã€‚ ä¿¡å·é‡(Semphares) ï¼šå®ƒå…è®¸åŒâ¼€æ—¶åˆ»å¤šä¸ªçº¿ç¨‹è®¿é—®åŒâ¼€èµ„æºï¼Œä½†æ˜¯éœ€è¦æ§åˆ¶åŒâ¼€æ—¶åˆ»è®¿é—®æ­¤èµ„æºçš„æœ€å¤§çº¿ç¨‹æ•°é‡ æ¡ä»¶å˜é‡ : é€šè¿‡é€šçŸ¥æ“ä½œçš„æ–¹å¼æ¥ä¿æŒå¤šçº¿ç¨‹åŒæ­¥ï¼Œè¿˜å¯ä»¥æ–¹ä¾¿çš„å®ç°å¤šçº¿ç¨‹ä¼˜å…ˆçº§ æ¯”å¦‚Wait/Notify ã€2. Windowsä¸‹çº¿ç¨‹é€šçŸ¥æ–¹å¼ã€‘ å…¨å±€å˜é‡ï¼šéœ€è¦æœ‰å¤šä¸ªçº¿ç¨‹æ¥è®¿é—®ä¸€ä¸ªå…¨å±€å˜é‡æ—¶ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šåœ¨è¿™ä¸ªå…¨å±€å˜é‡å‰åŠ ä¸Švolatileå£°æ˜ï¼Œä»¥é˜²ç¼–è¯‘å™¨å¯¹æ­¤å˜é‡è¿›è¡Œä¼˜åŒ– ï¼› CEventå¯¹è±¡ï¼šCEventä¸ºMFCä¸­çš„ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡å¯¹CEventçš„è§¦å‘çŠ¶æ€è¿›è¡Œæ”¹å˜ï¼Œä»è€Œå®ç°çº¿ç¨‹é—´çš„é€šä¿¡å’ŒåŒæ­¥ï¼Œè¿™ä¸ªä¸»è¦æ˜¯å®ç°çº¿ç¨‹ç›´æ¥åŒæ­¥çš„ä¸€ç§æ–¹æ³•ï¼› Messageæ¶ˆæ¯æœºåˆ¶ï¼šå¸¸ç”¨çš„Messageé€šä¿¡çš„æ¥å£ä¸»è¦æœ‰ä¸¤ä¸ªï¼šPostMessageå’ŒPostThreadMessageï¼ŒPostMessageä¸ºçº¿ç¨‹å‘ä¸»çª—å£å‘é€æ¶ˆæ¯ã€‚è€ŒPostThreadMessageæ˜¯ä»»æ„ä¸¤ä¸ªçº¿ç¨‹ä¹‹é—´çš„é€šä¿¡æ¥å£ã€‚ 5.ä»€ä¹ˆæ—¶å€™ç”¨å¤šçº¿ç¨‹ / å¤šè¿›ç¨‹ï¼Ÿ éœ€è¦é¢‘ç¹åˆ›å»ºé”€æ¯çš„ä¼˜å…ˆç”¨çº¿ç¨‹ ï¼šåˆ›å»ºå’Œé”€æ¯çš„ä»£ä»·æ˜¯å¾ˆéš¾æ‰¿å—çš„ ï¼› éœ€è¦è¿›è¡Œå¤§é‡è®¡ç®—çš„ä¼˜å…ˆä½¿ç”¨çº¿ç¨‹ ï¼šæ­¤æ—¶è€—è´¹å¾ˆå¤šCPUï¼Œåˆ‡æ¢é¢‘ç¹ï¼Œç”¨çº¿ç¨‹æ›´è½»é‡ï¼› ä»»åŠ¡é—´ç›¸å…³æ€§æ¯”è¾ƒå¼ºçš„ç”¨å¤šçº¿ç¨‹ï¼Œç›¸å…³æ€§æ¯”è¾ƒå¼±çš„ç”¨å¤šè¿›ç¨‹ã€‚å› ä¸ºçº¿ç¨‹ä¹‹é—´çš„æ•°æ®å…±äº«å’ŒåŒæ­¥æ¯”è¾ƒç®€å•ï¼› è€ƒè™‘å¤šè¿›ç¨‹ï¼š æ‰©å±•åˆ°å¤šæœºåˆ†å¸ƒçš„ç”¨å¤šè¿›ç¨‹ï¼Œå¤šæ ¸åˆ†å¸ƒçš„ç”¨å¤šçº¿ç¨‹ ï¼› å…¶å®ƒä¸€èˆ¬ç”¨å¤šçº¿ç¨‹æ¯”è¾ƒå¥½ 6.ã€çº¿ç¨‹ã€‘è°ƒåº¦ç®—æ³•ï¼Ÿ åœ¨èµ„æºä¸€å®šçš„æƒ…å†µä¸‹ï¼Œè°ƒåº¦ç®—æ³•éœ€è¦åœ¨ååé‡ï¼ˆThroughputï¼‰ã€å¹³å‡å“åº”æ—¶é—´ï¼ˆå»¶è¿Ÿï¼ŒAverage Response Timeï¼‰ã€å…¬å¹³æ€§ã€è°ƒåº¦å¼•èµ·çš„é¢å¤–å¼€é”€ï¼ˆoverheadï¼‰ç­‰å‡ ä¸ªæ–¹é¢åšæƒè¡¡ã€‚ å…ˆè¿›å…ˆå‡ºç®—æ³•ï¼ˆFIFOï¼ŒFirst-In-First-Outï¼‰ ä¼˜ç‚¹ï¼š æœ€å°‘çš„ä»»åŠ¡åˆ‡æ¢å¼€é”€ï¼ˆå› ä¸ºæ²¡æœ‰åœ¨ä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿåˆ‡æ¢ï¼Œæ•…ä»»åŠ¡åˆ‡æ¢å¼€é”€ä¸º0ï¼‰ æœ€å¤§çš„ååé‡ï¼ˆå› æ²¡æœ‰ä»»åŠ¡åˆ‡æ¢å¼€é”€ï¼Œåœ¨å…¶ä»–ä¸€å®šçš„æƒ…å†µä¸‹ï¼Œååé‡è‚¯å®šæ˜¯æœ€å¤§çš„ï¼‰ æœ€æœ´å®çš„å…¬å¹³æ€§ï¼ˆå…ˆæ¥å…ˆåšï¼‰ ç¼ºç‚¹ï¼š å¹³å‡å“åº”æ—¶é—´é«˜ï¼šè€—æ—¶åªéœ€10æ¯«ç§’çš„ä»»åŠ¡è‹¥æ°å·§åœ¨è€—æ—¶1000æ¯«ç§’çš„ä»»åŠ¡ååˆ°æ¥ï¼Œä»–åˆ™éœ€è¦1010æ¯«ç§’æ‰èƒ½æ‰§è¡Œå®Œæˆï¼Œç»å¤§éƒ¨åˆ†æ—¶é—´éƒ½èŠ±åœ¨ç­‰å¾…è¢«è°ƒåº¦ã€‚ æœ€çŸ­è€—æ—¶ä»»åŠ¡ä¼˜å…ˆç®—æ³• ä¼˜å…ˆè°ƒåº¦è€—æ—¶çŸ­çš„ä»»åŠ¡ï¼Œéœ€è¦é¢„å…ˆçŸ¥é“æ¯ä¸ªä»»åŠ¡çš„è€—æ—¶æƒ…å†µï¼Œè¿™åœ¨å®é™…æƒ…å†µä¸­æ˜¯ä¸å¤§ç°å®çš„ã€‚ ï¼ˆä¼˜ç‚¹ï¼‰å¹³å‡å“åº”æ—¶é—´è¾ƒä½ï¼šè¿™é‡Œæœ‰ä¸€ç‚¹ï¼Œå› ä¸ºå°†æ—¶é—´é•¿çš„ä»»åŠ¡æ— é™å¾€åæ¨ç§»ï¼Œå®é™…è®¡ç®—çš„å¹³å‡å“åº”æ—¶é—´çš„ä»»åŠ¡éƒ½æ˜¯æ‰§è¡Œè¾ƒå¿«çš„ä»»åŠ¡ï¼Œç»Ÿè®¡å‡ºæ¥çš„å¹³å‡å“åº”æ—¶é—´å¿…ç„¶è¾ƒä½çš„ã€‚ ï¼ˆç¼ºç‚¹ï¼‰è€—æ—¶é•¿ä»»åŠ¡é¥¥é¥¿ï¼šè€—æ—¶é•¿çš„ä»»åŠ¡è¿Ÿè¿Ÿå¾—ä¸åˆ°è°ƒåº¦ï¼Œä¸å…¬å¹³ï¼Œå®¹æ˜“å½¢æˆé¥¥é¥¿ ã€‚ ï¼ˆç¼ºç‚¹ï¼‰å¼€é”€å¤§ï¼šé¢‘ç¹çš„ä»»åŠ¡åˆ‡æ¢ï¼Œè°ƒåº¦çš„é¢å¤–å¼€é”€å¤§ã€‚ æ—¶é—´ç‰‡è½®è½¬ç®—æ³• ç»™é˜Ÿåˆ—ä¸­çš„æ¯ä¸ªä»»åŠ¡ä¸€ä¸ªæ—¶é—´ç‰‡ï¼Œç¬¬ä¸€ä¸ªä»»åŠ¡å…ˆæ‰§è¡Œï¼Œæ—¶é—´ç‰‡åˆ°äº†ä¹‹åï¼Œå°†æ­¤ä»»åŠ¡æ”¾åˆ°é˜Ÿåˆ—å°¾éƒ¨ï¼Œåˆ‡æ¢åˆ°ä¸‹ä¸ªä»»åŠ¡æ‰§è¡Œï¼Œè§£å†³æœ€çŸ­è€—æ—¶ä»»åŠ¡ä¼˜å…ˆç®—æ³•ä¸­è€—æ—¶é•¿ä»»åŠ¡é¥¥é¥¿çš„é—®é¢˜ ã€‚ ï¼ˆç‰¹ç‚¹ï¼‰æ—¶é—´ç‰‡è®¾ç½®é—®é¢˜ï¼š ç®—æ³•ä»‹äºFIFOå’ŒSJFä¹‹é—´ï¼Œè‹¥æ—¶é—´ç‰‡è¶³å¤Ÿå¤§ï¼Œåˆ™é€€åŒ–åˆ°FIFO ï¼›è‹¥åˆ†ç‰‡è¶³å¤Ÿå°ï¼ˆå‡è®¾ä¸è€ƒè™‘ä»»åŠ¡åˆ‡æ¢çš„å¼€é”€ï¼‰ï¼Œåˆ™ä»»åŠ¡çš„å®Œæˆæ—¶é—´é¡ºåºæ˜¯ä»¥è€—æ—¶ä»å°åˆ°å¤§æ’åˆ—ã€‚ ï¼ˆä¼˜ç‚¹ï¼‰å…¬å¹³è°ƒåº¦ï¼šæ¯ä¸ªä»»åŠ¡éƒ½èƒ½å¤Ÿå¾—åˆ°å…¬å¹³çš„è°ƒåº¦ ï¼ˆä¼˜ç‚¹ï¼‰ä¸ä¼šé¥¥é¥¿ï¼šè€—æ—¶çŸ­çš„ä»»åŠ¡å³ä½¿è½åœ¨è€—æ—¶é•¿çš„ä»»åŠ¡åé¢ï¼Œä¹Ÿèƒ½å¤Ÿè¾ƒå¿«çš„å¾—åˆ°è°ƒåº¦æ‰§è¡Œ ï¼ˆç¼ºç‚¹ï¼‰å¼€é”€å¤§ï¼šä»»åŠ¡åˆ‡æ¢å¼•èµ·çš„è°ƒåº¦å¼€é”€è¾ƒå¤§ï¼Œéœ€è¦å¤šæ¬¡åˆ‡æ¢ä»»åŠ¡ä¸Šä¸‹æ–‡ ï¼ˆç¼ºç‚¹ï¼‰æ—¶é—´ç‰‡ä¸å¤ªå¥½è®¾ç½® æœ€å¤§æœ€å°å…¬å¹³ç®—æ³• 7.ã€è¿›ç¨‹ã€‘è°ƒåº¦ç®—æ³•ï¼Ÿ å…ˆæ¥å…ˆæœåŠ¡è°ƒåº¦ç®—æ³• çŸ­ä½œä¸š(è¿›ç¨‹)ä¼˜å…ˆè°ƒåº¦ç®—æ³• æ—¶é—´ç‰‡è½®è½¬æ³• å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³• ä¼˜å…ˆæƒè°ƒåº¦ç®—æ³• 8. CPUä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Ÿæœ‰ä»€ä¹ˆç±»å‹ï¼Ÿçº¿ç¨‹å‘ç”Ÿåœ¨ä»€ä¹ˆåœ°æ–¹ï¼Ÿ å‚è€ƒï¼šhttps://zhuanlan.zhihu.com/p/52845869 ä»€ä¹ˆæ˜¯ CPU ä¸Šä¸‹æ–‡ ï¼Ÿ CPU å¯„å­˜å™¨å’Œç¨‹åºè®¡æ•°å™¨ å°±æ˜¯ CPU ä¸Šä¸‹æ–‡ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯ CPU åœ¨è¿è¡Œä»»ä½•ä»»åŠ¡å‰ï¼Œå¿…é¡»çš„ä¾èµ–ç¯å¢ƒã€‚ CPU å¯„å­˜å™¨ æ˜¯ CPU å†…ç½®çš„å®¹é‡å°ã€ä½†é€Ÿåº¦æå¿«çš„å†…å­˜ã€‚ ä»€ä¹ˆæ˜¯ CPU ä¸Šä¸‹æ–‡åˆ‡æ¢? é€šå¸¸æŒ‡ä»¥ä¸‹è¿‡ç¨‹ï¼š å‰ä¸€ä¸ªä»»åŠ¡çš„ CPU ä¸Šä¸‹æ–‡ï¼ˆä¹Ÿå°±æ˜¯ CPU å¯„å­˜å™¨å’Œç¨‹åºè®¡æ•°å™¨ï¼‰ä¿å­˜èµ·æ¥; ç„¶ååŠ è½½æ–°ä»»åŠ¡çš„ä¸Šä¸‹æ–‡åˆ°è¿™äº›å¯„å­˜å™¨å’Œç¨‹åºè®¡æ•°å™¨; æœ€åå†è·³è½¬åˆ°ç¨‹åºè®¡æ•°å™¨æ‰€æŒ‡çš„æ–°ä½ç½®ï¼Œè¿è¡Œæ–°ä»»åŠ¡ã€‚ CPU ä¸Šä¸‹æ–‡åˆ‡æ¢çš„ç±»å‹ï¼Ÿ æ ¹æ®ä»»åŠ¡çš„ä¸åŒï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§ç±»å‹ : è¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ - çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ - ä¸­æ–­ä¸Šä¸‹æ–‡åˆ‡æ¢ ã€‚ è¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ è¿›ç¨‹åœ¨ç”¨æˆ·ç©ºé—´è¿è¡Œæ—¶ï¼Œè¢«ç§°ä¸ºè¿›ç¨‹çš„ç”¨æˆ·æ€ï¼Œè€Œé™·å…¥å†…æ ¸ç©ºé—´çš„æ—¶å€™ï¼Œè¢«ç§°ä¸ºè¿›ç¨‹çš„å†…æ ¸æ€ã€‚ å†…æ ¸ç©ºé—´ï¼ˆRing 0ï¼‰å…·æœ‰æœ€é«˜æƒé™ï¼Œå¯ä»¥ç›´æ¥è®¿é—®æ‰€æœ‰èµ„æºï¼› ç”¨æˆ·ç©ºé—´ï¼ˆRing 3ï¼‰åªèƒ½è®¿é—®å—é™èµ„æºï¼Œä¸èƒ½ç›´æ¥è®¿é—®å†…å­˜ç­‰ç¡¬ä»¶è®¾å¤‡ï¼Œå¿…é¡»é€šè¿‡ç³»ç»Ÿè°ƒç”¨é™·å…¥åˆ°å†…æ ¸ä¸­ï¼Œæ‰èƒ½è®¿é—®è¿™äº›ç‰¹æƒèµ„æºã€‚ ä»ç”¨æˆ·æ€åˆ°å†…æ ¸æ€çš„è½¬å˜ï¼Œéœ€è¦é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ¥å®Œæˆï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å°±å‘ç”Ÿäº† CPU ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼ˆä¸¤æ¬¡ï¼Œç”¨æˆ·æ€-å†…æ ¸æ€-ç”¨æˆ·æ€ï¼‰ï¼‰ã€‚ ç³»ç»Ÿè°ƒç”¨ : æŸ¥çœ‹æ–‡ä»¶æ—¶read()ã€wirte() æ“ä½œå°±å‘ç”Ÿäº†ç³»ç»Ÿè°ƒç”¨ã€‚ ä½†æ˜¯ï¼Œç³»ç»Ÿè°ƒç”¨è¿‡ç¨‹ä¸­ï¼Œå¹¶ä¸ä¼šæ¶‰åŠåˆ°è™šæ‹Ÿå†…å­˜ç­‰è¿›ç¨‹ç”¨æˆ·æ€çš„èµ„æºï¼Œä¹Ÿä¸ä¼šåˆ‡æ¢è¿›ç¨‹ã€‚ è€Œè¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ ï¼Œæ¯”ç³»ç»Ÿè°ƒç”¨æ—¶å¤šäº†ä¸€æ­¥ï¼šåœ¨ä¿å­˜å†…æ ¸æ€èµ„æºï¼ˆå½“å‰è¿›ç¨‹çš„å†…æ ¸çŠ¶æ€å’Œ CPU å¯„å­˜å™¨ï¼‰ä¹‹å‰ï¼Œéœ€è¦å…ˆæŠŠè¯¥è¿›ç¨‹çš„ç”¨æˆ·æ€èµ„æºï¼ˆè™šæ‹Ÿå†…å­˜ã€æ ˆç­‰ï¼‰ä¿å­˜ä¸‹æ¥ã€‚ çº¿ç¨‹ä¸Šä¸‹æ–‡è°ƒç”¨ çº¿ç¨‹æ˜¯è°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œè€Œè¿›ç¨‹åˆ™æ˜¯èµ„æºæ‹¥æœ‰çš„åŸºæœ¬å•ä½ã€‚ ã€é¢è¯•é«˜é¢‘ã€‘å‘ç”Ÿçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢çš„åœºæ™¯ å‰åä¸¤ä¸ªçº¿ç¨‹å±äºä¸åŒè¿›ç¨‹ã€‚æ­¤æ—¶ï¼Œå› ä¸ºèµ„æºä¸å…±äº«ï¼Œæ‰€ä»¥åˆ‡æ¢è¿‡ç¨‹å°±è·Ÿè¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯ä¸€æ ·ã€‚ å‰åä¸¤ä¸ªçº¿ç¨‹å±äºåŒä¸€ä¸ªè¿›ç¨‹ã€‚æ­¤æ—¶ï¼Œå› ä¸ºè™šæ‹Ÿå†…å­˜æ˜¯å…±äº«çš„ï¼Œæ‰€ä»¥åœ¨åˆ‡æ¢æ—¶ï¼Œè™šæ‹Ÿå†…å­˜è¿™äº›èµ„æºå°±ä¿æŒä¸åŠ¨ï¼Œåªéœ€è¦åˆ‡æ¢çº¿ç¨‹çš„ç§æœ‰æ•°æ®ï¼ˆæ ˆã€å¯„å­˜å™¨ç­‰)ä¸å…±äº«çš„æ•°æ® ä¸­æ–­ä¸Šä¸‹æ–‡åˆ‡æ¢ 9.å¦‚ä½•æ€æ­»ä¸€ä¸ªè¿›ç¨‹ï¼Ÿè¿›ç¨‹ç»ˆæ­¢çš„æ–¹å¼ï¼Ÿ linuxå‘½ä»¤ï¼škill -9 &lt;pid&gt; æ¥å—èƒ½å¯¼è‡´è¿›ç¨‹ç»ˆæ­¢çš„ä¿¡å·ï¼šctrl+c (^C)ã€SIGINT(SIGINTä¸­æ–­è¿›ç¨‹) mainå‡½æ•°çš„è‡ªç„¶è¿”å›ï¼Œreturn è°ƒç”¨exitå‡½æ•°ï¼Œå±äºcçš„å‡½æ•°åº“ 3ã€è°ƒç”¨_exitå‡½æ•°ï¼Œå±äºç³»ç»Ÿè°ƒç”¨ è°ƒç”¨abortå‡½æ•°ï¼Œå¼‚å¸¸ç¨‹åºç»ˆæ­¢ï¼ŒåŒæ—¶å‘é€SIGABRTä¿¡å·ç»™è°ƒç”¨è¿›ç¨‹ 9.1 ç»ˆç«¯é€€å‡ºï¼Œç»ˆç«¯è¿è¡Œçš„è¿›ç¨‹ä¼šæ€ä¹ˆæ ·ï¼Ÿ ç»ˆç«¯åœ¨é€€å‡ºæ—¶ä¼šå‘é€SIGHUPç»™å¯¹åº”çš„bashè¿›ç¨‹ï¼Œ bashè¿›ç¨‹æ”¶åˆ°è¿™ä¸ªä¿¡å·åé¦–å…ˆå°†å®ƒå‘ç»™sessionä¸‹é¢çš„è¿›ç¨‹ ä¸€ä¸ªsessionå°±æ˜¯ä¸€ä¸ªshellç»ˆç«¯ä¼šè¯çª—å£ã€‚ å¦‚æœç¨‹åºæ²¡æœ‰å¯¹SIGHUPä¿¡å·åšç‰¹æ®Šå¤„ç†ï¼Œé‚£ä¹ˆè¿›ç¨‹å°±ä¼šéšç€ç»ˆç«¯å…³é—­è€Œé€€å‡º 9.2 æ€ä¹ˆè®©è¿›ç¨‹åå°è¿è¡Œï¼Ÿ å‘½ä»¤ + &amp; å³å¯ï¼Œå®é™…ä¸Šï¼Œè¿™æ ·æ˜¯å°†å‘½ä»¤æ”¾å…¥åˆ°ä¸€ä¸ªä½œä¸šé˜Ÿåˆ—ä¸­äº† ctrl + z æŒ‚èµ·è¿›ç¨‹ï¼Œä½¿ç”¨jobsæŸ¥çœ‹åºå·ï¼Œåœ¨ä½¿ç”¨bg %åºå·åå°è¿è¡Œè¿›ç¨‹ nohup + &amp;ï¼Œå°†æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯ç¼ºçœä¼šè¢«é‡å®šå‘åˆ° nohup.out æ–‡ä»¶ä¸­ï¼Œå¿½ç•¥æ‰€æœ‰æŒ‚æ–­ï¼ˆSIGHUPï¼‰ä¿¡å· setsid + å‘½ä»¤ï¼Œä½¿å…¶çˆ¶è¿›ç¨‹ç¼–ç¨‹initè¿›ç¨‹ï¼Œä¸å—HUPä¿¡å·çš„å½±å“ å°†å‘½ä»¤+ &amp;æ”¾åœ¨()æ‹¬å·ä¸­ï¼Œä¹Ÿå¯ä»¥æ˜¯è¿›ç¨‹ä¸å—HUPä¿¡å·çš„å½±å“ 10. å¤–ä¸­æ–­å’Œå¼‚å¸¸çš„åŒºåˆ«ï¼Ÿ å¤–ä¸­æ–­æ˜¯æŒ‡ç”± CPU æ‰§è¡ŒæŒ‡ä»¤ä»¥å¤–çš„äº‹ä»¶å¼•èµ·ï¼Œå¦‚ I/O å®Œæˆä¸­æ–­ï¼Œè¡¨ç¤ºè®¾å¤‡è¾“å…¥/è¾“å‡ºå¤„ç†å·²ç»å®Œæˆï¼Œå¤„ç†å™¨èƒ½å¤Ÿå‘é€ä¸‹ä¸€ä¸ªè¾“å…¥/è¾“å‡ºè¯·æ±‚ã€‚æ­¤å¤–è¿˜æœ‰æ—¶é’Ÿä¸­æ–­ã€æ§åˆ¶å°ä¸­æ–­ç­‰ã€‚ å¼‚å¸¸æ—¶ç”± CPU æ‰§è¡ŒæŒ‡ä»¤çš„å†…éƒ¨äº‹ä»¶å¼•èµ·ï¼Œå¦‚éæ³•æ“ä½œç ã€åœ°å€è¶Šç•Œã€ç®—æœ¯æº¢å‡ºç­‰ã€‚ 11. ä»€ä¹ˆæ˜¯çˆ¶è¿›ç¨‹ã€å­è¿›ç¨‹ã€è¿›ç¨‹ç»„ã€ä½œä¸šå’Œä¼šè¯ï¼Ÿ çˆ¶è¿›ç¨‹ï¼š å·²åˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ªå­è¿›ç¨‹çš„è¿›ç¨‹ ï¼› å­è¿›ç¨‹ï¼š ç”±forkåˆ›å»ºçš„æ–°è¿›ç¨‹è¢«ç§°ä¸ºå­è¿›ç¨‹ï¼ˆchild processï¼‰ï¼Œå‡½æ•°è¢«è°ƒç”¨ä¸€æ¬¡ï¼Œä½†è¿”å›ä¸¤æ¬¡ï¼› forkä¹‹åï¼Œæ“ä½œç³»ç»Ÿä¼šå¤åˆ¶ä¸€ä¸ªä¸çˆ¶è¿›ç¨‹å®Œå…¨ç›¸åŒçš„å­è¿›ç¨‹ï¼Œè™½è¯´æ˜¯çˆ¶å­å…³ç³»ï¼Œä½†æ˜¯åœ¨æ“ä½œç³»ç»Ÿçœ‹æ¥ï¼Œä»–ä»¬æ›´åƒå…„å¼Ÿå…³ç³»ï¼š ï¼ˆ1ï¼‰å®ƒä»¬å…±äº«ä»£ç ç©ºé—´ï¼Œï¼ˆ2ï¼‰æ•°æ®ç©ºé—´æ˜¯äº’ç›¸ç‹¬ç«‹çš„ï¼Œä½†å­è¿›ç¨‹æ•°æ®ç©ºé—´ä¸­çš„å†…å®¹æ˜¯çˆ¶è¿›ç¨‹çš„å®Œæ•´æ‹·è´ï¼Œï¼ˆ3ï¼‰æŒ‡ä»¤æŒ‡é’ˆä¹Ÿå®Œå…¨ç›¸åŒï¼Œï¼ˆ4ï¼‰å­è¿›ç¨‹æ‹¥æœ‰çˆ¶è¿›ç¨‹å½“å‰è¿è¡Œåˆ°çš„ä½ç½®ï¼ˆä¸¤è¿›ç¨‹çš„ç¨‹åºè®¡æ•°å™¨pcå€¼ç›¸åŒï¼‰ã€‚ é™¤äº†ï¼šforkæˆåŠŸï¼Œå­è¿›ç¨‹ä¸­forkçš„è¿”å›å€¼æ˜¯0ï¼Œçˆ¶è¿›ç¨‹ä¸­forkçš„è¿”å›å€¼æ˜¯å­è¿›ç¨‹çš„è¿›ç¨‹å·pid ã€‚ è¿›ç¨‹ç»„ï¼š è¿›ç¨‹ç»„å°±æ˜¯å¤šä¸ªè¿›ç¨‹çš„é›†åˆï¼Œå…¶ä¸­è‚¯å®šæœ‰ä¸€ä¸ªç»„é•¿ï¼Œå…¶è¿›ç¨‹PIDç­‰äºè¿›ç¨‹ç»„çš„PGID ï¼› ä½œä¸šï¼š shellåˆ†å‰åå°æ¥æ§åˆ¶çš„ä¸æ˜¯è¿›ç¨‹è€Œæ˜¯ä½œä¸šï¼ˆjobï¼‰æˆ–è€…è¿›ç¨‹ç»„ï¼ˆProcess Groupï¼‰ã€‚ ä¸€ä¸ªå‰å°ä½œä¸šå¯ä»¥ç”±å¤šä¸ªè¿›ç¨‹ç»„æˆï¼Œä¸€ä¸ªåå°ä¹Ÿå¯ä»¥ç”±å¤šä¸ªè¿›ç¨‹ç»„æˆï¼Œshellå¯ä»¥è¿è¡Œä¸€ä¸ªå‰å°ä½œä¸šå’Œä»»æ„å¤šä¸ªåå°ä½œä¸šï¼Œè¿™ç§°ä¸ºä½œä¸šæ§åˆ¶ã€‚ã€ ä¼šè¯ã€‚ ä¸€ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹ç»„çš„é›†åˆï¼Œä¸€ä¸ªä¼šè¯å¯ä»¥æœ‰ä¸€ä¸ªæ§åˆ¶ç»ˆç«¯ã€‚åœ¨xshellæˆ–è€…WinSCPä¸­æ‰“å¼€ä¸€ä¸ªçª—å£å°±æ˜¯æ–°å»ºä¸€ä¸ªä¼šè¯ã€‚ 12. ä»€ä¹ˆæ˜¯å®ˆæŠ¤è¿›ç¨‹ã€åƒµå°¸è¿›ç¨‹ã€å­¤å„¿è¿›ç¨‹ï¼Ÿ å‚è€ƒï¼šLinux ä¹‹å®ˆæŠ¤è¿›ç¨‹ã€åƒµæ­»è¿›ç¨‹ä¸å­¤å„¿è¿›ç¨‹ å®ˆæŠ¤è¿›ç¨‹ åœ¨åå°è¿è¡Œçš„ï¼Œæ²¡æœ‰æ§åˆ¶ç»ˆç«¯ä¸ä¹‹ç›¸è¿çš„è¿›ç¨‹ã€‚å®ƒç‹¬ç«‹äºæ§åˆ¶ç»ˆç«¯ï¼Œå‘¨æœŸæ€§åœ°æ‰§è¡ŒæŸç§ä»»åŠ¡ã€‚å®ƒä¸éœ€è¦ç”¨æˆ·è¾“å…¥å°±èƒ½è¿è¡Œè€Œä¸”æä¾›æŸç§æœåŠ¡ï¼Œä¸æ˜¯å¯¹æ•´ä¸ªç³»ç»Ÿå°±æ˜¯å¯¹æŸä¸ªç”¨æˆ·ç¨‹åºæä¾›æœåŠ¡ã€‚ ä¸¾ä¾‹ï¼šå¸¸è§çš„å®ˆæŠ¤è¿›ç¨‹åŒ…æ‹¬ç³»ç»Ÿæ—¥å¿—è¿›ç¨‹syslogdã€ webæœåŠ¡å™¨httpdã€é‚®ä»¶æœåŠ¡å™¨sendmailå’Œæ•°æ®åº“æœåŠ¡å™¨mysqldç­‰ã€‚ ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹çš„çˆ¶è¿›ç¨‹æ˜¯initè¿›ç¨‹ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå­¤å„¿è¿›ç¨‹ ï¼Œä¸€èˆ¬åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶å¼€å§‹è¿è¡Œï¼Œé™¤éå¼ºè¡Œç»ˆæ­¢ï¼Œå¦åˆ™ç›´åˆ°ç³»ç»Ÿå…³æœºéƒ½ä¿æŒè¿è¡Œã€‚ å­¤å„¿è¿›ç¨‹ ä¸€ä¸ªçˆ¶è¿›ç¨‹é€€å‡ºï¼Œè€Œå®ƒçš„ä¸€ä¸ªæˆ–å¤šä¸ªå­è¿›ç¨‹è¿˜åœ¨è¿è¡Œï¼Œé‚£ä¹ˆé‚£äº›å­è¿›ç¨‹å°†æˆä¸ºå­¤å„¿è¿›ç¨‹ã€‚å­¤å„¿è¿›ç¨‹å°†è¢«initè¿›ç¨‹(è¿›ç¨‹å·ä¸º1)æ‰€æ”¶å…»ï¼Œå¹¶ç”±initè¿›ç¨‹å¯¹å®ƒä»¬å®ŒæˆçŠ¶æ€æ”¶é›†å·¥ä½œã€‚ åƒµå°¸è¿›ç¨‹ ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨forkåˆ›å»ºå­è¿›ç¨‹ï¼Œå¦‚æœå­è¿›ç¨‹é€€å‡ºï¼Œè€Œçˆ¶è¿›ç¨‹å¹¶æ²¡æœ‰è°ƒç”¨waitæˆ–waitpidè·å–å­è¿›ç¨‹çš„çŠ¶æ€ä¿¡æ¯ï¼ˆå­è¿›ç¨‹å¿…é¡»ç­‰åˆ°çˆ¶è¿›ç¨‹æ•è·åˆ°äº†å­è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€æ‰çœŸæ­£ç»“æŸï¼‰ï¼Œé‚£ä¹ˆå­è¿›ç¨‹çš„è¿›ç¨‹æè¿°ç¬¦ä»ç„¶ä¿å­˜åœ¨ç³»ç»Ÿä¸­ã€‚è¿™ç§è¿›ç¨‹ç§°ä¹‹ä¸ºåƒµæ­»è¿›ç¨‹ã€‚ 11.1 å¦‚ä½•é¿å…åƒµå°¸è¿›ç¨‹ï¼Ÿ é€šè¿‡signal(SIGCHLD, SIG_IGN)é€šçŸ¥å†…æ ¸å¯¹å­è¿›ç¨‹çš„ç»“æŸä¸å…³å¿ƒï¼Œç”±å†…æ ¸å›æ”¶ï¼› å¦‚æœä¸æƒ³è®©çˆ¶è¿›ç¨‹æŒ‚èµ·ï¼Œå¯ä»¥åœ¨çˆ¶è¿›ç¨‹ä¸­åŠ å…¥ä¸€æ¡è¯­å¥ï¼šsignal(SIGCHLD,SIG_IGN); è¡¨ç¤ºçˆ¶è¿›ç¨‹å¿½ç•¥SIGCHLDä¿¡å·ï¼Œè¯¥ä¿¡å·æ˜¯å­è¿›ç¨‹é€€å‡ºçš„æ—¶å€™å‘çˆ¶è¿›ç¨‹å‘é€çš„ã€‚ çˆ¶è¿›ç¨‹è°ƒç”¨wait/waitpidç­‰å‡½æ•°ç­‰å¾…å­è¿›ç¨‹ç»“æŸï¼Œå¦‚æœå°šæ— å­è¿›ç¨‹é€€å‡ºwaitä¼šå¯¼è‡´çˆ¶è¿›ç¨‹é˜»å¡ï¼› waitpidå¯ä»¥é€šè¿‡ä¼ é€’WNOHANGä½¿çˆ¶è¿›ç¨‹ä¸é˜»å¡ç«‹å³è¿”å›ã€‚ å¦‚æœçˆ¶è¿›ç¨‹å¾ˆå¿™å¯ä»¥ç”¨signalæ³¨å†Œä¿¡å·å¤„ç†å‡½æ•°ï¼Œåœ¨ä¿¡å·å¤„ç†å‡½æ•°è°ƒç”¨wait/waitpidç­‰å¾…å­è¿›ç¨‹é€€å‡º; é€šè¿‡ä¸¤æ¬¡è°ƒç”¨forkã€‚çˆ¶è¿›ç¨‹é¦–å…ˆè°ƒç”¨forkåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ç„¶åwaitpidç­‰å¾…å­è¿›ç¨‹é€€å‡ºï¼Œå­è¿›ç¨‹å†forkä¸€ä¸ªå­™è¿›ç¨‹åé€€å‡ºã€‚è¿™æ ·å­è¿›ç¨‹é€€å‡ºåä¼šè¢«çˆ¶è¿›ç¨‹ç­‰å¾…å›æ”¶ï¼Œè€Œå¯¹äºå­™å­è¿›ç¨‹å…¶çˆ¶è¿›ç¨‹å·²ç»é€€å‡ºæ‰€ä»¥å­™è¿›ç¨‹æˆä¸ºä¸€ä¸ªå­¤å„¿è¿›ç¨‹ï¼Œå­¤å„¿è¿›ç¨‹ç”±initè¿›ç¨‹æ¥ç®¡ï¼Œå­™è¿›ç¨‹ç»“æŸåï¼Œinitä¼šç­‰å¾…å›æ”¶ã€‚ 4.3 socketç¼–ç¨‹ æš‚ç•¥ 4.4 å†…å­˜ç®¡ç† 1.ä»‹ç»ä¸€ä¸‹æ“ä½œç³»ç»Ÿçš„å †å’Œæ ˆï¼Ÿ æ ˆå†…å­˜ï¼šæ ˆå†…å­˜é¦–å…ˆæ˜¯ä¸€ç‰‡å†…å­˜åŒºåŸŸï¼Œå­˜å‚¨çš„éƒ½æ˜¯å±€éƒ¨å˜é‡ï¼Œæ ˆå†…å­˜çš„æ›´æ–°é€Ÿåº¦å¾ˆå¿«ï¼Œå› ä¸ºå±€éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸéƒ½å¾ˆçŸ­ã€‚ å±€éƒ¨å˜é‡ï¼šæ–¹æ³•å†…çš„å˜é‡ï¼Œforå¾ªç¯å†…éƒ¨å®šä¹‰çš„ä¹Ÿæ˜¯å±€éƒ¨å˜é‡ç­‰ã€‚ å †å†…å­˜ï¼šå­˜å‚¨çš„æ˜¯æ•°ç»„å’Œå¯¹è±¡ï¼ˆå…¶å®æ•°ç»„å°±æ˜¯å¯¹è±¡ï¼‰ï¼Œå‡¡æ˜¯newå»ºç«‹çš„éƒ½æ˜¯åœ¨å †ä¸­ï¼Œå †ä¸­å­˜æ”¾çš„éƒ½æ˜¯å®ä½“ï¼ˆå¯¹è±¡ï¼‰ã€‚å †é‡Œçš„å®ä½“è™½ç„¶ä¸ä¼šè¢«é‡Šæ”¾ï¼Œä½†æ˜¯ä¼šè¢«å½“æˆåƒåœ¾ï¼ŒJavaæœ‰åƒåœ¾å›æ”¶æœºåˆ¶ä¸å®šæ—¶çš„æ”¶å–ã€‚ 1.1 ä»€ä¹ˆæ—¶å€™ä¼šæ ˆæº¢å‡ºï¼Ÿ æ ˆèƒ½ä½¿ç”¨çš„å†…å­˜æ˜¯æœ‰é™çš„ï¼Œä¸€èˆ¬æ˜¯ 1M~8Mï¼Œè¿™åœ¨ç¼–è¯‘æ—¶å°±å·²ç»å†³å®šäº†ï¼Œç¨‹åºè¿è¡ŒæœŸé—´ä¸èƒ½å†æ”¹å˜ã€‚ å¦‚æœç¨‹åºä½¿ç”¨çš„æ ˆå†…å­˜è¶…å‡ºæœ€å¤§å€¼ï¼Œå°±ä¼šå‘ç”Ÿæ ˆæº¢å‡ºï¼ˆStack Overflowï¼‰é”™è¯¯ï¼Œç¨‹åºå°±å´©æºƒäº†ï¼› ä¸€èˆ¬å¸¸è§çš„æƒ…å†µï¼Œå¦‚é€’å½’è¿‡æ·± 2. ä»‹ç»ä¸€ä¸‹ä»€ä¹ˆå†…å­˜ç®¡ç†ï¼Ÿå¸¸ç”¨çš„å†…å­˜ç®¡ç†æœºåˆ¶ï¼Ÿ å†…å­˜ç®¡ç† æ“ä½œç³»ç»Ÿçš„å†…å­˜ç®¡ç†ä¸»è¦è´Ÿè´£å†…å­˜çš„ï¼ˆ1ï¼‰åˆ†é…ä¸å›æ”¶ï¼ˆmalloc å‡½æ•°ï¼šç”³è¯·å†…å­˜ï¼Œfree å‡½æ•°ï¼šé‡Šæ”¾å†…å­˜ï¼‰ï¼Œï¼ˆ2ï¼‰å¦å¤–åœ°å€è½¬æ¢ä¹Ÿå°±æ˜¯å°†é€»è¾‘åœ°å€è½¬æ¢æˆç›¸åº”çš„ç‰©ç†åœ°å€ç­‰åŠŸèƒ½ä¹Ÿæ˜¯æ“ä½œç³»ç»Ÿå†…å­˜ç®¡ç†åšçš„äº‹æƒ…ã€‚ å¸¸ç”¨å†…å­˜ç®¡ç†æœºåˆ¶ ç®€å•åˆ†ä¸ºè¿ç»­åˆ†é…ç®¡ç†æ–¹å¼å’Œéè¿ç»­åˆ†é…ç®¡ç†æ–¹å¼è¿™ä¸¤ç§ã€‚è¿ç»­åˆ†é…ç®¡ç†æ–¹å¼æ˜¯æŒ‡ä¸ºâ¼€ä¸ªç”¨æˆ·ç¨‹åºåˆ†é…â¼€ä¸ªè¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œå¸¸è§çš„å¦‚å—å¼ç®¡ç† ã€‚åŒæ ·åœ°ï¼Œéè¿ç»­åˆ†é…ç®¡ç†æ–¹å¼å…è®¸â¼€ä¸ªç¨‹åºä½¿ç”¨çš„å†…å­˜åˆ†åœ¨ç¦»æ•£æˆ–è€…è¯´ä¸ç›¸é‚»çš„å†…å­˜ä¸­ï¼Œå¸¸è§çš„å¦‚é¡µå¼ç®¡ç† å’Œ æ®µå¼ç®¡ç†ã€‚ å—å¼ç®¡ç† ï¼š è¿œå¤æ—¶ä»£çš„è®¡ç®—æœºæ“ç³»ç»Ÿçš„å†…å­˜ç®¡ç†æ–¹å¼ã€‚å°†å†…å­˜åˆ†ä¸ºâ¼ä¸ªå›ºå®šå¤§å°çš„å—ï¼Œæ¯ä¸ªå—ä¸­åªåŒ…å«â¼€ä¸ªè¿›ç¨‹ã€‚å¦‚æœç¨‹åºè¿è¡Œéœ€è¦å†…å­˜çš„è¯ï¼Œæ“ä½œç³»ç»Ÿå°±åˆ†é…ç»™å®ƒâ¼€å—ï¼Œå¦‚æœç¨‹åºè¿è¡Œåªéœ€ è¦å¾ˆå°çš„ç©ºé—´çš„è¯ï¼Œåˆ†é…çš„è¿™å—å†…å­˜å¾ˆå¤§â¼€éƒ¨åˆ†â¼ä¹è¢«æµªè´¹äº†ã€‚è¿™äº›åœ¨æ¯ä¸ªå—ä¸­æœªè¢«åˆ©ç”¨çš„ç©ºé—´ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºç¢ç‰‡ã€‚ é¡µå¼ç®¡ç† ï¼šæŠŠä¸»å­˜åˆ†ä¸ºå¤§å°ç›¸ç­‰ä¸”å›ºå®šçš„â¼€é¡µâ¼€é¡µçš„å½¢å¼ï¼Œé¡µè¾ƒå°ï¼Œç›¸å¯¹ç›¸â½äºå—å¼ç®¡ç†çš„åˆ’åˆ†â¼’åº¦æ›´å¤§ï¼Œæé«˜äº†å†…å­˜åˆ©ç”¨ç‡ï¼Œå‡å°‘äº†ç¢ç‰‡ã€‚é¡µå¼ç®¡ç†é€šè¿‡é¡µè¡¨å¯¹åº”é€»è¾‘åœ°å€å’Œç‰©ç†åœ°å€ã€‚ æ®µå¼ç®¡ç† ï¼š é¡µå¼ç®¡ç†è™½ç„¶æé«˜äº†å†…å­˜åˆ©ç”¨ç‡ï¼Œä½†æ˜¯é¡µå¼ç®¡ç†å…¶ä¸­çš„é¡µå®é™…å¹¶æ— ä»»ä½•å®é™…æ„ä¹‰ã€‚æ®µå¼ç®¡ç†æŠŠä¸»å­˜åˆ†ä¸ºâ¼€æ®µæ®µçš„ï¼Œæ¯â¼€æ®µçš„ç©ºé—´â¼œè¦â½â¼€é¡µçš„ç©ºé—´å°å¾ˆå¤š ã€‚ ä½†æ˜¯ï¼Œæœ€é‡è¦çš„æ˜¯æ®µæ˜¯æœ‰å®é™…æ„ä¹‰çš„ï¼Œæ¯ä¸ªæ®µå®šä¹‰äº†â¼€ç»„é€»è¾‘ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼Œæœ‰ä¸»ç¨‹æ®µ MAINã€å­ç¨‹åºæ®µ Xã€æ•°æ®æ®µ DåŠæ ˆæ®µ S ç­‰ã€‚ æ®µå¼ç®¡ç†é€šè¿‡æ®µè¡¨å¯¹åº”é€»è¾‘åœ°å€å’Œç‰©ç†åœ°å€ã€‚ æ®µé¡µå¼ç®¡ç†æœºåˆ¶ ã€‚æ®µé¡µå¼ç®¡ç†æœºåˆ¶ç»“åˆäº†æ®µå¼ç®¡ç†å’Œé¡µå¼ç®¡ç†çš„ä¼˜ç‚¹ã€‚ç®€å•æ¥è¯´æ®µé¡µå¼ç®¡ç†æœºåˆ¶å°±æ˜¯æŠŠä¸»å­˜å…ˆåˆ†æˆè‹¥â¼²æ®µï¼Œæ¯ä¸ªæ®µâ¼œåˆ†æˆè‹¥â¼²é¡µï¼Œä¹Ÿå°±æ˜¯è¯´ æ®µé¡µå¼ç®¡ç†æœºåˆ¶ä¸­æ®µä¸æ®µä¹‹é—´ä»¥åŠæ®µçš„å†…éƒ¨çš„éƒ½æ˜¯ç¦»æ•£çš„ã€‚ 2.1 ä»‹ç»ä¸€ä¸‹é€»è¾‘åœ°å€å’Œç‰©ç†åœ°å€ï¼Ÿ æˆ‘ä»¬ç¼–ç¨‹â¼€èˆ¬åªæœ‰å¯èƒ½å’Œé€»è¾‘åœ°å€æ‰“äº¤é“ï¼Œâ½å¦‚åœ¨ C è¯­â¾”ä¸­ï¼ŒæŒ‡é’ˆâ¾¥é¢å­˜å‚¨çš„æ•°å€¼å°±å¯ä»¥ç†è§£æˆä¸ºå†…å­˜â¾¥çš„â¼€ä¸ªåœ°å€ï¼Œè¿™ä¸ªåœ°å€ä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„é€»è¾‘åœ°å€ï¼Œé€»è¾‘åœ°å€ç”±æ“ä½œç³»ç»Ÿå†³å®šã€‚ ç‰©ç†åœ°å€æŒ‡çš„æ˜¯çœŸå®ç‰©ç†å†…å­˜ä¸­åœ°å€ï¼Œæ›´å…·ä½“â¼€ç‚¹æ¥è¯´å°±æ˜¯å†…å­˜åœ°å€å¯„å­˜å™¨ä¸­çš„åœ°å€ã€‚ 2.2 æ“ä½œç³»ç»Ÿåœ¨å†…å­˜ç®¡ç†éœ€è¦åšä»€ä¹ˆï¼Ÿ å†…å­˜ç©ºé—´çš„åˆ†é…ä¸å›æ”¶ï¼› ä»é€»è¾‘ä¸Šå¯¹å†…å­˜ç©ºé—´è¿›è¡Œæ‰©å……ï¼› é€»è¾‘åœ°å€ä¸ç‰©ç†åœ°å€çš„è½¬æ¢ï¼› æ“ä½œç³»ç»Ÿéœ€è¦æä¾›å†…å­˜ä¿æŠ¤åŠŸèƒ½ã€‚ä¿è¯å„è¿›ç¨‹åœ¨å„è‡ªå­˜å‚¨ç©ºé—´å†…è¿è¡Œï¼Œäº’ä¸å¹²æ‰°ã€‚ 3. ä»‹ç»ä¸€ä¸‹å¿«è¡¨å’Œå¤šçº§é¡µè¡¨ï¼Ÿ åœ¨åˆ†é¡µå†…å­˜ç®¡ç†ä¸­ï¼Œå¾ˆé‡è¦çš„ä¸¤ç‚¹æ˜¯ï¼š è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€çš„è½¬æ¢è¦å¿«ã€‚ è§£å†³è™šæ‹Ÿåœ°å€ç©ºé—´å¤§ï¼Œé¡µè¡¨ä¹Ÿä¼šå¾ˆå¤§çš„é—®é¢˜ã€‚ å¿«è¡¨ä»‹ç» å¿«è¡¨ç†è§£ä¸ºâ¼€ç§ç‰¹æ®Šçš„é«˜é€Ÿç¼“å†²å­˜å‚¨å™¨ï¼ˆCacheï¼‰ï¼Œå…¶ä¸­çš„å†…å®¹æ˜¯é¡µè¡¨çš„â¼€éƒ¨åˆ†æˆ–è€…å…¨éƒ¨å†…å®¹ã€‚ä½œä¸ºé¡µè¡¨çš„ Cacheï¼Œå®ƒçš„ä½œç”¨ä¸é¡µè¡¨ç›¸ä¼¼ï¼Œä½†æ˜¯æé«˜äº†è®¿é—®é€Ÿç‡ã€‚ ä½†æœ‰æ—¶å¿«è¡¨ä¸å‘½ä¸­è¦è®¿é—®ä¸¤æ¬¡ç¼“å­˜ï¼Œä¸è¿‡æ€»ä½“è¿˜æ˜¯æé«˜äº†æ€§èƒ½ã€‚ å¤šçº§é¡µè¡¨ä»‹ç» å¼•â¼Šå¤šçº§é¡µè¡¨çš„ä¸»è¦â½¬çš„æ˜¯ä¸ºäº† é¿å…æŠŠå…¨éƒ¨é¡µè¡¨â¼€ç›´æ”¾åœ¨å†…å­˜ä¸­å ç”¨è¿‡å¤šç©ºé—´ï¼Œç‰¹åˆ«æ˜¯é‚£äº›æ ¹æœ¬å°±ä¸éœ€è¦çš„é¡µè¡¨å°±ä¸éœ€è¦ä¿ç•™åœ¨å†…å­˜ä¸­ã€‚å¤šçº§é¡µè¡¨å±äºæ—¶é—´æ¢ç©ºé—´çš„å…¸å‹åœºæ™¯ã€‚ 4. åˆ†é¡µæœºåˆ¶å’Œåˆ†æ®µæœºåˆ¶çš„å…±åŒç‚¹å’ŒåŒºåˆ« ï¼Ÿ å…±åŒç‚¹ ï¼š åˆ†é¡µæœºåˆ¶å’Œåˆ†æ®µæœºåˆ¶éƒ½æ˜¯ä¸ºäº†æé«˜å†…å­˜åˆ©ç”¨ç‡ï¼Œè¾ƒå°‘å†…å­˜ç¢ç‰‡ã€‚ é¡µå’Œæ®µéƒ½æ˜¯ç¦»æ•£å­˜å‚¨çš„ï¼Œæ‰€ä»¥ä¸¤è€…éƒ½æ˜¯ç¦»æ•£åˆ†é…å†…å­˜çš„æ–¹å¼ã€‚ä½†æ˜¯ï¼Œæ¯ä¸ªé¡µå’Œæ®µä¸­çš„å†…å­˜æ˜¯è¿ç»­çš„ã€‚ åŒºåˆ« ï¼š é¡µçš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œç”±æ“ä½œç³»ç»Ÿå†³å®šï¼›è€Œæ®µçš„å¤§å°ä¸å›ºå®šï¼Œå–å†³äºæˆ‘ä»¬å½“å‰è¿è¡Œçš„ç¨‹åºã€‚ åˆ†é¡µä»…ä»…æ˜¯ä¸ºäº†æ»¡â¾œæ“ä½œç³»ç»Ÿå†…å­˜ç®¡ç†çš„éœ€æ±‚ï¼Œè€Œæ®µæ˜¯é€»è¾‘ä¿¡æ¯çš„å•ä½ï¼Œåœ¨ç¨‹åºä¸­å¯ä»¥ä½“ç°ä¸ºä»£ç æ®µï¼Œæ•°æ®æ®µï¼Œèƒ½å¤Ÿæ›´å¥½æ»¡â¾œç”¨æˆ·çš„éœ€è¦ã€‚ 5. ã€å¾…æ‰©å……ã€‘CPU å¯»å€äº†è§£å—?ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿåœ°å€ç©ºé—´? ç°ä»£å¤„ç†å™¨ä½¿ç”¨çš„æ˜¯â¼€ç§ç§°ä¸º è™šæ‹Ÿå¯»å€(Virtual Addressing) çš„å¯»å€â½…å¼ã€‚ä½¿ç”¨è™šæ‹Ÿå¯»å€ï¼ŒCPU éœ€è¦è™šæ‹Ÿåœ°å€ç¿»è¯‘æˆç‰©ç†åœ°å€ï¼Œè¿™æ ·æ‰èƒ½è®¿é—®åˆ°çœŸå®çš„ç‰©ç†å†…å­˜ã€‚ å®é™…ä¸Šå®Œæˆè™šæ‹Ÿåœ°å€è½¬æ¢ä¸ºç‰©ç†åœ°å€è½¬æ¢çš„ç¡¬ä»¶æ˜¯ CPU ä¸­å«æœ‰â¼€ä¸ªè¢«ç§°ä¸º å†…å­˜ç®¡ç†å•å…ƒï¼ˆMemory Management Unit, MMUï¼‰ çš„ç¡¬ä»¶ã€‚ å¦‚æœç›´æ¥æŠŠç‰©ç†åœ°å€æš´éœ²å‡ºæ¥çš„è¯ä¼šå¸¦æ¥ä¸¥é‡é—®é¢˜ï¼Œâ½å¦‚å¯èƒ½å¯¹æ“ä½œç³»ç»Ÿé€ æˆä¼¤å®³ä»¥åŠç»™åŒæ—¶è¿è¡Œå¤šä¸ªç¨‹åºé€ æˆå›°éš¾ã€‚ 6. å¦‚æœç³»ç»Ÿä¸­å…·æœ‰å¿«è¡¨åï¼Œé‚£ä¹ˆåœ°å€çš„è½¬æ¢è¿‡ç¨‹å˜æˆä»€ä¹ˆæ ·äº†ï¼Ÿ ç®€å•æ¥è¯´ï¼šcupè®¡ç®—é¡µå· â†’ å¿«è¡¨æŸ¥è¯¢æ˜¯å¦æœ‰è¯¥é¡µå· â†’ å¦åˆ™é¡µè¡¨æŸ¥è¯¢ è®¡ç®—é¡µå·å’Œé¡µåç§»é‡ã€‚ CPUç»™å‡ºé€»è¾‘åœ°å€ï¼Œç”±æŸä¸ªç¡¬ä»¶ç®—å¾—é¡µå·ã€é¡µå†…åç§»é‡ï¼› å¿«è¡¨ä¸­æŸ¥æ‰¾å†…å­˜å—å·ã€‚ å°†é¡µå·ä¸å¿«è¡¨ä¸­çš„æ‰€æœ‰é¡µå·è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœæ‰¾åˆ°åŒ¹é…çš„é¡µå·ï¼Œåˆ™ç›´æ¥ä»ä¸­å–å‡ºè¯¥é¡µå¯¹åº”çš„å†…å­˜å—å·ï¼Œå†å°†å†…å­˜å—å·ä¸é¡µå†…åç§»é‡æ‹¼æ¥å½¢æˆç‰©ç†åœ°å€ï¼› é¡µè¡¨ä¸­æŸ¥æ‰¾å†…å­˜å—å·ã€‚ å¦‚æœå¿«è¡¨ä¸­æŸ¥æ‰¾ä¸å­˜åœ¨ï¼Œè®¿é—®å†…å­˜ä¸­çš„é¡µè¡¨ï¼Œæ‰¾åˆ°å¯¹åº”é¡µè¡¨é¡¹ï¼Œå¾—åˆ°é¡µé¢å­˜æ”¾çš„å†…å­˜å—å·ï¼Œå†å°†å†…å­˜å—å·ä¸é¡µå†…åç§»é‡æ‹¼æ¥å½¢æˆç‰©ç†åœ°å€ï¼Œæœ€åï¼Œè®¿é—®è¯¥ç‰©ç†åœ°å€å¯¹åº”çš„å†…å­˜å•å…ƒã€‚ 7. è¿›ç¨‹å†…å­˜åˆ†é…åŠ¨æ€åˆ†åŒºç®—æ³•ï¼Ÿ é¦–æ¬¡é€‚åº”æ³•ã€‚ ç®—æ³•æ€æƒ³ï¼šæ¯æ¬¡éƒ½ä»ä½åœ°å€å¼€å§‹æŸ¥æ‰¾ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªèƒ½æ»¡è¶³å¤§å°çš„ç©ºé—²åˆ†åŒºï¼› å®ç°æ–¹å¼ï¼šç©ºé—²åˆ†åŒºä»¥åœ°å€é€’å¢çš„æ¬¡åºæ’åˆ—ã€‚æ¯æ¬¡åˆ†é…å†…å­˜æ—¶é¡ºåºæŸ¥æ‰¾ç©ºé—²åˆ†åŒºé“¾( æˆ–ç©ºé—²åˆ†[è¡¨)ï¼Œæ‰¾åˆ°å¤§å°èƒ½æ»¡è¶³è¦æ±‚çš„ç¬¬-ä¸€ä¸ªç©ºé—²åˆ†åŒºã€‚ ä¼˜ç‚¹ï¼š ç»¼åˆæ€§èƒ½æœ€å¥½ï¼Œå¼€é”€å°ã€‚ æœ€ä½³é€‚åº”æ³•ã€‚ ç®—æ³•æ€æƒ³ï¼šä¸ºäº†ä¿è¯å½“â€œå¤§è¿›ç¨‹â€åˆ°æ¥æ—¶èƒ½æœ‰è¿ç»­çš„å¤§ç‰‡ç©ºé—´ï¼Œå¯ä»¥å°½å¯èƒ½å¤šåœ°ç•™ä¸‹å¤§ç‰‡çš„ç©ºé—²åŒº,å³ï¼Œä¼˜å…ˆä½¿ç”¨æ›´å°çš„ç©ºé—²åŒºï¼› å®ç°æ–¹å¼ï¼š ç©ºé—²åˆ†åŒºæŒ‰å®¹é‡é€’å¢æ¬¡åºé“¾æ¥ã€‚æ¯æ¬¡åˆ†é…å†…å­˜æ—¶é¡ºåºæŸ¥æ‰¾ç©ºé—²åˆ†åŒºé“¾(æˆ–ç©ºé—²åˆ†åŒºè¡¨)ï¼Œæ‰¾åˆ°å¤§å°èƒ½æ»¡è¶³è¦æ±‚çš„ç¬¬ä¸€ä¸ªç©ºé—²åˆ†åŒºã€‚ ä¼˜ç‚¹ï¼š ä¼šæœ‰æ›´å¤šçš„å¤§åˆ†åŒºè¢«ä¿ç•™ä¸‹æ¥ï¼Œæ›´èƒ½æ»¡è¶³å¤§è¿›ç¨‹éœ€æ±‚ ç¼ºç‚¹ï¼š äº§ç”Ÿå¾ˆå¤šå¤ªå°çš„ã€éš¾ä»¥åˆ©ç”¨çš„ç¢ç‰‡ï¼Œç®—æ³•å¼€é”€å¤§ æœ€åé€‚åº”æ³•ã€‚ ç®—æ³•æ€æƒ³ï¼š ä¸ºäº†è§£å†³æœ€ä½³é€‚åº”ç®—æ³•çš„é—®é¢˜â€”å³ç•™ä¸‹å¤ªå¤šéš¾ä»¥åˆ©ç”¨çš„å°ç¢ç‰‡ï¼Œå¯ä»¥åœ¨æ¯æ¬¡åˆ†é…æ—¶ä¼˜å…ˆä½¿ç”¨æœ€å¤§çš„è¿ç»­ç©ºé—²åŒºï¼Œè¿™æ ·åˆ†é…åå‰©ä½™çš„ç©ºé—²åŒºå°±ä¸ä¼šå¤ªå°ï¼Œæ›´æ–¹ä¾¿ä½¿ç”¨ã€‚ å®ç°æ–¹å¼ï¼šç©ºé—²åˆ†åŒºæŒ‰å®¹é‡é€’å‡æ¬¡åºé“¾æ¥ã€‚æ¯æ¬¡åˆ†é…å†…å­˜æ—¶é¡ºåºæŸ¥æ‰¾ç©ºé—²åˆ†åŒºé“¾(æˆ–ç©ºé—²åˆ†åŒºè¡¨)ï¼Œæ‰¾åˆ°å¤§å°èƒ½æ»¡è¶³è¦æ±‚çš„ç¬¬ä¸€ä¸ªç©ºé—²åˆ†åŒºã€‚ ä¼˜ç‚¹ï¼š å¯ä»¥å‡å°‘éš¾ä»¥åˆ©ç”¨çš„å°ç¢ç‰‡ ç¼ºç‚¹ï¼š å¤§åˆ†åŒºå®¹æ˜“è¢«ç”¨å®Œï¼Œä¸åˆ©äºå¤§è¿›ç¨‹ï¼Œç®—æ³•å¼€é”€å¤§ é¢†è¿‘é€‚åº”æ³•ã€‚ ç®—æ³•æ€æƒ³ï¼š é¦–æ¬¡é€‚åº”ç®—æ³•æ¯æ¬¡éƒ½ä»é“¾å¤´å¼€å§‹æŸ¥æ‰¾çš„ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´ä½åœ°å€éƒ¨åˆ†å‡ºç°å¾ˆå¤šå°çš„ç©ºé—²åˆ†åŒºï¼Œè€Œæ¯æ¬¡åˆ†é…æŸ¥æ‰¾æ—¶ï¼Œéƒ½è¦ç»è¿‡è¿™äº›åˆ†åŒºï¼Œå› æ­¤ä¹Ÿå¢åŠ äº†æŸ¥æ‰¾çš„å¼€é”€ã€‚ å®ç°æ–¹å¼ï¼šç©ºé—²åˆ†åŒºä»¥åœ°å€é€’å¢çš„é¡ºåºæ’åˆ—(å¯æ’æˆä¸€ä¸ªå¾ªç¯é“¾è¡¨)ã€‚æ¯æ¬¡åˆ†é…å†…å­˜æ—¶ä»ä¸Šæ¬¡æŸ¥æ‰¾ç»“æŸçš„ä½ç½®å¼€å§‹ ï¼ŒæŸ¥æ‰¾ç©ºé—²åˆ†åŒºé“¾(æˆ–ç©ºé—²åˆ†åŒºè¡¨)ï¼Œæ‰¾åˆ°å¤§å°èƒ½æ»¡è¶³è¦æ±‚çš„ç¬¬ä¸€ä¸ªç©ºé—²åˆ†åŒºã€‚ ä¼˜ç‚¹ï¼š ç®—æ³•å¼€é”€å° 8. ä»€ä¹ˆæ˜¯å†…å­˜è¦†ç›–å’Œå†…å­˜äº¤æ¢ï¼Ÿ å†…å­˜è¦†ç›– æ€æƒ³ï¼š æŠŠç”¨æˆ·ç©ºé—´åˆ†æˆä¸ºä¸€ä¸ªå›ºå®šåŒºå’Œè‹¥å¹²ä¸ªè¦†ç›–åŒºã€‚å°†ç»å¸¸æ´»è·ƒçš„éƒ¨åˆ†æ”¾åœ¨å›ºå®šåŒºï¼Œå…¶ä½™éƒ¨åˆ†æŒ‰ç…§è°ƒç”¨å…³ç³»åˆ†æ®µï¼Œé¦–å…ˆå°†é‚£äº›å³å°†è¦è®¿é—®çš„æ®µæ”¾å…¥è¦†ç›–åŒºï¼Œå…¶ä»–æ®µæ”¾åœ¨å¤–å­˜ä¸­ï¼Œåœ¨éœ€è¦è°ƒç”¨å‰ï¼Œç³»ç»Ÿå°†å…¶è°ƒå…¥è¦†ç›–åŒºï¼Œæ›¿æ¢è¦†ç›–åŒºä¸­åŸæœ‰çš„æ®µã€‚ ç‰¹ç‚¹ï¼šæ‰“ç ´äº†å¿…é¡»å°†ä¸€ä¸ªè¿›ç¨‹çš„å…¨éƒ¨ä¿¡æ¯è£…å…¥å†…å­˜åæ‰èƒ½è¿è¡Œçš„é™åˆ¶ ã€‚ å†…å­˜äº¤æ¢ æ€æƒ³ï¼š å†…å­˜ç©ºé—´ç´§å¼  æ—¶ï¼Œç³»ç»Ÿå°†å†…å­˜ä¸­æŸäº›è¿›ç¨‹æš‚æ—¶æ¢å‡ºå¤–å­˜ï¼ŒæŠŠå¤–å­˜ä¸­æŸäº›å·²å…·å¤‡è¿è¡Œæ¡ä»¶çš„è¿›ç¨‹æ¢å…¥å†…å­˜ã€‚ 4.5 è™šæ‹Ÿå†…å­˜ 0. ä»€ä¹ˆæ˜¯è™šæ‹ŸæŠ€æœ¯ ï¼Ÿä»æ—¶é—´å’Œç©ºé—´ä¸¤æ–¹é¢æ¥è¯´ã€‚ è™šæ‹ŸæŠ€æœ¯æŠŠä¸€ä¸ªç‰©ç†å®ä½“è½¬æ¢ä¸ºå¤šä¸ªé€»è¾‘å®ä½“ ï¼š æ—¶åˆ†å¤ç”¨æŠ€æœ¯ ï¼š å¦‚å¤šä¸ªè¿›ç¨‹èƒ½åœ¨åŒä¸€ä¸ªå¤„ç†å™¨ä¸Šå¹¶å‘æ‰§è¡Œä½¿ç”¨äº†æ—¶åˆ†å¤ç”¨æŠ€æœ¯ï¼Œè®©æ¯ä¸ªè¿›ç¨‹è½®æµå ç”¨å¤„ç†å™¨ï¼Œæ¯æ¬¡åªæ‰§è¡Œä¸€å°ä¸ªæ—¶é—´ç‰‡å¹¶å¿«é€Ÿåˆ‡æ¢ ï¼› ç©ºåˆ†å¤ç”¨æŠ€æœ¯ï¼š ç‰©ç†å†…å­˜æŠ½è±¡ä¸ºåœ°å€ç©ºé—´ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰å„è‡ªçš„åœ°å€ç©ºé—´ã€‚åœ°å€ç©ºé—´çš„é¡µè¢«æ˜ å°„åˆ°ç‰©ç†å†…å­˜ï¼Œåœ°å€ç©ºé—´çš„é¡µå¹¶ä¸éœ€è¦å…¨éƒ¨åœ¨ç‰©ç†å†…å­˜ä¸­ï¼Œå½“ä½¿ç”¨åˆ°ä¸€ä¸ªæ²¡æœ‰åœ¨ç‰©ç†å†…å­˜çš„é¡µæ—¶ï¼Œæ‰§è¡Œé¡µé¢ç½®æ¢ç®—æ³•ï¼Œå°†è¯¥é¡µç½®æ¢åˆ°å†…å­˜ä¸­ã€‚ 1. ä»‹ç»ä¸€ä¸‹å±€éƒ¨æ€§åŸç†å§ï¼Ÿ å±€éƒ¨æ€§åŸç†æ˜¯è™šæ‹Ÿå†…å­˜æŠ€æœ¯çš„åŸºç¡€ï¼Œæ­£æ˜¯å› ä¸ºç¨‹åºè¿è¡Œå…·æœ‰å±€éƒ¨æ€§åŸç†ï¼Œæ‰å¯ä»¥åªè£…â¼Šéƒ¨åˆ†ç¨‹åºåˆ°å†…å­˜å°±å¼€å§‹è¿è¡Œã€‚ å±€éƒ¨æ€§åŸç†è¡¨ç°åœ¨ä»¥ä¸‹ä¸¤ä¸ªâ½…é¢ï¼š æ—¶é—´å±€éƒ¨æ€§ï¼šå¦‚æœç¨‹åºä¸­çš„æŸæ¡æŒ‡ä»¤â¼€æ—¦æ‰§è¡Œï¼Œä¸ä¹…ä»¥åè¯¥æŒ‡ä»¤å¯èƒ½å†æ¬¡æ‰§è¡Œï¼›å¦‚æœæŸæ•°æ®è¢«è®¿é—®è¿‡ï¼Œä¸ä¹…ä»¥åè¯¥æ•°æ®å¯èƒ½å†æ¬¡è¢«è®¿é—®ã€‚äº§â½£æ—¶é—´å±€éƒ¨æ€§çš„å…¸å‹åŸå› ï¼Œæ˜¯ç”±äºåœ¨ç¨‹åºä¸­å­˜åœ¨ç€å¤§é‡çš„å¾ªç¯æ“ä½œã€‚ æ—¶é—´å±€éƒ¨æ€§æ˜¯é€šè¿‡å°†è¿‘æ¥ä½¿ç”¨çš„æŒ‡ä»¤å’Œæ•°æ®ä¿å­˜åˆ°é«˜é€Ÿç¼“å­˜å­˜å‚¨å™¨ä¸­ï¼Œå¹¶ä½¿ç”¨é«˜é€Ÿç¼“å­˜çš„å±‚æ¬¡ç»“æ„å®ç°ã€‚ ç©ºé—´å±€éƒ¨æ€§ï¼šâ¼€æ—¦ç¨‹åºè®¿é—®äº†æŸä¸ªå­˜å‚¨å•å…ƒï¼Œåœ¨ä¸ä¹…ä¹‹åï¼Œå…¶é™„è¿‘çš„å­˜å‚¨å•å…ƒä¹Ÿå°†è¢«è®¿é—®ï¼Œå³ç¨‹åºåœ¨â¼€æ®µæ—¶é—´å†…æ‰€è®¿é—®çš„åœ°å€ï¼Œå¯èƒ½é›†ä¸­åœ¨â¼€å®šçš„èŒƒå›´ä¹‹å†…ï¼Œè¿™æ˜¯å› ä¸ºæŒ‡ä»¤é€šå¸¸æ˜¯é¡ºåºå­˜æ”¾ã€é¡ºåºæ‰§è¡Œçš„ï¼Œæ•°æ®ä¹Ÿâ¼€èˆ¬æ˜¯ä»¥å‘é‡ã€æ•°ç»„ã€è¡¨ç­‰å½¢å¼ç°‡èšå­˜å‚¨çš„ã€‚ ç©ºé—´å±€éƒ¨æ€§é€šå¸¸æ˜¯ä½¿ç”¨æ•™å¤§çš„é«˜é€Ÿç¼“å­˜ï¼Œå¹¶å°†é¢„å–æœºåˆ¶é›†æˆåˆ°é«˜é€Ÿç¼“å­˜æ§åˆ¶é€»è¾‘ä¸­å®ç°ã€‚ è™šæ‹Ÿå†…å­˜æŠ€æœ¯å®é™…ä¸Šå°±æ˜¯å»ºâ½´äº† â€œå†…å­˜â¼€å¤–å­˜â€çš„ä¸¤çº§å­˜å‚¨å™¨çš„ç»“æ„ï¼Œåˆ©ç”¨å±€éƒ¨æ€§åŸç†å®ç°é«™é€Ÿç¼“å­˜ã€‚ 2.ä»‹ç»ä¸€ä¸‹ï¼Œä»€ä¹ˆæ˜¯è™šæ‹Ÿå†…å­˜ï¼Ÿé¡µå¼å­˜å‚¨ï¼Ÿ è™šæ‹Ÿå†…å­˜ è™šæ‹Ÿå†…å­˜æ˜¯ä¸€ç§å­˜å‚¨æœºåˆ¶ï¼Œå¯ä¸ºç”¨æˆ·æä¾›ä¸€ä¸ªæ‹¥æœ‰å¾ˆå¤§ä¸»å†…å­˜çš„é”™è§‰ã€‚é€šè¿‡å°†è¾…å­˜çš„ä¸€éƒ¨åˆ†ä½œä¸ºä¸»å­˜æ¥å®Œæˆã€‚åœ¨è™šæ‹Ÿå†…å­˜ä¸­ï¼Œç”¨æˆ·å¯ä»¥å­˜å‚¨æ¯”å¯ç”¨ä¸»å†…å­˜æ›´å¤§çš„è¿›ç¨‹ã€‚ æ¯ä¸ªè¿›ç¨‹åˆ›å»ºåŠ è½½çš„æ—¶å€™ï¼Œä¼šè¢«åˆ†é…ä¸€ä¸ªå¤§å°ä¸º4Gçš„è¿ç»­çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œä»…ä»…æ˜¯æ¯ä¸ªè¿›ç¨‹â€œè®¤ä¸ºâ€è‡ªå·±æ‹¥æœ‰4Gçš„å†…å­˜ã€‚ç­‰åˆ°è¿›ç¨‹çœŸæ­£è¿è¡Œçš„æ—¶å€™ï¼Œéœ€è¦æŸäº›æ•°æ®å¹¶ä¸”æ•°æ®ä¸åœ¨ç‰©ç†å†…å­˜ä¸­ï¼Œæ‰ä¼šè§¦å‘ç¼ºé¡µå¼‚å¸¸ï¼Œè¿›è¡Œç£ç›˜æ•°æ®æ‹·è´åˆ°ç‰©ç†å†…å­˜ä¸­ é¡µå¼å­˜å‚¨ å¤§éƒ¨åˆ†è™šæ‹Ÿå­˜å‚¨ç³»ç»Ÿé‡‡ç”¨çš„æ˜¯ä¸€ç§ç§°ä¸ºåˆ†é¡µï¼ˆpagingï¼‰çš„æŠ€æœ¯ã€‚è¿™ç§æ–¹å¼å«åšè™šæ‹Ÿé¡µå¼å­˜å‚¨ç®¡ç†ã€‚ ç‰©ç†å†…å­˜ç©ºé—´åˆ’åˆ†ä¸ºå›ºå®šå¤§å°çš„å†…å­˜å—ï¼Œç§°ä¸ºç‰©ç†é¡µé¢ï¼Œæˆ–è€…æ˜¯é¡µæ¡†ï¼ˆpage frameï¼‰ è™šæ‹Ÿåœ°å€ç©ºé—´ä¹Ÿåˆ’åˆ†æˆå¤§å°ç›¸åŒçš„å—ï¼Œç§°ä¸ºè™šæ‹Ÿé¡µé¢ï¼Œæˆ–è€…ç®€ç§°é¡µé¢ï¼ˆpageï¼‰ é¡µè¡¨ï¼šå°†è™šæ‹Ÿé¡µé¢æ˜ å°„ä¸ºç›¸åº”çš„ç‰©ç†é¡µé¢ã€‚ 3. è™šæ‹Ÿå†…å­˜çš„æŠ€æœ¯å®ç° ï¼Ÿ è™šæ‹Ÿå†…å­˜çš„å®ç°éœ€è¦å»ºâ½´åœ¨ç¦»æ•£åˆ†é…çš„å†…å­˜ç®¡ç†â½…å¼çš„åŸºç¡€ä¸Šã€‚ è™šæ‹Ÿå†…å­˜çš„å®ç°æœ‰ä»¥ä¸‹ä¸‰ç§â½…å¼ï¼š è¯·æ±‚åˆ†é¡µå­˜å‚¨ç®¡ç† ï¼šå»ºâ½´åœ¨åˆ†é¡µç®¡ç†ä¹‹ä¸Šï¼Œä¸ºäº†æ”¯æŒè™šæ‹Ÿå­˜å‚¨å™¨åŠŸèƒ½è€Œå¢åŠ äº†è¯·æ±‚è°ƒé¡µåŠŸèƒ½å’Œé¡µé¢ç½®æ¢åŠŸèƒ½ã€‚è¯·æ±‚åˆ†é¡µæ˜¯â½¬å‰æœ€å¸¸ç”¨çš„â¼€ç§å®ç°è™šæ‹Ÿå­˜å‚¨å™¨çš„â½…æ³•ã€‚è¯·æ±‚åˆ†é¡µå­˜å‚¨ç®¡ç†ç³»ç»Ÿä¸­ï¼Œåœ¨ä½œä¸šå¼€å§‹è¿è¡Œä¹‹å‰ï¼Œä»…è£…â¼Šå½“å‰è¦æ‰§è¡Œçš„éƒ¨åˆ†é¡µå³å¯è¿è¡Œã€‚å‡å¦‚åœ¨ä½œä¸šè¿è¡Œçš„è¿‡ç¨‹ä¸­å‘ç°è¦è®¿é—®çš„é¡µé¢ä¸åœ¨å†…å­˜ï¼Œåˆ™ç”±å¤„ç†å™¨é€šçŸ¥æ“ä½œç³»ç»ŸæŒ‰ç…§å¯¹åº”çš„é¡µé¢ç½®æ¢ç®—æ³•å°†ç›¸åº”çš„é¡µé¢è°ƒâ¼Šåˆ°ä¸»å­˜ï¼ŒåŒæ—¶æ“ä½œç³»ç»Ÿä¹Ÿå¯ä»¥å°†æš‚æ—¶ä¸ç”¨çš„é¡µé¢ç½®æ¢åˆ°å¤–å­˜ä¸­ã€‚ è¯·æ±‚åˆ†æ®µå­˜å‚¨ç®¡ç†ï¼šå»ºâ½´åœ¨åˆ†æ®µå­˜å‚¨ç®¡ç†ä¹‹ä¸Šï¼Œå¢åŠ äº†è¯·æ±‚è°ƒæ®µåŠŸèƒ½ã€åˆ†æ®µç½®æ¢åŠŸèƒ½ã€‚è¯·æ±‚åˆ†æ®µå‚¨å­˜ç®¡ç†â½…å¼å°±å¦‚åŒè¯·æ±‚åˆ†é¡µå‚¨å­˜ç®¡ç†â½…å¼â¼€æ ·ï¼Œåœ¨ä½œä¸šå¼€å§‹è¿è¡Œä¹‹å‰ï¼Œä»…è£…â¼Šå½“å‰è¦æ‰§è¡Œçš„éƒ¨åˆ†æ®µå³å¯è¿è¡Œï¼›åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯ä½¿ç”¨è¯·æ±‚è°ƒâ¼Šä¸­æ–­åŠ¨æ€è£…â¼Šè¦è®¿é—®ä½†â¼œä¸åœ¨å†…å­˜çš„ç¨‹åºæ®µï¼›å½“å†…å­˜ç©ºé—´å·²æ»¡ï¼Œè€Œâ¼œéœ€è¦è£…â¼Šæ–°çš„æ®µæ—¶ï¼Œæ ¹æ®ç½®æ¢åŠŸèƒ½é€‚å½“è°ƒå‡ºæŸä¸ªæ®µï¼Œä»¥ä¾¿è…¾å‡ºç©ºé—´è€Œè£…â¼Šæ–°çš„æ®µã€‚ è¯·æ±‚æ®µé¡µå¼å­˜å‚¨ç®¡ç† 4. è¯·ä½ ä»‹ç»ä¸€ä¸‹é¡µé¢ç½®æ¢ç®—æ³•ï¼Ÿ å½“å‘â½£ç¼ºé¡µä¸­æ–­æ—¶ï¼Œå¦‚æœå½“å‰å†…å­˜ä¸­å¹¶æ²¡æœ‰ç©ºé—²çš„é¡µé¢ï¼Œæ“ä½œç³»ç»Ÿå°±å¿…é¡»åœ¨å†…å­˜é€‰æ‹©â¼€ä¸ªé¡µé¢å°†å…¶ç§»å‡ºå†…å­˜ï¼Œä»¥ä¾¿ä¸ºå³å°†è°ƒâ¼Šçš„é¡µé¢è®©å‡ºç©ºé—´ã€‚ç”¨æ¥é€‰æ‹©æ·˜æ±°å“ªâ¼€é¡µçš„è§„åˆ™å«åšé¡µé¢ç½®æ¢ç®—æ³•ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠé¡µ â¾¯ç½®æ¢ç®—æ³•çœ‹æˆæ˜¯æ·˜æ±°é¡µé¢çš„è§„åˆ™ã€‚ OPT ï¼ˆæœ€ä½³é¡µé¢ç½®æ¢ç®—æ³•ï¼‰ï¼šæœ€ä½³(Optimal, OPT)ç½®æ¢ç®—æ³•æ‰€é€‰æ‹©çš„è¢«æ·˜æ±°é¡µé¢å°†æ˜¯ä»¥åæ°¸ä¸ä½¿ç”¨çš„ï¼Œæˆ–è€…æ˜¯åœ¨æœ€â»“æ—¶é—´å†…ä¸å†è¢«è®¿é—®çš„é¡µé¢,è¿™æ ·å¯ä»¥ä¿è¯è·å¾—æœ€ä½çš„ç¼ºé¡µç‡ã€‚ ä½†ç”±äºâ¼ˆä»¬â½¬å‰æ— æ³•é¢„çŸ¥è¿›ç¨‹åœ¨å†…å­˜ä¸‹çš„è‹¥åƒé¡µé¢ä¸­å“ªä¸ªæ˜¯æœªæ¥æœ€â»“æ—¶é—´å†…ä¸å†è¢«è®¿é—®çš„ï¼Œå› â½½è¯¥ç®—æ³•æ— æ³•å®ç°ã€‚â¼€èˆ¬ä½œä¸ºè¡¡é‡å…¶ä»–ç½®æ¢ç®—æ³•çš„â½…æ³•ã€‚ FIFOï¼ˆFirst In First Outï¼‰ ï¼ˆå…ˆè¿›å…ˆå‡ºé¡µé¢ç½®æ¢ç®—æ³•ï¼‰: æ€»æ˜¯æ·˜æ±°æœ€å…ˆè¿›â¼Šå†…å­˜çš„é¡µé¢ï¼Œå³é€‰æ‹©åœ¨å†…å­˜ä¸­é©»ç•™æ—¶é—´æœ€ä¹…çš„é¡µé¢è¿›è¡Œæ·˜æ±°ã€‚ LRU ï¼ˆLeast Currently Usedï¼‰ï¼ˆæœ€è¿‘æœ€ä¹…æœªä½¿ç”¨é¡µé¢ç½®æ¢ç®—æ³•ï¼‰ï¼šLRUç®—æ³•èµ‹äºˆæ¯ä¸ªé¡µé¢â¼€ä¸ªè®¿é—®å­—æ®µï¼Œç”¨æ¥è®°å½•â¼€ä¸ªé¡µé¢â¾ƒä¸Šæ¬¡è¢«è®¿é—®ä»¥æ¥æ‰€ç»å†çš„æ—¶é—´ Tï¼Œå½“é¡»æ·˜æ±°â¼€ä¸ªé¡µé¢æ—¶ï¼Œé€‰æ‹©ç°æœ‰é¡µé¢ä¸­å…¶ T å€¼æœ€å¤§çš„ï¼Œå³æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„é¡µé¢äºˆä»¥æ·˜æ±°ã€‚ LFU ï¼ˆLeast Frequently Usedï¼‰ï¼ˆæœ€å°‘ä½¿ç”¨é¡µé¢ç½®æ¢ç®—æ³•ï¼‰: è¯¥ç½®æ¢ç®—æ³•é€‰æ‹©åœ¨å‰æ—¶æœŸä½¿ç”¨æœ€å°‘çš„é¡µé¢ä½œä¸ºæ·˜æ±°é¡µã€‚ 5.ä½ æ€ä¹ˆç†è§£æ“ä½œç³»ç»Ÿé‡Œçš„å†…å­˜ç¢ç‰‡ï¼Œæœ‰ä»€ä¹ˆè§£å†³åŠæ³•ï¼Ÿ å†…å­˜ç¢ç‰‡åˆ†ä¸ºï¼šå†…éƒ¨ç¢ç‰‡å’Œå¤–éƒ¨ç¢ç‰‡ã€‚ å†…éƒ¨ç¢ç‰‡ï¼š å·²ç»è¢«åˆ†é…å‡ºå»ï¼ˆèƒ½æ˜ç¡®æŒ‡å‡ºå±äºå“ªä¸ªè¿›ç¨‹ï¼‰å´ä¸èƒ½è¢«åˆ©ç”¨çš„å†…å­˜ç©ºé—´ï¼› å†…å­˜æ³„æ¼ï¼šä¸å†ä¼šè¢«ä½¿ç”¨çš„å¯¹è±¡çš„å†…å­˜ä¸èƒ½è¢«å›æ”¶ ã€‚ å¤–éƒ¨ç¢ç‰‡ï¼š è¿˜æ²¡æœ‰è¢«åˆ†é…å‡ºå»ï¼ˆä¸å±äºä»»ä½•è¿›ç¨‹ï¼‰ï¼Œä½†ç”±äºå¤ªå°äº†æ— æ³•åˆ†é…ï¼Œç»™ç”³è¯·å†…å­˜ç©ºé—´çš„æ–°è¿›ç¨‹çš„å†…å­˜ç©ºé—²åŒºåŸŸã€‚ 6. ä»€ä¹ˆæ˜¯å†…å­˜æŠ–åŠ¨ï¼Ÿ ç°è±¡ï¼šåˆšåˆšæ¢å‡ºçš„é¡µé¢é©¬ä¸Šåˆè¦æ¢å…¥å†…å­˜ï¼Œåˆšåˆšæ¢å…¥çš„é¡µé¢é©¬ä¸Šåˆè¦æ¢å‡ºå¤–å­˜ï¼Œè¿™ç§é¢‘ç¹çš„é¡µé¢è°ƒåº¦è¡Œä¸ºç§°ä¸ºæŠ–åŠ¨ï¼Œæˆ–é¢ ç°¸ï¼› åŸå› ï¼š ç¨‹é¢‘ç¹è®¿é—®çš„é¡µé¢æ•°ç›®é«˜äºå¯ç”¨çš„ç‰©ç†å—æ•°(åˆ†é…ç»™è¿›ç¨‹çš„ç‰©ç†å—ä¸å¤Ÿ) ï¼› è§£å†³ï¼š åˆ†é…æ›´å¤šçš„ç‰©ç†å— 4.6 å¹¶å‘å’Œæ­»é” 0. ä»‹ç»å‡ ç§å…¸å‹çš„é”ï¼Ÿ è¯»å†™é”ã€‚ å¯ä»¥åŒæ—¶è¯»ï¼Œä½†å†™å¿…é¡»äº’æ–¥ï¼Œåªå…è®¸ä¸€ä¸ªå†™ï¼› äº’æ–¥é”ã€‚ ä¸€æ¬¡åªèƒ½ä¸€ä¸ªçº¿ç¨‹æ‹¥æœ‰é”ï¼Œå…¶å®ƒåªèƒ½ç­‰å¾…ï¼› æ¡ä»¶å˜é‡ï¼š äº’æ–¥é”ä¸€ä¸ªæ˜æ˜¾çš„ç¼ºç‚¹æ˜¯ä»–åªæœ‰ä¸¤ç§çŠ¶æ€ï¼šé”å®šå’Œéé”å®šï¼›è€Œæ¡ä»¶å˜é‡é€šè¿‡å…è®¸çº¿ç¨‹é˜»å¡å’Œç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹å‘é€ä¿¡å·çš„æ–¹æ³•å¼¥è¡¥äº†äº’æ–¥é”çš„ä¸è¶³ï¼› è‡ªæ—‹é”ã€‚ å¦‚æœè¿›çº¿ç¨‹æ— æ³•å–å¾—é”ï¼Œè¿›çº¿ç¨‹ä¸ä¼šç«‹åˆ»æ”¾å¼ƒCPUæ—¶é—´ç‰‡ï¼Œè€Œæ˜¯ä¸€ç›´å¾ªç¯å°è¯•è·å–é”ï¼Œç›´åˆ°è·å–ä¸ºæ­¢ã€‚ 1. ã€é‡ç‚¹ã€‘ä»€ä¹ˆæ˜¯çº¿ç¨‹æ­»é”ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘ç”Ÿæ­»é”ï¼Ÿè§£å†³æ­»é”çš„ç­–ç•¥æœ‰å“ªäº›ï¼Ÿ ä»€ä¹ˆæ˜¯æ­»é” æ­»é”æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹ï¼ˆçº¿ç¨‹ï¼‰åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”±äºç«äº‰èµ„æºæˆ–è€…ç”±äºå½¼æ­¤é€šä¿¡è€Œé€ æˆçš„ä¸€ç§é˜»å¡çš„ç°è±¡ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚æ­¤æ—¶ç§°ç³»ç»Ÿå¤„äºæ­»é”çŠ¶æ€æˆ–ç³»ç»Ÿäº§ç”Ÿäº†æ­»é”ï¼Œè¿™äº›æ°¸è¿œåœ¨äº’ç›¸ç­‰å¾…çš„è¿›ç¨‹ï¼ˆçº¿ç¨‹ï¼‰ç§°ä¸ºæ­»é”è¿›ç¨‹ï¼ˆçº¿ç¨‹ï¼‰ã€‚ å‘ç”Ÿæ­»é”çš„æ¡ä»¶ äº’æ–¥ï¼šä¸€ä¸ªèµ„æºåªèƒ½ç»™ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨ï¼› å æœ‰å¹¶ç­‰å¾…ï¼šè¿›ç¨‹æŒæœ‰èµ„æºå¹¶ç”³è¯·æ–°èµ„æºï¼Œåœ¨ç”³è¯·åˆ°éœ€è¦çš„èµ„æºä¹‹å‰ï¼Œå·²æœ‰çš„èµ„æºä¸é‡Šæ”¾ï¼› ä¸å¯å‰¥å¤ºï¼šè¿›ç¨‹ç”³è¯·åˆ°çš„èµ„æºåœ¨ä½¿ç”¨å®Œä¹‹å‰ï¼Œä¸å¯ä»¥è¢«å…¶ä»–è¿›ç¨‹ä½¿ç”¨ï¼› å¾ªç¯ç­‰å¾…ï¼šå„ä¸ªè¿›ç¨‹çš„èµ„æºè¯·æ±‚å½¢æˆé¦–å°¾è¿æ¥å¾ªç¯ç­‰å¾…ã€‚ è§£å†³æ–¹æ³•ï¼šé¢„é˜²ï¼Œé¿å…ï¼Œæ£€æµ‹ä¸æ¢å¤ä¸‰ç§ é¢„é˜²ï¼šç ´åæ­»é”ä¼šå‘ç”Ÿçš„å››ä¸ªæ¡ä»¶ ç ´åäº’æ–¥ï¼šè¿™ä¸ªæ¡ä»¶æˆ‘ä»¬æ²¡æœ‰åŠæ³•ç ´åï¼Œå› ä¸ºæˆ‘ä»¬ç”¨é”æœ¬æ¥å°±æ˜¯æƒ³è®©ä»–ä»¬äº’æ–¥çš„ ç ´åè¯·æ±‚å’Œä¿æŒï¼šå®è¡Œèµ„æºé¢„å…ˆåˆ†é…ç­–ç•¥ã€‚å³è¿›ç¨‹åœ¨è¿è¡Œå‰ä¸€æ¬¡æ€§åœ°å‘ç³»ç»Ÿç”³è¯·å®ƒæ‰€éœ€è¦çš„å…¨éƒ¨èµ„æºï¼› ç ´åä¸å‰¥å¤ºæ¡ä»¶ ï¼šå ç”¨éƒ¨åˆ†èµ„æºçš„çº¿ç¨‹è¿›â¼€æ­¥ç”³è¯·å…¶ä»–èµ„æºæ—¶ï¼Œå¦‚æœç”³è¯·ä¸åˆ°ï¼Œå¯ä»¥ä¸»åŠ¨é‡Šæ”¾å®ƒå æœ‰çš„èµ„æºï¼› ç ´åå¾ªç¯ç­‰å¾…ï¼šèµ„æºåˆ†ç±»æ ‡å·ï¼Œè¿›è¡Œæœ‰åºåˆ†é…ã€‚ é¿å…ï¼š å®ƒä¸é™åˆ¶è¿›ç¨‹æœ‰å…³ç”³è¯·èµ„æºçš„å‘½ä»¤ï¼Œè€Œæ˜¯å¯¹è¿›ç¨‹æ‰€å‘å‡ºçš„æ¯ä¸€ä¸ªç”³è¯·èµ„æºå‘½ä»¤åŠ ä»¥åŠ¨æ€åœ°æ£€æŸ¥ï¼Œå¹¶æ ¹æ®æ£€æŸ¥ç»“æœå†³å®šæ˜¯å¦è¿›è¡Œèµ„æºåˆ†é… å®‰å…¨åºåˆ—ï¼šæ‰¾åˆ°ä¸€ç§èƒ½è®©è¿›ç¨‹å®‰å…¨æ‰§è¡Œå®Œçš„æœ‰åºåºåˆ—&#123;P1ï¼ŒP2ï¼Œ...ï¼ŒPn&#125; é“¶è¡Œå®¶ç®—æ³•ï¼šç³»ç»Ÿåœ¨ä¸ºè¿›ç¨‹åˆ†é…èµ„æºä¹‹å‰ï¼Œé¦–å…ˆè®¡ç®—æ­¤æ¬¡èµ„æºåˆ†é…çš„å®‰å…¨æ€§ï¼Œå¦‚æœæ˜¯å®‰å…¨çš„ï¼Œåˆ™è¿›è¡Œåˆ†é…ï¼›å¦‚æœè¿™æ¬¡åˆ†é…ä¼šå¯¼è‡´è¿›å…¥ä¸å®‰å…¨çŠ¶æ€ï¼Œä¸è¿›è¡Œåˆ†é…ã€‚ æ¢å¤ï¼š ç”¨èµ„æºåˆ†é…å›¾ã€è¿›ç¨‹ç­‰å¾…å›¾æ¥ååŠ©è¿™ç§æ£€æµ‹å‡ºæ­»é”ï¼Œç„¶åè¿›è¡Œæ¢å¤ã€‚ ç³»ç»Ÿé‡æ–°å¯åŠ¨ï¼Œä½†ä»£ä»·å¾ˆå¤§ æ’¤æ¶ˆå‚ä¸æ­»é”çš„å…¨éƒ¨æˆ–éƒ¨åˆ†è¿›ç¨‹ï¼Œå‰¥å¤ºèµ„æº 1.1 ä»€ä¹ˆæ—¶å€™éœ€è¦ä½¿ç”¨åˆ†å¸ƒå¼é”ï¼Ÿ åœ¨å•ä½“åº”ç”¨çš„æ—¶å€™ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹è¦è®¿é—®å…±äº«èµ„æºçš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šå¸¸çº¿ç¨‹é—´åŠ é”çš„æœºåˆ¶ï¼Œåœ¨æŸä¸€ä¸ªæ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥å¯¹è¿™ä¸ªèµ„æºè¿›è¡Œæ“ä½œï¼Œå…¶ä»–çº¿ç¨‹éœ€è¦ç­‰å¾…é”çš„é‡Šæ”¾ï¼ŒJavaä¸­ä¹Ÿæœ‰ä¸€äº›å¤„ç†é”çš„æœºåˆ¶ï¼Œæ¯”å¦‚synchronizedã€‚ è€Œåˆ°äº†åˆ†å¸ƒå¼çš„ç¯å¢ƒä¸­ï¼Œå½“æŸä¸ªèµ„æºå¯ä»¥è¢«å¤šä¸ªç³»ç»Ÿè®¿é—®ä½¿ç”¨åˆ°çš„æ—¶å€™ï¼ˆä¾‹å¦‚ï¼Œæœ‰å¤šä¸ªå®¢æˆ·ç«¯éœ€è¦è®¿é—®å¹¶æ“ä½œåŒä¸€ä¸ªèµ„æºï¼Œè¿˜éœ€è¦ä¿æŒè¿™ä¸ªèµ„æºä¸€è‡´æ€§çš„æ—¶å€™ï¼Œå°±éœ€è¦ä½¿ç”¨ã€åˆ†å¸ƒå¼é”ï¼‰ï¼Œä¸ºäº†ä¿è¯å¤§å®¶è®¿é—®è¿™ä¸ªæ•°æ®æ˜¯ä¸€è‡´æ€§çš„ï¼Œé‚£ä¹ˆå°±è¦æ±‚å†åŒä¸€ä¸ªæ—¶åˆ»ï¼Œåªèƒ½è¢«ä¸€ä¸ªç³»ç»Ÿä½¿ç”¨ï¼Œè¿™æ—¶å€™çº¿ç¨‹ä¹‹é—´çš„é”æœºåˆ¶å°±æ— æ³•èµ·åˆ°ä½œç”¨äº†ï¼Œå› ä¸ºåˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œç³»ç»Ÿæ˜¯ä¼šéƒ¨ç½²åˆ°ä¸åŒçš„æœºå™¨ä¸Šé¢çš„ï¼Œé‚£ä¹ˆå°±éœ€è¦ã€åˆ†å¸ƒå¼é”ã€‘äº†ã€‚ 2. ï¼ˆå¾…è¡¥å……ï¼‰è¯·ä½ è§£é‡Šä¸€ä¸‹ï¼Œé€šå¸¸ç³»ç»ŸCPUæ¯”è¾ƒé«˜æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ é¦–å…ˆæŸ¥çœ‹æ˜¯å“ªäº›è¿›ç¨‹çš„CPUå ç”¨ç‡æœ€é«˜ 3.è¯´ä¸€ä¸‹NIOï¼ŒBIOï¼ŒAIOåŒºåˆ«? å‚è€ƒï¼šJAVaGuide ã€BIOï¼ˆåŒæ­¥é˜»å¡ï¼‰ã€‘ BIOï¼šåŒæ­¥é˜»å¡ IO æ¨¡å‹ä¸­ï¼Œåº”ç”¨ç¨‹åºå‘èµ· read è°ƒç”¨åï¼Œä¼šä¸€ç›´é˜»å¡ï¼Œç›´åˆ°åœ¨å†…æ ¸æŠŠ ã€‚ ã€NIOï¼ˆåŒæ­¥éé˜»å¡ï¼‰ã€‘ NIO æœ¬èº«æ˜¯åŸºäº äº‹ä»¶é©±åŠ¨ çš„æ€æƒ³æ¥å®ç°çš„ï¼Œå…¶ç›®çš„å°±æ˜¯è§£å†³ BIO çš„å¤§å¹¶å‘é—®é¢˜ï¼š BIO æ¨¡å‹ä¸­ï¼Œå¦‚æœéœ€è¦å¹¶å‘å¤„ç†å¤šä¸ª I/O è¯·æ±‚ï¼Œé‚£å°±éœ€è¦å¤šçº¿ç¨‹æ¥æ”¯æŒï¼› IO å¤šè·¯å¤ç”¨æ¨¡å‹ä¸­ï¼Œçº¿ç¨‹é¦–å…ˆå‘èµ· select è°ƒç”¨ï¼Œè¯¢é—®å†…æ ¸æ•°æ®æ˜¯å¦å‡†å¤‡å°±ç»ªï¼Œç­‰å†…æ ¸æŠŠæ•°æ®å‡†å¤‡å¥½äº†ï¼Œç”¨æˆ·çº¿ç¨‹å†å‘èµ· read è°ƒç”¨ã€‚read è°ƒç”¨çš„è¿‡ç¨‹ï¼ˆæ•°æ®ä»å†…æ ¸ç©ºé—´-&gt;ç”¨æˆ·ç©ºé—´ï¼‰è¿˜æ˜¯é˜»å¡çš„ã€‚ ã€AIOï¼ˆå¼‚æ­¥éé˜»å¡ï¼‰ã€‘ Java 7 ä¸­å¼•å…¥äº† NIO çš„æ”¹è¿›ç‰ˆ NIO 2,å®ƒæ˜¯å¼‚æ­¥ IO æ¨¡å‹ ã€‚ AIOï¼š å¼‚æ­¥éé˜»å¡æ— éœ€ä¸€ä¸ªçº¿ç¨‹å»è½®è¯¢æ‰€æœ‰IOæ“ä½œçš„çŠ¶æ€æ”¹å˜ï¼Œåœ¨ç›¸åº”çš„çŠ¶æ€æ”¹å˜åï¼Œç³»ç»Ÿä¼šé€šçŸ¥å¯¹åº”çš„çº¿ç¨‹æ¥å¤„ç†ã€‚ å¼‚æ­¥ IO æ˜¯åŸºäºäº‹ä»¶å’Œå›è°ƒæœºåˆ¶å®ç°çš„ï¼Œä¹Ÿå°±æ˜¯åº”ç”¨æ“ä½œä¹‹åä¼šç›´æ¥è¿”å›ï¼Œä¸ä¼šå µå¡åœ¨é‚£é‡Œï¼Œå½“åå°å¤„ç†å®Œæˆï¼Œæ“ä½œç³»ç»Ÿä¼šé€šçŸ¥ç›¸åº”çš„çº¿ç¨‹è¿›è¡Œåç»­çš„æ“ä½œã€‚ 0. 4. ã€é‡ç‚¹ã€‘ä»‹ç»ä¸€ä¸‹selectï¼Œpollï¼Œepoll åŸç†ï¼Ÿ å‚è€ƒ selectã€pollã€epollçš„åŸç†ä¸åŒºåˆ« 4.1 ä»é˜»å¡I/O &amp; éé˜»å¡I/Oè¯´èµ· é˜»å¡I/O åœ¨linuxä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰çš„socketéƒ½æ˜¯é˜»å¡çš„ã€‚ å½“ç”¨æˆ·è¿›ç¨‹è°ƒç”¨äº†read()/recvfrom()ç­‰ç³»ç»Ÿè°ƒç”¨å‡½æ•°ï¼Œå®ƒä¼šè¿›å…¥å†…æ ¸ç©ºé—´ä¸­ï¼› å½“è¿™ä¸ªç½‘ç»œI/Oæ²¡æœ‰æ•°æ®çš„æ—¶å€™ï¼Œå†…æ ¸å°±è¦ç­‰å¾…æ•°æ®çš„åˆ°æ¥ï¼Œæ­¤æ—¶ç”¨æˆ·è¿›ç¨‹è¢«é˜»å¡ï¼› å½“å†…æ ¸ç©ºé—´çš„æ•°æ®å‡†å¤‡å¥½äº†ï¼Œå®ƒå°±ä¼šå°†æ•°æ®ä»å†…æ ¸ç©ºé—´ä¸­æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ï¼› ç”¨æˆ·è¿›ç¨‹æ‰è§£é™¤é˜»å¡çš„çš„çŠ¶æ€ï¼Œé‡æ–°è¿è¡Œè¯»å–æ•°æ®ã€‚ éé˜»å¡I/O linuxä¸‹ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®socketä½¿å…¶å˜ä¸ºéé˜»å¡æ¨¡å¼ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå½“å†…æ ¸ç©ºé—´å¹¶æ— æ•°æ®çš„æ—¶å€™ï¼Œå®ƒä¼šé©¬ä¸Šè¿”å›ç»“æœè€Œä¸ä¼šé˜»å¡ã€‚ å½“ç”¨æˆ·è¿›ç¨‹è°ƒç”¨äº†read()/recvfrom()ç­‰ç³»ç»Ÿè°ƒç”¨å‡½æ•°ï¼Œå®ƒä¼šè¿›å…¥å†…æ ¸ç©ºé—´ä¸­ï¼› å¦‚æœå†…æ ¸ç©ºé—´ä¸­çš„æ•°æ®è¿˜æ²¡æœ‰å‡†å¤‡å¥½ï¼Œé‚£ä¹ˆå®ƒå¹¶ä¸ä¼šé˜»å¡ç”¨æˆ·è¿›ç¨‹ï¼Œè€Œæ˜¯ç«‹åˆ»è¿”å›ä¸€ä¸ªerrorï¼› å¯¹äºåº”ç”¨è¿›ç¨‹æ¥è¯´ï¼Œå®ƒå‘èµ·ä¸€ä¸ªread()æ“ä½œåï¼Œå¹¶ä¸éœ€è¦ç­‰å¾…ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥å†æ¬¡è°ƒç”¨read()/recvfrom()ç­‰å‡½æ•°ï¼› å½“å†…æ ¸ç©ºé—´çš„æ•°æ®å‡†å¤‡å¥½äº†ï¼Œå®ƒå°±ä¼šå°†æ•°æ®ä»å†…æ ¸ç©ºé—´ä¸­æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ï¼› ç”¨æˆ·è¿›ç¨‹æ‰è§£é™¤é˜»å¡çš„çš„çŠ¶æ€ï¼Œé‡æ–°è¿è¡Œè¯»å–æ•°æ®ã€‚ å¤šè·¯å¤ç”¨I/Oå°±æ˜¯æˆ‘ä»¬è¯´çš„selectï¼Œpollï¼Œepollç­‰æ“ä½œï¼Œå¤ç”¨çš„å¥½å¤„å°±åœ¨äºå•ä¸ªè¿›ç¨‹å°±å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªç½‘ç»œè¿æ¥çš„I/Oï¼Œèƒ½å®ç°è¿™ç§åŠŸèƒ½çš„åŸç†å°±æ˜¯selectã€pollã€epollç­‰å‡½æ•°ä¼šä¸æ–­çš„è½®è¯¢å®ƒä»¬æ‰€è´Ÿè´£çš„æ‰€æœ‰socketï¼Œå½“æŸä¸ªsocketæœ‰æ•°æ®åˆ°è¾¾äº†ï¼Œå°±é€šçŸ¥ç”¨æˆ·è¿›ç¨‹ã€‚ 4.2 selectåŸç† æ›´åŠ æ·±åˆ»å¯¹æ¯”ç†è§£ï¼šLinuxç¼–ç¨‹ä¹‹select 1int select (int n, fd_set *readfds, fd_set *writefds, fd_set *exceptfds, struct timeval *timeout); selectå‡½æ•°ç›‘è§†çš„æ–‡ä»¶socketæè¿°ç¬¦åˆ†3ç±»ï¼Œåˆ†åˆ«æ˜¯writefdsã€readfdsã€å’Œexceptfdsï¼› è°ƒç”¨åselectå‡½æ•°ä¼šé˜»å¡ï¼ˆä¸æ˜¯çº¿ç¨‹ï¼‰ï¼Œç›´åˆ°æœ‰æè¿°ç¬¦å°±ç»ªï¼ˆæœ‰æ•°æ® å¯readã€å¯writeã€exceptã€è¶…æ—¶timeoutï¼‰ï¼Œå‡½æ•°è¿”å›ã€‚ 123456789101112131415&#123; select(socket); while(1) &#123; sockets = select(); // è¿˜æ˜¯è¦ä»å†…æ ¸æ‹·è´åˆ°ç”¨æˆ· for(socket in sockets) &#123; if(can_read(socket)) &#123; read(socket, buffer); process(buffer); &#125; &#125; &#125;&#125; è¯¦ç»†æ‰§è¡ŒåŸç†å¦‚ä¸‹ï¼š ç”¨æˆ·é¦–å…ˆå°†éœ€è¦è¿›è¡ŒIOæ“ä½œçš„socketæ·»åŠ åˆ°selectä¸­ï¼Œç„¶åé˜»å¡å‡½æ•°selectï¼ˆä¸æ˜¯çº¿ç¨‹ï¼‰ç­‰å¾…ç³»ç»Ÿè°ƒç”¨è¿”å›ï¼› å½“æ•°æ®åˆ°è¾¾æ—¶ï¼Œsocketè¢«æ¿€æ´»ï¼Œselectå‡½æ•°è¿”å›ï¼Œä¼šå”¤é†’å…¶ç­‰å¾…é˜Ÿåˆ—ä¸Šç¡çœ çš„å†…æ ¸è¿›ç¨‹ï¼Œå³åœ¨socketå¯è¯»å†™æ—¶å”¤é†’ï¼Œæˆ–è€…åœ¨è¶…æ—¶åå”¤é†’ï¼› æ¯æ¬¡è°ƒç”¨selectæŸ¥çœ‹fdï¼Œéƒ½éœ€è¦æŠŠfdé›†åˆæ‹·è´è¿›è¡Œç³»ç»Ÿè°ƒç”¨é™·å…¥å†…æ ¸æ€ ã€‚ è¿”å›select()å‡½æ•°çš„è°ƒç”¨ç»“æœç»™ç”¨æˆ·è¿›ç¨‹ï¼Œè¿”å›å°±ç»ªsocketæè¿°ç¬¦çš„æ•°ç›®ï¼Œè¶…æ—¶è¿”å›0ï¼Œå‡ºé”™è¿”å›-1ï¼› åœ¨select()å‡½æ•°è¿”å›åè¿˜æ˜¯éœ€è¦è½®è¯¢å»æ‰¾åˆ°å°±ç»ªçš„socketæè¿°ç¬¦çš„ï¼ˆå°†æ­¤å‰ä¼ å…¥å†…æ ¸ç©ºé—´çš„fd_setæ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ï¼‰ï¼Œæ­¤æ—¶ç”¨æˆ·è¿›ç¨‹æ‰å¯ä»¥å»æ“ä½œsocketï¼› è¿›ç¨‹è°ƒç”¨read() / recvfrom() è¯»å–æ•°æ® ã€‚ selectä¼˜ç‚¹ï¼š ä»æµç¨‹ä¸Šæ¥çœ‹ï¼Œä½¿ç”¨selectå‡½æ•°è¿›è¡ŒIOè¯·æ±‚å’ŒåŒæ­¥é˜»å¡æ¨¡å‹æ²¡æœ‰å¤ªå¤§çš„åŒºåˆ«ï¼Œç”šè‡³è¿˜å¤šäº†æ·»åŠ ç›‘è§†socketï¼Œä»¥åŠè°ƒç”¨selectå‡½æ•°çš„é¢å¤–æ“ä½œï¼Œæ•ˆç‡æ›´å·®ã€‚ é‚£ä¸ºä»€ä¹ˆè¿˜è¦ä½¿ç”¨selectï¼Ÿ ä½¿ç”¨selectä»¥åæœ€å¤§çš„ä¼˜åŠ¿æ˜¯ç”¨æˆ·å¯ä»¥åœ¨ä¸€ä¸ªçº¿ç¨‹å†…åŒæ—¶å¤„ç†å¤šä¸ªsocketçš„IOè¯·æ±‚ã€‚ç”¨æˆ·å¯ä»¥æ³¨å†Œå¤šä¸ªsocketï¼Œç„¶åä¸æ–­åœ°è°ƒç”¨selectè¯»å–è¢«æ¿€æ´»çš„socketï¼Œå³å¯è¾¾åˆ°åœ¨åŒä¸€ä¸ªçº¿ç¨‹å†…åŒæ—¶å¤„ç†å¤šä¸ªIOè¯·æ±‚çš„ç›®çš„ï¼› è€Œåœ¨åŒæ­¥é˜»å¡æ¨¡å‹ä¸­ï¼Œå¿…é¡»é€šè¿‡å¤šçº¿ç¨‹çš„æ–¹å¼æ‰èƒ½è¾¾åˆ°è¿™ä¸ªç›®çš„ã€‚ selectç¼ºç‚¹ï¼š æè¿°ç¬¦æ•°é‡ï¼šselectæ”¯æŒçš„æ–‡ä»¶æè¿°ç¬¦æ•°é‡å¤ªå°äº†ï¼Œé»˜è®¤æ˜¯1024 ï¼› ç³»ç»Ÿå¼€é”€ï¼šæ¯æ¬¡è°ƒç”¨selectéƒ½éœ€è¦æŠŠfdé›†åˆæ‹·è´è¿›è¡Œç³»ç»Ÿè°ƒç”¨é™·å…¥å†…æ ¸æ€ï¼Œè¿™ä¸ªå¼€é”€åœ¨fdå¾ˆå¤šæ—¶ä¼šå¾ˆå¤§ ï¼› äºŒæ¬¡è½®è¯¢ï¼šselectéœ€è¦äºŒæ¬¡æŸ¥è¯¢æ‹·è´æ‰€æœ‰æ–‡ä»¶æè¿°fd_setè¿›è¡Œéå†æŸ¥çœ‹æ˜¯å¦æœ‰æè¿°ç¬¦å‡†å¤‡å°±ç»ªã€‚ 4.3 pollåŸç† 1234567int poll (struct pollfd *fds, unsigned int nfds, int timeout);struct pollfd &#123; int fd; /* file descriptor */ short events; /* requested events to watch */ short revents; /* returned events witnessed */&#125;; ä¸åŒä¸selectä½¿ç”¨ä¸‰ä¸ªä½å›¾æ¥è¡¨ç¤ºä¸‰ä¸ªfdsetçš„æ–¹å¼ï¼Œpollä½¿ç”¨ä¸€ä¸ª pollfdæŒ‡é’ˆå®ç°ã€‚ pollä½¿ç”¨é“¾è¡¨ç»´æŠ¤è¿™äº›socketæè¿°ç¬¦ï¼Œè€Œselectä½¿ç”¨çš„æ˜¯æ•°ç»„ï¼ˆä½å›¾ï¼‰ã€‚ å…¶ä»–çš„éƒ½å·®ä¸å¤šå’Œselect()å‡½æ•°ä¸€æ ·ï¼Œpoll()å‡½æ•°è¿”å›åï¼Œéœ€è¦è½®è¯¢pollfdæ¥è·å–å°±ç»ªçš„æè¿°ç¬¦ï¼Œæ ¹æ®æè¿°ç¬¦çš„çŠ¶æ€è¿›è¡Œå¤„ç†ï¼Œä½†æ˜¯pollæ²¡æœ‰æœ€å¤§æ–‡ä»¶æè¿°ç¬¦æ•°é‡çš„é™åˆ¶ã€‚ pollç¼ºç‚¹ï¼š è§£å†³äº†selecç¬¬ä¸€ä¸ªç¼ºç‚¹ï¼ˆæ–‡ä»¶æè¿°ç¬¦æ•°é‡å¤ªå°‘ï¼‰ï¼Œä½†æ˜¯ä¾æ—§å­˜åœ¨åé¢ä¸¤ä¸ªç¼ºç‚¹ã€‚ ç³»ç»Ÿå¼€é”€ï¼šæ¯æ¬¡è°ƒç”¨polléƒ½éœ€è¦æŠŠfdé›†åˆæ‹·è´è¿›è¡Œç³»ç»Ÿè°ƒç”¨é™·å…¥å†…æ ¸æ€ï¼Œè¿™ä¸ªå¼€é”€åœ¨fdå¾ˆå¤šæ—¶ä¼šå¾ˆå¤§ ï¼› äºŒæ¬¡è½®è¯¢ï¼špolléœ€è¦äºŒæ¬¡æŸ¥è¯¢æ‹·è´æ‰€æœ‰æ–‡ä»¶æè¿°fd_setè¿›è¡Œéå†æŸ¥çœ‹æ˜¯å¦æœ‰æè¿°ç¬¦å‡†å¤‡å°±ç»ªã€‚ 4.3 epollåŸç† 1234567// epollåªæœ‰epoll_create()ã€epoll_ctl()ã€epoll_wait() 3ä¸ªç³»ç»Ÿè°ƒç”¨å‡½æ•°ã€‚int epoll_create(int size); int epoll_ctl(int epfd, int op, int fd, struct epoll_event *event);int epoll_wait(int epfd, struct epoll_event *events, int maxevents, int timeout); epoll_create åˆ›å»ºä¸€ä¸ªepollæ–‡ä»¶æè¿°ç¬¦çš„epfdï¼ˆæˆ–è€…ç§°ä¹‹ä¸ºå¥æŸ„ï¼‰, epollä½¿ç”¨ä¸€ä¸ªepfdæ–‡ä»¶æè¿°ç¬¦ç®¡ç†å¤šä¸ªsocketæè¿°ç¬¦ã€‚ å½“åˆ›å»ºå¥½epollå¥æŸ„åï¼Œå®ƒå°±æ˜¯ä¼šå ç”¨ä¸€ä¸ªfdå€¼ï¼Œå¿…é¡»è°ƒç”¨close()å…³é—­ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´fdè¢«è€—å°½ ã€‚ epoll_ctl è¯¥å‡½æ•°ç”¨äºæ§åˆ¶æŸä¸ªepollæ–‡ä»¶æè¿°ç¬¦ä¸Šçš„äº‹ä»¶ï¼Œå¯ä»¥æ³¨å†Œäº‹ä»¶ï¼Œä¿®æ”¹äº‹ä»¶ï¼Œä»¥åŠåˆ é™¤äº‹ä»¶ã€‚ç›¸å…³å‚æ•°ï¼š ä½¿ç”¨çº¢é»‘æ ‘å¯¹ç›‘è§†çš„æ–‡ä»¶æè¿°ç¬¦è¿›è¡Œï¼šæ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤ç­‰ã€‚ epdfï¼šç”±epoll_create()å‡½æ•°è¿”å›çš„epollæ–‡ä»¶æè¿°ç¬¦ï¼ˆå¥æŸ„ï¼‰ï¼› op ï¼š opæ˜¯æ“ä½œçš„é€‰é¡¹ï¼Œæ³¨å†Œè¦ç›‘å¬çš„ç›®æ ‡socketæè¿°ç¬¦fdåˆ°epollå¥æŸ„ä¸­ ï¼›ä¿®æ”¹epollå¥æŸ„å·²ç»æ³¨å†Œçš„fdçš„ç›‘å¬äº‹ä»¶ï¼›ä»epollå¥æŸ„åˆ é™¤å·²ç»æ³¨å†Œçš„socketæè¿°ç¬¦ ï¼› fdï¼šæŒ‡å®šç›‘å¬çš„socketæè¿°ç¬¦ï¼› eventï¼šäº‹ä»¶ 1234567891011typedef union epoll_data &#123; void *ptr; int fd; uint32_t u32; uint64_t u64;&#125; epoll_data_t;struct epoll_event &#123; uint32_t events; /* Epoll events */ epoll_data_t data; /* User data variable */&#125;; epoll_wait() epoll_wait()å‡½æ•°çš„ä½œç”¨å°±æ˜¯ç­‰å¾…ç›‘å¬çš„äº‹ä»¶çš„å‘ç”Ÿï¼Œç±»ä¼¼äºè°ƒç”¨select()å‡½æ•°ã€‚ ç›¸å…³å‚æ•°å¦‚ä¸‹ï¼š å‡½æ•°çš„è¿”å›å€¼è¡¨ç¤ºéœ€è¦å¤„ç†çš„äº‹ä»¶æ•°ç›®ï¼Œå¦‚è¿”å›0è¡¨ç¤ºå·²è¶…æ—¶ã€‚ eventsï¼šç”¨æ¥ä»å†…æ ¸å¾—åˆ°äº‹ä»¶çš„é›†åˆã€‚ maxevents ï¼šå‘Šä¹‹å†…æ ¸è¿™ä¸ªeventsæœ‰å¤šå¤§ï¼Œè¿™ä¸ª maxeventsçš„å€¼ä¸èƒ½å¤§äºåˆ›å»ºepoll_create()æ—¶çš„æŒ‡å®šçš„sizeã€‚ timeoutï¼šè¶…æ—¶æ—¶é—´ã€‚ epollé«˜æ•ˆè¿è¡Œè¿‡ç¨‹ å‚è€ƒï¼šå½»åº•ææ‡‚epollé«˜æ•ˆè¿è¡Œçš„åŸç† æ‰§è¡Œepoll_createä¼šåœ¨å†…æ ¸çš„é«˜é€ŸcacheåŒºä¸­å»ºç«‹ä¸€é¢—çº¢é»‘æ ‘ä»¥åŠå°±ç»ªé“¾è¡¨(è¯¥é“¾è¡¨å­˜å‚¨å·²ç»å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦)ã€‚æ¥ç€ç”¨æˆ·æ‰§è¡Œepoll_ctl å‡½æ•°æ·»åŠ æ–‡ä»¶æè¿°ç¬¦ä¼šåœ¨çº¢é»‘æ ‘ä¸Šå¢åŠ ç›¸åº”çš„ç»“ç‚¹ã€‚ selectï¼šåˆ›å»º3ä¸ªæ–‡ä»¶æè¿°ç¬¦é›†å¹¶æ‹·è´åˆ°å†…æ ¸ä¸­ ; pollï¼šå°†ä¼ å…¥çš„struct pollfdç»“æ„ä½“æ•°ç»„æ‹·è´åˆ°å†…æ ¸ä¸­è¿›è¡Œç›‘å¬ã€‚ è°ƒç”¨epoll_wait é˜»å¡ï¼Œç­‰å¾…å¯è¯»äº‹ä»¶ï¼› å†…æ ¸åœ¨æ£€æµ‹åˆ°æ»¡è¶³æ¡ä»¶çš„socketæè¿°ç¬¦ä¼šè°ƒç”¨å›è°ƒå‡½æ•° ï¼Œå›è°ƒå‡½æ•°å°†æ–‡ä»¶æè¿°ç¬¦æ”¾åœ¨å°±ç»ªé“¾è¡¨ä¸­ ï¼› è€Œselect/poll éƒ½éœ€è¦ ï¼Œéå†æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦fd_set ã€‚ è€Œæ‰§è¡Œepoll_ctlçš„addæ“ä½œæ—¶ï¼Œä¸ä»…å°†æ–‡ä»¶æè¿°ç¬¦æ”¾åˆ°çº¢é»‘æ ‘ä¸Šï¼Œè€Œä¸”ä¹Ÿæ³¨å†Œäº†å›è°ƒå‡½æ•°ï¼Œåªéœ€è°ƒç”¨å›è°ƒå‡½æ•°ã€‚ epoll_waitåªç”¨è§‚å¯Ÿå°±ç»ªé“¾è¡¨ä¸­æœ‰æ— æ•°æ®å³å¯ï¼Œæœ€åå°†é“¾è¡¨çš„æ•°æ®è¿”å›ç»™è¯»å†™äº‹ä»¶æ•°ç»„events &amp;è¿”å›å°±ç»ªçš„æ•°é‡ï¼Œåªç”¨éå†eventsä¾æ¬¡å¤„ç†å³å¯ã€‚ è¿™é‡Œè¿”å›çš„æ–‡ä»¶æè¿°ç¬¦æ˜¯é€šè¿‡mmapè®©å†…æ ¸å’Œç”¨æˆ·ç©ºé—´å…±äº«åŒä¸€å—å†…å­˜å®ç°ä¼ é€’çš„ï¼Œå‡å°‘äº†ä¸å¿…è¦çš„æ‹·è´ã€‚ è€Œselect/poll åªè¿”å›socketå°±ç»ªæ•°ç›®ï¼Œ è¿˜éœ€è¦å°†æ‰€æœ‰çš„æ–‡ä»¶æè¿°ç¬¦å†æ¬¡ä»å†…æ ¸â†’ç”¨æˆ·ï¼Œéå†å°±ç»ªçš„socketæ–‡ä»¶æè¿°ç¬¦ã€‚ 4.4 selectï¼Œpollï¼Œepoll å„è‡ªåŒºåˆ«ï¼Ÿ ä¸é”™çš„æ–‡ç« ï¼šhttps://www.codenong.com/cs105364662/ ç›¸åŒç‚¹ï¼š selectï¼Œpollï¼Œepoll éƒ½æ˜¯ IO å¤šè·¯å¤ç”¨çš„æœºåˆ¶ï¼ˆNIOï¼Ÿyesï¼‰ï¼› IO å¤šè·¯å¤ç”¨çš„æœ¬è´¨æ˜¯é€šè¿‡ä¸€ç§æœºåˆ¶ï¼Œè®©å•ä¸ªè¿›ç¨‹å¯ä»¥ç›‘è§†å¤šä¸ªæè¿°ç¬¦ï¼Œå½“å‘ç°æŸä¸ªæè¿°ç¬¦å°±ç»ªä¹‹åï¼Œèƒ½å¤Ÿé€šçŸ¥ç¨‹åºè¿›è¡Œç›¸åº”çš„æ“ä½œã€‚ selectï¼Œpollï¼Œepoll éƒ½æ˜¯åŒæ­¥ IO ã€‚ ä¸åŒç‚¹ï¼š IO æ•ˆç‡ï¼šï¼ˆ1ï¼‰select åªçŸ¥é“æœ‰ IO äº‹ä»¶å‘ç”Ÿï¼Œå´ä¸çŸ¥é“æ˜¯å“ªå‡ ä¸ªæµï¼Œåªèƒ½é‡‡å–è½®è¯¢æ‰€æœ‰æµï¼ˆ fd_set é›†åˆï¼‰çš„æ–¹å¼ï¼Œæ•…å…¶å…·æœ‰ O(n) çš„æ— å·®åˆ«è½®è¯¢å¤æ‚åº¦ï¼Œå¤„ç†çš„æµè¶Šå¤šï¼Œæ— å·®åˆ«è½®è¯¢æ—¶é—´å°±è¶Šé•¿ï¼›ï¼ˆ2ï¼‰poll ä¸ select å¹¶æ— åŒºåˆ«ï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯O(n)ï¼›ï¼ˆ3ï¼‰epoll ä¼šå°†å“ªä¸ªæµå‘ç”Ÿäº†æ€æ ·çš„ IO äº‹ä»¶é€šçŸ¥æˆ‘ä»¬ï¼ˆå½“æè¿°ç¬¦å°±ç»ªæ—¶ï¼Œç³»ç»Ÿæ³¨å†Œçš„å›è°ƒå‡½æ•°ä¼šè¢«è°ƒç”¨ï¼Œå°†å°±ç»ªæè¿°ç¬¦æ”¾åˆ° readyList é‡Œé¢ï¼‰ï¼Œå®ƒæ˜¯äº‹ä»¶é©±åŠ¨çš„ï¼Œå…¶æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼› æ“ä½œæ–¹å¼ï¼šselect å’Œ poll éƒ½æ˜¯é‡‡å–éå†çš„æ–¹å¼ï¼Œè€Œ epoll åˆ™æ˜¯é‡‡å–äº†å›è°ƒçš„æ–¹å¼ï¼› åº•å±‚å®ç°ï¼šselect çš„åº•å±‚å®ç°ä¸ºæ•°ç»„ï¼Œpoll çš„åº•å±‚å®ç°ä¸ºé“¾è¡¨ï¼›è€Œ epoll çš„åº•å±‚å®ç°ä¸ºçº¢é»‘æ ‘ï¼› æœ€å¤§è¿æ¥æ•°ï¼šselect çš„æœ€å¤§è¿æ¥æ•°ä¸º 1024 æˆ– 2048ï¼›è€Œ poll å’Œ epoll æ˜¯æ— ä¸Šé™çš„ï¼› å¯¹æè¿°ç¬¦çš„æ‹·è´ï¼šselect å’Œ poll æ¯æ¬¡è¢«è°ƒç”¨æ—¶éƒ½ä¼šæŠŠæè¿°ç¬¦é›†åˆä»ç”¨æˆ·æ€æ‹·è´åˆ°å†…æ ¸æ€ï¼Œè€Œ epoll åœ¨è°ƒç”¨ epoll_ctl æ—¶ä¼šæ‹·è´è¿›å†…æ ¸å¹¶ä¿å­˜ï¼Œä¹‹åæ¯æ¬¡ epoll_wait æ—¶ä¸ä¼šæ‹·è´ï¼› æ€§èƒ½ï¼šepoll åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹æ€§èƒ½è¿œè¶… select å’Œ pollï¼Œä½†åœ¨è¿æ¥æ•°å°‘å¹¶ä¸”è¿æ¥éƒ½ååˆ†æ´»è·ƒçš„æƒ…å†µä¸‹ï¼Œselect å’Œ poll çš„æ€§èƒ½å¯èƒ½æ¯” epoll å¥½ï¼Œå› ä¸º epoll çš„é€šçŸ¥æœºåˆ¶éœ€è¦å¾ˆå¤šå‡½æ•°å›è°ƒ ã€‚ 4.5 ET , LT æ¨¡å¼ä»‹ç»ï¼Ÿå„è‡ªä¼˜ç¼ºç‚¹ï¼Ÿ å‚è€ƒï¼šhttps://cloud.tencent.com/developer/article/1636224 è¾¹ç¼˜è§¦å‘æ¨¡å¼ï¼ˆEdge Triggerï¼ŒETï¼‰ï¼Œåªæœ‰ä¸€ä¸ªäº‹ä»¶ä»æ— åˆ°æœ‰æ‰ä¼šè§¦å‘ï¼› ä½ç”µå¹³ =&gt; é«˜ç”µå¹³ ã€‚ æ°´å¹³è§¦å‘æ¨¡å¼ï¼ˆLevel Triggerï¼ŒLTï¼‰ï¼Œä¸€ä¸ªäº‹ä»¶åªè¦æœ‰ï¼Œå°±ä¼šä¸€ç›´è§¦å‘ã€‚ ä½ç”µå¹³ =&gt; é«˜ç”µå¹³ ; 2. å¤„äºé«˜ç”µå¹³çŠ¶æ€ ä¸¾ä¾‹è¯´æ˜ socket çš„è¯»äº‹ä»¶ LTæ¨¡å¼ï¼Œåªè¦ socket ä¸Šæœ‰æœªè¯»å®Œçš„æ•°æ®ï¼Œå°±ä¼šä¸€ç›´äº§ç”Ÿ EPOLLIN äº‹ä»¶ï¼› ETæ¨¡å¼ï¼Œsocket ä¸Šæ¯æ–°æ¥ä¸€æ¬¡æ•°æ®å°±ä¼šè§¦å‘ä¸€æ¬¡ï¼Œå¦‚æœä¸Šä¸€æ¬¡è§¦å‘åï¼Œæœªå°† socket ä¸Šçš„æ•°æ®è¯»å®Œï¼Œä¹Ÿä¸ä¼šå†è§¦å‘ï¼Œé™¤éå†æ–°æ¥ä¸€æ¬¡æ•°æ®ã€‚ å¯¹äº socket å†™äº‹ä»¶ LTæ¨¡å¼ï¼Œå¦‚æœ socket çš„ TCP çª—å£ä¸€ç›´ä¸é¥±å’Œï¼Œä¼šä¸€ç›´è§¦å‘ EPOLLOUT äº‹ä»¶ï¼› ETæ¨¡å¼ï¼Œåªä¼šè§¦å‘ä¸€æ¬¡ï¼Œé™¤é TCP çª—å£ç”±ä¸é¥±å’Œå˜æˆé¥±å’Œå†ä¸€æ¬¡å˜æˆä¸é¥±å’Œï¼Œæ‰ä¼šå†æ¬¡è§¦å‘ EPOLLOUT äº‹ä»¶ã€‚ ä¼˜ç¼ºç‚¹ ä½¿ç”¨ LT æ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªç”±å†³å®šæ¯æ¬¡æ”¶å–å¤šå°‘å­—èŠ‚ï¼ˆå¯¹äºæ™®é€š socketï¼‰æˆ–ä½•æ—¶æ¥æ”¶è¿æ¥ï¼ˆå¯¹äºä¾¦å¬ socketï¼‰ï¼Œä½†æ˜¯å¯èƒ½ä¼šå¯¼è‡´å¤šæ¬¡è§¦å‘ï¼› ä½¿ç”¨ ET æ¨¡å¼ï¼Œæˆ‘ä»¬å¿…é¡»æ¯æ¬¡éƒ½è¦å°†æ•°æ®æ”¶å®Œï¼ˆå¯¹äºæ™®é€š socketï¼‰æˆ–å¿…é¡»ç†è§£è°ƒç”¨ accept æ¥æ”¶è¿æ¥ï¼ˆå¯¹äºä¾¦å¬socketï¼‰ï¼Œå…¶ä¼˜ç‚¹æ˜¯è§¦å‘æ¬¡æ•°å°‘ã€‚ 5. æ“ä½œç³»ç»Ÿåº•å±‚æ˜¯æ€ä¹ˆå®ç°åŸå­æ“ä½œçš„ï¼Ÿ å¤„ç†å™¨ä½¿ç”¨åŸºäºå¯¹ç¼“å­˜åŠ é”æˆ–æ€»çº¿åŠ é”çš„æ–¹å¼ï¼Œæ¥å®ç°å¤šå¤„ç†å™¨ä¹‹é—´çš„åŸå­æ“ä½œã€‚ æ€»çº¿é”ï¼š å¤„ç†å™¨æä¾›çš„ä¸€ä¸ªLOCKï¼ƒä¿¡å·ï¼Œå½“ä¸€ä¸ªå¤„ç†å™¨åœ¨æ€»çº¿ä¸Šè¾“å‡ºæ­¤ä¿¡å·æ—¶ï¼Œå…¶ä»–å¤„ç†å™¨çš„è¯·æ±‚å°†è¢«é˜»å¡ä½ï¼Œé‚£ä¹ˆè¯¥å¤„ç†å™¨å¯ä»¥ç‹¬å å…±äº«å†…å­˜ï¼› æ€»çº¿é”å®šæŠŠCPUå’Œå†…å­˜ä¹‹é—´çš„é€šä¿¡é”ä½äº†ï¼Œè¿™ä½¿å¾—é”å®šæœŸé—´ï¼Œå…¶ä»–å¤„ç†å™¨ä¸èƒ½æ“ä½œå…¶ä»–å†…å­˜åœ°å€çš„æ•°æ® ç¼“å­˜é”ï¼šç›¸æ¯”æ€»çº¿é”ï¼Œç¼“å­˜é”å³é™ä½äº†é”çš„åŠ›åº¦ã€‚æ ¸å¿ƒæœºåˆ¶æ˜¯åŸºäºç¼“å­˜ä¸€è‡´æ€§åè®®æ¥å®ç°çš„ã€‚ è¯¦ç»†å‚è€ƒï¼šJMMåŸºç¡€ï¼ˆæ€»çº¿é”ã€ç¼“å­˜é”ã€MESIç¼“å­˜ä¸€è‡´æ€§åè®®ã€CPU å±‚é¢çš„å†…å­˜å±éšœï¼‰ 4.7 å…¶å®ƒ 1. å¸¸è§çš„ç£ç›˜è°ƒåº¦ç®—æ³•ï¼Ÿ è¯»å†™ä¸€ä¸ªç£ç›˜å—çš„æ—¶é—´çš„å½±å“å› ç´ æœ‰ï¼š æ—‹è½¬æ—¶é—´ï¼ˆä¸»è½´è½¬åŠ¨ç›˜é¢ï¼Œä½¿å¾—ç£å¤´ç§»åŠ¨åˆ°é€‚å½“çš„æ‰‡åŒºä¸Šï¼‰ å¯»é“æ—¶é—´ï¼ˆåˆ¶åŠ¨æ‰‹è‡‚ç§»åŠ¨ï¼Œä½¿å¾—ç£å¤´ç§»åŠ¨åˆ°é€‚å½“çš„ç£é“ä¸Šï¼‰ å®é™…çš„æ•°æ®ä¼ è¾“æ—¶é—´ å…¶ä¸­ï¼Œå¯»é“æ—¶é—´æœ€é•¿ï¼Œå› æ­¤ç£ç›˜è°ƒåº¦çš„ä¸»è¦ç›®æ ‡æ˜¯ä½¿ç£ç›˜çš„å¹³å‡å¯»é“æ—¶é—´æœ€çŸ­ã€‚ å…ˆæ¥å…ˆæœåŠ¡ã€‚ æŒ‰ç…§ç£ç›˜è¯·æ±‚çš„é¡ºåºè¿›è¡Œè°ƒåº¦ã€‚ ä¼˜ç‚¹ï¼šå…¬å¹³ã€ç®€å•ï¼› ç¼ºç‚¹ï¼šæœªå¯¹å¯»é“åšä»»ä½•ä¼˜åŒ–ï¼Œä½¿å¹³å‡å¯»é“æ—¶é—´å¯èƒ½è¾ƒé•¿ã€‚ æœ€çŸ­å¯»é“ä¼˜å…ˆã€‚ ä¼˜å…ˆè°ƒåº¦ä¸å½“å‰ç£å¤´æ‰€åœ¨ç£é“è·ç¦»æœ€è¿‘çš„ç£é“ã€‚ ä¼˜ç‚¹ï¼š å¹³å‡å¯»é“æ—¶é—´æ¯”è¾ƒä½ï¼› ç¼ºç‚¹ï¼šä¸å…¬å¹³ï¼Œå¦‚æœæ–°åˆ°è¾¾çš„ç£é“è¯·æ±‚æ€»æ˜¯æ¯”ä¸€ä¸ªåœ¨ç­‰å¾…çš„ç£é“è¯·æ±‚è¿‘ï¼Œé‚£ä¹ˆåœ¨ç­‰å¾…çš„ç£é“è¯·æ±‚ä¼šä¸€ç›´ç­‰å¾…ä¸‹å»ã€‚ ç”µæ¢¯æ‰«æç®—æ³•ã€‚ ç”µæ¢¯æ€»æ˜¯ä¿æŒä¸€ä¸ªæ–¹å‘è¿è¡Œï¼Œç›´åˆ°è¯¥æ–¹å‘æ²¡æœ‰è¯·æ±‚ä¸ºæ­¢ï¼Œç„¶åæ”¹å˜è¿è¡Œæ–¹å‘ã€‚ ä¼˜ç‚¹ï¼š æ€§èƒ½è¾ƒå¥½ï¼ŒåŒæ—¶ä¸ä¼šå­˜åœ¨é¥¥é¥¿ç°è±¡ã€‚ 2. æœåŠ¡å™¨é«˜å¹¶å‘çš„è§£å†³æ–¹æ¡ˆä½ çŸ¥é“å¤šå°‘ï¼Ÿ åº”ç”¨æ•°æ®ä¸é™æ€èµ„æºåˆ†ç¦»ï¼šå°†é™æ€èµ„æºï¼ˆå›¾ç‰‡ï¼Œè§†é¢‘ï¼Œjsï¼Œcssç­‰ï¼‰å•ç‹¬ä¿å­˜åˆ°ä¸“é—¨çš„é™æ€èµ„æºæœåŠ¡å™¨ä¸­ï¼Œåœ¨å®¢æˆ·ç«¯è®¿é—®çš„æ—¶å€™ä»é™æ€èµ„æºæœåŠ¡å™¨ä¸­è¿”å›é™æ€èµ„æºï¼Œä»ä¸»æœåŠ¡å™¨ä¸­è¿”å›åº”ç”¨æ•°æ®ï¼› å®¢æˆ·ç«¯ç¼“å­˜ ï¼šä¾‹å¦‚å…ˆç”Ÿæˆé™æ€é¡µé¢ï¼Œç„¶åç”¨ajaxå¼‚æ­¥è¯·æ±‚è·å–åŠ¨æ€æ•°æ®ï¼› é›†ç¾¤å’Œåˆ†å¸ƒå¼ ï¼šä½¿ç”¨æœåŠ¡å™¨é›†ç¾¤å’Œåˆ†å¸ƒå¼æ¶æ„ï¼Œä½¿å¾—åŸæœ¬å±äºä¸€ä¸ªæœåŠ¡å™¨çš„è®¡ç®—å‹åŠ›åˆ†æ•£åˆ°å¤šä¸ªæœåŠ¡å™¨ä¸Šã€‚åŒæ—¶åŠ å¿«è¯·æ±‚å¤„ç†çš„é€Ÿåº¦ï¼› åå‘ä»£ç†ï¼š åœ¨è®¿é—®æœåŠ¡å™¨çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨é€šè¿‡åˆ«çš„æœåŠ¡å™¨è·å–èµ„æºæˆ–ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚","categories":[{"name":"æ ¡æ‹›ç¬”è®°","slug":"æ ¡æ‹›ç¬”è®°","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/"},{"name":"è®¡ç®—æœºåŸºç¡€","slug":"æ ¡æ‹›ç¬”è®°/è®¡ç®—æœºåŸºç¡€","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"æ ¡æ‹›","slug":"æ ¡æ‹›","permalink":"https://hwh.zone/tags/%E6%A0%A1%E6%8B%9B/"},{"name":"è®¡ç®—æœºåŸºç¡€","slug":"è®¡ç®—æœºåŸºç¡€","permalink":"https://hwh.zone/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"},{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://hwh.zone/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}]},{"title":"æ ¡æ‹›ç¬”è®°ï¼ˆä¸‰ï¼‰_è®¡ç®—æœºåŸºç¡€_è®¡ç®—æœºç½‘ç»œ","slug":"æ ¡æ‹›ç¬”è®°ï¼ˆä¸‰ï¼‰_è®¡ç®—æœºåŸºç¡€_è®¡ç®—æœºç½‘ç»œ","date":"2021-11-26T12:53:16.543Z","updated":"2021-12-03T03:55:53.544Z","comments":true,"path":"p/46361/","link":"","permalink":"https://hwh.zone/p/46361/","excerpt":"","text":"æˆ‘çš„æ ¡æ‹›è®°å½•ï¼šæ ¡æ‹›ç¬”è®°ï¼ˆé›¶ï¼‰_å†™åœ¨å‰é¢ ï¼Œä»¥ä¸‹æ˜¯æ ¡æ‹›ç¬”è®°æ€»ç›®å½•ã€‚ å¤‡æ³¨ ç®—æ³•èƒ½åŠ›ï¼ˆâ€œåˆ·é¢˜â€ï¼‰ è¿™éƒ¨åˆ†å°±æ˜¯è€—æ—¶é—´å¤šç»ƒä¹ ï¼ŒLeetcode-Top100 æ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚ è¡¥å……ç»ƒä¹ ï¼šcodeTop è®¡ç®—æœºåŸºç¡€(ä¸Š)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_Javaå…¥é—¨ C++åç«¯åç»­æ›´æ–° æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é¢å¯¹å¯¹è±¡ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é›†åˆ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_å¤šçº¿ç¨‹ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é” æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_JVM è®¡ç®—æœºåŸºç¡€(ä¸‹)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆäºŒï¼‰__è®¡ç®—æœºåŸºç¡€_Linux&amp;Git æ ¡æ‹›ç¬”è®°ï¼ˆä¸‰ï¼‰__è®¡ç®—æœºåŸºç¡€_è®¡ç®—æœºç½‘ç»œ æ ¡æ‹›ç¬”è®°ï¼ˆå››ï¼‰__è®¡ç®—æœºåŸºç¡€_æ“ä½œç³»ç»Ÿ æ ¡æ‹›ç¬”è®°ï¼ˆäº”ï¼‰__è®¡ç®—æœºåŸºç¡€_MySQL æ ¡æ‹›ç¬”è®°ï¼ˆå…­ï¼‰__è®¡ç®—æœºåŸºç¡€_Redis æ ¡æ‹›ç¬”è®°ï¼ˆä¸ƒï¼‰__è®¡ç®—æœºåŸºç¡€_æ•°æ®ç»“æ„ æ ¡æ‹›ç¬”è®°ï¼ˆå…«ï¼‰__è®¡ç®—æœºåŸºç¡€_åœºæ™¯&amp;æ™ºåŠ›é¢˜ æ ¡æ‹›ç¬”è®°ï¼ˆä¹ï¼‰__è®¡ç®—æœºåŸºç¡€_ç›¸å…³è¡¥å…… é¡¹ç›®&amp;å®ä¹  ä¸»è¦æ˜¯æ€ä¹ˆå‡†å¤‡é¡¹ç›®ï¼Œåç»­æ›´æ–° ä¸‰ã€è®¡ç®—æœºç½‘ç»œ 3.1 ISO/OSIæ¨¡å‹ å’Œ TCP/IP æ¨¡å‹ 1.è¯·ä½ ç®€è¦ä»‹ç»ä¸€ä¸‹TCP/IP äº”å±‚åè®® å’Œ ISO/OSIä¸ƒå±‚åè®®ï¼Ÿ åº”ç”¨å±‚ï¼šä¸ºç”¨æˆ·çš„åº”ç”¨ç¨‹åºï¼ˆå¦‚ï¼šç”µå­é‚®ä»¶ã€æ–‡ä»¶ä¼ è¾“å’Œä»¿çœŸç»ˆç«¯ï¼‰*æä¾›ç½‘ç»œæœåŠ¡ï¼› è¡¨ç¤ºå±‚ï¼š å¯ä»¥ç¡®ä¿ä¸€ä¸ªç³»ç»Ÿçš„åº”ç”¨å±‚æ‰€å‘é€çš„ä¿¡æ¯å¯ä»¥è¢«å¦ä¸€ä¸ªç³»ç»Ÿçš„åº”ç”¨å±‚è¯»å–ï¼› ä¼šè¯å±‚ï¼š é€šè¿‡è¿è¾“å±‚ï¼ˆç«¯å£å·ï¼šä¼ è¾“ç«¯å£ä¸æ¥æ”¶ç«¯å£ï¼‰å»ºç«‹æ•°æ®ä¼ è¾“çš„é€šè·¯ï¼Œä¸»è¦åœ¨ä½ çš„ç³»ç»Ÿä¹‹é—´å‘èµ·ä¼šè¯æˆ–è€…æ¥å—ä¼šè¯è¯·æ±‚ï¼› è¿è¾“å±‚: ä»»åŠ¡æ˜¯ä¸ºä¸¤å°ä¸»æœºä¸­è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡æä¾›é€šç”¨çš„*æ•°æ®ä¼ è¾“æœåŠ¡ï¼Œä¼ è¾“çš„æ˜¯æŠ¥æ–‡æ®µï¼ˆtcpï¼‰/ç”¨æˆ·æ•°æ®æŠ¥ï¼ˆudpï¼‰ï¼› å¤ç”¨ï¼šå¤šä¸ªåº”ç”¨å±‚è¿›ç¨‹å¯åŒæ—¶ä½¿ç”¨ä¸‹é¢è¿è¾“å±‚çš„æœåŠ¡ã€‚ åˆ†ç”¨ï¼šè¿è¾“å±‚æŠŠæ”¶åˆ°çš„ä¿¡æ¯åˆ†åˆ«äº¤ä»˜ä¸Šé¢åº”ç”¨å±‚ä¸­çš„ç›¸åº”è¿›ç¨‹ã€‚ ç½‘ç»œå±‚ï¼š ä¸ºä¸»æœºé—´*æä¾›é€šä¿¡æœåŠ¡ã€‚åœ¨å‘é€æ•°æ®æ—¶ï¼Œç½‘ç»œå±‚æŠŠè¿è¾“å±‚çš„æŠ¥æ–‡æ®µæˆ–ç”¨æˆ·æ•°æ®æŠ¥å°è£…æˆåˆ†ç»„æˆ–åŒ…è¿›è¡Œä¼ é€ã€‚åœ¨TCP/IPä½“ç³»ä¸­ï¼Œç”±äºç½‘ç»œå±‚ä½¿ç”¨IPåè®®ï¼Œå› æ­¤åˆ†ç»„ä¹Ÿå«åšIPæ•°æ®æŠ¥ï¼Œæˆ–ç®€ç§°ä¸ºæ•°æ®æŠ¥ æ•°æ®é“¾è·¯å±‚ï¼ˆå¿˜ï¼‰ï¼š ä¸¤å°ä¸»æœºé€šä¿¡ï¼Œæ€»æ˜¯åœ¨ä¸€æ®µä¸€æ®µçš„é“¾è·¯ä¸Šä¼ é€çš„ï¼Œè¿™å°±éœ€è¦éœ€è¦ä¸“é—¨çš„é“¾è·¯å±‚çš„åè®®ã€‚åœ¨ä¸¤ä¸ªç›¸é‚»ç»“ç‚¹ä¹‹é—´ä¼ é€æ•°æ®æ—¶ï¼Œæ•°æ®é“¾è·¯å±‚å°†ç½‘ç»œå±‚äº¤ä¸‹æ¥çš„*IPæ•°æ®æŠ¥ç»„è£…æˆå¸§ï¼Œåœ¨ä¸¤ä¸ªç›¸é‚»ç»“ç‚¹é—´çš„é“¾è·¯ä¸Šä¼ é€å¸§ã€‚æ¯ä¸€å¸§åŒ…æ‹¬æ•°æ®å’Œå¿…è¦çš„æ§åˆ¶ä¿¡æ¯ã€‚ ç‰©ç†å±‚ï¼šä¸»è¦ä½œç”¨æ˜¯ä¼ å…¥æ¯”ç‰¹æµï¼ˆå°±æ˜¯ç”±1ã€0è½¬åŒ–ä¸ºç”µæµå¼ºå¼±æ¥è¿›è¡Œä¼ è¾“ï¼Œåˆ°è¾¾ç›®çš„åœ°åå†è½¬åŒ–ä¸º1ã€0ï¼‰ï¼Œå®šä¹‰ç‰©ç†è®¾å¤‡æ ‡å‡†ï¼ˆä¾‹å¦‚ç½‘çº¿çš„æ¥å£ç±»å‹ã€å…‰çº¿çš„æ¥å£ç±»å‹ã€å„ç§ä¼ è¾“ä»‹è´¨çš„ä¼ è¾“é€Ÿç‡ï¼‰ã€‚ 2.è¯·ä½ ç®€è¦ä»‹ç»ä¸€ä¸‹å„å±‚çš„åè®®ï¼Ÿ ç‰©ç†å±‚ï¼šæš‚æ—  ï¼ˆå¿«æ‰‹ï¼‰æ•°æ®é“¾è·¯å±‚ï¼šæ•°æ®é“¾è·¯å±‚ä¸»è¦æ˜¯è´Ÿè´£ä¼ è¾“æ•°æ®ï¼Œ PPPï¼ˆç‚¹åˆ°ç‚¹åè®®ï¼‰ï¼šåœ¨ç‚¹å¯¹ç‚¹è¿æ¥ä¸Šä¼ è¾“å¤šåè®®æ•°æ®åŒ…æä¾›äº†ä¸€ä¸ªæ ‡å‡†æ–¹æ³•ï¼ŒPPP æœ€åˆè®¾è®¡æ˜¯ä¸ºä¸¤ä¸ªå¯¹ç­‰èŠ‚ç‚¹ä¹‹é—´çš„ IP æµé‡ä¼ è¾“æä¾›ä¸€ç§å°è£…åè®®ã€‚è¿™ç§é“¾è·¯æä¾›å…¨åŒå·¥æ“ä½œï¼Œå¹¶æŒ‰ç…§é¡ºåºä¼ é€’æ•°æ®åŒ…ã€‚ è®¾è®¡ç›®çš„ä¸»è¦æ˜¯ç”¨æ¥é€šè¿‡æ‹¨å·æˆ–ä¸“çº¿æ–¹å¼å»ºç«‹ç‚¹å¯¹ç‚¹è¿æ¥å‘é€æ•°æ®ï¼Œä½¿å…¶æˆä¸ºå„ç§ä¸»æœºã€ç½‘æ¡¥å’Œè·¯ç”±å™¨ä¹‹é—´ç®€å•è¿æ¥çš„ä¸€ç§å…±é€šçš„è§£å†³æ–¹æ¡ˆã€‚ ä»¥å¤ªç½‘ï¼ˆEthernet)ï¼š CSMA/CD åè®®ï¼š å†²çªæ£€æµ‹çš„è½½æ³¢ç›‘å¬å¤šè·¯è®¿é—®æŠ€æœ¯(è½½æ³¢ç›‘å¬å¤šç‚¹æ¥å…¥/ç¢°æ’æ£€æµ‹)ã€‚ è®¸å¤šè®¡ç®—æœºä»¥å¤šç‚¹æ¥å…¥çš„æ–¹å¼è¿æ¥åœ¨ä¸€æ ¹æ€»çº¿ä¸Šï¼Œæ¯ä¸ªä¸»æœºéƒ½å¿…é¡»ä¸åœåœ°ç›‘å¬ä¿¡é“ã€‚å‘é€å‰ç›‘å¬ï¼Œå¦‚æœå¿™åˆ™ç­‰å¾…ï¼Œå¦‚æœç©ºé—²åˆ™å‘é€ã€‚ è‹¥æ£€æµ‹åˆ°ä¿¡é“æœ‰å¹²æ‰°ä¿¡å·ï¼Œåˆ™è¡¨ç¤ºäº§ç”Ÿäº†ç¢°æ’ï¼Œäºæ˜¯å°±è¦åœæ­¢å‘é€æ•°æ®ï¼Œè®¡ç®—å‡ºé€€é¿ç­‰å¾…æ—¶é—´ï¼Œç„¶åä½¿ç”¨ CSMA æ–¹æ³•ç»§ç»­å°è¯•å‘é€ã€‚ ç½‘ç»œå±‚ï¼š å¯å‚è€ƒ IPï¼šç½‘ç»œåè®®ï¼Œéå¸¸é‡è¦çš„ä¸­é—´å±‚åè®®ï¼ŒTCPå’ŒUDPå¿…é¡»åŸºäºIPå·¥ä½œ ICMPï¼šéå¸¸é‡è¦çš„ä¸­é—´å±‚åè®®ï¼Œç”¨äºåœ¨ IPä¸»æœºã€è·¯ç”±å™¨ ä¹‹é—´ä¼ é€’æ§åˆ¶æ¶ˆæ¯ IGMPï¼šç½‘ç»œç»„æ¶ˆæ¯åè®®ï¼Œç”¨æ¥åœ¨IPä¸»æœºå’Œä¸å…¶ç›´æ¥ç›¸é‚»çš„ç»„æ’­è·¯ç”±å™¨ä¹‹é—´å»ºç«‹ã€ç»´æŠ¤ç»„æ’­ç»„æˆå‘˜ ARPï¼šåœ°å€è§£æåè®®ï¼Œå»ºç«‹IPâ†’MACåœ°å€æ˜ å°„è¡¨ RARPï¼šåå‘åœ°å€è§£æåè®®ï¼ŒæŸä¸ªç½‘ç»œè®¾å¤‡çš„MACç‰©ç†åœ°å€è½¬æ¢ä¸ºIPåœ°å€ è¿è¾“å±‚:TCP(Transmission Control Protocol) é¢å‘è¿æ¥çš„ï¼Œæ•°æ®ä¼ è¾“çš„å•ä½æ˜¯æŠ¥æ–‡æ®µï¼Œèƒ½å¤Ÿæä¾›å¯é çš„äº¤ä»˜ã€‚ UDP(User Datagram Protocol) ï¼šæ— è¿æ¥çš„ï¼Œæ•°æ®ä¼ è¾“çš„å•ä½æ˜¯ç”¨æˆ·æ•°æ®æŠ¥ï¼Œä¸ä¿è¯æä¾›å¯é çš„äº¤ä»˜ï¼Œåªèƒ½æä¾›â€œå°½æœ€å¤§åŠªåŠ›äº¤ä»˜â€ åº”ç”¨å±‚ï¼šå¦‚æ”¯æŒä¸‡ç»´ç½‘åº”ç”¨çš„HTTPåè®®ï¼Œæ”¯æŒç”µå­é‚®ä»¶çš„SMTPåè®®ï¼Œæ”¯æŒæ–‡ä»¶ä¼ é€çš„FTPåè®®ï¼ŒDNSï¼ŒPOP3ï¼ŒSNMPï¼ŒTelnetç­‰ç­‰ã€‚ 2.1 RARP å·¥ä½œåŸç†ï¼Ÿ RARPå‘å‡ºè¦åå‘è§£é‡Šçš„ç‰©ç†åœ°å€å¹¶å¸Œæœ›è¿”å›å…¶IPåœ°å€ï¼Œåº”ç­”åŒ…æ‹¬èƒ½å¤Ÿæä¾›æ‰€éœ€ä¿¡æ¯çš„RARPæœåŠ¡å™¨å‘å‡ºçš„IPåœ°å€ã€‚ ç½‘ç»œä¸Šçš„æ¯å°è®¾å¤‡éƒ½ä¼šæœ‰ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ç¡¬ä»¶åœ°å€ï¼Œé€šå¸¸æ˜¯ç”±è®¾å¤‡å‚å•†åˆ†é…çš„MACåœ°å€ã€‚ ä¸»æœºä»ç½‘å¡ä¸Šè¯»å–MACåœ°å€ï¼Œç„¶ååœ¨ç½‘ç»œä¸Šå‘é€ä¸€ä¸ªRARPè¯·æ±‚çš„å¹¿æ’­æ•°æ®åŒ…ï¼› RARPæœåŠ¡å™¨æ”¶åˆ°äº†RARPè¯·æ±‚æ•°æ®åŒ…ï¼Œä¸ºå…¶åˆ†é…IPåœ°å€ï¼Œå¹¶å°†RARPå›åº”å‘é€ç»™ä¸»æœºï¼› ä¸»æœºæ”¶åˆ°RARPå›åº”åï¼Œå°±ä½¿ç”¨å¾—åˆ°çš„IPåœ°å€è¿›è¡Œé€šè®¯ã€‚ 3. ç«¯å£åœ¨å“ªä¸€å±‚ï¼Ÿæœ‰æ•ˆç«¯å£èŒƒå›´ï¼Ÿ ç«¯å£åœ¨ä¼ è¾“å±‚ã€‚ä¼ è¾“å±‚ä»¥ä¸‹çš„åŒ…å°è£…è¿‡ç¨‹ï¼š æ•°æ®æŠ¥åœ¨ä¼ è¾“å±‚ï¼šåŠ æºç«¯å£å·å’Œç›®çš„ç«¯å£å·ï¼› åœ¨ç½‘ç»œå±‚åŠ ä¸Šï¼šæºipå’Œç›®çš„ip ï¼› åœ¨æ•°æ®é“¾è·¯å±‚è½¬åŒ–æˆï¼šæ•°æ®æ¡¢è¿›è¡Œæ ¡éªŒï¼› åœ¨ç‰©ç†å±‚å˜æˆä¿¡å·ï¼ˆç”µã€å…‰ã€ç­‰ä¿¡å·ï¼‰å‘é€å‡ºå»ã€‚ UDPå’ŒTCPæŠ¥å¤´ä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚å­˜æ”¾ç«¯å£å·ï¼Œç«¯å£ä¸€å…±æœ‰ä¸€å…±æœ‰65535ä¸ªã€‚ çŸ¥åç«¯å£å·ä»0~1023ï¼Œæ¯”å¦‚å…¶ä¸­HTTPæ˜¯80ï¼ŒFTPæ˜¯20ï¼ˆæ•°æ®ç«¯å£ï¼‰ã€21ï¼ˆæ§åˆ¶ç«¯å£ï¼‰ ï¼› åŠ¨æ€ç«¯å£çš„èŒƒå›´æ˜¯ä»1024~65535ã€‚ 3.2 è¿è¾“å±‚ 0. TCPæŠ¥æ–‡å¤´ï¼ŸUDPæŠ¥æ–‡å¤´ï¼Ÿ å‚è€ƒï¼šIPã€TCPã€UDPæŠ¥æ–‡å¤´è¯´æ˜ TCPæŠ¥æ–‡å¤´ æ¥æºç«¯å£ï¼šå‘ç›®æ ‡ä¸»æœºæŒ‡æ˜æ¥å…¥ä»–çš„ä¸»æœºæ‰€ä½¿ç”¨çš„ç«¯å£å· ç”¨äºç›®æ ‡ä¸»æœºå›åº” ç›®æ ‡ç«¯å£ï¼šæŒ‡æ˜è¦è¿æ¥çš„ç›®æ ‡ä¸»æœºçš„ç«¯å£å· ä»è¿™ä¹Ÿå¯ä»¥çœ‹ä¹¦ï¼Œç«¯å£å 16bitï¼Œæ•…èŒƒå›´æ˜¯0~65535ã€‚ é¡ºåºå·ï¼šæ•°æ®åŒ…ç¼–å·ï¼Œ è¡¨æ˜å‘é€çš„æ•°æ®åŒ…çš„é¡ºåº ã€‚å…¶å€¼é€šå¸¸åº”è¯¥ä¸ºä¸Šæ¬¡å‘é€åŒ…ä¸­çš„é¡ºåºå·+1 ï¼Œè‹¥è¯¥æ•°æ®åŒ…æ˜¯æ•´ä¸ªTCPè¿æ¥ä¸­çš„ç¬¬ä¸€ä¸ªåŒ…(SYNåŒ…) åˆ™è¯¥å€¼éšæ„(é€šå¸¸éšæœº) ç¡®è®¤å·ï¼šé€šå¸¸è¯¥å€¼æ˜¯æ¥å—åˆ°çš„é¡ºåºå·+1 ï¼Œè‹¥è¯¥æ•°æ®åŒ…æ˜¯æ•´ä¸ªTCPè¿æ¥ä¸­çš„ç¬¬ä¸€ä¸ªæ•°æ®åŒ…(SYNåŒ…) åˆ™è¯¥å€¼éšæ„(é€šå¸¸ä¸º0) é¦–éƒ¨é•¿åº¦ï¼šTCPå¤´é•¿åº¦ ã€‚è¡¨æ˜åŒ…å¥½å¤šå°‘ä¸ª32Bit åŒ…æ‹¬å¯é€‰å¤´(å¦‚æœæœ‰) å€¼ä¸ºTCPå¤´å¤§å°é™¤ä»¥4 ï¼š å¦‚ï¼šæ²¡æœ‰å¯é€‰å¤´TCPå¤´ä¸º20å­—èŠ‚ åˆ™è¯¥å€¼ä¸º5 æ ‡å¿—ä½ï¼š ç´§æ€¥æ ‡å¿—ä½(URG)ï¼šå¼€å¯æ—¶è¡¨æ˜æ­¤æ•°æ®åŒ…å¤„äºç´§æ€¥çŠ¶æ€åº”è¯¥ä¼˜å…ˆå¤„ç† ç¡®è®¤æ ‡å¿—ä½(ACK)ï¼šå¼€å¯æ—¶è¡¨æ˜ç¡®è®¤å·æœ‰æ•ˆ å¦åˆ™å¿½ç•¥ç¡®è®¤å· æ¨é€æ ‡å¿—ä½(PSH)ï¼šå¼€å¯æ—¶è¡¨æ˜åº”è¯¥å°½å¿«äº¤ä»˜ç»™åº”ç”¨è¿›ç¨‹ è€Œä¸å¿…ç­‰åˆ°ç¼“å­˜åŒºå¡«æ»¡æ‰æ¨é€ å¤ä½æ ‡å¿—ä½(RST)ï¼šå¼€å¯æ—¶è¡¨æ˜TCPè¿æ¥å‡ºç°è¿æ¥å‡ºç°é”™è¯¯ æ•°æ®åŒ…éæ³•æ‹’ç»è¿æ¥ åŒæ­¥æ ‡å¿—ä½(SYN)ï¼šå¼€å¯æ—¶è¡¨æ˜ä¸€ä¸ªè¿æ¥çš„è¯·æ±‚æˆ–è€…æ¥å—æŠ¥æ–‡ ç»ˆæ­¢æ ‡å¿—ä½(FIN)ï¼šå¼€å¯æ—¶è¡¨æ˜é‡Šæ”¾ä¸€ä¸ªè¿æ¥ çª—å£å¤§å°ï¼šè¡¨ç¤ºæœŸæœ›æ¥å—åˆ°çš„æ¯ä¸ªæ•°æ®åŒ…å­—èŠ‚æ•° æ ¡éªŒå’Œï¼šè¯¥å€¼ä¸ºTCPæŠ¥æ–‡å¤´æ‹¬æ•°æ®éƒ¨åˆ†ä¸­æ¯16Bitçš„äºŒè¿›åˆ¶åç æ±‚å’Œ ç´§æ€¥æŒ‡é’ˆï¼šè‹¥æŒ‡å®šè¯¥å€¼ ä»–åº”è¯¥æ˜¯ä¸€ä¸ªåç§»é‡ è¯¥å€¼åŠ ä¸Šé¡ºåºå·è¡¨ç¤ºç´§æ€¥æ•°æ®æœ€åä¸€ä¸ªå­—èŠ‚çš„é¡ºåºå· å¯é€‰å­—æ®µï¼šåŒ…å«æœ€å¤§è½½è·ä¸çª—å£æ¯”ä¾‹ç­‰ä¿¡æ¯ æ³¨ï¼šè‹¥ä½¿ç”¨è¯¥å­—æ®µåˆ™é•¿åº¦å¿…é¡»ä¸º32Bitçš„å€æ•° ä¸è¶³åˆ™å¡«å……0 UDPæŠ¥æ–‡ æ¥æºç«¯å£ï¼šå‘ç›®æ ‡ä¸»æœºæŒ‡æ˜æ¥å…¥ä»–çš„ä¸»æœºæ‰€ä½¿ç”¨çš„ç«¯å£å· ç”¨äºç›®æ ‡ä¸»æœºå›åº” ç›®æ ‡ç«¯å£ï¼šæŒ‡æ˜è¦è¿æ¥çš„ç›®æ ‡ä¸»æœºçš„ç«¯å£å· æ•°æ®åŒ…é•¿åº¦ï¼šUDPå¤´å’Œæ•°æ®æ€»é•¿åº¦å­—èŠ‚æ•° æ£€éªŒå’Œï¼šè¯¥å€¼ä¸ºUDPæŠ¥æ–‡å¤´æ‹¬æ•°æ®éƒ¨åˆ†ä¸­æ¯16Bitçš„äºŒè¿›åˆ¶åç æ±‚å’Œ æ³¨ï¼šUDPæ£€éªŒå’Œä¸æ˜¯å¿…é¡»çš„ 1. è¯·ä½ è¯´æ˜ä¸€ä¸‹ï¼ŒTCPåè®®çš„3æ¬¡æ¡æ‰‹ï¼ˆè¿›è¡Œè¿æ¥ï¼‰ï¼Ÿ å‚è€ƒï¼šä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹é¢è¯•å®˜æƒ³è€ƒæˆ‘ä»¬ä»€ä¹ˆï¼Ÿ TCPä¸­ï¼Œå¯¹ç¡®è®¤ACKæŠ¥æ–‡æ˜¯ä¸éœ€è¦å‘é€ç¡®è®¤çš„ ã€‚ ç®€ç•¥è¿‡ç¨‹ âš ï¸ SYN å’ŒACKæŠ¥æ–‡æ˜¯ä¸€èµ·å‘çš„ï¼ï¼ 1ã€ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯ç»™æœåŠ¡ç«¯å‘ä¸€ä¸ª SYN æŠ¥æ–‡ï¼Œå¹¶æŒ‡æ˜å®¢æˆ·ç«¯çš„åˆå§‹åŒ–åºåˆ—å· ISNÂ©ã€‚æ­¤æ—¶å®¢æˆ·ç«¯å¤„äº SYN_Send çŠ¶æ€ã€‚ 2ã€ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šï¼ˆâš ï¸ SYN+ACKæ˜¯åœ¨ä¸€ä¸ªåŒ…é‡Œå‘çš„ï¼ï¼ˆå­—èŠ‚ä¸€é¢ï¼‰ ï¼‰æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯çš„ SYN æŠ¥æ–‡ä¹‹åï¼Œä¼šä»¥è‡ªå·±çš„ SYN æŠ¥æ–‡ä½œä¸ºåº”ç­”ï¼Œå¹¶ä¸”ä¹Ÿæ˜¯æŒ‡å®šäº†è‡ªå·±çš„åˆå§‹åŒ–åºåˆ—å· ISN(s)ï¼ŒåŒæ—¶ä¼šæŠŠå®¢æˆ·ç«¯çš„ ISN + 1 ä½œä¸º ACK çš„å€¼ï¼Œè¡¨ç¤ºè‡ªå·±å·²ç»æ”¶åˆ°äº†å®¢æˆ·ç«¯çš„ SYNï¼Œæ­¤æ—¶æœåŠ¡å™¨å¤„äº SYN_REVD çš„çŠ¶æ€ã€‚ 3ã€ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ° SYN æŠ¥æ–‡ä¹‹åï¼Œä¼šå‘é€ä¸€ä¸ª ACK æŠ¥æ–‡ï¼Œå½“ç„¶ï¼Œä¹Ÿæ˜¯ä¸€æ ·æŠŠæœåŠ¡å™¨çš„ ISN + 1 ä½œä¸º ACK çš„å€¼ï¼Œè¡¨ç¤ºå·²ç»æ”¶åˆ°äº†æœåŠ¡ç«¯çš„ SYN æŠ¥æ–‡ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å¤„äº establised çŠ¶æ€ã€‚ æœåŠ¡å™¨æ”¶åˆ° ACK æŠ¥æ–‡ä¹‹åï¼Œä¹Ÿå¤„äº establised çŠ¶æ€ï¼Œæ­¤æ—¶ï¼ŒåŒæ–¹ä»¥å»ºç«‹èµ·äº†é“¾æ¥ã€‚ 1.1 ISN ï¼ˆInitial Sequence Numberï¼‰æ˜¯å›ºå®šçš„å—ï¼Ÿ ISNä½œç”¨ ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…¶ä¸­ä¸€ä¸ªé‡è¦åŠŸèƒ½æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯äº¤æ¢ ISNï¼Œä»¥ä¾¿è®©å¯¹æ–¹çŸ¥é“æ¥ä¸‹æ¥æ¥æ”¶æ•°æ®çš„æ—¶å€™å¦‚ä½•æŒ‰åºåˆ—å·ç»„è£…æ•°æ®ã€‚ ISNä¸ºä»€ä¹ˆä¸å›ºå®šï¼ˆè¿˜æ˜¯ä¸å¤ªç†è§£ï¼‰ ISNéšæ—¶é—´è€Œå˜åŒ–ï¼Œå› æ­¤æ¯ä¸ªè¿æ¥éƒ½å°†å…·æœ‰ä¸åŒçš„ISNã€‚ISNå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ª32æ¯”ç‰¹çš„è®¡æ•°å™¨ï¼Œæ¯4msåŠ 1 ã€‚ é˜²æ­¢åœ¨ç½‘ç»œä¸­è¢«å»¶è¿Ÿçš„åˆ†ç»„åœ¨ä»¥åè¢«é‡å¤ä¼ è¾“ï¼Œè€Œå¯¼è‡´æŸä¸ªè¿æ¥çš„ä¸€ç«¯å¯¹å®ƒä½œé”™è¯¯çš„åˆ¤æ–­ï¼› å¦‚æœ ISN æ˜¯å›ºå®šçš„ï¼Œæ”»å‡»è€…å¾ˆå®¹æ˜“çŒœå‡ºåç»­çš„ç¡®è®¤å·ï¼Œå› æ­¤ ISN æ˜¯åŠ¨æ€ç”Ÿæˆçš„ã€‚ 2.ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ 1.ç”¨æ¥ç¡®å®šæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„å‘é€èƒ½åŠ›æ˜¯å¦æ­£å¸¸ï¼› ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å‘é€ç½‘ç»œåŒ…ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°äº†ã€‚è¿™æ ·æœåŠ¡ç«¯å°±èƒ½å¾—å‡ºç»“è®ºï¼šå®¢æˆ·ç«¯çš„å‘é€èƒ½åŠ›ã€æœåŠ¡ç«¯çš„æ¥æ”¶èƒ½åŠ›æ˜¯æ­£å¸¸çš„ã€‚ ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡ç«¯å‘åŒ…ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°äº†ã€‚è¿™æ ·å®¢æˆ·ç«¯å°±èƒ½å¾—å‡ºç»“è®ºï¼šæœåŠ¡ç«¯çš„æ¥æ”¶ã€å‘é€èƒ½åŠ›ï¼Œå®¢æˆ·ç«¯çš„æ¥æ”¶ã€å‘é€èƒ½åŠ›æ˜¯æ­£å¸¸çš„ã€‚ä¸è¿‡æ­¤æ—¶æœåŠ¡å™¨å¹¶ä¸èƒ½ç¡®è®¤å®¢æˆ·ç«¯çš„æ¥æ”¶èƒ½åŠ›æ˜¯å¦æ­£å¸¸ã€‚ ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å‘åŒ…ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°äº†ã€‚è¿™æ ·æœåŠ¡ç«¯å°±èƒ½å¾—å‡ºç»“è®ºï¼šå®¢æˆ·ç«¯çš„æ¥æ”¶ã€å‘é€èƒ½åŠ›æ­£å¸¸ï¼ŒæœåŠ¡å™¨è‡ªå·±çš„å‘é€ã€æ¥æ”¶èƒ½åŠ›ä¹Ÿæ­£å¸¸ã€‚ 2.æŒ‡å®šè‡ªå·±çš„åˆå§‹åŒ–åºåˆ—å·ï¼Œä¸ºåé¢çš„å¯é ä¼ é€åšå‡†å¤‡ï¼› å¦‚æœåªæœ‰ä¸¤æ¬¡æ¡æ‰‹ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯çš„èµ·å§‹åºåˆ—å·å¯ä»¥ç¡®è®¤ï¼ŒæœåŠ¡ç«¯çš„èµ·å§‹åºåˆ—å·å°†å¾—ä¸åˆ°ç¡®è®¤ã€‚ å¦‚æœæ˜¯ https åè®®çš„è¯ï¼Œä¸‰æ¬¡æ¡æ‰‹è¿™ä¸ªè¿‡ç¨‹ï¼Œè¿˜ä¼šè¿›è¡Œæ•°å­—è¯ä¹¦çš„éªŒè¯ä»¥åŠåŠ å¯†å¯†é’¥çš„ç”Ÿæˆã€‚ 2.1 ä¸‰æ¬¡æ¡æ‰‹å¯ä»¥æºå¸¦æ•°æ®å—ï¼Ÿ ç¬¬ä¸€æ¬¡ã€ç¬¬äºŒæ¬¡æ¡æ‰‹ä¸å¯ä»¥æºå¸¦æ•°æ® ï¼Œ ç¬¬ä¸‰æ¬¡å¯ä»¥æºå¸¦æ•°æ®ï¼š å¯¹äºç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼Œä¸å¯ä»¥æ”¾æ•°æ®ï¼Œå…¶ä¸­ä¸€ä¸ªç®€å•çš„åŸå› å°±æ˜¯ä¼šè®©æœåŠ¡å™¨æ›´åŠ å®¹æ˜“å—åˆ°æ”»å‡»äº†ã€‚ å¦‚æœæœ‰äººè¦æ¶æ„æ”»å‡»æœåŠ¡å™¨ï¼Œé‚£ä»–æ¯æ¬¡éƒ½åœ¨ç¬¬ä¸€æ¬¡æ¡æ‰‹ä¸­çš„ SYN æŠ¥æ–‡ä¸­æ”¾å…¥å¤§é‡çš„æ•°æ®ï¼Œæ¶ˆè€—æœåŠ¡å™¨ç©ºé—´æ¥æ¥æ”¶æ•°æ®ï¼› å¯¹äºç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼Œå®¢æˆ·ç«¯å·²ç»å¤„äº ESTABLISHED çŠ¶æ€ã€‚å¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼Œä»–å·²ç»å»ºç«‹èµ·è¿æ¥äº†ï¼Œå·²ç»çŸ¥é“æœåŠ¡å™¨çš„æ¥æ”¶ã€å‘é€èƒ½åŠ›æ­£å¸¸ï¼Œæ‰€ä»¥èƒ½æºå¸¦æ•°æ®ã€‚ 3.è¯·ä½ è¯´æ˜ä¸€ä¸‹ï¼ŒTCPåè®®çš„4æ¬¡æŒ¥æ‰‹ï¼ˆæ–­å¼€è¿æ¥ï¼‰ï¼Ÿ ä¸ºä»€ä¹ˆä¸åƒä¸‰æ¬¡æ¡æ‰‹ä¸€æ ·æ‰§è¡Œä¸‰æ¬¡å³å¯ï¼Ÿ å› ä¸ºç¬¬äºŒæ¬¡å’Œç¬¬ä¸‰æ¬¡å¯¹äºè¢«åŠ¨æ–¹æ¥è¯´ï¼Œæ„ä¹‰æ˜¯ä¸ä¸€æ ·çš„ã€‚ ç¬¬äºŒæ¬¡æ˜¯ä¸ºäº†è®©ä¸»åŠ¨æ–¹é—­å˜´ï¼ˆä¸å†å‘æŒ¥æ‰‹è¯·æ±‚ï¼‰ï¼Œè‡ªå·±è¯¥å¹²å˜›è¿˜æ˜¯å¹²å˜›ï¼ˆä½†æ˜¯è‡ªå·±å¯èƒ½è¿˜æœ‰æ•°æ®ç¾å¤„ç†å®Œï¼‰ã€‚ ç¬¬ä¸‰æ¬¡æ˜¯ä¸ºäº†è¡¨ç¤ºâ€œæˆ‘çš„æ´»å„¿å¹²å®Œäº†ï¼Œå¯ä»¥ç»“æŸäº†â€ã€‚ é€šå¸¸serveræ¥æ”¶åˆ°æŒ¥æ‰‹çš„æ—¶å€™ï¼Œæ‰‹é‡Œè¿˜æœ‰æ´»å„¿æ²¡åšå®Œã€‚ ç”±äºTCPè¿æ¥æ˜¯å…¨åŒå·¥çš„ï¼Œå› æ­¤æ¯ä¸ªæ–¹å‘éƒ½å¿…é¡»å•ç‹¬è¿›è¡Œå…³é—­ã€‚è¿™ä¸ªåŸåˆ™æ˜¯å½“ä¸€æ–¹å®Œæˆå®ƒçš„æ•°æ®å‘é€ä»»åŠ¡åå°±èƒ½å‘é€ä¸€ä¸ªFINæ¥ç»ˆæ­¢è¿™ä¸ªæ–¹å‘çš„è¿æ¥ã€‚ æ”¶åˆ°ä¸€ä¸ª FINåªæ„å‘³ç€è¿™ä¸€æ–¹å‘ä¸Šæ²¡æœ‰æ•°æ®æµåŠ¨ï¼Œä¸€ä¸ªTCPè¿æ¥åœ¨æ”¶åˆ°ä¸€ä¸ªFINåä»èƒ½å‘é€æ•°æ®ã€‚é¦–å…ˆè¿›è¡Œå…³é—­çš„ä¸€æ–¹å°†æ‰§è¡Œä¸»åŠ¨å…³é—­ï¼Œè€Œå¦ä¸€æ–¹æ‰§è¡Œè¢«åŠ¨å…³é—­ã€‚ TCPçš„è¿æ¥çš„æ‹†é™¤éœ€è¦å‘é€å››ä¸ªåŒ…ï¼Œå› æ­¤ç§°ä¸ºå››æ¬¡æŒ¥æ‰‹(four-way handshake)ã€‚å®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨å‡å¯ä¸»åŠ¨å‘èµ·æŒ¥æ‰‹åŠ¨ä½œï¼Œåœ¨socketç¼–ç¨‹ä¸­ï¼Œä»»ä½•ä¸€æ–¹æ‰§è¡Œclose()æ“ä½œå³å¯äº§ç”ŸæŒ¥æ‰‹æ“ä½œã€‚ ï¼ˆ1ï¼‰å®¢æˆ·ç«¯Aå‘é€ä¸€ä¸ªFINï¼ŒæŠ¥æ–‡ä¸­ä¼šæŒ‡å®šä¸€ä¸ªåºåˆ—å·Mï¼Œç”¨æ¥å…³é—­å®¢æˆ·Aåˆ°æœåŠ¡å™¨Bçš„æ•°æ®ä¼ é€ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å¤„äºFIN_WAIT1çŠ¶æ€ï¼› ï¼ˆ2ï¼‰æœåŠ¡å™¨Bæ”¶åˆ°è¿™ä¸ªFINï¼Œå®ƒå‘å›ä¸€ä¸ªACKï¼Œç¡®è®¤åºå·ä¸ºæ”¶åˆ°çš„åºå·M+1ã€‚å’ŒSYNä¸€æ ·ï¼Œä¸€ä¸ªFINå°†å ç”¨ä¸€ä¸ªåºå·ï¼Œæ­¤æ—¶æœåŠ¡ç«¯å¤„äº CLOSE_WAITçŠ¶æ€ï¼› ï¼ˆ3ï¼‰æœåŠ¡å™¨Bå…³é—­ä¸å®¢æˆ·ç«¯Açš„è¿æ¥ï¼Œå‘é€ä¸€ä¸ªFINç»™å®¢æˆ·ç«¯Aå’Œåºåˆ—å·Nï¼Œæ­¤æ—¶æœåŠ¡ç«¯å¤„äº LAST_ACK çš„çŠ¶æ€ï¼› ï¼ˆ4ï¼‰å®¢æˆ·ç«¯Aå‘å›ACKæŠ¥æ–‡ç¡®è®¤ï¼Œå¹¶å°†ç¡®è®¤åºå·è®¾ç½®ä¸ºæ”¶åˆ°åºN+1ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å¤„äº TIME_WAIT çŠ¶æ€ï¼Œéœ€è¦è¿‡ä¸€é˜µå­ä»¥ç¡®ä¿æœåŠ¡ç«¯æ”¶åˆ°è‡ªå·±çš„ ACK æŠ¥æ–‡ä¹‹åæ‰ä¼šè¿›å…¥ CLOSED çŠ¶æ€ï¼›æœåŠ¡ç«¯æ”¶åˆ° ACK æŠ¥æ–‡ä¹‹åï¼Œå°±å¤„äºå…³é—­è¿æ¥äº†ï¼Œå¤„äº CLOSED çŠ¶æ€ã€‚ 3.1 ä¸ºä»€ä¹ˆTCPå››æ¬¡æŒ¥æ‰‹è¦åŸºäºå…¨åŒå·¥ï¼Œä¸åŸºäºåŠåŒå·¥å‘¢ï¼ŸåŸºäºåŠåŒå·¥å¯ä»¥æ”¹ä¸ºä¸‰æ¬¡æŒ¥æ‰‹å—ï¼Ÿ åŠåŒå·¥ï¼šåŒæ—¶åªèƒ½æœ‰ä¸€ç«¯å‘é€æ¶ˆæ¯ ï¼› å…¨åŒå·¥ï¼šä¸¤ç«¯éƒ½å¯ä»¥éšæœºæ¥å—/å‘é€ã€‚ åœ¨å››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹ä¸­ï¼Œä¼¼ä¹C/Sä¸¤ç«¯éƒ½æ˜¯ç­‰å¾…å¯¹æ–¹å‘é€FIN/ACKï¼Œæ‰ä¼šå‘é€å¯¹åº”çš„ACK/FINç‰ˆæœ¬ã€‚åŒä¸€æ—¶åˆ»åªæœ‰ä¸€æ–¹åœ¨å‘é€æ¶ˆæ¯ï¼Œæ»¡è¶³åŠåŒå·¥ã€‚ ä½†æ˜¯ï¼ŒåŠåŒå·¥æ¨¡å¼æ•ˆç‡ä¼šæ›´ä½ï¼šæ¯”å¦‚Cç«¯ï¼ˆå®¢æˆ·ç«¯ï¼‰å‘é€FINæŠ¥æ–‡è¯·æ±‚å…³é—­ï¼Œä½†æ˜¯Sç«¯ï¼ˆæœåŠ¡ç«¯ï¼‰ä¾æ—§å¯ä»¥åŒæ—¶å‘ç”Ÿæ•°æ® ï¼Œè¿™ä¸ªæ—¶å€™æ•ˆç‡æ›´é«˜ã€‚ 3.2ï¼ˆé‡ç‚¹ï¼‰ æœåŠ¡å™¨å‡ºç°å¤§é‡close_waitçš„è¿æ¥çš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆè§£å†³æ–¹æ³•ï¼Ÿ close_waitçŠ¶æ€æ˜¯åœ¨ï¼ŒTCPå››æ¬¡æŒ¥æ‰‹çš„æ—¶å€™æœåŠ¡å™¨æ”¶åˆ°FINï¼Œä½†æ˜¯æ²¡æœ‰å‘é€è‡ªå·±çš„FINæ—¶å‡ºç°çš„ã€‚æœåŠ¡å™¨å‡ºç°å¤§é‡close_waitçŠ¶æ€çš„åŸå› æœ‰ä¸¤ç§ï¼š æœåŠ¡å™¨å†…éƒ¨ä¸šåŠ¡å¤„ç†å ç”¨äº†è¿‡å¤šæ—¶é—´ï¼Œéƒ½æ²¡èƒ½å¤„ç†å®Œä¸šåŠ¡ï¼›æˆ–è€…è¿˜æœ‰æ•°æ®éœ€è¦å‘é€ï¼›æˆ–è€…æœåŠ¡å™¨çš„ä¸šåŠ¡é€»è¾‘æœ‰é—®é¢˜ï¼Œæ²¡æœ‰æ‰§è¡Œclose()æ–¹æ³• æœåŠ¡å™¨çš„çˆ¶è¿›ç¨‹æ´¾ç”Ÿå‡ºå­è¿›ç¨‹ï¼Œå­è¿›ç¨‹ç»§æ‰¿äº†socketï¼Œæ”¶åˆ°FINçš„æ—¶å€™å­è¿›ç¨‹å¤„ç†ä½†çˆ¶è¿›ç¨‹æ²¡æœ‰å¤„ç†è¯¥ä¿¡å·ï¼Œå¯¼è‡´socketçš„å¼•ç”¨ä¸ä¸º0æ— æ³•å›æ”¶ å¤„ç†æ–¹æ³•ï¼š åœæ­¢åº”ç”¨ç¨‹åº ä¿®æ”¹ç¨‹åºé‡Œçš„bug 4. ä¸ºä»€ä¹ˆè¦æœ‰TIME_WAIT çŠ¶æ€ï¼Ÿä¸ºä»€ä¹ˆç­‰å¾…æ˜¯2MSLï¼Ÿ è¦ç¡®ä¿æœåŠ¡å™¨æ˜¯å¦å·²ç»æ”¶åˆ°äº†å®¢æˆ·ç«¯æœ€åçš„ACK æŠ¥æ–‡ï¼Œå¦‚æœæ²¡æœ‰æ”¶åˆ°çš„è¯ï¼ŒæœåŠ¡å™¨ä¼šé‡æ–°å‘ FIN + ACKæŠ¥æ–‡ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å†æ¬¡æ”¶åˆ° FIN + ACK æŠ¥æ–‡ä¹‹åï¼Œå°±çŸ¥é“ä¹‹å‰çš„ ACK æŠ¥æ–‡ä¸¢å¤±äº†ï¼Œç„¶åå†æ¬¡å‘é€ ACK æŠ¥æ–‡ã€‚ ç¡®ä¿ä¹‹å‰è¿æ¥çš„ä¸€äº›æ•°æ®ä¸åœ¨æ»ç•™åœ¨ç½‘ç»œä¸­ï¼šç¡®ä¿å·²ç»å¤±æ•ˆè¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µä¸ä¼šå†å‡ºç°åœ¨æœ¬è¿æ¥ä¸­ï¼Œå®¢æˆ·ç«¯å‘å®Œæœ€åä¸€ä¸ªACKæŠ¥æ–‡æ®µåï¼Œå†ç»è¿‡2MSLå¯ä»¥ä½¿å¾—æœ¬è¿æ¥ä¸­æ‰€æœ‰çš„æŠ¥æ–‡æ®µéƒ½ä»ç½‘ç»œä¸­æ¶ˆå¤±ã€‚å®¢æˆ·ç«¯å°±å¯ä»¥æ”¾å¿ƒåœ°é‡Šæ”¾TCPå ç”¨çš„èµ„æºã€ç«¯å£å·ï¼Œè¿æ¥ä»»ä½•æœåŠ¡å™¨ã€‚ å¦‚æœå®¢æˆ·ç«¯ç›´æ¥CLOSEDï¼Œç„¶ååˆå†æ¬¡å‘æœåŠ¡å™¨å‘èµ·ä¸€ä¸ªæ–°è¿æ¥ï¼Œæœ‰å¯èƒ½æ–°ã€è€è¿æ¥çš„ç«¯å£å·ä¸€æ ·çš„ã€‚å‡è®¾æ–°ã€è€è¿æ¥ç«¯å£å·ä¸€è‡´ï¼Œè‹¥è€è¿æ¥çš„ä¸€äº›æ•°æ®ä»æ»ç•™åœ¨ç½‘ç»œä¸­ï¼Œè¿™äº›æ»ç•™æ•°æ®åœ¨æ–°è¿æ¥å»ºç«‹åæ‰åˆ°è¾¾æœåŠ¡å™¨ï¼Œé‰´äºå‰åç«¯å£å·ä¸€è‡´ï¼ŒTCPåè®®å°±é»˜è®¤è¿™äº›æ•°æ®å±äºæ–°è¿æ¥ï¼Œäºæ˜¯æ•°æ®å°±è¿™æ ·ä¹±æˆä¸€é”…ç²¥äº†ã€‚ 4.1 ä¸ºä»€ä¹ˆæ˜¯2MSL? MSLæ˜¯æŠ¥æ–‡åœ¨ç½‘ç»œä¸­æœ€é•¿ç”Ÿå­˜æ—¶é—´ï¼Œè¿™æ˜¯ä¸€ä¸ªå·¥ç¨‹å€¼(ç»éªŒå€¼)ï¼Œä¸åŒçš„ç³»ç»Ÿä¸­å¯èƒ½ä¸åŒ ã€‚ è€ƒè™‘æœ€å æƒ…å†µï¼Œå®¢æˆ·ç«¯Aæœ€åä¸€æ¬¡æŒ¥æ‰‹å‘é€ç»™æœåŠ¡ç«¯Bçš„ACKæŠ¥æ–‡ä¸¢å¤±äº†ï¼š ACKä»æœ€å¤šç»è¿‡1MSLä¼šåˆ°è¾¾æœåŠ¡ç«¯ï¼Œè¶…è¿‡1MSLæœåŠ¡ç«¯ä¼šé‡å‘FIN æœåŠ¡ç«¯é‡å‘çš„FINæœ€å¤šç»è¿‡1MSLåˆ°è¾¾A æ‰€ä»¥ä¸ºäº†ç¡®ä¿ï¼Œå®¢æˆ·ç«¯èƒ½æ¥æ”¶åˆ°æœåŠ¡ç«¯é‡å‘çš„FINæŠ¥æ–‡ã€‚ 5. ã€é‡ç‚¹ã€‘è¯·é—®TCPä¸ºä»€ä¹ˆè¦æ›´å¯é ï¼Ÿå“ªç§åœºæ™¯ä¼šæœ‰æ‰€åº”ç”¨ï¼Ÿ è¶…æ—¶é‡ä¼ ï¼šå½“ TCP å‘å‡ºâ¼€ä¸ªæŠ¥æ–‡æ®µåï¼Œå®ƒå¯åŠ¨â¼€ä¸ªå®šæ—¶å™¨ï¼Œç­‰å¾…â½¬çš„ç«¯ç¡®è®¤æ”¶åˆ°è¿™ä¸ªæŠ¥â½‚æ®µã€‚å¦‚æœä¸èƒ½åŠæ—¶æ”¶åˆ°â¼€ä¸ªç¡®è®¤ï¼Œå°†é‡å‘è¿™ä¸ªæŠ¥â½‚æ®µï¼› æ•°æ®æ’åºï¼šTCPæœ‰ä¸“é—¨çš„åºåˆ—å·ISNå­—æ®µï¼Œå¯æä¾›æ•°æ®re-orderï¼› æµé‡æ§åˆ¶ï¼šæ»‘åŠ¨çª—å£å’Œè®¡æ—¶å™¨çš„ä½¿ç”¨ã€‚TCPçª—å£ä¸­ä¼šæŒ‡æ˜åŒæ–¹èƒ½å¤Ÿå‘é€æ¥æ”¶çš„æœ€å¤§æ•°æ®é‡ï¼› ARQåè®®ï¼š ä¹Ÿæ˜¯ä¸ºäº†å®ç°å¯é ä¼ è¾“çš„ï¼Œå®ƒçš„åŸºæœ¬åŸç†å°±æ˜¯æ¯å‘å®Œâ¼€ä¸ªåˆ†ç»„å°±åœâ½Œå‘é€ï¼Œç­‰å¾…å¯¹æ–¹ç¡®è®¤ã€‚åœ¨æ”¶åˆ°ç¡®è®¤åå†å‘ä¸‹â¼€ä¸ªåˆ†ç»„ã€‚ æ‹¥å¡æ§åˆ¶ï¼šTCPçš„æ‹¥å¡æ§åˆ¶ç”±4ä¸ªæ ¸å¿ƒç®—æ³•ç»„æˆã€‚â€œæ…¢å¯åŠ¨â€ï¼ˆSlow Startï¼‰ã€â€œæ‹¥å¡é¿å…â€ï¼ˆCongestion avoidanceï¼‰ã€â€œå¿«é‡ä¼  â€ï¼ˆFast Retransmitï¼‰ã€â€œå¿«æ¢å¤â€ï¼ˆFast Recoveryï¼‰ï¼› æ ¡éªŒå’Œï¼š TCP å°†ä¿æŒå®ƒâ¾¸éƒ¨å’Œæ•°æ®çš„æ£€éªŒå’Œã€‚è¿™æ˜¯â¼€ä¸ªç«¯åˆ°ç«¯çš„æ£€éªŒå’Œï¼Œâ½¬çš„æ˜¯æ£€æµ‹æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­çš„ä»»ä½•å˜åŒ–ã€‚å¦‚æœæ”¶åˆ°æ®µçš„æ£€éªŒå’Œæœ‰å·®é”™ï¼ŒTCP å°†ä¸¢å¼ƒè¿™ä¸ªæŠ¥â½‚æ®µå’Œä¸ç¡®è®¤æ”¶åˆ°æ­¤æŠ¥â½‚æ®µã€‚ ã€åº”ç”¨åœºæ™¯ã€‘ å½“å¯¹ç½‘ç»œé€šè®¯è´¨é‡æœ‰è¦æ±‚çš„æ—¶å€™ï¼Œæ¯”å¦‚ï¼šæ•´ä¸ªæ•°æ®è¦å‡†ç¡®æ— è¯¯çš„ä¼ é€’ç»™å¯¹æ–¹ï¼Œè¿™å¾€å¾€ç”¨äºä¸€äº›è¦æ±‚å¯é çš„åº”ç”¨ æ¯”å¦‚HTTPã€HTTPSã€FTPç­‰ä¼ è¾“æ–‡ä»¶çš„åè®®ï¼ŒPOPã€SMTPç­‰é‚®ä»¶ä¼ è¾“çš„åè®® 5.1 è¶…æ—¶é‡ä¼ æœºåˆ¶åŸç†ï¼Ÿ åŸºæœ¬åŸç†ï¼šåœ¨å‘é€ä¸€ä¸ªæ•°æ®ä¹‹åï¼Œå°±å¼€å¯ä¸€ä¸ªå®šæ—¶å™¨ï¼Œè‹¥æ˜¯åœ¨è¿™ä¸ªæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°å‘é€æ•°æ®çš„ACKç¡®è®¤æŠ¥æ–‡ï¼Œåˆ™å¯¹è¯¥æŠ¥æ–‡è¿›è¡Œé‡ä¼ ï¼Œåœ¨è¾¾åˆ°ä¸€å®šæ¬¡æ•°è¿˜æ²¡æœ‰æˆåŠŸæ—¶æ”¾å¼ƒå¹¶å‘é€ä¸€ä¸ªå¤ä½ä¿¡å·ã€‚ TCPä¸­æœ‰å››ç§è®¡æ—¶å™¨ï¼ˆTimerï¼‰ï¼Œåˆ†åˆ«ä¸ºï¼š é‡ä¼ è®¡æ—¶å™¨ï¼šåœ¨æ»‘åŠ¨çª—å£åè®®ä¸­ï¼Œæ¥å—çª—å£ä¼šåœ¨è¿ç»­æ”¶åˆ°çš„åŒ…åºåˆ—ï¼ˆè¿ç»­ARQï¼‰ä¸­çš„æœ€åä¸€ä¸ªåŒ…å‘æ¥æ”¶ç«¯å‘é€ä¸€ä¸ªACKã€‚å½“ç½‘ç»œæ‹¥å µçš„æ—¶å€™ï¼Œå‘é€ç«¯çš„æ•°æ®åŒ…å’Œæ¥æ”¶ç«¯çš„ACKåŒ…éƒ½æœ‰å¯èƒ½ä¸¢å¤±ã€‚TCPä¸ºäº†ä¿è¯æ•°æ®å¯é ä¼ è¾“ï¼Œå°±è§„å®šåœ¨é‡ä¼ çš„â€œæ—¶é—´ç‰‡â€åˆ°äº†ä»¥åï¼Œå¦‚æœè¿˜æ²¡æœ‰æ”¶åˆ°å¯¹æ–¹çš„ACKï¼Œå°±é‡å‘æ­¤åŒ…ï¼Œä»¥é¿å…é™·å…¥æ— é™ç­‰å¾…ä¸­ã€‚ åšæŒè®¡æ—¶å™¨ï¼šåœ¨æ»‘åŠ¨çª—å£åè®®ä¸­ï¼Œå½“å‘é€TCPæ”¶åˆ°çª—å£å¤§å°ä¸º0çš„ç¡®è®¤ACKæ—¶ï¼Œå°±åšæŒå¯åŠ¨è®¡æ—¶å™¨ã€‚å½“åšæŒè®¡æ—¶å™¨æœŸé™åˆ°æ—¶ï¼Œå‘é€TCPå°±å‘é€ä¸€ä¸ªç‰¹æ®Šçš„æŠ¥æ–‡æ®µï¼Œå«åšæ¢æµ‹æŠ¥æ–‡ã€‚è¿™ä¸ªæŠ¥æ–‡æ®µåªæœ‰ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®ã€‚ä»–æœ‰ä¸€ä¸ªåºå·ï¼Œä½†ä»–çš„åºå·æ°¸è¿œä¸éœ€è¦ç¡®è®¤ï¼›ç”šè‡³åœ¨è®¡ç®—æœºå¯¹å…¶ä»–éƒ¨åˆ†çš„æ•°æ®çš„ç¡®è®¤æ—¶è¯¥åºå·ä¹Ÿè¢«å¿½ç•¥ã€‚æ¢æµ‹æŠ¥æ–‡æ®µæé†’æ¥å—TCPï¼šç¡®è®¤å·²ä¸¢å¤±ï¼Œå¿…é¡»é‡ä¼ ã€‚ ä¿æ´»è®¡æ—¶å™¨ï¼šä¿æ´»è®¡æ—¶å™¨ä½¿ç”¨åœ¨æŸäº›å®ç°ä¸­ï¼Œç”¨æ¥é˜²æ­¢åœ¨ä¸¤ä¸ªTCPä¹‹é—´çš„è¿æ¥å‡ºç°é•¿æ—¶é—´çš„ç©ºé—²ã€‚å‡å®šå®¢æˆ·æ‰“å¼€äº†åˆ°æœåŠ¡å™¨çš„è¿æ¥ï¼Œä¼ é€äº†ä¸€äº›æ•°æ®ï¼Œç„¶åå°±ä¿æŒé™é»˜äº†ã€‚ä¹Ÿè®¸è¿™ä¸ªå®¢æˆ·å‡ºæ•…éšœäº†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä¸ªè¿æ¥å°†æ°¸è¿œçš„å¤„äºæ‰“å¼€çŠ¶æ€ã€‚ é€šå¸¸è®¾ç½®ä¸ºä¸¤å°æ—¶ã€‚è‹¥æœåŠ¡å™¨è¿‡äº†ä¸¤å°æ—¶è¿˜æ²¡æœ‰æ”¶åˆ°å®¢æˆ·çš„ä¿¡æ¯ï¼Œä»–å°±å‘é€æ¢æµ‹æŠ¥æ–‡æ®µã€‚è‹¥å‘é€äº†10ä¸ªæ¢æµ‹æŠ¥æ–‡æ®µï¼ˆæ¯ä¸€ä¸ªåƒä¸ª75ç§’ï¼‰è¿˜æ²¡æœ‰å“åº”ï¼Œå°±å‡å®šå®¢æˆ·é™¤äº†æ•…éšœï¼Œå› è€Œå°±ç»ˆæ­¢äº†è¯¥è¿æ¥ã€‚ æ—¶é—´ç­‰å¾…è®¡æ—¶å™¨ï¼šå››æ¬¡æŒ¥æ”¶åtime waiterçŠ¶æ€ä¸­ä½¿ç”¨ã€‚ 5.2 ä»‹ç»ä¸€ä¸‹ARQåè®® ï¼Ÿ â¾ƒåŠ¨é‡ä¼ è¯·æ±‚ï¼ˆAutomatic Repeat-reQuestï¼ŒARQï¼‰æ˜¯OSIæ¨¡å‹ä¸­æ•°æ®é“¾è·¯å±‚å’Œä¼ è¾“å±‚çš„é”™è¯¯çº æ­£åè®®ä¹‹â¼€ã€‚å®ƒé€šè¿‡ä½¿ç”¨ç¡®è®¤å’Œè¶…æ—¶è¿™ä¸¤ä¸ªæœºåˆ¶ï¼Œåœ¨ä¸å¯é æœåŠ¡çš„åŸºç¡€ä¸Šå®ç°å¯é çš„ä¿¡æ¯ä¼ è¾“ã€‚å¦‚æœå‘é€æ–¹åœ¨å‘é€åâ¼€æ®µæ—¶é—´ä¹‹å†…æ²¡æœ‰æ”¶åˆ°ç¡®è®¤å¸§ï¼Œå®ƒé€šå¸¸ä¼šé‡æ–°å‘é€ã€‚ ARQåŒ…æ‹¬åœâ½Œç­‰å¾…ARQåè®®å’Œè¿ç»­ARQåè®®ã€‚ åœâ½Œç­‰å¾…ARQåè®®ã€‚ åœâ½Œç­‰å¾…åè®®æ˜¯ä¸ºäº†å®ç°å¯é ä¼ è¾“çš„ï¼Œå®ƒçš„åŸºæœ¬åŸç†å°±æ˜¯æ¯å‘å®Œâ¼€ä¸ªåˆ†ç»„å°±åœâ½Œå‘é€ï¼Œç­‰å¾…å¯¹æ–¹ç¡®è®¤ï¼ˆå›å¤ACKï¼‰ã€‚å¦‚æœè¿‡äº†â¼€æ®µæ—¶é—´ï¼ˆè¶…æ—¶æ—¶é—´åï¼‰ï¼Œè¿˜æ˜¯æ²¡æœ‰æ”¶åˆ° ACK ç¡®è®¤ï¼Œè¯´æ˜æ²¡æœ‰å‘é€æˆåŠŸï¼Œéœ€è¦é‡æ–°å‘é€ï¼Œç›´åˆ°æ”¶åˆ°ç¡®è®¤åå†å‘ä¸‹â¼€ä¸ªåˆ†ç»„ï¼›åœ¨åœâ½Œç­‰å¾…åè®®ä¸­ï¼Œè‹¥æ¥æ”¶æ–¹æ”¶åˆ°é‡å¤åˆ†ç»„ï¼Œå°±ä¸¢å¼ƒè¯¥åˆ†ç»„ï¼Œä½†åŒæ—¶è¿˜è¦å‘é€ç¡®è®¤ã€‚ ä¼˜ç‚¹ï¼šç®€å• ç¼ºç‚¹ï¼šä¿¡é“åˆ©ç”¨ä½ï¼Œç­‰å¾…æ—¶é—´é•¿ è¿ç»­ARQåè®®ã€‚è¿ç»­ ARQ åè®®å¯æé«˜ä¿¡é“åˆ©ç”¨ç‡ã€‚å‘é€æ–¹ç»´æŒâ¼€ä¸ªå‘é€çª—å£ï¼Œå‡¡ä½äºå‘é€çª—å£å†…çš„åˆ†ç»„å¯ä»¥è¿ç»­å‘é€å‡ºå»ï¼Œè€Œä¸éœ€è¦ç­‰å¾…å¯¹æ–¹ç¡®è®¤ã€‚æ¥æ”¶æ–¹â¼€èˆ¬é‡‡ç”¨ç´¯è®¡ç¡®è®¤ï¼Œå¯¹æŒ‰åºåˆ°è¾¾çš„æœ€åâ¼€ä¸ªåˆ†ç»„å‘é€ç¡®è®¤ï¼Œè¡¨æ˜åˆ°è¿™ä¸ªåˆ†ç»„ä¸ºâ½Œçš„æ‰€æœ‰åˆ†ç»„éƒ½å·²ç»æ­£ç¡®æ”¶åˆ°äº†ã€‚ ä¼˜ç‚¹ï¼š ä¿¡é“åˆ©ç”¨ç‡é«˜ï¼Œå®¹æ˜“å®ç°ï¼Œå³ä½¿ç¡®è®¤ä¸¢å¤±ï¼Œä¹Ÿä¸å¿…é‡ä¼ ã€‚ ç¼ºç‚¹ï¼š ä¸èƒ½å‘å‘é€æ–¹åæ˜ å‡ºæ¥æ”¶æ–¹å·²ç»æ­£ç¡®æ”¶åˆ°çš„æ‰€æœ‰åˆ†ç»„çš„ä¿¡æ¯ã€‚ â½å¦‚ï¼šå‘é€æ–¹å‘é€äº† 5æ¡ æ¶ˆæ¯ï¼Œä¸­é—´ç¬¬ä¸‰æ¡ä¸¢å¤±ï¼ˆ3å·ï¼‰ï¼Œè¿™æ—¶æ¥æ”¶æ–¹åªèƒ½å¯¹å‰ä¸¤ä¸ªå‘é€ç¡®è®¤ã€‚å‘é€æ–¹æ— æ³•çŸ¥é“åä¸‰ä¸ªåˆ†ç»„çš„ä¸‹è½ï¼Œè€Œåªå¥½æŠŠåä¸‰ä¸ªå…¨éƒ¨é‡ä¼ â¼€æ¬¡ã€‚è¿™ä¹Ÿå« Go-Back-Nï¼ˆå›é€€ Nï¼‰ï¼Œè¡¨ç¤ºéœ€è¦é€€å›æ¥é‡ä¼ å·²ç»å‘é€è¿‡çš„N ä¸ªæ¶ˆæ¯ã€‚ 5.2 ä»‹ç»ä¸€ä¸‹è¿ç»­ARQåè®®æ»‘åŠ¨çª—å£å’Œæµé‡æ§åˆ¶ï¼Ÿ TCP åˆ©ç”¨æ»‘åŠ¨çª—å£å®ç°æµé‡æ§åˆ¶ã€‚æµé‡æ§åˆ¶æ˜¯ä¸ºäº†æ§åˆ¶å‘é€æ–¹å‘é€é€Ÿç‡ï¼Œä¿è¯æ¥æ”¶æ–¹æ¥å¾—åŠæ¥æ”¶ã€‚ æ¥æ”¶æ–¹å‘é€çš„ç¡®è®¤æŠ¥â½‚ä¸­çš„çª—å£å­—æ®µå¯ä»¥ç”¨æ¥æ§åˆ¶å‘é€æ–¹çª—å£å¤§å°ï¼Œä»è€Œå½±å“å‘é€æ–¹çš„å‘é€é€Ÿç‡ã€‚å°†çª—å£å­—æ®µè®¾ç½®ä¸º 0ï¼Œåˆ™å‘é€æ–¹ä¸èƒ½å‘é€æ•°æ®ã€‚ 5.3 ä»‹ç»ä¸€ä¸‹æ‹¥å¡æ§åˆ¶ï¼Ÿ ä¸ºäº†è¿›è¡Œæ‹¥å¡æ§åˆ¶ï¼ŒTCP å‘é€æ–¹è¦ç»´æŒâ¼€ä¸ª æ‹¥å¡çª—å£(cwnd) çš„çŠ¶æ€å˜é‡ã€‚æ‹¥å¡æ§åˆ¶çª—å£çš„å¤§å°å–å†³äºç½‘ç»œçš„æ‹¥å¡ç¨‹åº¦ï¼Œå¹¶ä¸”åŠ¨æ€å˜åŒ–ã€‚å‘é€æ–¹è®©â¾ƒâ¼°çš„å‘é€çª—å£ == å–ä¸ºæ‹¥å¡çª—å£å’Œæ¥æ”¶æ–¹çš„æ¥å—çª—å£ä¸­è¾ƒå°çš„â¼€ä¸ªã€‚ TCPçš„æ‹¥å¡æ§åˆ¶é‡‡ç”¨äº†å››ç§ç®—æ³•ï¼š æ…¢å¼€å§‹ï¼š æ…¢å¼€å§‹ç®—æ³•çš„æ€è·¯æ˜¯å½“ä¸»æœºå¼€å§‹å‘é€æ•°æ®æ—¶ï¼Œå¦‚æœâ½´å³æŠŠå¤§é‡æ•°æ®å­—èŠ‚æ³¨â¼Šåˆ°ç½‘ç»œï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå¼•èµ·ç½‘ç»œé˜»å¡ï¼Œå› ä¸ºç°åœ¨è¿˜ä¸çŸ¥é“ç½‘ç»œçš„ç¬¦åˆæƒ…å†µã€‚ç»éªŒè¡¨æ˜ï¼Œè¾ƒå¥½çš„æ–¹æ³•æ˜¯å…ˆæ¢æµ‹â¼€ä¸‹ï¼Œå³ç”±å°åˆ°å¤§é€æ¸å¢å¤§å‘é€çª—å£ï¼Œä¹Ÿå°±æ˜¯ç”±å°åˆ°å¤§é€æ¸å¢å¤§æ‹¥å¡çª—å£æ•°å€¼ã€‚cwndåˆå§‹å€¼ä¸º1ï¼Œæ¯ç»è¿‡â¼€ä¸ªä¼ æ’­è½®æ¬¡RTTï¼ŒcwndåŠ å€ï¼› æ‹¥å¡é¿å…ï¼š æ‹¥å¡é¿å…ç®—æ³•çš„æ€è·¯æ˜¯è®©æ‹¥å¡çª—â¼cwndç¼“æ…¢å¢å¤§ï¼Œå³æ¯ç»è¿‡â¼€ä¸ªå¾€è¿”æ—¶é—´RTTï¼Œå°±æŠŠå‘é€æ”¾çš„cwndåŠ 1ï¼› å¿«é‡ä¼ /å¿«æ¢å¤ï¼š åŒºåˆ†å¿«é‡ä¼ ï¼Œè¿ç»­ARQä¸­é—´ä¸¢å¤±æ˜¯Go back nã€‚ åœ¨ TCP/IP ä¸­ï¼Œå¿«é€Ÿé‡ä¼ å’Œæ¢å¤ï¼ˆfast retransmit and recoveryï¼ŒFRRï¼‰æ˜¯â¼€ç§æ‹¥å¡æ§åˆ¶ç®—æ³•ï¼Œå®ƒèƒ½å¿«é€Ÿæ¢å¤ä¸¢å¤±çš„æ•°æ®åŒ…ã€‚å¦‚æœæ¥æ”¶æœºæ¥æ”¶åˆ°â¼€ä¸ªã€ä¸æŒ‰é¡ºåºã€‘çš„æ•°æ®æ®µï¼Œå®ƒä¼šâ½´å³ç»™å‘é€æœºå‘é€â¼€ä¸ªé‡å¤ç¡®è®¤ï¼ˆè€Œä¸æ˜¯ç­‰åˆ°è‡ªå·±å‘é€æ•°æ®æ—¶æ‰æå¸¦ç¡®è®¤ï¼‰ã€‚å¦‚æœå‘é€æœºæ¥æ”¶åˆ°ä¸‰ä¸ªé‡å¤ç¡®è®¤ï¼Œå®ƒä¼šå‡å®šç¡®è®¤æŒ‡å‡ºçš„æ•°æ®æ®µä¸¢å¤±äº†ï¼Œå¹¶â½´å³é‡ä¼ è¿™äº›ä¸¢å¤±çš„æ•°æ®æ®µï¼ˆè€Œä¸å¿…ç»§ç»­ç­‰å¾…ä¸ºè¯¥æŠ¥æ–‡æ®µè®¾ç½®çš„é‡ä¼ è®¡æ—¶å™¨çš„è¶…æ—¶ï¼‰ã€‚ 5.4 å¦‚ä½•åŒºåˆ†æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶ï¼Ÿ æµé‡æ§åˆ¶å±äºé€šä¿¡åŒæ–¹åå•†ï¼Œæ‹¥å¡æ§åˆ¶æ¶‰åŠé€šä¿¡é“¾è·¯å…¨å±€ï¼› æµé‡æ§åˆ¶éœ€è¦é€šä¿¡åŒæ–¹å„ç»´æŠ¤ä¸€ä¸ªå‘é€çª—ã€ä¸€ä¸ªæ¥æ”¶çª—ï¼Œå¯¹ä»»æ„ä¸€æ–¹ï¼Œæ¥æ”¶çª—å¤§å°ç”±è‡ªèº«å†³å®šï¼Œå‘é€çª—å¤§å°ç”±æ¥æ”¶æ–¹å“åº”çš„TCPæŠ¥æ–‡æ®µä¸­çª—å£å€¼ç¡®å®šï¼›æ‹¥å¡æ§åˆ¶çš„æ‹¥å¡çª—å£å¤§å°å˜åŒ–ç”±è¯•æ¢æ€§å‘é€ä¸€å®šæ•°æ®é‡æ•°æ®æ¢æŸ¥ç½‘ç»œçŠ¶å†µåè€Œè‡ªé€‚åº”è°ƒæ•´ã€‚ 6.å¦‚ä½•æé«˜å®¢æˆ·ç«¯å¹¶å‘æ•°ï¼Ÿ å®¢æˆ·ç«¯å»ºç«‹çš„tcpæ•°é‡å—é™äºæœ€å¤§æ–‡ä»¶å¥æŸ„æ•°ï¼Œä¸€ä¸ªè¿æ¥å°±ä¼šå»ºä¸€ä¸ªæ–‡ä»¶å¥æŸ„ï¼Œåœ¨linux ä¸Šé»˜è®¤æ˜¯1024ã€‚ ä½¿ç”¨ulimit å¯ä»¥ä¿®æ”¹æœ€å¤§è¿›ç¨‹æ•°ï¼ˆæœ€å¤§ä¸º65535ï¼‰ 7.è¯´è¯´HTTPã€TCPã€Socket çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ TCP/IP ä»£è¡¨ä¼ è¾“æ§åˆ¶åè®®/ç½‘é™…åè®®ï¼ŒæŒ‡çš„æ˜¯ä¸€ç³»åˆ—åè®®æ—ï¼› HTTP æœ¬èº«å°±æ˜¯ä¸€ä¸ªåè®®ï¼Œæ˜¯ä» Web æœåŠ¡å™¨å’Œæœ¬åœ°æµè§ˆå™¨çš„è¶…æ–‡æœ¬ä¼ é€åè®®ï¼› Socket æ˜¯ TCP/IP ç½‘ç»œçš„ API ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªé—¨é¢æ¨¡å¼ï¼Œå®ƒæŠŠå¤æ‚çš„ TCP/IP åè®®æ—éšè—åœ¨Socket æ¥å£åé¢ã€‚å¯¹ç”¨æˆ·æ¥è¯´ï¼Œä¸€ç»„ç®€å•çš„æ¥å£å°±æ˜¯å…¨éƒ¨ï¼Œè®© Socket å»ç»„ç»‡æ•°æ®ï¼Œä»¥ç¬¦åˆæŒ‡å®šçš„åè®®ã€‚ 8. ä»€ä¹ˆæ˜¯åŠè¿æ¥é˜Ÿåˆ—ï¼Ÿæ³›æ´ªæ”»å‡»ï¼ˆDDosæ”»å‡»çš„ä¸€ç§ï¼‰ï¼Œä»¥åŠè§£å†³ç­–ç•¥ ï¼Ÿ åŠè¿æ¥é˜Ÿåˆ— æœåŠ¡å™¨ç¬¬ä¸€æ¬¡æ”¶åˆ°å®¢æˆ·ç«¯çš„ SYN ä¹‹åï¼Œå°±ä¼šå¤„äº SYN_RCVD çŠ¶æ€ï¼Œæ­¤æ—¶åŒæ–¹è¿˜æ²¡æœ‰å®Œå…¨å»ºç«‹å…¶è¿æ¥ï¼ŒæœåŠ¡å™¨ä¼šæŠŠæ­¤ç§çŠ¶æ€ä¸‹è¯·æ±‚è¿æ¥æ”¾åœ¨ä¸€ä¸ªé˜Ÿåˆ—é‡Œï¼Œæˆ‘ä»¬æŠŠè¿™ç§é˜Ÿåˆ—ç§°ä¹‹ä¸ºåŠè¿æ¥é˜Ÿåˆ—ã€‚ å·²ç»å®Œæˆä¸‰æ¬¡æ¡æ‰‹ï¼Œå»ºç«‹èµ·è¿æ¥çš„å°±ä¼šæ”¾åœ¨å…¨è¿æ¥é˜Ÿåˆ—ä¸­ã€‚å¦‚æœé˜Ÿåˆ—æ»¡äº†å°±æœ‰å¯èƒ½ä¼šå‡ºç°ä¸¢åŒ…ç°è±¡ã€‚ æ³›æ´ªæ”»å‡» åœ¨ TCP çš„ä¸‰æ¬¡æ¡æ‰‹æœºåˆ¶çš„ç¬¬ä¸€æ­¥ä¸­ï¼Œå®¢æˆ·ç«¯ä¼šå‘æœåŠ¡å™¨å‘é€ SYN æŠ¥æ–‡æ®µã€‚ æœåŠ¡å™¨æ¥æ”¶åˆ° SYN æŠ¥æ–‡æ®µåä¼šä¸ºè¯¥ TCPåˆ†é…ç¼“å­˜å’Œå˜é‡ï¼Œå¦‚æœæ”»å‡»åˆ†å­ä¼ªé€ å¤§é‡ä¸å­˜åœ¨çš„IPåœ°å€ï¼Œå¤§é‡åœ°å¾€æœåŠ¡å™¨å‘é€ SYN æŠ¥æ–‡æ®µï¼ŒæœåŠ¡å™¨çš„è¿æ¥èµ„æºç»ˆå°†è¢«è€—å°½ï¼Œå¯¼è‡´å†…å­˜æº¢å‡ºæ— æ³•ç»§ç»­æœåŠ¡ã€‚ å½“æœåŠ¡ç«¯æ¥æ”¶åˆ° SYN åè¿›å…¥ SYN-RECV çŠ¶æ€ï¼Œæ­¤æ—¶çš„è¿æ¥ç§°ä¸ºåŠè¿æ¥ï¼ŒåŒæ—¶ä¼šè¢«æœåŠ¡ç«¯å†™å…¥ä¸€ä¸ªåŠè¿æ¥é˜Ÿåˆ—ã€‚ æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœæ”»å‡»è€…åœ¨çŸ­æ—¶é—´å†…ä¸æ–­çš„å‘æœåŠ¡ç«¯å‘é€å¤§é‡çš„ SYN åŒ…è€Œä¸å“åº”ï¼Œé‚£ä¹ˆæœåŠ¡å™¨çš„åŠè¿æ¥é˜Ÿåˆ—å¾ˆå¿«ä¼šè¢«å†™æ»¡ï¼Œä»è€Œå¯¼è‡´æ— æ³•å·¥ä½œã€‚ è§£å†³ç­–ç•¥ è®¾ç½®éªŒè¯æœºåˆ¶ï¼šå½“æœåŠ¡å™¨æ¥å—åˆ° SYN æŠ¥æ–‡æ®µæ—¶ï¼Œä¸ç›´æ¥ä¸ºè¯¥ TCP åˆ†é…èµ„æºï¼Œè€Œåªæ˜¯æ‰“å¼€ä¸€ä¸ªåŠå¼€çš„å¥—æ¥å­—ã€‚æ¥ç€ä¼šä½¿ç”¨ SYN æŠ¥æ–‡æ®µçš„æº Idï¼Œç›®çš„ Idï¼Œç«¯å£å·ä»¥åŠåªæœ‰æœåŠ¡å™¨è‡ªå·±çŸ¥é“çš„ä¸€ä¸ªç§˜å¯†å‡½æ•°ç”Ÿæˆä¸€ä¸ª cookieï¼Œå¹¶æŠŠ cookieä½œä¸ºåºåˆ—å·å“åº” ç»™å®¢æˆ·ç«¯ã€‚ å¦‚æœå®¢æˆ·ç«¯æ˜¯æ­£å¸¸å»ºç«‹è¿æ¥ï¼Œå°†ä¼šè¿”å›ä¸€ä¸ªç¡®è®¤å­—æ®µä¸º cookie + 1 çš„æŠ¥æ–‡æ®µã€‚æ¥ä¸‹æ¥æœåŠ¡å™¨ä¼šæ ¹æ®ç¡®è®¤æŠ¥æ–‡çš„æº Idï¼Œç›®çš„ Idï¼Œç«¯å£å·ä»¥åŠç§˜å¯†å‡½æ•°è®¡ç®—å‡ºä¸€ä¸ªç»“æœï¼Œå¦‚æœç»“æœçš„å€¼ + 1 ç­‰äºç¡®è®¤å­—æ®µçš„å€¼ï¼Œåˆ™è¯æ˜æ˜¯åˆšåˆšè¯·æ±‚è¿æ¥çš„å®¢æˆ·ç«¯ï¼Œè¿™æ—¶å€™æ‰ä¸ºè¯¥ TCP åˆ†é…èµ„æº ã€‚ é˜²ç«å¢™è¿‡æ»¤ï¼š æš‚ä¸äº†è§£å…·ä½“ 9.ä¸ºä»€ä¹ˆDNSï¼ˆåŸŸåè§£æï¼‰ç”¨UDPï¼Œè€ŒåŒºåŸŸä¼ é€ç”¨TCP? DNSç”¨UDPï¼šå®¢æˆ·ç«¯å‘DNSæœåŠ¡å™¨æŸ¥è¯¢åŸŸåï¼Œä¸€èˆ¬è¿”å›çš„å†…å®¹éƒ½ä¸è¶…è¿‡512å­—èŠ‚ï¼Œç”¨UDPä¼ è¾“å³å¯ã€‚ä¸ç”¨ç»è¿‡TCPä¸‰æ¬¡æ¡æ‰‹ï¼Œè¿™æ ·DNSæœåŠ¡å™¨è´Ÿè½½æ›´ä½ï¼Œå“åº”æ›´å¿«ã€‚ åŒºåŸŸä¼ é€ç”¨TCPï¼š TCPåè®®å¯é æ€§å¥½ï¼ŒTCPåè®®ä¼ è¾“çš„å†…å®¹å¤§ï¼Œè€ŒUDPæœ€å¤§åªèƒ½ä¼ 512å­—èŠ‚ã€‚ 10.è¯´ä¸€ä¸‹ TCP ç²˜åŒ…æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿæ€ä¹ˆè§£å†³ç²˜åŒ…ï¼Ÿ TCPç²˜åŒ… TCPç²˜åŒ…æ˜¯æŒ‡å‘é€æ–¹å‘é€çš„è‹¥å¹²åŒ…æ•°æ®åˆ°æ¥æ”¶æ–¹æ¥æ”¶æ—¶ç²˜æˆä¸€åŒ…ï¼Œä»æ¥æ”¶ç¼“å†²åŒºçœ‹ï¼Œåä¸€åŒ…æ•°æ®çš„å¤´ç´§æ¥ç€å‰ä¸€åŒ…æ•°æ®çš„å°¾ã€‚ å®¢æˆ·ç«¯è¦å‘é€åŸä¿¡æ¯æ˜¯Aå’ŒBä¸¤ä¸ªæ•°æ®åŒ…ï¼ŒæœåŠ¡ç«¯æ¥æ”¶åˆ°ä¹‹åï¼Œå¯èƒ½å‡ºç°å¦‚ä¸‹æƒ…å†µï¼š æ­£å¸¸æƒ…å†µï¼šè¯»å–åˆ°äº†Aå’ŒBä¸¤ä¸ªæ•°æ®åŒ…ï¼› ç²˜åŒ…ï¼šAå’ŒBä¸¤ä¸ªæ•°æ®åŒ…ä¸€èµ·è¯»å–äº†ï¼› æ‹†åŒ…ï¼šè¯»å–äº†Aæ•°æ®åŒ…çš„ä¸€éƒ¨åˆ†ï¼ŒAçš„å¦ä¸€éƒ¨åˆ†å’ŒBæ•°æ®åŒ…ä¸€èµ·è¯»å–äº†ã€‚ TCPç²˜åŒ…åŸå›  ã€å‘é€æ–¹ã€‘TCPé»˜è®¤ä½¿ç”¨Nagleç®—æ³•ã€‚å®¢æˆ·ç«¯é€šè¿‡socketç»™æœåŠ¡ç«¯å‘é€æ•°æ®ï¼Œä¸ºäº†ä¼ è¾“æ›´æœ‰æ•ˆç‡ï¼Œä¼šå°†å¤šæ¬¡é—´éš”è¾ƒå°çš„ä¸”æ•°æ®é‡å°çš„æ•°æ®ï¼Œé€šè¿‡nagleç®—æ³•ï¼Œåˆå¹¶æˆä¸€ä¸ªå¤§çš„æ•°æ®å—ï¼Œç„¶åè¿›è¡Œå°åŒ…ã€‚è¿™æ ·åšæé«˜äº†æ•ˆç‡ï¼Œç¼ºç‚¹å°±æ˜¯ä½ å‘é€åˆ°æœåŠ¡ç«¯çš„æ•°æ®ï¼ŒæœåŠ¡ç«¯ä¸çŸ¥é“æ˜¯ä¸æ˜¯å®Œæ•´çš„ï¼Œä¸çŸ¥é“å“ªå‡ å°å—æ•°æ®æ‹¼èµ·æ¥æ‰æ˜¯åŸæ¥çš„æ•°æ®ï¼› ã€æ¥æ”¶æ–¹ã€‘æ¥ä¸åŠæ¥æ”¶ç¼“å­˜åŒºçš„åŒ…ï¼Œå¯¼è‡´å¤šä¸ªåŒ…æ¥æ”¶ï¼› TCPè¿æ¥å¤ç”¨é€ æˆçš„ç²˜åŒ…é—®é¢˜ï¼› æµé‡æ§åˆ¶ï¼Œæ‹¥å¡æ§åˆ¶ä¹Ÿå¯èƒ½å¯¼è‡´ç²˜åŒ…ã€‚ è§£å†³ç²˜åŒ… è§£å†³é—®é¢˜çš„å…³é”®åœ¨äºå¦‚ä½•ç»™æ¯ä¸ªæ•°æ®åŒ…æ·»åŠ è¾¹ç•Œä¿¡æ¯ï¼š Nagleç®—æ³•é—®é¢˜å¯¼è‡´çš„ï¼Œéœ€è¦ç»“åˆåº”ç”¨åœºæ™¯é€‚å½“å…³é—­è¯¥ç®—æ³•ï¼› å‘é€ç«¯ç»™æ¯ä¸ªæ•°æ®åŒ…æ·»åŠ åŒ… é¦–éƒ¨ ï¼Œé¦–éƒ¨ä¸­åº”è¯¥è‡³å°‘åŒ…å«æ•°æ®åŒ…çš„é•¿åº¦ï¼Œè¿™æ ·æ¥æ”¶ç«¯åœ¨æ¥æ”¶åˆ°æ•°æ®åï¼Œé€šè¿‡è¯»å–åŒ…é¦–éƒ¨çš„é•¿åº¦å­—æ®µï¼Œä¾¿çŸ¥é“æ¯ä¸€ä¸ªæ•°æ®åŒ…çš„å®é™…é•¿åº¦äº†ï¼› æ•°æ®åŒ…ä¹‹é—´è®¾ç½®è¾¹ç•Œï¼Œå¦‚æ·»åŠ ç‰¹æ®Šç¬¦å·ï¼Œè¿™æ ·ï¼Œæ¥æ”¶ç«¯é€šè¿‡è¿™ä¸ªè¾¹ç•Œå°±å¯ä»¥å°†ä¸åŒçš„æ•°æ®åŒ…æ‹†åˆ†å¼€ ï¼› å‘é€ç«¯å°†æ¯ä¸ªæ•°æ®åŒ…å°è£…ä¸ºå›ºå®šé•¿åº¦ï¼ˆä¸å¤Ÿçš„å¯ä»¥é€šè¿‡è¡¥0å¡«å……ï¼‰ï¼Œè¿™æ ·æ¥æ”¶ç«¯æ¯æ¬¡ä»æ¥æ”¶ç¼“å†²åŒºä¸­è¯»å–å›ºå®šé•¿åº¦çš„æ•°æ®å°±è‡ªç„¶è€Œç„¶çš„æŠŠæ¯ä¸ªæ•°æ®åŒ…æ‹†åˆ†å¼€æ¥ã€‚ 11. TCP, UDPçš„åŒºåˆ«ï¼Ÿ UDP åœ¨ä¼ é€æ•°æ®ä¹‹å‰ä¸éœ€è¦å…ˆå»ºç«‹è¿æ¥ã€‚è¿œåœ°ä¸»æœºåœ¨æ”¶åˆ° UDP æŠ¥â½‚åï¼Œä¸éœ€è¦ç»™å‡ºä»»ä½•ç¡®è®¤ã€‚è™½ç„¶UDP ä¸æä¾›å¯é äº¤ä»˜ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ UDP ç¡®æ˜¯â¼€ç§æœ€æœ‰æ•ˆçš„â¼¯ä½œæ–¹å¼ï¼ˆâ¼€èˆ¬ç”¨äºå³æ—¶é€šä¿¡ï¼‰ â½å¦‚ï¼š QQ è¯­â¾³ã€ QQ è§†é¢‘ ã€ç›´æ’­ç­‰ç­‰ TCP æä¾›é¢å‘è¿æ¥çš„æœåŠ¡ã€‚åœ¨ä¼ é€æ•°æ®ä¹‹å‰å¿…é¡»å…ˆå»ºâ½´è¿æ¥ï¼Œæ•°æ®ä¼ é€ç»“æŸåè¦é‡Šæ”¾è¿æ¥ã€‚ TCP ä¸æä¾›â¼´æ’­æˆ–å¤šæ’­æœåŠ¡ã€‚ç”±äº TCP è¦æä¾›å¯é çš„ï¼Œé¢å‘è¿æ¥çš„ä¼ è¾“æœåŠ¡ï¼ˆTCPçš„å¯é ä½“ç°åœ¨TCPåœ¨ä¼ é€’æ•°æ®ä¹‹å‰ï¼Œä¼šæœ‰ä¸‰æ¬¡æ¡â¼¿æ¥å»ºâ½´è¿æ¥ï¼Œè€Œä¸”åœ¨æ•°æ®ä¼ é€’æ—¶ï¼Œæœ‰ç¡®è®¤ã€çª—å£ã€é‡ä¼ ã€æ‹¥å¡æ§åˆ¶æœºåˆ¶ï¼Œåœ¨æ•°æ®ä¼ å®Œåï¼Œè¿˜ä¼šæ–­å¼€è¿æ¥ç”¨æ¥èŠ‚çº¦ç³»ç»Ÿèµ„æºï¼‰ï¼Œè¿™â¼€éš¾ä»¥é¿å…å¢åŠ äº†è®¸å¤šå¼€é”€ï¼Œå¦‚ç¡®è®¤ï¼Œæµé‡æ§åˆ¶ï¼Œè®¡æ—¶å™¨ä»¥åŠè¿æ¥ç®¡ç†ç­‰ã€‚è¿™ä¸ä»…ä½¿åè®®æ•°æ®å•å…ƒçš„â¾¸éƒ¨å¢å¤§å¾ˆå¤šï¼Œè¿˜è¦å ç”¨è®¸å¤šå¤„ç†æœºèµ„æºã€‚ TCP â¼€èˆ¬ç”¨äºâ½‚ä»¶ä¼ è¾“ã€å‘é€å’Œæ¥æ”¶é‚®ä»¶ã€è¿œç¨‹ç™»å½•ç­‰åœºæ™¯ã€‚ æ•°æ®åŒ…ï¼š TCPæ˜¯æŠ¥æ–‡æ®µï¼ŒUDPæ˜¯ç”¨æˆ·æ•°æ®æŠ¥ã€‚ åº”ç”¨åœºæ™¯ ï¼š TCPç”¨äºä¸€äº›éœ€è¦å¯é ä¼ è¾“çš„åœºæ™¯ï¼› UDPåˆ™åº”ç”¨ä¸€äº›å³æ—¶é€šä¿¡åœºæ™¯ï¼Œä¸éœ€è¦å¯é ä¼ è¾“çš„åœºæ™¯ã€‚ é•¿åº¦ï¼šUDPåœ¨DNSæœ€é•¿åªèƒ½æ˜¯512å­—èŠ‚ï¼ŒTCPä¼šæ›´é•¿ã€‚ 3.3 ç½‘ç»œå±‚ 1.è¯·ç®€å•è§£é‡Šä¸€ä¸‹ï¼ŒARPåè®®å’ŒARPæ”»å‡»? ARPåè®®ï¼šåœ°å€è§£æåè®®ï¼Œå»ºç«‹IP/MACåœ°å€æ˜ å°„è¡¨ ARPæ”»å‡»ï¼š 2.ä»€ä¹ˆæ˜¯ICMPåè®®ï¼Œå®ƒçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ ç”¨äºåœ¨IPä¸»æœºã€è·¯ç”±å™¨ä¹‹é—´ä¼ é€’æ§åˆ¶æ¶ˆæ¯ã€‚ æ§åˆ¶æ¶ˆæ¯æ˜¯æŒ‡ï¼šç½‘ç»œé€šä¸é€šã€ä¸»æœºæ˜¯å¦å¯è¾¾ã€è·¯ç”±æ˜¯å¦å¯ç”¨ç­‰ç½‘ç»œæœ¬èº«çš„æ¶ˆæ¯ã€‚è¿™äº›æ§åˆ¶æ¶ˆæ¯è™½ç„¶å¹¶ä¸ä¼ è¾“ç”¨æˆ·æ•°æ®ï¼Œä½†æ˜¯å¯¹äºç”¨æˆ·æ•°æ®çš„ä¼ é€’èµ·ç€é‡è¦çš„ä½œç”¨ã€‚ 3.è¯·ä½ è®²ä¸€ä¸‹è·¯ç”±å™¨å’Œäº¤æ¢æœºçš„åŒºåˆ«ï¼Ÿ åŠ¨æ€IPï¼šè·¯ç”±å™¨å¯ä»¥ç»™ä½ çš„å±€åŸŸç½‘è‡ªåŠ¨åˆ†é…IPï¼Œè™šæ‹Ÿæ‹¨å·ï¼Œå°±åƒä¸€ä¸ªäº¤é€šè­¦å¯Ÿï¼ŒæŒ‡æŒ¥ç€ä½ çš„ç”µè„‘è¯¥å¾€å“ªèµ°ï¼Œä½ è‡ªå·±ä¸ç”¨æ“å¿ƒé‚£ä¹ˆå¤šäº†ã€‚äº¤æ¢æœºåªæ˜¯ç”¨æ¥åˆ†é…ç½‘ç»œæ•°æ®çš„ã€‚ è·¯ç”±å™¨å¯ä»¥æŠŠä¸€ä¸ªIPåˆ†é…ç»™å¾ˆå¤šä¸ªä¸»æœºä½¿ç”¨ï¼Œè¿™äº›ä¸»æœºå¯¹å¤–åªè¡¨ç°å‡ºä¸€ä¸ªIPã€‚äº¤æ¢æœºå¯ä»¥æŠŠå¾ˆå¤šä¸»æœºè¿èµ·æ¥ï¼Œè¿™äº›ä¸»æœºå¯¹å¤–å„æœ‰å„çš„IPã€‚ å¯»å€æ–¹å¼ï¼šè·¯ç”±å™¨åœ¨ç½‘ç»œå±‚ï¼Œè·¯ç”±å™¨æ ¹æ®IPåœ°å€å¯»å€ï¼Œè·¯ç”±å™¨å¯ä»¥å¤„ç†TCP/IPåè®®ï¼Œäº¤æ¢æœºä¸å¯ä»¥ï¼›äº¤æ¢æœºåœ¨ä¸­ç»§å±‚ï¼Œäº¤æ¢æœºæ ¹æ®MACåœ°å€å¯»å€ã€‚ é˜²ç«å¢™ï¼šè·¯ç”±å™¨æä¾›é˜²ç«å¢™çš„æœåŠ¡ï¼Œäº¤æ¢æœºä¸èƒ½æä¾›è¯¥åŠŸèƒ½ã€‚é›†çº¿å™¨ã€äº¤æ¢æœºéƒ½æ˜¯åšç«¯å£æ‰©å±•çš„ï¼Œå°±æ˜¯æ‰©å¤§å±€åŸŸç½‘(é€šå¸¸éƒ½æ˜¯ä»¥å¤ªç½‘)çš„æ¥å…¥ç‚¹ï¼Œä¹Ÿå°±æ˜¯èƒ½è®©å±€åŸŸç½‘å¯ä»¥è¿è¿›æ¥æ›´å¤šçš„ç”µè„‘ã€‚è·¯ç”±å™¨æ˜¯ç”¨æ¥åšç½‘é—´è¿æ¥ï¼Œä¹Ÿå°±æ˜¯ç”¨æ¥è¿æ¥ä¸åŒçš„ç½‘ç»œã€‚ 4.è¯·è§£é‡Špingå‘½ä»¤è¿‡ç¨‹ï¼Ÿ åŸŸååœ¨DNSæœåŠ¡å™¨æŸ¥æ‰¾IPåœ°å€ï¼› é€šè¿‡Pingç¨‹åºå‘é€ICMPåŒ…ï¼› åŒä¸€ç½‘æ®µçš„æƒ…å†µä¸‹ï¼Œè°ƒç”¨IPå±‚çš„ARPåè®®è¯·æ±‚å¹¿æ’­ï¼ˆä¸åŒç½‘æ®µçš„æƒ…å†µä¸‹ï¼Œäº¤ç»™è·¯ç”±å™¨å¤„ç†ï¼‰ï¼ŒæŸ¥æ‰¾ç›®æ ‡ä¸»æœºçš„MACåœ°å€ï¼› ç›®æ ‡ä¸»æœºARPåè®®æ”¶åˆ°è¯·æ±‚åï¼Œå°†æœ¬æœºMACåœ°å€å¡«å……å¹¶å‘é€ARPåº”ç­”å›åˆ°è¯·æ±‚å‘é€æ–¹ï¼› è¯·æ±‚å‘é€æ–¹å‘é€ICMPæ•°æ®åˆ°ç›®æ ‡ä¸»æœºï¼› ç›®æ ‡ä¸»æœºå“åº”ICMPåŒ…ï¼› è¯·æ±‚ä¸»æœºæ”¶åˆ°ç›®æ ‡ä¸»æœºçš„ICMPå“åº”åŒ…ã€‚ 5. ï¼ˆè¡¥å……ä»‹ç»ï¼‰ä»‹ç»ä¸€ä¸‹IPV6ï¼Ÿä¸€å…±å¤šå°‘ä½ï¼Ÿ æºIPå’Œç›®çš„IPåœ°å€éƒ½æ˜¯ï¼Œ128ï¼ˆ4*32ï¼‰ä½ï¼ˆå›¾ä¸­æ ‡è¯†ä¸æ¸…æ™°ï¼‰ï¼ 6. ä»‹ç»ä¸€ä¸‹IPåœ°å€åˆ†ç±»ï¼ŸCç±»å“ªäº›æ˜¯ä¿ç•™åœ°å€ï¼Ÿç½‘ç»œå·å…¨ 0 å…¨ 1 ï¼Œä¸»æœºå·å…¨ 0 å…¨1 åˆ†åˆ«ä»€ä¹ˆå«ä¹‰ï¼Ÿ IPåœ°å€åˆ†ç±» IPåœ°å€ == &#123;&lt;ç½‘ç»œå·&gt;ï¼Œ&lt;ä¸»æœºå·&gt;&#125; Aç±»ï¼š ç¬¬1ä½å›ºå®šä¸º0ï¼Œç½‘ç»œå·åªæœ‰7ä½ ã€‚0ï¼ˆ0000 0000ï¼‰çš„IPåœ°å€æ˜¯ä¿ç•™åœ°å€ï¼Œæ„æ€æ˜¯â€œæœ¬ç½‘ç»œâ€ ï¼› 127ï¼ˆ0111 1111ï¼‰çš„IPåœ°å€ä¹Ÿæ˜¯ä¿ç•™åœ°å€ï¼Œä½œä¸ºæœ¬åœ°ç¯å›è½¯ä»¶æµ‹è¯• ã€‚ ç‰¹åˆ«çš„ï¼Œä¸»æœºå·å…¨1çš„æ˜¯å¹¿æ’­åœ°å€ï¼Œå®ƒä»£è¡¨äº†ç½‘ç»œå…¨éƒ¨çš„ä¸»æœºã€‚ Bç±»ï¼š ç¬¬1ã€2ä½å›ºå®šä¸º10ï¼Œç½‘ç»œå·æœ‰14ä½å¯ä»¥ä½¿ç”¨ ã€‚ Bç±»åœ°å€ç½‘ç»œå·ä¸º128.0ï¼ˆ1000 000 0000 0000ï¼‰çš„IPåœ°å€æ˜¯ä¸æŒ‡æ´¾çš„ï¼Œæ‰€ä»¥å¯æŒ‡æ´¾çš„ç½‘ç»œå·éœ€è¦å‡ä¸€ã€‚ Cç±»ï¼š ç¬¬1ã€2ã€3ä½å›ºå®šä¸º110ï¼Œç½‘ç»œå·æœ‰21ä½å¯ä»¥ä½¿ç”¨ ã€‚ ï¼ˆå¿«æ‰‹é—®ï¼‰Cç±»IPåœ°å€åŒ…å«ç§æœ‰Cç±»åœ°å€ï¼ŒèŒƒå›´ä»192.0.0.0 åˆ°223.255.255.255ï¼Œå…¶ä¸­ç§æœ‰Cç±»åœ°å€èŒƒå›´ä»192.168.0.0 åˆ°192.168.255.255ã€‚ å…¨0æˆ–è€…å…¨1çš„å«ä¹‰ ç½‘ç»œå·å…¨0ï¼šï¼ˆ1ï¼‰å¦‚æœä¸»æœºå·ä¹Ÿä¸ºå…¨0ï¼Œé‚£ä¹ˆæ­¤ç±»ipåœ°å€å¯ä»¥å½“æºç«¯ä½†ä¸å¯ä»¥åšç›®çš„ç«¯ ï¼ˆ2ï¼‰å¦‚æœä¸»æœºå·ä¸å…¨ä¸º0ï¼Œé‚£ä¹ˆæ­¤ç±»ipåœ°å€çš„ä½¿ç”¨å’Œï¼ˆ1)ç›¸åŒï¼Œåªæ˜¯å®ƒä»£è¡¨çš„æ˜¯ç½‘ç»œä¸Šç‰¹å®šçš„ä¸»æœº ç½‘ç»œå·å…¨1ï¼šå…¨1çš„ç½‘ç»œå·å’Œä»»æ„çš„ä¸»æœºå·ç»„åˆå½“åšå›ç¯åœ°å€æ¥ä½¿ç”¨ã€‚ ä¾‹å¦‚ï¼š127ï¼ˆ0111 1111ï¼‰çš„IPåœ°å€ ä¸»æœºå·å…¨0ï¼š å…¨ä¸º0ï¼Œæ‰€å¾—åˆ°çš„åœ°å€å°±æ˜¯192.168.100.0ï¼Œå®ƒæ˜¯ä¸€ä¸ªç½‘ç»œåœ°å€ï¼Œä»£è¡¨çš„æ˜¯ä¸€ä¸ªç½‘æ®µï¼› ä¸»æœºå·å…¨1ï¼š æœºå·å…¨1 ä»£è¡¨çš„æ˜¯å¹¿æ’­åœ°å€ï¼Œå¹¿æ’­åœ°å€æ˜¯ä¸å¯ä»¥åšæºç«¯çš„ï¼Œä½†æ˜¯å¯ä»¥åšç›®çš„ç«¯ã€‚ 3.4 åº”ç”¨å±‚ 1.è¯·ä½ è°ˆè°ˆDNSçš„å¯»å€è¿‡ç¨‹ï¼Ÿ ï¼ˆ1ï¼‰æ£€æŸ¥æµè§ˆå™¨ç¼“å­˜ã€æ£€æŸ¥æœ¬åœ°hostsæ–‡ä»¶ï¼šæ˜¯å¦æœ‰è¿™ä¸ªç½‘å€çš„æ˜ å°„ï¼Œå¦‚æœæœ‰ï¼Œå°±è°ƒç”¨è¿™ä¸ªIPåœ°å€æ˜ å°„ï¼Œè§£æå®Œæˆã€‚ ï¼ˆ2ï¼‰å¦‚æœæ²¡æœ‰ï¼Œåˆ™æŸ¥æ‰¾æœ¬åœ°DNSè§£æå™¨ç¼“å­˜ï¼šæ˜¯å¦æœ‰è¿™ä¸ªç½‘å€çš„æ˜ å°„ï¼Œå¦‚æœæœ‰ï¼Œè¿”å›æ˜ å°„ï¼Œè§£æå®Œæˆã€‚ æœ¬åœ°dnsæœåŠ¡å™¨ä¸€èˆ¬éƒ½æ˜¯ä½ çš„ç½‘ç»œæ¥å…¥æœåŠ¡å™¨å•†æä¾›ï¼Œæ¯”å¦‚ä¸­å›½ç”µä¿¡ï¼Œä¸­å›½ç§»åŠ¨ç­‰ã€‚ ï¼ˆ3ï¼‰å¦‚æœæ²¡æœ‰ï¼Œåˆ™æŸ¥æ‰¾å¡«å†™æˆ–åˆ†é…çš„é¦–é€‰DNSæœåŠ¡å™¨ï¼šç§°ä¸ºæœ¬åœ°DNSæœåŠ¡å™¨ã€‚æœåŠ¡å™¨æ¥æ”¶åˆ°æŸ¥è¯¢æ—¶ï¼š å¦‚æœè¦æŸ¥è¯¢çš„åŸŸååŒ…å«åœ¨æœ¬åœ°é…ç½®åŒºåŸŸèµ„æºä¸­ï¼Œè¿”å›è§£æç»“æœï¼ŒæŸ¥è¯¢ç»“æŸï¼Œæ­¤è§£æå…·æœ‰æƒå¨æ€§ã€‚ å¦‚æœè¦æŸ¥è¯¢çš„åŸŸåä¸ç”±æœ¬åœ°DNSæœåŠ¡å™¨åŒºåŸŸè§£æï¼Œä½†æœåŠ¡å™¨ç¼“å­˜äº†æ­¤ç½‘å€çš„æ˜ å°„å…³ç³»ï¼Œè¿”å›è§£æç»“æœï¼ŒæŸ¥è¯¢ç»“æŸï¼Œæ­¤è§£æä¸å…·æœ‰æƒå¨æ€§ã€‚ ï¼ˆ4ï¼‰å¦‚æœæœ¬åœ°DNSæœåŠ¡å™¨ä¹Ÿå¤±æ•ˆï¼š å¦‚æœæœªé‡‡ç”¨è½¬å‘æ¨¡å¼ï¼ˆè¿­ä»£ï¼Œä»ä¸Šè‡³ä¸‹ï¼‰ï¼ˆ1ï¼‰æœ¬åœ°DNSæœåŠ¡å™¨å°±æŠŠè¯·æ±‚å‘è‡³13å°æ ¹DNSï¼Œæ ¹DNSæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼Œä¼šåˆ¤æ–­è¿™ä¸ªåŸŸåï¼ˆå¦‚.comï¼‰æ˜¯è°æ¥æˆæƒç®¡ç†ï¼Œå¹¶è¿”å›ä¸€ä¸ªè´Ÿè´£è¯¥é¡¶çº§åŸŸåæœåŠ¡å™¨çš„IPï¼Œï¼ˆ2ï¼‰æœ¬åœ°DNSæœåŠ¡å™¨æ”¶åˆ°é¡¶çº§åŸŸåæœåŠ¡å™¨IPä¿¡æ¯åï¼Œç»§ç»­å‘è¯¥é¡¶çº§åŸŸåæœåŠ¡å™¨IPå‘é€è¯·æ±‚ï¼Œï¼ˆ3ï¼‰è¯¥æœåŠ¡å™¨å¦‚æœæ— æ³•è§£æï¼Œåˆ™ä¼šæ‰¾åˆ°è´Ÿè´£è¿™ä¸ªåŸŸåçš„ä¸‹ä¸€çº§DNSæœåŠ¡å™¨ï¼ˆå¦‚http://baidu.comï¼‰çš„IPç»™æœ¬åœ°DNSæœåŠ¡å™¨ï¼Œå¾ªç¯å¾€å¤ç›´è‡³æŸ¥è¯¢åˆ°æ˜ å°„ï¼Œï¼ˆ4ï¼‰å°†è§£æç»“æœè¿”å›æœ¬åœ°DNSæœåŠ¡å™¨ï¼Œå†ç”±æœ¬åœ°DNSæœåŠ¡å™¨è¿”å›è§£æç»“æœï¼ŒæŸ¥è¯¢å®Œæˆã€‚ å¦‚æœé‡‡ç”¨è½¬å‘æ¨¡å¼ï¼ˆé€’å½’ï¼Œä»ä¸‹è‡³ä¸Šï¼‰ï¼ˆ1ï¼‰åˆ™æ­¤DNSæœåŠ¡å™¨å°±ä¼šæŠŠè¯·æ±‚è½¬å‘è‡³ä¸Šä¸€çº§DNSæœåŠ¡å™¨ï¼Œï¼ˆ2ï¼‰å¦‚æœä¸Šä¸€çº§DNSæœåŠ¡å™¨ä¸èƒ½è§£æï¼Œåˆ™ç»§ç»­å‘ä¸Šè¯·æ±‚ï¼Œï¼ˆ3ï¼‰æœ€ç»ˆå°†è§£æç»“æœä¾æ¬¡è¿”å›æœ¬åœ°DNSæœåŠ¡å™¨ï¼Œæœ¬åœ°DNSæœåŠ¡å™¨å†è¿”å›ç»™å®¢æˆ·æœºï¼ŒæŸ¥è¯¢å®Œæˆã€‚ 1.1 æ€ä¹ˆè·å–13å°æ ¹æœåŠ¡å™¨ï¼Ÿ ping -R ? æŠ“åŒ…ï¼Ÿ 1.2 è§£é‡Šä¸€ä¸‹DNSåŠ«æŒå’ŒDNSæ±¡æŸ“ï¼Ÿ å‚è€ƒï¼šä»€ä¹ˆæ˜¯httpåŠ«æŒ ? ä¸€ã€DNSåŠ«æŒ DNSåŠ«æŒæŸäº›æ‰‹æ®µå–å¾—æŸåŸŸåçš„è§£æè®°å½•æ§åˆ¶æƒï¼Œè¿›è€Œä¿®æ”¹æ­¤åŸŸåçš„è§£æç»“æœï¼Œè¿”å›ç»™ç”¨æˆ·ä¸€ä¸ªé”™è¯¯çš„æŸ¥è¯¢ç»“æœã€‚ åŠ«æŒè¿‡ç¨‹ å®¢æˆ·ç«¯å‘èµ·åŸŸåè¯·æ±‚åˆ°DNSè§£ææœåŠ¡å™¨ï¼ˆä¸€èˆ¬æ˜¯LocalDNSï¼‰ï¼Œä½†æ­¤æ—¶DNSè§£ææœåŠ¡å™¨è¢«æ”»å‡»ç¯¡æ”¹ï¼› è¢«æ”»å‡»ç¯¡æ”¹åçš„DNSè§£ææœåŠ¡å™¨å°†è¯·æ±‚è½¬å‘ç»™è™šå‡æœåŠ¡å™¨ï¼› DNSæŸ¥è¯¢æ²¡æœ‰ä»»ä½•è®¤è¯æœºåˆ¶ä¸”åŸºäºUDPä¸å¯é è¿æ¥ï¼Œå› æ­¤å¾ˆå®¹æ˜“è¢«ç¯¡æ”¹ã€‚ è™šå‡æœåŠ¡å™¨è¿”å›å“åº”è™šå‡ä¿¡æ¯ç»™è¢«æ”»å‡»ç¯¡æ”¹åçš„DNSè§£ææœåŠ¡å™¨ï¼ˆä¹Ÿå¯èƒ½ç›´æ¥ä¸å“åº”ï¼‰ï¼› è§£å†³åŠæ³• DNSåŠ«æŒçš„æœ¬è´¨æ˜¯è¿è¥å•†çš„DNSè§£ææœåŠ¡å™¨è¢«æ”»å‡»ç¯¡æ”¹ ä½¿ç”¨å›½å¤–å…è´¹å…¬ç”¨çš„DNSæœåŠ¡å™¨è§£å†³ã€‚ä¾‹å¦‚OpenDNSï¼ˆ208.67.222.222ï¼‰æˆ–GoogleDNSï¼ˆ8.8.8.8ï¼‰ ç›´æ¥ä½¿ç”¨ipè¿›è¡Œè®¿é—® äºŒã€DNSæ±¡æŸ“ DNSæ±¡æŸ“æ˜¯ä¸€ç§è®©ä¸€èˆ¬ç”¨æˆ·ç”±äºå¾—åˆ°è™šå‡ç›®æ ‡ä¸»æœºIPè€Œä¸èƒ½ä¸å…¶é€šä¿¡çš„æ–¹æ³•ï¼Œæ˜¯ä¸€ç§DNSç¼“å­˜æŠ•æ¯’æ”»å‡»ï¼ˆDNS cache poisoningï¼‰ã€‚å› ä¸ºæ˜¯ä¸æ˜¯åŠ«æŒå•ä¸ªDNSæœåŠ¡å™¨ï¼Œè€Œæ˜¯ç›‘å¬æ‰€æœ‰çš„ï¼Œæ‰€ä»¥ä¸ªäººæ¯”è¾ƒéš¾é˜²èŒƒã€‚ æ±¡æŸ“åŸç† é€šè¿‡å¯¹UDPç«¯å£53ä¸Šçš„DNSæŸ¥è¯¢è¿›è¡Œå…¥ä¾µæ£€æµ‹ï¼› ç”±äºé€šå¸¸çš„DNSæŸ¥è¯¢æ²¡æœ‰ä»»ä½•è®¤è¯æœºåˆ¶ï¼Œè€Œä¸”DNSæŸ¥è¯¢é€šå¸¸åŸºäºçš„UDPæ˜¯æ— è¿æ¥ä¸å¯é çš„åè®®ï¼Œå› æ­¤DNSçš„æŸ¥è¯¢éå¸¸å®¹æ˜“è¢«ç¯¡æ”¹ã€‚ ä¸€ç»å‘ç°ä¸å…³é”®è¯ç›¸åŒ¹é…çš„è¯·æ±‚åˆ™ç«‹å³ä¼ªè£…æˆç›®æ ‡åŸŸåçš„è§£ææœåŠ¡å™¨ï¼ˆNSï¼ŒName Serverï¼‰ç»™æŸ¥è¯¢è€…è¿”å›è™šå‡ç»“æœã€‚ è§£å†³åŠæ³• VPNä»£ç†æˆ–è€…åŸŸåè¿œç¨‹è§£æçš„æ–¹æ³•è§£å†³ é€šè¿‡ä¿®æ”¹Hostsï¼Œæ‰‹åŠ¨è®¾ç½®åŸŸåæ­£ç¡®çš„IPåœ°å€ 2. Forwardå’ŒRedirectçš„åŒºåˆ«ï¼Ÿ æµè§ˆå™¨ URL åœ°å€ï¼šForward æ˜¯æœåŠ¡å™¨å†…éƒ¨çš„é‡å®šå‘ï¼ŒæœåŠ¡å™¨å†…éƒ¨è¯·æ±‚æŸä¸ª servletï¼Œç„¶åè·å–å“åº”çš„å†…å®¹ï¼Œæµè§ˆå™¨çš„ URL åœ°å€ä¸ä¼šå˜åŒ–ï¼›Redirect æ˜¯å®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡å™¨ï¼Œç„¶åæœåŠ¡å™¨ç»™å®¢æˆ·ç«¯è¿”å›äº†ä¸€ä¸ª302 çŠ¶æ€ç å’Œæ–°çš„ locationï¼Œå®¢æˆ·ç«¯é‡æ–°å‘èµ· HTTP è¯·æ±‚ï¼ŒæœåŠ¡å™¨ç»™å®¢æˆ·ç«¯å“åº” location å¯¹åº”çš„ URL åœ°å€ï¼Œæµè§ˆå™¨çš„ URL åœ°å€å‘ç”Ÿäº†å˜åŒ–ã€‚ æ•°æ®çš„å…±äº«ï¼šForward æ˜¯æœåŠ¡å™¨å†…éƒ¨çš„é‡å®šå‘ï¼Œrequest åœ¨æ•´ä¸ªé‡å®šå‘è¿‡ç¨‹ä¸­æ˜¯ä¸å˜çš„ï¼Œrequest ä¸­çš„ä¿¡æ¯åœ¨ servlet é—´æ˜¯å…±äº«çš„ã€‚Redirect å‘èµ·äº†ä¸¤æ¬¡ HTTP è¯·æ±‚åˆ†åˆ«ä½¿ç”¨ä¸åŒçš„requestã€‚ è¯·æ±‚çš„æ¬¡æ•°ï¼šForward åªæœ‰ä¸€æ¬¡è¯·æ±‚ï¼›Redirect æœ‰ä¸¤æ¬¡è¯·æ±‚ã€‚ 3.è¯·ä½ ç®€å•è®²è§£ä¸€ä¸‹ï¼Œè´Ÿè½½å‡è¡¡åå‘ä»£ç†æ¨¡å¼çš„ä¼˜ç‚¹ã€ç¼ºç‚¹ï¼Ÿ è”ç³»å®é™…ï¼šæ­£åå‘ä»£ç†ã€ç§‘å­¦ä¸Šç½‘ã€VPNä¹‹é—´çš„å…³ç³» å’Œç¿»å¢™åŸºæœ¬åŸç†ï¼ˆçœ‹ä»–çš„å…¶ä»–æ–‡ç« è¡¥å……ï¼‰ ã€åŸºæœ¬ä»‹ç»ã€‘ åå‘ä»£ç†ï¼ˆReverse Proxyï¼‰ï¼šæ–¹å¼æ˜¯æŒ‡ä»¥ä»£ç†æœåŠ¡å™¨æ¥æ¥å—internetä¸Šçš„è¿æ¥è¯·æ±‚ï¼Œç„¶åå°†è¯·æ±‚è½¬å‘ç»™å†…éƒ¨ç½‘ç»œä¸Šçš„æœåŠ¡å™¨ï¼Œå¹¶å°†ä»æœåŠ¡å™¨ä¸Šå¾—åˆ°çš„ç»“æœè¿”å›ç»™internetä¸Šè¯·æ±‚è¿æ¥çš„å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶ä»£ç†æœåŠ¡å™¨å¯¹å¤–å°±è¡¨ç°ä¸ºä¸€ä¸ªæœåŠ¡å™¨ï¼› ä¼˜ç‚¹ï¼š ç½‘ç»œç»œå¤–éƒ¨ç”¨æˆ·ä¸èƒ½ç›´æ¥è®¿é—®çœŸå®çš„æœåŠ¡å™¨ï¼Œå…·å¤‡é¢å¤–çš„å®‰å…¨æ€§ ç¼ºç‚¹ï¼š åå‘ä»£ç†æ˜¯å¤„äºOSIå‚è€ƒæ¨¡å‹ç¬¬ä¸ƒå±‚åº”ç”¨çš„ï¼Œæ‰€ä»¥å°±å¿…é¡»ä¸ºæ¯ä¸€ç§åº”ç”¨æœåŠ¡ä¸“é—¨å¼€å‘ä¸€ä¸ªåå‘ä»£ç†æœåŠ¡å™¨ï¼›é™åˆ¶äº†åº”ç”¨èŒƒå›´ï¼› é’ˆå¯¹æ¯ä¸€æ¬¡ä»£ç†ï¼Œä»£ç†æœåŠ¡å™¨å°±å¿…é¡»æ‰“å¼€ä¸¤ä¸ªè¿æ¥ï¼Œä¸€ä¸ªå¯¹å¤–ï¼Œä¸€ä¸ªå¯¹å†…ï¼Œå› æ­¤åœ¨å¹¶å‘è¿æ¥è¯·æ±‚æ•°é‡éå¸¸å¤§çš„æ—¶å€™ï¼Œä»£ç†æœåŠ¡å™¨çš„è´Ÿè½½ä¹Ÿå°±éå¸¸å¤§äº†ï¼Œåœ¨æœ€åä»£ç†æœåŠ¡å™¨æœ¬èº«ä¼šæˆä¸ºæœåŠ¡çš„ç“¶é¢ˆã€‚ åå‘ä»£ç†è´Ÿè½½å‡è¡¡æŠ€æœ¯ï¼šæ˜¯æŠŠå°†æ¥è‡ªinternetä¸Šçš„è¿æ¥è¯·æ±‚ä»¥åå‘ä»£ç†çš„æ–¹å¼åŠ¨æ€åœ°è½¬å‘ç»™å†…éƒ¨ç½‘ç»œä¸Šçš„å¤šå°æœåŠ¡å™¨è¿›è¡Œå¤„ç†ï¼Œä»è€Œè¾¾åˆ°è´Ÿè½½å‡è¡¡çš„ç›®çš„ã€‚ å®ç°ï¼šapache mod_proxyã€netscape proxyç­‰ï¼Œä¹Ÿå¯ä»¥åœ¨é«˜é€Ÿç¼“å­˜å™¨ã€è´Ÿè½½å‡è¡¡å™¨ç­‰ç¡¬ä»¶è®¾å¤‡ä¸Šå®ç°ã€‚ ä¼˜ç‚¹ï¼šå¯ä»¥å°†ä¼˜åŒ–çš„ è´Ÿè½½å‡è¡¡ç­–ç•¥å’Œä»£ç†æœåŠ¡å™¨çš„é«˜é€Ÿç¼“å­˜æŠ€æœ¯ç»“åˆåœ¨ä¸€èµ·ï¼Œæå‡é™æ€ç½‘é¡µçš„è®¿é—®é€Ÿåº¦ï¼Œæä¾›æœ‰ç›Šçš„æ€§èƒ½ ç¼ºç‚¹ï¼š 3.1 è¯·è§£é‡Šä¸‹è´Ÿè½½å‡è¡¡çš„ç›¸å…³ç®—æ³•ï¼Ÿ ä¸åŒçš„åç«¯æœåŠ¡å™¨å¯èƒ½æœºå™¨çš„é…ç½®å’Œå½“å‰ç³»ç»Ÿçš„è´Ÿè½½å¹¶ä¸ç›¸åŒï¼Œå› æ­¤å®ƒä»¬çš„æŠ—å‹èƒ½åŠ›ä¹Ÿä¸ç›¸åŒã€‚ ç»™é…ç½®é«˜ã€è´Ÿè½½ä½çš„æœºå™¨é…ç½®æ›´é«˜çš„æƒé‡ï¼Œè®©å…¶å¤„ç†æ›´å¤šçš„è¯·æ±‚ï¼› ç»™é…ç½®ä½ã€è´Ÿè½½é«˜çš„æœºå™¨åˆ†é…è¾ƒä½çš„æƒé‡ï¼Œé™ä½ç³»ç»Ÿè´Ÿè½½ã€‚ ä¸‹é¢æ˜¯å‡ ç§æ¯”è¾ƒç›¸å…³çš„ç®—æ³•ã€‚ åŠ æƒè½®è¯¢ç®—æ³• å‚è€ƒï¼šåŠ æƒè½®è¯¢ç®—æ³• åŸºæœ¬å®šä¹‰ å‡è®¾æœ‰ N å°å®ä¾‹ S = {S1, S2, â€¦, Sn}ï¼Œæƒé‡ W = {W1, W2, â€¦, Wn} currentPos è¡¨ç¤ºå½“å‰é€‰æ‹©çš„å®ä¾‹ IDï¼Œåˆå§‹åŒ–ä¸º -1ï¼› currentWeight è¡¨ç¤ºå½“å‰æƒé‡ï¼Œåˆå§‹å€¼ä¸º max(S)ï¼› max(S) è¡¨ç¤º N å°å®ä¾‹çš„æœ€å¤§æƒé‡å€¼ï¼Œgcd(S) è¡¨ç¤º N å°å®ä¾‹æƒé‡çš„æœ€å¤§å…¬çº¦æ•°ã€‚ ç®—æ³•è¿‡ç¨‹ ä»ä¸Šä¸€æ¬¡è°ƒåº¦å®ä¾‹èµ·ï¼Œéå†åé¢çš„æ¯ä¸ªå®ä¾‹ï¼› è‹¥æ‰€æœ‰å®ä¾‹å·²è¢«éå†è¿‡ä¸€æ¬¡ï¼Œåˆ™å‡å° currentWeight ä¸º currentWeight - gcd(S)ï¼Œå¹¶ä»å¤´å¼€å§‹éå†ï¼›è‹¥ currentWeight å°äºç­‰äº 0ï¼Œåˆ™é‡ç½®ä¸º max(S)ï¼› ç›´åˆ° éå†çš„å®ä¾‹çš„æƒé‡ &gt;= currentWeight æ—¶ç»“æŸï¼Œæ­¤æ—¶å®ä¾‹ä¸ºéœ€è°ƒåº¦çš„å®ä¾‹ï¼› æ¯æ¬¡è°ƒåº¦é‡å¤æ­¥éª¤ 1ã€2ã€3ï¼› ç®—æ³•å®ä¾‹ ä¾‹å¦‚ï¼Œä¸Šè¿° 4 ä¸ªæœåŠ¡ï¼Œæœ€å¤§æƒé‡ max(S) ä¸º 4ï¼Œæœ€å¤§å…¬çº¦æ•° gcd(S) ä¸º 1ã€‚å…¶è°ƒåº¦è¿‡ç¨‹å¦‚ä¸‹ï¼š ç®—æ³•ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼š ç›¸æ¯” ç®€å•è½®è¯¢ æ–¹å¼ï¼Œé€šè¿‡æƒé‡è¿›è¡Œåˆ†é…ï¼Œæ›´åŠ å‡åŒ€ ç¼ºç‚¹ï¼šå¦‚ä¸‹ä¸€ä¸ªæç«¯æƒ…å†µ æœåŠ¡å®ä¾‹ S = {a, b, c}ï¼Œæƒé‡ W = {5, 1, 1}ï¼Œä½¿ç”¨åŠ æƒè½®è¯¢è°ƒåº¦ç”Ÿæˆçš„å®ä¾‹åºåˆ—ä¸º {a, a, a, a, a, b, c}ï¼Œé‚£ä¹ˆå°±ä¼šå­˜åœ¨è¿ç»­ 5 ä¸ªè¯·æ±‚éƒ½è¢«è°ƒåº¦åˆ°å®ä¾‹ aã€‚ å…³äºè¿™ç‚¹ï¼Œå¯ä»¥é‡‡ç”¨ å¹³æ»‘åŠ æƒè½®è¯¢ è°ƒåº¦ç®—æ³• ã€‚ ä¸€è‡´æ€§å“ˆå¸Œç®—æ³• è´Ÿè½½å‡è¡¡ç®—æ³•ä¸­çš„å“ˆå¸Œç®—æ³•ï¼Œå°±æ˜¯æ ¹æ®æŸä¸ªå€¼ç”Ÿæˆä¸€ä¸ªå“ˆå¸Œå€¼ï¼Œç„¶åå¯¹åº”åˆ°æŸå°æœåŠ¡å™¨ä¸Šå»ï¼Œå³å“ˆå¸Œç¯ã€‚ ä½†æ˜¯å¯èƒ½å‡ºç°ä¸€ç§ï¼Œå“ˆå¸Œå€¾æ–œçš„æƒ…å†µï¼šAè´Ÿè´£çš„åŒºåŸŸå¤ªå¤§ï¼ŒBï¼ŒCè´Ÿè´£çš„å°ã€‚è¿™ä¸ªæ—¶å€™é‡‡ç”¨è™šæ‹ŸèŠ‚ç‚¹å»è§£å†³ï¼Œè¿™é‡Œä¸è¡¨ã€‚ 3.2 DNS è´Ÿè½½å‡è¡¡æ˜¯ä»€ä¹ˆç­–ç•¥ï¼Ÿ å‚è€ƒï¼š åŸç†ï¼š è¿˜æ˜¯ä¸å¤ªæ˜ç™½ï¼ŒDNSé€’å½’æŸ¥è¯¢æœ¬èº«å°±æ˜¯ä¸ªè´Ÿè½½å‡è¡¡ç­–ç•¥å§ï¼Ÿå¤šå°æœåŠ¡å™¨æ»¡è¶³åŒä¸€ä¸ªæŸ¥è¯¢æœåŠ¡ï¼Ÿ 4.è¯·è¯´æ˜ä¸€ä¸‹httpå’Œhttpsçš„åŒºåˆ«ï¼Ÿ httpsåè®®è¦ç”³è¯·è¯ä¹¦åˆ°caï¼Œéœ€è¦ä¸€å®šç»æµæˆæœ¬ï¼› httpæ˜¯æ˜æ–‡ä¼ è¾“ï¼Œhttpsæ˜¯åŠ å¯†çš„å®‰å…¨ä¼ è¾“ï¼› ï¼ˆğŸš©*1ï¼‰è¿æ¥çš„ç«¯å£ä¸ä¸€æ ·ï¼Œhttpæ˜¯80ï¼Œhttpsæ˜¯443ï¼› httpè¿æ¥å¾ˆç®€å•ï¼Œæ²¡æœ‰çŠ¶æ€ï¼› httpsæ˜¯sslåŠ å¯†çš„ä¼ è¾“ï¼Œèº«ä»½è®¤è¯çš„ç½‘ç»œåè®®ï¼Œç›¸å¯¹httpæ˜æ–‡ä¼ è¾“æ¯”è¾ƒå®‰å…¨ã€‚ 4.1 è®²ä¸€è®²httpçš„è¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡ï¼Ÿåè®®ï¼Ÿ è¯·æ±‚æŠ¥æ–‡å’Œåè®® ä¸€ä¸ªHTTPè¯·æ±‚æŠ¥æ–‡ç”±è¯·æ±‚è¡Œï¼ˆrequest lineï¼‰ã€è¯·æ±‚å¤´éƒ¨ï¼ˆheaderï¼‰ã€ç©ºè¡Œå’Œè¯·æ±‚æ•°æ®4ä¸ªéƒ¨åˆ†ç»„æˆï¼Œä¸‹å›¾ç»™å‡ºäº†è¯·æ±‚æŠ¥æ–‡çš„ä¸€èˆ¬æ ¼å¼ã€‚ è¯·æ±‚è¡Œ ï¼šç”±è¯·æ±‚æ–¹æ³•å­—æ®µã€URLå­—æ®µå’ŒHTTPåè®®ç‰ˆæœ¬å­—æ®µ3ä¸ªå­—æ®µç»„æˆã€‚ HTTPåè®® : çš„è¯·æ±‚æ–¹æ³•æœ‰GETã€POSTã€HEADã€PUTã€DELETEã€OPTIONSã€TRACEã€CONNECTã€‚ è¯·æ±‚å¤´éƒ¨ï¼š è¯·æ±‚å¤´éƒ¨ç”±å…³é”®å­—/å€¼å¯¹ç»„æˆï¼Œæ¯è¡Œä¸€å¯¹ï¼Œå…³é”®å­—å’Œå€¼ç”¨è‹±æ–‡å†’å·â€œ:â€åˆ†éš” ã€‚ è¯·æ±‚å¤´éƒ¨é€šçŸ¥æœåŠ¡å™¨æœ‰å…³äºå®¢æˆ·ç«¯è¯·æ±‚çš„ä¿¡æ¯ã€‚ User-Agentï¼šäº§ç”Ÿè¯·æ±‚çš„æµè§ˆå™¨ç±»å‹ã€‚ Acceptï¼šå®¢æˆ·ç«¯å¯è¯†åˆ«çš„å†…å®¹ç±»å‹åˆ—è¡¨ã€‚ Hostï¼šè¯·æ±‚çš„ä¸»æœºåï¼Œå…è®¸å¤šä¸ªåŸŸååŒå¤„ä¸€ä¸ªIPåœ°å€ï¼Œå³è™šæ‹Ÿä¸»æœºã€‚ è¯·æ±‚æ•°æ® : è¯·æ±‚æ•°æ®ä¸åœ¨GETæ–¹æ³•ä¸­ä½¿ç”¨ï¼Œè€Œæ˜¯åœ¨POSTæ–¹æ³•ä¸­ä½¿ç”¨ã€‚POSTæ–¹æ³•é€‚ç”¨äºéœ€è¦å®¢æˆ·å¡«å†™è¡¨å•çš„åœºåˆã€‚ å“åº”æŠ¥æ–‡å’Œåè®® HTTPå“åº”ä¹Ÿç”±å››ä¸ªéƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯ï¼šçŠ¶æ€è¡Œã€å“åº”å¤´ã€ç©ºæ ¼ã€å“åº”æ•°æ®ã€‚ çŠ¶æ€è¡Œ ï¼š çŠ¶æ€è¡Œï¼ˆstatus lineï¼‰é€šè¿‡æä¾›ä¸€ä¸ªçŠ¶æ€ç æ¥è¯´æ˜æ‰€è¯·æ±‚çš„èµ„æºæƒ…å†µã€‚å¦‚404ç­‰ 4.2 ä¸€ä¸ªTCPè¿æ¥ä¸­å¤šä¸ªHTTPè¯·æ±‚å‘ç”Ÿå¯ä»¥ã€åŒæ—¶ã€‘ä¸€èµ·å‘ç”Ÿå—ï¼Ÿ HTTP/1.1å•ä¸ª TCP è¿æ¥åœ¨åŒä¸€æ—¶åˆ»åªèƒ½å¤„ç†ä¸€ä¸ªè¯·æ±‚ã€‚æ„æ€æ˜¯è¯´ï¼šä¸¤ä¸ªè¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸä¸èƒ½é‡å ï¼Œä»»æ„ä¸¤ä¸ª HTTP è¯·æ±‚ä»å¼€å§‹åˆ°ç»“æŸçš„æ—¶é—´åœ¨åŒä¸€ä¸ª TCP è¿æ¥é‡Œä¸èƒ½é‡å ï¼› Pipelining æŠ€æœ¯ &amp; Multiplexingã€‚ Pipelining æŠ€æœ¯å¯ä»¥å®Œæˆè¿™ä¸ªå¤šä¸ªè¯·æ±‚åŒæ—¶å‘é€ï¼Œä½†æ˜¯ç”±äºæµè§ˆå™¨é»˜è®¤å…³é—­ï¼Œæ‰€ä»¥å¯ä»¥è®¤ä¸ºè¿™æ˜¯ä¸å¯è¡Œçš„ã€‚åœ¨ HTTP2 ä¸­ç”±äº Multiplexing ç‰¹ç‚¹çš„å­˜åœ¨ï¼Œå¤šä¸ª HTTP è¯·æ±‚å¯ä»¥åœ¨åŒä¸€ä¸ª TCP è¿æ¥ä¸­å¹¶è¡Œè¿›è¡Œï¼› é‚£ä¹ˆåœ¨ HTTP/1.1 æ—¶ä»£ï¼Œæµè§ˆå™¨æ˜¯å¦‚ä½•æé«˜é¡µé¢åŠ è½½æ•ˆç‡çš„å‘¢ï¼Ÿ ç»´æŒå’ŒæœåŠ¡å™¨å·²ç»å»ºç«‹çš„ TCP è¿æ¥ï¼Œåœ¨åŒä¸€è¿æ¥ä¸Šé¡ºåºå¤„ç†å¤šä¸ªè¯·æ±‚ï¼› å’ŒæœåŠ¡å™¨å»ºç«‹å¤šä¸ª TCP è¿æ¥ã€‚ 5.è¯·è¯´æ˜ä¸€ä¸‹http1.0 å’Œhttps1.1 åŒºåˆ«ï¼Ÿ é•¿è¿æ¥ HTTP1.0é»˜è®¤ä½¿ç”¨çŸ­è¿æ¥ï¼Œæ¯æ¬¡HTTPè¯·æ±‚éƒ½éœ€è¦å»ºç«‹æ–°çš„TCPè¿æ¥ï¼Œè¿æ¥ä¸èƒ½å¤ç”¨ï¼› HTTP1.1æ”¯æŒæŒä¹…è¿æ¥å’Œè¯·æ±‚çš„æµæ°´çº¿å¤„ç†ï¼ˆä½†ä¸æ˜¯å¹¶å‘ï¼ï¼ï¼‰ï¼Œåœ¨ä¸€ä¸ªTCPè¿æ¥ä¸Šå¯ä»¥ä¼ é€å¤šä¸ªHTTPè¯·æ±‚å’Œå“åº”ï¼Œå‡å°‘å»ºç«‹å’Œå…³é—­TCPè¿æ¥çš„æ¶ˆè€—å’Œå»¶è¿Ÿï¼Œæé«˜æ•ˆç‡ hostå­—æ®µ åœ¨HTTP1.0ä¸­ä¸ºæ¯å°æœåŠ¡å™¨ç»‘å®šä¸€ä¸ªå”¯ä¸€çš„IPåœ°å€ï¼Œå› æ­¤ï¼Œè¯·æ±‚æ¶ˆæ¯ä¸­çš„URLå¹¶æ²¡æœ‰ä¼ é€’ä¸»æœºåï¼ˆhostnameï¼‰ HTTP1.1çš„è¯·æ±‚æ¶ˆæ¯å’Œå“åº”æ¶ˆæ¯éƒ½åº”æ”¯æŒHostå¤´åŸŸï¼ˆè¡¥å……ï¼šF12 æŠ“åŒ…å¯ä»¥çœ‹åˆ°ï¼‰ï¼Œä¸”è¯·æ±‚æ¶ˆæ¯ä¸­å¦‚æœæ²¡æœ‰Hostå¤´åŸŸï¼Œä¼šæŠ¥400 Bad Requesté”™è¯¯ ç¼“å­˜å¤„ç† HTTP1.1åˆ™å¼•å…¥äº†æ›´å¤šçš„ç¼“å­˜æ§åˆ¶ç­–ç•¥ å¸¦å®½ä¼˜åŒ–åŠç½‘ç»œè¿æ¥çš„ä½¿ç”¨ HTTP1.0ä¸­å­˜åœ¨æµªè´¹å¸¦å®½ç°è±¡ï¼Œä¾‹å¦‚ï¼šï¼ˆ1ï¼‰å®¢æˆ·ç«¯åªéœ€è¦æŸä¸ªå¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œè€ŒæœåŠ¡å™¨å´å°†æ•´ä¸ªå¯¹è±¡å‘é€è¿‡æ¥ï¼›(2) ä¸‹è½½å¤§æ–‡ä»¶ä¸æ”¯æŒæ–­ç‚¹ç»­ä¼ åŠŸèƒ½ï¼Œåœ¨å‘ç”Ÿæ–­è¿åéœ€è¦é‡æ–°ä¸‹è½½å®Œæ•´çš„åŒ…ï¼› HTTP1.1åˆ™åœ¨è¯·æ±‚å¤´ä¸­å¼•å…¥rangeå¤´åŸŸï¼Œå®ƒå…è®¸åªè¯·æ±‚èµ„æºçš„æŸä¸ªéƒ¨åˆ†(å› æ­¤ä¹Ÿæ”¯æŒæ–­ç‚¹é‡ä¼ )ï¼Œå³è¿”å›ç æ˜¯206ï¼› æ–°å¢ä¸€äº›é”™è¯¯é€šçŸ¥çŠ¶æ€ç  å¦‚ï¼š409ï¼ˆConflictï¼‰è¡¨ç¤ºè¯·æ±‚çš„èµ„æºä¸èµ„æºçš„å½“å‰çŠ¶æ€å‘ç”Ÿå†²çª ã€‚ 6.è¯·è¯´æ˜ä¸€ä¸‹http1.0 å’Œhttps2.0 åŒºåˆ«ï¼Ÿ 7.è¯·è®²ä¸€ä¸‹æµè§ˆå™¨ä»æ¥æ”¶åˆ°ä¸€ä¸ªURLï¼Œåˆ°æœ€åå±•ç¤ºå‡ºé¡µé¢ï¼Œç»å†äº†å“ªäº›è¿‡ç¨‹ï¼Ÿ åœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥URLï¼› DNSåŸŸåè§£æï¼Œè·å¾—åŸŸåç›¸å¯¹åº”çš„IPåœ°å€ï¼ˆè¯¦è§ï¼šåº”ç”¨å±‚DNSå¯»å€è¿‡ç¨‹ï¼‰ï¼› æµè§ˆå™¨é¦–å…ˆä¼šä»ï¼ˆ1ï¼‰æœ¬åœ°æµè§ˆå™¨ç¼“å­˜ã€hostsæ–‡ä»¶æ˜¯å¦å­˜åœ¨ç›¸åº”çš„åŸŸåã€IPå¯¹åº”å…³ç³»ï¼Œå¦‚æœæœ‰åˆ™å‘è¿™ä¸ªIPåœ°å€å‘é€è¯·æ±‚ï¼Œå¦‚æœæ²¡æœ‰åˆ™å‘ï¼ˆ2ï¼‰æœ¬åœ°DNSè§£æå™¨ç¼“å­˜ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœéƒ½æ²¡æœ‰ï¼Œï¼ˆ3ï¼‰å†å»DNSæœåŠ¡å™¨ä¸­æ‰¾IPã€‚ æµè§ˆå™¨å‘æœåŠ¡å™¨å‘èµ·TCPè¿æ¥ï¼Œä¸æµè§ˆå™¨å»ºç«‹TCPä¸‰æ¬¡æ¡æ‰‹ï¼›ç„¶å å‘æœåŠ¡å™¨å‘é€HTTPè¯·æ±‚ï¼Œè¯·æ±‚æ•°æ®åŒ… HTTPè¯·æ±‚æ˜¯ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šè¯·æ±‚è¡Œã€è¯·æ±‚æŠ¥å¤´å’Œè¯·æ±‚æ­£æ–‡ã€‚ ä¸æœåŠ¡å™¨å»ºç«‹äº†è¿æ¥åï¼Œå°±å¯ä»¥å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚äº†ã€‚å‘é€HTTPè¯·æ±‚çš„è¿‡ç¨‹å°±æ˜¯æ„å»ºHTTPè¯·æ±‚æŠ¥æ–‡ï¼Œå¹¶é€šè¿‡TCPåè®®å‘é€åˆ°æœåŠ¡å™¨æŒ‡å®šç«¯å£ï¼ˆHTTPåè®®80/8080ï¼ŒHTTPSåè®®443ï¼‰ã€‚ æœåŠ¡ç«¯ï¼ˆç”±webæœåŠ¡å™¨ï¼‰å¤„ç†æ”¶åˆ°çš„è¯·æ±‚ æœåŠ¡å™¨ç«¯æ”¶åˆ°è¯·æ±‚åï¼Œç”±webæœåŠ¡å™¨ï¼ˆå‡†ç¡®æ¥è¯´åº”è¯¥æ˜¯HTTPæœåŠ¡å™¨ï¼‰å¤„ç†è¯·æ±‚ï¼Œè¯¸å¦‚Apacheã€Ngnixã€IIS ã€‚ æœåŠ¡å™¨è¿”å›ç›¸åº”ç»“æœï¼ˆå“åº”æŠ¥æ–‡ï¼‰è‡³æµè§ˆå™¨ HTTPå“åº”æŠ¥æ–‡ä¹Ÿæ˜¯ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šçŠ¶æ€ç ã€å“åº”æŠ¥å¤´å’Œå“åº”æŠ¥æ–‡ã€‚ çŠ¶æ€ç æ˜¯ç”±ä¸‰ä½æ•°ç»„æˆï¼Œç¬¬ä¸€ä¸ªæ•°å­—å®šä¹‰äº†å“åº”çš„ç±»åˆ«ï¼š 1XXï¼šæŒ‡ç¤ºä¿¡æ¯ï¼Œè¡¨ç¤ºè¯·æ±‚å·²æ¥å—ï¼Œç»§ç»­å¤„ç†ï¼› 2XXï¼šæˆåŠŸï¼Œè¡¨ç¤ºè¯·æ±‚å·²è¢«æˆåŠŸæ¥æ”¶ã€ç†è§£ã€æ¥å—ï¼› 3XXï¼šé‡å®šå‘ï¼Œè¦å®Œæˆè¯·æ±‚å¿…é¡»è¿›è¡Œæ›´è¿›ä¸€æ­¥çš„æ“ä½œï¼› 4XXï¼šå®¢æˆ·ç«¯é”™è¯¯ï¼Œè¯·æ±‚æœ‰è¯­æ³•é”™è¯¯æˆ–æ— æ³•å®ç°ï¼› 5XXï¼šæœåŠ¡å™¨ç«¯é”™è¯¯ï¼ŒæœåŠ¡å™¨æœªèƒ½å®ç°åˆæ³•çš„è¯·æ±‚ã€‚ å››æ¬¡æŒ¥æ‰‹å…³é—­TCPè¿æ¥ å››æ¬¡æŒ¥æ‰‹ï¼Œå½“åŒæ–¹æ²¡æœ‰è¯·æ±‚æˆ–å“åº”ä¼ é€’æ—¶ï¼Œä»»æ„ä¸€æ–¹éƒ½å¯ä»¥å‘èµ·å…³é—­è¯·æ±‚ã€‚ æµè§ˆå™¨è§£ææ¸²æŸ“é¡µé¢ æµè§ˆå™¨åœ¨ æ”¶åˆ°HTMLã€CSSã€JSæ–‡ä»¶åï¼Œå°±éœ€è¦è¿›è¡Œæ¸²æŸ“ã€‚ ï¼ˆ1ï¼‰æµè§ˆå™¨è§£æHTMLæ–‡ä»¶æ„å»ºDOMæ ‘ï¼Œï¼ˆ2ï¼‰ç„¶åè§£æCSSæ–‡ä»¶æ„å»ºæ¸²æŸ“æ ‘ï¼Œï¼ˆ3ï¼‰ç­‰åˆ°æ¸²æŸ“æ ‘æ„å»ºå®Œæˆåï¼Œæµè§ˆå™¨å¼€å§‹å¸ƒå±€æ¸²æŸ“æ ‘å¹¶å°†å…¶ç»˜åˆ¶åˆ°å±å¹•ä¸Š 8.è¯·è§£é‡Šä¸€ä¸‹SSLå·¥ä½œè¿‡ç¨‹ï¼ˆHttpsä¼ è¾“è¿‡ç¨‹ï¼‰ï¼Ÿ httpsæ˜¯httpçš„æ‰©å±•ï¼Œåœ¨ä¼ è¾“å±‚ä½¿ç”¨äº†å®‰å…¨åè®®ï¼šå®‰å…¨å¥—æ¥å­—å±‚SSL(Secure Socket Layer)ã€‚ å‚è€ƒï¼šhttps://www.ruanyifeng.com/blog/2014/02/ssl_tls.html å…¬é’¥é€šå¸¸ç”¨äºåŠ å¯†ä¼šè¯å¯†é’¥ã€éªŒè¯æ•°å­—ç­¾åï¼Œæˆ–åŠ å¯†å¯ä»¥ç”¨ç›¸åº”çš„ç§é’¥è§£å¯†çš„æ•°æ®ã€‚å…¬é’¥å’Œç§é’¥æ˜¯é€šè¿‡ä¸€ç§ç®—æ³•å¾—åˆ°çš„ä¸€ä¸ªå¯†é’¥å¯¹(å³ä¸€ä¸ªå…¬é’¥å’Œä¸€ä¸ªç§é’¥)ã€‚ é€šè¿‡è¿™ç§ç®—æ³•å¾—åˆ°çš„å¯†é’¥å¯¹èƒ½ä¿è¯åœ¨ä¸–ç•ŒèŒƒå›´å†…æ˜¯å”¯ä¸€çš„ã€‚ ä½¿ç”¨è¿™ä¸ªå¯†é’¥å¯¹çš„æ—¶å€™,å¦‚æœç”¨å…¶ä¸­ä¸€ä¸ªå¯†é’¥åŠ å¯†ä¸€æ®µæ•°æ®ï¼Œå¿…é¡»ç”¨å¦ä¸€ä¸ªå¯†é’¥è§£å¯†ã€‚ SSL/TLSåè®®çš„åŸºæœ¬æ€è·¯æ˜¯é‡‡ç”¨å…¬é’¥åŠ å¯†æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®¢æˆ·ç«¯å…ˆå‘æœåŠ¡å™¨ç«¯ç´¢è¦å…¬é’¥ï¼Œç„¶åç”¨å…¬é’¥åŠ å¯†ä¿¡æ¯ï¼ŒæœåŠ¡å™¨æ”¶åˆ°å¯†æ–‡åï¼Œç”¨è‡ªå·±çš„ç§é’¥è§£å¯†ã€‚ æ‰€ä»¥åŸºæœ¬è¿‡ç¨‹æ˜¯ï¼š ï¼ˆ1ï¼‰ å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯ç´¢è¦å¹¶éªŒè¯å…¬é’¥ã€‚ ï¼ˆ2ï¼‰ åŒæ–¹åå•†ç”Ÿæˆ&quot;å¯¹è¯å¯†é’¥&quot;ã€‚ ï¼ˆ3ï¼‰ åŒæ–¹é‡‡ç”¨&quot;å¯¹è¯å¯†é’¥&quot;è¿›è¡ŒåŠ å¯†é€šä¿¡ã€‚ åå•†åŠ å¯†ç®—æ³•ã€‚å®¢æˆ·ç«¯ï¼ˆé€šå¸¸æ˜¯æµè§ˆå™¨ï¼‰å…ˆå‘æœåŠ¡å™¨å‘å‡ºåŠ å¯†é€šä¿¡çš„è¯·æ±‚ï¼Œè¿™è¢«å«åšClientHelloè¯·æ±‚ï¼› ï¼ˆ1ï¼‰ æ”¯æŒçš„åè®®ç‰ˆæœ¬ï¼Œæ¯”å¦‚TLS 1.0ç‰ˆã€‚ ï¼ˆ2ï¼‰ ä¸€ä¸ªå®¢æˆ·ç«¯ç”Ÿæˆçš„éšæœºæ•°ï¼Œæ¥ç”Ÿæˆ&quot;å¯¹è¯å¯†é’¥&quot;ã€‚ ï¼ˆ3ï¼‰ æ”¯æŒçš„åŠ å¯†æ–¹æ³•ï¼Œæ¯”å¦‚RSAå…¬é’¥åŠ å¯†ã€‚ ï¼ˆ4ï¼‰ æ”¯æŒçš„å‹ç¼©æ–¹æ³•ã€‚ æœåŠ¡å™¨å›åº”ã€‚æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚åï¼Œå‘å®¢æˆ·ç«¯å‘å‡ºå›åº”ï¼Œè¿™å«åšSeverHelloï¼› ï¼ˆ1ï¼‰ ç¡®è®¤ä½¿ç”¨çš„åŠ å¯†é€šä¿¡åè®®ç‰ˆæœ¬ï¼Œæ¯”å¦‚TLS 1.0ç‰ˆæœ¬ã€‚å¦‚æœæµè§ˆå™¨ä¸æœåŠ¡å™¨æ”¯æŒçš„ç‰ˆæœ¬ä¸ä¸€è‡´ï¼ŒæœåŠ¡å™¨å…³é—­åŠ å¯†é€šä¿¡ã€‚ ï¼ˆ2ï¼‰ ä¸€ä¸ªæœåŠ¡å™¨ç”Ÿæˆçš„éšæœºæ•°ï¼Œç¨åç”¨äºç”Ÿæˆ&quot;å¯¹è¯å¯†é’¥&quot;ã€‚ ï¼ˆ3ï¼‰ ç¡®è®¤ä½¿ç”¨çš„åŠ å¯†æ–¹æ³•ï¼Œæ¯”å¦‚RSAå…¬é’¥åŠ å¯†ã€‚ ï¼ˆ4ï¼‰ æœåŠ¡å™¨è¯ä¹¦ã€‚ å®¢æˆ·ç«¯é‰´åˆ«ã€‚å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨å›åº”ä»¥åï¼Œï¼ˆ1ï¼‰é¦–å…ˆéªŒè¯æœåŠ¡å™¨è¯ä¹¦ï¼šå¦‚æœè¯ä¹¦ä¸æ˜¯å¯ä¿¡æœºæ„é¢å¸ƒã€æˆ–è€…è¯ä¹¦ä¸­çš„åŸŸåä¸å®é™…åŸŸåä¸ä¸€è‡´ã€æˆ–è€…è¯ä¹¦å·²ç»è¿‡æœŸï¼Œå°±ä¼šå‘è®¿é—®è€…æ˜¾ç¤ºä¸€ä¸ªè­¦å‘Šï¼Œç”±å…¶é€‰æ‹©æ˜¯å¦è¿˜è¦ç»§ç»­é€šä¿¡ã€‚ ï¼ˆ2ï¼‰å¦‚æœè¯ä¹¦æ²¡æœ‰é—®é¢˜ï¼Œå®¢æˆ·ç«¯å°±ä¼šä»è¯ä¹¦ä¸­å–å‡ºæœåŠ¡å™¨çš„å…¬é’¥ã€‚ç„¶åï¼Œå‘æœåŠ¡å™¨å‘é€ä¸‹é¢ä¸‰é¡¹ä¿¡æ¯ï¼š ï¼ˆ1ï¼‰ ä¸€ä¸ªéšæœºæ•°ã€‚è¯¥éšæœºæ•°ç”¨æœåŠ¡å™¨å…¬é’¥åŠ å¯†ï¼Œé˜²æ­¢è¢«çªƒå¬ã€‚ ï¼ˆ2ï¼‰ ç¼–ç æ”¹å˜é€šçŸ¥ï¼Œè¡¨ç¤ºéšåçš„ä¿¡æ¯éƒ½å°†ç”¨åŒæ–¹å•†å®šçš„åŠ å¯†æ–¹æ³•å’Œå¯†é’¥å‘é€ã€‚ ï¼ˆ3ï¼‰ å®¢æˆ·ç«¯æ¡æ‰‹ç»“æŸé€šçŸ¥ï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯çš„æ¡æ‰‹é˜¶æ®µå·²ç»ç»“æŸã€‚è¿™ä¸€é¡¹åŒæ—¶ä¹Ÿæ˜¯å‰é¢å‘é€çš„æ‰€æœ‰å†…å®¹çš„hashå€¼ï¼Œç”¨æ¥ä¾›æœåŠ¡å™¨æ ¡éªŒã€‚ ä¼šè¯ç§˜é’¥è®¡ç®—ã€‚ æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯çš„ç¬¬ä¸‰ä¸ªéšæœºæ•°pre-master keyä¹‹åï¼Œè®¡ç®—ç”Ÿæˆæœ¬æ¬¡ä¼šè¯æ‰€ç”¨çš„&quot;ä¼šè¯å¯†é’¥&quot;ï¼ˆä½¿ç”¨3ä¸ªéšæœºæ•°ç”Ÿæˆæ›´å®‰å…¨ï¼‰ï¼› ï¼ˆ1ï¼‰ç¼–ç æ”¹å˜é€šçŸ¥ï¼Œè¡¨ç¤ºéšåçš„ä¿¡æ¯éƒ½å°†ç”¨åŒæ–¹å•†å®šçš„åŠ å¯†æ–¹æ³•å’Œå¯†é’¥å‘é€ã€‚ ï¼ˆ2ï¼‰æœåŠ¡å™¨æ¡æ‰‹ç»“æŸé€šçŸ¥ï¼Œè¡¨ç¤ºæœåŠ¡å™¨çš„æ¡æ‰‹é˜¶æ®µå·²ç»ç»“æŸã€‚è¿™ä¸€é¡¹åŒæ—¶ä¹Ÿæ˜¯å‰é¢å‘é€çš„æ‰€æœ‰å†…å®¹çš„hashå€¼ï¼Œç”¨æ¥ä¾›å®¢æˆ·ç«¯æ ¡éªŒã€‚ å®‰å…¨æ•°æ®ä¼ è¾“ã€‚åŒæ–¹ç”¨ä¼šè¯ç§˜é’¥åŠ å¯†å’Œè§£å¯†ä¹‹é—´ä¼ é€çš„æ•°æ®ã€‚ 8.1 å…¬é’¥å¦‚ä½•ä¿è¯ä¸è¢«ç¯¡æ”¹ï¼Ÿè¯´ä¸€è¯´è¯ä¹¦ã€‚ å°†å…¬é’¥æ”¾åœ¨æ•°å­—è¯ä¹¦ä¸­ã€‚åªè¦è¯ä¹¦æ˜¯å¯ä¿¡çš„ï¼Œå…¬é’¥å°±æ˜¯å¯ä¿¡çš„ã€‚ æ•°å­—è¯ä¹¦è®¤è¯æœºæ„ï¼ˆCAï¼ŒCertificate Authorityï¼‰æ˜¯å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨åŒæ–¹éƒ½å¯ä¿¡èµ–çš„ç¬¬ä¸‰æ–¹æœºæ„ã€‚ æœåŠ¡å™¨çš„è¿è¥äººå‘˜å‘ CA æå‡ºå…¬å¼€å¯†é’¥çš„ç”³è¯·ï¼ŒCA åœ¨åˆ¤æ˜æå‡ºç”³è¯·è€…çš„èº«ä»½ä¹‹åï¼Œä¼šå¯¹å·²ç”³è¯·çš„å…¬å¼€å¯†é’¥åšæ•°å­—ç­¾åï¼Œç„¶ååˆ†é…è¿™ä¸ªå·²ç­¾åçš„å…¬å¼€å¯†é’¥ï¼Œå¹¶å°†è¯¥å…¬å¼€å¯†é’¥æ”¾å…¥å…¬å¼€å¯†é’¥è¯ä¹¦åç»‘å®šåœ¨ä¸€èµ·ã€‚ è¿›è¡Œ HTTPS é€šä¿¡æ—¶ï¼ŒæœåŠ¡å™¨ä¼šæŠŠè¯ä¹¦å‘é€ç»™å®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯å–å¾—å…¶ä¸­çš„å…¬å¼€å¯†é’¥ä¹‹åï¼Œå…ˆä½¿ç”¨æ•°å­—ç­¾åè¿›è¡ŒéªŒè¯ï¼Œå¦‚æœéªŒè¯é€šè¿‡ï¼ˆè¯ä¹¦ä¸å¯ä¿¡æµè§ˆå™¨ä¼šæç¤ºï¼‰ï¼Œå°±å¯ä»¥å¼€å§‹é€šä¿¡äº†ã€‚ 8.2 å…¬é’¥åŠ å¯†è®¡ç®—é‡å¤ªå¤§ï¼Œå¦‚ä½•å‡å°‘è€—ç”¨çš„æ—¶é—´ï¼Ÿ æ¯ä¸€æ¬¡å¯¹è¯ï¼ˆsessionï¼‰ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯éƒ½ç”Ÿæˆä¸€ä¸ª&quot;å¯¹è¯å¯†é’¥&quot;ï¼ˆsession keyï¼‰ï¼Œç”¨å®ƒæ¥åŠ å¯†ä¿¡æ¯ã€‚ç”±äºå¯¹è¯å¯†é’¥æ˜¯å¯¹ç§°åŠ å¯†ï¼Œæ‰€ä»¥è¿ç®—é€Ÿåº¦éå¸¸å¿«ï¼Œè€ŒæœåŠ¡å™¨å…¬é’¥åªç”¨äºåŠ å¯†&quot;å¯¹è¯å¯†é’¥&quot;æœ¬èº«ï¼Œè¿™æ ·å°±å‡å°‘äº†åŠ å¯†è¿ç®—çš„æ¶ˆè€—æ—¶é—´ã€‚ 8.3 ä¸ºä»€ä¹ˆæœ‰çš„æ—¶å€™åˆ·æ–°é¡µé¢ä¸éœ€è¦é‡æ–°å»ºç«‹ SSL è¿æ¥ï¼Ÿ TCP è¿æ¥æœ‰çš„æ—¶å€™ä¼šè¢«æµè§ˆå™¨å’ŒæœåŠ¡ç«¯ç»´æŒä¸€æ®µæ—¶é—´ï¼ŒTCP ä¸éœ€è¦é‡æ–°å»ºç«‹ï¼ŒSSL è‡ªç„¶ä¹Ÿä¼šç”¨ä¹‹å‰çš„ã€‚ 9. ä»‹ç»ä¸€ä¸‹å¸¸è§çš„å‡ ç§éå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Ÿä¼˜ç¼ºç‚¹ï¼Ÿ éå¯¹ç§°åŠ å¯† éå¯¹ç§°å¯†é’¥åŠ å¯†ï¼Œåˆç§°å…¬å¼€å¯†é’¥åŠ å¯†ï¼ˆPublic-Key Encryptionï¼‰ï¼ŒåŠ å¯†å’Œè§£å¯†ä½¿ç”¨ä¸åŒçš„å¯†é’¥ã€‚ å…¬å¼€å¯†é’¥æ‰€æœ‰äººéƒ½å¯ä»¥è·å¾—ï¼Œé€šä¿¡å‘é€æ–¹è·å¾—æ¥æ”¶æ–¹çš„å…¬å¼€å¯†é’¥ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨å…¬å¼€å¯†é’¥è¿›è¡ŒåŠ å¯†ï¼Œæ¥æ”¶æ–¹æ”¶åˆ°é€šä¿¡å†…å®¹åä½¿ç”¨ç§æœ‰å¯†é’¥è§£å¯†ã€‚ å¸¸ç”¨éå¯¹ç§°åŠ å¯†ç®—æ³• RSAï¼šç”± RSA å…¬å¸å‘æ˜ï¼Œæ˜¯ä¸€ä¸ªæ”¯æŒå˜é•¿å¯†é’¥çš„å…¬å…±å¯†é’¥ç®—æ³•ï¼Œéœ€è¦åŠ å¯†çš„æ–‡ä»¶å—çš„é•¿åº¦ä¹Ÿæ˜¯å¯å˜çš„ DSAï¼ˆDigital Signature Algorithmï¼‰ï¼šæ•°å­—ç­¾åç®—æ³•ï¼Œæ˜¯ä¸€ç§æ ‡å‡†çš„ DSSï¼ˆæ•°å­—ç­¾åæ ‡å‡†ï¼‰ ECCï¼ˆElliptic Curves Cryptographyï¼‰ï¼šæ¤­åœ†æ›²çº¿åŠ å¯† éå¯¹ç§°åŠ å¯†ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼š å¯ä»¥æ›´å®‰å…¨åœ°å°†å…¬å¼€å¯†é’¥ä¼ è¾“ç»™é€šä¿¡å‘é€æ–¹ï¼› ç¼ºç‚¹ï¼š è¿ç®—é€Ÿåº¦æ…¢ã€‚ 10.å…¬é’¥åŠ å¯†â€“ç§é’¥è§£å¯†ä¸å…¬é’¥è§£å¯†â€“ç§é’¥åŠ å¯†æœ‰ä»€ä¹ˆåŒºåˆ«? ä¸»è¦æ˜¯åº”ç”¨åœºæ™¯ä¸åŒã€‚ åŠ è§£å¯†ï¼šå…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯† ä¸å¸Œæœ›åˆ«äººçŸ¥é“æˆ‘çš„æ¶ˆæ¯ï¼Œæ‰€ä»¥åªæœ‰æˆ‘æ‰èƒ½è§£å¯†ï¼Œæ‰€ä»¥å¯å¾—å‡ºå…¬é’¥è´Ÿè´£åŠ å¯†ï¼Œç§é’¥è´Ÿè´£è§£å¯† ç­¾åï¼šç§é’¥ç­¾åï¼Œå…¬é’¥éªŒç­¾ æ˜¯ä¸å¸Œæœ›æœ‰äººå†’å……æˆ‘å‘æ¶ˆæ¯ï¼Œåªæœ‰æˆ‘æ‰èƒ½å‘å¸ƒè¿™ä¸ªç­¾åï¼Œæ‰€ä»¥å¯å¾—å‡ºç§é’¥è´Ÿè´£ç­¾åï¼Œå…¬é’¥è´Ÿè´£éªŒè¯ httpså¯ä»¥åªæœ‰éå¯¹ç§°åŠ å¯†å—? httpséªŒè¯è¯ä¹¦é˜¶æ®µæ˜¯éå¯¹ç§°åŠ å¯†ï¼Œä½†æ˜¯åœ¨æ•°æ®ä¼ è¾“é˜¶æ®µæ˜¯å¯¹ç§°åŠ å¯†ã€‚httpsä¸å¯ä»¥åªæœ‰éå¯¹ç§°åŠ å¯†ï¼š éå¯¹ç§°åŠ å¯†çš„åŠ è§£å¯†æ•ˆç‡æ˜¯éå¸¸ä½çš„ï¼Œè€Œ http çš„åº”ç”¨åœºæ™¯ä¸­é€šå¸¸ç«¯ä¸ç«¯ä¹‹é—´å­˜åœ¨å¤§é‡çš„äº¤äº’ï¼Œéå¯¹ç§°åŠ å¯†çš„æ•ˆç‡æ˜¯æ— æ³•æ¥å—çš„ï¼› åœ¨ HTTPS çš„åœºæ™¯ä¸­åªæœ‰æœåŠ¡ç«¯ä¿å­˜äº†ç§é’¥ï¼Œä¸€å¯¹å…¬ç§é’¥åªèƒ½å®ç°å•å‘çš„åŠ è§£å¯†ï¼Œæ‰€ä»¥HTTPS ä¸­å†…å®¹ä¼ è¾“åŠ å¯†é‡‡å–çš„æ˜¯å¯¹ç§°åŠ å¯†ï¼Œè€Œä¸æ˜¯éå¯¹ç§°åŠ å¯†ã€‚ 11. HTTPS ä¸ºä»€ä¹ˆå®‰å…¨ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦CAè¯ä¹¦ï¼Ÿåªæœ‰è®¤è¯æœºæ„å¯ä»¥ç”Ÿæˆè¯ä¹¦å—ï¼ŸHTTPS ç»å¯¹å®‰å…¨å—ï¼Ÿ å®‰å…¨ï¼šå› ä¸º HTTPS ä¿è¯äº†ä¼ è¾“å®‰å…¨ï¼Œé˜²æ­¢ä¼ è¾“è¿‡ç¨‹è¢«ç›‘å¬ã€é˜²æ­¢æ•°æ®è¢«çªƒå–ï¼Œå¯ä»¥ç¡®è®¤ç½‘ç«™çš„çœŸå®æ€§ï¼› CAè¯ä¹¦ï¼š HTTP åè®®è¢«è®¤ä¸ºä¸å®‰å…¨æ˜¯å› ä¸ºä¼ è¾“è¿‡ç¨‹å®¹æ˜“è¢«ç›‘å¬è€…å‹¾çº¿ç›‘å¬ã€ä¼ªé€ æœåŠ¡å™¨ï¼Œè€Œ HTTPS åè®®ä¸»è¦è§£å†³çš„ä¾¿æ˜¯ç½‘ç»œä¼ è¾“çš„å®‰å…¨æ€§é—®é¢˜ï¼Œæ‰€ä»¥éœ€è¦CAè¯ä¹¦ è¯ä¹¦ç”Ÿæˆï¼š å¦‚æœéœ€è¦æµè§ˆå™¨ä¸æç¤ºå®‰å…¨é£é™©ï¼Œé‚£åªèƒ½ä½¿ç”¨è®¤è¯æœºæ„ç­¾å‘çš„è¯ä¹¦ã€‚ä½†æµè§ˆå™¨é€šå¸¸åªæ˜¯æç¤ºå®‰å…¨é£é™©ï¼Œå¹¶ä¸é™åˆ¶ç½‘ç«™ä¸èƒ½è®¿é—®ï¼Œæ‰€ä»¥ä»æŠ€æœ¯ä¸Šè°éƒ½å¯ä»¥ç”Ÿæˆè¯ä¹¦ï¼Œåªè¦æœ‰è¯ä¹¦å°±å¯ä»¥å®Œæˆç½‘ç«™çš„ HTTPS ä¼ è¾“ã€‚ ä¸ç»å¯¹å®‰å…¨ï¼š ä¸æ˜¯ç»å¯¹å®‰å…¨çš„ï¼Œå¯ä»¥é€šè¿‡ä¸­é—´äººæ”»å‡»ã€‚ CAè¯ä¹¦ä¸æ˜¯å¯ä»¥è§£å†³â€œä¸­é—´äººâ€å—ï¼Ÿ è¿‡ç¨‹åŸç†ï¼š æœ¬åœ°è¯·æ±‚è¢«åŠ«æŒï¼ˆå¦‚DNSåŠ«æŒç­‰ï¼‰ï¼Œæ‰€æœ‰è¯·æ±‚å‡å‘é€åˆ°ä¸­é—´äººçš„æœåŠ¡å™¨ ä¸­é—´äººæœåŠ¡å™¨è¿”å›ä¸­é—´äººè‡ªå·±çš„è¯ä¹¦ï¼ˆä½†æ˜¯è¿™ä¸€æ­¥æœåŠ¡å™¨ä¸æ˜¯ä¼šå¯¹æœåŠ¡å™¨è¯ä¹¦è¿›è¡ŒéªŒè¯å—ï¼Ÿï¼‰ å®¢æˆ·ç«¯åˆ›å»ºéšæœºæ•°ï¼Œé€šè¿‡ä¸­é—´äººè¯ä¹¦çš„å…¬é’¥å¯¹éšæœºæ•°åŠ å¯†åä¼ é€ç»™ä¸­é—´äººï¼Œç„¶åå‡­éšæœºæ•°æ„é€ å¯¹ç§°åŠ å¯†å¯¹ä¼ è¾“å†…å®¹è¿›è¡ŒåŠ å¯†ä¼ è¾“ ä¸­é—´äººå› ä¸ºæ‹¥æœ‰å®¢æˆ·ç«¯çš„éšæœºæ•°ï¼Œå¯ä»¥é€šè¿‡å¯¹ç§°åŠ å¯†ç®—æ³•è¿›è¡Œå†…å®¹è§£å¯† ä¸­é—´äººä»¥å®¢æˆ·ç«¯çš„è¯·æ±‚å†…å®¹å†å‘å®˜æ–¹ç½‘ç«™å‘èµ·è¯·æ±‚ å› ä¸ºä¸­é—´äººä¸æœåŠ¡å™¨çš„é€šä¿¡è¿‡ç¨‹æ˜¯åˆæ³•çš„ï¼Œå®˜æ–¹ç½‘ç«™é€šè¿‡å»ºç«‹çš„å®‰å…¨é€šé“è¿”å›åŠ å¯†åçš„æ•°æ® ä¸­é—´äººå‡­å€Ÿä¸å®˜æ–¹ç½‘ç«™å»ºç«‹çš„å¯¹ç§°åŠ å¯†ç®—æ³•å¯¹å†…å®¹è¿›è¡Œè§£å¯† ä¸­é—´äººé€šè¿‡ä¸å®¢æˆ·ç«¯å»ºç«‹çš„å¯¹ç§°åŠ å¯†ç®—æ³•å¯¹å®˜æ–¹å†…å®¹è¿”å›çš„æ•°æ®è¿›è¡ŒåŠ å¯†ä¼ è¾“ å®¢æˆ·ç«¯é€šè¿‡ä¸ä¸­é—´äººå»ºç«‹çš„å¯¹ç§°åŠ å¯†ç®—æ³•å¯¹è¿”å›ç»“æœæ•°æ®è¿›è¡Œè§£å¯† 12. httpåº”ç­”ç ä¸­çš„301/2/4ã€500ã€502ã€503ã€504çŠ¶æ€ç è¿›è¡Œè§£é‡Šï¼Ÿ 200ï¼š è¯·æ±‚æˆåŠŸã€‚ 500ï¼š 500 (æœåŠ¡å™¨å†…éƒ¨é”™è¯¯) æœåŠ¡å™¨é‡åˆ°é”™è¯¯ï¼Œæ— æ³•å®Œæˆè¯·æ±‚ã€‚ ä¾‹å¦‚ï¼ŒæœåŠ¡å™¨æ— æ³•è¯†åˆ«è¯·æ±‚æ–¹æ³•æ—¶å¯èƒ½ä¼šè¿”å›æ­¤ä»£ç ã€‚ 501ï¼šæœåŠ¡å™¨ä¸æ”¯æŒè¯·æ±‚çš„åŠŸèƒ½ï¼Œæ— æ³•å®Œæˆè¯·æ±‚ 502ï¼š ä½œä¸ºç½‘å…³æˆ–è€…ä»£ç†å·¥ä½œçš„æœåŠ¡å™¨å°è¯•æ‰§è¡Œè¯·æ±‚æ—¶ï¼Œä»ä¸Šæ¸¸æœåŠ¡å™¨æ¥æ”¶åˆ°æ— æ•ˆçš„å“åº”ã€‚ 503ï¼š ç”±äºè¶…è½½æˆ–ç³»ç»Ÿç»´æŠ¤ï¼ŒæœåŠ¡å™¨æš‚æ—¶çš„æ— æ³•å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚ 504(åŠæ—¶)ï¼šä½œä¸ºç½‘å…³æˆ–è€…ä»£ç†å·¥ä½œçš„æœåŠ¡å™¨å°è¯•æ‰§è¡Œè¯·æ±‚æ—¶ï¼Œæœªèƒ½åŠæ—¶ä»ä¸Šæ¸¸æœåŠ¡å™¨ï¼ˆURIæ ‡è¯†å‡ºçš„æœåŠ¡å™¨ï¼Œä¾‹å¦‚HTTPã€FTPã€LDAPï¼‰æˆ–è€…è¾…åŠ©æœåŠ¡å™¨ï¼ˆä¾‹å¦‚DNSï¼‰æ”¶åˆ°å“åº”ã€‚ 13.ä»‹ç»ä¸€ä¸‹httpè¯·æ±‚getã€postç­‰ï¼Ÿ é‡ç‚¹åŒºåˆ†ä¸€ä¸‹getå’Œpostï¼š get ï¼šGETæ–¹æ³•ç”¨äºä½¿ç”¨ç»™å®šçš„URIä»ç»™å®šæœåŠ¡å™¨ä¸­æ£€ç´¢ä¿¡æ¯ï¼Œå³ä»æŒ‡å®šèµ„æºä¸­è¯·æ±‚æ•°æ®ã€‚ GETè¯·æ±‚æ˜¯å¯ä»¥ç¼“å­˜çš„ï¼Œæµè§ˆå™¨å†å²è®°å½•ä¸­æŸ¥æ‰¾åˆ°GETè¯·æ±‚ï¼›é•¿åº¦æœ‰é™åˆ¶ï¼›ä¸å®‰å…¨ï¼Œurlä¼šæš´éœ²è¯·æ±‚çš„å‚æ•° postï¼šPOSTæ–¹æ³•ç”¨äºå°†æ•°æ®å‘é€åˆ°æœåŠ¡å™¨ä»¥åˆ›å»ºæˆ–æ›´æ–°èµ„æº ã€‚ POSTè¯·æ±‚ä¸ä¼šè¢«ç¼“å­˜ï¼›é•¿åº¦æ— é™åˆ¶ï¼›æ›´å®‰å…¨ ç‰¹åˆ«çš„ï¼šGETäº§ç”Ÿä¸€ä¸ªTCPæ•°æ®åŒ…;POSTäº§ç”Ÿä¸¤ä¸ªTCPæ•°æ®åŒ…ã€‚ getï¼šhttp headerå’Œbodyä¸€å¹¶å‘é€å‡ºå» ï¼› postï¼šæµè§ˆå™¨å…ˆå‘é€headerï¼ŒæœåŠ¡å™¨å“åº”100 continueï¼Œæµè§ˆå™¨å†å‘é€body ã€‚ âš ï¸ postæ˜¯ä¸ä¸€å®šä¼šå‘ç”Ÿä¸¤ä¸ªçš„ã€‚ HTTP åè®®ä¸­æ²¡æœ‰æ˜ç¡®è¯´æ˜ POST ä¼šäº§ç”Ÿä¸¤ä¸ª TCP æ•°æ®åŒ…ï¼Œè€Œä¸”å®é™…æµ‹è¯•(Chrome)å‘ç°ï¼Œheader å’Œ body ä¸ä¼šåˆ†å¼€å‘é€ï¼› header å’Œ body åˆ†å¼€å‘é€æ˜¯éƒ¨åˆ†æµè§ˆå™¨æˆ–æ¡†æ¶çš„è¯·æ±‚æ–¹æ³•ï¼Œä¸å±äº post å¿…ç„¶è¡Œä¸ºã€‚ 13.1 Getæ–¹æ³•é•¿åº¦æœ‰é™åˆ¶æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ HTTP åè®®æ²¡æœ‰ Body å’Œ URL çš„é•¿åº¦é™åˆ¶ï¼Œå¯¹ URL é™åˆ¶çš„å¤§å¤šæ˜¯æµè§ˆå™¨ / æœåŠ¡å™¨çš„åŸå› ã€‚ æœåŠ¡å™¨æ˜¯å› ä¸ºå¤„ç†é•¿ URL è¦æ¶ˆè€—æ¯”è¾ƒå¤šçš„èµ„æºï¼Œä¸ºäº†æ€§èƒ½å’Œå®‰å…¨ï¼ˆé˜²æ­¢æ¶æ„æ„é€ é•¿ URL æ¥æ”»å‡»ï¼‰è€ƒè™‘ï¼Œä¼šç»™ URL é•¿åº¦åŠ é™åˆ¶ï¼› æµè§ˆå™¨ä¹Ÿä¼šè®¾ç½®urlæœ‰é™ã€‚ 13.2 POST æ–¹æ³•ç›¸æ¯”GETæ–¹æ³•æ˜¯ç»å¯¹å®‰å…¨å—ï¼Ÿ POST æ¯” GET å®‰å…¨ï¼Œå› ä¸ºæ•°æ®åœ¨åœ°å€æ ä¸Šä¸å¯è§ï¼› POSTä¸æ˜¯ç»å¯¹å®‰å…¨ï¼Œä»ä¼ è¾“çš„è§’åº¦æ¥è¯´ï¼Œä»–ä»¬éƒ½æ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸º HTTP åœ¨ç½‘ç»œä¸Šæ˜¯æ˜æ–‡ä¼ è¾“çš„ï¼Œåªè¦åœ¨ç½‘ç»œèŠ‚ç‚¹ä¸Šæ‰åŒ…ï¼Œå°±èƒ½å®Œæ•´åœ°è·å–æ•°æ®æŠ¥æ–‡ã€‚ æƒ³è¦å®‰å…¨ï¼Œåªæœ‰ä½¿ç”¨HTTPSã€‚ 14. HTTPæ˜¯ä¸ä¿å­˜çŠ¶æ€çš„åè®®,å¦‚ä½•ä¿å­˜ç”¨æˆ·çŠ¶æ€? Cookie å’Œ Sessionéƒ½æ˜¯ç”¨æ¥è·Ÿè¸ªæµè§ˆå™¨ç”¨æˆ·èº«ä»½çš„ä¼šè¯æ–¹å¼ï¼Œä½†æ˜¯ä¸¤è€…çš„åº”ç”¨åœºæ™¯ä¸å¤ªâ¼€æ ·ã€‚ Cookie â¼€èˆ¬ç”¨æ¥ä¿å­˜ç”¨æˆ·ä¿¡æ¯ æˆ‘ä»¬åœ¨ Cookie ä¸­ä¿å­˜å·²ç»ç™»å½•è¿‡å¾—ç”¨æˆ·ä¿¡æ¯ï¼Œä¸‹æ¬¡è®¿é—®ç½‘ç«™çš„æ—¶å€™é¡µé¢å¯ä»¥â¾ƒåŠ¨å¸®ä½ ç™»å½•çš„â¼€äº›åŸºæœ¬ä¿¡æ¯ç»™å¡«äº†ï¼› â¼€èˆ¬çš„ç½‘ç«™éƒ½ä¼šæœ‰ä¿æŒç™»å½•ä¹Ÿå°±æ˜¯è¯´ä¸‹æ¬¡ä½ å†è®¿é—®ç½‘ç«™çš„æ—¶å€™å°±ä¸éœ€è¦é‡æ–°ç™»å½•äº†ï¼Œè¿™æ˜¯å› ä¸ºç”¨æˆ·ç™»å½•çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥å­˜æ”¾äº†â¼€ä¸ª Token åœ¨ Cookieä¸­ï¼Œä¸‹æ¬¡ç™»å½•çš„æ—¶å€™åªéœ€è¦æ ¹æ® Token å€¼æ¥æŸ¥æ‰¾ç”¨æˆ·å³å¯(ä¸ºäº†å®‰å…¨è€ƒè™‘ï¼Œé‡æ–°ç™»å½•â¼€èˆ¬è¦å°† Token é‡å†™)ï¼› ç™»å½•â¼€æ¬¡ç½‘ç«™åè®¿é—®ç½‘ç«™å…¶ä»–é¡µé¢ä¸éœ€è¦é‡æ–°ç™»å½•ã€‚ Session çš„ä¸»è¦ä½œç”¨å°±æ˜¯é€šè¿‡æœåŠ¡ç«¯è®°å½•ç”¨æˆ·çš„çŠ¶æ€ã€‚ å…¸å‹çš„åœºæ™¯æ˜¯è´­ç‰©â»‹ï¼Œå½“ä½ è¦æ·»åŠ å•†å“åˆ°è´­ç‰©â»‹çš„æ—¶å€™ï¼Œç³»ç»Ÿä¸çŸ¥é“æ˜¯å“ªä¸ªç”¨æˆ·æ“ä½œçš„ï¼Œå› ä¸º HTTP åè®®æ˜¯æ— çŠ¶æ€çš„ã€‚æœåŠ¡ç«¯ç»™ç‰¹å®šçš„ç”¨æˆ·åˆ›å»ºç‰¹å®šçš„ Session ä¹‹åå°±å¯ä»¥æ ‡è¯†è¿™ä¸ªç”¨æˆ·å¹¶ä¸”è·Ÿè¸ªè¿™ä¸ªç”¨æˆ·äº†ã€‚ æ—¢ç„¶ Session å­˜æ”¾åœ¨æœåŠ¡å™¨ç«¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•å®ç° Session è·Ÿè¸ªå‘¢ï¼Ÿå¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½æ˜¯é€šè¿‡åœ¨Cookie ä¸­é™„åŠ â¼€ä¸ª Session ID æ¥æ–¹å¼æ¥è·Ÿè¸ªã€‚ 15. cookie ã€sessionçš„ä½œç”¨å’ŒåŒºåˆ«ï¼Ÿ Cookie ä½œç”¨ï¼š æœåŠ¡å™¨å‘é€åˆ°ç”¨æˆ·æµè§ˆå™¨å¹¶ä¿å­˜åœ¨æœ¬åœ°çš„ä¸€å°å—æ•°æ®ï¼Œå®ƒä¼šåœ¨æµè§ˆå™¨ä¸‹æ¬¡å‘åŒä¸€æœåŠ¡å™¨å†å‘èµ·è¯·æ±‚æ—¶è¢«æºå¸¦å¹¶å‘é€åˆ°æœåŠ¡å™¨ä¸Šã€‚é€šå¸¸ï¼Œå®ƒç”¨äºå‘ŠçŸ¥æœåŠ¡ç«¯ä¸¤ä¸ªè¯·æ±‚æ˜¯å¦æ¥è‡ªåŒä¸€æµè§ˆå™¨ï¼Œå¦‚ä¿æŒç”¨æˆ·çš„ç™»å½•çŠ¶æ€ã€‚ Cookie ä½¿åŸºäºæ— çŠ¶æ€çš„ HTTP åè®®è®°å½•ç¨³å®šçš„çŠ¶æ€ä¿¡æ¯æˆä¸ºäº†å¯èƒ½ã€‚ Session ä½œç”¨ï¼š Session ä»£è¡¨ç€æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¸€æ¬¡ä¼šè¯çš„è¿‡ç¨‹ï¼ŒSession å¯¹è±¡å­˜å‚¨ç‰¹å®šç”¨æˆ·ä¼šè¯æ‰€éœ€çš„å±æ€§åŠé…ç½®ä¿¡æ¯ã€‚ äºŒè€…åŒºåˆ« ä½œç”¨èŒƒå›´ä¸åŒï¼ŒCookie ä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ï¼ŒSession ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯ï¼› æœ‰æ•ˆæœŸä¸åŒï¼ŒCookie å¯è®¾ç½®ä¸ºé•¿æ—¶é—´ä¿æŒï¼Œæ¯”å¦‚æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„é»˜è®¤ç™»å½•åŠŸèƒ½ï¼ŒSession ä¸€èˆ¬å¤±æ•ˆæ—¶é—´è¾ƒçŸ­ï¼Œå®¢æˆ·ç«¯å…³é—­æˆ–è€… Session è¶…æ—¶éƒ½ä¼šå¤±æ•ˆï¼› å®‰å…¨æ€§ï¼š Cookie å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œæ¯”è¾ƒå®¹æ˜“é­åˆ°ä¸æ³•è·å–ï¼Œæ—©æœŸæœ‰äººå°†ç”¨æˆ·çš„ç™»å½•åå’Œå¯†ç å­˜å‚¨åœ¨ Cookie ä¸­å¯¼è‡´ä¿¡æ¯è¢«çªƒå–ï¼›Session å­˜å‚¨åœ¨æœåŠ¡ç«¯ï¼Œå®‰å…¨æ€§ç›¸å¯¹ Cookie è¦å¥½ä¸€äº›ï¼› å­˜å‚¨å¤§å°ä¸åŒï¼š å•ä¸ª Cookie ä¿å­˜çš„æ•°æ®ä¸èƒ½è¶…è¿‡ 4Kï¼ŒSession å¯å­˜å‚¨æ•°æ®è¿œé«˜äº Cookieï¼› å­˜å–ç±»å‹çš„ä¸åŒï¼ŒCookie åªèƒ½ä¿å­˜ ASCIIï¼ŒSession å¯ä»¥å­˜ä»»æ„æ•°æ®ç±»å‹ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥åœ¨ Session ä¸­ä¿æŒä¸€äº›å¸¸ç”¨å˜é‡ä¿¡æ¯ï¼Œæ¯”å¦‚è¯´ UserId ç­‰ã€‚ 15.1 Sessionçš„å…±äº«æ–¹å¼ï¼Ÿï¼ˆå¥½æœªæ¥é—®è¿‡ï¼‰ å‚è€ƒï¼šSessionå¦‚ä½•å…±äº« é—®é¢˜æè¿° åœ¨é›†ç¾¤ç¯å¢ƒä¸­ï¼Œå‡è®¾å®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡è®¿é—®æœåŠ¡Aï¼ŒæœåŠ¡Aå“åº”è¿”å›äº†ä¸€ä¸ªsessionIdå¹¶ä¸”å­˜å…¥äº†æœ¬åœ°Cookieä¸­ã€‚ç¬¬äºŒæ¬¡ä¸è®¿é—®æœåŠ¡Aäº†ï¼Œè½¬å»è®¿é—®æœåŠ¡Bï¼› è®¿é—®æœåŠ¡Bçš„æ—¶å€™ï¼Œä¼šå°†sessionIdåŠ å…¥åˆ°è¯·æ±‚å¤´ä¸­ï¼Œè€ŒæœåŠ¡Bå› ä¸ºé€šè¿‡sessionIdæ²¡æœ‰æ‰¾åˆ°ç›¸å¯¹åº”çš„æ•°æ®ï¼Œå› æ­¤å®ƒå°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„sessionIdå¹¶ä¸”å“åº”è¿”å›ç»™å®¢æˆ·ç«¯ è¿™æ ·å°±é€ æˆäº†ä¸èƒ½å…±äº«Sessionçš„é—®é¢˜ã€‚ è§£å†³æ–¹æ¡ˆ ä½¿ç”¨Cookieå®ç°ã€‚ å°†ç³»ç»Ÿç”¨æˆ·çš„Sessionä¿¡æ¯åŠ å¯†ã€åºåˆ—åŒ–åï¼Œä»¥Cookieçš„æ–¹å¼ï¼Œ ç»Ÿä¸€ç§æ¤åœ¨æ ¹åŸŸåä¸‹ï¼ˆå¦‚ï¼š.host.comï¼‰ï¼Œåˆ©ç”¨æµè§ˆå™¨è®¿é—®è¯¥æ ¹åŸŸåä¸‹çš„æ‰€æœ‰äºŒçº§åŸŸåç«™ç‚¹æ—¶ï¼Œä¼šä¼ é€’ä¸ä¹‹åŸŸåå¯¹åº”çš„æ‰€æœ‰Cookieå†…å®¹çš„ç‰¹æ€§ï¼Œä»è€Œå®ç°ç”¨æˆ·çš„CookieåŒ–Sessionåœ¨å¤šæœåŠ¡é—´çš„å…±äº«è®¿é—®ã€‚ æ•°æ®åº“åŒæ­¥sessionã€‚ æ¯æ¬¡å°†sessionæ•°æ®å­˜åˆ°æ•°æ®åº“ä¸­ã€‚è¿™ä¸ªæ–¹æ¡ˆè¿˜æ˜¯æ¯”è¾ƒå¯è¡Œçš„ã€‚ ç¼ºç‚¹ï¼š Sessionçš„å¹¶å‘è¯»å†™èƒ½åŠ›å–å†³äºMySQLæ•°æ®åº“çš„æ€§èƒ½ï¼Œå¯¹æ•°æ®åº“çš„å‹åŠ›å¤§ï¼ŒåŒæ—¶éœ€è¦è‡ªå·±å®ç°Sessionæ·˜æ±°é€»è¾‘ï¼Œä»¥ä¾¿å®šæ—¶ä»æ•°æ®è¡¨ä¸­æ›´æ–°ã€åˆ é™¤ Sessionè®°å½•ï¼Œå½“å¹¶å‘è¿‡é«˜æ—¶å®¹æ˜“å‡ºç°è¡¨é”ã€‚ ä½¿ç”¨tokenä»£æ›¿sessionã€‚ å°±æ˜¯Tokenæ–¹å¼æ›¿ä»£äº†ï¼Œä½†æ˜¯è¿˜æ˜¯æ²¡è§£å†³ã€‚ Spring-Sesionå®ç° ã€‚å°†åŸæœ¬éœ€è¦ç”±WebæœåŠ¡å™¨åˆ›å»ºä¼šè¯çš„è¿‡ç¨‹è½¬äº¤ç»™Spring-Sessionè¿›è¡Œåˆ›å»ºã€‚Spring-Sessionä¼šå°†åŸæœ¬åº”è¯¥ä¿å­˜åœ¨WebæœåŠ¡å™¨å†…å­˜çš„Sessionå­˜æ”¾åˆ°Redisä¸­ã€‚ç„¶åWebæœåŠ¡å™¨ä¹‹é—´é€šè¿‡è¿æ¥Redisæ¥å…±äº«æ•°æ®ï¼Œè¾¾åˆ°Sessonå…±äº«çš„ç›®çš„ã€‚ 16. Cookie å’Œ Sessionæœ‰ä»€ä¹ˆå…³è”ï¼Ÿï¼ˆé—®è¿‡ï¼‰tokenæœ‰ä»€ä¹ˆä½œç”¨ï¼Œä¼˜ç‚¹ï¼Œï¼ˆJWTï¼‰ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ å‚è€ƒï¼šä¸€æ–‡å½»åº•ææ‡‚Cookieã€Sessionã€Tokenåˆ°åº•æ˜¯ä»€ä¹ˆ ä¸ºä»€ä¹ˆéœ€è¦sessionï¼Ÿ æ—¢ç„¶æµè§ˆå™¨å·²ç»é€šè¿‡Cookieå®ç°äº†æœ‰çŠ¶æ€è¿™ä¸€éœ€æ±‚ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆåˆæ¥äº†ä¸€ä¸ªSessionå‘¢ï¼Ÿ å¦‚æœå°†è´¦æˆ·çš„ä¸€äº›é‡è¦ä¿¡æ¯éƒ½å­˜å…¥Cookieä¸­çš„è¯ï¼Œä¸€æ—¦è¢«æ‹¦æˆªï¼Œé‚£ä¹ˆæˆ‘ä»¬æ‰€æœ‰çš„è´¦æˆ·ä¿¡æ¯éƒ½ä¼šä¸¢å¤±æ‰ã€‚æ‰€ä»¥å°±å‡ºç°äº†Sessionï¼Œåœ¨ä¸€æ¬¡ä¼šè¯ä¸­å°†é‡è¦ä¿¡æ¯ä¿å­˜åœ¨Sessionä¸­ï¼Œæµè§ˆå™¨åªè®°å½•SessionIdä¸€ä¸ªSessionIdå¯¹åº”ä¸€æ¬¡ä¼šè¯è¯·æ±‚ã€‚ sessionå’ŒcookieäºŒè€…å…³è” ä»¥ç”¨æˆ·ä¸€æ¬¡ç™»å½•ä¸ºä¾‹ã€‚ ç”¨æˆ·ç¬¬ä¸€æ¬¡è¯·æ±‚æœåŠ¡å™¨çš„æ—¶å€™ï¼Œç”¨æˆ·æäº¤åŒ…å«ç”¨æˆ·åå’Œå¯†ç çš„è¡¨å•ï¼Œæ”¾å…¥ HTTP è¯·æ±‚æŠ¥æ–‡ä¸­ï¼› æœåŠ¡å™¨éªŒè¯è¯¥ç”¨æˆ·åå’Œå¯†ç ï¼Œå¦‚æœæ­£ç¡®åˆ™æŠŠç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ° Redis ä¸­ï¼Œå®ƒåœ¨ Redis ä¸­çš„ Key ç§°ä¸º Session IDï¼›å¹¶å°†æ­¤ Session çš„å”¯ä¸€æ ‡è¯†ä¿¡æ¯ SessionID è¿”å›ç»™æµè§ˆå™¨ï¼› æµè§ˆå™¨æ¥æ”¶åˆ°æœåŠ¡å™¨è¿”å›çš„ SessionID ä¿¡æ¯åï¼Œä¼šå°†æ­¤ä¿¡æ¯å­˜å…¥åˆ° Cookie ä¸­ï¼ŒåŒæ—¶ Cookie è®°å½•æ­¤ SessionID å±äºå“ªä¸ªåŸŸåï¼› å½“ç”¨æˆ·ç¬¬äºŒæ¬¡è®¿é—®æœåŠ¡å™¨çš„æ—¶å€™ï¼Œè¯·æ±‚ä¼šè‡ªåŠ¨åˆ¤æ–­æ­¤åŸŸåä¸‹æ˜¯å¦å­˜åœ¨ Cookie ä¿¡æ¯ï¼Œå¦‚æœå­˜åœ¨è‡ªåŠ¨å°† Cookie ä¿¡æ¯ä¹Ÿå‘é€ç»™æœåŠ¡ç«¯ï¼› æœåŠ¡ç«¯ä¼šä» Cookie ä¸­è·å– SessionIDï¼Œå†æ ¹æ® SessionID æŸ¥æ‰¾å¯¹åº”çš„ Session ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°è¯´æ˜ç”¨æˆ·æ²¡æœ‰ç™»å½•æˆ–è€…ç™»å½•å¤±æ•ˆï¼Œå¦‚æœæ‰¾åˆ° Session è¯æ˜ç”¨æˆ·å·²ç»ç™»å½•å¯æ‰§è¡Œåé¢æ“ä½œã€‚ ä»€ä¹ˆæ˜¯Tokenï¼Ÿ Sessionæ˜¯å°†è¦éªŒè¯çš„ä¿¡æ¯å­˜å‚¨åœ¨æœåŠ¡ç«¯ï¼Œå¹¶ä»¥SessionIdå’Œæ•°æ®è¿›è¡Œå¯¹åº”ï¼ŒSessionIdç”±å®¢æˆ·ç«¯å­˜å‚¨ï¼Œåœ¨è¯·æ±‚æ—¶å°†SessionIdä¹Ÿå¸¦è¿‡å»ï¼Œå› æ­¤å®ç°äº†çŠ¶æ€çš„å¯¹åº”ã€‚ ä½†æ˜¯ï¼Œè€ŒTokenæ˜¯åœ¨æœåŠ¡ç«¯å°†ç”¨æˆ·ä¿¡æ¯ç»è¿‡Base64Urlã€ç¼–ç ï¼Œä¸æ˜¯åŠ å¯†ã€‘è¿‡åä¼ ç»™åœ¨å®¢æˆ·ç«¯ï¼Œæ¯æ¬¡ç”¨æˆ·è¯·æ±‚çš„æ—¶å€™éƒ½ä¼šå¸¦ä¸Šè¿™ä¸€æ®µä¿¡æ¯ï¼Œå› æ­¤æœåŠ¡ç«¯æ‹¿åˆ°æ­¤ä¿¡æ¯è¿›è¡Œè§£å¯†åå°±çŸ¥é“æ­¤ç”¨æˆ·æ˜¯è°äº†ã€‚ è¿™ä¸ªæ–¹æ³•å«åšJWT(Json Web Token)ã€‚ ä¸€ä¸ªä¾‹å­ç†è§£ï¼šåŸºäºTokençš„èº«ä»½éªŒè¯æµç¨‹ï¼Œåœ¨æœåŠ¡ç«¯ä¸éœ€è¦å­˜å‚¨ç”¨æˆ·çš„ç™»å½•è®°å½• ã€‚ å®¢æˆ·ç«¯ä½¿ç”¨ç”¨æˆ·åè·Ÿå¯†ç è¯·æ±‚ç™»å½• æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚ï¼Œå»éªŒè¯ç”¨æˆ·åä¸å¯†ç  éªŒè¯æˆåŠŸåï¼ŒæœåŠ¡ç«¯ä¼šç­¾å‘ä¸€ä¸ª Tokenï¼Œå†æŠŠè¿™ä¸ª Token å‘é€ç»™å®¢æˆ·ç«¯ Tokenåœ¨æœåŠ¡å™¨ç«¯ï¼Œå¯ä»¥ä¿å­˜åœ¨Redisç¼“å­˜ä¸­ã€‚ å®¢æˆ·ç«¯æ”¶åˆ° Token ä»¥åå¯ä»¥æŠŠå®ƒå­˜å‚¨èµ·æ¥ï¼Œæ¯”å¦‚æ”¾åœ¨ Cookie é‡Œæˆ–è€… Local Storage é‡Œ å®¢æˆ·ç«¯æ¯æ¬¡å‘æœåŠ¡ç«¯è¯·æ±‚èµ„æºçš„æ—¶å€™éœ€è¦å¸¦ç€æœåŠ¡ç«¯ç­¾å‘çš„ Token æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚ï¼Œç„¶åå»éªŒè¯å®¢æˆ·ç«¯è¯·æ±‚é‡Œé¢å¸¦ç€çš„ Tokenï¼Œå¦‚æœéªŒè¯æˆåŠŸï¼Œå°±å‘å®¢æˆ·ç«¯è¿”å›è¯·æ±‚çš„æ•°æ® Tokençš„ä¼˜ç‚¹ æ— çŠ¶æ€ï¼Œå¯æ‰©å±•å’Œè§£è€¦ï¼š ä½¿ç”¨ token è€Œä¸æ˜¯ cookie çš„æœ€å¤§ä¼˜ç‚¹åº”è¯¥å°±æ˜¯æ— çŠ¶æ€ï¼Œåç«¯ä¸éœ€è¦ä¿æŒå¯¹ token çš„è®°å½•ï¼Œæ¯ä¸ª token éƒ½æ˜¯ç‹¬ç«‹çš„ï¼ŒåŒ…å«äº†æ£€æŸ¥å…¶æœ‰æ•ˆæ€§çš„æ‰€æœ‰æ•°æ®ï¼Œå¹¶é€šè¿‡ç”³æ˜ä¼ è¾¾äº†ç”¨æˆ·ä¿¡æ¯ã€‚ åœ¨ JWT ä¸­å­˜å‚¨æ•°æ® ï¼š å½“ä½¿ç”¨ cookie è¿›è¡ŒéªŒè¯æ—¶ï¼Œä½ æ˜¯å°† session id å­˜å‚¨åˆ° cookie é‡Œï¼ŒJWT å…è®¸ä½ å­˜å‚¨ä»»ä½•ç±»å‹çš„å…ƒæ•°æ®ï¼Œåªè¦æ˜¯åˆæ³•çš„ JSONã€‚ è‡ªåŒ…å«ï¼šç”±äºä¸²åŒ…å«äº†ç”¨æˆ·æ‰€éœ€è¦çš„ä¿¡æ¯ï¼Œé¿å…äº†å¤šæ¬¡æŸ¥è¯¢æ•°æ®åº“ã€‚ JWTä»‹ç» JWTæœ‰ä¸‰éƒ¨åˆ†ç»„æˆï¼šHeaderï¼ŒPayloadï¼ŒSignatureã€‚ Headerï¼š ä¸€ä¸ªJsonå¯¹è±¡ï¼Œæè¿°JWTçš„å…ƒæ•°æ®ï¼Œé€šå¸¸æ˜¯ä¸‹é¢è¿™æ ·å­çš„ã€‚ 1234&#123; &quot;alg&quot;: &quot;HS256&quot;, # ç­¾åçš„ç®—æ³•ä¸ºHS256 &quot;typ&quot;: &quot;JWT&quot; # Tokenç±»å‹ä¸ºJWT&#125; Payloadï¼š ä¹Ÿæ˜¯ä¸€ä¸ªJsonå¯¹è±¡ï¼Œç”¨æ¥å­˜æ”¾å®é™…éœ€è¦ä¼ è¾“çš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å®šä¹‰ä¸€äº›ç§æœ‰å­—æ®µï¼Œå¦‚ï¼š 1234&#123; &quot;name&quot;: &quot;xiaoMing&quot;, &quot;age&quot;: 14&#125; Signatureï¼š å¯¹å‰é¢çš„ä¸¤éƒ¨åˆ†çš„æ•°æ®è¿›è¡Œç­¾åï¼Œé˜²æ­¢æ•°æ®ç¯¡æ”¹ ã€‚ é¦–å…ˆéœ€è¦å®šä¹‰ä¸€ä¸ªç§˜é’¥ï¼Œè¿™ä¸ªç§˜é’¥åªæœ‰æœåŠ¡å™¨æ‰çŸ¥é“ï¼Œä¸èƒ½æ³„éœ²ç»™ç”¨æˆ·ï¼Œç„¶åä½¿ç”¨Headerä¸­æŒ‡å®šçš„ç­¾åç®—æ³•(é»˜è®¤æƒ…å†µæ˜¯HMAC SHA256)ã€‚ç®—å‡ºç­¾åä»¥åå°†Headerã€Payloadã€Signatureä¸‰éƒ¨åˆ†æ‹¼æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ¯ä¸ªéƒ¨åˆ†ç”¨.åˆ†å‰²å¼€æ¥ï¼Œå°±å¯ä»¥è¿”ç»™ç”¨æˆ·äº†ã€‚ 16.1 sessionå’Œcookieåº”è¯¥å¦‚ä½•å»é€‰æ‹©ï¼ˆé€‚ç”¨åœºæ™¯ï¼‰ï¼Ÿ Cookie åªèƒ½å­˜å‚¨ ASCII ç å­—ç¬¦ä¸²ï¼Œè€Œ Session åˆ™å¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„æ•°æ®ï¼Œå› æ­¤åœ¨è€ƒè™‘æ•°æ®å¤æ‚æ€§æ—¶é¦–é€‰ Sessionï¼› Cookie å­˜å‚¨åœ¨æµè§ˆå™¨ä¸­ï¼Œå®¹æ˜“è¢«æ¶æ„æŸ¥çœ‹ã€‚å¦‚æœéè¦å°†ä¸€äº›éšç§æ•°æ®å­˜åœ¨ Cookie ä¸­ï¼Œå¯ä»¥å°† Cookie å€¼è¿›è¡ŒåŠ å¯†ï¼Œç„¶ååœ¨æœåŠ¡å™¨è¿›è¡Œè§£å¯†ï¼›è€ƒè™‘å®‰å…¨è€ƒè™‘session å¯¹äºå¤§å‹ç½‘ç«™ï¼Œå¦‚æœç”¨æˆ·æ‰€æœ‰çš„ä¿¡æ¯éƒ½å­˜å‚¨åœ¨ Session ä¸­ï¼Œé‚£ä¹ˆå¼€é”€æ˜¯éå¸¸å¤§çš„ï¼Œå› æ­¤ä¸å»ºè®®å°†æ‰€æœ‰çš„ç”¨æˆ·ä¿¡æ¯éƒ½å­˜å‚¨åˆ° Session ä¸­ï¼Œä¸€èˆ¬æ˜¯cookieå’Œsessioné…åˆä½¿ç”¨çš„ã€‚ 17.è¯´è¯´HTTPã€TCPã€Socket çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ TCP/IP ä»£è¡¨ä¼ è¾“æ§åˆ¶åè®®/ç½‘é™…åè®®ï¼ŒæŒ‡çš„æ˜¯ä¸€ç³»åˆ—åè®®æ—ï¼› HTTP æœ¬èº«å°±æ˜¯ä¸€ä¸ªåè®®ï¼Œæ˜¯ä» Web æœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„ä¼ é€åè®®ï¼› Socket æ˜¯ TCP/IP ç½‘ç»œçš„ API ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªé—¨é¢æ¨¡å¼ï¼Œå®ƒæŠŠå¤æ‚çš„ TCP/IP åè®®æ—éšè—åœ¨Socket æ¥å£åé¢ã€‚å¯¹ç”¨æˆ·æ¥è¯´ï¼Œä¸€ç»„ç®€å•çš„æ¥å£å°±æ˜¯å…¨éƒ¨ï¼Œè®© Socket å»ç»„ç»‡æ•°æ®ï¼Œä»¥ç¬¦åˆæŒ‡å®šçš„åè®®ã€‚ 3.5 å…¶å®ƒ 1. ä»‹ç»ä¸€ä¸‹CDN ï¼Ÿ CDNåˆ†å‘èŠ‚ç‚¹å„ä¸ªæ•°æ®éƒ½ä¸€æ ·å—ï¼Ÿ CDNï¼Œå³å†…å®¹åˆ†å‘ç½‘ç»œ è§£å†³é™æ€ç½‘é¡µåŠ è½½ ä¸åŒåœ°åŒºç”¨æˆ·è®¿é—®æœåŠ¡å™¨é€Ÿåº¦ä¸åŒï¼Œå¯ä»¥æŠŠé™æ€ç½‘é¡µæ”¾åœ¨ä¸åŒåœ°åŒºçš„æœåŠ¡å™¨ï¼Œè¿™æ ·ç”¨æˆ·å¯ä»¥å°±è¿‘å»è¿æ¥ï¼Œå¤§å¤§æå‡ä½“éªŒï¼› å‘å±•è½¬æ¢æˆï¼Œå°±è¿‘æ¥å…¥è§£å†³è®¿é—®ç½‘ç»œèµ„æº å¦‚ä¸€ä¸ªç”µä¿¡ç”¨æˆ·é€è¯·æ±‚ï¼Œè¿›å…¥è§£æç³»ç»Ÿï¼Œä¼šè®©ç”¨æˆ·è¿æ¥åˆ°æœ€è¿‘çš„è¾¹ç¼˜èŠ‚ç‚¹ï¼Œç„¶åè¯·æ±‚æ•°æ®ï¼› å¦‚æœè¾¹ç¼˜èŠ‚ç‚¹æ²¡æœ‰æ•°æ®ï¼Œåˆ™å»è®¿é—®æºèŠ‚ç‚¹ï¼› æºèŠ‚ç‚¹ä¹Ÿæ²¡æœ‰ï¼Œå°±ä¼šå»è®¿é—®ä¸»å¹²èŠ‚ç‚¹ï¼Œå»è”é€šæœåŠ¡å™¨ä¸­æŸ¥æ‰¾ï¼› æœ€åè¿”å›æ•°æ®ã€‚ CDNåˆ†å‘èŠ‚ç‚¹å„ä¸ªæ•°æ®ä¸ä¸€æ · ä¸ä¸€æ ·ï¼Œå°±ç›¸å½“äºDNSæœåŠ¡å™¨ç¼“å­˜äº†äº›åŸŸåâ†’ipæ•°æ®ï¼Œå¦‚æœæ²¡æœ‰çš„è¯è¿˜è¦å‘ä¸Šçº§æŸ¥è¯¢ï¼Œæœ€ç»ˆæŠŠæºç«™æ•°æ®æ‹‰ä¸‹æ¥ã€‚ 2. ä»€ä¹ˆæ˜¯CDNä¸‰çº§æº¯æºï¼Ÿ CDNç›®çš„ã€‚CDN ç³»ç»Ÿè®¾è®¡çš„é¦–è¦ç›®æ ‡æ˜¯å°½é‡å‡å°‘ç”¨æˆ·çš„è®¿é—®å“åº”æ—¶é—´ CDNå®ç°æ€è·¯ã€‚ä¸ºè¾¾åˆ°è¿™ä¸€ç›®æ ‡ï¼ŒCDN ç³»ç»Ÿåº”è¯¥å°½é‡å°†ç”¨æˆ·æ‰€éœ€è¦çš„å†…å®¹å­˜æ”¾åœ¨è·ç¦»ç”¨æˆ·æœ€è¿‘çš„ä½ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè´Ÿè´£ä¸ºç”¨æˆ·æä¾›å†…å®¹æœåŠ¡çš„ Cacheè®¾å¤‡åº”éƒ¨ç½²åœ¨ç‰©ç†ä¸Šçš„ç½‘ç»œè¾¹ç¼˜ä½ç½®ï¼Œæˆ‘ä»¬ç§°è¿™ä¸€å±‚ä¸º CDNè¾¹ç¼˜å±‚ ã€‚ CDNç³»ç»Ÿæ¶æ„ã€‚CDN ç³»ç»Ÿä¸­è´Ÿè´£å…¨å±€æ€§ç®¡ç†å’Œæ§åˆ¶çš„è®¾å¤‡ç»„æˆ ä¸­å¿ƒå±‚ ï¼Œä¸­å¿ƒå±‚åŒæ—¶ä¿å­˜ç€æœ€å¤šçš„å†…å®¹å‰¯æœ¬ï¼Œå½“è¾¹ç¼˜å±‚è®¾å¤‡æœªå‘½ä¸­æ—¶ï¼Œä¼šå‘ä¸­å¿ƒå±‚è¯·æ±‚ï¼Œå¦‚æœåœ¨ä¸­å¿ƒå±‚ä»æœªå‘½ä¸­ï¼Œåˆ™éœ€è¦ä¸­å¿ƒå±‚å‘æºç«™å›æºã€‚ å„ä½åŒå­¦ä»¬å¥½ï¼š æˆ‘ä»¬ä»Šå¹´å¤§æ•°æ®è¯¾ç¨‹å·²ç»æ¥è¿‘å°¾å£°ï¼Œè¿™é—¨è¯¾å·²ç»å¼€è®¾äº†ä¸‰å¹´ï¼Œæ¯å¹´éƒ½ä¼šé‚€è¯·åŒå­¦ä»¬æ¥å…±åŒå»ºè®¾ã€‚æ¯å¹´æˆ‘ä»¬ä¹Ÿéƒ½ä¼šæ ¹æ®åŒå­¦ä»¬çš„åé¦ˆè¿›è¡Œå®Œå–„ï¼Œä»Šå¹´æˆ‘ä»¬é¢„è®¡ä¼šè¿›è¡Œä¸€æ¬¡æ›´å¤§çš„ç³»ç»Ÿæ€§æ›´æ–°ã€‚ æŒ‰ç…§å½“åˆæ‰¿è¯ºï¼Œç°åœ¨æˆ‘ä»¬ç»Ÿè®¡ä¸‹å¤§å®¶å¼€æºè´¡çŒ®ï¼Œè¯·æŒ‰ç…§ç¤ºä¾‹ï¼Œåœ¨è¿›è¡Œä¸‹æ–¹è¯„è®ºå®Œæˆå¡«å†™ã€‚ [æ³¨1] ï¼šä¸ºä¿è¯å¤§å®¶éšç§æƒ…å†µï¼Œè¯¥Issueä¼šåœ¨ä¸‰å¤©å†…ç»Ÿè®¡å®Œæ¯•åå…³é—­ï¼Œè¯·åŠæ—¶å¡«å†™~ ç»„å· è´¡çŒ®ç±»å‹ï¼ˆæ–‡æ¡£å»ºè®¾ã€Issueã€PRç­‰ï¼‰ é“¾æ¥ï¼ˆæˆ–å…¶å®ƒè¯æ˜æˆªå›¾ï¼‰ è´¡çŒ®äºº å¤‡æ³¨ 01ç»„ issue test-issue å¼ ä¸‰ï¼ˆ20196666ï¼‰ã€æå››ï¼ˆ20197777ï¼‰ æ„Ÿè°¢å¤§å®¶çš„ç§¯æå‚ä¸ï¼","categories":[{"name":"æ ¡æ‹›ç¬”è®°","slug":"æ ¡æ‹›ç¬”è®°","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/"},{"name":"è®¡ç®—æœºåŸºç¡€","slug":"æ ¡æ‹›ç¬”è®°/è®¡ç®—æœºåŸºç¡€","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"æ ¡æ‹›","slug":"æ ¡æ‹›","permalink":"https://hwh.zone/tags/%E6%A0%A1%E6%8B%9B/"},{"name":"è®¡ç®—æœºåŸºç¡€","slug":"è®¡ç®—æœºåŸºç¡€","permalink":"https://hwh.zone/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"},{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"https://hwh.zone/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"}]},{"title":"æ ¡æ‹›ç¬”è®°ï¼ˆäºŒï¼‰_è®¡ç®—æœºåŸºç¡€_Linux&Git","slug":"æ ¡æ‹›ç¬”è®°ï¼ˆäºŒï¼‰_è®¡ç®—æœºåŸºç¡€_Linux&Git","date":"2021-11-26T12:41:34.011Z","updated":"2021-12-03T03:54:55.587Z","comments":true,"path":"p/44980/","link":"","permalink":"https://hwh.zone/p/44980/","excerpt":"","text":"æˆ‘çš„æ ¡æ‹›è®°å½•ï¼šæ ¡æ‹›ç¬”è®°ï¼ˆé›¶ï¼‰_å†™åœ¨å‰é¢ ï¼Œä»¥ä¸‹æ˜¯æ ¡æ‹›ç¬”è®°æ€»ç›®å½•ã€‚ å¤‡æ³¨ ç®—æ³•èƒ½åŠ›ï¼ˆâ€œåˆ·é¢˜â€ï¼‰ è¿™éƒ¨åˆ†å°±æ˜¯è€—æ—¶é—´å¤šç»ƒä¹ ï¼ŒLeetcode-Top100 æ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚ è¡¥å……ç»ƒä¹ ï¼šcodeTop è®¡ç®—æœºåŸºç¡€(ä¸Š)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_Javaå…¥é—¨ C++åç«¯åç»­æ›´æ–° æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é¢å¯¹å¯¹è±¡ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é›†åˆ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_å¤šçº¿ç¨‹ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é” æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_JVM è®¡ç®—æœºåŸºç¡€(ä¸‹)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆäºŒï¼‰__è®¡ç®—æœºåŸºç¡€_Linux&amp;Git æ ¡æ‹›ç¬”è®°ï¼ˆä¸‰ï¼‰__è®¡ç®—æœºåŸºç¡€_è®¡ç®—æœºç½‘ç»œ æ ¡æ‹›ç¬”è®°ï¼ˆå››ï¼‰__è®¡ç®—æœºåŸºç¡€_æ“ä½œç³»ç»Ÿ æ ¡æ‹›ç¬”è®°ï¼ˆäº”ï¼‰__è®¡ç®—æœºåŸºç¡€_MySQL æ ¡æ‹›ç¬”è®°ï¼ˆå…­ï¼‰__è®¡ç®—æœºåŸºç¡€_Redis æ ¡æ‹›ç¬”è®°ï¼ˆä¸ƒï¼‰__è®¡ç®—æœºåŸºç¡€_æ•°æ®ç»“æ„ æ ¡æ‹›ç¬”è®°ï¼ˆå…«ï¼‰__è®¡ç®—æœºåŸºç¡€_åœºæ™¯&amp;æ™ºåŠ›é¢˜ æ ¡æ‹›ç¬”è®°ï¼ˆä¹ï¼‰__è®¡ç®—æœºåŸºç¡€_ç›¸å…³è¡¥å…… é¡¹ç›®&amp;å®ä¹  ä¸»è¦æ˜¯æ€ä¹ˆå‡†å¤‡é¡¹ç›®ï¼Œåç»­æ›´æ–° äºŒã€Linux &amp; Git 2.1 Linux 2.1.1 å¸¸ç”¨å‘½ä»¤ æŸ¥çœ‹80ç«¯å£çŠ¶æ€ï¼Ÿ 1netstat -ntulp | grep 80 -t : æŒ‡æ˜æ˜¾ç¤ºTCPç«¯å£ -u : æŒ‡æ˜æ˜¾ç¤ºUDPç«¯å£ -l : ä»…æ˜¾ç¤ºç›‘å¬å¥—æ¥å­—(æ‰€è°“å¥—æ¥å­—å°±æ˜¯ä½¿åº”ç”¨ç¨‹åºèƒ½å¤Ÿè¯»å†™ä¸æ”¶å‘é€šè®¯åè®®(protocol)ä¸èµ„æ–™çš„ç¨‹åº) -p : æ˜¾ç¤ºè¿›ç¨‹æ ‡è¯†ç¬¦å’Œç¨‹åºåç§°ï¼Œæ¯ä¸€ä¸ªå¥—æ¥å­—/ç«¯å£éƒ½å±äºä¸€ä¸ªç¨‹åº -n : ä¸è¿›è¡ŒDNSè½®è¯¢ï¼Œæ˜¾ç¤ºIP(å¯ä»¥åŠ é€Ÿæ“ä½œ) æ€ä¹ˆæŸ¥çœ‹æŒ‡å®šç«¯å£æ˜¯å¦å¼€æ”¾ï¼Ÿ é€šè¿‡ netstat å‘½ä»¤ï¼Œæ³¨æ„åŠ ä¸Š-aå‚æ•°ï¼Œçœ‹æ˜¯å¦æœ‰0.0.0.0:22 åœ¨è¢«ç›‘å¬ã€‚ é€šè¿‡lsofå‘½ä»¤ï¼Œå¦‚æœæ²¡æœ‰ä»»ä½•æ˜¾ç¤ºï¼Œåˆ™ç«¯å£æ²¡æœ‰è¢«æ‰“å¼€ã€‚ æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€ï¼Ÿæ€ä¹ˆé€€å‡ºï¼Ÿæ€ä¹ˆæœç´¢è¿›ç¨‹ï¼Ÿæ€ä¹ˆæŸ¥çœ‹æŸä¸€ä¸ªè¿›ç¨‹çš„å†…å­˜å’ŒCPUä½¿ç”¨æƒ…å†µï¼Ÿ æ‰€æœ‰è¿›ç¨‹çŠ¶æ€ 12ps -aux # å†…å­˜ä¸­è¿›ç¨‹ä¿¡æ¯ps -l # æœ¬æ¬¡ç™»é™†æ‰€æœ‰çš„è¿›ç¨‹ä¿¡æ¯ é€€å‡ºè¿›ç¨‹ï¼š exit æœç´¢è¿›ç¨‹ï¼š ps -ef 1ps -ef | grep &lt;è¿›ç¨‹å&gt; -eç›¸å½“äº-aæ˜¯å…¨éƒ¨åˆ—å‡ºï¼Œ-fæ˜¯æ˜¾ç¤ºUIDç­‰ï¼› æŸ¥çœ‹æŒ‡å®šè¿›ç¨‹ï¼ˆå¦‚kalfaï¼‰CPUå’Œå†…å­˜å ç”¨ 1ps -aux | grep java 1.3æ˜¯CPUå ç”¨ç‡ï¼Œ12.7æ˜¯å†…å­˜å ç”¨ç‡ï¼Œ943100æ˜¯ç‰©ç†å†…å­˜ä½¿ç”¨é‡ è¿˜å¯ä»¥ä½¿ç”¨ topå‘½ä»¤æŸ¥çœ‹æŒ‡å®šè¿›ç¨‹ï¼ˆPIDï¼‰çš„å†…å­˜å’ŒCPUä½¿ç”¨ç‡ï¼š 1top -p 2913 æŸ¥çœ‹å ç”¨æŒ‡å®šç«¯å£çš„è¿›ç¨‹ ï¼Ÿ 1lsof -i :8040 è¿™ä¸€æ­¥åªèƒ½è·å–è¿›ç¨‹åï¼Œè¿˜è¦ps å‘½ä»¤è¿›ä¸€æ­¥è·å–è¿›ç¨‹id å¦‚æœè¦æ€æ­»ç›¸åº”è¿›ç¨‹ï¼š 1kill -9 &lt;è¿›ç¨‹id&gt; ä»»åŠ¡ç®¡ç†å™¨ï¼ˆcpuå ç”¨ç‡ã€å†…å­˜å ç”¨ç‡ã€è¿›ç¨‹ï¼‰ï¼Ÿ 1top ï¼ˆæ€»å¿˜ï¼‰è¿˜å¯ä»¥ä½¿ç”¨ topå‘½ä»¤æŸ¥çœ‹æŒ‡å®šè¿›ç¨‹ï¼ˆPIDï¼‰çš„å†…å­˜å’ŒCPUä½¿ç”¨ç‡ï¼š 1top -p å†…å­˜ä½¿ç”¨æƒ…å†µ å’Œ ç£ç›˜ä½¿ç”¨æƒ…å†µï¼Ÿ 1free -m # å†…å­˜ä½¿ç”¨æƒ…å†µ ç£ç›˜ä½¿ç”¨æƒ…å†µ 1df -m -m : ä»¥Mbä¸ºå•ä½æ˜¾ç¤ºç£ç›˜ä½¿ç”¨é‡å’Œå ç”¨ç‡ ç»Ÿè®¡å•è¯ä¸ªæ•° 1grep -o &lt;å•è¯&gt; &lt;æ–‡ä»¶åœ°å€&gt; ï½œ wc -l # -lè¡¨ç¤ºç»Ÿè®¡è¡Œæ•° ä¿®æ”¹ç”¨æˆ·æƒé™åŠå¸¸ç”¨å‚æ•°ï¼Ÿ 1chmod &lt;å‚æ•°(å¯é€‰)&gt; &lt;æ¨¡å¼&gt; &lt;æ–‡ä»¶/æ–‡ä»¶å¤¹&gt; å¸¸ç”¨å‚æ•°ï¼š -R ï¼šé€’å½’çš„ä¿®æ”¹æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰å­æ–‡ä»¶/æ–‡ä»¶å¤¹çš„æ‰€å±ç”¨æˆ· ã€ç¤ºä¾‹ã€‘å¦‚ä½•ä¿®æ”¹ /test5/5.txt ï¼Œæƒé™ä»rw-r--r-- â€”&gt; r--rwxrwx ï¼Ÿ 1234# ç”¨æˆ·ï¼ˆUï¼‰æƒé™[å‡å»å†™]æƒé™chmod u-w /test5/5.txt# ç»„ï¼ˆGï¼‰/å…¶ä»–ç”¨æˆ·ï¼ˆOï¼‰æƒé™[åŠ ä¸Šå†™ã€æ‰§è¡Œ]chmod go+wx /test5/5.txt æŸ¥çœ‹æ–‡ä»¶çš„å‘½ä»¤æœ‰å“ªäº›ï¼Ÿ 123456vi æ–‡ä»¶å #ç¼–è¾‘æ–¹å¼æŸ¥çœ‹ï¼Œå¯ä¿®æ”¹cat æ–‡ä»¶å #æ˜¾ç¤ºå…¨éƒ¨æ–‡ä»¶å†…å®¹more æ–‡ä»¶å #åˆ†é¡µæ˜¾ç¤ºæ–‡ä»¶å†…å®¹less æ–‡ä»¶å #ä¸ more ç›¸ä¼¼ï¼Œæ›´å¥½çš„æ˜¯å¯ä»¥å¾€å‰ç¿»é¡µtail æ–‡ä»¶å #ä»…æŸ¥çœ‹å°¾éƒ¨ï¼Œè¿˜å¯ä»¥æŒ‡å®šè¡Œæ•°head æ–‡ä»¶å #ä»…æŸ¥çœ‹å¤´éƒ¨,è¿˜å¯ä»¥æŒ‡å®šè¡Œæ•° ä½ å¹³æ—¶æ€ä¹ˆæŸ¥çœ‹æ—¥å¿—çš„ï¼Ÿ LinuxæŸ¥çœ‹æ—¥å¿—çš„å‘½ä»¤æœ‰å¤šç§: tailã€catã€tacã€headã€echoç­‰ï¼Œæœ¬æ–‡åªä»‹ç»å‡ ç§å¸¸ç”¨çš„æ–¹æ³•ã€‚ tailï¼ˆæœ€å¸¸ä½¿ç”¨ï¼‰ å‘½ä»¤æ ¼å¼: tail[å¿…è¦å‚æ•°][é€‰æ‹©å‚æ•°][æ–‡ä»¶] 123tail -n 10 test.log æŸ¥è¯¢æ—¥å¿—å°¾éƒ¨æœ€å10è¡Œçš„æ—¥å¿—;tail -n +10 test.log æŸ¥è¯¢10è¡Œä¹‹åçš„æ‰€æœ‰æ—¥å¿—;tail -fn 10 test.log å¾ªç¯å®æ—¶æŸ¥çœ‹æœ€å10è¡Œè®°å½•(æœ€å¸¸ç”¨çš„) ä¸€èˆ¬è¿˜ä¼šé…åˆç€grepæœç´¢ç”¨ï¼Œä¾‹å¦‚ : 1tail -fn 1000 test.log | grep &#x27;å…³é”®å­—&#x27; å¦‚æœä¸€æ¬¡æ€§æŸ¥è¯¢çš„æ•°æ®é‡å¤ªå¤§,å¯ä»¥è¿›è¡Œç¿»é¡µæŸ¥çœ‹ï¼Œä¾‹å¦‚ï¼š 1tail -n 4700 aa.log |more -1000 å¯ä»¥è¿›è¡Œå¤šå±æ˜¾ç¤º(ctrl + f æˆ–è€… ç©ºæ ¼é”®å¯ä»¥å¿«æ·é”®) å…¶å®ƒé…åˆçš„å‘½ä»¤ 123456history # æ‰€æœ‰çš„å†å²è®°å½•history | grep XXX # å†å²è®°å½•ä¸­åŒ…å«æŸäº›æŒ‡ä»¤çš„è®°å½•history | more # åˆ†é¡µæŸ¥çœ‹è®°å½•history -c # æ¸…ç©ºæ‰€æœ‰çš„å†å²è®°å½•!! é‡å¤æ‰§è¡Œä¸Šä¸€ä¸ªå‘½ä»¤æŸ¥è¯¢å‡ºæ¥è®°å½•åé€‰ä¸­ : !323 æ€ä¹ˆè®©è¿›ç¨‹åå°è¿è¡Œï¼Ÿ å‘½ä»¤åé¢åŠ ä¸Š**&amp;**å³å¯ï¼Œå®é™…ä¸Šï¼Œè¿™æ ·æ˜¯å°†å‘½ä»¤æ”¾å…¥åˆ°ä¸€ä¸ªä½œä¸šé˜Ÿåˆ—ä¸­äº†ï¼› é€šå¸¸é…åˆnohup ï¼Œå¿½ç•¥å‘é€ç»™å­å‘½ä»¤çš„æŒ‚æ–­SIGHUPä¿¡å·ï¼ˆç»ˆç«¯å…³é—­ï¼‰ï¼š 1nohup subcommand &amp; ctrl + z æŒ‚èµ·è¿›ç¨‹ï¼Œä½¿ç”¨jobsæŸ¥çœ‹åºå·ï¼Œåœ¨ä½¿ç”¨bg %åºå·åå°è¿è¡Œè¿›ç¨‹ï¼› ctrl + c æ˜¯è¿›ç¨‹ç»ˆæ­¢ã€‚ è¿è¡ŒæŒ‡ä»¤å‰é¢**+ setsid**ï¼Œä½¿å…¶çˆ¶è¿›ç¨‹ç¼–ç¨‹initè¿›ç¨‹ï¼Œä¸å—SIGHUPä¿¡å·çš„å½±å“ã€‚ 2.1.2 å…¶å®ƒé—®é¢˜ 1.è¯·é—®/proc ç›®å½•æœ‰ä»€ä¹ˆç”¨ï¼Ÿ Linuxç³»ç»Ÿä¸Šçš„/procç›®å½•æ˜¯ä¸€ç§æ–‡ä»¶ç³»ç»Ÿï¼Œå³procæ–‡ä»¶ç³»ç»Ÿã€‚ /procæ˜¯ä¸€ç§ä¼ªæ–‡ä»¶ç³»ç»Ÿï¼ˆä¹Ÿå³è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼‰ï¼Œå­˜å‚¨çš„æ˜¯å½“å‰å†…æ ¸è¿è¡ŒçŠ¶æ€çš„ä¸€ç³»åˆ—ç‰¹æ®Šæ–‡ä»¶ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è¿™äº›æ–‡ä»¶ï¼š æŸ¥çœ‹ç³»ç»Ÿæœ‰å…³ï¼ˆ1ï¼‰ç¡¬ä»¶åŠå½“å‰ï¼ˆ2ï¼‰æ­£åœ¨è¿è¡Œè¿›ç¨‹çš„ä¿¡æ¯ï¼Œç”šè‡³å¯ä»¥é€šè¿‡æ›´æ”¹å…¶ä¸­æŸäº›æ–‡ä»¶æ¥æ”¹å˜å†…æ ¸çš„è¿è¡ŒçŠ¶æ€ã€‚ 2. Linuxçš„è½¯/ç¡¬é“¾æ¥æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ å‚è€ƒï¼šâ€œè½¯é“¾æ¥â€å’Œâ€œç¡¬é“¾æ¥â€çš„åŒºåˆ« ä»€ä¹ˆæ˜¯é“¾æ¥ ï¼Ÿ æ–‡ä»¶åœ¨Linuxä¸Šè¢«åˆ†æˆä¸¤éƒ¨åˆ†ï¼šç”¨æˆ·æ•°æ® (user data) ä¸å…ƒæ•°æ® (metadata) ã€‚ ç”¨æˆ·æ•°æ®ï¼šå³æ–‡ä»¶æ•°æ®å—ï¼Œä¿ç•™è®°å½•æ–‡ä»¶çœŸå®å†…å®¹çš„åœ°æ–¹ å…ƒæ•°æ®ï¼š æ˜¯æ–‡ä»¶çš„é™„åŠ å±æ€§ï¼Œå¦‚åˆ›å»ºå¤§å°ã€æ—¶é—´ï¼Œæ‰€æœ‰ä¿¡æ¯ç­‰ã€‚å…¶ä¸­inodeå· ï¼Œæ˜¯æ–‡ä»¶çš„å”¯ä¸€æ ‡è¯†ã€‚ ç³»ç»Ÿé€šè¿‡inodeå·å¿«é€Ÿæ‰¾åˆ°æ–‡ä»¶ï¼Œæœ‰ä¸€ç§æ–¹å¼å¯ä»¥å¿«é€Ÿå¯»æ‰¾åˆ°æ•°æ®å…ƒä¿¡æ¯ï¼Œé‚£å°±æ˜¯è½¯/ç¡¬é“¾æ¥ã€‚ ç°åœ¨æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶myfileï¼š 1234$ touch myfile &amp;&amp; echo &quot;This is a plain text file.&quot; &gt; myfile$ cat myfileThis is a plain text file. æ¥å±•ç¤ºäºŒè€…åŒºåˆ«ã€‚ ç¡¬é“¾æ¥ å»ºç«‹ myfile çš„ä¸€ä¸ªç¡¬é“¾æ¥ hard ï¼Œå¯ä»¥çœ‹åˆ°äºŒè€…çš„inode æ˜¯ä¸€è‡´çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æŒ‡å‘äº†åŒä¸€ä¸ªç‰©ç†åŒºå—ã€‚ ç¡¬é“¾æ¥inode ï¼šæŒ‡å‘æ–‡ä»¶çš„åœ°å€ &amp; ç»´æŠ¤äº†ä¸€ä¸ªå¼•ç”¨è®¡æ•°ï¼Œåªè¦æœ‰æ–‡ä»¶è¿˜æŒ‡å‘è¿™ä¸ªåŒºå—ï¼Œå®ƒå°±ä¸ä¼šä»ç¡¬ç›˜æ¶ˆå¤±ã€‚ 12345$ ln myfile hard # å»ºç«‹ç¡¬é“¾æ¥hard$ ls -li25869085 -rw-r--r-- 2 unixzii staff 27 7 8 17:39 hard25869085 -rw-r--r-- 2 unixzii staff 27 7 8 17:39 myfile æ“ä½œç¡¬é“¾æ¥æ›´æ–°æ–‡ä»¶ï¼Œç­‰ä»·æ›´æ–°åŸæ–‡ä»¶ ä½¿ç”¨hardç¡¬é“¾æ¥ä¿®æ”¹æ–‡ä»¶ï¼Œå‘ç°åŸæ–‡ä»¶ä¹Ÿè¢«ä¿®æ”¹äº†ã€‚ 12345$ echo &quot;New line&quot; &gt;&gt; hard$ cat myfileThis is a plain text file.New line åˆ é™¤åŸæ–‡ä»¶ï¼Œä½¿ç”¨ç¡¬é“¾æ¥ä¾æ—§å¯ä»¥æ˜¾ç¤º å› ä¸ºç£ç›˜å—è¿˜æœ‰ç¡¬é“¾æ¥åœ¨å¼•ç”¨ï¼Œæ‰€ä»¥ä¸ä¼šæ¶ˆå¤±ã€‚ 12345$ rm myfile # åˆ é™¤åŸæ–‡ä»¶$ cat hard # ç¡¬é“¾æ¥ä¾æ—§å¯ä»¥æ˜¾ç¤ºThis is a plain text file.New line è½¯é“¾æ¥ å»ºç«‹ä¸€ä¸ªsoftè½¯é“¾æ¥å¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°äºŒè€…çš„inodeå·æ˜¯ä¸ä¸€æ ·çš„ã€‚ è½¯è¿æ¥çš„inode ï¼šä¿å­˜çœŸå®çš„æ–‡ä»¶çš„ç»å¯¹è·¯å¾„åœ°å€ï¼Œæ‰¾åˆ°è½¯é“¾æ¥ï¼Œè¿˜è¦æ ¹æ®inodeå·æ‰¾åˆ°çœŸå®æ–‡ä»¶è·¯å¾„ã€‚ 12345$ ln -s myfile soft # å»ºç«‹è½¯è¿æ¥soft$ ls -li25869085 -rw-r--r-- 2 unixzii staff 27 7 8 17:39 myfile25869216 lrwxr-xr-x 1 unixzii staff 6 7 8 17:47 soft -&gt; myfile æ“ä½œè½¯é“¾æ¥æ›´æ–°æ–‡ä»¶ï¼Œç­‰ä»·æ›´æ–°åŸæ–‡ä»¶ å› ä¸ºè½¯é“¾æ¥å°±æ˜¯ç›¸å½“ä¸ªå¿«æ·æ–¹å¼ï¼Œå½“ç„¶æ›´æ–°åŸæ–‡ä»¶ã€‚ åˆ é™¤åŸæ–‡ä»¶ï¼Œä½¿ç”¨è½¯é“¾æ¥ä¸ä¼šæ˜¾ç¤º å› ä¸ºè½¯ä»¶inodeæŒ‡å‘çš„ç»å¯¹åœ°å€ï¼Œå·²ç»ä¸å­˜åœ¨æ–‡ä»¶äº†ï¼Œæ‰€ä»¥å½“ç„¶ä¸å­˜åœ¨æ–‡ä»¶äº†ã€‚ 1234$ rm myfile$ cat softcat: soft: No such file or directory è½¯ç¡¬è¿æ¥åŒºåˆ«æ€»ç»“ inodeå·ä¸åŒã€‚ç¡¬é“¾æ¥åŸæ–‡ä»¶/é“¾æ¥æ–‡ä»¶å…¬ç”¨ä¸€ä¸ªinodeå·ï¼Œè¯´æ˜ä»–ä»¬æ˜¯åŒä¸€ä¸ªæ–‡ä»¶ï¼Œè€Œè½¯é“¾æ¥åŸæ–‡ä»¶/é“¾æ¥æ–‡ä»¶æ‹¥æœ‰ä¸åŒçš„inodeå·ï¼Œè¡¨æ˜ä»–ä»¬æ˜¯ä¸¤ä¸ªä¸åŒçš„æ–‡ä»¶ï¼› é“¾æ¥æ•°ç›®ä¸åŒã€‚ è½¯é“¾æ¥çš„é“¾æ¥æ•°ç›®ä¸ä¼šå¢åŠ ï¼›ç¡¬é“¾æ¥æ¯å¤šä¸€ä¸ªé“¾æ¥å°±ä¼š+1ã€‚ æ–‡ä»¶å¤§å°ä¸åŒã€‚ç¡¬é“¾æ¥æ–‡ä»¶æ˜¾ç¤ºçš„å¤§å°æ˜¯è·ŸåŸæ–‡ä»¶æ˜¯ä¸€æ · ï¼›è½¯é“¾æ¥æ˜¾ç¤ºçš„å¤§å°ä¸åŸæ–‡ä»¶å°±ä¸åŒäº†ï¼ŒBBBå¤§å°æ˜¯95Bï¼Œè€ŒBBBsoftæ˜¯3Bï¼Œå› ä¸ºBBBå…±æœ‰3ä¸ªå­—ç¬¦ã€‚ æ–‡ä»¶ç³»ç»Ÿé™åˆ¶ã€‚ è½¯é“¾æ¥æ²¡æœ‰ä»»ä½•æ–‡ä»¶ç³»ç»Ÿçš„é™åˆ¶ï¼Œä»»ä½•ç”¨æˆ·å¯ä»¥åˆ›å»ºæŒ‡å‘ç›®å½•çš„ç¬¦å·é“¾æ¥ã€‚ å»ºç«‹è½¯é“¾æ¥å°±æ˜¯å»ºç«‹äº†ä¸€ä¸ªæ–°æ–‡ä»¶ï¼šå½“è®¿é—®é“¾æ¥æ–‡ä»¶æ—¶ï¼Œç³»ç»Ÿå°±ä¼šå‘ç°ä»–æ˜¯ä¸ªé“¾æ¥æ–‡ä»¶ï¼Œå®ƒè¯»å–é“¾æ¥æ–‡ä»¶æ‰¾åˆ°çœŸæ­£è¦è®¿é—®çš„æ–‡ä»¶ã€‚ 3. æŸ¥è¯¢æ—¥å¿—çš„top10 IP? å‘½ä»¤å¦‚ä¸‹ï¼š 1cat log | cut -d &#x27; &#x27; -f 1 | sort | uniq -c | sort -nr | awk &#x27;&#123;print $0&#125;&#x27; | head -n 10 cat *.log ï¼šå°†æ–‡æœ¬å†…å®¹æ‰“å°åˆ°å±å¹• cutï¼šæˆªå–æŒ‡å®šIPé‚£ä¸€åˆ— sort ï¼ŒæŒ‰IP ASCIIç æ’åºï¼šè¿›è¡Œæ’åºï¼Œé»˜è®¤æ˜¯æŒ‰ç…§asciiç è¿›è¡Œæ’åºçš„ uniq -c ï¼Œç»Ÿè®¡é‡å¤çš„IP ï¼šç»Ÿè®¡ç›¸é‚»çš„è¡Œçš„é‡å¤æ•°é‡ï¼Œç»“æœæ˜¯ç±»ä¼¼ 3 127.13.13.13 ï¼Œå‰é¢çš„æ•°å­—ä»£ç é‡å¤çš„è¡Œæ•° sort|uniq -c ç»Ÿè®¡é‡å¤çš„è¡Œæ•° sort -nï¼Œå†æ¬¡æ’åº ï¼šæ˜¯æŒ‰ç…§æ•°å€¼è¿›è¡Œç”±å°åˆ°å¤§è¿›è¡Œæ’åºï¼Œ -ræ˜¯è¡¨ç¤ºé€†åºï¼Œ-tæ˜¯æŒ‡å®šåˆ†å‰²ç¬¦ï¼Œ-kæ˜¯æ‰§è¡ŒæŒ‰ç…§ç¬¬å‡ åˆ—è¿›è¡Œæ’åº awk ï¼Œåªæ˜¾ç¤ºIPï¼šæŒ‰ç…§åˆ†å‰²ç¬¦å°†ä¸€è¡Œåˆ†å‰²ä¸ºå¤šä¸ªåˆ—ï¼Œç¬¬ä¸€åˆ—ç”¨1è¡¨ç¤ºï¼Œç¬¬äºŒåˆ—ç”¨â€‹2è¡¨ç¤ºï¼Œä¾æ¬¡ç±»æ¨ awk -F&quot; &quot; '&#123;print $2&#125; ï¼Œè¡¨ç¤ºç”¨ç©ºæ ¼ä½œä¸ºåˆ†éš”ç¬¦è¿›è¡Œåˆ†å‰²ï¼Œæ‰“å°å‡ºç¬¬2åˆ— head -n ï¼šè¡¨ç¤ºå–å‰nä¸ª 2.2 Git è®²gitåŸç†çš„çš„ä¸€ç¯‡ä¸é”™æ–‡ç«  2.2.1 å¸¸é—®å‘½ä»¤ 1.ä»€ä¹ˆæ˜¯Gitï¼Ÿæ˜¯ç”¨ä»€ä¹ˆè¯­è¨€ç¼–å†™çš„ï¼Ÿ Gitæ˜¯ä¸€ä¸ª åˆ†å¸ƒå¼ ä»£ç æ§åˆ¶ç³»ç»Ÿ ï¼› Gitä½¿ç”¨ C è¯­è¨€ç¼–å†™ï¼šä½¿å¾— GIT å¾ˆå¿«ï¼ŒC è¯­è¨€å‡å°‘è¿è¡Œæ—¶å¼€é”€æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚ 2.å¦‚ä½•åœ¨Gitä¸­åˆ›å»ºå­˜å‚¨åº“ï¼Ÿ å¦‚æœé¡¹ç›®ä¸å­˜åœ¨ï¼Œåˆ›å»º ç„¶åè¿è¡Œ git init ï¼Œä¼šåœ¨ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª .git ç›®å½• 3.åˆ—ä¸¾å·¥ä½œä¸­å¸¸ç”¨çš„å‡ ä¸ªgitå‘½ä»¤ï¼Ÿ git add : å¢åŠ æ–‡ä»¶ git commit -m ï¼šæäº¤æ–‡ä»¶ git status ï¼šæ‹‰å–è¿œç¨‹åˆ†æ”¯ git push ï¼šåˆå¹¶å½“å‰åˆ†æ”¯å’Œä¸»åˆ†æ”¯ git pull OR git fetch/git merge ï¼šæ‹‰å–è¿œç¨‹åˆ†æ”¯ 4.è®²è®²Git commit åŸºæœ¬å‚æ•°ï¼Ÿ å‚è€ƒï¼šhttps://www.cnblogs.com/qianqiannian/p/6005628.html git commit -m â€œmessageâ€ ï¼šç®€è¦è¯´æ˜è¿™æ¬¡æäº¤çš„è¯­å¥ git commit -a ï¼šå³ä½¿æ²¡æœ‰ç»è¿‡ git add ï¼Œä¹Ÿå¯ä»¥å°†æ‰€æœ‰ ä¿®æ”¹ æˆ– åˆ é™¤ çš„æ–‡ä»¶æäº¤åˆ°æœ¬åœ°ä»“åº“ï¼Œä½†æ–°å»ºçš„æ–‡ä»¶ä¸ä¼šæäº¤ git commit --amend ï¼šè¿½åŠ æäº¤ï¼Œå®ƒå¯ä»¥åœ¨ä¸å¢åŠ ä¸€ä¸ªæ–°çš„commit-id çš„æƒ…å†µä¸‹å°†æ–°ä¿®æ”¹çš„ä»£ç è¿½åŠ åˆ°å‰ä¸€æ¬¡çš„commit-idä¸­ï¼Œ 5.åœ¨Gitä¸­ï¼Œä½ å¦‚ä½•è¿˜åŸå·²ç» push å¹¶å…¬å¼€çš„æäº¤ï¼Ÿ åˆ é™¤æˆ–ä¿®å¤æ–°æäº¤ä¸­çš„é”™è¯¯æ–‡ä»¶ï¼Œå¹¶å°†å…¶è¦†ç›–æ¨é€åˆ°è¿œç¨‹å­˜å‚¨åº“ï¼š 1git commit -m &quot;commit message&quot; åˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤ï¼Œæ’¤æ¶ˆåœ¨é”™è¯¯æäº¤ä¸­æ‰€åšçš„æ‰€æœ‰æ›´æ”¹ï¼š 1git revert &lt;name of bad commit&gt; 6. git pull å’Œ git fetch æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ git pull å–å›è¿œç¨‹ä¸»æœºæŸä¸ªåˆ†æ”¯çš„æ›´æ–°ï¼Œå†ä¸æœ¬åœ°çš„æŒ‡å®šåˆ†æ”¯åˆå¹¶ ï¼ˆå¯èƒ½è¦è§£å†³å†²çªï¼‰ã€‚ git fetch ä»è¿œç¨‹è·å–æœ€æ–°ç‰ˆæœ¬åˆ°æœ¬åœ°ï¼Œä¸ä¼šè‡ªåŠ¨åˆå¹¶ ï¼Œéœ€è¦æ‰‹åŠ¨æ‰§è¡Œ git merge 7.ä»€ä¹ˆæ˜¯ git stash?ä½ ä¸€èˆ¬ä»€ä¹ˆæƒ…å†µä¸‹ä¼šä½¿ç”¨å®ƒï¼Ÿ ç»å¸¸æœ‰è¿™æ ·çš„äº‹æƒ…å‘ç”Ÿï¼Œå½“ä½ æ­£åœ¨è¿›è¡Œé¡¹ç›®ä¸­æŸä¸€éƒ¨åˆ†çš„å·¥ä½œï¼Œé‡Œé¢çš„ä¸œè¥¿å¤„äºä¸€ä¸ªæ¯”è¾ƒæ‚ä¹±çš„çŠ¶æ€ï¼Œè€Œä½ æƒ³è½¬åˆ°å…¶ä»–åˆ†æ”¯ä¸Šè¿›è¡Œä¸€äº›å·¥ä½œã€‚é—®é¢˜æ˜¯ï¼Œä½ ä¸æƒ³æäº¤è¿›è¡Œäº†ä¸€åŠçš„å·¥ä½œï¼Œå¦åˆ™ä»¥åä½ æ— æ³•å›åˆ°è¿™ä¸ªå·¥ä½œç‚¹ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„åŠæ³•å°±æ˜¯git stashå‘½ä»¤ã€‚å‚¨è—(stash)å¯ä»¥è·å–ä½ å·¥ä½œç›®å½•çš„ä¸­é—´çŠ¶æ€â€”â€”ä¹Ÿå°±æ˜¯ä½ ä¿®æ”¹è¿‡çš„è¢«è¿½è¸ªçš„æ–‡ä»¶å’Œæš‚å­˜çš„å˜æ›´â€”â€”å¹¶å°†å®ƒä¿å­˜åˆ°ä¸€ä¸ªæœªå®Œç»“å˜æ›´çš„å †æ ˆä¸­ï¼Œéšæ—¶å¯ä»¥é‡æ–°åº”ç”¨ ä½¿ç”¨æƒ…å†µï¼š å½“å‰åˆ†æ”¯è¿˜æ²¡å¤„ç†å®Œï¼Œä¸èƒ½å»commitæäº¤ï¼Œä½†æ˜¯è¦å»å¤„ç†ä¸€ä¸ªç´§æ€¥å¼€å‘é¡¹ç›®ï¼Œä½¿ç”¨ git stash å¤„ç†å®Œågit stash pop ç»§ç»­å¤„ç†å·¥ä½œ 8.å¦‚æœæœ¬æ¬¡æäº¤è¯¯æ“ä½œï¼Œå¦‚ä½•æ’¤é”€ï¼Ÿ åœºæ™¯1:æ”¹ä¹±äº†ï¼ˆåŒ…æ‹¬åˆ é™¤ç­‰ï¼‰å·¥ä½œåŒºæŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼ˆgit add ä¹‹å‰ï¼‰ï¼š 1git checkout -- &lt;file&gt; ä¸¢å¼ƒä¹‹å‰æ‰€æœ‰çš„ä¿®æ”¹ã€‚ åœºæ™¯2:æ’¤é”€æäº¤åˆ°ç´¢å¼•åŒºçš„æ–‡ä»¶ ï¼ˆgit add ä¹‹åï¼‰ï¼š 1git reset HEAD &lt;file&gt; æ­¤æ—¶å›åˆ°äº†åœºæ™¯1ï¼Œç„¶åå†ä½¿ç”¨ git checkout åœºæ™¯3ï¼š æ’¤é”€å·²ç»æäº¤ä¹‹åçš„æ–‡ä»¶ï¼ˆgit commitä¹‹åï¼‰ï¼š å›é€€ç‰ˆæœ¬å·ã€‚ 12$ git reflog # æŸ¥çœ‹ç‰ˆæœ¬$ git reset --hard 3928 # å›é€€ç‰ˆæœ¬ åœºæ™¯4ï¼š æ’¤é”€å·²ç»pushåˆ°è¿œç¨‹åˆ†æ”¯ä¹‹åçš„æ–‡ä»¶ï¼ˆgit pushä¹‹åï¼‰ åˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤ï¼Œæ’¤æ¶ˆåœ¨é”™è¯¯æäº¤ä¸­æ‰€åšçš„æ‰€æœ‰æ›´æ”¹ï¼š 1git revert &lt;name of bad commit&gt; åˆ é™¤æˆ–ä¿®å¤æ–°æäº¤ä¸­çš„é”™è¯¯æ–‡ä»¶ï¼Œå¹¶å°†å…¶è¦†ç›–æ¨é€åˆ°è¿œç¨‹å­˜å‚¨åº“ï¼š 1git commit -m &quot;commit message&quot; 9.ä½¿ç”¨è¿‡git mergeå’Œgit rebaseå—ï¼Ÿå®ƒä»¬ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ éƒ½æ˜¯ç”¨æ¥åˆå¹¶åˆ†æ”¯çš„ï¼Œä½†æ˜¯ï¼š git merge &lt;å½“å‰åˆ†æ”¯è¦åˆå¹¶çš„åˆ†æ”¯&gt; ï¼š åœ¨å½“å‰åˆ†æ”¯åˆå¹¶&lt;æŒ‡å®šè¦åˆå¹¶çš„åˆ†æ”¯&gt;ï¼Œä¼šè‡ªåŠ¨åœ¨å½“å‰åˆ†æ”¯ï¼ˆä¸‹å›¾ä¸ºmasterï¼‰åˆ›å»ºä¸€ä¸ªcommitèŠ‚ç‚¹ï¼Œä¿ç•™äº†è¦åˆå¹¶çš„åˆ†æ”¯ï¼ˆä¸‹å›¾ä¸ºbranch1ï¼‰çš„æäº¤è®°å½• git rebase &lt;å½“å‰åˆ†æ”¯å˜åŸºçš„åŸºç‚¹åˆ†æ”¯&gt; ï¼šç›¸å½“å°†å½“å‰åˆ†æ”¯ï¼ˆä¸‹å›¾ä¸ºbranch1ï¼‰çš„åˆ†æ”¯èŠ‚ç‚¹ï¼ˆ5,6ï¼‰ ä¾æ¬¡æäº¤åˆ°åŸºç‚¹åˆ†æ”¯ï¼ˆmasterï¼‰çš„4èŠ‚ç‚¹ä¹‹åï¼Œä¿ç•™äº†æ›´å¹²å‡€çš„å†å²è®°å½•ï¼Œæ²¡æœ‰ç”Ÿæˆè¡Œçš„commit èŠ‚ç‚¹","categories":[{"name":"æ ¡æ‹›ç¬”è®°","slug":"æ ¡æ‹›ç¬”è®°","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/"},{"name":"è®¡ç®—æœºåŸºç¡€","slug":"æ ¡æ‹›ç¬”è®°/è®¡ç®—æœºåŸºç¡€","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://hwh.zone/tags/Git/"},{"name":"æ ¡æ‹›","slug":"æ ¡æ‹›","permalink":"https://hwh.zone/tags/%E6%A0%A1%E6%8B%9B/"},{"name":"è®¡ç®—æœºåŸºç¡€","slug":"è®¡ç®—æœºåŸºç¡€","permalink":"https://hwh.zone/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"},{"name":"Linux","slug":"Linux","permalink":"https://hwh.zone/tags/Linux/"}]},{"title":"æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰_Java_JVM","slug":"æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰_Java_JVM","date":"2021-11-26T12:06:06.920Z","updated":"2021-12-03T03:56:42.625Z","comments":true,"path":"p/42516/","link":"","permalink":"https://hwh.zone/p/42516/","excerpt":"","text":"æˆ‘çš„æ ¡æ‹›è®°å½•ï¼šæ ¡æ‹›ç¬”è®°ï¼ˆé›¶ï¼‰_å†™åœ¨å‰é¢ ï¼Œä»¥ä¸‹æ˜¯æ ¡æ‹›ç¬”è®°æ€»ç›®å½•ã€‚ å¤‡æ³¨ ç®—æ³•èƒ½åŠ›ï¼ˆâ€œåˆ·é¢˜â€ï¼‰ è¿™éƒ¨åˆ†å°±æ˜¯è€—æ—¶é—´å¤šç»ƒä¹ ï¼ŒLeetcode-Top100 æ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚ è¡¥å……ç»ƒä¹ ï¼šcodeTop è®¡ç®—æœºåŸºç¡€(ä¸Š)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_Javaå…¥é—¨ C++åç«¯åç»­æ›´æ–° æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é¢å¯¹å¯¹è±¡ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é›†åˆ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_å¤šçº¿ç¨‹ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é” æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_JVM è®¡ç®—æœºåŸºç¡€(ä¸‹)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆäºŒï¼‰__è®¡ç®—æœºåŸºç¡€_Linux&amp;Git æ ¡æ‹›ç¬”è®°ï¼ˆä¸‰ï¼‰__è®¡ç®—æœºåŸºç¡€_è®¡ç®—æœºç½‘ç»œ æ ¡æ‹›ç¬”è®°ï¼ˆå››ï¼‰__è®¡ç®—æœºåŸºç¡€_æ“ä½œç³»ç»Ÿ æ ¡æ‹›ç¬”è®°ï¼ˆäº”ï¼‰__è®¡ç®—æœºåŸºç¡€_MySQL æ ¡æ‹›ç¬”è®°ï¼ˆå…­ï¼‰__è®¡ç®—æœºåŸºç¡€_Redis æ ¡æ‹›ç¬”è®°ï¼ˆä¸ƒï¼‰__è®¡ç®—æœºåŸºç¡€_æ•°æ®ç»“æ„ æ ¡æ‹›ç¬”è®°ï¼ˆå…«ï¼‰__è®¡ç®—æœºåŸºç¡€_åœºæ™¯&amp;æ™ºåŠ›é¢˜ æ ¡æ‹›ç¬”è®°ï¼ˆä¹ï¼‰__è®¡ç®—æœºåŸºç¡€_ç›¸å…³è¡¥å…… é¡¹ç›®&amp;å®ä¹  ä¸»è¦æ˜¯æ€ä¹ˆå‡†å¤‡é¡¹ç›®ï¼Œåç»­æ›´æ–° 1.6 JVMç›¸å…³ 1.6.1 å¸¸é—®é—®é¢˜ 1. ï¼ˆè¢«é—®è¿‡ï¼‰JVMå¯åŠ¨çš„åŸºæœ¬é…ç½®å‚æ•°æœ‰å“ªäº›ï¼Ÿï¼ˆæˆ–è€…è¯´è°ƒä¼˜å‚æ•°ï¼‰ ã€Œå †æ ˆå†…å­˜ç›¸å…³ã€ -Xmsï¼š è®¾ç½®åˆå§‹å †çš„å¤§å° -Xmxï¼š è®¾ç½®æœ€å¤§å †çš„å¤§å° -Xmn ï¼šè®¾ç½®å¹´è½»ä»£å¤§å°ï¼Œç›¸å½“äºåŒæ—¶é…ç½®-XX:NewSizeå’Œ-XX:MaxNewSizeä¸ºä¸€æ ·çš„å€¼ -Xssï¼š æ¯ä¸ªçº¿ç¨‹çš„å †æ ˆå¤§å° -XX:NewSize è®¾ç½®å¹´è½»ä»£å¤§å°(for 1.3/1.4) -XX:MaxNewSize å¹´è½»ä»£æœ€å¤§å€¼(for 1.3/1.4) -XX:NewRatio å¹´è½»ä»£ä¸å¹´è€ä»£çš„æ¯”å€¼(é™¤å»æŒä¹…ä»£) -XX:SurvivorRatio EdenåŒºä¸SurvivoråŒºçš„çš„æ¯”å€¼ -XX:PretenureSizeThreshold å½“åˆ›å»ºçš„å¯¹è±¡è¶…è¿‡æŒ‡å®šå¤§å°æ—¶ï¼Œç›´æ¥æŠŠå¯¹è±¡åˆ†é…åœ¨è€å¹´ä»£ã€‚ -XX:MaxTenuringThresholdè®¾å®šå¯¹è±¡åœ¨Survivorå¤åˆ¶çš„æœ€å¤§å¹´é¾„é˜ˆå€¼ï¼Œè¶…è¿‡é˜ˆå€¼è½¬ç§»åˆ°è€å¹´ä»£ ã€Œåƒåœ¾æ”¶é›†å™¨ç›¸å…³ã€ -XX:+UseParallelGCï¼šé€‰æ‹©åƒåœ¾æ”¶é›†å™¨ä¸ºå¹¶è¡Œæ”¶é›†å™¨ã€‚ -XX:ParallelGCThreads=20ï¼šé…ç½®å¹¶è¡Œæ”¶é›†å™¨çš„çº¿ç¨‹æ•° -XX:+UseConcMarkSweepGCï¼šè®¾ç½®å¹´è€ä»£ä¸ºå¹¶å‘æ”¶é›†ã€‚ -XX:CMSFullGCsBeforeCompaction=5 ç”±äºå¹¶å‘æ”¶é›†å™¨ä¸å¯¹å†…å­˜ç©ºé—´è¿›è¡Œå‹ç¼©ã€æ•´ç†ï¼Œæ‰€ä»¥è¿è¡Œä¸€æ®µæ—¶é—´ä»¥åä¼šäº§ç”Ÿâ€œç¢ç‰‡â€ï¼Œä½¿å¾—è¿è¡Œæ•ˆç‡é™ä½ã€‚æ­¤å€¼è®¾ç½®è¿è¡Œ5æ¬¡GCä»¥åå¯¹å†…å­˜ç©ºé—´è¿›è¡Œå‹ç¼©ã€æ•´ç†ã€‚ -XX:+UseCMSCompactAtFullCollectionï¼šæ‰“å¼€å¯¹å¹´è€ä»£çš„å‹ç¼©ã€‚å¯èƒ½ä¼šå½±å“æ€§èƒ½ï¼Œä½†æ˜¯å¯ä»¥æ¶ˆé™¤ç¢ç‰‡ ã€Œè¾…åŠ©ä¿¡æ¯ç›¸å…³ã€ -XX:+PrintGCDetails æ‰“å°GCè¯¦ç»†ä¿¡æ¯ -XX:+HeapDumpOnOutOfMemoryErrorè®©JVMåœ¨å‘ç”Ÿå†…å­˜æº¢å‡ºçš„æ—¶å€™è‡ªåŠ¨ç”Ÿæˆå†…å­˜å¿«ç…§,æ’æŸ¥é—®é¢˜ç”¨ -XX:+DisableExplicitGCç¦æ­¢ç³»ç»ŸSystem.gc()ï¼Œé˜²æ­¢æ‰‹åŠ¨è¯¯è§¦å‘FGCé€ æˆé—®é¢˜. -XX:+PrintTLAB æŸ¥çœ‹TLABç©ºé—´çš„ä½¿ç”¨æƒ…å†µ 2.è¯´è¯´å †å’Œæ ˆçš„åŒºåˆ«ï¼Ÿ åŠŸèƒ½ä¸åŒï¼šæ ˆå†…å­˜ç”¨æ¥å­˜å‚¨å±€éƒ¨å˜é‡å’Œæ–¹æ³•è°ƒç”¨ï¼Œè€Œå †å†…å­˜ç”¨æ¥å­˜å‚¨Javaä¸­çš„å¯¹è±¡ï¼› æ³¨ï¼šæ— è®ºæ˜¯æˆå‘˜å˜é‡ï¼Œå±€éƒ¨å˜é‡ï¼Œè¿˜æ˜¯ç±»å˜é‡ï¼Œå®ƒä»¬æŒ‡å‘çš„å¯¹è±¡éƒ½å­˜å‚¨åœ¨å †å†…å­˜ä¸­ã€‚ å…±äº«æ€§ä¸åŒï¼šæ ˆå†…å­˜æ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼› å †å†…å­˜æ˜¯æ‰€æœ‰çº¿ç¨‹å…±æœ‰çš„ï¼› å¼‚å¸¸é”™è¯¯ä¸åŒï¼šå¦‚æœæ ˆå†…å­˜æˆ–è€…å †å†…å­˜ä¸è¶³ï¼Œéƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ä½†ä¸åŒï¼› æ ˆç©ºé—´ä¸è¶³ï¼šjava.lang.StackOverFlowErrorã€‚ å †ç©ºé—´ä¸è¶³ï¼šjava.lang.OutOfMemoryErrorï¼› ç©ºé—´å¤§å°ï¼šæ ˆçš„ç©ºé—´å¤§å°è¿œè¿œå°äºå †çš„ã€‚ 3.ã€é‡ç‚¹ã€‘è¯·é—®JVMè¿è¡Œæ—¶å†…å­˜å¸ƒå±€åˆ†å¸ƒï¼Ÿ å“ªäº›æ˜¯çº¿ç¨‹å…±äº«çš„ï¼Ÿ ä»æ¦‚å¿µä¸Šå¤§è‡´åˆ†ä¸º 6 ä¸ªï¼ˆé€»è¾‘ï¼‰åŒºåŸŸï¼Œå‚è€ƒä¸‹å›¾ã€‚æ³¨ï¼šMethod Area ä¸­è¿˜æœ‰ä¸€ä¸ªå¸¸é‡æ± åŒºï¼Œå›¾ä¸­æœªæ˜ç¡®æ ‡å‡ºã€‚ æ€»çš„æ¥çœ‹ï¼ŒJVM æŠŠå†…å­˜åˆ’åˆ†ä¸ºâ€œæ ˆ(stack)â€ä¸â€œå †(heap)â€ä¸¤å¤§ç±» çº¿ç¨‹ç§æœ‰çš„ï¼š ç¨‹åºè®¡æ•°å™¨ï¼šå½“åŒæ—¶è¿›è¡Œçš„çº¿ç¨‹æ•°è¶…è¿‡CPUæ•°æˆ–å…¶å†…æ ¸æ•°æ—¶ï¼Œå°±è¦é€šè¿‡æ—¶é—´ç‰‡è½®è¯¢åˆ†æ´¾CPUçš„æ—¶é—´èµ„æºï¼Œä¸å…å‘ç”Ÿçº¿ç¨‹åˆ‡æ¢ã€‚è¿™æ—¶ï¼Œæ¯ä¸ªçº¿ç¨‹å°±éœ€è¦ä¸€ä¸ªå±äºè‡ªå·±çš„è®¡æ•°å™¨æ¥è®°å½•ä¸‹ä¸€æ¡è¦è¿è¡Œçš„æŒ‡ä»¤ï¼› è™šæ‹Ÿæœºæ ˆï¼š æ¯ä¸ªjavaæ–¹æ³•æ‰§è¡Œæ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ¡¢æ ˆæ¥å­˜å‚¨æ–¹æ³•çš„ï¼š å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥æ–¹æ³•ã€è¿”å›å€¼ã€è¿”å›åœ°å€ç­‰ä¿¡æ¯ï¼› æ ˆçš„å¤§å°å†³å®šäº†æ–¹æ³•è°ƒç”¨çš„å¯è¾¾æ·±åº¦ï¼ˆé€’å½’å¤šå°‘å±‚æ¬¡ï¼Œæˆ–åµŒå¥—è°ƒç”¨å¤šå°‘å±‚å…¶ä»–æ–¹æ³•ï¼‰ï¼Œâ€œæ ˆå¸§å‚è€ƒâ€ ï¼› æœ¬åœ°æ–¹æ³•æ ˆï¼š ä¸è™šæ‹Ÿæœºæ ˆä½œç”¨ç›¸ä¼¼ã€‚ä½†å®ƒä¸æ˜¯ä¸ºJavaæ–¹æ³•æœåŠ¡çš„ï¼Œè€Œæ˜¯è°ƒç”¨æ“ä½œç³»ç»ŸåŸç”Ÿæœ¬åœ°æ–¹æ³•æ—¶ï¼Œæ‰€éœ€è¦çš„å†…å­˜åŒºåŸŸã€‚ æœ¬åœ°æ–¹æ³•è¢«æ‰§è¡Œçš„æ—¶å€™ï¼Œåœ¨æœ¬åœ°æ–¹æ³•æ ˆä¹Ÿä¼šåˆ›å»ºâ¼€ä¸ªæ ˆå¸§ï¼Œç”¨äºå­˜æ”¾è¯¥æœ¬åœ°æ–¹æ³•çš„å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€å‡ºå£ä¿¡æ¯ã€‚ çº¿ç¨‹å…±äº«çš„ï¼š å †ï¼šGC åƒåœ¾å›æ”¶çš„ä¸»ç«™åœºï¼Œç”¨äºå­˜æ”¾ç±»çš„å®ä¾‹å¯¹è±¡åŠ æ•°ç»„å®ä¾‹ç­‰ï¼› æ–¹æ³•åŒºï¼š çº¿ç¨‹å…±äº«çš„ï¼Œç”¨äºå­˜æ”¾è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»çš„å…ƒæ•°æ®ä¿¡æ¯ï¼š å¦‚ å¸¸é‡ã€é™æ€å˜é‡å’Œ å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ï¼› è¿è¡Œæ—¶å¸¸é‡æ± ï¼šå­—ç¬¦ä¸²ï¼Œint -128~127 èŒƒå›´çš„å€¼ç­‰ï¼Œå®ƒæ˜¯ æ–¹æ³•åŒº ä¸­çš„ä¸€éƒ¨åˆ†ã€‚ 3.1 JVM å †ä¸­åˆæ€ä¹ˆåˆ†çš„ï¼Ÿä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåˆ’åˆ†ï¼Ÿä¸ºä»€ä¹ˆè¦å–æ¶ˆæ°¸ä¹…ä»£ç”¨å…ƒç©ºé—´ä»£æ›¿ï¼Ÿ å‚è€ƒï¼šhttps://zhuanlan.zhihu.com/p/111809384 å †åˆ’åˆ†ï¼šå †åˆè¢«åˆ’åˆ†ä¸ºï¼Œæ–°ç”Ÿä»£ï¼Œè€å¹´ä»£ã€‚æ–°ç”Ÿä»£åˆè¢«åˆ’åˆ†ä¸ºedenå’ŒsurvivoråŒºã€‚ ä¸ºä»€ä¹ˆåˆ’åˆ†æ–°ç”Ÿä»£ã€è€å¹´ä»£ï¼Ÿ å› ä¸ºæœ‰çš„å¯¹è±¡å¯¿å‘½é•¿ï¼Œæœ‰çš„å¯¹è±¡å¯¿å‘½çŸ­ã€‚åº”è¯¥å°†å¯¿å‘½é•¿çš„å¯¹è±¡æ”¾åœ¨ä¸€ä¸ªåŒºï¼Œå¯¿å‘½çŸ­çš„å¯¹è±¡æ”¾åœ¨ä¸€ä¸ªåŒºã€‚ä¸åŒçš„åŒºé‡‡ç”¨ä¸åŒçš„åƒåœ¾æ”¶é›†ç®—æ³•ã€‚å¯¿å‘½çŸ­çš„åŒºæ¸…ç†é¢‘æ¬¡é«˜ä¸€ç‚¹ï¼Œå¯¿å‘½é•¿çš„åŒºæ¸…ç†é¢‘æ¬¡ä½ä¸€ç‚¹ã€‚æé«˜æ•ˆç‡ã€‚ ä»£æ›¿ï¼š åœ¨java7ç‰ˆæœ¬å‰ï¼Œå †å’Œæ–¹æ³•åŒºè¿åœ¨äº†ä¸€èµ·ï¼Œä½†è¿™å¹¶ä¸èƒ½è¯´å †å’Œæ–¹æ³•åŒºæ˜¯ä¸€èµ·çš„ï¼Œå®ƒä»¬åœ¨é€»è¾‘ä¸Šä¾æ—§æ˜¯åˆ†å¼€çš„ã€‚ä½†åœ¨ç‰©ç†ä¸Šæ¥è¯´ï¼Œå®ƒä»¬åˆæ˜¯è¿ç»­çš„ä¸€å—å†…å­˜ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–¹æ³•åŒºå’Œå‰é¢è®²åˆ°çš„Edenå’Œè€å¹´ä»£æ˜¯è¿ç»­çš„ã€‚ æ°¸ä¹…ä»£çš„åƒåœ¾æ”¶é›†æ˜¯å’Œè€å¹´ä»£æ†ç»‘åœ¨ä¸€èµ·çš„ï¼Œå› æ­¤æ— è®ºè°æ»¡äº†ï¼Œéƒ½ä¼šè§¦å‘æ°¸ä¹…ä»£å’Œè€å¹´ä»£çš„åƒåœ¾æ”¶é›†ã€‚ åœ¨Java8ä¸­ï¼Œå…ƒç©ºé—´(Metaspace)ç™»ä¸Šèˆå°ï¼Œæ–¹æ³•åŒºå­˜åœ¨äºå…ƒç©ºé—´(Metaspace)ã€‚åŒæ—¶ï¼Œå…ƒç©ºé—´ä¸å†ä¸å †è¿ç»­ï¼Œè€Œä¸”æ˜¯å­˜åœ¨äºæœ¬åœ°å†…å­˜ï¼ˆNative memoryï¼‰ã€‚æœ¬åœ°å†…å­˜ï¼ˆNative memoryï¼‰ï¼Œä¹Ÿç§°ä¸ºC-Heapï¼Œæ˜¯ä¾›JVMè‡ªèº«è¿›ç¨‹ä½¿ç”¨çš„ã€‚å½“Java Heapç©ºé—´ä¸è¶³æ—¶ä¼šè§¦å‘GCï¼Œä½†Native memoryç©ºé—´ä¸å¤Ÿå´ä¸ä¼šè§¦å‘GCã€‚ å…ƒç©ºé—´å­˜åœ¨äºæœ¬åœ°å†…å­˜ï¼Œæ„å‘³ç€åªè¦æœ¬åœ°å†…å­˜è¶³å¤Ÿï¼Œå®ƒä¸ä¼šå‡ºç°åƒæ°¸ä¹…ä»£ä¸­â€œjava.lang.OutOfMemoryError: PermGen spaceâ€è¿™ç§é”™è¯¯ã€‚çœ‹ä¸Šå›¾ä¸­çš„æ–¹æ³•åŒºï¼Œæ˜¯ä¸æ˜¯â€œè†¨èƒ€â€äº†ã€‚ 3.2 ç¨‹åºè®¡æ•°å™¨å­˜å“ªäº›ä¸œè¥¿ï¼Ÿèƒ½ä¸ºç©ºå—ï¼Ÿ ç¨‹åºè®¡æ•°å™¨æ˜¯ç”¨äºå­˜æ”¾ä¸‹ä¸€æ¡æŒ‡ä»¤æ‰€åœ¨å•å…ƒçš„åœ°å€çš„åœ°æ–¹ã€‚ å¦‚æœæ­£åœ¨æ‰§è¡Œçš„æ˜¯Nativeæ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨å€¼ä¸ºç©ºï¼ˆUbdifinedï¼‰ã€‚ 4. ï¼ˆæ–°ï¼‰è¯´ä¸€ä¸‹Javaåˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹ï¼Ÿ ç±»åŠ è½½æ£€æŸ¥ï¼š è™šæ‹Ÿæœºé‡åˆ°â¼€æ¡ new æŒ‡ä»¤æ—¶ï¼Œâ¾¸å…ˆå°†å»æ£€æŸ¥è¿™ä¸ªæŒ‡ä»¤çš„å‚æ•°æ˜¯å¦èƒ½åœ¨å¸¸é‡æ± ä¸­å®šä½åˆ°è¿™ä¸ªç±»çš„ç¬¦å·å¼•ç”¨ï¼Œå¹¶ä¸”æ£€æŸ¥è¿™ä¸ªç¬¦å·å¼•ç”¨ä»£è¡¨çš„ç±»æ˜¯å¦å·²è¢«åŠ è½½è¿‡ã€è§£æå’Œåˆå§‹åŒ–è¿‡ã€‚å¦‚æœæ²¡æœ‰ï¼Œé‚£å¿…é¡»å…ˆæ‰§è¡Œç›¸åº”çš„ç±»åŠ è½½è¿‡ç¨‹ã€‚ åˆ†é…å†…å­˜ï¼š åœ¨ç±»åŠ è½½æ£€æŸ¥é€šè¿‡åï¼Œæ¥ä¸‹æ¥è™šæ‹Ÿæœºå°†ä¸ºæ–°â½£å¯¹è±¡åˆ†é…å†…å­˜ã€‚å¯¹è±¡æ‰€éœ€çš„å†…å­˜å¤§å°åœ¨ç±»åŠ è½½å®Œæˆåä¾¿å¯ç¡®å®šï¼Œä¸ºå¯¹è±¡åˆ†é…ç©ºé—´çš„ä»»åŠ¡ç­‰åŒäºæŠŠâ¼€å—ç¡®å®šå¤§å°çš„å†…å­˜ä» Java å †ä¸­åˆ’åˆ†å‡ºæ¥ã€‚ ï¼ˆé‡è¦ï¼‰åˆ†é…æ–¹å¼æœ‰ â€œæŒ‡é’ˆç¢°æ’â€ å’Œ â€œç©ºé—²åˆ—è¡¨â€ ä¸¤ç§ï¼Œé€‰æ‹©é‚£ç§åˆ†é…æ–¹å¼ç”± Java å †æ˜¯å¦è§„æ•´å†³å®šï¼Œè€ŒJavaå †æ˜¯å¦è§„æ•´â¼œç”±æ‰€é‡‡ç”¨çš„åƒåœ¾æ”¶é›†å™¨æ˜¯å¦å¸¦æœ‰å‹ç¼©æ•´ç†åŠŸèƒ½å†³å®šã€‚ åˆå§‹åŒ–å¯¹è±¡å­—æ®µé›¶å€¼ã€‚ å†…å­˜åˆ†é…å®Œæˆåï¼Œè¿›è¡Œå¯¹è±¡åˆå§‹åŒ–æ“ä½œã€‚ ä¾‹å¦‚ç»™å¯¹è±¡ä¸­ï¼ˆåŒºåˆ†ç±»åŠ è½½è¿‡ç¨‹ï¼Œåˆå§‹åŒ–ç±»å˜é‡ï¼‰æ‰€æœ‰çš„åŸºæœ¬æ•°æ®å˜é‡èµ‹ä¸Šåˆå§‹åŒ–å€¼ï¼Œ å½“æˆ‘ä»¬æ²¡æœ‰å¯¹å®ƒä»¬è¿›è¡Œèµ‹å€¼æ“ä½œæ—¶å°±å¯ä»¥ä½¿ç”¨å¯¹è±¡äº†ã€‚ è®¾ç½®å¯¹è±¡å¤´ï¼š åˆå§‹åŒ–é›¶å€¼å®Œæˆä¹‹åï¼Œè™šæ‹Ÿæœºè¦å¯¹å¯¹è±¡è¿›è¡Œå¿…è¦çš„è®¾ç½®ï¼Œä¾‹å¦‚è¿™ä¸ªå¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ã€å¦‚ä½•æ‰èƒ½æ‰¾åˆ°ç±»çš„å…ƒæ•°æ®ä¿¡æ¯ã€å¯¹è±¡çš„å“ˆå¸Œå—ã€å¯¹è±¡çš„ GC åˆ†ä»£å¹´é¾„ç­‰ä¿¡æ¯ã€‚ è¿™äº›ä¿¡æ¯å­˜æ”¾åœ¨å¯¹è±¡å¤´ä¸­ã€‚ å¦å¤–ï¼Œæ ¹æ®è™šæ‹Ÿæœºå½“å‰è¿è¡ŒçŠ¶æ€çš„ä¸åŒï¼Œå¦‚æ˜¯å¦å¯ç”¨åå‘é”ç­‰ï¼Œå¯¹è±¡å¤´ä¼šæœ‰ä¸åŒçš„è®¾ç½®æ–¹å¼ã€‚ æ‰§è¡Œinit() &amp; æ„é€ å‡½æ•°ã€‚ç„¶åæ‰§è¡Œå¯¹è±¡å†…éƒ¨ç”Ÿæˆçš„initæ–¹æ³•ï¼Œç„¶åæ‰§è¡Œæ„é€ å™¨æ–¹æ³•ï¼ˆç¨‹åºå‘˜è®¾ç½®çš„ï¼‰ã€‚ å†…å­˜åœ°å€èµ‹ç»™å¼•ç”¨ï¼š åœ¨è™šæ‹Ÿæœºä¼šå°†åˆšåˆ›å»ºå¥½å¯¹è±¡çš„å†…å­˜åœ°å€èµ‹ç»™å¼•ç”¨å¯¹è±¡ã€‚å®Œæˆæ­¤æ“ä½œåï¼Œä¾¿å¯ä»¥åœ¨ç¨‹åºä¸­é€šè¿‡å¼•ç”¨è®¿é—®å¯¹è±¡çš„å®ä¾‹æ•°æ®ã€‚ 4.1 ä»€ä¹ˆæ˜¯æŒ‡é’ˆç¢°æ’ï¼Ÿç©ºé—²åˆ—è¡¨ï¼ŸTLAB? ä¸‰ç§è™šæ‹Ÿæœºåˆ’åˆ†å †å†…å­˜åŒºåŸŸçš„æ–¹æ³•ï¼ŒTLABä¹Ÿå¯ç”¨æ¥ç»™å †å†…å­˜åˆ†é…ç©ºé—´ã€‚ æŒ‡é’ˆç¢°æ’ ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒJVMçš„å¯¹è±¡éƒ½æ”¾åœ¨å †å†…å­˜ä¸­ï¼ˆå‘ç”Ÿé€ƒé€¸åˆ†æé™¤å¤–ï¼‰ã€‚å½“ç±»åŠ è½½æ£€æŸ¥é€šè¿‡åï¼ŒJavaè™šæ‹Ÿæœºå¼€å§‹ä¸ºæ–°ç”Ÿå¯¹è±¡åˆ†é…å†…å­˜ã€‚ å¦‚æœJavaå †ä¸­å†…å­˜æ˜¯ç»å¯¹è§„æ•´çš„ï¼Œæ‰€æœ‰è¢«ä½¿ç”¨è¿‡çš„çš„å†…å­˜éƒ½è¢«æ”¾åˆ°ä¸€è¾¹ï¼Œç©ºé—²çš„å†…å­˜æ”¾åˆ°å¦å¤–ä¸€è¾¹ï¼Œä¸­é—´æ”¾ç€ä¸€ä¸ªæŒ‡é’ˆä½œä¸ºåˆ†ç•Œç‚¹çš„æŒ‡ç¤ºå™¨ï¼Œæ‰€åˆ†é…å†…å­˜ä»…ä»…æ˜¯æŠŠé‚£ä¸ªæŒ‡é’ˆå‘ç©ºé—²ç©ºé—´æ–¹å‘æŒªåŠ¨ä¸€æ®µä¸å¯¹è±¡å¤§å°ç›¸ç­‰çš„å®ä¾‹ï¼Œè¿™ç§åˆ†é…æ–¹å¼å°±æ˜¯æŒ‡é’ˆç¢°æ’ã€‚ ç©ºé—²åˆ—è¡¨ å¦‚æœJavaå †å†…å­˜ä¸­çš„å†…å­˜å¹¶ä¸æ˜¯è§„æ•´çš„ï¼Œå·²è¢«ä½¿ç”¨çš„å†…å­˜å’Œç©ºé—²çš„å†…å­˜ç›¸äº’äº¤é”™åœ¨ä¸€èµ·ï¼Œä¸å¯ä»¥è¿›è¡ŒæŒ‡é’ˆç¢°æ’ã€‚ è™šæ‹Ÿæœºå¿…é¡»ç»´æŠ¤ä¸€ä¸ªåˆ—è¡¨ï¼Œè®°å½•å“ªäº›å†…å­˜æ˜¯å¯ç”¨çš„ï¼Œåœ¨åˆ†é…çš„æ—¶å€™ä»åˆ—è¡¨æ‰¾åˆ°ä¸€å—å¤§çš„ç©ºé—´åˆ†é…ç»™å¯¹è±¡å®ä¾‹ï¼Œå¹¶æ›´æ–°åˆ—è¡¨ä¸Šçš„è®°å½•ï¼Œè¿™ç§åˆ†é…æ–¹å¼å°±æ˜¯ç©ºé—²åˆ—è¡¨ã€‚ TLAB TLAB æ˜¯è™šæ‹Ÿæœºåœ¨å†…å­˜çš„eden åŒºåˆ’åˆ†å‡ºæ¥çš„ä¸€å—ä¸“ç”¨ç©ºé—´ï¼Œæ˜¯çº¿ç¨‹ä¸“å±çš„ã€‚ åœ¨å¯ç”¨TLAB çš„æƒ…å†µä¸‹ï¼Œå½“çº¿ç¨‹è¢«åˆ›å»ºæ—¶ï¼Œè™šæ‹Ÿæœºä¼šä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…ä¸€å—TLAB ç©ºé—´ï¼Œåªç»™å½“å‰çº¿ç¨‹ä½¿ç”¨ï¼Œè¿™æ ·æ¯ä¸ªçº¿ç¨‹éƒ½å•ç‹¬æ‹¥æœ‰ä¸€ä¸ªç©ºé—´ï¼Œå¦‚æœéœ€è¦åˆ†é…å†…å­˜ï¼Œå°±åœ¨è‡ªå·±çš„ç©ºé—´ä¸Šåˆ†é…ï¼Œè¿™æ ·å°±ä¸å­˜åœ¨ç«äº‰çš„æƒ…å†µï¼Œå¯ä»¥å¤§å¤§æé«˜åˆ†é…æ•ˆç‡ã€‚ è™šæ‹Ÿæœºé€šè¿‡ -XX:UseTLAB è®¾å®šå®ƒçš„ã€‚ 4.2 JVMå¦‚ä½•ä¿è¯å¯¹è±¡åˆ†é…çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Ÿ å› ä¸ºåœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œåˆ›å»ºå¯¹è±¡æ˜¯å¾ˆé¢‘ç¹çš„äº‹æƒ…ï¼Œä½œä¸ºè™šæ‹Ÿæœºæ¥è¯´ï¼Œå¿…é¡»è¦ä¿è¯çº¿ç¨‹æ˜¯å®‰å…¨çš„ï¼Œé€šå¸¸æ¥è®²ï¼Œè™šæ‹Ÿæœºé‡‡ç”¨ä¸¤ç§æ–¹å¼æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ï¼š TLABï¼š ä¸ºæ¯â¼€ä¸ªçº¿ç¨‹é¢„å…ˆåœ¨EdenåŒºåˆ†é…â¼€å—â¼‰å†…å­˜TLABï¼ŒJVMåœ¨ç»™çº¿ç¨‹ä¸­çš„å¯¹è±¡åˆ†é…å†…å­˜æ—¶ï¼Œâ¾¸å…ˆåœ¨TLABåˆ†é…ï¼Œå½“å¯¹è±¡å¤§äºTLABä¸­çš„å‰©ä½™å†…å­˜æˆ–TLABçš„å†…å­˜å·²ç”¨å°½æ—¶ï¼Œå†é‡‡ç”¨çš„CASè¿›è¡Œå†…å­˜åˆ†é…ã€‚ CAS+å¤±è´¥é‡è¯•ï¼š CAS æ˜¯ä¹è§‚é”çš„â¼€ç§å®ç°æ–¹å¼ã€‚æ‰€è°“ä¹è§‚é”å°±æ˜¯ï¼Œæ¯æ¬¡ä¸åŠ é”è€Œæ˜¯å‡è®¾æ²¡æœ‰å†²çªè€Œå»å®ŒæˆæŸé¡¹æ“ä½œï¼Œå¦‚æœå› ä¸ºå†²çªå¤±è´¥å°±é‡è¯•ï¼Œç›´åˆ°æˆåŠŸä¸ºâ½Œã€‚è™šæ‹Ÿæœºé‡‡ç”¨ CAS é…ä¸Šå¤±è´¥é‡è¯•çš„æ–¹å¼ä¿è¯æ›´æ–°æ“ä½œçš„åŸå­æ€§ã€‚ 5.æè¿°ä¸€ä¸‹å¯¹è±¡åˆ†é…ã€åŸåˆ™ã€‘ï¼Ÿï¼ˆåŒºåˆ†å‰é¢newå¯¹è±¡ã€è¿‡ç¨‹ã€‘ï¼‰ JVM ä¸­çš„å †å¯åˆ’åˆ†ä¸ºä¸¤å¤§éƒ¨åˆ†ï¼Œæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼Œå¤§å°æ¯”ä¾‹ä¸º1:2ï¼š æ–°ç”Ÿä»£åˆ†ä¸º Eden åŒºå’Œ Survivor åŒºï¼Œ Survivor å¹¸å­˜è€…åŒºåˆåˆ†ä¸ºå¤§å°ç›¸ç­‰çš„ä¸¤å— from å’Œ to åŒº å…·ä½“å›æ”¶è¿‡ç¨‹ï¼š å¯¹è±¡çš„æ­£å¸¸æµç¨‹ï¼šEden åŒº -&gt; Survivor åŒº -&gt; è€å¹´ä»£ã€‚ æ–°çš„å¯¹è±¡ä¼˜å…ˆåœ¨ Eden åŒºåˆ†é…ï¼ˆå¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´åŒºï¼Œé¿å…åœ¨EdenåŒºåŠä¸¤ä¸ªSurvivoråŒºä¹‹é—´å‘ç”Ÿå¤§é‡çš„å†…å­˜å¤åˆ¶ï¼‰ ,å½“ Eden åŒºæ²¡æœ‰è¶³å¤Ÿç©ºé—´æ—¶ï¼Œä¼šå‘èµ·ä¸€æ¬¡Minor GCï¼› Minor GCé‡‡ç”¨å¤åˆ¶å›æ”¶ç®—æ³•çš„æ”¹è¿›ç‰ˆæœ¬å›æ”¶Edenä¸­å¯¹è±¡ï¼š å…ˆå°†Edenå­˜æ´»å¯¹è±¡è¿ç§»åˆ° to åŒºï¼Œç„¶åæ¸…ç©ºEden æœ€åäº¤æ¢toå’ŒfromåŒºåŸŸæ ‡ç­¾ æ¯ç»è¿‡ä¸€æ¬¡Minor GC ï¼ˆåœ¨äº¤æ¢åŒºï¼‰åå¯¹è±¡å¹´é¾„åŠ 1ï¼Œå¯¹è±¡å¹´é¾„è¾¾åˆ°15æ¬¡åå°†ä¼šæ™‹å‡åˆ°è€å¹´ä»£ï¼› å¯¹è±¡æå‰æ™‹å‡åˆ°è€å¹´ä»£ï¼ŒåŠ¨æ€å¹´é¾„åˆ¤å®šï¼šå¦‚æœåœ¨ Survivor åŒºä¸­ç›¸åŒå¹´é¾„æ‰€æœ‰å¯¹è±¡å¤§å°æ€»å’Œå¤§äº Survivor åŒºå¤§å°çš„ä¸€åŠï¼Œ å¹´é¾„å¤§äºæˆ–ç­‰äºè¯¥å¹´é¾„çš„å¯¹è±¡å°±å¯ä»¥ç›´æ¥è¿›å…¥è€å¹´ä»£ï¼› è€å¹´ä»£ç©ºé—´ä¸å¤Ÿæ—¶è¿›è¡ŒFull GCã€‚ 5.1 å¯¹è±¡ä¸€å®šåˆ†é…åˆ°å †ä¸Šå—ï¼Ÿ å‚è€ƒï¼šé¢è¯•å®˜ï¼šæ˜¯ä¸æ˜¯æ‰€æœ‰çš„å¯¹è±¡å’Œæ•°ç»„éƒ½ä¼šåœ¨å †å†…å­˜åˆ†é…ç©ºé—´ å°ä¼™ï¼Œæ¥ç»™æˆ‘è®²ä¸€ä¸‹æ˜¯ä¸æ˜¯æ‰€æœ‰çš„å¯¹è±¡å’Œæ•°ç»„éƒ½ä¼šåœ¨å †å†…å­˜åˆ†é…ç©ºé—´ï¼Ÿ å¹¶ä¸æ˜¯ï¼Œè¿™æ¶‰åŠåˆ°å¯¹è±¡é€ƒé€¸ã€‚è¯·çœ‹ä¸‹é¢çš„ä»£ç ï¼š StringBufferå¯¹è±¡ï¼Œæœ€ç»ˆä¼šè¢«returnï¼Œä¹Ÿå°±æ˜¯ä¼šè¢«è¯¥æ–¹æ³•ä¹‹å¤–çš„ç»™åˆ©ç”¨ã€‚ å‘ç”Ÿäº†å¯¹è±¡é€ƒé€¸ã€‚ åœ¨Javaè™šæ‹Ÿæœºä¸­ï¼Œå¯¹è±¡æ˜¯åœ¨Javaå †ä¸­åˆ†é…å†…å­˜çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªæ™®éçš„å¸¸è¯†ã€‚ ä½†æ˜¯ï¼Œæœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œé‚£å°±æ˜¯å¦‚æœç»è¿‡é€ƒé€¸åˆ†æåå‘ç°ï¼Œä¸€ä¸ªå¯¹è±¡å¹¶æ²¡æœ‰é€ƒé€¸å‡ºæ–¹æ³•çš„è¯ï¼Œé‚£ä¹ˆå°±å¯èƒ½è¢«ä¼˜åŒ–æˆæ ˆä¸Šåˆ†é…ã€‚ 6.å¯¹è±¡çš„è®¿é—®å®šä½æœ‰å“ªä¸¤ç§æ–¹å¼? å»ºâ½´å¯¹è±¡å°±æ˜¯ä¸ºäº†ä½¿ç”¨å¯¹è±¡ï¼Œæˆ‘ä»¬çš„Javaç¨‹åºé€šè¿‡æ ˆä¸Šçš„ reference æ•°æ®æ¥æ“ä½œå †ä¸Šçš„å…·ä½“å¯¹è±¡ã€‚å¯¹è±¡çš„è®¿é—®æ–¹å¼æœ‰è™šæ‹Ÿæœºå®ç°è€Œå®šï¼Œâ½¬å‰ä¸»æµçš„è®¿é—®æ–¹å¼æœ‰ï¼šâ‘ ä½¿ç”¨å¥æŸ„å’Œ â‘¡ç›´æ¥æŒ‡é’ˆä¸¤ç§ã€‚ å¥æŸ„ï¼š å¦‚æœä½¿ç”¨å¥æŸ„çš„è¯ï¼Œé‚£ä¹ˆJavaå †ä¸­å°†ä¼šåˆ’åˆ†å‡ºâ¼€å—å†…å­˜æ¥ä½œä¸ºå¥æŸ„æ± ï¼Œreference ä¸­å­˜å‚¨çš„å°±æ˜¯å¯¹è±¡çš„å¥æŸ„åœ°å€ï¼Œè€Œå¥æŸ„ä¸­åŒ…å«äº†å¯¹è±¡å®ä¾‹æ•°æ®ä¸ç±»å‹æ•°æ®ï¼ˆå­˜æ”¾åœ¨æ–¹æ³•åŒºï¼‰å„â¾ƒçš„å…·ä½“åœ°å€ä¿¡æ¯ï¼› ä½¿ç”¨å¥æŸ„æ¥è®¿é—®çš„æœ€å¤§å¥½å¤„æ˜¯ reference ä¸­å­˜å‚¨çš„æ˜¯ç¨³å®šçš„å¥æŸ„åœ°å€ï¼Œåœ¨å¯¹è±¡è¢«ç§»åŠ¨æ—¶åªä¼šæ”¹å˜å¥æŸ„ä¸­çš„å®ä¾‹æ•°æ®æŒ‡é’ˆï¼Œè€Œ reference æœ¬èº«ä¸éœ€è¦ä¿®æ”¹ã€‚ ç›´æ¥æŒ‡é’ˆï¼š å¦‚æœä½¿ç”¨ç›´æ¥æŒ‡é’ˆè®¿é—®ï¼Œé‚£ä¹ˆ Java å †å¯¹è±¡çš„å¸ƒå±€ä¸­å°±å¿…é¡»è€ƒè™‘å¦‚ä½•æ”¾ç½®è®¿é—®ç±»å‹æ•°æ®çš„ç›¸å…³ä¿¡æ¯ï¼Œè€Œreference ä¸­å­˜å‚¨çš„ç›´æ¥å°±æ˜¯å¯¹è±¡çš„åœ°å€ã€‚ ä½¿ç”¨ç›´æ¥æŒ‡é’ˆè®¿é—®æ–¹å¼æœ€å¤§çš„å¥½å¤„å°±æ˜¯é€Ÿåº¦å¿«ï¼Œå®ƒèŠ‚çœäº†â¼€æ¬¡æŒ‡é’ˆå®šä½çš„æ—¶é—´å¼€é”€ã€‚ 7.å¦‚ä½•åˆ¤æ–­å¯¹è±¡æ˜¯å¦éœ€è¦å›æ”¶ï¼ˆæ­»äº¡ï¼‰ï¼Ÿ å¯è¾¾æ€§åˆ†æï¼šæ ¹æ®å¼•ç”¨çš„å…³ç³»æ„é€ å¼•ç”¨é“¾ï¼ˆæœ‰å‘å›¾ï¼‰ï¼Œåœ¨å›¾ä¸­ä¸å¯è¾¾çš„å¯¹è±¡å°±æ˜¯è¦è¢«å›æ”¶çš„ï¼› å¼•ç”¨è®¡æ•°ï¼šæœ‰åœ°æ–¹å¼•ç”¨è¯¥å¯¹è±¡ï¼Œè®¡æ•°å™¨++ï¼Œå¼•ç”¨å¤±æ•ˆï¼Œè®¡æ•°å™¨â€“ï¼Œæœ‰å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚ 8. å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¸¸é‡æ˜¯åºŸå¼ƒå˜é‡ï¼Ÿå¦‚ä½•åˆ¤æ–­ä¸€ä¸ªç±»æ˜¯æ— ç”¨ç±»ï¼Ÿ åˆ¤æ–­å¸¸é‡æ˜¯åºŸå¼ƒå˜é‡ è¿è¡Œæ—¶å¸¸é‡æ± ä¸»è¦å›æ”¶çš„æ˜¯åºŸå¼ƒçš„å¸¸é‡ã€‚ å‡å¦‚åœ¨å¸¸é‡æ± ä¸­å­˜åœ¨å­—ç¬¦ä¸² â€œabcâ€ï¼Œå¦‚æœå½“å‰æ²¡æœ‰ä»»ä½•Stringå¯¹è±¡å¼•ç”¨è¯¥å­—ç¬¦ä¸²å¸¸é‡çš„è¯ï¼Œå°±è¯´æ˜å¸¸é‡&quot;abc&quot; å°±æ˜¯åºŸå¼ƒå¸¸é‡ï¼Œå¦‚æœè¿™æ—¶å‘â½£å†…å­˜å›æ”¶çš„è¯è€Œä¸”æœ‰å¿…è¦çš„è¯ï¼Œâ€œabcâ€ å°±ä¼šè¢«ç³»ç»Ÿæ¸…ç†å‡ºå¸¸é‡æ± ã€‚ åˆ¤æ–­ç±»æ˜¯æ— ç”¨ç±»ï¼Ÿ è™šæ‹Ÿæœºå¯ä»¥å¯¹æ»¡è¶³ä¸‹é¢3ä¸ªæ¡ä»¶çš„æ— ç”¨ç±»è¿›è¡Œå›æ”¶ï¼Œè¿™â¾¥è¯´çš„ä»…ä»…æ˜¯â€œå¯ä»¥â€ï¼Œè€Œå¹¶ä¸æ˜¯å’Œå¯¹è±¡â¼€æ ·ä¸ä½¿ç”¨äº†å°±ä¼šå¿…ç„¶è¢«å›æ”¶ã€‚ è¯¥ç±»æ‰€æœ‰çš„å®ä¾‹éƒ½å·²ç»è¢«å›æ”¶ï¼Œä¹Ÿå°±æ˜¯ Java å †ä¸­ä¸å­˜åœ¨è¯¥ç±»çš„ä»»ä½•å®ä¾‹ï¼› åŠ è½½è¯¥ç±»çš„ ClassLoader å·²ç»è¢«å›æ”¶ï¼› è¯¥ç±»å¯¹åº”çš„ java.lang.Class å¯¹è±¡æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹è¢«å¼•ç”¨ï¼Œæ— æ³•åœ¨ä»»ä½•åœ°æ–¹é€šè¿‡åå°„è®¿é—®è¯¥ç±»çš„æ–¹æ³•ã€‚ 1.6.1 GCç›¸å…³ ä¸é”™çš„GCä»‹ç»æ–‡ç« ï¼šä¸€æ–‡çœ‹æ‡‚ JVM å†…å­˜å¸ƒå±€åŠ GC åŸç† 1.è¯·ä»‹ç»GCåŸºæœ¬åŸç†ï¼Ÿæœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼ŸGCå¯ä»¥é©¬ä¸Šå›æ”¶å†…å­˜å—ï¼Ÿå¦‚ä½•ä¸»åŠ¨è®©è™šæ‹Ÿæœºå›æ”¶ï¼Ÿ å½“ç¨‹åºå‘˜åˆ›å»ºå¯¹è±¡æ—¶ï¼ŒGCå°±å¼€å§‹ç›‘æ§è¿™ä¸ªå¯¹è±¡çš„åœ°å€ã€å¤§å°åŠä½¿ç”¨æƒ…å†µ ï¼Œå½“GCç¡®å®šä¸€äº›å¯¹è±¡ä¸ºâ€ä¸å¯è¾¾â€æ—¶ï¼ŒGCå°±æœ‰è´£ä»»å›æ”¶è¿™äº›å†…å­˜ç©ºé—´ ï¼š åŸºæœ¬åŸç†ï¼š GCé‡‡ç”¨æœ‰å‘å›¾çš„æ–¹å¼è®°å½•å’Œç®¡ç†å †(heap)ä¸­çš„æ‰€æœ‰å¯¹è±¡ ï¼Œå¹¶ç¡®å®šå¯¹è±¡æ˜¯å¦â€œå¯è¾¾â€ GCä¼˜ç‚¹ï¼šï¼ˆ1ï¼‰ä½¿å¾—ç¨‹åºå‘˜ä¸ç”¨è€ƒè™‘å†…å­˜ç®¡ç† ï¼ˆ2ï¼‰Javaä¸­çš„å¯¹è±¡ä¸å†æœ‰&quot;ä½œç”¨åŸŸ&quot;çš„æ¦‚å¿µï¼Œåªæœ‰å¯¹è±¡çš„å¼•ç”¨æ‰æœ‰&quot;ä½œç”¨åŸŸ&quot; ï¼ˆ3ï¼‰æœ‰æ•ˆé˜²æ­¢å†…å­˜æ³„æ¼ é©¬ä¸Šå›æ”¶ï¼š ç¨‹åºå‘˜ä¸èƒ½å®æ—¶çš„è°ƒç”¨åƒåœ¾å›æ”¶å™¨å¯¹æŸä¸ªå¯¹è±¡æˆ–æ‰€æœ‰å¯¹è±¡è¿›è¡Œåƒåœ¾å›æ”¶ã€‚ ä¸»åŠ¨å›æ”¶ï¼š æ‰‹åŠ¨æ‰§è¡ŒSystem.gc() ï¼Œä½†æ˜¯Javaè¯­è¨€è§„èŒƒ å¹¶ä¸ä¿è¯ GCä¸€å®šä¼šæ‰§è¡Œã€‚ 1.1 æœ¬åœ°javaç¨‹åºé»˜è®¤å¯åŠ¨çš„æ˜¯ä»€ä¹ˆåƒåœ¾å›æ”¶å™¨ï¼Ÿ cmdæ‰§è¡Œå‘½ä»¤ï¼š 1java -XX:+PrintCommandLineFlags -version è¾“å‡ºï¼š-XXï¼šUseParallelGCã€‚ 2.ä»€ä¹ˆæ˜¯GC Rootï¼Ÿå¯ä»¥ä½œä¸ºGC Rootçš„å¯¹è±¡ï¼Ÿ GC Root ï¼š åˆ¤æ–­å¯¹è±¡æ˜¯é€šè¿‡å¯è¾¾æ€§åˆ†æï¼Œæ‰€ä»¥æ‰€æœ‰çš„å¯è¾¾æ€§ç®—æ³•éƒ½ä¼šæœ‰èµ·ç‚¹ ï¼Œè¿™å°±æ˜¯ GC Rootã€‚ ç‰¹ç‚¹ï¼šå½“å‰æ—¶åˆ»å­˜æ´»çš„å¯¹è±¡ï¼ é€šè¿‡GC Root æ‰¾å‡ºæ‰€æœ‰æ´»çš„å¯¹è±¡ï¼Œé‚£ä¹ˆå‰©ä¸‹æ‰€æœ‰çš„æ²¡æœ‰æ ‡è®°çš„å¯¹è±¡å°±æ˜¯éœ€è¦å›æ”¶çš„å¯¹è±¡ã€‚ GC Rootå¯¹è±¡ï¼š ï¼ˆ1ï¼‰è™šæ‹Ÿæœºæ ˆä¸­å¼•ç”¨çš„å¯¹è±¡ï¼›ï¼ˆ2ï¼‰æ–¹æ³•åŒºä¸­çš„é™æ€å˜é‡ã€å¸¸é‡å¯¹è±¡ï¼›ï¼ˆ3ï¼‰æœ¬åœ°æ–¹æ³•å¼•ç”¨çš„å¯¹è±¡ï¼›ï¼ˆ4ï¼‰è¢«synchronizedä¿®é¥°çš„å¯¹è±¡ç­‰ã€‚ 3.å“ªäº›å†…å­˜åŒºåŸŸéœ€è¦GC? ï¼ˆæ— éœ€ï¼‰çº¿ç¨‹ç‹¬äº«åŒºåŸŸï¼šPC Regiesterã€JVM Stackã€Native Method Stackï¼Œå…¶ç”Ÿå‘½å‘¨æœŸéƒ½ä¸çº¿ç¨‹ç›¸åŒï¼ˆå³ï¼šä¸çº¿ç¨‹å…±ç”Ÿæ­»ï¼‰ï¼Œæ‰€ä»¥æ— éœ€ GC; ï¼ˆéœ€ï¼‰çº¿ç¨‹å…±äº«çš„ Heap åŒºã€Method Area åˆ™æ˜¯ GC å…³æ³¨çš„é‡ç‚¹å¯¹è±¡ã€‚ 4.ä»€ä¹ˆæ—¶å€™ä¼šè§¦å‘Full GCï¼Ÿ è°ƒç”¨ System.gc() ï¼› è€å¹´ä»£ç©ºé—´ä¸è¶³ï¼› é€šè¿‡Minor GCåè¿›å…¥è€å¹´ä»£çš„å¹³å‡å¤§å°å¤§äºè€å¹´ä»£çš„å¯ç”¨å†…å­˜ï¼› å¦‚æœå‘ç°ç»Ÿè®¡ä¹‹å‰Minor GCçš„å¹³å‡æ™‹å‡å¤§å°æ¯”ç›®å‰old genå‰©ä½™çš„ç©ºé—´å¤§ï¼Œåˆ™ä¸ä¼šè§¦å‘Minor GCè€Œæ˜¯è½¬ä¸ºè§¦å‘full GCã€‚ æ–¹æ³•åŒºç©ºé—´ä¸è¶³ã€‚ JVMè§„èŒƒä¸­è¿è¡Œæ—¶æ•°æ®åŒºåŸŸä¸­çš„æ–¹æ³•åŒºï¼Œåœ¨HotSpotè™šæ‹Ÿæœºä¸­åˆè¢«ä¹ æƒ¯ç§°ä¸ºæ°¸ç”Ÿä»£æˆ–è€…æ°¸ç”ŸåŒºï¼ŒPermanet Generationä¸­å­˜æ”¾çš„ä¸ºä¸€äº›classçš„ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ç­‰æ•°æ®ï¼Œå½“ç³»ç»Ÿä¸­è¦åŠ è½½çš„ç±»ã€åå°„çš„ç±»å’Œè°ƒç”¨çš„æ–¹æ³•è¾ƒå¤šæ—¶ï¼ŒPermanet Generationå¯èƒ½ä¼šè¢«å æ»¡ï¼Œåœ¨æœªé…ç½®ä¸ºé‡‡ç”¨CMS GCçš„æƒ…å†µä¸‹ä¹Ÿä¼šæ‰§è¡ŒFull GCã€‚å¦‚æœç»è¿‡Full GCä»ç„¶å›æ”¶ä¸äº†ï¼Œé‚£ä¹ˆJVMä¼šæŠ›å‡ºå¦‚ä¸‹é”™è¯¯ä¿¡æ¯ï¼šjava.lang.OutOfMemoryError: PermGen space ã€‚ ä¸ºé¿å…Perm Genå æ»¡é€ æˆFull GCç°è±¡ï¼Œå¯é‡‡ç”¨çš„æ–¹æ³•ä¸ºå¢å¤§Perm Genç©ºé—´æˆ–è½¬ä¸ºä½¿ç”¨CMS GCã€‚ 5.ä»€ä¹ˆæ—¶å€™è§¦å‘ Minor GC ? ä»€ä¹ˆåŸå› ä¼šå¯¼è‡´minor gcè¿è¡Œé¢‘ç¹ï¼ŸåŒæ ·çš„ï¼Œä»€ä¹ˆåŸå› åˆä¼šå¯¼è‡´minor gcè¿è¡Œå¾ˆæ…¢ï¼Ÿ ä»€ä¹ˆæ—¶å€™è§¦å‘Minor GC ? å½“EdenåŒºä¸è¶³æ—¶å°±ä¼šè§¦å‘ Minor GC ã€‚ minor gcè¿è¡Œé¢‘ç¹ äº§ç”Ÿäº†å¤ªå¤šæœç”Ÿå¤•ç­çš„å¯¹è±¡å¯¼è‡´éœ€è¦é¢‘ç¹minor gc æ–°ç”Ÿä»£ç©ºé—´è®¾ç½®å¤ªå° minor gcè¿è¡Œå¾ˆæ…¢ æ–°ç”Ÿä»£ç©ºé—´è®¾ç½®è¿‡å¤§ï¼› å¯¹è±¡å¼•ç”¨é“¾è¾ƒé•¿ï¼Œè¿›è¡Œå¯è¾¾æ€§åˆ†ææ—¶é—´è¾ƒé•¿ï¼› æ–°ç”Ÿä»£survivoråŒºè®¾ç½®çš„æ¯”è¾ƒå°ï¼Œæ¸…ç†åå‰©ä½™çš„å¯¹è±¡ä¸èƒ½è£…è¿›å»éœ€è¦ç§»åŠ¨åˆ°è€å¹´ä»£ï¼Œé€ æˆç§»åŠ¨å¼€é”€ï¼› å†…å­˜åˆ†é…æ‹…ä¿å¤±è´¥ï¼Œç”±minor gcè½¬åŒ–ä¸ºfull gcï¼› é‡‡ç”¨çš„åƒåœ¾æ”¶é›†å™¨æ•ˆç‡è¾ƒä½ï¼Œæ¯”å¦‚æ–°ç”Ÿä»£ä½¿ç”¨serialæ”¶é›†å™¨ã€‚ 6.æè¿°ä¸€ä¸‹GCç®—æ³•ï¼Ÿ GCç®—æ³•åŒ…å«ï¼šå¼•ç”¨è®¡æ•°æ³•ï¼Œæ ‡è®°æ¸…é™¤ï¼Œæ ‡è®°å¤åˆ¶ï¼Œæ ‡è®°å‹ç¼©ã€‚ å¼•ç”¨è®¡æ•°ï¼šå¯¹äºä¸€ä¸ªå¯¹è±¡Aï¼Œåªè¦æœ‰ä»»ä½•ä¸€ä¸ªå¯¹è±¡å¼•ç”¨äº†Aï¼Œåˆ™Açš„å¼•ç”¨è®¡æ•°å™¨å°±åŠ 1ï¼Œå½“å¼•ç”¨å¤±æ•ˆæ—¶ï¼Œå¼•ç”¨è®¡æ•°å™¨å°±å‡1ã€‚åªè¦å¯¹è±¡Açš„å¼•ç”¨è®¡æ•°å™¨çš„å€¼ä¸º0ï¼Œåˆ™å¯¹è±¡Aå°±ä¸å¯èƒ½å†è¢«ä½¿ç”¨ï¼› æ ‡è®°æ¸…é™¤ï¼š åƒåœ¾å›æ”¶åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šæ ‡è®°é˜¶æ®µå’Œæ¸…é™¤é˜¶æ®µã€‚åœ¨æ ‡è®°é˜¶æ®µï¼Œé¦–å…ˆé€šè¿‡æ ¹èŠ‚ç‚¹ï¼Œæ ‡è®°æ‰€æœ‰ä»æ ¹èŠ‚ç‚¹å¼€å§‹çš„å¯è¾¾å¯¹è±¡ï¼›ç„¶åï¼Œåœ¨æ¸…é™¤é˜¶æ®µï¼Œæ¸…é™¤æ‰€æœ‰æœªè¢«æ ‡è®°çš„å¯¹è±¡ï¼Œä½†ä¼šäº§ç”Ÿå¾ˆå¤šåƒåœ¾ç¢ç‰‡ ï¼› æ ‡è®°å¤åˆ¶ï¼š å°†å†…å­˜å¯¹åŠåˆ†ï¼Œæ€»æ˜¯ä¿ç•™ä¸€å—ç©ºç€ï¼ˆä¸Šå›¾ä¸­çš„å³ä¾§ï¼‰ï¼Œå°†å·¦ä¾§å­˜æ´»çš„å¯¹è±¡ï¼ˆæµ…ç°è‰²åŒºåŸŸï¼‰å¤åˆ¶åˆ°å³ä¾§ã€‚é¿å…äº†å†…å­˜ç¢ç‰‡é—®é¢˜ï¼Œä½†æ˜¯å†…å­˜æµªè´¹å¾ˆä¸¥é‡ï¼Œç›¸å½“äºåªèƒ½ä½¿ç”¨ 50%çš„å†…å­˜ï¼› æ ‡è®°å‹ç¼©ï¼ˆæ ‡è®°æ•´ç†ï¼‰ï¼šæ ‡è®°è¿‡ç¨‹ä»ç„¶ä¸â€œæ ‡è®°-æ¸…é™¤â€ç®—æ³•ä¸€æ ·ï¼Œä½†åç»­æ­¥éª¤ä¸æ˜¯ç›´æ¥å¯¹å¯å›æ”¶å¯¹è±¡è¿›è¡Œæ¸…ç†ï¼Œè€Œæ˜¯è®©æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡éƒ½å‘ä¸€ç«¯ç§»åŠ¨ï¼Œç„¶åç›´æ¥æ¸…ç†æ‰ç«¯è¾¹ç•Œä»¥å¤–çš„å†…å­˜ï¼ˆç±»ä¼¼äº windows çš„ç£ç›˜ç¢ç‰‡æ•´ç†ï¼‰ï¼Œé¿å…åƒåœ¾ç¢ç‰‡ã€‚ 6.1 æ–°ç”Ÿä»£å’Œè€å¹´ä»£ç”¨å“ªäº›ç®—æ³•ï¼Ÿstwé—®é¢˜ä¼šå‘ç”Ÿåœ¨æ–°ç”Ÿä»£å—? é’ˆå¯¹æ–°ç”Ÿä»£ï¼Œé‡‡ç”¨æ ‡è®°å¤åˆ¶ç®—æ³• å‚è€ƒï¼šhttps://tech.meituan.com/2017/12/29/jvm-optimize.html å¤§å¤šæ•°å¯¹è±¡åœ¨æ–°ç”Ÿä»£ä¸­è¢«åˆ›å»ºï¼Œå…¶ä¸­å¾ˆå¤šå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå¾ˆçŸ­ã€‚æ¯æ¬¡æ–°ç”Ÿä»£çš„åƒåœ¾å›æ”¶ï¼ˆåˆç§°Minor GCï¼‰ååªæœ‰å°‘é‡å¯¹è±¡å­˜æ´»ï¼Œæ‰€ä»¥é€‰ç”¨å¤åˆ¶ç®—æ³•ï¼Œåªéœ€è¦å°‘é‡çš„å¤åˆ¶æˆæœ¬å°±å¯ä»¥å®Œæˆå›æ”¶ã€‚ HotSpotå®ç°çš„å¤åˆ¶ç®—æ³•æµç¨‹å¦‚ä¸‹: å½“EdenåŒºæ»¡çš„æ—¶å€™,ä¼šè§¦å‘ç¬¬ä¸€æ¬¡Minor gcï¼ŒæŠŠè¿˜æ´»ç€çš„å¯¹è±¡æ‹·è´åˆ°Survivor FromåŒºï¼›å½“EdenåŒºå†æ¬¡è§¦å‘Minor gcçš„æ—¶å€™,ä¼šæ‰«æEdenåŒºå’ŒFromåŒºåŸŸï¼Œå¯¹ä¸¤ä¸ªåŒºåŸŸè¿›è¡Œåƒåœ¾å›æ”¶,ç»è¿‡è¿™æ¬¡å›æ”¶åè¿˜å­˜æ´»çš„å¯¹è±¡,åˆ™ç›´æ¥å¤åˆ¶åˆ°ToåŒºåŸŸ,å¹¶å°†Edenå’ŒFromåŒºåŸŸæ¸…ç©ºã€‚ å½“åç»­Edenåˆå‘ç”ŸMinor gcçš„æ—¶å€™,ä¼šå¯¹Edenå’ŒToåŒºåŸŸè¿›è¡Œåƒåœ¾å›æ”¶,å­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°FromåŒºåŸŸ,å¹¶å°†Edenå’ŒToåŒºåŸŸæ¸…ç©ºã€‚ éƒ¨åˆ†å¯¹è±¡ä¼šåœ¨Fromå’ŒToåŒºåŸŸä¸­å¤åˆ¶æ¥å¤åˆ¶å»ï¼Œå¦‚æ­¤äº¤æ¢15æ¬¡(ç”±JVMå‚æ•°MaxTenuringThresholdå†³å®š,è¿™ä¸ªå‚æ•°é»˜è®¤æ˜¯15)ï¼Œæœ€ç»ˆå¦‚æœè¿˜æ˜¯å­˜æ´»,å°±å­˜å…¥åˆ°è€å¹´ä»£ã€‚ é’ˆå¯¹è€å¹´ä»£å¯¹è±¡å­˜æ´»ç‡é«˜çš„ç‰¹ç‚¹ åœ¨æ–°ç”Ÿä»£ä¸­ç»å†äº†Næ¬¡åƒåœ¾å›æ”¶åä»ç„¶å­˜æ´»çš„å¯¹è±¡ï¼Œå°±ä¼šè¢«æ”¾åˆ°å¹´è€ä»£ï¼Œè¯¥åŒºåŸŸä¸­å¯¹è±¡å­˜æ´»ç‡é«˜ã€‚ è€å¹´ä»£çš„åƒåœ¾å›æ”¶ï¼ˆåˆç§°Major GCï¼‰é€šå¸¸ä½¿ç”¨æ ‡è®°-æ¸…ç†æˆ–æ ‡è®°-æ•´ç†ç®—æ³•ã€‚æ•´å †åŒ…æ‹¬æ–°ç”Ÿä»£å’Œè€å¹´ä»£çš„åƒåœ¾å›æ”¶ç§°ä¸ºFull GCï¼ˆHotSpot VMé‡Œï¼Œé™¤äº†CMSä¹‹å¤–ï¼Œå…¶å®ƒèƒ½æ”¶é›†è€å¹´ä»£çš„GCéƒ½ä¼šåŒæ—¶æ”¶é›†æ•´ä¸ªGCå †ï¼ŒåŒ…æ‹¬æ–°ç”Ÿä»£ï¼‰ã€‚ 7.ä»€ä¹ˆæ˜¯Stop The World ? ä»€ä¹ˆæ˜¯å®‰å…¨ç‚¹ï¼Ÿå®‰å…¨åŒºåŸŸï¼Ÿ Stop The World è¿›è¡Œåƒåœ¾å›æ”¶çš„è¿‡ç¨‹ä¸­ï¼Œä¼šæ¶‰åŠå¯¹è±¡çš„ç§»åŠ¨ã€‚ä¸ºäº†ä¿è¯å¯¹è±¡å¼•ç”¨æ›´æ–°çš„æ­£ç¡®æ€§ï¼Œå¿…é¡»æš‚åœæ‰€æœ‰çš„ç”¨æˆ·çº¿ç¨‹ï¼Œåƒè¿™æ ·çš„åœé¡¿ï¼Œè™šæ‹Ÿæœºè®¾è®¡è€…å½¢è±¡æè¿°ä¸ºã€ŒStop The Worldã€ã€‚ä¹Ÿç®€ç§°ä¸ºSTWã€‚JVMåœ¨æš‚åœçš„æ—¶å€™ï¼Œéœ€è¦é€‰å‡†ä¸€ä¸ªæ—¶æœºã€‚ ç”±äºJVMç³»ç»Ÿè¿è¡ŒæœŸé—´çš„å¤æ‚æ€§ï¼Œä¸å¯èƒ½åšåˆ°éšæ—¶æš‚åœï¼Œå› æ­¤å¼•å…¥äº†å®‰å…¨ç‚¹çš„æ¦‚å¿µã€‚ å®‰å…¨ç‚¹ å®‰å…¨ç‚¹ï¼Œå³ç¨‹åºï¼ˆéGCå…ˆï¼‰æ‰§è¡Œæ—¶å¹¶éåœ¨æ‰€æœ‰åœ°æ–¹éƒ½èƒ½åœé¡¿ä¸‹æ¥å¼€å§‹GCï¼Œåªæœ‰åœ¨åˆ°è¾¾å®‰å…¨ç‚¹æ—¶æ‰èƒ½æš‚åœã€‚ å®‰å…¨ç‚¹çš„åˆå§‹ç›®çš„å¹¶ä¸æ˜¯è®©å…¶ä»–çº¿ç¨‹åœä¸‹ï¼Œè€Œæ˜¯æ‰¾åˆ°ä¸€ä¸ªç¨³å®šçš„æ‰§è¡ŒçŠ¶æ€ã€‚åœ¨è¿™ä¸ªæ‰§è¡ŒçŠ¶æ€ä¸‹ï¼ŒJavaè™šæ‹Ÿæœºçš„å †æ ˆä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚è¿™ä¹ˆä¸€æ¥ï¼Œåƒåœ¾å›æ”¶å™¨ä¾¿èƒ½å¤Ÿâ€œå®‰å…¨â€åœ°æ‰§è¡Œå¯è¾¾æ€§åˆ†æã€‚åªè¦ä¸ç¦»å¼€è¿™ä¸ªå®‰å…¨ç‚¹ï¼ŒJavaè™šæ‹Ÿæœºä¾¿èƒ½å¤Ÿåœ¨åƒåœ¾å›æ”¶çš„åŒæ—¶ï¼Œç»§ç»­è¿è¡Œè¿™æ®µæœ¬åœ°ä»£ç ã€‚ å¦‚ä½•ä¿è¯ä¸­æ–­æ—¶æ‰€æœ‰çº¿ç¨‹éƒ½åœ¨å®‰å…¨ç‚¹ æŠ¢å…ˆå¼ä¸­æ–­ï¼ˆPreemptive Suspensionï¼‰ æŠ¢å…ˆå¼ä¸­æ–­ä¸éœ€è¦çº¿ç¨‹çš„æ‰§è¡Œä»£ç ä¸»åŠ¨å»é…åˆï¼Œåœ¨GCå‘ç”Ÿæ—¶ï¼Œé¦–å…ˆæŠŠæ‰€æœ‰çº¿ç¨‹å…¨éƒ¨ä¸­æ–­ï¼Œå¦‚æœå‘ç°æœ‰çº¿ç¨‹ä¸­æ–­çš„åœ°æ–¹ä¸åœ¨å®‰å…¨ç‚¹ä¸Šï¼Œå°±æ¢å¤çº¿ç¨‹ï¼Œè®©å®ƒâ€œè·‘â€åˆ°å®‰å…¨ç‚¹ä¸Šã€‚ç°åœ¨å‡ ä¹æ²¡æœ‰è™šæ‹Ÿæœºé‡‡ç”¨è¿™ç§æ–¹å¼æ¥æš‚åœçº¿ç¨‹ä»è€Œå“åº”GCäº‹ä»¶ã€‚ ä¸»åŠ¨å¼ä¸­æ–­ï¼ˆVoluntary Suspensionï¼‰ ä¸»åŠ¨å¼ä¸­æ–­çš„æ€æƒ³æ˜¯å½“GCéœ€è¦ä¸­æ–­çº¿ç¨‹çš„æ—¶å€™ï¼Œä¸ç›´æ¥å¯¹çº¿ç¨‹æ“ä½œï¼Œä»…ä»…ç®€å•åœ°è®¾ç½®ä¸€ä¸ªæ ‡å¿—ï¼Œå„ä¸ªçº¿ç¨‹æ‰§è¡Œæ—¶ä¸»åŠ¨å»è½®è¯¢è¿™ä¸ªæ ‡å¿—ï¼Œå‘ç°ä¸­æ–­æ ‡å¿—ä¸ºçœŸæ—¶å°±è‡ªå·±ä¸­æ–­æŒ‚èµ·ã€‚è½®è¯¢æ ‡å¿—çš„åœ°æ–¹å’Œå®‰å…¨ç‚¹æ˜¯é‡åˆçš„ï¼Œå¦å¤–å†åŠ ä¸Šåˆ›å»ºå¯¹è±¡éœ€è¦åˆ†é…å†…å­˜çš„åœ°æ–¹ã€‚ 8. å¸¸è§çš„åƒåœ¾å›æ”¶å™¨æœ‰å“ªäº›ï¼ˆæ¯”å¦‚G1ï¼‰ï¼Ÿ Serialæ”¶é›†å™¨ã€‚ Serialï¼ˆä¸²è¡Œï¼‰æ”¶é›†å™¨æ”¶é›†å™¨æ˜¯æœ€åŸºæœ¬ã€å†å²æœ€æ‚ ä¹…çš„åƒåœ¾æ”¶é›†å™¨äº†ã€‚å¤§å®¶çœ‹åå­—å°±çŸ¥é“è¿™ä¸ªæ”¶é›†å™¨æ˜¯â¼€ä¸ªå•çº¿ç¨‹æ”¶é›†å™¨äº†ã€‚å®ƒçš„å•çº¿ç¨‹ çš„æ„ä¹‰ä¸ä»…ä»…æ„å‘³ç€å®ƒåªä¼šä½¿ç”¨â¼€æ¡åƒåœ¾æ”¶é›†çº¿ç¨‹å»å®Œæˆåƒåœ¾æ”¶é›†â¼¯ä½œï¼Œæ›´é‡è¦çš„æ˜¯å®ƒåœ¨è¿›è¡Œåƒåœ¾æ”¶é›†â¼¯ä½œçš„æ—¶å€™å¿…é¡»æš‚åœå…¶ä»–æ‰€æœ‰çš„â¼¯ä½œçº¿ç¨‹ï¼ˆ â€œStop The Worldâ€ï¼‰ï¼Œç›´åˆ°å®ƒæ”¶é›†ç»“æŸã€‚ ParNewæ”¶é›†å™¨ã€‚ ParNewæ”¶é›†å™¨å…¶å®å°±æ˜¯Serialæ”¶é›†å™¨çš„å¤šçº¿ç¨‹ç‰ˆæœ¬ï¼Œé™¤äº†ä½¿ç”¨å¤šçº¿ç¨‹è¿›è¡Œåƒåœ¾æ”¶é›†å¤–ï¼Œå…¶ä½™è¡Œä¸ºï¼ˆæ§åˆ¶å‚æ•°ã€æ”¶é›†ç®—æ³•ã€å›æ”¶ç­–ç•¥ç­‰ç­‰ï¼‰å’ŒSerialæ”¶é›†å™¨å®Œå…¨â¼€æ ·ã€‚ æ–°â½£ä»£é‡‡ç”¨æ ‡è®°-å¤åˆ¶ç®—æ³•ï¼Œâ½¼å¹´ä»£é‡‡ç”¨æ ‡è®°-æ•´ç†ç®—æ³•ã€‚ Parallel Scavengeæ”¶é›†å™¨ã€‚ Parallel Scavenge æ”¶é›†å™¨ç±»ä¼¼äºParNew æ”¶é›†å™¨ã€‚ é‚£ä¹ˆå®ƒæœ‰ä»€ä¹ˆç‰¹åˆ«ä¹‹å¤„å‘¢ï¼Ÿ Parallel Scavengeæ”¶é›†å™¨æä¾›äº†å¾ˆå¤šå‚æ•°ä¾›ç”¨æˆ·æ‰¾åˆ°æœ€åˆé€‚çš„åœé¡¿æ—¶é—´æˆ–æœ€å¤§ååé‡ã€‚ å¦‚æœå¯¹äºæ”¶é›†å™¨è¿ä½œä¸å¤ªäº†è§£çš„è¯ï¼Œâ¼¿â¼¯ä¼˜åŒ–å­˜åœ¨çš„è¯å¯ä»¥é€‰æ‹©æŠŠå†…å­˜ç®¡ç†ä¼˜åŒ–äº¤ç»™è™šæ‹Ÿæœºå»å®Œæˆä¹Ÿæ˜¯â¼€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚- æ–°â½£ä»£é‡‡ç”¨æ ‡è®°-å¤åˆ¶ç®—æ³•ï¼Œâ½¼å¹´ä»£é‡‡ç”¨æ ‡è®°-æ•´ç†ç®—æ³•ã€‚ ï¼ˆé‡ç‚¹ï¼‰CMSæ”¶é›†å™¨ã€‚CMSï¼ˆConcurrent Mark Sweepï¼‰æ”¶é›†å™¨æ˜¯ä¸€ç§ä»¥è·å–æœ€çŸ­å›æ”¶åœé¡¿æ—¶é—´ä¸ºç›®æ ‡çš„æ”¶é›†å™¨ã€‚è¿™æ˜¯å› ä¸ºCMSæ”¶é›†å™¨å·¥ä½œæ—¶ï¼ŒGCå·¥ä½œçº¿ç¨‹ä¸ç”¨æˆ·çº¿ç¨‹å¯ä»¥å¹¶å‘æ‰§è¡Œï¼Œä»¥æ­¤æ¥è¾¾åˆ°é™ä½æ”¶é›†åœé¡¿æ—¶é—´çš„ç›®çš„ã€‚ CMSæ”¶é›†å™¨ä»…ä½œç”¨äºè€å¹´ä»£çš„æ”¶é›†ï¼ŒåŸºäº â€œæ ‡è®°-æ¸…é™¤â€ ã€‚ ä¼˜ç‚¹ï¼š å¹¶å‘æ”¶é›†ã€ä½åœé¡¿ã€‚ ç¼ºç‚¹ï¼ˆå¿«æ‰‹ï¼‰ï¼š CMSæ”¶é›†å™¨å¯¹CPUèµ„æºéå¸¸æ•æ„Ÿï¼›CMSæ”¶é›†å™¨æ— æ³•å¤„ç†æµ®åŠ¨åƒåœ¾ï¼ˆFloating Garbageï¼‰ã€‚ ï¼ˆé‡ç‚¹ï¼‰G1æ”¶é›†å™¨ã€‚ G1é‡æ–°å®šä¹‰äº†å †ç©ºé—´ï¼Œæ‰“ç ´äº†åŸæœ‰çš„åˆ†ä»£æ¨¡å‹ï¼Œå°†å †åˆ’åˆ†ä¸ºä¸€ä¸ªä¸ªåŒºåŸŸã€‚è¿™ä¹ˆåšçš„ç›®çš„æ˜¯åœ¨è¿›è¡Œæ”¶é›†æ—¶ä¸å¿…åœ¨å…¨å †èŒƒå›´å†…è¿›è¡Œï¼Œè¿™æ˜¯å®ƒæœ€æ˜¾è‘—çš„ç‰¹ç‚¹ã€‚åŒºåŸŸåˆ’åˆ†çš„å¥½å¤„å°±æ˜¯å¸¦æ¥äº†åœé¡¿æ—¶é—´å¯é¢„æµ‹çš„æ”¶é›†æ¨¡å‹ï¼šç”¨æˆ·å¯ä»¥æŒ‡å®šæ”¶é›†æ“ä½œåœ¨å¤šé•¿æ—¶é—´å†…å®Œæˆã€‚å³G1æä¾›äº†æ¥è¿‘å®æ—¶çš„æ”¶é›†ç‰¹æ€§ã€‚ å¹¶è¡Œä¸å¹¶å‘ï¼šG1èƒ½å……åˆ†åˆ©â½¤CPUã€å¤šæ ¸ç¯å¢ƒä¸‹çš„ç¡¬ä»¶ä¼˜åŠ¿ï¼Œä½¿ç”¨å¤šä¸ªCPUï¼ˆCPUæˆ–è€…CPUæ ¸â¼¼ï¼‰æ¥ç¼©çŸ­Stop-The-Worldåœé¡¿æ—¶é—´ã€‚éƒ¨åˆ†å…¶ä»–æ”¶é›†å™¨åŸæœ¬éœ€è¦åœé¡¿Javaçº¿ç¨‹æ‰§è¡Œçš„GCåŠ¨ä½œï¼ŒG1æ”¶é›†å™¨ä»ç„¶å¯ä»¥é€šè¿‡å¹¶å‘çš„æ–¹å¼è®©javaç¨‹åºç»§ç»­æ‰§è¡Œã€‚ åˆ†ä»£æ”¶é›†ï¼šè™½ç„¶G1å¯ä»¥ä¸éœ€è¦å…¶ä»–æ”¶é›†å™¨é…åˆå°±èƒ½ç‹¬â½´ç®¡ç†æ•´ä¸ªGCå †ï¼Œä½†æ˜¯è¿˜æ˜¯ä¿ç•™äº†åˆ†ä»£çš„æ¦‚å¿µã€‚ ç©ºé—´æ•´åˆï¼šä¸CMSçš„â€œæ ‡è®°â€“æ¸…é™¤â€ç®—æ³•ä¸åŒï¼ŒG1ä»æ•´ä½“æ¥çœ‹æ˜¯åŸºäºæ ‡è®°-æ•´ç†ç®—æ³•å®ç°çš„æ”¶é›†å™¨ï¼›ä»å±€éƒ¨ä¸Šæ¥çœ‹æ˜¯åŸºäºæ ‡è®°-å¤åˆ¶ç®—æ³•å®ç°çš„ã€‚ å¯é¢„æµ‹çš„åœé¡¿ï¼šè¿™æ˜¯G1ç›¸å¯¹äºCMSçš„å¦â¼€ä¸ªå¤§ä¼˜åŠ¿ï¼Œé™ä½åœé¡¿æ—¶é—´æ˜¯G1 å’Œ CMS å…±åŒçš„å…³æ³¨ç‚¹ï¼Œä½†G1 é™¤äº†è¿½æ±‚ä½åœé¡¿å¤–ï¼Œè¿˜èƒ½å»ºâ½´å¯é¢„æµ‹çš„åœé¡¿æ—¶é—´æ¨¡å‹ï¼Œèƒ½è®©ä½¿ç”¨è€…æ˜ç¡®æŒ‡å®šåœ¨â¼€ä¸ªâ»“åº¦ä¸ºMæ¯«ç§’çš„æ—¶é—´ç‰‡æ®µå†…ã€‚ 8.1 ä»‹ç»ä¸€ä¸‹CMS å’Œ G1 åƒåœ¾å›æ”¶å™¨åŸç†ï¼Ÿ å‚è€ƒï¼šå¼„æ˜ç™½CMSå’ŒG1ï¼Œå°±é è¿™ä¸€ç¯‡äº† CMSæ”¶é›†å™¨ CMSï¼ˆConcurrent Mark Sweepï¼‰æ”¶é›†å™¨æ˜¯ä¸€ç§ä»¥è·å–æœ€çŸ­å›æ”¶åœé¡¿æ—¶é—´ä¸ºç›®æ ‡çš„æ”¶é›†å™¨ã€‚è¿™æ˜¯å› ä¸ºCMSæ”¶é›†å™¨å·¥ä½œæ—¶ï¼ŒGCå·¥ä½œçº¿ç¨‹ä¸ç”¨æˆ·çº¿ç¨‹å¯ä»¥å¹¶å‘æ‰§è¡Œï¼Œä»¥æ­¤æ¥è¾¾åˆ°é™ä½æ”¶é›†åœé¡¿æ—¶é—´çš„ç›®çš„ã€‚ CMSæ”¶é›†å™¨ä»…ä½œç”¨äºè€å¹´ä»£çš„æ”¶é›†ï¼Œæ˜¯åŸºäºæ ‡è®°-æ¸…é™¤ç®—æ³•çš„ï¼Œå®ƒçš„è¿ä½œè¿‡ç¨‹åˆ†ä¸º4ä¸ªæ­¥éª¤ï¼š åˆå§‹æ ‡è®°ï¼ˆCMS initial markï¼‰ : éœ€è¦STWï¼Œæ ‡è®°ä¸€ä¸‹GC Rootsèƒ½ç›´æ¥å…³è”åˆ°çš„å¯¹è±¡ ï¼› å¹¶å‘æ ‡è®°ï¼ˆCMS concurrent markï¼‰ï¼šä»GC Rootså¼€å§‹å †ä¸­å¯¹è±¡è¿›è¡Œå¯è¾¾æ€§åˆ†æï¼Œæ‰¾å‡ºå­˜æ´»çš„å¯¹è±¡ï¼Œè¿™é˜¶æ®µè€—æ—¶è¾ƒé•¿ï¼Œä½†å¯ä¸ç”¨æˆ·ç¨‹åºå¹¶å‘æ‰§è¡Œï¼› é‡æ–°æ ‡è®°ï¼ˆCMS remarkï¼‰ï¼šéœ€è¦STW ï¼Œä¿®æ­£å¹¶å‘æ ‡è®°æœŸé—´å› ç”¨æˆ·ç¨‹åºç»§ç»­è¿ä½œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„é‚£ä¸€éƒ¨åˆ†å¯¹è±¡çš„æ ‡è®°è®°å½• ï¼› å¹¶å‘æ¸…é™¤ï¼ˆCMS concurrent sweepï¼‰ï¼š æ¸…é™¤å¯¹è±¡ã€‚ G1æ”¶é›†å™¨ åœ¨å †çš„ç»“æ„è®¾è®¡æ—¶ï¼ŒG1æ‰“ç ´äº†ä»¥å¾€å°†æ”¶é›†èŒƒå›´å›ºå®šåœ¨æ–°ç”Ÿä»£æˆ–è€å¹´ä»£çš„æ¨¡å¼ï¼ŒG1å°†å †åˆ†æˆè®¸å¤šç›¸åŒå¤§å°çš„åŒºåŸŸå•å…ƒï¼Œæ¯ä¸ªå•å…ƒç§°ä¸ºRegionã€‚Regionæ˜¯ä¸€å—åœ°å€è¿ç»­çš„å†…å­˜ç©ºé—´ï¼ŒG1æ¨¡å—çš„ç»„æˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åŒºåŸŸåˆ’åˆ†çš„å¥½å¤„å°±æ˜¯å¸¦æ¥äº†åœé¡¿æ—¶é—´å¯é¢„æµ‹çš„æ”¶é›†æ¨¡å‹ï¼šç”¨æˆ·å¯ä»¥æŒ‡å®šæ”¶é›†æ“ä½œåœ¨å¤šé•¿æ—¶é—´å†…å®Œæˆã€‚å³G1æä¾›äº†æ¥è¿‘å®æ—¶çš„æ”¶é›†ç‰¹æ€§ã€‚ å’ŒCMSæŒºåƒçš„ã€‚ åˆå§‹æ ‡è®°ï¼ˆInitial Markingï¼‰ï¼šä»…ä»…åªæ˜¯æ ‡è®°ä¸€ä¸‹GC Rootsèƒ½ç›´æ¥å…³è”åˆ°çš„å¯¹è±¡ï¼Œå¹¶ä¸”ä¿®æ”¹TAMSï¼ˆNext Top at Mark Startï¼‰çš„å€¼ï¼Œè®©ä¸‹ä¸€é˜¶æ®µç”¨æˆ·ç¨‹åºå¹¶å‘è¿è¡Œæ—¶ï¼Œèƒ½åœ¨æ­£ç¡®å¯ç”¨çš„Regionä¸­åˆ›å»ºæ–°å¯¹è±¡ï¼Œè¿™é˜¶æ®µéœ€è¦åœé¡¿çº¿ç¨‹ï¼Œä½†è€—æ—¶å¾ˆçŸ­ã€‚ å¹¶å‘æ ‡è®°ï¼ˆConcurrent Markingï¼‰ï¼šæ˜¯ä»GC Rootså¼€å§‹å †ä¸­å¯¹è±¡è¿›è¡Œå¯è¾¾æ€§åˆ†æï¼Œæ‰¾å‡ºå­˜æ´»çš„å¯¹è±¡ï¼Œè¿™é˜¶æ®µè€—æ—¶è¾ƒé•¿ï¼Œä½†å¯ä¸ç”¨æˆ·ç¨‹åºå¹¶å‘æ‰§è¡Œã€‚ æœ€ç»ˆæ ‡è®°ï¼ˆFinal Markingï¼‰ï¼šæ˜¯ä¸ºäº†ä¿®æ­£å¹¶å‘æ ‡è®°æœŸé—´å› ç”¨æˆ·ç¨‹åºç»§ç»­è¿ä½œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„é‚£ä¸€éƒ¨åˆ†æ ‡è®°è®°å½•ï¼Œè™šæ‹Ÿæœºå°†è¿™æ®µæ—¶é—´å¯¹è±¡å˜åŒ–è®°å½•åœ¨çº¿ç¨‹Remembered Set Logsé‡Œé¢ï¼Œæœ€ç»ˆæ ‡è®°é˜¶æ®µéœ€è¦æŠŠRemembered Set Logsçš„æ•°æ®åˆå¹¶åˆ°Remembered Setä¸­ï¼Œè¿™é˜¶æ®µéœ€è¦åœé¡¿çº¿ç¨‹ï¼Œä½†æ˜¯å¯å¹¶è¡Œæ‰§è¡Œã€‚ ç­›é€‰å›æ”¶ï¼ˆLive Data Counting and Evacuationï¼‰ï¼šé¦–å…ˆå¯¹å„ä¸ªRegionçš„å›æ”¶ä»·å€¼å’Œæˆæœ¬è¿›è¡Œæ’åºï¼Œæ ¹æ®ç”¨æˆ·æ‰€æœŸæœ›çš„GCåœé¡¿æ—¶é—´æ¥åˆ¶å®šå›æ”¶è®¡åˆ’ã€‚è¿™ä¸ªé˜¶æ®µä¹Ÿå¯ä»¥åšåˆ°ä¸ç”¨æˆ·ç¨‹åºä¸€èµ·å¹¶å‘æ‰§è¡Œï¼Œä½†æ˜¯å› ä¸ºåªå›æ”¶ä¸€éƒ¨åˆ†Regionï¼Œæ—¶é—´æ˜¯ç”¨æˆ·å¯æ§åˆ¶çš„ï¼Œè€Œä¸”åœé¡¿ç”¨æˆ·çº¿ç¨‹å°†å¤§å¹…æé«˜æ”¶é›†æ•ˆç‡ã€‚ 8.2 ä¸ºä»€ä¹ˆCMSä¸ç”¨æ ‡è®°-å‹ç¼©ç®—æ³•ï¼Ÿ CMSä¸»è¦å…³æ³¨ä½å»¶è¿Ÿï¼Œå› è€Œé‡‡ç”¨å¹¶å‘æ–¹å¼ã€‚ åœ¨å¹¶å‘æ¸…ç†åƒåœ¾æ—¶ï¼Œå¦‚æœé‡‡ç”¨å‹ç¼©ç®—æ³•ï¼Œè¿™æ¶‰åŠåˆ°ç§»åŠ¨å­˜æ´»çš„å¯¹è±¡ã€‚å¦‚æœä¸è¿›è¡Œåœé¡¿ä¼šå¾ˆéš¾å¤„ç†ï¼Œè¿èƒŒäº†CMSåˆè¡·ï¼Œæ‰€ä»¥é‡‡ç”¨æ ‡è®°-æ¸…é™¤ç®—æ³•ã€‚ 9.ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼ï¼Ÿ å¹¿ä¹‰å¹¶é€šä¿—çš„è¯´ï¼Œå°±æ˜¯ï¼šä¸å†ä¼šè¢«ä½¿ç”¨çš„å¯¹è±¡çš„å†…å­˜ä¸èƒ½è¢«å›æ”¶ï¼Œå°±æ˜¯å†…å­˜æ³„æ¼ã€‚ å†…å­˜æ³„æ¼åœºæ™¯ï¼š é™æ€é›†åˆç±»ã€æ•°ç»„æ·»åŠ å¯¹è±¡ä»¥åé—æ¼äº†å¯¹äºä»–ä»¬çš„å¤„ç†ï¼Œä¾‹å¦‚HashMapå’ŒVectorï¼› å„ç§è¿æ¥ï¼Œå¦‚æ•°æ®åº“è¿æ¥ã€ç½‘ç»œè¿æ¥ã€IOè¿æ¥ï¼› å•ä¾‹æ¨¡å¼ï¼› å˜é‡ä¸åˆç†çš„ä½œç”¨åŸŸã€‚ 1.6.2 ç±»åŠ è½½ 1. ä»‹ç»ä¸€ä¸‹ç±»æ–‡ä»¶ç»“æ„ï¼Ÿ Classâ½‚ä»¶å­—èŠ‚ç ç»“æ„ç»„ç»‡ç¤ºæ„å›¾ ã€‚ é­”æ•°: ç¡®å®šè¿™ä¸ªâ½‚ä»¶æ˜¯å¦ä¸ºâ¼€ä¸ªèƒ½è¢«è™šæ‹Ÿæœºæ¥æ”¶çš„ Class â½‚ä»¶ã€‚ Class â½‚ä»¶ç‰ˆæœ¬ï¼šClass â½‚ä»¶çš„ç‰ˆæœ¬å·ï¼Œä¿è¯ç¼–è¯‘æ­£å¸¸æ‰§è¡Œã€‚ å¸¸é‡æ±  ï¼šå¸¸é‡æ± ä¸»è¦å­˜æ”¾ä¸¤å¤§å¸¸é‡ï¼šå­—é¢é‡å’Œç¬¦å·å¼•ç”¨ã€‚ è®¿é—®æ ‡å¿—ï¼šæ ‡å¿—ç”¨äºè¯†åˆ«â¼€äº›ç±»æˆ–è€…æ¥å£å±‚æ¬¡çš„è®¿é—®ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼šè¿™ä¸ª Class æ˜¯ç±»è¿˜æ˜¯æ¥å£ï¼Œæ˜¯å¦ä¸º public æˆ–è€… abstract ç±»å‹ï¼Œå¦‚æœæ˜¯ç±»çš„è¯æ˜¯å¦å£°æ˜ä¸º final ç­‰ç­‰ã€‚ å½“å‰ç±»ç´¢å¼•,â½—ç±»ç´¢å¼• ï¼šç±»ç´¢å¼•ç”¨äºç¡®å®šè¿™ä¸ªç±»çš„å…¨é™å®šåï¼Œâ½—ç±»ç´¢å¼•ç”¨äºç¡®å®šè¿™ä¸ªç±»çš„â½—ç±»çš„å…¨é™å®šåï¼Œç”±äº Java è¯­â¾”çš„å•ç»§æ‰¿ï¼Œæ‰€ä»¥â½—ç±»ç´¢å¼•åªæœ‰â¼€ä¸ªï¼Œé™¤äº† java.lang.Object ä¹‹å¤–ï¼Œæ‰€æœ‰çš„ java ç±»éƒ½æœ‰â½—ç±»ï¼Œå› æ­¤é™¤äº† java.lang.Object å¤–ï¼Œæ‰€æœ‰ Java ç±»çš„â½—ç±»ç´¢å¼• éƒ½ä¸ä¸º 0ã€‚ æ¥å£ç´¢å¼•é›†åˆï¼šæ¥å£ç´¢å¼•é›†åˆç”¨æ¥æè¿°è¿™ä¸ªç±»å®ç°äº†é‚£äº›æ¥å£ï¼Œè¿™äº›è¢«å®ç°çš„æ¥å£å°†æŒ‰ implents (å¦‚æœè¿™ä¸ªç±»æœ¬èº«æ˜¯æ¥å£çš„è¯åˆ™æ˜¯ extends ) åçš„æ¥å£é¡ºåºä»å·¦åˆ°å³æ’åˆ—åœ¨æ¥å£ç´¢å¼•é›†åˆä¸­ã€‚ å­—æ®µè¡¨é›†åˆï¼šæè¿°æ¥å£æˆ–ç±»ä¸­å£°æ˜çš„å˜é‡ã€‚å­—æ®µåŒ…æ‹¬ç±»çº§å˜é‡ä»¥åŠå®ä¾‹å˜é‡ï¼Œä½†ä¸åŒ…æ‹¬åœ¨æ–¹æ³•å†…éƒ¨å£°æ˜çš„å±€éƒ¨å˜é‡ã€‚ æ–¹æ³•è¡¨é›†åˆ ï¼šç±»ä¸­çš„æ–¹æ³•ã€‚ å±æ€§è¡¨é›†åˆï¼š åœ¨ Class â½‚ä»¶ï¼Œå­—æ®µè¡¨ï¼Œæ–¹æ³•è¡¨ä¸­éƒ½å¯ä»¥æºå¸¦â¾ƒâ¼°çš„å±æ€§è¡¨é›†åˆã€‚ 2. ä»€ä¹ˆæ˜¯ç±»åŠ è½½å™¨ï¼Ÿè¯·ä½ è§£é‡Šä¸€ä¸‹javaç¨‹åºè¿è¡Œçš„è¿‡ç¨‹ï¼Ÿ å‚è€ƒ ï¼š ä¸€ä¸ªç®€å•javaç¨‹åºçš„è¿è¡Œå…¨è¿‡ç¨‹ ç±»åŠ è½½å™¨æ˜¯ä¸€ä¸ªç”¨æ¥åŠ è½½ç±»æ–‡ä»¶çš„ç±» ã€‚ æˆ‘ä»¬æ‰€è¯´çš„ç±»åŠ è½½è¿‡ç¨‹å³æ˜¯æŒ‡JVMè™šæ‹ŸæœºæŠŠ.classæ–‡ä»¶ä¸­ç±»ä¿¡æ¯åŠ è½½è¿›å†…å­˜ã€‚ä¸»è¦åˆ†ä¸ºä»¥ä¸‹3å¤§æ­¥ã€5å°æ­¥ï¼š ç¼–è¯‘ã€‚ å°†ç¼–è¯‘çš„.java æ–‡ä»¶ç¼–è¯‘ä¸º.classå­—èŠ‚ç æ–‡ä»¶ï¼Œç„¶åäº¤ç»™JVMè¿è¡Œï¼› åŠ è½½ ï¼šclasså­—èŠ‚ç æ–‡ä»¶ä»å„ä¸ªæ¥æºé€šè¿‡ç±»åŠ è½½å™¨è£…è½½å…¥å†…å­˜ä¸­ ã€‚ æ¥æºï¼šåŒ…æœ¬åœ°è·¯å¾„ä¸‹ç¼–è¯‘ç”Ÿæˆçš„.classæ–‡ä»¶ï¼Œä»jaråŒ…ä¸­çš„.classæ–‡ä»¶ï¼Œä»è¿œç¨‹ç½‘ç»œï¼Œä»¥åŠåŠ¨æ€ä»£ç†å®æ—¶ç¼–è¯‘ ç±»åŠ è½½å™¨ ï¼šä¸€èˆ¬åŒ…æ‹¬å¯åŠ¨ç±»åŠ è½½å™¨ï¼Œæ‰©å±•ç±»åŠ è½½å™¨ï¼Œç³»ç»Ÿç±»åŠ è½½å™¨ï¼Œä»¥åŠç”¨æˆ·çš„è‡ªå®šä¹‰ç±»åŠ è½½å™¨ ï¼ˆä»£ç åŠ å¯†é˜²æ­¢åç¼–è¯‘ï¼‰ã€‚ é“¾æ¥ï¼š åˆ†ä¸ºï¼ŒéªŒè¯ã€å‡†å¤‡ã€è§£æï¼ˆâ€æ­£-ä¸­-å‡†-å¿ƒâ€œï¼‰ä¸‰é˜¶æ®µ éªŒè¯ï¼š ä¿è¯åŠ è½½è¿›æ¥çš„å­—èŠ‚æµç¬¦åˆè™šæ‹Ÿæœºè§„èŒƒï¼› æ–‡ä»¶æ ¼å¼çš„éªŒè¯ï¼Œæ¯”å¦‚å¸¸é‡ä¸­æ˜¯å¦æœ‰ä¸è¢«æ”¯æŒçš„å¸¸é‡ï¼Ÿæ–‡ä»¶ä¸­æ˜¯å¦æœ‰ä¸è§„èŒƒçš„æˆ–è€…é™„åŠ çš„å…¶ä»–ä¿¡æ¯ï¼Ÿ å…ƒæ•°æ®çš„éªŒè¯ï¼Œæ¯”å¦‚è¯¥ç±»æ˜¯å¦ç»§æ‰¿äº†è¢«finalä¿®é¥°çš„ç±»ï¼Ÿç±»ä¸­çš„å­—æ®µï¼Œæ–¹æ³•æ˜¯å¦ä¸çˆ¶ç±»å†²çªï¼Ÿæ˜¯å¦å‡ºç°äº†ä¸åˆç†çš„é‡è½½ï¼Ÿ å­—èŠ‚ç çš„éªŒè¯ï¼Œä¿è¯ç¨‹åºè¯­ä¹‰çš„åˆç†æ€§ï¼Œæ¯”å¦‚è¦ä¿è¯ç±»å‹è½¬æ¢çš„åˆç†æ€§ã€‚ ç¬¦å·å¼•ç”¨çš„éªŒè¯ï¼Œæ¯”å¦‚æ ¡éªŒç¬¦å·å¼•ç”¨ä¸­é€šè¿‡å…¨é™å®šåæ˜¯å¦èƒ½å¤Ÿæ‰¾åˆ°å¯¹åº”çš„ç±»ï¼Ÿæ ¡éªŒç¬¦å·å¼•ç”¨ä¸­çš„è®¿é—®æ€§ï¼ˆprivateï¼Œpublicç­‰ï¼‰æ˜¯å¦å¯è¢«å½“å‰ç±»è®¿é—®ï¼Ÿ å‡†å¤‡ï¼šç±»å˜é‡ï¼ˆæ³¨æ„ï¼Œä¸æ˜¯å®ä¾‹å˜é‡ ï¼‰åˆ†é…å†…å­˜ï¼Œå¹¶ä¸”èµ‹äºˆåˆå€¼ï¼ˆè™šæ‹Ÿæœºæ ¹æ®ä¸åŒç±»å‹è®¾å®šçš„åˆå§‹å€¼ï¼‰ï¼› è¿™äº›å˜é‡æ‰€ä½¿ç”¨çš„å†…å­˜éƒ½å°†åœ¨æ–¹æ³•åŒºä¸­è¿›è¡Œåˆ†é… ï¼Œè¿›è¡Œé›¶åˆå§‹åŒ–ï¼š å³æ•°å­—ç±»å‹åˆå§‹åŒ–ä¸º 0 ï¼Œboolean åˆå§‹åŒ–ä¸º falseï¼Œå¼•ç”¨ç±»å‹åˆå§‹åŒ–ä¸º null ç­‰ è§£æï¼šå°†å¸¸é‡æ± å†…çš„ ç¬¦å·å¼•ç”¨ æ›¿æ¢ä¸º ç›´æ¥å¼•ç”¨ çš„è¿‡ç¨‹ã€‚ ç¬¦å·å¼•ç”¨ï¼šå³ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½†æ˜¯è¿™ä¸ªå­—ç¬¦ä¸²ç»™å‡ºäº†ä¸€äº›èƒ½å¤Ÿå”¯ä¸€æ€§è¯†åˆ«ä¸€ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªå˜é‡ï¼Œä¸€ä¸ªç±»çš„ç›¸å…³ä¿¡æ¯ã€‚ ç›´æ¥å¼•ç”¨ï¼šå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå†…å­˜åœ°å€ï¼Œæˆ–è€…ä¸€ä¸ªåç§»é‡ã€‚æ¯”å¦‚ç±»æ–¹æ³•ï¼Œç±»å˜é‡çš„ç›´æ¥å¼•ç”¨æ˜¯æŒ‡å‘æ–¹æ³•åŒºçš„æŒ‡é’ˆï¼›è€Œå®ä¾‹æ–¹æ³•ï¼Œå®ä¾‹å˜é‡çš„ç›´æ¥å¼•ç”¨åˆ™æ˜¯ä»å®ä¾‹çš„å¤´æŒ‡é’ˆå¼€å§‹ç®—èµ·åˆ°è¿™ä¸ªå®ä¾‹å˜é‡ä½ç½®çš„åç§»é‡ã€‚ ğŸŒ¾ å®ä¾‹ï¼š è°ƒç”¨æ–¹æ³•hello()ï¼Œæ–¹æ³•çš„åœ°å€æ˜¯1234567ï¼Œé‚£ä¹ˆhelloå°±æ˜¯ç¬¦å·å¼•ç”¨ï¼Œ1234567å°±æ˜¯ç›´æ¥å¼•ç”¨ã€‚ åˆå§‹åŒ–ã€‚ åˆå§‹åŒ–å°±æ˜¯æ‰§è¡Œç±»çš„ cinit()çš„è¿‡ç¨‹ã€‚ â” å’Œå‡†å¤‡é˜¶æ®µé‚£ä¸ªåˆå§‹åŒ–çœ‹å¾—æˆ‘æœ‰ç‚¹è¿·ç³Šï¼Ÿ åœ¨ç¼–è¯‘é˜¶æ®µï¼Œç¼–è¯‘å™¨æ”¶é›†æ‰€æœ‰çš„é™æ€å­—æ®µçš„èµ‹å€¼è¯­å¥åŠé™æ€ä»£ç å—ï¼Œå¹¶æŒ‰ è¯­å¥å‡ºç°çš„é¡ºåº æ‹¼æ¥å‡ºä¸€ä¸ªç±»åˆå§‹åŒ–æ–¹æ³• &lt;clinit&gt;()ã€‚æ­¤æ—¶ï¼Œæ‰§è¡Œå¼•æ“ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•å¯¹é™æ€å­—æ®µè¿›è¡Œä»£ç ä¸­ç¼–å†™çš„åˆå§‹åŒ–æ“ä½œã€‚ 3.çŸ¥é“ç±»çš„ç”Ÿå‘½å‘¨æœŸå—ï¼Ÿ åœ¨ç±»åŠ è½½çš„è¿‡ç¨‹å†åŠ ä¸Šï¼š ä½¿ç”¨ã€‚newå‡ºå¯¹è±¡ç¨‹åºä¸­ä½¿ç”¨ å¸è½½ã€‚æ‰§è¡Œåƒåœ¾å›æ”¶ 4.è¯·ä½ ä»‹ç»ä¸€ä¸‹ç±»åŠ è½½å™¨ï¼Ÿ JVMé¢„å®šä¹‰çš„ä¸‰ç§ç±»å‹ç±»åŠ è½½å™¨ï¼š å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆBootstrapClassLoaderï¼‰ï¼šæ˜¯ä¸€èˆ¬ç”¨æœ¬åœ°ä»£ç å®ç°ï¼Œè´Ÿè´£å°† &lt;Java_Runtime_Home&gt;/libä¸‹é¢çš„ç±»åº“åŠ è½½åˆ°å†…å­˜ä¸­ï¼› æ ‡å‡†æ‰©å±•ç±»åŠ è½½å™¨ï¼ˆExtensionClassLoaderï¼‰ï¼š&lt; Java_Runtime_Home &gt;/lib/extæˆ–è€…ç”±ç³»ç»Ÿå˜é‡ java.ext.diræŒ‡å®šä½ç½®ä¸­çš„ç±»åº“åŠ è½½åˆ°å†…å­˜ä¸­ï¼› ç³»ç»Ÿç±»åŠ è½½å™¨ï¼ˆAppClassLoaderï¼‰ï¼šåˆå«åº”ç”¨ç±»åŠ è½½å™¨ï¼Œå…¶çˆ¶ç±»æ˜¯Extensionã€‚å®ƒæ˜¯åº”ç”¨æœ€å¹¿æ³›çš„ç±»åŠ è½½å™¨ã€‚å®ƒä»ç¯å¢ƒå˜é‡æˆ–è€…ç³»ç»Ÿå±æ€§java.class.pathæ‰€æŒ‡å®šçš„ç›®å½•ä¸­åŠ è½½ç±»ï¼Œæ˜¯ç”¨æˆ·è‡ªå®šä¹‰åŠ è½½å™¨çš„é»˜è®¤çˆ¶åŠ è½½å™¨ã€‚ 5.è¯·ä½ ä»‹ç»ä¸€ä¸‹åŒäº²å§”æ´¾æœºåˆ¶ï¼Ÿä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿ åŒäº²å§”æ´¾æœºåˆ¶ã€‚æŸä¸ªç‰¹å®šçš„ç±»åŠ è½½å™¨åœ¨æ¥åˆ°åŠ è½½ç±»çš„è¯·æ±‚æ—¶ï¼Œé¦–å…ˆå°†åŠ è½½ä»»åŠ¡å§”æ‰˜ç»™çˆ¶ç±»åŠ è½½å™¨ï¼Œä¾æ¬¡é€’å½’ï¼Œå¦‚æœçˆ¶ç±»åŠ è½½å™¨å¯ä»¥å®Œæˆç±»åŠ è½½ä»»åŠ¡ï¼Œå°±æˆåŠŸè¿”å›ï¼›åªæœ‰çˆ¶ç±»åŠ è½½å™¨æ— æ³•å®Œæˆæ­¤åŠ è½½ä»»åŠ¡æ—¶ï¼Œæ‰è‡ªå·±å»åŠ è½½ï¼› ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿé˜²æ­¢å†…å­˜ä¸­å‡ºç°å¤šä»½åŒæ ·çš„å­—èŠ‚ç  ã€‚ æ¯”å¦‚ä¸¤ä¸ªç±»Aå’Œç±»Béƒ½è¦åŠ è½½Systemç±»ï¼š å¦‚æœä¸ç”¨å§”æ‰˜ï¼šè€Œæ˜¯è‡ªå·±åŠ è½½è‡ªå·±çš„ï¼Œé‚£ä¹ˆç±»Aå°±ä¼šåŠ è½½ä¸€ä»½Systemå­—èŠ‚ç ï¼Œç„¶åç±»Båˆä¼šåŠ è½½ä¸€ä»½Systemå­—èŠ‚ç ï¼Œè¿™æ ·å†…å­˜ä¸­å°±å‡ºç°äº†ä¸¤ä»½Systemå­—èŠ‚ç ã€‚ å¦‚æœä½¿ç”¨å§”æ‰˜æœºåˆ¶ï¼šä¼šé€’å½’çš„å‘çˆ¶ç±»æŸ¥æ‰¾ï¼Œä¹Ÿå°±æ˜¯é¦–é€‰ç”¨Bootstrapå°è¯•åŠ è½½ï¼Œå¦‚æœæ‰¾ä¸åˆ°å†å‘ä¸‹ã€‚è¿™é‡Œçš„Systemå°±èƒ½åœ¨Bootstrapä¸­æ‰¾åˆ°ç„¶ååŠ è½½ï¼Œå¦‚æœæ­¤æ—¶ç±»Bä¹Ÿè¦åŠ è½½Systemï¼Œä¹Ÿä»Bootstrapå¼€å§‹ï¼Œæ­¤æ—¶Bootstrapå‘ç°å·²ç»åŠ è½½è¿‡äº†Systemé‚£ä¹ˆç›´æ¥è¿”å›å†…å­˜ä¸­çš„Systemå³å¯è€Œä¸éœ€è¦é‡æ–°åŠ è½½ï¼Œè¿™æ ·å†…å­˜ä¸­å°±åªæœ‰ä¸€ä»½Systemçš„å­—èŠ‚ç äº†ã€‚ 5.1 å¦‚ä½•è‡ªå®šä¹‰ç±»åŠ è½½å™¨ ï¼Œå¦‚ä½•æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶ ï¼Ÿ è‡ªå®šä¹‰ç±»åŠ è½½å™¨ &amp; æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶ åœ¨å®ç°è‡ªå·±çš„ClassLoaderä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹JDKä¸­çš„ClassLoaderæ˜¯æ€ä¹ˆå®ç°çš„ï¼š 1234567891011121314151617181920212223 1 protected synchronized Class&lt;?&gt; loadClass(String name, boolean resolve) 2 throws ClassNotFoundException 3 &#123; 4 // First, check if the class has already been loaded 5 Class c = findLoadedClass(name); 6 if (c == null) &#123; 7 try &#123; 8 if (parent != null) &#123; 9 c = parent.loadClass(name, false);10 &#125; else &#123;11 c = findBootstrapClass0(name);12 &#125;13 &#125; catch (ClassNotFoundException e) &#123;14 // If still not found, then invoke findClass in order15 // to find the class.16 c = findClass(name);17 &#125;18 &#125;19 if (resolve) &#123;20 resolveClass(c);21 &#125;22 return c;23 &#125; 1ã€å¦‚æœä¸æƒ³æ‰“ç ´åŒäº²å§”æ´¾æ¨¡å‹ï¼Œé‚£ä¹ˆåªéœ€è¦é‡å†™findClassæ–¹æ³•å³å¯ ï¼ˆ1ï¼‰ç»§æ‰¿ClassLoader ï¼ˆ2ï¼‰é‡å†™findClass()æ–¹æ³• 2ã€å¦‚æœæƒ³æ‰“ç ´åŒäº²å§”æ´¾æ¨¡å‹ï¼Œé‚£ä¹ˆå°±é‡å†™æ•´ä¸ªloadClassæ–¹æ³• ï¼ˆ1ï¼‰ç»§æ‰¿ClassLoader ï¼ˆ2ï¼‰é‡å†™findClass()æ–¹æ³•6 ï¼ˆ3ï¼‰è°ƒç”¨defineClass()æ–¹æ³• tomcat ä¸ºä»€ä¹ˆè¦è¿èƒŒåŒäº²å§”æ‰˜æœºåˆ¶ï¼Ÿ åŒäº²å§”æ‰˜æœºåˆ¶ä¸èƒ½æ»¡è¶³tomcatçš„ä¸šåŠ¡éœ€æ±‚ï¼› Webappç±»åŠ è½½å™¨éœ€è¦ç‹¬ç«‹åŠ è½½è‡ªèº«çš„classä»¥åŠä¾èµ–çš„jarï¼› ä¾‹å¦‚ï¼Œwebapp1ä¾èµ–çš„springç‰ˆæœ¬ä¸º4.xï¼Œå¦ä¸€ä¸ªwebapp2ä¾èµ–çš„springç‰ˆæœ¬ä¸º5.x. å¦‚æœä½¿ç”¨åŒäº²å§”æ‰˜ï¼Œé‚£ä¹ˆspringçš„ç‰ˆæœ¬åªèƒ½å­˜åœ¨ä¸€ä¸ªï¼Œæ²¡æ³•æ»¡è¶³è¿™ä¸ªéœ€æ±‚ã€‚","categories":[{"name":"æ ¡æ‹›ç¬”è®°","slug":"æ ¡æ‹›ç¬”è®°","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/"},{"name":"JAVA","slug":"æ ¡æ‹›ç¬”è®°/JAVA","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/JAVA/"}],"tags":[{"name":"JAVA","slug":"JAVA","permalink":"https://hwh.zone/tags/JAVA/"},{"name":"æ ¡æ‹›","slug":"æ ¡æ‹›","permalink":"https://hwh.zone/tags/%E6%A0%A1%E6%8B%9B/"}]},{"title":"æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰_Java_é”","slug":"æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰_Java_é”","date":"2021-11-26T12:03:48.668Z","updated":"2021-12-03T03:57:29.165Z","comments":true,"path":"p/45493/","link":"","permalink":"https://hwh.zone/p/45493/","excerpt":"","text":"æˆ‘çš„æ ¡æ‹›è®°å½•ï¼šæ ¡æ‹›ç¬”è®°ï¼ˆé›¶ï¼‰_å†™åœ¨å‰é¢ ï¼Œä»¥ä¸‹æ˜¯æ ¡æ‹›ç¬”è®°æ€»ç›®å½•ã€‚ å¤‡æ³¨ ç®—æ³•èƒ½åŠ›ï¼ˆâ€œåˆ·é¢˜â€ï¼‰ è¿™éƒ¨åˆ†å°±æ˜¯è€—æ—¶é—´å¤šç»ƒä¹ ï¼ŒLeetcode-Top100 æ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚ è¡¥å……ç»ƒä¹ ï¼šcodeTop è®¡ç®—æœºåŸºç¡€(ä¸Š)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_Javaå…¥é—¨ C++åç«¯åç»­æ›´æ–° æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é¢å¯¹å¯¹è±¡ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é›†åˆ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_å¤šçº¿ç¨‹ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é” æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_JVM è®¡ç®—æœºåŸºç¡€(ä¸‹)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆäºŒï¼‰__è®¡ç®—æœºåŸºç¡€_Linux&amp;Git æ ¡æ‹›ç¬”è®°ï¼ˆä¸‰ï¼‰__è®¡ç®—æœºåŸºç¡€_è®¡ç®—æœºç½‘ç»œ æ ¡æ‹›ç¬”è®°ï¼ˆå››ï¼‰__è®¡ç®—æœºåŸºç¡€_æ“ä½œç³»ç»Ÿ æ ¡æ‹›ç¬”è®°ï¼ˆäº”ï¼‰__è®¡ç®—æœºåŸºç¡€_MySQL æ ¡æ‹›ç¬”è®°ï¼ˆå…­ï¼‰__è®¡ç®—æœºåŸºç¡€_Redis æ ¡æ‹›ç¬”è®°ï¼ˆä¸ƒï¼‰__è®¡ç®—æœºåŸºç¡€_æ•°æ®ç»“æ„ æ ¡æ‹›ç¬”è®°ï¼ˆå…«ï¼‰__è®¡ç®—æœºåŸºç¡€_åœºæ™¯&amp;æ™ºåŠ›é¢˜ æ ¡æ‹›ç¬”è®°ï¼ˆä¹ï¼‰__è®¡ç®—æœºåŸºç¡€_ç›¸å…³è¡¥å…… é¡¹ç›®&amp;å®ä¹  ä¸»è¦æ˜¯æ€ä¹ˆå‡†å¤‡é¡¹ç›®ï¼Œåç»­æ›´æ–° 1.5 é” ã€æ–°å¢ã€‘ javaå¸¸ç”¨çš„å¹¶å‘å·¥å…·ç±»ï¼Ÿ è¿™ç¯‡ä¸é”™ï¼šã€Šä»Šå¤©é¢è¯•äº†å—ã€‹- å¹¶å‘ç¼–ç¨‹ä¹‹AQSåŒæ­¥å·¥å…·ç±» JUCå°±æ˜¯java.util.concurrentåŒ…ï¼Œè¿™ä¸ªåŒ…ä¿—ç§°JUCï¼Œé‡Œé¢éƒ½æ˜¯è§£å†³å¹¶å‘é—®é¢˜ã€‚ å¸¸ç”¨å››å¤§å¹¶å‘å·¥å…·åŒ…ï¼ˆä»¥ä¸‹éƒ½æ˜¯åŸºäºAQSå®ç°çš„ï¼‰ï¼š CountDownLatchï¼š CyclicBarrieræè¿°çš„æ˜¯â€œå…è®¸ä¸€ç»„çº¿ç¨‹ç›¸äº’ç­‰å¾…ï¼Œç›´åˆ°åˆ°è¾¾æŸä¸ªå…¬å…±å±éšœç‚¹ï¼Œæ‰ä¼šè¿›è¡Œåç»­ä»»åŠ¡â€ã€‚ è€ŒCountDownLatchæ‰€æè¿°çš„æ˜¯â€œåœ¨å®Œæˆä¸€ç»„æ­£åœ¨å…¶ä»–çº¿ç¨‹ä¸­æ‰§è¡Œçš„æ“ä½œä¹‹å‰ï¼Œå®ƒå… ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ä¸€ç›´ç­‰å¾…â€ã€‚ åœ¨APIä¸­æ˜¯è¿™æ ·æè¿°çš„ï¼šç”¨ç»™å®šçš„è®¡æ•°åˆå§‹CountDownLatchã€‚ç”±äºè°ƒç”¨äº†countDownæ–¹æ³•ï¼Œæ‰€ä»¥åœ¨å½“å‰è®¡æ•°åˆ°è¾¾é›¶ä¹‹å‰ï¼Œawaitæ–¹æ³•ä¼šä¸€ç›´å—é˜»å¡ã€‚ä¹‹åï¼Œä¼šé‡Šæ”¾æ‰€æœ‰ç­‰å¾…çš„çº¿ç¨‹ï¼Œawaitçš„æ‰€æœ‰åç»­è°ƒç”¨éƒ½å°†ç«‹å³è¿”å›ã€‚è¿™ç§ç°è±¡åªå‡ºç°ä¸€æ¬¡ï¼ˆè®¡æ•°æ— æ³•è¢«é‡ç½®ã€‚å¦‚æœéœ€è¦é‡ç½®è®¡æ•°ï¼Œè¯·è€ƒè™‘ä½¿CyclicBarrierï¼‰ã€‚ CyclicBarrierï¼šCyclicBarrieræ˜¯ä¸€ä¸ªåŒæ­¥è¾…åŠ©ç±»ã€‚å®ƒå…è®¸ä¸€ç»„çº¿ç¨‹äº’ç›¸ç­‰å¾…ï¼Œç›´åˆ°åˆ°è¾¾æŸä¸ªå…¬å…±å±éšœç‚¹ã€‚åœ¨æ¶‰åŠä¸€ç»„å›ºå®šå¤§å°çš„çº¿ç¨‹çš„ç¨‹åºé‡Œï¼Œè¿™äº›çº¿ç¨‹å¿…é¡»ä¸æ—¶çš„äº’ç›¸ç­‰å¾…ï¼Œæ­¤æ—¶CyclicBarrier å¾ˆæœ‰ç”¨ã€‚å› ä¸ºCyclicBarrieråœ¨é‡Šæ”¾ç­‰å¾…çº¿ç¨‹åå¯ä»¥é‡ç”¨ï¼Œå› æ­¤æˆä¸ºå¾ªç¯çš„å±éšœã€‚ ä½¿ç”¨**await()**æ–¹æ³•ï¼Œæ¯ä¸ªçº¿ç¨‹è°ƒç”¨await()æ–¹æ³•å‘Šè¯‰CyclicBarrier æˆ‘å·²ç»åˆ°è¾¾äº†å±éšœï¼Œç„¶åå½“å‰çº¿ç¨‹è¢«é˜»å¡ã€‚å½“æ‰€æœ‰çº¿ç¨‹éƒ½åˆ°è¾¾äº†å±éšœï¼Œç»“æŸé˜»å¡ï¼Œæ‰€æœ‰çº¿ç¨‹å¯ç»§ç»­æ‰§è¡Œåç»­é€»è¾‘ã€‚ Semaphoreï¼šä¿¡å·é‡Semaphoreæ˜¯ä¸€ä¸ªæ§åˆ¶è®¿é—®å¤šä¸ªå…±äº«èµ„æºçš„è®¡æ•°å™¨ï¼Œå’ŒCountDownLatchä¸€æ ·ï¼Œå…¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªâ€œå…±äº«é”â€ã€‚åœ¨APIæ˜¯è¿™ä¹ˆä»‹ç»ä¿¡å·é‡çš„ï¼šä¸€ä¸ªè®¡æ•°ä¿¡å·é‡ï¼Œä»æ¦‚å¿µä¸Šè®²ï¼Œä¿¡å·é‡ç»´æŠ¤äº†ä¸€ä¸ªè®¸å¯é›†ã€‚ ExChanger ï¼šExchangeræ˜¯ä¸€ä¸ªåŒæ­¥å™¨ï¼Œå­—é¢ä¸Šå°±å¯ä»¥çœ‹å‡ºè¿™ä¸ªç±»çš„ä¸»è¦ä½œç”¨æ˜¯äº¤æ¢æ•°æ®ã€‚Exchangeræœ‰ç‚¹ç±»ä¼¼CyclicBarrierï¼Œå‰é¢è¯´åˆ°CyclicBarrieræ˜¯ä¸€ä¸ªæ …æ ï¼Œåˆ°è¾¾æ …æ çš„ çº¿ç¨‹éœ€è¦ç­‰å¾…ä¸€å®šæ•°é‡çš„çº¿ç¨‹åˆ°è¾¾åï¼Œæ‰èƒ½é€šè¿‡æ …æ ã€‚Exchangerå¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªåŒå‘çš„æ …æ ã€‚çº¿ç¨‹1åˆ°è¾¾æ …æ åï¼Œä¼šé¦–å…ˆè§‚å¯Ÿæœ‰æ²¡æœ‰å…¶ä»–çº¿ç¨‹å·²ç»åˆ°è¾¾æ …æ ï¼Œå¦‚æœæ²¡æœ‰å°±ä¼šç­‰å¾…ã€‚å¦‚æœå·²ç»æœ‰å…¶ä»–çº¿ç¨‹ï¼ˆæ¯”å¦‚çº¿ç¨‹2ï¼‰åˆ°è¾¾äº†ï¼Œå°±ä¼šä»¥æˆå¯¹çš„æ–¹å¼äº¤æ¢å„è‡ªæºå¸¦çš„ä¿¡æ¯ï¼Œå› æ­¤Exchangeréå¸¸é€‚åˆä¸¤ä¸ªçº¿ç¨‹ä¹‹é—´çš„æ•°æ®äº¤æ¢ã€‚ 1.5.1 synchronized ç›¸å…³ 1.1 [é‡ç‚¹]è¯´ä¸€è¯´è‡ªå·±å¯¹äº synchronized å…³é”®å­—çš„äº†è§£? synchronized åº•å±‚åŸç† ? å‚è€ƒï¼šJavaé¢è¯•å¸¸è§é—®é¢˜ï¼šMonitorå¯¹è±¡æ˜¯ä»€ä¹ˆï¼Ÿ æ·±å…¥åˆ†æSynchronizedåŸç†(é˜¿é‡Œé¢è¯•é¢˜) åŸºæœ¬äº†è§£ synchronizedå…³é”®å­—è§£å†³çš„æ˜¯å¤šä¸ªçº¿ç¨‹ä¹‹é—´è®¿é—®èµ„æºçš„åŒæ­¥æ€§ï¼Œsynchronizedå…³é”®å­—å¯ä»¥ä¿è¯è¢«å®ƒä¿®é¥°çš„æ–¹æ³•æˆ–è€…ä»£ç å—åœ¨ä»»æ„æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œã€‚ synchronizedå±äºé‡é‡çº§é”ï¼Œæ•ˆç‡ä½ä¸‹ï¼Œå› ä¸ºç›‘è§†å™¨é”ï¼ˆmonitorï¼‰æ˜¯ä¾èµ–äºåº•å±‚çš„æ“ä½œç³»ç»Ÿçš„Mutex Lock æ¥å®ç°çš„ï¼› Java çš„çº¿ç¨‹æ˜¯æ˜ å°„åˆ°æ“ä½œç³»ç»Ÿçš„åŸç”Ÿçº¿ç¨‹ä¹‹ä¸Šçš„ã€‚å¦‚æœè¦æŒ‚èµ·æˆ–è€…å”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼Œéƒ½éœ€è¦æ“ä½œç³»ç»Ÿå¸®å¿™å®Œæˆï¼Œè€Œæ“ä½œç³»ç»Ÿå®ç°çº¿ç¨‹ä¹‹é—´çš„åˆ‡æ¢æ—¶éœ€è¦ä»ç”¨æˆ·æ€è½¬æ¢åˆ°å†…æ ¸æ€ï¼Œè¿™ä¸ªçŠ¶æ€ä¹‹é—´çš„è½¬æ¢éœ€è¦ç›¸å¯¹æ¯”è¾ƒé•¿çš„æ—¶é—´ï¼Œæ—¶é—´æˆæœ¬ç›¸å¯¹è¾ƒé«˜ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæ—©æœŸçš„synchronizedæ•ˆç‡ä½çš„åŸå› ã€‚ moniterä»‹ç» Monitorå¯¹è±¡å­˜åœ¨äºæ¯ä¸ªJavaå¯¹è±¡çš„å¯¹è±¡å¤´Mark Wordä¸­ï¼ˆå­˜å‚¨çš„æŒ‡é’ˆçš„æŒ‡å‘ï¼‰ï¼ŒSynchronizedé”ä¾¿æ˜¯é€šè¿‡è¿™ç§æ–¹å¼è·å–é”çš„ï¼Œä¹Ÿæ˜¯ä¸ºä»€ä¹ˆJavaä¸­ä»»æ„å¯¹è±¡å¯ä»¥ä½œä¸ºé”çš„åŸå› ï¼ŒåŒæ—¶notify/notifyAll/waitç­‰æ–¹æ³•ä¼šä½¿ç”¨åˆ°Monitoré”å¯¹è±¡ï¼Œæ‰€ä»¥å¿…é¡»åœ¨åŒæ­¥ä»£ç å—ä¸­ä½¿ç”¨ã€‚ åœ¨HotSpotè™šæ‹Ÿæœºä¸­ï¼ŒMonitoræ˜¯åŸºäºC++çš„ObjectMonitorç±»å®ç°çš„ï¼Œå…¶ä¸»è¦æˆå‘˜åŒ…æ‹¬ï¼š _ownerï¼šæŒ‡å‘æŒæœ‰ObjectMonitorå¯¹è±¡çš„çº¿ç¨‹ _WaitSetï¼šå­˜æ”¾å¤„äºwaitçŠ¶æ€çš„çº¿ç¨‹é˜Ÿåˆ—ï¼Œå³è°ƒç”¨wait()æ–¹æ³•çš„çº¿ç¨‹ EntryListï¼šå­˜æ”¾å¤„äºç­‰å¾…é”blockçŠ¶æ€çš„çº¿ç¨‹é˜Ÿåˆ— _countï¼šçº¦ä¸º_WaitSet å’Œ _EntryList çš„èŠ‚ç‚¹æ•°ä¹‹å’Œ _cxq: å¤šä¸ªçº¿ç¨‹äº‰æŠ¢é”ï¼Œä¼šå…ˆå­˜å…¥è¿™ä¸ªå•å‘é“¾è¡¨ _recursions: è®°å½•é‡å…¥æ¬¡æ•° åº•å±‚åŸç† synchronized å…³é”®å­—åº•å±‚åŸç†å±äº JVM å±‚é¢ã€‚ â‘  synchronizedåŒæ­¥è¯­å¥å—çš„æƒ…å†µ 1234567public class SynchronizedDemo &#123; public void method() &#123; synchronized (this) &#123; System.out.println(&quot;synchronized ä»£ç å—&quot;); &#125; &#125;&#125; é€šè¿‡ JDK â¾ƒå¸¦çš„ javap å‘½ä»¤æŸ¥çœ‹ SynchronizedDemo ç±»çš„ç›¸å…³å­—èŠ‚ç ä¿¡æ¯ï¼š â¾¸å…ˆåˆ‡æ¢åˆ°ç±»çš„å¯¹åº”â½¬å½•æ‰§è¡Œ javac SynchronizedDemo.java å‘½ä»¤â½£æˆç¼–è¯‘åçš„ .class â½‚ä»¶ï¼Œç„¶åæ‰§è¡Œ javap -c -s-v -l SynchronizedDemo.class synchronizedåŒæ­¥è¯­å¥å—çš„å®ç°ä½¿ç”¨çš„æ˜¯monitorenterå’Œ monitorexitæŒ‡ä»¤ï¼Œå…¶ä¸­monitorenteræŒ‡ä»¤æŒ‡å‘åŒæ­¥ä»£ç å—çš„å¼€å§‹ä½ç½®ï¼ŒmonitorexitæŒ‡ä»¤åˆ™æŒ‡æ˜åŒæ­¥ä»£ç å—çš„ç»“æŸä½ç½®ã€‚ å½“æ‰§è¡Œmonitorenter æŒ‡ä»¤æ—¶ï¼Œçº¿ç¨‹è¯•å›¾è·å–é”ä¹Ÿå°±æ˜¯è·å– monitorçš„æŒæœ‰æƒã€‚å½“è®¡æ•°å™¨ä¸º0åˆ™å¯ä»¥æˆåŠŸè·å–ï¼Œè·å–åå°†é”è®¡æ•°å™¨è®¾ä¸º1ä¹Ÿå°±æ˜¯åŠ 1 ; monitorå¯¹è±¡å­˜åœ¨äºæ¯ä¸ªJavaå¯¹è±¡çš„å¯¹è±¡å¤´ä¸­ synchronized é”ä¾¿æ˜¯é€šè¿‡è¿™ç§æ–¹å¼è·å–é”çš„ï¼Œä¹Ÿæ˜¯ä¸ºä»€ä¹ˆJavaä¸­ä»»æ„å¯¹è±¡å¯ä»¥ä½œä¸ºé”çš„åŸå› ã€‚ ç›¸åº”çš„åœ¨æ‰§è¡Œmonitorexit æŒ‡ä»¤åï¼Œå°†é”è®¡æ•°å™¨è®¾ä¸º0ï¼Œè¡¨æ˜é”è¢«é‡Šæ”¾ï¼› å¦‚æœè·å–å¯¹è±¡é”å¤±è´¥ï¼Œé‚£å½“å‰çº¿ç¨‹å°±è¦é˜»å¡ç­‰å¾…ï¼Œç›´åˆ°é”è¢«å¦å¤–â¼€ä¸ªçº¿ç¨‹é‡Šæ”¾ä¸ºâ½Œã€‚ â‘¡ synchronizedä¿®é¥°æ–¹æ³•çš„çš„æƒ…å†µ 12345public class SynchronizedDemo2 &#123; public synchronized void method() &#123; System.out.println(&quot;synchronized æ–¹æ³•&quot;); &#125; &#125; synchronized ä¿®é¥°çš„æ–¹æ³•å¹¶æ²¡æœ‰ monitorenter æŒ‡ä»¤å’Œ monitorexit æŒ‡ä»¤ï¼Œå–å¾—ä»£ä¹‹çš„ç¡®å®æ˜¯ACC_SYNCHRONIZED æ ‡è¯†ï¼Œè¯¥æ ‡è¯†æŒ‡æ˜äº†è¯¥æ–¹æ³•æ˜¯â¼€ä¸ªåŒæ­¥æ–¹æ³•ï¼ŒJVM é€šè¿‡è¯¥ ACC_SYNCHRONIZED è®¿é—®ã€‚ å½“æ–¹æ³•è°ƒç”¨æ—¶ï¼Œè°ƒç”¨æŒ‡ä»¤å°†ä¼šæ£€æŸ¥æ–¹æ³•çš„ ACC_SYNCHRONIZED è®¿é—®æ ‡å¿—æ˜¯å¦è¢«è®¾ç½®ï¼Œå¦‚æœè®¾ç½®äº†ï¼Œæ‰§è¡Œçº¿ç¨‹å°†å…ˆè·å–monitorï¼Œè·å–æˆåŠŸä¹‹åæ‰èƒ½æ‰§è¡Œæ–¹æ³•ä½“ï¼Œæ–¹æ³•æ‰§è¡Œå®Œåå†é‡Šæ”¾monitorã€‚åœ¨æ–¹æ³•æ‰§è¡ŒæœŸé—´ï¼Œå…¶ä»–ä»»ä½•çº¿ç¨‹éƒ½æ— æ³•å†è·å¾—åŒä¸€ä¸ªmonitorå¯¹è±¡ã€‚ ä¸¤ç§åŒæ­¥æ–¹å¼æœ¬è´¨ä¸Šæ²¡æœ‰åŒºåˆ«ï¼Œåªæ˜¯æ–¹æ³•çš„åŒæ­¥æ˜¯ä¸€ç§éšå¼çš„æ–¹å¼æ¥å®ç°ï¼Œæ— éœ€é€šè¿‡å­—èŠ‚ç æ¥å®Œæˆã€‚ä¸¤ä¸ªæŒ‡ä»¤çš„æ‰§è¡Œæ˜¯JVMé€šè¿‡è°ƒç”¨æ“ä½œç³»ç»Ÿçš„äº’æ–¥åŸè¯­mutexæ¥å®ç°ï¼Œè¢«é˜»å¡çš„çº¿ç¨‹ä¼šè¢«æŒ‚èµ·ã€ç­‰å¾…é‡æ–°è°ƒåº¦ï¼Œä¼šå¯¼è‡´â€œç”¨æˆ·æ€å’Œå†…æ ¸æ€â€ä¸¤ä¸ªæ€ä¹‹é—´æ¥å›åˆ‡æ¢ï¼Œå¯¹æ€§èƒ½æœ‰è¾ƒå¤§å½±å“ã€‚ 1.2 è¯·ä½ è°ˆè°ˆå…³äºSynchronizedå’ŒReentrantLockï¼Ÿ ç›¸ä¼¼ç‚¹ éƒ½æ˜¯é˜»å¡å¼åŒæ­¥ï¼šä¸€ä¸ªçº¿ç¨‹è·å¾—äº†å¯¹è±¡é”ï¼Œè¿›å…¥äº†åŒæ­¥å—ï¼Œå…¶ä»–è®¿é—®è¯¥åŒæ­¥å—çš„çº¿ç¨‹éƒ½å¿…é¡»é˜»å¡åœ¨åŒæ­¥å—å¤–é¢ç­‰å¾…ï¼› çº¿ç¨‹é˜»å¡å’Œå”¤é†’çš„ä»£ä»·æ˜¯æ¯”è¾ƒé«˜çš„ï¼ˆæ“ä½œç³»ç»Ÿéœ€è¦åœ¨ç”¨æˆ·æ€ä¸å†…æ ¸æ€ä¹‹é—´æ¥å›åˆ‡æ¢ï¼Œä»£ä»·å¾ˆé«˜ï¼Œä¸è¿‡å¯ä»¥é€šè¿‡å¯¹é”ä¼˜åŒ–è¿›è¡Œæ”¹å–„ï¼‰ã€‚ éƒ½æ˜¯å¯é‡å…¥é”ï¼šæ˜¯åŒä¸€ä¸ªçº¿ç¨‹å¯é‡å¤è·å¾—é”ï¼Œæ¯è·å¾—ä¸€æ¬¡ï¼Œé”çš„è®¡æ•°å™¨éƒ½è‡ªå¢1ï¼Œæ‰€ä»¥è¦ç­‰åˆ°é”çš„è®¡æ•°å™¨ä¸‹é™ä¸º0æ—¶æ‰èƒ½é‡Šæ”¾é”ã€‚ ä¸åŒç‚¹ å®ç°åŸç†ï¼š Synchronizedæ˜¯javaè¯­è¨€çš„å…³é”®å­—ï¼Œæ˜¯åŸç”Ÿè¯­æ³•å±‚é¢çš„äº’æ–¥ï¼Œ JVM å±‚é¢ï¼›ReentrantLockæ˜¯JDK 1.5åçš„APIå±‚é¢çš„äº’æ–¥é”ï¼Œéœ€è¦lock()å’Œunlock()æ–¹æ³•é…åˆtry/finallyè¯­å¥å—æ¥å®Œæˆï¼› æ˜¯å¦é¿å…æ­»é”ï¼š synchronizedåœ¨å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œä¼šè‡ªåŠ¨é‡Šæ”¾çº¿ç¨‹å æœ‰çš„é”ï¼Œå› æ­¤ä¸ä¼šå¯¼è‡´æ­»é”ç°è±¡å‘ç”Ÿï¼›Lockä¸ä¼šä¸»åŠ¨é€‚åº” unLock() é‡Šæ”¾ï¼Œå¿…é¡»æ‰‹åŠ¨åœ¨finallyé‡Šæ”¾ï¼›ç›¸â½synchronizedï¼ŒReentrantLockå¢åŠ äº†â¼€äº›é«˜çº§åŠŸèƒ½ã€‚ä¸»è¦æ¥è¯´ä¸»è¦æœ‰ä¸‰ç‚¹ï¼šâ‘ ç­‰å¾…å¯ä¸­æ–­ï¼›â‘¡å¯å®ç°å…¬å¹³é”ï¼›â‘¢å¯å®ç°é€‰æ‹©æ€§é€šçŸ¥ï¼ˆé”å¯ä»¥ç»‘å®šå¤šä¸ªæ¡ä»¶ï¼‰ çº¿ç¨‹ç­‰å¾…å¯ä¸­æ–­ï¼š Lockå¯ä»¥è®©ç­‰å¾…é”çš„çº¿ç¨‹å“åº”ä¸­æ–­ï¼Œçº¿ç¨‹å¯ä»¥ä¸­æ–­å»å¹²åˆ«çš„äº‹åŠ¡ï¼›è€Œsynchronizedå´ä¸è¡Œï¼Œä½¿ç”¨synchronizedæ—¶ï¼Œç­‰å¾…çš„çº¿ç¨‹ä¼šä¸€ç›´ç­‰å¾…ä¸‹å»ï¼› å…¬å¹³é”ï¼š synchronizedçš„é”æ˜¯éå…¬å¹³é”ï¼ŒReentrantLocké»˜è®¤æƒ…å†µä¸‹ä¹Ÿæ˜¯éå…¬å¹³é”ï¼Œä½†å¯ä»¥é€šè¿‡å¸¦å¸ƒå°”å€¼çš„æ„é€ å‡½æ•°è¦æ±‚ä½¿ç”¨å…¬å¹³é”ï¼› é€‰æ‹©æ€§é€šçŸ¥ï¼š synchronizedå…³é”®å­—ä¸wait()å’Œnotify()/notifyAll()æ–¹æ³•ç›¸ç»“åˆå¯ä»¥å®ç°ç­‰å¾…/é€šçŸ¥æœºåˆ¶ï¼ŒReentrantLockç±»å½“ç„¶ä¹Ÿå¯ä»¥å®ç°ï¼Œä½†æ˜¯éœ€è¦å€ŸåŠ©äºConditionæ¥å£ä¸newCondition() æ–¹æ³•ã€‚ Conditionæ˜¯JDK1.5ä¹‹åæ‰æœ‰çš„ï¼Œå®ƒå…·æœ‰å¾ˆå¥½çš„çµæ´»æ€§ï¼Œâ½å¦‚å¯ä»¥å®ç°å¤šè·¯é€šçŸ¥åŠŸèƒ½ä¹Ÿå°±æ˜¯åœ¨â¼€ä¸ªLockå¯¹è±¡ä¸­å¯ä»¥åˆ›å»ºå¤šä¸ªConditionå®ä¾‹ï¼ˆå³å¯¹è±¡ç›‘è§†å™¨ï¼‰ï¼Œçº¿ç¨‹å¯¹è±¡å¯ä»¥æ³¨å†Œåœ¨æŒ‡å®šçš„Conditionä¸­ï¼Œä»è€Œå¯ä»¥æœ‰é€‰æ‹©æ€§çš„è¿›è¡Œçº¿ç¨‹é€šçŸ¥ï¼Œåœ¨è°ƒåº¦çº¿ç¨‹ä¸Šæ›´åŠ çµæ´»ã€‚ åœ¨ä½¿â½¤notify()/notifyAll()æ–¹æ³•è¿›è¡Œé€šçŸ¥æ—¶ï¼Œè¢«é€šçŸ¥çš„çº¿ç¨‹æ˜¯ç”± JVM é€‰æ‹©çš„ï¼Œâ½¤ReentrantLockç±»ç»“åˆConditionå®ä¾‹å¯ä»¥å®ç°â€œé€‰æ‹©æ€§é€šçŸ¥â€ ï¼Œè¿™ä¸ªåŠŸèƒ½éå¸¸é‡è¦ï¼Œè€Œä¸”æ˜¯Conditionæ¥å£é»˜è®¤æä¾›çš„ã€‚è€Œsynchronizedå…³é”®å­—å°±ç›¸å½“äºæ•´ä¸ªLockå¯¹è±¡ä¸­åªæœ‰â¼€ä¸ªConditionå®ä¾‹ï¼Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½æ³¨å†Œåœ¨å®ƒâ¼€ä¸ªèº«ä¸Šã€‚å¦‚æœæ‰§è¡ŒnotifyAll()æ–¹æ³•çš„è¯å°±ä¼šé€šçŸ¥æ‰€æœ‰å¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹è¿™æ ·ä¼šé€ æˆå¾ˆå¤§çš„æ•ˆç‡é—®é¢˜ï¼Œè€ŒConditionå®ä¾‹çš„signalAll()æ–¹æ³• åªä¼šå”¤é†’æ³¨å†Œåœ¨è¯¥Conditionå®ä¾‹ä¸­çš„æ‰€æœ‰ç­‰å¾…çº¿ç¨‹ã€‚ 1.3 synchronizedé”ä½çš„æ˜¯ä»€ä¹ˆï¼Œåœ¨é¡¹ç›®ä¸­é‡åˆ°äº†å—ï¼Ÿ synchronizedæœ¬èº«å¹¶ä¸æ˜¯é”ï¼Œé”æœ¬èº«æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œsynchronizedæœ€å¤šç›¸å½“äºâ€œåŠ é”â€æ“ä½œï¼Œæ‰€ä»¥synchronizedå¹¶ä¸æ˜¯é”ä½ä»£ç å—ã€‚ ï¼ˆé‡ç‚¹ï¼‰Javaä¸­çš„æ¯ä¸€ä¸ªå¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºé”ï¼Œå…·ä½“è¡¨ç¤ºæœ‰ä¸‰ç§å½¢å¼ï¼š é¢è¯•ä¸­é¢è¯•å®˜ç»å¸¸ä¼šè¯´ï¼šâ€œå•ä¾‹æ¨¡å¼äº†è§£å—ï¼Ÿæ¥ç»™æˆ‘â¼¿å†™â¼€ä¸‹ï¼ç»™æˆ‘è§£é‡Šâ¼€ä¸‹åŒé‡æ£€éªŒé”æ–¹å¼å®ç°å•ä¾‹æ¨¡å¼çš„åŸç†å‘—ï¼â€ 12345678910111213141516public class Singleton &#123; private volatile static Singleton uniqueInstance; private Singleton() &#123;&#125; public synchronized static Singleton getUniqueInstance() &#123; //å…ˆåˆ¤æ–­å¯¹è±¡æ˜¯å¦å·²ç»å®ä¾‹è¿‡ï¼Œæ²¡æœ‰å®ä¾‹åŒ–è¿‡æ‰è¿›â¼ŠåŠ é”ä»£ç  if (uniqueInstance WX null) &#123; //ç±»å¯¹è±¡åŠ é” synchronized (Singleton.class) &#123; if (uniqueInstance WX null) &#123; uniqueInstance = new Singleton(); &#125; &#125; &#125; return uniqueInstance; &#125;&#125; uniqueInstance é‡‡ç”¨ volatile å…³é”®å­—ä¿®é¥°ä¹Ÿæ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œ 1uniqueInstance = new Singleton(); è¿™æ®µä»£ç å…¶å®æ˜¯åˆ†ä¸ºä¸‰æ­¥æ‰§è¡Œï¼š ä¸º uniqueInstance åˆ†é…å†…å­˜ç©ºé—´ åˆå§‹åŒ– uniqueInstance å°† uniqueInstance æŒ‡å‘åˆ†é…çš„å†…å­˜åœ°å€ ä½†æ˜¯ç”±äº JVM å…·æœ‰æŒ‡ä»¤é‡æ’çš„ç‰¹æ€§ï¼Œæ‰§è¡Œé¡ºåºæœ‰å¯èƒ½å˜æˆ 1&gt;3&gt;2ã€‚æŒ‡ä»¤é‡æ’åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ä¸ä¼šå‡ºç°é—®é¢˜ï¼Œä½†æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¼šå¯¼è‡´â¼€ä¸ªçº¿ç¨‹è·å¾—è¿˜æ²¡æœ‰åˆå§‹åŒ–çš„å®ä¾‹ã€‚ä¾‹å¦‚ï¼Œçº¿ç¨‹ T1 æ‰§è¡Œäº† 1 å’Œ 3ï¼Œæ­¤æ—¶ T2 è°ƒç”¨ getUniqueInstance() åå‘ç° uniqueInstance ä¸ä¸ºç©ºï¼Œå› æ­¤è¿”å›uniqueInstanceï¼Œä½†æ­¤æ—¶ uniqueInstance è¿˜æœªè¢«åˆå§‹åŒ–ã€‚ 1.4 synchronizedé”çš„ä¼˜åŒ–æœºåˆ¶äº†è§£å—ï¼Ÿ å‚è€ƒï¼šæ­»ç£•Synchronizedåº•å±‚å®ç° ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ synchronizedæœ¬èº«ä¹Ÿåœ¨ä¸æ–­ä¼˜åŒ–é”çš„æœºåˆ¶ï¼Œæœ‰äº›æƒ…å†µä¸‹ä»–å¹¶ä¸ä¼šæ˜¯ä¸€ä¸ªå¾ˆé‡é‡çº§çš„é”äº†ã€‚ä¼˜åŒ–æœºåˆ¶åŒ…æ‹¬ï¼š è‡ªé€‚åº”é”ã€è‡ªæ—‹é”ã€é”æ¶ˆé™¤ã€é”ç²—åŒ–ã€è½»é‡çº§é”å’Œåå‘é”ï¼› é”çš„çŠ¶æ€ä»ä½åˆ°é«˜ä¾æ¬¡ä¸ºï¼šæ— é”-&gt;åå‘é”-&gt;è½»é‡çº§é”-&gt;é‡é‡çº§é”ã€‚ å¸¸è§çš„é”ï¼š æ— é”ï¼šæ— é”æ²¡æœ‰å¯¹èµ„æºè¿›è¡Œé”å®šï¼Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½èƒ½è®¿é—®å¹¶ä¿®æ”¹åŒä¸€ä¸ªèµ„æºï¼Œä½†åŒæ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½ä¿®æ”¹æˆåŠŸã€‚ é”åˆ°åº•å­˜åœ¨å“ªé‡Œå‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯å¯¹è±¡å¤´ä¸­ã€‚ å¯¹è±¡å¤´ä¸»è¦åˆåŒ…æ‹¬äº†ä¸¤éƒ¨åˆ†æ•°æ®ï¼šMark Wordï¼ˆæ ‡è®°å­—æ®µï¼‰ã€Class Pointï¼ˆç±»å‹æŒ‡é’ˆï¼‰ã€‚ åˆå§‹mark word å°†æ˜¯å¯åå‘çŠ¶æ€ï¼Œæ­¤æ—¶çš„ æ˜¯å¦åå‘é” ä¸º 0ï¼Œè¡¨ç¤ºå½“å‰æ²¡æœ‰ä»»ä½•ä¸€ä¸ªçº¿ç¨‹æŒæœ‰è¯¥é”ã€‚ åå‘é”ï¼šåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé”æ€»æ˜¯ç”±åŒä¸€çº¿ç¨‹å¤šæ¬¡è·å¾—ï¼Œä¸å­˜åœ¨å¤šçº¿ç¨‹ç«äº‰ï¼Œæ‰€ä»¥å‡ºç°äº†åå‘é”ã€‚å…¶ç›®æ ‡å°±æ˜¯åœ¨åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç å—æ—¶èƒ½å¤Ÿæé«˜æ€§èƒ½ã€‚ JDK1.6 ä¸­ä¸ºäº†æé«˜ä¸€ä¸ªå¯¹è±¡åœ¨ä¸€æ®µå¾ˆé•¿çš„æ—¶é—´å†…éƒ½åªè¢«ä¸€ä¸ªçº¿ç¨‹ç”¨åšé”å¯¹è±¡åœºæ™¯ä¸‹çš„æ€§èƒ½ï¼Œå¼•å…¥äº†åå‘é”ã€‚åœ¨ç¬¬ä¸€æ¬¡è·å¾—é”æ—¶ï¼Œä¼šæœ‰ä¸€ä¸ª CAS æ“ä½œï¼ˆè§ä¸‹ï¼‰ï¼›ä¹‹åè¯¥çº¿ç¨‹å†è·å–é”ï¼Œåªä¼šæ‰§è¡Œå‡ ä¸ªç®€å•çš„å‘½ä»¤ï¼Œè€Œä¸æ˜¯å¼€é”€ç›¸å¯¹è¾ƒå¤§çš„ CAS å‘½ä»¤ã€‚ CASE 1 : çº¿ç¨‹ç¬¬ä¸€æ¬¡è·å¾—é”ï¼Œå¦‚æœæœªåå‘ï¼Œé€šè¿‡ CAS æŒ‡ä»¤ï¼š æ’å…¥çº¿ç¨‹ID : å‘mark wordæ’å…¥çº¿ç¨‹ID åå‘é”æ ‡è¯†ï¼šå°† mark word ä¸­çš„åå‘é”æ ‡è¯†ä»0â†’1 é”æ ‡å¿—ä½ï¼šä¸ä¿®æ”¹ï¼å› ä¸ºä¸å˜ï¼ å¦‚æœæ“ä½œæˆåŠŸï¼šï¼Œåˆ™è¯´æ˜è·å¾—äº†åå‘é”ï¼Œä»¥åå½“å‰çº¿ç¨‹ç­‰äºownerå°±å¯ä»¥é›¶æˆæœ¬çš„ç›´æ¥è·å¾—é”ï¼› å¦‚æœæ“ä½œå¤±è´¥ï¼Œè¯´æ˜æœ‰å…¶å®ƒçº¿ç¨‹è·å–äº†é”ï¼š å¦‚æœåå‘çº¿ç¨‹è¿˜å­˜åœ¨ï¼šç›´æ¥è¿›è¡Œå‡çº§ä¸ºè½»é‡çº§é”ï¼› å¦‚æœåå‘çº¿ç¨‹ä¸å­˜åœ¨ï¼šå…ˆä¿®æ”¹é”æ ‡è¯†ä¸º01â†’00 ï¼Œå†å‡çº§ä¸ºè½»é‡çº§é”ã€‚ CASE 2 : è¿™æ˜¯ä¸€æ¬¡å¯é‡å…¥ï¼Œåå‘çº¿ç¨‹æ˜¯è‡ªå·±ã€‚ åœ¨å½“å‰çº¿ç¨‹æ ˆä¸­æ‰¾åˆ°ä¸€ä¸ªå¯ç”¨çš„ Lock Record ï¼šå¹¶å°†å…¶ obj æŒ‡å‘é”å¯¹è±¡ &amp; Displaced Mark Word ç½®ä¸ºnull è½»é‡çº§é”ï¼šå½“å‘ç°å¤šçº¿ç¨‹ç«äº‰æ—¶ï¼Œåå‘é”ä¼šå‡çº§ä¸ºè½»é‡çº§é”ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œä¼šåœ¨ safepointï¼ˆæ­¤æ—¶ç”¨æˆ·ä»£ç ä¸ä¼šæ‰§è¡Œï¼‰ä¸­å»æŸ¥çœ‹åå‘çš„çº¿ç¨‹æ˜¯å¦è¿˜å­˜æ´»ã€‚ å¦‚æœåå‘çš„çº¿ç¨‹å·²ç»ä¸å­˜æ´»æˆ–è€…ä¸åœ¨åŒæ­¥å—ä¸­ï¼Œåˆ™å°†å¯¹è±¡å¤´çš„ mark word æ”¹ä¸ºæ— é”çŠ¶æ€ï¼ˆunlockedï¼‰ï¼Œé‡æ–°åå‘æ–°çš„çº¿ç¨‹ï¼› å¦‚æœå­˜æ´»ä¸”è¿˜åœ¨åŒæ­¥å—ä¸­ï¼ŒåŸåå‘çš„çº¿ç¨‹ç»§ç»­æ‹¥æœ‰é”ï¼Œå½“å‰çº¿ç¨‹åˆ™èµ°å…¥åˆ°è½»é‡çº§é”çš„åŠ é”é€»è¾‘ä¸­ï¼› è½»é‡çº§é”çš„å¤„ç†æµç¨‹ ï¼š å‘ç°å·²ç»æœ‰åå‘çš„çº¿ç¨‹äº†ï¼Œåˆ™ä¼šå…ˆ æ’¤ é”€åå‘é”ï¼Œç„¶åå‡çº§ä¸ºè½»é‡é” ã€‚é€šè¿‡CASå‘½ä»¤æ›´æ–°ï¼š ä¿®æ”¹æ­¤å‰ å½“å‰çº¿ç¨‹æ ˆå¸§Lock Recordï¼š ï¼ˆ1ï¼‰Displaced Mark Word å¤åˆ¶ mark word ï¼ˆæ­¤æ—¶æ— é”çŠ¶æ€ï¼‰ä¸­çš„ç°æœ‰å†…å®¹ ä¿®æ”¹mark word ï¼šmark word æŒ‡å‘å½“å‰çº¿ç¨‹æ ˆå¸§Lock Recordçš„ Displaced Mark Wordçš„åœ°å€ï¼Œè§ä¸Šå›¾ï¼› ä¿®æ”¹é”æ ‡å¿—ä½ï¼š 01 â†’ 00 ä¸Šè¿°CASæ›´æ–°æˆåŠŸï¼Œåˆ™å½“å‰çº¿ç¨‹è·å¾—äº†å¯¹è±¡çš„é” ï¼› å¦‚æœä¸æˆåŠŸï¼š æ£€æŸ¥Mark Wordæ˜¯å¦æŒ‡å‘å½“å‰çº¿ç¨‹çš„æ ˆå¸§çš„Lock Record ï¼Œæ˜¯åˆ™æ˜¯ä¸€æ¬¡å¯é‡å…¥ è®¾ç½®Lock Recordç¬¬ä¸€éƒ¨åˆ†ï¼ˆDisplaced Mark Wordï¼‰ä¸ºnullï¼Œèµ·åˆ°äº†ä¸€ä¸ªé‡å…¥è®¡æ•°å™¨çš„ä½œç”¨ã€‚ç„¶åç»“æŸã€‚ å¦‚æœä¸æ˜¯åˆ™æ˜¯è¿›è¡Œè‡ªæ—‹ç­‰å¾… å½“1.è‡ªæ—‹è¶…è¿‡ä¸€å®šçš„æ¬¡æ•°ï¼ˆé»˜è®¤10ï¼‰ï¼Œæˆ–è€…2.ä¸€ä¸ªçº¿ç¨‹åœ¨æŒæœ‰é”ï¼Œä¸€ä¸ªåœ¨è‡ªæ—‹ï¼Œåˆæœ‰ç¬¬ä¸‰ä¸ªæ¥è®¿æ—¶ï¼Œè½»é‡çº§é”å‡çº§ä¸ºé‡é‡çº§é”ã€‚ é‡é‡çº§é”ï¼šå†…ç½®é”åœ¨Javaä¸­è¢«æŠ½è±¡ä¸ºç›‘è§†å™¨é”ï¼ˆmonitorï¼‰ã€‚åœ¨JDK 1.6ä¹‹å‰ï¼Œç›‘è§†å™¨é”å¯ä»¥è®¤ä¸ºç›´æ¥å¯¹åº”åº•å±‚æ“ä½œç³»ç»Ÿä¸­çš„äº’æ–¥é‡ï¼ˆmutexï¼‰ã€‚è¿™ç§åŒæ­¥æ–¹å¼çš„æˆæœ¬éå¸¸é«˜ï¼ŒåŒ…æ‹¬ç³»ç»Ÿè°ƒç”¨å¼•èµ·çš„å†…æ ¸æ€ä¸ç”¨æˆ·æ€åˆ‡æ¢ã€çº¿ç¨‹é˜»å¡é€ æˆçš„çº¿ç¨‹åˆ‡æ¢ç­‰ã€‚ Monitorå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªåŒæ­¥å·¥å…·æˆ–ä¸€ç§åŒæ­¥æœºåˆ¶ï¼Œé€šå¸¸è¢«æè¿°ä¸ºä¸€ä¸ªå¯¹è±¡ã€‚æ¯ä¸€ä¸ªJavaå¯¹è±¡å°±æœ‰ä¸€æŠŠçœ‹ä¸è§çš„é”Monitorï¼Œç§°ä¸ºå†…éƒ¨é”æˆ–è€…Monitoré”ã€‚ Monitoræ˜¯çº¿ç¨‹ç§æœ‰çš„æ•°æ®ç»“æ„ï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªå¯ç”¨monitor recordåˆ—è¡¨ï¼ŒåŒæ—¶è¿˜æœ‰ä¸€ä¸ªå…¨å±€çš„å¯ç”¨åˆ—è¡¨ã€‚æ¯ä¸€ä¸ªè¢«é”ä½çš„å¯¹è±¡éƒ½ä¼šå’Œä¸€ä¸ªmonitorå…³è”ï¼ŒåŒæ—¶monitorä¸­æœ‰ä¸€ä¸ªOwnerå­—æ®µå­˜æ”¾æ‹¥æœ‰è¯¥é”çš„çº¿ç¨‹çš„å”¯ä¸€æ ‡è¯†ï¼Œè¡¨ç¤ºè¯¥é”è¢«è¿™ä¸ªçº¿ç¨‹å ç”¨ã€‚ å¦‚æœé”ç«äº‰æƒ…å†µä¸¥é‡ï¼ŒæŸä¸ªè¾¾åˆ°æœ€å¤§è‡ªæ—‹æ¬¡æ•°çš„çº¿ç¨‹ï¼Œä¼šå°†è½»é‡çº§é”å‡çº§ä¸ºé‡é‡çº§é”ã€‚çº¿ç¨‹å»è·å–é‡é‡çº§é”ï¼Œå…¶å®å°±æ˜¯å°±å°è¯•è·å–å¯¹è±¡çš„monitoré”ã€‚ å³å°† monitoré”çš„ Ownerå­—æ®µä¿®æ”¹ä¸ºå½“å‰çº¿ç¨‹ID ã€‚ å¦‚æœè·å–æˆåŠŸï¼Œæ­¤æ—¶çº¿ç¨‹è·å¾—äº†é”ï¼ŒCASä¿®æ”¹ ï¼š ä¿®æ”¹mark word ï¼šç„¶åå°†å¯¹è±¡å¤´mark word æ”¹ä¸ºæŒ‡å‘è¯¥ monitor çš„æŒ‡é’ˆã€‚ é”æ ‡å¿—ä½ï¼š00 â†’ 10 1.5 ä¸ºä»€ä¹ˆè¯´Synchronizedæ˜¯éå…¬å¹³é”ï¼Œè¿™æ ·çš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ å¹¶éæ˜¯æŒ‰ç…§ç”³è¯·é”çš„æ—¶é—´å‰åç»™ç­‰å¾…çº¿ç¨‹åˆ†é…é”çš„ï¼Œæ¯å½“é”è¢«é‡Šæ”¾åï¼Œä»»ä½•ä¸€ä¸ªçº¿ç¨‹éƒ½æœ‰æœºä¼šç«äº‰åˆ°é”ã€‚ ä¼˜ç‚¹ï¼šè¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†æé«˜æ‰§è¡Œæ€§èƒ½ï¼› ç¼ºç‚¹ï¼šæ˜¯å¯èƒ½äº§ç”Ÿçº¿ç¨‹é¥¥é¥¿ç°è±¡ã€‚ 1.6 ä¸ºä»€ä¹ˆè¯´synchronizedæ˜¯ä¸€ä¸ªæ‚²è§‚é”ï¼Ÿä¹è§‚é”çš„å®ç°åŸç†åˆæ˜¯ä»€ä¹ˆï¼Ÿ æ²¡çœ‹å®Œï¼Œäº†è§£äº†ä¸‹æ ¸å¿ƒé—®é¢˜ï¼šhttps://www.cnblogs.com/jojop/p/14022029.html synchronizedæ‚²è§‚é” Synchronizedæ˜¾ç„¶æ˜¯ä¸€ä¸ªæ‚²è§‚é”ï¼Œå› ä¸ºå®ƒçš„å¹¶å‘ç­–ç•¥æ˜¯æ‚²è§‚çš„ï¼š ä¸ç®¡æ˜¯å¦ä¼šäº§ç”Ÿç«äº‰ï¼Œä»»ä½•çš„æ•°æ®éƒ½å¿…é¡»åŠ é”ã€‚ synchronizedåŸç† Synchronizedæ˜¯é€šè¿‡è·å–å¯¹è±¡å†…éƒ¨çš„ä¸€ä¸ªå«åšç›‘è§†å™¨é”ï¼ˆmonitorï¼‰æ¥å®ç°çš„ï¼Œæ¯ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ªç›‘è§†å™¨é”ï¼ˆmonitorï¼‰ã€‚å½“monitorè¢«å ç”¨æ—¶å°±ä¼šå¤„äºé”å®šçŠ¶æ€ï¼Œçº¿ç¨‹æ‰§è¡ŒmonitorenteræŒ‡ä»¤æ—¶å°è¯•è·å–monitorçš„æ‰€æœ‰æƒã€‚ ç›‘è§†å™¨é”æœ¬è´¨åˆæ˜¯ä¾èµ–äºåº•å±‚çš„æ“ä½œç³»ç»Ÿçš„Mutex Lockæ¥å®ç°çš„ã€‚è€Œæ“ä½œç³»ç»Ÿå®ç°çº¿ç¨‹ä¹‹é—´çš„åˆ‡æ¢è¿™å°±éœ€è¦ä»ç”¨æˆ·æ€è½¬æ¢åˆ°æ ¸å¿ƒæ€ï¼Œè¿™ä¸ªæˆæœ¬éå¸¸é«˜ï¼ŒçŠ¶æ€ä¹‹é—´çš„è½¬æ¢éœ€è¦ç›¸å¯¹æ¯”è¾ƒé•¿çš„æ—¶é—´ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆSynchronizedæ•ˆç‡ä½çš„åŸå› ã€‚ å¦‚æœmonitorçš„è¿›å…¥æ•°ä¸º0ï¼Œåˆ™è¯¥çº¿ç¨‹è¿›å…¥monitorï¼Œç„¶åå°†è¿›å…¥æ•°è®¾ç½®ä¸º1ï¼Œè¯¥çº¿ç¨‹å³ä¸ºmonitorçš„æ‰€æœ‰è€…ï¼› å¦‚æœçº¿ç¨‹å·²ç»å æœ‰è¯¥monitorï¼Œåªæ˜¯é‡æ–°è¿›å…¥ï¼Œåˆ™è¿›å…¥monitorçš„è¿›å…¥æ•°åŠ 1ï¼› å¦‚æœå…¶ä»–çº¿ç¨‹å·²ç»å ç”¨äº†monitorï¼Œåˆ™è¯¥çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œç›´åˆ°monitorçš„è¿›å…¥æ•°ä¸º0ï¼Œå†é‡æ–°å°è¯•è·å–monitorçš„æ‰€æœ‰æƒã€‚ ä¹è§‚é”å®ç°åŸç†ï¼šCAS å‚è€ƒå¥½æ–‡ï¼šä¸€æ–‡å½»åº•ææ‡‚CASå®ç°åŸç† 1.7 ï¼ˆCASåŸç†é‡ç‚¹ï¼‰ä»€ä¹ˆæ˜¯CASï¼ŸCASçš„ç¼ºç‚¹ï¼Ÿè¯´è¯´CASæºç å®ç°ï¼Ÿ ä¹è§‚é”çš„æ ¸å¿ƒç®—æ³•æ˜¯CASï¼ˆCompared And Swapï¼Œæ¯”è¾ƒå¹¶äº¤æ¢ï¼‰ï¼š å…³é”®é€»è¾‘ï¼š CASï¼Œæœ‰å‡ ä¸ªé‡è¦çš„å‚æ•°ï¼š ï¼ˆ1ï¼‰thisï¼ŒUnsafe å¯¹è±¡æœ¬èº«ï¼Œéœ€è¦é€šè¿‡è¿™ä¸ªç±»æ¥è·å– value çš„å†…å­˜åç§»åœ°å€ã€‚ ï¼ˆ2ï¼‰valueOffsetï¼Œvalue å˜é‡çš„å†…å­˜åç§»åœ°å€ã€‚ ï¼ˆ3ï¼‰expectï¼ŒæœŸæœ›æ›´æ–°çš„å€¼ã€‚ ï¼ˆ4ï¼‰updateï¼Œè¦æ›´æ–°çš„æœ€æ–°å€¼ã€‚ å¦‚æœåŸå­å˜é‡ä¸­çš„ value å€¼ç­‰äº expectï¼Œåˆ™ä½¿ç”¨ update å€¼æ›´æ–°è¯¥å€¼å¹¶è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚ CASç‰¹æ€§ï¼š CASå…·æœ‰åŸå­æ€§ï¼Œå®ƒçš„åŸå­æ€§ç”±CPUç¡¬ä»¶æŒ‡ä»¤å®ç°ä¿è¯ã€‚ ã€ç¼ºç‚¹1ã€‘ABAé—®é¢˜ï¼šå¦‚æœå¦ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹Vå€¼å‡è®¾åŸæ¥æ˜¯Aï¼Œå…ˆä¿®æ”¹æˆBï¼Œå†ä¿®æ”¹å›æˆAã€‚å½“å‰çº¿ç¨‹çš„CASæ“ä½œæ— æ³•åˆ†è¾¨å½“å‰Vå€¼æ˜¯å¦å‘ç”Ÿè¿‡å˜åŒ–ã€‚ è§£å†³ABAï¼š åœ¨å˜é‡å‰é¢åŠ ä¸Šç‰ˆæœ¬å·ï¼Œæ¯æ¬¡å˜é‡æ›´æ–°çš„æ—¶å€™å˜é‡çš„ç‰ˆæœ¬å·éƒ½+1ï¼Œå³A-&gt;B-&gt;Aå°±å˜æˆäº†1A-&gt;2B-&gt;3A ã€ç¼ºç‚¹2ã€‘åªèƒ½ä¿è¯ä¸€ä¸ªå…±äº«å˜é‡çš„åŸå­æ“ä½œï¼šå½“å¯¹ä¸€ä¸ªå…±äº«å˜é‡æ‰§è¡Œæ“ä½œæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¾ªç¯CASçš„æ–¹å¼æ¥ä¿è¯åŸå­æ“ä½œï¼Œä½†æ˜¯å¯¹å¤šä¸ªå…±äº«å˜é‡æ“ä½œæ—¶ï¼Œå¾ªç¯CASå°±æ— æ³•ä¿è¯æ“ä½œçš„åŸå­æ€§ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ç”¨é”ã€‚ ã€ç¼ºç‚¹3ã€‘å¾ªç¯æ—¶é—´é•¿å¼€é”€å¤§ï¼šå¯¹äºèµ„æºç«äº‰ä¸¥é‡ï¼ˆçº¿ç¨‹å†²çªä¸¥é‡ï¼‰çš„æƒ…å†µï¼ŒCASè‡ªæ—‹çš„æ¦‚ç‡ä¼šæ¯”è¾ƒå¤§ï¼Œä»è€Œæµªè´¹æ›´å¤šçš„CPUèµ„æºï¼Œæ•ˆç‡ä½äºsynchronizedã€‚ CASæºç åˆ†æ å‚è€ƒï¼šJava CAS åŸç†åˆ†æ CAS å…¨ç§°æ˜¯ compare and swapï¼Œæ˜¯ä¸€ç§ç”¨äºåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å®ç°åŒæ­¥åŠŸèƒ½çš„æœºåˆ¶ã€‚ CAS æ“ä½œåŒ…å«ä¸‰ä¸ªæ“ä½œæ•° â€“ å†…å­˜ä½ç½®ã€é¢„æœŸæ•°å€¼å’Œæ–°å€¼ã€‚CAS çš„å®ç°é€»è¾‘æ˜¯å°†å†…å­˜ä½ç½®å¤„çš„æ•°å€¼ä¸é¢„æœŸæ•°å€¼æƒ³æ¯”è¾ƒï¼Œè‹¥ç›¸ç­‰ï¼Œåˆ™å°†å†…å­˜ä½ç½®å¤„çš„å€¼æ›¿æ¢ä¸ºæ–°å€¼ã€‚è‹¥ä¸ç›¸ç­‰ï¼Œåˆ™ä¸åšä»»ä½•æ“ä½œã€‚ Java å¹¶æ²¡æœ‰ç›´æ¥å®ç° CASï¼ŒCAS ç›¸å…³çš„å®ç°æ˜¯é€šè¿‡ C++ å†…è”æ±‡ç¼–çš„å½¢å¼å®ç°çš„ï¼Œä¸‹é¢æ˜¯å…·ä½“åˆ†æã€‚ èƒŒæ™¯ä»‹ç» åœ¨å¤šæ ¸å¿ƒæ—¶ä»£ä¸‹ï¼Œå¤šä¸ªæ ¸å¿ƒé€šè¿‡åŒä¸€æ¡æ€»çº¿å’Œå†…å­˜ä»¥åŠå…¶ä»–ç¡¬ä»¶è¿›è¡Œé€šä¿¡ã€‚ CPU çš„å¤šä¸ªæ ¸å¿ƒåŒæ—¶å¯¹åŒä¸€ç‰‡å†…å­˜è¿›è¡Œæ“ä½œï¼Œä¼šå¯¼è‡´é”™è¯¯ã€‚ä¾‹å¦‚ï¼Œé€’å¢æŒ‡ä»¤inc dword ptr [...]ï¼Œç­‰ä»·äºDEST = DEST + 1ã€‚è¯¥æŒ‡ä»¤åŒ…å«ä¸‰ä¸ªæ“ä½œè¯»-&gt;æ”¹-&gt;å†™ï¼Œæ¶‰åŠä¸¤æ¬¡è®¿å­˜ã€‚ æ ¸å¿ƒ1,2ä»å†…å­˜è¯»å–æ•°æ®1ï¼Œå¹¶å†™åˆ°å„è‡ªå¯„å­˜å™¨ä¸­ æ ¸å¿ƒ1å°†å¯„å­˜å™¨ä¸­æ•°æ®1â†’2 æ ¸å¿ƒ2å°†å¯„å­˜å™¨ä¸­æ•°æ®1â†’2 ç„¶åéƒ½å†™å›ä¸»å­˜ï¼Œæ­¤æ—¶ä¸º2 å¯ä»¥çœ‹åˆ°ï¼Œç”±äºæ ¸å¿ƒ2åœ¨æ ¸å¿ƒ1å†™å…¥ä¸»å­˜æ“ä½œå®Œæˆå‰è¿›è¡Œè¯»å–ï¼Œå¯¼è‡´å¹¶ä¸æ˜¯æˆ‘ä»¬æœŸæœ›çš„3 ã€‚ é€šè¿‡åœ¨é€’å¢inc æŒ‡ä»¤å‰æ·»åŠ  lock å‰ç¼€ï¼Œå¯ä»¥è®©æ ¸å¿ƒç‹¬å æŸä¸ªå†…å­˜åŒºåŸŸï¼Œç”±æ­¤å¯ä»¥é¿å…ä¸Šé¢é—®é¢˜ã€‚lock å‰ç¼€ä¿è¯æ ¸å¿ƒç‹¬å æŸç‰‡å†…å­˜åŒºåŸŸï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š æ€»çº¿é”ã€‚æ€»çº¿è¢«é”å®šåï¼Œå…¶ä»–æ ¸å¿ƒå°±ä¸èƒ½è®¿é—®å†…å­˜äº†ï¼Œå¯èƒ½ä¼šå¯¼è‡´å…¶ä»–æ ¸å¿ƒçŸ­æ—¶å†…åœæ­¢å·¥ä½œï¼› ç¼“å­˜é”ã€‚è‹¥æŸå¤„å†…å­˜æ•°æ®è¢«ç¼“å­˜åœ¨å¤„ç†å™¨ç¼“å­˜ä¸­ï¼Œå¤„ç†å™¨å‘å‡ºçš„ LOCK# ä¿¡å·ä¸ä¼šé”å®šæ€»çº¿ï¼Œè€Œæ˜¯é”å®šç¼“å­˜å¯¹åº”çš„å†…å­˜åŒºåŸŸã€‚å…¶ä»–å¤„ç†å™¨åœ¨è¿™ç‰‡å†…å­˜åŒºåŸŸé”å®šæœŸé—´ï¼Œæ— æ³•å¯¹è¿™ç‰‡å†…å­˜åŒºåŸŸè¿›è¡Œç›¸å…³æ“ä½œã€‚ï¼ˆä¸æ˜¯ä¹è§‚æœºåˆ¶éƒ½å¯ä»¥æ“ä½œå—ï¼Ÿä¸èƒ½å†™å…¥å†…å­˜ï¼Ÿï¼‰ æºç åˆ†æ æˆ‘ä»¬åˆ†æï¼Œjava.util.concurrent.atomic åŒ…ä¸‹çš„åŸå­ç±» AtomicInteger ä¸­çš„ compareAndSet æ–¹æ³• ã€‚ AtomicIntegerå…·ä½“å®ç°ä¸­ï¼ŒcompareAndSet å®é™…ä¸Šåªæ˜¯ä¸€ä¸ªå£³å­ï¼Œä¸»è¦çš„é€»è¾‘å°è£…åœ¨ Unsafe çš„ compareAndSwapInt æ–¹æ³•ä¸­ï¼› compareAndSwapIntæ˜¯ä¸€ä¸ªnativeæ–¹æ³• 1public final native boolean compareAndSwapInt(Object o, long offset,int expected,int x); 123456789101112131415161718192021222324252627282930313233public class AtomicInteger extends Number implements java.io.Serializable &#123; // setup to use Unsafe.compareAndSwapInt for updates private static final Unsafe unsafe = Unsafe.getUnsafe(); private static final long valueOffset; static &#123; try &#123; // è®¡ç®—å˜é‡ value åœ¨ç±»å¯¹è±¡ä¸­çš„åç§» valueOffset = unsafe.objectFieldOffset (AtomicInteger.class.getDeclaredField(&quot;value&quot;)); &#125; catch (Exception ex) &#123; throw new Error(ex); &#125; &#125; private volatile int value; public final boolean compareAndSet(int expect, int update) &#123; /* * compareAndSet å®é™…ä¸Šåªæ˜¯ä¸€ä¸ªå£³å­ï¼Œä¸»è¦çš„é€»è¾‘å°è£…åœ¨ Unsafeçš„compareAndSwapInt æ–¹æ³•ä¸­ */ return unsafe.compareAndSwapInt(this, valueOffset, expect, update); &#125; // ......&#125;public final class Unsafe &#123; // compareAndSwapInt æ˜¯ native ç±»å‹çš„æ–¹æ³•ï¼Œç»§ç»­å¾€ä¸‹çœ‹ public final native boolean compareAndSwapInt(Object o, long offset, int expected, int x); // ......&#125; ä¸‹é¢æˆ‘ä»¬è¿›å…¥unsafe.cppï¼ˆcompareAndSwapIntæ˜¯nativeæ–¹æ³•ï¼‰å…·ä½“å®ç°ä¸­ï¼Œçœ‹çœ‹è°ƒç”¨ï¼š 12345678910111213141516171819202122232425// unsafe.cpp/* * è¿™ä¸ªçœ‹èµ·æ¥å¥½åƒä¸åƒä¸€ä¸ªå‡½æ•°ï¼Œä¸è¿‡ä¸ç”¨æ‹…å¿ƒï¼Œä¸æ˜¯é‡ç‚¹ã€‚UNSAFE_ENTRY å’Œ UNSAFE_END éƒ½æ˜¯å®ï¼Œ * åœ¨é¢„ç¼–è¯‘æœŸé—´ä¼šè¢«æ›¿æ¢æˆçœŸæ­£çš„ä»£ç ã€‚ä¸‹é¢çš„ jbooleanã€jlong å’Œ jint ç­‰æ˜¯ä¸€äº›ç±»å‹å®šä¹‰ï¼ˆtypedefï¼‰ï¼š * */UNSAFE_ENTRY(jboolean, Unsafe_CompareAndSwapInt(JNIEnv *env, jobject unsafe, jobject obj, jlong offset, jint e, jint x)) UnsafeWrapper(&quot;Unsafe_CompareAndSwapInt&quot;); oop p = JNIHandles::resolve(obj); // æ ¹æ®åç§»é‡ï¼Œè®¡ç®— value çš„åœ°å€ã€‚è¿™é‡Œçš„ offset å°±æ˜¯ AtomaicInteger ä¸­çš„ valueOffset jint* addr = (jint *) index_oop_from_field_offset_long(p, offset); // è°ƒç”¨ Atomic ä¸­çš„å‡½æ•° cmpxchgï¼Œè¯¥å‡½æ•°å£°æ˜äº Atomic.hpp ä¸­ return (jint)(Atomic::cmpxchg(x, addr, e)) == e;UNSAFE_END// atomic.cppunsigned Atomic::cmpxchg(unsigned int exchange_value, volatile unsigned int* dest, unsigned int compare_value) &#123; assert(sizeof(unsigned int) == sizeof(jint), &quot;more work to do&quot;); /* * æ ¹æ®æ“ä½œç³»ç»Ÿç±»å‹è°ƒç”¨ä¸åŒå¹³å°ä¸‹çš„é‡è½½å‡½æ•°ï¼Œè¿™ä¸ªåœ¨é¢„ç¼–è¯‘æœŸé—´ç¼–è¯‘å™¨ä¼šå†³å®šè°ƒç”¨å“ªä¸ªå¹³å°ä¸‹çš„é‡è½½ * æ¥ä¸‹æ¥åˆ†æ atomic_windows_x86.inline.hpp ä¸­çš„ cmpxchg å‡½æ•°å®ç° */ return (unsigned int)Atomic::cmpxchg((jint)exchange_value, (volatile jint*)dest, (jint)compare_value);&#125; åˆ†æ Windows å¹³å°ä¸‹çš„ Atomic::cmpxchg å‡½æ•°ä¸ºä¾‹ï¼Œçœ‹çœ‹å…·ä½“å®ç°ã€‚ 123456789101112131415161718// atomic_windows_x86.inline.hpp#define LOCK_IF_MP(mp) __asm cmp mp, 0 \\ __asm je L0 \\ __asm _emit 0xF0 \\ __asm L0: inline jint Atomic::cmpxchg (jint exchange_value, volatile jint* dest, jint compare_value) &#123; // åˆ¤æ–­æ˜¯å¦æ˜¯å¤šæ ¸ CPU int mp = os::is_MP(); __asm &#123; // å°†å‚æ•°å€¼æ”¾å…¥å¯„å­˜å™¨ä¸­ mov edx, dest // æ³¨æ„: dest æ˜¯æŒ‡é’ˆç±»å‹ï¼Œè¿™é‡Œæ˜¯æŠŠå†…å­˜åœ°å€å­˜å…¥ edx å¯„å­˜å™¨ä¸­ mov ecx, exchange_value mov eax, compare_value LOCK_IF_MP(mp) // æ ¸å¿ƒæ¯”è¾ƒå†™å…¥æ“ä½œ cmpxchg dword ptr [edx], ecx &#125;&#125; å…¶ä¸­LOCK_IF_MPå®é™…å†…å®¹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425 // LOCK_IF_MP cmp mp, 0 /* * å¦‚æœ mp = 0ï¼Œè¡¨æ˜æ˜¯çº¿ç¨‹è¿è¡Œåœ¨å•æ ¸ CPU ç¯å¢ƒä¸‹ã€‚æ­¤æ—¶ je ä¼šè·³è½¬åˆ° L0 æ ‡è®°å¤„ï¼Œ * ä¹Ÿå°±æ˜¯è¶Šè¿‡ _emit 0xF0 æŒ‡ä»¤ï¼Œç›´æ¥æ‰§è¡Œ cmpxchg æŒ‡ä»¤ã€‚ä¹Ÿå°±æ˜¯ä¸åœ¨ä¸‹é¢çš„ cmpxchg æŒ‡ä»¤å‰åŠ  lock å‰ç¼€ã€‚ */ je L0 /* 0xF0 æ˜¯ lock å‰ç¼€çš„æœºå™¨ç ï¼Œè¿™é‡Œæ²¡æœ‰ä½¿ç”¨ lockï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨äº†æœºå™¨ç çš„å½¢å¼ã€‚*/ _emit 0xF0L0: /* * æ¯”è¾ƒå¹¶äº¤æ¢ã€‚ç®€å•è§£é‡Šä¸€ä¸‹ä¸‹é¢è¿™æ¡æŒ‡ä»¤ï¼Œç†Ÿæ‚‰æ±‡ç¼–çš„æœ‹å‹å¯ä»¥ç•¥è¿‡ä¸‹é¢çš„è§£é‡Š: * cmpxchg: å³â€œæ¯”è¾ƒå¹¶äº¤æ¢â€æŒ‡ä»¤ * dword: å…¨ç§°æ˜¯ double wordï¼Œåœ¨ x86/x64 ä½“ç³»ä¸­ï¼Œä¸€ä¸ª * word = 2 byteï¼Œdword = 4 byte = 32 bit * ptr: å…¨ç§°æ˜¯ pointerï¼Œä¸å‰é¢çš„ dword è¿èµ·æ¥ä½¿ç”¨ï¼Œè¡¨æ˜è®¿é—®çš„å†…å­˜å•å…ƒæ˜¯ä¸€ä¸ªåŒå­—å•å…ƒ * [edx]: [...] è¡¨ç¤ºä¸€ä¸ªå†…å­˜å•å…ƒï¼Œedx æ˜¯å¯„å­˜å™¨ï¼Œdest æŒ‡é’ˆå€¼å­˜æ”¾åœ¨ edx ä¸­ã€‚ * é‚£ä¹ˆ [edx] è¡¨ç¤ºå†…å­˜åœ°å€ä¸º dest çš„å†…å­˜å•å…ƒ * * è¿™ä¸€æ¡æŒ‡ä»¤çš„æ„æ€å°±æ˜¯ï¼Œå°† eax å¯„å­˜å™¨ä¸­çš„å€¼ï¼ˆcompare_valueï¼‰ä¸ [edx] åŒå­—å†…å­˜å•å…ƒä¸­çš„å€¼ * è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœç›¸åŒï¼Œåˆ™å°† ecx å¯„å­˜å™¨ä¸­çš„å€¼ï¼ˆexchange_valueï¼‰å­˜å…¥ [edx] å†…å­˜å•å…ƒä¸­ã€‚ */ cmpxchg dword ptr [edx], ecx &#125;&#125; å®é™…ä¸¾ä¾‹è¯´æ˜ AtomicInteger ç±»ä¸»è¦åˆ©ç”¨ CAS (compare and swap) + volatile æ¥ä¿è¯åŸå­æ“ä½œã€‚AtomicInteger çš„ä¸»è¦æ–¹æ³•éƒ½æ˜¯é€šè¿‡è°ƒç”¨Unsafeç±»æ–¹æ³•å»å®ç°ï¼Œå¦‚ compareAndSet å®é™…æ˜¯è°ƒç”¨AtomicInteger çš„compareAndSwapIntæ–¹æ³•ã€‚ ä¸‹é¢ä»¥ getAndIncrementå®ç°æ¥è¯´æ˜ã€‚ getAndIncrementè°ƒç”¨äº† Unsafeçš„getAndAddIntæ–¹æ³•ï¼Œä¼ é€’äº†ï¼ˆ1ï¼‰å½“å‰thiså¯¹è±¡ï¼Œï¼ˆ2ï¼‰valueåç§»é‡ï¼Œç”¨æ¥è®¡ç®—å¾—åˆ°valueå€¼ï¼ˆ3ï¼‰è¦åŠ ä¸Šçš„å€¼ï¼Œç”±äºæ˜¯é€’å¢æ‰€ä»¥æ˜¯1 âš ï¸ ä¸ºä»€ä¹ˆä¸ä¼ valueçš„å€¼ï¼Œè€Œæ˜¯åç§»é‡ï¼Ÿ ä¼ åç§»é‡æ˜¯ä¸ºäº†è®¡ç®—valueæ‰€åœ¨çš„å†…å­˜åœ°å€ï¼Œè¿›è€Œè·å–æœ€æ–°çš„valueå€¼ã€‚ getAndAddInté‡‡ç”¨CASæ–¹å¼è¿›è¡Œæ›´æ–°ï¼Œè¿˜éœ€è¦è¿›è¡Œå½“å‰æœŸæœ›å€¼çš„è®¡ç®— é€šè¿‡getIntVolatileè·å–åˆ°çº¿ç¨‹æ­¤æ—¶å†…å­˜valueå€¼ï¼ˆæœŸæœ›å€¼ï¼‰ï¼Œä¹Ÿå°±æ˜¯è®°å½•æ‰§è¡ŒCASå‰çš„å†…å­˜æœ€æ–°valueå€¼ï¼› ç„¶åå¼€å§‹æ‰§è¡ŒUnsafeçš„ compareAndSwapInt ï¼Œä¸»è¦æ˜¯é€šè¿‡Atomic::cmpxchg é€»è¾‘æ¥å®ç° ï¼ˆ1ï¼‰å°†è¦destï¼ˆvalueå†…å­˜åœ°å€ï¼‰ï¼ŒcompareValueï¼ˆæœŸæœ›å€¼ï¼‰ï¼Œexchange_valueï¼ˆè¦æ›´æ–°çš„å€¼ï¼‰å†™å…¥å¯„å­˜å™¨ä¸­ ï¼ˆ2ï¼‰çº¿ç¨‹å¦‚æœæ˜¯è¿è¡Œå¤šæ ¸CPUï¼Œä¸ŠLOCK#é”ï¼Œå°†destå†…å­˜åŒºåŸŸé”ä½ ï¼›å¦åˆ™ä¸ä¸ŠLOCK#é” ï¼ˆ3ï¼‰æ‰§è¡Œcmpxchgï¼ˆæ¯”è¾ƒå¹¶äº¤æ¢å‘½ä»¤ï¼‰ï¼Œå¦‚æœdestçš„valueå€¼ï¼ˆæ‰§è¡ŒCASä¸­çš„æœ€æ–°valueå€¼ï¼‰ == compareValueï¼Œåˆ™å†™å…¥exchange_value ï¼› ï¼ˆ4ï¼‰å¦åˆ™å†™å…¥å¤±è´¥ï¼Œé€šè¿‡ä¸æ–­è‡ªæ—‹ï¼ˆå¾ªç¯ï¼‰æœŸæœ›å¾—åˆ°æ‰§è¡Œ 1.8 è¯·è¯´æ˜ä¸€ä¸‹synchronizedçš„å¯é‡å…¥æ€ä¹ˆå®ç°ï¼Ÿ æ¯ä¸ªé”å…³è”ä¸€ä¸ªçº¿ç¨‹æŒæœ‰è€…å¯¹è±¡å’Œä¸€ä¸ªè®¡æ•°å™¨ã€‚ å½“è®¡æ•°å™¨ä¸º0æ—¶è¡¨ç¤ºè¯¥é”æ²¡æœ‰è¢«ä»»ä½•çº¿ç¨‹æŒæœ‰ï¼Œé‚£ä¹ˆä»»ä½•çº¿ç¨‹éƒ½éƒ½å¯èƒ½è·å¾—è¯¥é”ï¼ˆå³monitorå¯¹è±¡ï¼‰è€Œè°ƒç”¨ç›¸åº”æ–¹æ³•ã€‚ å½“ä¸€ä¸ªçº¿ç¨‹è¯·æ±‚æˆåŠŸåï¼ŒJVMå¯¹è±¡å¤´ä¼šè®°ä¸‹æŒæœ‰é”çš„çº¿ç¨‹ï¼Œå¹¶å°†è®¡æ•°å™¨è®¡ä¸º1ã€‚æ­¤æ—¶å…¶ä»–çº¿ç¨‹è¯·æ±‚è¯¥é”ï¼Œåˆ™å¿…é¡»ç­‰å¾…ã€‚ è€Œè¯¥æŒæœ‰é”çš„çº¿ç¨‹å¦‚æœå†æ¬¡è¯·æ±‚è¿™ä¸ªé”ï¼Œå°±å¯ä»¥å†æ¬¡æ‹¿åˆ°è¿™ä¸ªé”ï¼ŒåŒæ—¶è®¡æ•°å™¨ä¼šé€’å¢ã€‚ å½“çº¿ç¨‹é€€å‡ºä¸€ä¸ªsynchronizedæ–¹æ³•/å—æ—¶ï¼Œè®¡æ•°å™¨ä¼šé€’å‡ï¼Œå¦‚æœè®¡æ•°å™¨ä¸º0åˆ™é‡Šæ”¾è¯¥é”ã€‚ 1.9 åœ¨synchronizedåå‘é”è¿‡ç¨‹ä¸­ï¼Œè°ƒç”¨hashcodeæ–¹æ³•ï¼Œmarkwordä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ ç¬¬ä¸€æ¬¡è°ƒç”¨Hashcodeï¼šå½“å¯¹è±¡çš„hashCode()æ–¹æ³•ï¼ˆéç”¨æˆ·è‡ªå®šä¹‰ï¼‰ç¬¬ä¸€æ¬¡è¢«è°ƒç”¨æ—¶ï¼ŒJVMä¼šç”Ÿæˆå¯¹åº”çš„identity hash codeå€¼ï¼Œå¹¶å°†è¯¥å€¼å­˜å‚¨åˆ°Mark Wordä¸­ ã€‚ åç»­å¦‚æœè¯¥å¯¹è±¡çš„hashCode()æ–¹æ³•å†æ¬¡è¢«è°ƒç”¨åˆ™ä¸ä¼šå†é€šè¿‡JVMè¿›è¡Œè®¡ç®—å¾—åˆ°ï¼Œè€Œæ˜¯ç›´æ¥ä»Mark Wordä¸­è·å–ï¼Œä¿è¯å”¯ä¸€ç›¸åŒã€‚ æ— é”çŠ¶æ€ï¼šåœ¨æ— é”çŠ¶æ€ä¸‹ï¼ŒMark Wordä¸­å¯ä»¥å­˜å‚¨å¯¹è±¡çš„identity hash codeå€¼ ï¼› åå‘é”çŠ¶æ€ï¼šéœ€è¦è®¡ç®—å…¶identity hash codeçš„è¯ï¼Œåˆ™å®ƒçš„åå‘é”ä¼šè¢«æ’¤é”€ï¼ˆå› ä¸ºæ²¡æœ‰ä¿å­˜çš„ä½ç½®ï¼‰ï¼Œå¹¶ä¸”é”ä¼šè†¨èƒ€ä¸ºè½»é‡çº§é”æˆ–è€…é‡é‡é” ï¼› è½»é‡é”çŠ¶æ€ï¼šçº¿ç¨‹æ ˆå¸§çš„Lock Recodeå¯ä»¥è®°å½•å­˜å‚¨Displaced Mark Word ï¼Œæ‰€ä»¥è½»é‡çº§é”å¯ä»¥å’Œidentity hash code å…±å­˜ ï¼› é‡é‡çº§é”çŠ¶æ€ï¼šObjectMonitorç±»é‡Œæœ‰å­—æ®µHashCodeå¯ä»¥è®°å½•éåŠ é”çŠ¶æ€ä¸‹çš„mark wordï¼Œæ‰€ä»¥é‡é‡çº§é”ä¹Ÿå¯ä»¥å’Œidentity hash codeå…±å­˜ï¼› 1.10 Synchronized ç¡®å®šä¸å¯ä¸­æ–­å—ï¼Ÿå¦‚æœä¸€ä¸ªçº¿ç¨‹è®¿é—®Synchronized ä»£ç ï¼Œå…¶å®ƒçº¿ç¨‹å¯ä»¥èƒ½å¦ä¸­æ–­ï¼Ÿæ¯”å¦‚ä½¿ç”¨Stopï¼Ÿæ˜¯åœ¨ä¸­æ–­å‰è¿˜æ˜¯ä¸­æ–­åè·å–é”ï¼Ÿ å‚è€ƒï¼šhttps://blog.csdn.net/deel_feel/article/details/105771902 æ­£ç¡®è¯´æ³•æ—¶ï¼šåªæœ‰è·å–åˆ°é”ä¹‹åæ‰èƒ½ä¸­æ–­ï¼Œç­‰å¾…é”æ—¶ä¸å¯ä¸­æ–­ã€‚ 1.5.2 Reetrantlock ç›¸å…³ ReentrantLockæ„æ€ä¸ºå¯é‡å…¥é” ã€‚ 2.1 éå…¬å¹³é”å’Œå…¬å¹³é”åœ¨reetrantlocké‡Œçš„å®ç°è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ ç¾å›¢æŠ€æœ¯æ–‡ç« -java-lock å…¬å¹³é”ï¼šé‚£ä¹ˆé”çš„ è·å–é¡ºåº å°±åº”è¯¥ç¬¦åˆè¯·æ±‚çš„ ç»å¯¹æ—¶é—´é¡ºåºï¼ŒFIFO éå…¬å¹³é”ï¼šåªè¦CASè®¾ç½®åŒæ­¥çŠ¶æ€æˆåŠŸstateï¼Œåˆ™è¡¨ç¤ºå½“å‰çº¿ç¨‹è·å–äº†é” ä½†å…¬å¹³é”è¿˜éœ€è¦åˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦æœ‰å‰é©±èŠ‚ç‚¹ï¼Œå¦‚æœæœ‰ï¼Œåˆ™è¡¨ç¤ºæœ‰çº¿ç¨‹æ¯”å½“å‰çº¿ç¨‹æ›´æ—©è¯·æ±‚è·å–é”ï¼Œå› æ­¤éœ€è¦ç­‰å¾…ã€‚ ã€æºç åˆ†æã€‘ åŸºæœ¬ç»“æ„ æ ¹æ®ä»£ç å¯çŸ¥ï¼ŒReentrantLocké‡Œé¢æœ‰ä¸€ä¸ªå†…éƒ¨ç±»Syncï¼ŒSyncç»§æ‰¿AQSï¼Œæ·»åŠ é”å’Œé‡Šæ”¾é”çš„å¤§éƒ¨åˆ†æ“ä½œå®é™…ä¸Šéƒ½æ˜¯åœ¨Syncä¸­å®ç°çš„ã€‚ Syncæœ‰å…¬å¹³é”FairSyncå’Œéå…¬å¹³é”NonfairSyncä¸¤ä¸ªå­ç±»ï¼› ReentrantLocké»˜è®¤ä½¿ç”¨éå…¬å¹³é”ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ„é€ å™¨æ¥æ˜¾ç¤ºçš„æŒ‡å®šä½¿ç”¨å…¬å¹³é”ã€‚ å…¬å¹³å’Œéå…¬å¹³é”åŒºåˆ† å…¬å¹³é”ä¸éå…¬å¹³é”çš„lock()æ–¹æ³•å”¯ä¸€çš„åŒºåˆ«å°±åœ¨äºå…¬å¹³é”åœ¨CASè·å–åŒæ­¥çŠ¶æ€æ—¶ï¼Œå¤šäº†ä¸€ä¸ªé™åˆ¶æ¡ä»¶ï¼šhasQueuedPredecessors()ã€‚ è¯¥æ–¹æ³•ä¸»è¦åšä¸€ä»¶äº‹æƒ…ï¼šä¸»è¦æ˜¯åˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦ä½äºåŒæ­¥é˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªã€‚å¦‚æœæ˜¯åˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚ 2.2 ReentrantLockçš„å®ç°åŸç†ï¼Ÿ ReentrantLockçš„å®ç°åŸºäºé˜Ÿåˆ—åŒæ­¥ï¼ˆAbstractQueuedSynchronizerï¼Œåé¢ç®€ç§°AQSï¼‰ã€‚å…³äºAQSçš„å®ç°åŸç†è§ä¸‹ã€‚ ReentrantLockçš„æ ¸å¿ƒï¼Œæ˜¯é€šè¿‡ä¿®æ”¹AQSä¸­stateçš„å€¼æ¥åŒæ­¥é”çš„çŠ¶æ€ã€‚ 2.3 å¸Œæœ›ç­‰å¾…ä¸€æ®µæ—¶é—´é”æ²¡æœ‰è·å–ï¼Œå¯ä»¥è‡ªåŠ¨æ”¾å¼ƒç”¨å“ªç§é”ï¼Ÿ Lockï¼ˆReentranLockï¼‰ ä½†æ˜¯åŸºäºAQSçš„æºç å“ªé‡Œä½“ç°äº†ï¼Ÿ åº”è¯¥Locké”çš„ä»£ç é‡Œè‡ªå·±çš„å®ç°å§ã€‚ 1.5.3 AQS ç›¸å…³ 3.1 ä»€ä¹ˆæ˜¯AQSè¯·ä½ ç®€å•ä»‹ç»ä¸€ä¸‹ï¼Ÿ AQSçš„å…¨ç§°ä¸ºï¼ˆAbstractQueuedSynchronizerï¼‰ï¼Œè¿™ä¸ªç±»åœ¨java.util.concurrent.locksåŒ…ä¸‹é¢ã€‚ AQSæ˜¯â¼€ä¸ªç”¨æ¥æ„å»ºé”å’ŒåŒæ­¥å™¨çš„æ¡†æ¶ï¼Œä½¿â½¤AQSèƒ½ç®€å•ä¸”é«˜æ•ˆåœ°æ„é€ å‡ºåº”ç”¨â¼´æ³›çš„å¤§é‡çš„åŒæ­¥å™¨ã€‚ ä¾‹å¦‚ï¼šReentrantLockï¼ŒSemaphoreï¼ŒReentrantReadWriteLockï¼ŒSynchronousQueueç­‰ç­‰çš†æ˜¯åŸºäºAQSçš„ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬â¾ƒâ¼°ä¹Ÿèƒ½åˆ©â½¤AQSéå¸¸è½»æ¾å®¹æ˜“åœ°æ„é€ å‡ºç¬¦åˆæˆ‘ä»¬â¾ƒâ¼°éœ€æ±‚çš„åŒæ­¥å™¨ã€‚ 3.2 è¯·ä»‹ç»ä¸€ä¸‹AQSåŸç†ï¼Ÿ åç»­å»ºè®®ç ”è¯»ï¼šä»ReentrantLockçš„å®ç°çœ‹AQSçš„åŸç†åŠåº”ç”¨ å…ˆå¸¦ç€é—®é¢˜æ¥è¿›è¡Œçœ‹ä¸‹é¢å†…å®¹ï¼š Qï¼šæŸä¸ªçº¿ç¨‹è·å–é”å¤±è´¥çš„åç»­æµç¨‹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ Aï¼šå­˜åœ¨æŸç§æ’é˜Ÿç­‰å€™æœºåˆ¶ï¼Œçº¿ç¨‹ç»§ç»­ç­‰å¾…ï¼Œä»ç„¶ä¿ç•™è·å–é”çš„å¯èƒ½ï¼Œè·å–é”æµç¨‹ä»åœ¨ç»§ç»­ã€‚ Qï¼šæ—¢ç„¶è¯´åˆ°äº†æ’é˜Ÿç­‰å€™æœºåˆ¶ï¼Œé‚£ä¹ˆå°±ä¸€å®šä¼šæœ‰æŸç§é˜Ÿåˆ—å½¢æˆï¼Œè¿™æ ·çš„é˜Ÿåˆ—æ˜¯ä»€ä¹ˆæ•°æ®ç»“æ„å‘¢ï¼Ÿ Aï¼šæ˜¯CLHå˜ä½“çš„FIFOåŒç«¯é˜Ÿåˆ—ã€‚ Qï¼šå¤„äºæ’é˜Ÿç­‰å€™æœºåˆ¶ä¸­çš„çº¿ç¨‹ï¼Œä»€ä¹ˆæ—¶å€™å¯ä»¥æœ‰æœºä¼šè·å–é”å‘¢ï¼Ÿ Aï¼šå¯ä»¥è¯¦ç»†çœ‹ä¸‹2.3.1.3å°èŠ‚ã€‚ Qï¼šå¦‚æœå¤„äºæ’é˜Ÿç­‰å€™æœºåˆ¶ä¸­çš„çº¿ç¨‹ä¸€ç›´æ— æ³•è·å–é”ï¼Œéœ€è¦ä¸€ç›´ç­‰å¾…ä¹ˆï¼Ÿè¿˜æ˜¯æœ‰åˆ«çš„ç­–ç•¥æ¥è§£å†³è¿™ä¸€é—®é¢˜ï¼Ÿ Aï¼šçº¿ç¨‹æ‰€åœ¨èŠ‚ç‚¹çš„çŠ¶æ€ä¼šå˜æˆå–æ¶ˆçŠ¶æ€ï¼Œå–æ¶ˆçŠ¶æ€çš„èŠ‚ç‚¹ä¼šä»é˜Ÿåˆ—ä¸­é‡Šæ”¾ï¼Œå…·ä½“å¯è§2.3.2å°èŠ‚ã€‚ Qï¼šLockå‡½æ•°é€šè¿‡Acquireæ–¹æ³•è¿›è¡ŒåŠ é”ï¼Œä½†æ˜¯å…·ä½“æ˜¯å¦‚ä½•åŠ é”çš„å‘¢ï¼Ÿ Aï¼šAQSçš„Acquireä¼šè°ƒç”¨tryAcquireæ–¹æ³•ï¼ŒtryAcquireç”±å„ä¸ªè‡ªå®šä¹‰åŒæ­¥å™¨å®ç°ï¼Œé€šè¿‡tryAcquireå®ŒæˆåŠ é”è¿‡ç¨‹ã€‚ æ ¸å¿ƒåŸç†æ¦‚è§ˆ å¦‚æœè¢«è¯·æ±‚çš„å…±äº«èµ„æºç©ºé—²ï¼Œåˆ™å°†å½“å‰è¯·æ±‚èµ„æºçš„çº¿ç¨‹è®¾ç½®ä¸ºæœ‰æ•ˆçš„â¼¯ä½œçº¿ç¨‹ï¼Œå¹¶ä¸”å°†å…±äº«èµ„æºè®¾ç½®ä¸ºé”å®šçŠ¶æ€ã€‚ å¦‚æœè¢«è¯·æ±‚çš„å…±äº«èµ„æºè¢«å ç”¨ï¼Œé‚£ä¹ˆå°±éœ€è¦â¼€å¥—çº¿ç¨‹é˜»å¡ç­‰å¾…ä»¥åŠè¢«å”¤é†’æ—¶é”åˆ†é…çš„æœºåˆ¶ï¼Œè¿™ä¸ªæœºåˆ¶AQSæ˜¯â½¤CLHé˜Ÿåˆ—é”å®ç°çš„ï¼Œå³å°†æš‚æ—¶è·å–ä¸åˆ°é”çš„çº¿ç¨‹åŠ â¼Šåˆ°é˜Ÿåˆ—ä¸­ã€‚ CLH(Craig,Landin,and Hagersten)é˜Ÿåˆ—æ˜¯â¼€ä¸ªè™šæ‹Ÿçš„åŒå‘é˜Ÿåˆ—ï¼ˆè™šæ‹Ÿçš„åŒå‘é˜Ÿåˆ—å³ä¸å­˜åœ¨é˜Ÿåˆ—å®ä¾‹ï¼Œä»…å­˜åœ¨ç»“ç‚¹ä¹‹é—´çš„å…³è”å…³ç³»ï¼‰ã€‚AQSæ˜¯å°†æ¯æ¡è¯·æ±‚å…±äº«èµ„æºçš„çº¿ç¨‹å°è£…æˆâ¼€ä¸ªCLHé”é˜Ÿåˆ—çš„â¼€ä¸ªç»“ç‚¹ï¼ˆNodeï¼‰æ¥å®ç°é”çš„åˆ†é…ã€‚ AQSä½¿ç”¨â¼€ä¸ªintæˆå‘˜å˜é‡stateæ¥è¡¨ç¤ºåŒæ­¥çŠ¶æ€ï¼Œé€šè¿‡å†…ç½®çš„FIFOé˜Ÿåˆ—æ¥å®Œæˆè·å–èµ„æºçº¿ç¨‹çš„æ’é˜Ÿâ¼¯ä½œã€‚AQSä½¿â½¤CASå¯¹è¯¥åŒæ­¥çŠ¶æ€è¿›è¡ŒåŸå­æ“ä½œå®ç°å¯¹å…¶å€¼çš„ä¿®æ”¹ã€‚ 1private volatile int state; //å…±äº«å˜é‡ï¼Œä½¿â½¤volatileä¿®é¥°ä¿è¯çº¿ç¨‹å¯è§æ€§ çŠ¶æ€ä¿¡æ¯é€šè¿‡protectedç±»å‹çš„getStateï¼ŒsetStateï¼ŒcompareAndSetStateè¿›è¡Œæ“ä½œ ã€‚ AQS å¯¹èµ„æºçš„å…±äº«æ–¹å¼ AQSå®šä¹‰ä¸¤ç§èµ„æºå…±äº«æ–¹å¼ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹stateå­—æ®µæ¥å®ç°å¤šçº¿ç¨‹çš„ç‹¬å ï¼ˆç»å…¸å¦‚ReentranLockï¼‰å’Œå…±äº«æ¨¡å¼ã€‚ Exclusiveï¼ˆç‹¬å ï¼‰ï¼šåªæœ‰â¼€ä¸ªçº¿ç¨‹èƒ½æ‰§è¡Œï¼Œå¦‚ReentrantLockã€‚â¼œå¯åˆ†ä¸ºå…¬å¹³é”å’Œéå…¬å¹³é”ï¼š å…¬å¹³é”ï¼šæŒ‰ç…§çº¿ç¨‹åœ¨é˜Ÿåˆ—ä¸­çš„æ’é˜Ÿé¡ºåºï¼Œå…ˆåˆ°è€…å…ˆæ‹¿åˆ°é” éå…¬å¹³é”ï¼šå½“çº¿ç¨‹è¦è·å–é”æ—¶ï¼Œæ— è§†é˜Ÿåˆ—é¡ºåºç›´æ¥å»æŠ¢é”ï¼Œè°æŠ¢åˆ°å°±æ˜¯è°çš„ Shareï¼ˆå…±äº«ï¼‰ï¼šå¤šä¸ªçº¿ç¨‹å¯åŒæ—¶æ‰§è¡Œï¼Œå¦‚Semaphore/CountDownLatchã€‚Semaphoreã€CountDownLatchã€ CyclicBarrierã€ReadWriteLock æˆ‘ä»¬éƒ½ä¼šåœ¨åé¢è®²åˆ°ã€‚ AQSè¯¦ç»†åŸç† æœ€ç»ˆå‚è€ƒï¼šä»æºç è§’åº¦å½»åº•ç†è§£ReentrantLock(é‡å…¥é”) ä»¥ä¸‹æ˜¯åŸºäºReentractLockè¯­å¢ƒä¸‹è¿›è¡Œåˆ†æã€‚ åŠ é”è¿‡ç¨‹ï¼šéå…¬å¹³é” ç®€å•æ¥è¯´ï¼šæ–°å»ºçº¿ç¨‹â†’CASå°è¯•å¿«é€Ÿè·å–é”â†’tryAcquire()CASä¿®æ”¹stateâ†’addWaiter() è·å–å¤±è´¥CASå°è¯•æ’å…¥é˜Ÿå°¾å…¥é˜Ÿâ†’acquireQueuedç­‰å¾…å‰é©±çº¿ç¨‹å”¤é†’ç»§ç»­CASè·å–é” åŠ é”æµç¨‹ä»lock.lock()å¼€å§‹ 123public void lock() &#123; sync.lock();&#125; è¿›å…¥è¯¥æºç ,æ­£ç¡®æ‰¾åˆ°sycnçš„å®ç°ç±»åå¯ä»¥çœ‹åˆ°çœŸæ­£æœ‰å†…å®¹çš„å…¥å£æ–¹æ³•ï¼š CASå°è¯•å¿«é€ŸåŠ é”ï¼Œåœ¨ReentranLockåªæœ‰state=0ï¼Œæ‰èƒ½æ›´æ–°æˆåŠŸï¼ˆå› ä¸ºæ˜¯éå¤šçº¿ç¨‹å…±äº«èµ„æºï¼‰ è·å–é”å¤±è´¥æ‰§è¡Œacquireæ–¹æ³• 12345678 // åŠ é”æµç¨‹çœŸæ­£æ„ä¹‰ä¸Šçš„å…¥å£ final void lock() &#123; //ä»¥casæ–¹å¼å°è¯•å°†AQSä¸­çš„stateä»0æ›´æ–°ä¸º1 if (compareAndSetState(0, 1)) setExclusiveOwnerThread(Thread.currentThread());//è·å–é”æˆåŠŸåˆ™å°†å½“å‰çº¿ç¨‹æ ‡è®°ä¸ºæŒæœ‰é”çš„çº¿ç¨‹,ç„¶åç›´æ¥è¿”å› else acquire(1);//è·å–é”å¤±è´¥åˆ™æ‰§è¡Œè¯¥æ–¹æ³•&#125; acquire åœ¨ä¸»è¦çš„é€»è¾‘éƒ½åœ¨ifåˆ¤æ–­æ¡ä»¶ä¸­,è¿™é‡Œé¢æœ‰3ä¸ªé‡è¦çš„æ–¹æ³•tryAcquire()ï¼ŒaddWaiter() å’Œ acquireQueued() ã€‚ 12345 public final void acquire(int arg) &#123; if (!tryAcquire(arg) &amp;&amp; acquireQueued(addWaiter(Node.EXCLUSIVE), arg)) selfInterrupt();&#125; acquireæµç¨‹1ï¼štryAcquire() tryAcquire()åœ¨å…¬å¹³å’Œéå…¬å¹³ä¸‹è·å–çš„æ–¹å¼ä¸ä¸€æ ·ï¼Œè¿™é‡Œåªè¯´éå…¬å¹³å®ç°ã€‚ å¦‚æœstate==0ï¼ˆæœªè¢«å…¶å®ƒçº¿ç¨‹æŒæœ‰ï¼‰ï¼ŒCASå°è¯•è·å–é”, å¦‚æœå½“å‰çº¿ç¨‹==æŒæœ‰é”çš„çº¿ç¨‹ï¼Œå¯é‡å…¥ ï¼Œstate+1 å¦åˆ™ reture falseè·å–é”å¤±è´¥ï¼ŒåŠ å…¥ç­‰å¾…é˜Ÿåˆ— 123456789101112131415161718final boolean nonfairTryAcquire(int acquires) &#123; final Thread current = Thread.currentThread();//è·å–å½“å‰çº¿ç¨‹å®ä¾‹ int c = getState();//è·å–stateå˜é‡çš„å€¼,å³å½“å‰é”è¢«é‡å…¥çš„æ¬¡æ•° if (c == 0) &#123; //stateä¸º0,è¯´æ˜å½“å‰é”æœªè¢«ä»»ä½•çº¿ç¨‹æŒæœ‰ if (compareAndSetState(0, acquires)) &#123; //ä»¥casæ–¹å¼è·å–é” setExclusiveOwnerThread(current); //å°†å½“å‰çº¿ç¨‹æ ‡è®°ä¸ºæŒæœ‰é”çš„çº¿ç¨‹ return true;//è·å–é”æˆåŠŸ,éé‡å…¥ &#125; &#125; else if (current == getExclusiveOwnerThread()) &#123; //å½“å‰çº¿ç¨‹å°±æ˜¯æŒæœ‰é”çš„çº¿ç¨‹,è¯´æ˜è¯¥é”è¢«é‡å…¥äº† int nextc = c + acquires;//è®¡ç®—stateå˜é‡è¦æ›´æ–°çš„å€¼ if (nextc &lt; 0) // overflow throw new Error(&quot;Maximum lock count exceeded&quot;); setState(nextc);//éåŒæ­¥æ–¹å¼æ›´æ–°stateå€¼ return true; //è·å–é”æˆåŠŸ,é‡å…¥ &#125; return false; //èµ°åˆ°è¿™é‡Œè¯´æ˜å°è¯•è·å–é”å¤±è´¥&#125; acquireæµç¨‹2ï¼šaddWaiter() ä¸»è¦é€»è¾‘å¦‚ä¸‹ï¼š é¦–å…ˆé€šè¿‡new Node()åˆ›å»ºä¸€ä¸ªç©ºç»“ç‚¹ï¼› å¦‚æœé˜Ÿåˆ—ä¸ç©º**ï¼Œä»¥CASæ–¹å¼è®©æ–°èŠ‚ç‚¹æ’å…¥åˆ°é˜Ÿå°¾; å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œæ‰§è¡Œenq(node) é€»è¾‘ 1234567891011121314151617181920212223242526272829private Node addWaiter(Node mode) &#123; Node node = new Node(Thread.currentThread(), mode);//é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹,å¹¶å°†å½“å‰çº¿ç¨‹å®ä¾‹å°è£…åœ¨å†…éƒ¨,modeè¿™é‡Œä¸ºnull // Try the fast path of enq; backup to full enq on failure Node pred = tail; if (pred != null) &#123; node.prev = pred; if (compareAndSetTail(pred, node)) &#123; pred.next = node; return node; &#125; &#125; enq(node);//å…¥é˜Ÿçš„é€»è¾‘è¿™é‡Œéƒ½æœ‰ return node; &#125; private Node enq(final Node node) &#123; for (;;) &#123; Node t = tail;//tæŒ‡å‘å½“å‰é˜Ÿåˆ—çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹,é˜Ÿåˆ—ä¸ºç©ºåˆ™ä¸ºnull if (t == null) &#123; // Must initialize //é˜Ÿåˆ—ä¸ºç©º if (compareAndSetHead(new Node())) //æ„é€ æ–°ç»“ç‚¹,CASæ–¹å¼è®¾ç½®ä¸ºé˜Ÿåˆ—é¦–å…ƒç´ ,å½“head==nullæ—¶æ›´æ–°æˆåŠŸ tail = head;//å°¾æŒ‡é’ˆæŒ‡å‘é¦–ç»“ç‚¹ &#125; else &#123; //é˜Ÿåˆ—ä¸ä¸ºç©º node.prev = t; if (compareAndSetTail(t, node)) &#123; //CASå°†å°¾æŒ‡é’ˆæŒ‡å‘å½“å‰ç»“ç‚¹,å½“t(åŸæ¥çš„å°¾æŒ‡é’ˆ)==tail(å½“å‰çœŸå®çš„å°¾æŒ‡é’ˆ)æ—¶æ‰§è¡ŒæˆåŠŸ t.next = node; //åŸå°¾ç»“ç‚¹çš„nextæŒ‡é’ˆæŒ‡å‘å½“å‰ç»“ç‚¹ return t; &#125; &#125; &#125; &#125; acquireæµç¨‹3ï¼šacquireQueued() çº¿ç¨‹åŠ å…¥åŒæ­¥é˜Ÿåˆ—åï¼Œè·å–é”çš„æµç¨‹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ä¸æ–­åˆ¤æ–­å½“å‰æ˜¯å¦æ˜¯è€äºŒï¼Œå¹¶å°è¯•å»è·å–é”ã€‚ SIGNAL ï¼šæ„å‘³ç€çº¿ç¨‹é‡Šæ”¾é”åä¼šå”¤é†’åé¢é˜»å¡çš„çº¿ç¨‹ã€‚æ¯•ç«Ÿï¼Œåªæœ‰ç¡®ä¿èƒ½å¤Ÿè¢«å”¤é†’ï¼Œå½“å‰çº¿ç¨‹æ‰èƒ½æ”¾å¿ƒçš„é˜»å¡ 123456789101112131415161718192021222324final boolean acquireQueued(final Node node, int arg) &#123; boolean failed = true; try &#123; boolean interrupted = false; //æ­»å¾ªç¯,æ­£å¸¸æƒ…å†µä¸‹çº¿ç¨‹åªæœ‰è·å¾—é”æ‰èƒ½è·³å‡ºå¾ªç¯ for (;;) &#123; final Node p = node.predecessor();//è·å¾—å½“å‰çº¿ç¨‹æ‰€åœ¨ç»“ç‚¹çš„å‰é©±ç»“ç‚¹ //ç¬¬ä¸€ä¸ªifåˆ†å¥ if (p == head &amp;&amp; tryAcquire(arg)) &#123; setHead(node); //å°†å½“å‰ç»“ç‚¹è®¾ç½®ä¸ºé˜Ÿåˆ—å¤´ç»“ç‚¹ p.next = null; // help GC failed = false; return interrupted;//æ­£å¸¸æƒ…å†µä¸‹æ­»å¾ªç¯å”¯ä¸€çš„å‡ºå£ &#125; //ç¬¬äºŒä¸ªifåˆ†å¥ if (shouldParkAfterFailedAcquire(p, node) &amp;&amp; //åˆ¤æ–­æ˜¯å¦è¦é˜»å¡å½“å‰çº¿ç¨‹ parkAndCheckInterrupt()) //é˜»å¡å½“å‰çº¿ç¨‹ interrupted = true; &#125; &#125; finally &#123; if (failed) cancelAcquire(node); &#125; &#125; è§£é”ï¼šéå…¬å¹³é” åŠ é”ï¼šå…¬å¹³é” ç®€å•æ¥è¯´ï¼šæ–°æ¥çº¿ç¨‹â†’ã€å¿…é¡»ã€‘å…ˆCASåŠ å…¥ç­‰å¾…é˜Ÿåˆ—â†’ç­‰å¾…å‰é©±èŠ‚ç‚¹é‡Šæ”¾é”ï¼ˆstate=0ï¼‰ï¼Œå¦‚æœæ˜¯è€äºŒåˆ™è·å–é”ã€‚ å…¬å¹³é”åŠ é”å…¥å£åŠ é”ä»ï¼š 123finally void lock() &#123; acqiuire();&#125; åœ¨ä¹‹å‰éå…¬å¹³é”çš„é€»è¾‘ä¸­ï¼Œçº¿ç¨‹æœ‰ä¸‰æ¬¡æœºä¼šè·å–é”ï¼š æ–°åˆ›å»ºæ—¶ï¼ŒCASå°è¯•ä¿®æ”¹state=1ï¼Œå»è·å– å¯é‡å…¥ï¼Œå½“å‰è·å–é”çº¿ç¨‹ä¸ºè‡ªå·± å‰é©±èŠ‚ç‚¹é‡Šæ”¾é”ï¼Œè‡ªå·±ä½œä¸ºè€äºŒè¢«å”¤é†’ è€Œå…¬å¹³é”ï¼Œåªèƒ½æŒ‰åŠ å…¥é˜Ÿåˆ—çš„å…ˆåæ¬¡åº &amp; å¯é‡å…¥è·å¾—é” ï¼š æ‰€æœ‰çº¿ç¨‹åœ¨è·å–é”å‰å¿…é¡»å…ˆåŠ å…¥åŒæ­¥é˜Ÿåˆ— å¦‚æœstate=0ï¼ŒhasQueuedPredecessorsåˆ¤æ–­å½“å‰æ˜¯å¤´èŠ‚ç‚¹ï¼Œåˆ™è·å–é” 3.3 ä¸ºä»€ä¹ˆåŸºäºFIFOçš„åŒæ­¥é˜Ÿåˆ—å¯ä»¥å®ç°éå…¬å¹³é”ï¼Ÿ å› ä¸ºéå…¬å¹³é”ï¼Œé™¤äº†ç­‰å‰é©±èŠ‚ç‚¹å”¤é†’å»è·å–é” ï¼Œè¿˜æœ‰ä»¥ä¸‹ä¸‰ç§æ–¹å¼è·å–é”ï¼š æ–°åˆ›å»ºæ—¶ï¼ŒCASå°è¯•ä¿®æ”¹state=1ï¼Œå»è·å– å…¬å¹³é”ï¼šè¿›æ¥å…ˆæ‰§è¡ŒhasQueuedPredecessors() , çœ‹ç­‰å¾…é˜Ÿåˆ—æ˜¯å¦æœ‰æœ‰æ•ˆèŠ‚ç‚¹ï¼Œæœ‰çš„è¯ä¸èƒ½è·å–é”ï¼ å¯é‡å…¥ï¼Œå½“å‰è·å–é”çº¿ç¨‹ä¸ºè‡ªå·± å…¬å¹³é”ï¼šä¹Ÿå¯ä»¥ åŒæ­¥é˜Ÿåˆ—ç­‰å¾…ï¼Œç­‰å¾…å”¤é†’è·å–é” å…¬å¹³é”ï¼šä¹Ÿå¯ä»¥ å¹¶ä¸”åœ¨é”é‡Šæ”¾æ—¶ï¼šæ˜¯å…ˆé‡Šæ”¾é”ï¼ˆä¿®æ”¹state=-1ï¼‰ï¼Œå†å»å”¤é†’åç»§èŠ‚ç‚¹ ä¼šå¯¼è‡´æ–°æ¥çš„çº¿ç¨‹ï¼Œå¯èƒ½åœ¨åç»§èŠ‚ç‚¹è¢«å”¤é†’å‰å°±è·å–äº†é”ï¼Œè¿™å°±ä¸ä¼šå…¬å¹³ 3.4 ã€æ˜“å¿˜ã€‘ä¸ºä»€ä¹ˆéå…¬å¹³é”æ€§èƒ½å¥½ï¼Ÿ .çº¿ç¨‹ä¸å¿…åŠ å…¥ç­‰å¾…é˜Ÿåˆ—å°±å¯ä»¥è·å¾—é”,ä¸ä»…å…å»äº†æ„é€ ç»“ç‚¹å¹¶åŠ å…¥é˜Ÿåˆ—çš„ç¹çæ“ä½œ ï¼ŒèŠ‚çœäº†çº¿ç¨‹é˜»å¡ã€å”¤é†’çš„å¼€é”€ï¼ˆè¿™æ¶‰åŠåˆ°ä¸Šä¸‹æ–‡çš„åˆ‡æ¢ï¼‰ï¼› å‡å°‘CASç«äº‰ã€‚å¦‚æœçº¿ç¨‹å¿…é¡»è¦åŠ å…¥é˜»å¡é˜Ÿåˆ—æ‰èƒ½è·å–é”,é‚£0å°†å˜å¾—å¼‚å¸¸æ¿€çƒˆ,CASæ“ä½œè™½ç„¶ä¸ä¼šå¯¼è‡´å¤±è´¥çº¿ç¨‹æŒ‚èµ·,ä½†ä¸æ–­å¤±è´¥é‡è¯•å¯¼è‡´çš„å¯¹CPUçš„æµªè´¹ä¹Ÿä¸èƒ½å¿½è§† 3.4 AQS æœ‰å“ªäº›ç»„ä»¶ï¼Œè¯·ç®€å•ä»‹ç»ä¸€ä¸‹ï¼Ÿä»‹ç»ä¸€ä¸‹CountDownLatchçš„åº”ç”¨åœºæ™¯ ï¼Ÿ Semaphore(ä¿¡å·é‡)ï¼šSemaphore(ä¿¡å·é‡)å¯ä»¥æŒ‡å®šå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®æŸä¸ªèµ„æºï¼› synchronized å’Œ ReentrantLock éƒ½æ˜¯â¼€æ¬¡åªå…è®¸â¼€ä¸ªçº¿ç¨‹è®¿é—®åŒæ—¶æŸä¸ªèµ„æºã€‚ è®¡æ•°ä¿¡å·é‡å…·å¤‡ä¸¤ç§æ“ä½œåŠ¨ä½œï¼Œç§°ä¸ºVï¼ˆsignal()ï¼‰ä¸Pï¼ˆwait()ï¼‰ï¼ˆå³éƒ¨åˆ†å‚è€ƒä¹¦å¸¸ç§°çš„â€œPVæ“ä½œâ€ï¼‰ã€‚Væ“ä½œä¼šå¢åŠ ä¿¡å·æ ‡Sçš„æ•°å€¼ï¼ŒPæ“ä½œä¼šå‡å°‘å®ƒã€‚ è¿è¡ŒPï¼ˆwait()ï¼‰ï¼Œä¿¡å·æ ‡Sçš„å€¼å°†è¢«å‡å°‘ã€‚ä¼å›¾è¿›å…¥ä¸´ç•ŒåŒºæ®µçš„è¿›ç¨‹ï¼Œéœ€è¦å…ˆè¿è¡ŒPï¼ˆwait()ï¼‰ã€‚å½“ä¿¡å·æ ‡Så‡ä¸ºè´Ÿå€¼æ—¶ï¼Œè¿›ç¨‹ä¼šè¢«æŒ¡ä½ï¼Œä¸èƒ½ç»§ç»­ï¼›å½“ä¿¡å·æ ‡Sä¸ä¸ºè´Ÿå€¼æ—¶ï¼Œè¿›ç¨‹å¯ä»¥è·å‡†è¿›å…¥ä¸´ç•ŒåŒºæ®µã€‚ CountDownLatch ï¼ˆå€’è®¡æ—¶å™¨ï¼‰ï¼š CountDownLatchæ˜¯â¼€ä¸ªåŒæ­¥â¼¯å…·ç±»ï¼Œç”¨æ¥åè°ƒå¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„åŒæ­¥ã€‚è¿™ä¸ªâ¼¯å…·é€šå¸¸ç”¨æ¥æ§åˆ¶çº¿ç¨‹ç­‰å¾…ï¼Œå®ƒå¯ä»¥è®©æŸâ¼€ä¸ªçº¿ç¨‹ç­‰å¾…ç›´åˆ°å€’è®¡æ—¶ç»“æŸï¼Œå†å¼€å§‹æ‰§è¡Œã€‚ CyclicBarrier(å¾ªç¯æ …æ )ï¼š CyclicBarrier å’Œ CountDownLatch éå¸¸ç±»ä¼¼ï¼Œå®ƒä¹Ÿå¯ä»¥å®ç°çº¿ç¨‹é—´çš„æŠ€æœ¯ç­‰å¾…ï¼Œä½†æ˜¯å®ƒçš„åŠŸèƒ½â½ CountDownLatch æ›´åŠ å¤æ‚å’Œå¼ºå¤§ã€‚ä¸»è¦åº”ç”¨åœºæ™¯å’ŒCountDownLatch ç±»ä¼¼ã€‚CyclicBarrier çš„å­—é¢æ„æ€æ˜¯å¯å¾ªç¯ä½¿ç”¨ï¼ˆCyclicï¼‰çš„å±éšœï¼ˆBarrierï¼‰ã€‚å®ƒè¦åšçš„äº‹æƒ…æ˜¯ï¼Œè®©â¼€ç»„çº¿ç¨‹åˆ°è¾¾â¼€ä¸ªå±éšœï¼ˆä¹Ÿå¯ä»¥å«åŒæ­¥ç‚¹ï¼‰æ—¶è¢«é˜»å¡ï¼Œç›´åˆ°æœ€åâ¼€ä¸ªçº¿ç¨‹åˆ°è¾¾å±éšœæ—¶ï¼Œå±éšœæ‰ä¼šå¼€â»”ï¼Œæ‰€æœ‰è¢«å±éšœæ‹¦æˆªçš„çº¿ç¨‹æ‰ä¼šç»§ç»­â¼²æ´»ã€‚ CyclicBarrieré»˜è®¤çš„æ„é€ æ–¹æ³•æ˜¯ CyclicBarrier(int parties)ï¼Œå…¶å‚æ•°è¡¨ç¤ºå±éšœæ‹¦æˆªçš„çº¿ç¨‹æ•°é‡ï¼Œæ¯ä¸ªçº¿ç¨‹è°ƒâ½¤**await()**æ–¹æ³•å‘Šè¯‰ CyclicBarrier æˆ‘å·²ç»åˆ°è¾¾äº†å±éšœï¼Œç„¶åå½“å‰çº¿ç¨‹è¢«é˜»å¡ã€‚ CountDownLatchçš„åº”ç”¨åœºæ™¯ æˆ‘ä»¬è¦è¯»å–å¤„ç†6ä¸ªâ½‚ä»¶ï¼Œè¿™6ä¸ªä»»åŠ¡éƒ½æ˜¯æ²¡æœ‰æ‰§è¡Œé¡ºåºä¾èµ–çš„ä»»åŠ¡ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦è¿”å›ç»™ç”¨æˆ·çš„æ—¶å€™å°†è¿™6ä¸ªâ½‚ä»¶çš„å¤„ç†çš„ç»“æœè¿›è¡Œç»Ÿè®¡æ•´ç†ã€‚ ä¸ºæ­¤æˆ‘ä»¬å®šä¹‰äº†â¼€ä¸ªçº¿ç¨‹æ± å’Œcountä¸º6çš„ CountDownLatch å¯¹è±¡ ã€‚ä½¿ç”¨çº¿ç¨‹æ± å¤„ç†è¯»å–ä»»åŠ¡ï¼Œæ¯â¼€ä¸ªçº¿ç¨‹å¤„ç†å®Œä¹‹åå°±å°†count-1ï¼Œè°ƒç”¨ CountDownLatch å¯¹è±¡çš„ await() æ–¹æ³•ï¼Œç›´åˆ°æ‰€æœ‰â½‚ä»¶è¯»å–å®Œä¹‹åï¼Œæ‰ä¼šæ¥ç€æ‰§è¡Œåé¢çš„é€»è¾‘ã€‚ 123456789101112131415161718192021222324252627public class CountDownLatchExample1 &#123; // å¤„ç†â½‚ä»¶çš„æ•°é‡ private static final int threadCount = 6; public static void main(String[] args) throws InterruptedException &#123; // åˆ›å»ºâ¼€ä¸ªå…·æœ‰å›ºå®šçº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ± å¯¹è±¡ï¼ˆæ¨èä½¿ç”¨æ„é€ æ–¹æ³•åˆ›å»ºï¼‰ ExecutorService threadPool = Executors.newFixedThreadPool(10); final CountDownLatch countDownLatch = newCountDownLatch(threadCount); for (int i = 0; i &lt; threadCount; i++) &#123; final int threadnum = i; threadPool.execute(() â†’ &#123; try &#123; //å¤„ç†â½‚ä»¶çš„ä¸šåŠ¡æ“ä½œ ...... &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; //è¡¨ç¤ºâ¼€ä¸ªâ½‚ä»¶å·²ç»è¢«å®Œæˆ countDownLatch.countDown(); &#125; &#125;); &#125; countDownLatch.await(); threadPool.shutdown(); System.out.println(&quot;finish&quot;); &#125;&#125; 1.5.4 Volatile å…³é”®å­— 4.0 JMM æ˜¯ä»€ä¹ˆ ï¼Ÿ ç¼“å­˜ä¸€è‡´æ€§åè®®MESI ? CPUå†…å­˜å±éšœï¼ŸJAVAå†…å­˜å±éšœï¼Ÿ å‚è€ƒï¼šå¹¶å‘ç¼–ç¨‹-ï¼ˆ4ï¼‰-JMMåŸºç¡€ï¼ˆæ€»çº¿é”ã€ç¼“å­˜é”ã€MESIç¼“å­˜ä¸€è‡´æ€§åè®®ã€CPU å±‚é¢çš„å†…å­˜å±éšœï¼‰ JMMå®šä¹‰ å…¨ç§°Java Memory Modelï¼ˆjavaå†…å­˜æ¨¡å‹ï¼‰æ˜¯ä¸€ç³»åˆ—çš„Javaè™šæ‹Ÿæœºå¹³å°å¯¹å¼€å‘è€…æä¾›çš„å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„å†…å­˜å¯è§æ€§ã€æ˜¯å¦å¯ä»¥é‡æ’åºç­‰é—®é¢˜çš„æ— å…³å…·ä½“å¹³å°çš„ç»Ÿä¸€çš„ä¿è¯ã€‚ MESI ç¼“å­˜ä¸€è‡´æ€§åè®®åè®® ç¼“å­˜ä¸ä¸€è‡´é—®é¢˜ CPUå¤„ç†é€Ÿåº¦ï¼Œè¿œå¤§äºI/Oè®¾å¤‡ï¼ˆç£ç›˜ï¼‰ï¼Œä¸ºäº†è§£å†³äº†å¤„ç†å™¨ä¸å†…å­˜çš„é€Ÿåº¦çŸ›ç›¾ï¼Œå¼•å…¥äº†é«˜é€Ÿç¼“å­˜ã€‚ä½†æ˜¯ç”±æ­¤ä¹Ÿå¸¦æ¥äº†ç¼“å­˜ä¸ä¸€è‡´çš„é—®é¢˜ã€‚ æ¯ä¸ªçº¿ç¨‹éƒ½ä¼šç¼“å­˜å†…å­˜çš„æ•°æ®åœ¨å„è‡ªå¯„å­˜å™¨ä¸­ï¼Œåœ¨ä¸åŒ CPU ä¸­è¿è¡Œçš„ä¸åŒçº¿ç¨‹çœ‹åˆ°åŒä¸€ä»½å†…å­˜çš„ç¼“å­˜å€¼ä¸ä¸€æ ·å°±ä¼šå­˜åœ¨ç¼“å­˜ä¸ä¸€è‡´çš„é—®é¢˜ã€‚ MESIåè®®å†…å®¹ ä¸ºäº†è¾¾åˆ°æ•°æ®è®¿é—®çš„ä¸€è‡´ï¼Œéœ€è¦å„ä¸ªå¤„ç†å™¨åœ¨è®¿é—®ç¼“å­˜æ—¶éµå¾ªä¸€äº›åè®®ï¼Œåœ¨è¯»å†™æ—¶æ ¹æ®åè®®æ¥æ“ä½œï¼Œæœ€å¸¸è§çš„å°±æ˜¯ MESI åè®®ï¼š MESI è¡¨ç¤ºç¼“å­˜è¡Œçš„å››ç§çŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯ï¼š åœ¨ MESI åè®®ä¸­ï¼Œæ¯ä¸ªç¼“å­˜çš„ç¼“å­˜æ§åˆ¶å™¨ä¸ä»…çŸ¥é“è‡ªå·±çš„ è¯»å†™æ“ä½œï¼Œè€Œä¸”ä¹Ÿç›‘å¬(snoop)å…¶å®ƒ Cache çš„è¯»å†™æ“ä½œã€‚ M(Modify) è¡¨ç¤ºå…±äº«æ•°æ®åªç¼“å­˜åœ¨å½“å‰ CPU ç¼“å­˜ä¸­ï¼Œ å¹¶ä¸”æ˜¯è¢«ä¿®æ”¹çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯ç¼“å­˜çš„æ•°æ®å’Œä¸»å†…å­˜ä¸­çš„æ•°æ®ä¸ä¸€è‡´ã€‚ E(Exclusive) è¡¨ç¤ºç¼“å­˜çš„ç‹¬å çŠ¶æ€ï¼Œæ•°æ®åªç¼“å­˜åœ¨å½“å‰ CPU ç¼“å­˜ä¸­ï¼Œå¹¶ä¸”æ²¡æœ‰è¢«ä¿®æ”¹ã€‚ S(Shared) è¡¨ç¤ºæ•°æ®å¯èƒ½è¢«å¤šä¸ª CPU ç¼“å­˜ï¼Œå¹¶ä¸”å„ä¸ªç¼“å­˜ä¸­çš„æ•°æ®å’Œä¸»å†…å­˜æ•°æ®ä¸€è‡´ã€‚ I(Invalid) è¡¨ç¤ºç¼“å­˜å·²ç»å¤±æ•ˆã€‚ å¯¹äº MESI åè®®ï¼Œä» CPU è¯»å†™è§’åº¦æ¥è¯´ä¼šéµå¾ªä»¥ä¸‹åŸåˆ™ï¼š CPU è¯»è¯·æ±‚ï¼šç¼“å­˜å¤„äº Mã€Eã€S çŠ¶æ€éƒ½å¯ä»¥è¢«è¯»å–ï¼ŒI çŠ¶ æ€ CPU åªèƒ½ä»ä¸»å­˜ä¸­è¯»å–æ•°æ®ï¼› CPU å†™è¯·æ±‚ï¼šç¼“å­˜å¤„äº Mã€E çŠ¶æ€æ‰å¯ä»¥è¢«å†™ã€‚å¯¹äº S çŠ¶ æ€çš„å†™ï¼Œéœ€è¦å°†å…¶ä»– CPU ä¸­ç¼“å­˜è¡Œç½®ä¸ºæ— æ•ˆæ‰å¯å†™ã€‚ Store Bufferesï¼ˆå­˜å‚¨ç¼“å­˜ï¼‰ CPU ç¼“å­˜è¡Œçš„çŠ¶æ€æ˜¯é€šè¿‡æ¶ˆæ¯ä¼ é€’æ¥è¿›è¡Œçš„ï¼Œå¦‚æœ CPU0 è¦å¯¹ä¸€ä¸ªåœ¨ç¼“å­˜ä¸­å…±äº«çš„å˜é‡è¿›è¡Œå†™å…¥ï¼Œé¦–å…ˆå‘é€ä¸€ä¸ªå¤±æ•ˆçš„æ¶ˆæ¯ç»™åˆ°å…¶ä»–ç¼“å­˜äº†è¯¥æ•°æ®çš„ CPUã€‚å¹¶ä¸”è¦ç­‰åˆ°ä»–ä»¬çš„ç¡®è®¤å›æ‰§ã€‚CPU0 åœ¨è¿™æ®µæ—¶é—´å†…éƒ½ä¼šå¤„äºé˜»å¡çŠ¶æ€ã€‚ ä¸ºäº†é¿å…é˜»å¡å¸¦æ¥çš„èµ„æºæµªè´¹ã€‚åœ¨ cpu ä¸­å¼•å…¥ äº† Store Bufferesï¼ˆå­˜å‚¨ç¼“å­˜ï¼‰ å’Œ Invalidate Queueï¼ˆæ— æ•ˆé˜Ÿåˆ—ï¼‰ã€‚ CPU0 å†™å…¥å…±äº«æ•°æ®æ—¶ï¼Œç›´æ¥æŠŠæ•°æ®å†™å…¥åˆ° store bufferes ä¸­ï¼ŒåŒæ—¶å‘é€ invalidate æ¶ˆæ¯ï¼Œç„¶åç»§ç»­å»å¤„ç†å…¶ä»–æŒ‡ä»¤ï¼› æ”¶åˆ°å…¶ä»–æ‰€æœ‰ CPU å‘é€äº† invalidate ACKæ¶ˆæ¯æ—¶ï¼Œå†å°† store bufferes ä¸­çš„æ•°æ®æ•°æ®å­˜å‚¨è‡³ cache ä¸­ï¼› æœ€åå†ä»æœ¬åœ°CacheåŒæ­¥åˆ°ä¸»å†…å­˜ã€‚ CPUå±‚é¢å†…å­˜å±éšœ å†…å­˜å±éšœå°±æ˜¯å°† Store Bufferes ä¸­çš„æŒ‡ä»¤å†™å…¥åˆ°å†…å­˜ï¼Œä»è€Œä½¿å¾—å…¶ä»–è®¿é—®åŒä¸€å…±äº«å†…å­˜çš„çº¿ç¨‹çš„å¯è§æ€§ã€‚ ç¡¬ä»¶å±‚çš„å†…å­˜å±éšœåˆ†ä¸ºä¸¤ç§ï¼šLoad Barrier ï¼ˆè¯»å±éšœï¼‰å’Œ Store Barrierï¼ˆå†™å±éšœï¼‰åŠ Full Barrierï¼ˆå…¨å±éšœï¼‰æ˜¯è¯»å±éšœå’Œå†™å±éšœçš„åˆé›†ã€‚ å†™å±éšœï¼šå¼ºåˆ¶æŠŠå†™ç¼“å†²åŒº/é«˜é€Ÿç¼“å­˜ä¸­çš„è„æ•°æ®ç­‰å†™å›ä¸»å†…å­˜ è¯»å±éšœï¼šå°†ç¼“å†²åŒº/é«˜é€Ÿç¼“å­˜ä¸­ç›¸åº”çš„æ•°æ®å¤±æ•ˆã€‚ JAVA å†…å­˜å±éšœ javaçš„å†…å­˜å±éšœé€šå¸¸æ‰€è°“çš„å››ç§ï¼ŒLoadLoadï¼ˆLLï¼‰, StoreStoreï¼ˆSSï¼‰, LoadStoreï¼ˆLSï¼‰, StoreLoadï¼ˆSL)å®é™…ä¸Šä¹Ÿæ˜¯ä¸Šè¿°ä¸¤ç§çš„ç»„åˆï¼Œå®Œæˆä¸€ç³»åˆ—çš„å±éšœå’Œæ•°æ®åŒæ­¥åŠŸèƒ½ã€‚ LoadLoadï¼ˆLLï¼‰å±éšœï¼šå¯¹äºè¿™æ ·çš„è¯­å¥Load1; LoadLoad; Load2ï¼Œåœ¨Load2åŠåç»­è¯»å–æ“ä½œè¦è¯»å–çš„æ•°æ®è¢«è®¿é—®å‰ï¼Œä¿è¯Load1è¦è¯»å–çš„æ•°æ®è¢«è¯»å–å®Œæ¯•ã€‚ StoreStoreï¼ˆSSï¼‰å±éšœï¼šå¯¹äºè¿™æ ·çš„è¯­å¥Store1; StoreStore; Store2ï¼Œåœ¨Store2åŠåç»­å†™å…¥æ“ä½œæ‰§è¡Œå‰ï¼Œä¿è¯Store1çš„å†™å…¥æ“ä½œå¯¹å…¶å®ƒå¤„ç†å™¨å¯è§ã€‚ LoadStoreï¼ˆLSï¼‰å±éšœï¼šå¯¹äºè¿™æ ·çš„è¯­å¥Load1; LoadStore; Store2ï¼Œåœ¨Store2åŠåç»­å†™å…¥æ“ä½œè¢«åˆ·å‡ºå‰ï¼Œä¿è¯Load1è¦è¯»å–çš„æ•°æ®è¢«è¯»å–å®Œæ¯•ã€‚ StoreLoadï¼ˆSLï¼‰å±éšœï¼šå¯¹äºè¿™æ ·çš„è¯­å¥Store1; StoreLoad; Load2ï¼Œåœ¨Load2åŠåç»­æ‰€æœ‰è¯»å–æ“ä½œæ‰§è¡Œå‰ï¼Œä¿è¯Store1çš„å†™å…¥å¯¹æ‰€æœ‰å¤„ç†å™¨å¯è§ã€‚å®ƒçš„å¼€é”€æ˜¯å››ç§å±éšœä¸­æœ€å¤§çš„ã€‚åœ¨å¤§å¤šæ•°å¤„ç†å™¨çš„å®ç°ä¸­ï¼Œè¿™ä¸ªå±éšœæ˜¯ä¸ªä¸‡èƒ½å±éšœï¼Œå…¼å…·å…¶å®ƒä¸‰ç§å†…å­˜å±éšœçš„åŠŸèƒ½ã€‚ 4.1 ä»€ä¹ˆæ˜¯HappenBeforeåŸåˆ™ï¼Ÿ åœ¨ JMM ä¸­ï¼Œå¦‚æœä¸€ä¸ªæ“ä½œæ‰§è¡Œçš„ç»“æœéœ€è¦å¯¹å¦ä¸€ä¸ªæ“ä½œã€å¯è§ã€‘ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªæ“ä½œå¿…é¡»è¦å­˜åœ¨ happens-before å…³ç³»ã€‚è¿™ä¸¤ä¸ªæ“ä½œå¯ä»¥æ˜¯åŒä¸€ä¸ªçº¿ç¨‹ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸åŒçš„çº¿ç¨‹ã€‚ å®ƒæ˜¯å¯è§æ€§ä¸æœ‰åºæ€§çš„ä¸€å¥—è§„åˆ™æ€»ç»“ï¼ŒæŠ›å¼€ä»¥ä¸‹ happens-before è§„åˆ™ï¼ŒJMM å¹¶ä¸èƒ½ä¿è¯ä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„å†™ï¼Œå¯¹äºå…¶å®ƒçº¿ç¨‹å¯¹è¯¥å…±äº«å˜é‡çš„è¯»å¯è§ ã€‚ HappenBeforeåŸåˆ™ as-if-serial è§„åˆ™ï¼ˆç¨‹åºé¡ºåºæ‰§è¡Œï¼‰ï¼šå•ä¸ªçº¿ç¨‹ä¸­çš„ä»£ç é¡ºåºä¸ç®¡æ€ä¹ˆé‡æ’åºï¼Œå¯¹äºç»“æœæ¥è¯´æ˜¯ä¸å˜çš„ã€‚ volatile å˜é‡è§„åˆ™ï¼Œå¯¹äº volatile ä¿®é¥°çš„å˜é‡çš„å†™æ“ä½œï¼Œ ä¸€å®š happen-before åç»­å¯¹äº volatile å˜é‡çš„è¯»æ“ä½œ; ç›‘è§†å™¨é”è§„åˆ™ï¼ˆmonitor lock ruleï¼‰ï¼šå¯¹ä¸€ä¸ªç›‘è§†å™¨çš„è§£é”ï¼Œhappens-beforeäºéšåå¯¹è¿™ä¸ªç›‘è§†å™¨çš„åŠ é”ã€‚ ä¼ é€’æ€§è§„åˆ™ï¼šå¦‚æœA happens-before Bï¼Œä¸”B happens-before Cï¼Œé‚£ä¹ˆA happens-before Cã€‚ start è§„åˆ™ï¼šå¦‚æœçº¿ç¨‹ A æ‰§è¡Œæ“ä½œ ThreadB.start(),é‚£ä¹ˆçº¿ç¨‹ A çš„ ThreadB.start()æ“ä½œ happens-before çº¿ç¨‹ B ä¸­çš„ä»»æ„æ“ä½œã€‚ join è§„åˆ™ï¼šå¦‚æœçº¿ç¨‹ A æ‰§è¡Œæ“ä½œ ThreadB.join()å¹¶æˆåŠŸè¿”å›ï¼Œé‚£ä¹ˆçº¿ç¨‹ B ä¸­çš„ä»»æ„æ“ä½œ happens-before äºçº¿ç¨‹ A ä» ThreadB.join()æ“ä½œæˆåŠŸè¿”å›ã€‚ ä¸¾ä¾‹è¯´æ˜ï¼šä»€ä¹ˆæ˜¯æŒ‡ä»¤é‡æ’åºï¼Ÿ è¯·çœ‹ä¸‹é¢ä»£ç ï¼š å‡è®¾ çº¿ç¨‹Aæ‰§è¡Œwriter()æ–¹æ³•ä¹‹åï¼Œçº¿ç¨‹Bæ‰§è¡Œreader()æ–¹æ³•ï¼Œé‚£ä¹ˆçº¿ç¨‹Bæ‰§è¡Œ4çš„æ—¶å€™ä¸€å®šèƒ½çœ‹åˆ°çº¿ç¨‹Aå†™å…¥çš„å€¼å—ï¼Ÿ 12345678910111213141516class VolatileExample &#123; int a = 0; volatile boolean flag = false; public void writer() &#123; a = 1; //1 flag = true; //2 &#125; public void reader() &#123; if (flag) &#123; //3 int i = a; //4 ... &#125; &#125;&#125; ç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚å› ä¸ºæ ¹æ®happens-beforeè§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°å¦‚ä¸‹å…³ç³»ï¼š æ ¹æ®ç¨‹åºé¡ºåºè§„åˆ™ï¼Œ1 happens-before 2ï¼›3 happens-before 4 æ ¹æ®volatileè§„åˆ™ï¼Œ2 happens-before 3ï¼› æ ¹æ®ä¼ é€’æ€§è§„åˆ™ï¼Œ1 happens-before 4 ã€‚ å› æ­¤ï¼Œç»¼åˆè¿ç”¨ç¨‹åºé¡ºåºè§„åˆ™ã€volatileè§„åˆ™åŠä¼ é€’æ€§è§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°1 happens-before 4ï¼Œå³çº¿ç¨‹Båœ¨æ‰§è¡Œ4çš„æ—¶å€™ä¸€å®šèƒ½çœ‹åˆ°Aå†™å…¥çš„å€¼ã€‚ 4.2 Volatile å…³é”®å­—åŸç† å‚è€ƒï¼šhttps://www.cnblogs.com/paddix/p/5428507.html ã€‚ æ­¤é¢˜è€ƒå¯Ÿçš„æ˜¯volatileè¿™ä¸ªå…³é”®å­—ã€‚å¯ä»¥ä»volatileçš„ä½œç”¨å’Œvolatileçš„åŸç†è¿™ä¸‰ä¸ªæ–¹é¢æ¥è¿›è¡Œå›ç­”ã€‚volatileåªèƒ½ä¿è¯å˜é‡çš„å¯è§æ€§ã€æœ‰åºæ€§ï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯åŸå­æ€§ã€‚ å¯è§æ€§å®ç°åŸç† ä¸ºäº†å®ç°volatileå¯è§æ€§å’Œhappen-beforçš„è¯­ä¹‰ã€‚JVMåº•å±‚æ˜¯é€šè¿‡ä¸€ä¸ªå«åšâ€œå†…å­˜å±éšœï¼ˆåŸºäºMESIï¼‰â€çš„ä¸œè¥¿æ¥å®Œæˆï¼ˆä¹Ÿå®ç°äº†æœ‰åºæ€§ ï¼Ÿï¼‰ã€‚ çº¿ç¨‹æœ¬èº«å¹¶ä¸ç›´æ¥ä¸ä¸»å†…å­˜è¿›è¡Œæ•°æ®çš„äº¤äº’ï¼Œè€Œæ˜¯é€šè¿‡çº¿ç¨‹çš„å·¥ä½œå†…å­˜æ¥å®Œæˆç›¸åº”çš„æ“ä½œã€‚è¿™ä¹Ÿæ˜¯å¯¼è‡´çº¿ç¨‹é—´æ•°æ®ä¸å¯è§çš„æœ¬è´¨åŸå› ã€‚ ä½¿ç”¨MESI åè®®ï¼Œä½¿å¾—ä»»æ„ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº† volatile ä¿®é¥°çš„å˜é‡ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥é©¬ä¸Šè¯†åˆ«åˆ°æœ€æ–°å€¼ã€‚ æœ€ç»ˆç›®æ ‡ï¼šä¿è¯äº†ç¼“å­˜çš„ä¸€è‡´æ€§ã€‚ å…·ä½“çš„è¯ï¼Œä¸‹é¢æ˜¯ç”¨å†…å­˜å±éšœæ¥å®ç°çš„ã€‚ ä¿®æ”¹æœ¬åœ°å·¥ä½œå†…å­˜ï¼Œå¼ºåˆ¶åˆ·å›ä¸»å†…å­˜ï¼› å¼ºåˆ¶è®©å…¶ä»–çº¿ç¨‹çš„å·¥ä½œå†…å­˜å¤±æ•ˆè¿‡æœŸï¼› å…¶ä»–çº¿ç¨‹é‡æ–°ä»ä¸»å†…å­˜åŠ è½½æœ€æ–°å€¼ï¼› æœ‰åºæ€§å®ç°åŸç† å‚è€ƒï¼šhttps://blog.csdn.net/qq_42764468/article/details/106898608 ä»æºä»£ç åˆ°æœ€ç»ˆæ‰§è¡Œçš„æŒ‡ä»¤ï¼Œå¯èƒ½ä¼šç»è¿‡ä¸‰ç§é‡æ’åºï¼š ã€æŒ‡ä»¤ã€‘é‡æ’åºï¼ŒJMM ä¼šè¦æ±‚ç¼–è¯‘å™¨ç”ŸæˆæŒ‡ä»¤æ—¶ï¼Œä¼šæ’å…¥å†…å­˜å±éšœæ¥ç¦æ­¢å¤„ç†å™¨é‡æ’åºã€‚ JMMå±äºè¯­è¨€çº§çš„å†…å­˜æ¨¡å‹ï¼Œå®ƒç¡®ä¿åœ¨ä¸åŒçš„ç¼–è¯‘å™¨å’Œä¸åŒçš„å¤„ç†å™¨å¹³å°ä¹‹ä¸Šï¼Œé€šè¿‡ç¦æ­¢ï¼šâ‘ ç‰¹å®šç±»å‹çš„ç¼–è¯‘å™¨é‡æ’åºå’Œâ‘¡å¤„ç†å™¨é‡æ’åºï¼Œä¸ºç¨‹åºå‘˜æä¾›ä¸€è‡´çš„å†…å­˜å¯è§æ€§ä¿è¯ã€‚ ç¼–è¯‘å™¨é‡æ’åºï¼ŒJMM ç¦æ­¢äº†ç‰¹å®šç±»å‹çš„ç¼–è¯‘å™¨é‡æ’åºï¼ˆä¸æ˜¯æ‰€æœ‰çš„ç¼–è¯‘å™¨é‡æ’åºéƒ½è¦ç¦æ­¢ï¼‰ã€‚ å†…å­˜é‡æ’åºï¼šç”±äºå¤„ç†å™¨ä¼šä½¿ç”¨è¯»/å†™ç¼“å†²åŒºï¼Œå‡ºäºæ€§èƒ½çš„åŸå› ï¼Œå†…å­˜ä¼šå¯¹è¯»/å†™è¿›è¡Œé‡æ’åº JVM æ˜¯ä½¿ç”¨å†…å­˜å±éšœæ¥ç¦æ­¢ã€æŒ‡ä»¤ã€‘é‡æ’ï¼Œä»è€Œè¾¾åˆ°ï¼šå¯è§æ€§ + éƒ¨åˆ†æœ‰åºæ€§æ•ˆæœã€‚ lockå‰ç¼€æŒ‡ä»¤å®é™…ç›¸å½“äºä¸€ä¸ªå†…å­˜å±éšœï¼Ÿ ä¸‹é¢ä¸æ˜¯å¯è§æ€§å—ï¼Ÿï¼Ÿï¼Ÿ å¯¹volatileå˜é‡çš„å†™æ“ä½œä¸æ™®é€šå˜é‡çš„ä¸»è¦åŒºåˆ«æœ‰ä¸¤ç‚¹ï¼š ä¿®æ”¹volatileå˜é‡å‰ï¼Œä¼šå¼ºåˆ¶å°†ä¿®æ”¹åçš„å€¼åˆ·æ–°çš„ä¸»å†…å­˜ä¸­ã€‚ æ¯ä¸ªvolatileå†™æ“ä½œå‰æ’å…¥StoreStoreï¼ˆSSï¼‰å±éšœ ä¿®æ”¹volatileå˜é‡åï¼Œä¼šå¯¼è‡´å…¶ä»–çº¿ç¨‹å·¥ä½œå†…å­˜ä¸­å¯¹åº”çš„å˜é‡å€¼å¤±æ•ˆï¼Œå› æ­¤ï¼Œå†è¯»å–è¯¥å˜é‡å€¼çš„æ—¶å€™å°±éœ€è¦é‡æ–°ä»è¯»å–ä¸»å†…å­˜ä¸­çš„å€¼ã€‚ åœ¨å†™æ“ä½œåæ’å…¥StoreLoadå±éšœï¼› å¯¹volatileå˜é‡çš„è¯»æ“ä½œç±»ä¼¼ï¼š åœ¨æ¯ä¸ªvolatileè¯»æ“ä½œå‰æ’å…¥LoadLoadï¼ˆLLï¼‰å±éšœï¼› ç¡®ä¿Load2åŠåç»­LoadæŒ‡ä»¤åŠ è½½æ•°æ®ä¹‹å‰èƒ½è®¿é—®åˆ°Load1åŠ è½½çš„æ•°æ®ã€‚ åœ¨è¯»æ“ä½œåæ’å…¥LoadStoreï¼ˆLSå±éšœï¼‰ã€‚ ç¡®ä¿Store2å’Œåç»­StoreæŒ‡ä»¤æ‰§è¡Œå‰ï¼Œå¯ä»¥è®¿é—®åˆ°Load1åŠ è½½çš„æ•°æ®ã€‚ 4.3 volatileä¸ºä»€ä¹ˆä¸èƒ½ä¿è¯åŸå­æ€§ï¼Ÿ å‚è€ƒï¼šä¸ºä»€ä¹ˆvolatileèƒ½ä¿è¯æœ‰åºæ€§ä¸èƒ½ä¿è¯åŸå­æ€§ å¯¹äºi++è¿™ç§å¤åˆæ“ä½œï¼Œå³ä½¿ä½¿ç”¨volatileå…³é”®å­—ä¿®é¥°ä¹Ÿä¸èƒ½ä¿è¯æ“ä½œçš„åŸå­æ€§ï¼Œå¯èƒ½ä¼šå¼•å‘æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚ 12private volatile int i = 0;i++; ä¸Šè¿°i++æ“ä½œï¼Œå…¶å®åˆ†ä¸ºä¸‰ä¸ªæ“ä½œï¼š çº¿ç¨‹è¯»å–i temp = i + 1 i = temp A,Bä¸¤ä¸ªçº¿ç¨‹å¤šçº¿ç¨‹æ“ä½œæ—¶ï¼š Açº¿ç¨‹è¯»å–iå¹¶æ‰§è¡Œäº† temp = i + 1çš„æ“ä½œï¼Œ æ­¤æ—¶çš„ iï¼ˆ0ï¼‰ çš„å€¼è¿˜æ²¡æœ‰å˜åŒ– æ­¤æ—¶Bä¹Ÿè¯»å…¥iå¹¶æ‰§è¡Œtemp = i + 1æ“ä½œï¼Œæ­¤æ—¶iï¼ˆ0ï¼‰ä¹Ÿæ²¡å˜åŒ– âš ï¸ è™½ç„¶æœ‰MESIåè®®ï¼Œä½†æ˜¯tempä¸ä¿å­˜å˜é‡iæ‰€åœ¨å†…å­˜åŒºåŸŸï¼Œæ˜¯cpuå†…éƒ¨çš„è®¡ç®—ï¼Œä¸ä¼šè¢«ç«‹é©¬åˆ·æ–°å†…å­˜ï¼ å½“Aå†™å…¥i = tempï¼ˆ1ï¼‰æ—¶ï¼Œç”±äºå¯è§æ€§ç«‹é©¬åœ¨ä¸»å­˜è¢«åˆ·æ–°äº†å€¼ i=1 å½“Bä¹Ÿå†™å…¥i = tempæ—¶ï¼Œæ­¤æ—¶Aä¾æ—§æ˜¯1ï¼Œè€Œä¸æ˜¯2 4.4 å¹¶å‘ç¼–ç¨‹çš„ä¸‰ä¸ªé‡è¦ç‰¹æ€§ ï¼Ÿ åŸå­æ€§ : â¼€ä¸ªçš„æ“ä½œæˆ–è€…å¤šæ¬¡æ“ä½œï¼Œè¦ä¹ˆæ‰€æœ‰çš„æ“ä½œå…¨éƒ¨éƒ½å¾—åˆ°æ‰§è¡Œå¹¶ä¸”ä¸ä¼šæ”¶åˆ°ä»»ä½•å› ç´ çš„â¼²æ‰°è€Œä¸­æ–­ï¼Œè¦ä¹ˆæ‰€æœ‰çš„æ“ä½œéƒ½æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œã€‚ synchronized å¯ä»¥ä¿è¯ä»£ç ç‰‡æ®µçš„åŸå­æ€§ã€‚ å¯è§æ€§ ï¼šå½“â¼€ä¸ªå˜é‡å¯¹å…±äº«å˜é‡è¿›è¡Œäº†ä¿®æ”¹ï¼Œé‚£ä¹ˆå¦å¤–çš„çº¿ç¨‹éƒ½æ˜¯â½´å³å¯ä»¥çœ‹åˆ°ä¿®æ”¹åçš„æœ€æ–°å€¼ã€‚ volatile å…³é”®å­—å¯ä»¥ä¿è¯å…±äº«å˜é‡çš„å¯è§æ€§ã€‚ æœ‰åºæ€§ï¼šä»£ç åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­çš„å…ˆåé¡ºåºï¼ŒJava åœ¨ç¼–è¯‘å™¨ä»¥åŠè¿è¡ŒæœŸé—´çš„ä¼˜åŒ–ï¼Œä»£ç çš„æ‰§è¡Œé¡ºåºæœªå¿…å°±æ˜¯ç¼–å†™ä»£ç æ—¶å€™çš„é¡ºåºã€‚ volatile å…³é”®å­—å¯ä»¥ç¦â½ŒæŒ‡ä»¤è¿›è¡Œé‡æ’åºä¼˜åŒ–ã€‚ 4.5 è¯´è¯´ synchronized å…³é”®å­—å’Œ volatile å…³é”®å­—çš„åŒºåˆ«ï¼Ÿ synchronizedå…³é”®å­—å’Œvolatileå…³é”®å­—æ¯”è¾ƒï¼š volatileå…³é”®å­—æ˜¯çº¿ç¨‹åŒæ­¥çš„è½»é‡çº§å®ç°ï¼Œæ‰€ä»¥volatileæ€§èƒ½è‚¯å®šâ½synchronizedå…³é”®å­—è¦å¥½ã€‚ volatileå…³é”®å­—åªèƒ½ç”¨äºå˜é‡ï¼Œè€Œsynchronizedå…³é”®å­—å¯ä»¥ä¿®é¥°æ–¹æ³•ä»¥åŠä»£ç å—ã€‚ synchronizedå…³é”®å­—åœ¨JavaSE1.6ä¹‹åè¿›è¡Œäº†ä¸»è¦åŒ…æ‹¬ä¸ºäº†å‡å°‘è·å¾—é”å’Œé‡Šæ”¾é”å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—è€Œå¼•â¼Šçš„åå‘é”å’Œè½»é‡çº§é”ä»¥åŠå…¶å®ƒå„ç§ä¼˜åŒ–ä¹‹åæ‰§è¡Œæ•ˆç‡æœ‰äº†æ˜¾è‘—æå‡ï¼Œå®é™…å¼€å‘ä¸­ä½¿ç”¨ synchronized å…³é”®å­—çš„åœºæ™¯è¿˜æ˜¯æ›´å¤šâ¼€äº›ã€‚ volatileå…³é”®å­—åªèƒ½ä¿è¯æ•°æ®çš„å¯è§æ€§ï¼Œä½†ä¸èƒ½ä¿è¯æ•°æ®çš„åŸå­æ€§ã€‚synchronizedå…³é”®å­—ä¸¤è€…éƒ½èƒ½ä¿è¯ã€‚ å¤šçº¿ç¨‹è®¿é—®volatileå…³é”®å­—ä¸ä¼šå‘ç”Ÿé˜»å¡ï¼Œè€Œsynchronizedå…³é”®å­—å¯èƒ½ä¼šå‘â½£é˜»å¡ 1.5.5 Atomic åŸå­ç±» 5.1 ä»€ä¹ˆæ˜¯Atomic åŸå­ç±»ï¼Ÿ æ‰€ä»¥ï¼Œæ‰€è°“åŸå­ç±»è¯´ç®€å•ç‚¹å°±æ˜¯å…·æœ‰åŸå­/åŸå­æ“ä½œç‰¹å¾çš„ç±»ã€‚ åœ¨æˆ‘ä»¬è¿™â¾¥ Atomic æ˜¯æŒ‡â¼€ä¸ªæ“ä½œæ˜¯ä¸å¯ä¸­æ–­çš„ã€‚å³ä½¿æ˜¯åœ¨å¤šä¸ªçº¿ç¨‹â¼€èµ·æ‰§è¡Œçš„æ—¶å€™ï¼Œâ¼€ä¸ªæ“ä½œâ¼€æ—¦å¼€å§‹ï¼Œå°±ä¸ä¼šè¢«å…¶ä»–çº¿ç¨‹â¼²æ‰°ã€‚ 5.2 JUC åŒ…ä¸­çš„åŸå­ç±»æ˜¯å“ª4ç±»? 5.3 Volatile å’Œ atomic å˜é‡åŒºåˆ«ï¼Ÿ Volatileå˜é‡å¯ä»¥ç¡®ä¿å…ˆè¡Œå…³ç³»ï¼Œå³å†™æ“ä½œä¼šå‘ç”Ÿåœ¨åç»­çš„è¯»æ“ä½œä¹‹å‰, ä½†å®ƒå¹¶ä¸èƒ½ä¿è¯åŸå­æ€§ã€‚ä¾‹å¦‚ç”¨volatileä¿®é¥°countå˜é‡é‚£ä¹ˆ count++ æ“ä½œå°±ä¸æ˜¯åŸå­æ€§çš„ã€‚ è€ŒAtomicIntegerç±»æä¾›çš„atomicæ–¹æ³•å¯ä»¥è®©è¿™ç§æ“ä½œå…·æœ‰åŸå­æ€§å¦‚getAndIncrement()æ–¹æ³•ä¼šåŸå­æ€§çš„è¿›è¡Œå¢é‡æ“ä½œæŠŠå½“å‰å€¼åŠ ä¸€ï¼Œå…¶å®ƒæ•°æ®ç±»å‹å’Œå¼•ç”¨å˜é‡ä¹Ÿå¯ä»¥è¿›è¡Œç›¸ä¼¼æ“ä½œã€‚ 5.4 è®²è®² AtomicInteger çš„ä½¿ç”¨ ï¼Ÿ 1234567public final int get() //è·å–å½“å‰çš„å€¼public final int getAndSet(int newValue)//è·å–å½“å‰çš„å€¼ï¼Œå¹¶è®¾ç½®æ–°çš„å€¼public final int getAndIncrement()//è·å–å½“å‰çš„å€¼ï¼Œå¹¶â¾ƒå¢public final int getAndDecrement() //è·å–å½“å‰çš„å€¼ï¼Œå¹¶â¾ƒå‡public final int getAndAdd(int delta) //è·å–å½“å‰çš„å€¼ï¼Œå¹¶åŠ ä¸Šé¢„æœŸçš„å€¼boolean compareAndSet(int expect, int update) //å¦‚æœè¾“â¼Šçš„æ•°å€¼ç­‰äºé¢„æœŸå€¼ï¼Œåˆ™ä»¥åŸå­æ–¹å¼å°†è¯¥å€¼è®¾ç½®ä¸ºè¾“â¼Šå€¼ï¼ˆupdateï¼‰public final void lazySet(int newValue)//æœ€ç»ˆè®¾ç½®ä¸ºnewValue,ä½¿ç”¨ lazySetè®¾ç½®ä¹‹åå¯èƒ½å¯¼è‡´å…¶ä»–çº¿ç¨‹åœ¨ä¹‹åçš„â¼€å°æ®µæ—¶é—´å†…è¿˜æ˜¯å¯ä»¥è¯»åˆ°æ—§çš„å€¼ã€‚ ä½¿ç”¨ç¤ºä¾‹ï¼š 123456789101112class AtomicIntegerTest &#123; // åŸºæœ¬ç±»å‹ä¹Ÿè¦æ˜¯åŸå­ç±» private AtomicInteger count = new AtomicInteger(); //ä½¿â½¤AtomicIntegerä¹‹åï¼Œä¸éœ€è¦å¯¹è¯¥æ–¹æ³•åŠ é”ï¼Œä¹Ÿå¯ä»¥å®ç°çº¿ç¨‹å®‰å…¨ã€‚ public void increment() &#123; count.incrementAndGet(); &#125; public int getCount() &#123; return count.get(); &#125;&#125; 5.5ï¼ˆé‡ç‚¹æé—®ï¼‰ AtomicInteger åŸç†ï¼Ÿ AtomicInteger ç±»ä¸»è¦åˆ©ç”¨ CAS (compare and swap) + volatile å’Œ native æ–¹æ³•æ¥ä¿è¯åŸå­æ“ä½œï¼Œä»è€Œé¿å… synchronized çš„é«˜å¼€é”€ï¼Œæ‰§è¡Œæ•ˆç‡å¤§ä¸ºæå‡ã€‚ æˆ‘ä»¬ä»¥è‡ªå¢æ–¹æ³•ä¸ºä¾‹ï¼š getAndIncrement 123public final int getAndIncrement() &#123; return unsafe.getAndAddInt(this, valueOffset, 1);&#125; å¯ä»¥çœ‹åˆ°ï¼Œæœ¬è´¨æ˜¯åœ¨è°ƒç”¨ unsafeä¸­çš„ getAndAddInt unsafeä¸­çš„compareAndSwapIntæ–¹æ³•å‚æ•°ã€‚ 1compareAndSwapInt(Object o, long offset,int expected,int x); // xæ˜¯å‡†å¤‡æ›´æ–°çš„å€¼ 123456789101112131415public final int getAndIncrement() &#123; return unsafe.getAndAddInt(this, valueOffset, 1);&#125;// Unsafeä¸­çš„æ–¹æ³•public final int getAndAddInt(Object var1, long var2, int var4) &#123; int var5; // getIntVolatileæ–¹æ³•è·å–åˆ°æœŸæœ›å€¼valueåå»è°ƒç”¨compareAndSwapIntæ–¹æ³•ï¼Œå¤±è´¥åˆ™è¿›è¡Œé‡è¯• do &#123; // var5æ˜¯è®¡ç®—å¾—åˆ°çš„æœŸæœ›å€¼ï¼Œè·å–æ­¤æ—¶å†…å­˜çš„æœ€æ–°å€¼ï¼ˆå› ä¸ºvalueæ˜¯votilateä¿®é¥°ï¼Œä¿®æ”¹æ€»æ˜¯è¢«èƒ½åŠæ—¶çœ‹åˆ°ï¼‰ var5 = this.getIntVolatile(var1, var2); // è®¡ç®—ä¼ å…¥compareAndSwapIntçš„å››ä¸ªå‚æ•° // var1ï¼šä¼ å…¥çš„thiså¯¹è±¡ï¼›var2ï¼švalueå†…å­˜åç§»å€¼ï¼›var5ï¼šæœŸæœ›å€¼ï¼Œå¸Œæœ›å’Œã€var2ã€‘ä¸€è‡´ï¼› var5+var4ï¼švar5+var4ï¼ˆ1ï¼‰ï¼Œé€’å¢ &#125; while(!this.compareAndSwapInt(var1, var2, var5, var5 + var4)); return var5;&#125; æœ€ç»ˆæ€»ç»“å¦‚ä¸‹ AtomicInteger ç±»ä¸»è¦åˆ©ç”¨ CAS (compare and swap) + volatile æ¥ä¿è¯åŸå­æ“ä½œã€‚AtomicInteger çš„ä¸»è¦æ–¹æ³•éƒ½æ˜¯é€šè¿‡è°ƒç”¨Unsafeç±»æ–¹æ³•å»å®ç°ï¼Œå¦‚ compareAndSet å®é™…æ˜¯è°ƒç”¨AtomicInteger çš„compareAndSwapIntæ–¹æ³•ã€‚ ä¸‹é¢ä»¥ getAndIncrementå®ç°æ¥è¯´æ˜ã€‚ getAndIncrementè°ƒç”¨äº† Unsafeçš„getAndAddIntæ–¹æ³•ï¼Œä¼ é€’äº†ï¼ˆ1ï¼‰å½“å‰thiså¯¹è±¡ï¼Œï¼ˆ2ï¼‰valueåç§»é‡valueoffsetï¼Œç”¨æ¥è®¡ç®—å¾—åˆ°valueå€¼ï¼ˆ3ï¼‰è¦åŠ ä¸Šçš„å€¼ï¼Œç”±äºæ˜¯é€’å¢æ‰€ä»¥æ˜¯1 âš ï¸ ä¸ºä»€ä¹ˆä¸ä¼ valueçš„å€¼ï¼Œè€Œæ˜¯åç§»é‡ï¼Ÿ ä¼ åç§»é‡æ˜¯ä¸ºäº†è®¡ç®—valueæ‰€åœ¨çš„å†…å­˜åœ°å€ï¼Œè¿›è€Œè·å–æœ€æ–°çš„valueå€¼ã€‚ getAndAddInté‡‡ç”¨CASæ–¹å¼è¿›è¡Œæ›´æ–°ï¼Œè¿˜éœ€è¦è¿›è¡Œå½“å‰æœŸæœ›å€¼çš„è®¡ç®— é€šè¿‡getIntVolatileè·å–åˆ°çº¿ç¨‹æ­¤æ—¶å†…å­˜valueå€¼ï¼ˆæœŸæœ›å€¼ï¼‰ï¼Œä¹Ÿå°±æ˜¯è®°å½•æ‰§è¡ŒCASå‰çš„å†…å­˜æœ€æ–°valueå€¼ï¼› ç„¶åå¼€å§‹æ‰§è¡ŒUnsafeçš„ compareAndSwapInt ï¼Œä¸»è¦æ˜¯é€šè¿‡Atomic::cmpxchg é€»è¾‘æ¥å®ç° ï¼ˆ1ï¼‰å°†è¦destï¼ˆvalueå†…å­˜åœ°å€ï¼‰ï¼ŒcompareValueï¼ˆæœŸæœ›å€¼ï¼‰ï¼Œexchange_valueï¼ˆè¦æ›´æ–°çš„å€¼ï¼‰å†™å…¥å¯„å­˜å™¨ä¸­ ï¼ˆ2ï¼‰çº¿ç¨‹å¦‚æœæ˜¯è¿è¡Œå¤šæ ¸CPUï¼Œä¸ŠLOCK#é”ï¼Œå°†destå†…å­˜åŒºåŸŸé”ä½ ï¼›å¦åˆ™ä¸ä¸ŠLOCK#é” ï¼ˆ3ï¼‰æ‰§è¡Œcmpxchgï¼ˆæ¯”è¾ƒå¹¶äº¤æ¢å‘½ä»¤ï¼‰ï¼Œå¦‚æœdestçš„valueå€¼ï¼ˆæ‰§è¡ŒCASä¸­çš„æœ€æ–°valueå€¼ï¼‰ == compareValueï¼Œåˆ™å†™å…¥exchange_value ï¼› ï¼ˆ4ï¼‰å¦åˆ™å†™å…¥å¤±è´¥ï¼Œé€šè¿‡ä¸æ–­è‡ªæ—‹ï¼ˆå¾ªç¯ï¼‰æœŸæœ›å¾—åˆ°æ‰§è¡Œ","categories":[{"name":"æ ¡æ‹›ç¬”è®°","slug":"æ ¡æ‹›ç¬”è®°","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/"},{"name":"JAVA","slug":"æ ¡æ‹›ç¬”è®°/JAVA","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/JAVA/"}],"tags":[{"name":"JAVA","slug":"JAVA","permalink":"https://hwh.zone/tags/JAVA/"},{"name":"æ ¡æ‹›","slug":"æ ¡æ‹›","permalink":"https://hwh.zone/tags/%E6%A0%A1%E6%8B%9B/"}]},{"title":"æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰_Java_å¤šçº¿ç¨‹","slug":"æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰_Java_å¤šçº¿ç¨‹","date":"2021-11-26T12:01:58.657Z","updated":"2021-12-03T03:56:53.300Z","comments":true,"path":"p/8959/","link":"","permalink":"https://hwh.zone/p/8959/","excerpt":"","text":"æˆ‘çš„æ ¡æ‹›è®°å½•ï¼šæ ¡æ‹›ç¬”è®°ï¼ˆé›¶ï¼‰_å†™åœ¨å‰é¢ ï¼Œä»¥ä¸‹æ˜¯æ ¡æ‹›ç¬”è®°æ€»ç›®å½•ã€‚ å¤‡æ³¨ ç®—æ³•èƒ½åŠ›ï¼ˆâ€œåˆ·é¢˜â€ï¼‰ è¿™éƒ¨åˆ†å°±æ˜¯è€—æ—¶é—´å¤šç»ƒä¹ ï¼ŒLeetcode-Top100 æ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚ è¡¥å……ç»ƒä¹ ï¼šcodeTop è®¡ç®—æœºåŸºç¡€(ä¸Š)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_Javaå…¥é—¨ C++åç«¯åç»­æ›´æ–° æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é¢å¯¹å¯¹è±¡ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é›†åˆ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_å¤šçº¿ç¨‹ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é” æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_JVM è®¡ç®—æœºåŸºç¡€(ä¸‹)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆäºŒï¼‰__è®¡ç®—æœºåŸºç¡€_Linux&amp;Git æ ¡æ‹›ç¬”è®°ï¼ˆä¸‰ï¼‰__è®¡ç®—æœºåŸºç¡€_è®¡ç®—æœºç½‘ç»œ æ ¡æ‹›ç¬”è®°ï¼ˆå››ï¼‰__è®¡ç®—æœºåŸºç¡€_æ“ä½œç³»ç»Ÿ æ ¡æ‹›ç¬”è®°ï¼ˆäº”ï¼‰__è®¡ç®—æœºåŸºç¡€_MySQL æ ¡æ‹›ç¬”è®°ï¼ˆå…­ï¼‰__è®¡ç®—æœºåŸºç¡€_Redis æ ¡æ‹›ç¬”è®°ï¼ˆä¸ƒï¼‰__è®¡ç®—æœºåŸºç¡€_æ•°æ®ç»“æ„ æ ¡æ‹›ç¬”è®°ï¼ˆå…«ï¼‰__è®¡ç®—æœºåŸºç¡€_åœºæ™¯&amp;æ™ºåŠ›é¢˜ æ ¡æ‹›ç¬”è®°ï¼ˆä¹ï¼‰__è®¡ç®—æœºåŸºç¡€_ç›¸å…³è¡¥å…… é¡¹ç›®&amp;å®ä¹  ä¸»è¦æ˜¯æ€ä¹ˆå‡†å¤‡é¡¹ç›®ï¼Œåç»­æ›´æ–° 1.4 å¤šçº¿ç¨‹ 0.ä¸‰ä¸ªçº¿ç¨‹ï¼Œå¦‚ä½•è®©ä»–ä»¬æŒ‰é¡ºåºæ‰“å°Aã€Bã€Cï¼Ÿå¦‚æœæ˜¯å¾ªç¯æ‰“å°10æ¬¡å‘¢ï¼Ÿä¾æ¬¡æ‰“å°1~100å‘¢ï¼Ÿäº¤æ›¿æ‰“å°å¥‡å¶10æ¬¡å‘¢ï¼Ÿ å‚è€ƒï¼šhttps://zhuanlan.zhihu.com/p/370130458 0.1 synchronized + æ¡ä»¶å˜é‡ synchronized + æ¡ä»¶å˜é‡ï¼ˆå¾ªç¯æ‰“å°1æ¬¡ï¼‰ æ€è·¯å¦‚ä¸‹ï¼š æ–°å»ºä¸‰ä¸ªçº¿ç¨‹1ã€2ã€3 ï¼Œåˆ†åˆ«è´Ÿè´£æ‰“å°Aã€Bã€Cï¼›åŒæ—¶ï¼Œæ¯ä¸ªçº¿ç¨‹å¯¹åº”ä¸€ä¸ªæ¡ä»¶å˜é‡ï¼šnum%3==å½“å‰çº¿ç¨‹æ¡ä»¶å˜é‡? ï¼› æŠŠæ‰“å°çš„ä»£ç ç”¨synchronized åŠ é”ï¼Œæ¯ä¸ªçº¿ç¨‹æ‹¿åˆ°é”åï¼Œwhileå¾ªç¯åˆ¤æ–­æ˜¯å¦æ»¡è¶³å½“å‰çº¿ç¨‹çš„æ¡ä»¶å˜é‡ ï¼› å¦‚æœæ»¡è¶³ ï¼Œä¾¿æ‰§è¡Œåç»­é€»è¾‘æ‰“å°å½“å‰çº¿ç¨‹ï¼Œä¹‹ånotifyall()å”¤é†’å…¶å®ƒçº¿ç¨‹ï¼› å¦‚æœä¸æ»¡è¶³ï¼Œæ‰§è¡Œwaitç­‰å¾…é‡Šæ”¾é”ï¼› 12345678910111213141516171819202122232425262728293031323334353637383940414243import java.util.*;class Wait_Notify_ACB &#123; private int num; private static final Object LOCK = new Object(); private void printABC(int targetNum) &#123; // targetNum ï¼š æ¯ä¸ªçº¿ç¨‹åº”è¯¥æ»¡è¶³çš„å¯¹åº”æ¡ä»¶å˜é‡ synchronized (LOCK) &#123; while (num % 3 != targetNum) &#123; // while ï¼šçº¿ç¨‹é˜»å¡åœ¨wait(),å†æ¬¡è¢«å”¤é†’åº”è¯¥å…ˆæ£€æŸ¥ä¸‹æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œå› ä¸ºè¿™ä¸ªæ—¶å€™æœªå¿…è½®åˆ°å½“å‰çº¿ç¨‹æ‰§è¡Œï¼›ç”¨ifä¼šå¯¼è‡´ç›´æ¥å¾€ä¸‹æ‰§è¡Œã€‚ try &#123; LOCK.wait(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; num++; System.out.print(Thread.currentThread().getName()); LOCK.notifyAll(); &#125; &#125; public static void main(String[] args) &#123; Wait_Notify_ACB wait_notify_acb = new Wait_Notify_ACB (); new Thread(() -&gt; &#123; wait_notify_acb.printABC(0); &#125;, &quot;A&quot;).start(); new Thread(() -&gt; &#123; wait_notify_acb.printABC(1); &#125;, &quot;B&quot;).start(); new Thread(() -&gt; &#123; wait_notify_acb.printABC(2); &#125;, &quot;C&quot;).start(); &#125;&#125; synchronized + æ¡ä»¶å˜é‡ï¼ˆå¾ªç¯æ‰“å°10æ¬¡ï¼‰ æ‰“å°10æ¬¡ï¼Œåªéœ€è®©ä¸‰ä¸ªçº¿ç¨‹ï¼Œå°è¯•å»ç«äº‰10æ¬¡é”å³å¯ã€‚æ‰€ä»¥åœ¨synchronizedå‰åŠ ä¸Šforå¾ªç¯å³å¯ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546import java.util.*;class Wait_Notify_ACB &#123; private int num; private static final Object LOCK = new Object(); private void printABC(int targetNum) &#123; // targetNum ï¼š æ¯ä¸ªçº¿ç¨‹åº”è¯¥æ»¡è¶³çš„å¯¹åº”æ¡ä»¶å˜é‡ for(int i = 0 ; i&lt;10 ;i++) &#123; synchronized (LOCK) &#123; while (num % 3 != targetNum) &#123; // while ï¼šçº¿ç¨‹é˜»å¡åœ¨wait(),å†æ¬¡è¢«å”¤é†’åº”è¯¥å…ˆæ£€æŸ¥ä¸‹æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œå› ä¸ºè¿™ä¸ªæ—¶å€™æœªå¿…è½®åˆ°å½“å‰çº¿ç¨‹æ‰§è¡Œï¼›ç”¨ifä¼šå¯¼è‡´ç›´æ¥å¾€ä¸‹æ‰§è¡Œã€‚ try &#123; LOCK.wait(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; num++; System.out.print(Thread.currentThread().getName()); LOCK.notifyAll(); &#125; &#125; &#125; public static void main(String[] args) &#123; Wait_Notify_ACB wait_notify_acb = new Wait_Notify_ACB (); new Thread(() -&gt; &#123; wait_notify_acb.printABC(0); &#125;, &quot;A&quot;).start(); new Thread(() -&gt; &#123; wait_notify_acb.printABC(1); &#125;, &quot;B&quot;).start(); new Thread(() -&gt; &#123; wait_notify_acb.printABC(2); &#125;, &quot;C&quot;).start(); &#125;&#125; synchronized + æ¡ä»¶å˜é‡ï¼ˆæ‰“å°1~100) è®¾ç½®ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œsynchronized ä¸­åŠ é”å‡½æ•°å¯¹num+1ï¼Œä¿è¯åªè¦æ¯æ¬¡åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æ‰§è¡Œã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142class Wait_Notify_100 &#123;â€‹ private int num; private static final Object LOCK = new Object(); private int maxnum = 10;â€‹ private void printABC(int targetNum) &#123; while (true) &#123; synchronized (LOCK) &#123; while (num % 3 != targetNum) &#123; //æƒ³æƒ³è¿™é‡Œä¸ºä»€ä¹ˆä¸èƒ½ç”¨ifä»£æ›¿ï¼Œæƒ³ä¸èµ·æ¥å¯ä»¥çœ‹å…¬ä¼—å·ä¸Šä¸€ç¯‡æ–‡ç«  if(num &gt;= maxnum)&#123; break; &#125; try &#123; LOCK.wait(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; if(num &gt;= maxnum)&#123; break; &#125; num++; System.out.println(Thread.currentThread().getName() + &quot;: &quot; + num); LOCK.notifyAll(); &#125; &#125; &#125; public static void main(String[] args) &#123; Wait_Notify_100 wait_notify_100 = new Wait_Notify_100 (); new Thread(() -&gt; &#123; wait_notify_100.printABC(0); &#125;, &quot;thread1&quot;).start(); new Thread(() -&gt; &#123; wait_notify_100.printABC(1); &#125;, &quot;thread2&quot;).start(); new Thread(() -&gt; &#123; wait_notify_100.printABC(2); &#125;, &quot;thread3&quot;).start(); &#125; &#125; synchronized + æ¡ä»¶å˜é‡ï¼ˆå¥‡å¶æ‰“å°10æ¬¡ï¼‰ 12345678910111213141516171819202122232425262728293031class Wait_Notify_Odd_Even&#123; private Object monitor = new Object(); private volatile int count; Wait_Notify_Odd_Even(int initCount) &#123; this.count = initCount; &#125; private void printOddEven() &#123; synchronized (monitor) &#123; while (count &lt; 10) &#123; try // è¿™é‡Œä¸ç”¨whileå¾ªç¯åˆ¤æ–­ï¼Œæ˜¯å› ä¸ºä¸‹æ¬¡notifyAllçš„ä¸€å®šæ˜¯å¥‡æ•°æˆ–å¶æ•° &#123; System.out.print( Thread.currentThread().getName() + &quot;ï¼š&quot;); System.out.println(++count); monitor.notifyAll(); monitor.wait(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; //é˜²æ­¢count=10åï¼Œwhile()å¾ªç¯ä¸å†æ‰§è¡Œï¼Œæœ‰å­çº¿ç¨‹è¢«é˜»å¡æœªè¢«å”¤é†’ï¼Œå¯¼è‡´ä¸»çº¿ç¨‹ä¸èƒ½é€€å‡º monitor.notifyAll(); &#125; &#125; public static void main(String[] args) throws InterruptedException &#123; Wait_Notify_Odd_Even waitNotifyOddEven = new Wait_Notify_Odd_Even(0); new Thread(waitNotifyOddEven::printOddEven, &quot;odd&quot;).start(); Thread.sleep(10); //ä¸ºäº†ä¿è¯çº¿ç¨‹oddå…ˆæ‹¿åˆ°é” new Thread(waitNotifyOddEven::printOddEven, &quot;even&quot;).start(); &#125;&#125; 0.2 join join()æ–¹æ³•**ï¼šåœ¨Açº¿ç¨‹ä¸­è°ƒç”¨äº†Bçº¿ç¨‹çš„join()æ–¹æ³•æ—¶ï¼Œè¡¨ç¤ºåªæœ‰å½“Bçº¿ç¨‹æ‰§è¡Œå®Œæ¯•æ—¶ï¼ŒAçº¿ç¨‹æ‰èƒ½ç»§ç»­æ‰§è¡Œ**ã€‚ åŸºäºè¿™ä¸ªåŸç†ï¼Œæˆ‘ä»¬ä½¿å¾—ä¸‰ä¸ªçº¿ç¨‹æŒ‰é¡ºåºæ‰§è¡Œï¼Œç„¶åå¾ªç¯å¤šæ¬¡å³å¯ã€‚æ— è®ºçº¿ç¨‹1ã€çº¿ç¨‹2ã€çº¿ç¨‹3å“ªä¸ªå…ˆæ‰§è¡Œï¼Œæœ€åæ‰§è¡Œçš„é¡ºåºéƒ½æ˜¯çº¿ç¨‹1â€”â€”&gt;çº¿ç¨‹2â€”â€”&gt;çº¿ç¨‹3ã€‚ ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132class Join_ABC &#123; public static void main(String[] args) throws InterruptedException &#123; for (int i = 0; i &lt; 10; i++) &#123; Thread t1 = new Thread(new printABC(null),&quot;A&quot;); Thread t2 = new Thread(new printABC(t1),&quot;B&quot;); Thread t3 = new Thread(new printABC(t2),&quot;C&quot;); t1.start(); t2.start(); t3.start(); Thread.sleep(10); //è¿™é‡Œæ˜¯è¦ä¿è¯åªæœ‰t1ã€t2ã€t3ä¸ºä¸€ç»„ï¼Œè¿›è¡Œæ‰§è¡Œæ‰èƒ½ä¿è¯t1-&gt;t2-&gt;t3çš„æ‰§è¡Œé¡ºåºã€‚ &#125; &#125; static class printABC implements Runnable&#123; private Thread beforeThread; public printABC(Thread beforeThread) &#123; this.beforeThread = beforeThread; &#125; @Override public void run() &#123; if(beforeThread!=null) &#123; try &#123; beforeThread.join(); System.out.print(Thread.currentThread().getName()); &#125;catch(Exception e)&#123; e.printStackTrace(); &#125; &#125;else &#123; System.out.print(Thread.currentThread().getName()); &#125; &#125; &#125;&#125; 0.3 Lock è¯¥æ–¹æ³•å¾ˆå®¹æ˜“ç†è§£ï¼Œä¸ç®¡å“ªä¸ªçº¿ç¨‹æ‹¿åˆ°é”ï¼Œåªæœ‰ç¬¦åˆæ¡ä»¶çš„æ‰èƒ½æ‰“å°ã€‚ 123456789101112131415161718192021222324252627 class Lock_ABC &#123; private int num; // å½“å‰çŠ¶æ€å€¼ï¼šä¿è¯ä¸‰ä¸ªçº¿ç¨‹ä¹‹é—´äº¤æ›¿æ‰“å° private Lock lock = new ReentrantLock(); private void printABC(int targetNum) &#123; for (int i = 0; i &lt; 10; ) &#123; lock.lock(); if (num % 3 == targetNum) &#123; num++; i++; System.out.print(Thread.currentThread().getName()); &#125; lock.unlock(); // ä¸ç¬¦åˆè¦æ±‚ç›´æ¥é‡Šæ”¾é”ï¼Œä¸ä¼šåƒsyncä¸€æ ·é˜»å¡åœ¨syncæˆ–waitå¤„ &#125; &#125; public static void main(String[] args) &#123; Lock_ABC lockABC = new Lock_ABC(); new Thread(() -&gt; &#123; lockABC.printABC(0); &#125;, &quot;A&quot;).start(); new Thread(() -&gt; &#123; lockABC.printABC(1); &#125;, &quot;B&quot;).start(); new Thread(() -&gt; &#123; lockABC.printABC(2); &#125;, &quot;C&quot;).start(); &#125;&#125; 0.4 Semaphore Semaphoreï¼šç”¨æ¥æ§åˆ¶åŒæ—¶è®¿é—®æŸä¸ªç‰¹å®šèµ„æºçš„æ“ä½œæ•°é‡ï¼Œæˆ–è€…åŒæ—¶æ‰§è¡ŒæŸä¸ªåˆ¶å®šæ“ä½œçš„æ•°é‡ã€‚Semaphoreå†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå…¶å€¼ä¸ºå¯ä»¥è®¿é—®çš„å…±äº«èµ„æºçš„ä¸ªæ•°ã€‚ ä¸€ä¸ªçº¿ç¨‹è¦è®¿é—®å…±äº«èµ„æºï¼Œå…ˆä½¿ç”¨acquire()æ–¹æ³•è·å¾—ä¿¡å·é‡ï¼Œå¦‚æœä¿¡å·é‡çš„è®¡æ•°å™¨å€¼å¤§äºç­‰äº1ï¼Œæ„å‘³ç€æœ‰å…±äº«èµ„æºå¯ä»¥è®¿é—®ï¼Œåˆ™ä½¿å…¶è®¡æ•°å™¨å€¼å‡å»1ï¼Œå†è®¿é—®å…±äº«èµ„æºã€‚å¦‚æœè®¡æ•°å™¨å€¼ä¸º0,çº¿ç¨‹è¿›å…¥ä¼‘çœ ï¼› å½“æŸä¸ªçº¿ç¨‹ä½¿ç”¨å®Œå…±äº«èµ„æºåï¼Œä½¿ç”¨release()é‡Šæ”¾ä¿¡å·é‡ï¼Œå¹¶å°†ä¿¡å·é‡å†…éƒ¨çš„è®¡æ•°å™¨åŠ 1ï¼Œä¹‹å‰è¿›å…¥ä¼‘çœ çš„çº¿ç¨‹å°†è¢«å”¤é†’å¹¶å†æ¬¡è¯•å›¾è·å¾—ä¿¡å·é‡ã€‚ 12345678910111213141516171819202122232425262728293031class SemaphoreABC &#123; private static Semaphore s1 = new Semaphore(1); //å› ä¸ºå…ˆæ‰§è¡Œçº¿ç¨‹Aï¼Œæ‰€ä»¥è¿™é‡Œè®¾s1çš„è®¡æ•°å™¨ä¸º1 private static Semaphore s2 = new Semaphore(0); private static Semaphore s3 = new Semaphore(0); private void printABC(Semaphore currentThread, Semaphore nextThread) &#123; for (int i = 0; i &lt; 10; i++) &#123; try &#123; currentThread.acquire(); //é˜»å¡å½“å‰çº¿ç¨‹ï¼Œå³ä¿¡å·é‡çš„è®¡æ•°å™¨å‡1ä¸º0 System.out.print(Thread.currentThread().getName()); nextThread.release(); //å”¤é†’ä¸‹ä¸€ä¸ªçº¿ç¨‹ï¼Œå³ä¿¡å·é‡çš„è®¡æ•°å™¨åŠ 1 &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125; public static void main(String[] args) throws InterruptedException &#123; SemaphoreABC printer = new SemaphoreABC(); new Thread(() -&gt; &#123; printer.printABC(s1, s2); &#125;, &quot;A&quot;).start(); Thread.sleep(10); new Thread(() -&gt; &#123; printer.printABC(s2, s3); &#125;, &quot;B&quot;).start(); Thread.sleep(10); new Thread(() -&gt; &#123; printer.printABC(s3, s1); &#125;, &quot;C&quot;).start(); &#125;&#125; 1.4.1 çº¿ç¨‹åŸºæœ¬ 1. ä»€ä¹ˆæ˜¯çº¿ç¨‹å’Œè¿›ç¨‹ï¼Ÿå¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Ÿ 1.1 ä»€ä¹ˆæ˜¯çº¿ç¨‹å’Œè¿›ç¨‹ï¼Ÿ ä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Ÿ è¿›ç¨‹æ˜¯ç¨‹åºçš„â¼€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼Œæ˜¯ç³»ç»Ÿè¿è¡Œç¨‹åºçš„åŸºæœ¬å•ä½ï¼Œå› æ­¤è¿›ç¨‹æ˜¯åŠ¨æ€çš„ã€‚ç³»ç»Ÿè¿è¡Œâ¼€ä¸ªç¨‹åºå³æ˜¯â¼€ä¸ªè¿›ç¨‹ä»åˆ›å»ºï¼Œè¿è¡Œåˆ°æ¶ˆäº¡çš„è¿‡ç¨‹ã€‚ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨ windows ä¸­é€šè¿‡æŸ¥çœ‹ä»»åŠ¡ç®¡ç†å™¨çš„æ–¹å¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¸…æ¥šçœ‹åˆ° window å½“å‰è¿è¡Œçš„è¿›ç¨‹ï¼ˆ.exe â½‚ä»¶çš„è¿è¡Œï¼‰ã€‚åœ¨Windowsæ“ä½œç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªç¨‹åºåªå¯¹åº”ä¸€ä¸ªè¿›ç¨‹ï¼Œé‡Œé¢å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ã€‚ ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Ÿ çº¿ç¨‹ä¸è¿›ç¨‹ç›¸ä¼¼ï¼Œä½†çº¿ç¨‹æ˜¯â¼€ä¸ªâ½è¿›ç¨‹æ›´å°çš„æ‰§è¡Œå•ä½ã€‚â¼€ä¸ªè¿›ç¨‹åœ¨å…¶æ‰§è¡Œçš„è¿‡ç¨‹ä¸­å¯ä»¥äº§â½£å¤šä¸ªçº¿ç¨‹ã€‚ ä¸è¿›ç¨‹ä¸åŒçš„æ˜¯åŒç±»çš„å¤šä¸ªçº¿ç¨‹å…±äº«è¿›ç¨‹çš„å †å’Œæ–¹æ³•åŒºèµ„æºï¼Œä½†æ¯ä¸ªçº¿ç¨‹æœ‰â¾ƒâ¼°çš„ç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆ æ‰€ä»¥ç³»ç»Ÿåœ¨äº§â½£â¼€ä¸ªçº¿ç¨‹ï¼Œæˆ–æ˜¯åœ¨å„ä¸ªçº¿ç¨‹ä¹‹é—´ä½œåˆ‡æ¢â¼¯ä½œæ—¶ï¼Œè´Ÿæ‹…è¦â½è¿›ç¨‹å°å¾—å¤šï¼Œä¹Ÿæ­£å› ä¸ºå¦‚æ­¤ï¼Œçº¿ç¨‹ä¹Ÿè¢«ç§°ä¸ºè½»é‡çº§è¿›ç¨‹ã€‚ â¼€ä¸ª Java ç¨‹åºçš„è¿è¡Œæ˜¯ main çº¿ç¨‹å’Œå¤šä¸ªå…¶ä»–çº¿ç¨‹åŒæ—¶è¿è¡Œã€‚ 1.2 å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Ÿ åŸå­æ€§ï¼Œç®€å•è¯´å°±æ˜¯ç›¸å…³æ“ä½œä¸ä¼šä¸­é€”è¢«å…¶ä»–çº¿ç¨‹å¹²æ‰°ï¼Œä¸€èˆ¬é€šè¿‡åŒæ­¥æœºåˆ¶å®ç°ï¼› å¯è§æ€§ï¼Œæ˜¯ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†æŸä¸ªå…±äº«å˜é‡ï¼Œå…¶çŠ¶æ€èƒ½å¤Ÿç«‹å³è¢«å…¶ä»–çº¿ç¨‹çŸ¥æ™“ï¼Œé€šå¸¸è¢«è§£é‡Šä¸ºå°†çº¿ç¨‹æœ¬åœ°çŠ¶æ€åæ˜ åˆ°ä¸»å†…å­˜ä¸Šï¼Œvolatile å°±æ˜¯è´Ÿè´£ä¿è¯å¯è§æ€§çš„ï¼› æœ‰åºæ€§ï¼Œæ˜¯ä¿è¯çº¿ç¨‹å†…ä¸²è¡Œè¯­ä¹‰ï¼Œé¿å…æŒ‡ä»¤é‡æ’ç­‰ã€‚ 1.3 ä¸ºä»€ä¹ˆç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆæ˜¯çº¿ç¨‹ç§æœ‰çš„? ç¨‹åºè®¡æ•°å™¨ä¸ºä»€ä¹ˆæ˜¯ç§æœ‰ åœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œç¨‹åºè®¡æ•°å™¨ç”¨äºè®°å½•å½“å‰çº¿ç¨‹æ‰§è¡Œçš„ä½ç½®ï¼Œä»è€Œå½“çº¿ç¨‹è¢«åˆ‡æ¢å›æ¥çš„æ—¶å€™èƒ½å¤ŸçŸ¥é“è¯¥çº¿ç¨‹ä¸Šæ¬¡è¿è¡Œåˆ°å“ªâ¼‰äº†ã€‚ æ‰€ä»¥ï¼Œç¨‹åºè®¡æ•°å™¨ç§æœ‰ä¸»è¦æ˜¯ä¸ºäº†çº¿ç¨‹åˆ‡æ¢åèƒ½æ¢å¤åˆ°æ­£ç¡®çš„æ‰§è¡Œä½ç½®ã€‚ è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆä¸ºä»€ä¹ˆç§æœ‰ è™šæ‹Ÿæœºæ ˆï¼š æ¯ä¸ª Java æ–¹æ³•åœ¨æ‰§è¡Œçš„åŒæ—¶ä¼šåˆ›å»ºâ¼€ä¸ªæ ˆå¸§ç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€å¸¸é‡æ± å¼•ç”¨ç­‰ä¿¡æ¯ã€‚ä»æ–¹æ³•è°ƒç”¨ç›´â¾„æ‰§è¡Œå®Œæˆçš„è¿‡ç¨‹ï¼Œå°±å¯¹åº”ç€â¼€ä¸ªæ ˆå¸§åœ¨ Java è™šæ‹Ÿæœºæ ˆä¸­â¼Šæ ˆå’Œå‡ºæ ˆçš„è¿‡ç¨‹ã€‚ æœ¬åœ°æ–¹æ³•æ³•æ ˆï¼š å’Œè™šæ‹Ÿæœºæ ˆæ‰€å‘æŒ¥çš„ä½œç”¨éå¸¸ç›¸ä¼¼ï¼ŒåŒºåˆ«æ˜¯ï¼šè™šæ‹Ÿæœºæ ˆä¸ºè™šæ‹Ÿæœºæ‰§è¡Œ Java æ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯å­—èŠ‚ç ï¼‰æœåŠ¡ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆåˆ™ä¸ºè™šæ‹Ÿæœºä½¿ç”¨åˆ°çš„ Nativeæ–¹æ³•æœåŠ¡ã€‚ åœ¨ HotSpot è™šæ‹Ÿæœºä¸­å’Œ Java è™šæ‹Ÿæœºæ ˆåˆâ¼†ä¸ºâ¼€ã€‚ æ‰€ä»¥ï¼Œä¸ºäº†ä¿è¯çº¿ç¨‹ä¸­çš„å±€éƒ¨å˜é‡ä¸è¢«åˆ«çš„çº¿ç¨‹è®¿é—®åˆ°ï¼Œè™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆæ˜¯çº¿ç¨‹ç§æœ‰çš„ã€‚ 2.åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼ï¼ˆéçº¿ç¨‹æ± ï¼‰ï¼Ÿ å“ªç§æœ€å¥½ï¼Ÿ ä¸€èˆ¬æœ‰ä¸‰ç§æ–¹å¼æ¥è¿›è¡Œåˆ›å»ºï¼š ç»§æ‰¿Threadç±»ï¼šï¼ˆ1ï¼‰å®šä¹‰Threadç±»çš„å­ç±»ï¼Œå¹¶é‡å†™è¯¥ç±»çš„runæ–¹æ³•ï¼ˆ2ï¼‰åˆ›å»ºThreadå­ç±»çš„å®ä¾‹å¯¹è±¡ ï¼ˆ3ï¼‰è°ƒç”¨å¯¹è±¡start()æ–¹æ³• ä¼˜ç‚¹ï¼šç¼–å†™ç®€å•ï¼Œå¦‚æœéœ€è¦è®¿é—®å½“å‰çº¿ç¨‹ï¼Œåˆ™æ— éœ€ä½¿ç”¨ Thread.currentThread() æ–¹æ³•ï¼Œç›´æ¥ä½¿ç”¨thiså³å¯è·å–å½“å‰çº¿ç¨‹ï¼› ç¼ºç‚¹ï¼šå› ä¸ºçº¿ç¨‹ç±»å·²ç»ç»§æ‰¿äº†Threadç±»ï¼ŒJavaè¯­è¨€æ˜¯å•ç»§æ‰¿çš„ï¼Œæ‰€ä»¥å°±ä¸èƒ½å†ç»§æ‰¿å…¶ä»–çˆ¶ç±»äº†ã€‚ å®ç°Runnableæ¥å£ï¼šï¼ˆ1ï¼‰å®šä¹‰runnableæ¥å£çš„å®ç°ç±»ï¼Œå¹¶é‡å†™è¯¥æ¥å£çš„run()æ–¹æ³• ï¼ˆ2ï¼‰åˆ›å»ºå®ç°ç±»çš„å®ä¾‹å¯¹è±¡ï¼ˆ3ï¼‰è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„start()æ–¹æ³•æ¥å¯åŠ¨è¯¥çº¿ç¨‹ é€šè¿‡Callableå’ŒFutureåˆ›å»ºçº¿ç¨‹ï¼šï¼ˆ1ï¼‰åˆ›å»ºCallableæ¥å£çš„å®ç°ç±»ï¼Œå¹¶å®ç°call()æ–¹æ³•ï¼ˆ2ï¼‰åˆ›å»ºCallableå®ç°ç±»çš„å®ä¾‹ï¼Œå¹¶ä½¿ç”¨FutureTaskç±»æ¥åŒ…è£…Callableå¯¹è±¡ï¼ˆ3ï¼‰ä½¿ç”¨FutureTaskå¯¹è±¡ä½œä¸ºThreadå¯¹è±¡çš„targetåˆ›å»ºå¹¶å¯åŠ¨æ–°çº¿ç¨‹ï¼ˆ4ï¼‰è°ƒç”¨FutureTaskå¯¹è±¡çš„get()æ–¹æ³•æ¥è·å¾—å­çº¿ç¨‹æ‰§è¡Œç»“æŸåçš„è¿”å›å€¼ å…¶ä¸­ å®ç°Runnalbeæ¥å£æ›´å¥½ ï¼Œä½¿ç”¨å®ç°Runnableæ¥å£çš„æ–¹å¼åˆ›å»ºçš„çº¿ç¨‹å¯ä»¥å¤„ç†åŒä¸€èµ„æºï¼Œä»è€Œå®ç°èµ„æºçš„å…±äº«ã€‚ 3.å¦‚ä½•åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Ÿ ä½¿ç”¨é€€å‡ºæ ‡å¿—ï¼Œä½¿çº¿ç¨‹æ­£å¸¸é€€å‡ºï¼Œä¹Ÿå°±æ˜¯å½“runæ–¹æ³•å®Œæˆåçº¿ç¨‹ç»ˆæ­¢ï¼› ä½¿ç”¨stopæ–¹æ³•å¼ºè¡Œç»ˆæ­¢ï¼Œä½†æ˜¯ä¸æ¨èè¿™ä¸ªæ–¹æ³•ï¼Œå› ä¸ºstopå’ŒsuspendåŠresumeä¸€æ ·éƒ½æ˜¯è¿‡æœŸä½œåºŸçš„æ–¹æ³•ï¼› ä½¿ç”¨interruptæ–¹æ³•ä¸­æ–­çº¿ç¨‹ã€‚ 12345678910111213141516171819202122232425262728293031class MyThread extends Thread&#123; volatile boolean stop = false; public void run() &#123; while (!stop) &#123; System.out.println(getName() + &quot; is running&quot;); try &#123; sleep(1000); &#125; catch (InterruptedException e) &#123; System.out.println(&quot;week up from blcok...&quot;); stop = true; // åœ¨å¼‚å¸¸å¤„ç†ä»£ç ä¸­ä¿®æ”¹å…±äº«å˜é‡çš„çŠ¶æ€ &#125; &#125; System.out.println(getName() + &quot; is exiting...&quot;); &#125;&#125;class InterruptThreadDemo3&#123; public static void main(String[] args) throws InterruptedException &#123; MyThread m1 = new MyThread(); System.out.println(&quot;Starting thread...&quot;); m1.start(); Thread.sleep(3000); System.out.println(&quot;Interrupt thread...: &quot; + m1.getName()); m1.stop = true; // è®¾ç½®å…±äº«å˜é‡ä¸ºtrue m1.interrupt(); // é˜»å¡æ—¶é€€å‡ºé˜»å¡çŠ¶æ€ Thread.sleep(3000); // ä¸»çº¿ç¨‹ä¼‘çœ 3ç§’ä»¥ä¾¿è§‚å¯Ÿçº¿ç¨‹m1çš„ä¸­æ–­æƒ…å†µ System.out.println(&quot;Stopping application...&quot;); &#125; &#125; 4.ä»€ä¹ˆæ˜¯Daemonçº¿ç¨‹ï¼Ÿå®ƒæœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿ æ‰€è°“åå°(daemon)çº¿ç¨‹ï¼Œä¹Ÿå«å®ˆæŠ¤çº¿ç¨‹ï¼Œæ˜¯æŒ‡åœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™åœ¨åå°æä¾›ä¸€ç§é€šç”¨æœåŠ¡çš„çº¿ç¨‹ï¼Œå¹¶ä¸”è¿™ä¸ªçº¿ç¨‹å¹¶ä¸å±äºç¨‹åºä¸­ä¸å¯æˆ–ç¼ºçš„éƒ¨åˆ†ã€‚ æ„ä¹‰ï¼šJVMçš„åƒåœ¾å›æ”¶çº¿ç¨‹å°±æ˜¯Daemonçº¿ç¨‹ï¼ŒFinalizerä¹Ÿæ˜¯å®ˆæŠ¤çº¿ç¨‹ã€‚ 5.è¯´è¯´CyclicBarrierå’ŒCountDownLatchçš„åŒºåˆ«ï¼Ÿ ä¸¤ä¸ªçœ‹ä¸Šå»æœ‰ç‚¹åƒçš„ç±»ï¼Œéƒ½åœ¨java.util.concurrentä¸‹ï¼Œéƒ½å¯ä»¥ç”¨æ¥è¡¨ç¤ºä»£ç è¿è¡Œåˆ°æŸä¸ªç‚¹ä¸Šï¼ŒäºŒè€…çš„åŒºåˆ«åœ¨äºï¼š CyclicBarrierçš„æŸä¸ªçº¿ç¨‹è¿è¡Œåˆ°æŸä¸ªç‚¹ä¸Šä¹‹åï¼Œè¯¥çº¿ç¨‹å³åœæ­¢è¿è¡Œï¼Œç›´åˆ°æ‰€æœ‰çš„çº¿ç¨‹éƒ½åˆ°è¾¾äº†è¿™ä¸ªç‚¹ï¼Œæ‰€æœ‰çº¿ç¨‹æ‰é‡æ–°è¿è¡ŒCountDownLatchåˆ™ä¸æ˜¯ï¼ŒæŸçº¿ç¨‹è¿è¡Œåˆ°æŸä¸ªç‚¹ä¸Šä¹‹åï¼Œåªæ˜¯ç»™æŸä¸ªæ•°å€¼**-1**è€Œå·²ï¼Œè¯¥çº¿ç¨‹ç»§ç»­è¿è¡Œï¼› CyclicBarrieråªèƒ½å”¤èµ·ä¸€ä¸ªä»»åŠ¡ï¼ŒCountDownLatchå¯ä»¥å”¤èµ·å¤šä¸ªä»»åŠ¡ CyclicBarrierå¯é‡ç”¨ï¼ŒCountDownLatchä¸å¯é‡ç”¨ï¼Œè®¡æ•°å€¼ä¸º0è¯¥CountDownLatchå°±ä¸å¯å†ç”¨äº† 6.è¯·ä½ ç®€è¦è¯´æ˜ä¸€ä¸‹çº¿ç¨‹çš„åŸºæœ¬çŠ¶æ€ä»¥åŠçŠ¶æ€ä¹‹é—´çš„å…³ç³»ï¼Ÿ æ–°å»ºçŠ¶æ€ï¼šnewè¯­å¥åˆ›å»ºçš„çº¿ç¨‹å¯¹è±¡å¤„äºæ–°å»ºçŠ¶æ€ï¼Œä»…è¢«åˆ†é…äº†å†…å­˜ï¼› ç­‰å¾…çŠ¶æ€ï¼š å½“çº¿ç¨‹åœ¨newä¹‹åï¼Œå¹¶ä¸”åœ¨è°ƒç”¨startæ–¹æ³•å‰ï¼Œçº¿ç¨‹å¤„äºç­‰å¾…çŠ¶æ€ ; å°±ç»ªçŠ¶æ€ï¼š å…¶ä»–çº¿ç¨‹è°ƒç”¨å®ƒçš„**start()**æ–¹æ³•ï¼Œè¯¥çº¿ç¨‹å°±è¿›å…¥å°±ç»ªçŠ¶æ€ï¼Œåªå·®ç­‰å¾…cpuçš„ä½¿ç”¨æƒ ; è¿è¡ŒçŠ¶æ€ï¼š çº¿ç¨‹å ç”¨CPUï¼Œæ‰§è¡Œç¨‹åºä»£ç  ; é˜»å¡çŠ¶æ€ï¼š é˜»å¡çŠ¶æ€æ˜¯æŒ‡çº¿ç¨‹å› ä¸ºæŸäº›åŸå› æ”¾å¼ƒCPUï¼Œæš‚æ—¶åœæ­¢è¿è¡Œã€‚é˜»å¡çŠ¶æ€åˆ†ä¸ºä¸‰ç§ï¼š ç­‰å¾…é˜»å¡: è¿è¡Œçš„çº¿ç¨‹æ‰§è¡Œ**wait()**æ–¹æ³•ï¼ŒJVMä¼šæŠŠè¯¥çº¿ç¨‹æ”¾å…¥ç­‰å¾…æ± ä¸­ï¼› åŒæ­¥é˜»å¡: è¿è¡Œçš„çº¿ç¨‹åœ¨è·å–å¯¹è±¡åŒæ­¥é”æ—¶ï¼Œè‹¥è¯¥åŒæ­¥é”è¢«åˆ«çš„çº¿ç¨‹å ç”¨ï¼Œåˆ™JVMä¼šæŠŠçº¿ç¨‹æ”¾å…¥é”æ± ä¸­ï¼› å…¶ä»–é˜»å¡: è¿è¡Œçš„çº¿ç¨‹æ‰§è¡ŒSleep()æ–¹æ³•ï¼Œæˆ–è€…å‘å‡ºI/Oè¯·æ±‚æ—¶ï¼ŒJVMä¼šæŠŠçº¿ç¨‹è®¾ä¸ºé˜»å¡çŠ¶æ€ã€‚ æ­»äº¡çŠ¶æ€ï¼š çº¿ç¨‹æ‰§è¡Œå®Œrun()æ–¹æ³•ä¸­çš„ä»£ç ï¼Œæˆ–è€…é‡åˆ°äº†æœªæ•è·çš„å¼‚å¸¸ï¼Œå°±ä¼šé€€å‡ºrun()æ–¹æ³•ï¼Œç»“æŸç”Ÿå‘½å‘¨æœŸ 7. notify()å’ŒnotifyAll()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ notifyå¯èƒ½ä¼šå¯¼è‡´æ­»é”ï¼ˆwhyï¼Ÿï¼‰ï¼Œè€ŒnotifyAllåˆ™ä¸ä¼šï¼› ä½¿ç”¨notifyall,å¯ä»¥å”¤é†’ æ‰€æœ‰å¤„äºwaitçŠ¶æ€çš„çº¿ç¨‹ï¼Œä½¿å…¶é‡æ–°è¿›å…¥é”çš„äº‰å¤ºé˜Ÿåˆ—ä¸­ï¼Œè€Œnotifyåªèƒ½å”¤é†’ä¸€ä¸ªã€‚ 8. sleep()å’Œwait() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ ç»§æ‰¿çš„ç±»ï¼šsleep()æ–¹æ³•ï¼Œæˆ‘ä»¬é¦–å…ˆè¦çŸ¥é“è¯¥æ–¹æ³•æ˜¯å±äºThreadç±»ä¸­çš„ï¼›è€Œwait()æ–¹æ³•ï¼Œåˆ™æ˜¯å±äºObjectç±»ä¸­çš„ï¼› sleep() æ˜¯ Thread ç±»é™æ€æ–¹æ³•ï¼Œå¯ä»¥ä½¿ å½“å‰ çº¿ç¨‹é˜»å¡ï¼Œå¹¶æŒ‡å®šæš‚åœæ—¶é—´ï¼Œé‡ç‚¹åœ¨äºç†è§£ å½“å‰ã€‚ä¼‘çœ æ—¶é—´æœŸæ»¡åï¼Œè¯¥çº¿ç¨‹ä¸ä¸€å®šä¼šç«‹å³æ‰§è¡Œè¢«CPUè°ƒåº¦ï¼Œåªæ˜¯åˆ°äº†å°±ç»ªçŠ¶æ€ã€‚ æ˜¯å¦é‡Šæ”¾é”ï¼šsleep()æ–¹æ³•å¯¼è‡´äº†ç¨‹åºæš‚åœæ‰§è¡ŒæŒ‡å®šçš„æ—¶é—´ï¼Œè®©å‡ºcpuè¯¥å…¶ä»–çº¿ç¨‹ï¼Œä½†æ˜¯ä»–çš„ç›‘æ§çŠ¶æ€ä¾ç„¶ä¿æŒè€…ï¼Œå½“æŒ‡å®šçš„æ—¶é—´åˆ°äº†åˆä¼šè‡ªåŠ¨æ¢å¤è¿è¡ŒçŠ¶æ€ã€‚åœ¨è°ƒç”¨sleep()æ–¹æ³•çš„è¿‡ç¨‹ä¸­ï¼Œçº¿ç¨‹ä¸ä¼šé‡Šæ”¾å¯¹è±¡é”ï¼›å½“è°ƒç”¨wait()æ–¹æ³•çš„æ—¶å€™ï¼Œçº¿ç¨‹ä¼šæ”¾å¼ƒå¯¹è±¡é”ï¼Œè¿›å…¥ç­‰å¾…æ­¤å¯¹è±¡çš„ç­‰å¾…é”å®šæ± ï¼› ç”¨å¤„ï¼š Wait é€šå¸¸è¢«ç”¨äºçº¿ç¨‹é—´äº¤äº’/é€šä¿¡ï¼Œsleep é€šå¸¸è¢«ç”¨äºæš‚åœæ‰§è¡Œï¼› å†æ¬¡å”¤é†’ï¼š wait() æ–¹æ³•è¢«è°ƒç”¨åï¼Œçº¿ç¨‹ä¸ä¼šâ¾ƒåŠ¨è‹é†’ï¼Œéœ€è¦åˆ«çš„çº¿ç¨‹è°ƒç”¨åŒâ¼€ä¸ªå¯¹è±¡ä¸Šçš„ notify() æˆ–è€…notifyAll() æ–¹æ³•ã€‚sleep() æ–¹æ³•æ‰§è¡Œå®Œæˆåï¼Œçº¿ç¨‹ä¼šâ¾ƒåŠ¨è‹é†’ã€‚ 8.1 Threadç±»ä¸­çš„yieldæ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ yield() ä¹Ÿæ˜¯ Thread ç±»é™æ€æ–¹æ³•ï¼Œä½¿å½“å‰çº¿ç¨‹å˜ä¸ºå°±ç»ªçŠ¶æ€ ï¼ˆsleep() æ˜¯é˜»å¡ï¼‰ï¼Œä½¿å¾—å…¶ä»–çº¿ç¨‹æ›´å¤šæœºä¼šè·å–CPUã€‚æ‰§è¡Œyield()çš„çº¿ç¨‹æœ‰å¯èƒ½åœ¨è¿›å…¥åˆ°æš‚åœçŠ¶æ€åé©¬ä¸Šåˆè¢«æ‰§è¡Œã€‚ 8.2 java ä¸­Waitã€Sleepå’ŒYieldæ–¹æ³•çš„åŒºåˆ«ï¼Ÿ https://www.jianshu.com/p/25e959037eed 9. volatile æ˜¯ä»€ä¹ˆ?å¯ä»¥ä¿è¯æœ‰åºæ€§å—? ä¿è¯äº†ä¸åŒçº¿ç¨‹å¯¹è¿™ä¸ªå˜é‡è¿›è¡Œæ“ä½œæ—¶çš„å¯è§æ€§ï¼Œå³ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†æŸä¸ªå˜é‡çš„å€¼ï¼Œè¿™æ–°å€¼å¯¹å…¶ä»–çº¿ç¨‹æ¥è¯´æ˜¯ç«‹å³å¯è§çš„,volatileå…³é”®å­—ä¼šå¼ºåˆ¶å°†ä¿®æ”¹çš„å€¼ç«‹å³å†™å…¥ä¸»å­˜ï¼› ç¦æ­¢è¿›è¡ŒæŒ‡ä»¤é‡æ’åºã€‚ èƒ½ä¿è¯æœ‰åºæ€§ï¼Œå› ä¸ºç¦æ­¢æŒ‡ä»¤é‡æ’ã€‚ 10. ä¸ºä»€ä¹ˆwait, notify å’Œ notifyAllè¿™äº›æ–¹æ³•ä¸åœ¨threadç±»é‡Œé¢ï¼Ÿ https://www.zhihu.com/question/321674476 æ˜æ˜¾çš„åŸå› æ˜¯JAVAæä¾›çš„é”æ˜¯å¯¹è±¡çº§çš„è€Œä¸æ˜¯çº¿ç¨‹çº§çš„ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰é”ï¼Œé€šè¿‡çº¿ç¨‹è·å¾—ã€‚å¦‚æœçº¿ç¨‹éœ€è¦ç­‰å¾…æŸäº›é”é‚£ä¹ˆè°ƒç”¨å¯¹è±¡ä¸­çš„wait()æ–¹æ³•å°±æœ‰æ„ä¹‰äº†ã€‚å¦‚æœwait()æ–¹æ³•å®šä¹‰åœ¨Threadç±»ä¸­ï¼Œçº¿ç¨‹æ­£åœ¨ç­‰å¾…çš„æ˜¯å“ªä¸ªé”å°±ä¸æ˜æ˜¾äº†ã€‚ ç®€å•çš„è¯´ï¼Œç”±äºwaitï¼Œnotifyå’ŒnotifyAlléƒ½æ˜¯é”çº§åˆ«çš„æ“ä½œï¼Œæ‰€ä»¥æŠŠä»–ä»¬å®šä¹‰åœ¨Objectç±»ä¸­å› ä¸ºé”å±äºå¯¹è±¡ã€‚ 11.ä¸ºä»€ä¹ˆwaitå’Œnotifyæ–¹æ³•è¦åœ¨åŒæ­¥å—ä¸­è°ƒç”¨ï¼Ÿ wait()æ–¹æ³•å¼ºåˆ¶å½“å‰çº¿ç¨‹é‡Šæ”¾å¯¹è±¡é”ã€‚è¿™æ„å‘³ç€åœ¨è°ƒç”¨æŸå¯¹è±¡çš„wait()æ–¹æ³•ä¹‹å‰ï¼Œå½“å‰çº¿ç¨‹å¿…é¡»å·²ç»è·å¾—è¯¥å¯¹è±¡çš„é”ã€‚å› æ­¤ï¼Œçº¿ç¨‹å¿…é¡»åœ¨æŸä¸ªå¯¹è±¡çš„åŒæ­¥æ–¹æ³•æˆ–åŒæ­¥ä»£ç å—ä¸­æ‰èƒ½è°ƒç”¨è¯¥å¯¹è±¡çš„wait()æ–¹æ³•ï¼› åœ¨è°ƒç”¨å¯¹è±¡çš„notify()å’ŒnotifyAll()æ–¹æ³•ä¹‹å‰ï¼Œè°ƒç”¨çº¿ç¨‹å¿…é¡»å·²ç»å¾—åˆ°è¯¥å¯¹è±¡çš„é”ã€‚å› æ­¤ï¼Œå¿…é¡»åœ¨æŸä¸ªå¯¹è±¡çš„åŒæ­¥æ–¹æ³•æˆ–åŒæ­¥ä»£ç å—ä¸­æ‰èƒ½è°ƒç”¨è¯¥å¯¹è±¡çš„notify()æˆ–notifyAll()æ–¹æ³•ã€‚ 12. ï¼ˆæ²¡ç»†çœ‹ï¼‰Javaä¸­interrupted å’Œ isInterrupteddæ–¹æ³•çš„åŒºåˆ«ï¼Ÿ interrupted() å’Œ isInterrupted()çš„ä¸»è¦åŒºåˆ«æ˜¯å‰è€…ä¼šå°†ä¸­æ–­çŠ¶æ€æ¸…é™¤è€Œåè€…ä¸ä¼šã€‚Javaå¤šçº¿ç¨‹çš„ä¸­æ–­æœºåˆ¶æ˜¯ç”¨å†…éƒ¨æ ‡è¯†æ¥å®ç°çš„ï¼Œè°ƒThread.interrupt()æ¥ä¸­æ–­ä¸€ä¸ªçº¿ç¨‹å°±ä¼šè®¾ç½®ä¸­æ–­æ ‡è¯†ä¸ºtrueã€‚å½“ä¸­æ–­çº¿ç¨‹è°ƒç”¨é™æ€æ–¹æ³•Thread.interrupted()æ¥æ£€æŸ¥ä¸­æ–­çŠ¶æ€æ—¶ï¼Œä¸­æ–­çŠ¶æ€ä¼šè¢«æ¸…é›¶ã€‚è€Œéé™æ€æ–¹æ³•isInterrupted()ç”¨æ¥æŸ¥è¯¢å…¶å®ƒçº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ä¸”ä¸ä¼šæ”¹å˜ä¸­æ–­çŠ¶æ€æ ‡è¯†ã€‚ç®€å•çš„è¯´å°±æ˜¯ä»»ä½•æŠ›å‡ºInterruptedExceptionå¼‚å¸¸çš„æ–¹æ³•ã€‚ 1.4.2 çº¿ç¨‹æ±  1.è¯·ä½ è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± ï¼ˆthread poolï¼‰ï¼Ÿ çº¿ç¨‹æ± é¡¾åæ€ä¹‰å°±æ˜¯äº‹å…ˆåˆ›å»ºè‹¥å¹²ä¸ªå¯æ‰§è¡Œçš„çº¿ç¨‹æ”¾å…¥ä¸€ä¸ªæ± ï¼ˆå®¹å™¨ï¼‰ä¸­ï¼Œéœ€è¦çš„æ—¶å€™ä»æ± ä¸­è·å–çº¿ç¨‹ä¸ç”¨è‡ªè¡Œåˆ›å»ºï¼Œä½¿ç”¨å®Œæ¯•ä¸éœ€è¦é”€æ¯çº¿ç¨‹è€Œæ˜¯æ”¾å›æ± ä¸­ï¼Œä»è€Œå‡å°‘åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹å¯¹è±¡çš„å¼€é”€ã€‚ é™¤æ­¤ä¹‹å¤–ï¼š æé«˜æ€§èƒ½ï¼Œåˆ©ç”¨å¤šçº¿ç¨‹å‹æ¦¨CPUç®—åŠ›ï¼› æé«˜çº¿ç¨‹çš„å¯ç®¡ç†æ€§ï¼Œé™åˆ¶çº¿ç¨‹æ•°é‡å¹¶å¯ä»¥è¿›è¡Œç»Ÿä¸€çš„åˆ†é…ã€è°ƒä¼˜å’Œç›‘æ§ã€‚ 1.1 è¯·ä»‹ç»ä¸€ä¸‹ä½¿ç”¨çº¿ç¨‹æ± ä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹ï¼Ÿ æ ¸å¿ƒå‚æ•°ï¼šå…¶ä¸­corePoolæ˜¯æ ¸å¿ƒçº¿ç¨‹æ± ï¼ˆä¿æ´»çº¿ç¨‹ï¼‰ï¼ŒmaximumPoolæ˜¯æ€»çº¿ç¨‹æ± ï¼ˆä¿æ´»çº¿ç¨‹+å·¥ä½œçº¿ç¨‹ï¼‰ï¼ŒblockQueue æ˜¯ç­‰å¾…ä»»åŠ¡é˜Ÿåˆ—ï¼ŒrejectedExecutionHandleræ˜¯æ‹’ç»ç­–ç•¥ï¼š æµç¨‹ï¼šcorePoolSizeâ†’é˜Ÿåˆ—â†’maximumPoolâ†’æ‹’ç»ç­–ç•¥ æœªè¾¾åˆ°corePoolSizeæ—¶ï¼Œæ ¸å¿ƒçº¿ç¨‹æ± ä¼šå¼€è¾Ÿæ–°çº¿ç¨‹è¿è¡Œä»»åŠ¡ï¼ˆå¯ä»¥ä½¿ç”¨å·²æœ‰çº¿ç¨‹å—ï¼Ÿï¼‰ï¼Œä»»åŠ¡ç»“æŸåçº¿ç¨‹ä¸é”€æ¯ï¼› è¾¾åˆ°corePoolSizeï¼Œè€Œä»»åŠ¡é˜Ÿåˆ—æœªæ»¡æ—¶ï¼Œæ–°ä»»åŠ¡æäº¤åˆ°ç­‰å¾…é˜Ÿåˆ—ï¼Œçº¿ç¨‹ç©ºé—²æ—¶é—´è¶…è¿‡keepAliveTimeæ—¶è¢«é”€æ¯ï¼› ä»»åŠ¡é˜Ÿåˆ—ä¹Ÿæ»¡äº†ï¼Œä½†æœªè¶…è¿‡æœ€å¤§çº¿ç¨‹æ•°ï¼Œæ–°å»ºå·¥ä½œçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼› è¶…è¿‡æœ€å¤§çº¿ç¨‹æ•°æ—¶ï¼ŒæŒ‰æ‹’ç»ç­–ç•¥å¤„ç†ï¼ŒåŒ…æ‹¬ï¼šæŠ›å‡ºå¼‚å¸¸ã€ä½¿ç”¨è°ƒç”¨è€…çº¿ç¨‹è¿è¡Œä»»åŠ¡ã€ä¸¢å¼ƒæ–°ä»»åŠ¡ã€ä¸¢å¼ƒé˜Ÿåˆ—å¤´ä»»åŠ¡ç­‰ã€‚ 1.2 çº¿ç¨‹æ± ä¼šå›æ”¶æ ¸å¿ƒçº¿ç¨‹å—ï¼Ÿ å‚è€ƒï¼šçº¿ç¨‹æ± æ˜¯æ€ä¹ˆå›æ”¶ç©ºé—²çº¿ç¨‹çš„ ä¼šï¼Œå¯ä»¥é€šè¿‡allowCoreThreadTimeOutå‚æ•°æ¥è¿›è¡Œè®¾ç½®ã€‚ å…ˆå›å¿†ä¸€ä¸‹æ•´ä½“çº¿ç¨‹æ± æµç¨‹ excuteæ–¹æ³• æˆ‘ä»¬çš„ä»»åŠ¡æ”¾åˆ°çº¿ç¨‹æ± åï¼Œæ˜¯ä»è°ƒç”¨executeæ‰§è¡Œå¼€å§‹çš„ã€‚ æ ¸å¿ƒæ˜¯addWorkeråŠæ³•ï¼Œ é‡Œé¢æœ€æœ€é‡è¦çš„å°±æ˜¯åˆå§‹åŒ–WorkeråŒæ—¶å¯åŠ¨threadã€‚ Workerå®ç°äº†Runnableæ¥å£ï¼Œæˆ‘ä»¬ç›´æ¥çœ‹å®ƒçš„runæ–¹æ³•ï¼Œçœ‹æˆªå›¾çš„â‘¢å¤„æ ‡è®°ï¼ŒæŠ½ç¦»å‡ºæ¥ä¸€ä¸ªrunWorkeræ–¹æ³•ï¼š ä¹Ÿå°±æ˜¯è¯´ï¼šâ‘ å¤„æ˜¯ä¸€ä¸ªwhileå¾ªç¯ï¼ŒgetTaskæ–¹æ³•å°±æ˜¯ä»çº¿ç¨‹æ± é˜Ÿåˆ—å–ä»»åŠ¡ï¼Œå¦‚æœå–ä¸åˆ°ä»»åŠ¡å°±ä¼šæ‰§è¡Œ â€‹ â‘¡ä¸€æ—¦è·³å‡ºwhileå¾ªç¯ï¼Œå³è¿›å…¥åˆ°processWorkExitæ–¹æ³•ï¼Œè¿™å°±æ˜¯å›æ”¶Worker getTaskæ–¹æ³• å¯ä»¥çœ‹åˆ°ï¼Œâ‘ åˆ¤æ–­æ˜¯å¦å›æ”¶çº¿ç¨‹çš„æ¡ä»¶ï¼Œtimed ï¼Œæœ‰ä¸¤ç§æƒ…å†µè¦å›æ”¶çº¿ç¨‹ï¼š wc&gt;corePoolSize ï¼Œå½“å‰çº¿ç¨‹æ•°å¤§äºæ ¸å¿ƒçº¿ç¨‹æ•° allowCoreThreadTimeOutï¼Œæ ¸å¿ƒçº¿ç¨‹è¶…æ—¶ï¼Œæ‰€ä»¥æ ¸å¿ƒçº¿ç¨‹æ˜¯ä¼šè¢«å›æ”¶çš„ ç„¶åâ‘¡å¤„å°±æ˜¯ä»ä»»åŠ¡é˜Ÿåˆ—å–ä»»åŠ¡äº†ï¼Œå¸¦äº†timeOutå‚æ•°çš„pollæ–¹æ³•è¶…æ—¶ ï¼Œæœªèƒ½ä»ä»»åŠ¡é˜Ÿåˆ—è·å–ä»»åŠ¡å³è¿”å›nullï¼Œä»è€Œå®ç°æœ€ç»ˆçš„çº¿ç¨‹å›æ”¶ã€‚ ä¸æ˜¯processWorkExitå¤„ç†å—ï¼Œæ€ä¹ˆåœ¨getTaskå¤„ç†ï¼Œè¿˜æ˜¯å¾—å¥½å¥½çœ‹çœ‹ã€‚ 2.è¯·ä»‹ç»ä¸€ä¸‹ä»€ä¹ˆæ˜¯ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼ï¼Ÿ ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜æ˜¯çº¿ç¨‹æ¨¡å‹ä¸­çš„ç»å…¸é—®é¢˜ï¼š ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…åœ¨åŒä¸€æ—¶é—´æ®µå†…å…±ç”¨åŒä¸€å­˜å‚¨ç©ºé—´ï¼Œç”Ÿäº§è€…å‘ç©ºé—´é‡Œç”Ÿäº§æ•°æ®ï¼Œè€Œæ¶ˆè´¹è€…å–èµ°æ•°æ®ã€‚ 3.çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥æœ‰å“ªäº›ï¼Ÿ ä¸»è¦æœ‰4ç§æ‹’ç»ç­–ç•¥ï¼š AbortPolicyï¼šç›´æ¥ä¸¢å¼ƒä»»åŠ¡ï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼Œè¿™æ˜¯é»˜è®¤ç­–ç•¥ CallerRunsPolicyï¼šåªç”¨è°ƒç”¨è€…æ‰€åœ¨çš„çº¿ç¨‹æ¥å¤„ç†ä»»åŠ¡ DiscardOldestPolicyï¼šä¸¢å¼ƒç­‰å¾…é˜Ÿåˆ—ä¸­æœ€æ—§çš„ä»»åŠ¡ï¼Œå¹¶æ‰§è¡Œå½“å‰ä»»åŠ¡ DiscardPolicyï¼šç›´æ¥ä¸¢å¼ƒä»»åŠ¡ï¼Œä¹Ÿä¸æŠ›å‡ºå¼‚å¸¸ 4.å¦‚ä½•åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± ï¼ˆå››å¤§æ–¹æ³•ï¼‰ï¼Ÿç›¸å…³å‚æ•°ï¼ˆä¸ƒå¤§å‚æ•°ï¼‰æ˜¯ä»€ä¹ˆ? javaé€šè¿‡Executorsæä¾›å››å¤§æ–¹æ³•ï¼š newCachedThreadPoolï¼šåˆ›å»ºä¸€ä¸ªå¯ç¼“å­˜çº¿ç¨‹æ± ï¼Œå¦‚æœçº¿ç¨‹æ± é•¿åº¦è¶…è¿‡å¤„ç†éœ€è¦ï¼Œå¯çµæ´»å›æ”¶ç©ºé—²çº¿ç¨‹ï¼Œè‹¥æ— å¯å›æ”¶ï¼Œåˆ™æ–°å»ºçº¿ç¨‹ï¼› newFixedThreadPoolï¼šåˆ›å»ºä¸€ä¸ªå®šé•¿çº¿ç¨‹æ± ï¼Œå¯æ§åˆ¶çº¿ç¨‹æœ€å¤§å¹¶å‘æ•°ï¼Œè¶…å‡ºçš„çº¿ç¨‹ä¼šåœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…ï¼› newScheduledThreadPoolï¼šåˆ›å»ºä¸€ä¸ªå®šé•¿çº¿ç¨‹æ± ï¼Œæ”¯æŒå®šæ—¶åŠå‘¨æœŸæ€§ä»»åŠ¡æ‰§è¡Œï¼› newSingleThreadExecutorï¼š åˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹åŒ–çš„çº¿ç¨‹æ± ï¼Œå®ƒåªä¼šç”¨å”¯ä¸€çš„å·¥ä½œçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼Œä¿è¯æ‰€æœ‰ä»»åŠ¡æŒ‰ç…§æŒ‡å®šé¡ºåº(FIFO, LIFO, ä¼˜å…ˆçº§)æ‰§è¡Œã€‚ ä¸ƒå¤§å‚æ•°è®¾ç½®ï¼š corePoolSizeï¼šå½“ä½¿ç”¨äº†LinkedBlockingQueue = new LinkedBlockQueueçš„æ—¶å€™ï¼Œé˜Ÿåˆ—é•¿åº¦é»˜è®¤æ— é™é•¿ï¼Œä¼šå¯¼è‡´çº¿ç¨‹æ•°é‡æ°¸è¿œç­‰äºcorePoolSizeï¼Œä»»åŠ¡æ¿€å¢æ—¶ä»»åŠ¡å“åº”æ—¶é—´ä¹Ÿæ¿€å¢ï¼› maximumPoolSizeï¼šçº¿ç¨‹æ± ä¸­çº¿ç¨‹ä¸ªæ•°ï¼Œå¢åŠ çº¿ç¨‹çš„å…¬å¼ï¼š(ä»»åŠ¡æ•°âˆ’queueCapacity)Ã—(åŸçº¿ç¨‹æ•°Ã·åŸä»»åŠ¡æ•°)(ä»»åŠ¡æ•°-queueCapacity) \\times (åŸçº¿ç¨‹æ•° \\div åŸä»»åŠ¡æ•°)(ä»»åŠ¡æ•°âˆ’queueCapacity)Ã—(åŸçº¿ç¨‹æ•°Ã·åŸä»»åŠ¡æ•°)ï¼› keepAliveTimeï¼šçº¿ç¨‹æœ€å¤§ï¼ˆç©ºé—²ï¼‰å­˜æ´»æ—¶é—´ï¼› rejectedExecutionHandlerï¼šçº¿ç¨‹è¢«æ‹’ç»çš„è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥è‡ªå·±é‡å†™ï¼› workQueue ï¼š é˜»å¡é˜Ÿåˆ—ï¼› unitï¼škeepAliveTimeçš„å•ä½ ï¼› threadFactoryï¼šè¡¨ç¤ºç”Ÿæˆçº¿ç¨‹æ± ä¸­å·¥ä½œçº¿ç¨‹çš„çº¿ç¨‹å·¥å‚ï¼Œç”¨äºåˆ›å»ºçº¿ç¨‹ä¸€èˆ¬é»˜è®¤å³å¯ 5.çº¿ç¨‹æ± æ ¸å¿ƒçº¿ç¨‹æ•°corePoolSizeæ€ä¹ˆè®¾ç½®å‘¢ï¼Ÿ åˆ†ä¸ºCPUå¯†é›†å‹å’ŒIOå¯†é›†å‹æ¥è€ƒè™‘ï¼š CPUå¯†é›†å‹ã€‚è¿™ç§ä»»åŠ¡æ¶ˆè€—çš„ä¸»è¦æ˜¯ CPU èµ„æºï¼Œå¯ä»¥å°†çº¿ç¨‹æ•°è®¾ç½®ä¸º Nï¼ˆCPU æ ¸å¿ƒæ•°ï¼‰+1ã€‚ æ¯” CPU æ ¸å¿ƒæ•°å¤šå‡ºæ¥çš„ä¸€ä¸ªçº¿ç¨‹ ï¼šæ˜¯ä¸ºäº†é˜²æ­¢çº¿ç¨‹å¶å‘çš„ç¼ºé¡µä¸­æ–­ï¼Œæˆ–è€…å…¶å®ƒåŸå› å¯¼è‡´çš„ä»»åŠ¡æš‚åœè€Œå¸¦æ¥çš„å½±å“ã€‚ä¸€æ—¦ä»»åŠ¡æš‚åœï¼ŒCPU å°±ä¼šå¤„äºç©ºé—²çŠ¶æ€ï¼Œè€Œåœ¨è¿™ç§æƒ…å†µä¸‹å¤šå‡ºæ¥çš„ä¸€ä¸ªçº¿ç¨‹å°±å¯ä»¥å……åˆ†åˆ©ç”¨ CPU çš„ç©ºé—²æ—¶é—´ã€‚ IOå¯†é›†å‹ã€‚è¿™ç§ä»»åŠ¡åº”ç”¨èµ·æ¥ï¼Œç³»ç»Ÿä¼šç”¨å¤§éƒ¨åˆ†çš„æ—¶é—´æ¥å¤„ç† I/O äº¤äº’ï¼Œè€Œçº¿ç¨‹åœ¨å¤„ç† I/O çš„æ—¶é—´æ®µå†…ä¸ä¼šå ç”¨ CPU æ¥å¤„ç†ï¼Œè¿™æ—¶å°±å¯ä»¥å°† CPU äº¤å‡ºç»™å…¶å®ƒçº¿ç¨‹ä½¿ç”¨ã€‚å› æ­¤åœ¨ I/O å¯†é›†å‹ä»»åŠ¡çš„åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¤šé…ç½®ä¸€äº›çº¿ç¨‹ï¼Œå…·ä½“çš„è®¡ç®—æ–¹æ³•æ˜¯ ï¼š æ ¸å¿ƒçº¿ç¨‹æ•°=CPUæ ¸å¿ƒæ•°é‡*2 6.ï¼ˆä¸ç†Ÿæ‚‰ï¼‰Javaçº¿ç¨‹æ± ä¸­é˜Ÿåˆ—å¸¸ç”¨ç±»å‹æœ‰å“ªäº›ï¼Ÿ ArrayBlockingQueue ï¼šæ˜¯ä¸€ä¸ªåŸºäºæ•°ç»„ç»“æ„çš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ï¼Œæ­¤é˜Ÿåˆ—æŒ‰ FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰åŸåˆ™å¯¹å…ƒç´ è¿›è¡Œæ’åºï¼› LinkedBlockingQueue :ä¸€ä¸ªåŸºäºé“¾è¡¨ç»“æ„çš„é˜»å¡é˜Ÿåˆ—ï¼Œæ­¤é˜Ÿåˆ—æŒ‰FIFO ï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰ æ’åºå…ƒç´ ï¼Œååé‡é€šå¸¸è¦é«˜äº ArrayBlockingQueue ï¼› SynchronousQueue : ä¸€ä¸ªä¸å­˜å‚¨å…ƒç´ çš„é˜»å¡é˜Ÿåˆ—ï¼› PriorityBlockingQueueï¼š ä¸€ä¸ªå…·æœ‰ä¼˜å…ˆçº§çš„æ— é™é˜»å¡é˜Ÿåˆ—ï¼ŒPriorityBlockingQueue ä¹Ÿæ˜¯åŸºäºæœ€å°äºŒå‰å †å®ç°ã€‚ 7.æœ‰ä¸‰ä¸ªçº¿ç¨‹T1,T2,T3,å¦‚ä½•ä¿è¯é¡ºåºæ‰§è¡Œï¼Ÿ å› ä¸ºåœ¨æ¯ä¸ªçº¿ç¨‹çš„runæ–¹æ³•ä¸­ç”¨join()æ–¹æ³•é™å®šäº†ä¸‰ä¸ªçº¿ç¨‹çš„æ‰§è¡Œé¡ºåºã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647public class JoinTest2&#123; // 1.ç°åœ¨æœ‰T1ã€T2ã€T3ä¸‰ä¸ªçº¿ç¨‹ï¼Œä½ æ€æ ·ä¿è¯T2åœ¨T1æ‰§è¡Œå®Œåæ‰§è¡Œï¼ŒT3åœ¨T2æ‰§è¡Œå®Œåæ‰§è¡Œ public static void main(String[] args) &#123; final Thread t1 = new Thread(new Runnable() &#123; @Override public void run() &#123; System.out.println(&quot;t1&quot;); &#125; &#125;); final Thread t2 = new Thread(new Runnable() &#123; @Override public void run() &#123; try &#123; // t2çº¿ç¨‹å†…runæ–¹æ³•æœ€å¼€å§‹ï¼Œå¼•ç”¨t1.joinï¼Œç­‰å¾…t1çº¿ç¨‹æ‰§è¡Œå®Œ t1.join(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(&quot;t2&quot;); &#125; &#125;); Thread t3 = new Thread(new Runnable() &#123; @Override public void run() &#123; try &#123; // t3çº¿ç¨‹å†…runæ–¹æ³•æœ€å¼€å§‹ï¼Œå¼•ç”¨t2.joinï¼Œç­‰å¾…t2çº¿ç¨‹æ‰§è¡Œå®Œ t2.join(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(&quot;t3&quot;); &#125; &#125;); //è¿™é‡Œä¸‰ä¸ªçº¿ç¨‹çš„å¯åŠ¨é¡ºåºå¯ä»¥ä»»æ„ï¼Œå¤§å®¶å¯ä»¥è¯•ä¸‹ï¼ t3.start(); t2.start(); t1.start(); &#125;&#125; 1.4.3 å¤šçº¿ç¨‹ 1.è¯·ç®€è¿°ä¸€ä¸‹å®ç°å¤šçº¿ç¨‹åŒæ­¥çš„æ–¹æ³•ï¼Ÿ ä¸ºä»€ä¹ˆéœ€è¦ä½¿ç”¨å¤šçº¿ç¨‹ï¼Ÿä½¿ç”¨å¤šçº¿ç¨‹ä¼šå¸¦æ¥ä»€ä¹ˆé—®é¢˜ï¼Ÿ åŒæ­¥æ–¹æ³•ï¼šå¯ä»¥ä½¿ç”¨synchronizedã€lockã€volatileå’ŒThreadLocalæ¥å®ç°åŒæ­¥ã€‚ ä¸ºä»€ä¹ˆéœ€è¦ä½¿ç”¨å¤šçº¿ç¨‹ï¼Ÿ å‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ï¼ˆå…±äº«è¿›ç¨‹çš„å †å’Œæ–¹æ³•åŒº ï¼Œæ³¨æ„ï¼Œå‡å°‘â‰ æ²¡æœ‰ï¼‰ åˆ©ç”¨å¥½å¤šçº¿ç¨‹æœºåˆ¶å¯ä»¥å¤§å¤§æé«˜ç³»ç»Ÿæ•´ä½“çš„å¹¶å‘èƒ½â¼’ä»¥åŠæ€§èƒ½ å¤šæ ¸æ—¶ä»£ ï¼šå¤šæ ¸æ—¶ä»£å¤šçº¿ç¨‹ä¸»è¦æ˜¯ä¸ºäº†æé«˜ CPU åˆ©ç”¨ç‡ã€‚ä¸¾ä¸ªä¾‹å­ï¼šå‡å¦‚æˆ‘ä»¬è¦è®¡ç®—â¼€ä¸ªå¤æ‚çš„ä»»åŠ¡ï¼Œæˆ‘ä»¬åªç”¨â¼€ä¸ªçº¿ç¨‹çš„è¯ï¼ŒCPU åªä¼šâ¼€ä¸ª CPU æ ¸â¼¼è¢«åˆ©ç”¨åˆ°ï¼Œè€Œåˆ›å»ºå¤šä¸ªçº¿ç¨‹å°±å¯ä»¥è®©å¤šä¸ª CPU æ ¸â¼¼è¢«åˆ©ç”¨åˆ°ï¼Œè¿™æ ·å°±æé«˜äº† CPU çš„åˆ©ç”¨ç‡ã€‚ å¸¦æ¥çš„é—®é¢˜ï¼Ÿ å†…å­˜æ³„æ¼ã€ä¸Šä¸‹â½‚åˆ‡æ¢ã€æ­»é”è¿˜æœ‰å—é™äºç¡¬ä»¶å’Œè½¯ä»¶çš„èµ„æºé—²ç½®é—®é¢˜ã€‚ 2. ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨ï¼Ÿå¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Ÿ å¥½æ–‡ï¼šä¸€æ–‡ææ‡‚CAS ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨ï¼Ÿ å¦‚æœä½ çš„ä»£ç æ‰€åœ¨çš„è¿›ç¨‹ä¸­æœ‰å¤šä¸ªçº¿ç¨‹åœ¨åŒæ—¶è¿è¡Œï¼Œè€Œè¿™äº›çº¿ç¨‹å¯èƒ½ä¼šåŒæ—¶è¿è¡Œè¿™æ®µä»£ç ã€‚å¦‚æœæ¯æ¬¡è¿è¡Œç»“æœå’Œå•çº¿ç¨‹è¿è¡Œçš„ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œè€Œä¸”å…¶ä»–çš„å˜é‡çš„å€¼ä¹Ÿå’Œé¢„æœŸçš„æ˜¯ä¸€æ ·çš„ï¼Œå°±æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Ÿ ä½¿ç”¨ synchronized å…³é”®å­— ã€‚å¼€é”€æ¯”è¾ƒå¤§ ä½¿ç”¨Lock é” ã€‚é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œä½¿ç”¨ Lock é”è¦æ¯”ä½¿ç”¨synchronized å…³é”®å­—ï¼Œåœ¨æ€§èƒ½ä¸Šå¾—åˆ°æå¤§çš„æé«˜ã€‚å› ä¸º Lock åº•å±‚æ˜¯é€šè¿‡ AQS + CAS æœºåˆ¶æ¥å®ç°çš„ã€‚ ä½¿ç”¨ Atomic åŸå­ç±» ã€‚ä½¿ç”¨ Lock æ–¹å¼ï¼Œä¸€æ—¦ unlock() æ–¹æ³•ä½¿ç”¨ä¸è§„èŒƒï¼Œå¯èƒ½å¯¼è‡´æ­»é”ã€‚ Atomic åŸå­ç±»ï¼Œå› ä¸ºå…¶åº•å±‚åŸºäº CAS ä¹è§‚é”æ¥å®ç°çš„ï¼Œæ€§èƒ½è¾ƒé«˜ã€‚ ä½¿ç”¨Volatileï¼Ÿä¸å¯è¡Œï¼ å› ä¸ºæ— æ³•ä¿è¯åŸå­æ€§ã€‚ 3.çº¿ç¨‹å®‰å…¨éœ€è¦ä¿è¯å‡ ä¸ªåŸºæœ¬ç‰¹å¾ï¼Ÿ åŸå­æ€§ï¼Œç®€å•è¯´å°±æ˜¯ç›¸å…³æ“ä½œä¸ä¼šä¸­é€”è¢«å…¶ä»–çº¿ç¨‹å¹²æ‰°ï¼Œä¸€èˆ¬é€šè¿‡åŒæ­¥æœºåˆ¶å®ç°ã€‚ å¯è§æ€§ï¼Œæ˜¯ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†æŸä¸ªå…±äº«å˜é‡ï¼Œå…¶çŠ¶æ€èƒ½å¤Ÿç«‹å³è¢«å…¶ä»–çº¿ç¨‹çŸ¥æ™“ï¼Œé€šå¸¸è¢«è§£é‡Šä¸ºå°† çº¿ç¨‹æœ¬åœ°çŠ¶æ€åæ˜ åˆ°ä¸»å†…å­˜ä¸Šï¼Œvolatile å°±æ˜¯è´Ÿè´£ä¿è¯å¯è§æ€§çš„ã€‚ æœ‰åºæ€§ï¼Œæ˜¯ä¿è¯çº¿ç¨‹å†…ä¸²è¡Œè¯­ä¹‰ï¼Œé¿å…æŒ‡ä»¤é‡æ’ç­‰ã€‚ 4. ã€å¾…è¡¥å……ã€‘å¦‚ä½•åœ¨çº¿ç¨‹å®‰å…¨çš„æƒ…å†µä¸‹å®ç°ä¸€ä¸ªè®¡æ•°å™¨ï¼Ÿ å¯ä»¥ä½¿ç”¨åŠ é”ï¼Œæ¯”å¦‚synchronizedæˆ–è€…lockã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ConcurrentåŒ…ä¸‹çš„åŸå­ç±»ã€‚ 5.å¤šçº¿ç¨‹ä¸­çš„i++çº¿ç¨‹å®‰å…¨å—ï¼Ÿè¯·ç®€è¿°ä¸€ä¸‹åŸå› ï¼Ÿ ä¸å®‰å…¨ï¼Œå› ä¸ºi++ä¸æ˜¯åŸå­æ€§æ“ä½œã€‚i++åˆ†ä¸ºè¯»å–iå€¼ï¼Œå¯¹iå€¼åŠ ä¸€ï¼Œå†èµ‹å€¼ç»™i++ï¼Œæ‰§è¡ŒæœŸä¸­ä»»ä½•ä¸€æ­¥éƒ½æ˜¯æœ‰å¯èƒ½è¢«å…¶ä»–çº¿ç¨‹æŠ¢å çš„ã€‚ 6.ä»‹ç»ä¸€ä¸‹ThreadLocalåŸç†ï¼Ÿ ä¸€ç¯‡è®²çš„ä¸é”™çš„æ–‡ç« ï¼šhttps://www.cnblogs.com/wupeixuan/p/12638203.html å½“å¤šçº¿ç¨‹è®¿é—®å…±äº«å¯å˜æ•°æ®æ—¶ï¼Œæ¶‰åŠåˆ°çº¿ç¨‹é—´åŒæ­¥çš„é—®é¢˜ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰æ—¶å€™ï¼Œéƒ½è¦ç”¨åˆ°å…±äº«æ•°æ®ï¼Œæ‰€ä»¥å°±éœ€è¦çº¿ç¨‹å°é—­å‡ºåœºäº†ã€‚æ•°æ®éƒ½è¢«å°é—­åœ¨å„è‡ªçš„çº¿ç¨‹ä¹‹ä¸­ï¼Œå°±ä¸éœ€è¦åŒæ­¥ï¼Œè¿™ç§é€šè¿‡å°†æ•°æ®å°é—­åœ¨çº¿ç¨‹ä¸­è€Œé¿å…ä½¿ç”¨åŒæ­¥çš„æŠ€æœ¯ç§°ä¸ºçº¿ç¨‹å°é—­ã€‚ ThreadLocal æ˜¯ Java é‡Œä¸€ç§ç‰¹æ®Šå˜é‡ï¼Œå®ƒæ˜¯ä¸€ä¸ªçº¿ç¨‹çº§åˆ«å˜é‡ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ª ThreadLocal å°±æ˜¯æ¯ä¸ªçº¿ç¨‹éƒ½æ‹¥æœ‰äº†è‡ªå·±ç‹¬ç«‹çš„ä¸€ä¸ªå˜é‡ï¼Œç«æ€æ¡ä»¶è¢«å½»åº•æ¶ˆé™¤äº†ï¼Œåœ¨å¹¶å‘æ¨¡å¼ä¸‹æ˜¯ç»å¯¹å®‰å…¨çš„å˜é‡ã€‚ ä½¿ç”¨ç¤ºä¾‹ åœ¨ä¸‹é¢ä¾‹å­ä¸­ï¼ŒTreadLocal åšåˆ°å¤šä¸ªçº¿ç¨‹å¯¹åŒä¸€å¯¹è±¡ set æ“ä½œï¼Œä½†æ˜¯ get è·å–çš„å€¼è¿˜éƒ½æ˜¯æ¯ä¸ªçº¿ç¨‹ set çš„å€¼ï¼Œä½“ç°äº†çº¿ç¨‹çš„å°é—­ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445public class ThreadLocalDemo &#123; /** * ThreadLocalå˜é‡ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªå‰¯æœ¬ï¼Œäº’ä¸å¹²æ‰° */ public static final ThreadLocal&lt;String&gt; THREAD_LOCAL = new ThreadLocal&lt;&gt;(); public static void main(String[] args) throws Exception &#123; new ThreadLocalDemo().threadLocalTest(); &#125; public void threadLocalTest() throws Exception &#123; // ä¸»çº¿ç¨‹è®¾ç½®å€¼ THREAD_LOCAL.set(&quot;wupx&quot;); String v = THREAD_LOCAL.get(); System.out.println(&quot;Thread-0çº¿ç¨‹æ‰§è¡Œä¹‹å‰ï¼Œ&quot; + Thread.currentThread().getName() + &quot;çº¿ç¨‹å–åˆ°çš„å€¼ï¼š&quot; + v); new Thread(new Runnable() &#123; @Override public void run() &#123; String v = THREAD_LOCAL.get(); // æ­¤æ—¶æ–°å»ºçº¿ç¨‹Thread-0å–åˆ°çš„æ˜¯nullï¼Œæ„å‘³ç€ä¸åŒçº¿ç¨‹å–åˆ°çš„å€¼ä¸åŒçš„ System.out.println(Thread.currentThread().getName() + &quot;çº¿ç¨‹å–åˆ°çš„å€¼ï¼š&quot; + v); // è®¾ç½® threadLocal THREAD_LOCAL.set(&quot;huxy&quot;); v = THREAD_LOCAL.get(); System.out.println(&quot;é‡æ–°è®¾ç½®ä¹‹åï¼Œ&quot; + Thread.currentThread().getName() + &quot;çº¿ç¨‹å–åˆ°çš„å€¼ä¸ºï¼š&quot; + v); System.out.println(Thread.currentThread().getName() + &quot;çº¿ç¨‹æ‰§è¡Œç»“æŸ&quot;); &#125; &#125;).start(); // ç­‰å¾…æ‰€æœ‰çº¿ç¨‹æ‰§è¡Œç»“æŸ Thread.sleep(3000L); v = THREAD_LOCAL.get(); System.out.println(&quot;Thread-0çº¿ç¨‹æ‰§è¡Œä¹‹åï¼Œ&quot; + Thread.currentThread().getName() + &quot;çº¿ç¨‹å–åˆ°çš„å€¼ï¼š&quot; + v); &#125;&#125;/* è¾“å‡ºç»“æœ */// è™½ç„¶Thread-0å·²ç»æ”¹å˜äº†å€¼ï¼Œä½†æ˜¯mainå–åˆ°çš„å€¼ä¾æ—§æ˜¯ä¸€æ ·çš„ã€‚/*Thread-0çº¿ç¨‹æ‰§è¡Œä¹‹å‰ï¼Œmainçº¿ç¨‹å–åˆ°çš„å€¼ï¼šwupxThread-0çº¿ç¨‹å–åˆ°çš„å€¼ï¼šnullé‡æ–°è®¾ç½®ä¹‹åThread-0çº¿ç¨‹å–åˆ°çš„å€¼ä¸ºï¼šhuxyThread-0çº¿ç¨‹æ‰§è¡Œç»“æŸThread-0çº¿ç¨‹æ‰§è¡Œä¹‹åï¼Œmainçº¿ç¨‹å–åˆ°çš„å€¼ï¼šwupx*/ ThreadLocalåŸç† ThreadLocalæœ‰ä¸€ä¸ªé™æ€å†…éƒ¨ç±»ThreadLocalMapï¼ŒThreadLocalMapåˆåŒ…å«äº†ä¸€ä¸ªEntryæ•°ç»„ï¼ŒEntryæœ¬èº«æ˜¯ä¸€ä¸ªå¼±å¼•ç”¨ï¼Œä»–çš„keyæ˜¯æŒ‡å‘ThreadLocalçš„å¼±å¼•ç”¨ï¼ŒEntryå…·å¤‡äº†ä¿å­˜key valueé”®å€¼å¯¹çš„èƒ½åŠ›ã€‚ ThreadLocalMap ThreadLocalMap æ˜¯ ThreadLocal çš„é™æ€å†…éƒ¨ç±»ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹æœ‰å¤šä¸ª ThreadLocal å¯¹è±¡æ—¶æ—¶ï¼Œéœ€è¦ä¸€ä¸ªå®¹å™¨æ¥ç®¡ç†å¤š ThreadLocalï¼ŒThreadLocalMap çš„ä½œç”¨å°±æ˜¯ç®¡ç†çº¿ç¨‹ä¸­å¤šä¸ª ThreadLocalã€‚ ä»æºç ä¸­çœ‹åˆ° ThreadLocalMap å…¶å®å°±æ˜¯ä¸€ä¸ªç®€å•çš„ Map ç»“æ„ï¼Œåº•å±‚æ˜¯æ•°ç»„ï¼Œæœ‰åˆå§‹åŒ–å¤§å°ï¼Œä¹Ÿæœ‰æ‰©å®¹é˜ˆå€¼å¤§å°ï¼Œæ•°ç»„çš„å…ƒç´ æ˜¯ Entryï¼ŒEntry çš„ key å°±æ˜¯ ThreadLocal çš„å¼•ç”¨ï¼Œvalue æ˜¯ ThreadLocal çš„å€¼ã€‚ThreadLocalMap è§£å†³ hash å†²çªçš„æ–¹å¼é‡‡ç”¨çš„æ˜¯çº¿æ€§æ¢æµ‹æ³•ï¼Œå¦‚æœå‘ç”Ÿå†²çªä¼šç»§ç»­å¯»æ‰¾ä¸‹ä¸€ä¸ªç©ºçš„ä½ç½® 1234567891011121314151617181920212223242526272829303132static class ThreadLocalMap &#123; /** * é”®å€¼å¯¹å®ä½“çš„å­˜å‚¨ç»“æ„ */ static class Entry extends WeakReference&lt;ThreadLocal&lt;?&gt;&gt; &#123; // å½“å‰çº¿ç¨‹å…³è”çš„ valueï¼Œè¿™ä¸ª value å¹¶æ²¡æœ‰ç”¨å¼±å¼•ç”¨è¿½è¸ª Object value; /** * æ„é€ é”®å€¼å¯¹ * * @param k k ä½œ key,ä½œä¸º key çš„ ThreadLocal ä¼šè¢«åŒ…è£…ä¸ºä¸€ä¸ªå¼±å¼•ç”¨ * @param v v ä½œ value */ Entry(ThreadLocal&lt;?&gt; k, Object v) &#123; super(k); value = v; &#125; &#125; // åˆå§‹å®¹é‡ï¼Œå¿…é¡»ä¸º 2 çš„å¹‚ private static final int INITIAL_CAPACITY = 16; // å­˜å‚¨ ThreadLocal çš„é”®å€¼å¯¹å®ä½“æ•°ç»„ï¼Œé•¿åº¦å¿…é¡»ä¸º 2 çš„å¹‚ private Entry[] table; // ThreadLocalMap å…ƒç´ æ•°é‡ private int size = 0; // æ‰©å®¹çš„é˜ˆå€¼ï¼Œé»˜è®¤æ˜¯æ•°ç»„å¤§å°çš„ä¸‰åˆ†ä¹‹äºŒ private int threshold;&#125; Setæ–¹æ³• è°ƒç”¨ ThreadLocalå¯¹è±¡.set(value)ï¼Œå®é™…åœ¨è°ƒç”¨å½“å‰çº¿ç¨‹çš„ThreadLocalMapå¯¹è±¡.set(this,value) ï¼Œä¼šæŠŠå½“å‰ threadLocal å¯¹è±¡ä½œä¸º keyï¼Œæƒ³è¦ä¿å­˜çš„å¯¹è±¡ä½œä¸º valueï¼Œå­˜å…¥ mapã€‚ set æ–¹æ³•çš„æµç¨‹ä¸»è¦æ˜¯ï¼š å…ˆè·å–åˆ°å½“å‰çº¿ç¨‹çš„å¼•ç”¨ åˆ©ç”¨è¿™ä¸ªå¼•ç”¨æ¥è·è¿”å›å½“å‰çº¿ç¨‹åˆ° ThreadLocalMap å¦‚æœ map ä¸ºç©ºï¼Œåˆ™å»åˆ›å»ºä¸€ä¸ª ThreadLocalMap å¦‚æœ map ä¸ä¸ºç©ºï¼Œå°±åˆ©ç”¨ ThreadLocalMap çš„ set (thiså½“å‰å¯¹è±¡ï¼Œvalue) æ·»åŠ é”®å€¼å¯¹ 12345678910111213141516171819202122232425/** * ä¸ºå½“å‰ ThreadLocal å¯¹è±¡å…³è” value å€¼ * * @param value è¦å­˜å‚¨åœ¨æ­¤çº¿ç¨‹çš„çº¿ç¨‹å‰¯æœ¬çš„å€¼ */public void set(T value) &#123; // è¿”å›å½“å‰ThreadLocalæ‰€åœ¨çš„çº¿ç¨‹ Thread t = Thread.currentThread(); // è¿”å›å½“å‰çº¿ç¨‹æŒæœ‰çš„map ThreadLocalMap map = getMap(t); if (map != null) &#123; // å¦‚æœ ThreadLocalMap ä¸ä¸ºç©ºï¼Œåˆ™ç›´æ¥å­˜å‚¨&lt;ThreadLocal, T&gt;é”®å€¼å¯¹ // æ­¤æ—¶thisæ˜¯ThreadLocalå¯¹è±¡ï¼Œè¿™æ˜¯åœ¨ThreadLocalç±»ä¸­ map.set(this, value); &#125; else &#123; // å¦åˆ™ï¼Œéœ€è¦ä¸ºå½“å‰çº¿ç¨‹åˆå§‹åŒ– ThreadLocalMapï¼Œå¹¶å­˜å‚¨é”®å€¼å¯¹ &lt;this, firstValue&gt; createMap(t, value); &#125;&#125;/** * è¿”å›å½“å‰çº¿ç¨‹ thread æŒæœ‰çš„ ThreadLocalMapå¯¹è±¡ */ThreadLocalMap getMap(Thread t) &#123; return t.threadLocals;&#125; Getæ–¹æ³• è°ƒç”¨ThreadLocalå¯¹è±¡.get() æ–¹å¼æ—¶ï¼Œå®é™…åœ¨è°ƒç”¨ThreadLocalMapå¯¹è±¡.getEntry(this) æ–¹æ³•ã€‚thisæ˜¯å½“å‰ThreadLocalå¯¹è±¡ã€‚ get æ–¹æ³•çš„ä¸»è¦æµç¨‹ä¸ºï¼š å…ˆè·å–åˆ°å½“å‰çº¿ç¨‹çš„å¼•ç”¨ è·å–å½“å‰çº¿ç¨‹å†…éƒ¨çš„ ThreadLocalMapå¯¹è±¡ å¦‚æœ map å­˜åœ¨ï¼Œåˆ™è·å–å½“å‰ ThreadLocal å¯¹åº”çš„ value å€¼ å¦‚æœ map ä¸å­˜åœ¨æˆ–è€…æ‰¾ä¸åˆ° value å€¼ï¼Œåˆ™è°ƒç”¨ setInitialValue() è¿›è¡Œåˆå§‹åŒ– 1234567891011121314151617181920212223/** * è¿”å›å½“å‰ ThreadLocal å¯¹è±¡å…³è”çš„å€¼ * * @return */public T get() &#123; // è¿”å›å½“å‰ ThreadLocal æ‰€åœ¨çš„çº¿ç¨‹ Thread t = Thread.currentThread(); // ä»çº¿ç¨‹ä¸­æ‹¿åˆ° ThreadLocalMap ThreadLocalMap map = getMap(t); if (map != null) &#123; // ä» map ä¸­æ‹¿åˆ° entry ThreadLocalMap.Entry e = map.getEntry(this); // å¦‚æœä¸ä¸ºç©ºï¼Œè¯»å–å½“å‰ ThreadLocal ä¸­ä¿å­˜çš„å€¼ if (e != null) &#123; @SuppressWarnings(&quot;unchecked&quot;) T result = (T) e.value; return result; &#125; &#125; // è‹¥ map ä¸ºç©ºï¼Œåˆ™å¯¹å½“å‰çº¿ç¨‹çš„ ThreadLocal è¿›è¡Œåˆå§‹åŒ–ï¼Œæœ€åè¿”å›å½“å‰çš„ ThreadLocal å¯¹è±¡å…³è”çš„åˆå€¼ï¼Œå³ value return setInitialValue();&#125; resize æ–¹æ³• å½“å‰çº¿ç¨‹çš„ ThreadLocalMap ä¸­çš„ ThreadLocal çš„ä¸ªæ•°è¶…è¿‡å®¹é‡é˜ˆå€¼æ—¶ï¼ŒThreadLocalMap å°±è¦å¼€å§‹æ‰©å®¹äº†ã€‚ 1// ç•¥ 7.ä¸ºä»€ä¹ˆThreadLocalé€ æˆå†…å­˜æ³„æ¼ï¼Ÿ ThreadLocalMap æ˜¯ ThreadLocal çš„é™æ€å†…éƒ¨ç±»ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹æœ‰å¤š ä¸ªThreadLocal æ—¶ï¼Œéœ€è¦ä¸€ä¸ªå®¹å™¨æ¥ç®¡ç†å¤šä¸ª ThreadLocalï¼ŒThreadLocalMap çš„ä½œç”¨å°±æ˜¯ç®¡ç†çº¿ç¨‹ä¸­å¤šä¸ª ThreadLocalã€‚ æºç ä¸­çœ‹åˆ° ThreadLocalMap å…¶å®å°±æ˜¯ä¸€ä¸ªç®€å•çš„ Map ç»“æ„ï¼š åº•å±‚æ˜¯æ•°ç»„Entry[] tableï¼Œæ•°ç»„çš„å…ƒç´ æ˜¯ Entryç±»ï¼šEntry çš„ä¸¤ä¸ªå±æ€§ï¼Œ key æ˜¯ ThreadLocalç±»å‹çš„å¼•ç”¨ï¼Œvalue æ˜¯ ThreadLocal çš„å€¼ã€‚ åŸå› ï¼šThreadLocalMapçš„keyä¸ºå¼±å¼•ç”¨ï¼ˆæœ‰ç”¨ä½†éå¿…éœ€ï¼Œä¸‹ä¸€æ¬¡GCä¼šè¢«å›æ”¶ï¼‰ï¼Œvalueä¸ºå¼ºå¼•ç”¨ï¼ˆGCè¿‡ç¨‹ä¸ä¼šè¢«å›æ”¶ï¼‰ï¼Œæœ‰å¯èƒ½é€ æˆkeyè¢«GCï¼Œvalueæ²¡è¢«GCï¼ŒThreadLocalMapä¸­å‡ºç°nullä¸ºkeyçš„Entryï¼Œäº§ç”Ÿå†…å­˜æ³„æ¼ï¼ˆè½¯å¼•ç”¨ï¼šæœ‰ç”¨ä½†éå¿…éœ€ï¼Œå†…å­˜æº¢å‡ºä¹‹å‰è¢«å›æ”¶ï¼‰ï¼› è§£å†³ï¼š è°ƒç”¨set()ã€get()å’Œremove()æ–¹æ³•æ—¶ï¼Œä¼šè‡ªåŠ¨æ¸…ç†æ‰keyä¸ºnullçš„è®°å½•ï¼Œä½†ä½¿ç”¨ThreadLocalæ–¹æ³•åæ‰‹åŠ¨remove()ã€‚ 8.ä»€ä¹ˆæ˜¯å¤šçº¿ç¨‹ä¸­çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Ÿ ä¸€ä¸ªçº¿ç¨‹è®©å‡ºå¤„ç†å™¨ä½¿ç”¨æƒï¼Œå°±æ˜¯â€œåˆ‡å‡ºâ€ï¼›å¦å¤–ä¸€ä¸ªçº¿ç¨‹è·å–å¤„ç†å™¨ä½¿ç”¨æƒï¼Œå°±æ˜¯â€œåˆ‡å…¥â€ã€‚åœ¨è¿™ä¸ªåˆ‡å…¥åˆ‡å‡ºçš„è¿‡ç¨‹ä¸­ï¼Œæ“ä½œç³»ç»Ÿä¼šä¿å­˜å’Œæ¢å¤ç›¸å…³çš„è¿›åº¦ä¿¡æ¯ï¼Œè¿™ä¸ªè¿›åº¦ä¿¡æ¯å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„â€œä¸Šä¸‹æ–‡â€ï¼Œä¸Šä¸‹æ–‡ä¸­ä¸€èˆ¬åŒ…å«äº†å¯„å­˜å™¨çš„å­˜å‚¨å†…å®¹ä»¥åŠç¨‹åºè®¡æ•°å™¨å­˜å‚¨çš„æŒ‡ä»¤å†…å®¹ã€‚ 9.è¯·é—®ä»€ä¹ˆæ˜¯æ­»é”(deadlock)? æ­»é”æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹ï¼ˆçº¿ç¨‹ï¼‰åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”±äºç«äº‰èµ„æºæˆ–è€…ç”±äºå½¼æ­¤é€šä¿¡è€Œé€ æˆçš„ä¸€ç§é˜»å¡çš„ç°è±¡ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚æ­¤æ—¶ç§°ç³»ç»Ÿå¤„äºæ­»é”çŠ¶æ€æˆ–ç³»ç»Ÿäº§ç”Ÿäº†æ­»é”ï¼Œè¿™äº›æ°¸è¿œåœ¨äº’ç›¸ç­‰å¾…çš„è¿›ç¨‹ï¼ˆçº¿ç¨‹ï¼‰ç§°ä¸ºæ­»é”è¿›ç¨‹ï¼ˆçº¿ç¨‹ï¼‰ã€‚ 10. JAVAä¸­å¦‚ä½•ç¡®ä¿Nä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®Nä¸ªèµ„æºï¼Œä½†åŒæ—¶åˆä¸å¯¼è‡´æ­»é”ï¼Ÿ æœ€ç®€å•æ–¹æ³•ï¼šæŒ‡å®šè·å–é”çš„é¡ºåºï¼Œå¹¶å¼ºåˆ¶çº¿ç¨‹æŒ‰ç…§æŒ‡å®šçš„é¡ºåºè·å–é”ã€‚ å› æ­¤ï¼Œå¦‚æœæ‰€æœ‰çš„çº¿ç¨‹éƒ½æ˜¯ä»¥åŒæ ·çš„é¡ºåºåŠ é”å’Œé‡Šæ”¾é”ï¼Œå°±ä¸ä¼šå‡ºç°æ­»é”äº†ã€‚æˆ–è€…é€šè¿‡ç ´åæ­»é”çš„å››ä¸ªæ¡ä»¶ï¼š äº’æ–¥ ï¼š ä¸å¯èƒ½ç ´åã€‚ ç ´åè¯·æ±‚å’Œä¿æŒæ¡ä»¶ï¼šè¿›ç¨‹å¿…é¡» ç­‰æ‰€æœ‰è¦è¯·æ±‚çš„èµ„æºéƒ½ç©ºé—²æ—¶æ‰èƒ½ç”³è¯·èµ„æºï¼Œ è¿™ç§æ–¹æ³•ä¼šä½¿èµ„æºæµªè´¹ä¸¥é‡ ã€‚å…è®¸è¿›ç¨‹è·å–åˆæœŸæ‰€éœ€èµ„æºåï¼Œä¾¿å¼€å§‹è¿è¡Œï¼Œè¿è¡Œè¿‡ç¨‹ä¸­å†é€æ­¥é‡Šæ”¾è‡ªå·±å æœ‰çš„èµ„æºã€‚ ç ´åä¸å¯æŠ¢å æ¡ä»¶ï¼š æ–¹æ³•ä»£ä»·å¤§ï¼Œå®ç°å¤æ‚ã€‚ ç ´åå¾ªåç­‰å¾…æ¡ä»¶ ï¼šå¯¹å„è¿›ç¨‹è¯·æ±‚èµ„æºçš„é¡ºåºåšä¸€ä¸ªè§„å®šï¼Œé¿å…ç›¸äº’ç­‰å¾…ã€‚è¿™ç§æ–¹æ³•å¯¹èµ„æºçš„åˆ©ç”¨ç‡æ¯”å‰ä¸¤ç§éƒ½é«˜ï¼Œä½†æ˜¯å‰æœŸè¦ä¸ºè®¾å¤‡æŒ‡å®šåºå·ï¼Œæ–°è®¾å¤‡åŠ å…¥ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå…¶æ¬¡å¯¹ç”¨æˆ·ç¼–ç¨‹ä¹Ÿæœ‰é™åˆ¶ã€‚","categories":[{"name":"æ ¡æ‹›ç¬”è®°","slug":"æ ¡æ‹›ç¬”è®°","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/"},{"name":"JAVA","slug":"æ ¡æ‹›ç¬”è®°/JAVA","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/JAVA/"}],"tags":[{"name":"JAVA","slug":"JAVA","permalink":"https://hwh.zone/tags/JAVA/"},{"name":"æ ¡æ‹›","slug":"æ ¡æ‹›","permalink":"https://hwh.zone/tags/%E6%A0%A1%E6%8B%9B/"}]},{"title":"æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰_Java_é›†åˆ","slug":"æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰_Java_é›†åˆ","date":"2021-11-26T11:59:26.560Z","updated":"2021-12-03T03:57:05.285Z","comments":true,"path":"p/21069/","link":"","permalink":"https://hwh.zone/p/21069/","excerpt":"","text":"æˆ‘çš„æ ¡æ‹›è®°å½•ï¼šæ ¡æ‹›ç¬”è®°ï¼ˆé›¶ï¼‰_å†™åœ¨å‰é¢ ï¼Œä»¥ä¸‹æ˜¯æ ¡æ‹›ç¬”è®°æ€»ç›®å½•ã€‚ å¤‡æ³¨ ç®—æ³•èƒ½åŠ›ï¼ˆâ€œåˆ·é¢˜â€ï¼‰ è¿™éƒ¨åˆ†å°±æ˜¯è€—æ—¶é—´å¤šç»ƒä¹ ï¼ŒLeetcode-Top100 æ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚ è¡¥å……ç»ƒä¹ ï¼šcodeTop è®¡ç®—æœºåŸºç¡€(ä¸Š)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_Javaå…¥é—¨ C++åç«¯åç»­æ›´æ–° æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é¢å¯¹å¯¹è±¡ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é›†åˆ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_å¤šçº¿ç¨‹ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é” æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_JVM è®¡ç®—æœºåŸºç¡€(ä¸‹)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆäºŒï¼‰__è®¡ç®—æœºåŸºç¡€_Linux&amp;Git æ ¡æ‹›ç¬”è®°ï¼ˆä¸‰ï¼‰__è®¡ç®—æœºåŸºç¡€_è®¡ç®—æœºç½‘ç»œ æ ¡æ‹›ç¬”è®°ï¼ˆå››ï¼‰__è®¡ç®—æœºåŸºç¡€_æ“ä½œç³»ç»Ÿ æ ¡æ‹›ç¬”è®°ï¼ˆäº”ï¼‰__è®¡ç®—æœºåŸºç¡€_MySQL æ ¡æ‹›ç¬”è®°ï¼ˆå…­ï¼‰__è®¡ç®—æœºåŸºç¡€_Redis æ ¡æ‹›ç¬”è®°ï¼ˆä¸ƒï¼‰__è®¡ç®—æœºåŸºç¡€_æ•°æ®ç»“æ„ æ ¡æ‹›ç¬”è®°ï¼ˆå…«ï¼‰__è®¡ç®—æœºåŸºç¡€_åœºæ™¯&amp;æ™ºåŠ›é¢˜ æ ¡æ‹›ç¬”è®°ï¼ˆä¹ï¼‰__è®¡ç®—æœºåŸºç¡€_ç›¸å…³è¡¥å…… é¡¹ç›®&amp;å®ä¹  ä¸»è¦æ˜¯æ€ä¹ˆå‡†å¤‡é¡¹ç›®ï¼Œåç»­æ›´æ–° 1.3 é›†åˆ 1.3.1 é›†åˆç±» 1.è¯·è¯´æ˜Javaé›†åˆç±»æ¡†æ¶çš„åŸºæœ¬æ¥å£æœ‰å“ªäº›ï¼Ÿ Collectionï¼šä»£è¡¨ä¸€ç»„å¯¹è±¡ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½æ˜¯å®ƒçš„å­å…ƒç´ ã€‚ Setï¼šä¸åŒ…å«é‡å¤å…ƒç´ çš„Collectionã€‚ Listï¼šæœ‰é¡ºåºçš„collectionï¼Œå¹¶ä¸”å¯ä»¥åŒ…å«é‡å¤å…ƒç´ ã€‚ Mapï¼šå¯ä»¥æŠŠé”®(key)æ˜ å°„åˆ°å€¼(value)çš„å¯¹è±¡ï¼Œé”®ä¸èƒ½é‡å¤ã€‚ 2.ï¼ˆè¡¥å……ï¼šä¸¾ä¾‹è¯´æ˜ï¼‰è¯´è¯´ä»€ä¹ˆæ˜¯fail-fastï¼Ÿ fail-fast æœºåˆ¶æ˜¯ Java é›†åˆï¼ˆCollectionï¼‰ä¸­çš„ä¸€ç§é”™è¯¯å¿«é€Ÿåé¦ˆæœºåˆ¶ã€‚å½“å¤šä¸ªçº¿ç¨‹å¯¹åŒä¸€ä¸ªé›†åˆçš„å†…å®¹è¿›è¡Œæ“ä½œæ—¶ï¼Œå°±å¯èƒ½ä¼šäº§ç”Ÿ fail-fast äº‹ä»¶ã€‚ ä¾‹å¦‚ï¼šå½“æŸä¸€ä¸ªçº¿ç¨‹ A é€šè¿‡ iterator å»éå†æŸé›†åˆçš„è¿‡ç¨‹ä¸­ï¼Œè‹¥è¯¥é›†åˆçš„å†…å®¹è¢«å…¶ä»–çº¿ç¨‹æ‰€æ”¹å˜äº†ï¼Œé‚£ä¹ˆçº¿ç¨‹ A è®¿é—®é›†åˆæ—¶ï¼Œå°±ä¼šæŠ›å‡º ConcurrentModifificationException å¼‚å¸¸ï¼Œäº§ç”Ÿ fail-fast äº‹ä»¶ã€‚è¿™é‡Œçš„æ“ä½œä¸»è¦æ˜¯æŒ‡ addã€remove å’Œ clearï¼Œå¯¹é›†åˆå…ƒç´ ä¸ªæ•°è¿›è¡Œä¿®æ”¹ã€‚ 3.è¯·è¯´æ˜Listã€Mapã€Setä¸‰ä¸ªæ¥å£åŒºåˆ†ï¼Ÿ é‡å¤å…ƒç´ ï¼šListä»¥ç‰¹å®šç´¢å¼•æ¥å­˜å–å…ƒç´ ï¼Œå¯ä»¥æœ‰é‡å¤å…ƒç´ ï¼›Mapä»¥é”®å€¼å¯¹æ˜ å°„ï¼Œä¸èƒ½æœ‰é‡å¤keyï¼›Setå…ƒç´ ä¸èƒ½é‡å¤ ç»§æ‰¿collectionï¼š Listã€Setç»§æ‰¿äºcollectionï¼›Mapå’Œå‰äºŒè€…æ˜æ˜¾åŒºåˆ†ï¼Œä¸ç»§æ‰¿collection å®ç°æ–¹å¼ï¼š Listæ˜¯çº¿æ€§ç»“æ„çš„å®¹å™¨ ï¼Œå…¸å‹å®ç°æœ‰ArrayList ã€LinkedListã€Vectorï¼› Mapã€Setéƒ½æœ‰ åŸºäºå“ˆå¸Œå­˜å‚¨å’Œæ’åºæ ‘ çš„ä¸¤ç§å®ç°ç‰ˆæœ¬ï¼Œå‰è€…å®ç°æœ‰ HashMapå’ŒHashtable ï¼Œåè€…æœ‰HashSet 4.è¯·è®²è®²ä½ æ‰€çŸ¥é“çš„å¸¸ç”¨é›†åˆç±»ä»¥åŠä¸»è¦æ–¹æ³•ï¼Ÿ æœ€å¸¸ç”¨çš„é›†åˆç±»æ˜¯List å’Œ Mapã€‚ Listï¼šå…¸å‹å®ç°æœ‰ArrayList ã€LinkedListã€Vector ï¼Œå¤§å°å¯å˜ï¼Œé€‚åˆç”¨äºæŒ‰æ•°å€¼ç´¢å¼•å…ƒç´ ç±»å‹ï¼› Mapï¼š å…¶ä¸­æ¯ä¸ªé”®æ˜ å°„åˆ°ä¸€ä¸ªå€¼ï¼Œå®ç°æœ‰ HashMapå’ŒHashtable ã€‚ 1.3.2 Map &amp; Set 1.è¯·ä½ ä»‹ç»ä¸€ä¸‹mapçš„åˆ†ç±»å’Œå¸¸è§çš„æƒ…å†µï¼Ÿ javaä¸ºæ•°æ®ç»“æ„ä¸­çš„æ˜ å°„å®šä¹‰äº†ä¸€ä¸ªæ¥å£java.util.Map ï¼Œ å®ƒæœ‰å››ä¸ªå®ç°ç±»,åˆ†åˆ«æ˜¯HashMapã€ Hashtableã€ LinkedHashMapã€ å’ŒTreeMap. Hashmap ï¼šæ ¹æ®é”®çš„HashCodeå€¼å­˜å‚¨æ•°æ®,æ ¹æ®é”®å¯ä»¥ç›´æ¥è·å–å®ƒçš„å€¼ï¼Œå…·æœ‰å¾ˆå¿«çš„è®¿é—®é€Ÿåº¦ã€‚ éå†ï¼šè®¿é—®å¿«ï¼Œéå†æ—¶å–å¾—çš„æ•°æ®éšæœº çº¿ç¨‹ï¼šä¸æ”¯æŒçº¿ç¨‹åŒæ­¥ï¼ˆä½†å¯ä»¥ç”¨Collectionsçš„synchronizedMap å®ç°åŒæ­¥ï¼‰ keyå’Œè®°å½•ï¼šHashMapå…è®¸é”®å’Œå€¼æ˜¯null Hashtable ï¼šå’ŒHashmapç±»ä¼¼ï¼Œæ˜¯å…¶å­ç±»ã€‚ä½†å…¶ï¼š çº¿ç¨‹ï¼š æ”¯æŒçº¿ç¨‹åŒæ­¥ï¼Œä¹Ÿå¯¼è‡´å†™å…¥æ¯”è¾ƒæ…¢ï¼ˆä¸€ä¸ªæ—¶å€™åªèƒ½ä¸€ä¸ªçº¿ç¨‹å†™å…¥ï¼‰ keyå’Œè®°å½•ï¼šä¸å…è®¸è®°å½•çš„é”®æˆ–è€…å€¼ä¸ºç©º ï¼› LinkedHashMap ï¼šHashMapçš„ä¸€ä¸ªå­ç±»ï¼Œä¿å­˜äº†è®°å½•æ’å…¥é¡ºåºï¼š éå†ï¼šéå†å…ˆå¾—åˆ°çš„è®°å½•æ˜¯å…ˆæ’å…¥ã€ä¸€èˆ¬æƒ…å†µæ¯”HashMapæ…¢ã€‚ TreeMap ï¼š å®ç°SortMapæ¥å£ï¼Œé»˜è®¤æ˜¯æŒ‰é”®å€¼çš„å‡åºæ’åºï¼Œ éå†ï¼šå½“ç”¨éå†TreeMapæ—¶ï¼Œå¾—åˆ°çš„è®°å½•æ˜¯æ’è¿‡åºçš„ çº¿ç¨‹ï¼šçº¿ç¨‹å®‰å…¨ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç”¨çš„æœ€å¤šçš„æ˜¯HashMap, åœ¨Map ä¸­æ’å…¥ã€åˆ é™¤å’Œå®šä½å…ƒç´ ï¼ŒHashMap æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚ä½†å¦‚æœæ‚¨è¦æŒ‰è‡ªç„¶é¡ºåºæˆ–è‡ªå®šä¹‰é¡ºåºéå†é”®ï¼Œé‚£ä¹ˆTreeMapä¼šæ›´å¥½ã€‚å¦‚æœéœ€è¦è¾“å‡ºçš„é¡ºåºå’Œè¾“å…¥çš„ç›¸åŒ,é‚£ä¹ˆç”¨LinkedHashMap å¯ä»¥å®ç°,å®ƒè¿˜å¯ä»¥æŒ‰è¯»å–é¡ºåºæ¥æ’åˆ—ã€‚ 1.1 TreeMapçš„åº•å±‚å®ç°ï¼Ÿ TreeMapå®ç°äº†SotredMapæ¥å£ï¼Œå®ƒæ˜¯æœ‰åºçš„é›†åˆã€‚è€Œä¸”æ˜¯ä¸€ä¸ªçº¢é»‘æ ‘ç»“æ„ï¼Œæ¯ä¸ªkey-valueéƒ½ä½œä¸ºä¸€ä¸ªçº¢é»‘æ ‘çš„èŠ‚ç‚¹ã€‚å¦‚æœåœ¨è°ƒç”¨TreeMapçš„æ„é€ å‡½æ•°æ—¶æ²¡æœ‰æŒ‡å®šæ¯”è¾ƒå™¨ï¼Œåˆ™æ ¹æ®keyæ‰§è¡Œè‡ªç„¶æ’åºã€‚è¿™ç‚¹ä¼šåœ¨æ¥ä¸‹æ¥çš„ä»£ç ä¸­åšè¯´æ˜ï¼Œå¦‚æœæŒ‡å®šäº†æ¯”è¾ƒå™¨åˆ™æŒ‰ç…§æ¯”è¾ƒå™¨æ¥è¿›è¡Œæ’åºã€‚ è‡ªç„¶æ’åºï¼šTreeMapçš„æ‰€æœ‰keyå¿…é¡»å®ç°Comparableæ¥å£ï¼Œæ‰€æœ‰çš„keyéƒ½æ˜¯åŒä¸€ä¸ªç±»çš„å¯¹è±¡ å®šåˆ¶æ’åºï¼šåˆ›å»ºTreeMapå¯¹è±¡ä¼ å…¥äº†ä¸€ä¸ªComparatorå¯¹è±¡ï¼Œè¯¥å¯¹è±¡è´Ÿè´£å¯¹TreeMapä¸­æ‰€æœ‰çš„keyè¿›è¡Œæ’åºï¼Œé‡‡ç”¨å®šåˆ¶æ’åºä¸è¦æ±‚Mapçš„keyå®ç°Comparableæ¥å£ã€‚ç­‰ä¸‹é¢åˆ†æåˆ°æ¯”è¾ƒæ–¹æ³•çš„æ—¶å€™åœ¨åˆ†æè¿™ä¸¤ç§æ¯”è¾ƒæœ‰ä½•ä¸åŒã€‚ 2.è¯·é—®HashMapå’ŒHashtableåŒºåˆ«ï¼Ÿ å…±åŒç‚¹ï¼šéƒ½å®ç°Mapæ¥å£ ä¸åŒç‚¹ï¼š å¯¹Null key å’ŒNull valueçš„æ”¯æŒï¼šHashMapå…è®¸é”®å’Œå€¼æ˜¯nullï¼Œè€ŒHashtableä¸å…è®¸é”®æˆ–è€…å€¼æ˜¯nullï¼› çº¿ç¨‹å®‰å…¨ï¼šHashtableæ˜¯åŒæ­¥çš„çº¿ç¨‹å®‰å…¨ï¼Œè€ŒHashMapä¸æ˜¯ï¼› åˆå§‹å®¹é‡å¤§å°å’Œæ¯æ¬¡æ‰©å……å®¹é‡å¤§å°ä¸åŒï¼š ï¼ˆ1ï¼‰åˆ›å»ºæ—¶å¦‚æœä¸æŒ‡å®šå®¹é‡åˆå§‹å€¼ï¼ŒHashtable é»˜è®¤çš„åˆå§‹å¤§å°ä¸º11ï¼Œä¹‹åæ¯æ¬¡æ‰©å……ï¼Œå®¹é‡å˜ä¸ºåŸæ¥çš„2n+1ã€‚HashMap é»˜è®¤çš„åˆå§‹åŒ–å¤§å°ä¸º16ï¼Œä¹‹åæ¯æ¬¡æ‰©å……ï¼Œå®¹é‡å˜ä¸ºåŸæ¥çš„2å€ ï¼›ï¼ˆ2ï¼‰åˆ›å»ºæ—¶å¦‚æœç»™å®šäº†å®¹é‡åˆå§‹å€¼ï¼Œé‚£ä¹ˆ Hashtable ä¼šç›´æ¥ä½¿ç”¨ä½ ç»™å®šçš„å¤§å°ï¼Œè€Œ HashMap ä¼šå°†å…¶æ‰©å……ä¸º2çš„å¹‚æ¬¡æ–¹å¤§å°ï¼Œä¹Ÿå°±æ˜¯è¯´ HashMap æ€»æ˜¯ä½¿ç”¨2çš„å¹‚ä½œä¸ºå“ˆå¸Œè¡¨çš„å¤§å°ï¼› åº•å±‚æ•°æ®ç»“æ„ï¼š JDK1.8 ä»¥åçš„ HashMap åœ¨è§£å†³å“ˆå¸Œå†²çªæ—¶æœ‰äº†è¾ƒå¤§çš„å˜åŒ–ï¼Œå½“é“¾è¡¨â»“åº¦å¤§äºé˜ˆå€¼ï¼ˆé»˜è®¤ä¸º8ï¼‰æ—¶ï¼Œå°†é“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œä»¥å‡å°‘æœç´¢æ—¶é—´ã€‚Hashtable æ²¡æœ‰è½¬æ¢ä¸ºçº¢é»‘æ ‘è¿™æ ·çš„æœºåˆ¶ï¼› ç»§æ‰¿çˆ¶ç±»ï¼šHashMapæ˜¯ç»§æ‰¿è‡ªAbstractMapç±»ï¼Œè€ŒHashtableæ˜¯ç»§æ‰¿è‡ªDictionaryç±»ã€‚ 3.è¯·é—®Mapæ¥å£å®ç°ï¼šHashMapã€Hashtableå’ŒConcurrentHashMapåŒºåˆ«ï¼Ÿ éƒ½æ˜¯key-valueå­˜å‚¨å½¢å¼ã€‚ åº•å±‚æ•°æ®ç»“æ„ï¼šHashMapä¸ConcurrentHashMapåº•å±‚æ•°æ®ç»“æ„ç›¸ä¼¼ï¼ˆæ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ï¼‰ï¼ŒHashtableæ²¡æœ‰çº¢é»‘æ ‘ï¼› çº¿ç¨‹å®‰å…¨ï¼šHashtableçš„synchronizedä¿®é¥°åœ¨æ–¹æ³•ï¼Œæ˜¯å¯¹è±¡çº§çš„åŠ é”ï¼ŒåŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¯¹æ•°æ®è¿›è¡Œæ“ä½œï¼›ConcurrentHashMapä½¿ç”¨äº†ä¿®é¥°å…·ä½“å¯¹è±¡çš„synchronizedï¼ˆé”ä¸€ä¸ªæ¡¶ï¼‰å’ŒCASæœºåˆ¶ï¼Œå®ç°äº†æ›´ç»†ç²’åº¦çš„é”ï¼› åœ°å€è®¡ç®—ï¼š HashMapä½¿ç”¨key.hashCode() ^ (key.hashCode() &gt;&gt;&gt; 16)ï¼›- Hashtableä½¿ç”¨(key.hashCode() &amp; 0x7fffffff) % tab.length() ConcurrentHashMapä½¿ç”¨(key.hashCode() ^ (key.hashCode() &gt;&gt;&gt; 16)) &amp; 0x7fffffffã€‚ 4.è¯´ä¸€è¯´çº¢é»‘æ ‘ç‰¹å¾ï¼Ÿ ç´§æ¥ä¸Šä¸ªé—®é¢˜ï¼Œé¢è¯•å®˜å¾ˆæœ‰å¯èƒ½ä¼šé—®çº¢é»‘æ ‘ã€‚ æ¯ä¸ªèŠ‚ç‚¹æ˜¯é»‘è‰²æ˜¯çº¢è‰² æ ¹èŠ‚ç‚¹å’Œå¶å­èŠ‚ç‚¹æ˜¯é»‘è‰² çº¢è‰²èŠ‚ç‚¹ä¸èƒ½ç›¸é‚» ä»ä¸€ä¸ªèŠ‚ç‚¹åˆ°å­å­™èŠ‚ç‚¹è·¯å¾„ä¸Šç›¸åŒæ•°ç›®çš„é»‘èŠ‚ç‚¹ 5. hashmapçš„åŸºæœ¬åŸç†ï¼Œæ‰©å®¹æ–¹å¼ï¼ˆrehashï¼‰ï¼Ÿ å¾ˆæ£’çš„ä¸€ç¯‡æ–‡ç« ï¼šhttps://www.jianshu.com/p/dde9b12343c1 æ›´æ£’çš„ä¸€ç¯‡æ–‡ç« ï¼šhttps://zhuanlan.zhihu.com/p/81587796 HashMapå®šä¹‰ HashMapç»§æ‰¿äº†Mapç«¯å£ï¼Œå®ç°äº†Serializableç­‰æ¥å£ã€‚å­˜å‚¨HashMapçš„æ˜¯ä¸€ä¸ªEntry[]æ•°ç»„ï¼ŒEntryæ˜¯ä¸€ä¸ªå•å‘é“¾è¡¨ï¼š æ‰€ä»¥æˆ‘ä»¬è¯´HashMapå®ç°çš„æ˜¯ä¸€ä¸ªæ•°ç»„+é“¾è¡¨ ã€‚ 1234public class HashMap&lt;K,V&gt; extends AbstractMap&lt;K,V&gt;implements Map&lt;K,V&gt;, Cloneable, Serializable&#123; transient Entry&lt;K,V&gt;[] table; Entryç±» Entryåœ¨HashMapä¸­å®ç°ä¸ºä¸€ä¸ªé™æ€å†…éƒ¨ç±»ï¼Œå°è£…äº†keyå’Œvalueï¼Œè¿˜æœ‰ç±»å‹ä¸ºEntryçš„nextæŒ‡å‘ä¸‹ä¸€ä¸ªEntryå¼•ç”¨ã€‚ 12345static class Entry&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; &#123; final K key; V value; Entry&lt;K,V&gt; next; int hash; å›¾è§£HashMap æ ¹æ®å‰é¢æ‰€çŸ¥ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°HashMapçš„å®ç°å¦‚ä¸‹ï¼ˆé»˜è®¤åˆå§‹åŒ–å®¹é‡ä¸º16ï¼‰ï¼š putæ–¹æ³•å®ç° è¾“å…¥çš„keyæ ¹æ®hash(key) è®¡ç®—å‡ºhashå€¼ 123456public V put(K key, V value) &#123; // å¯¹keyä¸ºnullçš„å¤„ç† if (key == null) return putForNullKey(value); // æ ¹æ®keyç®—å‡ºhashå€¼ int hash = hash(key); hashæ–¹æ³•å¦‚ä¸‹ï¼ˆJDK1.8ç‰ˆæœ¬ï¼‰ ä¸‹é¢è¿™æ®µä»£ç ä¹Ÿå«æ‰°åŠ¨å‡½æ•° ï¼Œå‚è€ƒï¼šJDK æºç ä¸­ HashMap çš„ hash æ–¹æ³•åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ æ··åˆåŸå§‹å“ˆå¸Œç çš„é«˜ä½å’Œä½ä½ï¼Œä»¥æ­¤æ¥åŠ å¤§ä½ä½çš„éšæœºæ€§ ã€‚è€Œä¸”æ··åˆåçš„ä½ä½æºæ‚äº†é«˜ä½çš„éƒ¨åˆ†ç‰¹å¾ï¼Œè¿™æ ·é«˜ä½çš„ä¿¡æ¯ä¹Ÿè¢«å˜ç›¸ä¿ç•™ä¸‹æ¥ã€‚ 1234567static final int hash(Object key) &#123;int h;// key.hashCode()ï¼šè¿”å›æ•£åˆ—å€¼ä¹Ÿå°±æ˜¯hashcode// ^ ï¼šæŒ‰ä½å¼‚æˆ–// &gt;&gt;&gt;â½†ç¬¦å·å³ç§»ï¼Œå¿½ç•¥ç¬¦å·ä½ï¼Œç©ºä½éƒ½ä»¥0è¡¥â»¬return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16);&#125; ç›¸â½äº JDK1.8 çš„ hash æ–¹æ³• ï¼ŒJDK 1.7 çš„ hash æ–¹æ³•çš„æ€§èƒ½ä¼šç¨å·®â¼€ç‚¹ç‚¹ï¼Œå› ä¸ºæ¯•ç«Ÿæ‰°åŠ¨äº† 4 æ¬¡ã€‚ Objectç±»HashCodeå®ç° è¯¦ç»†æºç åˆ†æå‚è€ƒ ï¼šJava Object.hashCode()è¿”å›çš„æ˜¯å¯¹è±¡å†…å­˜åœ°å€ï¼Ÿ JDK8 çš„é»˜è®¤hashCodeçš„è®¡ç®—æ–¹æ³•æ˜¯é€šè¿‡å’Œå½“å‰çº¿ç¨‹æœ‰å…³çš„ä¸€ä¸ªéšæœºæ•°+ä¸‰ä¸ªç¡®å®šå€¼ï¼Œè¿ç”¨Marsagliaâ€™s xorshift schemeéšæœºæ•°ç®—æ³•å¾—åˆ°çš„ä¸€ä¸ªéšæœºæ•° ã€‚ å¯ä»¥é€šè¿‡åœ¨JVMå¯åŠ¨å‚æ•°ä¸­æ·»åŠ -XX:hashCode=4ï¼Œæ”¹å˜é»˜è®¤çš„hashCodeè®¡ç®—æ–¹å¼ï¼š hashCode == 0 ï¼šè¿”å›ä¸€ä¸ªPark-Millerä¼ªéšæœºæ•°ç”Ÿæˆå™¨ç”Ÿæˆçš„éšæœºæ•° ï¼ŒOpenJdk 6 &amp;7çš„é»˜è®¤å®ç°ï¼› hashCode == 1ï¼šæ­¤ç±»æ–¹æ¡ˆå°†å¯¹è±¡çš„å†…å­˜åœ°å€ï¼Œåšç§»ä½è¿ç®—åä¸ä¸€ä¸ªéšæœºæ•°è¿›è¡Œå¼‚æˆ–å¾—åˆ°ç»“æœ ï¼› hashCode == 2ï¼šæ­¤ç±»æ–¹æ¡ˆè¿”å›å›ºå®šçš„1ï¼› hashCode == 3ï¼šæ­¤ç±»æ–¹æ¡ˆè¿”å›ä¸€ä¸ªè‡ªå¢åºåˆ—çš„å½“å‰å€¼ï¼› hashCode == 4ï¼šæ­¤ç±»æ–¹æ¡ˆè¿”å›å½“å‰å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚ æ ¹æ®indexFor(hash, table.length) ï¼Œè®¡ç®—åœ¨tableä¸­ä¸‹æ ‡ key.hashcodeå¾—åˆ°hash â†’ ç»è¿‡é«˜ä½16å¼‚æˆ–æ‰°åŠ¨å¾—åˆ°è¡Œhash â†’ indexForè®¡ç®—ä¸‹æ ‡ indexFor() å®é™…å°±æ˜¯hashå€¼å–ä½™ï¼šhash%(table.lenght-1) ã€‚ä½†åœ¨å…·ä½“å®ç°ä¸­é€šè¿‡ä½è¿ç®—å®ç°ï¼š 123static int indexFor(int h, int length) &#123; return h &amp; (length-1); &#125; è®¡ç®—åŸç†ã€‚ é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œè¿™ä¹Ÿæ­£å¥½è§£é‡Šäº†ä¸ºä»€ä¹ˆHashMapçš„æ•°ç»„é•¿åº¦è¦å–2çš„æ•´æ¬¡å¹‚ã€‚å› ä¸ºè¿™æ ·ï¼ˆæ•°ç»„é•¿åº¦-1ï¼‰æ­£å¥½ç›¸å½“äºä¸€ä¸ªä½ä½æ©ç ã€‚â€œä¸â€æ“ä½œçš„ç»“æœå°±æ˜¯æ•£åˆ—å€¼çš„é«˜ä½å…¨éƒ¨å½’é›¶ï¼Œåªä¿ç•™ä½ä½å€¼ï¼Œç”¨æ¥åšæ•°ç»„ä¸‹æ ‡è®¿é—®ã€‚ä»¥åˆå§‹é•¿åº¦16ä¸ºä¾‹ï¼Œ16-1=15ã€‚2è¿›åˆ¶è¡¨ç¤ºæ˜¯00000000 00000000 00001111ã€‚å’ŒæŸæ•£åˆ—å€¼åšâ€œä¸â€æ“ä½œå¦‚ä¸‹ï¼Œç»“æœå°±æ˜¯æˆªå–äº†æœ€ä½çš„å››ä½å€¼ã€‚ 1234 10100101 11000100 00100101&amp; 00000000 00000000 00001111 ï¼ˆ16ï¼‰------------------------------------------ 00000000 00000000 000000101 ä½è¿ç®—è¦æ±‚length ä¸€å®šæ˜¯å¶æ•°ã€‚length-1åˆ™ä¸€å®šæ˜¯å¥‡æ•°ã€‚ è¿™æ ·h &amp; (length-1)è¿›è¡Œä½è¿ç®—å‡ºç°çš„ç»“æœå¯å¥‡å¯å¶ï¼Œä¸ä¼šä¸€ç›´æ˜¯å¶æ•°ï¼Œæµªè´¹å¥‡æ•°ç©ºé—´ã€‚è€Œlengthä¸º2çš„å¹‚æ¬¡ï¼Œå¯ä»¥ä¿è¯lengthä¸€å®šæ˜¯å¶æ•°ï¼Œè¿™ä¹Ÿæ˜¯æ‰©å®¹ä¸ºä»€ä¹ˆè¦æ±‚ä¸€å®šæ˜¯2çš„å¹‚æ¬¡ã€‚ éå†tableä¸­ä¸‹æ ‡ä¸ºiçš„Entryå•å‘é“¾è¡¨ï¼Œæ‰¾æ˜¯å¦æœ‰ç›¸åŒçš„keyå·²ç»åœ¨HashMapä¸­ï¼Œå¦‚æœæœ‰ï¼Œå°±æ›¿æ¢valueä¸ºæœ€æ–°çš„å€¼ï¼›æ²¡æœ‰å°±ç›´æ¥æ’å…¥ã€‚æ‰€ä»¥HashMapä¸­åªèƒ½å­˜å‚¨å”¯ä¸€çš„keyã€‚ 1234567891011int i = indexFor(hash, table.length); for (Entry&lt;K,V&gt; e = table[i]; e != null; e = e.next) &#123; Object k; // å…ˆåˆ¤æ–­hashå€¼æ˜¯å¦ä¸€æ ·ï¼Œå¦‚æœä¸€æ ·ï¼Œå†åˆ¤æ–­keyæ˜¯å¦ä¸€æ · if (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) &#123; V oldValue = e.value; e.value = value; e.recordAccess(this); return oldValue; &#125; &#125; å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡putä¸Šé¢forå¾ªç¯ä¸ä¼šæ‰§è¡Œï¼Œè€Œæ˜¯addEntryæ–¹æ³•ç›´æ¥æŠŠkeyå’Œvalueå°è£…æˆEntryï¼Œç„¶ååŠ å…¥åˆ°tableä¸­çš„å®ç°ã€‚ 123modCount++;addEntry(hash, key, value, i);return null; è¿™æ¶‰åŠåˆ°HashMapçš„æ‰©å®¹æœºåˆ¶ã€‚ æ‰©å®¹æœºåˆ¶ å½“HashMapä¸­å­˜å‚¨çš„å…ƒç´ ä¸ªæ•°è¾¾åˆ°æ‰©å®¹çš„é˜€å€¼ ï¼Œé‚£å¦‚ä½•è¿›è¡Œæ‰©å®¹ï¼Ÿ âš ï¸ åœ¨jdk1.8ç‰ˆæœ¬ä»¥åï¼Œå½“é“¾è¡¨é•¿åº¦å¤§äºé˜ˆå€¼ï¼ˆé»˜è®¤ä¸º8ï¼‰æ—¶ï¼Œå°†é“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œä»¥å‡å°‘æœç´¢æ—¶é—´ã€‚ æˆ‘ä»¬å†æ¥çœ‹çœ‹addEntryæ–¹æ³•ä¸­çš„æ‰©å®¹ç›¸å…³ä»£ç ï¼š æ‰©å®¹å°±æ˜¯é€šè¿‡resize()æ–¹æ³•åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸ºåŸæ¥2å€çš„æ–°table ï¼› resize()æ–¹æ³•å†…éƒ¨é€šè¿‡éå†çš„æ–¹å¼ï¼Œå°†è€tableçš„æ•°æ®ï¼Œé‡æ–°è®¡ç®—hashå¹¶å­˜å‚¨åˆ°æ–°tableçš„é€‚å½“ä½ç½®ï¼Œæœ€åä½¿ç”¨æ–°çš„tableï¼Œå¹¶é‡æ–°è®¡HashMapçš„æ‰©å®¹é˜€å€¼ã€‚ 12345678910111213141516 void resize(int newCapacity) &#123; //ä¼ å…¥æ–°çš„å®¹é‡ Entry[] oldTable = table; //å¼•ç”¨æ‰©å®¹å‰çš„Entryæ•°ç»„ int oldCapacity = oldTable.length; if (oldCapacity == MAXIMUM_CAPACITY) &#123; //æ‰©å®¹å‰çš„æ•°ç»„å¤§å°å¦‚æœå·²ç»è¾¾åˆ°æœ€å¤§(2^30)äº† threshold = Integer.MAX_VALUE; //ä¿®æ”¹é˜ˆå€¼ä¸ºintçš„æœ€å¤§å€¼(2^31-1)ï¼Œè¿™æ ·ä»¥åå°±ä¸ä¼šæ‰©å®¹äº† return; &#125; //åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„Entryæ•°ç»„ Entry[] newTable = new Entry[newCapacity]; //ï¼ï¼å°†æ•°æ®è½¬ç§»åˆ°æ–°çš„Entryæ•°ç»„é‡Œ transfer(newTable); //HashMapçš„tableå±æ€§å¼•ç”¨æ–°çš„Entryæ•°ç»„ table = newTable; //ä¿®æ”¹é˜ˆå€¼ threshold = (int)(newCapacity * loadFactor);13 &#125; transfer()æ–¹æ³•å°†åŸæœ‰Entryæ•°ç»„çš„å…ƒç´ æ‹·è´åˆ°æ–°çš„Entryæ•°ç»„é‡Œï¼š 12345678910111213141516171819void transfer(Entry[] newTable) &#123; //srcå¼•ç”¨äº†æ—§çš„Entryæ•°ç»„ Entry[] src = table; int newCapacity = newTable.length; for (int j = 0; j &lt; src.length; j++) &#123; //éå†æ—§çš„Entryæ•°ç»„ Entry&lt;K,V&gt; e = src[j]; //å–å¾—æ—§Entryæ•°ç»„çš„æ¯ä¸ªå…ƒç´  if (e != null) &#123; src[j] = null;//é‡Šæ”¾æ—§Entryæ•°ç»„çš„å¯¹è±¡å¼•ç”¨ï¼ˆforå¾ªç¯åï¼Œæ—§çš„Entryæ•°ç»„ä¸å†å¼•ç”¨ä»»ä½•å¯¹è±¡ï¼‰ do &#123; Entry&lt;K,V&gt; next = e.next; //ï¼ï¼é‡æ–°è®¡ç®—æ¯ä¸ªå…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä½ç½® int i = indexFor(e.hash, newCapacity); e.next = newTable[i]; //æ ‡è®°[1] newTable[i] = e; //å°†å…ƒç´ æ”¾åœ¨æ•°ç»„ä¸Š e = next; //è®¿é—®ä¸‹ä¸€ä¸ªEntryé“¾ä¸Šå…ƒç´  &#125; while (e != null); &#125; &#125; &#125; newTable[i]çš„å¼•ç”¨èµ‹ç»™äº†e.nextï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨äº†å•é“¾è¡¨çš„å¤´æ’å…¥æ–¹å¼ ã€‚ä¸‹æ¥çš„ä¸‰ä¸ªæ­¥éª¤æ˜¯å“ˆå¸Œæ¡¶æ•°ç»„ resizeæˆ4ï¼Œç„¶åæ‰€æœ‰çš„Nodeé‡æ–°rehashçš„è¿‡ç¨‹ã€‚ getæ–¹æ³•å®ç° ç”¨keyçš„hashå€¼ç®—å‡ºkeyå¯¹åº”çš„Entryæ‰€åœ¨é“¾è¡¨åœ¨åœ¨tableçš„ä¸‹æ ‡ï¼Œç„¶åéå†ä¸‹æ ‡å³å¯ã€‚ 5.1 ä¸ºä»€ä¹ˆHashMapé»˜è®¤é“¾è¡¨é•¿åº¦è¶…è¿‡8è½¬ä¸ºçº¢é»‘æ ‘ï¼Œè€Œä¸æ˜¯6ã€7æˆ–9ï¼Ÿ åœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œé“¾è¡¨é•¿åº¦ç¬¦åˆæ³Šæ¾åˆ†å¸ƒï¼Œå„ä¸ªé•¿åº¦çš„å‘½ä¸­æ¦‚ç‡ä¾æ¬¡é€’å‡ï¼Œå½“é•¿åº¦ä¸º 8 çš„æ—¶å€™ï¼Œæ¦‚ç‡ä»…ä¸º 0.00000006ã€‚æºç ä¸­æ³¨é‡Šå¦‚ä¸‹ï¼š 123456789100: 0.606530661: 0.303265332: 0.075816333: 0.012636064: 0.001579525: 0.000157956: 0.000013167: 0.000000948: 0.00000006more: less than 1 in ten million è¿™æ˜¯ä¸€ä¸ªå°äºåƒä¸‡åˆ†ä¹‹ä¸€çš„æ¦‚ç‡ï¼Œé€šå¸¸æˆ‘ä»¬çš„ Map é‡Œé¢æ˜¯ä¸ä¼šå­˜å‚¨è¿™ä¹ˆå¤šçš„æ•°æ®çš„ï¼Œæ‰€ä»¥é€šå¸¸æƒ…å†µä¸‹ï¼Œå¹¶ä¸ä¼šå‘ç”Ÿä»é“¾è¡¨å‘çº¢é»‘æ ‘çš„è½¬æ¢ã€‚ ç‰¹åˆ«çš„ï¼Œé»˜è®¤æ˜¯é“¾è¡¨é•¿åº¦è¾¾åˆ° 8 å°±è½¬æˆçº¢é»‘æ ‘ï¼Œè€Œå½“é•¿åº¦é™åˆ° 6 å°±è½¬æ¢å›å»ï¼Œè¿™ä½“ç°äº†æ—¶é—´å’Œç©ºé—´å¹³è¡¡çš„æ€æƒ³ã€‚é•¿åº¦è¾ƒå°æ—¶ï¼Œä½¿ç”¨é“¾è¡¨ç©ºé—´å ç”¨å°‘ï¼Œæ—¶é—´ä¹Ÿä¸ä¼šé•¿ï¼ˆå› ä¸ºé“¾è¡¨çŸ­ï¼‰ã€‚ 5.2 HashMap å¤šçº¿ç¨‹æ“ä½œå¯¼è‡´æ­»å¾ªç¯é—®é¢˜ï¼Ÿ æ€»ç»“ï¼š HashMapä¹‹æ‰€ä»¥åœ¨å¹¶å‘ä¸‹çš„æ‰©å®¹é€ æˆæ­»å¾ªç¯ï¼Œæ˜¯å› ä¸ºï¼Œå¤šä¸ªçº¿ç¨‹å¹¶å‘è¿›è¡Œæ—¶ï¼Œå› ä¸ºä¸€ä¸ªçº¿ç¨‹å…ˆæœŸå®Œæˆäº†æ‰©å®¹ï¼Œå°†åŸçš„é“¾è¡¨é‡æ–°æ•£åˆ—åˆ°è‡ªå·±çš„è¡¨ä¸­ï¼Œå¹¶ä¸”é“¾è¡¨å˜æˆäº†å€’åºï¼Œåä¸€ä¸ªçº¿ç¨‹å†æ‰©å®¹æ—¶ï¼Œåˆè¿›è¡Œè‡ªå·±çš„æ•£åˆ—ï¼Œå†æ¬¡å°†å€’åºé“¾è¡¨å˜ä¸ºæ­£åºé“¾è¡¨ï¼Œäºæ˜¯å½¢æˆäº†ä¸€ä¸ªç¯å½¢é“¾è¡¨ã€‚ 12345678910111213141516171819void transfer(Entry[] newTable) &#123; //srcå¼•ç”¨äº†æ—§çš„Entryæ•°ç»„ Entry[] src = table; int newCapacity = newTable.length; for (int j = 0; j &lt; src.length; j++) &#123; //éå†æ—§çš„Entryæ•°ç»„ Entry&lt;K,V&gt; e = src[j]; //å–å¾—æ—§Entryæ•°ç»„çš„æ¯ä¸ªå…ƒç´  if (e != null) &#123; src[j] = null; do &#123; Entry&lt;K,V&gt; next = e.next; //ï¼ï¼é‡æ–°è®¡ç®—æ¯ä¸ªå…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä½ç½® int i = indexFor(e.hash, newCapacity); e.next = newTable[i]; //æ ‡è®°[1] newTable[i] = e; //å°†å…ƒç´ æ”¾åœ¨æ•°ç»„ä¸Š e = next; //è®¿é—®ä¸‹ä¸€ä¸ªEntryé“¾ä¸Šçš„å…ƒç´  &#125; while (e != null); &#125; &#125; &#125; mapåˆå§‹åŒ–ä¸ºä¸€ä¸ªé•¿åº¦ä¸º2çš„æ•°ç»„ï¼ŒloadFactor=0.75ï¼Œthreshold=2*0.75=1ï¼Œä¹Ÿå°±æ˜¯è¯´å½“putç¬¬äºŒä¸ªkeyçš„æ—¶å€™ï¼Œmapå°±éœ€è¦è¿›è¡Œresizeã€‚ è®¾ç½®æ–­ç‚¹è®©çº¿ç¨‹1å’Œçº¿ç¨‹2åŒæ—¶debugåˆ°transferæ–¹æ³•çš„é¦–è¡Œã€‚æ³¨æ„æ­¤æ—¶ä¸¤ä¸ªçº¿ç¨‹å·²ç»æˆåŠŸæ·»åŠ æ•°æ®ã€‚æ”¾å¼€thread1çš„æ–­ç‚¹è‡³transferæ–¹æ³•çš„â€œEntry next = e.next;â€ è¿™ä¸€è¡Œï¼›ç„¶åæ”¾å¼€çº¿ç¨‹2çš„çš„æ–­ç‚¹ï¼Œè®©çº¿ç¨‹2è¿›è¡Œresizeã€‚ç»“æœå¦‚ä¸‹å›¾ã€‚ æ³¨æ„ï¼ŒThread1çš„ e æŒ‡å‘äº†key(3)ï¼Œè€ŒnextæŒ‡å‘äº†key(7)ï¼Œå…¶åœ¨çº¿ç¨‹äºŒrehashåï¼ŒæŒ‡å‘äº†çº¿ç¨‹äºŒé‡ç»„åçš„æ–°é“¾è¡¨ã€‚ çº¿ç¨‹ä¸€è¢«è°ƒåº¦å›æ¥æ‰§è¡Œï¼Œå…ˆæ˜¯æ‰§è¡Œ newTalbe[i] = eï¼Œ ç„¶åæ˜¯e = nextï¼Œå¯¼è‡´äº†eæŒ‡å‘äº†key(7)ï¼Œè€Œä¸‹ä¸€æ¬¡å¾ªç¯çš„next = e.nextå¯¼è‡´äº†nextæŒ‡å‘äº†key(3)ã€‚ e.next = newTable[i] å¯¼è‡´ key(3).next æŒ‡å‘äº† key(7)ã€‚æ³¨æ„ï¼šæ­¤æ—¶çš„key(7).next å·²ç»æŒ‡å‘äº†key(3)ï¼Œ ç¯å½¢é“¾è¡¨å°±è¿™æ ·å‡ºç°äº†ã€‚ 5.3 è¯´è¯´HashMapçš„putæ–¹æ³•ï¼Ÿ æ ¹æ®keyå€¼è®¡ç®—åœ¨æ•°ç»„ä¸­çš„ä½ç½®ï¼š å¦‚æœå®šä½åˆ°çš„æ•°ç»„ä½ç½®æ²¡æœ‰å…ƒç´  å°±ç›´æ¥æ’å…¥ï¼› å¦‚æœå®šä½åˆ°çš„æ•°ç»„ä½ç½®æœ‰å…ƒç´ ï¼Œéå†ä»¥è¿™ä¸ªå…ƒç´ ä¸ºå¤´ç»“ç‚¹çš„é“¾è¡¨ï¼Œä¾æ¬¡å’Œæ’å…¥çš„ key æ¯”è¾ƒï¼Œå¦‚æœ hashå€¼&amp;equalså¯¹è±¡ç›¸åŒå°±ç›´æ¥è¦†ç›–ï¼Œä¸åŒå°±é‡‡ç”¨å¤´æ’æ³•æ’å…¥å…ƒç´ ã€‚ 123456789101112//table[i]çš„ä½ç½®å·²ç»å­˜åœ¨å…ƒç´ ï¼Œéå†é“¾è¡¨for (Entry&lt;K,V&gt; e = table[i]; e != null; e = e.next) &#123; Object k; //è°ƒç”¨ equals æ–¹æ³•åˆ¤æ–­keyæ˜¯å¦ç›¸ç­‰ï¼Œè‹¥ç›¸ç­‰ï¼Œè¯¥keyå¯¹åº”çš„é”®å€¼å¯¹å·²ç»å­˜åœ¨ï¼Œç”¨æ–°çš„valueå–ä»£æ—§çš„value if (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) &#123; V oldValue = e.value; e.value = value; e.recordAccess(this); return oldValue; &#125; &#125; 5.4 è¯´è¯´HashMapçš„getæ–¹æ³•ï¼Ÿ æ ¹æ®keyå€¼è®¡ç®—åœ¨æ•°ç»„ä¸­çš„ä½ç½®ï¼š éå†é“¾è¡¨æˆ–è€…åœ¨çº¢é»‘æ ‘ï¼Œæ¯”è¾ƒkeyæ¥è·å–value 5.5 ã€ç™¾åº¦ã€‘rehashæ‰©å®¹æ—¶æœºï¼Ÿåœ¨æ’å…¥å‰è¿˜æ˜¯æ’å…¥åï¼Ÿ rehashè¿‡ç¨‹åœ¨putå‡½æ•°ä¸­ï¼Œå…¶å¤§è‡´æ‰©å®¹æ—¶æœºå¦‚ä¸‹ï¼š è®¡ç®—hashï¼Œå®šä½åˆ°æ¡¶ï¼›ä¸”éå†æ¡¶å¤–æŒ‚é“¾è¡¨ï¼Œå¦‚æœæœ‰ç›¸åŒkeyåˆ™è¦†ç›–ï¼› 123456789101112131415161718public V put(K key, V value) &#123; if (key == null) // ã€ç™¾åº¦ã€‘æ€ä¹ˆå¤„ç†keyæˆ–valueä¸ºNULLçš„æƒ…å†µï¼Ÿ return putForNullKey(value); int hash = hash(key);//è®¡ç®—é”®çš„hashå€¼ int i = indexFor(hash, table.length);//é€šè¿‡hashå€¼å¯¹åº”åˆ°æ¡¶ä½ç½® for (Entry&lt;K,V&gt; e = table[i]; e != null; e = e.next) &#123;//é¡ºåºéå†æ¡¶å¤–æŒ‚çš„å•é“¾è¡¨ Object k; if (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) &#123;/ V oldValue = e.value; e.value = value; e.recordAccess(this); return oldValue; &#125; &#125; modCount++; addEntry(hash, key, value, i);//éå†å•é“¾è¡¨å®Œæ¯•ï¼Œæ²¡æœ‰æ‰¾åˆ°ä¸é”®ç›¸å¯¹çš„Entryï¼Œéœ€æ–°å»ºä¸€ä¸ªEntry return null; &#125; ã€å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç›¸åŒkeyï¼Œè¯´æ˜è¦æ’å…¥ä¸€ä¸ªæ–°entryã€‘ ï¼Œæ‰§è¡ŒaddEntryï¼Œæ’å…¥å‰å…ˆéªŒè¯ä¸‹æ˜¯å¦æ‰©å®¹ï¼› 123456789101112131415void addEntry(int hash, K key, V value, int bucketIndex) &#123; if ((size &gt;= threshold) &amp;&amp; (null != table[bucketIndex])) &#123; resize(2 * table.length);//å°†å®¹é‡æ‰©å®¹ä¸ºåŸæ¥çš„2å€ hash = (null != key) ? hash(key) : 0; bucketIndex = indexFor(hash, table.length);//æ‰©å®¹åçš„ï¼Œè¯¥hashå€¼å¯¹åº”çš„æ–°çš„æ¡¶ä½ç½® &#125; createEntry(hash, key, value, bucketIndex);//åœ¨æŒ‡å®šçš„æ¡¶ä½ç½®ä¸Šï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„Entry &#125;void createEntry(int hash, K key, V value, int bucketIndex) &#123; Entry&lt;K,V&gt; e = table[bucketIndex]; table[bucketIndex] = new Entry&lt;&gt;(hash, key, value, e);//é“¾è¡¨çš„å¤´æ’æ³•æ’å…¥æ–°å»ºçš„Entry size++;//æ›´æ–°size &#125; å› æ­¤æ€»ç»“æ‰©å®¹æ—¶æœºå¦‚ä¸‹ï¼š åœ¨æ‰§è¡Œputæ—¶ï¼Œå¦‚æœéå†æŒ‡å®šæ¡¶å¤–æŒ‚é“¾è¡¨æ²¡æœ‰æ‰¾åˆ°ç›¸åŒkeyçš„èŠ‚ç‚¹æ—¶ï¼Œè¯´æ˜éœ€è¦æ–°å»ºä¸€ä¸ªentryï¼Œè¿™ä¸ªæ—¶å€™åœ¨æ’å…¥å‰éªŒè¯ä¸‹æ˜¯å¦è¦æ‰©å®¹ã€‚ 5.6 hashmapåœ¨1.7ç‰ˆæœ¬ä¹‹å‰ä¸ºä»€ä¹ˆä½¿ç”¨å¤´æ’æ³•ï¼Ÿ 1.7ç‰ˆæœ¬ä¹‹å‰é‡‡ç”¨å¤´æ’æ³•ï¼Œ1.8ä¹‹åé‡‡ç”¨å°¾æ’æ³•ã€‚ å¤´æ’æ³•ä¼šæ”¹å˜é“¾è¡¨ä¸­å…ƒç´ åŸæœ¬çš„é¡ºåºï¼Œä»¥è‡³äºåœ¨å¹¶å‘åœºæ™¯ä¸‹å¯¼è‡´é“¾è¡¨æˆç¯çš„é—®é¢˜ï¼›è€Œå°¾æ’æ³•ï¼Œåœ¨æ‰©å®¹æ—¶ä¼šä¿æŒé“¾è¡¨å…ƒç´ åŸæœ¬çš„é¡ºåºï¼Œå°±ä¸ä¼šå‡ºç°é“¾è¡¨æˆç¯çš„é—®é¢˜ ã€‚ æ—¢ç„¶æœ‰å¤šçº¿ç¨‹å¹¶å‘é—®é¢˜ï¼Œé‚£ä¸ºä»€ä¹ˆ1.8ä¹‹å‰è¿˜è¦ä½¿ç”¨å¤´æ’æ³•ï¼Ÿ å±€éƒ¨æ€§åŸç†ï¼š æœ€è¿‘è®¿é—®è¿‡çš„æ•°æ®ä¸‹æ¬¡å¤§æ¦‚ç‡ä¼šå†æ¬¡è®¿é—®ï¼ŒæŠŠåˆšè®¿é—®è¿‡çš„å…ƒç´ æ”¾åœ¨é“¾è¡¨æœ€å‰é¢å¯ä»¥ç›´æ¥è¢«æŸ¥è¯¢åˆ°ï¼Œå‡å°‘æŸ¥æ‰¾æ¬¡æ•° ä¸æ˜¯ä¸ºäº†é€‚åº”å¤šçº¿ç¨‹è€Œè®¾è®¡ï¼š åªæœ‰åœ¨å¹¶å‘æƒ…å†µä¸‹ï¼Œå¤´æ’æ³•æ‰ä¼šå‡ºç°é“¾è¡¨æˆç¯çš„é—®é¢˜ï¼Œå¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼ŒHashMap æœ¬å°±éçº¿ç¨‹å®‰å…¨ï¼Œè¿™å°±ç›¸å½“äºä½ åœ¨å®ƒçš„è§„åˆ™ä¹‹å¤–å‡ºäº†é—®é¢˜ã€‚ 5.7 ä¸ºä»€ä¹ˆ HashMap çš„è´Ÿè½½å› å­è®¾ç½®æˆ 0.75ï¼Œè€Œä¸æ˜¯ 1 ä¹Ÿä¸æ˜¯ 0.5ï¼Ÿ åœ¨ HashMap ä¸­ï¼Œä¸´ç•Œå€¼ï¼ˆthresholdï¼‰ = è´Ÿè½½å› å­ï¼ˆloadFactorï¼‰ * å®¹é‡ï¼ˆcapacityï¼‰ã€‚ é‚£ä¹ˆå¦‚ä½•èƒ½æœ‰æ•ˆçš„é¿å…å“ˆå¸Œç¢°æ’å‘¢ï¼Ÿ æˆ‘ä»¬å…ˆåå‘æ€ç»´ä¸€ä¸‹ï¼Œä½ è®¤ä¸ºä»€ä¹ˆæƒ…å†µä¼šå¯¼è‡´ HashMap çš„å“ˆå¸Œç¢°æ’æ¯”è¾ƒå¤šï¼Ÿ æ— å¤–ä¹ä¸¤ç§æƒ…å†µï¼š å®¹é‡å¤ªå°ã€‚å®¹é‡å°ï¼Œç¢°æ’çš„æ¦‚ç‡å°±é«˜äº†ã€‚ç‹¼å¤šè‚‰å°‘ï¼Œå°±ä¼šå‘ç”Ÿäº‰æŠ¢ã€‚ hash ç®—æ³•ä¸å¤Ÿå¥½ã€‚ç®—æ³•ä¸åˆç†ï¼Œå°±å¯èƒ½éƒ½åˆ†åˆ°åŒä¸€ä¸ªæˆ–å‡ ä¸ªæ¡¶ä¸­ã€‚åˆ†é…ä¸å‡ï¼Œä¹Ÿä¼šå‘ç”Ÿäº‰æŠ¢ã€‚ ä¸ºäº†é¿å…å“ˆå¸Œç¢°æ’ï¼ŒHashMap éœ€è¦åœ¨åˆé€‚çš„æ—¶å€™è¿›è¡Œæ‰©å®¹ã€‚é‚£å°±æ˜¯å½“å…¶ä¸­çš„å…ƒç´ ä¸ªæ•°è¾¾åˆ°ä¸´ç•Œå€¼çš„æ—¶å€™ï¼ˆç­‰å…¨æ»¡äº†å†æ‰©å®¹ï¼Œé‚£ä¹ˆåœ¨æ­¤ä¹‹å‰å®¹é‡å¤ªå°‘ï¼Œå¯¼è‡´ç¢°æ’çš„æ¦‚ç‡è¿‡é«˜ï¼‰ï¼Œè€Œè¿™ä¸ªä¸´ç•Œå€¼å‰é¢è¯´è¿‡å’Œ loadFactor æœ‰å…³ï¼Œæ¢å¥è¯è¯´ï¼Œè®¾ç½®ä¸€ä¸ªåˆç†çš„ loadFactorï¼Œå¯ä»¥æœ‰æ•ˆçš„é¿å…å“ˆå¸Œå†²çªã€‚ JVMä¸­åŸè¯ï¼š ä¸€èˆ¬æ¥è¯´ï¼Œé»˜è®¤çš„è´Ÿè½½å› å­ (0.75) åœ¨æ—¶é—´å’Œç©ºé—´æˆæœ¬ä¹‹é—´æä¾›äº†å¾ˆå¥½çš„æƒè¡¡ã€‚æ›´é«˜çš„å€¼å‡å°‘äº†ç©ºé—´å¼€é”€ï¼Œä½†å¢åŠ äº†æŸ¥æ‰¾æˆæœ¬(åæ˜ åœ¨ HashMap ç±»çš„å¤§å¤šæ•°æ“ä½œä¸­ï¼ŒåŒ…æ‹¬ get å’Œ put)ã€‚ å¦ä¸€æ–¹é¢ï¼Œä¸ºäº†ä¿è¯è´Ÿè½½å› å­ï¼ˆloadFactorï¼‰ * å®¹é‡ï¼ˆcapacityï¼‰çš„ç»“æœæ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œè¿™ä¸ªå€¼æ˜¯ 0.75(3/4) æ¯”è¾ƒåˆç†ï¼Œå› ä¸ºè¿™ä¸ªæ•°å’Œä»»ä½• 2 çš„å¹‚ä¹˜ç§¯ç»“æœéƒ½æ˜¯æ•´æ•°ã€‚ 5.8 Hashmap æ€ä¹ˆå¤„ç†keyå’Œvalueä¸ºnullçš„æƒ…å†µï¼Ÿ 6. Hashtable æºç åˆ†æ å‚è€ƒï¼šJavaé›†åˆä¹‹Hashtableæºç è§£æ æ„é€ å‡½æ•° å’ŒHashMapè¿˜æ˜¯æŒºç›¸ä¼¼çš„ï¼Œä½†æ˜¯é»˜è®¤åˆå§‹å®¹é‡æ˜¯11ï¼ˆHashMapæ˜¯16ï¼‰ã€‚ 123456789101112131415161718192021222324252627282930313233private transient Entry&lt;?,?&gt;[] table;//æ•°ç»„ private transient int count;//é”®å€¼å¯¹çš„æ•°é‡ private int threshold;//é˜€å€¼ private float loadFactor;//åŠ è½½å› å­ private transient int modCount = 0;//ä¿®æ”¹æ¬¡æ•° public Hashtable(int initialCapacity, float loadFactor) &#123;//ä¸‹é¢çš„ä¸‰ä¸ªæ„é€ å‡½æ•°éƒ½æ˜¯è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œæ¥è¿›è¡Œç›¸å…³çš„åˆå§‹åŒ– if (initialCapacity &lt; 0) throw new IllegalArgumentException(&quot;Illegal Capacity: &quot;+ initialCapacity); if (loadFactor &lt;= 0 || Float.isNaN(loadFactor)) throw new IllegalArgumentException(&quot;Illegal Load: &quot;+loadFactor); if (initialCapacity==0) initialCapacity = 1; this.loadFactor = loadFactor; table = new Entry[initialCapacity];//è¿™é‡Œæ˜¯ä¸HashMapçš„åŒºåˆ«ä¹‹ä¸€ï¼ŒHashMapä¸­table threshold = (int)Math.min(initialCapacity * loadFactor, MAX_ARRAY_SIZE + 1); initHashSeedAsNeeded(initialCapacity); &#125; public Hashtable(int initialCapacity) &#123;//æŒ‡å®šåˆå§‹æ•°ç»„é•¿åº¦ this(initialCapacity, 0.75f); &#125; public Hashtable() &#123;//ä»è¿™é‡Œå¯ä»¥çœ‹å‡ºå®¹é‡çš„é»˜è®¤å€¼ä¸º16ï¼ŒåŠ è½½å› å­ä¸º0.75f. this(11, 0.75f); &#125; public Hashtable(Map&lt;? extends K, ? extends V&gt; t) &#123; this(Math.max(2*t.size(), 11), 0.75f); putAll(t); &#125; putæ–¹æ³• å’ŒHashMapæ•´ä½“è¿‡ç¨‹ä¾æ—§å¾ˆåƒï¼Œä½†æœ‰4ç‚¹æ³¨æ„ï¼š putæ–¹æ³•æ˜¯åŠ é”synchronizedï¼Œæ‰€ä»¥çº¿ç¨‹å®‰å…¨ Hashtableè®¡ç®—hashå€¼çš„hash(key)ï¼Œä¸å…è®¸ä¸ºnullï¼Œæ‰€ä»¥ä¼šæŠ›å‡ºå¼‚å¸¸ è·å–æ•°ç»„æ•£åˆ—çš„ä¸‹æ ‡ (hash &amp; 0x7FFFFFFF) % tab.length å’ŒHashMap hash &amp; length-1 ä¸åŒ (hash &amp; 0x7FFFFFFF) % tab.length æ˜¯ï¼ˆ1ï¼‰hash &amp; 0x7FFFFFFF ä¿è¯hashæ˜¯æ­£æ•° ï¼ˆ2ï¼‰ç„¶åå–ä½™ ç›¸æ¯”ä¹‹ä¸‹ï¼ŒHashMapæ˜¯ä½è¿ç®—è¿›è¡Œäº†ä¼˜åŒ–ï¼Œæ›´é«˜æ•ˆ Hashtableæ²¡æœ‰é“¾è¡¨è½¬çº¢é»‘æ ‘çš„æœºåˆ¶ 12345678910111213141516171819202122232425262728public synchronized V put(K key, V value) &#123;//è¿™é‡Œæ–¹æ³•ä¿®é¥°ç¬¦ä¸ºsynchronized,æ‰€ä»¥æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ if (value == null) &#123; throw new NullPointerException();//valueå¦‚æœä¸ºNull,æŠ›å‡ºå¼‚å¸¸ &#125; Entry tab[] = table; int hash = hash(key);//hashé‡Œé¢çš„ä»£ç æ˜¯hashSeed^key.hashcodeï¼ˆï¼‰,null.hashCodeï¼ˆï¼‰ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæ‰€ä»¥è¿™å°±è§£é‡Šäº†Hashtableçš„keyå’Œvalueä¸èƒ½ä¸ºnullçš„åŸå› ã€‚ int index = (hash &amp; 0x7FFFFFFF) % tab.length;//è·å–æ•°ç»„å…ƒç´ ä¸‹æ ‡,å…ˆå¯¹hashå€¼å–æ­£ï¼Œç„¶åå–ä½™ã€‚ for (Entry&lt;K,V&gt; e = tab[index] ; e != null ; e = e.next) &#123; if ((e.hash == hash) &amp;&amp; e.key.equals(key)) &#123; V old = e.value; e.value = value; return old; &#125; &#125; modCount++;//ä¿®æ”¹æ¬¡æ•°ã€‚ if (count &gt;= threshold) &#123;//é”®å€¼å¯¹çš„æ€»æ•°å¤§äºå…¶é˜€å€¼ rehash();//åœ¨rehashé‡Œè¿›è¡Œæ‰©å®¹å¤„ç† tab = table; hash = hash(key); index = (hash &amp; 0x7FFFFFFF) % tab.length; &#125; Entry&lt;K,V&gt; e = tab[index]; tab[index] = new Entry&lt;&gt;(hash, key, value, e); count++; return null; &#125; rehashæ–¹æ³•ï¼ˆæ‰©å®¹ï¼‰ å’ŒHashMapä¾æ—§å¾ˆåƒï¼Œä½†æ˜¯æ‰©å®¹æ¯æ¬¡æ˜¯ old*2+1 ã€‚ getæ–¹æ³• ä¹Ÿæ˜¯ç›¸æ¯”Hashmapç›´æ¥åŠ äº† synchronized è¿›è¡Œä¿®é¥°ï¼Œä¿è¯çº¿ç¨‹å®‰å…¨ã€‚ 1234567891011public synchronized V get(Object key) &#123;//æ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šæ€§ï¼Œå°±æ˜¯åŠ äº†ä¸€ä¸ªsynchronizedï¼Œå°±æ˜¯æ ¹æ®indexæ¥éå†ç´¢å¼•å¤„çš„å•é“¾è¡¨ã€‚ Entry tab[] = table; int hash = hash(key); int index = (hash &amp; 0x7FFFFFFF) % tab.length; for (Entry&lt;K,V&gt; e = tab[index] ; e != null ; e = e.next) &#123; if ((e.hash == hash) &amp;&amp; e.key.equals(key)) &#123; return e.value; &#125; &#125; return null; &#125; 6.1 ï¼ˆå®¹æ˜“å¿˜ï¼‰HashMap å’Œ Hashtable çš„åŒºåˆ« ï¼Ÿ å…³äºnullï¼ŒHashMapå…è®¸keyå’Œvalueéƒ½å¯ä»¥ä¸ºnullï¼Œè€ŒHashtableåˆ™ä¸æ¥å—keyä¸ºnullæˆ–valueä¸ºnullçš„é”®å€¼å¯¹ã€‚ å…³äºçº¿ç¨‹å®‰å…¨ï¼ŒHashMapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼ŒHashtableæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› ä¸ºHashtableçš„è®¸å¤šæ“ä½œå‡½æ•°éƒ½ç”¨synchronizedä¿®é¥°ã€‚ Hashtableä¸HashMapå®ç°çš„æ¥å£ä¸ä¸€è‡´ï¼Œä½†Hashtableç»§æ‰¿Dictionaryï¼Œè€ŒHashMapç»§æ‰¿è‡ªAbstractMapï¼Œå³çˆ¶ç±»ä¸åŒ é»˜è®¤åˆå§‹å®¹é‡ä¸åŒï¼Œæ‰©å®¹å¤§å°ä¸åŒã€‚HashMapçš„hashæ•°ç»„çš„é»˜è®¤å¤§å°æ˜¯16ï¼Œè€Œä¸”ä¸€å®šæ˜¯2 çš„æŒ‡æ•°old*2ï¼›Hashtableä¸­hashæ•°ç»„é»˜è®¤å¤§å°æ˜¯11ï¼Œå¢åŠ çš„æ–¹å¼æ˜¯old*2+1ã€‚ 6.2 ConcurrentHashMap å’Œ Hashtable çš„åŒºåˆ« ï¼Ÿ ConcurrentHashMap å’Œ Hashtable çš„åŒºåˆ«ä¸»è¦ä½“ç°åœ¨å®ç°çº¿ç¨‹å®‰å…¨çš„æ–¹å¼ä¸Šä¸åŒã€‚ åº•å±‚æ•°æ®ç»“æ„ï¼š JDK1.7çš„ ConcurrentHashMap åº•å±‚é‡‡ç”¨åˆ†æ®µçš„æ•°ç»„+é“¾è¡¨ å®ç°ï¼ŒJDK1.8 é‡‡ç”¨çš„æ•°æ®ç»“æ„è·ŸHashMap1.8çš„ç»“æ„â¼€æ ·ï¼Œæ•°ç»„+é“¾è¡¨/çº¢é»‘â¼†å‰æ ‘ã€‚Hashtable å’Œ JDK1.8 ä¹‹å‰çš„HashMap çš„åº•å±‚æ•°æ®ç»“æ„ç±»ä¼¼éƒ½æ˜¯é‡‡ç”¨æ•°ç»„+é“¾è¡¨/çº¢é»‘æ ‘ çš„å½¢å¼ï¼Œæ•°ç»„æ˜¯ HashMap çš„ä¸»ä½“ï¼Œé“¾è¡¨åˆ™æ˜¯ä¸»è¦ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªè€Œå­˜åœ¨çš„ï¼› å®ç°çº¿ç¨‹å®‰å…¨çš„æ–¹å¼ï¼ˆé‡è¦ï¼‰ï¼š â‘ åœ¨JDK1.7çš„æ—¶å€™ConcurrentHashMapï¼ˆåˆ†æ®µé”ï¼‰ å¯¹æ•´ä¸ªæ¡¶æ•°ç»„è¿›è¡Œäº†åˆ†å‰²åˆ†æ®µ(Segment)ï¼Œæ¯â¼€æŠŠé”åªé”å®¹å™¨å…¶ä¸­â¼€éƒ¨åˆ†æ•°æ®ï¼Œå¤šçº¿ç¨‹è®¿é—®å®¹å™¨â¾¥ä¸åŒæ•°æ®æ®µçš„æ•°æ®ï¼Œå°±ä¸ä¼šå­˜åœ¨é”ç«äº‰ï¼Œæé«˜å¹¶å‘è®¿é—®ç‡ã€‚åˆ°JDK1.8 çš„æ—¶å€™å·²ç»æ‘’å¼ƒäº†Segmentçš„æ¦‚å¿µï¼Œè€Œæ˜¯ç›´æ¥ç”¨ Node æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘çš„æ•°æ®ç»“æ„æ¥å®ç°ï¼Œå¹¶å‘æ§åˆ¶ä½¿ç”¨ synchronized å’ŒCAS æ¥æ“ä½œã€‚ï¼ˆJDK1.6ä»¥å å¯¹ synchronizedé”åšäº†å¾ˆå¤šä¼˜åŒ–ï¼‰ æ•´ä¸ªçœ‹èµ·æ¥å°±åƒæ˜¯ä¼˜åŒ–è¿‡ä¸”çº¿ç¨‹å®‰å…¨çš„ HashMapï¼Œè™½ç„¶åœ¨JDK1.8ä¸­è¿˜èƒ½çœ‹åˆ° Segment çš„æ•°æ®ç»“æ„ï¼Œä½†æ˜¯å·²ç»ç®€åŒ–äº†å±æ€§ï¼Œåªæ˜¯ä¸ºäº†å…¼å®¹æ—§ç‰ˆæœ¬ï¼›â‘¡ Hashtable(åŒâ¼€æŠŠé”ï¼Œå…¨è¡¨é”) :ä½¿ç”¨ synchronized æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡éå¸¸ä½ä¸‹ã€‚å½“â¼€ä¸ªçº¿ç¨‹è®¿é—®åŒæ­¥æ–¹æ³•æ—¶ï¼Œå…¶ä»–çº¿ç¨‹ä¹Ÿè®¿é—®åŒæ­¥æ–¹æ³•ï¼Œå¯èƒ½ä¼šè¿›â¼Šé˜»å¡æˆ–è½®è¯¢çŠ¶æ€ï¼Œå¦‚ä½¿ç”¨ put æ·»åŠ å…ƒç´ ï¼Œå¦â¼€ä¸ªçº¿ç¨‹ä¸èƒ½ä½¿ç”¨ put æ·»åŠ å…ƒç´ ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨ getï¼Œç«äº‰ä¼šè¶Šæ¥è¶Šæ¿€çƒˆæ•ˆç‡è¶Šä½ã€‚ 7. ConcurrentHashMapçº¿ç¨‹å®‰å…¨çš„å…·ä½“å®ç°æ–¹å¼/åº•å±‚å…·ä½“å®ç° ï¼Ÿ å‚è€ƒï¼šhttps://www.cnblogs.com/huangjuncong/p/9478505.html javaGuide Java7 ä¸­ ConcurrentHashMap ä½¿ç”¨çš„åˆ†æ®µé”ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸€ä¸ª Segment ä¸ŠåŒæ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ“ä½œï¼Œæ¯ä¸€ä¸ª Segment éƒ½æ˜¯ä¸€ä¸ªç±»ä¼¼ HashMap æ•°ç»„çš„ç»“æ„ï¼Œå®ƒå¯ä»¥æ‰©å®¹ï¼Œå®ƒçš„å†²çªä¼šè½¬åŒ–ä¸ºé“¾è¡¨ã€‚ä½†æ˜¯ Segment çš„ä¸ªæ•°ä¸€ä½†åˆå§‹åŒ–å°±ä¸èƒ½æ”¹å˜ã€‚ Java8 ä¸­çš„ ConcurrentHashMap ä½¿ç”¨çš„ Synchronized é”åŠ  CAS çš„æœºåˆ¶ã€‚ç»“æ„ä¹Ÿç”± Java7 ä¸­çš„ Segment æ•°ç»„ + HashEntry æ•°ç»„ + é“¾è¡¨ è¿›åŒ–æˆäº† Node æ•°ç»„ + é“¾è¡¨ / çº¢é»‘æ ‘ï¼ŒNode æ˜¯ç±»ä¼¼äºä¸€ä¸ª HashEntry çš„ç»“æ„ã€‚å®ƒçš„å†²çªå†è¾¾åˆ°ä¸€å®šå¤§å°æ—¶ä¼šè½¬åŒ–æˆçº¢é»‘æ ‘ï¼Œåœ¨å†²çªå°äºä¸€å®šæ•°é‡æ—¶åˆé€€å›é“¾è¡¨ã€‚ JDK 1.7 å®ç° Java 7 ä¸­ ConcurrentHashMap çš„å­˜å‚¨ç»“æ„å¦‚ä¸‹å›¾ã€‚ å­˜å‚¨ç»“æ„ ConcurrentHashMap ä¸ºäº†æé«˜æœ¬èº«çš„å¹¶å‘èƒ½åŠ›ï¼Œåœ¨å†…éƒ¨é‡‡ç”¨äº†ä¸€ä¸ªå«åš Segment çš„ç»“æ„ï¼Œä¸€ä¸ª Segment å…¶å®å°±æ˜¯ä¸€ä¸ªç±» HashTable çš„ç»“æ„ï¼ŒSegment å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªé“¾è¡¨æ•°ç»„ã€‚ ä¸¤æ¬¡Hashã€‚ConcurrentHashMap å®šä½ä¸€ä¸ªå…ƒç´ çš„è¿‡ç¨‹éœ€è¦è¿›è¡Œä¸¤æ¬¡Hashæ“ä½œï¼Œç¬¬ä¸€æ¬¡ Hash å®šä½åˆ° Segmentï¼Œç¬¬äºŒæ¬¡ Hash å®šä½åˆ°å…ƒç´ æ‰€åœ¨çš„é“¾è¡¨çš„å¤´éƒ¨ã€‚ å› æ­¤ï¼Œè¿™ä¸€ç§ç»“æ„çš„å¸¦æ¥çš„å‰¯ä½œç”¨æ˜¯ Hash çš„è¿‡ç¨‹è¦æ¯”æ™®é€šçš„ HashMap è¦é•¿ï¼Œä½†æ˜¯å¸¦æ¥çš„å¥½å¤„æ˜¯å†™æ“ä½œçš„æ—¶å€™å¯ä»¥åªå¯¹å…ƒç´ æ‰€åœ¨çš„ Segment è¿›è¡Œæ“ä½œå³å¯ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–çš„ Segmentã€‚ 1. ConcurrentHashMapçš„æˆå‘˜å˜é‡å’Œæ„é€ å‡½æ•° ConcurrentHashMapæ‰©å®¹ï¼š å…ƒç´ æ•°é‡å¢åŠ å¯¼è‡´ConrruentHashMapéœ€è¦æ‰©å®¹ï¼ŒConcurrentHashMapä¸ä¼šå¢åŠ Segmentçš„æ•°é‡ï¼Œè€Œåªä¼šå¢åŠ Segmentä¸­é“¾è¡¨æ•°ç»„çš„å®¹é‡å¤§å°ã€‚ éœ€è¦å¯¹æ•´ä¸ªConcurrentHashMapåšrehashï¼Œè€Œåªéœ€è¦å¯¹Segmenté‡Œé¢çš„å…ƒç´ åšä¸€æ¬¡rehashå°±å¯ä»¥äº†ã€‚ æ ¸å¿ƒåˆå§‹åŒ–å‡½æ•°é€»è¾‘å¦‚ä¸‹ï¼š 2çš„æŒ‡æ•°æ˜¯ä¸ºäº†å¯ä»¥ä½¿ç”¨ç§»ä½æ“ä½œåŠ å¿«hashè®¡ç®—è¿‡ç¨‹ã€‚ è®¡ç®—å‡ºSegmentçš„æ•°é‡ssizeï¼Œæ˜¯ä¸å¤§äºconcurrencyLevelçš„æœ€å¤§çš„2çš„æŒ‡æ•° 12345int ssize = 1;while (ssize &lt; concurrencyLevel) &#123; ++sshift; ssize &lt;&lt;= 1;&#125; æ ¹æ®intialCapacityç¡®å®šSegmentçš„å®¹é‡çš„å¤§å°ï¼Œæ¯ä¸€ä¸ªSegmentçš„å®¹é‡å¤§å°ä¹Ÿæ˜¯2çš„æŒ‡æ•° 123456int c = initialCapacity / ssize;if (c * ssize &lt; initialCapacity) ++c; int cap = MIN_SEGMENT_TABLE_CAPACITY; while (cap &lt; c) cap &lt;&lt;= 1; ä¸‹é¢æ˜¯å®Œæ•´ä»£ç ï¼š segmentShift åç§»é‡ï¼Œè¿™ä¸ªå€¼ä¸ºã€å®¹é‡ = 2 çš„Næ¬¡æ–¹ã€‘ä¸­çš„ Nï¼Œåœ¨åé¢ Put æ—¶è®¡ç®—ä½ç½®æ—¶ä¼šç”¨åˆ° ã€‚é»˜è®¤æ˜¯ 32 - sshift = 28 segmentMaskï¼Œé»˜è®¤æ˜¯ ssize - 1 = 16 -1 = 15 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667// é»˜è®¤åˆå§‹å®¹é‡static final int DEFAULT_INITIAL_CAPACITY = 16;// é»˜è®¤åŠ è½½å› å­static final float DEFAULT_LOAD_FACTOR = 0.75f;// é»˜è®¤segmentå±‚çº§static final int DEFAULT_CONCURRENCY_LEVEL = 16;// æœ€å¤§å®¹é‡static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30;// segmentæœ€å°å®¹é‡static final int MIN_SEGMENT_TABLE_CAPACITY = 2;// ä¸€ä¸ªsegmentæœ€å¤§å®¹é‡static final int MAX_SEGMENTS = 1 &lt;&lt; 16;// é”ä¹‹å‰é‡è¯•æ¬¡æ•°static final int RETRIES_BEFORE_LOCK = 2;// æ„é€ å‡½æ•°ï¼šæ— å‚public ConcurrentHashMap() &#123; this(DEFAULT_INITIAL_CAPACITY, DEFAULT_LOAD_FACTOR, DEFAULT_CONCURRENCY_LEVEL);&#125;// æ„é€ å‡½æ•°ï¼šæŒ‡å®šåˆå§‹å®¹é‡public ConcurrentHashMap(int initialCapacity) &#123; this(initialCapacity, DEFAULT_LOAD_FACTOR, DEFAULT_CONCURRENCY_LEVEL);&#125;// æ„é€ å‡½æ•°ï¼šæŒ‡å®šåˆå§‹å®¹é‡ï¼Œè´Ÿè½½å› å­public ConcurrentHashMap(int initialCapacity, float loadFactor) &#123; this(initialCapacity, loadFactor, DEFAULT_CONCURRENCY_LEVEL);&#125;// æ„é€ å‡½æ•°ï¼šæŒ‡å®šåˆå§‹å®¹é‡ï¼Œè´Ÿè½½å› å­ï¼Œå¹¶å‘çº§åˆ«public ConcurrentHashMap(int initialCapacity, float loadFactor, int concurrencyLevel) &#123; if (!(loadFactor &gt; 0) || initialCapacity &lt; 0 || concurrencyLevel &lt;= 0) throw new IllegalArgumentException(); if (concurrencyLevel &gt; MAX_SEGMENTS) concurrencyLevel = MAX_SEGMENTS; // æ‰¾åˆ°ä¸¤ç§å¤§å°çš„æœ€åŒ¹é…å‚æ•° int sshift = 0; // segmentæ•°ç»„çš„é•¿åº¦æ˜¯ç”±concurrentLevelè®¡ç®—æ¥çš„ï¼Œsegmentæ•°ç»„çš„é•¿åº¦æ˜¯2çš„Næ¬¡æ–¹ï¼Œ // é»˜è®¤concurrencyLevel = 16, æ‰€ä»¥ssizeåœ¨é»˜è®¤æƒ…å†µä¸‹ä¹Ÿæ˜¯16,æ­¤æ—¶ sshift = 4 // sshiftç›¸å½“äºssizeä»1å‘å·¦ç§»çš„æ¬¡æ•° int ssize = 1; while (ssize &lt; concurrencyLevel) &#123; ++sshift; ssize &lt;&lt;= 1; &#125; // æ®µåç§»é‡ï¼Œé»˜è®¤å€¼æƒ…å†µä¸‹æ­¤æ—¶segmentShift = 28 this.segmentShift = 32 - sshift; // æ•£åˆ—ç®—æ³•çš„æ©ç ï¼Œé»˜è®¤å€¼æƒ…å†µä¸‹segmentMask = 15 this.segmentMask = ssize - 1; if (initialCapacity &gt; MAXIMUM_CAPACITY) initialCapacity = MAXIMUM_CAPACITY; int c = initialCapacity / ssize; if (c * ssize &lt; initialCapacity) ++c; int cap = MIN_SEGMENT_TABLE_CAPACITY; while (cap &lt; c) cap &lt;&lt;= 1; // create segments and segments[0] Segment&lt;K,V&gt; s0 = new Segment&lt;K,V&gt;(loadFactor, (int)(cap * loadFactor), (HashEntry&lt;K,V&gt;[])new HashEntry[cap]); // åˆ›å»ºssizeé•¿åº¦çš„Segmentæ•°ç»„ Segment&lt;K,V&gt;[] ss = (Segment&lt;K,V&gt;[])new Segment[ssize]; UNSAFE.putOrderedObject(ss, SBASE, s0); // ordered write of segments[0] this.segments = ss; &#125; 2.æ¥æŸ¥çœ‹å…·ä½“ä»£ç å®šä¹‰ï¼ŒSegmentçš„æˆå‘˜å˜é‡ï¼š Segment ç»§æ‰¿äº ReentrantLockï¼Œä¸ä¼šåƒ HashTable é‚£æ ·ä¸ç®¡æ˜¯ put è¿˜æ˜¯ get æ“ä½œéƒ½éœ€è¦åšåŒæ­¥å¤„ç†ã€‚ 1234567static final class Segment&lt;K,V&gt; extends ReentrantLock implements Serializable &#123; transient volatile int count; //Segmentä¸­å…ƒç´ çš„æ•°é‡ transient int modCount; //å¯¹tableçš„å¤§å°é€ æˆå½±å“çš„æ“ä½œçš„æ•°é‡(æ¯”å¦‚putæˆ–è€…removeæ“ä½œ) transient int threshold; //é˜ˆå€¼,Segmenté‡Œé¢å…ƒç´ çš„æ•°é‡è¶…è¿‡è¿™ä¸ªå€¼é‚£ä¹ˆå°±ä¼šå¯¹Segmentè¿›è¡Œæ‰©å®¹ final float loadFactor; //è´Ÿè½½å› å­,ç”¨äºç¡®å®šthreshold transient volatile HashEntry&lt;K,V&gt;[] table; //é“¾è¡¨æ•°ç»„,æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ä»£è¡¨äº†ä¸€ä¸ªé“¾è¡¨çš„å¤´éƒ¨&#125; 3. ç»§ç»­æŸ¥çœ‹HashEntryç»„æˆï¼š å’Œ HashMap éå¸¸ç±»ä¼¼ï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯å…¶ä¸­çš„æ ¸å¿ƒæ•°æ®å¦‚ value ï¼Œä»¥åŠé“¾è¡¨éƒ½æ˜¯ volatile ä¿®é¥°çš„ï¼Œä¿è¯äº†è·å–æ—¶çš„å¯è§æ€§ã€‚ 123456789101112131415161718192021 /** * ConcurrentHashMapåˆ—è¡¨Entryã€‚æ³¨æ„ï¼Œè¿™ä¸ä¼šä½œä¸ºç”¨æˆ·å¯è§çš„Map.Entryå¯¼å‡ºã€‚ */static final class HashEntry&lt;K,V&gt; &#123; final int hash; final K key; volatile V value; volatile HashEntry&lt;K,V&gt; next; HashEntry(int hash, K key, V value, HashEntry&lt;K,V&gt; next) &#123; this.hash = hash; this.key = key; this.value = value; this.next = next; &#125; // è®¾ç½®å…·æœ‰volatileå†™è¯­ä¹‰çš„nextå­—æ®µã€‚ final void setNext(HashEntry&lt;K,V&gt; n) &#123; UNSAFE.putOrderedObject(this, nextOffset, n); &#125; // ä¸‹é¢ä¸å¤ªé‡è¦ï¼Œç•¥ã€‚ put() æ–¹æ³•å®ç° ç›¸æ¯”Hashtableï¼Œ1.7ç‰ˆæœ¬concurrentHashmapçš„æ›´åŠ ç»†ç²’åº¦ï¼Œåªæœ‰å®šä½åˆ°æ®µï¼Œæ‰ä¼šé”ä½ã€‚ä¹Ÿå°±æ˜¯æ®µé”ï¼ è€ŒHashtableç›´æ¥é”ä½æ•´ä¸ªæ–¹æ³•ã€‚ è®¡ç®—keyçš„hashå€¼ ; æ ¹æ®hashå€¼ï¼ŒsegmentShiftï¼ŒsegmentMaskå®šä½åˆ°å“ªä¸ªSegmentï¼› å¦‚æœæŒ‡å®šä½ç½®çš„ Segment ä¸ºç©ºï¼Œåˆ™åˆå§‹åŒ–è¿™ä¸ª Segmentï¼› åœ¨å¯¹åº”çš„ Segment ä¸­è¿›è¡Œå…·ä½“çš„ putã€‚ 1234567891011121314public V put(K key, V value) &#123; Segment&lt;K,V&gt; s; if (value == null) throw new NullPointerException(); int hash = hash(key); // hash å€¼æ— ç¬¦å·å³ç§» 28ä½ï¼ˆåˆå§‹åŒ–æ—¶è·å¾—ï¼‰ï¼Œç„¶åä¸ segmentMask=15 åšä¸è¿ç®— // å…¶å®ä¹Ÿå°±æ˜¯æŠŠé«˜4ä½ä¸segmentMaskï¼ˆ1111ï¼‰åšä¸è¿ç®— int j = (hash &gt;&gt;&gt; segmentShift) &amp; segmentMask; if ((s = (Segment&lt;K,V&gt;)UNSAFE.getObject // nonvolatile; recheck (segments, (j &lt;&lt; SSHIFT) + SBASE)) == null) // in ensureSegment // å¦‚æœæŸ¥æ‰¾åˆ°çš„ Segment ä¸ºç©ºï¼Œåˆå§‹åŒ– s = ensureSegment(j); return s.put(key, hash, value, false);&#125; Segment ä¸­è¿›è¡Œå…·ä½“çš„ putçš„æºç å¦‚ä¸‹ï¼š åˆ¤æ–­å…ƒç´ ä¸ªæ•°æ˜¯å¦è¶…è¿‡äº†é˜ˆå€¼æˆ–è€…segmentä¸­æ•°ç»„çš„é•¿åº¦è¶…è¿‡äº†MAXIMUM_CAPACITYï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶åˆ™rehashæ‰©å®¹ï¼ ç”±äº Segment ç»§æ‰¿äº† ReentrantLockï¼Œæ‰€ä»¥ Segment å†…éƒ¨å¯ä»¥å¾ˆæ–¹ä¾¿çš„è·å–é”ï¼Œput æµç¨‹å°±ç”¨åˆ°äº†è¿™ä¸ªåŠŸèƒ½ã€‚ tryLock() è·å–é”ï¼Œè·å–ä¸åˆ°ä½¿ç”¨scanAndLockForPutæ–¹æ³•ç»§ç»­è·å–ï¼› è¿™é‡Œé¢çš„ç¬¬ä¸€æ­¥ä¸­çš„ scanAndLockForPut æ“ä½œè¿™é‡Œæ²¡æœ‰ä»‹ç»ï¼Œè¿™ä¸ªæ–¹æ³•åšçš„æ“ä½œå°±æ˜¯ä¸æ–­çš„è‡ªæ—‹ tryLock() è·å–é”ã€‚å½“è‡ªæ—‹æ¬¡æ•°å¤§äºæŒ‡å®šæ¬¡æ•°æ—¶ï¼Œä½¿ç”¨ lock() é˜»å¡è·å–é”ã€‚ è®¡ç®— put çš„æ•°æ®è¦æ”¾å…¥çš„ index ä½ç½®ï¼Œç„¶åè·å–è¿™ä¸ªä½ç½®ä¸Šçš„ HashEntry ï¼› éå† put æ–°å…ƒç´ ï¼Œä¸ºä»€ä¹ˆè¦éå†ï¼Ÿå› ä¸ºè¿™é‡Œè·å–çš„ HashEntry å¯èƒ½æ˜¯ä¸€ä¸ªç©ºå…ƒç´ ï¼Œä¹Ÿå¯èƒ½æ˜¯é“¾è¡¨å·²å­˜åœ¨ï¼Œæ‰€ä»¥è¦åŒºåˆ«å¯¹å¾…ï¼› å¦‚æœè¿™ä¸ªä½ç½®ä¸Šçš„ HashEntry ä¸å­˜åœ¨ï¼š å¦‚æœå½“å‰å®¹é‡å¤§äºæ‰©å®¹é˜€å€¼ï¼Œå°äºæœ€å¤§å®¹é‡ï¼Œè¿›è¡Œæ‰©å®¹ã€‚ ç›´æ¥å¤´æ’æ³•æ’å…¥ã€‚ å¦‚æœè¿™ä¸ªä½ç½®ä¸Šçš„ HashEntry å­˜åœ¨ï¼š åˆ¤æ–­é“¾è¡¨å½“å‰å…ƒç´  Key å’Œ hash å€¼æ˜¯å¦å’Œè¦ put çš„ key å’Œ hash å€¼ä¸€è‡´ï¼Œä¸€è‡´åˆ™æ›¿æ¢å€¼ ä¸ä¸€è‡´ï¼Œè·å–é“¾è¡¨ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç›´åˆ°å‘ç°ç›¸åŒè¿›è¡Œå€¼æ›¿æ¢ï¼Œæˆ–è€…é“¾è¡¨è¡¨é‡Œå®Œæ¯•æ²¡æœ‰ç›¸åŒçš„ã€‚ å¦‚æœå½“å‰å®¹é‡å¤§äºæ‰©å®¹é˜€å€¼ï¼Œå°äºæœ€å¤§å®¹é‡ï¼Œè¿›è¡Œæ‰©å®¹ã€‚ ç›´æ¥é“¾è¡¨å¤´æ’æ³•æ’å…¥ã€‚ å¦‚æœè¦æ’å…¥çš„ä½ç½®ä¹‹å‰å·²ç»å­˜åœ¨ï¼Œæ›¿æ¢åè¿”å›æ—§å€¼ï¼Œå¦åˆ™è¿”å› nullã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849final V put(K key, int hash, V value, boolean onlyIfAbsent) &#123; // è·å– ReentrantLock ç‹¬å é”ï¼Œè·å–ä¸åˆ°ï¼ŒscanAndLockForPut è·å–ã€‚ HashEntry&lt;K,V&gt; node = tryLock() ? null : scanAndLockForPut(key, hash, value); V oldValue; try &#123; HashEntry&lt;K,V&gt;[] tab = table; // è®¡ç®—è¦putçš„æ•°æ®ä½ç½® int index = (tab.length - 1) &amp; hash; // CAS è·å– index åæ ‡çš„å€¼ HashEntry&lt;K,V&gt; first = entryAt(tab, index); for (HashEntry&lt;K,V&gt; e = first;;) &#123; if (e != null) &#123; // æ£€æŸ¥æ˜¯å¦ key å·²ç»å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™éå†é“¾è¡¨å¯»æ‰¾ä½ç½®ï¼Œæ‰¾åˆ°åæ›¿æ¢ value K k; if ((k = e.key) == key || (e.hash == hash &amp;&amp; key.equals(k))) &#123; oldValue = e.value; if (!onlyIfAbsent) &#123; e.value = value; ++modCount; &#125; break; &#125; e = e.next; &#125; else &#123; // first æœ‰å€¼æ²¡è¯´æ˜ index ä½ç½®å·²ç»æœ‰å€¼äº†ï¼Œæœ‰å†²çªï¼Œé“¾è¡¨å¤´æ’æ³•ã€‚ if (node != null) node.setNext(first); else node = new HashEntry&lt;K,V&gt;(hash, key, value, first); int c = count + 1; // å®¹é‡å¤§äºæ‰©å®¹é˜€å€¼ï¼Œå°äºæœ€å¤§å®¹é‡ï¼Œè¿›è¡Œæ‰©å®¹ if (c &gt; threshold &amp;&amp; tab.length &lt; MAXIMUM_CAPACITY) rehash(node); else // index ä½ç½®èµ‹å€¼ nodeï¼Œnode å¯èƒ½æ˜¯ä¸€ä¸ªå…ƒç´ ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªé“¾è¡¨çš„è¡¨å¤´ setEntryAt(tab, index, node); ++modCount; count = c; oldValue = null; break; &#125; &#125; &#125; finally &#123; unlock(); &#125; return oldValue;&#125; æ‰©å®¹ rehash rehashåœ¨put()å†…éƒ¨è¢«è§¦å‘ã€‚ ConcurrentHashMap çš„æ‰©å®¹åªä¼šæ‰©å®¹åˆ°åŸæ¥çš„ä¸¤å€ã€‚è€æ•°ç»„é‡Œçš„æ•°æ®ç§»åŠ¨åˆ°æ–°çš„æ•°ç»„æ—¶ï¼Œä½ç½®è¦ä¹ˆä¸å˜ï¼Œè¦ä¹ˆå˜ä¸º index+ oldSizeï¼Œå‚æ•°é‡Œçš„ node ä¼šåœ¨æ‰©å®¹ä¹‹åä½¿ç”¨é“¾è¡¨å¤´æ’æ³•æ’å…¥åˆ°æŒ‡å®šä½ç½®ã€‚ 1int idx = e.hash &amp; sizeMask; // æ–°ä½ç½®è®¡ç®— 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455private void rehash(HashEntry&lt;K,V&gt; node) &#123; HashEntry&lt;K,V&gt;[] oldTable = table; // è€å®¹é‡ int oldCapacity = oldTable.length; // æ–°å®¹é‡ï¼Œæ‰©å¤§ä¸¤å€ int newCapacity = oldCapacity &lt;&lt; 1; // æ–°çš„æ‰©å®¹é˜€å€¼ threshold = (int)(newCapacity * loadFactor); // åˆ›å»ºæ–°çš„æ•°ç»„ HashEntry&lt;K,V&gt;[] newTable = (HashEntry&lt;K,V&gt;[]) new HashEntry[newCapacity]; // æ–°çš„æ©ç ï¼Œé»˜è®¤2æ‰©å®¹åæ˜¯4ï¼Œ-1æ˜¯3ï¼ŒäºŒè¿›åˆ¶å°±æ˜¯11ã€‚ int sizeMask = newCapacity - 1; for (int i = 0; i &lt; oldCapacity ; i++) &#123; // éå†è€æ•°ç»„ HashEntry&lt;K,V&gt; e = oldTable[i]; if (e != null) &#123; HashEntry&lt;K,V&gt; next = e.next; // è®¡ç®—æ–°çš„ä½ç½®ï¼Œæ–°çš„ä½ç½®åªå¯èƒ½æ˜¯ä¸å˜æˆ–è€…æ˜¯ï¼šè€çš„ä½ç½®+è€çš„å®¹é‡ã€‚ int idx = e.hash &amp; sizeMask; if (next == null) // Single node on list // å¦‚æœå½“å‰ä½ç½®è¿˜ä¸æ˜¯é“¾è¡¨ï¼Œåªæ˜¯ä¸€ä¸ªå…ƒç´ ï¼Œç›´æ¥èµ‹å€¼ newTable[idx] = e; else &#123; // Reuse consecutive sequence at same slot // å¦‚æœæ˜¯é“¾è¡¨äº† HashEntry&lt;K,V&gt; lastRun = e; int lastIdx = idx; // æ–°çš„ä½ç½®åªå¯èƒ½æ˜¯ä¸å˜æˆ–è€…æ˜¯ï¼šè€çš„ä½ç½®+è€çš„å®¹é‡ã€‚ // éå†ç»“æŸåï¼ŒlastRun åé¢çš„å…ƒç´ ä½ç½®éƒ½æ˜¯ç›¸åŒçš„ for (HashEntry&lt;K,V&gt; last = next; last != null; last = last.next) &#123; int k = last.hash &amp; sizeMask; if (k != lastIdx) &#123; lastIdx = k; lastRun = last; &#125; &#125; // ï¼ŒlastRun åé¢çš„å…ƒç´ ä½ç½®éƒ½æ˜¯ç›¸åŒçš„ï¼Œç›´æ¥ä½œä¸ºé“¾è¡¨èµ‹å€¼åˆ°æ–°ä½ç½®ã€‚ newTable[lastIdx] = lastRun; // Clone remaining nodes for (HashEntry&lt;K,V&gt; p = e; p != lastRun; p = p.next) &#123; // éå†å‰©ä½™å…ƒç´ ï¼Œå¤´æ’æ³•åˆ°æŒ‡å®š k ä½ç½®ã€‚ V v = p.value; int h = p.hash; int k = h &amp; sizeMask; HashEntry&lt;K,V&gt; n = newTable[k]; newTable[k] = new HashEntry&lt;K,V&gt;(h, p.key, v, n); &#125; &#125; &#125; &#125; // å¤´æ’æ³•æ’å…¥æ–°çš„èŠ‚ç‚¹ int nodeIndex = node.hash &amp; sizeMask; // add the new node node.setNext(newTable[nodeIndex]); newTable[nodeIndex] = node; table = newTable;&#125; getæ–¹æ³• æ³¨æ„ï¼ŒHashtable ä¼šä½¿ç”¨Synchronizedè¿›è¡Œä¿®é¥°ï¼Œæ‰€ä»¥ä¸æ”¯æŒå¹¶å‘ã€‚ä½†æ˜¯ConcurrentHashmap æ²¡æœ‰ä½¿ç”¨åŒæ­¥æœºåˆ¶ï¼š 1.7ç‰ˆæœ¬ ã€‚ä½¿ç”¨unsafeæ–¹æ³•ï¼ˆï¼‰ç­‰æ–¹å¼ç›´æ¥æ“ä½œæ¥ä¿è¯å¹¶å‘å¤„ç†çš„å®‰å…¨æ€§ï¼Œä½¿ç”¨çš„æ˜¯ç¡¬ä»¶çš„å®‰å…¨æœºåˆ¶ã€‚ 1.8ç‰ˆæœ¬ã€‚æ²¡æœ‰ä½¿ç”¨åŒæ­¥ï¼Œä¹Ÿæ²¡æœ‰ä½¿ç”¨unsafeæ–¹å¼ã€‚æ‰€ä»¥æ˜¯å¹¶å‘çš„ã€‚ åˆ°è¿™é‡Œå°±å¾ˆç®€å•äº†ï¼Œget æ–¹æ³•åªéœ€è¦ä¸¤æ­¥å³å¯ã€‚ è®¡ç®—å¾—åˆ°segmentçš„ä½ç½® u CASæ–¹å¼è·å–segmentæ•°ç»„å¯¹è±¡ segment[u] è®¡ç®—HashEntryæ•°ç»„çš„ä¸‹æ ‡ i CASæ–¹å¼è·å–HashEntry[i]ï¼Œå³æ•°ç»„é¦–èŠ‚ç‚¹ 12345678910111213141516171819public V get(Object key) &#123; Segment&lt;K,V&gt; s; // manually integrate access methods to reduce overhead HashEntry&lt;K,V&gt;[] tab; int h = hash(key); long u = (((h &gt;&gt;&gt; segmentShift) &amp; segmentMask) &lt;&lt; SSHIFT) + SBASE; // è®¡ç®—å¾—åˆ° key çš„å­˜æ”¾ä½ç½® if ((s = (Segment&lt;K,V&gt;)UNSAFE.getObjectVolatile(segments, u)) != null &amp;&amp; (tab = s.table) != null) &#123; for (HashEntry&lt;K,V&gt; e = (HashEntry&lt;K,V&gt;) UNSAFE.getObjectVolatile (tab, ((long)(((tab.length - 1) &amp; h)) &lt;&lt; TSHIFT) + TBASE); e != null; e = e.next) &#123; // å¦‚æœæ˜¯é“¾è¡¨ï¼Œéå†æŸ¥æ‰¾åˆ°ç›¸åŒ key çš„ valueã€‚ K k; if ((k = e.key) == key || (e.hash == h &amp;&amp; key.equals(k))) return e.value; &#125; &#125; return null;&#125; JDK 1.8 å®ç° 1.8ç‰ˆæœ¬åˆ†æï¼Œå»ºè®®å‚è€ƒï¼šhttps://www.cnblogs.com/zerotomax/p/8687425.html ã€‚ å¯ä»¥å‘ç° Java8 çš„ ConcurrentHashMap ç›¸å¯¹äº Java7 æ¥è¯´å˜åŒ–æ¯”è¾ƒå¤§ï¼Œä¸å†æ˜¯ä¹‹å‰çš„ Segment æ•°ç»„ + HashEntry æ•°ç»„ + é“¾è¡¨ï¼Œè€Œæ˜¯ Node æ•°ç»„ + é“¾è¡¨ / çº¢é»‘æ ‘ã€‚å½“å†²çªé“¾è¡¨è¾¾åˆ°ä¸€å®šé•¿åº¦æ—¶ï¼Œé“¾è¡¨ä¼šè½¬æ¢æˆçº¢é»‘æ ‘ã€‚ å’ŒJDK1.8çš„HashMapæ˜¯å¾ˆç›¸ä¼¼ , æŠ›å¼ƒäº†åŸæœ‰çš„ Segment åˆ†æ®µé”ï¼Œè€Œé‡‡ç”¨äº† CAS + synchronized æ¥ä¿è¯å¹¶å‘å®‰å…¨æ€§ã€‚ å­˜å‚¨ç»“æ„å’Œå±æ€§ 12345678910111213141516171819202122private static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30;private static final int DEFAULT_CAPACITY = 16; // hashmapä¹Ÿæ˜¯16static final int TREEIFY_THRESHOLD = 8; // è¶…è¿‡8æ‰©å®¹static final int UNTREEIFY_THRESHOLD = 6;static final int MIN_TREEIFY_CAPACITY = 64; // è¶…è¿‡64çº¢é»‘æ ‘static final int MOVED = -1; // è¡¨ç¤ºæ­£åœ¨è½¬ç§»static final int TREEBIN = -2; // è¡¨ç¤ºå·²ç»è½¬æ¢æˆæ ‘static final int RESERVED = -3; // hash for transient reservationsstatic final int HASH_BITS = 0x7fffffff; // Nodeæ•°ç»„å­˜å‚¨å…ƒç´ transient volatile Node&lt;K,V&gt;[] table;//é»˜è®¤æ²¡åˆå§‹åŒ–çš„æ•°ç»„ï¼Œç”¨æ¥ä¿å­˜å…ƒç´ private transient volatile Node&lt;K,V&gt;[] nextTable;//è½¬ç§»çš„æ—¶å€™ç”¨çš„æ•°ç»„/** * ç”¨æ¥æ§åˆ¶è¡¨åˆå§‹åŒ–å’Œæ‰©å®¹çš„ï¼Œé»˜è®¤å€¼ä¸º0ï¼Œå½“åœ¨åˆå§‹åŒ–çš„æ—¶å€™æŒ‡å®šäº†å¤§å°ï¼Œè¿™ä¼šå°†è¿™ä¸ªå¤§å°ä¿å­˜åœ¨sizeCtlä¸­ï¼Œå¤§å°ä¸ºæ•°ç»„çš„0.75 * å½“ä¸ºè´Ÿçš„æ—¶å€™ï¼Œè¯´æ˜è¡¨æ­£åœ¨åˆå§‹åŒ–æˆ–æ‰©å¼ ï¼Œ * -1è¡¨ç¤ºåˆå§‹åŒ– * -(1+n) n:è¡¨ç¤ºæ´»åŠ¨çš„æ‰©å¼ çº¿ç¨‹ */private transient volatile int sizeCtl; åœ¨ConcurrentHashMapä¸­ä½¿ç”¨äº†unSafeæ–¹æ³•ï¼Œé€šè¿‡ç›´æ¥æ“ä½œå†…å­˜çš„æ–¹å¼æ¥ä¿è¯å¹¶å‘å¤„ç†çš„å®‰å…¨æ€§ï¼Œä½¿ç”¨çš„æ˜¯ç¡¬ä»¶çš„å®‰å…¨æœºåˆ¶ã€‚ 123456789101112131415161718192021/* * ç”¨æ¥è¿”å›èŠ‚ç‚¹æ•°ç»„çš„æŒ‡å®šä½ç½®çš„èŠ‚ç‚¹çš„åŸå­æ“ä½œ */ @SuppressWarnings(&quot;unchecked&quot;) static final &lt;K,V&gt; Node&lt;K,V&gt; tabAt(Node&lt;K,V&gt;[] tab, int i) &#123; return (Node&lt;K,V&gt;)U.getObjectVolatile(tab, ((long)i &lt;&lt; ASHIFT) + ABASE); &#125; /* * casåŸå­æ“ä½œï¼Œåœ¨æŒ‡å®šä½ç½®è®¾å®šå€¼ */ static final &lt;K,V&gt; boolean casTabAt(Node&lt;K,V&gt;[] tab, int i, Node&lt;K,V&gt; c, Node&lt;K,V&gt; v) &#123; return U.compareAndSwapObject(tab, ((long)i &lt;&lt; ASHIFT) + ABASE, c, v); &#125; /* * åŸå­æ“ä½œï¼Œåœ¨æŒ‡å®šä½ç½®è®¾å®šå€¼ */ static final &lt;K,V&gt; void setTabAt(Node&lt;K,V&gt;[] tab, int i, Node&lt;K,V&gt; v) &#123; U.putObjectVolatile(tab, ((long)i &lt;&lt; ASHIFT) + ABASE, v); &#125; åˆå§‹åŒ– 1234567891011121314151617//ç©ºçš„æ„é€ public ConcurrentHashMapDebug() &#123; &#125;//å¦‚æœåœ¨å®ä¾‹åŒ–å¯¹è±¡çš„æ—¶å€™æŒ‡å®šäº†å®¹é‡ï¼Œåˆ™åˆå§‹åŒ–sizeCtlpublic ConcurrentHashMapDebug(int initialCapacity) &#123; if (initialCapacity &lt; 0) throw new IllegalArgumentException(); int cap = ((initialCapacity &gt;= (MAXIMUM_CAPACITY &gt;&gt;&gt; 1)) ? MAXIMUM_CAPACITY : tableSizeFor(initialCapacity + (initialCapacity &gt;&gt;&gt; 1) + 1)); this.sizeCtl = cap; &#125;//å½“å‡ºå…¥ä¸€ä¸ªMapçš„æ—¶å€™ï¼Œå…ˆè®¾å®šsizeCtlä¸ºé»˜è®¤å®¹é‡ï¼Œåœ¨æ·»åŠ å…ƒç´ public ConcurrentHashMapDebug(Map&lt;? extends K, ? extends V&gt; m) &#123; this.sizeCtl = DEFAULT_CAPACITY; putAll(m); &#125; putæ–¹æ³• 123public V put(K key, V value) &#123; return putVal(key, value, false); &#125; å†æ¥çœ‹putVal ï¼š å¯ä»¥å‘ç°ç›¸æ¯”HashTableç›´æ¥å¯¹æ–¹æ³•è¿›è¡ŒåŠ é”synchronized / 1.7ç‰ˆæœ¬çš„ConcurrentHashMap è¿›å…¥çš„å¼€å¤´å°è¯•è·å–é”ï¼Œ1.8ç‰ˆæœ¬çš„ConcurrentHashMap é”æ›´åŠ ç»†ç²’åº¦åŒ–ã€‚ åªæœ‰ï¼šï¼ˆ1ï¼‰tableä¸ä¸ºåˆå§‹åŒ– ï¼ˆ2ï¼‰å®šä½åˆ°tableä½ç½®iä¸å­˜åœ¨å…ƒç´ ï¼ˆæ­¤æ—¶ä¼šç”¨CASæ–¹å¼è¿›è¡Œæ·»åŠ ï¼‰ï¼ˆ3ï¼‰æ•°ç»„ä¹Ÿæ²¡æœ‰åœ¨è¿›è¡Œæ‰©å¼ ï¼ˆMOVED=-1ï¼‰ æ­¤æ—¶æ‰ä¼šè¿›è¡Œsynchronized æ·»åŠ å…ƒç´ ï¼ˆä¸ä¼šé”ä½rehashæ–¹æ³•ï¼Œæœ€åæ‰åˆ¤æ–­æ˜¯å¦æ‰©å®¹ï¼‰ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192/* * å½“æ·»åŠ ä¸€å¯¹é”®å€¼å¯¹çš„æ—¶å€™ï¼Œé¦–å…ˆä¼šå»åˆ¤æ–­ä¿å­˜è¿™äº›é”®å€¼å¯¹çš„æ•°ç»„æ˜¯ä¸æ˜¯åˆå§‹åŒ–äº†ï¼Œ * å¦‚æœæ²¡æœ‰çš„è¯å°±åˆå§‹åŒ–æ•°ç»„ * ç„¶åé€šè¿‡è®¡ç®—hashå€¼æ¥ç¡®å®šæ”¾åœ¨æ•°ç»„çš„å“ªä¸ªä½ç½® * å¦‚æœè¿™ä¸ªä½ç½®ä¸ºç©ºåˆ™ç›´æ¥æ·»åŠ ï¼Œå¦‚æœä¸ä¸ºç©ºçš„è¯ï¼Œåˆ™å–å‡ºè¿™ä¸ªèŠ‚ç‚¹æ¥ * å¦‚æœå–å‡ºæ¥çš„èŠ‚ç‚¹çš„hashå€¼æ˜¯MOVED(-1)çš„è¯ï¼Œåˆ™è¡¨ç¤ºå½“å‰æ­£åœ¨å¯¹è¿™ä¸ªæ•°ç»„è¿›è¡Œæ‰©å®¹ï¼Œå¤åˆ¶åˆ°æ–°çš„æ•°ç»„ï¼Œåˆ™å½“å‰çº¿ç¨‹ä¹Ÿå»å¸®åŠ©å¤åˆ¶ * æœ€åä¸€ç§æƒ…å†µå°±æ˜¯ï¼Œå¦‚æœè¿™ä¸ªèŠ‚ç‚¹ï¼Œä¸ä¸ºç©ºï¼Œä¹Ÿä¸åœ¨æ‰©å®¹ï¼Œåˆ™é€šè¿‡synchronizedæ¥åŠ é”ï¼Œè¿›è¡Œæ·»åŠ æ“ä½œ * ç„¶ååˆ¤æ–­å½“å‰å–å‡ºçš„èŠ‚ç‚¹ä½ç½®å­˜æ”¾çš„æ˜¯é“¾è¡¨è¿˜æ˜¯æ ‘ * å¦‚æœæ˜¯é“¾è¡¨çš„è¯ï¼Œåˆ™éå†æ•´ä¸ªé“¾è¡¨ï¼Œç›´åˆ°å–å‡ºæ¥çš„èŠ‚ç‚¹çš„keyæ¥ä¸ªè¦æ”¾çš„keyè¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœkeyç›¸ç­‰ï¼Œå¹¶ä¸”keyçš„hashå€¼ä¹Ÿç›¸ç­‰çš„è¯ï¼Œ * åˆ™è¯´æ˜æ˜¯åŒä¸€ä¸ªkeyï¼Œåˆ™è¦†ç›–æ‰valueï¼Œå¦åˆ™çš„è¯åˆ™æ·»åŠ åˆ°é“¾è¡¨çš„æœ«å°¾ * å¦‚æœæ˜¯æ ‘çš„è¯ï¼Œåˆ™è°ƒç”¨putTreeValæ–¹æ³•æŠŠè¿™ä¸ªå…ƒç´ æ·»åŠ åˆ°æ ‘ä¸­å» * æœ€ååœ¨æ·»åŠ å®Œæˆä¹‹åï¼Œä¼šåˆ¤æ–­åœ¨è¯¥èŠ‚ç‚¹å¤„å…±æœ‰å¤šå°‘ä¸ªèŠ‚ç‚¹ï¼ˆæ³¨æ„æ˜¯æ·»åŠ å‰çš„ä¸ªæ•°ï¼‰ï¼Œå¦‚æœè¾¾åˆ°8ä¸ªä»¥ä¸Šäº†çš„è¯ï¼Œ * åˆ™è°ƒç”¨treeifyBinæ–¹æ³•æ¥å°è¯•å°†å¤„çš„é“¾è¡¨è½¬ä¸ºæ ‘ï¼Œæˆ–è€…æ‰©å®¹æ•°ç»„ */final V putVal(K key, V value, boolean onlyIfAbsent) &#123; if (key == null || value == null) throw new NullPointerException();//K,Véƒ½ä¸èƒ½ä¸ºç©ºï¼Œå¦åˆ™çš„è¯è·‘å‡ºå¼‚å¸¸ int hash = spread(key.hashCode()); //å–å¾—keyçš„hashå€¼ int binCount = 0; //ç”¨æ¥è®¡ç®—åœ¨è¿™ä¸ªèŠ‚ç‚¹æ€»å…±æœ‰å¤šå°‘ä¸ªå…ƒç´ ï¼Œç”¨æ¥æ§åˆ¶æ‰©å®¹æˆ–è€…è½¬ç§»ä¸ºæ ‘ for (Node&lt;K,V&gt;[] tab = table;;) &#123; // Node&lt;K,V&gt; f; int n, i, fh; if (tab == null || (n = tab.length) == 0) tab = initTable(); //ç¬¬ä¸€æ¬¡putçš„æ—¶å€™tableæ²¡æœ‰åˆå§‹åŒ–ï¼Œåˆ™åˆå§‹åŒ–table else if ((f = tabAt(tab, i = (n - 1) &amp; hash)) == null) &#123; //é€šè¿‡å“ˆå¸Œè®¡ç®—å‡ºä¸€ä¸ªè¡¨ä¸­çš„ä½ç½®å› ä¸ºnæ˜¯æ•°ç»„çš„é•¿åº¦ï¼Œæ‰€ä»¥(n-1)&amp;hashè‚¯å®šä¸ä¼šå‡ºç°æ•°ç»„è¶Šç•Œ if (casTabAt(tab, i, null, //å¦‚æœè¿™ä¸ªä½ç½®æ²¡æœ‰å…ƒç´ çš„è¯ï¼Œåˆ™é€šè¿‡casçš„æ–¹å¼å°è¯•æ·»åŠ ï¼Œæ³¨æ„è¿™ä¸ªæ—¶å€™æ˜¯æ²¡æœ‰åŠ é”çš„ new Node&lt;K,V&gt;(hash, key, value, null))) //åˆ›å»ºä¸€ä¸ªNodeæ·»åŠ åˆ°æ•°ç»„ä¸­åŒºï¼Œnullè¡¨ç¤ºçš„æ˜¯ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸ºç©º break; // no lock when adding to empty bin &#125; /* * å¦‚æœæ£€æµ‹åˆ°æŸä¸ªèŠ‚ç‚¹çš„hashå€¼æ˜¯MOVEDï¼Œåˆ™è¡¨ç¤ºæ­£åœ¨è¿›è¡Œæ•°ç»„æ‰©å¼ çš„æ•°æ®å¤åˆ¶é˜¶æ®µï¼Œ * åˆ™å½“å‰çº¿ç¨‹ä¹Ÿä¼šå‚ä¸å»å¤åˆ¶ï¼Œé€šè¿‡å…è®¸å¤šçº¿ç¨‹å¤åˆ¶çš„åŠŸèƒ½ï¼Œä¸€æ¬¡æ¥å‡å°‘æ•°ç»„çš„å¤åˆ¶æ‰€å¸¦æ¥çš„æ€§èƒ½æŸå¤± */ else if ((fh = f.hash) == MOVED) tab = helpTransfer(tab, f); else &#123; /* * å¦‚æœåœ¨è¿™ä¸ªä½ç½®æœ‰å…ƒç´ çš„è¯ï¼Œå°±é‡‡ç”¨synchronizedçš„æ–¹å¼åŠ é”ï¼Œ * å¦‚æœæ˜¯é“¾è¡¨çš„è¯(hashå¤§äº0)ï¼Œå°±å¯¹è¿™ä¸ªé“¾è¡¨çš„æ‰€æœ‰å…ƒç´ è¿›è¡Œéå†ï¼Œ * å¦‚æœæ‰¾åˆ°äº†keyå’Œkeyçš„hashå€¼éƒ½ä¸€æ ·çš„èŠ‚ç‚¹ï¼Œåˆ™æŠŠå®ƒçš„å€¼æ›¿æ¢åˆ° * å¦‚æœæ²¡æ‰¾åˆ°çš„è¯ï¼Œåˆ™æ·»åŠ åœ¨é“¾è¡¨çš„æœ€åé¢ * å¦åˆ™ï¼Œæ˜¯æ ‘çš„è¯ï¼Œåˆ™è°ƒç”¨putTreeValæ–¹æ³•æ·»åŠ åˆ°æ ‘ä¸­å» * * åœ¨æ·»åŠ å®Œä¹‹åï¼Œä¼šå¯¹è¯¥èŠ‚ç‚¹ä¸Šå…³è”çš„çš„æ•°ç›®è¿›è¡Œåˆ¤æ–­ï¼Œ * å¦‚æœåœ¨8ä¸ªä»¥ä¸Šçš„è¯ï¼Œåˆ™ä¼šè°ƒç”¨treeifyBinæ–¹æ³•ï¼Œæ¥å°è¯•è½¬åŒ–ä¸ºæ ‘ï¼Œæˆ–è€…æ˜¯æ‰©å®¹ */ V oldVal = null; synchronized (f) &#123; if (tabAt(tab, i) == f) &#123; //å†æ¬¡å–å‡ºè¦å­˜å‚¨çš„ä½ç½®çš„å…ƒç´ ï¼Œè·Ÿå‰é¢å–å‡ºæ¥çš„æ¯”è¾ƒ if (fh &gt;= 0) &#123; //å–å‡ºæ¥çš„å…ƒç´ çš„hashå€¼å¤§äº0ï¼Œå½“è½¬æ¢ä¸ºæ ‘ä¹‹åï¼Œhashå€¼ä¸º-2 binCount = 1; for (Node&lt;K,V&gt; e = f;; ++binCount) &#123; //éå†è¿™ä¸ªé“¾è¡¨ K ek; if (e.hash == hash &amp;&amp; //è¦å­˜çš„å…ƒç´ çš„hashï¼Œkeyè·Ÿè¦å­˜å‚¨çš„ä½ç½®çš„èŠ‚ç‚¹çš„ç›¸åŒçš„æ—¶å€™ï¼Œæ›¿æ¢æ‰è¯¥èŠ‚ç‚¹çš„valueå³å¯ ((ek = e.key) == key || (ek != null &amp;&amp; key.equals(ek)))) &#123; oldVal = e.val; if (!onlyIfAbsent) //å½“ä½¿ç”¨putIfAbsentçš„æ—¶å€™ï¼Œåªæœ‰åœ¨è¿™ä¸ªkeyæ²¡æœ‰è®¾ç½®å€¼å¾—æ—¶å€™æ‰è®¾ç½® e.val = value; break; &#125; Node&lt;K,V&gt; pred = e; if ((e = e.next) == null) &#123; //å¦‚æœä¸æ˜¯åŒæ ·çš„hashï¼ŒåŒæ ·çš„keyçš„æ—¶å€™ï¼Œåˆ™åˆ¤æ–­è¯¥èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯å¦ä¸ºç©ºï¼Œ pred.next = new Node&lt;K,V&gt;(hash, key, //ä¸ºç©ºçš„è¯æŠŠè¿™ä¸ªè¦åŠ å…¥çš„èŠ‚ç‚¹è®¾ç½®ä¸ºå½“å‰èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ value, null); break; &#125; &#125; &#125; else if (f instanceof TreeBin) &#123; //è¡¨ç¤ºå·²ç»è½¬åŒ–æˆçº¢é»‘æ ‘ç±»å‹äº† Node&lt;K,V&gt; p; binCount = 2; if ((p = ((TreeBin&lt;K,V&gt;)f).putTreeVal(hash, key, //è°ƒç”¨putTreeValæ–¹æ³•ï¼Œå°†è¯¥å…ƒç´ æ·»åŠ åˆ°æ ‘ä¸­å» value)) != null) &#123; oldVal = p.val; if (!onlyIfAbsent) p.val = value; &#125; &#125; &#125; &#125; if (binCount != 0) &#123; if (binCount &gt;= TREEIFY_THRESHOLD) //å½“åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹çš„æ•°ç›®è¾¾åˆ°8ä¸ªçš„æ—¶å€™ï¼Œåˆ™æ‰©å¼ æ•°ç»„æˆ–å°†ç»™èŠ‚ç‚¹çš„æ•°æ®è½¬ä¸ºtree treeifyBin(tab, i); if (oldVal != null) return oldVal; break; &#125; &#125; &#125; addCount(1L, binCount); //è®¡æ•°ï¼Œå¯èƒ½ä¹Ÿä¼šè§¦å‘æ‰©å®¹ return null; &#125; æ‰©å®¹transfer æ‰©å®¹ä¸»è¦æ˜¯é€šè¿‡transferæ–¹æ³•æ¥è¿›è¡Œçš„ã€‚ åªæœ‰åœ¨å¾€mapä¸­æ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œåœ¨æŸä¸€ä¸ªèŠ‚ç‚¹çš„æ•°ç›®å·²ç»è¶…è¿‡äº†8ä¸ªï¼Œè°ƒç”¨treeifyBin() è§¦å‘æ•°ç»„çš„æ‰©å®¹/è½¬æ¢ä¸ºæ•°ï¼› ä½¿ç”¨**addCount()**æ·»åŠ å…ƒç´ æ•°ç»„å…ƒç´ ï¼Œä¼šè¿›è¡Œåˆ¤æ–­è¾¾åˆ°äº†sizeCtlçš„æ•°é‡çš„æ—¶å€™ï¼Œåˆ™ä¼šè°ƒç”¨transferæ–¹æ³•æ¥è¿›è¡Œæ‰©å®¹ treeifyBin() æŸä¸€ä¸ªèŠ‚ç‚¹çš„æ•°ç›®å·²ç»è¶…è¿‡äº†8ä¸ªï¼Œæ‰§è¡ŒtreeifyBin() ã€‚ å½“éœ€è¦æ‰©å®¹çš„æ—¶å€™ï¼Œè°ƒç”¨çš„æ—¶å€™tryPresizeæ–¹æ³• ï¼ˆ1ï¼‰tryPresizeæ–¹æ³•å¹¶æ²¡æœ‰åŠ é”ï¼Œå…è®¸å¤šä¸ªçº¿ç¨‹è¿›å…¥ï¼Œå¦‚æœæ•°ç»„æ­£åœ¨æ‰©å¼ ï¼Œåˆ™å½“å‰çº¿ç¨‹ä¹Ÿå»å¸®åŠ©æ‰©å®¹ä½¿ç”¨transferæ–¹æ³• ï¼ˆ2ï¼‰transferæ¯”è¾ƒå¤æ‚è¿˜æ²¡æœ‰è¯¦ç»†çœ‹ï¼Œå®ƒé‡Œé¢ä½¿ç”¨çš„synchronized è¿›è¡Œå•ä¸ªèŠ‚ç‚¹å¤„ç†æ‰©å®¹ ï¼ˆæŸ¥çœ‹ä¸Šé¢çœ‹transferæºç ï¼‰ å¦åˆ™synchronizedè¿›è¡Œé“¾è¡¨è½¬æ¢ä¸ºæ ‘ 1234567891011121314151617181920212223242526272829/* * å½“æ•°ç»„é•¿åº¦å°äº64çš„æ—¶å€™ï¼Œæ‰©å¼ æ•°ç»„é•¿åº¦ä¸€å€ï¼Œå¦åˆ™çš„è¯æŠŠé“¾è¡¨è½¬ä¸ºæ ‘ */ private final void treeifyBin(Node&lt;K,V&gt;[] tab, int index) &#123; Node&lt;K,V&gt; b; int n, sc; if (tab != null) &#123; System.out.println(&quot;treeifyBinæ–¹\\t==&gt;æ•°ç»„é•¿ï¼š&quot;+tab.length); if ((n = tab.length) &lt; MIN_TREEIFY_CAPACITY) //MIN_TREEIFY_CAPACITY 64 tryPresize(n &lt;&lt; 1); // æ•°ç»„æ‰©å®¹ else if ((b = tabAt(tab, index)) != null &amp;&amp; b.hash &gt;= 0) &#123; synchronized (b) &#123; //ä½¿ç”¨synchronizedåŒæ­¥å™¨ï¼Œå°†è¯¥èŠ‚ç‚¹å‡ºçš„é“¾è¡¨è½¬ä¸ºæ ‘ if (tabAt(tab, index) == b) &#123; TreeNode&lt;K,V&gt; hd = null, tl = null; //hdï¼šæ ‘çš„å¤´(head) for (Node&lt;K,V&gt; e = b; e != null; e = e.next) &#123; TreeNode&lt;K,V&gt; p = new TreeNode&lt;K,V&gt;(e.hash, e.key, e.val, null, null); if ((p.prev = tl) == null) //æŠŠNodeç»„æˆçš„é“¾è¡¨ï¼Œè½¬åŒ–ä¸ºTreeNodeçš„é“¾è¡¨ï¼Œå¤´ç»“ç‚¹ä»»ç„¶æ”¾åœ¨ç›¸åŒçš„ä½ç½® hd = p; //è®¾ç½®head else tl.next = p; tl = p; &#125; setTabAt(tab, index, new TreeBin&lt;K,V&gt;(hd));//æŠŠTreeNodeçš„é“¾è¡¨æ”¾å…¥å®¹å™¨TreeBinä¸­ &#125; &#125; &#125; &#125; &#125; addCount() addCountä¹Ÿä¸»è¦æ˜¯è°ƒç”¨transferï¼Œè¿™é‡Œä¸»è¦è¿˜æ˜¯å¯„ä¸€ä¸‹transferçš„æºç ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187/** * Moves and/or copies the nodes in each bin to new table. See * above for explanation. * æŠŠæ•°ç»„ä¸­çš„èŠ‚ç‚¹å¤åˆ¶åˆ°æ–°çš„æ•°ç»„çš„ç›¸åŒä½ç½®ï¼Œæˆ–è€…ç§»åŠ¨åˆ°æ‰©å¼ éƒ¨åˆ†çš„ç›¸åŒä½ç½® * åœ¨è¿™é‡Œé¦–å…ˆä¼šè®¡ç®—ä¸€ä¸ªæ­¥é•¿ï¼Œè¡¨ç¤ºä¸€ä¸ªçº¿ç¨‹å¤„ç†çš„æ•°ç»„é•¿åº¦ï¼Œç”¨æ¥æ§åˆ¶å¯¹CPUçš„ä½¿ç”¨ï¼Œ * æ¯ä¸ªCPUæœ€å°‘å¤„ç†16ä¸ªé•¿åº¦çš„æ•°ç»„å…ƒç´ ,ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä¸€ä¸ªæ•°ç»„çš„é•¿åº¦åªæœ‰16ï¼Œé‚£åªæœ‰ä¸€ä¸ªçº¿ç¨‹ä¼šå¯¹å…¶è¿›è¡Œæ‰©å®¹çš„å¤åˆ¶ç§»åŠ¨æ“ä½œ * æ‰©å®¹çš„æ—¶å€™ä¼šä¸€ç›´éå†ï¼ŒçŸ¥é“å¤åˆ¶å®Œæ‰€æœ‰èŠ‚ç‚¹ï¼Œæ²¡å¤„ç†ä¸€ä¸ªèŠ‚ç‚¹çš„æ—¶å€™ä¼šåœ¨é“¾è¡¨çš„å¤´éƒ¨è®¾ç½®ä¸€ä¸ªfwdèŠ‚ç‚¹ï¼Œè¿™æ ·å…¶ä»–çº¿ç¨‹å°±ä¼šè·³è¿‡ä»–ï¼Œ * å¤åˆ¶ååœ¨æ–°æ•°ç»„ä¸­çš„é“¾è¡¨ä¸æ˜¯ç»å¯¹çš„ååºçš„ */ private final void transfer(Node&lt;K,V&gt;[] tab, Node&lt;K,V&gt;[] nextTab) &#123; int n = tab.length, stride; if ((stride = (NCPU &gt; 1) ? (n &gt;&gt;&gt; 3) / NCPU : n) &lt; MIN_TRANSFER_STRIDE) //MIN_TRANSFER_STRIDE ç”¨æ¥æ§åˆ¶ä¸è¦å ç”¨å¤ªå¤šCPU stride = MIN_TRANSFER_STRIDE; // subdivide range //MIN_TRANSFER_STRIDE=16 /* * å¦‚æœå¤åˆ¶çš„ç›®æ ‡nextTabä¸ºnullçš„è¯ï¼Œåˆ™åˆå§‹åŒ–ä¸€ä¸ªtableä¸¤å€é•¿çš„nextTab * æ­¤æ—¶nextTableè¢«è®¾ç½®å€¼äº†(åœ¨åˆå§‹æƒ…å†µä¸‹æ˜¯ä¸ºnullçš„) * å› ä¸ºå¦‚æœæœ‰ä¸€ä¸ªçº¿ç¨‹å¼€å§‹äº†è¡¨çš„æ‰©å¼ çš„æ—¶å€™ï¼Œå…¶ä»–çº¿ç¨‹ä¹Ÿä¼šè¿›æ¥å¸®å¿™æ‰©å¼ ï¼Œ * è€Œåªæ˜¯ç¬¬ä¸€ä¸ªå¼€å§‹æ‰©å¼ çš„çº¿ç¨‹éœ€è¦åˆå§‹åŒ–ä¸‹ç›®æ ‡æ•°ç»„ */ if (nextTab == null) &#123; // initiating try &#123; @SuppressWarnings(&quot;unchecked&quot;) Node&lt;K,V&gt;[] nt = (Node&lt;K,V&gt;[])new Node&lt;?,?&gt;[n &lt;&lt; 1]; nextTab = nt; &#125; catch (Throwable ex) &#123; // try to cope with OOME sizeCtl = Integer.MAX_VALUE; return; &#125; nextTable = nextTab; transferIndex = n; &#125; int nextn = nextTab.length; /* * åˆ›å»ºä¸€ä¸ªfwdèŠ‚ç‚¹ï¼Œè¿™ä¸ªæ˜¯ç”¨æ¥æ§åˆ¶å¹¶å‘çš„ï¼Œå½“ä¸€ä¸ªèŠ‚ç‚¹ä¸ºç©ºæˆ–å·²ç»è¢«è½¬ç§»ä¹‹åï¼Œå°±è®¾ç½®ä¸ºfwdèŠ‚ç‚¹ * è¿™æ˜¯ä¸€ä¸ªç©ºçš„æ ‡å¿—èŠ‚ç‚¹ */ ForwardingNode&lt;K,V&gt; fwd = new ForwardingNode&lt;K,V&gt;(nextTab); boolean advance = true; //æ˜¯å¦ç»§ç»­å‘å‰æŸ¥æ‰¾çš„æ ‡å¿—ä½ boolean finishing = false; // to ensure sweep(æ¸…æ‰«) before committing nextTab,åœ¨å®Œæˆä¹‹å‰é‡æ–°åœ¨æ‰«æä¸€éæ•°ç»„ï¼Œçœ‹çœ‹æœ‰æ²¡å®Œæˆçš„æ²¡ for (int i = 0, bound = 0;;) &#123; Node&lt;K,V&gt; f; int fh; while (advance) &#123; int nextIndex, nextBound; if (--i &gt;= bound || finishing) &#123; advance = false; &#125; else if ((nextIndex = transferIndex) &lt;= 0) &#123; i = -1; advance = false; &#125; else if (U.compareAndSwapInt (this, TRANSFERINDEX, nextIndex, nextBound = (nextIndex &gt; stride ? nextIndex - stride : 0))) &#123; bound = nextBound; i = nextIndex - 1; advance = false; &#125; &#125; if (i &lt; 0 || i &gt;= n || i + n &gt;= nextn) &#123; int sc; if (finishing) &#123; //å·²ç»å®Œæˆè½¬ç§» nextTable = null; table = nextTab; sizeCtl = (n &lt;&lt; 1) - (n &gt;&gt;&gt; 1); //è®¾ç½®sizeCtlä¸ºæ‰©å®¹åçš„0.75 return; &#125; if (U.compareAndSwapInt(this, SIZECTL, sc = sizeCtl, sc - 1)) &#123; if ((sc - 2) != resizeStamp(n) &lt;&lt; RESIZE_STAMP_SHIFT) &#123; return; &#125; finishing = advance = true; i = n; // recheck before commit &#125; &#125; else if ((f = tabAt(tab, i)) == null) //æ•°ç»„ä¸­æŠŠnullçš„å…ƒç´ è®¾ç½®ä¸ºForwardingNodeèŠ‚ç‚¹(hashå€¼ä¸ºMOVED[-1]) advance = casTabAt(tab, i, null, fwd); else if ((fh = f.hash) == MOVED) advance = true; // already processed else &#123; synchronized (f) &#123; //åŠ é”æ“ä½œ if (tabAt(tab, i) == f) &#123; Node&lt;K,V&gt; ln, hn; if (fh &gt;= 0) &#123; //è¯¥èŠ‚ç‚¹çš„hashå€¼å¤§äºç­‰äº0ï¼Œè¯´æ˜æ˜¯ä¸€ä¸ªNodeèŠ‚ç‚¹ /* * å› ä¸ºnçš„å€¼ä¸ºæ•°ç»„çš„é•¿åº¦ï¼Œä¸”æ˜¯power(2,x)çš„ï¼Œæ‰€ä»¥ï¼Œåœ¨&amp;æ“ä½œçš„ç»“æœåªå¯èƒ½æ˜¯0æˆ–è€…n * æ ¹æ®è¿™ä¸ªè§„åˆ™ * 0--&gt; æ”¾åœ¨æ–°è¡¨çš„ç›¸åŒä½ç½® * n--&gt; æ”¾åœ¨æ–°è¡¨çš„ï¼ˆn+åŸæ¥ä½ç½®ï¼‰ */ int runBit = fh &amp; n; Node&lt;K,V&gt; lastRun = f; /* * lastRun è¡¨ç¤ºçš„æ˜¯éœ€è¦å¤åˆ¶çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ * æ¯å½“æ–°èŠ‚ç‚¹çš„hash&amp;n -&gt; b å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œå°±æŠŠrunBitè®¾ç½®ä¸ºè¿™ä¸ªç»“æœb * è¿™æ ·forå¾ªç¯ä¹‹åï¼ŒrunBitçš„å€¼å°±æ˜¯æœ€åä¸å˜çš„hash&amp;nçš„å€¼ * è€ŒlastRunçš„å€¼å°±æ˜¯æœ€åä¸€æ¬¡å¯¼è‡´hash&amp;n å‘ç”Ÿå˜åŒ–çš„èŠ‚ç‚¹(å‡è®¾ä¸ºpèŠ‚ç‚¹) * ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšå‘¢ï¼Ÿå› ä¸ºpèŠ‚ç‚¹åé¢çš„èŠ‚ç‚¹çš„hash&amp;n å€¼è·ŸpèŠ‚ç‚¹æ˜¯ä¸€æ ·çš„ï¼Œ * æ‰€ä»¥åœ¨å¤åˆ¶åˆ°æ–°çš„tableçš„æ—¶å€™ï¼Œå®ƒè‚¯å®šè¿˜æ˜¯è·ŸpèŠ‚ç‚¹åœ¨åŒä¸€ä¸ªä½ç½® * åœ¨å¤åˆ¶å®ŒpèŠ‚ç‚¹ä¹‹åï¼ŒpèŠ‚ç‚¹çš„nextèŠ‚ç‚¹è¿˜æ˜¯æŒ‡å‘å®ƒåŸæ¥çš„èŠ‚ç‚¹ï¼Œå°±ä¸éœ€è¦è¿›è¡Œå¤åˆ¶äº†ï¼Œè‡ªå·±å°±è¢«å¸¦è¿‡å»äº† * è¿™ä¹Ÿå°±å¯¼è‡´äº†ä¸€ä¸ªé—®é¢˜å°±æ˜¯å¤åˆ¶åçš„é“¾è¡¨çš„é¡ºåºå¹¶ä¸ä¸€å®šæ˜¯åŸæ¥çš„å€’åº */ for (Node&lt;K,V&gt; p = f.next; p != null; p = p.next) &#123; int b = p.hash &amp; n; //nçš„å€¼ä¸ºæ‰©å¼ å‰çš„æ•°ç»„çš„é•¿åº¦ if (b != runBit) &#123; runBit = b; lastRun = p; &#125; &#125; if (runBit == 0) &#123; ln = lastRun; hn = null; &#125; else &#123; hn = lastRun; ln = null; &#125; /* * æ„é€ ä¸¤ä¸ªé“¾è¡¨ï¼Œé¡ºåºå¤§éƒ¨åˆ†å’ŒåŸæ¥æ˜¯åçš„ * åˆ†åˆ«æ”¾åˆ°åŸæ¥çš„ä½ç½®å’Œæ–°å¢åŠ çš„é•¿åº¦çš„ç›¸åŒä½ç½®(i/n+i) */ for (Node&lt;K,V&gt; p = f; p != lastRun; p = p.next) &#123; int ph = p.hash; K pk = p.key; V pv = p.val; if ((ph &amp; n) == 0) /* * å‡è®¾runBitçš„å€¼ä¸º0ï¼Œ * åˆ™ç¬¬ä¸€æ¬¡è¿›å…¥è¿™ä¸ªè®¾ç½®çš„æ—¶å€™ç›¸å½“äºæŠŠæ—§çš„åºåˆ—çš„æœ€åä¸€æ¬¡å‘ç”Ÿhashå˜åŒ–çš„èŠ‚ç‚¹(è¯¥èŠ‚ç‚¹åé¢å¯èƒ½è¿˜æœ‰hashè®¡ç®—ååŒä¸º0çš„èŠ‚ç‚¹)è®¾ç½®åˆ°æ—§çš„tableçš„ç¬¬ä¸€ä¸ªhashè®¡ç®—åä¸º0çš„èŠ‚ç‚¹ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ * å¹¶ä¸”æŠŠè‡ªå·±è¿”å›ï¼Œç„¶ååœ¨ä¸‹æ¬¡è¿›æ¥çš„æ—¶å€™æŠŠå®ƒè‡ªå·±è®¾ç½®ä¸ºåé¢èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ */ ln = new Node&lt;K,V&gt;(ph, pk, pv, ln); else /* * å‡è®¾runBitçš„å€¼ä¸ä¸º0ï¼Œ * åˆ™ç¬¬ä¸€æ¬¡è¿›å…¥è¿™ä¸ªè®¾ç½®çš„æ—¶å€™ç›¸å½“äºæŠŠæ—§çš„åºåˆ—çš„æœ€åä¸€æ¬¡å‘ç”Ÿhashå˜åŒ–çš„èŠ‚ç‚¹(è¯¥èŠ‚ç‚¹åé¢å¯èƒ½è¿˜æœ‰hashè®¡ç®—ååŒä¸ä¸º0çš„èŠ‚ç‚¹)è®¾ç½®åˆ°æ—§çš„tableçš„ç¬¬ä¸€ä¸ªhashè®¡ç®—åä¸ä¸º0çš„èŠ‚ç‚¹ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ * å¹¶ä¸”æŠŠè‡ªå·±è¿”å›ï¼Œç„¶ååœ¨ä¸‹æ¬¡è¿›æ¥çš„æ—¶å€™æŠŠå®ƒè‡ªå·±è®¾ç½®ä¸ºåé¢èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ */ hn = new Node&lt;K,V&gt;(ph, pk, pv, hn); &#125; setTabAt(nextTab, i, ln); setTabAt(nextTab, i + n, hn); setTabAt(tab, i, fwd); advance = true; &#125; else if (f instanceof TreeBin) &#123; //å¦åˆ™çš„è¯æ˜¯ä¸€ä¸ªæ ‘èŠ‚ç‚¹ TreeBin&lt;K,V&gt; t = (TreeBin&lt;K,V&gt;)f; TreeNode&lt;K,V&gt; lo = null, loTail = null; TreeNode&lt;K,V&gt; hi = null, hiTail = null; int lc = 0, hc = 0; for (Node&lt;K,V&gt; e = t.first; e != null; e = e.next) &#123; int h = e.hash; TreeNode&lt;K,V&gt; p = new TreeNode&lt;K,V&gt; (h, e.key, e.val, null, null); if ((h &amp; n) == 0) &#123; if ((p.prev = loTail) == null) lo = p; else loTail.next = p; loTail = p; ++lc; &#125; else &#123; if ((p.prev = hiTail) == null) hi = p; else hiTail.next = p; hiTail = p; ++hc; &#125; &#125; /* * åœ¨å¤åˆ¶å®Œæ ‘èŠ‚ç‚¹ä¹‹åï¼Œåˆ¤æ–­è¯¥èŠ‚ç‚¹å¤„æ„æˆçš„æ ‘è¿˜æœ‰å‡ ä¸ªèŠ‚ç‚¹ï¼Œ * å¦‚æœâ‰¤6ä¸ªçš„è¯ï¼Œå°±è½¬å›ä¸ºä¸€ä¸ªé“¾è¡¨ */ ln = (lc &lt;= UNTREEIFY_THRESHOLD) ? untreeify(lo) : (hc != 0) ? new TreeBin&lt;K,V&gt;(lo) : t; hn = (hc &lt;= UNTREEIFY_THRESHOLD) ? untreeify(hi) : (lc != 0) ? new TreeBin&lt;K,V&gt;(hi) : t; setTabAt(nextTab, i, ln); setTabAt(nextTab, i + n, hn); setTabAt(tab, i, fwd); advance = true; &#125; &#125; &#125; &#125; &#125; &#125; getæ–¹æ³• getæ“ä½œä¸­ï¼Œæ ¹æœ¬æ²¡æœ‰ä½¿ç”¨åŒæ­¥æœºåˆ¶ï¼Œä¹Ÿæ²¡æœ‰ä½¿ç”¨unsafeæ–¹æ³•ï¼Œæ‰€ä»¥è¯»ï¼ˆgetï¼‰æ“ä½œæ˜¯æ”¯æŒå¹¶å‘æ“ä½œçš„ã€‚ 123456789101112131415161718192021222324252627/* * ç›¸æ¯”putæ–¹æ³•ï¼Œgetå°±å¾ˆå•çº¯äº†ï¼Œæ”¯æŒå¹¶å‘æ“ä½œï¼Œ * å½“keyä¸ºnullçš„æ—¶å€™å›æŠ›å‡ºNullPointerExceptionçš„å¼‚å¸¸ * getæ“ä½œé€šè¿‡é¦–å…ˆè®¡ç®—keyçš„hashå€¼æ¥ç¡®å®šè¯¥å…ƒç´ æ”¾åœ¨æ•°ç»„çš„å“ªä¸ªä½ç½® * ç„¶åéå†è¯¥ä½ç½®çš„æ‰€æœ‰èŠ‚ç‚¹ * å¦‚æœä¸å­˜åœ¨çš„è¯è¿”å›null */ public V get(Object key) &#123; Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; e, p; int n, eh; K ek; int h = spread(key.hashCode()); if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp; (e = tabAt(tab, (n - 1) &amp; h)) != null) &#123; if ((eh = e.hash) == h) &#123; if ((ek = e.key) == key || (ek != null &amp;&amp; key.equals(ek))) return e.val; &#125; else if (eh &lt; 0) return (p = e.find(h, key)) != null ? p.val : null; while ((e = e.next) != null) &#123; if (e.hash == h &amp;&amp; ((ek = e.key) == key || (ek != null &amp;&amp; key.equals(ek)))) return e.val; &#125; &#125; return null; &#125; 7.1 ä½ çŸ¥é“ ConcurrentHashMap çš„å·¥ä½œåŸç†å—ï¼Ÿ Java7 ä¸­ ConcurrentHashMap ä½¿ç”¨çš„åˆ†æ®µé”ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸€ä¸ª Segment ä¸ŠåŒæ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ“ä½œï¼Œæ¯ä¸€ä¸ª Segment éƒ½æ˜¯ä¸€ä¸ªç±»ä¼¼ HashMap æ•°ç»„çš„ç»“æ„ï¼Œå®ƒå¯ä»¥æ‰©å®¹ï¼Œå®ƒçš„å†²çªä¼šè½¬åŒ–ä¸ºé“¾è¡¨ã€‚ä½†æ˜¯ Segment çš„ä¸ªæ•°ä¸€ä½†åˆå§‹åŒ–å°±ä¸èƒ½æ”¹å˜ã€‚ ä¸»è¦é‡‡ç”¨é”æœºåˆ¶ï¼Œåœ¨å¯¹æŸä¸ªSegmentè¿›è¡Œæ“ä½œæ—¶ï¼Œå°†è¯¥Segmenté”å®šï¼Œä¸å…è®¸å¯¹å…¶è¿›è¡ŒéæŸ¥è¯¢æ“ä½œ Java8 ä¸­çš„ ConcurrentHashMap ä½¿ç”¨çš„ Synchronized é”åŠ  CAS çš„æœºåˆ¶ã€‚ç»“æ„ä¹Ÿç”± Java7 ä¸­çš„ Segment æ•°ç»„ + HashEntry æ•°ç»„ + é“¾è¡¨ è¿›åŒ–æˆäº† Node æ•°ç»„ + é“¾è¡¨ / çº¢é»‘æ ‘ï¼ŒNode æ˜¯ç±»ä¼¼äºä¸€ä¸ª HashEntry çš„ç»“æ„ã€‚å®ƒçš„å†²çªå†è¾¾åˆ°ä¸€å®šå¤§å°æ—¶ä¼šè½¬åŒ–æˆçº¢é»‘æ ‘ï¼Œåœ¨å†²çªå°äºä¸€å®šæ•°é‡æ—¶åˆé€€å›é“¾è¡¨ã€‚ CASæ— é”ç®—æ³•ï¼Œè¿™ç§ä¹è§‚æ“ä½œåœ¨å®Œæˆå‰è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœç¬¦åˆé¢„æœŸç»“æœæ‰ç»™äºˆæ‰§è¡Œ 7.2 è¯·é—®ConcurrentHashMapä¸­å˜é‡ä½¿ç”¨finalå’Œvolatileä¿®é¥°æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå…¶ä¸­é“¾è¡¨æ˜¯finalçš„nextå±æ€§ï¼Œé‚£ä¹ˆå‘ç”Ÿåˆ é™¤æŸä¸ªå…ƒç´ ï¼Œå¦‚ä½•å®ç°çš„ï¼Ÿ ConcurrentHashMapè¢«finalä¿®é¥°çš„å˜é‡ï¼Œï¼ˆéƒ¨åˆ†ï¼‰å¦‚ä¸‹ï¼š 1234567891011121314// é»˜è®¤åˆå§‹å®¹é‡static final int DEFAULT_INITIAL_CAPACITY = 16;// é»˜è®¤åŠ è½½å› å­static final float DEFAULT_LOAD_FACTOR = 0.75f;// é»˜è®¤segmentå±‚çº§static final int DEFAULT_CONCURRENCY_LEVEL = 16;// æœ€å¤§å®¹é‡static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30;// segmentæœ€å°å®¹é‡static final int MIN_SEGMENT_TABLE_CAPACITY = 2;// ä¸€ä¸ªsegmentæœ€å¤§å®¹é‡static final int MAX_SEGMENTS = 1 &lt;&lt; 16;// é”ä¹‹å‰é‡è¯•æ¬¡æ•°static final int RETRIES_BEFORE_LOCK = 2; HashEntryä¸­è¢«volatileä¿®é¥°çš„éƒ¨åˆ†å˜é‡å¦‚ä¸‹ï¼š 12345static final class HashEntry&lt;K,V&gt; &#123; final int hash; final K key; volatile V value; // ä¿è¯å¯è§æ€§ volatile HashEntry&lt;K,V&gt; next; ä½¿ç”¨finalã€‚ç”¨æ¥å®ç°ä¸å˜æ¨¡å¼ï¼ˆimmutableï¼‰ï¼Œä»–æ˜¯å¤šçº¿ç¨‹å®‰å…¨é‡Œæœ€ç®€å•çš„ä¸€ç§ä¿éšœæ–¹å¼ã€‚å› ä¸ºä½ æ‹¿ä»–æ²¡æœ‰åŠæ³•ï¼Œæƒ³æ”¹å˜å®ƒä¹Ÿæ²¡æœ‰æœºä¼šã€‚ä¸å˜æ¨¡å¼ä¸»è¦é€šè¿‡finalå…³é”®å­—æ¥é™å®šçš„ã€‚åœ¨JMMä¸­finalå…³é”®å­—è¿˜æœ‰ç‰¹æ®Šçš„è¯­ä¹‰ã€‚FinalåŸŸä½¿å¾—ç¡®ä¿åˆå§‹åŒ–å®‰å…¨æ€§ï¼ˆinitialization safetyï¼‰æˆä¸ºå¯èƒ½ï¼Œåˆå§‹åŒ–å®‰å…¨æ€§è®©ä¸å¯å˜å½¢å¯¹è±¡ä¸éœ€è¦åŒæ­¥å°±èƒ½è‡ªç”±åœ°è¢«è®¿é—®å’Œå…±äº«ã€‚ ä½¿ç”¨volatileã€‚ä¿è¯æŸä¸ªå˜é‡å†…å­˜çš„æ”¹å˜å¯¹å…¶ä»–çº¿ç¨‹å³æ—¶å¯è§ï¼Œåœ¨é…åˆCASå¯ä»¥å®ç°ä¸åŠ é”å¯¹å¹¶å‘æ“ä½œçš„æ”¯æŒã€‚ 7.3 HashTableä¸ConcurrentHashMapæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œæè¿°é”åˆ†æ®µæŠ€æœ¯ã€‚ é”æœºåˆ¶ã€‚ æ‰€æœ‰è®¿é—®HashTableçš„çº¿ç¨‹éƒ½å¿…é¡»ç«äº‰åŒä¸€æŠŠé”ï¼Œæ•ˆç‡æ›´ä½ï¼›ConcurrentHashMapæ‰€ä½¿ç”¨çš„é”åˆ†æ®µæŠ€æœ¯ï¼Œé¦–å…ˆå°†æ•°æ®åˆ†æˆä¸€æ®µä¸€æ®µçš„å­˜å‚¨ï¼Œç„¶åç»™æ¯ä¸€æ®µæ•°æ®é…ä¸€æŠŠé”ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹å ç”¨é”è®¿é—®å…¶ä¸­ä¸€ä¸ªæ®µæ•°æ®çš„æ—¶å€™ï¼Œå…¶ä»–æ®µçš„æ•°æ®ä¹Ÿèƒ½è¢«å…¶ä»–çº¿ç¨‹è®¿é—®ã€‚ åº•å±‚æ•°æ®ç»“æ„ã€‚ 1.8ä¹‹åå¾ˆç›¸ä¼¼ï¼Œéƒ½æ˜¯æ•°ç»„+é“¾è¡¨/çº¢é»‘æ ‘ ï¼› 1.8ä¹‹å‰ï¼ŒConcurrentHashMapæ˜¯Segementæ•°ç»„ + HashEntryæ•°ç»„ + é“¾è¡¨ã€‚ 7.4 ï¼ˆé˜¿é‡ŒÂ·æ·˜ç‰¹ï¼‰ConcurrentHashMap1.8ä¸ºä»€ä¹ˆä¸ä½¿ç”¨åˆ†æ®µé”ï¼Ÿ å…ˆè¯´åˆ†æ®µé”çš„ä¼˜ç‚¹ï¼š ä¿è¯åœ¨æ“ä½œä¸åŒæ®µ map çš„æ—¶å€™å¯ä»¥å¹¶å‘æ‰§è¡Œï¼›æ“ä½œåŒæ®µ map çš„æ—¶å€™ï¼Œè¿›è¡Œé”çš„ç«äº‰å’Œç­‰å¾…ã€‚è¿™ç›¸å¯¹äºç›´æ¥å¯¹æ•´ä¸ªmapåŒæ­¥synchronizedæ˜¯æœ‰ä¼˜åŠ¿çš„ã€‚ ä½†æ˜¯åˆ†æ®µé”ä¹Ÿæœ‰ä¸€äº›ä¸å¯å¿½è§†çš„ç¼ºç‚¹ï¼š åˆ†æˆå¾ˆå¤šæ®µæ—¶ä¼šæ¯”è¾ƒæµªè´¹å†…å­˜ç©ºé—´(ä¸è¿ç»­ï¼Œç¢ç‰‡åŒ–)ï¼› æ“ä½œmapæ—¶ç«äº‰åŒä¸€ä¸ªåˆ†æ®µé”çš„æ¦‚ç‡éå¸¸å°ï¼ˆæ®µæ•£åˆ—æ¯”è¾ƒå¥½çš„æ—¶å€™ï¼‰æ—¶ï¼Œåˆ†æ®µé”åè€Œä¼šé€ æˆæ›´æ–°ç­‰æ“ä½œçš„é•¿æ—¶é—´ç­‰å¾…ï¼› å½“æŸä¸ªæ®µå¾ˆå¤§æ—¶ï¼Œåˆ†æ®µé”çš„æ€§èƒ½ä¼šä¸‹é™ã€‚ ç»¼ä¸Šè€ƒè™‘1.8ä¸å†ä½¿ç”¨åˆ†æ®µé”ã€‚ 7.5 ä¸ºä»€ä¹ˆ1.8ä¸­ get() æ–¹æ³•ä¸åŠ é”ï¼Ÿ å› ä¸ºé“¾è¡¨æ¯ä¸ªèŠ‚ç‚¹çš„valå’Œnextéƒ½ä½¿ç”¨volatileä¿®é¥°ï¼Œä¿è¯äº†å¯è§æ€§ã€‚ 7.6 ä¸ºä»€ä¹ˆ1.8ä¸ä½¿ç”¨lockè€Œæ˜¯ä½¿ç”¨syncï¼Ÿ å› ä¸ºsyncåŠ å…¥é”å‡çº§æœºåˆ¶ï¼ˆjdk1.6ä¹‹åï¼‰ï¼Œå·²ç»ä¼˜åŒ–çš„ä¸é”™äº†ï¼› locké€šè¿‡reentranclockå®ç°ï¼Œreentranlockæ˜¯é€šè¿‡AQSå®ç°ï¼Œéœ€è¦å¢åŠ é¢å¤–å†…å­˜å¼€é”€ï¼ˆCLHåŒå‘é˜Ÿåˆ—ï¼‰ã€‚ 7.7 ConcurrenthashMapä½¿ç”¨çš„æ—¶å€™æœ‰å¯èƒ½å‡ºç°ä¸å®‰å…¨çš„æƒ…å†µï¼Ÿ å‚è€ƒï¼šhttps://blog.csdn.net/luzhensmart/article/details/108133560 æŸ¥äº†ä¸€äº›èµ„æ–™åå‘ç°ï¼ŒåŸæ¥ConcurrentHashMapçš„çº¿ç¨‹å®‰å…¨æŒ‡çš„æ˜¯ï¼Œå®ƒçš„ã€æ¯ä¸ªæ–¹æ³•ã€‘å•ç‹¬è°ƒç”¨ï¼ˆå³åŸå­æ“ä½œï¼‰éƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯ä»£ç æ€»ä½“çš„äº’æ–¥æ€§å¹¶ä¸å—æ§åˆ¶ã€‚ä»¥ä¸Šé¢çš„ä»£ç ä¸ºä¾‹ï¼Œæœ€åä¸€è¡Œä¸­çš„ï¼š 1234567891011121314public void run() &#123; for (int i = 0; i &lt; 100; i++) &#123; this.addup(); &#125; &#125; private void addup() &#123; if (!map.containsKey(KEY)) &#123; map.put(KEY, 1); &#125; else &#123; map.put(KEY, map.get(KEY) + 1); &#125; &#125; åœ¨ä¸Šé¢ä¸€ä¸ªçº¿ç¨‹å†…éƒ¨è¿›è¡Œäº†100æ¬¡åŠ æ³•ï¼Œä½†æ˜¯å…¶å®åŠ 1åœ¨çº¿ç¨‹å†…éƒ¨æœ¬èº«ä¹Ÿå¹¶ä¸æ˜¯åŸå­æ“ä½œã€‚ å®é™…ä¸Šå¹¶ä¸æ˜¯åŸå­æ“ä½œï¼Œå®ƒåŒ…å«äº†ä¸‰æ­¥ï¼š map.get åŠ 1 map.put æ˜¯ç”±äºåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œmapæœ¬èº«æ˜¯ä¸€ä¸ªå…±äº«å˜é‡ã€‚å½“çº¿ç¨‹Aæ‰§è¡Œmap.getçš„æ—¶å€™ï¼Œå…¶å®ƒçº¿ç¨‹å¯èƒ½æ­£åœ¨æ‰§è¡Œmap.putï¼Œè¿™æ ·ä¸€æ¥å½“çº¿ç¨‹Aæ‰§è¡Œåˆ°map.putçš„æ—¶å€™ï¼Œçº¿ç¨‹Açš„å€¼å°±å·²ç»æ˜¯è„æ•°æ®äº†ï¼Œç„¶åè„æ•°æ®è¦†ç›–äº†çœŸå€¼ï¼Œå¯¼è‡´çº¿ç¨‹ä¸å®‰å…¨ã€‚ 8. HashMap å’Œ HashSetåŒºåˆ« ï¼Ÿ å¦‚æœä½ çœ‹è¿‡ HashSet æºç çš„è¯å°±åº”è¯¥çŸ¥é“ï¼šHashSet åº•å±‚å°±æ˜¯åŸºäº HashMap å®ç°çš„ã€‚ï¼ˆHashSet çš„æºç éå¸¸éå¸¸å°‘ï¼Œå› ä¸ºé™¤äº†clone() ã€ writeObject() ã€ readObject() æ˜¯ HashSet â¾ƒâ¼°ä¸å¾—ä¸å®ç°ä¹‹å¤–ï¼Œå…¶ä»–æ–¹æ³•éƒ½æ˜¯ç›´æ¥è°ƒç”¨ HashMap ä¸­çš„æ–¹æ³•ã€‚ HashMap HashSet å®ç°äº†Mapæ¥â¼ å®ç°Setæ¥â¼ å­˜å‚¨é”®å€¼å¯¹ ä»…å­˜å‚¨å¯¹è±¡ è°ƒâ½¤ put() å‘mapä¸­æ·»åŠ å…ƒç´  è°ƒâ½¤ add() â½…æ³•å‘Setä¸­æ·»åŠ å…ƒç´  HashMapä½¿â½¤é”®ï¼ˆKeyï¼‰è®¡ç®—Hashcodeï¼šint hash = hash(key); HashSetä½¿â½¤æˆå‘˜å¯¹è±¡æ¥è®¡ç®—hashcodeå€¼ï¼Œå¯¹äºä¸¤ä¸ªå¯¹è±¡æ¥è¯´hashcodeå¯èƒ½ç›¸åŒï¼Œæ‰€ä»¥equals()â½…æ³•â½¤æ¥åˆ¤æ–­å¯¹è±¡çš„ç›¸ç­‰æ€§ã€‚ 9. è¯´è¯´HashSetçš„åŸºæœ¬åŸç†ï¼Ÿ åº•å±‚ç»“æ„ HashSetåº•å±‚åŸç†å®Œå…¨å°±æ˜¯åŒ…è£…äº†ä¸€ä¸‹HashMap ï¼Œåªä¸è¿‡å­˜å‚¨çš„æ—¶å€™valueæ˜¯é»˜è®¤å­˜å‚¨äº†ä¸€ä¸ªObjectçš„é™æ€å¸¸é‡ï¼Œå–çš„æ—¶å€™ä¹Ÿæ˜¯åªè¿”å›keyï¼Œæ‰€ä»¥çœ‹èµ·æ¥å°±åƒListä¸€æ ·ã€‚ åˆå§‹åŒ– 123456789101112131415161718private transient HashMap&lt;E,Object&gt; map; public HashSet() &#123; map = new HashMap&lt;&gt;();&#125; public HashSet(int initialCapacity) &#123; map = new HashMap&lt;&gt;(initialCapacity);&#125; public HashSet(int initialCapacity, float loadFactor) &#123; map = new HashMap&lt;&gt;(initialCapacity, loadFactor);&#125; public HashSet(Collection&lt;? extends E&gt; c) &#123; map = new HashMap&lt;&gt;(Math.max((int) (c.size()/.75f) + 1, 16)); addAll(c);&#125; add()æ–¹æ³• å¯ä»¥çœ‹åˆ°è¿™ä¸‰ä¸ªæ–¹æ³•éƒ½æ˜¯ç›´æ¥è°ƒç”¨çš„HashMapçš„å®ç°ã€‚ 1234567891011public boolean add(E e) &#123; return map.put(e, PRESENT)==null;&#125; public boolean remove(Object o) &#123; return map.remove(o)==PRESENT;&#125; public boolean contains(Object o) &#123; return map.containsKey(o);&#125; addå…¶å®å°±æ˜¯è°ƒç”¨HashMapçš„putæ–¹æ³•ï¼Œé‚£ä¹ˆå¦‚ä½•ä¿è¯å”¯ä¸€æ€§ï¼Ÿ å¦‚æœå“ˆå¸Œå€¼å’Œkeyéƒ½ä¸€æ ·ï¼Œå°±ä¼šç›´æ¥æ‹¿æ–°å€¼è¦†ç›–æ—§å€¼ï¼Œè€ŒHashSetå°±æ˜¯åˆ©ç”¨è¿™ä¸ªç‰¹æ€§æ¥ä¿è¯å”¯ä¸€æ€§ã€‚ å…¶å®å’ŒHashMapå°±æ˜¯ä¸€æ ·çš„ã€‚ 12if (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k)))) e = p; containsæ–¹æ³•ï¼ˆGet()æ–¹æ³• ï¼‰ hashsetæ²¡æœ‰getæ–¹æ³•ï¼Œå› ä¸ºæ²¡æœ‰æ„ä¹‰ï¼šä¸éœ€è¦è·å–æŸä¸ªé”®å€¼å¯¹åº”çš„valueã€‚ å…·ä½“å®ç°ç›´æ¥è°ƒç”¨hashmapçš„containsKey()æ–¹æ³•ï¼š è¿‡ç¨‹å’Œhashmapçš„getæ–¹æ³•è¿‡ç¨‹å·®ä¸å¤šï¼Œè¿”å›ä¸ºnullåˆ™æ˜¯ä¸å­˜åœ¨ã€‚ 123public boolean contains(Object o) &#123; return map.containsKey(o);&#125; 9. 1 HashSetå¦‚ä½•æ£€æŸ¥é‡å¤ ï¼Ÿ æŠŠå¯¹è±¡åŠ â¼Š HashSet æ—¶ï¼ŒHashSetå…ˆè®¡ç®—å¯¹è±¡çš„hashcode å€¼ï¼› æ ¹æ®hashcodeå€¼è®¡ç®—å‡ºè¦åŠ â¼Šçš„ä½ç½®ï¼ŒåŒæ—¶ä¹Ÿä¼šä¸å…¶ä»–åŠ â¼Šçš„å¯¹è±¡çš„hashcodeå€¼ä½œâ½æ•™ï¼› å¦‚æœæ²¡æœ‰ç›¸ç¬¦çš„hashcodeï¼ŒHashSetä¼šå‡è®¾å¯¹è±¡æ²¡æœ‰é‡å¤å‡ºç°ï¼› å¦‚æœå‘ç°æœ‰ç›¸åŒhashcodeå€¼çš„å¯¹è±¡ï¼Œè¿™æ—¶ä¼šè°ƒç”¨ equals() æ–¹æ³•æ¥æ£€æŸ¥hashcodeç›¸ç­‰çš„å¯¹è±¡æ˜¯å¦çœŸçš„ç›¸åŒï¼Œå¦‚æœä¸¤è€…ç›¸åŒï¼ŒHashSetå°±ä¸ä¼šè®©åŠ â¼Šæ“ä½œæˆåŠŸã€‚ 9.2 ã€æ–°ã€‘contains()æ–¹æ³•åœ¨HashSetå’ŒArrayListçš„å®ç°åŒºåˆ«ï¼Ÿ Arraylist å› ä¸ºåº•å±‚æ˜¯objectæ•°ç»„ï¼Œåˆ¤æ–­æŸä¸ªå¯¹è±¡æ˜¯å¦å­˜åœ¨ï¼Œå…¶å®æ˜¯é€šè¿‡éå†æ¥è¿›è¡Œåˆ¤æ–­çš„ã€‚ 123456789101112131415161718 public boolean contains(Object o) &#123; return indexOf(o) &gt;= 0;//#1 &#125;/* è¿”å›æŒ‡å®šå…ƒç´ åœ¨åˆ—è¡¨ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œå¦‚æœè¯¥åˆ—è¡¨ä¸åŒ…å«è¯¥å…ƒç´ ï¼Œåˆ™è¿”å›-1ã€‚*/ public int indexOf(Object o) &#123; if (o == null) &#123; for (int i = 0; i &lt; size; i++) if (elementData[i]==null) return i; &#125; else &#123; for (int i = 0; i &lt; size; i++) if (o.equals(elementData[i])) return i; &#125; return -1; &#125; Hashset Hashsetæ˜¯hashå€¼ &amp;&amp; éå†é“¾è¡¨equals() éƒ½ç›¸ç­‰ï¼Œæ¥åˆ¤æ–­çš„ã€‚ 12if (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k)))) e = p; 10. comparable å’Œ Comparatorçš„åŒºåˆ«ï¼Ÿ å‚è€ƒï¼šhttps://www.cnblogs.com/xujian2014/p/5215082.html Comparableæ˜¯æ’åºæ¥å£ï¼Œè‹¥ä¸€ä¸ªç±»å®ç°äº†Comparableæ¥å£ï¼Œå°±æ„å‘³ç€â€œè¯¥ç±»æ”¯æŒæ’åºâ€ã€‚ ä¾‹å¦‚Personç±»ï¼Œå®ç°Comparableæ¥å£ï¼Œä½¿å¾—æ‰€æœ‰Personç±»å¯¹è±¡å¯ä»¥æŒ‰ç…§å„è‡ªå¹´é¾„å¤§å°è¿›è¡Œæ’åºã€‚ 12345@Override public int compareTo(Person p) &#123; return this.age-p.getAge(); &#125; Comparatoræ˜¯æ¯”è¾ƒå™¨ï¼Œæˆ‘ä»¬è‹¥éœ€è¦æ§åˆ¶æŸä¸ªç±»çš„æ¬¡åºï¼Œå¯ä»¥å»ºç«‹ä¸€ä¸ªâ€œè¯¥ç±»çš„æ¯”è¾ƒå™¨â€æ¥è¿›è¡Œæ’åºã€‚ Personç±»æ²¡æœ‰å®ç°Comparableæ¥å£ï¼Œè¯¥å¦‚ä½•æ¯”è¾ƒå¤§å°å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥æ–°å»ºä¸€ä¸ªç±»ï¼Œè®©å…¶å®ç°Comparatoræ¥å£ï¼Œä»è€Œæ„é€ ä¸€ä¸ªâ€œæ¯”è¾ƒå™¨&quot;ã€‚ 12345@Override public int compare(Person o1, Person o2) &#123; return o1.getAge()-o2.getAge(); &#125; Comparableç›¸å½“äºâ€œå†…éƒ¨æ¯”è¾ƒå™¨â€ï¼Œè€ŒComparatorç›¸å½“äºâ€œå¤–éƒ¨æ¯”è¾ƒå™¨â€ã€‚ã€‚ 11. å¦‚ä½•é€‰ç”¨é›†åˆ? éœ€è¦å­˜å‚¨é”®å€¼å¯¹ï¼š Mapæ¥å£çš„é›†åˆ éœ€è¦æ’åºæ—¶é€‰æ‹©TreeMap ä¸éœ€è¦æ’åºæ—¶å°±é€‰æ‹©HashMap éœ€è¦ä¿è¯çº¿ç¨‹å®‰å…¨å°±é€‰â½¤ConcurrentHashMap åªéœ€è¦å­˜å‚¨å…ƒç´ ï¼Œå®ç°collectionæ¥å£çš„é›†åˆï¼Œåˆåˆ†ä¸ºï¼š éœ€è¦ä¿è¯å…ƒç´ å”¯ä¸€â€“Setæ¥å£çš„é›†åˆ HashSet ä¸éœ€è¦å…ƒç´ å”¯ä¸€â€“Listæ¥å£ç»“åˆ æŸ¥æ‰¾æ¯”è¾ƒå¤šï¼šArrayList å¢åˆ æ¯”è¾ƒå¤šï¼šLinkedList 1.3.3 List 1.ç”¨è¿‡ ArrayList å—ï¼Ÿè¯´ä¸€ä¸‹å®ƒæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ è‡ªåŠ¨æ‰©å®¹ï¼š å½“åŠ å…¥æ•°æ®è¾¾åˆ°ä¸€å®šç¨‹åº¦åï¼Œä¼šå®è¡Œè‡ªåŠ¨æ‰©å®¹ï¼Œå³æ‰©å¤§æ•°ç»„å¤§å° ï¼› åº•å±‚å®ç°ï¼šåº•å±‚æ˜¯ä½¿ç”¨æ•°ç»„å®ç°ï¼Œadd(int,o)ï¼Œæ·»åŠ åˆ°æŸä¸ªä½ç½®ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šæŒªåŠ¨å¤§é‡çš„æ•°ç»„å…ƒç´ ï¼Œå¹¶ä¸”å¯èƒ½ä¼šè§¦å‘æ‰©å®¹æœºåˆ¶ï¼› çº¿ç¨‹ä¸å®‰å…¨ 2. ArrayList ä¸ Vector åŒºåˆ«å‘¢?ä¸ºä»€ä¹ˆè¦ç”¨Arraylistå–ä»£Vectorå‘¢ï¼Ÿ çº¿ç¨‹å®‰å…¨ï¼š Vectorçº¿ç¨‹å®‰å…¨ï¼ŒArrayList ä¸æ˜¯ï¼› Vectorè€—æ—¶ï¼šVector ç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯åŒæ­¥çš„ã€‚å¯ä»¥ç”±ä¸¤ä¸ªçº¿ç¨‹å®‰å…¨åœ°è®¿é—®â¼€ä¸ªVectorå¯¹è±¡ã€ä½†æ˜¯â¼€ä¸ªçº¿ç¨‹è®¿é—®Vectorçš„è¯ä»£ç è¦åœ¨åŒæ­¥æ“ä½œä¸Šè€—è´¹å¤§é‡çš„æ—¶é—´ã€‚ 3. Array &amp; ArrayListä¸åŒç‚¹? Arrayå¯ä»¥åŒ…å«åŸºæœ¬ç±»å‹å’Œå¯¹è±¡ç±»å‹ï¼ŒArrayListåªèƒ½åŒ…å«å¯¹è±¡ç±»å‹ ï¼› Arrayå¤§å°æ˜¯å›ºå®šçš„ï¼ŒArrayListçš„å¤§å°æ˜¯ åŠ¨æ€å˜åŒ– çš„ ï¼› ArrayListæä¾›äº†æ›´å¤šçš„æ–¹æ³•å’Œç‰¹æ€§: addAll()ï¼ŒremoveAll()ï¼Œiterator()ã€‚ 4. Arraylist ä¸ LinkedList åŒºåˆ«? ç´¢å¼•/æ’å…¥ï¼šArrayListæŒ‰åºå·ç´¢å¼•ï¼Œç´¢å¼•å¿«æ’å…¥æ…¢ï¼›LinkedListä¸æ˜¯ï¼Œç´¢å¼•æ…¢ï¼Œæ’å…¥å¿«ï¼› å†…å­˜æ–¹é¢ï¼š Arraylist æ˜¯çº¿æ€§è¿ç»­å­˜å‚¨ï¼Œ å†…å­˜åˆ©ç”¨æ›´ä½ï¼›LinkedList æ˜¯é“¾è¡¨ï¼Œå†…å­˜åˆ©ç”¨æ›´é«˜ï¼ˆå°†å†…å­˜é›¶æ•£ç©ºé—´ä¸²è”ï¼‰ï¼Œä½†ä¹Ÿæ›´å æœ‰å†…å­˜ï¼ˆæ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨äº†ä¸¤ä¸ªå¼•ç”¨ï¼‰ï¼› çº¿ç¨‹å®‰å…¨ï¼š ArrayList å’Œ LinkedList éƒ½æ˜¯ä¸åŒæ­¥çš„ï¼Œä¹Ÿå°±æ˜¯éƒ½ä¸ä¿è¯çº¿ç¨‹å®‰å…¨ï¼› åº•å±‚æ•°æ®ç»“æ„ï¼š Arraylist åº•å±‚ä½¿ç”¨çš„æ˜¯ Objectæ•°ç»„ï¼› LinkedList åº•å±‚ä½¿ç”¨çš„æ˜¯åŒå‘é“¾è¡¨ æ•°æ®ç»“æ„ ï¼› JDK1.6ä¹‹å‰ä¸ºå¾ªç¯é“¾è¡¨ï¼ŒJDK1.7å–æ¶ˆäº†å¾ªç¯ã€‚ 5. ã€æºç è§£è¯»ã€‘è¯´è¯´ArrayListçš„æ‰©å®¹æœºåˆ¶å§ ï¼Ÿä¸ºä»€ä¹ˆæ˜¯æ‰©å®¹1.5å€ï¼Ÿé»˜è®¤å¤§å°æ˜¯å¤šå°‘ã€‚ é€æºç åˆ†ææ‰©å®¹æœºåˆ¶ å…ˆæŠŠå›ç­”å†™åœ¨ä¸‹é¢ï¼š ArrayList/vectoré»˜è®¤å¤§å°éƒ½æ˜¯10ï¼Œä½†vectotæ‰©å®¹æ˜¯2å€ã€‚ 1. æ‰©å®¹æœºåˆ¶ï¼š ä½¿ç”¨æ— å‚æ„é€ å‡½æ•°åˆ›å»ºçš„æ•°ç»„é•¿åº¦ä¸º0ï¼Œå½“ç¬¬ä¸€æ¬¡addåæ•°ç»„é•¿åº¦ä¸º10 ï¼› å¦‚æœç»§ç»­addè¶…è¿‡10åï¼Œä¹Ÿå°±æ˜¯ä¸æ»¡è¶³minCapacityï¼ˆæœ€å°éœ€è¦å®¹é‡ï¼‰ - elementData.length &gt; 0 ä¼šè§¦å‘æ‰©å®¹æœºåˆ¶ã€‚ å°†æ–°å®¹é‡æ›´æ–°ä¸ºæ—§å®¹é‡çš„1.5å€ ï¼Œè‹¥è¿˜æ˜¯å°äºæœ€å°éœ€è¦å®¹é‡ï¼Œé‚£ä¹ˆå°±æŠŠã€æœ€å°éœ€è¦å®¹é‡å½“ä½œæ•°ç»„çš„æ–°å®¹é‡ã€‘ã€‚ æœ€åæ£€æŸ¥è®¾ç½®çš„æ–°å®¹é‡æ˜¯å¦å¤§äºæœ€å¤§å®¹é‡MAX_ARRAY_SIZE ï¼Œè¿›å…¥hugeCapacity() : å¦‚æœminCapacityå¤§äºMAX_ARRAY_SIZEï¼Œåˆ™æ–°å®¹é‡åˆ™ä¸ºInteger.MAX_VALUEï¼Œå¦åˆ™ï¼Œæ–°å®¹é‡å¤§å°åˆ™ä¸º MAX_ARRAY_SIZE å³ä¸º Integer.MAX_VALUE - 8 ã€‚ 2. ä¸ºä»€ä¹ˆæ˜¯1.5å€ï¼Ÿ å› ä¸ºï¼Œint newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1)ï¼Œæ‰€ä»¥ ArrayList æ¯æ¬¡æ‰©å®¹ä¹‹åå®¹é‡éƒ½ä¼šå˜ä¸ºåŸæ¥çš„ 1.5 å€å·¦å³ï¼ˆoldCapacity ä¸ºå¶æ•°å°±æ˜¯ 1.5 å€ï¼Œå¦åˆ™æ˜¯ 1.5 å€å·¦å³ï¼‰ï¼ å¥‡å¶ä¸åŒã€‚ æ¯”å¦‚ ï¼š10+10/2 = 15, 33+33/2=49ã€‚å¦‚æœæ˜¯å¥‡æ•°çš„è¯ä¼šä¸¢æ‰å°æ•°ã€‚ ArrayListæ€»è§ˆ ArrayListç»§æ‰¿äºAbstractList ï¼Œå®ç°äº†List,RandomAccess,Cloneable,java.io.Serializable è¿™äº›æ¥å£ã€‚ 1234public class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt; implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable&#123; &#125; RandomAccess æ˜¯ä¸€ä¸ªæ ‡å¿—æ¥å£ï¼Œè¡¨æ˜å®ç°è¿™ä¸ªè¿™ä¸ªæ¥å£çš„ List é›†åˆæ˜¯æ”¯æŒå¿«é€Ÿéšæœºè®¿é—®çš„ã€‚åœ¨ ArrayList ä¸­ï¼Œæˆ‘ä»¬å³å¯ä»¥é€šè¿‡å…ƒç´ çš„åºå·å¿«é€Ÿè·å–å…ƒç´ å¯¹è±¡ï¼Œè¿™å°±æ˜¯å¿«é€Ÿéšæœºè®¿é—®ï¼› ArrayList å®ç°äº†Cloneable æ¥å£ ï¼Œå³è¦†ç›–äº†å‡½æ•°clone()ï¼Œèƒ½è¢«å…‹éš†ï¼› ArrayList å®ç°äº† java.io.Serializable æ¥å£ï¼Œè¿™æ„å‘³ç€ArrayListæ”¯æŒåºåˆ—åŒ–ï¼Œèƒ½é€šè¿‡åºåˆ—åŒ–å»ä¼ è¾“ã€‚ ArrayList æ ¸å¿ƒæºç è§£è¯»ï¼ˆå…ˆè€å¿ƒçœ‹ä¸€éï¼‰ ç›´æ¥ç‚¹å‡»ä¸Šé¢é“¾æ¥ é€æºç åˆ†ææ‰©å®¹æœºåˆ¶ æŸ¥çœ‹ã€‚ ã€é‡ç‚¹ã€‘JDK8 æ‰©å®¹æœºåˆ¶ è§£è¯» ä»æ„é€ å‡½æ•°è¯´èµ· ï¼ˆJDK8ï¼‰ArrayList æœ‰ä¸‰ç§æ–¹å¼æ¥åˆå§‹åŒ– : ä»¥æ— å‚æ•°æ„é€ æ–¹æ³•åˆ›å»º ArrayList æ—¶ï¼Œå®é™…ä¸Šåˆå§‹åŒ–èµ‹å€¼çš„æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ã€‚å½“çœŸæ­£å¯¹æ•°ç»„è¿›è¡Œæ·»åŠ å…ƒç´ æ“ä½œæ—¶ï¼Œæ‰çœŸæ­£åˆ†é…å®¹é‡ã€‚å³å‘æ•°ç»„ä¸­æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæ•°ç»„å®¹é‡æ‰©ä¸º 10ã€‚ jdk8ä¸­çš„ArrayListçš„å¯¹è±¡çš„åˆ›å»ºç±»ä¼¼äºå•ä¾‹çš„æ‡’æ±‰å¼ã€‚JDK8çš„å†…å­˜ä¼˜åŒ–ä¹Ÿå€¼å¾—æˆ‘ä»¬åœ¨å¹³æ—¶å¼€å‘ä¸­å­¦ä¹ ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758 /** * é»˜è®¤åˆå§‹å®¹é‡å¤§å° */ private static final int DEFAULT_CAPACITY = 10; /** * ç©ºæ•°ç»„ï¼ˆç”¨äºç©ºå®ä¾‹ï¼‰ã€‚ */ private static final Object[] EMPTY_ELEMENTDATA = &#123;&#125;; //ç”¨äºé»˜è®¤å¤§å°ç©ºå®ä¾‹çš„å…±äº«ç©ºæ•°ç»„å®ä¾‹ã€‚ //æˆ‘ä»¬æŠŠå®ƒä»EMPTY_ELEMENTDATAæ•°ç»„ä¸­åŒºåˆ†å‡ºæ¥ï¼Œä»¥çŸ¥é“åœ¨æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶å®¹é‡éœ€è¦å¢åŠ å¤šå°‘ã€‚ private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;; /** * ä¿å­˜ArrayListæ•°æ®çš„æ•°ç»„ */ transient Object[] elementData; // non-private to simplify nested class access /** * ArrayList æ‰€åŒ…å«çš„å…ƒç´ ä¸ªæ•° */ private int size; /** /** * å¸¦åˆå§‹å®¹é‡å‚æ•°çš„æ„é€ å‡½æ•°ã€‚ï¼ˆç”¨æˆ·è‡ªå·±æŒ‡å®šå®¹é‡ï¼‰ */ public ArrayList(int initialCapacity) &#123; if (initialCapacity &gt; 0) &#123;//åˆå§‹å®¹é‡å¤§äº0 //åˆ›å»ºinitialCapacityå¤§å°çš„æ•°ç»„ this.elementData = new Object[initialCapacity]; &#125; else if (initialCapacity == 0) &#123;//åˆå§‹å®¹é‡ç­‰äº0 //åˆ›å»ºç©ºæ•°ç»„ this.elementData = EMPTY_ELEMENTDATA; &#125; else &#123;//åˆå§‹å®¹é‡å°äº0ï¼ŒæŠ›å‡ºå¼‚å¸¸ throw new IllegalArgumentException(&quot;Illegal Capacity: &quot;+ initialCapacity); &#125; &#125; /** *æ„é€ åŒ…å«æŒ‡å®šcollectionå…ƒç´ çš„åˆ—è¡¨ï¼Œè¿™äº›å…ƒç´ åˆ©ç”¨è¯¥é›†åˆçš„è¿­ä»£å™¨æŒ‰é¡ºåºè¿”å› *å¦‚æœæŒ‡å®šçš„é›†åˆä¸ºnullï¼Œthrows NullPointerExceptionã€‚ */ public ArrayList(Collection&lt;? extends E&gt; c) &#123; elementData = c.toArray(); if ((size = elementData.length) != 0) &#123; // c.toArray might (incorrectly) not return Object[] (see 6260652) if (elementData.getClass() != Object[].class) elementData = Arrays.copyOf(elementData, size, Object[].class); &#125; else &#123; // replace with empty array. this.elementData = EMPTY_ELEMENTDATA; &#125; &#125; å†çœ‹addæ–¹æ³• è¿™é‡Œä»¥æ— å‚æ„é€ å‡½æ•°åˆ›å»ºçš„ ArrayList ä¸ºä¾‹åˆ†æ ã€‚ JDK11 ç§»é™¤äº† ensureCapacityInternal() å’Œ ensureExplicitCapacity() æ–¹æ³• 12345678910/** * å°†æŒ‡å®šçš„å…ƒç´ è¿½åŠ åˆ°æ­¤åˆ—è¡¨çš„æœ«å°¾ã€‚ */ public boolean add(E e) &#123; //æ·»åŠ å…ƒç´ ä¹‹å‰ï¼Œå…ˆè°ƒç”¨ensureCapacityInternalæ–¹æ³• ensureCapacityInternal(size + 1); // Increments modCount!! //è¿™é‡Œçœ‹åˆ°ArrayListæ·»åŠ å…ƒç´ çš„å®è´¨å°±ç›¸å½“äºä¸ºæ•°ç»„èµ‹å€¼ elementData[size++] = e; return true; &#125; å†çœ‹ ensureCapacityInternal() æ–¹æ³• ç¬¬2æ­¥ï¼ˆJDK7ï¼‰å¯ä»¥çœ‹åˆ° add æ–¹æ³• é¦–å…ˆè°ƒç”¨äº†ensureCapacityInternal(size + 1) ã€‚ å½“ è¦ add è¿›ç¬¬ 1 ä¸ªå…ƒç´ æ—¶ï¼ŒminCapacity ä¸º 1ï¼Œåœ¨ Math.max()æ–¹æ³•æ¯”è¾ƒåï¼ŒminCapacity ä¸º 10ã€‚ ç„¶åå¼€å§‹è°ƒç”¨ ensureExplicitCapacity() æ–¹æ³• 123456789//å¾—åˆ°æœ€å°æ‰©å®¹é‡ private void ensureCapacityInternal(int minCapacity) &#123; if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123; // è·å–é»˜è®¤çš„å®¹é‡å’Œä¼ å…¥å‚æ•°çš„è¾ƒå¤§å€¼ minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity); &#125; ensureExplicitCapacity(minCapacity); &#125; è°ƒç”¨ ensureCapacityInternal() è¿›å…¥ensureExplicitCapacity()è¿™ä¸ªæ–¹æ³• 123456789//åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹ private void ensureExplicitCapacity(int minCapacity) &#123; modCount++; // overflow-conscious code if (minCapacity - elementData.length &gt; 0) //è°ƒç”¨growæ–¹æ³•è¿›è¡Œæ‰©å®¹ï¼Œè°ƒç”¨æ­¤æ–¹æ³•ä»£è¡¨å·²ç»å¼€å§‹æ‰©å®¹äº† grow(minCapacity); &#125; æˆ‘ä»¬æ¥ä»”ç»†åˆ†æä¸€ä¸‹ï¼š å½“æˆ‘ä»¬è¦ add è¿›ç¬¬ 1 ä¸ªå…ƒç´ åˆ° ArrayList æ—¶ï¼ŒelementData.length ä¸º 0 ï¼ˆå› ä¸ºè¿˜æ˜¯ä¸€ä¸ªç©ºçš„ listï¼‰ï¼Œå› ä¸ºæ‰§è¡Œäº† ensureCapacityInternal() æ–¹æ³• ï¼Œæ‰€ä»¥ minCapacity æ­¤æ—¶ä¸º 10ã€‚æ­¤æ—¶ï¼ŒminCapacity - elementData.length &gt; 0æˆç«‹ï¼Œæ‰€ä»¥ä¼šè¿›å…¥ grow(minCapacity) æ–¹æ³•ã€‚ å½“ add ç¬¬ 2 ä¸ªå…ƒç´ æ—¶ï¼ŒminCapacity ä¸º 2ï¼Œæ­¤æ—¶ elementData.length(å®¹é‡)åœ¨æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ åæ‰©å®¹æˆ 10 äº†ã€‚æ­¤æ—¶ï¼ŒminCapacity - elementData.length &gt; 0 ä¸æˆç«‹ï¼Œæ‰€ä»¥ä¸ä¼šè¿›å…¥ ï¼ˆæ‰§è¡Œï¼‰grow(minCapacity) æ–¹æ³•ã€‚ æ·»åŠ ç¬¬ 3ã€4Â·Â·Â·åˆ°ç¬¬ 9 ä¸ªå…ƒç´ æ—¶ï¼Œä¾ç„¶ä¸ä¼šæ‰§è¡Œ grow æ–¹æ³•ï¼Œæ•°ç»„å®¹é‡éƒ½ä¸º 10ã€‚ ç›´åˆ°æ·»åŠ ç¬¬ 10 ä¸ªå…ƒç´ ï¼ŒminCapacity &lt; elementData.lengthä¸æˆç«‹ã€‚è¿›å…¥ grow æ–¹æ³•è¿›è¡Œæ‰©å®¹ã€‚ elementData.lengthï¼ˆå®é™…å®¹é‡ï¼‰&gt;= minCapacityï¼ˆæœ€å°éœ€è¦å®¹é‡ï¼‰ , æ‰§è¡Œ grow() int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1),æ‰€ä»¥ ArrayList æ¯æ¬¡æ‰©å®¹ä¹‹åå®¹é‡éƒ½ä¼šå˜ä¸ºåŸæ¥çš„ 1.5 å€å·¦å³ï¼ˆoldCapacity ä¸ºå¶æ•°å°±æ˜¯ 1.5 å€ï¼Œå¦åˆ™æ˜¯ 1.5 å€å·¦å³ï¼‰ï¼ å¥‡å¶ä¸åŒï¼Œæ¯”å¦‚ ï¼š10+10/2 = 15, 33+33/2=49ã€‚å¦‚æœæ˜¯å¥‡æ•°çš„è¯ä¼šä¸¢æ‰å°æ•°ã€‚ å°†æ–°å®¹é‡æ›´æ–°ä¸ºæ—§å®¹é‡çš„1.5å€ ï¼Œè‹¥è¿˜æ˜¯å°äºæœ€å°éœ€è¦å®¹é‡ï¼Œé‚£ä¹ˆå°±æŠŠã€æœ€å°éœ€è¦å®¹é‡å½“ä½œæ•°ç»„çš„æ–°å®¹é‡ã€‘ã€‚ æœ€åæ£€æŸ¥è®¾ç½®çš„æ–°å®¹é‡æ˜¯å¦å¤§äºæœ€å¤§å®¹é‡MAX_ARRAY_SIZE ï¼Œè¿›å…¥hugeCapacity() : å¦‚æœminCapacityå¤§äºMAX_ARRAY_SIZEï¼Œåˆ™æ–°å®¹é‡åˆ™ä¸ºInteger.MAX_VALUEï¼Œå¦åˆ™ï¼Œæ–°å®¹é‡å¤§å°åˆ™ä¸º MAX_ARRAY_SIZE å³ä¸º Integer.MAX_VALUE - 8 ã€‚ 1234567891011121314151617181920212223/** * è¦åˆ†é…çš„æœ€å¤§æ•°ç»„å¤§å° */ private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8; /** * ArrayListæ‰©å®¹çš„æ ¸å¿ƒæ–¹æ³•growã€‚ */ private void grow(int minCapacity) &#123; // oldCapacityä¸ºæ—§å®¹é‡ï¼ŒnewCapacityä¸ºæ–°å®¹é‡ int oldCapacity = elementData.length; //å°†oldCapacity å³ç§»ä¸€ä½ï¼Œå…¶æ•ˆæœç›¸å½“äºoldCapacity /2ï¼Œ //æˆ‘ä»¬çŸ¥é“ä½è¿ç®—çš„é€Ÿåº¦è¿œè¿œå¿«äºæ•´é™¤è¿ç®—ï¼Œæ•´å¥è¿ç®—å¼çš„ç»“æœå°±æ˜¯å°†æ–°å®¹é‡æ›´æ–°ä¸ºæ—§å®¹é‡çš„1.5å€ï¼Œ int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1); //ç„¶åæ£€æŸ¥æ–°å®¹é‡æ˜¯å¦å¤§äºæœ€å°éœ€è¦å®¹é‡ï¼Œè‹¥è¿˜æ˜¯å°äºæœ€å°éœ€è¦å®¹é‡ï¼Œé‚£ä¹ˆå°±æŠŠã€æœ€å°éœ€è¦å®¹é‡å½“ä½œæ•°ç»„çš„æ–°å®¹é‡ã€‘ï¼Œ if (newCapacity - minCapacity &lt; 0) newCapacity = minCapacity; // å¦‚æœæ–°å®¹é‡å¤§äº MAX_ARRAY_SIZE,è¿›å…¥(æ‰§è¡Œ) `hugeCapacity()` æ–¹æ³•æ¥æ¯”è¾ƒ minCapacity å’Œ MAX_ARRAY_SIZEï¼Œ //å¦‚æœminCapacityå¤§äºæœ€å¤§å®¹é‡ï¼Œåˆ™æ–°å®¹é‡åˆ™ä¸º`Integer.MAX_VALUE`ï¼Œå¦åˆ™ï¼Œæ–°å®¹é‡å¤§å°åˆ™ä¸º MAX_ARRAY_SIZE å³ä¸º `Integer.MAX_VALUE - 8`ã€‚ if (newCapacity - MAX_ARRAY_SIZE &gt; 0) newCapacity = hugeCapacity(minCapacity); // minCapacity is usually close to size, so this is a win: elementData = Arrays.copyOf(elementData, newCapacity); è®¾ç½®å®Œæ–°å®¹é‡ newCapacity ï¼Œè¿›è¡ŒArrays.copyOf Arraysçš„copyOf()æ–¹æ³•ä¼ å›çš„æ•°ç»„æ˜¯æ–°çš„æ•°ç»„å¯¹è±¡ï¼Œæ”¹å˜ä¼ å›æ•°ç»„ä¸­çš„å…ƒç´ å€¼ï¼Œä¸ä¼šå½±å“åŸæ¥çš„æ•°ç»„ã€‚ ç¬¬äºŒä¸ªè‡ªå˜é‡æŒ‡å®šè¦å»ºç«‹çš„æ–°æ•°ç»„é•¿åº¦ï¼Œå¦‚æœæ–°æ•°ç»„çš„é•¿åº¦è¶…è¿‡åŸæ•°ç»„çš„é•¿åº¦ï¼Œåˆ™ä¿ç•™æ•°ç»„é»˜è®¤å€¼ï¼Œä¾‹å¦‚ï¼š ä½¿ç”¨ Arrays.copyOf()æ–¹æ³•ä¸»è¦æ˜¯ä¸ºäº†ç»™åŸæœ‰æ•°ç»„æ‰©å®¹ã€‚ contains()æ–¹æ³• å°±æ˜¯éå†æ•°ç»„çœ‹æ˜¯å¦å­˜åœ¨è¯¥å…ƒç´ ã€‚ 123456789101112131415161718 public boolean contains(Object o) &#123; return indexOf(o) &gt;= 0;//#1 &#125;/* è¿”å›æŒ‡å®šå…ƒç´ åœ¨åˆ—è¡¨ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œå¦‚æœè¯¥åˆ—è¡¨ä¸åŒ…å«è¯¥å…ƒç´ ï¼Œåˆ™è¿”å›-1ã€‚*/ public int indexOf(Object o) &#123; if (o == null) &#123; for (int i = 0; i &lt; size; i++) if (elementData[i]==null) return i; &#125; else &#123; for (int i = 0; i &lt; size; i++) if (o.equals(elementData[i])) return i; &#125; return -1; &#125; 5.1 å¤šçº¿ç¨‹æ“ä½œArrayListä¼šå‡ºç°ä»€ä¹ˆé”™è¯¯ï¼Ÿ ä»ArrayListçš„ï¼ˆ1ï¼‰æ·»åŠ å…ƒç´ ï¼ˆadd/addAllï¼‰å’Œï¼ˆ2ï¼‰è·å–å…ƒç´ ï¼ˆgetï¼‰ ä¸¤ä¸ªè§’åº¦æ¥è¯´ï¼š å¤šçº¿ç¨‹æ·»åŠ å…ƒç´  å‡è®¾æ­¤æ—¶minCapacityï¼ˆæœ€å°éœ€è¦å®¹é‡ï¼‰= 10 ï¼Œæ­¤æ—¶æ•°ç»„å®¹é‡æ˜¯10ã€‚A,Bä¸¤ä¸ªçº¿ç¨‹å„éœ€è¦æ·»åŠ è‹¥å¹²å…ƒç´ ï¼ŒåŒæ—¶ åˆ¤æ–­æ­¤æ—¶ä¸éœ€è¦æ‰©å®¹ï¼Œåç»­å¯èƒ½å°±ä¼šå‘ç”Ÿæ•°ç»„è¶Šç•Œã€‚ å¤šçº¿ç¨‹è·å–å…ƒç´  ä¸€ä¸ªçº¿ç¨‹æ­£åœ¨ä¿®æ”¹æŸä¸ªå…ƒç´ ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹æ­¤æ—¶æ­£åœ¨è¯»ï¼Œé‚£ä¹ˆè¯»åˆ°çš„å°±æ˜¯ä¿®æ”¹å‰çš„å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯è„æ•°æ®ã€‚ 5.2 arraylistå¯ä»¥å­˜å¤šå°‘æ•°æ®ï¼Ÿ Integer.MAX_VALUE = 2147483647 ã€‚ arrayliståº•å±‚æ˜¯ä¸€ä¸ªæ•°ç»„å¯¹è±¡ï¼šObject[] arr = new Object[10]ï¼Œæ•°ç»„çš„å¤§å°åªèƒ½è®¾ç½®intç±»å‹ã€‚æ‰€ä»¥èƒ½å­˜å‚¨2147483647 å­—èŠ‚æ•°æ®ã€‚ 6. è¯´ä¸€ä¸‹LinkedListåº•å±‚åŸç†ï¼Ÿ å‚è€ƒï¼šJavaé›†åˆç³»åˆ—ä¹‹ä¸‰ï¼šLinkedListåº•å±‚åŸç† LinkedListå®ç°äº†Listæ¥å£å’ŒDequeæ¥å£çš„ï¼Œåº•å±‚çš„åŒç«¯é“¾è¡¨ç»“æ„ä½¿å®ƒæ”¯æŒé«˜æ•ˆçš„æ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œä¹Ÿå…·æœ‰é˜Ÿåˆ—çš„ç‰¹æ€§ï¼Œéçº¿ç¨‹å®‰å…¨çš„ã€‚ ç›¸æ¯”ArrayListè¦ç®€å•å¾ˆå¤šï¼Œä¸»è¦æ˜¯åŒå‘é“¾è¡¨é‚£äº›æ“ä½œã€‚ åº•å±‚ç»“æ„ æ ¸å¿ƒå±æ€§ã€æ„é€ æ–¹æ³•å’ŒNodeå®šä¹‰å¦‚ä¸‹ã€‚ 123456789101112131415161718192021222324252627282930public class LinkedList&lt;E&gt;extends AbstractSequentialList&lt;E&gt; implements List&lt;E&gt;, Deque&lt;E&gt;, Cloneable, java.io.Serializable&#123; transient int size = 0; //LinkedListä¸­å­˜æ”¾çš„å…ƒç´ ä¸ªæ•° transient Node&lt;E&gt; first; //å¤´èŠ‚ç‚¹ transient Node&lt;E&gt; last; //å°¾èŠ‚ç‚¹ //æ„é€ æ–¹æ³•ï¼Œåˆ›å»ºä¸€ä¸ªç©ºçš„åˆ—è¡¨ public LinkedList() &#123;&#125; //å°†ä¸€ä¸ªæŒ‡å®šçš„é›†åˆæ·»åŠ åˆ°LinkedListä¸­ï¼Œå…ˆå®Œæˆåˆå§‹åŒ–ï¼Œåœ¨è°ƒç”¨æ·»åŠ æ“ä½œ public LinkedList(Collection&lt;? extends E&gt; c) &#123; this(); addAll(c); &#125;// NodeèŠ‚ç‚¹ private static class Node&lt;E&gt; &#123; E item; Node&lt;E&gt; next; Node&lt;E&gt; prev; Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123; this.item = element; this.next = next; this.prev = prev; &#125; &#125; add() æ–¹æ³• æœ´å®æ— åçš„åŒå‘é“¾è¡¨å°¾æ’æ³•ã€‚è·å¾—å½“å‰æœ€åä¸€ä¸ªèŠ‚ç‚¹æœ€ä¸ºå½“å‰èŠ‚ç‚¹çš„å‰ç½®èŠ‚ç‚¹ï¼ŒåŒæ ·æŠŠå½“å‰èŠ‚ç‚¹è®¾ç½®ä¸ºå‰ç½®èŠ‚ç‚¹çš„åç½®èŠ‚ç‚¹ï¼Œç„¶åæŠŠå½“å‰èŠ‚ç‚¹ä½œä¸ºæœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œå› ä¸ºåªéœ€è¦åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹ä¸å‰ä¸€ä¸ªèŠ‚ç‚¹å»ºç«‹å‰åå…³ç³»å³å¯ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯O(1)ã€‚ 123456789101112131415161718192021public boolean add(E e) &#123; linkLast(e); return true;&#125; void linkLast(E e) &#123; // è·å¾—å½“å‰æœ€åä¸€ä¸ªèŠ‚ç‚¹ä½œä¸ºå‰ç½®èŠ‚ç‚¹ï¼Œå¯èƒ½ä¸ºç©º final Node&lt;E&gt; l = last; // åˆå§‹åŒ–å½“å‰èŠ‚ç‚¹ final Node&lt;E&gt; newNode = new Node&lt;&gt;(l, e, null); // æŠŠå½“å‰èŠ‚ç‚¹ä½œä¸ºæœ€åçš„èŠ‚ç‚¹ last = newNode; // ç¬¬ä¸€æ¬¡æ·»åŠ è®¾ç½®ä¸ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹ if (l == null) first = newNode; else // æŠŠå½“å‰èŠ‚ç‚¹è®¾ç½®ä¸ºå‰ç½®èŠ‚ç‚¹çš„åç½®èŠ‚ç‚¹ l.next = newNode; size++; modCount++;&#125; add(int index,E e) æŒ‰ç´¢å¼•æ’å…¥å…ƒç´ ï¼Œé¦–å…ˆåˆ¤æ–­æ˜¯ä¸æ˜¯ç¬¬ä¸€ä¸ªæ·»åŠ çš„å…ƒç´ ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œç›´æ¥ä½¿ç”¨add()æ–¹æ³•æ·»åŠ å°±å¯ä»¥äº†ï¼Œå¦‚æœä¸æ˜¯åˆ™éœ€è¦æ ¹æ®ç´¢å¼•æ¥éå†å¯»æ‰¾é“¾è¡¨ä¸Šå¯¹åº”ä½ç½®ã€‚ è¿™é‡Œç”¨äº†ä¸ªå°æŠ€å·§ï¼Œåˆ¤æ–­ç´¢å¼•æ˜¯åœ¨å‰åŠæ®µè¿˜æ˜¯åœ¨ååŠæ®µï¼Œä»çŸ­çš„é‚£å¤´å¼€å§‹éå†ï¼Œæ‰¾åˆ°ä¹‹åï¼Œæ–°å»ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œå»ºç«‹æ–°çš„å‰ç½®èŠ‚ç‚¹å’Œåç½®èŠ‚ç‚¹çš„å…³ç³»ã€‚æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ï¼Œnä¸ºsize/2ã€‚ get(int index)æ–¹æ³• get()æ–¹æ³•æ˜¯ç”¨çš„ä¸Šé¢ä»‹ç»è¿‡çš„node()æ–¹æ³•ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯O(n)ï¼Œnä¸ºsize/2ã€‚ 12345678910111213141516171819202122232425262728 public E get(int index) &#123; // åˆ¤æ–­æ•°ç»„è¶Šç•Œ checkElementIndex(index); // éå†å¯»æ‰¾èŠ‚ç‚¹ return node(index).item; &#125;// è·å¾—è¢«æ’å…¥ç´¢å¼•ä¸Šçš„å…ƒç´ Node&lt;E&gt; node(int index) &#123;// assert isElementIndex(index);// å¦‚æœç´¢å¼•æ˜¯åœ¨é“¾è¡¨çš„å‰åŠæ®µif (index &lt; (size &gt;&gt; 1)) &#123; // è·å¾—ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ Node&lt;E&gt; x = first; // å¾€åæ‰¾åˆ°æ’å…¥ç´¢å¼•ä½ç½®ä¸Šçš„èŠ‚ç‚¹ for (int i = 0; i &lt; index; i++) x = x.next; return x;&#125;// å¦‚æœç´¢å¼•æ˜¯åœ¨é“¾è¡¨çš„å‰åŠæ®µelse &#123; // è·å¾—æœ€åä¸ªèŠ‚ç‚¹ Node&lt;E&gt; x = last; // å¾€å‰æ‰¾åˆ°æ’å…¥ç´¢å¼•ä½ç½®ä¸Šçš„èŠ‚ç‚¹ for (int i = size - 1; i &gt; index; i--) x = x.prev; return x;&#125; 1.3.4 è¿­ä»£å™¨ 1.è¯·ç®€å•è¯´æ˜ä¸€ä¸‹ä»€ä¹ˆæ˜¯è¿­ä»£å™¨ï¼Ÿ Iteratoræä¾›äº†ç»Ÿä¸€éå†æ“ä½œé›†åˆå…ƒç´ çš„ç»Ÿä¸€æ¥å£, Collectionæ¥å£å®ç°Iterableæ¥å£ã€‚ æ¯ä¸ªé›†åˆéƒ½é€šè¿‡å®ç°Iterableæ¥å£ä¸­iterator()æ–¹æ³•è¿”å›Iteratoræ¥å£çš„å®ä¾‹, ç„¶åå¯¹é›†åˆçš„å…ƒç´ è¿›è¡Œè¿­ä»£æ“ä½œï¼› åœ¨è¿­ä»£å…ƒç´ çš„æ—¶å€™ä¸èƒ½é€šè¿‡é›†åˆçš„æ–¹æ³•åˆ é™¤å…ƒç´ , å¦åˆ™ä¼šæŠ›å‡ºConcurrentModificationException å¼‚å¸¸. ä½†æ˜¯å¯ä»¥é€šè¿‡Iteratoræ¥å£ä¸­çš„remove()æ–¹æ³•è¿›è¡Œåˆ é™¤ã€‚ 2.è¯·ä½ è¯´è¯´Iteratorå’ŒListIteratorçš„åŒºåˆ«ï¼Ÿ éå†ç±»å‹ï¼šIteratorå¯ç”¨æ¥éå†Setå’ŒListé›†åˆï¼Œä½†æ˜¯ListIteratoråªèƒ½ç”¨æ¥éå†Listï¼› éå†æ–¹å‘ï¼šIteratorå¯¹é›†åˆåªèƒ½æ˜¯å‰å‘éå†ï¼ŒListIteratoræ—¢å¯ä»¥å‰å‘ä¹Ÿå¯ä»¥åå‘ï¼› åŠŸèƒ½åŒºåˆ«ï¼šListIteratorå®ç°äº†Iteratoræ¥å£ï¼Œå¹¶åŒ…å«å…¶ä»–çš„åŠŸèƒ½","categories":[{"name":"æ ¡æ‹›ç¬”è®°","slug":"æ ¡æ‹›ç¬”è®°","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/"},{"name":"JAVA","slug":"æ ¡æ‹›ç¬”è®°/JAVA","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/JAVA/"}],"tags":[{"name":"JAVA","slug":"JAVA","permalink":"https://hwh.zone/tags/JAVA/"},{"name":"æ ¡æ‹›","slug":"æ ¡æ‹›","permalink":"https://hwh.zone/tags/%E6%A0%A1%E6%8B%9B/"}]},{"title":"æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰_Java_é¢å¯¹å¯¹è±¡","slug":"æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰_Java_é¢å¯¹å¯¹è±¡","date":"2021-11-26T11:57:22.483Z","updated":"2021-12-03T03:57:17.880Z","comments":true,"path":"p/7257/","link":"","permalink":"https://hwh.zone/p/7257/","excerpt":"","text":"æˆ‘çš„æ ¡æ‹›è®°å½•ï¼šæ ¡æ‹›ç¬”è®°ï¼ˆé›¶ï¼‰_å†™åœ¨å‰é¢ ï¼Œä»¥ä¸‹æ˜¯æ ¡æ‹›ç¬”è®°æ€»ç›®å½•ã€‚ å¤‡æ³¨ ç®—æ³•èƒ½åŠ›ï¼ˆâ€œåˆ·é¢˜â€ï¼‰ è¿™éƒ¨åˆ†å°±æ˜¯è€—æ—¶é—´å¤šç»ƒä¹ ï¼ŒLeetcode-Top100 æ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚ è¡¥å……ç»ƒä¹ ï¼šcodeTop è®¡ç®—æœºåŸºç¡€(ä¸Š)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_Javaå…¥é—¨ C++åç«¯åç»­æ›´æ–° æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é¢å¯¹å¯¹è±¡ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é›†åˆ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_å¤šçº¿ç¨‹ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é” æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_JVM è®¡ç®—æœºåŸºç¡€(ä¸‹)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆäºŒï¼‰__è®¡ç®—æœºåŸºç¡€_Linux&amp;Git æ ¡æ‹›ç¬”è®°ï¼ˆä¸‰ï¼‰__è®¡ç®—æœºåŸºç¡€_è®¡ç®—æœºç½‘ç»œ æ ¡æ‹›ç¬”è®°ï¼ˆå››ï¼‰__è®¡ç®—æœºåŸºç¡€_æ“ä½œç³»ç»Ÿ æ ¡æ‹›ç¬”è®°ï¼ˆäº”ï¼‰__è®¡ç®—æœºåŸºç¡€_MySQL æ ¡æ‹›ç¬”è®°ï¼ˆå…­ï¼‰__è®¡ç®—æœºåŸºç¡€_Redis æ ¡æ‹›ç¬”è®°ï¼ˆä¸ƒï¼‰__è®¡ç®—æœºåŸºç¡€_æ•°æ®ç»“æ„ æ ¡æ‹›ç¬”è®°ï¼ˆå…«ï¼‰__è®¡ç®—æœºåŸºç¡€_åœºæ™¯&amp;æ™ºåŠ›é¢˜ æ ¡æ‹›ç¬”è®°ï¼ˆä¹ï¼‰__è®¡ç®—æœºåŸºç¡€_ç›¸å…³è¡¥å…… é¡¹ç›®&amp;å®ä¹  ä¸»è¦æ˜¯æ€ä¹ˆå‡†å¤‡é¡¹ç›®ï¼Œåç»­æ›´æ–° 1.2 é¢å¯¹å¯¹è±¡ 1.2.1 åŸºæœ¬é—®é¢˜ 1.ä»‹ç»ä¸€ä¸‹é¢å¯¹å¯¹è±¡ä¸ƒå¤§åŸåˆ™ï¼Ÿä¸‰å¤§ç‰¹æ€§ï¼Ÿ ä¸ƒå¤§åŸåˆ™ å•ä¸€èŒè´£åŸåˆ™ï¼š å°±ä¸€ä¸ªç±»æ¥è¯´ï¼Œåº”è¯¥ä»…æœ‰ä¸€ä¸ªå¼•èµ·å®ƒå˜åŒ–çš„åŸå› ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªç±»åº”è¯¥åªæœ‰ä¸€ä¸ªèŒè´£ã€‚ å¦‚æœæœ‰å¤šä¸ªèŒè´£ï¼Œé‚£ä¹ˆå°±ç›¸å½“äºæŠŠè¿™äº›æŒ‡è´£è€¦åˆåœ¨èµ·ï¼Œä¸€ä¸ªèŒè´£çš„å˜åŒ–å°±å¯èƒ½å‰Šå¼±æˆ–æŠ‘åˆ¶äº†è¿™ä¸ªç±»å®Œæˆå…¶ä»–èŒè´£çš„èƒ½åŠ›ï¼Œå¼•èµ·ç±»çš„å˜åŒ–çš„åŸå› å°±ä¼šæœ‰å¤šä¸ªã€‚æ‰€ä»¥åœ¨æ„é€ ä¸€ä¸ªç±»æ—¶ï¼Œ å°†ç±»çš„ä¸åŒèŒè´£åˆ†ç¦»è‡³ä¸¤ä¸ªæˆ–å¤šä¸ªç±»ä¸­(æˆ–è€…æ¥å£ä¸­)ï¼Œç¡®ä¿å¼•èµ·è¯¥ç±»å˜åŒ–çš„åŸå› åªæœ‰ä¸€ä¸ªã€‚ å¼€é—­åŸåˆ™(OCP)ï¼š è½¯ä»¶ç»„æˆå®ä½“åº”è¯¥æ˜¯å¯æ‰©å±•çš„ï¼Œä½†æ˜¯ä¸å¯ä¿®æ”¹ã€‚å¼€æ”¾-å°é—­åŸåˆ™è®¤ä¸ºåº”è¯¥è¯•å›¾è®¾è®¡æ°¸è¿œä¹Ÿä¸éœ€è¦æ”¹å˜çš„æ¨¡å—ã€‚å¯ä»¥æ·»åŠ æ–°ä»£ç æ¥æ‰“å±•ç³»ç»Ÿçš„è¡Œä¸ºï¼Œä¸èƒ½å¯¹å·²æœ‰çš„ä»£ç è¿›è¡Œä¿®æ”¹ã€‚ è¿™ä¸ªåŸåˆ™å¾ˆå¥½çš„å®ç°äº†é¢å‘å¯¹è±¡çš„å°è£…æ€§å’Œå¯é‡ç”¨æ€§ã€‚ ææ°æ›¿æ¢åŸåˆ™(LSP)ï¼š å­ç±»åº”å½“å¯ä»¥æ›¿æ¢çˆ¶ç±»å¹¶å‡ºç°åœ¨çˆ¶ç±»èƒ½å¤Ÿå‡ºç°çš„ä»»ä½•åœ°æ–¹ã€‚ ä»¥åœ†å’Œæ¤­åœ†ä¸ºä¾‹ï¼Œåœ†æ˜¯æ¤­åœ†çš„ä¸€ä¸€ä¸ªç‰¹æ®Šå­ç±»ã€‚å› æ­¤ä»»ä½•å‡ºç°æ¤­åœ†çš„åœ°æ–¹ï¼Œåœ†å‡å¯ä»¥å‡ºç°ã€‚ ä¾èµ–å€’ç½®åŸåˆ™(DIP)ï¼š åœ¨è¿›è¡Œä¸šåŠ¡è®¾è®¡æ—¶ï¼Œä¸ç‰¹å®šä¸šåŠ¡æœ‰å…³çš„ä¾èµ–å…³ç³»åº”è¯¥å°½é‡ä¾èµ–æ¥å£å’ŒæŠ½è±¡ç±»ï¼Œè€Œä¸æ˜¯ä¾èµ–äºå…·ä½“ç±»ã€‚å…·ä½“ç±»åªè´Ÿè´£ç›¸å…³ä¸šåŠ¡çš„å®ç°ï¼Œä¿®æ”¹å…·ä½“ç±»ä¸å½±å“ä¸ç‰¹å®šä¸šåŠ¡æœ‰å…³çš„ä¾èµ–å…³ç³»ã€‚ ä¸ºæ­¤ï¼Œåœ¨è¿›è¡Œä¸šåŠ¡è®¾è®¡æ—¶ï¼Œåº”å°½é‡åœ¨æ¥å£æˆ–æŠ½è±¡ç±»ä¸­å®šä¹‰ä¸šåŠ¡æ–¹æ³•çš„åŸå‹ï¼Œå¹¶é€šè¿‡å…·ä½“çš„å®ç°ç±»(å­ç±»)æ¥å®ç°è¯¥ä¸šåŠ¡æ–¹æ³•ï¼Œä¸šåŠ¡æ–¹æ³•å†…å®¹çš„ä¿®æ”¹å°†ä¸ä¼šå½±å“åˆ°è¿è¡Œæ—¶ä¸šåŠ¡æ–¹æ³•çš„è°ƒç”¨ã€‚ æ¥å£åˆ†ç¦»åŸåˆ™(ISP)ï¼š é‡‡ç”¨å¤šä¸ªä¸ç‰¹å®šå®¢æˆ·ç±»æœ‰å…³çš„æ¥å£ æ¯”é‡‡ç”¨ä¸€ä¸ªé€šç”¨çš„æ¶µç›–å¤šä¸ªä¸šåŠ¡æ–¹æ³•çš„æ¥å£è¦å¥½ã€‚ ä¸¾ä¾‹ï¼šå¦‚æœæ‹¥æœ‰ä¸€ä¸ªé’ˆå¯¹å¤šä¸ªå®¢æˆ·çš„ç±»ï¼Œä¸ºæ¯ä¸€ä¸ªå®¢æˆ·åˆ›å»ºç‰¹å®šä¸šåŠ¡æ¥å£ï¼Œç„¶åä½¿è¯¥å®¢æˆ·ç±»ç»§æ‰¿å¤šä¸ªç‰¹å®šä¸šåŠ¡æ¥å£å°†æ¯”ç›´æ¥åŠ è½½å®¢æˆ·æ‰€éœ€æ‰€æœ‰æ–¹æ³•æœ‰æ•ˆã€‚ ç»„åˆé‡ç”¨åŸåˆ™ ï¼šèƒ½ç”¨ç»„åˆå®ç°çš„åœ°æ–¹ï¼Œå°½é‡ç”¨ç»„åˆæ¥å®ç°ï¼Œè€Œä¸è¦ä½¿ç”¨ç»§æ‰¿æ¥æ‰©å±•åŠŸèƒ½ã€‚ 097å› ä¸ºç»„åˆèƒ½æ›´å¥½åœ°å®ç°å°è£…ï¼Œæ¯”ç»§æ‰¿å…·æœ‰æ›´å¤§çš„çµæ´»æ€§å’Œæ›´ç¨³å®šçš„ç»“æ„ã€‚ è¿ªç±³ç‰¹åŸåˆ™ : ä¸€ä¸ªå¯¹è±¡åº”è¯¥å¯¹äºå…¶ä»–å¯¹è±¡æœ‰æœ€å°‘çš„äº†è§£ï¼Œè¿™æ ·åšçš„å¥½å¤„å°±æ˜¯å¯ä»¥æœ‰æ•ˆåœ°é™ä½ç±»ä¹‹é—´çš„è€¦åˆè¦æ±‚ã€‚ ä¸‰å¤§ç‰¹æ€§ å°è£…ã€‚å°è£…æŠŠâ¼€ä¸ªå¯¹è±¡çš„å±æ€§ç§æœ‰åŒ–ï¼ŒåŒæ—¶æä¾›â¼€äº›å¯ä»¥è¢«å¤–ç•Œè®¿é—®çš„å±æ€§çš„æ–¹æ³•ï¼Œå¦‚æœå±æ€§ä¸æƒ³è¢«å¤–ç•Œè®¿é—®ï¼Œæˆ‘ä»¬å¤§å¯ä¸å¿…æä¾›æ–¹æ³•ç»™å¤–ç•Œè®¿é—®ã€‚ä½†æ˜¯å¦‚æœâ¼€ä¸ªç±»æ²¡æœ‰æä¾›ç»™å¤–ç•Œè®¿é—®çš„æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»ä¹Ÿæ²¡æœ‰ä»€ä¹ˆæ„ä¹‰äº†ã€‚ ç»§æ‰¿ã€‚ ç»§æ‰¿æ˜¯ä½¿ç”¨å·²å­˜åœ¨çš„ç±»çš„å®šä¹‰ä½œä¸ºåŸºç¡€å»ºâ½´æ–°ç±»çš„æŠ€æœ¯ï¼Œæ–°ç±»çš„å®šä¹‰å¯ä»¥å¢åŠ æ–°çš„æ•°æ®æˆ–æ–°çš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥ç”¨â½—ç±»çš„åŠŸèƒ½ï¼Œä½†ä¸èƒ½é€‰æ‹©æ€§åœ°ç»§æ‰¿â½—ç±»ã€‚é€šè¿‡ä½¿ç”¨ç»§æ‰¿æˆ‘ä»¬èƒ½å¤Ÿéå¸¸æ–¹ä¾¿åœ°å¤ç”¨ä»¥å‰çš„ä»£ç ã€‚ å­ç±»æ‹¥æœ‰â½—ç±»å¯¹è±¡æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼ˆåŒ…æ‹¬ç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•ï¼‰ï¼Œä½†æ˜¯â½—ç±»ä¸­çš„ç§æœ‰å±æ€§å’Œæ–¹æ³•å­ç±»æ˜¯æ— æ³•è®¿é—®ï¼Œåªæ˜¯æ‹¥æœ‰ã€‚ å­ç±»å¯ä»¥æ‹¥æœ‰â¾ƒâ¼°å±æ€§å’Œæ–¹æ³•ï¼Œå³å­ç±»å¯ä»¥å¯¹â½—ç±»è¿›è¡Œæ‰©å±•ã€‚ å­ç±»å¯ä»¥ç”¨â¾ƒâ¼°çš„æ–¹å¼å®ç°â½—ç±»çš„æ–¹æ³•ã€‚ å¤šæ€ã€‚ï¼ˆ1ï¼‰é™æ€å¤šæ€ï¼šé‡è½½ ï¼ˆ2ï¼‰åŠ¨æ€å¤šæ€ï¼šæ‰€è°“å¤šæ€å°±æ˜¯æŒ‡ç¨‹åºä¸­å®šä¹‰çš„å¼•ç”¨å˜é‡æ‰€æŒ‡å‘çš„å…·ä½“ç±»å‹å’Œ&lt;é€šè¿‡è¯¥å¼•ç”¨å˜é‡å‘å‡ºçš„æ–¹æ³•è°ƒç”¨åœ¨ç¼–ç¨‹æ—¶å¹¶ä¸ç¡®å®šï¼Œè€Œæ˜¯åœ¨ã€ç¨‹åºè¿è¡ŒæœŸé—´æ‰ç¡®å®šã€‘ã€‚å³â¼€ä¸ªå¼•ç”¨å˜é‡åˆ°åº•ä¼šæŒ‡å‘å“ªä¸ªç±»çš„å®ä¾‹å¯¹è±¡ï¼Œè¯¥å¼•ç”¨å˜é‡å‘å‡ºçš„æ–¹æ³•è°ƒç”¨åˆ°åº•æ˜¯å“ªä¸ªç±»ä¸­å®ç°çš„æ–¹æ³•ï¼Œå¿…é¡»åœ¨ç”±ç¨‹åºè¿è¡ŒæœŸé—´æ‰èƒ½å†³å®šã€‚ åœ¨ Java ä¸­æœ‰ä¸¤ç§å½¢å¼å¯ä»¥å®ç°å¤šæ€ï¼šç»§æ‰¿ï¼ˆå¤šä¸ªå­ç±»å¯¹åŒâ¼€æ–¹æ³•çš„é‡å†™ï¼‰å’Œæ¥å£ï¼ˆå®ç°æ¥å£å¹¶è¦†ç›–æ¥å£ä¸­åŒâ¼€æ–¹æ³•ï¼‰ã€‚ 1.1 javaå¤šæ€çš„åŸç†ï¼Ÿã€é˜¿é‡Œ&amp;å¾…é‡å†™ã€‘ å¤šæ€åˆ†ä¸¤ç§ï¼šï¼ˆ1ï¼‰ã€ç¼–è¯‘ã€‘æ—¶å¤šæ€ï¼ˆé™æ€å¤šæ€ï¼‰ï¼ˆ2ï¼‰è¿è¡Œæ—¶å¤šæ€ï¼ˆåŠ¨æ€å¤šæ€ï¼‰ã€‚ é™æ€å¤šæ€ é‡è½½ï¼ˆoverloadï¼‰å°±æ˜¯ç¼–è¯‘æ—¶å¤šæ€çš„ä¸€ä¸ªä¾‹å­ï¼Œç¼–è¯‘æ—¶å¤šæ€åœ¨ç¼–è¯‘æ—¶å°±å·²ç»ç¡®å®šã€‚ è¿è¡Œæ—¶è¿è¡Œçš„æ—¶å€™è°ƒç”¨çš„æ˜¯ç¡®å®šçš„æ–¹æ³•ã€‚ åŠ¨æ€å¤šæ€ æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„å¤šæ€æŒ‡çš„éƒ½æ˜¯è¿è¡Œæ—¶å¤šæ€ï¼Œä¹Ÿå°±æ˜¯ç¼–è¯‘æ—¶ä¸ç¡®å®šç©¶ç«Ÿè°ƒç”¨å“ªä¸ªå…·ä½“æ–¹æ³•ï¼Œä¸€ç›´å»¶è¿Ÿåˆ°è¿è¡Œæ—¶ï¼ˆé“¾æ¥è¿‡ç¨‹ï¼‰æ‰èƒ½ç¡®å®šã€‚ é€šå¸¸åŠ¨æ€å¤šæ€çš„å®ç°æ–¹æ³•ï¼š å­ç±»ç»§æ‰¿çˆ¶ç±»ï¼ˆextendsï¼‰ ç±»å®ç°æ¥å£ï¼ˆimplementsï¼‰ æ ¸å¿ƒä¹‹å¤„å°±åœ¨äºå¯¹çˆ¶ç±»æ–¹æ³•çš„æ”¹å†™æˆ–å¯¹æ¥å£æ–¹æ³•çš„å®ç°ï¼Œä»¥å–å¾—åœ¨è¿è¡Œæ—¶ä¸åŒçš„æ‰§è¡Œæ•ˆæœã€‚ å¤šæ€è¿è¡Œçš„åŸç† è¯¦ç»†å»ºè®®æŸ¥çœ‹ï¼šæ·±å…¥ç†è§£Javaå¤šæ€çš„å®ç°åŸç† èƒŒæ™¯ä»‹ç» ç±»åŠ è½½ æ—¶ä¼šå°†ç±»çš„å…ƒæ•°æ®ä¿¡æ¯ï¼ˆç±»çš„æ–¹æ³•ä»£ç ã€ç±»å˜é‡ã€æˆå‘˜å˜é‡çš„å®šä¹‰ç­‰ç­‰ï¼‰ä¿å­˜åˆ°æ–¹æ³•åŒºï¼Œæ–¹æ³•åŒºä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š å¸¸é‡æ± ï¼šJava ç±»å¼•ç”¨çš„ä¸€äº›å¸¸é‡ä¿¡æ¯ï¼Œæ¯”å¦‚ç±»çš„ç¬¦å·å¼•ç”¨ä¿¡æ¯ æ–¹æ³•åŒºå…¶å®ƒéƒ¨åˆ†ï¼š ä¿å­˜æ–¹æ³•è¡¨ç­‰ é“¾æ¥è¿‡ç¨‹ ç±»çš„å¤šæ€å°±å‘ç”Ÿåœ¨ é“¾æ¥çš„è§£æ è¿‡ç¨‹ï¼Œå°† ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨ã€‚ åŸç†ç®€è¿°ï¼ˆå­ç±»æ–¹æ³•ç»§æ‰¿ï¼‰ å‚è€ƒï¼šhttps://www.huaweicloud.com/articles/9b805c24ab31a65f5883c0dfeaf5a39b.html 2.è¯·è§£é‡ŠJavaä¸­çš„æ¦‚å¿µï¼Œä»€ä¹ˆæ˜¯æ„é€ å‡½æ•°ï¼Ÿä»€ä¹ˆæ˜¯æ„é€ å‡½æ•°é‡è½½ï¼Ÿä»€ä¹ˆæ˜¯å¤åˆ¶æ„é€ å‡½æ•°ï¼Ÿ æ„é€ å‡½æ•°ï¼š æ¯ä¸€ä¸ªç±»éƒ½æœ‰æ„é€ å‡½æ•°ï¼Œç¨‹åºå‘˜æ²¡æœ‰åˆ›å»ºæ—¶ï¼Œç¼–è¯‘å™¨ä¼šé»˜è®¤åˆ›å»ºä¸€ä¸ªæ„é€ å‡½æ•°ï¼›å¯¹è±¡è¢«åˆ›å»ºæ—¶ï¼Œæ„é€ å‡½æ•°è¢«è°ƒç”¨ï¼› æ„é€ å‡½æ•°é‡è½½ï¼š å’Œæ–¹æ³•é‡è½½ç±»ä¼¼ï¼Œä¸€ä¸ªç±»å¯ä»¥åˆ›å»ºå¤šä¸ªæ„é€ å‡½æ•°ï¼Œæ¯ä¸ªæ„é€ å‡½æ•°éƒ½æœ‰å”¯ä¸€å‚æ•°åˆ—è¡¨ï¼› å¤åˆ¶æ„é€ å‡½æ•°ï¼š Javaä¸æ”¯æŒåƒC++ä¸­é‚£æ ·çš„å¤åˆ¶æ„é€ å‡½æ•°ã€‚ 3.è¯·è¯´æ˜Javaä¸­çš„æ–¹æ³•é‡å†™(Overriding)å’Œæ–¹æ³•é‡è½½(Overloading)æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿæ„é€ å‡½æ•°èƒ½å¦è¢«é‡å†™ï¼Ÿ Overriding ï¼š æ–¹æ³•é‡å†™æ˜¯è¯´å­ç±»é‡æ–°å®šä¹‰äº†çˆ¶ç±»çš„æ–¹æ³•ï¼Œæœ‰ç›¸åŒçš„æ–¹æ³•åï¼Œå‚æ•°åˆ—è¡¨å’Œè¿”å›ç±»å‹ ï¼› Overloadingï¼š åŒä¸€ä¸ªç±»é‡Œé¢ä¸¤ä¸ªæˆ–è€…æ˜¯å¤šä¸ªæ–¹æ³•åŒå ï¼Œä½† å‚æ•°åˆ—è¡¨ä¸åŒä¸åŒã€‚ ç‰¹åˆ«çš„é‡å†™è¦æ±‚è¿”å›ç±»å‹ä¸€è‡´ï¼Œä½†é‡è½½ä¸è¦æ±‚è¿”å›ç±»å‹ä¸€è‡´ï¼ æ„é€ å‡½æ•°ä¸èƒ½è¢« overrideï¼ˆé‡å†™ï¼‰ï¼ä½†æ˜¯å¯ä»¥ overloadï¼ˆé‡è½½ï¼‰,æ‰€ä»¥ä½ å¯ä»¥çœ‹åˆ°â¼€ä¸ªç±»ä¸­æœ‰å¤šä¸ªæ„é€ å‡½æ•°çš„æƒ…å†µã€‚ 3.1 fï¼ˆList&lt;String&gt; lï¼‰ fï¼ˆList&lt;Integer&gt; lï¼‰æ˜¯é‡è½½ä¹ˆï¼Ÿ ä¸æ˜¯é‡è½½ã€‚ é™æ€ç±»å‹ä¸€è‡´ï¼Œå¹¶ä¸ä¼šå› ä¸ºæ³›å‹è€Œæ”¹å˜ã€‚å› ä¸ºç¼–è¯‘æœŸé—´ï¼Œä¼šå¯¹æ³›å‹è¿›è¡Œæ“¦é™¤ã€‚ 4.ä»‹ç»ä¸€ä¸‹æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«ï¼Ÿ è®¾è®¡å±‚é¢ æ¥å£ï¼Œæ˜¯å¯¹ç±»çš„è¡Œä¸ºè¿›è¡Œçº¦æŸï¼Œå¼ºåˆ¶è¦æ±‚ä¸åŒç±»å®ç°ç›¸åŒè¡Œä¸º ï¼› æŠ½è±¡ç±»ï¼Œæ—¢ 1.éæŠ½è±¡ç±»å®ç°ä»£ç å¤ç”¨ 2.åˆåŒæ—¶æœ‰æŠ½è±¡æ–¹æ³•ä½¿å¾—è¢«ç»§æ‰¿ç±»å„è‡ªå®ç°ã€‚ æ–¹æ³•å®ç° æŠ½è±¡ç±»å¯ä»¥æœ‰éæŠ½è±¡æ–¹æ³•ï¼Œæœ‰æ–¹æ³•ä½“ ï¼› æ¥å£ä¸èƒ½æœ‰ã€‚ æŠ½è±¡ç±»ä¸­æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œä½ å¯ä»¥ç»™å®ƒæä¾›é»˜è®¤çš„å®ç°ã€‚å› æ­¤ä½ ä¸éœ€è¦æ”¹å˜ä½ ç°åœ¨çš„ä»£ç ã€‚ å¦‚æœä½ å¾€æ¥å£ä¸­æ·»åŠ æ–¹æ³•ï¼Œé‚£ä¹ˆä½ å¿…é¡»æ”¹å˜å®ç°è¯¥æ¥å£çš„ç±»ã€‚ æ„é€ å‡½æ•° æŠ½è±¡ç±»æœ‰ï¼›æ¥å£æ²¡æœ‰ã€‚ ä¿®é¥°ç¬¦ æŠ½è±¡ç±»é™¤private éƒ½æœ‰ï¼ˆæŠ½è±¡ç±»ç›®çš„æ˜¯è¢«ç»§æ‰¿ï¼Œæ‰€ä»¥æŠ½è±¡æ–¹æ³•æ˜¯ä¸ºè¢«é‡å†™ï¼Œä¸èƒ½ç§æœ‰ï¼‰ï¼›æ¥å£é»˜è®¤publicã€‚ ç»§æ‰¿ä¸ªæ•° [æ¥å£ä¼˜] æŠ½è±¡ç±»åªèƒ½è¢«ç»§æ‰¿ä¸€æ¬¡ï¼›æ¥å£å¯ä»¥æœ‰å¤šä¸ªã€‚ 5. Javaçš„å››ç§å¼•ç”¨ï¼Ÿå¼ºè½¯å¼±è™š ï¼Ÿ å¼ºå¼•ç”¨ ï¼šå¼ºå¼•ç”¨æ˜¯å¹³å¸¸ä¸­ä½¿ç”¨æœ€å¤šçš„å¼•ç”¨ï¼Œå¼ºå¼•ç”¨åœ¨ç¨‹åºå†…å­˜ä¸è¶³ï¼ˆOOMï¼‰çš„æ—¶å€™ä¹Ÿä¸ä¼šè¢«å›æ”¶ï¼Œä½¿ç”¨æ–¹å¼ï¼š 12String str = new String(&quot;str&quot;);System.out.println(str); è½¯å¼•ç”¨ï¼š è½¯å¼•ç”¨åœ¨ç¨‹åºå†…å­˜ä¸è¶³æ—¶ï¼Œä¼šè¢«å›æ”¶ï¼ˆâ€œè½¯â€ï¼Œæ²¡é’±ç”¨äº†ç¬¬ä¸€ä¸ªè¢«æ‰“åŠ«ï¼‰ï¼Œä½¿ç”¨æ–¹å¼ï¼š å¯ç”¨åœºæ™¯ï¼š åˆ›å»ºç¼“å­˜çš„æ—¶å€™ï¼Œåˆ›å»ºçš„å¯¹è±¡æ”¾è¿›ç¼“å­˜ä¸­ï¼Œå½“å†…å­˜ä¸è¶³æ—¶ï¼ŒJVMå°±ä¼šå›æ”¶æ—©å…ˆåˆ›å»ºçš„å¯¹è±¡ã€‚ 123// æ³¨æ„ï¼šwrfè¿™ä¸ªå¼•ç”¨ä¹Ÿæ˜¯å¼ºå¼•ç”¨ï¼Œå®ƒæ˜¯æŒ‡å‘SoftReferenceè¿™ä¸ªå¯¹è±¡çš„ï¼Œ// è¿™é‡Œçš„è½¯å¼•ç”¨æŒ‡çš„æ˜¯æŒ‡å‘new String(&quot;str&quot;)çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯SoftReferenceç±»ä¸­TSoftReference&lt;String&gt; wrf = new SoftReference&lt;String&gt;(new String(&quot;str&quot;)); å¼±å¼•ç”¨ï¼šæ˜¯åªè¦JVMåƒåœ¾å›æ”¶å™¨å‘ç°äº†å¼±å¼•ç”¨ï¼Œå°±ä¼šå°†ä¹‹å›æ”¶ï¼Œä½¿ç”¨æ–¹å¼ï¼š å¯ç”¨åœºæ™¯ï¼š Javaæºç ä¸­çš„ java.util.WeakHashMap ä¸­çš„ key å°±æ˜¯ä½¿ç”¨å¼±å¼•ç”¨ã€‚ä¸€æ—¦æˆ‘ä¸éœ€è¦æŸä¸ªå¼•ç”¨ï¼ŒJVMä¼šè‡ªåŠ¨å¸®æˆ‘å¤„ç†å®ƒï¼Œè¿™æ ·æˆ‘å°±ä¸éœ€è¦åšå…¶å®ƒæ“ä½œã€‚ 1WeakReference&lt;String&gt; wrf = new WeakReference&lt;String&gt;(str); è™šå¼•ç”¨ï¼šæ— æ³•é€šè¿‡è™šå¼•ç”¨æ¥è·å–å¯¹ä¸€ä¸ªå¯¹è±¡çš„çœŸå®å¼•ç”¨ï¼› è™šå¼•ç”¨å¿…é¡»ä¸ReferenceQueueä¸€èµ·ä½¿ç”¨ï¼Œå½“GCå‡†å¤‡å›æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœå‘ç°å®ƒè¿˜æœ‰è™šå¼•ç”¨ï¼Œå°±ä¼šåœ¨å›æ”¶ä¹‹å‰ï¼ŒæŠŠè¿™ä¸ªè™šå¼•ç”¨åŠ å…¥åˆ°ä¸ä¹‹å…³è”çš„ReferenceQueueä¸­ã€‚ å¯ç”¨åœºæ™¯ï¼š å¯¹è±¡é”€æ¯å‰çš„ä¸€äº›æ“ä½œï¼Œæ¯”å¦‚è¯´èµ„æºé‡Šæ”¾ç­‰ã€‚ Object.finalize() è™½ç„¶ä¹Ÿå¯ä»¥åšè¿™ç±»åŠ¨ä½œï¼Œä½†æ˜¯è¿™ä¸ªæ–¹å¼å³ä¸å®‰å…¨åˆä½æ•ˆã€‚ 12PhantomReference&lt;String&gt; prf = new PhantomReference&lt;String&gt;(new String(&quot;str&quot;),new ReferenceQueue&lt;&gt;()); 6. JAVAåˆ›å»ºå¯¹è±¡çš„æœºåˆ¶ï¼Ÿ newåˆ›å»ºæ–°å¯¹è±¡ é€šè¿‡åå°„æœºåˆ¶ é‡‡ç”¨cloneæœºåˆ¶ é€šè¿‡åºåˆ—åŒ–æœºåˆ¶ 7.ç®€è¿°Javaçš„å¯¹è±¡ç»“æ„ï¼Ÿ Javaå¯¹è±¡ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼šå¯¹è±¡å¤´ã€å®ä¾‹æ•°æ®ã€å¯¹é½å¡«å……ã€‚ å¯¹è±¡å¤´ã€‚ åœ¨JVMä¸­ï¼Œå¯¹è±¡åœ¨å†…å­˜ä¸­é™¤äº†æœ¬èº«çš„æ•°æ®å¤–è¿˜ä¼šæœ‰ä¸ªå¯¹è±¡å¤´ï¼Œå¯¹äºæ™®é€šå¯¹è±¡è€Œè¨€ï¼Œå…¶å¯¹è±¡å¤´ä¸­æœ‰ä¸¤ç±»ä¿¡æ¯ï¼šmark wordå’Œç±»å‹æŒ‡é’ˆã€‚ å¦‚æœæ˜¯æ•°ç»„å¯¹è±¡ï¼Œè¿˜æœ‰æ•°ç»„é•¿åº¦ã€‚ mark word(32ä½) å…·ä½“çš„å†…å®¹åŒ…å«å¯¹è±¡çš„hashcodeã€åˆ†ä»£å¹´é¾„ã€è½»é‡çº§é”æŒ‡é’ˆã€é‡é‡çº§é”æŒ‡é’ˆã€GCæ ‡è®°ï¼ˆåˆ†ä»£å¹´é¾„ï¼‰ã€åå‘é”çº¿ç¨‹IDã€åå‘é”æ—¶é—´æˆ³ã€‚ å½“å¯¹è±¡çŠ¶æ€ä¸ºåå‘é”æ—¶ï¼Œmark wordå­˜å‚¨çš„æ˜¯åå‘çš„çº¿ç¨‹IDï¼›å½“çŠ¶æ€ä¸ºè½»é‡çº§é”ï¼ˆlightweight lockedï¼‰æ—¶ï¼Œmark wordå­˜å‚¨çš„æ˜¯æŒ‡å‘çº¿ç¨‹æ ˆä¸­Lock Recordçš„æŒ‡é’ˆï¼›å½“çŠ¶æ€ä¸ºé‡é‡çº§é”ï¼ˆinflatedï¼‰æ—¶ï¼Œä¸ºæŒ‡å‘å †ä¸­çš„monitorå¯¹è±¡çš„æŒ‡é’ˆã€‚ å­˜å‚¨ç±»å‹æŒ‡é’ˆï¼Œä¹Ÿå°±æ˜¯æŒ‡å‘ç±»çš„å…ƒæ•°æ®çš„æŒ‡é’ˆï¼Œé€šè¿‡è¿™ä¸ªæŒ‡é’ˆæ‰èƒ½ç¡®å®šå¯¹è±¡æ˜¯å±äºå“ªä¸ªç±»çš„å®ä¾‹ï¼› æ•°ç»„é•¿åº¦ï¼šå¦å¤–å¯¹äºæ•°ç»„è€Œè¨€è¿˜ä¼šæœ‰ä¸€ä»½è®°å½•æ•°ç»„é•¿åº¦çš„æ•°æ®ã€‚ å®ä¾‹æ•°æ®ã€‚ æ¥å­˜å‚¨å¯¹è±¡çœŸæ­£çš„æœ‰æ•ˆä¿¡æ¯ï¼ˆåŒ…æ‹¬çˆ¶ç±»ç»§æ‰¿ä¸‹æ¥çš„å’Œè‡ªå·±å®šä¹‰çš„ï¼‰ï¼› å¯¹é½å¡«å……ã€‚JVMè¦æ±‚å¯¹è±¡èµ·å§‹åœ°å€å¿…é¡»æ˜¯8å­—èŠ‚çš„æ•´æ•°å€ï¼ˆ8å­—èŠ‚å¯¹é½ï¼‰ã€‚ 8. Objectæœ‰å“ªäº›å¸¸ç”¨æ–¹æ³•ï¼Ÿ equalsæ–¹æ³• hashCodeæ–¹æ³• waitæ–¹æ³• notifyæ–¹æ³• notifyAllæ–¹æ³• 1.2.2 åå°„ 1.è¯·è¯´æ˜ä¸€ä¸‹JAVAä¸­åå°„çš„å®ç°è¿‡ç¨‹å’Œä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ ï¼ˆå¿«æ‰‹ï¼‰ä¼˜ç¼ºç‚¹ï¼Ÿ å®šä¹‰ åå°„æœºåˆ¶æ˜¯åœ¨è¿è¡Œæ—¶ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›å¯¹äºä»»æ„ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„ä¸€ä¸ªæ–¹æ³•ã€‚åœ¨javaä¸­ï¼Œåªè¦ç»™å®šç±»çš„åå­—ï¼Œå°±å¯ä»¥é€šè¿‡åå°„æœºåˆ¶æ¥è·å¾—ç±»çš„æ‰€æœ‰ä¿¡æ¯ã€‚ jdbcå°±æ˜¯å…¸å‹çš„åå°„ : 1Class.forName(&#x27;com.mysql.jdbc.Driver.class&#x27;);//åŠ è½½MySQLçš„é©±åŠ¨ç±» å®ç°å’Œä½œç”¨ JAVAè¯­è¨€ç¼–è¯‘ä¹‹åä¼šç”Ÿæˆä¸€ä¸ª.classæ–‡ä»¶ï¼Œåå°„å°±æ˜¯é€šè¿‡å­—èŠ‚ç æ–‡ä»¶æ‰¾åˆ°æŸä¸€ä¸ªç±»ã€ç±»ä¸­çš„æ–¹æ³•ä»¥åŠå±æ€§ç­‰ã€‚ å®ç°ï¼š ï¼ˆ1ï¼‰ä»£ç ä¼šç¼–è¯‘æˆä¸€ä¸ª.classæ–‡ä»¶ ï¼ˆ2ï¼‰ç±»åŠ è½½å™¨åŠ è½½è¿›JVMçš„å†…å­˜ä¸­ï¼Œåœ¨æ–¹æ³•åŒºåˆ›å»ºäº†Objectç±»çš„Classå¯¹è±¡ ä¸æ˜¯newå‡ºæ¥çš„å¯¹è±¡ï¼Œè€Œæ˜¯ç±»çš„ç±»å‹å¯¹è±¡ï¼Œæ¯ä¸ªç±»éƒ½åªæœ‰ä¸€ä¸ªClasså¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•åŒºç±»çš„æ•°æ®ç»“æ„çš„æ¥å£ã€‚ æˆ‘ä»¬ä¾¿æ˜¯é€šè¿‡è¿™ä¸ªclasså¯¹è±¡æ¥è¿›è¡Œåå°„è·å–ç±»çš„ä¿¡æ¯ã€‚ ä½œç”¨ï¼š åå°„æœºåˆ¶æŒ‡çš„æ˜¯ç¨‹åºåœ¨è¿è¡Œæ—¶èƒ½å¤Ÿè·å–è‡ªèº«çš„ä¿¡æ¯ã€‚åœ¨JAVAä¸­ï¼Œåªè¦ç»™å®šç±»çš„åå­—ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡åå°„æœºåˆ¶æ¥è·å–ç±»çš„æ‰€æœ‰ä¿¡æ¯ã€‚ æ ¹æ®ç±»ååœ¨è¿è¡Œæ—¶åˆ›å»ºå®ä¾‹ï¼ˆç±»åå¯ä»¥ä»é…ç½®æ–‡ä»¶è¯»å–ï¼Œä¸ç”¨newï¼‰ åå°„ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼šï¼ˆ1ï¼‰å¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›ï¼ˆ2ï¼‰å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„ä¸€ä¸ªæ–¹æ³• ç¼ºç‚¹ï¼š æ€§èƒ½é™ä½ ï¼š åå°„åŒ…æ‹¬äº†ä¸€äº›åŠ¨æ€ç±»å‹ï¼Œæ‰€ä»¥JVMæ— æ³•å¯¹è¿™äº›ä»£ç è¿›è¡Œä¼˜åŒ– å®‰å…¨é™åˆ¶ï¼š ä½¿ç”¨åå°„æŠ€æœ¯è¦æ±‚ç¨‹åºå¿…é¡»åœ¨ä¸€ä¸ªæ²¡æœ‰å®‰å…¨é™åˆ¶çš„ç¯å¢ƒä¸­è¿è¡Œ å†…éƒ¨æš´éœ²ï¼šç”±äºåå°„å…è®¸ä»£ç æ‰§è¡Œä¸€äº›åœ¨æ­£å¸¸æƒ…å†µä¸‹ä¸è¢«å…è®¸çš„æ“ä½œï¼ˆæ¯”å¦‚è®¿é—®ç§æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼‰ï¼Œæ‰€ä»¥ä½¿ç”¨åå°„å¯èƒ½ä¼šå¯¼è‡´æ„æ–™ä¹‹å¤–çš„å‰¯ä½œç”¨ 2. è§£é‡Šä¸€ä¸‹JAVAä»£ç†æ¨¡å¼ï¼ŸåŠ¨æ€ä»£ç†çš„åŸç†ï¼Ÿ å‚è€ƒè¿™ä¸ªï¼šJAVAé¢è¯•50è®²ä¹‹9ï¼šåŠ¨æ€ä»£ç†çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ ä»£ç†æ¨¡å¼æ˜¯ç»™æŸä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†ï¼Œå¹¶ç”±ã€ä»£ç†å¯¹è±¡ã€‘æ§åˆ¶å¯¹ã€åŸå¯¹è±¡ã€‘çš„å¼•ç”¨(ä½¿ç”¨)ã€‚ ä¼˜ç‚¹ï¼šä»£ç†æ¨¡å¼èƒ½å¤Ÿåè°ƒè°ƒç”¨è€…å’Œè¢«è°ƒç”¨è€…ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šé™ä½äº†ç³»ç»Ÿçš„è€¦åˆåº¦ï¼›å¯ä»¥çµæ´»åœ°éšè—è¢«ä»£ç†å¯¹è±¡çš„éƒ¨åˆ†åŠŸèƒ½å’ŒæœåŠ¡ï¼Œä¹Ÿå¢åŠ é¢å¤–çš„åŠŸèƒ½å’ŒæœåŠ¡ã€‚ ç¼ºç‚¹ï¼šç”±äºä½¿ç”¨äº†ä»£ç†æ¨¡å¼ï¼Œå› æ­¤ç¨‹åºçš„æ€§èƒ½æ²¡æœ‰ç›´æ¥è°ƒç”¨æ€§èƒ½é«˜ï¼›ä½¿ç”¨ä»£ç†æ¨¡å¼æé«˜äº†ä»£ç çš„å¤æ‚åº¦ã€‚ æ ¹æ®ä»£ç†æ¨¡å¼åˆå¯ä»¥åˆ†ä¸ºï¼šé™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†ã€‚ 2.1 é™æ€ä»£ç† é™æ€ä»£ç†ï¼šç”±ç¨‹åºå‘˜åˆ›å»ºæˆ–ç‰¹å®šå·¥å…·è‡ªåŠ¨ç”Ÿæˆæºä»£ç ï¼Œä¹Ÿå°±æ˜¯åœ¨ç¼–è¯‘æ—¶å°±å·²ç»å°†æ¥å£ã€è¢«ä»£ç†ç±»ã€ä»£ç†ç±»ç­‰ç¡®å®šä¸‹æ¥ã€‚åœ¨ç¨‹åºè¿è¡Œä¹‹å‰ï¼Œä»£ç†ç±»çš„.classæ–‡ä»¶å°±å·²ç»ç”Ÿæˆã€‚ ä»£ç†æ¨¡å¼æœ€ä¸»è¦çš„å°±æ˜¯æœ‰ä¸€ä¸ªå…¬å…±æ¥å£ï¼ˆPersonï¼‰ï¼Œä¸€ä¸ªå…·ä½“çš„ç±»ï¼ˆStudentï¼‰ï¼Œä¸€ä¸ªä»£ç†ç±»ï¼ˆStudentsProxyï¼‰,ä»£ç†ç±»æŒæœ‰å…·ä½“ç±»çš„å®ä¾‹ï¼Œä»£ä¸ºæ‰§è¡Œå…·ä½“ç±»å®ä¾‹æ–¹æ³•ã€‚ ä¸€ä¸ªç­çš„åŒå­¦ï¼ˆStudentï¼‰è¦å‘è€å¸ˆäº¤ç­è´¹ï¼Œä½†æ˜¯éƒ½æ˜¯é€šè¿‡ç­é•¿ï¼ˆStudentProxyï¼‰æŠŠè‡ªå·±çš„é’±è½¬äº¤ç»™è€å¸ˆã€‚è¿™é‡Œï¼Œç­é•¿å°±æ˜¯ä»£ç†å­¦ç”Ÿä¸Šäº¤ç­è´¹ï¼Œç­é•¿å°±æ˜¯å­¦ç”Ÿçš„ä»£ç†ã€‚ å…¬å…±Personæ¥å£ 1234/public interface Person &#123; //ä¸Šäº¤ç­è´¹ void giveMoney(); &#125; Studentå®ç°Personæ¥å£ 1234567891011public class Student implements Person &#123; private String name; public Student(String name) &#123; this.name = name; &#125; @Override public void giveMoney() &#123; System.out.println(name + &quot;ä¸Šäº¤ç­è´¹50å…ƒ&quot;); &#125;&#125; StudentsProxyå®ç°Personæ¥å£ å®ç°äº†Pesonæ¥å£ï¼ŒåŒæ—¶æŒæœ‰ä¸€ä¸ªStudentå¯¹è±¡ï¼Œé‚£ä¹ˆä»–å¯ä»¥ä»£ç†å­¦ç”Ÿç±»å¯¹è±¡æ‰§è¡Œä¸Šäº¤ç­è´¹ï¼ˆæ‰§è¡ŒgiveMoney()æ–¹æ³•ï¼‰è¡Œä¸ºã€‚ âš ï¸ è‡ªå·±å®ç°çš„giveMoneyï¼Œè°ƒç”¨çš„æ˜¯è¢«ä»£ç†çš„å­¦ç”Ÿå¯¹è±¡.giveMoney() æ–¹æ³•ï¼ 123456789101112131415/public class StudentsProxy implements Person&#123; //è¢«ä»£ç†çš„å­¦ç”Ÿ Student stu; public StudentsProxy(Person stu) &#123; // åªä»£ç†å­¦ç”Ÿå¯¹è±¡ if(stu.getClass() == Student.class) &#123; this.stu = (Student)stu; &#125; &#125; //ä»£ç†ä¸Šäº¤ç­è´¹ï¼Œè°ƒç”¨è¢«ã€ä»£ç†å­¦ç”Ÿçš„ä¸Šäº¤ç­è´¹ã€‘è¡Œä¸º public void giveMoney() &#123; stu.giveMoney(); &#125;&#125; ä½¿ç”¨å®ä¾‹1 123456789101112public class StaticProxyTest &#123; public static void main(String[] args) &#123; //è¢«ä»£ç†çš„å­¦ç”Ÿå¼ ä¸‰ï¼Œä»–çš„ç­è´¹ä¸Šäº¤æœ‰ä»£ç†å¯¹è±¡monitorï¼ˆç­é•¿ï¼‰å®Œæˆ Person zhangsan = new Student(&quot;å¼ ä¸‰&quot;); //ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œå¹¶å°†å¼ ä¸‰ä¼ ç»™ä»£ç†å¯¹è±¡ Person monitor = new StudentsProxy(zhangsan); //ç­é•¿ä»£ç†ä¸Šäº¤ç­è´¹ï¼Œå®é™…ä¸Šæ˜¯è°ƒç”¨è¢«ä»£ç†å¯¹è±¡çš„giveMoneyæ–¹æ³• monitor.giveMoney(); &#125;&#125; ä½¿ç”¨å®ä¾‹2ï¼šæ‰©å……å¢å¼ºåŸå¯¹è±¡æ–¹æ³• ç­é•¿åœ¨å¸®å¼ ä¸‰ä¸Šäº¤ç­è´¹ä¹‹å‰ï¼Œæƒ³è¦å…ˆåæ˜ ä¸€ä¸‹å¼ ä¸‰æœ€è¿‘å­¦ä¹ æœ‰å¾ˆå¤§è¿›æ­¥ï¼Œé€šè¿‡ä»£ç†æ¨¡å¼å¾ˆè½»æ¾å°±èƒ½åŠåˆ° ã€‚ 1234567891011121314151617public class StudentsProxy implements Person&#123; //è¢«ä»£ç†çš„å­¦ç”Ÿ Student stu; public StudentsProxy(Person stu) &#123; // åªä»£ç†å­¦ç”Ÿå¯¹è±¡ if(stu.getClass() == Student.class) &#123; this.stu = (Student)stu; &#125; &#125; //ä»£ç†ä¸Šäº¤ç­è´¹ï¼Œè°ƒç”¨è¢«ä»£ç†å­¦ç”Ÿçš„ä¸Šäº¤ç­è´¹è¡Œä¸º public void giveMoney() &#123; System.out.println(&quot;å¼ ä¸‰æœ€è¿‘å­¦ä¹ æœ‰è¿›æ­¥ï¼&quot;); stu.giveMoney(); &#125;&#125; 2.2 åŠ¨æ€ä»£ç† ä¸Šé¢é™æ€ä»£ç†çš„ä¾‹å­ä¸­ï¼Œä»£ç†ç±»(studentProxy)æ˜¯è‡ªå·±å®šä¹‰å¥½çš„ï¼Œåœ¨ç¨‹åºè¿è¡Œä¹‹å‰å°±å·²ç»ç¼–è¯‘å®Œæˆ ã€‚ ç„¶è€ŒåŠ¨æ€ä»£ç†ï¼Œä»£ç†ç±»å¹¶ä¸æ˜¯åœ¨Javaä»£ç ä¸­å®šä¹‰çš„ï¼Œè€Œæ˜¯åœ¨è¿è¡Œæ—¶æ ¹æ®æˆ‘ä»¬åœ¨Javaä»£ç ä¸­çš„â€œæŒ‡ç¤ºâ€åŠ¨æ€ç”Ÿæˆâ€œçš„ ã€‚ ä¼˜ç‚¹ï¼š å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¯¹ä»£ç†ç±»çš„å‡½æ•°è¿›è¡Œç»Ÿä¸€çš„å¤„ç†ï¼Œè€Œä¸ç”¨ä¿®æ”¹æ¯ä¸ªä»£ç†ç±»ä¸­çš„æ–¹æ³•ã€‚ æ¯”å¦‚è¯´ï¼Œæƒ³è¦åœ¨æ¯ä¸ªä»£ç†çš„æ–¹æ³•å‰éƒ½åŠ ä¸Šä¸€ä¸ªå¤„ç†æ–¹æ³•ï¼š 12345678910111213 public void giveMoney() &#123; //è°ƒç”¨è¢«ä»£ç†æ–¹æ³•å‰åŠ å…¥å¤„ç†æ–¹æ³• beforeMethod(); stu.giveMoney(); &#125;// ä»£ç†ç±»å…¶å®ƒæ–¹æ³•public void giveHomework() &#123; //è°ƒç”¨è¢«ä»£ç†æ–¹æ³•å‰åŠ å…¥å¤„ç†æ–¹æ³• beforeMethod(); stu.giveHomework(); &#125; é™¤äº†giveMonneyè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„æ–¹æ³•ï¼ˆgiveHomeworkï¼‰ï¼Œé‚£å°±éœ€è¦å†™å¾ˆå¤šæ¬¡beforeMethodæ–¹æ³•ï¼Œéº»çƒ¦ã€‚ ç®€å•å®ç° 12345 //åˆ›å»ºä¸€ä¸ªä¸ä»£ç†å¯¹è±¡ç›¸å…³è”çš„InvocationHandler InvocationHandler stuHandler = new MyInvocationHandler&lt;Person&gt;(stu);//åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡stuProxyï¼Œä»£ç†å¯¹è±¡çš„æ¯ä¸ªæ‰§è¡Œæ–¹æ³•éƒ½ä¼šæ›¿æ¢æ‰§è¡ŒInvocationä¸­çš„invokeæ–¹æ³• Person stuProxy= (Person) Proxy.newProxyInstance(Person.class.getClassLoader(), new Class&lt;?&gt;[]&#123;Person.class&#125;, stuHandler); å…¬å…±Personæ¥å£ 1234/public interface Person &#123; //ä¸Šäº¤ç­è´¹ void giveMoney(); &#125; Studentå®ç°Personæ¥å£ 12345678910111213141516public class Student implements Person &#123; private String name; public Student(String name) &#123; this.name = name; &#125; @Override public void giveMoney() &#123; try &#123; //å‡è®¾æ•°é’±èŠ±äº†ä¸€ç§’æ—¶é—´ Thread.sleep(1000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(name + &quot;ä¸Šäº¤ç­è´¹50å…ƒ&quot;); &#125;&#125; å¢åŠ ä¸€ä¸ªè®¡ç®—æ–¹æ³•æ‰§è¡Œæ—¶é—´çš„æ£€æµ‹æ–¹æ³•ï¼š 12345678910111213public class MonitorUtil &#123; private static ThreadLocal&lt;Long&gt; tl = new ThreadLocal&lt;&gt;(); public static void start() &#123; tl.set(System.currentTimeMillis()); &#125; //ç»“æŸæ—¶æ‰“å°è€—æ—¶ public static void finish(String methodName) &#123; long finishTime = System.currentTimeMillis(); System.out.println(methodName + &quot;æ–¹æ³•è€—æ—¶&quot; + (finishTime - tl.get()) + &quot;ms&quot;); &#125;&#125; StuInvocationHandler å®ç° InvocationHandleræ¥å£ å¹¶æ²¡æœ‰åƒä¹‹å‰ä¸€æ ·ï¼šç”¨ä¸€ä¸ªä»£ç†ç±» StudentsProxyå®ç°å…¬å…±Personæ¥å£ï¼Œè€Œæ˜¯ä»£ç†ç±»StuInvocationHandler å®ç°InvocationHandleræ¥å£ã€‚ ä½†äºŒè€…éƒ½æ˜¯æŒæœ‰è¢«ä»£ç†çš„å¯¹è±¡Studentå¼•ç”¨ã€‚ InvocationHandlerä¸­æœ‰ä¸€ä¸ªinvokeæ–¹æ³•ï¼Œæ‰€æœ‰æ‰§è¡Œä»£ç†å¯¹è±¡çš„æ–¹æ³•éƒ½ä¼šè¢«æ›¿æ¢æˆæ‰§è¡Œinvokeæ–¹æ³•ã€‚ é€šè¿‡åå°„ï¼Œå¯ä»¥æ‰§è¡Œè¢«ä»£ç†å¯¹è±¡Studentçš„ç›¸åº”æ–¹æ³•giveMoney()ã€‚ 123456789101112131415161718192021222324public class StuInvocationHandler&lt;T&gt; implements InvocationHandler &#123; //invocationHandleræŒæœ‰çš„è¢«ä»£ç†å¯¹è±¡ T target; public StuInvocationHandler(T target) &#123; this.target = target; &#125; /** * proxy:ä»£è¡¨åŠ¨æ€ä»£ç†å¯¹è±¡ * methodï¼šä»£è¡¨æ­£åœ¨æ‰§è¡Œçš„æ–¹æ³• * argsï¼šä»£è¡¨è°ƒç”¨ç›®æ ‡æ–¹æ³•æ—¶ä¼ å…¥çš„å®å‚ */ @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; System.out.println(&quot;ä»£ç†æ‰§è¡Œ&quot; +method.getName() + &quot;æ–¹æ³•&quot;); */ //ä»£ç†è¿‡ç¨‹ä¸­æ’å…¥ç›‘æµ‹æ–¹æ³•,è®¡ç®—è¯¥æ–¹æ³•è€—æ—¶ MonitorUtil.start(); // åŸæ¥çš„ä»£ç†å¯¹è±¡Studentä¸­çš„æ–¹æ³• Object result = method.invoke(target, args); MonitorUtil.finish(method.getName()); return result; &#125;&#125; å…·ä½“å®ä¾‹ 123456789101112131415public class ProxyTest &#123; public static void main(String[] args) &#123; //åˆ›å»ºä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯è¢«ä»£ç†çš„å¯¹è±¡ Person zhangsan = new Student(&quot;å¼ ä¸‰&quot;); //åˆ›å»ºä¸€ä¸ªä¸ä»£ç†å¯¹è±¡ç›¸å…³è”çš„InvocationHandler InvocationHandler stuHandler = new StuInvocationHandler&lt;Person&gt;(zhangsan); //åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡stuProxyæ¥ä»£ç†zhangsanï¼Œä»£ç†å¯¹è±¡çš„æ¯ä¸ªæ‰§è¡Œæ–¹æ³•éƒ½ä¼šæ›¿æ¢æ‰§è¡ŒInvocationä¸­çš„invokeæ–¹æ³• Person stuProxy = (Person) Proxy.newProxyInstance(Person.class.getClassLoader(), new Class&lt;?&gt;[]&#123;Person.class&#125;, stuHandler)ï¼› //ä»£ç†æ‰§è¡Œä¸Šäº¤ç­è´¹çš„æ–¹æ³• stuProxy.giveMoney(); &#125;&#125; 2.3 åŠ¨æ€ä»£ç†çš„åŸç† ä» JVM è§’åº¦æ¥è¯´ï¼ŒåŠ¨æ€ä»£ç†æ˜¯åœ¨è¿è¡Œæ—¶ï¼Œé€šè¿‡åå°„åŠ¨æ€ç”Ÿæˆç±»å­—èŠ‚ç ï¼Œå¹¶åŠ è½½åˆ° JVM ä¸­çš„ã€‚ 3. å¦‚ä½•åˆ©ç”¨åå°„åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Ÿ è¿‡ç¨‹å¦‚ä¸‹ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738import java.lang.reflect.Constructor;import java.lang.reflect.InvocationTargetException;import java.lang.reflect.Method;public class Test &#123; public static void main(String[] args) &#123; try &#123; //1. å¾—åˆ°Stuç±»çš„è¿è¡Œæ—¶Classæè¿°ç¬¦ //ç®€å•ç†è§£ä¸ºä½ ç°åœ¨æœ‰äº†è¿™ä¸ªç±»ï¼Œå¯ä»¥è°ƒç”¨ç›¸åº”çš„æ–¹æ³•è¿›è¡Œå®ä¾‹åŒ–äº† Class&lt;?&gt; stu = Class.forName(&quot;Stu&quot;); //2.ä»getDeclaredConstructor()çš„å­—é¢æ„æ€å°±èƒ½ç†è§£ï¼Œå¾—åˆ°æ‰€æœ‰å£°æ˜çš„æ„é€ å™¨ //è¿™é‡Œå¾—åˆ°çš„æ˜¯æ‰€æœ‰å£°æ˜çš„æ„é€ å™¨ï¼ŒgetConstructor()åˆ™åªèƒ½å¾—åˆ°è¢«publicä¿®é¥°çš„æ„é€ å™¨ Constructor&lt;?&gt; declaredConstructor = stu.getDeclaredConstructor(new Class[]&#123;String.class, int.class&#125;); //3. ä½¿ç”¨newInstance()æ–¹æ³•åˆ›å»ºå¯¹è±¡å¹¶ä¼ å…¥å‚æ•° //ç®€å•çš„ç†è§£ä¸ºStu o = new Stu(&quot;zhangsan&quot;, 01) Stu o = (Stu) declaredConstructor.newInstance(new Object[]&#123;&quot;zhangsan&quot;, 01&#125;); //4.è°ƒç”¨Stuè¿™ä¸ªç±»é‡Œé¢çš„æ–¹æ³• // getDeclaredMethod()æ–¹æ³•èƒ½è°ƒç”¨åˆ°æ‰€æœ‰å£°æ˜çš„æ–¹æ³• Method method = stu.getDeclaredMethod(&quot;toString&quot;, new Class[]&#123;&#125;); //5. ç®€å•çš„ç†è§£ä¸ºo.toStirng() String invoke = (String)method.invoke(o, new Object[]&#123;&#125;); System.out.println(invoke); &#125; catch (ClassNotFoundException e) &#123; e.printStackTrace(); &#125; catch (NoSuchMethodException e) &#123; e.printStackTrace(); &#125; catch (InstantiationException e) &#123; e.printStackTrace(); &#125; catch (IllegalAccessException e) &#123; e.printStackTrace(); &#125; catch (InvocationTargetException e) &#123; e.printStackTrace(); &#125; &#125;&#125;","categories":[{"name":"æ ¡æ‹›ç¬”è®°","slug":"æ ¡æ‹›ç¬”è®°","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/"},{"name":"JAVA","slug":"æ ¡æ‹›ç¬”è®°/JAVA","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/JAVA/"}],"tags":[{"name":"JAVA","slug":"JAVA","permalink":"https://hwh.zone/tags/JAVA/"},{"name":"æ ¡æ‹›","slug":"æ ¡æ‹›","permalink":"https://hwh.zone/tags/%E6%A0%A1%E6%8B%9B/"}]},{"title":"æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰_Java_Javaå…¥é—¨","slug":"æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰_Java_Javaå…¥é—¨","date":"2021-11-26T11:53:12.060Z","updated":"2021-12-03T03:56:32.443Z","comments":true,"path":"p/51787/","link":"","permalink":"https://hwh.zone/p/51787/","excerpt":"","text":"æˆ‘çš„æ ¡æ‹›è®°å½•ï¼šæ ¡æ‹›ç¬”è®°ï¼ˆé›¶ï¼‰_å†™åœ¨å‰é¢ ï¼Œä»¥ä¸‹æ˜¯æ ¡æ‹›ç¬”è®°æ€»ç›®å½•ã€‚ å¤‡æ³¨ ç®—æ³•èƒ½åŠ›ï¼ˆâ€œåˆ·é¢˜â€ï¼‰ è¿™éƒ¨åˆ†å°±æ˜¯è€—æ—¶é—´å¤šç»ƒä¹ ï¼ŒLeetcode-Top100 æ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚ è¡¥å……ç»ƒä¹ ï¼šcodeTop è®¡ç®—æœºåŸºç¡€(ä¸Š)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_Javaå…¥é—¨ C++åç«¯åç»­æ›´æ–° æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é¢å¯¹å¯¹è±¡ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é›†åˆ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_å¤šçº¿ç¨‹ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é” æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_JVM è®¡ç®—æœºåŸºç¡€(ä¸‹)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆäºŒï¼‰__è®¡ç®—æœºåŸºç¡€_Linux&amp;Git æ ¡æ‹›ç¬”è®°ï¼ˆä¸‰ï¼‰__è®¡ç®—æœºåŸºç¡€_è®¡ç®—æœºç½‘ç»œ æ ¡æ‹›ç¬”è®°ï¼ˆå››ï¼‰__è®¡ç®—æœºåŸºç¡€_æ“ä½œç³»ç»Ÿ æ ¡æ‹›ç¬”è®°ï¼ˆäº”ï¼‰__è®¡ç®—æœºåŸºç¡€_MySQL æ ¡æ‹›ç¬”è®°ï¼ˆå…­ï¼‰__è®¡ç®—æœºåŸºç¡€_Redis æ ¡æ‹›ç¬”è®°ï¼ˆä¸ƒï¼‰__è®¡ç®—æœºåŸºç¡€_æ•°æ®ç»“æ„ æ ¡æ‹›ç¬”è®°ï¼ˆå…«ï¼‰__è®¡ç®—æœºåŸºç¡€_åœºæ™¯&amp;æ™ºåŠ›é¢˜ æ ¡æ‹›ç¬”è®°ï¼ˆä¹ï¼‰__è®¡ç®—æœºåŸºç¡€_ç›¸å…³è¡¥å…… é¡¹ç›®&amp;å®ä¹  ä¸»è¦æ˜¯æ€ä¹ˆå‡†å¤‡é¡¹ç›®ï¼Œåç»­æ›´æ–° 1.1 JAVAå…¥é—¨ 1.1.1 JAVAåŸºæœ¬ 1.ä»‹ç»ä¸€ä¸‹JVM&amp;JRE&amp;JDKï¼Ÿ JAVAè¯­è¨€æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ JVM&amp;JRE&amp;JDK JVM: å³javaè™šæ‹Ÿæœºï¼Œé’ˆå¯¹ä¸åŒæ“ä½œç³»ç»Ÿï¼ŒJVMæŠŠJavaä»£ç ç¿»è¯‘æˆå¯¹åº”æ“ä½œç³»ç»Ÿå¯ä»¥è¯†åˆ«çš„å†…å®¹ï¼Œå®ç°è·¨å¹³å° ï¼› JRE : JVM + æ ¸å¿ƒç±»åº“ = JRE ï¼Œ å³Javaè¿è¡Œæ—¶ç¯å¢ƒã€‚åªæœ‰JVMä¸èƒ½è¿è¡Œï¼Œå®ƒè¿˜éœ€è¦æ ¸å¿ƒç±»åº“ï¼Œæ‰èƒ½ä¿è¯Javaè¿è¡Œ ï¼› JDK: JRE + javaå¼€å‘å·¥å…·ï¼ˆç¼–è¯‘å™¨ç­‰) = JDK ï¼ŒJavaå¼€å‘å·¥å…·åŒ…(JDK)æ˜¯å®Œæ•´çš„Javaè½¯ä»¶å¼€å‘åŒ…ï¼ŒåŒ…å«äº†JREï¼Œç¼–è¯‘å™¨å’Œå…¶ä»–çš„å·¥å…·ã€‚ Javaè¯­è¨€ç‰¹ç‚¹ ç®€å•æ˜“å­¦ï¼› é¢å‘å¯¹è±¡ï¼ˆå°è£…ï¼Œç»§æ‰¿ï¼Œå¤šæ€ï¼‰ï¼› å¹³å°æ— å…³æ€§ï¼ˆ Java è™šæ‹Ÿæœºå®ç°å¹³å°æ— å…³æ€§ï¼‰ï¼› å¯é æ€§ï¼› å®‰å…¨æ€§ï¼› æ”¯æŒå¤šçº¿ç¨‹ï¼ˆ C++ è¯­â¾”æ²¡æœ‰å†…ç½®çš„å¤šçº¿ç¨‹æœºåˆ¶ï¼Œå› æ­¤å¿…é¡»è°ƒç”¨æ“ä½œç³»ç»Ÿçš„å¤šçº¿ç¨‹åŠŸèƒ½æ¥è¿›è¡Œå¤šçº¿ç¨‹ç¨‹åºè®¾è®¡ï¼Œè€Œ Java è¯­â¾”å´æä¾›äº†å¤šçº¿ç¨‹æ”¯æŒï¼‰ï¼› 2.ä»€ä¹ˆæ˜¯Javaè™šæ‹Ÿæœºï¼Ÿä¸ºä»€ä¹ˆJavaè¢«ç§°ä¸ºå¹³å°æ— å…³çš„ç¼–ç¨‹è¯­è¨€ï¼Ÿ javaè™šæ‹Ÿæœºï¼Œæ˜¯æ‰§è¡Œå­—èŠ‚ç æ–‡ä»¶ï¼ˆ.classï¼‰çš„è™šæ‹Ÿæœºè¿›ç¨‹ï¼› åœ¨ Java ä¸­ï¼ŒJVM å¯ä»¥ç†è§£çš„ä»£ç å°±å«åš å­—èŠ‚ç  ï¼ˆå³æ‰©å±•åä¸º .class çš„â½‚ä»¶ï¼‰ï¼Œå®ƒä¸é¢å‘ä»» ä½•ç‰¹å®šçš„å¤„ç†å™¨ï¼Œåªé¢å‘è™šæ‹Ÿæœºã€‚ javaæºç¨‹åºï¼ˆ.javaï¼‰è¢«ç¼–è¯‘å™¨ç¼–è¯‘æˆå­—èŠ‚ç æ–‡ä»¶ï¼ˆ.classï¼‰ã€‚ç„¶åå­—èŠ‚ç æ–‡ä»¶ï¼Œå°†ç”±javaè™šæ‹Ÿæœºï¼Œè§£é‡Šæˆæœºå™¨ç ï¼ˆä¸åŒå¹³å°çš„æœºå™¨ç ä¸åŒï¼‰ã€‚ 3. è¯·ä½ è°ˆè°ˆJavaä¸­æ˜¯å¦‚ä½•æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼æ“ä½œçš„ï¼Ÿï¼ˆè¡¥å……å®ä¾‹ï¼‰ Javaä¸­çš„Stringç±»æä¾›äº†æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼æ“ä½œçš„æ–¹æ³•ï¼ŒåŒ…æ‹¬ï¼š matches()ã€replaceAll()ã€replaceFirst()ã€split() æ­¤å¤–ï¼ŒJavaä¸­å¯ä»¥ç”¨Patternç±»è¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œå®ƒæä¾›äº†ä¸°å¯Œçš„APIè¿›è¡Œå„ç§æ­£åˆ™è¡¨è¾¾å¼æ“ä½œï¼Œå¦‚ï¼š 123456789101112import java.util.regex.Matcher;import java.util.regex.Pattern;class RegExpTest &#123; public static void main(String[] args) &#123; String str = &quot;æˆéƒ½å¸‚(æˆååŒº)(æ­¦ä¾¯åŒº)(é«˜æ–°åŒº)&quot;; Pattern p = Pattern.compile(&quot;.*?(?=\\\\()&quot;); Matcher m = p.matcher(str); if(m.find()) &#123; System.out.println(m.group()); &#125; &#125;&#125; å®ä¾‹ç¤ºèŒƒï¼ˆPCGé—®è¿‡ï¼‰ å‚è€ƒï¼šhttps://www.runoob.com/regexp/regexp-syntax.html ç‰¹æ®Šå­—ç¬¦ æ™®é€šå­—ç¬¦ å®ä¾‹ç¤ºèŒƒ åŒ¹é…é‚®ç®± åŒ¹é…ç”µè¯å·ç  1234//åŒ¹é…ç”µè¯å·ç String phone = &quot;18637866964&quot;;String reg = &quot;^1[3,5,7,8,9]\\\\d&#123;9&#125;$&quot;;System.out.println(phone.matches(reg)); åŒ¹é…ç¬¬ä¸€ä¸ªå‡ºç°çš„æ•°å­— ä¸‹é¢å¥½åƒæ˜¯ä¸å¯¹çš„ã€‚ 123String phone = &quot;avss1sdp22&quot;;String reg = &quot;\\d?&quot;;System.out.println(phone.matches(reg)); 4.ï¼ˆè¡¥å……ä¾‹å­ï¼‰è¯·ä½ ç®€å•æè¿°ä¸€ä¸‹æ­£åˆ™è¡¨è¾¾å¼åŠå…¶ç”¨é€”ã€‚ åœ¨ç¼–å†™å¤„ç†å­—ç¬¦ä¸²çš„ç¨‹åºæ—¶ï¼Œç»å¸¸ä¼šæœ‰æŸ¥æ‰¾ ç¬¦åˆæŸäº›å¤æ‚è§„åˆ™çš„å­—ç¬¦ä¸² çš„éœ€è¦ã€‚ è®¡ç®—æœºå¤„ç†çš„ä¿¡æ¯æ›´å¤šçš„æ—¶å€™ä¸æ˜¯æ•°å€¼è€Œæ˜¯å­—ç¬¦ä¸²ï¼Œæ­£åˆ™è¡¨è¾¾å¼å°±æ˜¯åœ¨è¿›è¡Œå­—ç¬¦ä¸²åŒ¹é…å’Œå¤„ç†çš„æ—¶å€™æœ€ä¸ºå¼ºå¤§çš„å·¥å…·ï¼› ç»å¤§å¤šæ•°è¯­è¨€éƒ½æä¾›äº†å¯¹æ­£åˆ™è¡¨è¾¾å¼çš„æ”¯æŒã€‚ 5.&amp;å’Œ&amp;&amp;åŒºåˆ†ï¼Ÿ å…±åŒç‚¹ï¼šéƒ½è¦æ±‚è¿ç®—ç¬¦å·¦å³ä¸¤ç«¯çš„å¸ƒå°”å€¼ éƒ½æ˜¯true æ•´ä¸ªè¡¨è¾¾å¼çš„å€¼æ‰æ˜¯true åŒºåˆ«ï¼š&amp;&amp;ä¹‹ç§°ä¸ºçŸ­è·¯è¿ç®—ï¼Œå¦‚æœ&amp;&amp;å·¦è¾¹çš„è¡¨è¾¾å¼çš„å€¼æ˜¯falseï¼Œå³è¾¹çš„è¡¨è¾¾å¼ä¼šè¢«ç›´æ¥çŸ­è·¯æ‰ï¼Œä¸ä¼šè¿›è¡Œè¿ç®—ã€‚ å¥½å¤„ï¼š e.g. ï¼šå³è¾¹åˆ¤åˆ«å¼æœ‰å¦‚æœæœ‰ç©ºæŒ‡é’ˆNullPointerExceptionå¼‚å¸¸åˆ¤æ–­é£é™©ï¼Œå¯ä»¥é¿å…ã€‚ 6.å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’åŒºåˆ†ï¼Ÿ å€¼ä¼ é€’æ˜¯è¯¥å˜é‡çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œ æ”¹å˜å‰¯æœ¬ä¸å½±å“åŸå˜é‡ï¼› å¼•ç”¨ä¼ é€’æ˜¯å¯¹è±¡åœ°å€çš„å‰¯æœ¬ï¼Œå¼•ç”¨å¯¹è±¡è¿›è¡Œæ“ä½œä¼šåŒæ—¶æ”¹å˜åŸå¯¹è±¡ã€‚ 7.åè¿›åˆ¶ä¸äºŒè¿›åˆ¶ï¼Ÿ è¯·ä½ è®²è®²ä¸€ä¸ªåè¿›åˆ¶çš„æ•°åœ¨å†…å­˜ä¸­æ˜¯æ€ä¹ˆå­˜çš„ï¼Ÿ è¡¥ç å½¢å¼ã€‚ ä¸ºä»€ä¹ˆä¼šå‡ºç°4.0-3.6=0.40000001è¿™ç§ç°è±¡ï¼Ÿ 2è¿›åˆ¶çš„å°æ•°æ— æ³•ç²¾ç¡®çš„è¡¨è¾¾10è¿›åˆ¶å°æ•°ï¼Œè®¡ç®—æœºåœ¨ è®¡ç®—10è¿›åˆ¶å°æ•°çš„è¿‡ç¨‹ä¸­è¦å…ˆè½¬æ¢ä¸º2è¿›åˆ¶è¿›è¡Œè®¡ç®— ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­å‡ºç°äº†è¯¯å·®ã€‚ 8.ï¼ˆé‡è¦ï¼‰equalsä¸==çš„åŒºåˆ« å¾ˆæ¸…æ™°ä¸¥è°¨çš„ä¸€ç¯‡æ–‡ç« ï¼šhttps://www.cnblogs.com/skywang12345/p/3324958.html == åŸºæœ¬ç±»å‹ï¼šæ¯”è¾ƒçš„æ˜¯å€¼æ˜¯å¦ç›¸åŒï¼› å¼•ç”¨ç±»å‹ï¼šæ¯”è¾ƒçš„æ˜¯å¼•ç”¨ï¼ˆå¯¹è±¡åœ°å€ï¼‰æ˜¯å¦ç›¸åŒï¼› equals è¦çœ‹ç±»æ˜¯å¦è¦†ç›–equals()æ–¹æ³•ï¼Œå°†å®ƒåˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š è‹¥æŸä¸ªç±»æ²¡æœ‰è¦†ç›–equals()æ–¹æ³•ï¼Œå½“å®ƒçš„é€šè¿‡equals()æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ—¶ï¼Œå®é™…ä¸Šæ˜¯æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡ï¼ˆåœ°å€ï¼‰æ˜¯ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚è¿™æ—¶ï¼Œç­‰ä»·äºé€šè¿‡â€œ==â€å»æ¯”è¾ƒè¿™ä¸¤ä¸ªå¯¹è±¡ï¼› æˆ‘ä»¬å¯ä»¥è¦†ç›–ç±»çš„equals()æ–¹æ³•ï¼Œæ¥è®©equals()é€šè¿‡å…¶å®ƒæ–¹å¼æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹ï¼ˆè€Œä¸æ˜¯åœ°å€ï¼‰æ˜¯å¦ç›¸ç­‰ã€‚ String ä¸­çš„ equals æ–¹æ³•æ˜¯è¢«é‡å†™è¿‡çš„ï¼š å› ä¸º object çš„ equals æ–¹æ³•æ˜¯â½æ•™çš„å¯¹è±¡çš„å†…å­˜åœ°å€ è€Œ String çš„ equals æ–¹æ³•ï¼ˆ1ï¼‰å…ˆæ¯”è¾ƒå¯¹è±¡åœ°å€æ˜¯å¦ç›¸ç­‰ ï¼Œç›¸åŒåˆ™tureï¼Œå¦åˆ™ï¼ˆ2ï¼‰å†æ¯”è¾ƒå€¼æ˜¯å¦ç›¸ç­‰ 7.è¯·è§£é‡ŠhashCode()å’Œequals()æ–¹æ³•æœ‰ä»€ä¹ˆè”ç³»ï¼Ÿ é¢è¯•å®˜å¯èƒ½ä¼šé—®ä½ ï¼šâ€œä½ é‡å†™è¿‡ hashcode å’Œ equals ä¹ˆï¼Œä¸ºä»€ä¹ˆé‡å†™ equals æ—¶å¿…é¡»é‡å†™ hashCodeæ–¹æ³•ï¼Ÿâ€ å»ºè®®çœ‹æ–‡ä¸­ä¾‹å­ç†è§£ï¼šhttps://www.cnblogs.com/skywang12345/p/3324958.html hashCode()ä»‹ç» hashCode() çš„ä½œç”¨æ˜¯è·å–å“ˆå¸Œç ï¼Œä¹Ÿç§°ä¸ºæ•£åˆ—ç ï¼›å®ƒå®é™…ä¸Šæ˜¯è¿”å›ä¸€ä¸ªintæ•´æ•°ã€‚è¿™ä¸ªå“ˆå¸Œç çš„ä½œç”¨æ˜¯ç¡®å®šè¯¥ å¯¹è±¡åœ¨å“ˆå¸Œè¡¨ä¸­çš„ç´¢å¼•ä½ç½®ã€‚ æˆ‘ä»¬ä»…åœ¨HashSet, Hashtable, HashMapç­‰ç­‰è¿™äº›æœ¬è´¨æ˜¯æ•£åˆ—è¡¨çš„æ•°æ®ç»“æ„ä¸­ï¼Œç”¨åˆ°è¯¥ç±»ã€‚ å…¶å®ƒæƒ…å†µä¸‹hashCode() åˆ™æ ¹æœ¬æ²¡æœ‰ä»»ä½•ä½œç”¨ï¼Œæ‰€ä»¥ï¼Œä¸ç”¨ç†ä¼šhashCode()ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹å¯¹è±¡ç›¸ç­‰ï¼Œhashcodeå€¼ä¹Ÿä¼šä¸ç›¸ç­‰ã€‚ ä¸ºä»€ä¹ˆè¦æœ‰hashcode() hashCode() çš„ä½œç”¨å°±æ˜¯è·å–å“ˆå¸Œç ï¼Œä¹Ÿç§°ä¸ºæ•£åˆ—ç ï¼›å®ƒå®é™…ä¸Šæ˜¯è¿”å›â¼€ä¸ª intæ•´æ•°ã€‚è¿™ä¸ªå“ˆå¸Œç çš„ä½œç”¨æ˜¯ç¡®å®šè¯¥å¯¹è±¡åœ¨å“ˆå¸Œè¡¨ä¸­çš„ç´¢å¼•ä½ç½®ã€‚ hashCode()åœ¨æ•£åˆ—è¡¨ä¸­æ‰æœ‰ç”¨ï¼Œåœ¨å…¶å®ƒæƒ…å†µä¸‹æ²¡ç”¨ã€‚åœ¨æ•£åˆ—è¡¨ä¸­ hashCode() çš„ä½œç”¨æ˜¯è·å–å¯¹è±¡çš„æ•£åˆ—ç ï¼Œè¿›è€Œç¡®å®šè¯¥å¯¹è±¡åœ¨æ•£åˆ—è¡¨ä¸­çš„ä½ç½®ã€‚ å…ˆåˆ¤æ–­hashcodeï¼Œè€Œä¸æ˜¯ç›´æ¥éå†O(n)å¤æ‚åº¦ç”¨equals()åˆ¤æ–­ï¼Œå‡å°‘åˆ¤æ–­æ—¶é—´ã€‚ å¦‚æœhashcodeä¸€æ ·ï¼Œä¼šè°ƒç”¨equals()å»æ¯”è¾ƒã€‚ HashSet ä¼šå‡è®¾å¯¹è±¡æ²¡æœ‰é‡å¤å‡ºç°ã€‚ä½†æ˜¯å¦‚æœå‘ç°æœ‰ç›¸åŒ hashcode å€¼çš„å¯¹è±¡ï¼Œè¿™æ—¶ä¼šè°ƒç”¨ equals() æ–¹æ³•æ¥æ£€æŸ¥ hashcode ç›¸ç­‰çš„å¯¹è±¡æ˜¯å¦çœŸçš„ç›¸åŒã€‚å¦‚æœä¸¤è€…ç›¸åŒï¼ŒHashSet å°±ä¸ä¼šè®©å…¶åŠ â¼Šæ“ä½œæˆåŠŸã€‚å¦‚æœä¸åŒçš„è¯ï¼Œå°±ä¼šé‡æ–°æ•£åˆ—åˆ°å…¶ä»–ä½ç½®ã€‚ 7.1 ä¸ºä»€ä¹ˆé‡å†™äº†equals()ä¸€å®šè¦é‡å†™hashcode()æ–¹æ³•ï¼Ÿ å‚è€ƒï¼šä¸ºä»€ä¹ˆé‡å†™äº†equals()ï¼Œè¿˜è¦é‡å†™hashCode()ï¼Ÿ åœ¨Hashmap / Hashsetä¸­ï¼Œé€šè¿‡è®¡ç®—hash = hash(key.hashcode) ç„¶åè¿›è¡Œå–ä½™æ“ä½œï¼Œå¿«é€Ÿå®šä½åˆ°æ•°ç»„ä¸­ã€‚ å› ä¸ºmapä¸­æ˜¯ä¸å…è®¸é‡å¤keyçš„ï¼Œæ‰€ä»¥å¯¹å†…éƒ¨get()/add()æ–¹æ³•ï¼šå¯¹äºæ•£åˆ—åˆ°æ•°ç»„åŒä¸€ä½ç½®çš„å¯¹è±¡æ¥è¯´ï¼Œå¦‚æœhashç›¸ç­‰ &amp;&amp; equals()åˆ¤æ–­ç›¸ç­‰ ï¼Œæ˜¯è¦è¿›è¡Œè¦†ç›–çš„ã€‚ 12//è°ƒç”¨ equals æ–¹æ³•åˆ¤æ–­keyæ˜¯å¦ç›¸ç­‰ï¼Œè‹¥ç›¸ç­‰ï¼Œè¯¥keyå¯¹åº”çš„é”®å€¼å¯¹å·²ç»å­˜åœ¨ï¼Œç”¨æ–°çš„valueå–ä»£æ—§çš„value if (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) &#123; å¦‚æœæˆ‘ä»¬åªé‡å†™äº†equalsæ–¹æ³•ï¼šç”¨æ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚ä½†æ˜¯ä¾æ—§å¯èƒ½å‡ºç°ï¼šä¸¤ä¸ªç›¸åŒå¯¹è±¡equalsç›¸ç­‰ï¼Œä½†hashcodeä¸ç­‰ï¼Œè¢«æ•£åˆ—åˆ°ä¸åŒæ¡¶ä¸Šï¼Œmapä¸­ä¾æ—§å‡ºç°äº†é‡å¤é”®å€¼å¯¹ï¼ æ‰€ä»¥ï¼Œéœ€è¦é‡å†™hashcodeæ–¹æ³•ï¼Œä¿è¯ç›¸åŒå¯¹è±¡ä¸€å®šæ˜¯æ•£åˆ—åˆ°åŒä¸€ä¸ªä½ç½®ï¼ˆå…·æœ‰åŒæ ·çš„hashå€¼ï¼‰ã€‚ 7.2 ä¸¤ä¸ªå¯¹è±¡å€¼ç›¸åŒ(x.equals(y) == true)ï¼Œä½†å´å¯æœ‰ä¸åŒçš„hash codeï¼Œè¯¥è¯´æ³•æ˜¯å¦æ­£ç¡®ï¼Œä¸ºä»€ä¹ˆï¼Ÿ ä¸ä¸€å®šæ­£ç¡®ï¼Œå¦‚æœåœ¨HashSet, Hashtable, HashMapç­‰ç­‰è¿™äº›æœ¬è´¨æ˜¯æ•£åˆ—è¡¨çš„æ•°æ®ç»“æ„ä¸­ï¼Œä¸¤ä¸ªå¯¹è±¡xå’Œyæ»¡è¶³x.equals(y) == trueï¼Œå®ƒä»¬çš„å“ˆå¸Œç ï¼ˆhash codeï¼‰åº”å½“ç›¸åŒã€‚ å…¶å®ƒæƒ…å†µä¸‹å¯èƒ½ä¼šå‡ºç°é¢˜ç›®æè¿°çš„æƒ…å†µã€‚ 8. è‡ªåŠ¨æ‹†ç®±å’Œè£…ç®±ï¼Ÿ 8.1 ä»‹ç»ä¸€ä¸‹int&amp;Integerï¼Ÿ Javaä¸ºäº†ç¼–ç¨‹çš„æ–¹ä¾¿è¿˜æ˜¯å¼•å…¥äº†åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä½†æ˜¯ ä¸ºäº†èƒ½å¤Ÿå°†è¿™äº›åŸºæœ¬æ•°æ®ç±»å‹å½“æˆå¯¹è±¡æ“ä½œï¼ŒJavaä¸ºæ¯ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹éƒ½å¼•å…¥äº†å¯¹åº”çš„åŒ…è£…ç±»å‹ï¼ˆwrapper classï¼‰ intçš„åŒ…è£…ç±»å°±æ˜¯Integerï¼Œä»Java 5å¼€å§‹å¼•å…¥äº†è‡ªåŠ¨è£…ç®±/æ‹†ç®±æœºåˆ¶ï¼Œä½¿å¾—äºŒè€…å¯ä»¥ç›¸äº’è½¬æ¢ï¼š 1234567891011// e.g. public static void main(String[] args) &#123; Integer a = new Integer(3); Integer b = 3; // å°†3è‡ªåŠ¨è£…ç®±æˆIntegerç±»å‹ int c = 3; // false ä¸¤ä¸ªå¼•ç”¨æ²¡æœ‰å¼•ç”¨åŒä¸€å¯¹è±¡ System.out.println(a == b); // true aè‡ªåŠ¨æ‹†ç®±æˆintç±»å‹å†å’Œcæ¯”è¾ƒ System.out.println(a == c); &#125; Java ä¸ºæ¯ä¸ªåŸå§‹ç±»å‹æä¾›äº†åŒ…è£…ç±»å‹ï¼š ï¼ˆ8ç§åŸºæœ¬ç±»å‹ï¼‰åŸå§‹ç±»å‹: booleanï¼Œcharï¼Œbyteï¼Œshortï¼Œintï¼Œlongï¼Œfloatï¼Œdouble åŒ…è£…ç±»å‹ï¼šBooleanï¼ŒCharacterï¼ŒByteï¼ŒShortï¼ŒIntegerï¼ŒLongï¼ŒFloatï¼ŒDouble 8.2 æ‹†ç®±ã€è£…ç®±å­˜åœ¨çš„æ„ä¹‰ï¼Ÿ ä¸ºä»€ä¹ˆè¦æœ‰è£…ç®±ã€æ‹†ç®±ï¼Œå®ƒä»¬çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ java æ˜¯ é¢å¯¹å¯¹è±¡ç¼–ç¨‹ï¼Œè€ŒåŸºæœ¬æ•°æ®ç±»å‹ä¸æ˜¯å¯¹è±¡ï¼Œæ‰€æœ‰æ‰æœ‰å°è£…ç±» å¼•ç”¨åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œæ“ä½œã€‚æ¯”å¦‚ï¼Œä¸‹é¢æ‰“å°å‡ºintå‹æ•°æ®ï¼š 12int i = 1ï¼› System.out.println(i); // è‡ªåŠ¨è£…ç®± å…¶å®ï¼ŒæŸ¥çœ‹æºç ï¼Œå®é™…ç»è¿‡ä»¥ä¸‹å‡ ä¸ªè¿‡ç¨‹ï¼š å°† i è‡ªåŠ¨è£…ç®±æˆå°è£…ç±» Integer ç„¶åè°ƒç”¨ Integerä¸­ toString() æ–¹æ³•ï¼Œæ‰“å°å‡ºå­—ç¬¦ä¸²è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚ è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±ï¼Ÿ è‡ªåŠ¨è£…ç®±ï¼šå°±æ˜¯è‡ªåŠ¨å°†åŸºæœ¬æ•°æ®ç±»å‹è½¬æ¢ä¸ºåŒ…è£…å™¨ç±»å‹ è‡ªåŠ¨æ‹†ç®±ï¼šå°±æ˜¯è‡ªåŠ¨å°†åŒ…è£…å™¨ç±»å‹è½¬æ¢ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ 8.3 charå’Œbyteçš„åŒºåˆ« ï¼Œ èƒ½å¦å¼ºåˆ¶è½¬æ¢ï¼Ÿ åŒºåˆ«ï¼š Charæ˜¯æ— ç¬¦å·å‹çš„ï¼Œå¯ä»¥è¡¨ç¤ºä¸€ä¸ªæ•´æ•°ï¼Œä¸èƒ½è¡¨ç¤ºè´Ÿæ•°ï¼Œå¤§å°èŒƒå›´ æ˜¯0â€”65535ï¼›è€Œbyteæ˜¯æœ‰ç¬¦å·å‹çš„ï¼Œå¯ä»¥è¡¨ç¤º-128â€”127 çš„æ•° charå¯ä»¥è¡¨ä¸­è‹±æ–‡å­—ç¬¦ï¼Œbyteä¸å¯ä»¥ å¼ºåˆ¶è½¬æ¢ï¼š å¯ä»¥ï¼Œä½†æ˜¯ä¼šå‡ºç°ç²¾åº¦ä¸¢å¤±ã€‚ 9. String &amp; StringBuffer&amp; StringBuilder åŒºåˆ«ï¼Ÿä¸ºä»€ä¹ˆStringä¸å¯å˜? è¯·è§£é‡ŠString &amp; StringBufferåŒºåˆ«ï¼Ÿ å…±åŒç‚¹ï¼šå®ƒä»¬å¯ä»¥å‚¨å­˜å’Œæ“ä½œå­—ç¬¦ä¸²ï¼Œå³åŒ…å«å¤šä¸ªå­—ç¬¦çš„å­—ç¬¦æ•°æ®ï¼› å¯å¦ä¿®æ”¹ï¼šStringç±»æä¾›äº†æ•°å€¼ä¸å¯æ”¹å˜çš„å­—ç¬¦ï¼ŒStringBufferå¯ä»¥ä¿®æ”¹å­—ç¬¦ä¸²ï¼Œéœ€è¦ å­—ç¬¦æ•°æ®è¦æ”¹å˜ æ—¶ç”¨ã€‚ å…¸å‹åœ°ï¼Œä½ å¯ä»¥ä½¿ç”¨StringBuffersæ¥åŠ¨æ€æ„é€ å­—ç¬¦æ•°æ®ã€‚ è¯·è§£é‡Š StringBuilder&amp; StringBuffer åŒºåˆ«ï¼Ÿ å…±åŒç‚¹ï¼šAbstractStringBuilder æ˜¯ StringBuilder ä¸ StringBuffer çš„å…¬å…±â½—ç±»ã€‚éƒ½å¯ä»¥ä¿®æ”¹å­—ç¬¦ä¸²ï¼Œæ“ä½œå­—ç¬¦ä¸²æ–¹æ³•ä¸°å¯Œã€‚ 12345678910111213abstract class AbstractStringBuilder implements Appendable, CharSequence&#123; /** * The value is used for character storage. */ char[] value; /** * The count is the number of characters used. */ int count; AbstractStringBuilder(int capacity) &#123; value = new char[capacity]; &#125; çº¿ç¨‹å®‰å…¨ï¼šå•çº¿ç¨‹ä¸”æ“ä½œå¤§é‡å­—ç¬¦ä¸²ç”¨StringBuilder,é€Ÿåº¦å¿«ï¼Œä½†çº¿ç¨‹ä¸å®‰å…¨ï¼Œå¯ä¿®æ”¹ï¼›åœ¨å¤šçº¿ç¨‹ä¸”æ“ä½œå¤§é‡å­—ç¬¦ä¸²ç”¨StringBufferï¼Œçº¿ç¨‹å®‰å…¨ï¼Œå¯ä¿®æ”¹ã€‚ StringBuffer å¯¹æ–¹æ³•åŠ äº†åŒæ­¥é”æˆ–è€…å¯¹è°ƒç”¨çš„æ–¹æ³•åŠ äº†åŒæ­¥é”ï¼Œæ‰€ä»¥æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚StringBuilder å¹¶æ²¡æœ‰å¯¹æ–¹æ³•è¿›è¡ŒåŠ åŒæ­¥é”ï¼Œæ‰€ä»¥æ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚ ä¸ºä»€ä¹ˆString ä¸å¯å˜ï¼Ÿ String ç±»ä¸­ä½¿ç”¨ final å…³é”®å­—ä¿®é¥°å­—ç¬¦æ•°ç»„æ¥ä¿å­˜å­—ç¬¦ä¸²ï¼Œ æ‰€ä»¥ String å¯¹è±¡æ˜¯ä¸å¯å˜çš„ã€‚ 1private final char value[] 10.è¯´è¯´æ·±æ‹·è´å’Œæµ…æ‹·è´ï¼Ÿ æµ…æ‹·è´ï¼ˆshallowCopyï¼‰åªæ˜¯å¢åŠ äº†ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘å·²å­˜åœ¨çš„å†…å­˜åœ°å€ï¼› å› æ­¤ï¼Œå¯èƒ½ä¼šå‡ºç°å‡ºç°æµ…æ‹·è´æ—¶é‡Šæ”¾åŒä¸€ä¸ªå†…å­˜çš„é”™è¯¯ã€‚ æ·±æ‹·è´ï¼ˆdeepCopyï¼‰æ˜¯å¢åŠ äº†ä¸€ä¸ªæŒ‡é’ˆå¹¶ä¸”ç”³è¯·äº†ä¸€ä¸ªæ–°çš„å†…å­˜ï¼Œä½¿è¿™ä¸ªå¢åŠ çš„æŒ‡é’ˆæŒ‡å‘è¿™ä¸ªæ–°çš„å†…å­˜ã€‚ 11. ã€æ–°å¢ã€‘ä»‹ç»ä¸€ä¸‹JDK1.8çš„æ–°ç‰¹æ€§ï¼Ÿ JDK1.8æ–°å¢äº†éå¸¸å¤šçš„ç‰¹æ€§ï¼Œå¦‚ï¼š Lambdaè¡¨è¾¾å¼ï¼šLambdaå…è®¸æŠŠå‡½æ•°ä½œä¸ºä¸€ä¸ªæ–¹æ³•çš„å‚æ•°ï¼ˆå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’åˆ°æ–¹æ³•ä¸­ï¼‰ã€‚ æ–¹æ³•å¼•ç”¨ï¼šæ–¹æ³•å¼•ç”¨æä¾›äº†éå¸¸æœ‰ç”¨çš„è¯­æ³•ï¼Œå¯ä»¥ç›´æ¥å¼•ç”¨å·²æœ‰Javaç±»æˆ–å¯¹è±¡ï¼ˆå®ä¾‹ï¼‰çš„æ–¹æ³•æˆ–æ„é€ å™¨ã€‚ä¸lambdaè”åˆä½¿ç”¨ï¼Œæ–¹æ³•å¼•ç”¨å¯ä»¥ä½¿è¯­è¨€çš„æ„é€ æ›´ç´§å‡‘ç®€æ´ï¼Œå‡å°‘å†—ä½™ä»£ç ã€‚ é»˜è®¤æ–¹æ³•ï¼šé»˜è®¤æ–¹æ³•å°±æ˜¯ä¸€ä¸ªåœ¨æ¥å£é‡Œé¢æœ‰äº†ä¸€ä¸ªå®ç°çš„æ–¹æ³•ã€‚ æ–°å·¥å…·ï¼šæ–°çš„ç¼–è¯‘å·¥å…·ï¼Œå¦‚ï¼šNashornå¼•æ“ jjsã€ ç±»ä¾èµ–åˆ†æå™¨jdepsã€‚ Stream APIï¼šæ–°æ·»åŠ çš„Stream APIï¼ˆjava.util.streamï¼‰ æŠŠçœŸæ­£çš„å‡½æ•°å¼ç¼–ç¨‹é£æ ¼å¼•å…¥åˆ°Javaä¸­ã€‚ Date Time APIï¼šåŠ å¼ºå¯¹æ—¥æœŸä¸æ—¶é—´çš„å¤„ç†ã€‚ Optionalç±»ï¼šOptional ç±»å·²ç»æˆä¸º Java 8 ç±»åº“çš„ä¸€éƒ¨åˆ†ï¼Œç”¨æ¥è§£å†³ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚ Nashornï¼ŒJavaScriptå¼•æ“ï¼šJDK1.8æä¾›äº†ä¸€ä¸ªæ–°çš„Nashorn javascriptå¼•æ“ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨JVMä¸Šè¿è¡Œç‰¹å®šçš„javascriptåº”ç”¨ã€‚ 12. ã€æ–°å¢ã€‘javaä¸€ä¸ªç¨‹åºèƒ½ä¸èƒ½æœ‰å¤šä¸ªmainæ–¹æ³•ï¼Ÿä¸€ä¸ªç±»é‡Œå‘¢ï¼Ÿ ä¸€ä¸ªç¨‹åºé‡Œï¼Œå¤šä¸ªclasséƒ½æœ‰mainæ–¹æ³• å¯ä»¥ï¼Œé»˜è®¤ç¬¬ä¸€ä¸ªä¸ºå…¥å£ï¼Œå…¶ä½™ä¸ºæ™®é€šå‡½æ•°ã€‚ 12345678class Class1 &#123; public static void main(String[] args) &#123; &#125;&#125;public class Class2 &#123; public static void main(String[] args) &#123; &#125;&#125; ä¸€ä¸ªç±»æœ‰å¤šä¸ªmainæ–¹æ³• å¯ä»¥ï¼Œå…¶ä½™å°±ç›¸å½“æ˜¯é‡è½½ã€‚ä½†æ˜¯å…·æœ‰ä»¥ä¸‹sigatureï¼ˆç­¾åï¼‰çš„ä¸»è¦æ–¹æ³•å°†è¢«è§†ä¸ºappå…¥å£ç‚¹ï¼š 1public static void main(String[] args) 1.1.2 å…³é”®å­— 1.è¯·ä½ è®²è®²Javaé‡Œé¢çš„finalå…³é”®å­—æ˜¯æ€ä¹ˆç”¨çš„ï¼Ÿ ä¿®é¥°ç±»ï¼šè¡¨ç¤ºä¸èƒ½è¢«ç»§æ‰¿ï¼Œfinalç±» æˆå‘˜å˜é‡ å¯ä»¥è®¾ä¸ºfinalï¼›ä½†finalç±»æ‰€æœ‰æ–¹æ³• ï¼Œéƒ½è¢«éšå¼æŒ‡å®šä¸ºfinalæ–¹æ³•ï¼› ä¿®é¥°æ–¹æ³•ï¼šé˜²ä»»ä½•ç»§æ‰¿ç±»ä¿®æ”¹å®ƒçš„å«ä¹‰ ï¼› åœ¨æ—©æœŸçš„Javaå®ç°ç‰ˆæœ¬ä¸­ï¼Œä¼šå°†finalæ–¹æ³•è½¬ä¸ºå†…åµŒè°ƒç”¨ï¼Œæ•ˆç‡ä¼šæ›´é«˜ï¼› ä¿®é¥°å˜é‡ã€å¼•ç”¨ï¼šåŸºæœ¬ç±»å‹çš„è¯ä¸€æ—¦åˆå§‹åŒ–ä¸èƒ½ä¿®æ”¹ï¼›å¼•ç”¨ç±»å‹ï¼Œä¸èƒ½æŒ‡å®šå…¶ä»–å¯¹è±¡ ã€‚ 2. ã€é‡ç‚¹ã€‘è¯·ä½ è°ˆè°ˆå…³äºSynchronizedå’Œlock ï¼Ÿ Synchronizedï¼šæ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œä¿®é¥°ç±»ã€æ–¹æ³• æˆ– ä»£ç å— ï¼Œä¿è¯åœ¨åŒä¸€æ—¶åˆ»æœ€å¤šåªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè¯¥æ®µä»£ç ï¼› ä½œç”¨èŒƒå›´ï¼š ä¿®é¥°ä¸€ä¸ªç±»/é™æ€æ–¹æ³•ï¼Œä½œç”¨çš„å¯¹è±¡æ˜¯è¿™ä¸ªç±»çš„æ‰€æœ‰å¯¹è±¡ã€‚ ä¿®é¥°ä¸€ä¸ªæ–¹æ³•/ä»£ç å—ï¼Œä½œç”¨çš„å¯¹è±¡æ˜¯è°ƒç”¨è¿™ä¸ªæ–¹æ³•/ä»£ç å—çš„å¯¹è±¡ã€‚ Lockï¼šæ˜¯ä¸€ä¸ªæ¥å£ï¼ŒLockèƒ½å®Œæˆsynchronizedæ‰€å®ç°çš„æ‰€æœ‰åŠŸèƒ½ã€‚ Lockæ¥å£æ˜¯ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–çš„ï¼Œéœ€è¦é å®ƒçš„å®ç°ç±»ReentrantLockæ¥è¿›è¡Œå®ä¾‹åŒ–ã€‚ åŒºåˆ«ï¼š é”é‡Šæ”¾ï¼šsynchronizedåœ¨å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œä¼šè‡ªåŠ¨é‡Šæ”¾çº¿ç¨‹å æœ‰çš„é”ï¼Œå› æ­¤ä¸ä¼šå¯¼è‡´æ­»é”ç°è±¡å‘ç”Ÿï¼›Lockä¸ä¼šä¸»åŠ¨é€‚åº” unLock() é‡Šæ”¾ï¼Œå¿…é¡»æ‰‹åŠ¨åœ¨finallyé‡Šæ”¾ã€‚ï¼› çº¿ç¨‹ç­‰å¾…ï¼š Lockå¯ä»¥è®©ç­‰å¾…é”çš„çº¿ç¨‹å¯ä»¥å“åº”ä¸­æ–­ï¼Œçº¿ç¨‹å¯ä»¥ä¸­æ–­å»å¹²åˆ«çš„äº‹åŠ¡ï¼›è€Œsynchronizedå´ä¸è¡Œï¼Œä½¿ç”¨synchronizedæ—¶ï¼Œç­‰å¾…çš„çº¿ç¨‹ä¼šä¸€ç›´ç­‰å¾…ä¸‹å»ï¼› æˆåŠŸè·å–é”ï¼š é€šè¿‡Lockå¯ä»¥çŸ¥é“æœ‰æ²¡æœ‰æˆåŠŸè·å–é”ï¼Œè€Œsynchronizedå´æ— æ³•åŠåˆ°ã€‚ 3. instanceofå…³é”®å­—çš„ä½œç”¨ï¼Ÿ instanceof ä¸¥æ ¼æ¥è¯´æ˜¯Javaä¸­çš„ä¸€ä¸ªåŒç›®è¿ç®—ç¬¦ï¼Œç”¨æ¥æµ‹è¯•ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºä¸€ä¸ªç±»çš„å®ä¾‹ã€‚ 123int i = 0;System.out.println(i instanceof Integer);//ç¼–è¯‘ä¸é€šè¿‡ iå¿…é¡»æ˜¯å¼•ç”¨ç±»å‹ï¼Œä¸èƒ½æ˜¯åŸºæœ¬ç±»å‹System.out.println(i instanceof Object);//ç¼–è¯‘ä¸é€šè¿‡ 12Integer integer = new Integer(1);System.out.println(integer instanceof Integer);//true 4. finalæœ‰å“ªäº›ç”¨æ³•? è¢«finalä¿®é¥°çš„ç±»ä¸å¯ä»¥è¢«ç»§æ‰¿ ï¼› è¢«finalä¿®é¥°çš„æ–¹æ³•ä¸å¯ä»¥è¢«é‡å†™ï¼Œè€Œä¸”JVMä¼šå°è¯•å°†å…¶å†…è”ï¼Œä»¥æé«˜è¿è¡Œæ•ˆç‡ï¼› è¢«finalä¿®é¥°çš„å˜é‡ä¸å¯ä»¥è¢«æ”¹å˜ï¼› è¢«finalä¿®é¥°çš„å¼•ç”¨ï¼Œé‚£ä¹ˆè¡¨ç¤ºå¼•ç”¨ä¸å¯å˜ï¼Œå¼•ç”¨æŒ‡å‘çš„å†…å®¹å¯å˜ï¼› è¢«finalä¿®é¥°çš„å¸¸é‡ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µä¼šå­˜å…¥å¸¸é‡æ± ä¸­ã€‚ 5. staticéƒ½æœ‰å“ªäº›ç”¨æ³• ? ä¿®é¥°é™æ€å˜é‡å’Œé™æ€æ–¹æ³• ï¼šéƒ½å±äºç±»çš„é™æ€èµ„æºï¼Œç±»å®ä¾‹æ‰€å…±äº« ï¼› ä¿®é¥°é™æ€å—ï¼šç”¨äºåˆå§‹åŒ–æ“ä½œã€‚ 12345public calss PreCache&#123; static&#123; //æ‰§è¡Œç›¸å…³æ“ä½œ &#125;&#125; ä¿®é¥°é™æ€åŒ…ï¼šåœ¨JDK 1.5ä¹‹åå¼•å…¥çš„æ–°ç‰¹æ€§,å¯ä»¥ç”¨æ¥æŒ‡å®šå¯¼å…¥æŸä¸ªç±»ä¸­çš„é™æ€èµ„æº,å¹¶ä¸”ä¸éœ€è¦ä½¿ç”¨ç±»å,å¯ä»¥ç›´æ¥ä½¿ç”¨æ–¹æ³•åã€‚ 12345678910import static java.lang.Math.*; public class Test &#123; public static void main(String[] args) &#123; //System.out.println(Math.sin(20));ä¼ ç»Ÿåšæ³• System.out.println(sin(20)); &#125;&#125; 6. è°ˆä¸€è°ˆtransientå…³é”®å­—ï¼Ÿ å‚è€ƒ : Javaä¸­çš„å…³é”®å­— transient Javaä¸­åºåˆ—åŒ–æ“ä½œ Javaä¸­å¯¹è±¡çš„åºåˆ—åŒ–æŒ‡çš„æ˜¯å°†å¯¹è±¡è½¬æ¢æˆä»¥ã€å­—èŠ‚åºåˆ—ã€‘çš„å½¢å¼æ¥è¡¨ç¤ºï¼Œè¿™äº›å­—èŠ‚åºåˆ—åŒ…å«äº†å¯¹è±¡çš„æ•°æ®å’Œä¿¡æ¯ã€‚ å½“ç„¶ï¼Œåºåˆ—åŒ–åçš„æœ€ç»ˆç›®çš„æ˜¯ä¸ºäº†ååºåˆ—åŒ–ï¼Œæ¢å¤æˆåŸå…ˆçš„Javaå¯¹è±¡ï¼Œè¦ä¸ç„¶åºåˆ—åŒ–åå¹²å˜›å‘¢ï¼Œæ‰€ä»¥åºåˆ—åŒ–åçš„å­—èŠ‚åºåˆ—éƒ½æ˜¯å¯ä»¥æ¢å¤æˆJavaå¯¹è±¡çš„ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯ååºåˆ—åŒ–ã€‚ ä¸€ä¸ªåºåˆ—åŒ–åçš„å¯¹è±¡å¯ä»¥è¢«å†™åˆ°æ•°æ®åº“æˆ–æ–‡ä»¶ä¸­ï¼Œä¹Ÿå¯ç”¨äºç½‘ç»œä¼ è¾“ï¼Œä¸€èˆ¬å½“æˆ‘ä»¬ä½¿ç”¨ç¼“å­˜cacheï¼ˆå†…å­˜ç©ºé—´ä¸å¤Ÿæœ‰å¯èƒ½ä¼šæœ¬åœ°å­˜å‚¨åˆ°ç¡¬ç›˜ï¼‰æˆ–è¿œç¨‹è°ƒç”¨rpcï¼ˆç½‘ç»œä¼ è¾“ï¼‰çš„æ—¶å€™ï¼Œç»å¸¸éœ€è¦è®©æˆ‘ä»¬çš„å®ä½“ç±»å®ç°Serializableæ¥å£ï¼Œç›®çš„å°±æ˜¯ä¸ºäº†è®©å…¶å¯åºåˆ—åŒ–ã€‚ å…³äºtransientå…³é”®å­— Javaä¸­transientå…³é”®å­—çš„ä½œç”¨ï¼Œå‘è™šæ‹Ÿæœºè¡¨æ˜: transientå˜é‡ä¸æ˜¯å¯¹è±¡çš„æŒä¹…çŠ¶æ€çš„ä¸€éƒ¨åˆ†ã€‚ ç®€å•åœ°è¯´ï¼Œå°±æ˜¯è®©æŸäº›è¢«ä¿®é¥°çš„æˆå‘˜å±æ€§å˜é‡ä¸è¢«åºåˆ—åŒ–ï¼Œä¾‹å¦‚ï¼š ç±»ä¸­çš„å­—æ®µå€¼å¯ä»¥æ ¹æ®å…¶å®ƒå­—æ®µæ¨å¯¼å‡ºæ¥ï¼Œå¦‚ä¸€ä¸ªé•¿æ–¹å½¢ç±»æœ‰ä¸‰ä¸ªå±æ€§ï¼šé•¿åº¦ã€å®½åº¦ã€é¢ç§¯ï¼ˆç¤ºä¾‹è€Œå·²ï¼Œä¸€èˆ¬ä¸ä¼šè¿™æ ·è®¾è®¡ï¼‰ï¼Œé‚£ä¹ˆåœ¨åºåˆ—åŒ–çš„æ—¶å€™ï¼Œé¢ç§¯è¿™ä¸ªå±æ€§å°±æ²¡å¿…è¦è¢«åºåˆ—åŒ–äº†ï¼› å…¶å®ƒï¼Œçœ‹å…·ä½“ä¸šåŠ¡éœ€æ±‚å§ï¼Œå“ªäº›å­—æ®µä¸æƒ³è¢«åºåˆ—åŒ–ï¼› 7.1 HashMapä¸­æºç modCountä¸ºä»€ä¹ˆç”¨tranisentä¿®é¥°ï¼Ÿ modCountä¸»è¦ç”¨äºåˆ¤æ–­HashMapæ˜¯å¦è¢«ä¿®æ”¹ï¼ˆåƒputã€removeæ“ä½œçš„æ—¶å€™ï¼ŒmodCountéƒ½ä¼šè‡ªå¢ï¼‰ã€‚ å¯¹äºè¿™ç§å˜é‡ï¼Œä¸€å¼€å§‹å¯ä»¥ä¸ºä»»ä½•å€¼ï¼Œ0å½“ç„¶ä¹Ÿæ˜¯å¯ä»¥ï¼ˆnewå‡ºæ¥ã€ååºåˆ—åŒ–å‡ºæ¥ã€æˆ–è€…å…‹éš†cloneå‡ºæ¥çš„æ—¶å€™éƒ½æ˜¯ä¸º0çš„ï¼‰ï¼Œæ²¡å¿…è¦æŒä¹…åŒ–å…¶å€¼ã€‚ 1.1.3 Javaå¼‚å¸¸ 1. Javaå¸¸è§å¼‚å¸¸å’Œåˆ†ç±»ï¼Ÿ å¸¸è§åˆ†ä¸ºä¸¤ç±»ï¼ŒErrorå’ŒException ï¼š Error ï¼šæŒ‡ç¨‹åºæ— æ³•æ¢å¤çš„å¼‚å¸¸æƒ…å†µï¼Œå¯¹äºå…¶æ‰€æœ‰ç±»å‹ï¼Œéƒ½ä¸è¦æ±‚ç¨‹åºå¤„ç†ã€‚ å¸¸è§é”™è¯¯ï¼šStackoverflowï¼ŒoutOfMemory Exceptionï¼š ç¨‹åºæœ‰å¯èƒ½æ¢å¤çš„é”™è¯¯ï¼Œåˆåˆ†ä¸ºIOException &amp; RuntimeException ï¼Œå¸¸è§é”™è¯¯ï¼š IOExceptionï¼šFileNotFoundExcepetion RuntimeException : ç©ºæŒ‡é’ˆï¼Œå‚æ•°ä¸åˆæ³•ï¼Œç±»æœªæ‰¾åˆ°ç­‰ 2. OOMäº§ç”ŸåŸå› å’Œåˆ†æï¼Ÿ OOMï¼Œå…¨ç§°â€œOut Of Memoryâ€ï¼Œç¿»è¯‘æˆä¸­æ–‡å°±æ˜¯â€œå†…å­˜ç”¨å®Œäº†â€ï¼Œæ¥æºäºjava.lang.OutOfMemoryError ã€‚ java.lang.OutOfMemoryError: Java heap space ï¼ˆå †æº¢å‡ºï¼‰ äº§ç”ŸåŸå›  å†…å­˜æ³„æ¼ï¼› å †åˆ†é…å¤ªå°ï¼› è§£å†³åŠæ³• å†…å­˜æ³„æ¼è¦æ‰‹åŠ¨å»é‡Šæ”¾å†…å­˜ï¼Œæ¯”å¦‚æ•°æ®åº“è¿æ¥æ± ï¼Œå•ä¾‹æ¨¡å¼ é€šè¿‡è™šæ‹Ÿæœºå‚æ•°-Xms,-Xmxç­‰ä¿®æ”¹ï¼Œå¯¹å†…å­˜å¤§å° java.lang.OutOfMemoryError: PermGen space ï¼ˆæ°¸ä¹…ä»£ï¼ˆæ–¹æ³•åŒºï¼‰æº¢å‡ºï¼‰ äº§ç”ŸåŸå›  å³æ–¹æ³•åŒºæº¢å‡ºäº†ï¼š ä¸€èˆ¬å‡ºç°äºå¤§é‡Classæˆ–è€…jspé¡µé¢ï¼Œæˆ–è€…é‡‡ç”¨cglibç­‰åå°„æœºåˆ¶çš„æƒ…å†µï¼Œå› ä¸ºä¸Šè¿°æƒ…å†µä¼šäº§ç”Ÿå¤§é‡çš„Classä¿¡æ¯å­˜å‚¨äºæ–¹æ³•åŒº ï¼› è¿‡å¤šçš„å¸¸é‡å°¤å…¶æ˜¯å­—ç¬¦ä¸²ä¹Ÿä¼šå¯¼è‡´æ–¹æ³•åŒºæº¢å‡ºã€‚ è§£å†³åŠæ³• æ°¸ä¹…ä»£çš„å†…å­˜åˆ†é…å¢å¤§ ï¼š-XX:PermSizeå’Œ-XX:MaxPermSize java.lang.StackOverflowError ------&gt; ä¸ä¼šæŠ›OOM errorï¼Œä½†ä¹Ÿæ˜¯æ¯”è¾ƒå¸¸è§çš„Javaå†…å­˜æº¢å‡ºã€‚ çº¿ç¨‹æ ˆç›¸å…³çš„å†…å­˜å¼‚å¸¸æœ‰ä¸¤ä¸ªï¼š StackOverflowError(æ–¹æ³•è°ƒç”¨å±‚æ¬¡å¤ªæ·±ï¼Œå†…å­˜ä¸å¤Ÿæ–°å»ºæ ˆå¸§) OutOfMemoryErrorï¼ˆçº¿ç¨‹å¤ªå¤šï¼Œå†…å­˜ä¸å¤Ÿæ–°å»ºçº¿ç¨‹ï¼‰ java.lang.OutOfMemoryError: Metaspace Javaä¸­æ™®é€šI/Oé‡‡ç”¨è¾“å…¥/è¾“å‡ºæµæ–¹å¼å®ç°ï¼Œè¾“å…¥æµInputStreamï¼ˆ ç»ˆç«¯â€”&gt;ç›´æ¥å†…å­˜-&gt;JVMï¼‰ï¼Œè¾“å‡ºæµï¼ˆJVM-&gt;ç›´æ¥å†…å­˜-&gt;ç»ˆç«¯ï¼‰ï¼Œè¿™ä¸€è¿‡ç¨‹ä¸­æœ‰kenelä¸JVMä¹‹é—´çš„æ‹·è´ï¼ˆå¾ˆå¤šæ¬¡ï¼‰ã€‚ ä¸ºäº†ä½¿ç”¨ç›´æ¥å†…å­˜ï¼ŒJavaæ˜¯æœ‰ä¸€å—åŒºåŸŸå«DirectBufferï¼Œä¸æ˜¯JavaHeapè€Œæ˜¯cHeapçš„ä¸€éƒ¨åˆ†ã€‚ ä½†ç”±äºç›´æ¥å†…å­˜æ²¡æœ‰è¢«javaè™šæœºå®Œå…¨æ‰˜ç®¡ï¼Œè‹¥ä½¿ç”¨ä¸å½“ï¼Œä¹Ÿå®¹æ˜“è§¦å‘æº¢å‡ºï¼Œå¯¼è‡´å®•æœºã€‚ 3. try catch finallyï¼Œtryé‡Œæœ‰returnï¼Œfinallyè¿˜æ‰§è¡Œä¹ˆï¼Ÿ æ‰§è¡Œï¼Œå¹¶ä¸”finallyçš„æ‰§è¡Œæ—©äºtryé‡Œé¢çš„return ï¼š ä¸ç®¡æœ‰æœ¨æœ‰å‡ºç°å¼‚å¸¸ï¼Œfinallyå—ä¸­ä»£ç éƒ½ä¼šæ‰§è¡Œï¼› å½“tryå’Œcatchä¸­æœ‰returnæ—¶ï¼Œfinallyä»ç„¶ä¼šæ‰§è¡Œï¼› finallyæ˜¯åœ¨returnåé¢çš„è¡¨è¾¾å¼è¿ç®—åæ‰§è¡Œçš„ï¼ˆæ­¤æ—¶å¹¶æ²¡æœ‰è¿”å›è¿ç®—åçš„å€¼ï¼Œè€Œæ˜¯å…ˆæŠŠè¦è¿”å›çš„å€¼ä¿å­˜èµ·æ¥ï¼Œç®¡finallyä¸­çš„ä»£ç æ€ä¹ˆæ ·ï¼Œè¿”å›çš„å€¼éƒ½ä¸ä¼šæ”¹å˜ï¼Œä»»ç„¶æ˜¯ä¹‹å‰ä¿å­˜çš„å€¼ï¼‰ï¼Œæ‰€ä»¥å‡½æ•°è¿”å›å€¼æ˜¯åœ¨finallyæ‰§è¡Œå‰ç¡®å®šçš„ã€‚ 4.è¯´è¯´ä½ æ˜¯æ€ä¹ˆå¤„ç†å¼‚å¸¸çš„ï¼Ÿ try-catch-finally try å—è´Ÿè´£ç›‘æ§å¯èƒ½å‡ºç°å¼‚å¸¸çš„ä»£ç  catch å—è´Ÿè´£æ•è·å¯èƒ½å‡ºç°çš„å¼‚å¸¸ï¼Œå¹¶è¿›è¡Œå¤„ç† finally å—è´Ÿè´£æ¸…ç†å„ç§èµ„æºï¼Œä¸ç®¡æ˜¯å¦å‡ºç°å¼‚å¸¸éƒ½ä¼šæ‰§è¡Œ å…¶ä¸­ try å—æ˜¯å¿…é¡»çš„ï¼Œcatch å’Œ finally è‡³å°‘å­˜åœ¨ä¸€ä¸ªæ ‡å‡†å¼‚å¸¸å¤„ç†æµç¨‹ 5. webç½‘é¡µå¡æ€ä¹ˆæ’æŸ¥ï¼Ÿcpu100%æ€ä¹ˆæ’æŸ¥ï¼ŸOOMæ€ä¹ˆæ’æŸ¥ï¼Ÿ webç½‘é¡µå¡é¡¿ ç”¨æˆ·ç«¯ï¼šç¡¬ä»¶é…ç½®ä½ã€èµ„æºä¸è¶³ï¼›CPU æˆ–è€…å†…å­˜èµ„æºä¸è¶³, æ¯”å¦‚ç”¨æˆ·æ˜¯å¦ä½¿ç”¨äº† Chrome è¿™ç§ â€œåƒå†…å­˜å¤§æˆ·â€ çš„æµè§ˆå™¨å¹¶ä¸”æ‰“å¼€äº†å¾ˆå¤šç½‘é¡µ? ç½‘ç»œåˆ†æï¼šDNS è§£ææ…¢ï¼›æœªè®¾ç½® CDNï¼Œå¦‚æœæ²¡æœ‰è®¾ç½® CDN, åœ¨è·¨çº¿è·¯è®¿é—®(æ¯”å¦‚ç”¨æˆ·æ˜¯é“é€š, ä½†æ˜¯æœåŠ¡å™¨éƒ¨ç½²åœ¨è”é€š, è¿™ç§æƒ…å†µå°±æ˜¯è·¨çº¿è·¯), åœ°ç†ä½ç½®ç›¸å·®å¾ˆè¿œ ç­‰æƒ…å†µ ï¼›ç”¨æˆ·ç«¯çš„å¸¦å®½ä¸è¶³æˆ–æ‰€å¤„ç¯å¢ƒç½‘ç»œä¸ä½³ï¼› æœåŠ¡ç«¯ï¼šæœåŠ¡ç«¯å“åº”æ…¢ï¼Œæ€§èƒ½æ¯”è¾ƒå·® ã€‚ cpu100% å‚è€ƒï¼šhttps://www.cnblogs.com/dennyzhangdd/p/11585971.html æ‰§è¡Œtopå‘½ä»¤ï¼šæŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹å ç³»ç»ŸCPUçš„æ’åºï¼› æå¤§å¯èƒ½æ’ç¬¬ä¸€ä¸ªçš„å°±æ˜¯å’±ä»¬çš„javaè¿›ç¨‹ï¼ˆCOMMANDåˆ—ï¼‰ã€‚PIDé‚£ä¸€åˆ—å°±æ˜¯è¿›ç¨‹å·ã€‚ æ‰§è¡Œtop -Hp è¿›ç¨‹å·å‘½ä»¤ï¼šæŸ¥çœ‹javaè¿›ç¨‹ä¸‹çš„æ‰€æœ‰çº¿ç¨‹å CPUçš„æƒ…å†µï¼› æ‰§è¡Œprintf &quot;%x\\n 10å‘½ä»¤ ï¼šåç»­æŸ¥çœ‹çº¿ç¨‹å †æ ˆä¿¡æ¯å±•ç¤ºçš„éƒ½æ˜¯åå…­è¿›åˆ¶ï¼Œä¸ºäº†æ‰¾åˆ°å’±ä»¬çš„çº¿ç¨‹å †æ ˆä¿¡æ¯ï¼Œå’±ä»¬éœ€è¦æŠŠçº¿ç¨‹å·è½¬æˆ16è¿›åˆ¶ã€‚ æ‰§è¡Œjstack è¿›ç¨‹å· | grep çº¿ç¨‹IDâ€ æŸ¥æ‰¾æŸè¿›ç¨‹ä¸‹â€“&gt;çº¿ç¨‹ID(jstackå †æ ˆä¿¡æ¯ä¸­çš„nid)=0xaçš„çº¿ç¨‹çŠ¶æ€ã€‚ ä»£ç ä¸­æœ‰å¤§é‡æ¶ˆè€—CPUçš„æ“ä½œï¼Œå¯¼è‡´CPUè¿‡é«˜ï¼Œç³»ç»Ÿè¿è¡Œç¼“æ…¢ï¼š jstackï¼Œå¯ç›´æ¥å®šä½åˆ°ä»£ç è¡Œã€‚ä¾‹å¦‚æŸäº›å¤æ‚ç®—æ³•ï¼Œç”šè‡³ç®—æ³•BUGï¼Œæ— é™å¾ªç¯é€’å½’ç­‰ç­‰ã€‚ å¦‚æœæœ‰æ­»é”ï¼Œä¼šç›´æ¥æç¤ºå…³é”®å­—ï¼šdeadlockã€‚æ­¥éª¤4ï¼Œä¼šæ‰“å°å‡ºä¸šåŠ¡æ­»é”çš„ä½ç½®ã€‚ æ‰§è¡Œjstat -gcutil è¿›ç¨‹å· ç»Ÿè®¡é—´éš”æ¯«ç§’ ç»Ÿè®¡æ¬¡æ•°ï¼ˆç¼ºçœä»£è¡¨ä¸€è‡´ç»Ÿè®¡ï¼‰â€ï¼ŒæŸ¥çœ‹æŸè¿›ç¨‹GCæŒç»­å˜åŒ–æƒ…å†µï¼Œå¦‚æœå‘ç°è¿”å›ä¸­FGCå¾ˆå¤§ä¸”ä¸€ç›´å¢å¤§â€“&gt;ç¡®è®¤Full GC! ä¹Ÿå¯ä»¥ä½¿ç”¨â€œjmap -heap è¿›ç¨‹IDâ€æŸ¥çœ‹ä¸€ä¸‹è¿›ç¨‹çš„å †å†…ä»æ˜¯ä¸æ˜¯è¦æº¢å‡ºäº†ï¼Œç‰¹åˆ«æ˜¯è€å¹´ä»£å†…ä»ä½¿ç”¨æƒ…å†µä¸€èˆ¬æ˜¯è¾¾åˆ°é˜ˆå€¼(å…·ä½“çœ‹åƒåœ¾å›æ”¶å™¨å’Œå¯åŠ¨æ—¶é…ç½®çš„é˜ˆå€¼)å°±ä¼šè¿›ç¨‹Full GCã€‚ jstatå‘½ä»¤ç›‘æ§GCæƒ…å†µï¼Œå¯ä»¥çœ‹åˆ°Full GCæ¬¡æ•°éå¸¸å¤šï¼Œå¹¶ä¸”æ¬¡æ•°åœ¨ä¸æ–­å¢åŠ ã€‚ æ‰§è¡Œjmap -dump:format=b,file=filename è¿›ç¨‹IDï¼Œå¯¼å‡ºæŸè¿›ç¨‹ä¸‹å†…å­˜heapè¾“å‡ºåˆ°æ–‡ä»¶ä¸­ã€‚ OOM å‚è€ƒï¼šhttps://www.cnblogs.com/valjeanshaw/p/13130102.html å…ˆé€šè¿‡å†…å­˜æ˜ åƒå·¥å…·å¯¹Dumpå‡ºæ¥çš„å †è½¬å‚¨å¿«ç…§è¿›è¡Œåˆ†æï¼Œé‡ç‚¹æ˜¯ç¡®è®¤å†…å­˜ä¸­çš„å¯¹è±¡æ˜¯å¦æ˜¯å¿…è¦çš„ï¼Œä¹Ÿå°±æ˜¯è¦å…ˆåˆ†æ¸…æ¥šåˆ°åº•æ˜¯å‡ºç°äº†å†…å­˜æ³„æ¼è¿˜æ˜¯å†…å­˜æº¢å‡ºã€‚ 1jmap -dump:format=b,file=$java_pid.hprof #java_pidä¸ºjavaè¿›ç¨‹ID ç„¶åçœ‹å…·ä½“æ˜¯æŠ¥ä»€ä¹ˆé”™ï¼šå¾ˆæ˜æ˜¾ä¸‹é¢æ˜¯å †æº¢å‡ºã€‚ 123456789java.lang.OutOfMemoryError: Java heap spaceDumping heap to oom.out ...Heap dump file created [3196858 bytes in 0.016 secs]Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space at java.util.Arrays.copyOf(Arrays.java:3332) at java.lang.AbstractStringBuilder.ensureCapacityInternal(AbstractStringBuilder.java:124) at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:700) at java.lang.StringBuilder.append(StringBuilder.java:214) at jvm.OomDemo.main(OomDemo.java:13)","categories":[{"name":"æ ¡æ‹›ç¬”è®°","slug":"æ ¡æ‹›ç¬”è®°","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/"},{"name":"JAVA","slug":"æ ¡æ‹›ç¬”è®°/JAVA","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/JAVA/"}],"tags":[{"name":"JAVA","slug":"JAVA","permalink":"https://hwh.zone/tags/JAVA/"},{"name":"æ ¡æ‹›","slug":"æ ¡æ‹›","permalink":"https://hwh.zone/tags/%E6%A0%A1%E6%8B%9B/"}]},{"title":"æ ¡æ‹›ç¬”è®°ï¼ˆé›¶ï¼‰_å†™åœ¨å‰é¢","slug":"æ ¡æ‹›ç¬”è®°ï¼ˆé›¶ï¼‰_å†™åœ¨å‰é¢","date":"2021-11-26T10:26:04.423Z","updated":"2021-12-11T14:42:18.346Z","comments":true,"path":"p/29708/","link":"","permalink":"https://hwh.zone/p/29708/","excerpt":"","text":"è½¬çœ¼å°±åˆ°äº†å±äºæˆ‘çš„æ¯•ä¸šå­£ï¼Œè¿˜è®°å¾—åˆæ¥å­¦æ ¡çš„æœŸå¾…å’Œå…´å¥‹ï¼Œå´ä»â€œå°å¸ˆå¼Ÿâ€çœ¨çœ¼å˜æˆäº†â€œè€æ²¹æ¡â€ã€‚å®ä¹ å’Œç§‹æ‹›ä¹Ÿç®—æ­£å¼å‘Šä¸€æ®µè½ï¼Œå¯¹äºæˆ‘è¿™ç§æ‡’è›‹ï¼Œæœ‰å¹¸æ‹¿åˆ°äº†è…¾è®¯ã€ç¾å›¢ã€Shoope SGç­‰ åç«¯å¼€å‘å²— offerï¼Œå‹‰å¼ºç®—æ˜¯ä¸€ä¸ª â€œhappy endingâ€ã€‚æ‰¾å·¥ä½œæ˜¯ä»Šå¹´æˆ‘ç»å†çš„æœ€é‡è¦äº‹æƒ…ä¹‹ä¸€ï¼ŒåŒæ—¶ä¹Ÿæƒ³ç»™å¸ˆå¼Ÿå¸ˆå¦¹æä¾›ä¸€ç‚¹å¸®åŠ©ï¼Œä¾¿æ•´ç†äº†è¿™ä»½ ï¼ˆäº’è”ç½‘ï¼‰æ ¡æ‹›ç¬”è®°ã€‚ ç›´å…¥ä¸»é¢˜ äº’è”ç½‘æ ¡æ‹›ä¸»è¦å½¢å¼å’Œè€ƒå¯Ÿå†…å®¹å¦‚ä¸‹ï¼š è€ƒå¯Ÿå½¢å¼ çº¿ä¸Šè€ƒå¯Ÿï¼Œè§†é¢‘é¢è¯•ï¼ˆå¤§éƒ¨åˆ†å…¬å¸ï¼‰æˆ–ç”µè¯é¢è¯•ï¼ˆé˜¿é‡Œç­‰éƒ¨åˆ†å…¬å¸å–œæ¬¢è¿™ç§æ–¹å¼ï¼‰ã€‚ è€ƒå¯Ÿå†…å®¹ ç®—æ³•èƒ½åŠ› ä¿—ç§°â€œåˆ·é¢˜â€ï¼Œä¸€èˆ¬é¢è¯•éƒ½æ˜¯å¸¸è§é¢˜ï¼Œç†è®ºä¸Šåˆ·å®ŒLeetcode-Top100ï¼Œèƒ½åšåˆ°çƒ‚ç†Ÿäºå¿ƒï¼ˆæŒ‡ç°åœºç§’èƒŒé¢˜æˆ–æ¨¡æ¿ï¼‰ï¼Œå¤§å‚é¢è¯•ä¸€èˆ¬æ²¡æœ‰å¤šå¤§é—®é¢˜ã€‚ å½“ç„¶é’ˆå¯¹å¿ƒä»ªå…¬å¸ï¼Œå¯ä»¥åœ¨é¢è¯•å‰æ›´åŠ é’ˆå¯¹æ€§åœ°ç»ƒä¹ è¯¥å…¬å¸çš„å¸¸å‡ºé¢˜ï¼Œè¿™ä¸€ç‚¹ä¸ŠcodeTopæ˜¯ä¸€ä¸ªä¸é”™çš„ç½‘ç«™ã€‚ è®¡ç®—æœºåŸºç¡€ ä¿—ç§°â€œå…«è‚¡â€ï¼Œè€ƒå¯ŸèŒƒå›´åŒ…å«ï¼šè®¡ç®—æœºç½‘ç»œã€Linuxã€æ•°æ®åº“ã€æ“ä½œç³»ç»Ÿã€å¸¸è§ä¸­é—´ä»¶&amp;æ¡†æ¶ã€æ™ºåŠ›é¢˜ç­‰ã€‚å¯ä»¥çœ‹å¾—åˆ°è€ƒå¯ŸèŒƒå›´éå¸¸å¹¿ï¼Œä½†æ˜¯è€ƒå¯Ÿçš„é¢˜ç›®éå¸¸å›ºå®šã€‚æ‰€ä»¥åªè¦èƒŒç†Ÿå¸¸è§é¢˜ç›®é—®ç­”ä¾¿èƒ½ä¸é”™åœ°åº”å¯¹é¢è¯•ï¼Œè¿™ä¹Ÿæ˜¯è¯¥éƒ¨åˆ†å†…å®¹è¢«ç§°ä¸ºâ€œå…«è‚¡æ–‡â€çš„åŸå› ã€‚ é¡¹ç›® &amp; å®ä¹  é¡¹ç›®é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å®é™…åšçš„å¼€å‘é¡¹ç›®ï¼ˆå¦‚æœæ˜¯ç®—æ³•å²—åˆ™å¯¹åº”è®ºæ–‡ï¼‰ã€‚æ ¹æ®é¢è¯•ç»éªŒï¼Œä¸€ä¸ªå¥½çš„å¼€æºé¡¹ç›®æ˜¯éå¸¸åŠ åˆ†çš„ã€‚ å®ä¹ é€šå¸¸æ˜¯æŒ‡å¤§å‚å®ä¹ ï¼Œåœ¨ç«äº‰è¿™ä¹ˆæ¿€çƒˆçš„æƒ…å†µä¸‹ï¼Œå¦‚æœæ²¡æœ‰å®ä¹ ï¼Œç§‹æ‹›æƒ³è¿›å…¥äº’è”ç½‘å¤§å‚å°†ä¼šå˜å¾—å¾ˆå›°éš¾ã€‚ æ ¹æ®ä»¥ä¸Šå†…å®¹ï¼Œè¿™ä»½æ ¡æ‹›ç¬”è®°äº‰å–å°½é‡å…¨é¢è¦†ç›–ï¼Œæ•´ä¸ªç›®å½•å®‰æ’å¦‚ä¸‹ï¼š [æ³¨1]ï¼šæœ¬ä»½ç¬”è®°é™¤è‡ªèº«æ€»ç»“å¤–ï¼Œä¸»è¦å‚è€ƒèµ„æ–™æ¥æºäº[1][2][3]ï¼Œç‰¹æ­¤æ³¨æ˜ã€‚ å¤‡æ³¨ ç®—æ³•èƒ½åŠ›ï¼ˆâ€œåˆ·é¢˜â€ï¼‰ è¿™éƒ¨åˆ†å°±æ˜¯è€—æ—¶é—´å¤šç»ƒä¹ ï¼ŒLeetcode-Top100 æ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚ è¡¥å……ç»ƒä¹ ï¼šcodeTop è®¡ç®—æœºåŸºç¡€(ä¸Š)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_Javaå…¥é—¨ C++åç«¯åç»­æ›´æ–° æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é¢å¯¹å¯¹è±¡ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é›†åˆ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_å¤šçº¿ç¨‹ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é” æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_JVM è®¡ç®—æœºåŸºç¡€(ä¸‹)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆäºŒï¼‰__è®¡ç®—æœºåŸºç¡€_Linux&amp;Git æ ¡æ‹›ç¬”è®°ï¼ˆä¸‰ï¼‰__è®¡ç®—æœºåŸºç¡€_è®¡ç®—æœºç½‘ç»œ æ ¡æ‹›ç¬”è®°ï¼ˆå››ï¼‰__è®¡ç®—æœºåŸºç¡€_æ“ä½œç³»ç»Ÿ æ ¡æ‹›ç¬”è®°ï¼ˆäº”ï¼‰__è®¡ç®—æœºåŸºç¡€_MySQL æ ¡æ‹›ç¬”è®°ï¼ˆå…­ï¼‰__è®¡ç®—æœºåŸºç¡€_Redis æ ¡æ‹›ç¬”è®°ï¼ˆä¸ƒï¼‰__è®¡ç®—æœºåŸºç¡€_æ•°æ®ç»“æ„ æ ¡æ‹›ç¬”è®°ï¼ˆå…«ï¼‰__è®¡ç®—æœºåŸºç¡€_åœºæ™¯&amp;æ™ºåŠ›é¢˜ æ ¡æ‹›ç¬”è®°ï¼ˆä¹ï¼‰__è®¡ç®—æœºåŸºç¡€_ç›¸å…³è¡¥å…… é¡¹ç›®&amp;å®ä¹  ä¸»è¦æ˜¯æ€ä¹ˆå‡†å¤‡é¡¹ç›®ï¼Œåç»­æ›´æ–° ä¸‹é¢æ˜¯ä¸€äº›å¥‡æ€ªæ²¡æœ‰è„‘è¢‹çš„çµ®çµ®å¨å¨ï¼Œè¿«ä¸åŠå¾…å¹´å…¥ç™¾ä¸‡å¯ä»¥æ ¹æ®ä¸Šé¢ç›®å½•ç›´æ¥å¼€å§‹å­¦ä¹ äº†ï¼Œä»¥ä¸‹å¯ç•¥è¿‡ã€‚ ç®—æ³•è¿˜æ˜¯åç«¯ï¼Ÿ è¯»äº†ä¸ªï¼ˆæœ«æµï¼‰985ç¡•å£«ï¼Œä¹Ÿæœ‰ç¯‡ä¸é”™çš„ï¼ˆæ°´ï¼‰è®ºæ–‡ï¼Œæœ€åå»åšäº†å½“æ—¶æœ¬ç§‘æ¯•ä¸šå°±èƒ½åšçš„å¼€å‘å²—ï¼Ÿâ€”ã€Šæœ¬ç§‘åŒå­¦ç«Ÿæ˜¯æˆ‘çš„é¢è¯•å®˜ã€‹ç³»åˆ—ã€‚ å¦‚æœä½ å’Œæˆ‘æœ‰ä¸€æ ·çš„å›°æƒ‘å’Œé€‰æ‹©ï¼Œä¸å¦¨æ¥çœ‹çœ‹æˆ‘çš„ç»å†ï¼Œä¹Ÿè®¸ä¼šæœ‰ç‚¹å¸®åŠ©ã€‚åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆåˆ†æä¸‹ç®—æ³•å’Œåç«¯çš„å„è‡ªä¼˜åŠ£ã€‚ ç®—æ³• P.K. åç«¯ åœ¨è¿™é‡Œæˆ‘å°†ä»ï¼Œèµ·è–ªã€é—¨æ§›ã€ç«äº‰å¼ºåº¦ã€æœªæ¥å‘å±•ç­‰ç»´åº¦æ¥åˆ†æäºŒè€…ä¼˜åŠ£ã€‚ [æ³¨1]ï¼šä»¥ä¸‹å‡ä»¥ä¸€çº¿å¤§å‚ï¼ˆè…¾è®¯ã€é˜¿é‡Œã€å­—èŠ‚ã€ç¾å›¢ç­‰ï¼‰ä¸ºåŸºå‡†ã€‚ [æ³¨2]ï¼šCV=Computer Visionï¼ŒNLP=Natural Language Processing ã€‚ [æ³¨3]ï¼šéç‰¹åˆ«è¯´æ˜ï¼Œä¸è€ƒè™‘ç‰¹ä¾‹æƒ…å†µã€‚ ç®—æ³• åç«¯ èµ·è–ª åŒçº§åˆ«æ¯”åç«¯é«˜ï¼š1~2K/æœˆ ä¸­æ¡£è–ªèµ„ï¼š40W+ ç®€å†é—¨æ§› 211ç¡•å£«èµ· 211æœ¬èµ·ï¼ˆéƒ¨åˆ†çŸ¥ååŒéï¼‰ ç«äº‰å¼ºåº¦ CV&gt;&gt;æœå¹¿æ¨&gt;NLP CV&gt;Javaåç«¯&gt;&gt;C++åç«¯&gt;å…¶å®ƒ æœªæ¥å‘å±• äºŒè€…å‘å±•ç›¸å·®ä¸å¤§ï¼Œå’Œä¸ªäººå¼ºç›¸å…³ äºŒè€…å‘å±•ç›¸å·®ä¸å¤§ï¼Œå’Œä¸ªäººå¼ºç›¸å…³ å…¶å®ƒ å¯ä»¥çœ‹åˆ°ï¼ŒCVç«äº‰å¼ºåº¦è¿œå¤§äºå…¶å®ƒç®—æ³•å²—ä½ï¼Œå³ä½¿å’Œåç«¯ä¸­ç«äº‰æœ€æ¿€çƒˆçš„Javaåç«¯ç›¸æ¯”ï¼Œä¹Ÿä¾æ—§æ›´å¤§ã€‚ åœ¨è¯»ç ”æœŸé—´ï¼Œæˆ‘ä¸ªäººç ”ç©¶æ–¹å‘å°±æ˜¯CVé¢†åŸŸï¼ˆObject Trackingï¼‰ï¼Œæœ‰ä¸€ç¯‡è®ºæ–‡ï¼ˆCCF-Aï¼Œä¸‰å®¡ï¼‰å’Œå‡ ç¯‡ä¸“åˆ©ã€‚ä½†æ˜¯å¹¶æ²¡æœ‰ä¿¡å¿ƒå»ç«äº‰CVç›¸å…³å²—ä½ï¼ˆå­¦å†å’Œè®ºæ–‡æ— ä¼˜åŠ¿ï¼‰ï¼Œä¹Ÿå¯¹æ·±åº¦å­¦ä¹ äº§ç”Ÿäº†è¿·èŒ«ï¼šè°ƒå‚å’Œæ¨¡å‹ç¼è¡¥ä¹Ÿè®¸å¹¶ä¸æ˜¯æˆ‘æƒ³åšçš„äº‹ï¼Œè™½ç„¶æœ‰æ›´åº•å±‚çš„ç ”ç©¶æ–¹å‘ä½†è‡ªå·±çš„æ•°å­¦åŸºç¡€ä¸å¤Ÿç‰¢é ã€‚ å°±è¿™æ ·ï¼Œå¸¦ç€ä¸ƒåˆ†è¿·èŒ«ä¸‰åˆ†ç›²ç›®è‡ªä¿¡ çš„æˆ‘ä¸€è‚¡è„‘æ‰è¿›Javaçš„è‹¦æµ·ã€‚å¯æ˜¯Javaåç«¯å²—ä½çš„ç«äº‰æ¿€çƒˆç¨‹åº¦è¿œè¶…æˆ‘æƒ³è±¡ï¼Œå®ä¹ å’Œç§‹æ‹›ä¸€ç›´éƒ½åœ¨å¤±ä¸šè¾¹ç¼˜ç–¯ç‹‚è¯•æ¢ã€‚æ— è®ºæ˜¯å®ä¹ è¿˜æ˜¯ç§‹æ‹›ï¼Œæœ€åæˆ‘æ¥å—çš„Offeréƒ½æ˜¯C++åç«¯å²—ä½(è…¾è®¯) ï¼Œå¯ä»¥è¯´æ˜¯ç°å®Javaå°ä¸‘äº†ã€‚ ç°åœ¨å›å¤´æƒ³æƒ³ï¼ŒJavaåç«¯ç«äº‰ä¹‹æ‰€ä»¥è¿™ä¹ˆæ¿€çƒˆä¹ŸåŸºæœ¬æ˜¯å¿…ç„¶çš„ï¼šäº’è”ç½‘çš„é«˜è–ªï¼ˆå’Œ996ï¼‰å¸å¼•äº†å¤§é‡å…¶å®ƒä¸“ä¸šè½¬è¡Œçš„åŒå­¦ï¼Œè€ŒJavaç›¸æ¯”C++ï¼šæ˜“ä¸Šæ‰‹é€Ÿæˆã€éœ€æ±‚å¤§ã€ç”Ÿæ€ä¸°å¯Œï¼ˆåŸ¹è®­ç­ä¸€æ¡é¾™æœåŠ¡ï¼‰ï¼Œè‡ªç„¶æ˜¯é¦–é€‰ã€‚ é‚£ä¹ˆï¼šåˆ°åº•æ˜¯é€‰æ‹©Javaåç«¯è¿˜æ˜¯C++åç«¯å‘¢? è¿™é‡Œæˆ‘ä¹Ÿç®€å•åˆ†æä¸€ä¸‹å„è‡ªä¼˜åŠ£ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®ä¸ªäººæƒ…å†µè¿›è¡ŒæŠ‰æ‹©ã€‚ Javaåç«¯ P.K. C++åç«¯ ä¸€å®¶ä¹‹è¨€ï¼Œä»…ä¾›å‚è€ƒã€‚ åœ¨è¿™é‡Œæˆ‘å°†ä»ï¼Œèµ·è–ª&amp;é—¨æ§›ã€å²—ä½éœ€æ±‚ï¼Œç«äº‰å¼ºåº¦ã€æœªæ¥å‘å±•ç­‰ç»´åº¦æ¥åˆ†æäºŒè€…ä¼˜åŠ£ã€‚ [æ³¨1]ï¼šä»¥ä¸‹å‡ä»¥ä¸€çº¿å¤§å‚ï¼ˆè…¾è®¯ã€é˜¿é‡Œã€å­—èŠ‚ã€ç¾å›¢ç­‰ï¼‰ä¸ºåŸºå‡†ã€‚ [æ³¨2]ï¼šéç‰¹åˆ«è¯´æ˜ï¼Œä¸è€ƒè™‘ç‰¹ä¾‹æƒ…å†µã€‚ Javaåç«¯ C++åç«¯ å¤‡æ³¨ èµ·è–ª&amp;é—¨æ§› åŸºæœ¬ä¸€è‡´ åŸºæœ¬ä¸€è‡´ å²—ä½éœ€æ±‚ éå¸¸å¤š ä¸€èˆ¬ ä»Šå¹´åµŒå…¥å¼çˆ†çƒ­ï¼ŒC++å²—ä½éœ€æ±‚é¢„è®¡ä¼šå¢åŠ  ç«äº‰å¼ºåº¦ éå¸¸å¤§ï¼ŒJava&gt;&gt;C++ ä¸€èˆ¬ æœªæ¥å‘å±• ç›¸å·®ä¸å¤§ï¼Œå’Œä¸ªäººç›¸å…³ ç›¸å·®ä¸å¤§ï¼Œå’Œä¸ªäººç›¸å…³ å…¶å®ƒ é“¶è¡Œå’Œå›½ä¼ç­‰å…»è€æ€§è´¨å•ä½å¯¹Javaéœ€æ±‚æ¯”è¾ƒå¤§ï¼ŒåæœŸèŒä¸šå‘å±•æœ‰æ›´å¤šé€‰æ‹© C++å²—ä½éœ€æ±‚ä¸»è¦æ˜¯å¤§å‚ï¼ŒåæœŸèŒä¸šå‘å±•è·³æ§½å¯é€‰è¾ƒå°‘ å¯¹å£å…¬å¸ é˜¿é‡Œã€ç¾å›¢ç­‰ è…¾è®¯ã€ç™¾åº¦ã€åä¸ºç­‰ ç›¸ä¿¡çœ‹åˆ°è¿™é‡Œçš„èªæ˜ä½ ï¼Œæ ¹æ®è‡ªå·±çš„æŠ€æœ¯å€¾å‘ã€æ„å‘å…¬å¸ç­‰å·²ç»æœ‰äº†å¤§æ¦‚çš„æ€è·¯ï¼š æƒ³æ›´å®¹æ˜“å»å¤§å‚ï¼Œåšä¸€äº›æ›´åº•å±‚ï¼ˆç½‘ç»œã€å­˜å‚¨ã€æ“ä½œç³»ç»Ÿã€å®‰å…¨æ–¹é¢ç­‰ï¼‰çš„äº‹æƒ…ï¼ŒC++è‡ªç„¶æ˜¯ä¸é”™çš„é€‰æ‹©ï¼› ä½†æ˜¯æœªæ¥è€ƒè™‘å»ä¸€äº›å…»è€å•ä½å…»è€ï¼Œå¯¹Webå¼€å‘ã€ç§»åŠ¨å¼€å‘ç­‰æ›´æ„Ÿå…´è¶£çš„è¯ï¼ŒJavaåº”è¯¥æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚ æ±‚èŒæ—¶é—´èŠ‚ç‚¹ æ•´ä¸ªå®ä¹ å’Œç§‹æ‹›ï¼Œç”±äºè‡ªå·±çš„æ‹–å»¶å’Œæ‡’æ•£ï¼Œæ‰€æœ‰çš„æ—¶é—´èŠ‚ç‚¹åŸºæœ¬éƒ½æ˜¯åœ¨DDLä¸Šåå¤æ¨ªè·³ã€‚å¦‚æœä¸æ˜¯è¿æ°”è¿˜ä¸é”™ï¼Œç°åœ¨è¯´ä¸å®šæ­£åœ¨å¯å®¤æŠ±ç€æµ…è“è‰²åºŠå•å“­æ³£ ğŸ˜­ ï¼Œç•™ä¸‹ä¸å­¦æ— æœ¯çš„æ³ªæ°´ã€‚ æ‰€ä»¥æ ¹æ®è‡ªå·±çš„ç»éªŒï¼Œæ•´ç†äº†ä¸€ä»½æˆ‘è®¤ä¸ºçš„å®Œç¾æ±‚èŒæ—¶é—´èŠ‚ç‚¹ï¼ŒåŒæ—¶ä¹Ÿæ•´ç†äº†ä¸€ä»½å·¥ä½œå°ä¸‘æ—¶é—´èŠ‚ç‚¹å®‰æ’ï¼Œä¾›å¯¹æ¯”å‚è€ƒã€‚ [æ³¨1]ï¼šå¹´ä»½ä»¥å½“å¹´åº”å±Šæ±‚èŒå¹´ä»½ä¸ºå‡†ã€‚ è‡ªå¾‹å¤§ä½¬ â›¹ å·¥ä½œå°ä¸‘ ğŸ˜¹ 1æœˆä»½ åˆ·å®ŒLeetcode-Top100ï¼Œå‡†å¤‡é¡¹ç›® ç© 2æœˆä»½ äºŒåˆ·LeetCodeï¼Œå¼€å§‹èƒŒè¯µå…«è‚¡ï¼Œä¼˜åŒ–é¡¹ç›® ç»§ç»­ç© 3æœˆä»½ å…«è‚¡åŸºæœ¬çƒ‚ç†Ÿï¼Œå¼€å§‹é¢è¯•ï¼ˆæ‰¾å®ä¹ ï¼‰å°è¯•é”‹èŠ’ ç„¦è™‘çš„ç© 4æœˆä»½ LeetCodeå’Œå…«è‚¡çƒ‚ç†Ÿï¼Œæ”¶è·ä¼—å¤šå¤§å‚å®ä¹ Offerï¼Œèµ¢æ¥å·¥ä½œå°ä¸‘ç¾¡æ…•çš„èµå¹ ç‰¹åˆ«ç„¦è™‘ï¼Œå¼€å§‹ä¸€è¾¹ç¾¡æ…•ä¸€è¾¹æŠ•ç®€å†ï¼Œé¢è¯•è¢«æ— æƒ…æš´æ‰“ 5æœˆä»½ å¼€å§‹ç¬¬ä¸€æ®µå¤§å‚å®ä¹  æåº¦ç„¦è™‘ï¼Œå¼€å§‹ç†¬å¤œå‡†å¤‡åˆ·é¢˜å’Œå…«è‚¡ï¼Œç»§ç»­é¢è¯• 6æœˆä»½ å·²å®ä¹ ä¸¤ä¸ªæœˆï¼ŒåŒæ—¶é¢è¯•æ”¶è·äº†ç¬¬äºŒä¸ªå¤§å‚Offerï¼Œæ³¢æ¾œä¸æƒŠ ç»ˆäºæ”¶è·Offerï¼Œç°ä»£èŒƒè¿›ä¸­ä¸¾ï¼Œå¥”èµ°ç›¸å‘Š 7æœˆä»½ å¼€å§‹ç¬¬äºŒæ®µå¤§å‚å®ä¹ ï¼Œå¼€å§‹æå‰æ‰¹ å®ä¹ ç¬¬ä¸€ä¸ªæœˆï¼Œä¸‹ç­å°±æ˜¯ç©ï¼Œæå‰æ‰¹é‚£æ˜¯ä¸ªå•¥ï¼Ÿ 8æœˆä»½ ç¬¬äºŒæ®µå¤§å‚å®ä¹ äºŒä¸ªæœˆï¼Œæå‰æ‰¹æ”¶è·æ ¡æ‹›Offerï¼ŒåŒæ—¶æ— æ„å¤–è½¬æ­£ å®ä¹ ä¸¤ä¸ªæœˆï¼Œç»§ç»­æ— è§†æå‰æ‰¹ï¼Œè¿æ°”å¥½ä¹Ÿè½¬æ­£äº† 9æœˆä»½ Offeræ”¶å‰²æœº+SSPæ”¶å‰²æœºç§°å·è¾¾æˆï¼Œç¾¡æ…•å¬åˆ°éº» åˆç©äº†åŠä¸ªæœˆï¼Œå¼€å§‹æŠ•ç®€å†ï¼Œæ¡äº†å‡ å®¶Offerï¼Œå½»åº•èººå¹³ 10æœˆä»½ å¼€å§‹å‡†å¤‡é€‰è°ƒ ç™½èœæ”¶å‰²æœºç§°å·è¾¾æˆï¼Œæœ€ç»ˆæ— å¥ˆé€‰ä¸€é¢—å¤§ç™½èœç»“æŸç§‹æ‹› å…³äºå®ä¹ ï¼šå¯ä»¥çœ‹åˆ°ï¼Œå·¥ä½œå°ä¸‘å¦‚æœä¸æ˜¯è¿æ°”å¥½è½¬æ­£ï¼Œç§‹æ‹›å‡­å€Ÿå®ä¹ ç»å†ï¼ˆå¦ä¸€æ–¹é¢ä¹Ÿè¯´æ˜äº†å®ä¹ çš„é‡è¦æ€§ï¼‰æ‹¿äº†å‡ ä¸ªOfferï¼Œæ•´ä¸ªæ±‚èŒè¿‡ç¨‹å¹¶ä¸ä¹è§‚ã€‚ å…³äºæå‰æ‰¹ ï¼šå®ä¹ çš„æ—¶å€™ä¸€å®šè¦å»å‡†å¤‡æå‰æ‰¹ï¼Œæå‰æ‰¹HCä¼—å¤šï¼ˆç‰¹åˆ«æ˜¯å¥½å²—ä½ï¼‰ï¼Œéš¾åº¦ä¹Ÿè¾ƒä½ï¼ˆäº²èº«æ„Ÿå—ï¼‰ ï¼Œæ‹¿åˆ°Offerçš„æ¦‚ç‡ç›¸æ¯”ç§‹æ‹›ä¼šå¤§å¾ˆå¤šã€‚ æ‰€ä»¥ï¼Œå¤§å®¶å°½é‡æ—©ç‚¹å……åˆ†å‡†å¤‡ï¼Œæ‰¾å·¥ä½œä¸è‡³äºé•¿æœŸå¤„äºç„¦è™‘çŠ¶æ€ã€‚æ‹¼è¿æ°”è‡ªç„¶ä¸å¦‚æ‹¼å®åŠ›ï¼Œå½“ç„¶ä¹Ÿè¦åŠ³é€¸ç»“åˆï¼Œæœ‰ç©ºé—²å¤šå’Œå¸ˆå…„æ‰“æ‰“LOLæ”¾æ¾ä¸‹ä¹Ÿæ˜¯å¾ˆæœ‰å¿…è¦çš„ ğŸ•¹ ï¼Œå“ˆå“ˆã€‚ ä¸€äº›æœ‰ç”¨çš„app &amp; ç½‘ç«™ æœªå¿…å…¨é¢ï¼Œä»…ä¾›å‚è€ƒã€‚ [æ³¨1]ï¼šå„å¤§å…¬å¸æ ¡æ‹›å®˜ç½‘ï¼Œæ¯”å¦‚ï¼šè…¾è®¯æ ¡å›­æ‹›è˜ ï¼Œæœ€å¥½å…ˆå»æå‰ä¸€æ¬¡æ€§æ³¨å†Œå¥½ç®€å†ã€‚ åº”ç”¨/ç½‘ç«™å ä½œç”¨ ç½‘ç«™ ç‰›å®¢ç½‘ æ‰¾å†…æ¨ã€çœ‹é¢ç»ã€æ±‚èŒäº¤æµç­‰ Leetcode åˆ·é¢˜ codeTop åˆ·é¢˜ è¶…çº§ç®€å† åˆ¶ä½œç®€å†çš„ä¸äºŒä¹‹é€‰ royhuangâ€™s blog æ¯›é‚è‡ªèï¼Œçœ‹çœ‹å…«è‚¡ github ç¥å¥‡çš„åœ°æ–¹ï¼Œå¤šåœ¨è¿™é‡Œæ‰¾å„ç§èµ„æºï¼šé¢ç»æ€»ç»“ã€é¡¹ç›®æ•™ç¨‹ç­‰ APP ç‰›å®¢ç½‘ åŒä¸Š è„‰è„‰ æ±‚èŒä¿¡æ¯äº¤æµï¼Œå›½å†…æœ€å¤§çš„èŒåœºäº¤æµAPP é—²é±¼ å„ç§æ•™å­¦è§†é¢‘è¯¾ç¨‹ï¼Œä¸å¦¨è¿™é‡Œå…ˆæœä¸€æœ ğŸ”¼ ä»¥ä¸Šå¤§æ¦‚å°±æ˜¯æˆ‘æ±‚èŒæ‰€ç”¨åˆ°çš„ï¼Œå…¨éƒ¨ç½‘ç«™æˆ–APPï¼Œä¸ç®—å¤šä½†åŸºæœ¬æœ‰ç‚¹ç”¨ã€‚ å†™åœ¨æœ€å ç¢ç¢å¿µåˆå†™äº†å°å‡ Kå­—äº†ï¼Œ9æœˆåº•ç»“æŸç§‹æ‹›æ—¶ï¼Œä¾¿æƒ³ç€æŠŠè‡ªå·±æ±‚èŒçš„ç¬”è®°æ€»ç»“&amp;ç»å†å¤ç›˜ã€‚ä¸çŸ¥ä¸è§‰åˆæ‹–å»¶/ç©äº†ä¸¤ä¸ªæœˆï¼Œè¿™ä¸ªæ˜ŸæœŸæŠŠç½‘ç«™æå¥½äº†ä¹Ÿæ­£å¥½é¡ºæ‰‹å¼€å§‹æ•´ç†ã€‚å†™åˆ°è¿™é‡Œï¼Œç»ˆäºæœ‰äº†åˆæ­¥äº†ç»“ï¼Œæ„Ÿè§‰åƒæ˜¯Deä¸€ä¸ªå¤§BUG ğŸ› ï¼Œå¿ƒæƒ…éƒ½èˆ’ç•…äº†èµ·æ¥ã€‚ åé¢è¿˜ä¼šç»§ç»­æ›´æ–°æ²¡å¡«å¥½çš„å‘ï¼Œe.g. æ€ä¹ˆå‡†å¤‡ä¸€ä¸ªç§‹æ‹›é¡¹ç›®ã€‚ä¹Ÿä¼šå¼€å§‹è®°å½•ä¸€äº›C++éŸ³è§†é¢‘ç›¸å…³æ–¹å‘åšæ–‡ï¼Œå’Œä¸€äº›ç”Ÿæ´»è®°å½•ï¼ˆè™½ç„¶å¤§éƒ¨åˆ†æ—¶é—´éƒ½æ˜¯æ— èŠåœ°å¾…åœ¨å¯å®¤æˆ–å®¶é‡Œï¼‰ã€‚å½“ç„¶ï¼Œå¦‚æœè¿˜æœ‰ä»€ä¹ˆæƒ³è¦å’Œæˆ‘è¯´çš„ï¼Œå¯ä»¥åœ¨ä¸‹é¢ç•™è¨€ã€‚ æœ€åï¼Œç»™ä¸Šæˆ‘æœ€è¯šæŒšçš„ç¥ç¦ï¼š â€œ æ˜å¹´è¯·åŠ¡å¿…å€’æŒ‚æˆ‘ï¼Œè°¢è°¢ã€‚â€ æ›´æ–°è®°å½• 2021-11-29 ï¼šæ›´æ–°æ–‡æ¡£ æ›´æ–°æ ¡æ‹›å¿ƒå¾—è®°å½• &amp; é‡æ–°åˆ†ç±»æ•´ç†ç¬”è®°æ”¯æŒè¯„è®ºç³»ç»Ÿ 2021-11-24 ï¼šç¬¬ä¸€æ¬¡æ›´æ–° ä¸Šä¼ æ‰€æœ‰ç¬”è®°å¹¶å‘å¸ƒ 1.Java Guideï¼šhttps://github.com/Snailclimb/JavaGuide â†©2.é˜¿ç§€C++é¢è¯•ç¬”è®°ï¼šhttps://github.com/forthespada/InterviewGuide â†©3.ç‰›å®¢ç½‘é¢ç»ï¼šhttps://www.nowcoder.com/interview/center â†©","categories":[{"name":"æ ¡æ‹›ç¬”è®°","slug":"æ ¡æ‹›ç¬”è®°","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"æ ¡æ‹›","slug":"æ ¡æ‹›","permalink":"https://hwh.zone/tags/%E6%A0%A1%E6%8B%9B/"},{"name":"ç›®å½•","slug":"ç›®å½•","permalink":"https://hwh.zone/tags/%E7%9B%AE%E5%BD%95/"},{"name":"åç«¯","slug":"åç«¯","permalink":"https://hwh.zone/tags/%E5%90%8E%E7%AB%AF/"}]},{"title":"GitåŸºç¡€ç¬”è®°ï¼ˆåˆæ­¥æ•´ç†ï¼‰","slug":"GitåŸºç¡€ç¬”è®°","date":"2021-11-25T09:17:16.561Z","updated":"2022-01-02T12:12:14.051Z","comments":true,"path":"p/43848/","link":"","permalink":"https://hwh.zone/p/43848/","excerpt":"","text":"ä¸€ã€Git ç®€ä»‹ 1.1 å®‰è£… å®‰è£…åœ°å€ å®˜ç½‘ä¸‹è½½ï¼šGitå®˜ç½‘ä¸‹è½½ è®¾ç½®ç”¨æˆ·ä¿¡æ¯ ä¸»è¦æ˜¯è®¾ç½® ï¼š åå­— &amp; Email åœ°å€ã€‚ 12$ git config --global user.name &quot;hwh&quot;$ git config --global user.email &quot;380141202@qq.com&quot; git configå‘½ä»¤çš„--globalå‚æ•°ï¼Œç”¨äº†è¿™ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºä½ è¿™å°æœºå™¨ä¸Šæ‰€æœ‰çš„Gitä»“åº“éƒ½ä¼šä½¿ç”¨è¿™ä¸ªé…ç½®ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å¯¹æŸä¸ªä»“åº“æŒ‡å®šä¸åŒçš„ç”¨æˆ·åå’ŒEmailåœ°å€ã€‚ 1.2 åˆ›å»ºç‰ˆæœ¬åº“ åˆ›å»ºä»“åº“ â€‹ windowså¯ä»¥ç›´æ¥åœ¨æ¡Œé¢åˆ›å»ºä¸€ä¸ªåä¸ºï¼š&quot;Git&quot;æ–‡ä»¶å¤¹ï¼Œä¸‹æœ‰â€œtestâ€å­æ–‡ä»¶å¤¹ï¼Œå­æ–‡ä»¶å¤¹å«æœ‰ä¸€ä¸ªåä¸ºâ€œreadme.mdâ€æ–‡ä»¶ã€‚ â€‹ ç„¶ååˆ‡æ¢åˆ°å…¶ç›®å½•ä¸‹ï¼ˆè¿™é‡Œåˆ‡æ¢çš„æ˜¯&quot;Git&quot;æ–‡ä»¶å¤¹ï¼Œè€Œéâ€œtestâ€å­æ–‡ä»¶å¤¹ï¼‰ 123$ cd Git/$ pwd/c/Users/86151/Desktop/Git åˆæ­¥æäº¤è¿‡ç¨‹ åˆå§‹åŒ–ä»“åº“ 12$ git initInitialized empty Git repository in /Users/michael/learngit/.git/ ä¿®æ”¹ä»“åº“æ–‡ä»¶ å°†â€œtestâ€å­æ–‡ä»¶å¤¹ï¼Œä¸‹readme.mdæ–‡ä»¶ï¼Œå¢åŠ å†…å®¹ã€‚ æ·»åŠ æ–‡ä»¶åˆ°ä»“åº“ æ³¨æ„ï¼šå¯ä»¥åŒæ—¶ ä¸€æ¬¡æ·»åŠ å¤šä¸ªæ–‡ä»¶åˆ°ä»“åº“ï¼ 1$ git add test/readme.md æäº¤æ–‡ä»¶ å¯ä»¥å¢åŠ må‚æ•°ï¼šæ·»åŠ ä¿®æ”¹ä¿¡æ¯ 1$ git commit -m &#x27;ç¬¬ä¸€æ¬¡æ–‡ä»¶æ”¹åŠ¨&#x27; äºŒã€æ—¶å…‰æœºç©¿æ¢­ 2.0 æ›´å¤šæ§åˆ¶ä¿®æ”¹æäº¤ æ¦‚è§ˆ è¦éšæ—¶æŒæ¡å·¥ä½œåŒºçš„çŠ¶æ€ï¼Œä½¿ç”¨git statuså‘½ä»¤ã€‚ å¦‚æœgit statuså‘Šè¯‰ä½ æœ‰æ–‡ä»¶è¢«ä¿®æ”¹è¿‡ï¼Œç”¨git diff &lt;filepath&gt;å¯ä»¥æŸ¥çœ‹ä¿®æ”¹å†…å®¹ã€‚ å®æ“ å†æ¬¡ä¿®æ”¹æ–‡ä»¶ å¯ä»¥å…ˆæ¸…é™¤åŸæ–‡ä»¶ï¼Œå†å¢æ·»readme.mdæ–‡æ¡£å†…å®¹ ï¼š 123â€œi am huitailang , here is my first test word .â€œ â€œè¿™æ˜¯æˆ‘ç¬¬äºŒæ¬¡ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶â€ ä½¿ç”¨ git statusï¼ŒæŸ¥çœ‹çŠ¶æ€å‘ç°readme.mdæ–‡ä»¶å·²è¢«ä¿®æ”¹ä½†æœªæäº¤ï¼ˆno changesï¼‰ 1$ git status æŸ¥çœ‹å…·ä½“ä¿®æ”¹äº†ä»€ä¹ˆå†…å®¹ git diff &lt;filepath&gt;æŸ¥çœ‹æ–‡ä»¶å…·ä½“ä¿®æ”¹ï¼Œ 1$ git diff test/readme.md æ·»åŠ ä»“åº“ 1$ git add test/readme.md åŒæ—¶å¯ç”¨ git statusï¼ŒæŸ¥çœ‹æ­¤æ—¶çŠ¶æ€ä¼šæ˜¾ç¤ºï¼Œreadme.mdå°†è¦è¢«æäº¤ä¿®æ”¹ã€‚ æäº¤ä»“åº“ 1$ git commit -m &quot;è¿™æ˜¯æˆ‘ç¬¬äºŒæ¬¡ä¿®æ”¹&quot; â€‹ å†ç”¨ git statusï¼ŒæŸ¥çœ‹ä»“åº“å½“å‰çŠ¶æ€ï¼Œæ˜¾ç¤ºæ²¡æœ‰éœ€è¦æäº¤çš„ä¿®æ”¹ï¼Œè€Œä¸”å·¥ä½œç›®å½•æ˜¯å¹²å‡€çš„ï¼ˆworking tree cleanï¼‰ã€‚ 2.1 ç‰ˆæœ¬å›é€€ æ¦‚è§ˆ HEADæŒ‡å‘çš„ç‰ˆæœ¬å°±æ˜¯å½“å‰ç‰ˆæœ¬ï¼Œå› æ­¤ï¼ŒGitå…è®¸æˆ‘ä»¬åœ¨ç‰ˆæœ¬çš„å†å²ä¹‹é—´ç©¿æ¢­ï¼Œä½¿ç”¨å‘½ä»¤git reset --hard commit_idã€‚ ç©¿æ¢­å‰ï¼Œç”¨git logå¯ä»¥æŸ¥çœ‹æäº¤å†å²ï¼Œä»¥ä¾¿ç¡®å®šè¦å›é€€åˆ°å“ªä¸ªç‰ˆæœ¬ã€‚ è¦é‡è¿”æœªæ¥ï¼Œç”¨git reflogæŸ¥çœ‹å‘½ä»¤å†å²ï¼Œä»¥ä¾¿ç¡®å®šè¦å›åˆ°æœªæ¥çš„å“ªä¸ªç‰ˆæœ¬ å®æ“ Næ¬¡ä¿®æ”¹æ–‡ä»¶ å…ˆå¤šä¿®æ”¹å‡ æ¬¡æ–‡ä»¶æäº¤ï¼Œå¾—åˆ°å¤šä¸ªç‰ˆæœ¬ã€‚ ç‰ˆæœ¬å›é€€ æŸ¥çœ‹ç‰ˆæœ¬å†å² git log æŸ¥çœ‹å½“å‰ç‰ˆæœ¬å’Œä¹‹å‰çš„å†å²ï¼Œgit relog æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬å†å² 1$ git log # å¯ä»¥åŠ ä¸Š --pretty=oneline å‚æ•°ä½¿æ˜¾ç¤ºæ›´ç®€æ´ å›é€€ç‰ˆæœ¬ git reset --hard &lt;æŒ‡å®šç‰ˆæœ¬&gt;ï¼šå¯ç”¨äºå›åˆ°æŒ‡å®šç‰ˆæœ¬ï¼Œ&lt;æŒ‡å®šç‰ˆæœ¬&gt;æ–¹å¼ï¼š HEAD ^ HEAD ^ å›åˆ°ä¸Šä¸ªç‰ˆæœ¬ï¼›HEAD ^ ^ å›åˆ°ä¸Šä¸Š ä¸ªç‰ˆæœ¬ï¼Œä¾æ­¤ç±»æ¨ã€‚ 1$ git reset --hard HEAD^^ # å›åˆ°ä¸Šä¸Šä¸ªç‰ˆæœ¬ HEAD~&lt;æ•°å­—&gt; å›åˆ°å‰&lt;æ•°å­—&gt;ç‰ˆæœ¬ã€‚å¦‚HEAD~100ï¼Œå›åˆ°å‰100ä¸ªç‰ˆæœ¬ã€‚ : commit ID ä¸ç”¨æ‰“å…¨ï¼Œä¸€èˆ¬æ‰“å‰é¢å‡ ä¸ªå­—ç¬¦å³å¯ã€‚å¦‚ï¼Œå¦‚æœå›é€€ç¬¬2ç‰ˆæœ¬ï¼Œgit logï¼Œåªèƒ½çœ‹åˆ°ç¬¬2ç‰ˆæœ¬åŠä¹‹å‰çš„ç‰ˆæœ¬ä¿¡æ¯ã€‚é‚£ä¹ˆå¯ç”¨ git reflogæŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬IDï¼Œç„¶åæŒ‡å®šIDï¼Œå›åˆ°ç¬¬4ç‰ˆæœ¬ã€‚ 1$ git reflog 12$ git reset --hard 3928d # å†æ¬¡å›åˆ°ç¬¬å››æ¬¡ä¿®æ”¹ç‰ˆæœ¬HEAD is now at 3928d9f ç¬¬å››æ¬¡ä¿®æ”¹ 2.2 å·¥ä½œåŒºå’Œæš‚å­˜åŒº æ¦‚è§ˆ ç†è§£å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„åŒºåˆ«ï¼Œæš‚å­˜åŒºæ˜¯ç‰ˆæœ¬åº“çš„ä¸€ä¸ªå­é›† æ¯”è¾ƒæ–‡ä»¶æœ‰ä¸‰ä¸ªä¸åŒå‘½ä»¤ git diff git diff --cached git diff --HEAD å·¥ä½œåŒº å·¥ä½œåŒºå°±æ˜¯æˆ‘ä»¬èƒ½çœ‹åˆ°çš„ç›®å½•ï¼Œå¦‚æˆ‘å‰é¢åˆ›å»ºçš„Gitæ–‡ä»¶å¤¹å°±æ˜¯ä¸€ä¸ªå·¥ä½œåŒº ç‰ˆæœ¬åº“ &amp; æš‚å­˜åŒº å·¥ä½œåŒºæœ‰ä¸€ä¸ªéšè—ç›®å½•.gitï¼Œä¸å±äºå·¥ä½œåŒºè€Œæ˜¯Gitç‰ˆæœ¬åº“ï¼Œç‰ˆæœ¬åº“åŒ…å« Gitè‡ªåŠ¨åˆ›å»ºçš„åˆ†æ”¯master&amp;æŒ‡å‘masterçš„æŒ‡é’ˆHEAD stageï¼ˆæˆ–å«indexï¼‰æš‚å­˜åŒº æš‚å­˜åŒºå·¥ä½œ git add è¿™ä¸€æ­¥å®é™…ä¸Šå°±æ˜¯æŠŠæ–‡ä»¶ä¿®æ”¹ï¼ˆå·²å­˜åœ¨è¢«ä¿®æ”¹ OR æ–°æ–‡ä»¶ï¼‰æ·»åŠ åˆ°æš‚å­˜åŒºï¼Œå¯ä»¥addå¤šä¸ªæ–‡ä»¶ï¼Œä¸€æ¬¡è¢«æäº¤ã€‚ git commit æŠŠæš‚å­˜åŒºçš„æ‰€æœ‰å†…å®¹æäº¤åˆ°å½“å‰åˆ†æ”¯ã€‚ ä½†æ˜¯æ³¨æ„ï¼Œgit commit åæš‚å­˜åŒºæ–‡ä»¶ä¸ä¼šæ¶ˆå¤±ï¼Œå§‹ç»ˆæ˜¯ä¸Šä¸€æ¬¡git addä¹‹åæ–‡ä»¶ï¼ git diff &amp;git diff --cached &amp;git diff HEAD git diff æ¯”è¾ƒçš„æ˜¯å·¥ä½œåŒºæ–‡ä»¶å’Œæš‚å­˜åŒºæ–‡ä»¶åŒºåˆ«ã€‚ git diff --cached æ¯”è¾ƒçš„æ˜¯æš‚å­˜åŒºæ–‡ä»¶å’Œä»“åº“åˆ†æ”¯æ–‡ä»¶åŒºåˆ«ã€‚ git diff --HEAD æ¯”è¾ƒçš„æ˜¯å·¥ä½œåŒºæ–‡ä»¶å’Œä»“åº“åˆ†æ”¯æœ€æ–°ç‰ˆæœ¬åŒºåˆ«ã€‚ æš‚å­˜åŒºï¼šå°±æ˜¯ .git / index è¿™ä¸ªæ–‡ä»¶ï¼Œgit add ä¼šæŠŠå·¥ä½œåŒºä¿®æ”¹çš„æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒºï¼Œå³ä½¿ git commit åä¹Ÿä¸ä¼šç©ºï¼Œå§‹ç»ˆä¿å­˜æœ€è¿‘ä¸€æ¬¡ git addåçš„å†…å®¹ã€‚ ä»“åº“åˆ†æ”¯ï¼šå§‹ç»ˆä¿å­˜ä¸Šæ¬¡git commit å†…å®¹ã€‚ 2.3 ç®¡ç†ä¿®æ”¹ æ¦‚è§ˆ gitç®¡ç†çš„æ˜¯ä¿®æ”¹ï¼Œè€Œéæ–‡ä»¶ å®æ“ æ–°å»ºä¸€ä¸ªæ–‡ä»¶ readme1.txtï¼Œç„¶åä¾æ¬¡ï¼š ç¬¬ä¸€æ¬¡ä¿®æ”¹ -&gt; git add -&gt; ç¬¬äºŒæ¬¡ä¿®æ”¹ -&gt; git commit â€‹ ç”¨git diff HEAD test/readme1.txt æ¯”è¾ƒå·¥ä½œåŒºå’Œç‰ˆæœ¬åˆ†æ”¯ï¼Œä¼šå‘ç°ç¬¬äºŒæ¬¡ä¿®æ”¹æ²¡æœ‰è¢«æäº¤ï¼Œè¯´æ˜gitåªæŠŠgit addåæš‚å­˜åŒºå†…å®¹æäº¤äº†ï¼Œè€Œä¸ç®¡ç†æ–‡ä»¶ã€‚ å¦‚æœè¦æŠŠç¬¬äºŒæ¬¡ä¿®æ”¹ä¹Ÿæäº¤äº†ï¼Œéœ€è¦è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š ç¬¬ä¸€æ¬¡ä¿®æ”¹ -&gt; git add -&gt; ç¬¬äºŒæ¬¡ä¿®æ”¹-&gt; git add -&gt; git commit 2.4 æ’¤é”€ä¿®æ”¹ æ¦‚è§ˆ åœºæ™¯1ï¼šæ”¹ä¹±äº†å·¥ä½œåŒºæŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œæƒ³ç›´æ¥ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹æ—¶ ç”¨å‘½ä»¤git checkout -- fileã€‚ åœºæ™¯2ï¼šä¸ä½†æ”¹ä¹±äº†å·¥ä½œåŒºæŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œè¿˜æ·»åŠ åˆ°äº†æš‚å­˜åŒºæ—¶ï¼Œæƒ³ä¸¢å¼ƒä¿®æ”¹ ç¬¬ä¸€æ­¥ç”¨å‘½ä»¤git reset HEAD &lt;file&gt;ï¼Œå°±å›åˆ°äº†åœºæ™¯1 ç¬¬äºŒæ­¥æŒ‰åœºæ™¯1æ“ä½œã€‚ åœºæ™¯3ï¼šå·²ç»æäº¤äº†ä¸åˆé€‚çš„ä¿®æ”¹åˆ°ç‰ˆæœ¬åº“æ—¶ï¼Œæƒ³è¦æ’¤é”€æœ¬æ¬¡æäº¤ å‚è€ƒç‰ˆæœ¬å›é€€ä¸€èŠ‚ï¼Œä¸è¿‡å‰ææ˜¯æ²¡æœ‰æ¨é€åˆ°è¿œç¨‹åº“ã€‚ å®æ“ åœºæ™¯1 ä¸å°å¿ƒåœ¨æ–‡ä»¶é‡Œå¢åŠ äº†ä¸€å¥è¯ï¼š åˆ˜å©·æ˜¯å‚»å­ ç”¨ git checkoutå‘½ä»¤æ’¤å›å·¥ä½œåŒºä¿®æ”¹ï¼Œæœ‰ä¸¤ç§æƒ…å†µ readme.txtä¿®æ”¹ä½†æœªè¢«æ”¾åˆ°æš‚å­˜åŒºï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°å’Œç‰ˆæœ¬åº“ä¸€æ ·çŠ¶æ€ï¼› readme.txtä¿®æ”¹ä¸”æ·»åŠ åˆ°æš‚å­˜åŒºåï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°æ·»åŠ åˆ°æš‚å­˜åŒºåçš„çŠ¶æ€ã€‚ âš ï¸ æ€»ä¹‹ï¼Œå°±æ˜¯è®©æ–‡ä»¶å›åˆ°æœ€è¿‘ä¸€æ¬¡git commitæˆ–git addæ—¶çš„çŠ¶æ€ã€‚ ğŸ•µæ‰€ä»¥ï¼Œä¹Ÿå¯ç”¨äºæ¢å¤è¯¯åˆ çš„æ–‡ä»¶ï¼ˆæ’¤é”€å·¥ä½œåŒºåˆ é™¤æ“ä½œï¼‰ 1git checkout -- test/readme.md åœºæ™¯2 ä¸å°å¿ƒåœ¨æ–‡ä»¶é‡Œå¢åŠ äº†ä¸€å¥è¯ï¼Œè€Œä¸”å·²ç»git addæäº¤åˆ°æš‚å­˜åŒº åˆ˜å©·æ˜¯å‚»å­å“ˆå“ˆå“ˆ å‘½ä»¤git reset ä¸ä»…å¯ä»¥å›é€€ç‰ˆæœ¬ è€Œä¸”å¯ä»¥æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹æ’¤é”€ã€‚ âš ï¸ä¹‹æ‰€ä»¥ä¸ç›´æ¥ git checkout æ˜¯å› ä¸ºæ­¤æ—¶ä¼šç”¨æš‚å­˜åŒºå†…å®¹è¦†ç›–å·¥ä½œåŒºï¼Œæ˜¾ç„¶ä¸è¡Œã€‚ 1git reset HEAD test/readme.md # HEADè¡¨ç¤ºæœ€æ–°ç‰ˆæœ¬ ç„¶åæ­¤æ—¶å†ç”¨git checkout ï¼Œæš‚å­˜åŒºå†…å®¹è¦†ç›–å·¥ä½œåŒº 1git checkout -- test/readme.md å†æ¬¡æŸ¥çœ‹æ–‡ä»¶å‘ç°ï¼Œâ€˜â€™åˆ˜å©·æ˜¯å‚»å­å“ˆå“ˆå“ˆâ€˜â€™ çš„èƒ¡è¯å·²ç»è¢«æ²¡äº†ï¼Œæš‚å­˜åŒºä¹Ÿæ²¡äº†ã€‚ åœºæ™¯3 åˆè¯´èƒ¡è¯ï¼Œä¸ä½† git add ä¸”git commitï¼ˆæš‚å­˜åŒºå’Œç‰ˆæœ¬åº“HEADéƒ½æ˜¯ä¿®æ”¹åç‰ˆæœ¬ï¼‰ åˆ˜å©·æ˜¯å‚»å­å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ è¿™ä¸ªæ—¶å€™åªæœ‰å›é€€ç‰ˆæœ¬äº† 1$ git reflog # æŸ¥çœ‹ç‰ˆæœ¬å· 12$ git reset --hard 3928HEAD is now at 3928d9f ç¬¬å››æ¬¡ä¿®æ”¹ 2.5 åˆ é™¤æ–‡ä»¶ rm åˆ é™¤ åŸç† rm åˆ é™¤æ–‡ä»¶ï¼Œåªç›¸å½“äºåˆ é™¤äº† å·¥ä½œåŒºæ–‡ä»¶ï¼Œå¦‚æœè¦æ¢å¤æ–‡ä»¶æ’¤é”€å·¥ä½œåŒºä¿®æ”¹å³å¯ã€‚ 1rm test/readme.md æ¢å¤ ç”¨git checkout -- &lt;file&gt;ï¼Œå®ƒä¼šç”¨æœ€æ–°ç‰ˆæœ¬åº“æ–‡ä»¶ï¼ˆå¦‚æœå·²ç»git add ç”¨æœ€æ–°æš‚å­˜åŒºå†…å®¹ï¼Œè§å‰ï¼‰è¦†ç›–å·¥ä½œåŒºæ–‡ä»¶ï¼Œåˆ™ç›¸å½“äºæ’¤é”€å·¥ä½œåŒºä¿®æ”¹ 1git checkout -- test/readme.md git rm åˆ é™¤ åŸç† git rm åˆ é™¤æ–‡ä»¶ï¼Œä¸ä½†ç›¸å½“äºåˆ é™¤å·¥ä½œåŒºæ–‡ä»¶ &amp; è€Œä¸”git addæ·»åŠ åˆ°æš‚å­˜åŒºã€‚ æ‰€ä»¥æ­¤æ—¶ç›´æ¥git checkout æ˜¯ç”¨æš‚å­˜åŒºå†…å®¹è¦†ç›– å·¥ä½œåŒºï¼Œæ˜¾ç„¶æ˜¯æ²¡ç”¨çš„ã€‚ æ¢å¤ å…ˆæ¢å¤æš‚å­˜åŒº 1git reset HEAD test/readme.md # HEADè¡¨ç¤ºæœ€æ–°ç‰ˆæœ¬ å†ç”¨æš‚å­˜åŒºè¦†ç›–å·¥ä½œåŒº 1git checkout -- test/readme.md å½»åº•åˆ é™¤ å¦‚å‰æ‰€è¿°ï¼Œgit rm å·²ç»åˆ é™¤äº† â‘ å·¥ä½œåŒºæ–‡ä»¶ â‘¡ æ·»åŠ åˆ°æš‚å­˜åŒºï¼Œé‚£ä¹ˆæ­¤æ—¶åªéœ€è¦ 1git commit --m &#x27;å½»åº•åˆ é™¤&#x27; # å°†â‘¢ç‰ˆæœ¬åº“å†…å®¹ä¹Ÿä¿®æ”¹ é‚£ä¹ˆæ–‡ä»¶å°±ä¼šä»å·¥ä½œåŒºã€æš‚å­˜åŒºã€ç‰ˆæœ¬åº“å…¨éƒ¨åˆ é™¤ã€‚ å½»åº•åˆ é™¤æ¢å¤ å¦‚æœå·²ç»commitï¼Œé‚£ä¹ˆåªèƒ½git resetå›é€€ç‰ˆæœ¬ 12$ git reset --hard 3928HEAD is now at 3928d9f ç¬¬å››æ¬¡ä¿®æ”¹ ä¸‰ã€è¿œç¨‹ä»“åº“ 3.1 æ·»åŠ è¿œç¨‹åº“ä¸Šä¼ æœ¬åœ°æ–‡ä»¶ ä»¥ä¸‹æ“ä½œåŸºäºé»˜è®¤ä½  åˆ›å»ºå¥½ github è´¦å· &amp; åˆ›å»ºå¥½ä¸€ä¸ªä»“åº“ è®¾ç½®å¥½æœ¬åœ°ssh -key è€Œä¸”å·²ç»åŒæ—¶åœ¨githubç½‘é¡µæœåŠ¡ç«¯è´¦å·è®¾ç½®é‡Œæ·»åŠ  ssh -key æ·»åŠ ç”¨æˆ·ä¿¡æ¯ 12$ git config --global user.name &quot;hwh&quot;$ git config --global user.email &quot;380141202@qq.com&quot; åˆå§‹åŒ–æœ¬åœ°ä»“åº“ å¦‚æœæœ¬åœ°ä»“åº“ä»æœªè¢«åˆå§‹åŒ–æ‰éœ€è¦ï¼Œåˆå§‹åŒ–ä¼šåˆ›å»ºä¸€ä¸ªéšè—çš„ .git æ–‡ä»¶ç®¡ç†ç‰ˆæœ¬ã€‚ cdåˆ‡æ¢ + git init cdå‘½ä»¤åˆ‡æ¢åˆ°åæœ¬åœ°ä»“åº“ï¼› git init åˆå§‹åŒ–æœ¬åœ°ä»“åº“ï¼Œä¼šä¸ºä½ åˆ›å»ºä¸€ä¸ª .gitæ–‡ä»¶ï¼Œå·²ç»åˆå§‹åŒ–ä¸ç”¨ã€‚ æ‰‹åŠ¨ bash âš ï¸ å¾ˆå¥‡æ€ªçš„æ˜¯ï¼Œè¿™æ · git add . --&gt; git commit --&gt; git pushåï¼Œä¼šæŠŠæ•´ä¸ªçˆ¶æ–‡ä»¶å¤¹æ¨é€ä¸Šå»ã€‚ æ¯”å¦‚ï¼šåœ°å€ TEST æ–‡ä»¶å¤¹ä¸‹æœ‰ README.md ï¼Œæ¨é€ågithubä¸Šæ˜¾ç¤ºçš„ TESTæ–‡ä»¶å¤¹ï¼Œè€Œä¸æ˜¯æˆ‘æƒ³çš„README.mdæ–‡ä»¶ã€‚ å³å‡»æœ¬åœ°ä»“åº“ï¼Œé€‰æ‹©Git Bash here æŠŠæœ¬åœ°ä»“åº“æ·»åŠ åˆ°ç‰ˆæœ¬åº“ 12$ git add . # add . æäº¤æ‰€æœ‰æ–°å»ºã€ä¿®æ”¹æ–‡ä»¶$ git commit -m &#x27;ç¬¬ä¸€æ¬¡æ·»åŠ æœ¬åœ°ä»“åº“åˆ°ç‰ˆæœ¬åº“&#x27; æœ¬åœ°ä»“åº“å…³è”è¿œç¨‹åº“ git remote add &lt;è¿œç¨‹åº“åè®¾ç½®&gt; &lt;è¿œç¨‹ä»“åº“åœ°å€&gt; æ˜¾ç„¶è¿™é‡ŒæŠŠè¿œç¨‹ä»“åº“åœ°å€è®¾ç½®ä¸º originã€‚ 1$ git remote add origin git@github.com:huangwanghuiYY/gitTest.git æ¨é€åˆ°è¿œç¨‹åº“ ä¸‹é¢ä»£ç è¡¨ç¤ºï¼šå°†æœ¬åœ°masteråˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ä»“åº“originã€‚ 1$ git push -u origin master # ç¬¬ä¸€æ¬¡æ¨é€å¸¦ -u å‚æ•° -ué€‰é¡¹æŒ‡å®šä¸€ä¸ªé»˜è®¤ä¸»æœºï¼Œè¿™æ ·åé¢å°±å¯ä»¥ä¸åŠ ä»»ä½•å‚æ•°ä½¿ç”¨git pushã€‚ 1$ git push origin master 3.2 ä»è¿œç¨‹åº“å…‹éš† â€‹ å½“æˆ‘ä»¬æƒ³å¤šäººåä½œæ—¶ä¼šç”¨åˆ°å…‹éš†ã€‚æ¯”å¦‚æœ‰ä¸€ä¸ªä¸é”™çš„å¼€æºé¡¹ç›®ï¼Œä½ å¯ä»¥å…‹éš†åˆ°æœ¬åœ°ä»“åº“è¿›è¡Œä¿®æ”¹ç­‰ã€‚ ç¡®å®šè¦å…‹éš†çš„ä»“åº“ æ¯”å¦‚æˆ‘çš„XSurveyé¡¹ç›®ã€‚ git clone è¿›è¡Œå…‹éš† å…‹éš†ä¼šåœ¨å½“å‰æ–‡ä»¶å¤¹åˆ›å»ºå…‹éš†çš„ä»“åº“ï¼Œå…‹éš†ä»“åº“ä»¥XSueryä¸ºåï¼Œä¸‹å«é¡¹ç›®æ–‡ä»¶ã€‚ 1$ git clone git@github.com:huangwanghuiYY/XSurvey.git å››ã€åˆ†æ”¯ç®¡ç† 4.1 åˆ›å»ºå’Œåˆå¹¶åˆ†æ”¯ è¿™ä¸€èŠ‚ï¼Œæ¶‰åŠå¤§é‡å›¾å½¢ï¼Œå»–é›ªå³°æ•™ç¨‹ è®²çš„å¾ˆå¥½ï¼Œè¿™é‡Œå°½é‡ç²¾ç®€è®°å½•å¿ƒå¾—ã€‚ æ¦‚è¿° æŸ¥çœ‹åˆ†æ”¯ï¼šgit branch åˆ›å»ºåˆ†æ”¯ï¼šgit branch &lt;name&gt; åˆ‡æ¢åˆ†æ”¯ï¼šgit checkout &lt;name&gt; åˆ›å»º+åˆ‡æ¢åˆ†æ”¯ï¼šgit checkout -b &lt;name&gt; åˆå¹¶æŸåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ï¼šgit merge &lt;name&gt; åˆ é™¤åˆ†æ”¯ï¼šgit branch -d &lt;name&gt; å®æ“è®°å½• ä¸»åˆ†æ”¯ â€‹ masteråˆ†æ”¯ä¹Ÿæ˜¯ä¸€æ¡æ—¶é—´çº¿ï¼Œæ¯æ¬¡æäº¤ master åˆ†æ”¯éƒ½ä¼šå‘å‰ç§»åŠ¨ä¸€æ­¥ï¼Œéšç€ä¸æ–­æäº¤ masteråˆ†æ”¯ä¹Ÿå°±è¶Šé•¿ã€‚ âš ï¸ä¸‹å›¾æœ‰ä¸¤ä¸ªæŒ‡é’ˆï¼šHEAD &amp; master ï¼ŒHEADä¸¥æ ¼æ¥è¯´ä¸æ˜¯æŒ‡å‘æäº¤ã€‚HEADæŒ‡å‘masterï¼ŒmasteræŒ‡å‘æœ€æ–°åˆ†æ”¯ã€‚ æ–°åˆ†æ”¯åˆ›å»ºåˆ‡æ¢ åˆ›å»ºæ–°åˆ†æ”¯ 1234$ git branch dev1 # æ–°å»ºåˆ†æ”¯$ git branch # æŸ¥çœ‹åˆ†æ”¯ dev1* master # * è¡¨ç¤ºå½“å‰æ‰€åœ¨çš„åˆ†æ”¯ï¼ˆmasterï¼‰ â€‹ å½“æˆ‘ä»¬åˆ›å»ºæ–°çš„åˆ†æ”¯ï¼Œä¾‹å¦‚devæ—¶ï¼ŒGitæ–°å»ºäº†ä¸€ä¸ªæŒ‡é’ˆå«devï¼ŒæŒ‡å‘masteræŒ‡å‘çš„æäº¤ã€‚ åˆ‡æ¢åˆ°å½“å‰åˆ†æ”¯ 1$ git checkout -b dev1 å¦‚æœcheckout åŠ ä¸Š -bå‚æ•°ï¼Œè¡¨ç¤º åˆ›å»º &amp; åˆ‡æ¢ä¸¤ä¸ªæ“ä½œ 1$ git checkout dev1 åˆ‡æ¢åˆ°å½“å‰åˆ†æ”¯ï¼Œå…¶å®æŠŠheadæŒ‡å‘masteræ‰€æŒ‡å‘çš„æäº¤ã€‚ âš ï¸è¿™å¼ å›¾ï¼Œè¿˜è¡¨ç¤ºdevåˆ†æ”¯è¿˜æ‰§è¡Œäº†ä¸€æ¬¡æäº¤ã€‚ åˆå¹¶åˆ†æ”¯ 12$ git checkout master # å…ˆåˆ‡å›masteråˆ†æ”¯ï¼ˆå³HEADæŒ‡å‘masterï¼‰$ git merge dev1 # è¡¨ç¤ºå½“å‰åˆ†æ”¯ï¼ˆmasterï¼‰åˆå¹¶ dev1åˆ†æ”¯ æ ¹æ®ä¸Šå›¾æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š â€‹ devåˆ†æ”¯å‘å‰èµ°äº†ä¸€æ­¥ï¼ŒdevæŒ‡å‘äº†å½“å‰æœ€æ–°æäº¤ï¼Œè€ŒmasteræŒ‡é’ˆä¾ç„¶æŒ‡å‘ä¸Šæ¬¡æäº¤ã€‚ â€‹ å¦‚æœè¦åˆå¹¶ï¼Œé‚£ä¹ˆç›´æ¥è®©masteræŒ‡å‘devæŒ‡å‘çš„å½“å‰æäº¤ ã€‚ç›¸å½“äºï¼Œmasterä¹Ÿæäº¤è¿‡ä¸€æ¬¡ã€‚ åˆ é™¤åˆ†æ”¯ 12$ git branch -d devDeleted branch dev (was b17d20e). â€‹ åˆ é™¤åˆ†æ”¯ï¼Œç­‰ä»·äºåˆ é™¤åˆ›å»ºåˆ†æ”¯åçš„æäº¤è®°å½•ï¼ˆä¸Šå›¾çº¢è‰²çº¿ï¼‰ï¼Œä½†ç”±äºmasteræŒ‡å‘äº†æœ€æ–°æäº¤ï¼Œç­‰ä»·å¤åˆ¶dev1çš„æäº¤è®°å½•ï¼ˆè“è‰²çº¿ï¼‰ã€‚ â€‹ 4.2 è§£å†³åŒæ—¶ä¿®æ”¹å†²çª äº§ç”Ÿå†²çªåŸå›  åœ¨masteråˆ†æ”¯ä¸Š åœ¨å½“å‰masteråˆ†æ”¯ä¸Šï¼Œåˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ dev2 åŒæ—¶masteråˆ†æ”¯ä¸Šï¼Œå¯¹README.mdæ–‡ä»¶å¢åŠ ä¸€å¥è¯ i said master âš ï¸ ç„¶åï¼Œgit add --&gt; git commit åœ¨dev2åˆ†æ”¯ä¸Š checkoutåˆ‡å›masteråˆ†æ”¯ä¸Šï¼Œå¯¹README.mdæ–‡ä»¶å¢åŠ ä¸€å¥è¯ i said dev2 âš ï¸ ç„¶åï¼Œgit add --&gt; git commit åˆå¹¶ 12$ git checkout master$ git merge dev2 æ˜¾ç¤ºï¼ŒREADME.mdæ–‡ä»¶åŒæ—¶è¢«ä¿®æ”¹ï¼Œå‘ç”Ÿå†²çªï¼ˆä¹Ÿå¯ç”¨ git status æŸ¥çœ‹ï¼‰ vim æŸ¥çœ‹æ–‡ä»¶æ˜¾ç¤ºå…·ä½“å†²çªï¼š 1$ vim README.md #å½“å‰HEADæŒ‡å‘masterï¼Œæ‰€ä»¥ä¸‹å›¾æ˜¾ç¤ºHEAD è§£å†³å†²çª â“‚ï¸æ­¤æ—¶ä¸¤ä¸ªREADME.mdå·²ç»æ˜¯ä¸€ä¸ªæ–‡ä»¶äº†ï¼Œæ–‡ä»¶å†…å®¹å°±æ˜¯ä¸Šå›¾vimæŸ¥çœ‹çš„æ‰€æœ‰å†…å®¹ ã€‚ æˆ‘ä»¬å†å‘½ä»¤è¡Œç«¯å£ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œæç¤ºæˆ‘ä»¬åœ¨ master|MERGING åˆå¹¶ä¸­ã€‚ â€‹ æˆ‘ä»¬æ‰“å¼€æ–‡ä»¶ï¼Œä¿®æ”¹æ–‡ä»¶å†…å®¹ä¸ºï¼šï¼ˆç¬¬ä¸€å¥è¯æœ‰è¯¯ï¼Œæ­¤æ—¶å®åœ¨masteråˆ†æ”¯ä¸Šï¼Œä¸ç”¨åœ¨æ„ï¼‰ è¿™æ˜¯çš„devåˆ†æ”¯ï¼Œæˆ‘å¢åŠ äº†ä¸€å¥è¯ ä¿®æ”¹å†²çªï¼Œè¿™é‡Œå˜æˆè¿™æ ·ã€‚å…¶å®ä¸ä¿®æ”¹ç›´æ¥æäº¤ä¹Ÿè§£å†³å†²çªï¼Œåªæ˜¯æ²¡è§£å†³åŒæ—¶ä¿®æ”¹ã€‚ ç„¶åå†æäº¤ï¼Œå‘ç°å†²çªå·²ç»è§£å†³ï¼š 12$ git add README.md $ git commit -m &#x27;è§£å†³å†²çª&#x27; 4.3 åˆ†æ”¯ç®¡ç†ç­–ç•¥ â€“ ç¦ç”¨Fast forward æ¦‚è§ˆ é€šå¸¸ï¼Œåˆå¹¶åˆ†æ”¯æ—¶ï¼Œå¦‚æœå¯èƒ½ï¼ŒGitä¼šç”¨Fast forwardæ¨¡å¼ï¼Œåˆ™ç›´æ¥æŠŠ master çš„æŒ‡é’ˆç›´æ¥æŒ‡å‘äº† dev åˆ†æ”¯çš„æœ€æ–°æäº¤ï¼Œè¿™æ ·ä¸¤ä¸ªåˆ†æ”¯çš„æœ€æ–°æäº¤çš„ commit id å°±æ˜¯ä¸€æ ·çš„ã€‚ä½†è¿™ç§æ¨¡å¼ä¸‹ï¼Œåˆ é™¤åˆ†æ”¯åï¼Œä¼šä¸¢æ‰åˆ†æ”¯ä¿¡æ¯ã€‚ åŠ ä¸Š--no-ffå‚æ•°ï¼Œå¼ºåˆ¶ç¦ç”¨Fast forwardæ¨¡å¼ï¼Œä½¿ç”¨æ™®é€šæ¨¡å¼ã€‚Gitå°±ä¼šåœ¨mergeæ—¶ç”Ÿæˆä¸€ä¸ªæ–°çš„commitï¼Œè¿™æ ·ï¼Œä»åˆ†æ”¯å†å²ä¸Šå°±å¯ä»¥çœ‹å‡ºåˆ†æ”¯ä¿¡æ¯ã€‚ å®æ“ é»˜è®¤å·²ç»åˆ›å»ºå¥½åˆ†æ”¯ dev3ï¼Œä¸”ä¿®è¯¥äº†æ–‡ï¼Œè¿›è¡Œäº†ä¸€æ¬¡commitã€‚ ç„¶åä¸‹é¢éƒ½æ˜¯åœ¨ masteråˆ†æ”¯ä¸Šå°è¯•åˆå¹¶æ“ä½œ åˆ‡å›master 1$ git checkout master åˆå¹¶åˆ†æ”¯ â€“noâ€“ff ï¼š æ™®é€šæ¨¡å¼åˆå¹¶ã€‚ -m ï¼šç”±äºæœ¬æ¬¡åˆå¹¶devè¦åˆ›å»ºä¸€ä¸ªæ–°çš„commitï¼Œæ‰€ä»¥åŠ ä¸Š-må‚æ•°ï¼Œæ·»åŠ æè¿°ã€‚ 1$ git merge --no-ff -m &quot;merge with no-ff&quot; dev æŸ¥çœ‹å†å² 123456$ git log --graph --pretty=oneline --abbrev-commit* e1e9c68 (HEAD -&gt; master) merge with no-ff|\\ | * f52c633 (dev) add merge|/ * cf810e4 conflict fixed Fast forwardæ¨¡å¼ &amp; æ™®é€šæ¨¡å¼ å¯¹æ¯” FFæ¨¡å¼ä¸ç”¨--no-ffï¼Œå®é™…ä¸Šåªæ˜¯å°†masterçš„æŒ‡é’ˆupdateæˆdevåˆ†æ”¯è€Œå·²ã€‚ç”¨çš„è¿˜æ˜¯devçš„commit IDã€‚ æ™®é€šæ¨¡å¼ç”¨ï¼Œåˆ™æ˜¯é‡æ–°commitä¸€æ¬¡ï¼Œæœ‰äº†æ–°çš„commit IDï¼Œä¿ç•™äº†åˆ†æ”¯ç‰ˆæœ¬è®°å½•ã€‚ Fast forwardæ¨¡å¼ æ™®é€šæ¨¡å¼ 4.4 BUGåˆ†æ”¯â€”git stash æ¦‚è§ˆ â€‹ ä¿®å¤bugæ—¶ï¼Œæˆ‘ä»¬ä¼šé€šè¿‡åˆ›å»ºæ–°çš„bugåˆ†æ”¯è¿›è¡Œä¿®å¤ï¼Œç„¶ååˆå¹¶ï¼Œæœ€ååˆ é™¤ï¼› â€‹ å½“æ‰‹å¤´å·¥ä½œæ²¡æœ‰å®Œæˆæ—¶ï¼Œå…ˆæŠŠå·¥ä½œç°åœºgit stashä¸€ä¸‹ï¼Œç„¶åå»ä¿®å¤bugï¼Œä¿®å¤åï¼Œå†git stash popï¼Œå›åˆ°å·¥ä½œç°åœºã€‚ å®æ“ï¼ˆåº”ç”¨åœºæ™¯ï¼‰ master ä¸Šé¢å‘å¸ƒçš„æ˜¯Açš„1.0ç‰ˆæœ¬ dev ä¸Šå¼€å‘çš„æ˜¯Açš„2.0ç‰ˆæœ¬ ï¼Œåˆšåˆšæ–°å»ºäº†testæ–‡ä»¶ &amp;ä¿®æ”¹README.mdï¼š è¿™é‡Œæ˜¯devåˆ†æ”¯ã€‚ è¿™æ—¶ï¼Œç”¨æˆ·åæ˜  1.0ç‰ˆæœ¬å­˜åœ¨æ¼æ´ï¼Œæœ‰äººåˆ©ç”¨è¿™ä¸ªæ¼æ´å¼€å¤–æŒ‚ éœ€è¦ä»devåˆ‡æ¢åˆ°masterå»å¡«è¿™ä¸ªæ¼æ´ï¼Œæ­£å¸¸å¿…é¡»å…ˆæäº¤devç›®å‰çš„å·¥ä½œï¼Œæ‰èƒ½åˆ‡æ¢ã€‚ å¦‚æœä¸commitåˆ‡æ¢åˆ†æ”¯ï¼š 1$ git checkout master å‘ç°å½“å‰å·¥ä½œç›®å½•ï¼Œæ˜¯devåˆ†æ”¯å·¥ä½œç›®å½•ï¼ è§£é‡Š1 ä¸€ä¸ªæœ¬åœ°çš„git repoåªæœ‰ä¸€ä¸ªå·¥ä½œåŒºå’Œæš‚å­˜åŒºï¼Œä½†æ˜¯æœ‰å¤šä¸ªåˆ†æ”¯çš„æäº¤åŒºï¼Œè€Œæˆ‘ä»¬çš„checkoutåªæ˜¯å°†HEADæŒ‡é’ˆä»ä¸€ä¸ªåˆ†æ”¯åˆ‡æ¢åˆ°å¦ä¸€ä¸ªåˆ†æ”¯ã€‚ æ‰€ä»¥ï¼š åˆ‡æ¢åå·¥ä½œåŒºå†…å®¹æ˜¯branchçš„å·¥ä½œå†…å®¹ ç»è¿‡æµ‹è¯•ï¼Œå¦‚æœåˆ‡å›devåˆ†æ”¯ï¼Œè¿›è¡Œadd --&gt; commit å†åˆ‡å›masterå°±å›åˆ° masterå·¥ä½œåŒºã€‚ è€Œdevçš„å·¥ä½œè¿˜æœªå®Œæˆï¼Œä¸æƒ³æäº¤ï¼Œæ‰€ä»¥å…ˆæŠŠdevçš„å·¥ä½œstashä¸€ä¸‹ï¼Œç„¶ååˆ‡æ¢åˆ°masterï¼š å…ˆgit add test âš ï¸ ä¸ºä»€ä¹ˆè¦å…ˆadd testæ–‡ä»¶ï¼Ÿ testæ–‡ä»¶æ˜¯æ–°å»ºï¼Œè¿˜æœªè¢«gitç®¡ç†ï¼è®©git addè¿½è¸ªtestæ–‡ä»¶ï¼Œå¦åˆ™å³ä½¿ git stash ï¼Œtestæ–‡ä»¶ä¹Ÿä¾ç„¶ä¼šå‡ºç°åœ¨masterå·¥ä½œç›®å½•ä¸­ï¼ 1$ git add test git stash ç„¶ååˆ‡æ¢ 12$ git stash$ git checkout master æ¢å¤devå·¥ä½œç›®å½• ç®€å•æ¢å¤ï¼š 1$ git stash pop # æ¢å¤çš„åŒæ—¶æŠŠstashå†…å®¹ä¹Ÿåˆ äº† æœ‰å¤šä¸ªå› æ­¤ç›®å½•ï¼Œå¯ä»¥é…åˆä¸‹é¢ç›®å½•æ¢å¤ï¼š 123$ git stash list stash@&#123;0&#125;: WIP on dev: f52c633 add merge$ git stash apply stash@&#123;0&#125; # æ¢å¤ä¸ä¼šåˆ é™¤stashå†…å®¹ åœ¨masterå»ºç«‹åˆ†æ”¯issue101å¹¶åˆ‡æ¢ã€‚ åœ¨issue101ä¸Šä¿®å¤æ¼æ´ã€‚ ä¿®å¤åï¼Œåœ¨masterä¸Šåˆå¹¶issue101 ã€‚ åˆ‡å›devï¼Œæ¢å¤åŸæœ¬å·¥ä½œï¼Œç»§ç»­å·¥ä½œã€‚ 4.5 åˆ é™¤åˆ†æ”¯ å¦‚æœè¦ä¸¢å¼ƒä¸€ä¸ªæ²¡æœ‰è¢«åˆå¹¶è¿‡çš„åˆ†æ”¯ï¼Œå¯ä»¥é€šè¿‡git branch -D &lt;name&gt;å¼ºè¡Œåˆ é™¤ã€‚ 4.6 å¤šäººåä½œ æŸ¥çœ‹åˆ†æ”¯ 1$ git remote -v # å¸¦-vå‚æ•°æŸ¥çœ‹æ›´åŠ è¯¦ç»† push æ¨é€åˆ†æ”¯ git push &lt;è¿œç¨‹åº“å&gt; &lt;è¦æ¨é€åˆ†æ”¯å&gt; â€‹ æ¨é€æœ¬åœ°ä¸»åˆ†æ”¯masteråˆ° origin masterï¼Œç›¸å½“ç”¨æœ¬åœ°masterç‰ˆæœ¬è¦†ç›–è¿œç¨‹origin masterç‰ˆæœ¬ã€‚ âš ï¸ git push åªèƒ½ç”¨æˆ·è¯¥é¡¹ç›®å±äºè‡ªå·±çš„æƒ…å†µï¼Œå› ä¸ºè¦è¾“å…¥è´¦å·å¯†ç ï¼å‚ä¸ä»–äººå¼€æºï¼š æˆä¸ºè¯¥å¼€æºé¡¹ç›®è´¡çŒ®è€…ï¼ˆç”±é¡¹ç›®ä½œè€…è®¾ç½®ï¼‰ fork è¯¥é¡¹ç›® ----&gt; cloneåˆ°æœ¬åœ°----&gt; ä¿®æ”¹ ----&gt; å‘èµ· pull requset â€”&gt; è®¨è®º &amp; ç­‰å¾…åˆå¹¶ è¿˜æœ‰å…¶ä»–æ›´å¤šæƒ…å†µï¼Œå¦‚äº§ç”Ÿå†²çªç­‰ï¼ŒæŸ¥çœ‹ï¼špro git ä¸­æ–‡# å¯¹é¡¹ç›®åšå‡ºè´¡çŒ® 1$ git push origin master æ¨é€å…¶ä»–åˆ†æ”¯åˆ°è¿œç¨‹åº“ ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹ã€‚ 1$ git push origin dev clone å…‹éš†åˆ†æ”¯å·¥ä½œ å¤šäººåä½œæ—¶ï¼Œå¤§å®¶éƒ½ä¼šå¾€è¿œç¨‹åº“masterå’Œdevåˆ†æ”¯ä¸Šæ¨é€å„è‡ªçš„ä¿®æ”¹ã€‚ å…‹éš†ä¸»åˆ†æ”¯ âš ï¸ å…‹éš†åªèƒ½å…‹éš†masteråˆ†æ”¯ï¼ï¼ ç°åœ¨ï¼Œæ¨¡æ‹Ÿä½ çš„å°ä¼™ä¼´ï¼Œåœ¨å¦ä¸€å°ç”µè„‘ï¼ˆæ³¨æ„è¦æŠŠSSH Keyæ·»åŠ åˆ°GitHubï¼‰å…‹éš†ï¼š 1$ git clone git@github.com:michaelliao/Python-100-Days å…‹éš†è¿œç¨‹devåˆ†æ”¯å¼€å‘ ç”±äºåªèƒ½å…‹éš†masteråˆ†æ”¯ï¼Œè€Œåˆè¦åœ¨è¿œç¨‹devåˆ†æ”¯å¼€å‘ï¼Œé‚£ä¹ˆï¼š 1$ git checkout -b dev origin/dev ä¹‹åå°±å¯è¿›è¡Œä¿®æ”¹ â€”&gt; æäº¤ ï¼šgit pushäº† git pull ä¸€ç§åº”ç”¨æƒ…å†µï¼šAã€Béƒ½å…‹éš†äº†é¡¹ç›®ï¼Œåœ¨è¿œç¨‹åˆ†æ”¯devä¸Šè¿›è¡Œå¼€å‘ï¼ˆåˆ†åˆ«åœ¨æœ¬åœ°ä¹Ÿå…‹éš†devåˆ†æ”¯ï¼‰ Aä¿®æ”¹äº†æ–‡ä»¶ READMEï¼Œå¹¶è¿›è¡Œäº†pushæäº¤ ã€‚ ä½ ä¹Ÿä¿®æ”¹äº†READMEï¼Œè¿›è¡Œæäº¤ä¿®æ”¹ï¼Œä¼šå‡ºé”™ï¼ŒåŸå› æ˜¯ âš ï¸è¿œç¨‹åˆ†æ”¯æ¯”ä½ çš„æœ¬åœ°æ›´æ–°ï¼ åªæœ‰å…ˆ pull æœ€æ–°åˆ†æ”¯ä½ çš„åˆ†æ”¯åˆå¹¶ â€”&gt; è§£å†³å†²çªâ€”&gt;æäº¤ git pullå‘½ä»¤çš„ä½œç”¨æ˜¯ï¼šå–å›è¿œç¨‹ä¸»æœºæŸä¸ªåˆ†æ”¯çš„æ›´æ–°ï¼Œå†ä¸æœ¬åœ°çš„æŒ‡å®šåˆ†æ”¯åˆå¹¶ï¼Œå®ƒçš„å®Œæ•´æ ¼å¼ç¨ç¨æœ‰ç‚¹å¤æ‚ã€‚ åœ¨é»˜è®¤æ¨¡å¼ä¸‹ï¼Œgit pullæ˜¯git fetchåè·Ÿgit merge FETCH_HEADçš„ç¼©å†™ã€‚ git pull == git fetch+ git merge ï¼ˆé»˜è®¤æ˜¯æ£€ç´¢å¤´éƒ¨åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ï¼‰ âš ï¸ ä½¿ç”¨â€“rebaseï¼Œå®ƒè¿è¡Œgit rebaseè€Œä¸æ˜¯git mergeã€‚ 1$ git pull&lt;å¯é€‰å‚æ•°&gt; &lt;è¿œç¨‹ä¸»æœºå&gt; &lt;è¿œç¨‹åˆ†æ”¯å&gt;:&lt;æœ¬åœ°åˆ†æ”¯å&gt; ç¤ºä¾‹ æ¯”å¦‚ï¼Œè¦å–å›originä¸»æœºçš„nextåˆ†æ”¯ï¼Œä¸æœ¬åœ°çš„masteråˆ†æ”¯åˆå¹¶ï¼š 1$ git pull origin next:master çœç•¥å½“å‰åˆ†æ”¯å å¦‚æœè¿œç¨‹åˆ†æ”¯(next)è¦ä¸å½“å‰åˆ†æ”¯åˆå¹¶ï¼Œåˆ™å†’å·åé¢çš„éƒ¨åˆ†å¯ä»¥çœç•¥ã€‚ä¸Šé¢å‘½ä»¤å¯ä»¥ç®€å†™ä¸ºï¼š 1$ git pull origin next ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå–å›origin/nextåˆ†æ”¯ï¼Œå†ä¸å½“å‰åˆ†æ”¯åˆå¹¶ã€‚å®è´¨ä¸Šï¼Œè¿™ç­‰åŒäºå…ˆåšgit fetchï¼Œå†æ‰§è¡Œgit mergeã€‚ 12$ git fetch origin$ git merge origin/next çœç•¥è¿œç¨‹åˆ†æ”¯å æŸäº›åœºåˆï¼ŒGitä¼šè‡ªåŠ¨åœ¨æœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯ä¹‹é—´ï¼Œå»ºç«‹ä¸€ç§è¿½è¸ªå…³ç³»(tracking)ã€‚æ¯”å¦‚ï¼Œåœ¨git cloneçš„æ—¶å€™ï¼Œæ‰€æœ‰æœ¬åœ°åˆ†æ”¯é»˜è®¤ä¸è¿œç¨‹ä¸»æœºçš„åŒååˆ†æ”¯ï¼Œå»ºç«‹è¿½è¸ªå…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæœ¬åœ°çš„masteråˆ†æ”¯è‡ªåŠ¨â€è¿½è¸ªâ€origin/masteråˆ†æ”¯ã€‚ Gitä¹Ÿå…è®¸æ‰‹åŠ¨å»ºç«‹è¿½è¸ªå…³ç³»ï¼ŒæŒ‡å®šmasteråˆ†æ”¯è¿½è¸ªorigin/nextåˆ†æ”¯ï¼š 1$ git branch --set-upstream master origin/next å¦‚æœå½“å‰åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯å­˜åœ¨è¿½è¸ªå…³ç³»ï¼Œgit pullå°±å¯ä»¥çœç•¥è¿œç¨‹åˆ†æ”¯åã€‚ 1$ git pull origin ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œæœ¬åœ°çš„å½“å‰åˆ†æ”¯è‡ªåŠ¨ä¸å¯¹åº”çš„originä¸»æœºâ€è¿½è¸ªåˆ†æ”¯â€(remote-tracking branch)è¿›è¡Œåˆå¹¶ã€‚ çœç•¥è¿œç¨‹ä¸»æœºå å¦‚æœå½“å‰åˆ†æ”¯åªæœ‰ä¸€ä¸ªè¿½è¸ªåˆ†æ”¯ï¼Œè¿è¿œç¨‹ä¸»æœºåéƒ½å¯ä»¥çœç•¥ã€‚ 1$ git pull git fetchå’Œgit pullçš„åŒºåˆ« git fetchï¼šç›¸å½“äºæ˜¯ä»è¿œç¨‹è·å–æœ€æ–°ç‰ˆæœ¬åˆ°æœ¬åœ°ï¼Œä¸ä¼šè‡ªåŠ¨åˆå¹¶ã€‚ 123$ git fetch origin master$ git log -p master..origin/master$ git merge origin/master ä»¥ä¸Šå‘½ä»¤çš„å«ä¹‰ï¼š é¦–å…ˆä»è¿œç¨‹çš„originçš„masterä¸»åˆ†æ”¯ä¸‹è½½æœ€æ–°çš„ç‰ˆæœ¬åˆ°origin/masteråˆ†æ”¯ä¸Š ç„¶åæ¯”è¾ƒæœ¬åœ°çš„masteråˆ†æ”¯å’Œorigin/masteråˆ†æ”¯çš„å·®åˆ« æœ€åè¿›è¡Œåˆå¹¶ ä¸Šè¿°è¿‡ç¨‹å…¶å®å¯ä»¥ç”¨ä»¥ä¸‹æ›´æ¸…æ™°çš„æ–¹å¼æ¥è¿›è¡Œï¼š 123$ git fetch origin master:tmp$ git diff tmp $ git merge tmp git pullï¼šç›¸å½“äºæ˜¯ä»è¿œç¨‹è·å–æœ€æ–°ç‰ˆæœ¬å¹¶mergeåˆ°æœ¬åœ° 1git pull origin maste äº”ã€æ ‡ç­¾ç®¡ç† 5.1 åˆ›å»ºæ ‡ç­¾ 5.2 æ“ä½œæ ‡ç­¾ å…­ã€ä½¿ç”¨Github 6.1 ç®€å•ä¸Šä¼  è®¾ç½®ç”¨æˆ·ä¿¡æ¯ 12$ git config --global user.name &quot;hwh&quot;$ git config --global user.email &quot;380141202@qq.com&quot; git init åˆå§‹åŒ–ä»“åº“ 1$ git init æœ¬åœ°åˆ›å»ºssh key 1$ ssh-keygen -t rsa -C &quot;380141202@qq.com&quot; # åé¢ä¼šè¦æ±‚è®¾ç½®å¯†ç å¯ä¸è®¾ç½® ç„¶åä¼šåœ¨ï¼šC:\\Users\\80651\\.ssh ç”Ÿæˆssh key æ–‡ä»¶ï¼Œå…¶ä¸‹æœ‰ä¸€ä¸ªå…¬é’¥ id_rsa.pubï¼Œè®°äº‹æœ¬æ‰“å¼€å¤åˆ¶ã€‚ æ‰“å¼€githubè®¾ç½® æ‰“å¼€github åœ¨ä¸ªäººè®¾ç½®ä¸­æ·»åŠ **2.**ä¸­ssh keyã€‚ å¯ç”¨ ssh -TæŸ¥çœ‹æ˜¯å¦æˆåŠŸ 1$ ssh -T git@github.com å¯¹æ–‡ä»¶ä¸€äº›æ“ä½œ æ¯”å¦‚ï¼Œè¿™é‡Œä»¥å¢åŠ ä¸€ä¸ªREADMEæ–‡ä»¶ï¼Œç„¶ågit commit æäº¤åˆ°ç‰ˆæœ¬åº“ã€‚ 12$ git add README # ä¹Ÿå¯add . æäº¤æ‰€æœ‰æ–°å»ºã€ä¿®æ”¹æ–‡ä»¶$ git commit -m &#x27;å¢åŠ readme&#x27; push ä¸Šä¼ åˆ°ç‰ˆæœ¬åº“ 1$ git push origin master Q : git push å‡ºç°é”™è¯¯ â€˜â€™ error: failed to push some refs to gitâ€˜â€™ A : ä¸€èˆ¬æ˜¯å› ä¸ºgithubä¸­çš„README.mdæ–‡ä»¶ä¸åœ¨æœ¬åœ°ä»£ç ç›®å½•ä¸­ æ·»åŠ  -f å‚æ•°å¼ºåˆ¶è¦†ç›– 1git push -f origin master é€šè¿‡å¦‚ä¸‹å‘½ä»¤è¿›è¡Œgithubä¸æœ¬åœ°ä»£ç åˆå¹¶: 12$ git pull --rebase origin master # å…ˆå’Œæœ¬åœ°ä»£ç åˆå¹¶$ git push # ç„¶åå†ä¸Šä¼  6.2 å‚ä¸å¼€æºé¡¹ç›® å¯å‚è€ƒï¼šGitHubçš„Pull Request æ˜¯æŒ‡ä»€ä¹ˆæ„æ€ ä¸ƒã€è‡ªå®šä¹‰Git æœåŠ¡å™¨ç«¯å®‰è£…Git 1$ yum install git åˆ›å»ºç”¨æˆ· &amp; ç»„ ç®¡ç†ä»“åº“ç›®å½• 12$ groupadd git$ useradd git -g git # -g å‚æ•°è¡¨ç¤ºæŠŠç”¨æˆ·gituserä¸»ç»„è®¾ç½®ä¸º git åˆ›å»ºç›®å½• æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªç›®å½•gitrepoç”¨æ¥ç®¡ç†å…¶ä¸‹ä»“åº“ï¼Œä¸€èˆ¬ä¹ æƒ¯åœ¨ /varä¸‹åˆ›å»ºã€‚ 12$ cd /var$ mkdir gitrepo ç»™å…¶è®¾ç½®å¥½ç”¨æˆ· &amp; ç»„ï¼Œä¾¿äºç®¡ç† 1$ chown -R gituser:git gitrepo # æŠŠç›®å½•gitrepo è®¾ç½®ç”¨æˆ·gituser &amp; ç»„ git ls -l æŸ¥çœ‹æ˜¯å¦è®¾ç½®æˆåŠŸï¼š åˆ›å»ºä»“åº“ åˆ›å»ºhwhComputer2Backup.gitä»“åº“ï¼Œå¹¶åˆå§‹åŒ–ç”¨æ¥ä¸Šä¼ ç”µè„‘å¤‡ä»½ã€‚ 12$ cd gitrepo # æ³¨æ„å…ˆåˆ‡æ¢åˆ°gitä¸‹$ git init --bare hwhComputer2Backup.git åˆ›å»ºè¯ä¹¦ åœ¨æœ¬åœ°ç”µè„‘ä¸Š æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºssh å…¬é’¥ã€‚ä¼šåœ¨ï¼šC:\\Users\\80651\\\\.ssh ç”Ÿæˆssh key æ–‡ä»¶ï¼Œå…¶ä¸‹æœ‰ä¸€ä¸ªå…¬é’¥ id_rsa.pubã€‚ 1$ ssh-keygen -t rsa -C &quot;380141202@qq.com&quot; # åé¢ä¼šè¦æ±‚è®¾ç½®å¯†ç å¯ä¸è®¾ç½® åˆ‡å›æœåŠ¡ç«¯ è£¸æœºéœ€åˆ›å»º/home/git/.ssh/authorized_keysæ–‡ä»¶ã€‚ 123$ cd gitrepo/$ mkdir .ssh$ touch .ssh/authorized_keys ç„¶åæŠŠæœ¬åœ°ç”µè„‘ä¸Šå…¬é’¥å¤åˆ¶å¯¼å…¥ï¼Œä¸€è¡Œä¸€ä¸ªï¼ˆï¼Ÿï¼‰ 1$ vim .ssh/authorized_keys å†æ¬¡ä¿®æ”¹æƒé™ åˆ›å»ºçš„å­ç›®å½• ç”¨æˆ· &amp; ç»„ é»˜è®¤æ˜¯ root root âš ï¸ç”±äº.ssh &amp; ä»“åº“ hwhComputer2Backup.git éƒ½ä¸å±äº gituser ï¼Œæ‰€æœ‰è¿˜éœ€è®¾ç½®æƒé™ã€‚å¦åˆ™è¿›è¡Œ push pull æ“ä½œ æ²¡æœ‰è¶³å¤Ÿæƒé™ã€‚ 12$ cd /var$ chown -R gituser:git gitrepo æœ¬åœ°ä¸Šä¼ æ–‡ä»¶ æ·»åŠ ç”¨æˆ·ä¿¡æ¯ 12$ git config --global user.name &quot;hwh&quot;$ git config --global user.email &quot;380141202@qq.com&quot; åˆå§‹åŒ–æœ¬åœ°ä»“åº“ 12$ cd D:/hwh/uploadToGit$ git init æŠŠæœ¬åœ°ä»“åº“æ·»åŠ åˆ°ç‰ˆæœ¬åº“ é”™è¯¯ï¼šc#ç¨‹åºç»ƒä¹  does not have a commit checked out è§£å†³ï¼šæ˜¯å› ä¸º c#ç¨‹åºç»ƒä¹  è¿™ä¸ªæ–‡ä»¶å¤¹å·²ç»è¢«åˆå§‹åŒ–ï¼ŒæŸ¥çœ‹éšè—æ–‡ä»¶å¯ä»¥å‘ç° .gitæ–‡ä»¶åˆ é™¤å…¶å³å¯ã€‚ 12$ git add . # add . æäº¤æ‰€æœ‰æ–°å»ºã€ä¿®æ”¹æ–‡ä»¶$ git commit -m &#x27;ç¬¬ä¸€æ¬¡å¤‡ä»½æ–‡ä»¶&#x27; æœ¬åœ°ä»“åº“å…³è”è¿œç¨‹åº“ ç§»é™¤å½“å‰è¿œç¨‹è¿æ¥ï¼š 1git remote remove origin git remote add origin &lt;æœåŠ¡ç«¯ç”¨æˆ·å&gt;@&lt;è¿œç¨‹åº“ååœ°å€&gt;:&lt;è¿œç¨‹ä»“åº“åœ°å€&gt; âš ï¸&lt;æœåŠ¡ç«¯ç”¨æˆ·å&gt; : æ˜¯åœ¨æœåŠ¡ç«¯çš„ç”¨æˆ·ï¼ 1$ git remote add origin gituser@129.28.154.240:/var/gitrepo/hwhComputer2Backup.git æ¨é€åˆ°è¿œç¨‹åº“ ä¼¼ä¹ç”±äº ssh key è®¾ç½®ä¸å¯¹ï¼Œgit push è¦è¾“å…¥ç”¨æˆ· gituser çš„å¯†ç  123456ï¼Ÿ 1$ git push -u origin master # ç¬¬ä¸€æ¬¡æ¨é€å¸¦ -u å‚æ•° ç­‰å¾…ä¸Šä¼ æœåŠ¡å™¨(é€Ÿåº¦æœ‰ç‚¹æ…¢)ï¼š å…«ã€debug è®°å½• ERRORï¼šç”±äºå­˜åœ¨ &gt;100M æ–‡ä»¶ï¼Œæäº¤åæŠ¥é”™ï¼Œä¸å…è®¸æäº¤è¶…è¿‡100M æ–‡ä»¶ï¼Œè¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š å‹ç¼©å¹¶åˆ é™¤&gt;100Mæ–‡ä»¶ å°†ç›¸åº”æ–‡ä»¶åŠ å…¥ .gitignore å†æ¬¡commit --&gt; push ä¾æ—§æŠ¥ç›¸åŒé”™è¯¯ã€‚ è§£å†³åŠæ³•å¦‚ä¸‹ï¼Œå‚è€ƒï¼šFixing the â€œGH001â€¦ åˆ é™¤æ–‡ä»¶ å»ºè®®å¯ä»¥å…ˆå›é€€æœ€è¿‘çš„commit åˆ†æ”¯ åˆ©ç”¨ä»¥ä¸‹å‘½ä»¤åˆ é™¤æ‰€æœ‰åœ¨ä»“åº“ä¸­ &gt;100M çš„æ–‡ä»¶ï¼š 1git filter-branch -f --index-filter &#x27;git rm --cached --ignore-unmatch &lt;å¤§äº100Mæ–‡ä»¶URL&gt;&#x27; ä¾‹å¦‚ï¼Œæˆ‘çš„ä¾‹å­ï¼š 1git filter-branch -f --index-filter &#x27;git rm --cached --ignore-unmatch Experiment/Ex4_CustomerForecast/src/train.csv&#x27; å†æ¬¡æäº¤ ä¸ºäº†ä¿é™©ï¼Œå¯ä»¥å…ˆï¼š 1git rm -r --cached ./ # æœ¬åœ°ä»£ç ä¸ä¼šè¢«åˆ é™¤ æ¥ä¸‹æ¥æ­£å¸¸ï¼šgit add --&gt; git commit --&gt; git push å³å¯","categories":[{"name":"Git","slug":"Git","permalink":"https://hwh.zone/categories/Git/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://hwh.zone/tags/Git/"}]},{"title":"æ ¡æ‹›ç¬”è®°ï¼ˆä¹ï¼‰_è®¡ç®—æœºåŸºç¡€_ç›¸å…³è¡¥å……","slug":"æ ¡æ‹›ç¬”è®°ï¼ˆä¹ï¼‰_è®¡ç®—æœºåŸºç¡€_ç›¸å…³è¡¥å……","date":"2021-11-25T08:29:59.274Z","updated":"2021-12-11T15:17:34.067Z","comments":true,"path":"p/5582/","link":"","permalink":"https://hwh.zone/p/5582/","excerpt":"","text":"æˆ‘çš„æ ¡æ‹›è®°å½•ï¼šæ ¡æ‹›ç¬”è®°ï¼ˆé›¶ï¼‰_å†™åœ¨å‰é¢ ï¼Œä»¥ä¸‹æ˜¯æ ¡æ‹›ç¬”è®°æ€»ç›®å½•ã€‚ å¤‡æ³¨ ç®—æ³•èƒ½åŠ›ï¼ˆâ€œåˆ·é¢˜â€ï¼‰ è¿™éƒ¨åˆ†å°±æ˜¯è€—æ—¶é—´å¤šç»ƒä¹ ï¼ŒLeetcode-Top100 æ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚ è¡¥å……ç»ƒä¹ ï¼šcodeTop è®¡ç®—æœºåŸºç¡€(ä¸Š)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_Javaå…¥é—¨ C++åç«¯åç»­æ›´æ–° æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é¢å¯¹å¯¹è±¡ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é›†åˆ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_å¤šçº¿ç¨‹ æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_é” æ ¡æ‹›ç¬”è®°ï¼ˆä¸€ï¼‰__Java_JVM è®¡ç®—æœºåŸºç¡€(ä¸‹)ï¼ˆâ€œå…«è‚¡â€ï¼‰ æ ¡æ‹›ç¬”è®°ï¼ˆäºŒï¼‰__è®¡ç®—æœºåŸºç¡€_Linux&amp;Git æ ¡æ‹›ç¬”è®°ï¼ˆä¸‰ï¼‰__è®¡ç®—æœºåŸºç¡€_è®¡ç®—æœºç½‘ç»œ æ ¡æ‹›ç¬”è®°ï¼ˆå››ï¼‰__è®¡ç®—æœºåŸºç¡€_æ“ä½œç³»ç»Ÿ æ ¡æ‹›ç¬”è®°ï¼ˆäº”ï¼‰__è®¡ç®—æœºåŸºç¡€_MySQL æ ¡æ‹›ç¬”è®°ï¼ˆå…­ï¼‰__è®¡ç®—æœºåŸºç¡€_Redis æ ¡æ‹›ç¬”è®°ï¼ˆä¸ƒï¼‰__è®¡ç®—æœºåŸºç¡€_æ•°æ®ç»“æ„ æ ¡æ‹›ç¬”è®°ï¼ˆå…«ï¼‰__è®¡ç®—æœºåŸºç¡€_åœºæ™¯&amp;æ™ºåŠ›é¢˜ æ ¡æ‹›ç¬”è®°ï¼ˆä¹ï¼‰__è®¡ç®—æœºåŸºç¡€_ç›¸å…³è¡¥å…… é¡¹ç›®&amp;å®ä¹  ä¸»è¦æ˜¯æ€ä¹ˆå‡†å¤‡é¡¹ç›®ï¼Œåç»­æ›´æ–° ä¹ã€ç›¸å…³è¡¥å…… 9.1 ï¼ˆè¦æ‰©å……ï¼‰è®¾è®¡æ¨¡å¼ æ²¡æœ‰è¶³å¤Ÿå®é™…ä»£ç ç»éªŒï¼Œåªå¥½å…ˆå†™è¿™äº›åº”ä»˜ä¸‹é¢è¯•ã€‚ 1.è¯´è¯´ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼ ?æ‰‹å†™ä¸€ä¸ªï¼Ÿ å•ä¾‹æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œåœ¨åº”ç”¨è¿™ä¸ªæ¨¡å¼æ—¶ï¼Œå•ä¾‹å¯¹è±¡çš„ç±»å¿…é¡»ä¿è¯åªæœ‰ä¸€ä¸ªå®ä¾‹å­˜åœ¨ï¼Œæ•´ä¸ªç³»ç»Ÿåªèƒ½ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡å®ä¾‹ã€‚ æ‰‹å†™å•ä¾‹æ¨¡å¼ å‚è€ƒï¼šhttps://www.runoob.com/design-pattern/singleton-pattern.html è®°å¿†ï¼šâ€œ2private + 1public â€ é¥¿æ±‰å¼ çº¿ç¨‹å®‰å…¨ ï¼Œ ä½†ï¼šç±»åŠ è½½æ—¶å°±åˆå§‹åŒ–ï¼Œæµªè´¹å†…å­˜ã€‚ 1234567891011121314151617public class SingleObject &#123; // åˆ›å»º SingleObject çš„ä¸€ä¸ªå¯¹è±¡ private static SingleObject instance = new SingleObject(); // *è®©æ„é€ å‡½æ•°ä¸º privateï¼Œè¿™æ ·è¯¥ç±»å°±ä¸ä¼šè¢«å®ä¾‹åŒ– private SingleObject()&#123;&#125; // è·å–å”¯ä¸€å¯ç”¨çš„å¯¹è±¡ public static SingleObject getInstance()&#123; return instance; &#125; public void showMessage()&#123; System.out.println(&quot;Hello World!&quot;); &#125; &#125; æ‡’æ±‰å¼ï¼ˆä¸åŠ é”ï¼‰ åªæœ‰çœŸæ­£è°ƒç”¨è·å–å®ä¾‹å¯¹è±¡æ—¶ï¼Œæ‰ä¼šåˆ›å»ºä¸€æ¬¡ã€‚ 1234567891011121314public class Singleton &#123; private static Singleton instance; private Singleton ()&#123;&#125; public static Singleton getInstance() &#123; // è°ƒç”¨æ—¶æ‰åˆ¤æ–­ if (instance == null) &#123; instance = new Singleton(); &#125; return instance; &#125; &#125; æ‡’æ±‰å¼ï¼ˆåŠ é”ï¼‰ çº¿ç¨‹å®‰å…¨ï¼Œä½†åŠ é”æ€§èƒ½ä¸å¤Ÿé«˜ 123456789101112public class Singleton&#123; private static Singleton instance; private Singleton ()&#123;&#125; // å°±æ˜¯å¤šäº†ä¸ªsynchronizedå…³é”®å­— public static synchronized Singleton getInstance() &#123; if (instance == null) &#123; instance = new Singleton(); &#125; return instance; &#125; &#125; åŒæ£€é”å¼ æ‡’æ±‰å¼ï¼ˆåŠ é”ï¼‰è™½ç„¶å¯ä»¥ä¿è¯åªåˆ›å»ºä¸€ä¸ªå•ä¾‹ï¼Œä½†å…¶æ€§èƒ½ä¸é«˜ï¼Œå› ä¸ºæ¯æ¬¡è®¿é—®æ•´ä¸ªæ–¹æ³•éƒ½åŠ é”ã€‚ å› æ­¤å‡ºç°åŒæ£€ç´¢å¼ï¼Œåœ¨instance=new DoubleCheckSingleton(); è¿›è¡ŒåŠ é” ï¼Œ return instance;ä¸åŠ é”ï¼ ä¸ºä»€ä¹ˆè¦è¿›è¡Œä¸¤æ¬¡æ£€æŸ¥instance==nullï¼Ÿ ç¬¬ä¸€å±‚æ£€æŸ¥ä½œç”¨ ä¸»è¦ä¸ºäº†æé«˜æ€§èƒ½ã€‚å¦‚æœæ²¡æœ‰ç¬¬ä¸€å±‚ï¼Œä¸Šæ¥å°±è¦åŠ é”æ¯”è¾ƒè€—è´¹æ€§èƒ½ ç¬¬äºŒå±‚æ£€æŸ¥ä½œç”¨ è§£å†³å¤šçº¿ç¨‹å¹¶å‘é—®é¢˜ã€‚å‡è®¾æ˜¯ç¬¬ä¸€æ¬¡å¼€å§‹æ‰§è¡ŒgetInstanceæ–¹æ³•ï¼š Aï¼ŒBä¸¤ä¸ªçº¿ç¨‹ï¼Œæ­¤æ—¶instance==null ï¼ŒAï¼ŒBéƒ½é€šè¿‡äº†ç¬¬ä¸€å±‚æ£€æŸ¥ã€‚ å‡è®¾Aå…ˆæ‹¿åˆ°é”ï¼Œå¾€ä¸‹æ‰§è¡Œåˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œç„¶åé‡Šæ”¾äº†é”ï¼› æ­¤æ—¶Bä¹Ÿæ‹¿åˆ°äº†é”ï¼Œå¦‚æœæ²¡æœ‰ç¬¬äºŒå±‚æ£€æŸ¥ï¼ŒBä¼šè¿›è¡Œé‡æ–°newä¸€ä¸ªå®ä¾‹ï¼Œè¿èƒŒå•ä¾‹æ¨¡å¼ï¼ 12345678910111213141516171819202122232425262728public class DoubleCheckSingleton&#123; // volitale å…³é”®å­—ä¿®é¥°ï¼Œé¿å…æŒ‡ä»¤é‡æ’ï¼Œå› ä¸ºåˆå§‹åŒ–æ“ä½œæ˜¯ä¸åŸå­åŒ–çš„ ï¼š // (1) ç»™DoubleCheckSingletonç±»çš„å®ä¾‹instanceåˆ†é…å†…å­˜ // (2) è°ƒç”¨å®ä¾‹instanceçš„æ„é€ å‡½æ•°æ¥åˆå§‹åŒ–æˆå‘˜å˜é‡ // (3) å°†instanceæŒ‡å‘åˆ†é…çš„å†…å­˜åœ°å€ // åœ¨å¤šçº¿ç¨‹ä¸­ï¼ŒAå¯èƒ½æ˜¯ 1â†’3â†’2çš„é¡ºåºï¼Œæ‰§è¡Œåˆ°1â†’3ï¼Œæ­¤æ—¶å¦å¤–ä¸€ä¸ªçº¿ç¨‹çœ‹åˆ°instanceä¸ä¸ºnullï¼ˆå› ä¸ºå‰é¢çº¿ç¨‹æ‰§è¡Œäº†3ï¼‰å°±ç›´æ¥è¿”å›å®ä¾‹ã€‚è€Œæ­¤æ—¶å¹¶æ²¡æœ‰è¢«åˆ†é…å†…å­˜æ•…å¯èƒ½å‡ºç°é—®é¢˜ã€‚ private volatile static DoubleCheckSingleton instance; // ç§æœ‰çš„æ„é€ æ–¹æ³• private DoubleCheckSingleton() &#123;&#125; public static DoubleCheckSingleton getInstance()&#123; if(instance==null)&#123; //ç¬¬ä¸€å±‚æ£€æŸ¥ï¼Œæ˜¯å¦å­˜åœ¨å®ä¾‹ synchronized (DoubleCheckSingleton.class)&#123; if(instance==null)&#123; //ç¬¬äºŒå±‚æ£€æŸ¥ï¼Œé˜²æ­¢å‡ºç°å¦å¤–ä¸€ä¸ªçº¿ç¨‹é˜»å¡åœ¨synchronizedï¼Œè·å¾—é”åé‡å¤åˆ›å»ºå®ä¾‹ instance=new DoubleCheckSingleton(); &#125; &#125; &#125; return instance; &#125; &#125; 2.è¯´è¯´ä½ å¯¹ä»£ç†æ¨¡å¼çš„ç†è§£ï¼Ÿ ä»£ç†æ¨¡å¼æ˜¯ç»™æŸä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†ï¼Œå¹¶ç”±ä»£ç†å¯¹è±¡æ§åˆ¶å¯¹åŸå¯¹è±¡çš„å¼•ç”¨ã€‚ ä¼˜ç‚¹ï¼šä»£ç†æ¨¡å¼èƒ½å¤Ÿåè°ƒè°ƒç”¨è€…å’Œè¢«è°ƒç”¨è€…ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šé™ä½äº†ç³»ç»Ÿçš„è€¦åˆåº¦ï¼›å¯ä»¥çµæ´»åœ°éšè—è¢«ä»£ç†å¯¹è±¡çš„éƒ¨åˆ†åŠŸèƒ½å’ŒæœåŠ¡ï¼Œä¹Ÿå¢åŠ é¢å¤–çš„åŠŸèƒ½å’ŒæœåŠ¡ã€‚ ç¼ºç‚¹ï¼šç”±äºä½¿ç”¨äº†ä»£ç†æ¨¡å¼ï¼Œå› æ­¤ç¨‹åºçš„æ€§èƒ½æ²¡æœ‰ç›´æ¥è°ƒç”¨æ€§èƒ½é«˜ï¼›ä½¿ç”¨ä»£ç†æ¨¡å¼æé«˜äº†ä»£ç çš„å¤æ‚åº¦ã€‚ 3.è¯´è¯´ç®€å•å·¥å‚æ¨¡å¼ï¼Ÿ ç®€å•å·¥å‚æ¨¡å¼åˆå«é™æ€å·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œå°±æ˜¯å»ºç«‹ä¸€ä¸ªå·¥å‚ç±»ï¼Œå¯¹å®ç°äº†åŒä¸€æ¥å£çš„ä¸€äº›ç±»è¿›è¡Œå®ä¾‹çš„åˆ›å»ºã€‚ æ¯”å¦‚ï¼Œä¸€å°å’–å•¡æœºå°±å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå·¥å‚æ¨¡å¼ï¼Œä½ åªéœ€è¦æŒ‰ä¸‹æƒ³å–çš„å’–å•¡å“ç±»çš„æŒ‰é’®ï¼ˆæ‘©å¡æˆ–æ‹¿é“ï¼‰ï¼Œå®ƒå°±ä¼šç»™ä½ ç”Ÿäº§ä¸€æ¯ç›¸åº”çš„å’–å•¡ï¼Œä½ ä¸éœ€è¦ç®¡å®ƒå†…éƒ¨çš„å…·ä½“å®ç°ï¼Œåªè¦å‘Šè¯‰å®ƒä½ çš„éœ€æ±‚å³å¯ï¼› ã€ä¼˜ç‚¹ã€‘å·¥å‚ç±»å«æœ‰å¿…è¦çš„åˆ¤æ–­é€»è¾‘ï¼Œå¯ä»¥å†³å®šåœ¨ä»€ä¹ˆæ—¶å€™åˆ›å»ºå“ªä¸€ä¸ªäº§å“ç±»çš„å®ä¾‹ï¼Œå®¢æˆ·ç«¯å¯ä»¥å…é™¤ç›´æ¥åˆ›å»ºäº§å“å¯¹è±¡çš„è´£ä»»ï¼Œè€Œä»…ä»…â€œæ¶ˆè´¹â€äº§å“ï¼› ã€ç¼ºç‚¹ã€‘ ä¸æ˜“æ‹“å±•ï¼Œä¸€æ—¦æ·»åŠ æ–°çš„äº§å“ç±»å‹ï¼Œå°±ä¸å¾—ä¸ä¿®æ”¹å·¥å‚çš„åˆ›å»ºé€»è¾‘ï¼› äº§å“ç±»å‹è¾ƒå¤šæ—¶ï¼Œå·¥å‚çš„åˆ›å»ºé€»è¾‘å¯èƒ½è¿‡äºå¤æ‚ï¼Œä¸€æ—¦å‡ºé”™å¯èƒ½é€ æˆæ‰€æœ‰äº§å“çš„åˆ›å»ºå¤±è´¥ï¼Œä¸åˆ©äºç³»ç»Ÿçš„ç»´æŠ¤ã€‚ 4.è¯´è¯´æŠ½è±¡å·¥å‚æ¨¡å¼ï¼Ÿ æŠ½è±¡å·¥å‚æ¨¡å¼æ˜¯åœ¨ç®€å•å·¥å‚çš„åŸºç¡€ä¸Šå°†æœªæ¥å¯èƒ½éœ€è¦ä¿®æ”¹çš„ä»£ç æŠ½è±¡å‡ºæ¥ï¼Œé€šè¿‡ç»§æ‰¿çš„æ–¹å¼è®©å­ç±»å»åšå†³å®šã€‚ ã€ç®€å•å·¥å‚æ¨¡å¼ç¼ºç‚¹ã€‘ä»¥ä¸Šé¢çš„å’–å•¡å·¥å‚ä¸ºä¾‹ï¼ŒæŸå¤©æˆ‘çš„å£å‘³çªç„¶å˜äº†ï¼Œä¸æƒ³å–å’–å•¡äº†æƒ³å–å•¤é…’ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœç›´æ¥ä¿®æ”¹ç®€å•å·¥å‚é‡Œé¢çš„ä»£ç ï¼Œè¿™ç§åšæ³•ä¸ä½†ä¸å¤Ÿä¼˜é›…ï¼Œä¹Ÿä¸ç¬¦åˆè½¯ä»¶è®¾è®¡çš„â€œå¼€é—­åŸåˆ™â€ï¼Œå› ä¸ºæ¯æ¬¡æ–°å¢å“ç±»éƒ½è¦ä¿®æ”¹åŸæ¥çš„ä»£ç ã€‚ ã€æŠ½è±¡å·¥å‚ã€‘æŠ½è±¡å·¥å‚é‡Œåªå£°æ˜æ–¹æ³•ï¼Œå…·ä½“çš„å®ç°äº¤ç»™å­ç±»ï¼ˆå­å·¥å‚ï¼‰å»å®ç°ï¼Œè¿™ä¸ªæ—¶å€™å†æœ‰æ–°å¢å“ç±»çš„éœ€æ±‚ï¼Œåªéœ€è¦æ–°åˆ›å»ºä»£ç å³å¯ã€‚å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªå•¤é…’å·¥å‚è€Œä¸æ˜¯å’–å•¡å·¥å‚ã€‚ 5.è£…é¥°å™¨æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ ä¸å¤Ÿæ·±å…¥ã€‚ è£…é¥°å™¨æ¨¡å¼æ˜¯æŒ‡åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡å¢åŠ ä¸€äº›é¢å¤–çš„åŠŸèƒ½ï¼ŒåŒæ—¶åˆä¸æ”¹å˜å…¶ç»“æ„ã€‚ 9.2 åˆ†å¸ƒå¼é—®é¢˜ã€æ ¡æ‹›å¿…é—®ã€‘ éå¸¸ç³»ç»Ÿçš„æ€»ç»“æ–‡æ¡£ï¼šåˆ†å¸ƒå¼ç›¸å…³ï¼šç¬¬ä¸€é¡µ CAP ç†è®ºæŒ‡çš„æ˜¯ä»€ä¹ˆï¼šCï¼ˆConsistencyï¼‰æ˜¯æ•°æ®ä¸€è‡´æ€§ã€Aï¼ˆAvailabilityï¼‰æ˜¯æœåŠ¡å¯ç”¨æ€§ã€Pï¼ˆPartition toleranceï¼‰æ˜¯åˆ†åŒºå®¹é”™æ€§ã€‚ é—®é¢˜å¼•å…¥ ç°åœ¨æœ‰ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿ Aï¼Œå®ƒæœ‰ä¸€ä¸ªå‰¯æœ¬ A1ï¼Œåœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯ Client å†™æ•°æ®åˆ°ç³»ç»Ÿ Aï¼Œç„¶åæ•°æ®ä» A èŠ‚ç‚¹åŒæ­¥åˆ° A1 èŠ‚ç‚¹ï¼Œå†è¿”å›ç»™ Client æˆåŠŸçŠ¶æ€ã€‚ ä½†ç”±äºç½‘ç»œæ˜¯ä¸å¯é çš„ï¼ŒèŠ‚ç‚¹ A å’Œ A1 çš„ç½‘ç»œéšæ—¶ä¼šå› ä¸ºä¸­æ–­è€Œå‡ºç°åˆ†åŒºã€‚æ‰€è°“ç½‘ç»œåˆ†åŒºå°±æ˜¯ç”±äºç½‘ç»œä¸é€šå¯¼è‡´èŠ‚ç‚¹ A å’Œ A1 è¢«éš”ç¦»åœ¨ä¸åŒçš„ç½‘ç»œå­é›†ä¸­ï¼Œæ­¤æ—¶èŠ‚ç‚¹ A çš„æ•°æ®å°±ä¸èƒ½åŠæ—¶åŒæ­¥åˆ°èŠ‚ç‚¹ A1 ä¸­äº†ã€‚ 9.1.1 åœ¨CAPåŸºç¡€ä¸Šè®²è®²BASEï¼Ÿä¸¾å®ä¾‹è¯´è¯´ï¼Ÿ BASE ç†è®ºï¼Œå®ƒæ˜¯ CAP ç†è®ºçš„å»¶ä¼¸ã€‚BASE æ˜¯ Basically Availableï¼ˆåŸºæœ¬å¯ç”¨ï¼‰ã€Soft Stateï¼ˆè½¯çŠ¶æ€ï¼‰å’Œ Eventually Consistentï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰ä¸‰ä¸ªå•è¯çš„ç®€å†™ï¼Œä½œç”¨æ˜¯ä¿è¯ç³»ç»Ÿçš„å¯ç”¨æ€§ï¼Œç„¶åé€šè¿‡æœ€ç»ˆä¸€è‡´æ€§æ¥ä»£æ›¿å¼ºä¸€è‡´æ€§ï¼Œå®ƒæ˜¯ç›®å‰åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡ä¸­æœ€å…·æŒ‡å¯¼æ„ä¹‰çš„ç»éªŒæ€»ç»“ã€‚ å…¶å®æ˜¯åšäº†â€œå¯ç”¨æ€§â€æ–¹é¢çš„å¦¥åï¼Œæ¯”å¦‚ï¼š ç”µå•†ç½‘ç«™åœ¨åŒåä¸€å¤§ä¿ƒç­‰è®¿é—®å‹åŠ›è¾ƒå¤§çš„æ—¶å€™ï¼Œå…³é—­å•†å“æ’è¡Œæ¦œç­‰æ¬¡è¦åŠŸèƒ½çš„å±•ç¤ºï¼Œä»è€Œä¿è¯å•†å“äº¤æ˜“ä¸»æµç¨‹çš„å¯ç”¨æ€§ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬å¸¸è¯´çš„æœåŠ¡é™çº§ï¼› ä¸ºäº†é”™å¼€åŒåä¸€é«˜å³°æœŸï¼Œç”µå•†ç½‘ç«™ä¼šå°†é¢„å”®å•†å“çš„æ”¯ä»˜æ—¶é—´å»¶åååˆ°äºŒååˆ†é’Ÿï¼Œè¿™å°±æ˜¯æµé‡å‰Šå³°ï¼› åœ¨ä½ æŠ¢è´­å•†å“çš„æ—¶å€™ï¼Œå¾€å¾€ä¼šåœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…å¤„ç†ï¼Œè¿™ä¹Ÿæ˜¯å¸¸ç”¨çš„å»¶è¿Ÿé˜Ÿåˆ—ã€‚ è½¯çŠ¶æ€å’Œæœ€ç»ˆä¸€è‡´æ€§æŒ‡çš„æ˜¯å…è®¸ç³»ç»Ÿä¸­çš„æ•°æ®å­˜åœ¨ä¸­é—´çŠ¶æ€ï¼Œè¿™åŒæ ·æ˜¯ä¸ºäº†ç³»ç»Ÿå¯ç”¨æ€§è€Œç‰ºç‰²ä¸€æ®µæ—¶é—´çª—å†…çš„æ•°æ®ä¸€è‡´æ€§ï¼Œä»è€Œä¿è¯æœ€ç»ˆçš„æ•°æ®ä¸€è‡´æ€§çš„åšæ³•ã€‚ 9.1.2 äº¿çº§å•†å“åˆ†å¸ƒå¼å­˜å‚¨é—®é¢˜ï¼Ÿ 1.å¦‚ä½•è®¾è®¡ä¸€ä¸ªæ”¯æŒæµ·é‡å•†å“å­˜å‚¨çš„é«˜æ‰©å±•æ€§æ¶æ„ï¼Ÿ ä»è¿™ä¸€ç‚¹å‡ºå‘ä¼šè€ƒå¯Ÿä½ Hashï¼ˆå“ˆå¸Œï¼‰åˆ†ç‰‡çš„å…·ä½“å®ç°åŸç†ã€‚ ä»¥å•†å“ ID ä½œä¸ºå…³é”®å­—è¿›è¡Œåˆ†ç‰‡ï¼Œç³»ç»Ÿä¼šé€šè¿‡ä¸€ä¸ª Hash å‡½æ•°è®¡ç®—å•†å“ ID çš„ Hash å€¼ï¼Œç„¶åå–æ¨¡ï¼Œå°±èƒ½å¾—åˆ°å¯¹åº”çš„åˆ†ç‰‡ï¼› 2.åœ¨åšåˆ†åº“åˆ†è¡¨æ—¶ï¼ŒåŸºäº Hash å–æ¨¡å’Œä¸€è‡´æ€§ Hash çš„æ•°æ®åˆ†ç‰‡æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ è§£å†³ Hash åˆ†ç‰‡çš„ç¼ºç‚¹ï¼Œæ—¢ä¿è¯æ•°æ®å‡åŒ€åˆ†å¸ƒï¼Œåˆä¿è¯æ‰©å±•æ€§ ï¼Œæœ€ç»ˆé‡‡ç”¨ä¸€è‡´æ€§ Hash ï¼šå®ƒæ˜¯æŒ‡å°†å­˜å‚¨èŠ‚ç‚¹å’Œæ•°æ®éƒ½æ˜ å°„åˆ°ä¸€ä¸ªé¦–å°¾ç›¸è¿çš„å“ˆå¸Œç¯ä¸Šã€‚ å…·ä½“è§å‰ï¼Œä¸€è‡´æ€§å“ˆå¸Œç›¸å…³ç®—æ³•æè¿° 3.åœ¨ç”µå•†å¤§ä¿ƒæ—¶æœŸï¼Œå¦‚ä½•å¯¹çƒ­ç‚¹å•†å“æ•°æ®åšå­˜å‚¨ç­–ç•¥ ï¼Ÿ é—®é¢˜ ä¸€è‡´æ€§ Hash æå‡äº†ç¨³å®šæ€§ï¼Œä½¿èŠ‚ç‚¹çš„åŠ å…¥å’Œé€€å‡ºä¸ä¼šé€ æˆå¤§è§„æ¨¡çš„æ•°æ®è¿ç§»ï¼Œä½†æœ¬è´¨ä¸Š Hash åˆ†ç‰‡æ˜¯ä¸€ç§é™æ€çš„åˆ†ç‰‡æ–¹å¼ï¼Œå¿…é¡»è¦æå‰è®¾å®šåˆ†ç‰‡çš„æœ€å¤§è§„æ¨¡ï¼Œè€Œä¸”æ— æ³•é¿å…å•ä¸€çƒ­ç‚¹é—®é¢˜ï¼Œ æŸä¸€æ•°æ®è¢«æµ·é‡å¹¶å‘è¯·æ±‚åï¼Œä¸è®ºå¦‚ä½•è¿›è¡Œ Hashï¼Œæ•°æ®ä¹Ÿåªèƒ½å­˜åœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œè¿™åŠ¿å¿…ä¼šå¸¦æ¥çƒ­ç‚¹è¯·æ±‚é—®é¢˜ã€‚ è§£å†³ åš Rangeï¼ˆèŒƒå›´ï¼‰åˆ†ç‰‡ã€‚ ä¸ Hash åˆ†ç‰‡ä¸åŒçš„æ˜¯ï¼ŒRange åˆ†ç‰‡èƒ½ç»“åˆä¸šåŠ¡é€»è¾‘è§„åˆ™ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬ç”¨ â€œCategoryï¼ˆå•†å“ç±»ç›®ï¼‰â€ ä½œä¸ºå…³é”®å­—è¿›è¡ŒåŠ¨æ€åˆ†ç‰‡æ—¶ï¼Œä¸æ˜¯ä»¥ç»Ÿä¸€çš„å•†å“ä¸€çº§ç±»ç›®ä¸ºæ ‡å‡†ï¼Œè€Œæ˜¯å¯ä»¥æŒ‰ç…§ä¸€ã€äºŒã€ä¸‰çº§ç±»ç›®è¿›è¡Œçµæ´»åˆ†ç‰‡ã€‚ä¾‹å¦‚ï¼Œå¯¹äºäº¬ä¸œå¼ºåŠ¿çš„ 3C å“ç±»ï¼Œå¯ä»¥æŒ‰ç…§ 3C çš„ä¸‰çº§å“ç±»è®¾ç½®åˆ†ç‰‡ï¼›å¯¹äºå¼±åŠ¿å“ç±»ï¼Œå¯ä»¥å…ˆæŒ‰ç…§ä¸€çº§å“ç±»è¿›è¡Œåˆ†ç‰‡ï¼Œè¿™æ ·ä¼šè®©åˆ†ç‰‡é—´çš„æ•°æ®æ›´åŠ å¹³è¡¡ã€‚ 4.å¼ºä¸€è‡´æ€§å’Œæœ€ç»ˆä¸€è‡´æ€§çš„æ•°æ®å…±è¯†ç®—æ³•æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ 9.1.3 æµ·é‡å¹¶å‘ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡ä¸€è‡´æ€§é—®é¢˜ï¼Ÿ ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ï¼Ÿ ä¸€æ¬¡å¤§çš„æ“ä½œç”±å¤šä¸ªå°æ“ä½œç»„æˆï¼Œè¿™äº›å°çš„æ“ä½œåˆ†å¸ƒåœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œåˆ†å¸ƒå¼äº‹åŠ¡éœ€è¦ä¿è¯è¿™äº›å°æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚ ä¸¾ä¸€ä¸ªå®ä¾‹ï¼š äº¬ä¸œæ—…è¡Œç³»ç»Ÿï¼Œæ‹†åˆ†æˆå¤šä¸ªå­ç³»ç»Ÿï¼Œå¦‚å•†å“ç³»ç»Ÿã€ä¿ƒé”€ç³»ç»Ÿã€è®¢å•ç³»ç»Ÿã€‚ç”¨æˆ·ä¸‹å•æ—¶ï¼Œè®¢å•ç³»ç»Ÿç”Ÿæˆè®¢å•ï¼Œå•†å“ç³»ç»Ÿæ‰£å‡åº“å­˜ï¼Œä¿ƒé”€ç³»ç»Ÿæ‰£å‡ä¼˜æƒ åˆ¸ï¼Œåªæœ‰å½“ä¸‰ä¸ªç³»ç»Ÿçš„äº‹åŠ¡éƒ½æäº¤ä¹‹åï¼Œæ‰è®¤ä¸ºæ­¤æ¬¡ä¸‹å•æˆåŠŸï¼Œå¦åˆ™å¤±è´¥ã€‚ è§£å†³æ–¹æ¡ˆ æœ‰ä¸¤é˜¶æ®µæäº¤åè®®ï¼ˆTwo-Phase Commitï¼Œ2PCï¼‰ã€3PC ã€TCC å’ŒåŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„å®ç°æ–¹å¼ã€‚ é”™è¯¯å›ç­”ï¼šæ–¹æ¡ˆå¾ˆå¤šï¼Œå¯ä»¥é€‰æ‹© 2PC ï¼Œ2PC å®ç°çš„æµç¨‹æ˜¯â€¦ é”™è¯¯åŸå› ï¼š å› ä¸ºåœ¨å®é™…å·¥ä½œä¸­ï¼Œå¾ˆå°‘é‡‡ç”¨å‰å‡ ç§æ–¹æ¡ˆï¼ˆäº’è”ç½‘ä¸­è½åœ°æ–¹æ¡ˆä»£ä»·å¤§ï¼‰ï¼ŒåŸºæœ¬éƒ½æ˜¯åŸºäº MQ çš„å¯é æ¶ˆæ¯æŠ•é€’çš„æ–¹å¼æ¥å®ç°ã€‚ æ­£ç¡®å›ç­”ï¼šå…ˆä»‹ç»ç›®å‰ä¸»æµå®ç°åˆ†å¸ƒå¼ç³»ç»Ÿäº‹åŠ¡ä¸€è‡´æ€§çš„æ–¹æ¡ˆï¼ˆä¹Ÿå°±æ˜¯åŸºäº MQ çš„å¯é æ¶ˆæ¯æŠ•é€’çš„æœºåˆ¶ï¼‰ç„¶åå›ç­”å‡ºå¯å®ç°æ–¹æ¡ˆå’Œå…³é”®çŸ¥è¯†ç‚¹ã€‚å¦å¤–ï¼Œä¸ºäº†å’Œé¢è¯•å®˜è¿›ä¸€æ­¥äº¤æµï¼Œä½ å¯ä»¥æå‡º 2PC æˆ– TCC ï¼ˆè¿™æ˜¯ä¸€ç§äº¤æµæ–¹æ¡ˆï¼‰ã€‚ å›ç­”ä¸€ã€åŸºäº MQ çš„å¯é æ¶ˆæ¯æŠ•é€’æ–¹æ¡ˆ ä»€ä¹ˆæ˜¯MQ æ ¸å¿ƒçš„äº”ä¸ªæ¦‚å¿µï¼š Queue: çœŸæ­£å­˜å‚¨æ•°æ®çš„åœ°æ–¹ Exchange: æ¥æ”¶è¯·æ±‚ï¼Œè½¬å­˜æ•°æ® Bind: æ”¶åˆ°è¯·æ±‚åå­˜å‚¨åˆ°å“ªé‡Œ æ¶ˆæ¯ç”Ÿäº§è€…:å‘é€æ•°æ®çš„åº”ç”¨ æ¶ˆæ¯æ¶ˆè´¹è€…: å–å‡ºæ•°æ®å¤„ç†çš„åº”ç”¨ åœºæ™¯å®ä¾‹ è®¢å•ç³»ç»Ÿï¼ˆ1ï¼‰å®Œæˆè®¢å•åï¼Œï¼ˆ2ï¼‰è´­ç‰©è½¦ç³»ç»Ÿå‡è´­ç‰©è½¦ä¸­çš„å•†å“ã€‚ è®¢å•ç³»ç»Ÿåœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸Šå¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼ˆæ²¡æœ‰åˆ›å»ºè®¢å•ï¼‰ï¼› è®¢å•ç³»ç»Ÿç»™æ¶ˆæ¯æœåŠ¡å™¨å‘é€ä¸€ä¸ªâ€œåŠæ¶ˆæ¯â€ï¼› è¿™ä¸ªåŠæ¶ˆæ¯ä¸æ˜¯è¯´æ¶ˆæ¯å†…å®¹ä¸å®Œæ•´ï¼Œå®ƒåŒ…å«çš„å†…å®¹å°±æ˜¯å®Œæ•´çš„æ¶ˆæ¯å†…å®¹ï¼ŒåŠæ¶ˆæ¯å’Œæ™®é€šæ¶ˆæ¯çš„å”¯ä¸€åŒºåˆ«æ˜¯ï¼Œåœ¨äº‹åŠ¡æäº¤ä¹‹å‰ï¼Œå¯¹äºæ¶ˆè´¹è€…æ¥è¯´ï¼Œè¿™ä¸ªæ¶ˆæ¯æ˜¯ä¸å¯è§çš„ã€‚ åŠæ¶ˆæ¯å‘é€æˆåŠŸåï¼Œè®¢å•ç³»ç»Ÿå°±å¯ä»¥æ‰§è¡Œæœ¬åœ°äº‹åŠ¡äº†ï¼Œåœ¨è®¢å•åº“ä¸­åˆ›å»ºä¸€æ¡è®¢å•è®°å½•ï¼Œå¹¶æäº¤è®¢å•åº“çš„æ•°æ®åº“äº‹åŠ¡ã€‚ ç„¶åæ ¹æ®æœ¬åœ°äº‹åŠ¡çš„æ‰§è¡Œç»“æœå†³å®šæäº¤æˆ–è€…å›æ»šäº‹åŠ¡æ¶ˆæ¯ã€‚ å¦‚æœè®¢å•åˆ›å»ºæˆåŠŸï¼Œé‚£å°±æäº¤äº‹åŠ¡æ¶ˆæ¯ï¼Œè´­ç‰©è½¦ç³»ç»Ÿå°±å¯ä»¥æ¶ˆè´¹åˆ°è¿™æ¡æ¶ˆæ¯ç»§ç»­åç»­çš„æµç¨‹ã€‚å¦‚æœè®¢å•åˆ›å»ºå¤±è´¥ï¼Œé‚£å°±å›æ»šäº‹åŠ¡æ¶ˆæ¯ï¼Œè´­ç‰©è½¦ç³»ç»Ÿå°±ä¸ä¼šæ”¶åˆ°è¿™æ¡æ¶ˆæ¯ã€‚ è´­ç‰©ç³»ç»Ÿæ¶ˆè´¹è¿™æ¡æ‹¿åˆ°çš„è®¢å•ç³»ç»Ÿæ¶ˆæ¯ï¼ˆç¡®è®¤äº†è®¢å•ç³»ç»Ÿäº‹åŠ¡æ‰§è¡Œå®Œæ¯•ï¼‰ï¼Œè¿™æ ·å°±å¯ä»¥ç»§ç»­ä¸‹ä¸€æ­¥è´­ç‰©æ“ä½œ 9.1.4 åˆ†å¸ƒå¼é”é—®é¢˜ 06 åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå¦‚ä½•å›ç­”é”çš„å®ç°åŸç†ï¼Ÿ åˆ†å¸ƒå¼é”æ˜¯è§£å†³åè°ƒåˆ†å¸ƒå¼ç³»ç»Ÿä¹‹é—´ï¼ŒåŒæ­¥è®¿é—®å…±äº«èµ„æºçš„ä¸€ç§æ–¹å¼ã€‚è¯¦ç»†æ¥è®²ï¼šåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œå¤šä¸ªç³»ç»Ÿåœ¨åŒæ—¶æ“ä½œå…±äº«èµ„æºï¼ˆå¦‚å†™æ•°æ®ï¼‰æ—¶ï¼Œå‘èµ·æ“ä½œçš„ç³»ç»Ÿé€šå¸¸ä¼šé€šè¿‡ä¸€ç§æ–¹å¼å»åè°ƒå…¶ä»–ç³»ç»Ÿï¼Œç„¶åè·å–è®¿é—®æƒé™ï¼Œå¾—åˆ°è®¿é—®æƒé™åæ‰å¯ä»¥å†™å…¥æ•°æ®ï¼Œå…¶ä»–ç³»ç»Ÿå¿…é¡»ç­‰å¾…æƒé™é‡Šæ”¾ã€‚ åŸºäºredisçš„åˆ†å¸ƒå¼é” ä½¿ç”¨setnxå‘½ä»¤åŠ é” 12345678public static void wrongGetLock1(Jedis jedis, String lockKey, String requestId, int expireTime) &#123; // ç¬¬ä¸€æ­¥ï¼šåŠ é” Long result = jedis.setnx(lockKey, requestId); if (result == 1) &#123; // ç¬¬äºŒæ­¥ï¼šè®¾ç½®è¿‡æœŸæ—¶é—´ jedis.expire(lockKey, expireTime); &#125;&#125; setnxå‘½ä»¤ï¼Œæ„æ€å°±æ˜¯ set if not existï¼Œå¦‚æœlockKeyä¸å­˜åœ¨ï¼ŒæŠŠkeyå­˜å…¥Redisï¼Œä¿å­˜æˆåŠŸåå¦‚æœresultè¿”å›1ï¼Œè¡¨ç¤ºè®¾ç½®æˆåŠŸï¼Œå¦‚æœé1ï¼Œè¡¨ç¤ºå¤±è´¥ï¼Œåˆ«çš„çº¿ç¨‹å·²ç»è®¾ç½®è¿‡äº†ã€‚ expire()ï¼Œè®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œé˜²æ­¢æ­»é”ï¼Œå‡è®¾ï¼Œå¦‚æœä¸€ä¸ªé”setåï¼Œä¸€ç›´ä¸åˆ æ‰ï¼Œé‚£è¿™ä¸ªé”ç›¸å½“äºä¸€ç›´å­˜åœ¨ï¼Œäº§ç”Ÿæ­»é”ã€‚ è§£å†³setnxä¸expireä¸æ˜¯ä¸€ä¸ªåŸå­æ“ä½œ åŠ é”æ€»å…±åˆ†ä¸¤æ­¥ï¼Œç¬¬ä¸€æ­¥jedis.setnxï¼Œç¬¬äºŒæ­¥jedis.expireè®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œsetnxä¸expireä¸æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œå¦‚æœç¨‹åºæ‰§è¡Œå®Œç¬¬ä¸€æ­¥åå¼‚å¸¸äº†ï¼Œç¬¬äºŒæ­¥jedis.expire(lockKey, expireTime)æ²¡æœ‰å¾—åˆ°æ‰§è¡Œï¼Œç›¸å½“äºè¿™ä¸ªé”æ²¡æœ‰è¿‡æœŸæ—¶é—´ï¼Œæœ‰äº§ç”Ÿæ­»é”çš„å¯èƒ½ã€‚ è§£å†³æ–¹æ¡ˆä¸ºï¼šä¸€æ­¥æ“ä½œ 123456789101112131415161718192021222324252627282930313233public class RedisLockDemo &#123; private static final String SET_IF_NOT_EXIST = &quot;NX&quot;; private static final String SET_WITH_EXPIRE_TIME = &quot;PX&quot;; /** * è·å–åˆ†å¸ƒå¼é” * @param jedis Rediså®¢æˆ·ç«¯ * @param lockKey é” * @param requestId è¯·æ±‚æ ‡è¯† * @param expireTime è¶…æœŸæ—¶é—´ * @return æ˜¯å¦è·å–åŠŸ */ public static boolean getLock(Jedis jedis, String lockKey, String requestId, int expireTime) &#123; // ä¸¤æ­¥åˆäºŒä¸ºä¸€ï¼Œä¸€è¡Œä»£ç åŠ é”å¹¶è®¾ç½® + è¿‡æœŸæ—¶é—´ã€‚ if (1 == jedis.set(lockKey, requestId, SET_IF_NOT_EXIST, SET_WITH_EXPIRE_TIME, expireTime)) &#123; return true;//åŠ é”æˆåŠŸ &#125; return false;//åŠ é”å¤±è´¥ &#125; // è§£é”ï¼šå¯¹åº”delåˆ é™¤keyå³å¯ public static void unLock(Jedis jedis, String lockKey, String requestId) &#123; // ç¬¬ä¸€æ­¥ï¼š ä½¿ç”¨ requestId åˆ¤æ–­åŠ é”ä¸è§£é”æ˜¯ä¸æ˜¯åŒä¸€ä¸ªå®¢æˆ·ç«¯ if (requestId.equals(jedis.get(lockKey))) &#123; // ç¬¬äºŒæ­¥ï¼š è‹¥åœ¨æ­¤æ—¶ï¼Œè¿™æŠŠé”çªç„¶ä¸æ˜¯è¿™ä¸ªå®¢æˆ·ç«¯çš„ï¼Œåˆ™ä¼šè¯¯è§£é” jedis.del(lockKey); &#125; &#125;&#125; â€‹ åŸºäºZoopkeeperçš„åˆ†å¸ƒå¼é” syncï¼Œlockä¹Ÿåªèƒ½ä¿è¯ä½ å½“å‰æœºå™¨çº¿ç¨‹å®‰å…¨ï¼Œè¿™æ ·åˆ†å¸ƒå¼è®¿é—®è¿˜æ˜¯æœ‰é—®é¢˜ã€‚ å»ºè®®å‚è€ƒï¼šhttps://www.cnblogs.com/aobing/p/12650036.html ä¸€ä¸ªæœºå™¨æ¥æ”¶åˆ°äº†è¯·æ±‚ä¹‹åï¼Œå…ˆè·å– zookeeper ä¸Šçš„ä¸€æŠŠåˆ†å¸ƒå¼é”ï¼ˆzkä¼šåˆ›å»ºä¸€ä¸ª znodeï¼‰ï¼Œæ‰§è¡Œæ“ä½œï¼›ç„¶åå¦å¤–ä¸€ä¸ªæœºå™¨ä¹Ÿå°è¯•å»åˆ›å»ºé‚£ä¸ª znodeï¼Œç»“æœå‘ç°è‡ªå·±åˆ›å»ºä¸äº†ï¼Œå› ä¸ºè¢«åˆ«äººåˆ›å»ºäº†ï¼Œé‚£åªèƒ½ç­‰å¾…ï¼Œç­‰ç¬¬ä¸€ä¸ªæœºå™¨æ‰§è¡Œå®Œäº†æ–¹å¯æ‹¿åˆ°é”ã€‚ ä¸‹é¢æ˜¯åˆ›å»ºä¸´æ—¶é¡ºåºèŠ‚ç‚¹çš„æƒ…å†µï¼š å®¢æˆ·ç«¯è°ƒç”¨create()æ–¹æ³•åˆ›å»ºåä¸ºâ€œ/dlm-locks/lockname/lock-â€çš„ä¸´æ—¶é¡ºåºèŠ‚ç‚¹ã€‚ å®¢æˆ·ç«¯è°ƒç”¨getChildren(â€œlocknameâ€)æ–¹æ³•æ¥è·å–æ‰€æœ‰å·²ç»åˆ›å»ºçš„å­èŠ‚ç‚¹ã€‚ å®¢æˆ·ç«¯è·å–åˆ°æ‰€æœ‰å­èŠ‚ç‚¹pathä¹‹åï¼Œå¦‚æœå‘ç°è‡ªå·±åœ¨æ­¥éª¤1ä¸­åˆ›å»ºçš„èŠ‚ç‚¹æ˜¯æ‰€æœ‰èŠ‚ç‚¹ä¸­åºå·æœ€å°çš„ï¼Œå°±æ˜¯çœ‹è‡ªå·±åˆ›å»ºçš„åºåˆ—å·æ˜¯å¦æ’ç¬¬ä¸€ï¼Œå¦‚æœæ˜¯ç¬¬ä¸€ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºè¿™ä¸ªå®¢æˆ·ç«¯è·å¾—äº†é”ï¼Œåœ¨å®ƒå‰é¢æ²¡æœ‰åˆ«çš„å®¢æˆ·ç«¯æ‹¿åˆ°é”ã€‚ å¦‚æœåˆ›å»ºçš„èŠ‚ç‚¹ä¸æ˜¯æ‰€æœ‰èŠ‚ç‚¹ä¸­éœ€è¦æœ€å°çš„ï¼Œé‚£ä¹ˆåˆ™ç›‘è§†æ¯”è‡ªå·±åˆ›å»ºèŠ‚ç‚¹çš„åºåˆ—å·å°çš„æœ€å¤§çš„èŠ‚ç‚¹ï¼Œè¿›å…¥ç­‰å¾…ã€‚ç›´åˆ°ä¸‹æ¬¡ç›‘è§†çš„å­èŠ‚ç‚¹å˜æ›´çš„æ—¶å€™ï¼Œå†è¿›è¡Œå­èŠ‚ç‚¹çš„è·å–ï¼Œåˆ¤æ–­æ˜¯å¦è·å–é”ã€‚ åŸºäºå…³ç³»å‹æ•°æ®åº“ MySQL å®ç°åˆ†å¸ƒå¼é” å‚è€ƒï¼šhttps://juejin.cn/post/6844904137172189198 åˆ©ç”¨ Mysql çš„é”è¡¨ï¼Œåˆ›å»ºä¸€å¼ è¡¨ï¼Œè®¾ç½®ä¸€ä¸ª UNIQUE KEYï¼ˆå¦‚ï¼Œåˆ©ç”¨ä¸»é”®IDçš„å”¯ä¸€æ€§ï¼‰ è¿™ä¸ª KEY å°±æ˜¯è¦é”çš„ KEYï¼Œæ‰€ä»¥åŒä¸€ä¸ª KEY åœ¨mysqlè¡¨é‡Œåªèƒ½æ’å…¥ä¸€æ¬¡äº†ã€‚ è¿™æ ·å¯¹é”çš„ç«äº‰å°±äº¤ç»™äº†æ•°æ®åº“ï¼Œå¤„ç†åŒä¸€ä¸ª KEY æ•°æ®åº“ä¿è¯äº†åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹èƒ½æ’å…¥æˆåŠŸï¼Œå…¶ä»–èŠ‚ç‚¹éƒ½ä¼šæ’å…¥å¤±è´¥ã€‚ å®šä¹‰åŠ é”ã€è§£é”ä»£ç å¦‚ä¸‹ï¼š 123456789def lock ï¼š exec sql: ins ert into lockedtable (xxx) values (xxx) if result == true : return true else : return falsedef def unlock ï¼š # è§£é”å°±æ˜¯åˆ é™¤ exec sql: delete from lockedOrder where order_id=&#x27;order_id&#x27; 9.3 å…¶å®ƒé—®é¢˜ 1. ã€å­—èŠ‚-æ‡‚è½¦å¸ã€‘ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿ å‚è€ƒï¼šhttps://www.jianshu.com/p/f049ac7e2220 è·¨åŸŸï¼Œæ˜¯æŒ‡æµè§ˆå™¨ä¸èƒ½æ‰§è¡Œå…¶ä»–ç½‘ç«™çš„è„šæœ¬ã€‚å®ƒæ˜¯ç”±æµè§ˆå™¨çš„åŒæºç­–ç•¥é€ æˆçš„ï¼Œæ˜¯æµè§ˆå™¨å¯¹JavaScriptå®æ–½çš„å®‰å…¨é™åˆ¶ã€‚ åŒæºç­–ç•¥é™åˆ¶äº†ä¸€ä¸‹è¡Œä¸ºï¼š Cookieã€LocalStorage å’Œ IndexDB æ— æ³•è¯»å– DOM å’Œ JS å¯¹è±¡æ— æ³•è·å– Ajaxè¯·æ±‚å‘é€ä¸å‡ºå» å…·ä½“çš„ä¸€äº›å®ä¾‹ï¼š éè·¨åŸŸ 1http://www.xxxyyy.cn/index.html è°ƒç”¨ http://www.xxxyyy.cn/server.php éè·¨åŸŸ è·¨åŸŸï¼šä¸»åŸŸä¸åŒ 1http://www.xxxyyy.cn/index.html è°ƒç”¨ http://www.xxx.cn/server.php è·¨åŸŸï¼šå­åŸŸåä¸åŒ 1http://abc.xxxyyy.cn/index.html è°ƒç”¨ http://def.xxx.cn/server.php è·¨åŸŸï¼šç«¯å£ä¸åŒ 1http://www.xxx.cn:**8080**/index.html è°ƒç”¨ http://www.xxx.cn/server.php è·¨åŸŸï¼šåè®®ä¸åŒ 1**https**://www.xxx.cn/index.html è°ƒç”¨ **http**://www.xxx.cn/server.php","categories":[{"name":"æ ¡æ‹›ç¬”è®°","slug":"æ ¡æ‹›ç¬”è®°","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/"},{"name":"è®¡ç®—æœºåŸºç¡€","slug":"æ ¡æ‹›ç¬”è®°/è®¡ç®—æœºåŸºç¡€","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"æ ¡æ‹›","slug":"æ ¡æ‹›","permalink":"https://hwh.zone/tags/%E6%A0%A1%E6%8B%9B/"},{"name":"è®¡ç®—æœºåŸºç¡€","slug":"è®¡ç®—æœºåŸºç¡€","permalink":"https://hwh.zone/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"},{"name":"åˆ†å¸ƒå¼","slug":"åˆ†å¸ƒå¼","permalink":"https://hwh.zone/tags/%E5%88%86%E5%B8%83%E5%BC%8F/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://hwh.zone/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]}],"categories":[{"name":"C++","slug":"C","permalink":"https://hwh.zone/categories/C/"},{"name":"ä»é›¶å¼€å§‹","slug":"C/ä»é›¶å¼€å§‹","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"},{"name":"Linuxç³»ç»Ÿç¼–ç¨‹","slug":"C/ä»é›¶å¼€å§‹/Linuxç³»ç»Ÿç¼–ç¨‹","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/Linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"name":"C++è¿›é˜¶","slug":"C/ä»é›¶å¼€å§‹/C-è¿›é˜¶","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/C-%E8%BF%9B%E9%98%B6/"},{"name":"C++é¢å¯¹å¯¹è±¡","slug":"C/ä»é›¶å¼€å§‹/C-é¢å¯¹å¯¹è±¡","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/C-%E9%9D%A2%E5%AF%B9%E5%AF%B9%E8%B1%A1/"},{"name":"C++åŸºç¡€","slug":"C/ä»é›¶å¼€å§‹/C-åŸºç¡€","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/C-%E5%9F%BA%E7%A1%80/"},{"name":"C++ç¯å¢ƒæ­å»º","slug":"C/ä»é›¶å¼€å§‹/C-ç¯å¢ƒæ­å»º","permalink":"https://hwh.zone/categories/C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/C-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"name":"å»ºç«™","slug":"å»ºç«™","permalink":"https://hwh.zone/categories/%E5%BB%BA%E7%AB%99/"},{"name":"æ ¡æ‹›ç¬”è®°","slug":"æ ¡æ‹›ç¬”è®°","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/"},{"name":"è®¡ç®—æœºåŸºç¡€","slug":"æ ¡æ‹›ç¬”è®°/è®¡ç®—æœºåŸºç¡€","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"},{"name":"JAVA","slug":"æ ¡æ‹›ç¬”è®°/JAVA","permalink":"https://hwh.zone/categories/%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/JAVA/"},{"name":"Git","slug":"Git","permalink":"https://hwh.zone/categories/Git/"}],"tags":[{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://hwh.zone/tags/%E6%95%99%E7%A8%8B/"},{"name":"ç³»ç»Ÿç¼–ç¨‹","slug":"ç³»ç»Ÿç¼–ç¨‹","permalink":"https://hwh.zone/tags/%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"name":"C++","slug":"C","permalink":"https://hwh.zone/tags/C/"},{"name":"C++è¿›é˜¶","slug":"C-è¿›é˜¶","permalink":"https://hwh.zone/tags/C-%E8%BF%9B%E9%98%B6/"},{"name":"STL","slug":"STL","permalink":"https://hwh.zone/tags/STL/"},{"name":"C++åŸºç¡€","slug":"C-åŸºç¡€","permalink":"https://hwh.zone/tags/C-%E5%9F%BA%E7%A1%80/"},{"name":"æ¨¡æ¿","slug":"æ¨¡æ¿","permalink":"https://hwh.zone/tags/%E6%A8%A1%E6%9D%BF/"},{"name":"ç»§æ‰¿","slug":"ç»§æ‰¿","permalink":"https://hwh.zone/tags/%E7%BB%A7%E6%89%BF/"},{"name":"è™šå‡½æ•°","slug":"è™šå‡½æ•°","permalink":"https://hwh.zone/tags/%E8%99%9A%E5%87%BD%E6%95%B0/"},{"name":"è¿ç®—ç¬¦é‡è½½","slug":"è¿ç®—ç¬¦é‡è½½","permalink":"https://hwh.zone/tags/%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD/"},{"name":"å¿«é€Ÿå…¥é—¨","slug":"å¿«é€Ÿå…¥é—¨","permalink":"https://hwh.zone/tags/%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/"},{"name":"é¢å¯¹å¯¹è±¡","slug":"é¢å¯¹å¯¹è±¡","permalink":"https://hwh.zone/tags/%E9%9D%A2%E5%AF%B9%E5%AF%B9%E8%B1%A1/"},{"name":"ç»“æ„ä½“","slug":"ç»“æ„ä½“","permalink":"https://hwh.zone/tags/%E7%BB%93%E6%9E%84%E4%BD%93/"},{"name":"æšä¸¾","slug":"æšä¸¾","permalink":"https://hwh.zone/tags/%E6%9E%9A%E4%B8%BE/"},{"name":"ç±»å‹è½¬æ¢","slug":"ç±»å‹è½¬æ¢","permalink":"https://hwh.zone/tags/%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/"},{"name":"æŒ‡é’ˆ","slug":"æŒ‡é’ˆ","permalink":"https://hwh.zone/tags/%E6%8C%87%E9%92%88/"},{"name":"å‡½æ•°","slug":"å‡½æ•°","permalink":"https://hwh.zone/tags/%E5%87%BD%E6%95%B0/"},{"name":"è¿œç¨‹å¼€å‘","slug":"è¿œç¨‹å¼€å‘","permalink":"https://hwh.zone/tags/%E8%BF%9C%E7%A8%8B%E5%BC%80%E5%8F%91/"},{"name":"C++ç¯å¢ƒæ­å»º","slug":"C-ç¯å¢ƒæ­å»º","permalink":"https://hwh.zone/tags/C-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"name":"CMake","slug":"CMake","permalink":"https://hwh.zone/tags/CMake/"},{"name":"Makefile","slug":"Makefile","permalink":"https://hwh.zone/tags/Makefile/"},{"name":"g++","slug":"g","permalink":"https://hwh.zone/tags/g/"},{"name":"ç½‘ç«™å»ºè®¾","slug":"ç½‘ç«™å»ºè®¾","permalink":"https://hwh.zone/tags/%E7%BD%91%E7%AB%99%E5%BB%BA%E8%AE%BE/"},{"name":"hexo","slug":"hexo","permalink":"https://hwh.zone/tags/hexo/"},{"name":"github pages","slug":"github-pages","permalink":"https://hwh.zone/tags/github-pages/"},{"name":"æ ¡æ‹›","slug":"æ ¡æ‹›","permalink":"https://hwh.zone/tags/%E6%A0%A1%E6%8B%9B/"},{"name":"è®¡ç®—æœºåŸºç¡€","slug":"è®¡ç®—æœºåŸºç¡€","permalink":"https://hwh.zone/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"},{"name":"åœºæ™¯é¢˜","slug":"åœºæ™¯é¢˜","permalink":"https://hwh.zone/tags/%E5%9C%BA%E6%99%AF%E9%A2%98/"},{"name":"æ™ºåŠ›é¢˜","slug":"æ™ºåŠ›é¢˜","permalink":"https://hwh.zone/tags/%E6%99%BA%E5%8A%9B%E9%A2%98/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://hwh.zone/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://hwh.zone/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"Redis","slug":"Redis","permalink":"https://hwh.zone/tags/Redis/"},{"name":"MySQL","slug":"MySQL","permalink":"https://hwh.zone/tags/MySQL/"},{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://hwh.zone/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"},{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"https://hwh.zone/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"},{"name":"Git","slug":"Git","permalink":"https://hwh.zone/tags/Git/"},{"name":"Linux","slug":"Linux","permalink":"https://hwh.zone/tags/Linux/"},{"name":"JAVA","slug":"JAVA","permalink":"https://hwh.zone/tags/JAVA/"},{"name":"ç›®å½•","slug":"ç›®å½•","permalink":"https://hwh.zone/tags/%E7%9B%AE%E5%BD%95/"},{"name":"åç«¯","slug":"åç«¯","permalink":"https://hwh.zone/tags/%E5%90%8E%E7%AB%AF/"},{"name":"åˆ†å¸ƒå¼","slug":"åˆ†å¸ƒå¼","permalink":"https://hwh.zone/tags/%E5%88%86%E5%B8%83%E5%BC%8F/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://hwh.zone/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]}